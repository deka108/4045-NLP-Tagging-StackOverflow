{"has_more": true, "items": [{"body": "<p>Here is a piece of C++ code that seems very peculiar. For some strange reason, sorting the data miraculously makes the code almost six times faster.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;algorithm&gt;\n#include &lt;ctime&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    // Generate data\n    const unsigned arraySize = 32768;\n    int data[arraySize];\n\n    for (unsigned c = 0; c &lt; arraySize; ++c)\n        data[c] = std::rand() % 256;\n\n    // !!! With this, the next loop runs faster\n    std::sort(data, data + arraySize);\n\n    // Test\n    clock_t start = clock();\n    long long sum = 0;\n\n    for (unsigned i = 0; i &lt; 100000; ++i)\n    {\n        // Primary loop\n        for (unsigned c = 0; c &lt; arraySize; ++c)\n        {\n            if (data[c] &gt;= 128)\n                sum += data[c];\n        }\n    }\n\n    double elapsedTime = static_cast&lt;double&gt;(clock() - start) / CLOCKS_PER_SEC;\n\n    std::cout &lt;&lt; elapsedTime &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"sum = \" &lt;&lt; sum &lt;&lt; std::endl;\n}\n</code></pre>\n\n<ul>\n<li>Without <code>std::sort(data, data + arraySize);</code>, the code runs in 11.54 seconds.</li>\n<li>With the sorted data, the code runs in 1.93 seconds.</li>\n</ul>\n\n<p>Initially, I thought this might be just a language or compiler anomaly. So I tried it in Java.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Arrays;\nimport java.util.Random;\n\npublic class Main\n{\n    public static void main(String[] args)\n    {\n        // Generate data\n        int arraySize = 32768;\n        int data[] = new int[arraySize];\n\n        Random rnd = new Random(0);\n        for (int c = 0; c &lt; arraySize; ++c)\n            data[c] = rnd.nextInt() % 256;\n\n        // !!! With this, the next loop runs faster\n        Arrays.sort(data);\n\n        // Test\n        long start = System.nanoTime();\n        long sum = 0;\n\n        for (int i = 0; i &lt; 100000; ++i)\n        {\n            // Primary loop\n            for (int c = 0; c &lt; arraySize; ++c)\n            {\n                if (data[c] &gt;= 128)\n                    sum += data[c];\n            }\n        }\n\n        System.out.println((System.nanoTime() - start) / 1000000000.0);\n        System.out.println(\"sum = \" + sum);\n    }\n}\n</code></pre>\n\n<p>With a somewhat similar but less extreme result.</p>\n\n<hr>\n\n<p>My first thought was that sorting brings the data into the cache, but then I thought how silly that is because the array was just generated.</p>\n\n<ul>\n<li>What is going on?</li>\n<li>Why is a sorted array faster to process than an unsorted array?</li>\n<li>The code is summing up some independent terms, and the order should not matter.</li>\n</ul>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "tags": ["java", "c++", "performance", "optimization", "branch-prediction"], "answers": [{"body": "<p><strong>Branch prediction.</strong></p>\n\n<p>With a sorted array, the condition <code>data[c] &gt;= 128</code> is first <code>false</code> for a streak of values, then becomes <code>true</code> for all later values. That's easy to predict. With an unsorted array, you pay for the branching cost.</p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 11227877, "question_id": 11227809, "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p><strong>You are a victim of <a href=\"//en.wikipedia.org/wiki/Branch_predictor\">branch prediction</a> fail.</strong></p>\n\n<hr>\n\n<h2>What is Branch Prediction?</h2>\n\n<p>Consider a railroad junction:</p>\n\n<p><a href=\"//commons.wikimedia.org/wiki/File:Entroncamento_do_Transpraia.JPG\"><img src=\"//i.stack.imgur.com/muxnt.jpg\" alt=\"\"></a>\n<sub><a href=\"//commons.wikimedia.org/wiki/File:Entroncamento_do_Transpraia.JPG\">Image</a> by Mecanismo, via Wikimedia Commons. Used under the <a href=\"//creativecommons.org/licenses/by-sa/3.0/deed.en\">CC-By-SA 3.0</a> license.</sub></p>\n\n<p>Now for the sake of argument, suppose this is back in the 1800s - before long distance or radio communication.</p>\n\n<p>You are the operator of a junction and you hear a train coming. You have no idea which way it is supposed to go. You stop the train to ask the driver which direction they want. And then you set the switch appropriately.</p>\n\n<p><em>Trains are heavy and have a lot of inertia. So they take forever to start up and slow down.</em></p>\n\n<p>Is there a better way? You guess which direction the train will go!</p>\n\n<ul>\n<li>If you guessed right, it continues on.</li>\n<li>If you guessed wrong, the captain will stop, back up, and yell at you to flip the switch. Then it can restart down the other path.</li>\n</ul>\n\n<p><strong>If you guess right every time</strong>, the train will never have to stop.<br>\n<strong>If you guess wrong too often</strong>, the train will spend a lot of time stopping, backing up, and restarting.</p>\n\n<hr>\n\n<p><strong>Consider an if-statement:</strong> At the processor level, it is a branch instruction:</p>\n\n<p><img src=\"//i.stack.imgur.com/pyfwC.png\" alt=\"enter image description here\"></p>\n\n<p>You are a processor and you see a branch. You have no idea which way it will go. What do you do? You halt execution and wait until the previous instructions are complete. Then you continue down the correct path.</p>\n\n<p><em>Modern processors are complicated and have long pipelines. So they take forever to \"warm up\" and \"slow down\".</em></p>\n\n<p>Is there a better way? You guess which direction the branch will go!</p>\n\n<ul>\n<li>If you guessed right, you continue executing.</li>\n<li>If you guessed wrong, you need to flush the pipeline and roll back to the branch. Then you can restart down the other path.</li>\n</ul>\n\n<p><strong>If you guess right every time</strong>, the execution will never have to stop.<br>\n<strong>If you guess wrong too often</strong>, you spend a lot of time stalling, rolling back, and restarting.</p>\n\n<hr>\n\n<p>This is branch prediction. I admit it's not the best analogy since the train could just signal the direction with a flag. But in computers, the processor doesn't know which direction a branch will go until the last moment.</p>\n\n<p>So how would you strategically guess to minimize the number of times that the train must back up and go down the other path? You look at the past history! If the train goes left 99% of the time, then you guess left. If it alternates, then you alternate your guesses. If it goes one way every 3 times, you guess the same...</p>\n\n<p><strong><em>In other words, you try to identify a pattern and follow it.</em></strong> This is more or less how branch predictors work.</p>\n\n<p>Most applications have well-behaved branches. So modern branch predictors will typically achieve >90% hit rates. But when faced with unpredictable branches with no recognizable patterns, branch predictors are virtually useless.</p>\n\n<p>Further reading: <a href=\"//en.wikipedia.org/wiki/Branch_predictor\">\"Branch predictor\" article on Wikipedia</a>.</p>\n\n<hr>\n\n<h2>As hinted from above, the culprit is this if-statement:</h2>\n\n<pre><code>if (data[c] &gt;= 128)\n    sum += data[c];\n</code></pre>\n\n<p>Notice that the data is evenly distributed between 0 and 255. \nWhen the data is sorted, roughly the first half of the iterations will not enter the if-statement. After that, they will all enter the if-statement.</p>\n\n<p>This is very friendly to the branch predictor since the branch consecutively goes the same direction many times.\nEven a simple saturating counter will correctly predict the branch except for the few iterations after it switches direction.</p>\n\n<p><strong>Quick visualization:</strong></p>\n\n<pre><code>T = branch taken\nN = branch not taken\n\ndata[] = 0, 1, 2, 3, 4, ... 126, 127, 128, 129, 130, ... 250, 251, 252, ...\nbranch = N  N  N  N  N  ...   N    N    T    T    T  ...   T    T    T  ...\n\n       = NNNNNNNNNNNN ... NNNNNNNTTTTTTTTT ... TTTTTTTTTT  (easy to predict)\n</code></pre>\n\n<p>However, when the data is completely random, the branch predictor is rendered useless because it can't predict random data.\nThus there will probably be around 50% misprediction. (no better than random guessing)</p>\n\n<pre><code>data[] = 226, 185, 125, 158, 198, 144, 217, 79, 202, 118,  14, 150, 177, 182, 133, ...\nbranch =   T,   T,   N,   T,   T,   T,   T,  N,   T,   N,   N,   T,   T,   T,   N  ...\n\n       = TTNTTTTNTNNTTTN ...   (completely random - hard to predict)\n</code></pre>\n\n<hr>\n\n<p><strong>So what can be done?</strong></p>\n\n<p>If the compiler isn't able to optimize the branch into a conditional move, you can try some hacks if you are willing to sacrifice readability for performance.</p>\n\n<p>Replace:</p>\n\n<pre><code>if (data[c] &gt;= 128)\n    sum += data[c];\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>int t = (data[c] - 128) &gt;&gt; 31;\nsum += ~t &amp; data[c];\n</code></pre>\n\n<p>This eliminates the branch and replaces it with some bitwise operations.</p>\n\n<p><sub>(Note that this hack is not strictly equivalent to the original if-statement. But in this case, it's valid for all the input values of <code>data[]</code>.)</sub></p>\n\n<p><strong>Benchmarks: Core i7 920 @ 3.5 GHz</strong></p>\n\n<p>C++ - Visual Studio 2010 - x64 Release</p>\n\n<pre><code>//  Branch - Random\nseconds = 11.777\n\n//  Branch - Sorted\nseconds = 2.352\n\n//  Branchless - Random\nseconds = 2.564\n\n//  Branchless - Sorted\nseconds = 2.587\n</code></pre>\n\n<p>Java - Netbeans 7.1.1 JDK 7 - x64</p>\n\n<pre><code>//  Branch - Random\nseconds = 10.93293813\n\n//  Branch - Sorted\nseconds = 5.643797077\n\n//  Branchless - Random\nseconds = 3.113581453\n\n//  Branchless - Sorted\nseconds = 3.186068823\n</code></pre>\n\n<p>Observations:</p>\n\n<ul>\n<li><strong>With the Branch:</strong> There is a huge difference between the sorted and unsorted data.</li>\n<li><strong>With the Hack:</strong> There is no difference between sorted and unsorted data.</li>\n<li>In the C++ case, the hack is actually a tad slower than with the branch when the data is sorted.</li>\n</ul>\n\n<p>A general rule of thumb is to avoid data-dependent branching in critical loops. (such as in this example)</p>\n\n<hr>\n\n<p><strong>Update :</strong></p>\n\n<ul>\n<li><p>GCC 4.6.1 with <code>-O3</code> or <code>-ftree-vectorize</code> on x64 is able to generate a conditional move. So there is no difference between the sorted and unsorted data - both are fast.</p></li>\n<li><p>VC++ 2010 is unable to generate conditional moves for this branch even under <code>/Ox</code>.</p></li>\n<li><p>Intel Compiler 11 does something miraculous. It <a href=\"//en.wikipedia.org/wiki/Loop_interchange\">interchanges the two loops</a>, thereby hoisting the unpredictable branch to the outer loop. So not only is it immune the mispredictions, it is also twice as fast as whatever VC++ and GCC can generate! In other words, ICC took advantage of the test-loop to defeat the benchmark...</p></li>\n<li><p>If you give the Intel Compiler the branchless code, it just out-right vectorizes it... and is just as fast as with the branch (with the loop interchange).</p></li>\n</ul>\n\n<p>This goes to show that even mature modern compilers can vary wildly in their ability to optimize code...</p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 11227902, "question_id": 11227809, "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>The reason why the performance improves drastically when the data is sorted is that the branch prediction penalty is removed, as explained beautifully in <a href=\"http://stackoverflow.com/users/922184/mysticial\">Mysticial</a>'s answer.</p>\n\n<p>Now, if we look at the code</p>\n\n<pre><code>if (data[c] &gt;= 128)\n    sum += data[c];\n</code></pre>\n\n<p>we can find that the meaning of this particular <code>if... else...</code> branch is to add something when a condition is satisfied. This type of branch can be easily transformed into a <strong>conditional move</strong> statement, which would be compiled into a conditional move instruction: <code>cmovl</code>, in an <code>x86</code> system. The branch and thus the potential branch prediction penalty is removed.</p>\n\n<p>In <code>C</code>, thus <code>C++</code>, the statment, which would compile directly (without any optimization) into the conditional move instruction in <code>x86</code>, is the ternary operator <code>... ? ... : ...</code>. So we rewrite the above statement into an equivalent one:</p>\n\n<pre><code>sum += data[c] &gt;=128 ? data[c] : 0;\n</code></pre>\n\n<p>While maintaining readability, we can check the speedup factor.</p>\n\n<p>On an <code>Intel [Core i7][2]-2600K @ 3.4&amp;nbsp;GHz</code> and <code>Visual Studio 2010</code> Release Mode, the benchmark is (format copied from Mysticial):</p>\n\n<p><strong>x86</strong></p>\n\n<pre><code>//  Branch - Random\nseconds = 8.885\n\n//  Branch - Sorted\nseconds = 1.528\n\n//  Branchless - Random\nseconds = 3.716\n\n//  Branchless - Sorted\nseconds = 3.71\n</code></pre>\n\n<p><strong>x64</strong></p>\n\n<pre><code>//  Branch - Random\nseconds = 11.302\n\n//  Branch - Sorted\n seconds = 1.830\n\n//  Branchless - Random\nseconds = 2.736\n\n//  Branchless - Sorted\nseconds = 2.737\n</code></pre>\n\n<p>The result is robust in multiple tests. We get great speedup when the branch result is unpredictable, but we suffer a little bit when it is predictable. In fact, when using a conditional move, the performance is the same regardless of the data pattern.</p>\n\n<p>Now let's look more closely by investigating at the <code>x86</code> assembly they generate. For simplicity, we use two functions <code>max1</code> and <code>max2</code>.</p>\n\n<p><code>max1</code> uses the conditional branch <code>if... else ...</code>:</p>\n\n<pre><code>int max1(int a, int b) {\n    if (a &gt; b)\n        return a;\n    else\n        return b;\n}\n</code></pre>\n\n<p><code>max2</code> uses the ternary operator <code>... ? ... : ...</code>:</p>\n\n<pre><code>int max2(int a, int b) {\n    return a &gt; b ? a : b;\n}\n</code></pre>\n\n<p>On a x86-64 machine, <code>GCC -S</code> generates the assembly below.</p>\n\n<pre><code>:max1\n    movl    %edi, -4(%rbp)\n    movl    %esi, -8(%rbp)\n    movl    -4(%rbp), %eax\n    cmpl    -8(%rbp), %eax\n    jle     .L2\n    movl    -4(%rbp), %eax\n    movl    %eax, -12(%rbp)\n    jmp     .L4\n.L2:\n    movl    -8(%rbp), %eax\n    movl    %eax, -12(%rbp)\n.L4:\n    movl    -12(%rbp), %eax\n    leave\n    ret\n\n:max2\n    movl    %edi, -4(%rbp)\n    movl    %esi, -8(%rbp)\n    movl    -4(%rbp), %eax\n    cmpl    %eax, -8(%rbp)\n    cmovge  -8(%rbp), %eax\n    leave\n    ret\n</code></pre>\n\n<p><code>max2</code> uses much less code due to the usage of instruction <code>cmovge</code>. But the real gain is that <code>max2</code> does not involve branch jumps, <code>jmp</code>, which would have a significant performance penalty if the predicted result is not right.</p>\n\n<p>So why can a conditional move perform better?</p>\n\n<p>In a typical <code>x86</code> processor, the execution of an instruction is divided to several stages. Roughly, we have different hardware to deal with different stages. So we do not have to wait for one instruction to finish to start a new one. This is called <strong><a href=\"http://en.wikipedia.org/wiki/Pipeline_%28computing%29\">pipelining</a></strong>.</p>\n\n<p>In a branch case, the following instruction is determined by the preceding one, so we can not do pipelining. We have to either wait or predict.</p>\n\n<p>In a conditional move case, the execution conditional move instruction is divided into several stages, but the earlier stages like <code>Fetch</code>, <code>Decode</code>, does not depend on the result of previous instruction, only latter stages need the result. So we wait a fraction of one instruction's execution time. This is why the conditional move version is slower than the branch when prediction is easy.</p>\n\n<p>The book <em><a href=\"http://rads.stackoverflow.com/amzn/click/0136108040\">Computer Systems: A Programmer's Perspective, second edition</a></em> explains this in detail. You can check Section 3.6.6 for <em>Conditional Move Instructions</em>, entire Chapter 4 for <em>Processor Architecture</em>, and Section 5.11.2 for a special treatment for <em>Branch Prediction and Misprediction Penalties</em>.</p>\n\n<p>Sometimes, some modern compilers can optimize our code to assembly with better performance, sometimes some compilers can't (the code in question is using Visual Studio's native compiler). Knowing the performance difference between branch and conditional move when unpredictable can help us write code with better performance when the scenario gets so complex that the compiler can not optimize them automatically.</p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 11237235, "question_id": 11227809, "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>If you are curious about even more optimizations that can be done to this code, consider this... Starting with the original loop:</p>\n\n<pre><code>for (unsigned i = 0; i &lt; 100000; ++i)\n{\n    for (unsigned j = 0; j &lt; arraySize; ++j)\n    {\n        if (data[j] &gt;= 128)\n            sum += data[j];\n    }\n}\n</code></pre>\n\n<p>With loop interchange, we can safely change this loop to:</p>\n\n<pre><code>for (unsigned j = 0; j &lt; arraySize; ++j)\n{\n    for (unsigned i = 0; i &lt; 100000; ++i)\n    {\n        if (data[j] &gt;= 128)\n            sum += data[j];\n    }\n}\n</code></pre>\n\n<p>Then, you can see that the \"if\" conditional is constant throughout the execution of the \"i\" loop, so you can hoist the \"if\" out:</p>\n\n<pre><code>for (unsigned j = 0; j &lt; arraySize; ++j)\n{\n    if (data[j] &gt;= 128)\n    {\n        for (unsigned i = 0; i &lt; 100000; ++i)\n        {\n            sum += data[j];\n        }\n    }\n}\n</code></pre>\n\n<p>Then, you see that the inner loop can be collapsed into one single expression, assuming the floating point model allows it (/fp:fast is thrown, for example)</p>\n\n<pre><code>for (unsigned j = 0; j &lt; arraySize; ++j)\n{\n    if (data[j] &gt;= 128)\n    {\n        sum += data[j] * 100000;\n    }\n}\n</code></pre>\n\n<p>That one is 100,000x faster than before (-8</p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 11303693, "question_id": 11227809, "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>No doubt some of us would be interested in ways of identifying code that is problematic for the CPU's branch-predictor. The Valgrind tool <code>cachegrind</code> has a branch-predictor simulator, enabled by using the <code>--branch-sim=yes</code> flag. Running it over the examples in this question, with the number of outer loops reduced to 10000 and compiled with <code>g++</code>, gives these results:</p>\n\n<p><strong>Sorted:</strong></p>\n\n<pre><code>==32551== Branches:        656,645,130  (  656,609,208 cond +    35,922 ind)\n==32551== Mispredicts:         169,556  (      169,095 cond +       461 ind)\n==32551== Mispred rate:            0.0% (          0.0%     +       1.2%   )\n</code></pre>\n\n<p><strong>Unsorted:</strong></p>\n\n<pre><code>==32555== Branches:        655,996,082  (  655,960,160 cond +  35,922 ind)\n==32555== Mispredicts:     164,073,152  (  164,072,692 cond +     460 ind)\n==32555== Mispred rate:           25.0% (         25.0%     +     1.2%   )\n</code></pre>\n\n<p>Drilling down into the line-by-line output produced by <code>cg_annotate</code> we see for the loop in question:</p>\n\n<p><strong>Sorted:</strong></p>\n\n<pre><code>          Bc    Bcm Bi Bim\n      10,001      4  0   0      for (unsigned i = 0; i &lt; 10000; ++i)\n           .      .  .   .      {\n           .      .  .   .          // primary loop\n 327,690,000 10,016  0   0          for (unsigned c = 0; c &lt; arraySize; ++c)\n           .      .  .   .          {\n 327,680,000 10,006  0   0              if (data[c] &gt;= 128)\n           0      0  0   0                  sum += data[c];\n           .      .  .   .          }\n           .      .  .   .      }\n</code></pre>\n\n<p><strong>Unsorted:</strong></p>\n\n<pre><code>          Bc         Bcm Bi Bim\n      10,001           4  0   0      for (unsigned i = 0; i &lt; 10000; ++i)\n           .           .  .   .      {\n           .           .  .   .          // primary loop\n 327,690,000      10,038  0   0          for (unsigned c = 0; c &lt; arraySize; ++c)\n           .           .  .   .          {\n 327,680,000 164,050,007  0   0              if (data[c] &gt;= 128)\n           0           0  0   0                  sum += data[c];\n           .           .  .   .          }\n           .           .  .   .      }\n</code></pre>\n\n<p>This lets you easily identify the problematic line - in the unsorted version the <code>if (data[c] &gt;= 128)</code> line is causing 164,050,007 mispredicted conditional branches (<code>Bcm</code>) under cachegrind's branch-predictor model, whereas it's only causing 10,006 in the sorted version.</p>\n\n<hr>\n\n<p>Alternatively, on Linux you can use the performance counters subsystem to accomplish the same task, but with native performance using CPU counters.</p>\n\n<pre><code>perf stat ./sumtest_sorted\n</code></pre>\n\n<p><strong>Sorted:</strong></p>\n\n<pre><code> Performance counter stats for './sumtest_sorted':\n\n  11808.095776 task-clock                #    0.998 CPUs utilized          \n         1,062 context-switches          #    0.090 K/sec                  \n            14 CPU-migrations            #    0.001 K/sec                  \n           337 page-faults               #    0.029 K/sec                  \n26,487,882,764 cycles                    #    2.243 GHz                    \n41,025,654,322 instructions              #    1.55  insns per cycle        \n 6,558,871,379 branches                  #  555.455 M/sec                  \n       567,204 branch-misses             #    0.01% of all branches        \n\n  11.827228330 seconds time elapsed\n</code></pre>\n\n<p><strong>Unsorted:</strong></p>\n\n<pre><code> Performance counter stats for './sumtest_unsorted':\n\n  28877.954344 task-clock                #    0.998 CPUs utilized          \n         2,584 context-switches          #    0.089 K/sec                  \n            18 CPU-migrations            #    0.001 K/sec                  \n           335 page-faults               #    0.012 K/sec                  \n65,076,127,595 cycles                    #    2.253 GHz                    \n41,032,528,741 instructions              #    0.63  insns per cycle        \n 6,560,579,013 branches                  #  227.183 M/sec                  \n 1,646,394,749 branch-misses             #   25.10% of all branches        \n\n  28.935500947 seconds time elapsed\n</code></pre>\n\n<p>It can also do source code annotation with dissassembly.</p>\n\n<pre><code>perf record -e branch-misses ./sumtest_unsorted\nperf annotate -d sumtest_unsorted\n</code></pre>\n\n\n\n<pre><code> Percent |      Source code &amp; Disassembly of sumtest_unsorted\n------------------------------------------------\n...\n         :                      sum += data[c];\n    0.00 :        400a1a:       mov    -0x14(%rbp),%eax\n   39.97 :        400a1d:       mov    %eax,%eax\n    5.31 :        400a1f:       mov    -0x20040(%rbp,%rax,4),%eax\n    4.60 :        400a26:       cltq   \n    0.00 :        400a28:       add    %rax,-0x30(%rbp)\n...\n</code></pre>\n\n<p>See <a href=\"https://perf.wiki.kernel.org/index.php/Tutorial\">the performance tutorial</a> for more details.</p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 12853037, "question_id": 11227809, "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>As data is distributed between 0 and 255 when array is sorted, around first half of the iterations will not enter the if-statement (if statement shared below).</p>\n\n<pre><code>if (data[c] &gt;= 128)\n    sum += data[c];\n</code></pre>\n\n<p>Question is what make the above statement not execute in certain case as in case of sorted data? Here comes the \"Branch predictor\" a branch predictor is a digital circuit that tries to guess which way a branch (e.g. an if-then-else structure) will go before this is known for sure. The purpose of the branch predictor is to improve the flow in the instruction pipeline. Branch predictors play a critical role in achieving high effective performance!</p>\n\n<p><strong>Lets do some bench marking to understand it better</strong></p>\n\n<p>The performance of an if-statement depends on whether its condition has a predictable pattern. If the condition is always true or always false, the branch prediction logic in the processor will pick up the pattern. On the other hand, if the pattern is unpredictable, the if-statement will be much more expensive.</p>\n\n<p>Let\u2019s measure the performance of this loop with different conditions:</p>\n\n<pre><code>for (int i = 0; i &lt; max; i++) if (condition) sum++;\n</code></pre>\n\n<p>Here are the timings of the loop with different True-False patterns:</p>\n\n<pre><code>Condition           Pattern              Time (ms)\n\n(i &amp; 0\u00d780000000) == 0   T repeated        322\n\n(i &amp; 0xffffffff) == 0   F repeated        276\n\n(i &amp; 1) == 0            TF alternating    760\n\n(i &amp; 3) == 0            TFFFTFFF\u2026         513\n\n(i &amp; 2) == 0            TTFFTTFF\u2026         1675\n\n(i &amp; 4) == 0            TTTTFFFFTTTTFFFF\u2026 1275\n\n(i &amp; 8) == 0            8T 8F 8T 8F \u2026     752\n\n(i &amp; 16) == 0           16T 16F 16T 16F \u2026 490\n</code></pre>\n\n<p>A \u201c<strong>bad</strong>\u201d true-false pattern can make an if-statement up to six times slower than a \u201c<strong>good</strong>\u201d pattern! Of course, which pattern is good and which is bad depends on the exact instructions generated by the compiler and on the specific processor.</p>\n\n<p>So there is no doubt about impact of branch prediction on performance!</p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 14889969, "question_id": 11227809, "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>Just read up on the thread and I feel an answer is missing. A common way to eliminate branch prediction that I've found to work particularly good in managed languages is a table lookup instead of using a branch. (although I haven't tested it in this case)</p>\n\n<p>This approach works in general if:</p>\n\n<ol>\n<li>It's a small table and is likely to be cached in the processor</li>\n<li>You are running things in a quite tight loop and/or the processor can pre-load the data</li>\n</ol>\n\n<p><strong>Background and why</strong></p>\n\n<p>Pfew, so what the hell is that supposed to mean?</p>\n\n<p>From a processor perspective, your memory is slow. To compensate for the difference in speed, they build in a couple of caches in your processor (L1/L2 cache) that compensate for that. So imagine that you're doing your nice calculations and figure out that you need a piece of memory. The processor will get his 'load' operation and loads the piece of memory into cache - and then uses the cache to do the rest of the calculations. Because memory is relatively slow, this 'load' will slow down your program. </p>\n\n<p>Like branch prediction, this was optimized in the Pentium processors: the processor predicts that it needs to load a piece of data and attempts to load that into the cache before the operation actually hits the cache. As we've already seen, branch prediction sometimes goes horribly wrong -- in the worst case scenario you need to go back and actually wait for a memory load, which will take forever (<strong>in other words: failing branch prediction is bad, a memory load after a branch prediction fail is just horrible!</strong>).</p>\n\n<p>Fortunately for us, if the memory access pattern is predictable, the processor will load it in its fast cache and all is well.</p>\n\n<p>First thing we need to know is what is <em>small</em>? While smaller is generally better, a rule of thumb is to stick to lookup tables that are &lt;=4096 bytes in size. As an upper limit: if your lookup table is larger than 64K it's probably worth reconsidering.</p>\n\n<p><strong>Constructing a table</strong></p>\n\n<p>So we've figured out that we can create a small table. Next thing to do is get a lookup function in place. Lookup functions are usually small functions that use a couple of basic integer operations (and, or, xor, shift, add, remove and perhaps a multiply). What you want is to have your input translated by the lookup function to some kind of 'unique key' in your table, which then simply gives you the answer of all the work you wanted it to do.</p>\n\n<p>In this case: >=128 means we can keep the value, &lt;128 means we get rid of it. The easiest way to do that is by using an 'AND': if we keep it, we AND it with 7FFFFFFF ; if we want to get rid of it, we AND it with 0. Notice also that 128 is a power of 2 -- so we can go ahead and make a table of 32768/128 integers and fill it with one zero and a lot of 7FFFFFFFF's.</p>\n\n<p><strong>Managed languages</strong></p>\n\n<p>You might wonder why this works well in managed languages. After all, managed languages check the boundaries of the arrays with a branch to ensure you don't mess up...</p>\n\n<p>Well, not exactly... :-)</p>\n\n<p>There has been quite some work on eliminating this branch for managed languages. For example:</p>\n\n<pre><code>for (int i=0; i&lt;array.Length; ++i)\n   // use array[i]\n</code></pre>\n\n<p>in this case it's obvious to the compiler that the boundary condition will never hit. At least the Microsoft JIT compiler (but I expect Java does similar things) will notice this and remove the check all together. WOW - that means no branch. Similarly, it will deal with other obvious cases.</p>\n\n<p>If you run into trouble with lookups on managed languages - the key is to add a <code>&amp; 0x[something]FFF</code> to your lookup function to make the boundary check predictable - and watch it going faster.</p>\n\n<p><strong>The result for this case</strong></p>\n\n<pre><code>// generate data\nint arraySize = 32768;\nint[] data = new int[arraySize];\n\nRandom rnd = new Random(0);\nfor (int c = 0; c &lt; arraySize; ++c)\n    data[c] = rnd.Next(256);\n\n\n// Too keep the spirit of the code in-tact I'll make a separate lookup table\n// (I assume we cannot modify 'data' or the number of loops)\nint[] lookup = new int[256];\n\nfor (int c = 0; c &lt; 256; ++c)\n    lookup[c] = (c &gt;= 128) ? c : 0;\n\n// test\nDateTime startTime = System.DateTime.Now;\nlong sum = 0;\n\nfor (int i = 0; i &lt; 100000; ++i)\n{\n    // primary loop\n    for (int j = 0; j &lt; arraySize; ++j)\n    {\n        // here you basically want to use simple operations - so no \n        // random branches, but things like &amp;, |, *, -, +, etc are fine.\n        sum += lookup[data[j]];\n    }\n}\n\nDateTime endTime = System.DateTime.Now;\nConsole.WriteLine(endTime - startTime);\nConsole.WriteLine(\"sum = \" + sum);\n\nConsole.ReadLine();\n</code></pre>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 16184827, "question_id": 11227809, "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>One way to avoid branch prediction errors is to build a lookup table, and index it using the data.  Stefan de Bruijn discussed that in his answer.</p>\n\n<p>But in this case, we know values are in the range [0, 255] and we only care about values >= 128.  That means we can easily extract a single bit that will tell us whether we want a value or not: by shifting the data to the right 7 bits, we are left with a 0 bit or a 1 bit, and we only want to add the value when we have a 1 bit.  Let's call this bit the \"decision bit\".</p>\n\n<p>By using the 0/1 value of the decision bit as an index into an array, we can make code that will be equally fast whether the data is sorted or not sorted.  Our code will always add a value, but when the decision bit is 0, we will add the value somewhere we don't care about.  Here's the code:</p>\n\n<pre><code>// Test\nclock_t start = clock();\nlong long a[] = {0, 0};\nlong long sum;\n\nfor (unsigned i = 0; i &lt; 100000; ++i)\n{\n    // Primary loop\n    for (unsigned c = 0; c &lt; arraySize; ++c)\n    {\n        int j = (data[c] &gt;&gt; 7);\n        a[j] += data[c];\n    }\n}\n\ndouble elapsedTime = static_cast&lt;double&gt;(clock() - start) / CLOCKS_PER_SEC;\nsum = a[1];\n</code></pre>\n\n<p>This code wastes half of the adds, but never has a branch prediction failure.  It's tremendously faster on random data than the version with an actual if statement.</p>\n\n<p>But in my testing, an explicit lookup table was slightly faster than this, probably because indexing into a lookup table was slightly faster than bit shifting.  This shows how my code sets up and uses the lookup table (unimaginatively called <code>lut</code> for \"LookUp Table\" in the code).  Here's the C++ code:</p>\n\n<pre><code>// declare and then fill in the lookup table\nint lut[256];\nfor (unsigned c = 0; c &lt; 256; ++c)\n    lut[c] = (c &gt;= 128) ? c : 0;\n\n// use the lookup table after it is built\nfor (unsigned i = 0; i &lt; 100000; ++i)\n{\n    // Primary loop\n    for (unsigned c = 0; c &lt; arraySize; ++c)\n    {\n        sum += lut[data[c]];\n    }\n}\n</code></pre>\n\n<p>In this case the lookup table was only 256 bytes, so it fit nicely in cache and all was fast.  This technique wouldn't work well if the data was 24-bit values and we only wanted half of them... the lookup table would be far too big to be practical.  On the other hand, we can combine the two techniques shown above: first shift the bits over, then index a lookup table.  For a 24-bit value that we only want the top half value, we could potentially shift the data right by 12 bits, and be left with a 12-bit value for a table index.  A 12-bit table index implies a table of 4096 values, which might be practical.</p>\n\n<p>EDIT: One thing I forgot to put in.</p>\n\n<p>The technique of indexing into an array, instead of using an <code>if</code> statement, can be used for deciding which pointer to use.  I saw a library that implemented binary trees, and instead of having two named pointers (<code>pLeft</code> and <code>pRight</code> or whatever) had a length-2 array of pointers, and used the \"decision bit\" technique to decide which one to follow.  For example, instead of:</p>\n\n<pre><code>if (x &lt; node-&gt;value)\n    node = node-&gt;pLeft;\nelse\n    node = node-&gt;pRight;\n</code></pre>\n\n<p>this library would do something like:</p>\n\n<pre><code>i = (x &lt; node-&gt;value);\nnode = node-&gt;link[i];\n</code></pre>\n\n<p>Here's a link to this code: <a href=\"http://www.eternallyconfuzzled.com/tuts/datastructures/jsw_tut_rbtree.aspx\">Red Black Trees</a>, <em>Eternally Confuzzled</em></p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 17782979, "question_id": 11227809, "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>In the sorted case, you can do better than relying on successful branch prediction or any branchless comparison trick: completely remove the branch.</p>\n\n<p>Indeed, the array is partitioned in a contiguous zone with <code>data &lt; 128</code> and another with <code>data &gt;= 128</code>. So you should find the partition point with a dichotomic search (using <code>Lg(arraySize) = 15</code> comparisons), then do a straight accumulation from that point.</p>\n\n<p>Something like (unchecked)</p>\n\n<pre><code>int i= 0, j, k= arraySize;\nwhile (i &lt; k)\n{\n  j= (i + k) &gt;&gt; 1;\n  if (data[j] &gt;= 128)\n    k= j;\n  else\n    i= j;\n}\nsum= 0;\nfor (; i &lt; arraySize; i++)\n  sum+= data[i];\n</code></pre>\n\n<p>or, slightly more obfuscated</p>\n\n<pre><code>int i, k, j= (i + k) &gt;&gt; 1;\nfor (i= 0, k= arraySize; i &lt; k; (data[j] &gt;= 128 ? k : i)= j)\n  j= (i + k) &gt;&gt; 1;\nfor (sum= 0; i &lt; arraySize; i++)\n  sum+= data[i];\n</code></pre>\n\n<p>A yet faster approach, that gives an <strong>approximate</strong> solution for both sorted or unsorted is: <code>sum= 3137536;</code> (assuming a truly uniform distribution, 16384 samples with expected value 191.5) <strong>:-)</strong></p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 17828251, "question_id": 11227809, "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>The above behavior is happening because of Branch prediction.</p>\n\n<p>To understand branch prediction one must first understand <strong>Instruction Pipeline</strong>:</p>\n\n<p>Any instruction is broken into sequence of steps so that different steps can be executed concurrently in parallel. This technique is known as instruction pipeline and this is used to increase throughput in modern processors. To understand this better please see the example <a href=\"https://en.wikipedia.org/wiki/Pipeline_(computing)#Concept_and_motivation\">https://en.wikipedia.org/wiki/Pipeline_(computing)#Concept_and_motivation</a></p>\n\n<p>Generally modern processors have quite long pipelines, but for ease let's consider these 4 steps only.</p>\n\n<ol>  \n  <li>IF -- Fetch the instruction from memory \n  <li>ID -- Decode the instruction\n  <li>EX -- Execute the instruction \n  <li>WB -- Write back to CPU register\n</ol>\n\n<p><strong><em>4-stage pipeline in general for 2 instructions.</em></strong>\n<img src=\"http://i.stack.imgur.com/PqBBR.png\" alt=\"4-stage pipeline in general\"></p>\n\n<p>Moving back to the above question let's consider the following instructions:</p>\n\n<pre><code>                        A) if (data[c] &gt;= 128)\n                                /\\\n                               /  \\\n                              /    \\\n                        true /      \\ false\n                            /        \\\n                           /          \\\n                          /            \\\n                         /              \\\n              B) sum += data[c];          C) for loop or print().\n</code></pre>\n\n<p>Without branch prediction the following would occur:</p>\n\n<p>To execute instruction B or instruction C the processor will have to wait till the instruction A doesn't reach till EX stage in the pipeline, as the decision to go to instruction B or instruction C depends on the result of instruction A. So the pipeline will look like this.</p>\n\n<p><strong><em>when if condition returns true:</em></strong>\n<img src=\"http://i.stack.imgur.com/0H4gP.png\" alt=\"enter image description here\"></p>\n\n<p><strong><em>When if condition returns false:</em></strong>\n<img src=\"http://i.stack.imgur.com/APpca.png\" alt=\"enter image description here\"></p>\n\n<p>As a result of waiting for the result of instruction A, the total CPU cycles spent in the above case (without branch prediction; for both true and false) is 7.</p>\n\n<p><strong>So what is branch prediction?</strong></p>\n\n<p>Branch predictor will tries to guess which way a branch (an if-then-else structure) will go before this is known for sure. It will not wait for the instruction A to reach the EX stage of the pipeline, but it will guess the decision and go onto that instruction (B or C in case of our example).</p>\n\n<p><strong><em>In case of a correct guess, the pipeline looks something like this:</em></strong>\n<img src=\"http://i.stack.imgur.com/ZYUbs.png\" alt=\"enter image description here\"></p>\n\n<p>If it is later detected that the guess was wrong then the partially executed instructions are discarded and the pipeline starts over with the correct branch, incurring a delay. \nThe time that is wasted in case of a branch misprediction is equal to the number of stages in the pipeline from the fetch stage to the execute stage. Modern microprocessors tend to have quite long pipelines so that the misprediction delay is between 10 and 20 clock cycles. The longer the pipeline the greater the need for a good branch predictor. (<a href=\"https://en.wikipedia.org/wiki/Branch_predictor\">https://en.wikipedia.org/wiki/Branch_predictor</a>)</p>\n\n<p>In the OP's code, the first time when the conditional, the branch predictor does not have any information to base up prediction, so first time it will randomly choose the next instruction. Later in the for loop it can base the prediction on the history. \nFor an array sorted in ascending order, there are three possibilities:</p>\n\n<ol>\n<li> All the elements are less than 128\n<li> All the elements are greater than 128\n<li> Some starting new elements are less than 128 and later it become greater than 128\n</ol>\n\n<p>Let us assume that the predictor will always assume the true branch on the first run.</p>\n\n<p>So in the first case it will always take the true branch since historically all its predictions are correct.\nIn the 2nd case, initially it will predict wrong, but after a few iterations it will predict correctly.\nIn the 3rd case it will initially predict correctly till the elements are less than 128. After which it will fail for some time and the correct itself when it see branch prediction failure in history. </p>\n\n<p>In all these cases the failure will be too less in number and as a result only few times it will need to discard the partially executed instructions and start over with the correct branch, resulting in less CPU cycles. </p>\n\n<p>But in case of random unsorted array, the prediction will need to discard the partially executed instructions and start over with the correct branch most of the time and result in more CPU cycles compared to the sorted array.</p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 31210295, "question_id": 11227809, "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>In the same line (I think this was not highlighted by any answer) it's good to mention that sometimes (specially in software where the performance matters --like in the Linux kernel-- you can find some if statements like the following: </p>\n\n<pre><code>if (likely( everything_is_ok ))\n{\n    /* Do something */\n}\n</code></pre>\n\n<p>or similarly:</p>\n\n<pre><code>if (unlikely(very_improbable_condition))\n{\n    /* Do something */    \n}\n</code></pre>\n\n<p>Both likely() and unlikely() are in fact macros that are defined by using something like the GCC's __builtin_expect to help the compiler insert prediction code to favour the condition taking into account the information provided by the user. GCC supports other builtins that could change the behavior of the running program or emit low level instructions like clearing the cache, etc. The following documentation go through the available GCC's builtins:</p>\n\n<p><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html\">https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html</a></p>\n\n<p>Normally this kind of optimizations are mainly found in hard-real time applications or embedded systems where execution time matters and it's critical. For example, if you are checking for some error condition that only happens 1/10000000 times, then why not inform the compiler about this? .. this way, by default, the branch prediction would assume that the condition is false. </p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 32742980, "question_id": 11227809, "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>Frequently used Boolean operations in C++ produce many branches in compiled program. If these branches are inside loops and are hard to predict they can slow down execution significantly. Boolean variables are stored as 8-bit integers with the value <code>0</code> for <code>false</code> and <code>1</code> for <code>true</code>.</p>\n\n<p>Boolean variables are overdetermined in the sense that all operators that have Boolean variables as input check if the inputs have any other value than <code>0</code> or <code>1</code>, but operators that have Booleans as output can produce no other value than <code>0</code> or <code>1</code>. This makes operations with Boolean variables as input less efficient than necessary.\nConsider example:</p>\n\n<pre><code>bool a, b, c, d;\nc = a &amp;&amp; b;\nd = a || b;\n</code></pre>\n\n<p>This is typically implemented by the compiler in the following way:</p>\n\n<pre><code>bool a, b, c, d;\nif (a != 0) {\n    if (b != 0) {\n        c = 1;\n    }\n    else {\n        goto CFALSE;\n    }\n}\nelse {\n    CFALSE:\n    c = 0;\n}\nif (a == 0) {\n    if (b == 0) {\n        d = 0;\n    }\n    else {\n        goto DTRUE;\n    }\n}\nelse {\n    DTRUE:\n    d = 1;\n}\n</code></pre>\n\n<p>This code is far from optimal. The branches may take a long time in case of mispredictions. The Boolean operations can be made much more efficient if it is known with certainty that the operands have no other values than <code>0</code> and <code>1</code>. The reason why the compiler does not make such an assumption is that the variables might have other values if they are uninitialized or come from unknown sources. The above code can be optimized if <code>a</code> and <code>b</code> have been initialized to valid values or if they come from operators that produce Boolean output. The optimized code looks like this:</p>\n\n<pre><code>char a = 0, b = 1, c, d;\nc = a &amp; b;\nd = a | b;\n</code></pre>\n\n<p><code>char</code> is used instead of <code>bool</code> in order to make it possible to use the bitwise operators (<code>&amp;</code> and <code>|</code>) instead of the Boolean operators (<code>&amp;&amp;</code> and <code>||</code>). The bitwise operators are single instructions that take only one clock cycle. The OR operator (<code>|</code>) works even if <code>a</code> and <code>b</code> have other values than <code>0</code> or <code>1</code>. The AND operator (<code>&amp;</code>) and the EXCLUSIVE OR operator (<code>^</code>) may give inconsistent results if the operands have other values than <code>0</code> and <code>1</code>.</p>\n\n<p><code>~</code> can not be used for NOT. Instead, you can make a Boolean NOT on a variable which is known to be <code>0</code> or <code>1</code> by XOR'ing it with <code>1</code>:</p>\n\n<pre><code>bool a, b;\nb = !a;\n</code></pre>\n\n<p>can be optimized to:</p>\n\n<pre><code>char a = 0, b;\nb = a ^ 1;\n</code></pre>\n\n<p><code>a &amp;&amp; b</code> cannot be replaced with <code>a &amp; b</code> if <code>b</code> is an expression that should not be evaluated if <code>a</code> is <code>false</code> ( <code>&amp;&amp;</code> will not evaluate <code>b</code>, <code>&amp;</code> will). Likewise, <code>a || b</code> can not be replaced with <code>a | b</code> if <code>b</code> is an expression that should not be evaluated if <code>a</code> is <code>true</code>.</p>\n\n<p>Using bitwise operators is more advantageous if the operands are variables than if the operands are comparisons:</p>\n\n<pre><code>bool a; double x, y, z;\na = x &gt; y &amp;&amp; z &lt; 5.0;\n</code></pre>\n\n<p>is optimal in most cases (unless you expect the <code>&amp;&amp;</code> expression to generate many branch mispredictions).</p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 33048998, "question_id": 11227809, "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>An official answer would be from</p>\n\n<ol>\n<li><a href=\"https://software.intel.com/en-us/articles/avoiding-the-cost-of-branch-misprediction\">Intel</a></li>\n<li><a href=\"https://software.intel.com/en-us/articles/branch-and-loop-reorganization-to-prevent-mispredicts\">Intel</a></li>\n<li><a href=\"https://scholar.google.com/scholar?q=branch%20prediction%20computer%20architecture&amp;hl=da&amp;as_sdt=0&amp;as_vis=1&amp;oi=scholart\">Scientific papers</a></li>\n<li>Books: J.L. Hennessy, D.A. Patterson: Computer architecture: a quantitative approach</li>\n<li>Articles in scientific puplications: T.Y. Yeh, Y.N. Patt made a lot of these on branch predictions.</li>\n</ol>\n\n<p>You can also see from this lovely <a href=\"https://en.wikipedia.org/wiki/Branch_predictor#/media/File:Branch_prediction_2bit_saturating_counter-dia.svg\">diagram</a> why the branch predictor gets confused.</p>\n\n<p><a href=\"https://i.stack.imgur.com/pBMV2.png\"><img src=\"https://i.stack.imgur.com/pBMV2.png\" alt=\"2-bit state diagram\"></a></p>\n\n<p>Each element in the original code is a random value</p>\n\n<pre><code>data[c] = std::rand() % 256;\n</code></pre>\n\n<p>so the predictor will change sides as the <code>std::rand()</code> blow.</p>\n\n<p>On the other hand, once it's sorted, the predictor will first move into a state of strongly not taken and when the values change to the high value the predictor will in three runs through change all the way fron strongly not taken to strongly taken.</p>\n\n<hr>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 33070112, "question_id": 11227809, "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}], "link": "http://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array", "question_id": 11227809}, {"body": "<p>Until today I thought that for example:</p>\n\n<pre><code>i += j;\n</code></pre>\n\n<p>is just a shortcut for:</p>\n\n<pre><code>i = i + j;\n</code></pre>\n\n<p>But what if we try this:</p>\n\n<pre><code>int i = 5;\nlong j = 8;\n</code></pre>\n\n<p>Then <code>i = i + j;</code> will not compile but <code>i += j;</code> will compile fine.</p>\n\n<p>Does it mean that in fact <code>i += j;</code> is a shortcut for something like this\n<code>i = (type of i) (i + j)</code>?</p>\n", "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"], "answers": [{"body": "<p>As always with these questions, the JLS holds the answer. In this case <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.26.2\">\u00a715.26.2 Compound Assignment Operators</a>. An extract:</p>\n\n<blockquote>\n  <p>A compound assignment expression of the form <code>E1&nbsp;op=&nbsp;E2</code> is equivalent to <code>E1&nbsp;=&nbsp;(T)((E1)&nbsp;op&nbsp;(E2))</code>, where <code>T</code> is the type of <code>E1</code>, except that <code>E1</code> is evaluated only once.</p>\n</blockquote>\n\n<p>An example cited from <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.26.2\">\u00a715.26.2</a></p>\n\n<blockquote>\n  <p>[...] the following code is correct:</p>\n\n<pre><code>short x = 3;\nx += 4.6;\n</code></pre>\n  \n  <p>and results in x having the value 7 because it is equivalent to:</p>\n\n<pre><code>short x = 3;\nx = (short)(x + 4.6);\n</code></pre>\n</blockquote>\n\n<p>In other words, your assumption is correct.</p>\n", "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "answer_id": 8710685, "question_id": 8710619, "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"]}, {"body": "<p>you need to cast from <code>long</code> to <code>int</code> <code>explicitly</code> in case of <code>i = i + l</code>  then it will compile and give correct output. like </p>\n\n<pre><code>i = i + (int)l;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>i = (int)((long)i + l); // this is what happens in case of += , dont need (long) casting since upper casting is done implicitly.\n</code></pre>\n\n<p>but in case of <code>+=</code> it just works fine because the operator implicitly does the type casting from type of right variable to type of left variable so need not cast explicitly.</p>\n", "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "answer_id": 8710688, "question_id": 8710619, "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"]}, {"body": "<p>Very good question. The <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2\">Java Language specification</a> confirms your suggestion.</p>\n\n<p>For example, the following code is correct:</p>\n\n<pre><code> short x = 3;\n x += 4.6;\n</code></pre>\n\n<p>and results in x having the value 7 because it is equivalent to:</p>\n\n<pre><code> short x = 3;\n x = (short)(x + 4.6);\n</code></pre>\n", "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "answer_id": 8710717, "question_id": 8710619, "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"]}, {"body": "<p>Yes,</p>\n\n<p>basically when we write</p>\n\n<pre><code>i += l; \n</code></pre>\n\n<p>the compiler converts this to </p>\n\n<pre><code>i = (int)(i + l);\n</code></pre>\n\n<p>I just checked the <code>.class</code> file code.</p>\n\n<p>Really a good thing to know</p>\n", "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "answer_id": 8710746, "question_id": 8710619, "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"]}, {"body": "<p>A good example of this casting is using *= or /=</p>\n\n<pre><code>byte b = 10;\nb *= 5.7;\nSystem.out.println(b); // prints 57\n</code></pre>\n\n<p>or</p>\n\n<pre><code>byte b = 100;\nb /= 2.5;\nSystem.out.println(b); // prints 40\n</code></pre>\n\n<p>or</p>\n\n<pre><code>char ch = '0';\nch *= 1.1;\nSystem.out.println(ch); // prints '4'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>char ch = 'A';\nch *= 1.5;\nSystem.out.println(ch); // prints 'a'\n</code></pre>\n", "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "answer_id": 8710747, "question_id": 8710619, "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"]}, {"body": "<p>The problem here involves type casting.</p>\n\n<p>When you add int and long, </p>\n\n<ol>\n<li>The int object is casted to long &amp; both are added and you get long object.</li>\n<li>but long object cannot be implicitly casted to int. So, you have to do that explicitly.</li>\n</ol>\n\n<p>But <code>+=</code> is coded in such a way that it does type casting. <code>i=(int)(i+m)</code></p>\n", "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "answer_id": 8710752, "question_id": 8710619, "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"]}, {"body": "<p>In Java type conversions are performed automatically when the type of the expression on the right hand side of an assignment operation can be safely promoted to the type of the variable on the left hand side of the assignment. Thus we can safely assign:  </p>\n\n<pre> byte -> short -> int -> long -> float -> double. </pre>  \n\n<p>The same will not work the other way round. For example we cannot automatically convert a long to an int because the first requires more storage than the second and consequently information may be lost. To force such a conversion we must carry out an explicit conversion.<br>\n<a href=\"http://way2java.com/casting-operations/data-type-casting-type-conversion/\">Type - Conversion</a></p>\n", "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "answer_id": 14473282, "question_id": 8710619, "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"]}, {"body": "<p>Sometimes, such a question can be asked at an interview.</p>\n\n<p>For example, when you write:</p>\n\n<pre><code>int a = 2;\nlong b = 3;\na = a + b;\n</code></pre>\n\n<p>there is no automatic typecasting. In C++ there will not be any error compiling the above code, but in Java you will get something like <code>Incompatible type exception</code>.</p>\n\n<p>So to avoid it, you must write your code like this:</p>\n\n<pre><code>int a = 2;\nlong b = 3;\na += b;// No compilation error or any exception due to the auto typecasting\n</code></pre>\n", "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "answer_id": 27247364, "question_id": 8710619, "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"]}, {"body": "<p>The main difference is that with <code>a = a + b</code>, there is no typecasting going on, and so the compiler gets angry at you for not typecasting. But with <code>a += b</code>, what it's really doing is typecasting <code>b</code> to a type compatible with <code>a</code>. So if you do </p>\n\n<pre><code>int a=5;\nlong b=10;\na+=b;\nSystem.out.println(a);\n</code></pre>\n\n<p>What you're really doing is: </p>\n\n<pre><code>int a=5;\nlong b=10;\na=a+(int)b;\nSystem.out.println(a);\n</code></pre>\n", "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "answer_id": 30699499, "question_id": 8710619, "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"]}, {"body": "<p>Subtle point here...</p>\n\n<p>There is an implicit typecast for 'i+j' when 'j' is a double and 'i' is an int.\nJava <strong>ALWAYS</strong> converts an integer into a double when there is an operation between them.</p>\n\n<p>To clarify 'i+=j' where i is an integer and j is a double can be described as</p>\n\n<pre><code>i = &lt;int&gt;(&lt;double&gt;i + j)\n</code></pre>\n\n<p>See: <a href=\"https://www.cs.cmu.edu/~pattis/15-1XX/15-200/lectures/voe/lecture.html#ImplicitConversion\" rel=\"nofollow\">this description of implicit casting</a></p>\n\n<p>You might want to typecast <code>j</code> to <code>(int)</code> in this case for clarity.</p>\n", "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "answer_id": 34863187, "question_id": 8710619, "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"]}], "link": "http://stackoverflow.com/questions/8710619/javas-compound-assignment-operators", "question_id": 8710619}, {"body": "<p>How can I loop through all the objects in an array using JavaScript?</p>\n\n<p>I thought of something like this:</p>\n\n<pre><code>forEach(instance in objects)\n</code></pre>\n\n<p>Where <code>objects</code> is my array of objects but this seems to be incorrect.</p>\n", "title": "For-each over an array in JavaScript?", "tags": ["javascript", "arrays", "loops", "foreach", "iteration"], "answers": [{"body": "\n\n<p><strong>TL;DR</strong></p>\n\n<ul>\n<li>Don't use <code>for-in</code> unless you use it with safeguards or are at least aware of why it might bite you.</li>\n<li><p>Your best bets are usually</p>\n\n<ul>\n<li>a <code>for-of</code> loop (ES2015+ only),</li>\n<li><code>Array#forEach</code> (<a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-array.prototype.foreach\"><code>spec</code></a> | <a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach\"><code>MDN</code></a>) (or its relatives <code>some</code> and such) (ES5+ only),</li>\n<li>a simple old-fashioned <code>for</code> loop,</li>\n<li>or <code>for-in</code> with safeguards.</li>\n</ul></li>\n</ul>\n\n<p>But there's <strong>lots</strong> more to explore, read on...</p>\n\n<hr>\n\n<p>JavaScript has powerful semantics for looping through arrays and array-like objects. I've split the answer into two parts: Options for genuine arrays, and options for things that are just array-<em>like</em>, such as the <code>arguments</code> object, other iterable objects (ES2015+), DOM collections, and so on.</p>\n\n<p>I'll quickly note that you can use the ES2015 options <em>now</em>, even on ES5 engines, by <em>transpiling</em> ES2015 to ES5. Search for \"ES2015 transpiling\" / \"ES6 transpiling\" for more...</p>\n\n<p>Okay, let's look at our options:</p>\n\n<h2>For Actual Arrays</h2>\n\n<p>You have three options in <a href=\"http://ecma-international.org/ecma-262/5.1/\">ECMAScript&nbsp;5</a> (\"ES5\"), the version most broadly supported at the moment, and will soon have two more in <a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html\">ECMAScript&nbsp;2015</a> (\"ES2015\", \"ES6\"), the latest version of JavaScript that vendors are working on supporting:</p>\n\n<ol>\n<li>Use <code>forEach</code> and related (ES5+)</li>\n<li>Use a simple <code>for</code> loop</li>\n<li>Use <code>for-in</code> <em>correctly</em></li>\n<li>Use <code>for-of</code> (use an iterator implicitly) (ES2015+)</li>\n<li>Use an iterator explicitly (ES2015+)</li>\n</ol>\n\n<p>Details:</p>\n\n<h3>1. Use <code>forEach</code> and related</h3>\n\n<p>If you're using an environment that supports the <code>Array</code> features of ES5 (directly or using a shim), you can use the new <code>forEach</code> (<a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-array.prototype.foreach\"><code>spec</code></a> | <a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach\"><code>MDN</code></a>):</p>\n\n<pre><code>var a = [\"a\", \"b\", \"c\"];\na.forEach(function(entry) {\n    console.log(entry);\n});\n</code></pre>\n\n<p><code>forEach</code> accepts an iterator function and, optionally, a value to use as <code>this</code> when calling that iterator function (not used above). The iterator function is called for each entry in the array, in order, skipping non-existent entries in sparse arrays. Although I only used one argument above, the iterator function is called with three: The value of each entry, the index of that entry, and a reference to the array you're iterating over (in case your function doesn't already have it handy).</p>\n\n<p>Unless you're supporting obsolete browsers like IE8 (which NetApps shows at just over 4% market share as of this writing in September&nbsp;2016), you can happily use <code>forEach</code> in a general-purpose web page without a shim. If you do need to support obsolete browsers, shimming/polyfilling <code>forEach</code> is easily done (search for \"es5 shim\" for several options).</p>\n\n<p><code>forEach</code> has the benefit that you don't have to declare indexing and value variables in the containing scope, as they're supplied as arguments to the iteration function, and so nicely scoped to just that iteration.</p>\n\n<p>If you're worried about the runtime cost of making a function call for each array entry, don't be; <a href=\"http://blog.niftysnippets.org/2012/02/foreach-and-runtime-cost.html\">details</a>.</p>\n\n<p>Additionally, <code>forEach</code> is the \"loop through them all\" function, but ES5 defined several other useful \"work your way through the array and do things\" functions, including:</p>\n\n<ul>\n<li><a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-array.prototype.every\"><code>every</code></a> (stops looping the first time the iterator returns <code>false</code> or something falsey)</li>\n<li><a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-array.prototype.some\"><code>some</code></a> (stops looping the first time the iterator returns <code>true</code> or something truthy)</li>\n<li><a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-array.prototype.filter\"><code>filter</code></a> (creates a new array including elements where the filter function returns <code>true</code> and omitting the ones where it returns <code>false</code>)</li>\n<li><a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-array.prototype.map\"><code>map</code></a> (creates a new array from the values returned by the iterator function)</li>\n<li><a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-array.prototype.reduce\"><code>reduce</code></a> (builds up a value by repeated calling the iterator, passing in previous values; see the spec for the details; useful for summing the contents of an array and many other things)</li>\n<li><a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-array.prototype.reduceright\"><code>reduceRight</code></a> (like <code>reduce</code>, but works in descending rather than ascending order)</li>\n</ul>\n\n<h3>2. Use a simple <code>for</code> loop</h3>\n\n<p>Sometimes the old ways are the best:</p>\n\n<pre><code>var index;\nvar a = [\"a\", \"b\", \"c\"];\nfor (index = 0; index &lt; a.length; ++index) {\n    console.log(a[index]);\n}\n</code></pre>\n\n<p>If the length of the array won't change during the loop, and it's in performance-sensitive code (unlikely), a slightly more complicated version grabbing the length up front might be a <strong><em>tiny</em></strong> bit faster:</p>\n\n<pre><code>var index, len;\nvar a = [\"a\", \"b\", \"c\"];\nfor (index = 0, len = a.length; index &lt; len; ++index) {\n    console.log(a[index]);\n}\n</code></pre>\n\n<p>And/or counting backward:</p>\n\n<pre><code>var index;\nvar a = [\"a\", \"b\", \"c\"];\nfor (index = a.length - 1; index &gt;= 0; --index) {\n    console.log(a[index]);\n}\n</code></pre>\n\n<p>But with modern JavaScript engines, it's rare you need to eke out that last bit of juice.</p>\n\n<p>In ES2015 and higher, you can make your index and value variables local to the <code>for</code> loop:</p>\n\n<pre><code>let a = [\"a\", \"b\", \"c\"];\nfor (let index = 0; index &lt; a.length; ++index) {\n    let value = a[index];\n}\n//console.log(index); // Would cause \"ReferenceError: index is not defined\"\n//console.log(value); // Would cause \"ReferenceError: value is not defined\"\n</code></pre>\n\n<p>And when you do that, not just <code>value</code> but also <code>index</code> is recreated for each loop iteration, meaning closures created in the loop body keep a reference to the <code>index</code> (and <code>value</code>) created for that specific iteration:</p>\n\n<pre><code>let divs = Array.from(document.querySelector(\"div\"));\nfor (let index = 0; index &lt; divs.length; ++index) {\n    div[index].addEventListener(e =&gt; {\n        alert(\"Index is: \" + index);\n    });\n}\n</code></pre>\n\n<p>If you had five divs, you'd get \"Index is: 0\" if you clicked the first and \"Index is: 4\" if you clicked the last. This does <strong>not</strong> work if you use <code>var</code> instead of <code>let</code>.</p>\n\n<h3>3. Use <code>for-in</code> <em>correctly</em></h3>\n\n<p>You'll get people telling you to use <code>for-in</code>, but <a href=\"http://blog.niftysnippets.org/2010/11/myths-and-realities-of-forin.html\">that's not what <code>for-in</code> is for</a>. <code>for-in</code> loops through the <em>enumerable properties of an object</em>, not the indexes of an array. <strong>The order is not guaranteed</strong>, not even in ES2015 (ES6). ES2015 does define an order to object properties (via <a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-ordinary-object-internal-methods-and-internal-slots-ownpropertykeys\"><code>[[OwnPropertyKeys]]</code></a>, <a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-ordinary-object-internal-methods-and-internal-slots-enumerate\"><code>[[Enumerate]]</code></a>, and things that use them like <a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-object.getownpropertynames\"><code>Object.getOwnPropertyKeys</code></a>), but it <strong>does not</strong> define that <code>for-in</code> will follow that order. (Details in <a href=\"http://stackoverflow.com/a/30919039/157247\">this other answer</a>.)</p>\n\n<p>Still, it <em>can</em> be useful, particularly for <a href=\"http://en.wikipedia.org/wiki/Sparse_array\"><em>sparse</em> arrays</a>, if you use appropriate safeguards:</p>\n\n<pre><code>// `a` is a sparse array\nvar key;\nvar a = [];\na[0] = \"a\";\na[10] = \"b\";\na[10000] = \"c\";\nfor (key in a) {\n    if (a.hasOwnProperty(key)  &amp;&amp;        // These are explained\n        /^0$|^[1-9]\\d*$/.test(key) &amp;&amp;    // and then hidden\n        key &lt;= 4294967294                // away below\n        ) {\n        console.log(a[key]);\n    }\n}\n</code></pre>\n\n<p>Note the two checks:</p>\n\n<ol>\n<li><p>That the object has its <em>own</em> property by that name (not one it inherits from its prototype), and</p></li>\n<li><p>That the key is a base-10 numeric string in its normal string form and its value is &lt;= 2^32 - 2 (which is 4,294,967,294). Where does that number come from? It's part of the definition of an array index <a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-15.4\">in the specification</a>. Other numbers (non-integers, negative numbers, numbers greater than 2^32 - 2) are not array indexes. The reason it's 2^32 - <strong>2</strong> is that that makes the greatest index value one lower than 2^32 - <strong>1</strong>, which is the maximum value an array's <code>length</code> can have. (E.g., an array's length fits in a 32-bit unsigned integer.) <em>(Props to RobG for pointing out in a comment <a href=\"http://blog.niftysnippets.org/2010/11/myths-and-realities-of-forin.html\">on my blog post</a> that my previous test wasn't quite right.)</em></p></li>\n</ol>\n\n<p>That's a tiny bit of added overhead per loop iteration on most arrays, but if you have a <em>sparse</em> array, it can be a more efficient way to loop because it only loops for entries that actually exist. E.g., for the array above, we loop a total of three times (for keys <code>\"0\"</code>, <code>\"10\"</code>, and <code>\"10000\"</code>&nbsp;&mdash; remember, they're strings), not 10,001 times.</p>\n\n<p>Now, you won't want to write that every time, so you might put this in your toolkit:</p>\n\n<pre><code>function arrayHasOwnIndex(array, prop) {\n    return array.hasOwnProperty(prop) &amp;&amp; /^0$|^[1-9]\\d*$/.test(prop) &amp;&amp; prop &lt;= 4294967294; // 2^32 - 2\n}\n</code></pre>\n\n<p>And then we'd use it like this:</p>\n\n<pre><code>for (key in a) {\n    if (arrayHasOwnIndex(a, key)) {\n        console.log(a[key]);\n    }\n}\n</code></pre>\n\n<p>Or if you're interested in just a \"good enough for most cases\" test, you could use this, but while it's close, it's not quite correct:</p>\n\n<pre><code>for (key in a) {\n    // \"Good enough\" for most cases\n    if (String(parseInt(key, 10)) === key &amp;&amp; a.hasOwnProperty(key)) {\n        console.log(a[key]);\n    }\n}\n</code></pre>\n\n<h3>4. Use <code>for-of</code> (use an iterator implicitly) (ES2015+)</h3>\n\n<p>ES2015 adds <em>iterators</em> to JavaScript. The easiest way to use iterators is the new <code>for-of</code> statement. It looks like this:</p>\n\n<pre><code>var val;\nvar a = [\"a\", \"b\", \"c\"];\nfor (val of a) {\n    console.log(val);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre>\na\nb\nc\n</pre>\n\n<p>Under the covers, that gets an <em>iterator</em> from the array and loops through it, getting the values from it. This doesn't have the issue that using <code>for-in</code> has, because it uses an iterator defined by the object (the array), and arrays define that their iterators iterate through their <em>entries</em> (not their properties). Unlike <code>for-in</code> in ES5, the order in which the entries are visited is the numeric order of their indexes.</p>\n\n<h3>5. Use an iterator explicitly (ES2015+)</h3>\n\n<p>Sometimes, you might want to use an iterator <em>explicitly</em>. You can do that, too, although it's a lot clunkier than <code>for-of</code>. It looks like this:</p>\n\n<pre><code>var a = [\"a\", \"b\", \"c\"];\nvar it = a.values();\nvar entry;\nwhile (!(entry = it.next()).done) {\n    console.log(entry.value);\n}\n</code></pre>\n\n<p>The iterator is a function (specifically, a <em>generator</em>) that returns a new object each time you call <code>next</code>. The object returned by the iterator has a property, <code>done</code>, telling us whether it's done, and a property <code>value</code> with the value for that iteration.</p>\n\n<p>The meaning of <code>value</code> varies depending on the iterator; arrays support (at least) three functions that return iterators:</p>\n\n<ul>\n<li><code>values()</code>: This is the one I used above. It returns an iterator where each <code>value</code> is the value for that iteration.</li>\n<li><code>keys()</code>: Returns an iterator where each <code>value</code> is the key for that iteration (so for our <code>a</code> above, that would be <code>\"0\"</code>, then <code>\"1\"</code>, then <code>\"2\"</code>).</li>\n<li><code>entries()</code>: Returns an iterator where each <code>value</code> is an array in the form <code>[key, value]</code> for that iteration.</li>\n</ul>\n\n<p>(As of this writing, Firefox 29 supports <code>entries</code> and <code>keys</code> but not <code>values</code>.)</p>\n\n<h2>For Array-Like Objects</h2>\n\n<p>Aside from true arrays, there are also <em>array-like</em> objects that have a <code>length</code> property and properties with numeric names: <code>NodeList</code> instances, the <code>arguments</code> object, etc. How do we loop through their contents?</p>\n\n<h3>Use any of the options above for arrays</h3>\n\n<p>At least some, and possibly most or even all, of the array approaches above frequently apply equally well to array-like objects:</p>\n\n<ol>\n<li><p><strong>Use <code>forEach</code> and related (ES5+)</strong></p>\n\n<p>The various functions on <code>Array.prototype</code> are \"intentionally generic\" and can usually be used on array-like objects via <a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-function.prototype.call\"><code>Function#call</code></a> or <a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-function.prototype.apply\"><code>Function#apply</code></a>. (See the <em>Caveat for host-provided objects</em> at the end of this answer, but it's a rare issue.)</p>\n\n<p>Suppose you wanted to use <code>forEach</code> on a <code>Node</code>'s <code>childNodes</code> property. You'd do this:</p>\n\n<pre><code>Array.prototype.forEach.call(node.childNodes, function(child) {\n    // Do something with `child`\n});\n</code></pre>\n\n<p>If you're going to do that a lot, you might want to grab a copy of the function reference into a variable for reuse, e.g.:</p>\n\n<pre><code>// (This is all presumably in some scoping function)\nvar forEach = Array.prototype.forEach;\n\n// Then later...\nforEach.call(node.childNodes, function(child) {\n    // Do something with `child`\n});\n</code></pre></li>\n<li><p><strong>Use a simple <code>for</code> loop</strong></p>\n\n<p>Obviously, a simple <code>for</code> loop applies to array-like objects.</p></li>\n<li><p><strong>Use <code>for-in</code> <em>correctly</em></strong></p>\n\n<p><code>for-in</code> with the same safeguards as with an array should work with array-like objects as well; the caveat for host-provided objects on #1 above may apply.</p></li>\n<li><p><strong>Use <code>for-of</code> (use an iterator implicitly) (ES2015+)</strong></p>\n\n<p><code>for-of</code> will use the iterator provided by the object (if any); we'll have to see how this plays with the various array-like objects, particularly host-provided ones.</p></li>\n<li><p><strong>Use an iterator explicitly (ES2015+)</strong></p>\n\n<p>See #4, we'll have to see how iterators play out.</p></li>\n</ol>\n\n<h3>Create a true array</h3>\n\n<p>Other times, you may want to convert an array-like object into a true array. Doing that is surprisingly easy:</p>\n\n<ol>\n<li><p><strong>Use the <a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-array.prototype.slice\"><code>slice</code></a> method of arrays</strong></p>\n\n<p>We can use the <code>slice</code> method of arrays, which like the other methods mentioned above is \"intentionally generic\" and so can be used with array-like objects, like this:</p>\n\n<pre><code>var trueArray = Array.prototype.slice.call(arrayLikeObject);\n</code></pre>\n\n<p>So for instance, if we want to convert a <code>NodeList</code> into a true array, we could do this:</p>\n\n<pre><code>var divs = Array.prototype.slice.call(document.querySelectorAll(\"div\"));\n</code></pre>\n\n<p>See the <em>Caveat for host-provided objects</em> below. In particular, note that this will fail in IE8 and earlier, which don't let you use host-provided objects as <code>this</code> like that.</p></li>\n<li><p><strong>Use the <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator\">spread operator (<code>...</code>)</a></strong></p>\n\n<p>It's also possible to use the ES2015 <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator\">spread operator</a>, with JavaScript engines that support this feature:</p>\n\n<pre><code>var trueArray = [...iterableObject];\n</code></pre>\n\n<p>So for instance, if we want to convert a <code>NodeList</code> into a true array, with spread syntax this becomes quite succinct:</p>\n\n<pre><code>var divs = [...document.querySelectorAll(\"div\")];\n</code></pre></li>\n<li><p><strong>Use <code>Array.from</code></strong> <a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-array.from\">(spec)</a> | <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from\">(MDN)</a></p>\n\n<p><code>Array.from</code> (ES2015, but shimmable) creates an array from an array-like object, optionally passing the entries through a mapping function first. So:</p>\n\n<pre><code>var divs = Array.from(document.querySelectorAll(\"div\"));\n</code></pre>\n\n<p>Or if you wanted to get an array of the tag names of the elements with a given class, you'd use the mapping function:</p>\n\n<pre><code>// Arrow function (ES2015):\nvar divs = Array.from(document.querySelectorAll(\".some-class\"), element =&gt; element.tagName);\n\n// Standard function (since `Array.from` can be shimmed):\nvar divs = Array.from(document.querySelectorAll(\".some-class\"), function(element) {\n    return element.tagName;\n});\n</code></pre></li>\n</ol>\n\n<h3>Caveat for host-provided objects</h3>\n\n<p>If you use <code>Array.prototype</code> functions with <em>host-provided</em> array-like objects (DOM lists and other things provided by the browser rather than the JavaScript engine), you need to be sure to test in your target environments to make sure the host-provided object behaves properly. <strong>Most do behave properly</strong> (now), but it's important to test. The reason is that most of the <code>Array.prototype</code> methods you're likely to want to use rely on the host-provided object giving an honest answer to the abstract <a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-8.6.2\"><code>[[HasProperty]]</code></a> operation. As of this writing, browsers do a very good job of this, but the ES5 spec did allow for the possibility a host-provided object may not be honest; it's in <a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-8.6.2\">\u00a78.6.2</a> (several paragraphs below the big table near the beginning of that section), where it says:</p>\n\n<blockquote>\n  <p>Host objects may implement these internal methods in any manner unless specified otherwise; for example, one possibility is that <code>[[Get]]</code> and <code>[[Put]]</code> for a particular host object indeed fetch and store property values but <code>[[HasProperty]]</code> always generates <strong>false</strong>.</p>\n</blockquote>\n\n<p>(I couldn't find the equivalent verbiage in the ES2015 spec, but it's bound to still be the case.) Again, as of this writing the common host-provided array-like objects in modern browsers (<code>NodeList</code> instances, for instance) <strong>do</strong> handle <code>[[HasProperty]]</code> correctly, but it's important to test.</p>\n", "title": "For-each over an array in JavaScript?", "answer_id": 9329476, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p><strong>Edit</strong>: This answer is hopelessly out-of-date. For a more modern approach, look at <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array\">the methods available on an array</a>. Methods of interest might be:</p>\n\n<ul>\n<li>forEach</li>\n<li>map</li>\n<li>filter</li>\n<li>zip</li>\n<li>reduce</li>\n<li>every</li>\n<li>some</li>\n</ul>\n\n<hr>\n\n<p>The standard way to iterate an array in <a href=\"http://en.wikipedia.org/wiki/JavaScript\">JavaScript</a> is a vanilla <code>for</code>-loop:</p>\n\n<pre><code>var length = arr.length,\n    element = null;\nfor (var i = 0; i &lt; length; i++) {\n  element = arr[i];\n  // Do something with element i.\n}\n</code></pre>\n\n<p>Note, however, that this approach is only good if you have a dense array, and each index is occupied by an element. If the array is sparse, then you can run into performance problems with this approach, since you will iterate over a lot of indices that do not <em>really</em> exist in the array. In this case, a <code>for .. in</code>-loop might be a better idea. <strong>However</strong>, you must use the appropriate safeguards to ensure that only the desired properties of the array (that is, the array elements) are acted upon, since the <code>for..in</code>-loop will also be enumerated in legacy browsers, or if the additional properties are defined as <code>enumerable</code>.</p>\n\n<p>In <a href=\"https://en.wikipedia.org/wiki/ECMAScript#ECMAScript.2C_5th_Edition\">ECMAScript 5</a> there will be a forEach method on the array prototype, but it is not supported in legacy browsers. So to be able to use it consistently you must either have an environment that supports it (for example, <a href=\"http://en.wikipedia.org/wiki/Node.js\">Node.js</a> for server side JavaScript), or use a \"Polyfill\". The Polyfill for this functionality is, however, trivial and since it makes the code easier to read, it is a good polyfill to include.</p>\n", "title": "For-each over an array in JavaScript?", "answer_id": 9329496, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>If you want to loop over an array, use the standard three-part <code>for</code> loop.</p>\n\n<pre><code>for (var i = 0; i &lt; myArray.length; i++) {\n    var arrayItem = myArray[i];\n}\n</code></pre>\n\n<p>You can get some performance optimisations by caching <code>myArray.length</code> or iterating over it backwards.</p>\n", "title": "For-each over an array in JavaScript?", "answer_id": 9329504, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>There isn't any <code>for each</code> loop in native <a href=\"http://en.wikipedia.org/wiki/JavaScript\">JavaScript</a>. You can either use libraries to get this functionality (I recommend <a href=\"http://en.wikipedia.org/wiki/Underscore.js\">Underscore.js</a>), use a simple <code>for</code> in loop.</p>\n\n<pre><code>for (var instance in objects) {\n   ...\n}\n</code></pre>\n\n<p>However, note that there may be reasons to use an even simpler <code>for</code> loop (see Stack Overflow question <em><a href=\"http://stackoverflow.com/questions/500504\">Why is using \u201cfor\u2026in\u201d with array iteration such a bad idea?</a></em>)</p>\n\n<pre><code>var instance;\nfor (var i=0; i &lt; objects.length; i++) {\n    var instance = objects[i];\n    ...\n}\n</code></pre>\n", "title": "For-each over an array in JavaScript?", "answer_id": 9329551, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>Some <a href=\"http://en.wikipedia.org/wiki/C_%28programming_language%29\">C</a>-style languages use <code>foreach</code> to loop through enumerations. In JavaScript this is done with the <a href=\"https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in\"><code>for..in</code> loop structure</a>:</p>\n\n<pre><code>var index,\n    value;\nfor (index in obj) {\n    value = obj[index];\n}\n</code></pre>\n\n<p>There is a catch. <code>for..in</code> will loop through each of the object's enumerable members, and the members on its prototype. To avoid reading values that are inherited through the object's prototype, simply check if the property belongs to the object:</p>\n\n<pre><code>for (i in obj) {\n    if (obj.hasOwnProperty(i)) {\n        //do stuff\n    }\n}\n</code></pre>\n\n<p>Additionally, <a href=\"https://en.wikipedia.org/wiki/ECMAScript#ECMAScript.2C_5th_Edition\">ECMAScript 5</a> has added a <a href=\"https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach\"><code>forEach</code></a> method to <code>Array.prototype</code> which can be used to enumerate over an array using a calback (the polyfill is in the docs so you can still use it for older browsers):</p>\n\n<pre><code>arr.forEach(function (val, index, theArray) {\n    //do stuff\n});\n</code></pre>\n\n<p>It's important to note that <code>Array.prototype.forEach</code> doesn't break when the callback returns <code>false</code>. <a href=\"http://en.wikipedia.org/wiki/JQuery\">jQuery</a> and <a href=\"http://en.wikipedia.org/wiki/Underscore.js\">Underscore.js</a> provide their own variations on <code>each</code> to provide loops that can be short-circuited.</p>\n", "title": "For-each over an array in JavaScript?", "answer_id": 9329586, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>If you\u2019re using the <a href=\"http://jquery.com/\"><strong>jQuery</strong></a> library, you can use <a href=\"http://api.jquery.com/jQuery.each/\"><strong>jQuery.each</strong></a>:</p>\n\n\n\n<pre class=\"lang-js prettyprint-override\"><code>$.each(yourArray, function(index, value) {\n  // do your stuff here\n});\n</code></pre>\n\n<p><strong>EDIT :</strong> </p>\n\n<p>As per question, user want code in javascript instead of jquery so the edit is</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>var length = yourArray.length;   \nfor (var i = 0; i &lt; length; i++) {\n  // Do something with yourArray[i].\n}\n</code></pre>\n", "title": "For-each over an array in JavaScript?", "answer_id": 9329601, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>If you don't mind emptying the array:</p>\n\n<pre><code>var x;\n\nwhile(x = y.pop()){ \n\n    alert(x); //do something \n\n}\n</code></pre>\n\n<p><code>x</code> will contain the last value of <code>y</code> and it will be removed from the array. You can also use <code>shift()</code> which will give and remove the first item from <code>y</code>.</p>\n", "title": "For-each over an array in JavaScript?", "answer_id": 15318284, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>A <strong>forEach</strong> implementation (<a href=\"http://jsfiddle.net/nmoliveira/zNsyB/\">see in jsFiddle</a>):</p>\n\n<pre><code>function forEach(list,callback) {\n  var length = list.length;\n  for (var n = 0; n &lt; length; n++) {\n    callback.call(list[n]);\n  }\n}\n\nvar myArray = ['hello','world'];\n\nforEach(\n  myArray,\n  function(){\n    alert(this); // do something\n  }\n);\n</code></pre>\n", "title": "For-each over an array in JavaScript?", "answer_id": 15914908, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p><a href=\"http://en.wikipedia.org/wiki/Internet_Explorer_8\" rel=\"nofollow\">Internet&nbsp;Explorer&nbsp;8</a> and below don't support forEach. Here's a polyfill for non supporting browsers;</p>\n\n<pre><code>if ( !Array.prototype.forEach ) {\n  Array.prototype.forEach = function(fn, scope) {\n    for(var i = 0, len = this.length; i &lt; len; ++i) {\n      if (i in this) {\n        fn.call(scope, this[i], i, this);\n      }\n    }\n  };\n}\n</code></pre>\n\n<p>It is taken from <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach\" rel=\"nofollow\">Mozilla's documentation</a>.</p>\n", "title": "For-each over an array in JavaScript?", "answer_id": 17632619, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>ECMAScript&nbsp;6 will maybe contain the \"for...of\" construct. See <em><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for\" rel=\"nofollow\">for...of</a></em> (MDN) for more information. You can already try it out with recent Firefox versions.</p>\n", "title": "For-each over an array in JavaScript?", "answer_id": 17652713, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>An easy solution now would be to use the <a href=\"https://en.wikipedia.org/wiki/Underscore.js\" rel=\"nofollow\">underscore.js library</a>. It's providing many useful tools, such as <code>each</code> and will automatically delegate the job to the native <code>forEach</code> if available.</p>\n\n<p><a href=\"http://codepen.io/Micka33/pen/nbyxf\" rel=\"nofollow\">A CodePen example</a> of how it works is:</p>\n\n<pre><code>var arr = [\"elemA\", \"elemB\", \"elemC\"];\n_.each(arr, function(elem, index, ar)\n{\n...\n});\n</code></pre>\n\n<h3>See also</h3>\n\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach\" rel=\"nofollow\">Documentation for native <code>Array.prototype.forEach()</code></a>.</li>\n<li>In <em><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for_each...in\" rel=\"nofollow\">for_each...in</a></em> (MDN) it is explained that <code>for each (variable in object)</code> is deprecated as the part of ECMA-357 (<a href=\"https://developer.mozilla.org/en-US/docs/E4X\" rel=\"nofollow\">EAX</a>) standard.</li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of\" rel=\"nofollow\">for...of</a> (MDN) describes the next way of iterating using <code>for (variable of object)</code> as the part of the Harmony (ECMAScript&nbsp;6) proposal.</li>\n</ul>\n", "title": "For-each over an array in JavaScript?", "answer_id": 17695617, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<pre><code>var i, len;\nfor( i=0, len=array.length ; i&lt;len ; i++){\n    // here, array[i] is the current element\n}\n</code></pre>\n", "title": "For-each over an array in JavaScript?", "answer_id": 19481136, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>Probably the <code>for(i = 0; i &lt; array.length; i++)</code> loop is not the best choice. Why? If you have this:</p>\n\n<pre><code>var array = new Array();\narray[1] = \"Hello\";\narray[7] = \"World\";\narray[11] = \"!\";\n</code></pre>\n\n<p>The method will call from <code>array[0]</code> to <code>array[2]</code>. First, this will first reference variables you don't even have, second you would not have the variables in the array, and third this will make the code bolder. Look here, it's what I use:</p>\n\n<pre><code>for(var i in array){\n    var el = array[i];\n    //If you want 'i' to be INT just put parseInt(i)\n    //Do something with el\n}\n</code></pre>\n\n<p>And if you want it to be a function, you can do this:</p>\n\n<pre><code>function foreach(array, call){\n    for(var i in array){\n        call(array[i]);\n    }\n}\n</code></pre>\n\n<p>If you want to break, a little more logic:</p>\n\n<pre><code>function foreach(array, call){\n    for(var i in array){\n        if(call(array[i]) == false){\n            break;\n        }\n    }\n}\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>foreach(array, function(el){\n    if(el != \"!\"){\n        console.log(el);\n    } else {\n        console.log(el+\"!!\");\n    }\n});\n</code></pre>\n\n<p>It returns:</p>\n\n<pre><code>//Hello\n//World\n//!!!\n</code></pre>\n", "title": "For-each over an array in JavaScript?", "answer_id": 19738311, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>There are three implementations of <code>foreach</code> in <a href=\"http://en.wikipedia.org/wiki/JQuery\">jQuery</a> as follows.</p>\n\n<pre><code>var a = [3,2];\n\n$(a).each(function(){console.log(this.valueOf())}); //Method 1\n$.each(a, function(){console.log(this.valueOf())}); //Method 2\n$.each($(a), function(){console.log(this.valueOf())}); //Method 3\n</code></pre>\n", "title": "For-each over an array in JavaScript?", "answer_id": 20774655, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>This is an iterator for NON-sparse list where the index starts at 0, which is the typical scenario when dealing with document.getElementsByTagName or document.querySelectorAll)</p>\n\n<pre><code>function each( fn, data ) {\n\n    if(typeof fn == 'string')\n        eval('fn = function(data, i){' + fn + '}');\n\n    for(var i=0, L=this.length; i &lt; L; i++) \n        fn.call( this[i], data, i );   \n\n    return this;\n}\n\nArray.prototype.each = each;  \n</code></pre>\n\n<p><strong>Examples of usage:</strong></p>\n\n<p><strong>Example #1</strong></p>\n\n<pre><code>var arr=[];\n[1,2,3].each( function(a){ a.push( this * this},arr);\n</code></pre>\n\n<p>arr is now = [1, 4, 9]</p>\n\n<p><strong>Example #2</strong></p>\n\n<pre><code>each.call(document.getElementsByTagName('p'), \"this.className = data;\",'blue');\n</code></pre>\n\n<p>Each  p tag gets class=\"blue\"</p>\n\n<p><strong>Example #3</strong></p>\n\n<pre><code>each.call(document.getElementsByTagName('p'), \n    \"if( i % 2 == 0) this.className = data;\",\n    'red'\n);\n</code></pre>\n\n<p>Every other  p tag gets class=\"red\"></p>\n\n<p><strong>Example #4</strong></p>\n\n<pre><code>each.call(document.querySelectorAll('p.blue'), \n    function(newClass, i) {\n        if( i &lt; 20 )\n            this.className = newClass;\n    },'green'\n);\n</code></pre>\n\n<p>And finally, the first 20 blue p tags are changed to green</p>\n\n<p>Caution when using string as function: the function is created out-of-context and ought to be used only where you are certain of variable scoping.  Otherwise, better to pass functions where scoping is more intuitive.</p>\n", "title": "For-each over an array in JavaScript?", "answer_id": 21460530, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>jQuery way using <code>$.map</code>:</p>\n\n<pre><code>var data = [1, 2, 3, 4, 5, 6, 7];\n\nvar newData = $.map(data, function(element) {\n    if (element % 2 == 0) {\n        return element;\n    }\n});\n\n// newData = [2, 4, 6];\n</code></pre>\n", "title": "For-each over an array in JavaScript?", "answer_id": 22784194, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<h1>Loop backwards</h1>\n\n<p>I think the <em>reverse</em> for loop deserves a mention here:</p>\n\n<pre><code>for (var i=array.length; i--; ) {\n     // process array[i]\n}\n</code></pre>\n\n<h2>Advantages:</h2>\n\n<ul>\n<li>You do not need to declare a temporary <code>len</code> variable, or compare against <code>array.length</code> on each iteration, either of which might be a minute optimisation.</li>\n<li><strong>Removing siblings</strong> from the DOM in reverse order is usually <strong>more efficient</strong>.  (The browser needs to do less shifting of elements in its internal arrays.)</li>\n<li>If you <strong>modify the array</strong> while looping, at or after index <em>i</em> (for example you remove or insert an item at <code>array[i]</code>), then a forward loop would skip the item that shifted left into position <em>i</em>, or re-process the <em>i</em>th item that was shifted right.  In a traditional for loop, you <em>could</em> update <em>i</em> to point to the next item that needs processing - 1, but simply reversing the direction of iteration is often a <strong>simpler</strong> and <a href=\"http://stackoverflow.com/questions/23186254/javascript-splice-changing-earlier-values-in-an-array/23186450#23186450\">more elegant solution</a>.</li>\n<li>Similarly, when modifying or removing <strong>nested</strong> DOM elements, processing in reverse can <strong>circumvent errors</strong>. For example, consider modifying the innerHTML of a parent node before handling its children.  By the time the child node is reached it will be detached from the DOM, having been replaced by a newly created child when the parent's innerHTML was written.</li>\n<li>It is <strong>shorter</strong> to type, and <strong>read</strong>, than some of the other options available.  Although it loses to <code>forEach()</code> and to ES6's <code>for ... of</code>.</li>\n</ul>\n\n<h2>Disadvantages:</h2>\n\n<ul>\n<li>It processes the items in reverse order.  If you were building a new array from the results, or printing things on screen, naturally <strong>the output will be reversed</strong> with respect to the original order.</li>\n<li>Repeatedly inserting siblings into the DOM as a first child in order to retain their order is <strong>less efficient</strong>.  (The browser would keep having to shift things right.)  To create DOM nodes efficiently and in order, just loop forwards and append as normal (and also use a \"document fragment\").</li>\n<li>The reverse loop is <strong>confusing</strong> to junior developers.  (You may consider that an advantage, depending on your outlook.)</li>\n</ul>\n\n<hr>\n\n<h2>Should I always use it?</h2>\n\n<p>Some developers use the reverse for loop <em>by default</em>, unless there is a good reason to loop forwards.</p>\n\n<p>Although the performance gains are usually insignificant, it sort of screams:</p>\n\n<blockquote>\n  <p>\"Just do this to every item in the list, I don't care about the order!\"</p>\n</blockquote>\n\n<p>However in practice that is <strong>not</strong> actually a reliable indication of intent, since it is indistinguishable from those occasions when you <strong><em>do</em></strong> care about the order, and really do <strong><em>need</em></strong> to loop in reverse.  So in fact another construct would be needed to accurately express the \"don't care\" intent, something currently unavailable in most languages, including ECMAScript, but which could be called, for example, <code>forEachUnordered()</code>.</p>\n\n<p>If order doesn't matter, and <strong>efficiency</strong> is a concern (in the innermost loop of a game or animation engine), then it may be acceptable to use the reverse for loop as your go-to pattern.  Just remember that seeing a reverse for loop in existing code <strong>does not necessarily mean</strong> that the order irrelevant!</p>\n\n<h3>It is better to use forEach()</h3>\n\n<p>In general for higher level code where <strong>clarity and safety</strong> are greater concerns, I would recommend using <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach\"><code>Array::forEach</code></a> as your default pattern:</p>\n\n<ul>\n<li>It is clear to read.</li>\n<li>It indicates that <em>i</em> is not going to be shifted within the block (which is always a possible surprise hiding in long <code>for</code> and <code>while</code> loops.)</li>\n<li>It gives you a free scope for closures.</li>\n<li>It reduces leakage of local variables and accidental collision with (and mutation of) outer variables.</li>\n<li>But note that unlike <code>map</code>, <code>forEach</code> <strong>does not</strong> exclude the possibility that the loop will <strong>break</strong> out part-way through.  This is a feature that can be triggered by returning <em>false</em> from the callback.</li>\n</ul>\n\n<p>Then when you do see the reverse for loop in your code, that is a hint that it is reversed for a good reason (perhaps one of the reasons described above).  And seeing a traditional forward for loop may indicate that shifting can take place.</p>\n\n<p>(If the discussion of intent makes no sense to you, then you and your code may benefit from watching Crockford's lecture on <a href=\"https://www.youtube.com/watch?v=taaEzHI9xyY&amp;t=480\">Programming Style &amp; Your Brain</a>.)</p>\n\n<hr>\n\n<h2>How does it work?</h2>\n\n<pre><code>for (var i=0; i&lt;array.length; i++) { ... }   // Forwards\n\nfor (var i=array.length; i--; )    { ... }   // Reverse\n</code></pre>\n\n<p>You will notice that <code>i--</code> is the middle clause (where we usually see a comparison) and the last clause is empty (where we usually see <code>i++</code>).  That means that <code>i--</code> is also used as the <em>condition</em> for continuation.  Crucially, it is executed and checked <em>before</em> each iteration.</p>\n\n<ul>\n<li><p><strong>How can it start at <code>array.length</code> without exploding?</strong></p>\n\n<p>Because <code>i--</code> runs <em>before</em> each iteration, on the first iteration we will actually be accessing the item at <code>array.length-1</code> which avoids any issues with <strike>Array-out-of-bounds</strike> <code>undefined</code> items.</p></li>\n<li><p><strong>Why doesn't it stop iterating before index 0?</strong></p>\n\n<p>The loop will stop iterating when the condition <code>i--</code> evaluates to a falsey value (when it yields 0).</p>\n\n<p>The trick is that unlike <code>--i</code>, the trailing <code>i--</code> operator decrements <code>i</code> but yields the value <strong><em>before</em></strong> the decrement.  Your console can demonstrate this:</p>\n\n<p><code>&gt; var i = 5; [i, i--, i];</code></p>\n\n<p><code>[5, 5, 4]</code></p>\n\n<p>So on the final iteration, <em>i</em> was previously <strong>1</strong> and the <code>i--</code> expression changes it to <strong>0</strong> but actually yields <strong>1</strong> (truthy), and so the condition passes.  On the next iteration <code>i--</code> changes <em>i</em> to <strong>-1</strong> but yields <strong>0</strong> (falsey), causing execution to immediately drop out of the bottom of the loop.</p>\n\n<p>In the traditional forwards for loop, <code>i++</code> and <code>++i</code> are interchangeable (as Douglas Crockford points out).  However in the reverse for loop, because our decrement is also our condition expression, we must stick with <code>i--</code> if we want to process the item at index 0.</p></li>\n</ul>\n\n<hr>\n\n<h2>Trivia</h2>\n\n<p>Some people like to draw a little arrow in the reverse <code>for</code> loop, and end with a wink:</p>\n\n<pre><code>for (var i=array.length; i --&gt; 0 ;) {\n</code></pre>\n\n<hr>\n\n<p><em>Credits go to WYL for showing me the benefits and horrors of the reverse for loop.</em></p>\n", "title": "For-each over an array in JavaScript?", "answer_id": 23430396, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>I know this is an old post, and there are so many great answers already. For a little more completeness I figured I'd throw in another one using <a href=\"https://angularjs.org/\">AngularJS</a>. Of course, this only applies if you're using Angular, obviously, nonetheless I'd like to put it anyway.</p>\n\n<p><code>angular.forEach</code> takes 2 arguments and an optional third argument. The first argument is the object (array) to iterate over, the second argument is the iterator function, and the optional third argument is the object context (basically referred to inside the loop as 'this'.</p>\n\n<p>There are different ways to use the forEach loop of angular. The simplest and probably most used is</p>\n\n<pre><code>var temp = [1, 2, 3];\nangular.forEach(temp, function(item) {\n    //item will be each element in the array\n    //do something\n});\n</code></pre>\n\n<p>Another way that is useful for copying items from one array to another is</p>\n\n<pre><code>var temp = [1, 2, 3];\nvar temp2 = [];\nangular.forEach(temp, function(item) {\n    this.push(item); //\"this\" refers to the array passed into the optional third parameter so, in this case, temp2.\n}, temp2);\n</code></pre>\n\n<p>Though, you don't have to do that, you can simply do the following and it's equivalent to the previous example:</p>\n\n<pre><code>angular.forEach(temp, function(item) {\n    temp2.push(item);\n});\n</code></pre>\n\n<p>Now there are pros and cons of using the <code>angular.forEach</code> function as opposed to the built in vanilla-flavored <code>for</code> loop.</p>\n\n<p><strong>Pros</strong></p>\n\n<ul>\n<li>Easy readability</li>\n<li>Easy writability</li>\n<li>If available, <code>angular.forEach</code> will use the ES5 forEach loop. Now, I will get to efficientcy in the cons section, as the forEach loops are <em>much</em> slower than the for loops. I mention this as a pro because it's nice to be consistent and standardized.</li>\n</ul>\n\n<p>Consider the following 2 nested loops, which do exactly the same thing. Let's say that we have 2 arrays of objects and each object contains an array of results, each of which has a Value property that's a string (or whatever). And let's say we need to iterate over each of the results and if they're equal then perform some action: </p>\n\n<pre><code>angular.forEach(obj1.results, function(result1) {\n    angular.forEach(obj2.results, function(result2) {\n        if (result1.Value === result2.Value) {\n            //do something\n        }\n    });\n});\n\n//exact same with a for loop\nfor (var i = 0; i &lt; obj1.results.length; i++) {\n    for (var j = 0; j &lt; obj2.results.length; j++) {\n        if (obj1.results[i].Value === obj2.results[j].Value) {\n            //do something\n        }\n    }\n}\n</code></pre>\n\n<p>Granted this is a very simple hypothetical example, but I've written triple embedded for loops using the second approach and it was <em>very</em> hard to read, and write for that matter.</p>\n\n<p><strong>Cons</strong></p>\n\n<ul>\n<li>Efficiency. <code>angular.forEach</code>, and the native <code>forEach</code>, for that matter, are both <em>so much</em> slower than the normal <code>for</code> loop....about <a href=\"http://jsperf.com/angular-foreach-vs-native-for-loop/3\">90% slower</a>. So for large data sets, best to stick to the native <code>for</code> loop.</li>\n<li>No break, continue, or return support. <code>continue</code> is actually supported by \"<a href=\"https://github.com/angular/angular.js/issues/263\">accident</a>\", to continue in an <code>angular.forEach</code> you simple put a <code>return;</code> statement in the function like <code>angular.forEach(array, function(item) { if (someConditionIsTrue) return; });</code> which will cause it to continue out of the function for that iteration. This is also due to the fact that the native <code>forEach</code> does not support break or continue either.</li>\n</ul>\n\n<p>I'm sure there's various other pros and cons as well, and please feel free to add any that you see fit. I feel that, bottom line, if you need efficiency, stick with just the native <code>for</code> loop for your looping needs. But, if your datasets are smaller and a some efficiency is okay to give up in exchange for readability and writability, then by all means throw an <code>angular.forEach</code> in that bad boy.</p>\n", "title": "For-each over an array in JavaScript?", "answer_id": 24336808, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>Use:</p>\n\n<pre><code>$.each([ 52, 97 ], function( index, value ) {\n    alert( index + \": \" + value );\n});\n</code></pre>\n\n<p>where <code>[ 52, 97 ]</code> is your array.</p>\n\n<p>This produces two messages:</p>\n\n<pre><code>0: 52\n1: 97\n</code></pre>\n\n<p><code>$.each()</code> is essentially a drop-in replacement of a traditional <code>for</code> or <code>for-in</code> loop.</p>\n\n<p><strong>Example</strong></p>\n\n<pre><code>// **Traditional JavaScript code**\n\nvar sum = 0;\nvar arr = [ 1, 2, 3, 4, 5 ];\n\nfor ( var i = 0, l = arr.length; i &lt; l; i++ ) {\n    sum += arr[ i ];\n}\nconsole.log( sum ); // 15\n</code></pre>\n\n<p>It can be <strong>replaced with this using jQuery</strong>:</p>\n\n<pre><code>$.each( arr, function( index, value ){\n    sum += value;\n});\nconsole.log( sum ); // 15\n</code></pre>\n\n<p><strong>Using JavaScript</strong></p>\n\n<pre><code>var myStringArray = [\"Hello\",\"World\"];\nvar arrayLength = myStringArray.length;\nfor (var i = 0; i &lt; arrayLength; i++) {\n    alert(myStringArray[i]);\n    //Do something\n}\n</code></pre>\n", "title": "For-each over an array in JavaScript?", "answer_id": 25738017, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>I think that the best and standard way is to use the <code>for</code> loop, and I like the <strong>short way</strong> to write it:</p>\n\n<pre><code>var list = [\"a\", \"b\", \"c\"];\nfor (var i = 0, letter; letter=list[i]; i++) {\n     alert(letter) ;\n}\n</code></pre>\n", "title": "For-each over an array in JavaScript?", "answer_id": 26408750, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>Another thing about <code>array.forEach</code>. \nYou not only get <code>index</code>, but also the <em>iterated object</em> with <code>forEach</code> when  you work with an array of objects. See the example below:</p>\n\n<pre><code>var fruits = [{'name': 'banana'}, {'name': 'apple'}, {'name': 'pear'}, {'name': 'watermelon'}];\n\nfruits.forEach(function(fruit, i) {\n  console.log('name of fruit no. ' + i + ' is: ' + fruit.name);\n});\n</code></pre>\n\n<p>Console output:</p>\n\n<blockquote>\n  <p>name of fruit no. 1 is: apple</p>\n  \n  <p>name of fruit no. 2 is: pear</p>\n  \n  <p>name of fruit no. 3 is: watermelon</p>\n</blockquote>\n", "title": "For-each over an array in JavaScript?", "answer_id": 28898855, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>This code list array value using <code>forEach</code> loop.</p>\n\n<pre><code>&lt;script&gt;\n(function(){\nvar names = new Array();\n    names[0]='sunny';\n    names[1]= 'Raj';\n    names[2]='Reena';\n\n    var showList = function(element, index, array){\n        console.log('Name[' + index + '] = ' + element);\n    };\n\n    names.forEach(showList);\n})();\n&lt;/script&gt;\n</code></pre>\n\n<p>Console output is:</p>\n\n<blockquote>\n  <p>Name[0] = sunny</p>\n  \n  <p>Name[1] = Raj</p>\n  \n  <p>Name[2] = Reena</p>\n</blockquote>\n", "title": "For-each over an array in JavaScript?", "answer_id": 31489267, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>There's inbuilt ability to break in <code>forEach</code>. To interrupt execution use the <code>Array#some</code> like below:</p>\n\n<pre><code>[1,2,3].some(function(number) {\n    return number === 1;\n});\n</code></pre>\n\n<p>This works because <code>some</code> returns true as soon as any of the callbacks, executed in array order, returns true, short-circuiting the execution of the rest. \n<a href=\"http://stackoverflow.com/questions/2641347/how-to-short-circuit-array-foreach-like-calling-break\">Original Answer</a>\nsee Array prototype for <a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.17\" rel=\"nofollow\">some</a></p>\n", "title": "For-each over an array in JavaScript?", "answer_id": 31646880, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>I also would like to add this as a composition of a reverse loop and an answer above for someone that would like this syntax too.</p>\n\n<pre><code>var foo = [object,object,object];\nfor (var i = foo.length, item; item = foo[--i];) {\n    console.log(item);\n}\n</code></pre>\n\n<p><strong>Pros:</strong></p>\n\n<p>The benefit for this: You have the reference already in the first like that won't need to be declared later with another line. It is handy when looping trough the object array.</p>\n\n<p><strong>Cons:</strong></p>\n\n<p>This will break whenever the reference is false - falsey (undefined, etc.). It can be used as an advantage though. However, it would make it a little bit harder to read.</p>\n", "title": "For-each over an array in JavaScript?", "answer_id": 32265541, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>If you have an array of entities received from a remote server, below is how you'd use <code>forEach</code> loop to iterate over this array:</p>\n\n<pre><code>var entities = [entity, entity, entity];\nentities.forEach(function(entity) {\n   console.log(entity.somefield);\n});\n</code></pre>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach\" rel=\"nofollow\">Here</a> are more details about this.</p>\n", "title": "For-each over an array in JavaScript?", "answer_id": 33690520, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>String.prototype.capitalizeFirstLetter = function() {\r\n  var strArr = [];\r\n  this.trim().split(' ').forEach(function(itm) {\r\n    strArr.push(itm.charAt(0).toUpperCase() + itm.slice(1).toLowerCase());\r\n  });\r\n  return strArr.toString().replace(/,/g, ' ');\r\n}\r\n\r\n//usage:\r\nvar res = document.getElementById(\"result\");\r\nres.innerHTML = \" imperfection is beautiful\".capitalizeFirstLetter();\r\nconsole.log(\" imperfection is beautiful\".capitalizeFirstLetter());\r\nconsole.log(\" hellWorld\".capitalizeFirstLetter());\r\nconsole.log(\"hellWorld \".capitalizeFirstLetter());</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;p id=\"result\"&gt;&lt;/p&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n", "title": "For-each over an array in JavaScript?", "answer_id": 35757190, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<pre><code>In JavaScript use the for loop like this:\n\nvar days = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\nvar i;  \n\nfor (i in days) \n{\n\n    alert(days[i]);\n\n}\n</code></pre>\n\n<p>output: Mon, Tue, Wed, Thu, Fri, Sat, Sun</p>\n", "title": "For-each over an array in JavaScript?", "answer_id": 36971190, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p><strong>As of ES6:</strong></p>\n\n<pre><code>for (let i of objects) {\n    ...\n}\n</code></pre>\n\n<p>Where <code>of</code> avoids the oddities associated with <code>in</code> and makes it work like the <code>for</code> loop of any other language, and <code>let</code> binds <code>i</code> within the loop as opposed to within the function.</p>\n", "title": "For-each over an array in JavaScript?", "answer_id": 37466121, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>My bad, here's an example, used dummy data,  just see the logic:</p>\n\n<pre><code>var array=[];\narray[0] = {\ntelegraph: '19th street',\nbancroft: '10th street',\ninternational: '14th street',\nfruitvale: 'diamond district'\n};\narray[1] = {\ntelegraph: '20th street',\nbancroft: '10th street',\ninternational: '14th street',\nfruitvale: 'diamond district'\n};\narray[2] = {\ntelegraph: '21th street',\nbancroft: '10th street',\ninternational: '14th street',\nfruitvale: 'diamond district'\n};\narray[3] = {\ntelegraph: '22th street',\nbancroft: '10th street',\ninternational: '14th street',\nfruitvale: 'diamond district'\n};\n\nvar newArray=[];\nfor(var i=0;i&lt;array.length;i++){\n    for(var x in array[i]){\n        newArray.push(array[i][x]);  //can use any action here\n    }\n}\nconsole.log(newArray);\n</code></pre>\n", "title": "For-each over an array in JavaScript?", "answer_id": 37626952, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}, {"body": "<p>Just for the simplicity nowadays.</p>\n\n<pre><code>var a=['x','y','z'];\na.forEach((k)=&gt;{alert(k)});\n</code></pre>\n", "title": "For-each over an array in JavaScript?", "answer_id": 39398999, "question_id": 9329446, "tags": ["javascript", "arrays", "loops", "foreach", "iteration"]}], "link": "http://stackoverflow.com/questions/9329446/for-each-over-an-array-in-javascript", "question_id": 9329446}, {"body": "<p>I was looking at the new APIs introduced in <a href=\"http://en.wikipedia.org/wiki/Android_version_history#Android_4.1.2F4.2_Jelly_Bean\">Android 4.2</a>.\nWhile looking at the <a href=\"http://developer.android.com/reference/android/os/UserManager.html\"><code>UserManager</code></a> class I came across the following method:</p>\n\n<blockquote>\n<pre><code>public boolean isUserAGoat()\n</code></pre>\n  \n  <p>Used to determine whether the user making this call is subject to teleportations.</p>\n  \n  <p>Returns whether the user making this call is a goat.</p>\n</blockquote>\n\n<p>How and when should this be used?</p>\n", "title": "Proper use cases for Android UserManager.isUserAGoat()?", "tags": ["java", "android", "usermanager"], "answers": [{"body": "<p>From their <strong><a href=\"https://android.googlesource.com/platform/frameworks/base/+/android-5.0.0_r6/core/java/android/os/UserManager.java#433\">source</a></strong>, the method used to return <code>false</code> until it was changed in API 21.</p>\n\n<pre><code>/**\n * Used to determine whether the user making this call is subject to\n * teleportations.\n * @return whether the user making this call is a goat \n */\npublic boolean isUserAGoat() {\n    return false;\n}\n</code></pre>\n\n<p>It looks like the method has no real use for us as developers. Someone has previously stated that it might be an <strong><a href=\"http://en.wikipedia.org/wiki/Easter_egg_(media)\">Easter egg</a></strong>.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>In API 21 the implementation was changed to check if there is an installed app with the package <code>com.coffeestainstudios.goatsimulator</code></p>\n\n<pre><code>/**\n * Used to determine whether the user making this call is subject to\n * teleportations.\n *\n * &lt;p&gt;As of {@link android.os.Build.VERSION_CODES#LOLLIPOP}, this method can\n * now automatically identify goats using advanced goat recognition technology.&lt;/p&gt;\n *\n * @return Returns true if the user making this call is a goat.\n */\npublic boolean isUserAGoat() {\n    return mContext.getPackageManager()\n            .isPackageAvailable(\"com.coffeestainstudios.goatsimulator\");\n}\n</code></pre>\n\n<p>Here is the updated <strong><a href=\"https://android.googlesource.com/platform/frameworks/base/+/android-5.0.0_r6/core/java/android/os/UserManager.java\">source link</a></strong></p>\n", "title": "Proper use cases for Android UserManager.isUserAGoat()?", "answer_id": 13375461, "question_id": 13375357, "tags": ["java", "android", "usermanager"]}, {"body": "<p>This appears to be an inside joke at Google. It's also featured in the Google Chrome task manager. It has no purpose, other than some engineers finding it amusing. Which is a purpose by itself, if you will.</p>\n\n<ol>\n<li>In Chrome, open the Task Manager with <kbd>Shift</kbd>+<kbd>Esc</kbd>. </li>\n<li>Right click to add the  <code>Goats Teleported</code> column.</li>\n<li>Wonder.</li>\n</ol>\n\n<p>There is even a huge Chromium bug report about <a href=\"http://code.google.com/p/chromium/issues/detail?id=31482\">too many teleported goats</a>.</p>\n\n<p><img src=\"http://i.stack.imgur.com/1nwdC.png\" alt=\"chrome\">  </p>\n\n<p>The following Chromium <a href=\"http://git.chromium.org/gitweb/?p=chromium.git;a=blob;f=chrome/browser/task_manager/task_manager.cc;h=ad46354259ec8687c8665820f9f53bf89ccc715d;hb=HEAD#l599\">source code snippet</a> is stolen from the <a href=\"http://news.ycombinator.com/item?id=4782574\">HN</a> comments.</p>\n\n<pre><code>int TaskManagerModel::GetGoatsTeleported(int index) const {\n  int seed = goat_salt_ * (index + 1);\n  return (seed &gt;&gt; 16) &amp; 255;\n}\n</code></pre>\n", "title": "Proper use cases for Android UserManager.isUserAGoat()?", "answer_id": 13375746, "question_id": 13375357, "tags": ["java", "android", "usermanager"]}, {"body": "<p>I don't know if this was \"the\" official use case but the following produces a warning in Java (that can further produce compile errors if mixed with <code>return</code> statements, leading to unreachable code):</p>\n\n<pre><code>while (1 == 2) { // note \"if\" is treate differently\n    System.out.println(\"Unreachable code\");\n}\n</code></pre>\n\n<p>However this is legal:</p>\n\n<pre><code>while (isUserAGoat()) {\n    System.out.println(\"Unreachable but determined at runtime, not at compile time\");\n}\n</code></pre>\n\n<p>So I often find myself writing a silly utility method for the quickest way to dummy out a code block, then in completing debugging find all calls to it, so provided the implementation doesn't change this can be used for that.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.21\">JLS</a> points out <code>if (false)</code> does not trigger \"unreachable code\" for the specific reason that this would break support for debug flags i.e. basically this use case (h/t @auselen). (<code>static final boolean DEBUG = false;</code> for instance). I replaced <code>while</code> for <code>if</code>, producing a more obscure use case. I <em>believe</em> you can trip up your IDE, like Eclipse, with this behavior, but this edit is 4 years into the future and I don't have an Eclipse environment to play with.</p>\n", "title": "Proper use cases for Android UserManager.isUserAGoat()?", "answer_id": 13381101, "question_id": 13375357, "tags": ["java", "android", "usermanager"]}, {"body": "<p>There's a funny named method/constant/whatever in each version of Android. </p>\n\n<p>The only practical use I ever saw was in the Last Call for <a href=\"http://en.wikipedia.org/wiki/Google_I/O\">Google I/O</a> Contest where they asked what it was for a particular version, to see if contestants read the API diff report for each release. The contest had programming problems too, but generally some trivia that could be graded automatically first to get the number of submissions down to reasonable amounts that would be easier to check.</p>\n", "title": "Proper use cases for Android UserManager.isUserAGoat()?", "answer_id": 13383962, "question_id": 13375357, "tags": ["java", "android", "usermanager"]}, {"body": "<p>Google has a serious liking for goats and goat based <a href=\"http://en.wikipedia.org/wiki/Easter_egg_%28media%29#Software\">Easter eggs</a>. There has even been <a href=\"http://stackoverflow.com/questions/3350892/graph-goat-teleportation-data-with-google-vis-api-via-chrome-extension\">previous Stack&nbsp;Overflow posts about it</a>. </p>\n\n<p>As has been mentioned in previous posts, it also exists within the Chrome task manager (<a href=\"http://src.chromium.org/viewvc/chrome/trunk/src/chrome/app/generated_resources.grd?r1=27169&amp;r2=27216\">it first appeared in the wild in 2009</a>):</p>\n\n<pre><code>&lt;message name=\"IDS_TASK_MANAGER_GOATS_TELEPORTED_COLUMN\" desc=\"The goats teleported column\"&gt;\n    Goats Teleported\n&lt;/message&gt;\n</code></pre>\n\n<p><a href=\"http://techie-buzz.com/featured/google-chrome-goats-teleported-easter-egg.html\">And then in Windows, Linux and Mac versions of Chrome early 2010</a>). The number of \"Goats Teleported\" is in fact <a href=\"http://git.chromium.org/gitweb/?p=chromium.git;a=blob;f=chrome/browser/task_manager/task_manager.cc;h=ad46354259ec8687c8665820f9f53bf89ccc715d;hb=HEAD#l599\">random</a>:</p>\n\n<pre><code> int TaskManagerModel::GetGoatsTeleported(int index) const {\n     int seed = goat_salt_ * (index + 1);\n     return (seed &gt;&gt; 16) &amp; 255;\n }\n</code></pre>\n\n<p>Other Google references to goats include:</p>\n\n<ul>\n<li><a href=\"http://googleblog.blogspot.co.uk/2009/05/mowing-with-goats.html\">Mowing with goats</a></li>\n<li><a href=\"http://googleblog.blogspot.co.uk/2010/04/goats-are-baaaahk.html\">The goats are baaaahk</a></li>\n</ul>\n\n<p>The earliest correlation of goats and Google belongs in the original \"Mowing with goats\" blog post, as far as I can tell.</p>\n\n<p>We can safely assume that it's merely an Easter egg and has no real-world use, except for returning <code>false</code>.</p>\n", "title": "Proper use cases for Android UserManager.isUserAGoat()?", "answer_id": 13395669, "question_id": 13375357, "tags": ["java", "android", "usermanager"]}, {"body": "<p>There is a similar call, <code>isUserAMonkey()</code>, that returns true if the <a href=\"http://developer.android.com/tools/help/monkeyrunner_concepts.html\">MonkeyRunner tool</a> is being used. The SDK explanation is just as curious as this one. </p>\n\n<blockquote>\n<pre><code>public static boolean isUserAMonkey(){}     \n</code></pre>\n  \n  <p>Returns <code>true</code> if the user interface is currently being messed with by a monkey.</p>\n</blockquote>\n\n<p><a href=\"http://developer.android.com/reference/android/app/ActivityManager.html\">Here</a> is the source. </p>\n\n<p>I expect that this was added in anticipation of a new <a href=\"http://en.wikipedia.org/wiki/Software_development_kit\">SDK</a> tool named something with a goat and will <em>actually</em> be functional to test for the presence of that tool.  </p>\n\n<p>Also see a similar question, <strong><a href=\"http://stackoverflow.com/questions/7792123/strange-function-in-activitymanager-isuseramonkey-what-does-this-mean-what-i\">Strange function in ActivityManager: isUserAMonkey. What does this mean, what is its use?</a></strong>.</p>\n", "title": "Proper use cases for Android UserManager.isUserAGoat()?", "answer_id": 13424726, "question_id": 13375357, "tags": ["java", "android", "usermanager"]}, {"body": "<p>Complementing the @djechlin <a href=\"http://stackoverflow.com/a/13381101/956397\">answer</a> (good answer by the way!), this function call could be <strong>also</strong> used as dummy code to hold a breakpoint in an IDE when you want to stop in some specific iteration or a particular recursive call, for example:</p>\n\n<p><img src=\"http://i.stack.imgur.com/mW1Lf.png\" alt=\"enter image description here\"></p>\n\n<p><code>isUserAGoat()</code> could be used instead of a dummy variable declaration that will be shown in the IDE as a warning and, in Eclipse particular case, will clog the breakpoint mark, making it difficult to enable/disable it. If the method is used as a convention, all the invocations could be later filtered by some script (during commit phase maybe?).</p>\n\n<p><img src=\"http://i.stack.imgur.com/MFIBa.png\" alt=\"enter image description here\"></p>\n\n<p>Google guys are heavy Eclipse users (they provide several of their projects as Eclipse plugins: Android SDK, GAE, etc), so the @djechlin answer and this complementary answer make a lot of sense (at least for me).</p>\n", "title": "Proper use cases for Android UserManager.isUserAGoat()?", "answer_id": 13498177, "question_id": 13375357, "tags": ["java", "android", "usermanager"]}, {"body": "<p>In the discipline of speech recognition, users are divided into <em>goats</em> and <em>sheeps</em>. </p>\n\n<p>For instance here <strong><a href=\"http://books.google.de/books?id=QWJ7KVMQk0cC&amp;lpg=PR1&amp;dq=voice%20enabling%20web&amp;hl=de&amp;pg=PA89#v=onepage&amp;q=voice%20enabling%20web&amp;f=false\">on page 89</a></strong>.</p>\n\n<blockquote>\n  <p>Sheeps are people for whom speech recognition works exceptionally well, and goats are people for whom it works exceptionally poorly. Only the voice recognizer knows what separates them. People can't predict whose voice will be recognized easily and whose won't. The best policy is to design the interface so it can handle all kinds of voices in all kinds of environments</p>\n</blockquote>\n\n<p>Maybe, it is planned to mark Android users as goats in future to be able to configure the speech recognition engine for goat's needs. ;-)</p>\n", "title": "Proper use cases for Android UserManager.isUserAGoat()?", "answer_id": 16854187, "question_id": 13375357, "tags": ["java", "android", "usermanager"]}, {"body": "<p>Funny Easter Egg.<br/> \nIn Ubuntu version of Chrome, in Task Manager (<kbd>shift</kbd>+<kbd>esc</kbd>), with right-click you can add a sci-fi column that in italian version is \"Capre Teletrasportate\" (Teleported Goats).</p>\n\n<p>A funny theory about it is <a href=\"http://news.softpedia.com/news/Chrome-s-quot-Goats-Teleported-quot-Easter-Egg-Hints-at-a-Wonderful-Future-323197.shtml\" rel=\"nofollow\">here</a>.</p>\n", "title": "Proper use cases for Android UserManager.isUserAGoat()?", "answer_id": 21600378, "question_id": 13375357, "tags": ["java", "android", "usermanager"]}, {"body": "<p>As of API 21 (the first Android 5.0/Lollipop SDK), this detects whether the <a href=\"https://play.google.com/store/apps/details?id=com.coffeestainstudios.goatsimulator&amp;hl=en\">Goat Simulator</a> app is installed:</p>\n\n<pre><code>/**\n * Used to determine whether the user making this call is subject to\n * teleportations.\n *\n * &lt;p&gt;As of {@link android.os.Build.VERSION_CODES#LOLLIPOP}, this method can\n * now automatically identify goats using advanced goat recognition technology.&lt;/p&gt;\n *\n * @return Returns true if the user making this call is a goat.\n */\npublic boolean isUserAGoat() {\n    return mContext.getPackageManager()\n            .isPackageAvailable(\"com.coffeestainstudios.goatsimulator\");\n}\n</code></pre>\n\n<p>This should make it clear that <a href=\"http://stackoverflow.com/questions/13375357/proper-use-cases-for-android-usermanager-isuseragoat/13381101#13381101\">djechlin's suggestion</a> of using it as a warning-free <code>if (false)</code> is a potentially disastrous strategy. What previously returned <code>false</code> for every device now returns a seemingly random value: if this was buried deep enough in your code it could take a <em>long</em> time to figure out where your new bugs are coming from.</p>\n\n<p>Bottom line: if you don't control the implementation of a method and decide to use it for purposes other than stated in the API documentation, you're heading for trouble.</p>\n", "title": "Proper use cases for Android UserManager.isUserAGoat()?", "answer_id": 26462960, "question_id": 13375357, "tags": ["java", "android", "usermanager"]}, {"body": "<p>From their <a href=\"https://android.googlesource.com/platform/frameworks/base/+/android-5.0.0_r6/core/java/android/os/UserManager.java#433/\" rel=\"nofollow\">source</a>, the method used to return <code>false</code> until it was changed in API 21.</p>\n\n<pre><code>/**\n * Used to determine whether the user making this call is subject to\n * teleportations.\n * @return whether the user making this call is a goat \n */\npublic boolean isUserAGoat() {\n    return false;\n}\n</code></pre>\n\n<p>It looks like the method has no real use for us as developers. Someone has previously stated that it might be an <a href=\"https://en.wikipedia.org/wiki/Easter_egg_(media)\" rel=\"nofollow\">Easter egg</a></p>\n\n<p>In API 21 the implementation was changed to check if there is an installed app with the  com.coffeestainstudios.goatsimulator</p>\n\n<pre><code>/**\n * Used to determine whether the user making this call is subject to\n * teleportations.\n *\n * &lt;p&gt;As of {@link android.os.Build.VERSION_CODES#LOLLIPOP}, this method can\n * now automatically identify goats using advanced goat recognition technology.&lt;/p&gt;\n *\n * @return Returns true if the user making this call is a goat.\n */\npublic boolean isUserAGoat() {\n    return mContext.getPackageManager()\n            .isPackageAvailable(\"com.coffeestainstudios.goatsimulator\");\n}\n</code></pre>\n\n<p>There is a similar call,<code>isUserAMonkey()</code>, that returns true if the <a href=\"https://developer.android.com/studio/test/monkeyrunner/index.html\" rel=\"nofollow\">MonkeyRunner tool</a> is being used. The SDK explanation is just as curious as this one.</p>\n\n<pre><code>public static boolean isUserAMonkey(){}\n</code></pre>\n\n<p>Returns <code>true</code> if the user interface is currently being messed with by a monkey.\nI expect that this was added in anticipation of a new SDK tool named something with a goat and will actually be functional to test for the presence of that tool.</p>\n", "title": "Proper use cases for Android UserManager.isUserAGoat()?", "answer_id": 38504859, "question_id": 13375357, "tags": ["java", "android", "usermanager"]}], "link": "http://stackoverflow.com/questions/13375357/proper-use-cases-for-android-usermanager-isuseragoat", "question_id": 13375357}, {"body": "<p>In Swing, the password field has a <code>getPassword()</code> (returns <code>char[]</code>) method instead of the usual <code>getText()</code> (returns <code>String</code>) method. Similarly, I have come across a suggestion not to use <code>String</code> to handle passwords.</p>\n\n<p>Why does <code>String</code> pose a threat to security when it comes to passwords?\nIt feels inconvenient to use <code>char[]</code>.</p>\n", "title": "Why is char[] preferred over String for passwords in Java?", "tags": ["java", "string", "security", "passwords", "char"], "answers": [{"body": "<p><strong>Strings are immutable</strong>. That means once you've created the <code>string</code>, if another process can dump memory, there's no way (aside from <a href=\"https://en.wikipedia.org/wiki/Reflection_%28computer_programming%29\">reflection</a>) you can get rid of the data before <a href=\"https://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29\">garbage collection</a> kicks in.</p>\n\n<p>With an array, you can explicitly wipe the data after you're done with it. You can overwrite the array with anything you like, and the password won't be present anywhere in the system, even before garbage collection.</p>\n\n<p>So yes, this <em>is</em> a security concern - but even using <code>char[]</code> only reduces the window of opportunity for an attacker, and it's only for this specific type of attack.</p>\n\n<p>As noted in comments, it's possible that arrays being moved by the garbage collector will leave stray copies of the data in memory. I believe this is implementation-specific - the garbage collector <em>may</em> clear all memory as it goes, to avoid this sort of thing. Even if it does, there's still the time during which the <code>char[]</code> contains the actual characters as an attack window.</p>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 8881376, "question_id": 8881291, "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p>Character arrays (<code>char[]</code>) can be cleared after use by setting each character to zero and Strings not. If someone can somehow see the memory image, they can see a password in plain text if Strings are used, but if <code>char[]</code> is used, after purging data with 0's, the password is secure.</p>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 8881395, "question_id": 8881291, "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p>I don't think this is a valid suggestion, but, I can at least guess at the reason.</p>\n\n<p>I think the motivation is wanting to make sure that you can erase all trace of the password in memory promptly and with certainty after it is used. With a <code>char[]</code> you could overwrite each element of the array with a blank or something for sure. You can't edit the internal value of a <code>String</code> that way.</p>\n\n<p>But that alone isn't a good answer; why not just make sure a reference to the <code>char[]</code> or <code>String</code> doesn't escape? Then there's no security issue. But the thing is that <code>String</code> objects can be <code>intern()</code>ed in theory and kept alive inside the constant pool. I suppose using <code>char[]</code> forbids this possibility.</p>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 8881399, "question_id": 8881291, "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p>Some people believe that you have to overwrite the memory used to store the password once you no longer need it. This reduces the time window an attacker has to read the password from your system and completely ignores the fact that the attacker already needs enough access to hijack the JVM memory to do this. An attacker with that much access can catch your key events making this completely useless (AFAIK, so please correct me if I am wrong).</p>\n\n<p><strong>Update</strong></p>\n\n<p>Thanks to the comments I have to update my answer. Apparently there are two cases where this can add a (very) minor security improvement as it reduces the time a password could land on the hard drive. Still I think it's overkill for most use cases.</p>\n\n<ul>\n<li>Your target system may be badly configured or you have to assume it is and you have to be paranoid about core dumps (can be valid if the systems are not managed by an administrator). </li>\n<li>Your software has to be overly paranoid to prevent data leaks with the attacker gaining access to the hardware - using things like <a href=\"http://en.wikipedia.org/wiki/TrueCrypt\">TrueCrypt</a> (discontinued), <a href=\"https://veracrypt.codeplex.com/\">VeraCrypt</a>, or <a href=\"https://ciphershed.org/\">CipherShed</a>.</li>\n</ul>\n\n<p>If possible, disabling core dumps and the swap file would take care of both problems. However, they would require administrator rights and may reduce functionality (less memory to use) and pulling RAM from a running system would still be a valid concern.</p>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 8881461, "question_id": 8881291, "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p>While other suggestions here seem valid, there is one other good reason. With plain <code>String</code> you have much higher chances of <strong>accidentally printing the password to logs</strong>, monitors or some other insecure place. <code>char[]</code> is less vulnerable.</p>\n\n<p>Consider this:</p>\n\n<pre><code>public static void main(String[] args) {\n    Object pw = \"Password\";\n    System.out.println(\"String: \" + pw);\n\n    pw = \"Password\".toCharArray();\n    System.out.println(\"Array: \" + pw);\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>String: Password\nArray: [C@5829428e\n</code></pre>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 8885343, "question_id": 8881291, "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p>To quote an official document, the <a href=\"http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html#PBEEx\">Java Cryptography Architecture guide</a> says this about <code>char[]</code> vs. <code>String</code> passwords (about password-based encryption, but this is more generally about passwords of course):</p>\n\n<blockquote>\n  <p>It would seem logical to collect and store the password in an object\n  of type <code>java.lang.String</code>. However, here's the caveat: <code>Object</code>s of\n  type <code>String</code> are immutable, i.e., there are no methods defined that\n  allow you to change (overwrite) or zero out the contents of a <code>String</code>\n  after usage. This feature makes <code>String</code> objects unsuitable for\n  storing security sensitive information such as user passwords. You\n  should always collect and store security sensitive information in a\n  <code>char</code> array instead.</p>\n</blockquote>\n\n<p><a href=\"http://www.oracle.com/technetwork/java/seccodeguide-139067.html#2\">Guideline 2-2 of the Secure Coding Guidelines for the Java Programming Language, Version 4.0</a> also says something similar (although it is originally in the context of logging):</p>\n\n<blockquote>\n  <p><em>Guideline 2-2: Do not log highly sensitive information</em></p>\n  \n  <p>Some information, such as Social Security numbers (SSNs) and\n  passwords, is highly sensitive. This information should not be kept\n  for longer than necessary nor where it may be seen, even by\n  administrators. For instance, it should not be sent to log files and\n  its presence should not be detectable through searches. Some transient\n  data may be kept in mutable data structures, such as char arrays, and\n  cleared immediately after use. Clearing data structures has reduced\n  effectiveness on typical Java runtime systems as objects are moved in\n  memory transparently to the programmer.</p>\n  \n  <p>This guideline also has implications for implementation and use of\n  lower-level libraries that do not have semantic knowledge of the data\n  they are dealing with. As an example, a low-level string parsing\n  library may log the text it works on. An application may parse an SSN\n  with the library. This creates a situation where the SSNs are\n  available to administrators with access to the log files.</p>\n</blockquote>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 8889285, "question_id": 8881291, "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p>The answer has already been given, but I'd like to share an issue that I discovered lately with Java standard libraries. While they take great care now of replacing password strings with <code>char[]</code> everywhere (which of course is a good thing), other security-critical data seems to be overlooked when it comes to clearing it from memory.</p>\n\n<p>I'm thinking of e.g. the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/security/PrivateKey.html\">PrivateKey</a> class. Consider a scenario where you would load a private RSA key from a PKCS#12 file, using it to perform some operation. Now in this case, sniffing the password alone wouldn't help you much as long as physical access to the key file is properly restricted. As an attacker, you would be much better off if you obtained the key directly instead of the password. The desired information can be leaked manifold, core dumps, a debugger session or swap files are just some examples.</p>\n\n<p>And as it turns out, there is nothing that lets you clear the private information of a <code>PrivateKey</code> from memory, because there's no API that lets you wipe the bytes that form the corresponding information.</p>\n\n<p>This is a bad situation, as this <a href=\"http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.77.3297&amp;rep=rep1&amp;type=pdf\">paper</a> describes how this circumstance could be potentially exploited.</p>\n\n<p>The OpenSSL library for example overwrites critical memory sections before private keys are freed. Since Java is garbage-collected, we would need explicit methods to wipe and invalidate private information for Java keys, which are to be applied immediately after using the key. </p>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 8932215, "question_id": 8881291, "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<ol>\n<li><strong>Strings are immutable</strong> in Java if you store password as plain text it will be available in memory until Garbage collector clears it and since Strings are used in String pool for re-usability there is pretty high chance that it will be remain in memory for long duration, which pose a security threat. Since any one who has access to memory dump can find the password in clear text </li>\n<li><strong>Java recommendation</strong> using <code>getPassword()</code> method of JPasswordField which returns a char[] and deprecated <code>getText()</code> method which returns password in clear text stating security reason. </li>\n<li><p><strong>toString()</strong> there is always a risk of printing plain text in log file or console but if use Array you won't print contents of array instead its memory location get printed. </p>\n\n<pre><code>String strPwd = \"passwd\";\nchar[] charPwd = new char[]{'p','a','s','s','w','d'};\nSystem.out.println(\"String password: \" + strPwd );\nSystem.out.println(\"Character password: \" + charPwd );\n</code></pre>\n\n<blockquote>\n  <p>String password: passwd</p>\n  \n  <p>Character password: [C@110b2345</p>\n</blockquote></li>\n</ol>\n\n<p><strong>Final thoughts:</strong> Though using char[] is not just enough you need to erase content to be more secure. I also suggest working with hash'd or encrypted password instead of plaintext and clearing it from memory as soon as authentication is completed.</p>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 14060804, "question_id": 8881291, "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p>These are all the reasons , one should choose <strong>char[]</strong> array instead of <strong>String</strong> for password.</p>\n\n<p><strong>1.</strong>  Since Strings are immutable in Java if you store password as plain text it will be available in memory until Garbage collector clears it and since String are used in String pool for reusability there is pretty high chance that it will be remain in memory for long duration, which pose a security threat. Since any one who has access to memory dump can find the password in clear text and that's another reason you should always used an encrypted password than plain text. Since Strings are immutable there is no way contents of Strings can be changed because any change will produce new String, while if you char[] you can still set all his element as blank or zero. So Storing password in character array clearly mitigates security risk of stealing password.</p>\n\n<p><strong>2.</strong>  Java itself recommends using getPassword() method of JPasswordField which returns a char[] and deprecated getText() method which returns password in clear text stating security reason. Its good to follow advice from Java team and adhering to standard rather than going against it.</p>\n\n<p><strong>3.</strong>  With String there is always a risk of printing plain text in log file or console but if use Array you won't print contents of array instead its memory location get printed. though not a real reason but still make sense.</p>\n\n<pre><code>    String strPassword=\"Unknown\";\n    char[] charPassword= new char[]{'U','n','k','w','o','n'};\n    System.out.println(\"String password: \" + strPassword);\n    System.out.println(\"Character password: \" + charPassword);\n\n    String password: Unknown\n    Character password: [C@110b053\n</code></pre>\n\n<p>Reference from:  <a href=\"http://javarevisited.blogspot.com/2012/03/why-character-array-is-better-than.html#ixzz317MOiiUr\">http://javarevisited.blogspot.com/2012/03/why-character-array-is-better-than.html#ixzz317MOiiUr</a></p>\n\n<p>Hope this helps.</p>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 23538955, "question_id": 8881291, "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p>There is nothing that char array gives you vs String unless you clean it up manually after use, and I haven't seen anyone actually doing that. So to me the preference of char[] vs String is a little exaggerated.</p>\n\n<p>Take a look at the <sub>widely used</sub> Spring Security library <a href=\"http://grepcode.com/file/repo1.maven.org/maven2/org.springframework.security/spring-security-web/3.0.1.RELEASE/org/springframework/security/web/authentication/UsernamePasswordAuthenticationFilter.java#73\">here</a> and ask yourself - are Spring Security guys incompetent or char[] passwords just don't make much sense. When someone grabs memory dumps of your RAM be sure she'll get all the passwords even if you use sophisticated ways to hide them.</p>\n\n<p>However, Java changes all the time, and some scary features like <a href=\"http://stackoverflow.com/questions/27949213/string-deduplication-feature-of-java-8\">String Deduplication feature of Java 8</a> might intern String objects without your knowledge. But that's different conversation.</p>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 28123411, "question_id": 8881291, "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p><strong>Edit:</strong> Coming back to this answer after a year of security research, I realize it makes the rather unfortunate implication that you would ever actually compare plaintext passwords. Please don't. <a href=\"http://stackoverflow.com/questions/2860943/how-can-i-hash-a-password-in-java\">Use a secure one-way hash with a salt and a reasonable number of iterations</a>. Consider using a library: this stuff is hard to get right!</p>\n\n<p><strong>Original answer:</strong> What about the fact that String.equals() uses <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#String.equals%28java.lang.Object%29\" rel=\"nofollow\">short-circuit evaluation</a>, and is therefore vulnerable to a timing attack? It may be unlikely, but you could <em>theoretically</em> time the password comparison in order to determine the correct sequence of characters.</p>\n\n<pre><code>public boolean equals(Object anObject) {\n    if (this == anObject) {\n        return true;\n    }\n    if (anObject instanceof String) {\n        String anotherString = (String)anObject;\n        int n = value.length;\n        // Quits here if Strings are different lengths.\n        if (n == anotherString.value.length) {\n            char v1[] = value;\n            char v2[] = anotherString.value;\n            int i = 0;\n            // Quits here at first different character.\n            while (n-- != 0) {\n                if (v1[i] != v2[i])\n                    return false;\n                i++;\n            }\n            return true;\n        }\n    }\n    return false;\n}\n</code></pre>\n\n<p>Some more resources on timing attacks:</p>\n\n<ul>\n<li><a href=\"http://codahale.com/a-lesson-in-timing-attacks/\" rel=\"nofollow\">A Lesson In Timing Attacks</a></li>\n<li><a href=\"http://security.stackexchange.com/a/83671\">A discussion about timing attacks</a> over on Information Security Stack Exchange</li>\n<li>And of course, the <a href=\"http://en.wikipedia.org/wiki/Timing_attack\" rel=\"nofollow\">Timing Attack Wikipedia page</a></li>\n</ul>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 29503590, "question_id": 8881291, "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p>As Jon Skeet states, there is no way except by using reflection. </p>\n\n<p>However, if reflection is an option for you, you can do this.</p>\n\n<pre><code>public static void main(String[] args) {\n    System.out.println(\"please enter a password\");\n    // don't actually do this, this is an example only.\n    Scanner in = new Scanner(System.in);\n    String password = in.nextLine();\n    usePassword(password);\n\n    clearString(password);\n\n    System.out.println(\"password: '\" + password + \"'\");\n}\n\nprivate static void usePassword(String password) {\n\n}\n\nprivate static void clearString(String password) {\n    try {\n        Field value = String.class.getDeclaredField(\"value\");\n        value.setAccessible(true);\n        char[] chars = (char[]) value.get(password);\n        Arrays.fill(chars, '*');\n    } catch (Exception e) {\n        throw new AssertionError(e);\n    }\n}\n</code></pre>\n\n<p>when run</p>\n\n<pre><code>please enter a password\nhello world\npassword: '***********'\n</code></pre>\n\n<p>Note: if the String's char[] has been copied as a part of a GC cycle, there is a chance the previous copy is somewhere in memory.  </p>\n\n<p>This old copy wouldn't appear in a heap dump, but if you have direct access to the raw memory of the process you could see it.  In general you should avoid anyone having such access.</p>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 31288609, "question_id": 8881291, "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p>Strings are immutable and cannot be altered once they have been created. Creating a password as a string will leave stray references to the password on the heap or on the String pool. Now if someone takes a heap dump of the Java process and carefully scans through he might be able to guess the passwords. Of course these non used strings will be garbage collected but that depends on when the GC kicks in.</p>\n\n<p>On the other side char[] are mutable as soon as the authentication is done you can overwrite them with any character like all M's or backslashes. Now even if someone takes a heap dump he might not be able to get the passwords which are not currently in use. This gives you more control in the sense like clearing the Object content yourself vs waiting for the GC to do it.</p>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 31674073, "question_id": 8881291, "tags": ["java", "string", "security", "passwords", "char"]}], "link": "http://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords-in-java", "question_id": 8881291}, {"body": "<p>What are the technical reasons why I shouldn't use <code>mysql_*</code> functions? (e.g. <code>mysql_query()</code>, <code>mysql_connect()</code> or <code>mysql_real_escape_string()</code>)?</p>\n\n<p>Why should I use something else even if they work on my site?</p>\n", "title": "Why shouldn&#39;t I use mysql_* functions in PHP?", "tags": ["php", "mysql", "database", "mysqli", "pdo"], "answers": [{"body": "<p>The <code>mysql_</code> functions are:</p>\n\n<ol>\n<li>out of date - they're not maintained any more</li>\n<li>don't allow you to move easily to another database backend</li>\n<li>don't support prepared statements, hence</li>\n<li>encourage programmers to use concatenation to build queries, leading to SQL injection vulnerabilities</li>\n</ol>\n", "title": "Why shouldn&#39;t I use mysql_* functions in PHP?", "answer_id": 12860030, "question_id": 12859942, "tags": ["php", "mysql", "database", "mysqli", "pdo"]}, {"body": "<p>There are many reasons, but perhaps the most important one is that those functions encourage insecure programming practices because they do not support prepared statements. Prepared statements help prevent SQL injection attacks.</p>\n\n<p>When using <code>mysql_*</code> functions, you have to remember to run user-supplied parameters through <code>mysql_real_escape_string()</code>. If you forget in just one place or if you happen to escape only part of the input, your database may be subject to attack.</p>\n\n<p>Using prepared statements in <code>PDO</code> or <code>mysqli</code> will make it so that these sorts of programming errors are more difficult to make.</p>\n", "title": "Why shouldn&#39;t I use mysql_* functions in PHP?", "answer_id": 12860033, "question_id": 12859942, "tags": ["php", "mysql", "database", "mysqli", "pdo"]}, {"body": "<p>The MySQL extension:</p>\n\n<ul>\n<li>Is not under active development</li>\n<li>Is <strong>officially <a href=\"https://wiki.php.net/rfc/mysql_deprecation\">deprecated</a></strong> as of PHP 5.5 (released June 2013).</li>\n<li>Has been <strong><a href=\"https://wiki.php.net/rfc/remove_deprecated_functionality_in_php7#extmysql\">removed</a> entirely</strong> as of PHP 7.0 (released December 2015)</li>\n<li>Lacks an OO interface</li>\n<li>Doesn't support:\n\n<ul>\n<li>Non-blocking, asynchronous queries</li>\n<li><strong><a href=\"http://php.net/manual/en/mysqli.quickstart.prepared-statements.php\">Prepared statements</a> or parameterized queries</strong></li>\n<li>Stored procedures</li>\n<li>Multiple Statements</li>\n<li>Transactions</li>\n<li>The \"new\" password authentication method (on by default in MySQL 5.6; required in 5.7)</li>\n<li>All of the functionality in MySQL 5.1</li>\n</ul></li>\n</ul>\n\n<p>Since it is deprecated, using it makes your code less future proof. </p>\n\n<p>Lack of support for prepared statements is particularly important as they provide a clearer, less error prone method of escaping and quoting external data than manually escaping it with a separate function call.</p>\n\n<p>See <a href=\"http://php.net/manual/en/mysqlinfo.api.choosing.php\"><strong>the comparison of SQL extensions</strong></a>.</p>\n", "title": "Why shouldn&#39;t I use mysql_* functions in PHP?", "answer_id": 12860046, "question_id": 12859942, "tags": ["php", "mysql", "database", "mysqli", "pdo"]}, {"body": "<p>Because (amongst other reasons) it's much harder to ensure the input data is sanitized. If you use parametrized queries, as one does with PDO or mysqli you can entirely avoid the risk.</p>\n\n<p>As an example, some-one could use \"enhzflep); drop table users\" as a user name. The old functions will allow executing of multiple statements per query, so something like that nasty bugger can delete a whole table.</p>\n\n<p>If one were to use PDO of mysqli, the user-name would end-up being \"enhzflep); drop table users\"</p>\n\n<p>See <a href=\"http://bobby-tables.com/\">bobby-tables.com</a>.</p>\n", "title": "Why shouldn&#39;t I use mysql_* functions in PHP?", "answer_id": 12860050, "question_id": 12859942, "tags": ["php", "mysql", "database", "mysqli", "pdo"]}, {"body": "<p>First, let's begin with the standard comment we give everyone: </p>\n\n<blockquote>\n  <p><a href=\"http://stackoverflow.com/q/12859942\"><strong>Please, don't use <code>mysql_*</code> functions in new code</strong></a>. They are no longer maintained <a href=\"https://wiki.php.net/rfc/mysql_deprecation\">and are officially deprecated</a>. See the <a href=\"http://uk.php.net/manual/en/function.mysql-connect.php\"><strong>red box</strong></a>? Learn about <a href=\"http://en.wikipedia.org/wiki/Prepared_statement\"><em>prepared statements</em></a> instead, and use <a href=\"http://php.net/pdo\">PDO</a> or <a href=\"http://php.net/mysqli\">MySQLi</a> - <a href=\"http://php.net/manual/en/mysqlinfo.api.choosing.php\">this article</a> will help you decide which. If you choose PDO, <a href=\"http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers\">here is a good tutorial</a>.</p>\n</blockquote>\n\n<p>Let's go through this, sentence by sentence, and explain:</p>\n\n<ul>\n<li><p><strong>They are no longer maintained, and are officially deprecated</strong></p>\n\n<p>This means that the PHP community is gradually dropping support for these very old functions. They are likely to not exist in a future (recent) version of PHP! Continued use of these functions may break your code in the (not so) far future.</p>\n\n<p><strong>NEW! - ext/mysql is now <em><a href=\"https://wiki.php.net/rfc/mysql_deprecation\">officially deprecated as of PHP 5.5!</a></em></strong></p>\n\n<h2>Newer! ext/mysql <em><a href=\"https://wiki.php.net/rfc/remove_deprecated_functionality_in_php7\">has been removed in PHP 7</a></em></h2></li>\n<li><p><strong>Instead, you should learn of prepared statements</strong> -</p>\n\n<p><code>mysql_*</code> extension does not support <strong>prepared statements</strong>, which is (among other things) a very effective countermeasure against <strong>SQL Injection</strong>. It fixed a very serious vulnerability in MySQL dependent applications which allows attackers to gain access to your script and perform <strong>any possible query</strong> on your database.</p>\n\n<p>For more information, see <strong><a href=\"http://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php\">How can I prevent SQL-injection in PHP?</a></strong></p></li>\n<li><p><strong>See the Red Box?</strong></p>\n\n<p>When you go on any <code>mysql</code> function manual page, you see a red box, explaining it should not be used anymore.</p></li>\n<li><p><strong>Use either PDO or MySQLi</strong></p>\n\n<p>There are better, more robust and well built alternatives, <strong><a href=\"http://php.net/pdo\">PDO - PHP Database Object</a></strong>, which offers a complete OOP approach to database interaction, and <strong><a href=\"http://php.net/mysqli\">MySQLi</a></strong>, which is a MySQL specific improvement.</p></li>\n</ul>\n", "title": "Why shouldn&#39;t I use mysql_* functions in PHP?", "answer_id": 12860140, "question_id": 12859942, "tags": ["php", "mysql", "database", "mysqli", "pdo"]}, {"body": "<p>PHP offers three different APIs to connect to MySQL. These are the <a href=\"http://in1.php.net/manual/en/book.mysql.php\"><code>mysql</code></a>(removed as of PHP 7), <a href=\"http://uk.php.net/manual/en/book.mysqli.php\"><code>mysqli</code></a>, and <a href=\"http://php.net/manual/en/book.pdo.php\"><code>PDO</code></a> extensions.</p>\n\n<p>The <code>mysql_*</code> functions used to be very popular, but their use is not encouraged anymore. The documentation team is discussing the database security situation, and educating users to move away from the commonly used ext/mysql extension is part of this (check <em><a href=\"http://news.php.net/php.internals/53799\">php.internals: deprecating ext/mysql</a></em>).</p>\n\n<p>And the later PHP developer team has taken the decision to generate <a href=\"https://github.com/php/php-src/commit/b7091aaf0137d97cf4aa4a402ec50b3946d369c0\"><strong><code>E_DEPRECATED</code></strong></a> errors when users connect to MySQL, whether through <code>mysql_connect()</code>, <code>mysql_pconnect()</code> or the implicit connection functionality built into <code>ext/mysql</code>.</p>\n\n<p><strong><code>ext/mysql</code></strong> was <a href=\"https://wiki.php.net/rfc/mysql_deprecation\"><strong>officially deprecated as of PHP 5.5</strong></a> and has been <a href=\"https://wiki.php.net/rfc/remove_deprecated_functionality_in_php7\"><strong>removed as of PHP 7</strong></a>.</p>\n\n<p><strong>See the Red Box?</strong></p>\n\n<p>When you go on any <code>mysql_*</code> function manual page, you see a red box, explaining it should not be used anymore.</p>\n\n<h2>Why</h2>\n\n<hr>\n\n<p>Moving away from <code>ext/mysql</code> is not only about security, but also about having access to all the features of the MySQL database.</p>\n\n<p><code>ext/mysql</code> was built for <strong>MySQL 3.23</strong> and only got very few additions since then while mostly keeping compatibility with this old version which makes the code a bit harder to maintain. Missing features that is not supported by <code>ext/mysql</code> include: (<em><a href=\"https://wiki.php.net/rfc/mysql_deprecation\">from PHP manual</a></em>).</p>\n\n<ul>\n<li><a href=\"http://en.wikipedia.org/wiki/Stored_procedure\">Stored procedures</a> (can't handle multiple result sets)</li>\n<li><a href=\"http://en.wikipedia.org/wiki/Prepared_statement\">Prepared statements</a></li>\n<li>Encryption (SSL)</li>\n<li>Compression</li>\n<li>Full Charset support</li>\n</ul>\n\n<p><strong>Reason to not use <code>mysql_*</code> function</strong>:</p>\n\n<ul>\n<li>Not under active development</li>\n<li>Removed as of PHP 7</li>\n<li>Lacks an OO interface</li>\n<li>Doesn't support non-blocking, asynchronous queries</li>\n<li>Doesn't support prepared statements or <a href=\"http://en.wikipedia.org/wiki/Prepared_statement\">parameterized queries</a></li>\n<li>Doesn't support stored procedures</li>\n<li>Doesn't support multiple statements</li>\n<li>Doesn't support <a href=\"http://en.wikipedia.org/wiki/Database_transaction\">transactions</a></li>\n<li>Doesn't support all of the functionality in MySQL 5.1</li>\n</ul>\n\n<p><a href=\"http://stackoverflow.com/a/12860046/1723893\">Above point quoted from Quentin's answer</a></p>\n\n<p>Lack of support for prepared statements is particularly important as they provide a clearer, less error prone method of escaping and quoting external data than manually escaping it with a separate function call.</p>\n\n<p>See the <a href=\"http://php.net/manual/en/mysqlinfo.api.choosing.php\">comparison of SQL extensions</a>.</p>\n\n<hr>\n\n<p><strong>Suppressing deprecation warnings</strong></p>\n\n<p>While code is being converted to <code>MySQLi</code>/<code>PDO</code>, <code>E_DEPRECATED</code> errors can be suppressed by setting <code>error_reporting</code> in <strong>php.ini</strong> to exclude <code>E_DEPRECATED:</code></p>\n\n<pre><code> error_reporting = E_ALL ^ E_DEPRECATED\n</code></pre>\n\n<p>Note that this will also hide <strong>other deprecation warnings</strong>, which, however, may be for things other than MySQL. (<em><a href=\"https://wiki.php.net/rfc/mysql_deprecation#workarounds\">from PHP manual</a></em>)</p>\n\n<p>The article <em><a href=\"http://net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/\">PDO vs. MySQLi: Which Should You Use?</a></em> by <a href=\"http://webarto.com/\"><strong>Dejan Marjanovic</strong></a> will help you to choose.</p>\n\n<p>And a better way is <code>PDO</code>, and I am now writing a simple <code>PDO</code> tutorial.</p>\n\n<hr>\n\n<h2>A simple and short PDO tutorial</h2>\n\n<hr>\n\n<h3>Q. First question in my mind was: what is `PDO`?</h3>\n\n<p>A. \u201c<strong>PDO \u2013 PHP Data Objects</strong> \u2013 is a database access layer providing a uniform method of access to multiple databases.\u201d</p>\n\n<blockquote>\n  <p><img src=\"http://i.stack.imgur.com/Vd7ve.png\" alt=\"alt text\"></p>\n</blockquote>\n\n<hr>\n\n<h3>Connecting to MySQL </h3>\n\n<p>With <code>mysql_*</code> function or we can say it the old way (deprecated in PHP 5.5 and above)</p>\n\n<pre><code>    $link = mysql_connect('localhost', 'user', 'pass');\n    mysql_select_db('testdb', $link);\n    mysql_set_charset('UTF-8', $link);\n</code></pre>\n\n<p>With <code>PDO</code>: All you need to do is create a new <code>PDO</code> object. The constructor accepts parameters for specifying the database source <code>PDO</code>'s constructor mostly takes four parameters which are <code>DSN</code> (data source name) and  optionally <code>username</code>, <code>password</code>.</p>\n\n<p>Here I think you are familiar with all except <code>DSN</code>; this is new in <code>PDO</code>. A <code>DSN</code> is basically a string of options that tell <code>PDO</code> which driver to use, and connection details. For further reference, check <a href=\"http://www.php.net/manual/en/ref.pdo-mysql.connection.php\">PDO MySQL DSN</a>.</p>\n\n<pre><code>    $db = new PDO('mysql:host=localhost;dbname=testdb;charset=utf8', 'username', 'password');\n</code></pre>\n\n<p><strong>Note:</strong> you can also use <code>charset=UTF-8</code>, but sometimes it causes an error, so it's better to use <code>utf8</code>.</p>\n\n<p>If there is any connection error, it will throw a <code>PDOException</code> object that can be cached to handle <code>Exception</code> further.</p>\n\n<p><strong>Good read</strong>: <a href=\"http://php.net/manual/en/pdo.connections.php\">Connections and Connection management \u00b6</a> </p>\n\n<p>You can also pass in several driver options as an array to the fourth parameter. I recommend passing the parameter which puts <code>PDO</code> into exception mode. Because some <code>PDO</code> drivers don't support native prepared statements, so <code>PDO</code> performs emulation of the prepare. It also lets you manually enable this emulation. To use the native server-side prepared statements, you should explicitly set it <code>false</code>.</p>\n\n<p>The other is to turn off prepare emulation which is enabled in the <code>MySQL</code> driver by default, but prepare emulation should be turned off to use <code>PDO</code> safely. </p>\n\n<p>I will later explain why prepare emulation should be turned off. To find reason please check <a href=\"http://stackoverflow.com/a/12202218/1723893\">this post</a>.</p>\n\n<p>It is only usable if you are using an old version of <code>MySQL</code> which I do not recommended.</p>\n\n<p>Below is an example of how you can do it:</p>\n\n<pre><code>    $db = new PDO('mysql:host=localhost;dbname=testdb;charset=UTF-8', \n                  'username', \n                  'password',\n                  array(PDO::ATTR_EMULATE_PREPARES =&gt; false,\n                  PDO::ATTR_ERRMODE =&gt; PDO::ERRMODE_EXCEPTION));\n</code></pre>\n\n<p><strong>Can we set attributes after PDO construction?</strong></p>\n\n<p><strong>Yes</strong>, we can also set some attributes after PDO construction with the <code>setAttribute</code> method:</p>\n\n<pre><code>    $db = new PDO('mysql:host=localhost;dbname=testdb;charset=UTF-8', \n                  'username', \n                  'password');\n                  $db-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n                  $db-&gt;setAttribute(PDO::ATTR_EMULATE_PREPARES, false);\n</code></pre>\n\n<h2>Error Handling </h2>\n\n<hr>\n\n<p>Error handling is much easier in <code>PDO</code> than <code>mysql_*</code>.</p>\n\n<p>A common practice when using <code>mysql_*</code> is:</p>\n\n<pre><code>    //Connected to MySQL\n    $result = mysql_query(\"SELECT * FROM table\", $link) or die(mysql_error($link));\n</code></pre>\n\n<p><code>OR die()</code> is not a good way to handle the error since we can not handle the thing in <code>die</code>. It will just end the script abruptly and then echo the error to the screen which you usually do NOT want to show to your end users, and let bloody hackers discover your schema. Alternately, the return values of <code>mysql_*</code> functions can often be used in conjunction with <a href=\"http://php.net/mysql_error\">mysql_error()</a> to handle errors.</p>\n\n<p><code>PDO</code> offers a better solution: exceptions. Anything we do with <code>PDO</code> should be wrapped in a <code>try</code>-<code>catch</code> block. We can force <code>PDO</code> into one of three error modes by setting the error mode attribute. Three error handling modes are below.</p>\n\n<ul>\n<li><code>PDO::ERRMODE_SILENT</code>. It's just setting error codes and acts pretty much the same as <code>mysql_*</code> where you must check each result and then look at <code>$db-&gt;errorInfo();</code> to get the error details.</li>\n<li><code>PDO::ERRMODE_WARNING</code> Raise <code>E_WARNING</code>. (Run-time warnings (non-fatal errors). Execution of the script is not halted.)</li>\n<li><code>PDO::ERRMODE_EXCEPTION</code>: Throw exceptions. It represents an error raised by PDO. You should not throw a <code>PDOException</code> from your own code. See <em>Exceptions</em> for more information about exceptions in PHP. It acts very much like <code>or die(mysql_error());</code>, when it isn't caught. But unlike <code>or die()</code>, the <code>PDOException</code> can be caught and handled gracefully if you choose to do so.</li>\n</ul>\n\n<p><strong>Good read</strong>:</p>\n\n<ul>\n<li><a href=\"http://php.net/manual/en/pdo.error-handling.php\">Errors and error handling \u00b6</a></li>\n<li><a href=\"http://php.net/manual/en/class.pdoexception.php\">The PDOException class \u00b6</a></li>\n<li><a href=\"http://www.php.net/manual/en/language.exceptions.php\">Exceptions \u00b6</a></li>\n</ul>\n\n<p>Like:</p>\n\n<pre><code>$stmt-&gt;setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_SILENT );\n$stmt-&gt;setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING );\n$stmt-&gt;setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );\n</code></pre>\n\n<p>And you can wrap it in <code>try</code>-<code>catch</code>, like below:</p>\n\n<pre><code>try {\n    //Connect as appropriate as above\n    $db-&gt;query('hi'); //Invalid query!\n} \ncatch (PDOException $ex) {\n    echo \"An Error occured!\"; //User friendly message/message you want to show to user\n    some_logging_function($ex-&gt;getMessage());\n}\n</code></pre>\n\n<p>You do not have to handle with <code>try</code>-<code>catch</code> right now. You can catch it at any time appropriate, but I strongly recommend you to use <code>try</code>-<code>catch</code>. Also it may make more sense to catch it at outside the function that calls the <code>PDO</code> stuff:</p>\n\n<pre><code>    function data_fun($db) {\n       $stmt = $db-&gt;query(\"SELECT * FROM table\");\n       return $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);\n    }\n\n    //Then later\n    try {\n       data_fun($db);\n    }\n    catch(PDOException $ex) {\n       //Here you can handle error and show message/perform action you want.\n    }\n</code></pre>\n\n<p>Also, you can handle by <code>or die()</code> or we can say like <code>mysql_*</code>, but it will be really varied. You can hide the dangerous error messages in production by turning <code>display_errors off</code> and just reading your error log.</p>\n\n<p>Now, after reading all the things above, you are probably thinking: what the heck is that when I just want to start leaning simple <code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code>, or <code>DELETE</code> statements? Don't worry, here we go:</p>\n\n<hr>\n\n<h2>Selecting Data</h2>\n\n<p><img src=\"http://i.stack.imgur.com/AhIlC.png\" alt=\"PDO select image\"></p>\n\n<p>So what you are doing in <code>mysql_*</code> is:</p>\n\n<pre><code>&lt;?php\n    $result = mysql_query('SELECT * from table') or die(mysql_error());\n\n    $num_rows = mysql_num_rows($result);\n\n    while($row = mysql_fetch_assoc($result)) {\n        echo $row['field1'];\n    }\n</code></pre>\n\n<p>Now in <code>PDO</code>, you can do this like:</p>\n\n<pre><code>&lt;?php\n    $stmt = $db-&gt;query('SELECT * FROM table');\n\n    while($row = $stmt-&gt;fetch(PDO::FETCH_ASSOC)) {\n        echo $row['field1'];\n    }\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>&lt;?php\n    $stmt = $db-&gt;query('SELECT * FROM table');\n    $results = $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);\n\n    //Use $results\n</code></pre>\n\n<p><strong>Note</strong>: If you are using the method like below (<code>query()</code>), this method returns a <code>PDOStatement</code> object. So if you want to fetch the result, use it like above.</p>\n\n<pre><code>&lt;?php\n    foreach($db-&gt;query('SELECT * FROM table') as $row) {\n        echo $row['field1'];\n    }\n</code></pre>\n\n<p>In PDO Data, it is obtained via the <code>-&gt;fetch()</code>, a method of your statement handle. Before calling fetch, the best approach would be telling PDO how you\u2019d like the data to be fetched. In the below section I am explaining this.</p>\n\n<h2>Fetch Modes</h2>\n\n<p>Note the use of <code>PDO::FETCH_ASSOC</code> in the <code>fetch()</code> and <code>fetchAll()</code> code above. This tells <code>PDO</code> to return the rows as an associative array with the field names as keys. There are many other fetch modes too which I will explain one by one.</p>\n\n<p>First of all, I explain how to select fetch mode:</p>\n\n<pre><code> $stmt-&gt;fetch(PDO::FETCH_ASSOC)\n</code></pre>\n\n<p>In the above, I have been using <code>fetch()</code>. You can also use:</p>\n\n<ul>\n<li><a href=\"http://php.net/manual/en/pdostatement.fetchall.php\"><code>PDOStatement::fetchAll()</code></a> - Returns an array containing all of the result set rows</li>\n<li><a href=\"http://php.net/manual/en/pdostatement.fetchcolumn.php\"><code>PDOStatement::fetchColumn()</code></a> - Returns a single column from the next row of a result set</li>\n<li><a href=\"http://php.net/manual/en/pdostatement.fetchobject.php\"><code>PDOStatement::fetchObject()</code></a> - Fetches the next row and returns it as an object.</li>\n<li><a href=\"http://php.net/manual/en/pdostatement.setfetchmode.php\"><code>PDOStatement::setFetchMode()</code></a> - Set the default fetch mode for this statement</li>\n</ul>\n\n<p>Now I come to fetch mode:</p>\n\n<ul>\n<li><code>PDO::FETCH_ASSOC</code>: returns an array indexed by column name as returned in your result set</li>\n<li><code>PDO::FETCH_BOTH</code> (default): returns an array indexed by both column name and 0-indexed column number as returned in your result set</li>\n</ul>\n\n<p>There are even more choices! Read about them all in <a href=\"http://www.php.net/manual/en/pdostatement.fetch.php\"><code>PDOStatement</code> Fetch documentation.</a>.</p>\n\n<p><strong>Getting the row count</strong>:</p>\n\n<p>Instead of using <code>mysql_num_rows</code> to get the number of returned rows, you can get a <code>PDOStatement</code> and do <code>rowCount()</code>, like:</p>\n\n<pre><code>&lt;?php\n    $stmt = $db-&gt;query('SELECT * FROM table');\n    $row_count = $stmt-&gt;rowCount();\n    echo $row_count.' rows selected';\n</code></pre>\n\n<p><strong>Getting the Last Inserted ID</strong></p>\n\n<pre><code>&lt;?php\n    $result = $db-&gt;exec(\"INSERT INTO table(firstname, lastname) VAULES('John', 'Doe')\");\n    $insertId = $db-&gt;lastInsertId();\n</code></pre>\n\n<hr>\n\n<h2>Insert and Update or Delete statements</h2>\n\n<p><img src=\"http://i.stack.imgur.com/yQhPC.png\" alt=\"Insert and update PDO image\"></p>\n\n<p>What we are doing in <code>mysql_*</code> function is:</p>\n\n<pre><code>&lt;?php\n    $results = mysql_query(\"UPDATE table SET field='value'\") or die(mysql_error());\n    echo mysql_affected_rows($result);\n</code></pre>\n\n<p>And in pdo, this same thing can be done by:</p>\n\n<pre><code>&lt;?php\n    $affected_rows = $db-&gt;exec(\"UPDATE table SET field='value'\");\n    echo $affected_rows;\n</code></pre>\n\n<p>In the above query <a href=\"http://php.net/manual/en/pdo.exec.php\"><code>PDO::exec</code></a> execute an SQL statement and returns the number of affected rows.</p>\n\n<p><sub><em>Insert and delete will be covered later.</em></sub></p>\n\n<p>The above method is only useful when you are not using variable in query. But when you need to use a variable in a query, do not ever ever try like the above and there for  <a href=\"http://en.wikipedia.org/wiki/Prepared_statement\"><strong>prepared statement or parameterized statement</strong></a> is.</p>\n\n<hr>\n\n<h2><strong>Prepared Statements</strong></h2>\n\n<p><strong>Q.</strong> What is a prepared statement and why do I need them?<br>\n<strong>A.</strong> A prepared statement is a pre-compiled SQL statement that can be executed multiple times by sending only the data to the server.<br></p>\n\n<p>The typical workflow of using a prepared statement is as follows (<a href=\"http://en.wikipedia.org/wiki/Prepared_statement\">quoted from Wikipedia three 3 point</a>):</p>\n\n<ol>\n<li><p><strong>Prepare</strong>: The statement template is created by the application and sent to the database management system (DBMS). Certain values are left unspecified, called parameters, placeholders or bind variables (labelled <code>?</code> below):</p>\n\n<p><code>INSERT INTO PRODUCT (name, price) VALUES (?, ?)</code></p></li>\n<li><p>The DBMS parses, compiles, and performs query optimization on the statement template, and stores the result without executing it.</p></li>\n<li><strong>Execute</strong>: At a later time, the application supplies (or binds) values for the parameters, and the DBMS executes the statement (possibly returning a result). The application may execute the statement as many times as it wants with different values. In this example, it might supply 'Bread' for the first parameter and <code>1.00</code> for the second parameter.</li>\n</ol>\n\n<p>You can use a prepared statement by including placeholders in your SQL. There are basically three ones without placeholders (don't try this with variable its above one), one with unnamed placeholders, and one with named placeholders.</p>\n\n<p><strong>Q.</strong> So now, what are named placeholders and how do I use them?<br>\n<strong>A.</strong> Named placeholders. Use descriptive names preceded by a colon, instead of question marks. We don't care about position/order of value in name place holder:</p>\n\n<pre><code> $stmt-&gt;bindParam(':bla', $bla);\n</code></pre>\n\n<p><a href=\"http://php.net/manual/en/pdostatement.bindparam.php\"><code>bindParam(parameter,variable,data_type,length,driver_options)</code></a></p>\n\n<p>You can also bind using an execute array as well:</p>\n\n<pre><code>&lt;?php\n    $stmt = $db-&gt;prepare(\"SELECT * FROM table WHERE id=:id AND name=:name\");\n    $stmt-&gt;execute(array(':name' =&gt; $name, ':id' =&gt; $id));\n    $rows = $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);\n</code></pre>\n\n<p>Another nice feature for <code>OOP</code> friends is that named placeholders have the ability to insert objects directly into your database, assuming the properties match the named fields. For example:</p>\n\n<pre><code>class person {\n    public $name;\n    public $add;\n    function __construct($a,$b) {\n        $this-&gt;name = $a;\n        $this-&gt;add = $b;\n    }\n\n}\n$demo = new person('john','29 bla district');\n$stmt = $db-&gt;prepare(\"INSERT INTO table (name, add) value (:name, :add)\");\n$stmt-&gt;execute((array)$demo);\n</code></pre>\n\n<p><strong>Q.</strong> So now, what are unnamed placeholders and how do I use them?<br>\n<strong>A.</strong> Let's have an example:</p>\n\n<pre><code>&lt;?php\n    $stmt = $db-&gt;prepare(\"INSERT INTO folks (name, add) values (?, ?)\");\n    $stmt-&gt;bindValue(1, $name, PDO::PARAM_STR);\n    $stmt-&gt;bindValue(2, $add, PDO::PARAM_STR);\n    $stmt-&gt;execute();\n</code></pre>\n\n<p>and</p>\n\n<pre><code> $stmt = $db-&gt;prepare(\"INSERT INTO folks (name, add) values (?, ?)\");\n $stmt-&gt;execute(array('john', '29 bla district'));\n</code></pre>\n\n<p>In the above, you can see those <code>?</code> instead of a name like in a name place holder. Now in the first example, we assign variables to the various placeholders (<code>$stmt-&gt;bindValue(1, $name, PDO::PARAM_STR);</code>). Then, we assign values to those placeholders and execute the statement. In the second example, the first array element goes to the first <code>?</code> and the second to the second <code>?</code>.</p>\n\n<p><strong>NOTE</strong>: In <strong>unnamed placeholders</strong> we must take care of the proper order of the elements in the array that we are passing to the <code>PDOStatement::execute()</code> method.</p>\n\n<hr>\n\n<h2><code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code> prepared queries</h2>\n\n<ol>\n<li><p><strong><code>SELECT</code></strong>:</p>\n\n<pre><code>$stmt = $db-&gt;prepare(\"SELECT * FROM table WHERE id=:id AND name=:name\");\n$stmt-&gt;execute(array(':name' =&gt; $name, ':id' =&gt; $id));\n$rows = $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);\n</code></pre></li>\n<li><p><strong><code>INSERT</code></strong>:</p>\n\n<pre><code>$stmt = $db-&gt;prepare(\"INSERT INTO table(field1,field2) VALUES(:field1,:field2)\");\n$stmt-&gt;execute(array(':field1' =&gt; $field1, ':field2' =&gt; $field2));\n$affected_rows = $stmt-&gt;rowCount();\n</code></pre></li>\n<li><p><strong><code>DELETE</code></strong>:</p>\n\n<pre><code>$stmt = $db-&gt;prepare(\"DELETE FROM table WHERE id=:id\");\n$stmt-&gt;bindValue(':id', $id, PDO::PARAM_STR);\n$stmt-&gt;execute();\n$affected_rows = $stmt-&gt;rowCount();\n</code></pre></li>\n<li><p><strong><code>UPDATE</code></strong>:</p>\n\n<pre><code>$stmt = $db-&gt;prepare(\"UPDATE table SET name=? WHERE id=?\");\n$stmt-&gt;execute(array($name, $id));\n$affected_rows = $stmt-&gt;rowCount();\n</code></pre></li>\n</ol>\n\n<hr>\n\n<h2><strong>NOTE:</strong></h2>\n\n<p>However <code>PDO</code> and/or <code>MySQLi</code> are not completely safe. Check the answer <em><a href=\"http://stackoverflow.com/a/12202218/1723893\">Are PDO prepared statements sufficient to prevent SQL injection?</a></em> by <a href=\"http://stackoverflow.com/users/338665/ircmaxell\">ircmaxell</a>. Also, I am quoting some part from his answer:</p>\n\n<pre><code>$pdo-&gt;setAttribute(PDO::ATTR_EMULATE_PREPARES, false);\n$pdo-&gt;query('SET NAMES GBK');\n$stmt = $pdo-&gt;prepare(\"SELECT * FROM test WHERE name = ? LIMIT 1\");\n$stmt-&gt;execute(array(chr(0xbf) . chr(0x27) . \" OR 1=1 /*\"));\n</code></pre>\n", "title": "Why shouldn&#39;t I use mysql_* functions in PHP?", "answer_id": 14110189, "question_id": 12859942, "tags": ["php", "mysql", "database", "mysqli", "pdo"]}, {"body": "<p>Speaking of <em>technical</em> reasons, there are only few, extremely specific and rarely used. Most likely you will never ever use them in your life.<br>\nMay be I am too ignorant, but I never had an opportunity to use them things like </p>\n\n<ul>\n<li>non-blocking, asynchronous queries</li>\n<li>stored procedures returning multiple resultsets</li>\n<li>Encryption (SSL)</li>\n<li>Compression</li>\n</ul>\n\n<p>If you need them - these are no doubt technical reasons to move away from mysql extension toward something more stylish and modern-looking.</p>\n\n<p><strong>Nevertheless, there are also some non-technical issues, which can make your experience a bit harder</strong></p>\n\n<ul>\n<li>further use of these functions with modern PHP versions will raise deprecated-level notices. They simply can be turned off.</li>\n<li>in a distant future they can be possibly removed from the default PHP build. Not a big deal too, as mydsql ext will be moved into PECL and every hoster will be happy to complie PHP with it, as they don't want to lose clients whose sites were working for decades.   </li>\n<li>strong resistance from Stackoverflow community. \u0415very time you mention these honest functions, you being told that they are under strict taboo.</li>\n<li>being an average php user, most likely your idea of using these functions is error-prone and wrong. Just because of all these numerous tutorials and manuals which teach you wrong way. Not the functions themselves - I have to emphasize it - but the way they are used.</li>\n</ul>\n\n<p>This latter issue is a problem.<br>\nBut, to my opinion, proposed solution is no better either.<br>\nIt seems to me <strong>too idealistic</strong> a dream that all those PHP users will learn how to handle SQL queries properly at once. Most likely they would just change mysql_* to mysqli_* mechanically, <strong>leaving the approach the same</strong>. Especially because mysqli makes prepared statements usage incredible painful and troublesome.<br>\nNot to mention that <em>native</em> prepared statements <strong>aren't enough to protect</strong> from SQL injections, and neither mysqli nor PDO offers a solution. </p>\n\n<p>So, instead of fighting this honest extension, I'd prefer to fight wrong practices and educate people in the right ways. </p>\n\n<p><strong>Also, there are some false or non-significant reasons, like</strong></p>\n\n<ul>\n<li>Doesn't support Stored Procedures (we were using <code>mysql_query(\"CALL my_proc\");</code> for ages)</li>\n<li>Doesn't support Transactions (same as above)</li>\n<li>Doesn't support Multiple Statements (who need them?)</li>\n<li>Not under active development (so what? does it affect <em>you</em> in any practical way?)</li>\n<li>Lacks an OO interface (to create one is a matter of several hours)</li>\n<li>Doesn't support Prepared Statements or Parametrized Queries</li>\n</ul>\n\n<p>A latter one is an interesting point. Although mysql ext do not support <em>native</em> prepared statements, they aren't required for the safety. We can easily fake prepared statements using manually handled placeholders (just like PDO does):</p>\n\n<pre><code>function paraQuery()\n{\n    $args  = func_get_args();\n    $query = array_shift($args);\n    $query = str_replace(\"%s\",\"'%s'\",$query); \n\n    foreach ($args as $key =&gt; $val)\n    {\n        $args[$key] = mysql_real_escape_string($val);\n    }\n\n    $query  = vsprintf($query, $args);\n    $result = mysql_query($query);\n    if (!$result)\n    {\n        throw new Exception(mysql_error().\" [$query]\");\n    }\n    return $result;\n}\n\n$query  = \"SELECT * FROM table where a=%s AND b LIKE %s LIMIT %d\";\n$result = paraQuery($query, $a, \"%$b%\", $limit);\n</code></pre>\n\n<p><em>voila</em>, everything is parameterized and safe.</p>\n\n<p>But okay, if you don't like the red box in the manual, a problem of choice arises: mysqli or PDO?</p>\n\n<p>Well, the answer would be as follows:</p>\n\n<ul>\n<li>If you understand the necessity of using a <em>database abstraction layer</em>, and looking for an API to create one, <strong>mysqli</strong> is a very good choice, as it indeed supports many mysql-specific features.</li>\n<li><p>If, like wast majority of PHP folks, you are using raw API calls right in the application code (which is essentially wrong practice) - <strong>PDO is the only choice</strong>, as this extension pretends to be not just API but rather a semi-DAL, still incomplete but offers many important features, with two of them makes PDO critically distinguished from mysqli:</p>\n\n<ul>\n<li>unlike mysqli, PDO can bind placeholders <em>by value</em>, which makes dynamically built queries feasible without several screens of quite messy code.</li>\n<li>unlike mysqli, PDO can always return query result in a simple usual array, while mysqli can do it only on mysqlnd installations.</li>\n</ul></li>\n</ul>\n\n<p>So, if you are an average PHP user and want to save yourself a ton of headaches when using native prepared statements, PDO - again - is the only choice.<br>\nHowever, PDO is not a silver bullet too, and has it's hardships.<br>\nSo, I wrote solutions for all the common pitfalls and complex cases in the <a href=\"http://stackoverflow.com/tags/pdo/info\"><strong>PDO tag wiki</strong></a></p>\n\n<p>Nevertheless, everyone talking of extensions always missing the <strong>2 important facts</strong> about Mysqli and PDO:</p>\n\n<ol>\n<li><p>Prepared statement <strong>isn't a silver bullet</strong>. There are dynamical identifiers which cannot be bound using prepared statements. There are dynamical queries with unknown number of parameters which makes query building a difficult task.</p></li>\n<li><p><strong>Neither mysqli_* nor PDO functions should be appeared in the application code.</strong><br>\nThere ought to be an <strong>abstraction layer</strong> between them and application code, which will do all the dirty job of binding, looping, error handling, etc. inside, making application code DRY and clean. Especially for the complex cases like dynamical query building.</p></li>\n</ol>\n\n<p>So, just switching to PDO or mysqli is not enough. One have to use an ORM, or a query builder, or whatever database abstraction class instead of calling raw API functions in their code.<br>\nAnd contrary - if you have an abstraction layer between your application code and mysql API - <strong>it doesn't actually matter which engine is used.</strong> You can use mysql ext until it goes deprecated and then easily rewrite your abstraction class to another engine, <strong>having all the application code intact.</strong></p>\n\n<p>Here are some examples based on my <a href=\"https://github.com/colshrapnel/safemysql/blob/master/safemysql.class.php\">safemysql class</a> to show how such an abstraction class ought to be:</p>\n\n<pre><code>$city_ids = array(1,2,3);\n$cities   = $db-&gt;getCol(\"SELECT name FROM cities WHERE is IN(?a)\", $city_ids);\n</code></pre>\n\n<p>Compare this one single line with <a href=\"http://stackoverflow.com/a/15991146/285587\">amount of code you will need with PDO</a>.<br>\nThen compare with <a href=\"http://stackoverflow.com/a/17874410/285587\">crazy amount of code</a> you will need with raw Mysqli prepared statements.\nNote that error handling, profiling, query logging already built in and running.</p>\n\n<pre><code>$insert = array('name' =&gt; 'John', 'surname' =&gt; \"O'Hara\");\n$db-&gt;query(\"INSERT INTO users SET ?u\", $insert);\n</code></pre>\n\n<p>Compare it with usual PDO inserts, when every single field name being repeated six to ten times - in all these numerous named placeholders, bindings and query definitions.</p>\n\n<p>Another example:</p>\n\n<pre><code>$data = $db-&gt;getAll(\"SELECT * FROM goods ORDER BY ?n\", $_GET['order']);\n</code></pre>\n\n<p>You can hardly find an example for PDO to handle such practical case.<br>\nAnd it will be too wordy and most likely unsafe.    </p>\n\n<p>So, once more - it is not just raw driver should be your concern but abstraction class, useful not only for silly examples from beginner's manual but to solve whatever real life problems. </p>\n", "title": "Why shouldn&#39;t I use mysql_* functions in PHP?", "answer_id": 14112684, "question_id": 12859942, "tags": ["php", "mysql", "database", "mysqli", "pdo"]}, {"body": "<p>This answer is written to show just how trivial it is to bypass poorly written PHP user-validation code, how (and using what) these attacks work and how to replace the old MySQL functions with a secure prepared statement - and basically, why StackOverflow users (probably with a lot of rep) are barking at new users asking questions to improve their code.</p>\n\n<p>First off, please feel free to create this test mysql database (I have called mine prep):</p>\n\n<pre><code>mysql&gt; create table users(\n    -&gt; id int(2) primary key auto_increment,\n    -&gt; userid tinytext,\n    -&gt; pass tinytext);\nQuery OK, 0 rows affected (0.05 sec)\n\nmysql&gt; insert into users values(null, 'Fluffeh', 'mypass');\nQuery OK, 1 row affected (0.04 sec)\n\nmysql&gt; create user 'prepared'@'localhost' identified by 'example';\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql&gt; grant all privileges on prep.* to 'prepared'@'localhost' with grant option;\nQuery OK, 0 rows affected (0.00 sec)\n</code></pre>\n\n<p>With that done, we can move to our PHP code.</p>\n\n<p>Lets assume the following script is the verification process for an admin on a website (simplified but working if you copy and use it for testing):</p>\n\n<pre><code>&lt;?php \n\n    if(!empty($_POST['user']))\n    {\n        $user=$_POST['user'];\n    }   \n    else\n    {\n        $user='bob';\n    }\n    if(!empty($_POST['pass']))\n    {\n        $pass=$_POST['pass'];\n    }\n    else\n    {\n        $pass='bob';\n    }\n\n    $database='prep';\n    $link=mysql_connect('localhost', 'prepared', 'example');\n    mysql_select_db($database) or die( \"Unable to select database\");\n\n    $sql=\"select id, userid, pass from users where userid='$user' and pass='$pass'\";\n    //echo $sql.\"&lt;br&gt;&lt;br&gt;\";\n    $result=mysql_query($sql);\n    $isAdmin=false;\n    while ($row = mysql_fetch_assoc($result)) {\n        echo \"My id is \".$row['id'].\" and my username is \".$row['userid'].\" and lastly, my password is \".$row['pass'].\"&lt;br&gt;\";\n        $isAdmin=true;\n        // We have correctly matched the Username and Password\n        // Lets give this person full access\n    }\n    if($isAdmin)\n    {\n        echo \"The check passed. We have a verified admin!&lt;br&gt;\";\n    }\n    else\n    {\n        echo \"You could not be verified. Please try again...&lt;br&gt;\";\n    }\n    mysql_close($link);\n\n?&gt;\n\n&lt;form name=\"exploited\" method='post'&gt;\n    User: &lt;input type='text' name='user'&gt;&lt;br&gt;\n    Pass: &lt;input type='text' name='pass'&gt;&lt;br&gt;\n    &lt;input type='submit'&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Seems legit enough at first glance.</p>\n\n<p>The user has to enter a login and password, right?</p>\n\n<p>Brilliant, not enter in the following:</p>\n\n<pre><code>user: bob\npass: somePass\n</code></pre>\n\n<p>and submit it.</p>\n\n<p>The output is as follows:</p>\n\n<pre><code>You could not be verified. Please try again...\n</code></pre>\n\n<p>Super! Working as expected, now lets try the actual username and password:</p>\n\n<pre><code>user: Fluffeh\npass: mypass\n</code></pre>\n\n<p>Amazing! Hi-fives all round, the code correctly verified an admin. It's perfect!</p>\n\n<p>Well, not really. Lets say the user is a clever little person. Lets say the person is me.</p>\n\n<p>Enter in the following:</p>\n\n<pre><code>user: bob\npass: n' or 1=1 or 'm=m\n</code></pre>\n\n<p>And the output is:</p>\n\n<pre><code>The check passed. We have a verified admin!\n</code></pre>\n\n<p>Congrats, you just allowed me to enter your super-protected admins only section with me entering a false username and a false password. Seriously, if you don't believe me, create the database with the code I provided, and run this PHP code - which at glance REALLY does seem to verify the username and password rather nicely.</p>\n\n<p>So, in answer, THAT IS WHY YOU ARE BEING YELLED AT.</p>\n\n<p>So, lets have a look at what went wrong, and why I just got into your super-admin-only-bat-cave. I took a guess and assumed that you weren't being careful with your inputs and simply passed them to the database directly. I constructed the input in a way tht would CHANGE the query that you were actually running. So, what was it supposed to be, and what did it end up being?</p>\n\n<pre><code>select id, userid, pass from users where userid='$user' and pass='$pass'\n</code></pre>\n\n<p>That's the query, but when we replace the variables with the actual inputs that we used, we get the following:</p>\n\n<pre><code>select id, userid, pass from users where userid='bob' and pass='n' or 1=1 or 'm=m'\n</code></pre>\n\n<p>See how I constructed my \"password\" so that it would first close the single quote around the password, then introduce a completely new comparison? Then just for safety, I added another \"string\" so that the single quote would get closed as expected in the code we originally had.</p>\n\n<p>However, this isn't about folks yelling at you now, this is about showing you how to make your code more secure.</p>\n\n<p>Okay, so what went wrong, and how can we fix it?</p>\n\n<p>This is a classic SQL injection attack. One of the simplest for that matter. On the scale of attack vectors, this is a toddler attacking a tank - and winning.</p>\n\n<p>So, how do we protect your sacred admin section and make it nice and secure? The first thing to do will be to stop using those really old and deprecated <code>mysql_*</code> functions. I know, you followed a tutorial you found online and it works, but it's old, it's outdated and in the space of a few minutes, I have just broken past it without so much as breaking a sweat.</p>\n\n<p>Now, you have the better options of using <a href=\"http://php.net/manual/en/book.mysqli.php\">mysqli_</a> or <a href=\"http://www.php.net/manual/en/book.pdo.php\">PDO</a>. I am personally a big fan of PDO, so I will be using PDO in the rest of this answer. There are pro's and con's, but personally I find that the pro's far outweigh the con's. It's portable across multiple database engines - whether you are using MySQL or Oracle or just about bloody anything - just by changing the connection string, it has all the fancy features we want to use and it is nice and clean. I like clean.</p>\n\n<p>Now, lets have a look at that code again, this time written using a PDO object:</p>\n\n<pre><code>&lt;?php \n\n    if(!empty($_POST['user']))\n    {\n        $user=$_POST['user'];\n    }   \n    else\n    {\n        $user='bob';\n    }\n    if(!empty($_POST['pass']))\n    {\n        $pass=$_POST['pass'];\n    }\n    else\n    {\n        $pass='bob';\n    }\n    $isAdmin=false;\n\n    $database='prep';\n    $pdo=new PDO ('mysql:host=localhost;dbname=prep', 'prepared', 'example');\n    $sql=\"select id, userid, pass from users where userid=:user and pass=:password\";\n    $myPDO = $pdo-&gt;prepare($sql, array(PDO::ATTR_CURSOR =&gt; PDO::CURSOR_FWDONLY));\n    if($myPDO-&gt;execute(array(':user' =&gt; $user, ':password' =&gt; $pass)))\n    {\n        while($row=$myPDO-&gt;fetch(PDO::FETCH_ASSOC))\n        {\n            echo \"My id is \".$row['id'].\" and my username is \".$row['userid'].\" and lastly, my password is \".$row['pass'].\"&lt;br&gt;\";\n            $isAdmin=true;\n            // We have correctly matched the Username and Password\n            // Lets give this person full access\n        }\n    }\n\n    if($isAdmin)\n    {\n        echo \"The check passed. We have a verified admin!&lt;br&gt;\";\n    }\n    else\n    {\n        echo \"You could not be verified. Please try again...&lt;br&gt;\";\n    }\n\n?&gt;\n\n&lt;form name=\"exploited\" method='post'&gt;\n    User: &lt;input type='text' name='user'&gt;&lt;br&gt;\n    Pass: &lt;input type='text' name='pass'&gt;&lt;br&gt;\n    &lt;input type='submit'&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>The major differences are that there are no more <code>mysql_*</code> functions. It's all done via a PDO object, secondly, it is using a prepared statement. Now, what's a prepred statement you ask? It's a way to tell the database ahead of running a query, what the query is that we are going to run. In this case, we tell the database: \"Hi, I am going to run a select statement wanting id, userid and pass from the table users where the userid is a variable and the pass is also a variable.\".</p>\n\n<p>Then, in the execute statement, we pass the database an array with all the variables that it now expects.</p>\n\n<p>The results are fantastic. Lets try those username and password combinations from before again:</p>\n\n<pre><code>user: bob\npass: somePass\n</code></pre>\n\n<p>User wasn't verified. Awesome.</p>\n\n<p>How about:</p>\n\n<pre><code>user: Fluffeh\npass: mypass\n</code></pre>\n\n<p>Oh, I just got a little excited, it worked: The check passed. We have a verified admin!</p>\n\n<p>Now, lets try the data that a clever chap would enter to try to get past our little verification system:</p>\n\n<pre><code>user: bob\npass: n' or 1=1 or 'm=m\n</code></pre>\n\n<p>This time, we get the following:</p>\n\n<pre><code>You could not be verified. Please try again...\n</code></pre>\n\n<p>This is why you are being yelled at when posting questions - it's because people can see that your code can be bypassed wihout even trying. Please, do use this question and answer to improve your code, to make it more secure and to use functions that are current.</p>\n\n<p>Lastly, this isn't to say that this is PERFECT code. There are many more things that you could do to improve it, use hashed passwords for example, ensure that when you store sensetive information in the database, you don't store it in plain text, have multiple levels of verification - but really, if you just change your old injection prone code to this, you will be WELL along the way to writing good code - and the fact that you have gotten this far and are still reading gives me a sense of hope that you will not only implement this type of code when writing your websites and applications, but that you might go out and research those other things I just mentioned - and more. Write the best code you can, not the most basic code that barely functions.</p>\n", "title": "Why shouldn&#39;t I use mysql_* functions in PHP?", "answer_id": 18872292, "question_id": 12859942, "tags": ["php", "mysql", "database", "mysqli", "pdo"]}, {"body": "<h2>Ease of use</h2>\n\n<p>The analytic and synthetic reasons were already mentioned. For newcomers there's a more significant incentive to stop using the dated mysql_ functions. </p>\n\n<p><strong>Contemporary database APIs are just <em>easier</em> to use.</strong></p>\n\n<p>It's mostly the <em>bound parameters</em> which can simplify code. And with <a href=\"http://stackoverflow.com/a/14110189\">excellent tutorials (as seen above)</a> the transition to <a href=\"http://php.net/PDO\">PDO</a> isn't overly arduous.</p>\n\n<p>Rewriting a larger code base at once however takes time. Raison d'\u00eatre for this intermediate alternative:</p>\n\n<h3>Equivalent pdo_* functions in place of <s>mysql_*</s></h3>\n\n<p>Using <a href=\"http://fossil.include-once.org/upgradephp/artifact/43ab742241e5a3be43d31764dd333ba68e245360\">&lt;<strong>pdo_mysql.php</strong>&gt;</a> you can switch from the old mysql_ functions with <em>minimal effort</em>. It adds <code>pdo_</code> function wrappers which replace their <code>mysql_</code> counterparts.<br></p>\n\n<ol>\n<li><p>Simply <code>include_once(</code><a href=\"http://fossil.include-once.org/upgradephp/artifact/43ab742241e5a3be43d31764dd333ba68e245360\"><code>\"pdo_mysql.php\"</code></a><code>);</code> in each invocation script that has to interact with the database.\n<br></p></li>\n<li><p>Remove the <s><code>mysql_</code></s> function prefix <em>everywhere</em> and replace it with <strong><code>pdo_</code></strong>.</p>\n\n<ul>\n<li><s><code>mysql_</code></s><code>connect()</code> becomes <b><code>pdo_</code></b><code>connect()</code></li>\n<li><s><code>mysql_</code></s><code>query()</code> becomes <b><code>pdo_</code></b><code>query()</code></li>\n<li><s><code>mysql_</code></s><code>num_rows()</code> becomes <b><code>pdo_</code></b><code>num_rows()</code></li>\n<li><s><code>mysql_</code></s><code>insert_id()</code> becomes <b><code>pdo_</code></b><code>insert_id()</code></li>\n<li><s><code>mysql_</code></s><code>fetch_array()</code> becomes <b><code>pdo_</code></b><code>fetch_array()</code></li>\n<li><s><code>mysql_</code></s><code>fetch_assoc()</code> becomes <b><code>pdo_</code></b><code>fetch_assoc()</code></li>\n<li><s><code>mysql_</code></s><code>real_escape_string()</code> becomes <b><code>pdo_</code></b><code>real_escape_string()</code></li>\n<li><em>and so on...</em> <br><br>  </li>\n</ul></li>\n<li><p>Your code will work alike and still mostly look the same:</p>\n\n<pre><code>include_once(\"pdo_mysql.php\"); \n\npdo_connect(\"localhost\", \"usrABC\", \"pw1234567\");\npdo_select_db(\"test\");\n\n$result = pdo_query(\"SELECT title, html FROM pages\");  \n\nwhile ($row = pdo_fetch_assoc($result)) {\n    print \"$row[title] - $row[html]\";\n}\n</code></pre></li>\n</ol>\n\n<p>Et voil\u00e0.<br>\nYour code is <em>using</em> PDO.<br>\nNow it's time to actually <em>utilize</em> it.  </p>\n\n<h3>Bound parameters can be easy to use</h3>\n\n<p><img src=\"http://i.stack.imgur.com/78Ddi.jpg\"></p>\n\n<p>You just need a less unwieldy API.</p>\n\n<p><code>pdo_query()</code> adds very facile support for bound parameters. Converting old code is straightforward:</p>\n\n<p><img src=\"http://i.stack.imgur.com/PeuHl.png\"></p>\n\n<p>Move your variables out of the SQL string.</p>\n\n<ul>\n<li>Add them as comma delimited function parameters to <code>pdo_query()</code>.</li>\n<li>Place question marks <code>?</code> as placeholders where the variables were before.</li>\n<li>Get rid of <code>'</code> single quotes that previously enclosed string values/variables.</li>\n</ul>\n\n<p>The advantage becomes more obvious for lengthier code.</p>\n\n<p>Often string variables aren't just interpolated into SQL, but concatenated with escaping calls in between.</p>\n\n<pre><code>pdo_query(\"SELECT id, links, html, title, user, date FROM articles\n   WHERE title='\" . pdo_real_escape_string($title) . \"' OR id='\".\n   pdo_real_escape_string($title) . \"' AND user &lt;&gt; '\" .\n   pdo_real_escape_string($root) . \"' ORDER BY date\")\n</code></pre>\n\n<p>With <code>?</code> placeholders applied you don't have to bother with that:</p>\n\n<pre><code>pdo_query(\"SELECT id, links, html, title, user, date FROM articles\n   WHERE title=? OR id=? AND user&lt;&gt;? ORDER BY date\", $title, $id, $root)\n</code></pre>\n\n<p>Remember that pdo_* still allows <em>either or</em>.<br>\nJust don't escape a variable <em>and</em> bind it in the same query.</p>\n\n<ul>\n<li>The placeholder feature is provided by the real PDO behind it.</li>\n<li>Thus also allowed <code>:named</code> placeholder lists later.</li>\n</ul>\n\n<p>More importantly you can pass $_REQUEST[] variables safely behind any query. When submitted <code>&lt;form&gt;</code> fields match the database structure exactly it's even shorter:</p>\n\n<pre><code>pdo_query(\"INSERT INTO pages VALUES (?,?,?,?,?)\", $_POST);\n</code></pre>\n\n<p>So much simplicity. But let's get back to some more rewriting advises and technical reasons on why you may want to get rid of <s><code>mysql_</code></s> and escaping.</p>\n\n<h3>Fix or remove any oldschool <a href=\"http://stackoverflow.com/questions/3126072/what-are-the-best-php-input-sanitizing-functions\"><code>sanitize()</code></a> function</h3>\n\n<p>Once you have converted all <s><code>mysql_</code></s> calls to <code>pdo_query</code> with bound params, remove all redundant <code>pdo_real_escape_string</code> calls.</p>\n\n<p>In particular you should fix any <code>sanitize</code> or <code>clean</code> or <code>filterThis</code> or <code>clean_data</code> functions as advertised by dated tutorials in one form or the other:</p>\n\n<pre><code>function sanitize($str) {\n   return trim(strip_tags(htmlentities(pdo_real_escape_string($str))));\n}\n</code></pre>\n\n<p>Most glaring bug here is the lack of documentation. More significantly the order of filtering was in exactly the wrong order.</p>\n\n<ul>\n<li><p>Correct order would have been: deprecatedly <code>stripslashes</code> as the innermost call, then <code>trim</code>, afterwards <code>strip_tags</code>, <code>htmlentities</code> for output context, and only lastly the <code>_escape_string</code> as its application should directly preceed the SQL intersparsing.</p></li>\n<li><p>But as first step just <strong>get rid of the <code>_real_escape_string</code></strong> call.</p></li>\n<li><p>You may have to keep the rest of your <code>sanitize()</code> function for now if your database and application flow expect HTML-context-safe strings. Add a comment that it applies only HTML escaping henceforth.</p></li>\n<li><p>String/value handling is delegated to PDO and its parameterized statements.</p></li>\n<li><p>If there was any mention of <code>stripslashes()</code> in your sanitize function, it may indicate a higher level oversight.</p>\n\n<ul>\n<li><p>That was commonly there to undo damage (double escaping) from the deprecated <a href=\"http://php.net/magic_quotes\"><code>magic_quotes</code></a>. Which however is <a href=\"http://stackoverflow.com/questions/517008/how-to-turn-off-magic-quotes-on-shared-hosting\">best fixed centrally</a>, not string by string.</p></li>\n<li><p>Use one of the <a href=\"http://php.net/security.magicquotes.disabling\">userland reversal</a> approaches. Then remove the <code>stripslashes()</code> in the <code>sanitize</code> function.</p></li>\n</ul>\n\n<blockquote>\n  <p><strong>Historic note on magic_quotes.</strong> That feature is rightly deprecated. It's often incorrectly portrayed as failed <em>security</em> feature however. But magic_quotes are as much a failed security feature as tennis balls have failed as nutrition source. That simply wasn't their purpose.</p>\n  \n  <p>The original implementation in PHP2/FI introduced it explicitly with just \"<em>quotes will be automatically escaped making it easier to pass form data directly to msql queries</em>\". Notably it was accidentially safe to use with <a href=\"http://www.hughes.com.au/products/msql/\">mSQL</a>, as that supported ASCII only.<br>\n  Then PHP3/Zend reintroduced magic_quotes for MySQL and misdocumented it. But originally it was just a <a href=\"http://stackoverflow.com/questions/16098194/why-magic-quotes-has-been-removed-from-php-5-4\">convenience feature</a>, not intend for security. </p>\n</blockquote></li>\n</ul>\n\n<h3>How prepared statements differ</h3>\n\n<p>When you scramble string variables into the SQL queries, it doesn't just get more intricate for you to follow. It's also extraneous effort for MySQL to segregate code and data again.</p>\n\n<p><img src=\"http://i.stack.imgur.com/niZ7j.png\"></p>\n\n<p>SQL injections simply are when <em>data bleeds into code</em> context. A database server can't later spot where PHP originally glued variables inbetween query clauses.</p>\n\n<p>With bound parameters you separate SQL code and SQL-context values in your PHP code. But it doesn't get shuffled up again behind the scenes (except with PDO::EMULATE_PREPARES). Your database receives the unvaried SQL commands and 1:1 variable values.</p>\n\n<p><img src=\"http://i.stack.imgur.com/M7PXp.png\"></p>\n\n<p>While this answer stresses that you should care about the readability advantages of dropping <s><code>mysql_</code></s>. There's occasionally also a performance advantage (repeated INSERTs with just differing values) due to this visible and technical data/code separation. </p>\n\n<p>Beware that parameter binding still isn't a magic one-stop solution against <em>all</em> SQL injections. It handles the most common use for data/values. But can't whitelist column name / table identifiers, help with dynamic clause construction, or just plain array value lists.</p>\n\n<h3>Hybrid PDO use</h3>\n\n<p>These <code>pdo_*</code> wrapper functions make a coding-friendly stop-gap API. (It's pretty much what <code>MYSQLI</code> could have been if it wasn't for the idiosyncratic function signature shift). They also expose the real PDO at most times.<br>\nRewriting doesn't have to stop at using the new pdo_ function names. You could one by one transition each pdo_query() into a plain $pdo->prepare()->execute() call.</p>\n\n<p>It's best to start at simplifying again however. For example the common result fetching:</p>\n\n<pre><code>$result = pdo_query(\"SELECT * FROM tbl\");\nwhile ($row = pdo_fetch_assoc($result)) {\n</code></pre>\n\n<p>Can be replaced with just an foreach iteration:</p>\n\n<pre><code>foreach ($result as $row) {\n</code></pre>\n\n<p>Or better yet a direct and complete array retrieval:</p>\n\n<pre><code>$result-&gt;fetchAll();\n</code></pre>\n\n<p>You'll get more helpful warnings in most cases than PDO or mysql_ usually provide after failed queries.</p>\n\n<h3>Other options</h3>\n\n<p>So this hopefully visualized some <em>practical</em> reasons and a worthwile pathway to drop <s><code>mysql_</code></s>.</p>\n\n<p>Just switching to <a href=\"/questions/tagged/pdo\" class=\"post-tag\" title=\"show questions tagged &#39;pdo&#39;\" rel=\"tag\">pdo</a> doesn't quite cut it. <code>pdo_query()</code> is also just a frontend onto it.</p>\n\n<p>Unless you also introduce parameter binding or can utilize something else from the nicer API, it's a pointless switch. I hope it's portrayed simple enough to not further the discouragement to newcomers. (Education usually works better than prohibition.)</p>\n\n<p>While it qualifies for the simplest-thing-that-could-possibly-work category, it's also still very experimental code. I just wrote it over the weekend. There's a plethora of alternatives however. Just google for <a href=\"https://www.google.de/search?client=stackoverflow&amp;q=PHP+database+abstraction\">PHP database abstraction</a> and browse a little. There always have been and will be lots of excellent libraries for such tasks.</p>\n\n<p>If you want to simplify your database interaction further, mappers like <a href=\"http://j4mie.github.io/idiormandparis/\">Paris/Idiorm</a> are worth a try. Just like nobody uses the bland DOM in JavaScript anymore, you don't have to babysit a raw database interface nowadays.</p>\n", "title": "Why shouldn&#39;t I use mysql_* functions in PHP?", "answer_id": 20767765, "question_id": 12859942, "tags": ["php", "mysql", "database", "mysqli", "pdo"]}, {"body": "<p>The MySQL extension is the oldest of the three and was the original way that developers used to communicate with MySQL. This extension is now being <a href=\"http://php.net/manual/en/migration55.deprecated.php\">deprecated</a> in favor of the other <a href=\"http://php.net/manual/en/book.mysqli.php\">two</a> <a href=\"http://php.net/manual/en/book.pdo.php\">alternatives</a> because of improvements made in newer releases of both PHP and MySQL.</p>\n\n<ul>\n<li><p><a href=\"http://php.net/manual/en/book.mysqli.php\">MySQLi</a> is the 'improved' extension for working with MySQL databases. It takes advantage of features that are available in newer versions of the MySQL server, exposes both a function-oriented and an object-oriented interface to the developer and a does few other nifty things.</p></li>\n<li><p><a href=\"http://php.net/manual/en/book.pdo.php\">PDO</a> offers an API that consolidates most of the functionality that was previously spread across the major database access extensions, i.e. MySQL, PostgreSQL, SQLite, MSSQL, etc. The interface exposes high-level objects for the programmer to work with database connections, queries and result sets, and low-level drivers perform communication and resource handling with the database server. A lot of discussion and work is going into PDO and it\u2019s considered the appropriate method of working with databases in modern, professional code.</p></li>\n</ul>\n", "title": "Why shouldn&#39;t I use mysql_* functions in PHP?", "answer_id": 32346863, "question_id": 12859942, "tags": ["php", "mysql", "database", "mysqli", "pdo"]}, {"body": "<p><strong>mysql_*</strong> functions were depreciated (as of <strong>php 5.5</strong>) given the fact that better functions and code structures were developed. The fact that the function was depreciated means that no more effort will be placed into improving it in terms of performance and security, <strong>which means it is less future proof</strong>.</p>\n\n<p>If you need more reasons:</p>\n\n<ul>\n<li><strong>mysql_*</strong> functions do not support prepared statements.</li>\n<li><strong>mysql_*</strong> functions do not support the binding of parameters.</li>\n<li><strong>mysql_*</strong> functions lack functionality for Object Oriented Programming.</li>\n<li>the list goes on ...</li>\n</ul>\n", "title": "Why shouldn&#39;t I use mysql_* functions in PHP?", "answer_id": 37405500, "question_id": 12859942, "tags": ["php", "mysql", "database", "mysqli", "pdo"]}, {"body": "<p>its simple. These are deprecated now. Because of the introduction of latest PDO by PHP.  PDO is their own personal developed Database system.</p>\n", "title": "Why shouldn&#39;t I use mysql_* functions in PHP?", "answer_id": 39310959, "question_id": 12859942, "tags": ["php", "mysql", "database", "mysqli", "pdo"]}, {"body": "<p>I find the above answers really lengthy, so to summarize:</p>\n\n<blockquote>\n  <p>The mysqli extension has a number of\n  benefits, the key enhancements over\n  the mysql extension being:</p>\n  \n  <ul>\n  <li>Object-oriented interface</li>\n  <li>Support for Prepared Statements</li>\n  <li>Support for Multiple Statements</li>\n  <li>Support for Transactions</li>\n  <li>Enhanced debugging capabilities</li>\n  <li>Embedded server support</li>\n  </ul>\n</blockquote>\n\n<p>Source: <a href=\"http://us2.php.net/manual/en/mysqli.overview.php\" rel=\"nofollow\">MySQLi overview</a></p>\n\n<hr>\n\n<p>As explained in the above answeres, the alternatives of mysql are mysqli and pdo.</p>\n\n<ul>\n<li>API supports server-side Prepared Statements : Supported by MYSQLi and PDO</li>\n<li>API supports client-side Prepared Statements : Supported only by PDO</li>\n<li>API supports Stored Procedures : Both MySQLi and PDO</li>\n<li>API supports Multiple Statements and all MySQL 4.1+ functionality - Supported by MySQLi and mostly also by PDO</li>\n</ul>\n\n<p>Both MySQLi and PDO where introduced in PHP5.0, whereas MySQL was introduced prior to PHP3.0. A point to note is MySQL is included in PHP5.x though deprecated in later versions. </p>\n", "title": "Why shouldn&#39;t I use mysql_* functions in PHP?", "answer_id": 39373475, "question_id": 12859942, "tags": ["php", "mysql", "database", "mysqli", "pdo"]}], "link": "http://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php", "question_id": 12859942}, {"body": "<p>I've been using Git for a while now and have recently downloaded an update only to find this warning message come up when I try to <code>push</code>.</p>\n\n<pre><code>warning: push.default is unset; its implicit value is changing in \nGit 2.0 from 'matching' to 'simple'. To squelch this message \nand maintain the current behavior after the default changes, use: \n\n  git config --global push.default matching\n\nTo squelch this message and adopt the new behavior now, use: \n\n  git config --global push.default simple\n</code></pre>\n\n<p>I can obviously set it to one of the values mentioned, but what do they mean? What's the difference between <code>simple</code> and <code>matching</code>?</p>\n\n<p>If I change it on one client will I need to do anything on other clients that I share repos with?</p>\n", "title": "Warning: push.default is unset; its implicit value is changing in Git 2.0", "tags": ["git", "version-control"], "answers": [{"body": "<p>It's explained in great detail in <a href=\"http://git-scm.com/docs/git-config.html\">the docs</a> (search for <code>push.default</code> on the page), but I'll try to summarize:</p>\n\n<ul>\n<li><p><code>matching</code> means <code>git push</code> will <strong>push all your local branches</strong> to the ones with the same name on the remote. This makes it easy to accidentally push a branch you didn't intend to. </p></li>\n<li><p><code>simple</code> means <code>git push</code> will <strong>push only the current branch to the one that <code>git pull</code> would pull from</strong>, and also checks that their names match. This is a more intuitive behavior, which is why the default is getting changed to this.</p></li>\n</ul>\n\n<p>This setting only affects the behavior of your local client, and can be overridden by explicitly specifying which branches you want to push on the command line. Other clients can have different settings, <strong>it only affects what happens when you don't specify which branches you want to push</strong>.</p>\n", "title": "Warning: push.default is unset; its implicit value is changing in Git 2.0", "answer_id": 13148313, "question_id": 13148066, "tags": ["git", "version-control"]}, {"body": "<p>I realize this is an old post but as I just ran into the same issue and had trouble finding the answer I thought I'd add a bit.</p>\n\n<p>So @hammar's answer is correct. Using <code>push.default simple</code> is, in a way, like configuring tracking on your branches so you don't need to specify remotes and branches when pushing and pulling. The <code>matching</code> option will push all branches to their corresponding counterparts on the default remote (which is the first one that was set up unless you've configured your repo otherwise).</p>\n\n<p>One thing I hope others find useful in the future is that I was running Git 1.8 on OS X Mountain Lion and never saw this error. Upgrading to Mavericks is what suddenly made it show up (running <code>git --version</code> will show <code>git version 1.8.3.4 (Apple Git-47)</code> which I'd never seen until the update to the OS.</p>\n", "title": "Warning: push.default is unset; its implicit value is changing in Git 2.0", "answer_id": 19609370, "question_id": 13148066, "tags": ["git", "version-control"]}, {"body": "<p>If you get a message from git complaining about the value 'simple' in the configuration, check your git version. </p>\n\n<p>After upgrading XCode (on a Mac running Mountain Lion), which also upgraded git from 1.7.4.4 to 1.8.3.4, shells started before the upgrade were still running git 1.7.4.4 and complained about the value 'simple' for push.default in the global config.</p>\n\n<p>The solution was to close the shells running the old version of git and use the new version.</p>\n", "title": "Warning: push.default is unset; its implicit value is changing in Git 2.0", "answer_id": 21483853, "question_id": 13148066, "tags": ["git", "version-control"]}], "link": "http://stackoverflow.com/questions/13148066/warning-push-default-is-unset-its-implicit-value-is-changing-in-git-2-0", "question_id": 13148066}, {"body": "<p>How does data binding work in the AngularJS framework?</p>\n\n<p>I haven't found technical details on <a href=\"http://angularjs.org\">their site</a>. It's more or less clear how it works when data is propagated from view to model. But how does AngularJS track changes of model properties without setters and getters?</p>\n\n<p>I found that there are <a href=\"http://stackoverflow.com/questions/1029241/javascript-object-watch-for-all-browsers\">JavaScript watchers</a> that may do this work. But they are not supported in <a href=\"http://en.wikipedia.org/wiki/Internet_Explorer_6\">Internet&nbsp;Explorer&nbsp;6</a> and <a href=\"http://en.wikipedia.org/wiki/Internet_Explorer_7\">Internet&nbsp;Explorer&nbsp;7</a>. So how does AngularJS know that I changed for example the following and reflected this change on a view?</p>\n\n<pre><code>myobject.myproperty=\"new value\";\n</code></pre>\n", "title": "How does data binding work in AngularJS?", "tags": ["javascript", "angularjs", "data-binding"], "answers": [{"body": "<p>This is my basic understanding; it may well be wrong!</p>\n\n<ol>\n<li>Items are watched by passing a function (returning the thing to be\nwatched) to the <code>$watch</code> method.</li>\n<li>Changes to watched items must be made within a block of code\nwrapped by the <code>$apply</code> method.</li>\n<li>At the end of the <code>$apply</code> the <code>$digest</code> method is invoked which goes\nthrough each of the watches and checks to see if they changed since\nlast time the <code>$digest</code> ran.</li>\n<li>If any changes are found then the digest is invoked again until all changes stabilize.</li>\n</ol>\n\n<p>In normal development, data-binding syntax in the HTML tells the AngularJS compiler to create the watches for you and controller methods are run inside <code>$apply</code> already. So to the application developer it is all transparent.</p>\n", "title": "How does data binding work in AngularJS?", "answer_id": 9692101, "question_id": 9682092, "tags": ["javascript", "angularjs", "data-binding"]}, {"body": "<p>AngularJS remembers the value and compares it to a previous value. This is basic dirty-checking. If there is a change in value, then it fires the change event.</p>\n\n<p>The <code>$apply()</code> method, which is what you call when you are transitioning from a non-AngularJS world into an AngularJS world, calls <code>$digest()</code>. A digest is just plain old dirty-checking. It works on all browsers and is totally predictable.</p>\n\n<p>To contrast dirty-checking (AngularJS) vs change listeners (<a href=\"http://en.wikipedia.org/wiki/KnockoutJS\">KnockoutJS</a> and <a href=\"https://en.wikipedia.org/wiki/Backbone.js\">Backbone.js</a>): While dirty-checking may seem simple, and even inefficient (I will address that later), it turns out that it is semantically correct all the time, while change listeners have lots of weird corner cases and need things like dependency tracking to make it more semantically correct. KnockoutJS dependency tracking is a clever feature for a problem which AngularJS does not have.</p>\n\n<h1>Issues with change listeners:</h1>\n\n<ul>\n<li>The syntax is atrocious, since browsers do not support it natively. Yes, there are proxies, but they are not semantically correct in all cases, and of course there are no proxies on old browsers. The bottom line is that dirty-checking allows you to do <a href=\"http://en.wikipedia.org/wiki/Plain_Old_Java_Object\">POJO</a>, whereas KnockoutJS and Backbone.js force you to inherit from their classes, and access your data through accessors.</li>\n<li>Change coalescence. Suppose you have an array of items. Say you want to add items into an array, as you are looping to add, each time you add you are firing events on change, which is rendering the UI. This is very bad for performance. What you want is to update the UI only once, at the end. The change events are too fine-grained.</li>\n<li>Change listeners fire immediately on a setter, which is a problem, since the change listener can further change data, which fires more change events. This is bad since on your stack you may have several change events happening at once. Suppose you have two arrays which need to be kept in sync for whatever reason. You can only add to one or the other, but each time you add you fire a change event, which now has an inconsistent view of the world. This is a very similar problem to thread locking, which JavaScript avoids since each callback executes exclusively and to completion. Change events break this since setters can have far-reaching consequences which are not intended and non obvious, which creates the thread problem all over again. It turns out that what you want to do is to delay the listener execution, and guarantee, that only one listener runs at a time, hence any code is free to change data, and it knows that no other code runs while it is doing so.</li>\n</ul>\n\n<h1>What about performance?</h1>\n\n<p>So it may seem that we are slow, since dirty-checking is inefficient. This is where we need to look at real numbers rather than just have theoretical arguments, but first let's define some constraints.</p>\n\n<p>Humans are:</p>\n\n<ul>\n<li><p><em>Slow</em> \u2014 Anything faster than 50&nbsp;ms is imperceptible to humans and thus can be considered as \"instant\".</p></li>\n<li><p><em>Limited</em> \u2014 You can't really show more than about 2000 pieces of information to a human on a single page. Anything more than that is really bad UI, and humans can't process this anyway.</p></li>\n</ul>\n\n<p>So the real question is this: How many comparisons can you do on a browser in 50&nbsp;ms? This is a hard question to answer as many factors come into play, but here is a test case: <a href=\"http://jsperf.com/angularjs-digest/6\">http://jsperf.com/angularjs-digest/6</a> which creates 10,000 watchers. On a modern browser this takes just under 6&nbsp;ms. On <a href=\"http://en.wikipedia.org/wiki/Internet_Explorer_8\">Internet&nbsp;Explorer&nbsp;8</a> it takes about 40&nbsp;ms. As you can see, this is not an issue even on slow browsers these days. There is a caveat: The comparisons need to be simple to fit into the time limit... Unfortunately it is way too easy to add a slow comparison into AngularJS, so it is easy to build slow applications when you don't know what you are doing. But we hope to have an answer by providing an instrumentation module, which would show you which are the slow comparisons.</p>\n\n<p>It turns out that video games and GPUs use the dirty-checking approach, specifically because it is consistent. As long as they get over the monitor refresh rate (typically 50-60 Hz, or every 16.6-20 ms), any performance over that is a waste, so you're better off drawing more stuff, than getting FPS higher.</p>\n", "title": "How does data binding work in AngularJS?", "answer_id": 9693933, "question_id": 9682092, "tags": ["javascript", "angularjs", "data-binding"]}, {"body": "<p>I wondered this myself for a while. Without setters how does AngularJS notice changes to the <code>$scope</code> object? Does it poll them?</p>\n\n<p>What it actually does is this: Any \"normal\" place you modify the model was already called from the guts of AngularJS, so it automatically calls <code>$apply</code> for you after your code runs. Say your controller has a method that's hooked up to <code>ng-click</code> on some element. Because AngularJS wires the calling of that method together for you, it has a chance to do an <code>$apply</code> in the appropriate place. Likewise for expressions that appear right in the views, those are executed by AngularJS so it does the <code>$apply</code>.</p>\n\n<p>When the documentation talk about having to call <code>$apply</code> manually for code <em>outside of AngularJS</em>, it's talking about code which, when run, doesn't stem from AngularJS itself in the call stack.</p>\n", "title": "How does data binding work in AngularJS?", "answer_id": 12252150, "question_id": 9682092, "tags": ["javascript", "angularjs", "data-binding"]}, {"body": "<p>Misko already gave an excellent description of how the data bindings work, but I would like to add my view on the performance issue with the data binding.</p>\n\n<p>As Misko stated, around 2000 bindings is where you start to see problems, but you shouldn't have more than 2000 pieces of information on a page anyway. This may be true, but not every data-binding is visible to the user. Once you start building any sort of widget or data grid with two-way binding you can <em>easily</em> hit 2000 bindings, without having a bad ux.</p>\n\n<p>Consider, for example, a combobox where you can type text to filter the available options. This sort of control could have ~150 items and still be highly usable. If it has some extra feature (for example a specific class on the currently selected option) you start to get 3-5 bindings per option. Put three of these widgets on a page (e.g. one to select a country, the other to select a city in said country, and the third to select a hotel) and you are somewhere between 1000 and 2000 bindings already.</p>\n\n<p>Or consider a data-grid in a corporate web application. 50 rows per page is not unreasonable, each of which could have 10-20 columns. If you build this with ng-repeats, and/or have information in some cells which uses some bindings, you could be approaching 2000 bindings with this grid alone.</p>\n\n<p>I find this to be a <strong>huge</strong> problem when working with AngularJS, and the only solution I've been able to find so far is to construct widgets without using two-way binding, instead using ngOnce, deregistering watchers and similar tricks, or construct directives which builds the DOM with jQuery and DOM manipulation. I feel this defeats the purpose of using Angular in the first place.</p>\n\n<p>I would love to hear suggestions on other ways to handle this, but then maybe I should write my own question. I wanted to put this in a comment, but it turned out to be way too long for that...</p>\n\n<p><strong>TL;DR</strong> <br />\nThe data binding can cause performance issues on complex pages.</p>\n", "title": "How does data binding work in AngularJS?", "answer_id": 18381836, "question_id": 9682092, "tags": ["javascript", "angularjs", "data-binding"]}, {"body": "<p>It happened that I needed to link a data model of a person with a form, what I did was a direct mapping of the data with the form.</p>\n\n<p>For example if the model had something like:</p>\n\n<pre><code>$scope.model.people.name\n</code></pre>\n\n<p>The control input of the form:</p>\n\n<pre><code>&lt;input type=\"text\" name=\"namePeople\" model=\"model.people.name\"&gt;\n</code></pre>\n\n<p>That way if you modify the value of the object controller, this will be reflected automatically in the view.</p>\n\n<p>An example where I passed the model is updated from server data is when you ask for a zip code and zip code based on written loads a list of colonies and cities associated with that view, and by default set the first value with the user. And this I worked very well, what does happen, is that angularJS sometimes takes a few seconds to refresh the model, to do this you can put a spinner while displaying the data.</p>\n", "title": "How does data binding work in AngularJS?", "answer_id": 18864842, "question_id": 9682092, "tags": ["javascript", "angularjs", "data-binding"]}, {"body": "<h2>By dirty checking the $scope object</h2>\n\n<p>Angular maintains a simple array of watchers in the $scope objects. If you inspect any $scope you will find that it contains an array called $$watchers. </p>\n\n<p>Each watcher is an object that contains among other things</p>\n\n<ol>\n<li>An expression which the watcher is monitoring. This might just be an attribute name, or something more complicated.</li>\n<li>A last known value of the expression. This can be checked against the current computed value of the expression. If the values differ the watcher will trigger the function and mark the $scope as dirty.</li>\n<li>A function which will be executed if the watcher is dirty.</li>\n</ol>\n\n<h2>How watchers are defined</h2>\n\n<p>There are many different ways of defining a watcher in AngularJS. </p>\n\n<ul>\n<li><p>You can explicitly $watch an attribute on $scope. </p>\n\n<pre><code>$scope.$watch('person.username', validateUnique);\n</code></pre></li>\n<li><p>You can place a {{}} interpolation in your template (a watcher will be created for you on the current $scope). </p>\n\n<pre><code>&lt;p&gt;username: {{person.username}}&lt;/p&gt;\n</code></pre></li>\n<li><p>You can ask a directive such as ng-model to define the watcher for you.</p>\n\n<pre><code>&lt;input ng-model=\"person.username /&gt;\n</code></pre></li>\n</ul>\n\n<h2>The $digest cycle checks all watchers against their last value</h2>\n\n<p>When we interact with angular through the normal channels (ng-model, ng-repeat, etc) a digest cycle will be triggered by the directive.</p>\n\n<p>A digest cycle is a <strong>depth first traversal of $scope and all its children</strong>. For each $scope object, we iterate over its $$watchers array and evaluate all the expressions. If the new expression value is different from the last known value, the watcher's function is called. This function might recompile part of the DOM, recompute a value on $scope, trigger an AJAX request, anything you need it to do.</p>\n\n<p>Every scope is traversed and every watch expression evaluated and checked against the last value.</p>\n\n<h2>If a watcher is triggered, the $scope is dirty</h2>\n\n<p>If a watcher is triggered, the app knows something has changed, and the $scope is marked as dirty.</p>\n\n<p>Watcher functions can change other attributes on $scope or on a parent $scope. If one $watcher function has been triggered, we can't guarantee that our other $scopes are still clean, and so we execute the entire digest cycle again.</p>\n\n<h2>If the $digest is dirty, we execute the entire $digest cycle again</h2>\n\n<p>We continually loop through the $digest cycle until either the digest cycle comes up clean (all $watch expressions have the same value as they had in the previous cycle), or we reach the digest limit. By default, this limit is set at 10.</p>\n\n<p>If we reach the digest limit Angular will raise an error in the console:</p>\n\n<pre><code>10 $digest() iterations reached. Aborting!\n</code></pre>\n\n<h2>The digest is hard on the machine but easy on the developer</h2>\n\n<p>As you can see, every time something changes in an Angular app, Angular will check every single watcher in the $scope hierarchy to see how to respond. For a developer this is a massive productivity boon, as you now need to write almost no wiring code, Angular will just notice if a value has changed.</p>\n\n<p>From the perspective of the machine though this is wildly inefficient and will slow our app down if we create too many watchers. Misko has quoted a figure of about 4000 watchers before your app will feel slow on older browsers.</p>\n\n<p>This limit is easy to reach if you ng-repeat over a large JSON array for example. You can mitigate against this using features like one-time binding to compile a template without creating watchers.</p>\n", "title": "How does data binding work in AngularJS?", "answer_id": 30596164, "question_id": 9682092, "tags": ["javascript", "angularjs", "data-binding"]}, {"body": "<p>Here is an example of data binding with AngularJS, using an input field. I will explain later</p>\n\n<p><strong>HTML Code</strong></p>\n\n<pre><code>&lt;div ng-app=\"myApp\" ng-controller=\"myCtrl\" class=\"formInput\"&gt;\n     &lt;input type=\"text\" ng-model=\"watchInput\" Placeholder=\"type something\"/&gt;\n     &lt;p&gt;{{watchInput}}&lt;/p&gt; \n&lt;/div&gt;\n</code></pre>\n\n<p><strong>AngularJS Code</strong></p>\n\n<pre><code>myApp = angular.module (\"myApp\", []);\nmyApp.controller(\"myCtrl\", [\"$scope\", function($scope){\n  //Your Controller code goes here\n}]);\n</code></pre>\n\n<p>As you can see in the example above, <strong>AngularJS</strong> uses <code>ng-model</code> to listen and watch what happens on HTML elements, especially on <code>input</code> fields. When something happens, do something. In our case, <code>ng-model</code> is bind to our view, using the mustache notation <code>{{}}</code>. Whatever is typed inside the input field is displayed on the screen instantly. And that's the beauty of data binding, using AngularJS in its simplest form.</p>\n\n<p>Hope this helps.</p>\n\n<p>See a working example here on\n<a href=\"http://codepen.io/chrisN/pen/YqEmOO\" rel=\"nofollow\">Codepen</a></p>\n", "title": "How does data binding work in AngularJS?", "answer_id": 36459182, "question_id": 9682092, "tags": ["javascript", "angularjs", "data-binding"]}, {"body": "<p>AngularJS handle data-binding mechanism with the help of three powerful functions: $watch(), $digest()\nand $apply(). Most of the time AngularJS will call the $scope.$watch() and $scope.$digest() functions for you, but\nin some cases you may have to call these functions yourself to update new values.</p>\n\n<p><strong>$watch()</strong> - This function is used to observe changes in a variable on the $scope. It accepts three\nparameters: expression, listener and equality object, where listener and equality object are optional parameters.</p>\n\n<p><strong>$digest()</strong> - This function iterates through all the watches in the $scope object, and its child $scope objects (if it has\nany). When $digest() iterates over the watches, it checks if the value of the expression has changed. If the value\nhas changed, AngularJS calls the listener with the new value and the old value.\nThe $digest() function is called whenever AngularJS thinks it is necessary. For example, after a button click, or\nafter an AJAX call. You may have some cases where AngularJS does not call the $digest() function for you. In that\ncase you have to call it yourself.</p>\n\n<p><strong>$apply()</strong> - Angular do auto-magically updates only those model changes which are inside AngularJS context. When\nyou do change in any model outside of the Angular context (like browser DOM events, setTimeout, XHR or third\nparty libraries), then you need to inform Angular of the changes by calling $apply() manually. When the $apply()\nfunction call finishes AngularJS calls $digest() internally, so all data bindings are updated.</p>\n", "title": "How does data binding work in AngularJS?", "answer_id": 37257144, "question_id": 9682092, "tags": ["javascript", "angularjs", "data-binding"]}, {"body": "<p>Explaining with Pictures : </p>\n\n<h2>Data-Binding needs a mapping</h2>\n\n<p>The reference in the scope is not exactly the reference   in the template. When you data-bind two objects, you need a third one that listen to the first and modify the other.</p>\n\n<p><a href=\"http://i.stack.imgur.com/zcMvf.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/zcMvf.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here, when you modify the <code>&lt;input&gt;</code>, you touch the <strong>data-ref3</strong>. And the classic data-bind mecanism will change <strong>data-ref4</strong>. So how the other <code>{{data}}</code> expressions will move ?</p>\n\n<h2>Events leads to $digest()</h2>\n\n<p><a href=\"http://i.stack.imgur.com/IYRLT.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/IYRLT.png\" alt=\"enter image description here\"></a></p>\n\n<p>Angular maintains a <code>oldValue</code> and <code>newValue</code> of every binding. And after every <em>Angular event</em>, the famous <code>$digest()</code> loop will wheck the WatchList to see if something changed. These <em>Angular events</em> are <code>ng-click</code>, <code>ng-change</code>, <code>$http</code> completed ...  The <code>$digest()</code> will loop as long as any <code>oldValue</code> differs from the <code>newValue</code>.</p>\n\n<p>In the previous picture, it will notice that data-ref1 and data-ref2 has changed.</p>\n\n<h2>Conclusions</h2>\n\n<p>It's a little like the Egg and Chicken. You never know who starts, but hopefully it works most of the time as expected. </p>\n\n<p>The other point is that you can understand easily the impact deep of a simple binding on the memory and the CPU. Hopefully Desktops are fat enough to handle this. Mobile phones are not that strong.</p>\n", "title": "How does data binding work in AngularJS?", "answer_id": 37348091, "question_id": 9682092, "tags": ["javascript", "angularjs", "data-binding"]}, {"body": "<p>Obviously there is no periodic checking of Scope whether there is any change in the Objects attached to it. Not all the objects attached to scope are watched . Scope prototypically maintains a <strong>$$WatchersArray</strong> . Scope only iterates through this WatchersArray when $digest is called . </p>\n\n<p>Angular adds a watcher to the WatchersArray for each of these </p>\n\n<blockquote>\n  <ol>\n  <li>{{expression}}\u200a\u2014\u200aIn your templates (and anywhere else where there\u2019s an expression) or when we define ng-model. <br></li>\n  <li>$scope.$watch(\u2018expression/function\u2019)\u200a\u2014\u200aIn your JavaScript we can just attach a scope object for angular to watch. </li>\n  </ol>\n</blockquote>\n\n<p><strong>$watch</strong> function takes in three parameters:<br></p>\n\n<blockquote>\n  <ol>\n  <li><p>First one is a watcher function which just returns the object or we can just add an expression. <br></p></li>\n  <li><p>Second one is a listener function which will be called when there is a change in the object. All the things like DOM changes will be implemented in this function.<br></p></li>\n  <li><p>The third being an optional parameter which takes in a boolean . If its true , angular deep watches the object &amp; if its false Angular just does a reference watching on the object.\n    Rough Implementation of $watch looks like this </p></li>\n  </ol>\n</blockquote>\n\n<pre><code>Scope.prototype.$watch = function(watchFn, listenerFn) {\n   var watcher = {\n       watchFn: watchFn,\n       listenerFn: listenerFn || function() { },\n       last: initWatchVal  // initWatchVal is typically undefined\n   };\n   this.$$watchers.push(watcher); // pushing the Watcher Object to Watchers  \n};\n</code></pre>\n\n<p>There is an interesting thing in Angular called Digest Cycle. The $digest cycle starts as a result of a call to $scope.$digest(). Assume that you change a $scope model in a handler function through the ng-click directive. In that case AngularJS automatically triggers a $digest cycle by calling $digest().In addition to ng-click, there are several other built-in directives/services that let you change models (e.g. ng-model, $timeout, etc) and automatically trigger a $digest cycle.  The rough implementation of $digest looks like this.</p>\n\n<pre><code>Scope.prototype.$digest = function() {\n      var dirty;\n      do {\n          dirty = this.$$digestOnce();\n      } while (dirty);\n}\nScope.prototype.$$digestOnce = function() {\n   var self = this;\n   var newValue, oldValue, dirty;\n   _.forEach(this.$$watchers, function(watcher) {\n          newValue = watcher.watchFn(self);\n          oldValue = watcher.last;   // It just remembers the last value for dirty checking\n          if (newValue !== oldValue) { //Dirty checking of References \n   // For Deep checking the object , code of Value     \n   // based checking of Object should be implemented here\n             watcher.last = newValue;\n             watcher.listenerFn(newValue,\n                  (oldValue === initWatchVal ? newValue : oldValue),\n                   self);\n          dirty = true;\n          }\n     });\n   return dirty;\n };\n</code></pre>\n\n<p>If we use JavaScript\u2019s <strong>setTimeout()</strong> function to update a scope model, Angular has no way of knowing what you might change. In this case it\u2019s our responsibility to call $apply() manually, which triggers a $digest cycle. Similarly, if you have a directive that sets up a DOM event listener and changes some models inside the handler function, you need to call $apply() to ensure the changes take effect. The big idea of $apply is that we can execute some code that isn't aware of Angular, that code may still change things on the scope. If we wrap that code in $apply , it will take care of calling $digest(). Rough implementation of $apply().</p>\n\n<pre><code>Scope.prototype.$apply = function(expr) {\n       try {\n         return this.$eval(expr); //Evaluating code in the context of Scope\n       } finally {\n         this.$digest();\n       }\n};\n</code></pre>\n", "title": "How does data binding work in AngularJS?", "answer_id": 37377921, "question_id": 9682092, "tags": ["javascript", "angularjs", "data-binding"]}, {"body": "<p>AngularJs supports <strong>Two way data-binding</strong>.<br>\nMeans you can access data <strong>View -> Controller</strong> &amp; <strong>Controller -> View</strong></p>\n\n<p><strong>For Ex.</strong></p>\n\n<p><strong>1)</strong></p>\n\n<pre><code>// If $scope have some value in Controller. \n$scope.name = \"Peter\";\n\n// HTML\n&lt;div&gt; {{ name }} &lt;/div&gt;\n</code></pre>\n\n<p><strong>O/P</strong></p>\n\n<pre><code>Peter\n</code></pre>\n\n<p>You can bind data in <code>ng-model</code> Like:-<br>\n<strong>2)</strong></p>\n\n<pre><code>&lt;input ng-model=\"name\" /&gt;\n\n&lt;div&gt; {{ name }} &lt;/div&gt;\n</code></pre>\n\n<p>Here in above example whatever input user will give, It will be visible in <code>&lt;div&gt;</code> tag.</p>\n\n<p>If want to bind input from html to controller:-<br>\n<strong>3)</strong></p>\n\n<pre><code>&lt;form name=\"myForm\" ng-submit=\"registration()\"&gt;\n   &lt;label&gt; Name &lt;/lbel&gt;\n   &lt;input ng-model=\"name\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Here if you want to use input <code>name</code> in the controller then,</p>\n\n<pre><code>$scope.name = {};\n\n$scope.registration = function() {\n   console.log(\"You will get the name here \", $scope.name);\n};\n</code></pre>\n\n<p><code>ng-model</code> binds our view and render it in expression <code>{{ }}</code>.<br>\n<code>ng-model</code> is the data which is shown to the user in the view and with which the user interacts.<br>\nSo it is easy to bind data in AngularJs.</p>\n", "title": "How does data binding work in AngularJS?", "answer_id": 39286804, "question_id": 9682092, "tags": ["javascript", "angularjs", "data-binding"]}], "link": "http://stackoverflow.com/questions/9682092/how-does-data-binding-work-in-angularjs", "question_id": 9682092}, {"body": "<p>When using lambda expressions or anonymous methods in C#, we have to be wary of the <em>access to modified closure</em> pitfall. For example:</p>\n\n<pre><code>foreach (var s in strings)\n{\n   query = query.Where(i =&gt; i.Prop == s); // access to modified closure\n   ...\n}\n</code></pre>\n\n<p>Due to the modified closure, the above code will cause all of the <code>Where</code> clauses on the query to be based on the final value of <code>s</code>.</p>\n\n<p>As explained <a href=\"http://resnikb.wordpress.com/2009/06/17/c-lambda-and-foreach-variable/\">here</a>, this happens because the <code>s</code> variable declared in <code>foreach</code> loop above is translated like this in the compiler:</p>\n\n<pre><code>string s;\nwhile (enumerator.MoveNext())\n{\n   s = enumerator.Current;\n   ...\n}\n</code></pre>\n\n<p>instead of like this:</p>\n\n<pre><code>while (enumerator.MoveNext())\n{\n   string s;\n   s = enumerator.Current;\n   ...\n}\n</code></pre>\n\n<p>As pointed out <a href=\"http://stackoverflow.com/a/2388644/120955\">here</a>, there are no performance advantages to declaring a variable outside the loop, and under normal circumstances the only reason I can think of for doing this is if you plan to use the variable outside the scope of the loop:</p>\n\n<pre><code>string s;\nwhile (enumerator.MoveNext())\n{\n   s = enumerator.Current;\n   ...\n}\nvar finalString = s;\n</code></pre>\n\n<p>However variables defined in a <code>foreach</code> loop cannot be used outside the loop:</p>\n\n<pre><code>foreach(string s in strings)\n{\n}\nvar finalString = s; // won't work: you're outside the scope.\n</code></pre>\n\n<p>So the compiler declares the variable in a way that makes it highly prone to an error that is often difficult to find and debug, while producing no perceivable benefits.</p>\n\n<p>Is there something you can do with <code>foreach</code> loops this way that you couldn't if they were compiled with an inner-scoped variable, or is this just an arbitrary choice that was made before anonymous methods and lambda expressions were available or common, and which hasn't been revised since then?</p>\n", "title": "Is there a reason for C#&#39;s reuse of the variable in a foreach?", "tags": ["c#", "foreach", "lambda", "scope", "anonymous-methods"], "answers": [{"body": "<p>What you are asking is thoroughly covered by Eric Lippert in his blog post <a href=\"http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx\">Closing over the loop variable considered harmful</a> and its sequel. </p>\n\n<p>For me, the most convincing argument is that having new variable in each iteration would be inconsistent with <code>for(;;)</code> style loop. Would you expect to have a new <code>int i</code> in each iteration of <code>for (int i = 0; i &lt; 10; i++)</code>?</p>\n\n<p>The most common problem with this behavior is making a closure over iteration variable and it has an easy workaround:</p>\n\n<pre><code>foreach (var s in strings)\n{\n    var s_for_closure = s;\n    query = query.Where(i =&gt; i.Prop == s_for_closure); // access to modified closure\n</code></pre>\n\n<p>My blog post about this issue: <a href=\"http://krizzcode.blogspot.com/2012/01/closure-over-foreach-variable-in-c.html\">Closure over foreach variable in C#</a>.</p>\n", "title": "Is there a reason for C#&#39;s reuse of the variable in a foreach?", "answer_id": 8899138, "question_id": 8898925, "tags": ["c#", "foreach", "lambda", "scope", "anonymous-methods"]}, {"body": "<p>Having been bitten by this, I have a habit of including locally defined variables in the innermost scope which I use to transfer to any closure. In your example:</p>\n\n<pre><code>foreach (var s in strings)\n{\n    query = query.Where(i =&gt; i.Prop == s); // access to modified closure\n</code></pre>\n\n<p>I do:</p>\n\n<pre><code>foreach (var s in strings)\n{\n    string search = s;\n    query = query.Where(i =&gt; i.Prop == search); // New definition ensures unique per iteration.\n</code></pre>\n\n<p>Once you have that habit, you can avoid it in the <em>very</em> rare case you actually intended to bind to the outer scopes. To be honest, I don't think I have ever done so.</p>\n", "title": "Is there a reason for C#&#39;s reuse of the variable in a foreach?", "answer_id": 8899234, "question_id": 8898925, "tags": ["c#", "foreach", "lambda", "scope", "anonymous-methods"]}, {"body": "<blockquote>\n  <p>The compiler declares the variable in a way that makes it highly prone to an error that is often difficult to find and debug, while producing no perceivable benefits.</p>\n</blockquote>\n\n<p>Your criticism is entirely justified.</p>\n\n<p>I discuss this problem in detail here:</p>\n\n<p><a href=\"http://ericlippert.com/2009/11/12/closing-over-the-loop-variable-considered-harmful-part-one/\">Closing over the loop variable considered harmful</a></p>\n\n<blockquote>\n  <p>Is there something you can do with foreach loops this way that you couldn't if they were compiled with an inner-scoped variable? or is this just an arbitrary choice that was made before anonymous methods and lambda expressions were available or common, and which hasn't been revised since then?</p>\n</blockquote>\n\n<p>The latter. The C# 1.0 specification actually did not say whether the loop variable was inside or outside the loop body, as it made no observable difference. When closure semantics were introduced in C# 2.0, the choice was made to put the loop variable outside the loop, consistent with the \"for\" loop.</p>\n\n<p>I think it is fair to say that all regret that decision. This is one of the worst \"gotchas\" in C#, and <strong>we are going to take the breaking change to fix it.</strong> In C# 5 the foreach loop variable will be logically <em>inside</em> the body of the loop, and therefore closures will get a fresh copy every time.</p>\n\n<p>The <code>for</code> loop will not be changed, and the change will not be \"back ported\" to previous versions of C#. You should therefore continue to be careful when using this idiom.</p>\n", "title": "Is there a reason for C#&#39;s reuse of the variable in a foreach?", "answer_id": 8899347, "question_id": 8898925, "tags": ["c#", "foreach", "lambda", "scope", "anonymous-methods"]}, {"body": "<p>In C# 5.0, this problem is fixed and you can close over loop variables and get the results you expect.</p>\n\n<p>The language specification says:</p>\n\n<blockquote>\n  <h2>8.8.4 The foreach statement</h2>\n  \n  <p>(...)</p>\n  \n  <p>A foreach statement of the form</p>\n\n<pre><code>foreach (V v in x) embedded-statement\n</code></pre>\n  \n  <p>is then expanded to:</p>\n\n<pre><code>{\n  E e = ((C)(x)).GetEnumerator();\n  try {\n      while (e.MoveNext()) {\n          V v = (V)(T)e.Current;\n          embedded-statement\n      }\n  }\n  finally {\n      \u2026 // Dispose e\n  }\n}\n</code></pre>\n  \n  <p>(...)</p>\n  \n  <p>The placement of <code>v</code> inside the while loop is important for how it is\n  captured by any anonymous function occurring in the\n  embedded-statement. For example:</p>\n\n<pre><code>int[] values = { 7, 9, 13 };\nAction f = null;\nforeach (var value in values)\n{\n    if (f == null) f = () =&gt; Console.WriteLine(\"First value: \" + value);\n}\nf();\n</code></pre>\n  \n  <p>If <code>v</code> was declared outside of the while loop, it would be shared\n  among all iterations, and its value after the for loop would be the\n  final value, <code>13</code>, which is what the invocation of <code>f</code> would print.\n  Instead, because each iteration has its own variable <code>v</code>, the one\n  captured by <code>f</code> in the first iteration will continue to hold the value\n  <code>7</code>, which is what will be printed. (<strong>Note: earlier versions of C#\n  declared <code>v</code> outside of the while loop.</strong>)</p>\n</blockquote>\n", "title": "Is there a reason for C#&#39;s reuse of the variable in a foreach?", "answer_id": 12249317, "question_id": 8898925, "tags": ["c#", "foreach", "lambda", "scope", "anonymous-methods"]}], "link": "http://stackoverflow.com/questions/8898925/is-there-a-reason-for-cs-reuse-of-the-variable-in-a-foreach", "question_id": 8898925}, {"body": "<p>Why does this bit of code,</p>\n\n<pre><code>const float x[16] = {  1.1,   1.2,   1.3,     1.4,   1.5,   1.6,   1.7,   1.8,\n                       1.9,   2.0,   2.1,     2.2,   2.3,   2.4,   2.5,   2.6};\nconst float z[16] = {1.123, 1.234, 1.345, 156.467, 1.578, 1.689, 1.790, 1.812,\n                     1.923, 2.034, 2.145,   2.256, 2.367, 2.478, 2.589, 2.690};\nfloat y[16];\nfor (int i = 0; i &lt; 16; i++)\n{\n    y[i] = x[i];\n}\n\nfor (int j = 0; j &lt; 9000000; j++)\n{\n    for (int i = 0; i &lt; 16; i++)\n    {\n        y[i] *= x[i];\n        y[i] /= z[i];\n        y[i] = y[i] + 0.1f; // &lt;--\n        y[i] = y[i] - 0.1f; // &lt;--\n    }\n}\n</code></pre>\n\n<p>run more than 10 times faster than the following bit (identical except where noted)?</p>\n\n<pre><code>const float x[16] = {  1.1,   1.2,   1.3,     1.4,   1.5,   1.6,   1.7,   1.8,\n                       1.9,   2.0,   2.1,     2.2,   2.3,   2.4,   2.5,   2.6};\nconst float z[16] = {1.123, 1.234, 1.345, 156.467, 1.578, 1.689, 1.790, 1.812,\n                     1.923, 2.034, 2.145,   2.256, 2.367, 2.478, 2.589, 2.690};\nfloat y[16];\nfor (int i = 0; i &lt; 16; i++)\n{\n    y[i] = x[i];\n}\n\nfor (int j = 0; j &lt; 9000000; j++)\n{\n    for (int i = 0; i &lt; 16; i++)\n    {\n        y[i] *= x[i];\n        y[i] /= z[i];\n        y[i] = y[i] + 0; // &lt;--\n        y[i] = y[i] - 0; // &lt;--\n    }\n}\n</code></pre>\n\n<p>when compiling with Visual Studio 2010 SP1. (I haven't tested with other compilers.)</p>\n", "title": "Why does changing 0.1f to 0 slow down performance by 10x?", "tags": ["c++", "performance", "visual-studio-2010", "compilation", "floating-point"], "answers": [{"body": "<p>Using <code>gcc</code> and applying a diff to the generated assembly yields only this difference:</p>\n\n<pre><code>73c68,69\n&lt;   movss   LCPI1_0(%rip), %xmm1\n---\n&gt;   movabsq $0, %rcx\n&gt;   cvtsi2ssq   %rcx, %xmm1\n81d76\n&lt;   subss   %xmm1, %xmm0\n</code></pre>\n\n<p>The <code>cvtsi2ssq</code> one being 10 times slower indeed.</p>\n\n<p>Apparently, the <code>float</code> version uses an <a href=\"http://en.wikipedia.org/wiki/Streaming_SIMD_Extensions#Registers\">XMM</a> register loaded from memory, while the <code>int</code> version converts a real <code>int</code> value 0 to <code>float</code> using the <code>cvtsi2ssq</code> instruction, taking a lot of time. Passing <code>-O3</code> to gcc doesn't help. (gcc version 4.2.1.)</p>\n\n<p>(Using <code>double</code> instead of <code>float</code> doesn't matter, except that it changes the <code>cvtsi2ssq</code> into a <code>cvtsi2sdq</code>.)</p>\n\n<p><strong>Update</strong> </p>\n\n<p>Some extra tests show that it is not necessarily the <code>cvtsi2ssq</code> instruction. Once eliminated (using a <code>int ai=0;float a=ai;</code> and using <code>a</code> instead of <code>0</code>), the speed difference remains. So @Mysticial is right, the denormalized floats make the difference. This can be seen by testing values between <code>0</code> and <code>0.1f</code>. The turning point in the above code is approximately at <code>0.00000000000000000000000000000001</code>, when the loops suddenly takes 10 times as long.</p>\n\n<p><strong>Update&lt;&lt;1</strong> </p>\n\n<p>A small visualisation of this interesting phenomenon:</p>\n\n<ul>\n<li>Column 1: a float, divided by 2 for every iteration</li>\n<li>Column 2: the binary representation of this float</li>\n<li>Column 3: the time taken to sum this float 1e7 times</li>\n</ul>\n\n<p>You can clearly see the exponent (the last 9 bits) change to its lowest value, when denormalization sets in. At that point, simple addition becomes 20 times slower.</p>\n\n<pre><code>0.000000000000000000000000000000000100000004670110: 10111100001101110010000011100000 45 ms\n0.000000000000000000000000000000000050000002335055: 10111100001101110010000101100000 43 ms\n0.000000000000000000000000000000000025000001167528: 10111100001101110010000001100000 43 ms\n0.000000000000000000000000000000000012500000583764: 10111100001101110010000110100000 42 ms\n0.000000000000000000000000000000000006250000291882: 10111100001101110010000010100000 48 ms\n0.000000000000000000000000000000000003125000145941: 10111100001101110010000100100000 43 ms\n0.000000000000000000000000000000000001562500072970: 10111100001101110010000000100000 42 ms\n0.000000000000000000000000000000000000781250036485: 10111100001101110010000111000000 42 ms\n0.000000000000000000000000000000000000390625018243: 10111100001101110010000011000000 42 ms\n0.000000000000000000000000000000000000195312509121: 10111100001101110010000101000000 43 ms\n0.000000000000000000000000000000000000097656254561: 10111100001101110010000001000000 42 ms\n0.000000000000000000000000000000000000048828127280: 10111100001101110010000110000000 44 ms\n0.000000000000000000000000000000000000024414063640: 10111100001101110010000010000000 42 ms\n0.000000000000000000000000000000000000012207031820: 10111100001101110010000100000000 42 ms\n0.000000000000000000000000000000000000006103515209: 01111000011011100100001000000000 789 ms\n0.000000000000000000000000000000000000003051757605: 11110000110111001000010000000000 788 ms\n0.000000000000000000000000000000000000001525879503: 00010001101110010000100000000000 788 ms\n0.000000000000000000000000000000000000000762939751: 00100011011100100001000000000000 795 ms\n0.000000000000000000000000000000000000000381469876: 01000110111001000010000000000000 896 ms\n0.000000000000000000000000000000000000000190734938: 10001101110010000100000000000000 813 ms\n0.000000000000000000000000000000000000000095366768: 00011011100100001000000000000000 798 ms\n0.000000000000000000000000000000000000000047683384: 00110111001000010000000000000000 791 ms\n0.000000000000000000000000000000000000000023841692: 01101110010000100000000000000000 802 ms\n0.000000000000000000000000000000000000000011920846: 11011100100001000000000000000000 809 ms\n0.000000000000000000000000000000000000000005961124: 01111001000010000000000000000000 795 ms\n0.000000000000000000000000000000000000000002980562: 11110010000100000000000000000000 835 ms\n0.000000000000000000000000000000000000000001490982: 00010100001000000000000000000000 864 ms\n0.000000000000000000000000000000000000000000745491: 00101000010000000000000000000000 915 ms\n0.000000000000000000000000000000000000000000372745: 01010000100000000000000000000000 918 ms\n0.000000000000000000000000000000000000000000186373: 10100001000000000000000000000000 881 ms\n0.000000000000000000000000000000000000000000092486: 01000010000000000000000000000000 857 ms\n0.000000000000000000000000000000000000000000046243: 10000100000000000000000000000000 861 ms\n0.000000000000000000000000000000000000000000022421: 00001000000000000000000000000000 855 ms\n0.000000000000000000000000000000000000000000011210: 00010000000000000000000000000000 887 ms\n0.000000000000000000000000000000000000000000005605: 00100000000000000000000000000000 799 ms\n0.000000000000000000000000000000000000000000002803: 01000000000000000000000000000000 828 ms\n0.000000000000000000000000000000000000000000001401: 10000000000000000000000000000000 815 ms\n0.000000000000000000000000000000000000000000000000: 00000000000000000000000000000000 42 ms\n0.000000000000000000000000000000000000000000000000: 00000000000000000000000000000000 42 ms\n0.000000000000000000000000000000000000000000000000: 00000000000000000000000000000000 44 ms\n</code></pre>\n\n<p>An equivalent discussion about ARM can be found in Stack&nbsp;Overflow question <em><a href=\"http://stackoverflow.com/questions/9350810/denormalized-floating-point-in-objective-c/9350820#9350820\">Denormalized floating point in Objective-C?</a></em>.</p>\n", "title": "Why does changing 0.1f to 0 slow down performance by 10x?", "answer_id": 9314913, "question_id": 9314534, "tags": ["c++", "performance", "visual-studio-2010", "compilation", "floating-point"]}, {"body": "<p><strong>Welcome to the world of <a href=\"http://en.wikipedia.org/wiki/Denormal_number\">denormalized floating-point</a>!</strong> They can wreak havoc on performance!!!</p>\n\n<p>Denormal (or subnormal) numbers are kind of a hack to get some extra values very close to zero out of the floating point representation. Operations on denormalized floating-point can be <strong><em>tens to hundreds of times slower</em></strong> than on normalized floating-point. This is because many processors can't handle them directly and must trap and resolve them using microcode.</p>\n\n<p>If you print out the numbers after 10,000 iterations, you will see that they have converged to different values depending on whether <code>0</code> or <code>0.1</code> is used.</p>\n\n<p>Here's the test code compiled on x64:</p>\n\n<pre><code>int main() {\n\n    double start = omp_get_wtime();\n\n    const float x[16]={1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,2.0,2.1,2.2,2.3,2.4,2.5,2.6};\n    const float z[16]={1.123,1.234,1.345,156.467,1.578,1.689,1.790,1.812,1.923,2.034,2.145,2.256,2.367,2.478,2.589,2.690};\n    float y[16];\n    for(int i=0;i&lt;16;i++)\n    {\n        y[i]=x[i];\n    }\n    for(int j=0;j&lt;9000000;j++)\n    {\n        for(int i=0;i&lt;16;i++)\n        {\n            y[i]*=x[i];\n            y[i]/=z[i];\n#ifdef FLOATING\n            y[i]=y[i]+0.1f;\n            y[i]=y[i]-0.1f;\n#else\n            y[i]=y[i]+0;\n            y[i]=y[i]-0;\n#endif\n\n            if (j &gt; 10000)\n                cout &lt;&lt; y[i] &lt;&lt; \"  \";\n        }\n        if (j &gt; 10000)\n            cout &lt;&lt; endl;\n    }\n\n    double end = omp_get_wtime();\n    cout &lt;&lt; end - start &lt;&lt; endl;\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>#define FLOATING\n1.78814e-007  1.3411e-007  1.04308e-007  0  7.45058e-008  6.70552e-008  6.70552e-008  5.58794e-007  3.05474e-007  2.16067e-007  1.71363e-007  1.49012e-007  1.2666e-007  1.11759e-007  1.04308e-007  1.04308e-007\n1.78814e-007  1.3411e-007  1.04308e-007  0  7.45058e-008  6.70552e-008  6.70552e-008  5.58794e-007  3.05474e-007  2.16067e-007  1.71363e-007  1.49012e-007  1.2666e-007  1.11759e-007  1.04308e-007  1.04308e-007\n\n//#define FLOATING\n6.30584e-044  3.92364e-044  3.08286e-044  0  1.82169e-044  1.54143e-044  2.10195e-044  2.46842e-029  7.56701e-044  4.06377e-044  3.92364e-044  3.22299e-044  3.08286e-044  2.66247e-044  2.66247e-044  2.24208e-044\n6.30584e-044  3.92364e-044  3.08286e-044  0  1.82169e-044  1.54143e-044  2.10195e-044  2.45208e-029  7.56701e-044  4.06377e-044  3.92364e-044  3.22299e-044  3.08286e-044  2.66247e-044  2.66247e-044  2.24208e-044\n</code></pre>\n\n<p>Note how in the second run the numbers are very close to zero.</p>\n\n<p>Denormalized numbers are generally rare and thus most processors don't try to handle them efficiently.</p>\n\n<hr>\n\n<p>To demonstrate that this has everything to do with denormalized numbers, if we <strong>flush denormals to zero</strong> by adding this to the start of the code:</p>\n\n<pre><code>_MM_SET_FLUSH_ZERO_MODE(_MM_FLUSH_ZERO_ON);\n</code></pre>\n\n<p>Then the version with <code>0</code> is no longer 10x slower and actually becomes faster. (This requires that the code be compiled with SSE enabled.)</p>\n\n<p>This means that rather than using these weird lower precision almost-zero values, we just round to zero instead.</p>\n\n<p><strong>Timings: Core i7 920 @ 3.5 GHz:</strong></p>\n\n<pre><code>//  Don't flush denormals to zero.\n0.1f: 0.564067\n0   : 26.7669\n\n//  Flush denormals to zero.\n0.1f: 0.587117\n0   : 0.341406\n</code></pre>\n\n<p>In the end, this really has nothing to do with whether it's an integer or floating-point. The <code>0</code> or <code>0.1f</code> is converted/stored into a register outside of both loops. So that has no effect on performance.</p>\n", "title": "Why does changing 0.1f to 0 slow down performance by 10x?", "answer_id": 9314926, "question_id": 9314534, "tags": ["c++", "performance", "visual-studio-2010", "compilation", "floating-point"]}, {"body": "<p>In gcc you can enable FTZ and DAZ with this:</p>\n\n<pre><code>#include &lt;xmmintrin.h&gt;\n\n#define FTZ 1\n#define DAZ 1   \n\nvoid enableFtzDaz()\n{\n    int mxcsr = _mm_getcsr ();\n\n    if (FTZ) {\n            mxcsr |= (1&lt;&lt;15) | (1&lt;&lt;11);\n    }\n\n    if (DAZ) {\n            mxcsr |= (1&lt;&lt;6);\n    }\n\n    _mm_setcsr (mxcsr);\n}\n</code></pre>\n\n<p>also use gcc switches: -msse -mfpmath=sse</p>\n\n<p>(corresponding credits to Carl Hetherington [1])</p>\n\n<p>[1] <a href=\"http://carlh.net/plugins/denormals.php\">http://carlh.net/plugins/denormals.php</a></p>\n", "title": "Why does changing 0.1f to 0 slow down performance by 10x?", "answer_id": 12684625, "question_id": 9314534, "tags": ["c++", "performance", "visual-studio-2010", "compilation", "floating-point"]}, {"body": "<p>It's due to denormalized floating-point use. How to get rid of both it and the performance penalty? Having scoured the Internet for ways of killing denormal numbers, it seems there is no \"best\" way to do this yet. I have found these three methods that may work best in different environments:</p>\n\n<ul>\n<li><p>Might not work in some GCC environments:</p>\n\n<pre><code>// Requires #include &lt;fenv.h&gt;\nfesetenv(FE_DFL_DISABLE_SSE_DENORMS_ENV);\n</code></pre></li>\n<li><p>Might not work in some Visual Studio environments: <a href=\"http://carlh.net/plugins/denormals.php\">1</a></p>\n\n<pre><code>// Requires #include &lt;xmmintrin.h&gt;\n_mm_setcsr( _mm_getcsr() | (1&lt;&lt;15) | (1&lt;&lt;6) );\n// Does both FTZ and DAZ bits. You can also use just hex value 0x8040 to do both.\n// You might also want to use the underflow mask (1&lt;&lt;11)\n</code></pre></li>\n<li><p>Appears to work in both GCC and Visual Studio:</p>\n\n<pre><code>// Requires #include &lt;xmmintrin.h&gt;\n// Requires #include &lt;pmmintrin.h&gt;\n_MM_SET_FLUSH_ZERO_MODE(_MM_FLUSH_ZERO_ON);\n_MM_SET_DENORMALS_ZERO_MODE(_MM_DENORMALS_ZERO_ON);\n</code></pre></li>\n<li><p>The Intel compiler has options to disable denormals by default on modern Intel CPUs. <a href=\"http://software.intel.com/sites/products/documentation/doclib/iss/2013/compiler/cpp-lin/GUID-1659EAE1-583E-44EE-BDEA-7C68C46061C7.htm\">More details here</a></p></li>\n<li><p>Compiler switches. <code>-ffast-math</code>, <code>-msse</code> or <code>-mfpmath=sse</code> will disable denormals and make a few other things faster, but unfortunately also do lots of other approximations that might break your code. Test carefully! The equivalent of fast-math for the Visual Studio compiler is <code>/fp:fast</code> but I haven't been able to confirm whether this also disables denormals.<a href=\"http://carlh.net/plugins/denormals.php\">1</a></p></li>\n</ul>\n", "title": "Why does changing 0.1f to 0 slow down performance by 10x?", "answer_id": 22041085, "question_id": 9314534, "tags": ["c++", "performance", "visual-studio-2010", "compilation", "floating-point"]}], "link": "http://stackoverflow.com/questions/9314534/why-does-changing-0-1f-to-0-slow-down-performance-by-10x", "question_id": 9314534}, {"body": "<p>Let me prefix this by saying that I know what <code>foreach</code> is, does and how to use it. This question concerns how it works under the bonnet, and I don't want any answers along the lines of \"this is how you loop an array with <code>foreach</code>\".</p>\n\n<hr>\n\n<p>For a long time I assumed that <code>foreach</code> worked with the array itself. Then I found many references to the fact that it works with a <em>copy</em> of the array, and I have since assumed this to be the end of the story. But I recently got into a discussion on the matter, and after a little experimentation found that this was not in fact 100% true.</p>\n\n<p>Let me show what I mean. For the following test cases, we will be working with the following array:</p>\n\n<pre><code>$array = array(1, 2, 3, 4, 5);\n</code></pre>\n\n<p><a href=\"http://codepad.org/7DIeObk9\">Test case 1</a>:</p>\n\n<pre><code>foreach ($array as $item) {\n  echo \"$item\\n\";\n  $array[] = $item;\n}\nprint_r($array);\n\n/* Output in loop:    1 2 3 4 5\n   $array after loop: 1 2 3 4 5 1 2 3 4 5 */\n</code></pre>\n\n<p>This clearly shows that we are not working directly with the source array - otherwise the loop would continue forever, since we are constantly pushing items onto the array during the loop. But just to be sure this is the case:</p>\n\n<p><a href=\"http://codepad.org/nirz6Ufh\">Test case 2</a>:</p>\n\n<pre><code>foreach ($array as $key =&gt; $item) {\n  $array[$key + 1] = $item + 2;\n  echo \"$item\\n\";\n}\n\nprint_r($array);\n\n/* Output in loop:    1 2 3 4 5\n   $array after loop: 1 3 4 5 6 7 */\n</code></pre>\n\n<p>This backs up our initial conclusion, we are working with a copy of the source array during the loop, otherwise we would see the modified values during the loop. <em>But...</em></p>\n\n<p>If we look in the <a href=\"http://php.net/manual/en/control-structures.foreach.php\">manual</a>, we find this statement:</p>\n\n<blockquote>\n  <p>When foreach first starts executing, the internal array pointer is automatically reset to the first element of the array.</p>\n</blockquote>\n\n<p>Right... this seems to suggest that <code>foreach</code> relies on the array pointer of the source array. But we've just proved that we're <em>not working with the source array</em>, right? Well, not entirely.</p>\n\n<p><a href=\"http://codepad.org/6n20ooMy\">Test case 3</a>:</p>\n\n<pre><code>// Move the array pointer on one to make sure it doesn't affect the loop\nvar_dump(each($array));\n\nforeach ($array as $item) {\n  echo \"$item\\n\";\n}\n\nvar_dump(each($array));\n\n/* Output\n  array(4) {\n    [1]=&gt;\n    int(1)\n    [\"value\"]=&gt;\n    int(1)\n    [0]=&gt;\n    int(0)\n    [\"key\"]=&gt;\n    int(0)\n  }\n  1\n  2\n  3\n  4\n  5\n  bool(false)\n*/\n</code></pre>\n\n<p>So, despite the fact that we are not working directly with the source array, we are working directly with the source array pointer - the fact that the pointer is at the end of the array at the end of the loop shows this. Except this can't be true - if it was, then <a href=\"http://codepad.org/7DIeObk9\">test case 1</a> would loop forever.</p>\n\n<p>The PHP manual also states:</p>\n\n<blockquote>\n  <p>As foreach relies on the internal array pointer changing it within the loop may lead to unexpected behavior.</p>\n</blockquote>\n\n<p>Well, let's find out what that \"unexpected behavior\" is (technically, any behavior is unexpected since I no longer know what to expect).</p>\n\n<p><a href=\"http://codepad.org/JJp79xSd\">Test case 4</a>:</p>\n\n<pre><code>foreach ($array as $key =&gt; $item) {\n  echo \"$item\\n\";\n  each($array);\n}\n\n/* Output: 1 2 3 4 5 */\n</code></pre>\n\n<p><a href=\"http://codepad.org/IfwJyTCL\">Test case 5</a>:</p>\n\n<pre><code>foreach ($array as $key =&gt; $item) {\n  echo \"$item\\n\";\n  reset($array);\n}\n\n/* Output: 1 2 3 4 5 */\n</code></pre>\n\n<p>...nothing that unexpected there, in fact it seems to support the \"copy of source\" theory.</p>\n\n<hr>\n\n<p><strong>The Question</strong></p>\n\n<p>What is going on here? My C-fu is not good enough for me to able to extract a proper conclusion simply by looking at the PHP source code, I would appreciate it if someone could translate it into English for me.</p>\n\n<p>It seems to me that <code>foreach</code> works with a <em>copy</em> of the array, but sets the array pointer of the source array to the end of the array after the loop.</p>\n\n<ul>\n<li>Is this correct and the whole story?</li>\n<li>If not, what is it really doing?</li>\n<li>Is there any situation where using functions that adjust the array pointer (<code>each()</code>, <code>reset()</code> et al.) during a <code>foreach</code> could affect the outcome of the loop?</li>\n</ul>\n", "title": "How does &#39;foreach&#39; actually work?", "tags": ["php", "loops", "foreach", "iteration", "php-internals"], "answers": [{"body": "<p>In example 3 you don't modify the array. In all other examples you modify either the contents or the internal array pointer. This is important when it comes to <a href=\"http://en.wikipedia.org/wiki/PHP\">PHP</a> arrays because of the semantics of the assignment operator.</p>\n\n<p>The assignment operator for the arrays in PHP works more like a lazy clone. Assigning one variable to another that contains an array will clone the array, unlike most languages. However, the actual cloning will not be done unless it is needed. This means that the clone will take place only when either of the variables is modified (copy-on-write).</p>\n\n<p>Here is an example:</p>\n\n<pre><code>$a = array(1,2,3);\n$b = $a;  // This is lazy cloning of $a. For the time\n          // being $a and $b point to the same internal\n          // data structure.\n\n$a[] = 3; // Here $a changes, which triggers the actual\n          // cloning. From now on, $a and $b are two\n          // different data structures. The same would\n          // happen if there were a change in $b.\n</code></pre>\n\n<p>Coming back to your test cases, you can easily imagine that <code>foreach</code> creates some kind of iterator with a reference to the array. This reference works exactly like the variable <code>$b</code> in my example. However, the iterator along with the reference live only during the loop and then, they are both discarded. Now you can see that, in all cases but 3, the array is modified during the loop, while this extra reference is alive. This triggers a clone, and that explains what's going on here!</p>\n\n<p>Here is an excellent article for another side effect of this copy-on-write behaviour: <a href=\"http://fabien.potencier.org/article/48/the-php-ternary-operator-fast-or-not\">The PHP Ternary Operator: Fast or not?</a></p>\n", "title": "How does &#39;foreach&#39; actually work?", "answer_id": 10058215, "question_id": 10057671, "tags": ["php", "loops", "foreach", "iteration", "php-internals"]}, {"body": "<p>Some points to note when working with <code>foreach()</code>:</p>\n\n<p>a) <code>foreach</code> works on the <strong>prospected copy</strong> of the original array.\n    It means foreach() will have SHARED data storage until or unless a <code>prospected copy</code> is\n    not created <a href=\"http://php.net/manual/en/control-structures.foreach.php\">foreach Notes/User comments</a>.</p>\n\n<p>b) What triggers a <strong>prospected copy</strong>?\n    Prospected copy is created based on the policy of <code>copy-on-write</code>, that is, whenever\n    an array passed to foreach() is changed, a clone of original array is created.</p>\n\n<p>c) The original array and foreach() iterator will have <code>DISTINCT SENTINEL VARIABLES</code>, that is, one for the original array and other for foreach; see the test code below. <a href=\"http://php.net/manual/en/book.spl.php\">SPL</a> , <a href=\"http://www.php.net/manual/en/spl.iterators.php\">Iterators</a>, and <a href=\"http://www.php.net/manual/en/class.arrayiterator.php\">Array Iterator</a>.</p>\n\n<p>Stack&nbsp;Overflow question <em><a href=\"http://stackoverflow.com/questions/2728709\">How to make sure the value is reset in a 'foreach' loop in PHP?</a></em> addresses the  cases (3,4,5) of your question.</p>\n\n<p>The following example show that each() and reset() DOES NOT affect <code>SENTINEL</code> variables\n<code>(for example, the current index variable)</code> of the foreach() iterator.</p>\n\n<pre><code>$array = array(1, 2, 3, 4, 5);\n\nlist($key2, $val2) = each($array);\necho \"each() Original (outside): $key2 =&gt; $val2&lt;br/&gt;\";\n\nforeach($array as $key =&gt; $val){\n    echo \"foreach: $key =&gt; $val&lt;br/&gt;\";\n\n    list($key2,$val2) = each($array);\n    echo \"each() Original(inside): $key2 =&gt; $val2&lt;br/&gt;\";\n\n    echo \"--------Iteration--------&lt;br/&gt;\";\n    if ($key == 3){\n        echo \"Resetting original array pointer&lt;br/&gt;\";\n        reset($array);\n    }\n}\n\nlist($key2, $val2) = each($array);\necho \"each() Original (outside): $key2 =&gt; $val2&lt;br/&gt;\";\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>each() Original (outside): 0 =&gt; 1\nforeach: 0 =&gt; 1\neach() Original(inside): 1 =&gt; 2\n--------Iteration--------\nforeach: 1 =&gt; 2\neach() Original(inside): 2 =&gt; 3\n--------Iteration--------\nforeach: 2 =&gt; 3\neach() Original(inside): 3 =&gt; 4\n--------Iteration--------\nforeach: 3 =&gt; 4\neach() Original(inside): 4 =&gt; 5\n--------Iteration--------\nResetting original array pointer\nforeach: 4 =&gt; 5\neach() Original(inside): 0=&gt;1\n--------Iteration--------\neach() Original (outside): 1 =&gt; 2\n</code></pre>\n", "title": "How does &#39;foreach&#39; actually work?", "answer_id": 10058358, "question_id": 10057671, "tags": ["php", "loops", "foreach", "iteration", "php-internals"]}, {"body": "<p><code>foreach</code> supports iteration over three different kinds of values:</p>\n\n<ul>\n<li>Arrays</li>\n<li>Normal objects</li>\n<li><a href=\"http://php.net/Traversable\"><code>Traversable</code></a> objects</li>\n</ul>\n\n<p>In the following I will try to explain precisely how iteration works in the different cases. By far the simplest case are <code>Traversable</code> objects, as for these <code>foreach</code> is essentially only syntax sugar for code along these lines:</p>\n\n<pre><code>foreach ($it as $k =&gt; $v) { /* ... */ }\n\n/* translates to: */\n\nif ($it instanceof IteratorAggregate) {\n    $it = $it-&gt;getIterator();\n}\nfor ($it-&gt;rewind(); $it-&gt;valid(); $it-&gt;next()) {\n    $v = $it-&gt;current();\n    $k = $it-&gt;key();\n    /* ... */\n}\n</code></pre>\n\n<p>For internal classes actual method calls are avoided by using an internal API that essentially just mirrors the <code>Iterator</code> interface on the C level.</p>\n\n<p>Iteration of arrays and plain objects is significantly more complicated. First of all, it should be noted that in PHP \"arrays\" are really ordered dictionaries and they will be traversed according to this order (which matches the insertion order as long as you didn't use something like <code>sort</code>). This is opposed to iterating by the natural order of the keys (how lists in other languages often work) or having no defined order at all (how dictionaries in other languages often work).</p>\n\n<p>The same also applies to objects, as the object properties can be seen as another (ordered) dictionary mapping property names to their values, plus some visibility handling. In the majority of cases the object properties are not actually stored in this rather inefficient way. However if you start iterating over an object, the packed representation that is normally used will be converted to a real dictionary. At that point, iteration of plain objects becomes very similar to iteration of arrays (which is why I'm not discussing plain-object iteration much in here).</p>\n\n<p>So far, so good. Iterating over a dictionary can't be too hard, right? The problems begin when you realize that an array/object can change during iteration. There are multiple ways this can happen:</p>\n\n<ul>\n<li>If you iterate by reference using <code>foreach ($arr as &amp;$v)</code> then <code>$arr</code> is turned into a reference and you can change it during iteration.</li>\n<li>In PHP 5 the same applies even if you iterate by value, but the array was a reference beforehand: <code>$ref =&amp; $arr; foreach ($ref as $v)</code></li>\n<li>Objects have by-handle passing semantics, which for must practical purposes means that they behave like references. So objects can always be changed during iteration.</li>\n</ul>\n\n<p>The problem with allowing modifications during iteration is the case where the element you are currently on is removed. Say you use a pointer to keep track of which array element you are currently at. If this element is now freed, you are left with a dangling pointer (usually resulting in a segfault).</p>\n\n<p>There are different ways of solving this issue. PHP 5 and PHP 7 differ significantly in this regard and I'll describe both behaviors in the following. The summary is that PHP 5's approach was rather dumb and lead to all kinds of weird edge-case issues, while PHP 7's more involved approach results in more predictable and consistent behavior.</p>\n\n<p>As a last preliminary, it should be noted that PHP uses reference counting and copy-on-write to manage memory. This means that if you \"copy\" a value, you actually just reuse the old value and increment its reference count (refcount). Only once you perform some kind of modification a real copy (called a \"duplication\") will be done. See <a href=\"http://blog.golemon.com/2007/01/youre-being-lied-to.html\">You're being lied to</a> for a more extensive introduction on this topic.</p>\n\n<h2>PHP 5</h2>\n\n<h3>Internal array pointer and HashPointer</h3>\n\n<p>Arrays in PHP 5 have one dedicated \"internal array pointer\" (IAP), which properly supports modifications: Whenever an element is removed, there will be a check whether the IAP points to this element. If it does, it is advanced to the next element instead.</p>\n\n<p>While foreach does make use of the IAP, there is an additional complication: There is only one IAP, but one array can be be part of multiple foreach loops:</p>\n\n<pre><code>// Using by-ref iteration here to make sure that it's really\n// the same array in both loops and not a copy\nforeach ($arr as &amp;$v1) {\n    foreach ($arr as &amp;$v) {\n        // ...\n    }\n}\n</code></pre>\n\n<p>To support two simultaneous loops with only one internal array pointer, foreach performs the following schenanigans: Before the loop body is executed, foreach will back up a pointer to the current element and its hash into a per-foreach <code>HashPointer</code>. After the loop body runs, the IAP will be set back to this element if it still exists. If however the element has been removed, we'll just use whereever the IAP is currently at. This scheme mostly-kinda-sortof works, but there's a lot of weird behavior you can get out of it, some of which I'll demonstrate below.</p>\n\n<h3>Array duplication</h3>\n\n<p>The IAP is a visible feature of an array (exposed through the <code>current</code> family of functions), as such changes to the IAP count as modifications under copy-on-write semantics. This unfortunately means that foreach is in many cases forced to duplicate the array it is iterating over. The precise conditions are:</p>\n\n<ol>\n<li>The array is not a reference (is_ref=0). If it's a reference, then changes to it are <em>supposed</em> to propagate, so it should not be duplicated.</li>\n<li>The array has refcount>1. If refcount is 1, then the array is not shared and we're free to modify it directly.</li>\n</ol>\n\n<p>If the array is not duplicated (is_ref=0, refcount=1), then only its refcount will be incremented (*). Additionally, if foreach by reference is used, then the (potentially duplicated) array will be turned into a reference.</p>\n\n<p>Consider this code as an example where duplication occurs:</p>\n\n<pre><code>function iterate($arr) {\n    foreach ($arr as $v) {}\n}\n\n$outerArr = [0, 1, 2, 3, 4];\niterate($arr);\n</code></pre>\n\n<p>Here, <code>$arr</code> will be duplicated to prevent IAP changes on <code>$arr</code> from leaking to <code>$outerArr</code>. In terms of the conditions above, the array is not a reference (is_ref=0) and is used in two places (refcount=2). This requirement is unfortunate and an artifact of the suboptimal implementation (there is no concern of modification during iteration here, so we don't really need to use the IAP in the first place).</p>\n\n<p>(*) Incrementing the refcount here sounds innocuous, but violates copy-on-write (COW) semantics: This means that we are going to modify the IAP of a refcount=2 array, while COW dictates that modifications can only be performed on refcount=1 values. This violation results in user-visible behavior change (while COW is normally transparent), because the IAP change on the iterated array will be observable -- but only until the first non-IAP modification on the array. Instead, the three \"valid\" options would have been a) to always duplicate, b) to not increment the refcount and thus allowing the iterated array to be arbitrarily modified in the loop, or c) don't use the IAP at all (the PHP 7 solution).</p>\n\n<h3>Position advancement order</h3>\n\n<p>There is one last implementation detail that you have to be aware of to properly understand the code samples below. The \"normal\" way of looping through some data structure would look something like this in pseudocode:</p>\n\n<pre><code>reset(arr);\nwhile (get_current_data(arr, &amp;data) == SUCCESS) {\n    code();\n    move_forward(arr);\n}\n</code></pre>\n\n<p>However <code>foreach</code>, being a rather special snowflake, chooses to do things slightly differently:</p>\n\n<pre><code>reset(arr);\nwhile (get_current_data(arr, &amp;data) == SUCCESS) {\n    move_forward(arr);\n    code();\n}\n</code></pre>\n\n<p>Namely, the array pointer is already moved forward <em>before</em> the loop body runs. This means that while the loop body is working on element <code>$i</code>, the IAP is already at element <code>$i+1</code>. This is the reason why code samples showing modification during iteration will always unset the <em>next</em> element, rather than the current one.</p>\n\n<h3>Examples: Your test cases</h3>\n\n<p>The three aspects described above should provide you with a mostly complete impression of the idiosyncracies of the foreach implementation and we can move on to discussing some examples. </p>\n\n<p>The behavior of your test cases is simple to explain at this point:</p>\n\n<ul>\n<li><p>In test cases 1 and 2 <code>$array</code> starts off with refcount=1, so it will not be duplicated by foreach: Only the refcount is incremented. When the loop body subsequently modifies the array (which has refcount=2 at that point), the duplication will occur at that point. Foreach will continue working on an unmodified copy of <code>$array</code>.</p></li>\n<li><p>In test case 3, once again the array is not duplicated, thus foreach will be modifying the IAP of the <code>$array</code> variable. At the end of the iteration the IAP is NULL (meaning iteration done), which <code>each</code> indicates by returning <code>false</code>.</p></li>\n<li><p>In test cases 4 and 5 both <code>each</code> and <code>reset</code> are by-reference functions. The <code>$array</code> has a <code>refcount=2</code> when it is passed to them, so it has to be duplicated. As such <code>foreach</code> will be working on a separate array again.</p></li>\n</ul>\n\n<h3>Examples: Effects of <code>current</code> in foreach</h3>\n\n<p>A good way to show the various duplication behaviors is to observe the behavior of the  <code>current()</code> function inside a foreach loop. Consider this example:</p>\n\n<pre><code>foreach ($array as $val) {\n    var_dump(current($array));\n}\n/* Output: 2 2 2 2 2 */\n</code></pre>\n\n<p>Here you should know that <code>current()</code> is a by-ref function (actually: prefer-ref), even though it does not modify the array. It has to be in order to play nice with all the other functions like <code>next</code> which are all by-ref. By-reference passing implies that the array has to be separated and thus <code>$array</code> and the foreach-array will be different. The reason you get <code>2</code> instead of <code>1</code> is also mentioned above: <code>foreach</code> advances the array pointer <em>before</em> running the user code, not after. So even though the code is at the first element, foreach already advanced the pointer to the second.</p>\n\n<p>Now lets try a small modification:</p>\n\n<pre><code>$ref = &amp;$array;\nforeach ($array as $val) {\n    var_dump(current($array));\n}\n/* Output: 2 3 4 5 false */\n</code></pre>\n\n<p>Here we have the is_ref=1 case, so the array is not copied (just like above). But now that it is a reference, the array no longer has to be duplicated when passing to the by-ref <code>current()</code> function. Thus <code>current()</code> and foreach work on the same array. You still see the off-by-one behavior though, due to the way <code>foreach</code> advances the pointer.</p>\n\n<p>You get the same behavior when doing by-ref iteration:</p>\n\n<pre><code>foreach ($array as &amp;$val) {\n    var_dump(current($array));\n}\n/* Output: 2 3 4 5 false */\n</code></pre>\n\n<p>Here the important part is that foreach will make <code>$array</code> an is_ref=1 when it is iterated by reference, so basically you have the same situation as above.</p>\n\n<p>Another small variation, this time we'll assign the array to another variable:</p>\n\n<pre><code>$foo = $array;\nforeach ($array as $val) {\n    var_dump(current($array));\n}\n/* Output: 1 1 1 1 1 */\n</code></pre>\n\n<p>Here the refcount of the <code>$array</code> is 2 when the loop is started, so for once we actually have to do the duplication upfront. Thus <code>$array</code> and the array used by foreach will be completely separate from the outset. That's why you get the position of the IAP wherever it was before the loop (in this case it was at the first position).</p>\n\n<h3>Examples: Modification during iteration</h3>\n\n<p>Trying to account for modifications during iteration is where all our foreach troubles originated, so it serves to consider some examples for this case.</p>\n\n<p>Consider these nested loops over the same array (where by-ref iteration is used to make sure it really is the same one):</p>\n\n<pre><code>foreach ($array as &amp;$v1) {\n    foreach ($array as &amp;$v2) {\n        if ($v1 == 1 &amp;&amp; $v2 == 1) {\n            unset($array[1]);\n        }\n        echo \"($v1, $v2)\\n\";\n    }\n}\n\n// Output: (1, 1) (1, 3) (1, 4) (1, 5)\n</code></pre>\n\n<p>The expected part here is that <code>(1, 2)</code> is missing from the output, because element <code>1</code> was removed. What's probably unexpected is that the outer loop stops after the first element. Why is that?</p>\n\n<p>The reason behind this is the nested-loop hack described above: Before the loop body runs, the current IAP position and hash is backed up into a <code>HashPointer</code>. After the loop body it will be restored, but only if the element still exists, otherwise the current IAP position (whatever it may be) is used instead. In the example above this is exactly the case: The current element of the outer loop has been remove, so it will use the IAP, which has already been marked as finished by the inner loop!</p>\n\n<p>Another consequence of the <code>HashPointer</code> backup+restore mechanism is that changes to the IAP though <code>reset()</code> etc. usually do not impact foreach. For example, the following code executes as if the <code>reset()</code> were not present at all:</p>\n\n<pre><code>$array = [1, 2, 3, 4, 5];\nforeach ($array as &amp;$value) {\n    var_dump($value);\n    reset($array);\n}\n// output: 1, 2, 3, 4, 5\n</code></pre>\n\n<p>The reason is that, while <code>reset()</code> temporarily modifies the IAP, it will be restored to the current foreach element after the loop body. To force <code>reset()</code> to make an effect on the loop, you have to additionally remove the current element, so that the backup/restore mechanism fails:</p>\n\n<pre><code>$array = [1, 2, 3, 4, 5];\n$ref =&amp; $array;\nforeach ($array as $value) {\n    var_dump($value);\n    unset($array[1]);\n    reset($array);\n}\n// output: 1, 1, 3, 4, 5\n</code></pre>\n\n<p>But, those examples are still sane. The real fun starts if you remember that the <code>HashPointer</code> restore uses a pointer to the element and its hash to determine whether it still exists. But: Hashes have collisions, and pointers can be reused! This means that, with a careful choice of array keys, we can make <code>foreach</code> believe that an element that has been removed still exists, so it will jump directly to it. An example:</p>\n\n<pre><code>$array = ['EzEz' =&gt; 1, 'EzFY' =&gt; 2, 'FYEz' =&gt; 3];\n$ref =&amp; $array;\nforeach ($array as $value) {\n    unset($array['EzFY']);\n    $array['FYFY'] = 4;\n    reset($array);\n    var_dump($value);\n}\n// output: 1, 4\n</code></pre>\n\n<p>Here we should normally expect the output <code>1, 1, 3, 4</code> according to the previous rules. How what happens is that <code>'FYFY'</code> has the same hash as the removed element <code>'EzFY'</code>, and the allocator happens to reuse the same memory location to store the element. So foreach ends up directly jumping to the newly inserted element, thus short-cutting the loop.</p>\n\n<h3>Substituting the iterated entity during the loop</h3>\n\n<p>One last odd case that I'd like to mention, is is that PHP allows you to substitute the iterated entity during the loop. So you can start iterating on one array and then replace it with another array halfway through. Or start iterating on an array and then replace it with an object:</p>\n\n<pre><code>$arr = [1, 2, 3, 4, 5];\n$obj = (object) [6, 7, 8, 9, 10];\n\n$ref =&amp; $arr;\nforeach ($ref as $val) {\n    echo \"$val\\n\";\n    if ($val == 3) {\n        $ref = $obj;\n    }\n}\n/* Output: 1 2 3 6 7 8 9 10 */\n</code></pre>\n\n<p>As you can see in this case PHP will just start iterating the other entity from the start once the substitution has happened.</p>\n\n<h2>PHP 7</h2>\n\n<h3>Hashtable iterators</h3>\n\n<p>If you still remember, the main problem with array iteration was how to handle removal of elements mid-iteration. PHP 5 used a single internal array pointer (IAP) for this purpose, which was somewhat suboptimal, as one array pointer had to be stretched to support multiple simultaneous foreach loops <em>and</em> interaction with <code>reset()</code> etc. on top of that.</p>\n\n<p>PHP 7 uses a different approach, namely it supports creating an arbitrary amount of external, safe hashtable iterators. These iterators have to be registered in the array, from which point on they have the same semantics as the IAP: If an array element is removed, all hashtable iterators pointing to that element will be advanced to the next element.</p>\n\n<p>This means that foreach will no longer use the IAP <strong>at all</strong>. The foreach loop will be absolutely no effect on the results of <code>current()</code> etc. and its own behavior will never be influence by functions like  <code>reset()</code> etc.</p>\n\n<h3>Array duplication</h3>\n\n<p>Another important change between PHP 5 and PHP 7 relates to array duplication. Now that the IAP is no longer used, by-value array iteration will only do a refcount increment (instead of duplication the array) in all cases. If the array is modified during the foreach loop, at that point a duplication will occur (according to copy-on-write) and foreach will keep working on the old array.</p>\n\n<p>In most cases this change is transparent and has no other effect than better performance. However there is one occasion where it results in different behavior, namely the case where the array was a reference beforehand:</p>\n\n<pre><code>$array = [1, 2, 3, 4, 5];\n$ref = &amp;$array;\nforeach ($array as $val) {\n    var_dump($val);\n    $array[2] = 0;\n}\n/* Old output: 1, 2, 0, 4, 5 */\n/* New output: 1, 2, 3, 4, 5 */\n</code></pre>\n\n<p>Previously by-value iteration of reference-arrays was special cases. In this case no duplication occurred, so all modifications of the array during iteration would be reflected by the loop. In PHP 7 this special case is gone: A by-value iteration of an array will <strong>always</strong> keep working on the original elements, disregarding any modifications during the loop.</p>\n\n<p>This, of course, does not apply to by-reference iteration. If you iterate by-reference all modifications will be reflected by the loop. Interestingly, the same is true for by-value iteration of plain objects:</p>\n\n<pre><code>$obj = new stdClass;\n$obj-&gt;foo = 1;\n$obj-&gt;bar = 2;\nforeach ($obj as $val) {\n    var_dump($val);\n    $obj-&gt;bar = 42;\n}\n/* Old and new output: 1, 42 */\n</code></pre>\n\n<p>This reflects by-handle semantics of objects (i.e. they behave reference-like even in by-value contexts).</p>\n\n<h3>Examples</h3>\n\n<p>Lets consider a few examples, starting with your test cases:</p>\n\n<ul>\n<li><p>Test cases 1 and 2 retain the same output: By-value array iteration always keeps working on the original elements. (In this case even refcounting and duplication behavior is exactly the same between PHP 5 and PHP 7).</p></li>\n<li><p>Test case 3 changes: Foreach no longer uses the IAP, so <code>each()</code> is not affected by the loop. It will have the same output before and after.</p></li>\n<li><p>Test cases 4 and 5 stay the same: <code>each()</code> and <code>reset()</code> will duplicate the array before changing the IAP, while foreach still uses the original array. (Not that the IAP change would have mattered, even if the array was shared.)</p></li>\n</ul>\n\n<p>The second set of examples was related to the behavior of <code>current()</code> under different reference/refcounting configurations. This no longer makes sense, as <code>current()</code> is completely unaffected by the loop, so its return value always stays the same.</p>\n\n<p>However, we get some interesting changes when considering modifications during iteration. I hope you will find the new behavior more sane. The first example:</p>\n\n<pre><code>$array = [1, 2, 3, 4, 5];\nforeach ($array as &amp;$v1) {\n    foreach ($array as &amp;$v2) {\n        if ($v1 == 1 &amp;&amp; $v2 == 1) {\n            unset($array[1]);\n        }\n        echo \"($v1, $v2)\\n\";\n    }\n}\n\n// Old output: (1, 1) (1, 3) (1, 4) (1, 5)\n// New output: (1, 1) (1, 3) (1, 4) (1, 5)\n//             (3, 1) (3, 3) (3, 4) (3, 5)\n//             (4, 1) (4, 3) (4, 4) (4, 5)\n//             (5, 1) (5, 3) (5, 4) (5, 5) \n</code></pre>\n\n<p>As you can see, the outer loop no longer aborts after the first iteration. The reason is that both loops now have entirely separate hashtable iterators, and there is no longer any cross-contamination of both loops through a shared IAP.</p>\n\n<p>Another weird edge case that is fixed now, is the odd effect you get when you remove and add elements that happen to have the same hash:</p>\n\n<pre><code>$array = ['EzEz' =&gt; 1, 'EzFY' =&gt; 2, 'FYEz' =&gt; 3];\nforeach ($array as &amp;$value) {\n    unset($array['EzFY']);\n    $array['FYFY'] = 4;\n    var_dump($value);\n}\n// Old output: 1, 4\n// New output: 1, 3, 4\n</code></pre>\n\n<p>Previously the HashPointer restore mechanism jumped right to the new element, because it \"looked\" like it's the same as the remove element (due to colliding hash and pointer). As we no longer rely on the element hash for anything, this is no longer an issue.</p>\n", "title": "How does &#39;foreach&#39; actually work?", "answer_id": 14854568, "question_id": 10057671, "tags": ["php", "loops", "foreach", "iteration", "php-internals"]}, {"body": "<p><strong>Explanation (quote from <a href=\"http://www.php.net/manual/en/control-structures.foreach.php\" rel=\"nofollow\">php.net</a>):</strong></p>\n\n<blockquote>\n  <p>The first form loops over the array given by array_expression. On each\n  iteration, the value of the current element is assigned to $value and\n  the internal array pointer is advanced by one (so on the next\n  iteration, you'll be looking at the next element).</p>\n</blockquote>\n\n<p>So, in your first example you only have one element in the array, and when the pointer is moved the next element does not exist, so after you add new element foreach ends because it already \"decided\" that it it as the last element.</p>\n\n<p>In your second example, you start with two elements, and foreach loop is not at the last element so it evaluates the array on the next iteration and thus realises that there is new element in the array.</p>\n\n<p>I believe that this is all consequence of <strong>On each iteration</strong> part of the explanation in the documentation, which probably means that <code>foreach</code> does all logic before it calls the code in <code>{}</code>.</p>\n\n<p><strong>Test case</strong></p>\n\n<p>If you run this:</p>\n\n<pre><code>&lt;?\n    $array = Array(\n        'foo' =&gt; 1,\n        'bar' =&gt; 2\n    );\n    foreach($array as $k=&gt;&amp;$v) {\n        $array['baz']=3;\n        echo $v.\" \";\n    }\n    print_r($array);\n?&gt;\n</code></pre>\n\n<p>You will get this output: </p>\n\n<pre><code>1 2 3 Array\n(\n    [foo] =&gt; 1\n    [bar] =&gt; 2\n    [baz] =&gt; 3\n)\n</code></pre>\n\n<p>Which means that it accepted the modification and went through it because it was modified \"in time\". But if you do this:</p>\n\n<pre><code>&lt;?\n    $array = Array(\n        'foo' =&gt; 1,\n        'bar' =&gt; 2\n    );\n    foreach($array as $k=&gt;&amp;$v) {\n        if ($k=='bar') {\n            $array['baz']=3;\n        }\n        echo $v.\" \";\n    }\n    print_r($array);\n?&gt;\n</code></pre>\n\n<p>You will get:</p>\n\n<pre><code>1 2 Array\n(\n    [foo] =&gt; 1\n    [bar] =&gt; 2\n    [baz] =&gt; 3\n)\n</code></pre>\n\n<p>Which means that array was modified, but since we modified it when the <code>foreach</code> already was at the last element of the array, it \"decided\" not to loop anymore, and even though we added new element, we added it \"too late\" and it was not looped through.</p>\n\n<p>Detailed explanation can be read at <a href=\"http://stackoverflow.com/questions/10057671/how-foreach-actually-works\">How foreach actually works</a> which explains the internals behind this behaviour.</p>\n", "title": "How does &#39;foreach&#39; actually work?", "answer_id": 23078704, "question_id": 10057671, "tags": ["php", "loops", "foreach", "iteration", "php-internals"]}, {"body": "<p>As per the documentation provided by PHP manual.</p>\n\n<blockquote>\n  <p>On each iteration, the value of the current element is assigned to $v and the internal<br>\n  array pointer is advanced by one (so on the next iteration, you'll be looking at the next element).</p>\n</blockquote>\n\n<p>So as per your first example:   </p>\n\n<pre><code>$array = ['foo'=&gt;1];\nforeach($array as $k=&gt;&amp;$v)\n{\n   $array['bar']=2;\n   echo($v);\n}\n</code></pre>\n\n<p><code>$array</code> have only single element, so as per the foreach execution, 1 assign to <code>$v</code> and it don't have any other element to move pointer</p>\n\n<p>But in your second example:</p>\n\n<pre><code>$array = ['foo'=&gt;1, 'bar'=&gt;2];\nforeach($array as $k=&gt;&amp;$v)\n{\n   $array['baz']=3;\n   echo($v);\n}\n</code></pre>\n\n<p><code>$array</code> have two element, so now $array evaluate the zero indices and move the pointer by one. For first iteration of loop, added <code>$array['baz']=3;</code> as pass by reference.</p>\n", "title": "How does &#39;foreach&#39; actually work?", "answer_id": 23079773, "question_id": 10057671, "tags": ["php", "loops", "foreach", "iteration", "php-internals"]}], "link": "http://stackoverflow.com/questions/10057671/how-does-foreach-actually-work", "question_id": 10057671}, {"body": "<p>I'm reading a book where the author says that <code>if( a &lt; 901 )</code> is faster than <code>if( a &lt;= 900 )</code>. </p>\n\n<p>Not exactly as in this simple example, but there are slight performance changes on loop complex code. I suppose this has to do something with generated machine code in case it's even true.</p>\n", "title": "Is &lt; faster than &lt;=?", "tags": ["c++", "performance", "assembly"], "answers": [{"body": "<p>No, it will not be faster on most architectures. You didn't specify, but on x86, all of the integral comparisons will be typically implemented in two machine instructions:</p>\n\n<ul>\n<li>A <code>test</code> or <code>cmp</code> instruction, which sets <code>EFLAGS</code></li>\n<li>And a <a href=\"http://www.unixwiz.net/techtips/x86-jumps.html\"><code>Jcc</code> (jump) instruction</a>, depending on the comparison type (and code layout):\n<ul>\n<li><code>jne</code> - Jump if not equal --> <code>ZF = 0</code></li>\n<li><code>jz</code> - Jump if zero (equal) --> <code>ZF = 1</code></li>\n<li><code>jg</code> - Jump if greater --> <code>ZF = 0 and SF = OF</code></li>\n<li>(etc...)</li>\n</ul></li>\n</ul>\n\n<hr>\n\n<p><strong>Example</strong> (Edited for brevity) Compiled with <code>$ gcc -m32 -S -masm=intel test.c</code></p>\n\n<pre class=\"lang-c prettyprint-override\"><code>    if (a &lt; b) {\n        // Do something 1\n    }\n</code></pre>\n\n<p>Compiles to:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>    mov     eax, DWORD PTR [esp+24]      ; a\n    cmp     eax, DWORD PTR [esp+28]      ; b\n    jge     .L2                          ; jump if a is &gt;= b\n    ; Do something 1\n.L2:\n</code></pre>\n\n<p>And</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>    if (a &lt;= b) {\n        // Do something 2\n    }\n</code></pre>\n\n<p>Compiles to:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>    mov     eax, DWORD PTR [esp+24]      ; a\n    cmp     eax, DWORD PTR [esp+28]      ; b\n    jg      .L5                          ; jump if a is &gt; b\n    ; Do something 2\n.L5:\n</code></pre>\n\n<p>So the only difference between the two is a <code>jg</code> versus a <code>jge</code> instruction. The two will take the same amount of time.</p>\n\n<hr>\n\n<p>I'd like to address the comment that nothing indicates that the different jump instructions take the same amount of time.  This one is a little tricky to answer, but here's what I can give: In the <a href=\"http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html\">Intel Instruction Set Reference</a>, they are all grouped together under one common instruction, <code>Jcc</code> (Jump if condition is met). The same grouping is made together under the <a href=\"http://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-optimization-manual.html\">Optimization Reference Manual</a>, in Appendix C. Latency and Throughput.</p>\n\n<blockquote>\n  <p><strong>Latency</strong> \u2014 The number of clock cycles that are required for the\n  execution core to  complete the execution of all of the \u03bcops that form\n  an instruction.</p>\n  \n  <p><strong>Throughput</strong> \u2014 The number of clock cycles required to\n  wait before the issue  ports are free to accept the same instruction\n  again. For many instructions, the  throughput of an instruction can be\n  significantly less than its latency</p>\n</blockquote>\n\n<p>The values for <code>Jcc</code> are:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>      Latency   Throughput\nJcc     N/A        0.5\n</code></pre>\n\n<p>with the following footnote on <code>Jcc</code>:</p>\n\n<blockquote>\n  <p>7) Selection of conditional jump instructions should be based on the recommendation of section Section 3.4.1, \u201cBranch Prediction Optimization,\u201d to improve the  predictability of branches. When branches are predicted successfully, the latency of <code>jcc</code> is effectively zero.</p>\n</blockquote>\n\n<p>So, nothing in the Intel docs ever treats one <code>Jcc</code> instruction any differently from the others.</p>\n\n<p>If one thinks about the actual circuitry used to implement the instructions, one can assume that there would be simple AND/OR gates on the different bits in <code>EFLAGS</code>, to determine whether the conditions are met. There is then, no reason that an instruction testing two bits should take any more or less time than one testing only one (Ignoring gate propagation delay, which is much less than the clock period.)</p>\n\n<hr>\n\n<p><strong>Edit: Floating Point</strong></p>\n\n<p>This holds true for x87 floating point as well:  (Pretty much same code as above, but with <code>double</code> instead of <code>int</code>.)</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>        fld     QWORD PTR [esp+32]\n        fld     QWORD PTR [esp+40]\n        fucomip st, st(1)              ; Compare ST(0) and ST(1), and set CF, PF, ZF in EFLAGS\n        fstp    st(0)\n        seta    al                     ; Set al if above (CF=0 and ZF=0).\n        test    al, al\n        je      .L2\n        ; Do something 1\n.L2:\n\n        fld     QWORD PTR [esp+32]\n        fld     QWORD PTR [esp+40]\n        fucomip st, st(1)              ; (same thing as above)\n        fstp    st(0)\n        setae   al                     ; Set al if above or equal (CF=0).\n        test    al, al\n        je      .L5\n        ; Do something 2\n.L5:\n        leave\n        ret\n</code></pre>\n", "title": "Is &lt; faster than &lt;=?", "answer_id": 12135533, "question_id": 12135518, "tags": ["c++", "performance", "assembly"]}, {"body": "<p>This would be highly dependent on the underlying architecture that the C is compiled to.  Some processors and architectures might have explicit instructions for equal to, or less than and equal to, which execute in different numbers of cycles.</p>\n\n<p>That would be pretty unusual though, as the compiler could work around it, making it irrelevant.</p>\n", "title": "Is &lt; faster than &lt;=?", "answer_id": 12135539, "question_id": 12135518, "tags": ["c++", "performance", "assembly"]}, {"body": "<p>I see that neither is faster. The compiler generates the same machine code in each condition with a different value.</p>\n\n<pre><code>if(a &lt; 901)\ncmpl  $900, -4(%rbp)\njg .L2\n\nif(a &lt;=901)\ncmpl  $901, -4(%rbp)\njg .L3\n</code></pre>\n\n<p>My example <code>if</code> is from GCC on x86_64 platform on Linux.</p>\n\n<p>Compiler writers are pretty smart people, and they think of these things and many others most of us take for granted.</p>\n\n<p>I noticed that if it is not a constant, then the same machine code is generated in either case.</p>\n\n<pre><code>int b;\nif(a &lt; b)\ncmpl  -4(%rbp), %eax\njge   .L2\n\nif(a &lt;=b)\ncmpl  -4(%rbp), %eax\njg .L3\n</code></pre>\n", "title": "Is &lt; faster than &lt;=?", "answer_id": 12135550, "question_id": 12135518, "tags": ["c++", "performance", "assembly"]}, {"body": "<p>You should not be able to notice the difference even if there is any.  Besides, in practice, you'll have to do an additional <code>a + 1</code> or <code>a - 1</code> to make the condition stand unless you're going to use some magic constants, which is a very bad practice by all means.</p>\n", "title": "Is &lt; faster than &lt;=?", "answer_id": 12135551, "question_id": 12135518, "tags": ["c++", "performance", "assembly"]}, {"body": "<p>Assuming we're talking about internal integer types, there's no possible way one could be faster than the other. They're obviously semantically identical. They both ask the compiler to do precisely the same thing. Only a horribly broken compiler would generate inferior code for one of these.</p>\n\n<p>If there was some platform where <code>&lt;</code> was faster than <code>&lt;=</code> for simple integer types, the compiler should <em>always</em> convert <code>&lt;=</code> to <code>&lt;</code> for constants. Any compiler that didn't would just be a bad compiler (for that platform).</p>\n", "title": "Is &lt; faster than &lt;=?", "answer_id": 12135626, "question_id": 12135518, "tags": ["c++", "performance", "assembly"]}, {"body": "<p>They have the same speed. Maybe in some special architecture what he/she said is right, but in the x86 family at least I know they are the same. Because for doing this the CPU will do a  substraction (a - b) and then check the flags of the flag register. Two bits of that register are called ZF (zero Flag) and SF (sign flag), and it is done in one cycle, because it will do it with one mask operation.</p>\n", "title": "Is &lt; faster than &lt;=?", "answer_id": 12138533, "question_id": 12135518, "tags": ["c++", "performance", "assembly"]}, {"body": "<p>At the very least, if this were true a compiler could trivially optimise a &lt;= b to !(a > b), and so even if the comparison itself were actually slower, with all but the most naive compiler you would not notice a difference.</p>\n", "title": "Is &lt; faster than &lt;=?", "answer_id": 12139295, "question_id": 12135518, "tags": ["c++", "performance", "assembly"]}, {"body": "<p>Maybe the author of that unnamed book has read that <code>a &gt; 0</code> runs faster than <code>a &gt;= 1</code> and thinks that is true universally.</p>\n\n<p>But it is because a <code>0</code> is involved (because <code>CMP</code> can, depending on the architecture, replaced e.g. with <code>OR</code>) and not because of the <code>&lt;</code>.</p>\n", "title": "Is &lt; faster than &lt;=?", "answer_id": 12142568, "question_id": 12135518, "tags": ["c++", "performance", "assembly"]}, {"body": "<p>Historically (we're talking the 1980s and early 1990s), there were <em>some</em> architectures in which this was true. The root issue is that integer comparison is inherently implemented via integer subtractions. This gives rise to the following cases.</p>\n\n<pre><code>Comparison     Subtraction\n----------     -----------\nA &lt; B      --&gt; A - B &lt; 0\nA = B      --&gt; A - B = 0\nA &gt; B      --&gt; A - B &gt; 0\n</code></pre>\n\n<p>Now, when <code>A &lt; B</code> the subtraction has to borrow a high-bit for the subtraction to be correct, just like you carry and borrow when adding and subtracting by hand. This \"borrowed\" bit was usually referred to as the <em>carry bit</em> and would be testable by a branch instruction. A second bit called the <em>zero bit</em> would be set if the subtraction were identically zero which implied equality.</p>\n\n<p>There were usually at least two conditional branch instructions, one to branch on the carry bit and one on the zero bit.</p>\n\n<p>Now, to get at the heart of the matter, let's expand the previous table to include the carry and zero bit results.</p>\n\n<pre><code>Comparison     Subtraction  Carry Bit  Zero Bit\n----------     -----------  ---------  --------\nA &lt; B      --&gt; A - B &lt; 0    0          0\nA = B      --&gt; A - B = 0    1          1\nA &gt; B      --&gt; A - B &gt; 0    1          0\n</code></pre>\n\n<p>So, implementing a branch for <code>A &lt; B</code> can be done in one instruction, because the carry bit is clear <em>only</em> in this case, , that is,</p>\n\n<pre><code>;; Implementation of \"if (A &lt; B) goto address;\"\ncmp  A, B          ;; compare A to B\nbcz  address       ;; Branch if Carry is Zero to the new address\n</code></pre>\n\n<p>But, if we want to do a less-than-or-equal comparison, we need to do an additional check of the zero flag to catch the case of equality.</p>\n\n<pre><code>;; Implementation of \"if (A &lt;= B) goto address;\"\ncmp A, B           ;; compare A to B\nbcz address        ;; branch if A &lt; B\nbzs address        ;; also, Branch if the Zero bit is Set\n</code></pre>\n\n<p>So, on some machines, using a \"less than\" comparison <em>might</em> save <em>one machine instruction</em>.  This was relevant in the era of sub-megahertz processor speed and 1:1 CPU-to-memory speed ratios, but it is almost totally irrelevant today.</p>\n", "title": "Is &lt; faster than &lt;=?", "answer_id": 12146965, "question_id": 12135518, "tags": ["c++", "performance", "assembly"]}, {"body": "<p>For floating point code, the &lt;= comparison may indeed be slower (by one instruction) even on modern architectures. Here's the first function:</p>\n\n<pre><code>int compare_strict(double a, double b) { return a &lt; b; }\n</code></pre>\n\n<p>On PowerPC, first this performs a floating point comparison (which updates <code>cr</code>, the condition register), then moves the condition register to a GPR, shifts the \"compared less than\" bit into place, and then returns. It takes four instructions.</p>\n\n<p>Now consider this function instead:</p>\n\n<pre><code>int compare_loose(double a, double b) { return a &lt;= b; }\n</code></pre>\n\n<p>This requires the same work as <code>compare_strict</code> above, but now there's two bits of interest: \"was less than\" and \"was equal to.\" This requires an extra instruction (<code>cror</code> - condition register bitwise OR) to combine these two bits into one. So <code>compare_loose</code> requires five instructions, while <code>compare_strict</code> requires four.</p>\n\n<p>You might think that the compiler could optimize the second function like so:</p>\n\n<pre><code>int compare_loose(double a, double b) { return ! (a &gt; b); }\n</code></pre>\n\n<p>However this will incorrectly handle NaNs. <code>NaN1 &lt;= NaN2</code> and <code>NaN1 &gt; NaN2</code> need to both evaluate to false.</p>\n", "title": "Is &lt; faster than &lt;=?", "answer_id": 12147530, "question_id": 12135518, "tags": ["c++", "performance", "assembly"]}, {"body": "<p>You could say that line is correct in most scripting languages, since the extra character results in slightly slower code processing.\n However, as the top answer pointed out, it should have no effect in C++, and anything being done with a scripting language probably isn't that concerned about optimization.</p>\n", "title": "Is &lt; faster than &lt;=?", "answer_id": 12170243, "question_id": 12135518, "tags": ["c++", "performance", "assembly"]}, {"body": "<p>Actually, they will be exactly the same speed, because on the assembly level they both take one line. Such as:</p>\n\n<ul>\n<li><code>jl ax,dx</code> (jumps if AX is less than DX)</li>\n<li><code>jle ax,dx</code> (jumps if AX is less than or equal to DX)</li>\n</ul>\n\n<p>So no, neither is faster. But if you want to get really technical I think if you were to check it on an electron current level, it would be slightly faster but not anywhere near a speed you would notice.</p>\n", "title": "Is &lt; faster than &lt;=?", "answer_id": 12217947, "question_id": 12135518, "tags": ["c++", "performance", "assembly"]}, {"body": "<p>Other answers have concentrated on <a href=\"http://en.wikipedia.org/wiki/X86\">x86</a> architecture, and I don't know the <a href=\"http://en.wikipedia.org/wiki/ARM_architecture\">ARM</a> architecture (which your example assembler seems to be) well enough to comment specifically on the code generated, but this is an example of a <a href=\"http://programmers.stackexchange.com/a/99463/22493\">micro-optimisation</a> which <em>is</em> very architecture specific, and is <strong>as likely to be an anti-optimisation as it is to be an optimisation</strong>.</p>\n\n<p>As such, I would suggest that this sort of <a href=\"http://programmers.stackexchange.com/a/99463/22493\">micro-optimisation</a> is an example of <a href=\"http://en.wikipedia.org/wiki/Cargo_cult\">cargo cult</a> programming rather than best software engineering practice.</p>\n\n<p>There are probably <em>some</em> architectures where this is an optimisation, but I know of at least one architecture where the opposite may be true. The venerable <a href=\"http://en.m.wikipedia.org/wiki/Transputer\">Transputer</a> architecture only had machine code instructions for <em>equal to</em> and <em>greater than or equal to</em>, so all comparisons had to be built from these primitives.</p>\n\n<p>Even then, in almost all cases, the compiler could order the evaluation instructions in such a way that in practice, no comparison had any advantage over any other. Worst case though, it might need to add a reverse instruction (REV) to swap the top two items on the <a href=\"http://en.wikipedia.org/wiki/Stack_machine\">operand stack</a>. This was a single byte instruction which took a single cycle to run, so had the smallest overhead possible.</p>\n\n<p>Whether or not a micro-optimisation like this is an <em>optimisation</em> or an <em>anti-optimisation</em> depends on the specific architecture you are using, so it is usually a bad idea to get into the habit of using architecture specific micro-optimisations, otherwise you might instinctively use one when it is inappropriate to do so, and it looks like this is exactly what the book you are reading is advocating.</p>\n", "title": "Is &lt; faster than &lt;=?", "answer_id": 12220823, "question_id": 12135518, "tags": ["c++", "performance", "assembly"]}], "link": "http://stackoverflow.com/questions/12135518/is-faster-than", "question_id": 12135518}, {"body": "<p>I wrote some code for testing the impact of try-catch, but seeing some surprising results.</p>\n\n<pre><code>static void Main(string[] args)\n{\n    Thread.CurrentThread.Priority = ThreadPriority.Highest;\n    Process.GetCurrentProcess().PriorityClass = ProcessPriorityClass.RealTime;\n\n    long start = 0, stop = 0, elapsed = 0;\n    double avg = 0.0;\n\n    long temp = Fibo(1);\n\n    for (int i = 1; i &lt; 100000000; i++)\n    {\n        start = Stopwatch.GetTimestamp();\n        temp = Fibo(100);\n        stop = Stopwatch.GetTimestamp();\n\n        elapsed = stop - start;\n        avg = avg + ((double)elapsed - avg) / i;\n    }\n\n    Console.WriteLine(\"Elapsed: \" + avg);\n    Console.ReadKey();\n}\n\nstatic long Fibo(int n)\n{\n    long n1 = 0, n2 = 1, fibo = 0;\n    n++;\n\n    for (int i = 1; i &lt; n; i++)\n    {\n        n1 = n2;\n        n2 = fibo;\n        fibo = n1 + n2;\n    }\n\n    return fibo;\n}\n</code></pre>\n\n<p>On my computer, this consistently prints out a value around 0.96..</p>\n\n<p>When I wrap the for loop inside Fibo() with a try-catch block like this:</p>\n\n<pre><code>static long Fibo(int n)\n{\n    long n1 = 0, n2 = 1, fibo = 0;\n    n++;\n\n    try\n    {\n        for (int i = 1; i &lt; n; i++)\n        {\n            n1 = n2;\n            n2 = fibo;\n            fibo = n1 + n2;\n        }\n    }\n    catch {}\n\n    return fibo;\n}\n</code></pre>\n\n<p>Now it consistently prints out 0.69... -- it actually runs faster! But why?</p>\n\n<p>Note: I compiled this using the Release configuration and directly ran the EXE file (outside Visual Studio).</p>\n\n<p>EDIT: <a href=\"http://stackoverflow.com/a/8928476/282110\">Jon Skeet's <em>excellent</em> analysis</a> shows that try-catch is somehow causing the x86 CLR to use the CPU registers in a more favorable way in this specific case (and I think we're yet to understand why). I confirmed Jon's finding that x64 CLR doesn't have this difference, and that it was faster than the x86 CLR. I also tested using <code>int</code> types inside the Fibo method instead of <code>long</code> types, and then the x86 CLR was as equally fast as the x64 CLR.</p>\n\n<hr>\n\n<p><strong>UPDATE:</strong> It looks like this issue has been fixed by Roslyn. Same machine, same CLR version -- the issue remains as above when compiled with VS 2013, but the problem goes away when compiled with VS 2015. </p>\n", "title": "Try-catch speeding up my code?", "tags": ["c#", ".net", "clr", "try-catch", "performance-testing"], "answers": [{"body": "<p>Well, the way you're timing things looks pretty nasty to me. It would be much more sensible to just time the whole loop:</p>\n\n<pre><code>var stopwatch = Stopwatch.StartNew();\nfor (int i = 1; i &lt; 100000000; i++)\n{\n    Fibo(100);\n}\nstopwatch.Stop();\nConsole.WriteLine(\"Elapsed time: {0}\", stopwatch.Elapsed);\n</code></pre>\n\n<p>That way you're not at the mercy of tiny timings, floating point arithmetic and accumulated error.</p>\n\n<p>Having made that change, see whether the \"non-catch\" version is still slower than the \"catch\" version.</p>\n\n<p>EDIT: Okay, I've tried it myself - and I'm seeing the same result. Very odd. I wondered whether the try/catch was disabling some bad inlining, but using <code>[MethodImpl(MethodImplOptions.NoInlining)]</code> instead didn't help...</p>\n\n<p>Basically you'll need to look at the optimized JITted code under cordbg, I suspect...</p>\n\n<p>EDIT: A few more bits of information:</p>\n\n<ul>\n<li>Putting the try/catch around just the <code>n++;</code> line still improves performance, but not by as much as putting it around the whole block</li>\n<li>If you catch a specific exception (<code>ArgumentException</code> in my tests) it's still fast</li>\n<li>If you print the exception in the catch block it's still fast</li>\n<li>If you rethrow the exception in the catch block it's slow again</li>\n<li>If you use a finally block instead of a catch block it's slow again</li>\n<li>If you use a finally block <em>as well as</em> a catch block, it's fast</li>\n</ul>\n\n<p>Weird...</p>\n\n<p>EDIT: Okay, we have disassembly...</p>\n\n<p>This is using the C# 2 compiler and .NET 2 (32-bit) CLR, disassembling with mdbg (as I don't have cordbg on my machine). I still see the same performance effects, even under the debugger. The fast version uses a <code>try</code> block around everything between the variable declarations and the return statement, with just a <code>catch{}</code> handler. Obviously the slow version is the same except without the try/catch. The calling code (i.e. Main) is the same in both cases, and has the same assembly representation (so it's not an inlining issue).</p>\n\n<p>Disassembled code for fast version:</p>\n\n<pre><code> [0000] push        ebp\n [0001] mov         ebp,esp\n [0003] push        edi\n [0004] push        esi\n [0005] push        ebx\n [0006] sub         esp,1Ch\n [0009] xor         eax,eax\n [000b] mov         dword ptr [ebp-20h],eax\n [000e] mov         dword ptr [ebp-1Ch],eax\n [0011] mov         dword ptr [ebp-18h],eax\n [0014] mov         dword ptr [ebp-14h],eax\n [0017] xor         eax,eax\n [0019] mov         dword ptr [ebp-18h],eax\n*[001c] mov         esi,1\n [0021] xor         edi,edi\n [0023] mov         dword ptr [ebp-28h],1\n [002a] mov         dword ptr [ebp-24h],0\n [0031] inc         ecx\n [0032] mov         ebx,2\n [0037] cmp         ecx,2\n [003a] jle         00000024\n [003c] mov         eax,esi\n [003e] mov         edx,edi\n [0040] mov         esi,dword ptr [ebp-28h]\n [0043] mov         edi,dword ptr [ebp-24h]\n [0046] add         eax,dword ptr [ebp-28h]\n [0049] adc         edx,dword ptr [ebp-24h]\n [004c] mov         dword ptr [ebp-28h],eax\n [004f] mov         dword ptr [ebp-24h],edx\n [0052] inc         ebx\n [0053] cmp         ebx,ecx\n [0055] jl          FFFFFFE7\n [0057] jmp         00000007\n [0059] call        64571ACB\n [005e] mov         eax,dword ptr [ebp-28h]\n [0061] mov         edx,dword ptr [ebp-24h]\n [0064] lea         esp,[ebp-0Ch]\n [0067] pop         ebx\n [0068] pop         esi\n [0069] pop         edi\n [006a] pop         ebp\n [006b] ret\n</code></pre>\n\n<p>Disassembled code for slow version:</p>\n\n<pre><code> [0000] push        ebp\n [0001] mov         ebp,esp\n [0003] push        esi\n [0004] sub         esp,18h\n*[0007] mov         dword ptr [ebp-14h],1\n [000e] mov         dword ptr [ebp-10h],0\n [0015] mov         dword ptr [ebp-1Ch],1\n [001c] mov         dword ptr [ebp-18h],0\n [0023] inc         ecx\n [0024] mov         esi,2\n [0029] cmp         ecx,2\n [002c] jle         00000031\n [002e] mov         eax,dword ptr [ebp-14h]\n [0031] mov         edx,dword ptr [ebp-10h]\n [0034] mov         dword ptr [ebp-0Ch],eax\n [0037] mov         dword ptr [ebp-8],edx\n [003a] mov         eax,dword ptr [ebp-1Ch]\n [003d] mov         edx,dword ptr [ebp-18h]\n [0040] mov         dword ptr [ebp-14h],eax\n [0043] mov         dword ptr [ebp-10h],edx\n [0046] mov         eax,dword ptr [ebp-0Ch]\n [0049] mov         edx,dword ptr [ebp-8]\n [004c] add         eax,dword ptr [ebp-1Ch]\n [004f] adc         edx,dword ptr [ebp-18h]\n [0052] mov         dword ptr [ebp-1Ch],eax\n [0055] mov         dword ptr [ebp-18h],edx\n [0058] inc         esi\n [0059] cmp         esi,ecx\n [005b] jl          FFFFFFD3\n [005d] mov         eax,dword ptr [ebp-1Ch]\n [0060] mov         edx,dword ptr [ebp-18h]\n [0063] lea         esp,[ebp-4]\n [0066] pop         esi\n [0067] pop         ebp\n [0068] ret\n</code></pre>\n\n<p>In each case the <code>*</code> shows where the debugger entered in a simple \"step-into\".</p>\n\n<p>EDIT: Okay, I've now looked through the code and I think I can see how each version works... and I believe the slower version is slower because it uses fewer registers and more stack space. For small values of <code>n</code> that's possibly faster - but when the loop takes up the bulk of the time, it's slower.</p>\n\n<p>Possibly the try/catch block <em>forces</em> more registers to be saved and restored, so the JIT uses those for the loop as well... which happens to improve the performance overall. It's not clear whether it's a reasonable decision for the JIT to <em>not</em> use as many registers in the \"normal\" code.</p>\n\n<p>EDIT: Just tried this on my x64 machine. The x64 CLR is <em>much</em> faster (about 3-4 times faster) than the x86 CLR on this code, and under x64 the try/catch block doesn't make a noticeable difference.</p>\n", "title": "Try-catch speeding up my code?", "answer_id": 8928476, "question_id": 8928403, "tags": ["c#", ".net", "clr", "try-catch", "performance-testing"]}, {"body": "<p>Jon's disassemblies show, that the difference between the two versions is that the fast version uses a pair of registers (<code>esi,edi</code>) to store one of the local variables where the slow version doesn't.</p>\n\n<p>The JIT compiler makes different assumptions regarding register use for code that contains a try-catch block vs. code which doesn't. This causes it to make different register allocation choices. In this case, this favors the code with the try-catch block. Different code may lead to the opposite effect, so I would not count this as a general-purpose speed-up technique.</p>\n\n<p>In the end, it's very hard to tell which code will end up running the fastest. Something like register allocation and the factors that influence it are such low-level implementation details that I don't see how any specific technique could reliably produce faster code.</p>\n\n<p>For example, consider the following two methods. They were adapted from a real-life example:</p>\n\n<pre><code>interface IIndexed { int this[int index] { get; set; } }\nstruct StructArray : IIndexed { \n    public int[] Array;\n    public int this[int index] {\n        get { return Array[index]; }\n        set { Array[index] = value; }\n    }\n}\n\nstatic int Generic&lt;T&gt;(int length, T a, T b) where T : IIndexed {\n    int sum = 0;\n    for (int i = 0; i &lt; length; i++)\n        sum += a[i] * b[i];\n    return sum;\n}\nstatic int Specialized(int length, StructArray a, StructArray b) {\n    int sum = 0;\n    for (int i = 0; i &lt; length; i++)\n        sum += a[i] * b[i];\n    return sum;\n}\n</code></pre>\n\n<p>One is a generic version of the other. Replacing the generic type with <code>StructArray</code> would make the methods identical. Because <code>StructArray</code> is a value type, it gets its own compiled version of the generic method. Yet the actual running time is significantly longer than the specialized method's, but only for x86. For x64, the timings are pretty much identical. In other cases, I've observed differences for x64 as well.</p>\n", "title": "Try-catch speeding up my code?", "answer_id": 8931311, "question_id": 8928403, "tags": ["c#", ".net", "clr", "try-catch", "performance-testing"]}, {"body": "<p>I'd have put this in as a comment as I'm really not certain that this is likely to be the case, but as I recall it doesn't a try/except statement involve a modification to the way the garbage disposal mechanism of the compiler works, in that it clears up object memory allocations in a recursive way off the stack.  There may not be an object to be cleared up in this case or the for loop may constitute a closure that the garbage collection mechanism recognises sufficient to enforce a different collection method.\nProbably not, but I thought it worth a mention as I hadn't seen it discussed anywhere else.</p>\n", "title": "Try-catch speeding up my code?", "answer_id": 8941994, "question_id": 8928403, "tags": ["c#", ".net", "clr", "try-catch", "performance-testing"]}, {"body": "<p>One of the <a href=\"http://en.wikipedia.org/wiki/Microsoft_Roslyn\">Roslyn</a> engineers who specializes in understanding optimization of stack usage took a look at this and reports to me that there seems to be a problem in the interaction between the way the C# compiler generates local variable stores and the way the <a href=\"http://en.wikipedia.org/wiki/Just-in-time_compilation\">JIT</a> compiler does register scheduling in the corresponding x86 code. The result is suboptimal code generation on the loads and stores of the locals.</p>\n\n<p>For some reason unclear to all of us, the problematic code generation path is avoided when the JITter knows that the block is in a try-protected region. </p>\n\n<p>This is pretty weird. We'll follow up with the JITter team and see if we can get a bug entered so that they can fix this up. </p>\n\n<p>Also, we are working on improvements for Roslyn to the C# and VB compilers' algorithms for determining when locals can be made \"ephemeral\" -- that is, just pushed and popped on the stack, rather than allocated a specific location on the stack for the duration of the activation. We believe that the JITter will be able to do a better job of register allocation and whatnot if we give it better hints about when locals can be made \"dead\" earlier.</p>\n\n<p>Thanks for bringing this to our attention, and apologies for the odd behaviour. </p>\n", "title": "Try-catch speeding up my code?", "answer_id": 8947323, "question_id": 8928403, "tags": ["c#", ".net", "clr", "try-catch", "performance-testing"]}, {"body": "<p>This looks like a case of inlining gone bad.  On an x86 core, the jitter has the ebx, edx, esi and edi register available for general purpose storage of local variables.  The ecx register becomes available in a static method, it doesn't have to store <em>this</em>.  The eax register often is needed for calculations.  But these are 32-bit registers, for variables of type long it must use a pair of registers.  Which are edx:eax for calculations and edi:ebx for storage.</p>\n\n<p>Which is what stands out in the disassembly for the slow version, neither edi nor ebx are used.</p>\n\n<p>When the jitter can't find enough registers to store local variables then it must generate code to load and store them from the stack frame.  That slows down code, it prevents a processor optimization named \"register renaming\", an internal processor core optimization trick that uses multiple copies of a register and allows super-scalar execution.  Which permits several instructions to run concurrently, even when they use the same register.  Not having enough registers is a common problem on x86 cores, addressed in x64 which has 8 extra registers (r9 through r15).</p>\n\n<p>The jitter will do its best to apply another code generation optimization, it will try to inline your Fibo() method.  In other words, not make a call to the method but generate the code for the method inline in the Main() method.  Pretty important optimization that, for one, makes properties of a C# class for free, giving them the perf of a field.  It avoids the overhead of making the method call and setting up its stack frame, saves a couple of nanoseconds.</p>\n\n<p>There are several rules that determine exactly when a method can be inlined.  They are not exactly documented but have been mentioned in blog posts.  One rule is that it won't happen when the method body is too large.  That defeats the gain from inlining, it generates too much code that doesn't fit as well in the L1 instruction cache.  Another hard rule that applies here is that a method won't be inlined when it contains a try/catch statement.  The background behind that one is an implementation detail of exceptions, they piggy-back onto Windows' built-in support for SEH (Structure Exception Handling) which is stack-frame based.</p>\n\n<p>One behavior of the register allocation algorithm in the jitter can be inferred from playing with this code.  It appears to be aware of when the jitter is trying to inline a method.  One rule it appears to use that only the edx:eax register pair can be used for inlined code that has local variables of type long.  But not edi:ebx.  No doubt because that would be too detrimental to the code generation for the calling method, both edi and ebx are important storage registers.</p>\n\n<p>So you get the fast version because the jitter knows up front that the method body contains try/catch statements.  It knows it can never be inlined so readily uses edi:ebx for storage for the long variable.  You got the slow version because the jitter didn't know up front that inlining wouldn't work.  It only found out <em>after</em> generating the code for the method body.</p>\n\n<p>The flaw then is that it didn't go back and <em>re-generate</em> the code for the method.  Which is understandable, given the time constraints it has to operate in.</p>\n\n<p>This slow-down doesn't occur on x64 because for one it has 8 more registers.  For another because it can store a long in just one register (like rax).  And the slow-down doesn't occur when you use int instead of long because the jitter has a lot more flexibility in picking registers.</p>\n", "title": "Try-catch speeding up my code?", "answer_id": 11794106, "question_id": 8928403, "tags": ["c#", ".net", "clr", "try-catch", "performance-testing"]}], "link": "http://stackoverflow.com/questions/8928403/try-catch-speeding-up-my-code", "question_id": 8928403}, {"body": "<p>I'd like to round up to 2 decimal places, but <em>only if necessary</em>.</p>\n\n<p>Input:</p>\n\n<pre><code>10\n1.7777777\n9.1\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>10\n1.78\n9.1\n</code></pre>\n\n<p>How can I do this in JavaScript? </p>\n", "title": "Round to at most 2 decimal places in JavaScript", "tags": ["javascript", "decimal", "rounding", "decimal-point"], "answers": [{"body": "<p>Use <code>Math.round(num * 100) / 100</code></p>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 11832950, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>This may help you:</p>\n\n<pre><code>var result = (Math.round(input*100)/100);\n</code></pre>\n\n<p>for more information, you can have a look at this link</p>\n\n<p><a href=\"http://stackoverflow.com/questions/566564/javascript-functions-math-roundnum-vs-num-tofixed0-and-browser-inconsistenci\">Javascript functions Math.round(num) vs num.toFixed(0) and browser inconsistencies</a></p>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 11832963, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>Consider <code>.toFixed()</code> and <code>.toPrecision()</code>:</p>\n\n<p><a href=\"http://www.javascriptkit.com/javatutors/formatnumber.shtml\">http://www.javascriptkit.com/javatutors/formatnumber.shtml</a></p>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 11832965, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>it may work for you,</p>\n\n<pre><code>Math.round(num * 100)/100;\n</code></pre>\n\n<p>to know the difference between toFixed and round, you can have a look at this link</p>\n\n<p><a href=\"http://stackoverflow.com/questions/566564/javascript-functions-math-roundnum-vs-num-tofixed0-and-browser-inconsistenci\">Javascript functions Math.round(num) vs num.toFixed(0) and browser inconsistencies</a></p>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 11832969, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>Here is a simple way to do it:</p>\n\n<pre><code>Math.round(value * 100) / 100\n</code></pre>\n\n<p>You might want to go ahead and make a separate function to do it for you though:</p>\n\n<pre><code>function roundToTwo(value) {\n    return(Math.round(value * 100) / 100);\n}\n</code></pre>\n\n<p>Then you would simply pass in the value.</p>\n\n<p>You could enhance it to round to any arbitrary number of decimals by adding a second parameter.</p>\n\n<pre><code>function myRound(value, places) {\n    var multiplier = Math.pow(10, places);\n\n    return (Math.round(value * multiplier) / multiplier);\n}\n</code></pre>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 11833028, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>If value is text type:</p>\n\n<pre><code>parseFloat(\"123.456\").toFixed(2);\n</code></pre>\n\n<p>If value is number:</p>\n\n<pre><code>var numb = 123.23454;\nnumb = numb.toFixed(2);\n</code></pre>\n\n<p>There is a downside that values like 1.5 will give \"1.50\" as the output. A fix suggested by @minitech:</p>\n\n<pre><code>var numb = 1.5;\nnumb = +numb.toFixed(2);\n// Note the plus sign that drops any \"extra\" zeroes at the end.\n// It changes the result (which is a string) into a number again (think \"0 + foo\"),\n// which means that it uses only as many digits as necessary.\n</code></pre>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 12830454, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p><strong>None of the answers found here is correct</strong>. @stinkycheeseman asked to <strong>round up</strong>, you all rounded the number.</p>\n\n<p>To round up, use this:</p>\n\n<pre><code>Math.ceil(num * 100)/100;\n</code></pre>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 17083793, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>Here is function i came up to do \"round up\". I used double Math.round to compensate javascript inaccurate multiplying, so 1.005 will be correctly rounded as 1.01.</p>\n\n<pre><code>function myRound(number, decimalplaces ){\n    if(decimalplaces &gt; 0){\n        var multiply1 = Math.pow(10,(decimalplaces + 4));\n        var divide1 = Math.pow(10, decimalplaces);\n        return Math.round( Math.round(number * multiply1)/10000 )/divide1 ;\n    }\n    if(decimalplaces &lt; 0){\n        var divide2 = Math.pow(10, Math.abs(decimalplaces));\n        var multiply2 = Math.pow(10, Math.abs(decimalplaces));\n        return Math.round( Math.round(number / divide2) * multiply2 );\n    }\n    return Math.round(number);\n}\n</code></pre>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 17141819, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>I wrote for self this set of functions.\nMay be, it will help you too.</p>\n\n<pre><code>function float_exponent(number) {\n    exponent = 1;\n    while (number &lt; 1.0) {\n        exponent += 1\n        number *= 10\n    }\n    return exponent;\n}\nfunction format_float(number, extra_precision) {\n    precision = float_exponent(number) + (extra_precision || 0)\n    return number.toFixed(precision).split(/\\.?0+$/)[0]\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>format_float(1.01); // 1\nformat_float(1.06); // 1.1\nformat_float(0.126); // 0.13\nformat_float(0.000189); // 0.00019\n</code></pre>\n\n<p>For you case:</p>\n\n<pre><code>format_float(10, 1); // 10\nformat_float(9.1, 1); // 9.1\nformat_float(1.77777, 1); // 1.78\n</code></pre>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 17438012, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>I still don't think anyone gave him the answer to how to only do the rounding if needed. The easiest way I see to do it is to check if there is even a decimal in the number, like so:</p>\n\n<pre><code>var num = 3.21;\nif ( (num+\"\").indexOf('.') &gt;= 0 ) { //at least assert to string first...\n    // whatever code you decide to use to round\n}\n</code></pre>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 17906644, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>Even though this topic is a little old.. here is a prototype method.</p>\n\n<pre><code>Number.prototype.round = function(places){\n    places = Math.pow(10, places); \n    return Math.round(this * places)/places;\n}\n\nvar yournum = 10.55555;\nyournum = yournum.round(2);\n</code></pre>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 18194090, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>You can use</p>\n\n<pre><code>function roundToTwo(num) {    \n    return +(Math.round(num + \"e+2\")  + \"e-2\");\n}\n</code></pre>\n\n<p>I found this over on <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round\">MDN</a>. Their way avoids the problem with 1.005 that was <a href=\"http://stackoverflow.com/questions/11832914/round-up-to-2-decimal-places-in-javascript#comment24719818_11832950\">mentioned</a>.</p>\n\n<pre><code>roundToTwo(1.005)\n1.01\nroundToTwo(10)\n10\nroundToTwo(1.7777777)\n1.78\nroundToTwo(9.1)\n9.1\n</code></pre>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 18358056, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>To not deal with many 0s, use this variant:</p>\n\n<pre><code>Math.round(num * 1e2) / 1e2\n</code></pre>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 19321705, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>MarkG's answer is the correct one.  Here's a generic extension for any number of decimal places.</p>\n\n<pre><code>Number.prototype.round = function(places) {\n  return +(Math.round(this + \"e+\" + places)  + \"e-\" + places);\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>var n = 1.7777;    \nn.round(2); // 1.78\n</code></pre>\n\n<p>Unit test:</p>\n\n<pre><code>it.only('should round floats to 2 places', function() {\n\n  var cases = [\n    { n: 10,      e: 10,    p:2 },\n    { n: 1.7777,  e: 1.78,  p:2 },\n    { n: 1.005,   e: 1.01,  p:2 },\n    { n: 1.005,   e: 1,     p:0 },\n    { n: 1.77777, e: 1.8,   p:1 }\n  ]\n\n  cases.forEach(function(testCase) {\n    var r = testCase.n.round(testCase.p);\n    assert.equal(r, testCase.e, 'didn\\'t get right number');\n  });\n})\n</code></pre>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 19722641, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>MarkG and Lavamantis offered a much better solution than the one that has been accepted. It's a shame they don't get more upvotes!</p>\n\n<p>Here is the function I use to solve the floating point decimals issues <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round#Example%3a_Decimal_rounding\">also based on MDN</a>. It is even more generic (but less concise) than Lavamantis's solution:</p>\n\n<pre><code>function round(value, exp) {\n  if (typeof exp === 'undefined' || +exp === 0)\n    return Math.round(value);\n\n  value = +value;\n  exp  = +exp;\n\n  if (isNaN(value) || !(typeof exp === 'number' &amp;&amp; exp % 1 === 0))\n    return NaN;\n\n  // Shift\n  value = value.toString().split('e');\n  value = Math.round(+(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp)));\n\n  // Shift back\n  value = value.toString().split('e');\n  return +(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp));\n}\n</code></pre>\n\n<p>Use it with:</p>\n\n<pre><code>round(10.8034, 2);      // Returns 10.8\nround(1.275, 2);        // Returns 1.28\nround(1.27499, 2);      // Returns 1.27\nround(1.2345678e+2, 2); // Returns 123.46\n</code></pre>\n\n<p>Compared to Lavamantis's solution, we can do...</p>\n\n<pre><code>round(1234.5678, -2); // Returns 1200\nround(\"123.45\");      // Returns 123\n</code></pre>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 21323513, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>If you happen to already be using the d3 library, they have a powerful number formatting library: <a href=\"https://github.com/mbostock/d3/wiki/Formatting\">https://github.com/mbostock/d3/wiki/Formatting</a></p>\n\n<p>Rounding specifically is here: <a href=\"https://github.com/mbostock/d3/wiki/Formatting#d3_round\">https://github.com/mbostock/d3/wiki/Formatting#d3_round</a></p>\n\n<p>In your case, the answer is:</p>\n\n<pre><code>&gt; d3.round(1.777777, 2)\n1.78\n&gt; d3.round(1.7, 2)\n1.7\n&gt; d3.round(1, 2)\n1\n</code></pre>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 24287014, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<pre><code>+(10).toFixed(2); // = 10\n+(10.12345).toFixed(2); // = 10.12\n\n(10).toFixed(2); // = 10.00\n(10.12345).toFixed(2); // = 10.12\n</code></pre>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 24406175, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>Try to use <a href=\"http://www.teamdf.com/web/jquery-number-format-redux/196\" rel=\"nofollow\">JQuery.number plug-in</a>.</p>\n\n<pre><code>var number = 19.8000000007;\nvar res = 1 * $.number(number, 2);\n</code></pre>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 24697286, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>A precise rounding method. Source : <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round\">Mozilla</a></p>\n\n<pre><code>(function(){\n\n    /**\n     * Decimal adjustment of a number.\n     *\n     * @param   {String}    type    The type of adjustment.\n     * @param   {Number}    value   The number.\n     * @param   {Integer}   exp     The exponent (the 10 logarithm of the adjustment base).\n     * @returns {Number}            The adjusted value.\n     */\n    function decimalAdjust(type, value, exp) {\n        // If the exp is undefined or zero...\n        if (typeof exp === 'undefined' || +exp === 0) {\n            return Math[type](value);\n        }\n        value = +value;\n        exp = +exp;\n        // If the value is not a number or the exp is not an integer...\n        if (isNaN(value) || !(typeof exp === 'number' &amp;&amp; exp % 1 === 0)) {\n            return NaN;\n        }\n        // Shift\n        value = value.toString().split('e');\n        value = Math[type](+(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp)));\n        // Shift back\n        value = value.toString().split('e');\n        return +(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp));\n    }\n\n    // Decimal round\n    if (!Math.round10) {\n        Math.round10 = function(value, exp) {\n            return decimalAdjust('round', value, exp);\n        };\n    }\n    // Decimal floor\n    if (!Math.floor10) {\n        Math.floor10 = function(value, exp) {\n            return decimalAdjust('floor', value, exp);\n        };\n    }\n    // Decimal ceil\n    if (!Math.ceil10) {\n        Math.ceil10 = function(value, exp) {\n            return decimalAdjust('ceil', value, exp);\n        };\n    }\n\n})();\n</code></pre>\n\n<p>Examples:</p>\n\n<pre><code>// Round\nMath.round10(55.55, -1); // 55.6\nMath.round10(55.549, -1); // 55.5\nMath.round10(55, 1); // 60\nMath.round10(54.9, 1); // 50\nMath.round10(-55.55, -1); // -55.5\nMath.round10(-55.551, -1); // -55.6\nMath.round10(-55, 1); // -50\nMath.round10(-55.1, 1); // -60\nMath.round10(1.005, -2); // 1.01 -- compare this with Math.round(1.005*100)/100 above\n// Floor\nMath.floor10(55.59, -1); // 55.5\nMath.floor10(59, 1); // 50\nMath.floor10(-55.51, -1); // -55.6\nMath.floor10(-51, 1); // -60\n// Ceil\nMath.ceil10(55.51, -1); // 55.6\nMath.ceil10(51, 1); // 60\nMath.ceil10(-55.59, -1); // -55.5\nMath.ceil10(-59, 1); // -50\n</code></pre>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 25075575, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>My crack at a solution:</p>\n\n<pre><code>function rDHAFZNTZ(s,n){\n    /* round decimal half away from zero, no trailing zeros\n    s should equal numeric string for absolute accuracy; function is not 100% accurate if s is a number of 17 digits or higher\n    (test example: rDHAFZNTZ(1.0049999999999999,2) returns 1.01, NOT 1) */\n    s+=\"\";//change s to string in case s is passed as a number\n    n*=1;//change n to number in case n is passed as a string\n    if(s.indexOf(\".\")&gt;-1){\n        if(s.split(\".\")[1].length&gt;n){\n            var t=s.split(\".\")[1].split(\"\");\n            if(t[n]&gt;4){\n                for(i=n-1;i&gt;-1;i--){\n                    if(t[i]!=9){\n                        t[i]=t[i]*1+1;\n                        break;\n                    }else{\n                        t[i]=\"0\";\n                    }\n                }\n                t.length=n;\n                t=t.join(\"\");\n                s=s.split(\".\")[0]+\".\"+t;\n                if(i==-1)s[0]!=\"-\"?++s:--s;\n            }else{\n                s=s.slice(0,-(t.length-n));\n            }\n        }\n    }\n    return s*1;\n}\n</code></pre>\n\n<p>where <strong>s</strong> is either a number, or a numeric string; and <strong>n</strong> is the number of digits after the decimal place to round the number to (can be 0).</p>\n\n<p>The function is not 100% accurate if the first argument is a <em>number</em> of 17 digits or higher. This is because  web browsers appear to be designed to automatically round the large number to something smaller, when passed to a function. If you want the function to provide the correct result when working with such large numbers, <strong><em>s</strong> should be given a <strong>numeric string</strong> for absolute accuracy</em>.</p>\n\n<p>Example:</p>\n\n<pre><code>rDHAFZNTZ(1.0049999999999999,2) //returns 1.01, NOT 1\nrDHAFZNTZ(\"1.0049999999999999\",2) //returns 1\n</code></pre>\n\n<p>This is perhaps not the fastest way of rounding numbers, but it meets the requirements of the question's author:</p>\n\n<pre><code>rDHAFZNTZ(10,2) //returns 10\nrDHAFZNTZ(1.7777777,2) //returns 1.78\nrDHAFZNTZ(9.1,2) //returns 9.1\n</code></pre>\n\n<p>See the <a href=\"https://en.wikipedia.org/wiki/Rounding#Round_half_away_from_zero\" rel=\"nofollow\">Wikipedia article on Rounding</a> for the specifics.</p>\n\n<p><strong>Edit:</strong> Updated to include line that changes second argument (digits to fix user's number by) back to number, in case it is given as string.</p>\n\n<p><strong>Edit:</strong> Changed name of function to reflect precise behaviour. Optimised code. Added Wikipedia article link.</p>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 25524446, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>Just wanted to share my approach, based on previously mentioned answers:</p>\n\n<p>Lets create function, that rounds any given numeric value to given amount of decimal places:</p>\n\n<pre><code>function roundWDecimals(n, decimals) {\n    if (!isNaN(parseFloat(n)) &amp;&amp; isFinite(n)) {\n        if (typeof(decimals) == typeof(undefined)) {\n            decimals = 0;\n        }\n        var decimalPower = Math.pow(10, decimals);\n        return Math.round(parseFloat(n) * decimalPower) / decimalPower;\n    }\n    return NaN;\n}\n</code></pre>\n\n<p>And introduce new \"round\" method for numbers prototype</p>\n\n<pre><code>Object.defineProperty(Number.prototype, 'round', {\n    enumerable: false,\n    value: function(decimals) {\n        return roundWDecimals(this, decimals);\n    }\n});\n</code></pre>\n\n<p>And you can test it</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function roundWDecimals(n, decimals) {\r\n\tif (!isNaN(parseFloat(n)) &amp;&amp; isFinite(n)) {\r\n\t\tif (typeof(decimals) == typeof(undefined)) {\r\n\t\t\tdecimals = 0;\r\n\t\t}\r\n\t\tvar decimalPower = Math.pow(10, decimals);\r\n\t\treturn Math.round(parseFloat(n) * decimalPower) / decimalPower;\r\n\t}\r\n\treturn NaN;\r\n}\r\nObject.defineProperty(Number.prototype, 'round', {\r\n\tenumerable: false,\r\n\tvalue: function(decimals) {\r\n\t\treturn roundWDecimals(this, decimals);\r\n\t}\r\n});\r\n\r\nvar roundables = [\r\n    {num: 10, decimals: 2},\r\n    {num: 1.7777777, decimals: 2},\r\n    {num: 9.1, decimals: 2},\r\n    {num: 55.55, decimals: 1},\r\n    {num: 55.549, decimals: 1},\r\n    {num: 55, decimals: 0},\r\n    {num: 54.9, decimals: 0},\r\n    {num: -55.55, decimals: 1},\r\n    {num: -55.551, decimals: 1},\r\n    {num: -55, decimals: 0},\r\n    {num: 1.005, decimals: 2},\r\n    {num: 1.005, decimals: 2},\r\n    {num: 19.8000000007, decimals: 2},\r\n  ],\r\n  table = '&lt;table border=\"1\"&gt;&lt;tr&gt;&lt;th&gt;Num&lt;/th&gt;&lt;th&gt;Decimals&lt;/th&gt;&lt;th&gt;Result&lt;/th&gt;&lt;/tr&gt;';\r\n$.each(roundables, function() {\r\n  table += \r\n    '&lt;tr&gt;'+\r\n      '&lt;td&gt;'+this.num+'&lt;/td&gt;'+\r\n      '&lt;td&gt;'+this.decimals+'&lt;/td&gt;'+\r\n      '&lt;td&gt;'+this.num.round(this.decimals)+'&lt;/td&gt;'+\r\n    '&lt;/tr&gt;'\r\n  ;\r\n});\r\ntable += '&lt;/table&gt;';\r\n$('.results').append(table);</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;div class=\"results\"&gt;&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 26213408, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>Use this function Number(x).toFixed(2);</p>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 26255127, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>Try this <strong>light weight</strong> solution:</p>\n\n<pre><code>function round(x, digits){\n  return parseFloat(x.toFixed(digits))\n}\n\n round(1.222,  2) ;\n // 1.22\n round(1.222, 10) ;\n // 1.222\n</code></pre>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 26463364, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>one can use '.toFixed(NumberOfDecimelPoint)'</p>\n\n<pre><code>var str = 10.234.toFixed(2); // =&gt; '10.23'\nvar number = Number(str); // =&gt; 10.23\n</code></pre>\n\n<p>For ex: alert(str);</p>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 26492235, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<h1>node.js</h1>\n\n<p>This did the trick for me on <strong>node.js</strong> in a matter of seconds:</p>\n\n<p><code>npm install math</code></p>\n\n<p><em>Source: <a href=\"http://mathjs.org/examples/basic_usage.js.html\" rel=\"nofollow\">http://mathjs.org/examples/basic_usage.js.html</a></em></p>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 26849078, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>Easiest way:</p>\n\n<p><code>+num.toFixed(2)</code></p>\n\n<p>It converts it to a string, and then back into an integer / float.</p>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 28728643, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>You could also override the Math.round function to do the rounding correct and add a parameter for decimals and use it like: Math.round(Number, Decimals). Keep in mind that this overrides the built in component Math.round and giving it another property then it original is.</p>\n\n<pre><code>var round = Math.round;\nMath.round = function (value, decimals) {\n  decimals = decimals || 0;\n  return Number(round(value + 'e' + decimals) + 'e-' + decimals);\n}\n</code></pre>\n\n<p>Then you can simply use it like this:</p>\n\n<pre><code>Math.round(1.005, 2);\n</code></pre>\n\n<p><a href=\"https://jsfiddle.net/k5tpq3pd/3/\" rel=\"nofollow\">https://jsfiddle.net/k5tpq3pd/3/</a></p>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 29102452, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p><strong>Here is the shortest and complete answer:</strong></p>\n\n<pre><code>function round(num, decimals) {\n        var n = Math.pow(10, decimals);\n        return Math.round( (n * num).toFixed(decimals) )  / n;\n};\n</code></pre>\n\n<p><strong>This also takes care of the example case 1.005 which will return 1.01.</strong></p>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 29924251, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<pre><code>var roundUpto = function(number, upto){\n    return Number(number.toFixed(upto));\n}\nroundUpto(0.1464676, 2);\n</code></pre>\n\n<p><code>toFixed(2)</code> here 2 is number of digits upto which we want to round this num.</p>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 30253724, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>One way to achieve such a rounding <em>only if necessary</em> is to use the string formatting function:</p>\n\n<pre><code>myNumber.toLocaleString('en', {maximumFractionDigits:2, useGrouping:false})\n</code></pre>\n\n<p>This will provide exactly the output you expect, but as strings. You can still convert those back to numbers if that's not the output type you expect.</p>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 30416886, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>There are couple of ways to do that. Spontaneously I can list three variants. </p>\n\n<pre><code>var n = 1024;\n\n// variant 1\nNumber(n.toFixed(2))\nNumber((1024).toFixed(2))\n\n// variant 2\n+n.toFixed(2)  // add a \"+\" before a numeric string will convert the string to number\n+(1024).toFixed(2)\n\n// variant 3\nMath.round(n * 100) / 100\nMath.round(1024 * 100) / 100\n</code></pre>\n\n<p>If your project uses jquery or lodash, you can also find proper <code>round</code> method in the libs.</p>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 35715420, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>To round at decimal positions <code>pos</code> (including no decimals) do <code>Math.round(num * Math.pow(10,pos)) / Math.pow(10,pos)</code></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var console = {\r\n log: function(s) {\r\n  document.getElementById(\"console\").innerHTML += s + \"&lt;br/&gt;\"\r\n }\r\n}\r\nvar roundDecimals=function(num,pos) {\r\n return (Math.round(num * Math.pow(10,pos)) / Math.pow(10,pos) );\r\n}\r\n//https://en.wikipedia.org/wiki/Pi\r\nvar pi=3.14159265358979323846264338327950288419716939937510;\r\nfor(var i=2;i&lt;15;i++) console.log(\"pi=\"+roundDecimals(pi,i));\r\nfor(var i=15;i&gt;=0;--i) console.log(\"pi=\"+roundDecimals(pi,i));</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div id=\"console\" /&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 36670493, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>Please use below function if you don't want to round off.</p>\n\n<pre><code>function ConvertToDecimal(num) {\n  num = num.toString(); //If it's not already a String\n  num = num.slice(0, (num.indexOf(\".\")) + 3); //With 3 exposing the hundredths place    \nalert('M : ' +  Number(num)); //If you need it back as a Number     \n}\n</code></pre>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 36714349, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>I'll add one more approach to this.</p>\n\n<pre><code>number = 16.6666666;\nconsole.log(parseFloat(number.toFixed(2)));\n\"16.67\"\n\nnumber = 16.6;\nconsole.log(parseFloat(number.toFixed(2)));\n\"16.6\"\n\nnumber = 16;\nconsole.log(parseFloat(number.toFixed(2)));\n\"16\"\n</code></pre>\n\n<p><code>.toFixed(2)</code> returns a string with exactily 2 decimal points, that may or may not be trailing zeros. Doing a <code>parseFloat()</code> will eliminate those trailing zeros.</p>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 38204889, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}, {"body": "<p>This question is complicated.</p>\n\n<p>Suppose we have a function, <code>roundTo2DP(num)</code>, that takes a float as an argument and returns a value rounded to 2 decimal places. What should each of these expressions evaluate to?</p>\n\n<ul>\n<li><code>roundTo2DP(0.014999999999999999)</code></li>\n<li><code>roundTo2DP(0.0150000000000000001)</code></li>\n<li><code>roundTo2DP(0.015)</code></li>\n</ul>\n\n<p>The 'obvious' answer is that the first example should round to 0.01 (because it's closer to 0.01 than to 0.02) while the other two should round to 0.02 (because 0.0150000000000000001 is closer to 0.02 than to 0.01, and because 0.015 is exactly halfway between them and there is a mathematical convention that such numbers get rounded up).</p>\n\n<p>The catch, which you may have guessed, is that <code>roundTo2DP</code> <em>cannot possibly</em> be implemented to give those obvious answers, because all three numbers passed to it are <em>the same number</em>. IEEE 754 binary floating point numbers (the kind used by JavaScript) can't exactly represent most non-integer numbers, and so all three numeric literals above get rounded to a nearby valid floating point number. This number, as it happens, is <em>exactly</em></p>\n\n<p>0.01499999999999999944488848768742172978818416595458984375</p>\n\n<p>which is closer to 0.01 than to 0.02.</p>\n\n<p>You can see that all three numbers are the same at your browser console, Node shell, or other JavaScript interpreter. Just compare them:</p>\n\n<pre><code>> <b><i>0.014999999999999999 === 0.0150000000000000001</i></b>\ntrue</code></pre>\n\n<p>So when I write <code>m = 0.0150000000000000001</code>, the <em>exact value of <code>m</code></em> that I end up with is closer to <code>0.01</code> than it is to <code>0.02</code>. And yet, if I convert <code>m</code> to a String...</p>\n\n<pre><code>> <b><i>var m = 0.0150000000000000001;</i></b>\n> <b><i>console.log(String(m));</i></b>\n0.015\n> <b><i>var m = 0.014999999999999999;</i></b>\n> <b><i>console.log(String(m));</i></b>\n0.015</code></pre>\n\n<p>... I get 0.015, which should round to 0.02, and which is noticeably <em>not</em> the 56-decimal-place number I earlier said that all of these numbers were exactly equal to. So what dark magic is this?</p>\n\n<p>The answer can be found in the ECMAScript specification, in section <a href=\"http://www.ecma-international.org/ecma-262/7.0/#sec-tostring-applied-to-the-number-type\" rel=\"nofollow\"><em>7.1.12.1: ToString applied to the Number type</em></a>. Here the rules for converting some Number <em>m</em> to a String are laid down. The key part is point 5, in which an integer <em>s</em> is generated whose digits will be used in the String representation of <em>m</em>:</p>\n\n<blockquote>\n  <p>let <em>n</em>, <em>k</em>, and <em>s</em> be integers such that <em>k</em> \u2265 1, 10<sup><i>k</i>-1</sup> \u2264 <em>s</em> &lt; 10<sup><i>k</i></sup>, the Number value for <em>s</em> \u00d7 10<sup><i>n</i>-<i>k</i></sup> is <em>m</em>, and <em>k</em> is as small as possible. Note that k is the number of digits in the decimal representation of <em>s</em>, that <em>s</em> is not divisible by 10, and that the least significant digit of <em>s</em> is not necessarily uniquely determined by these criteria.</p>\n</blockquote>\n\n<p>The key part here is the requirement that \"<em>k</em> is as small as possible\". What that requirement amounts to is a requirement that, given a Number <code>m</code>, the value of <code>String(m)</code> must have <em>the least possible number of digits</em> while still satisfying the requirement that <code>Number(String(m)) === m</code>. Since we already know that <code>0.015 === 0.0150000000000000001</code>, it's now clear why <code>String(0.0150000000000000001) === '0.015'</code> must be true.</p>\n\n<p>Of course, none of this discussion has directly answered what <code>roundTo2DP(m)</code> <em>should</em> return. If <code>m</code>'s exact value is 0.01499999999999999944488848768742172978818416595458984375, but its String representation is '0.015', then what is the <em>correct</em> answer - mathematically, practically, philosophically, or whatever - when we round it to two decimal places?</p>\n\n<p>There is no single correct answer to this. It depends upon your use case. You probably want to respect the String representation and round upwards when:</p>\n\n<ul>\n<li>The value being represented is inherently discrete, e.g. an amount of currency in a 3-decimal-place currency like dinars. In this case, the <em>true</em> value of a Number like 0.015 <em>is</em> 0.015, and the 0.0149999999... representation that it gets in binary floating point is a rounding error. (Of course, many will argue, reasonably, that you should use a decimal library for handling such values and never represent them as binary floating point Numbers in the first place.)</li>\n<li>The value was typed by a user. In this case, again, the exact decimal number entered is more 'true' than the nearest binary floating point representation.</li>\n</ul>\n\n<p>On the other hand, you probably want to respect the binary floating point value and round downwards when your value is from an inherently continuous scale - for instance, if it's a reading from a sensor.</p>\n\n<p>These two approaches require different code. To respect the String representation of the Number, we can (with quite a bit of reasonably subtle code) implement our own rounding that acts directly on the String representation, digit by digit, using the same algorithm you would've used in school when you were taught how to round numbers. Below is an example which respects the OP's requirement of representing the number to 2 decimal places \"only when necessary\" by stripping trailing zeroes after the decimal point; you may, of course, need to tweak it to your precise needs.</p>\n\n<pre><code>/**\n * Converts num to a decimal string (if it isn't one already) and then rounds it\n * to at most dp decimal places.\n *\n * For explanation of why you'd want to perform rounding operations on a String\n * rather than a Number, see http://stackoverflow.com/a/38676273/1709587\n *\n * @param {(number|string)} num\n * @param {number} dp\n * @return {string}\n */\nfunction roundStringNumberWithoutTrailingZeroes (num, dp) {\n    if (arguments.length != 2) throw new Error(\"2 arguments required\");\n\n    num = String(num);\n    if (num.indexOf('e+') != -1) {\n        // Can't round numbers this large because their string representation\n        // contains an exponent, like 9.99e+37\n        throw new Error(\"num too large\");\n    }\n    if (num.indexOf('.') == -1) {\n        // Nothing to do\n        return num;\n    }\n\n    var parts = num.split('.'),\n        beforePoint = parts[0],\n        afterPoint = parts[1],\n        shouldRoundUp = afterPoint[dp] &gt;= 5,\n        finalNumber;\n\n    afterPoint = afterPoint.slice(0, dp);\n    if (!shouldRoundUp) {\n        finalNumber = beforePoint + '.' + afterPoint;\n    } else if (/^9+$/.test(afterPoint)) {\n        // If we need to round up a number like 1.9999, increment the integer\n        // before the decimal point and discard the fractional part.\n        finalNumber = Number(beforePoint)+1;\n    } else {\n        // Starting from the last digit, increment digits until we find one\n        // that is not 9, then stop\n        var i = dp-1;\n        while (true) {\n            if (afterPoint[i] == '9') {\n                afterPoint = afterPoint.substr(0, dp) +\n                             '0' +\n                             afterPoint.substr(dp+1);\n                i--;\n            } else {\n                afterPoint = afterPoint.substr(0, i) +\n                             (Number(afterPoint[i]) + 1) +\n                             afterPoint.substr(i+1);\n                break;\n            }\n        }\n\n        finalNumber = beforePoint + '.' + afterPoint;\n    }\n\n    // Remove trailing zeroes from fractional part before returning\n    return finalNumber.replace(/0+$/, '')\n}\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>> <b><i>roundStringNumberWithoutTrailingZeroes(1.6, 2)</i></b>\n'1.6'\n> <b><i>roundStringNumberWithoutTrailingZeroes(10000, 2)</i></b>\n'10000'\n> <b><i>roundStringNumberWithoutTrailingZeroes(0.015, 2)</i></b>\n'0.02'\n> <b><i>roundStringNumberWithoutTrailingZeroes('0.015000', 2)</i></b>\n'0.02'\n> <b><i>roundStringNumberWithoutTrailingZeroes(1, 1)</i></b>\n'1'\n> <b><i>roundStringNumberWithoutTrailingZeroes('0.015', 2)</i></b>\n'0.02'\n> <b><i>roundStringNumberWithoutTrailingZeroes(0.01499999999999999944488848768742172978818416595458984375, 2)</i></b>\n'0.02'\n> <b><i>roundStringNumberWithoutTrailingZeroes('0.01499999999999999944488848768742172978818416595458984375', 2)</i></b>\n'0.01'</code></pre>\n\n<p>The function above is <em>probably</em> what you want to use to avoid users ever witnessing numbers that they have entered being rounded wrongly.</p>\n\n<p>(As an alternative, you could also try the <a href=\"https://github.com/jhohlfeld/round10\" rel=\"nofollow\">round10</a> library which provides a similarly-behaving function with a wildly different implementation.)</p>\n\n<p>But what if you have the second kind of Number - a value taken from a continuous scale, where there's no reason to think that approximate decimal representations with fewer decimal places are more <em>accurate</em> than those with more? In that case, we <em>don't</em> want to respect the String representation, because that representation (as explained in the spec) is already sort-of-rounded; we don't want to make the mistake of saying \"0.014999999...375 rounds up to 0.015, which rounds up to 0.02, so 0.014999999...375 rounds up to 0.02\".</p>\n\n<p>Here we can simply use the built-in <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed\" rel=\"nofollow\"><code>toFixed</code></a> method. Note that by calling <code>Number()</code> on the String returned by <code>toFixed</code>, we get a Number whose String representation has no trailing zeroes (thanks to the way JavaScript computes the String representation of a Number, discussed earlier in this answer).</p>\n\n<pre><code>/**\n * Takes a float and rounds it to at most dp decimal places. For example\n *\n *     roundFloatNumberWithoutTrailingZeroes(1.2345, 3)\n *\n * returns 1.234\n *\n * Note that since this treats the value passed to it as a floating point\n * number, it will have counterintuitive results in some cases. For instance,\n * \n *     roundFloatNumberWithoutTrailingZeroes(0.015, 2)\n *\n * gives 0.01 where 0.02 might be expected. For an explanation of why, see\n * http://stackoverflow.com/a/38676273/1709587. You may want to consider using the\n * roundStringNumberWithoutTrailingZeroes function there instead.\n *\n * @param {number} num\n * @param {number} dp\n * @return {number}\n */\nfunction roundFloatNumberWithoutTrailingZeroes (num, dp) {\n    var numToFixedDp = Number(num).toFixed(dp);\n    return Number(numToFixedDp);\n}\n</code></pre>\n", "title": "Round to at most 2 decimal places in JavaScript", "answer_id": 38676273, "question_id": 11832914, "tags": ["javascript", "decimal", "rounding", "decimal-point"]}], "link": "http://stackoverflow.com/questions/11832914/round-to-at-most-2-decimal-places-in-javascript", "question_id": 11832914}, {"body": "<p>One of the most interesting projects I've worked on in the past couple of years was a project about <a href=\"https://en.wikipedia.org/wiki/Image_processing\">image processing</a>. The goal was to develop a system to be able to recognize Coca-Cola <strong>'cans'</strong> (note that I'm stressing the word 'cans', you'll see why in a minute). You can see a sample below, with the can recognized in the <em>green rectangle</em> with scale and rotation.</p>\n\n<p><img src=\"http://i.stack.imgur.com/irQtR.png\" alt=\"Template matching\"></p>\n\n<p>Some constraints on the project:</p>\n\n<ul>\n<li>The background could be very noisy.</li>\n<li>The <em>can</em> could have any <em>scale</em> or <em>rotation</em> or even orientation (within reasonable limits).</li>\n<li>The image could have some degree of fuzziness (contours might not be entirely straight).</li>\n<li>There could be Coca-Cola bottles in the image, and the algorithm should only detect the <em>can</em>!</li>\n<li>The brightness of the image could vary a lot (so you can't rely \"too much\" on color detection).</li>\n<li>The <em>can</em> could be partly hidden on the sides or the middle and possibly partly hidden behind a bottle.</li>\n<li>There could be no <em>can</em> at all in the image, in which case you had to find nothing and write a message saying so.</li>\n</ul>\n\n<p>So you could end up with tricky things like this (which in this case had my algorithm totally fail):</p>\n\n<p><img src=\"http://i.stack.imgur.com/Byw82.png\" alt=\"Total fail\"></p>\n\n<p>I did this project a while ago, and had a lot of fun doing it, and I had a decent implementation. Here are some details about my implementation:</p>\n\n<p><strong>Language</strong>: Done in C++ using <a href=\"http://opencv.org\">OpenCV</a> library.</p>\n\n<p><strong>Pre-processing</strong>: For the image pre-processing, i.e. transforming the image into a more raw form to give to the algorithm, I used 2 methods:</p>\n\n<ol>\n<li>Changing color domain from RGB to <a href=\"http://en.wikipedia.org/wiki/HSL_and_HSV\">HSV</a> and filtering based on \"red\" hue, saturation above a certain threshold to avoid orange-like colors, and filtering of low value to avoid dark tones. The end result was a binary black and white image, where all white pixels would represent the pixels that match this threshold. Obviously there is still a lot of crap in the image, but this reduces the number of dimensions you have to work with.\n<img src=\"http://i.stack.imgur.com/ktdAB.png\" alt=\"Binarized image\">  </li>\n<li>Noise filtering using median filtering (taking the median pixel value of all neighbors and replace the pixel by this value) to reduce noise.</li>\n<li>Using <a href=\"http://en.wikipedia.org/wiki/Canny_edge_detector\">Canny Edge Detection Filter</a> to get the contours of all items after 2 precedent steps.\n<img src=\"http://i.stack.imgur.com/F9319.png\" alt=\"Contour detection\"></li>\n</ol>\n\n<p><strong>Algorithm</strong>: The algorithm itself I chose for this task was taken from <a href=\"http://rads.stackoverflow.com/amzn/click/0123725380\">this</a> awesome book on feature extraction and called <a href=\"http://en.wikipedia.org/wiki/Generalised_Hough_transform\">Generalized Hough Transform</a> (pretty different from the regular Hough Transform). It basically says a few things:</p>\n\n<ul>\n<li>You can describe an object in space without knowing its analytical equation (which is the case here).</li>\n<li>It is resistant to image deformations such as scaling and rotation, as it will basically test your image for every combination of scale factor and rotation factor.</li>\n<li>It uses a base model (a template) that the algorithm will \"learn\".</li>\n<li>Each pixel remaining in the contour image will vote for another pixel which will supposedly be the center (in terms of gravity) of your object, based on what it learned from the model.</li>\n</ul>\n\n<p>In the end, you end up with a heat map of the votes, for example here all the pixels of the contour of the can will vote for its gravitational center, so you'll have a lot of votes in the same pixel corresponding to the center, and will see a peak in the heat map as below:</p>\n\n<p><img src=\"http://i.stack.imgur.com/wxrT1.png\" alt=\"GHT\"></p>\n\n<p>Once you have that, a simple threshold-based heuristic can give you the location of the center pixel, from which you can derive the scale and rotation and then plot your little rectangle around it (final scale and rotation factor will obviously be relative to your original template). In theory at least...</p>\n\n<p><strong>Results</strong>: Now, while this approach worked in the basic cases, it was severely lacking in some areas:</p>\n\n<ul>\n<li>It is <strong>extremely slow</strong>! I'm not stressing this enough. Almost a full day was needed to process the 30 test images, obviously because I had a very high scaling factor for rotation and translation, since some of the cans were very small.</li>\n<li>It was completely lost when bottles were in the image, and for some reason almost always found the bottle instead of the can (perhaps because bottles were bigger, thus had more pixels, thus more votes)</li>\n<li>Fuzzy images were also no good, since the votes ended up in pixel at random locations around the center, thus ending with a very noisy heat map.</li>\n<li>In-variance in translation and rotation was achieved, but not in orientation, meaning that a can that was not directly facing the camera objective wasn't recognized.</li>\n</ul>\n\n<p>Can you help me improve my <strong>specific</strong> algorithm, using <strong>exclusively OpenCV</strong> features, to resolve the <strong>four specific</strong> issues mentioned?</p>\n\n<p>I hope some people will also learn something out of it as well, after all I think not only people who ask questions should learn. :)</p>\n", "title": "Image Processing: Algorithm Improvement for &#39;Coca-Cola Can&#39; Recognition", "tags": ["c++", "algorithm", "image-processing", "opencv"], "answers": [{"body": "<p>If you are not limited to just a camera which wasn't in one of your constraints perhaps you can move to using a range sensor like the Xbox <a href=\"http://en.wikipedia.org/wiki/Kinect\" rel=\"nofollow\">Kinect</a>. With this you can perform depth and colour based matched segmentation of the image. This allows for faster separation of objects in the image. You can then use ICP matching or similar techniques to even match the shape of the can rather then just its outline or colour and given that it is cylindrical this may be a valid option for any orientation if you have a previous 3D scan of the target. These techniques are often quite quick especially when used for such a specific purpose which should solve your speed problem. </p>\n\n<p>Also I could suggest, not necessarily for accuracy or speed but for fun you could use a trained neural network on your hue segmented image to identify the shape of the can. These are very fast and can often be up to 80/90% accurate. Training would be a little bit of a long process though as you would have to manually identify the can in each image. </p>\n", "title": "Image Processing: Algorithm Improvement for &#39;Coca-Cola Can&#39; Recognition", "answer_id": 10168866, "question_id": 10168686, "tags": ["c++", "algorithm", "image-processing", "opencv"]}, {"body": "<p>Fun problem: when I glanced at your bottle image I thought it was a can too. But, as a human, what I did to tell the difference is that I then noticed it was also a bottle...</p>\n\n<p>So, to tell cans and bottles apart, how about simply scanning for bottles first? If you find one, mask out the label before looking for cans.</p>\n\n<p>Not too hard to implement if you're already doing cans. The real downside is it doubles your processing time. (But thinking ahead to real-world applications, you're going to end up wanting to do bottles anyway ;-)</p>\n", "title": "Image Processing: Algorithm Improvement for &#39;Coca-Cola Can&#39; Recognition", "answer_id": 10168923, "question_id": 10168686, "tags": ["c++", "algorithm", "image-processing", "opencv"]}, {"body": "<p>This may be a very naive idea (or may not work at all), but the dimensions of all the coke cans are fixed. So may be if the same image contains both a can and a bottle then you can tell them apart by size considerations (bottles are going to be larger). Now because of missing depth (i.e. 3D mapping to 2D mapping) its possible that a bottle may appear shrunk and there isn't a size difference. You may recover some depth information using <a href=\"http://www.cs.cf.ac.uk/Dave/Vision_lecture/node11.html\">stereo-imaging</a> and then recover the original size.  </p>\n", "title": "Image Processing: Algorithm Improvement for &#39;Coca-Cola Can&#39; Recognition", "answer_id": 10168995, "question_id": 10168686, "tags": ["c++", "algorithm", "image-processing", "opencv"]}, {"body": "<p>An alternative approach would be to extract features (keypoints) using the <a href=\"http://en.wikipedia.org/wiki/Scale-invariant_feature_transform\">scale-invariant feature transform</a> (SIFT) or <a href=\"http://en.wikipedia.org/wiki/SURF\">Speeded Up Robust Features</a> (SURF).</p>\n\n<p>It is implemented in <a href=\"http://en.wikipedia.org/wiki/OpenCV\">OpenCV</a> 2.3.1.</p>\n\n<p>You can find a nice code example using features in <em><a href=\"http://opencv.itseez.com/doc/tutorials/features2d/feature_homography/feature_homography.html#feature-homography\">Features2D + Homography to find a known object</a></em></p>\n\n<p>Both algorithms are invariant to scaling and rotation. Since they work with features, you can also handle <a href=\"http://en.wikipedia.org/wiki/Ambient_occlusion\">occlusion</a> (as long as enough keypoints are visible).</p>\n\n<p><img src=\"http://i.stack.imgur.com/kF63R.jpg\" alt=\"Enter image description here\"></p>\n\n<p>Image source: tutorial example</p>\n\n<p>The processing takes a few hundred ms for SIFT, SURF is bit faster, but it not suitable for real-time applications. ORB uses FAST which is weaker regarding rotation invariance.</p>\n\n<h3>The original papers</h3>\n\n<ul>\n<li><a href=\"http://www.vision.ee.ethz.ch/~surf/eccv06.pdf\">SURF: Speeded Up Robust Features</a></li>\n<li><a href=\"http://www.cs.ubc.ca/~lowe/papers/ijcv04.pdf\">Distinctive Image Features\nfrom Scale-Invariant Keypoints</a></li>\n<li><a href=\"http://www.willowgarage.com/sites/default/files/orb_final.pdf\">ORB: an efficient alternative to SIFT or SURF</a></li>\n</ul>\n", "title": "Image Processing: Algorithm Improvement for &#39;Coca-Cola Can&#39; Recognition", "answer_id": 10169025, "question_id": 10168686, "tags": ["c++", "algorithm", "image-processing", "opencv"]}, {"body": "<p>I would detect red rectangles: RGB -> HSV, filter red -> binary image, <a href=\"http://undergraduate.csse.uwa.edu.au/units/CITS4240/Lectures/morphology.pdf\">close</a> (dilate then erode, known as <code>imclose</code> in matlab)</p>\n\n<p>Then look through rectangles from largest to smallest. Rectangles that have smaller rectangles in a known position/scale can both be removed (assuming bottle proportions are constant, the smaller rectangle would be a bottle cap). </p>\n\n<p>This would leave you with red rectangles, then you'll need to somehow detect the logos to tell if they're a red rectangle or a coke can. Like OCR, but with a known logo?</p>\n", "title": "Image Processing: Algorithm Improvement for &#39;Coca-Cola Can&#39; Recognition", "answer_id": 10169646, "question_id": 10168686, "tags": ["c++", "algorithm", "image-processing", "opencv"]}, {"body": "<p><strong>Looking at shape</strong></p>\n\n<p>Take a gander at the shape of the red portion of the can/bottle. Notice how the can tapers off slightly at the very top whereas the bottle label is straight. You can distinguish between these two by comparing the width of the red portion across the length of it.</p>\n\n<p><strong>Looking at highlights</strong></p>\n\n<p>One way to distinguish between bottles and cans is the material. A bottle is made of plastic whereas a can is made of aluminum metal. In sufficiently well-lit situations, looking at the specularity would be one way of telling a bottle label from a can label.</p>\n\n<p>As far as I can tell, that is how a human would tell the difference between the two types of labels. If the lighting conditions are poor, there is bound to be some uncertainty in distinguishing the two anyways. In that case, you would have to be able to detect the presence of the transparent/translucent bottle itself.</p>\n", "title": "Image Processing: Algorithm Improvement for &#39;Coca-Cola Can&#39; Recognition", "answer_id": 10170895, "question_id": 10168686, "tags": ["c++", "algorithm", "image-processing", "opencv"]}, {"body": "<p>Please take a look at Zdenek Kalal's <a href=\"http://info.ee.surrey.ac.uk/Personal/Z.Kalal/\">Predator tracker</a>. It requires some training, but it can actively learn how the tracked object looks at different orientations and scales and does it in realtime!</p>\n\n<p>The source code is available on his site. It's in <a href=\"http://en.wikipedia.org/wiki/MATLAB\">MATLAB</a>, but perhaps there is a Java implementation already done by a community member. I have succesfully re-implemented the tracker part of TLD in C#. If I remember correctly, TLD is using Ferns as the keypoint detector. I use either SURF or SIFT instead (already suggested by @stacker) to reacquire the object if it was lost by the tracker. The tracker's feedback makes it easy to build with time a dynamic list of sift/surf templates that with time enable reacquiring the object with very high precision.</p>\n\n<p>If you're interested in my C# implementation of the tracker, feel free to ask.</p>\n\n<p>Enjoy!  =D</p>\n", "title": "Image Processing: Algorithm Improvement for &#39;Coca-Cola Can&#39; Recognition", "answer_id": 10199026, "question_id": 10168686, "tags": ["c++", "algorithm", "image-processing", "opencv"]}, {"body": "<p>To speed things up, I would take advantage of the fact that you are not asked to find an arbitrary image/object, but specifically one with the Coca-Cola logo. This is significant because this logo is very distinctive, and it should have a characteristic, scale-invariant signature in the frequency domain, particularly in the red channel of RGB. That is to say, the alternating pattern of red-to-white-to-red encountered by a horizontal scan line (trained on a horizontally aligned logo) will have a distinctive \"rhythm\" as it passes through the central axis of the logo. That rhythm will \"speed up\" or \"slow down\" at different scales and orientations, but will remain proportionally equivalent. You could identify/define a few dozen such scanlines, both horizontally and vertically through the logo and several more diagonally, in a starburst pattern. Call these the \"signature scan lines.\"</p>\n\n<p><img src=\"http://i.stack.imgur.com/KWVZw.jpg\" alt=\"Signature scan line\"></p>\n\n<p>Searching for this signature in the target image is a simple matter of scanning the image in horizontal strips. Look for a high-frequency in the red-channel (indicating moving from a red region to a white one), and once found, see if it is followed by one of the frequency rhythms identified in the training session. Once a match is found, you will instantly know the scan-line's orientation and location in the logo (if you keep track of those things during training), so identifying the boundaries of the logo from there is trivial. </p>\n\n<p>I would be surprised if this weren't a linearly-efficient algorithm, or nearly so. It obviously doesn't address your can-bottle discrimination, but at least you'll have your logos. </p>\n\n<p>(Update: for bottle recognition I would look for coke (the brown liquid) adjacent to the logo --  that is, <em>inside</em> the bottle. Or, in the case of an empty bottle, I would look for a <em>cap</em> which will always have the same basic shape, size, and distance from the logo and will typically be all white or red. Search for a solid color eliptical shape where a cap <em>should</em> be, relative to the logo. Not foolproof of course, but your goal here should be to find the <em>easy</em> ones <em>fast</em>.)</p>\n\n<p>(It's been a few years since my image processing days, so I kept this suggestion high-level and conceptual. I think it might slightly approximate how a human eye might operate -- or at least how my brain does!)</p>\n", "title": "Image Processing: Algorithm Improvement for &#39;Coca-Cola Can&#39; Recognition", "answer_id": 10199154, "question_id": 10168686, "tags": ["c++", "algorithm", "image-processing", "opencv"]}, {"body": "<p>Isn't it difficult even for humans to distinguish between a bottle and a can in the second image (provided the transparent region of the bottle is hidden)?</p>\n\n<p>They are almost the same except for a very small region (that is, width at the top of the can is a little small while the wrapper of the bottle is the same width throughout, but a minor change right?).</p>\n\n<p>The first thing that came to my mind was to check for the red top of bottle. But it is still a problem, if there is no top for the bottle, or if it is partially hidden (as mentioned above).</p>\n\n<p>The second thing I thought was about the transparency of bottle. OpenCV has some works on finding transparent objects in an image. Check the below links.</p>\n\n<ul>\n<li><p><a href=\"http://code.opencv.org/projects/opencv/wiki/2012#2012-02-28\">OpenCV Meeting Notes Minutes 2012-03-05</a></p></li>\n<li><p><a href=\"http://code.opencv.org/projects/opencv/wiki/2012#2012-02-21\">OpenCV Meeting Notes Minutes 2012-02-21</a></p></li>\n</ul>\n\n<p>Particularly look at this to see how accurately they detect glass:</p>\n\n<ul>\n<li><a href=\"http://code.opencv.org/projects/opencv/wiki/2012#2012-04-24\">OpenCV Meeting Notes Minutes 2012-04-24</a></li>\n</ul>\n\n<p>See their implmentation result:</p>\n\n<p><img src=\"http://i.stack.imgur.com/eTYIn.jpg\" alt=\"Enter image description here\"></p>\n\n<p>They say it is the implementation of the paper <code>\"A Geodesic Active Contour Framework for Finding Glass\" by K. McHenry and J. Ponce, CVPR 2006.</code>. <a href=\"http://www.google.co.in/url?sa=t&amp;rct=j&amp;q=A%20Geodesic%20Active%20Contour%20Framework%20for%20Finding%20Glass&amp;source=web&amp;cd=1&amp;ved=0CCQQFjAA&amp;url=http://www-cvr.ai.uiuc.edu/ponce_grp/publication/paper/cvpr06a.pdf\">(Download paper)</a>.</p>\n\n<p>It might be helpful in your case a little bit, <em>but problem arises again if the bottle is filled.</em></p>\n\n<p>So I think here, you can search for the transparent body of the bottles first or for a red region connected to two transparent objects laterally which is obviously the bottle. (When working ideally, an image as follows.)</p>\n\n<p><img src=\"http://i.stack.imgur.com/HMSF6.png\" alt=\"Enter image description here\"></p>\n\n<p>Now you can remove the yellow region, that is, the label of the bottle and run your algorithm to find the can.</p>\n\n<p>Anyway, this solution also has different problems like in the other solutions.</p>\n\n<ol>\n<li>It works only if your bottle is empty. In that case, you will have to search for the red region between the two black colors (if the Coca Cola liquid is black).</li>\n<li>Another problem if transparent part is covered.</li>\n</ol>\n\n<p>But anyway, if there are none of the above problems in the pictures, this seems be to a better way.</p>\n", "title": "Image Processing: Algorithm Improvement for &#39;Coca-Cola Can&#39; Recognition", "answer_id": 10219338, "question_id": 10168686, "tags": ["c++", "algorithm", "image-processing", "opencv"]}, {"body": "<p>I'm not aware of OpenCV but looking at the problem logically I think you could differentiate between bottle and can by changing the image which you are looking for i.e. Coca Cola. You should incorporate till top portion of can as in case of can there is silver lining at top of coca cola and in case of bottle there will be no such silver lining.</p>\n\n<p>But obviously this algorithm will fail in cases where top of can is hidden, but in such case even human will not be able to differentiate between the two (if only coca cola portion of bottle/can is visible)</p>\n", "title": "Image Processing: Algorithm Improvement for &#39;Coca-Cola Can&#39; Recognition", "answer_id": 10223293, "question_id": 10168686, "tags": ["c++", "algorithm", "image-processing", "opencv"]}, {"body": "<p>I really like <a href=\"http://stackoverflow.com/a/10168923/517815\">Darren Cook's</a> and <a href=\"http://stackoverflow.com/a/10169025/517815\">stacker's answers</a> to this problem. I was in the midst of throwing my thoughts into a comment on those, but I believe my approach is too answer-shaped to not leave here.</p>\n\n<p>In short summary, you've identified an algorithm to determine that a Coca-Cola logo is present at a particular location in space. You're now trying to determine, for arbitrary orientations and arbitrary scaling factors, a heuristic suitable for distinguishing Coca-Cola <em>cans</em> from other objects, inclusive of: <em>bottles</em>, <em>billboards</em>, <em>advertisements</em>, and <em>Coca-Cola paraphernalia</em> all associated with this iconic logo. You didn't call out many of these additional cases in your problem statement, but I feel they're vital to the success of your algorithm.</p>\n\n<p>The secret here is determining what visual features a <em>can</em> contains or, through the negative space, what features are present for other Coke products that are not present for cans. To that end, <a href=\"http://stackoverflow.com/a/10168923/517815\">the current top answer</a> sketches out a basic approach for selecting \"can\" if and only if \"bottle\" is not identified, either by the presence of a bottle cap, liquid, or other similar visual heuristics.</p>\n\n<p>The problem is this breaks down. A bottle could, for example, be empty and lack the presence of a cap, leading to a false positive. Or, it could be <em>a partial bottle</em> with additional features mangled, leading again to false detection. Needless to say, this isn't elegant, nor is it effective for our purposes.</p>\n\n<p>To this end, the most correct selection criteria for cans appear to be the following:</p>\n\n<ul>\n<li>Is the shape of the object silhouette, as <a href=\"http://stackoverflow.com/q/10168686/517815\">you sketched out in your question</a>, correct? If so, +1.</li>\n<li>If we assume the presence of natural or artificial light, do we detect a chrome outline to the bottle that signifies whether this is made of aluminum? If so, +1.</li>\n<li>Do we determine that the <a href=\"http://en.wikipedia.org/wiki/Specular_reflection\">specular properties</a> of the object are correct, relative to our light sources (<a href=\"http://www.youtube.com/watch?v=oQhtzQ-UVbc\">illustrative video link</a> on <a href=\"http://ieeexplore.ieee.org/iel5/34/28314/01265865.pdf?arnumber=1265865\">light source detection</a>)? If so, +1.</li>\n<li>Can we determine any other properties about the object that identify it as a can, including, but not limited to, the topological image skew of the logo, the orientation of the object, the juxtaposition of the object (for example, on a planar surface like a table or in the context of other cans), and the presence of a pull tab? If so, for each, +1.</li>\n</ul>\n\n<p>Your classification might then look like the following:</p>\n\n<ul>\n<li>For each candidate match, if the presence of a Coca Cola logo was detected, draw a gray border.</li>\n<li>For each match over +2, draw a red border.</li>\n</ul>\n\n<p>This visually highlights to the user what was detected, emphasizing weak positives that may, correctly, be detected as mangled cans.</p>\n\n<p>The detection of each property carries a very different time and space complexity, and for each approach, a quick pass through <a href=\"http://dsp.stackexchange.com\">http://dsp.stackexchange.com</a> is more than reasonable for determining the most correct and most efficient algorithm for your purposes. My intent here is, purely and simply, to emphasize that <em>detecting if something is a can by invalidating a small portion of the candidate detection space</em> isn't the most robust or effective solution to this problem, and ideally, you should take the appropriate actions accordingly.</p>\n\n<p>And hey, congrats on <a href=\"http://news.ycombinator.com/item?id=3846063\">the Hacker News posting!</a> On the whole, this is a pretty terrific question worthy of the publicity it received. :)</p>\n", "title": "Image Processing: Algorithm Improvement for &#39;Coca-Cola Can&#39; Recognition", "answer_id": 10272868, "question_id": 10168686, "tags": ["c++", "algorithm", "image-processing", "opencv"]}, {"body": "<p>There are a bunch of color descriptors used to recognise objects, the paper below compares a lot of them. They are specially powerful when combined with SIFT or SURF. SURF or SIFT alone are not very useful in a coca cola can image because they don't recognise a lot of interest points, you need the color information to help. I use BIC (Border/Interior Pixel Classi\ufb01cation) with SURF in a project and it worked great to recognise objects.</p>\n\n<p><a href=\"http://sibgrapi.sid.inpe.br/col/sid.inpe.br/sibgrapi@80/2008/07.23.23.58/doc/penatti-ColorDescriptorsWeb.pdf\">Color descriptors for Web image retrieval: a comparative study</a></p>\n", "title": "Image Processing: Algorithm Improvement for &#39;Coca-Cola Can&#39; Recognition", "answer_id": 14141884, "question_id": 10168686, "tags": ["c++", "algorithm", "image-processing", "opencv"]}, {"body": "<p>I like your question, regardless of whether it's off topic or not :P</p>\n\n<p>An interesting aside; I've just completed a subject in my degree where we covered robotics and computer vision. Our project for the semester was incredibly similar to the one you describe.</p>\n\n<p>We had to develop a robot that used an Xbox Kinect to detect coke bottles and cans on any orientation in a variety of lighting and environmental conditions. Our solution involved using a band pass filter on the Hue channel in combination with the hough circle transform. We were able to constrain the environment a bit (we could chose where and how to position the robot and Kinect sensor), otherwise we were going to use the SIFT or SURF transforms.</p>\n\n<p>You can read about our approach on <a href=\"http://elucidatedbinary.com/blog/2012/12/03/kinect/\">my blog post on the topic</a> :)</p>\n", "title": "Image Processing: Algorithm Improvement for &#39;Coca-Cola Can&#39; Recognition", "answer_id": 14152005, "question_id": 10168686, "tags": ["c++", "algorithm", "image-processing", "opencv"]}, {"body": "<p>I like the challenge and wanted to give an answer, which solves the issue, I think. </p>\n\n<ol>\n<li>Extract features (keypoints, descriptors such as SIFT, SURF) of the logo </li>\n<li>Match the points with a model image of the logo (using Matcher such as Brute Force )</li>\n<li>Estimate the coordinates of the rigid body (PnP problem - SolvePnP)</li>\n<li>Estimate the cap position according to the rigid body </li>\n<li>Do back-projection and calculate the image pixel position (ROI) of the cap of the bottle (I assume you have the intrinsic parameters of the camera)</li>\n<li>Check with a method whether the cap is there or not. If there, then this is the bottle </li>\n</ol>\n\n<p>Detection of the cap is another issue. It can be either complicated or simple. If I were you, I would simply check the color histogram in the ROI for a simple decision.  </p>\n\n<p>Please, give the feedback if I am wrong. Thanks.  </p>\n", "title": "Image Processing: Algorithm Improvement for &#39;Coca-Cola Can&#39; Recognition", "answer_id": 18984048, "question_id": 10168686, "tags": ["c++", "algorithm", "image-processing", "opencv"]}, {"body": "<p>There is a computer vision package called HALCON from <a href=\"http://www.mvtec.com\" rel=\"nofollow\">MVTec</a> whose demos could give you good algorithm ideas. There is plenty of examples similar to your problem that you could run in demo mode and then look at the operators in the code and see how to implement them from existing OpenCV operators. </p>\n\n<p>I have used this package to quickly prototype complex algorithms for problems like this and then find how to implement them using existing OpenCV features. In particular for your case you could try to implement in OpenCV the functionality embedded in the operator <a href=\"http://www.halcon.com/download/reference/find_scaled_shape_model.html\" rel=\"nofollow\">find_scaled_shape_model</a>. Some operators point to the scientific paper regarding algorithm implementation which can help to find out how to do something similar in OpenCV. Hope this helps...</p>\n", "title": "Image Processing: Algorithm Improvement for &#39;Coca-Cola Can&#39; Recognition", "answer_id": 22975948, "question_id": 10168686, "tags": ["c++", "algorithm", "image-processing", "opencv"]}, {"body": "<p>Hmm, I actually think I'm onto <em>something</em> (this is like the most interesting question ever - so it'd be a shame not to continue trying to find the \"perfect\" answer, even though an acceptable one has been found)...</p>\n\n<p>Once you find the logo, your troubles are half done. Then you only have to figure out the differences between what's <strong>around</strong> the logo. Additionally, we want to do as little extra as possible. I think this is actually this easy part...</p>\n\n<p>What <em>is</em> around the logo? For a can, we can see metal, which despite the effects of lighting, does not change whatsoever in its basic colour. As long as we know the angle of the label, we can tell what's directly above it, so we're looking at the difference between these:</p>\n\n<p><img src=\"http://i.stack.imgur.com/tqB8d.jpg\" width=\"100\" height=\"100\" /></p>\n\n<p>Here, what's above and below the logo is completely dark, consistent in colour. Relatively easy in that respect.</p>\n\n<p><img src=\"http://i.stack.imgur.com/witbV.jpg\" width=\"100\" height=\"100\" /></p>\n\n<p>Here, what's above and below is light, but still consistent in colour. It's all-silver, and all-silver metal actually seems pretty rare, as well as silver colours in general. Additionally, it's in a thin slither and close enough to the red that has already been identified so you could trace its shape for its entire length to calculate a percentage of what can be considered the metal ring of the can. Really, you only need a small fraction of that anywhere along the can to tell it is part of it, but you still need to find a balance that ensures it's not just an empty bottle with something metal behind it.</p>\n\n<p><img src=\"http://i.stack.imgur.com/u9w9i.jpg\" width=\"100\" height=\"133\"></p>\n\n<p>And finally, the tricky one. But not so tricky, once we're only going by what we can see directly above (and below) the red wrapper. Its transparent, which means it will show whatever is behind it. That's good, because things that are behind it aren't likely to be as consistent in colour as the silver circular metal of the can. There could be many different things behind it, which would tell us that it's an empty (or filled with clear liquid) bottle, or a consistent colour, which could either mean that it's filled with liquid or that the bottle is simply in front of a solid colour. We're working with what's closest to the top and bottom, and the chances of the right colours being in the right place are relatively slim. We know it's a bottle, because it hasn't got that key visual element of the can, which is relatively simplistic compared to what could be behind a bottle.</p>\n\n<p><strong>(that last one was the best I could find of an empty large coca cola bottle - interestingly the cap AND ring are yellow, indicating that the redness of the cap probably shouldn't be relied upon)</strong></p>\n\n<p>In the rare circumstance that a similar shade of silver is behind the bottle, even after the abstraction of the plastic, or the bottle is somehow filled with the same shade of silver liquid, we can fall back on what we can roughly estimate as being the shape of the silver - which as I mentioned, is circular and follows the shape of the can. But even though I lack any certain knowledge in image processing, that sounds slow. Better yet, why not deduce this by for once checking around the <strong>sides</strong> of the logo to ensure there is nothing of the same silver colour there? Ah, but what if there's the same shade of silver behind a can? Then, we do indeed have to pay more attention to shapes, looking at the top and bottom of the can again. </p>\n\n<p>Depending on how flawless this all needs to be, it could be very slow, but I guess my basic concept is to check the easiest and closest things first. Go by colour differences around the already matched shape (which seems the most trivial part of this anyway) before going to the effort of working out the shape of the other elements. To list it, it goes:</p>\n\n<ul>\n<li>Find the main attraction (red logo background, and possibly the logo itself for orientation, though in case the can is turned away, you need to concentrate on the red alone)</li>\n<li>Verify the shape and orientation, yet again via the very distinctive redness</li>\n<li>Check colours around the shape (since it's quick and painless)</li>\n<li>Finally, if needed, verify the shape of those colours around the main attraction for the right roundness.</li>\n</ul>\n\n<p>In the event you can't do this, it probably means the top and bottom of the can are covered, and the only possible things that a human could have used to reliably make a distinction between the can and the bottle is the occlusion and reflection of the can, which would be a <strong>much</strong> harder battle to process. However, to go even further, you could follow the angle of the can/bottle to check for more bottle-like traits, using the semi-transparent scanning techniques mentioned in the other answers.</p>\n\n<p>Interesting additional nightmares might include a can conveniently sitting behind the bottle at such a distance that the metal of it just so happens to show above and below the label, which would still fail as long as you're scanning along the entire length of the red label - which is actually more of a problem because you're not detecting a can where you could have, as opposed to considering that you're actually detecting a bottle, including the can by accident. The glass is half empty, in that case!</p>\n\n<hr>\n\n<p>As a disclaimer, I have no experience in nor have ever thought about image processing outside of this question, but it is so interesting that it got me thinking pretty deeply about it, and after reading all the other answers, I consider this to possibly be the easiest <strong>and</strong> most efficient way to get it done. Personally, I'm just glad I don't <em>actually</em> have to think about programming this!</p>\n\n<p><strong>EDIT</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/AglOz.png\" alt=\"bad drawing of a can in MS paint\">\nAdditionally, look at this drawing I did in MS Paint... It's absolutely awful and quite incomplete, but based on the shape and colours alone, you can guess what it's probably going to be. In essence, these are the only things that one needs to bother scanning for. When you look at that very distinctive shape and combination of colours so close, what else could it possibly be? The bit I didn't paint, the white background, should be considered \"anything inconsistent\". If it had a transparent background, it could go over almost any other image and you could still see it.</p>\n", "title": "Image Processing: Algorithm Improvement for &#39;Coca-Cola Can&#39; Recognition", "answer_id": 24714828, "question_id": 10168686, "tags": ["c++", "algorithm", "image-processing", "opencv"]}, {"body": "<p>As alternative to all these nice solutions, you can train your own classifier and make your application robust to errors. As example, you can use <a href=\"http://note.sonots.com/SciSoftware/haartraining.html\" rel=\"nofollow\">Haar Training</a>, providing a good number of positive and negative images of your target.</p>\n\n<p>It can be useful to extract only cans and can be combined with the detection of transparent objects.</p>\n", "title": "Image Processing: Algorithm Improvement for &#39;Coca-Cola Can&#39; Recognition", "answer_id": 27287786, "question_id": 10168686, "tags": ["c++", "algorithm", "image-processing", "opencv"]}, {"body": "<p>I think the best difference between bottle label and can label is:\nBottle label is straight around the edges from top to bottom.\nCan image by the top is getting thinner.\nOther than that from perspective of algorithm is extremely hard to make difference.\nIn my algorithm, analyzing moments, I would specifically look for this feature.</p>\n", "title": "Image Processing: Algorithm Improvement for &#39;Coca-Cola Can&#39; Recognition", "answer_id": 37474793, "question_id": 10168686, "tags": ["c++", "algorithm", "image-processing", "opencv"]}], "link": "http://stackoverflow.com/questions/10168686/image-processing-algorithm-improvement-for-coca-cola-can-recognition", "question_id": 10168686}, {"body": "<p>I am trying to use <a href=\"http://en.wikipedia.org/wiki/Notepad%2B%2B\">Notepad++</a> as my all-in-one tool edit, run, compile, etc.</p>\n\n<p>I have <a href=\"http://en.wikipedia.org/wiki/Java_Virtual_Machine#Execution_environment\">JRE</a> installed, and I have setup my path variable to the .../bin directory.</p>\n\n<p>When I run my \"Hello world\" in Notepad++, I get this message:</p>\n\n<pre><code>java.lang.UnsupportedClassVersionError: test_hello_world :\n Unsupported major.minor version 51.0\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClassCond(Unknown Source)\n       .........................................\n</code></pre>\n\n<p>I think the problem here is about versions; some version of Java may be old or too new.</p>\n\n<ol>\n<li>How do I fix it?</li>\n<li>Should I install the JDK, and setup my path variable to the JDK instead of JRE?</li>\n<li>What is the difference between the <code>PATH</code> variable in JRE or JDK?</li>\n</ol>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"], "answers": [{"body": "<p>Don't worry, I got it solved.</p>\n\n<p>It is actually simple - you need to install BOTH JRE / JDK with the same version.</p>\n\n<p>JRE 6 -> JDK 6</p>\n\n<p>JRE 7 -> JDK 7</p>\n\n<p>And so on.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 10443722, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p><code>java.lang.UnsupportedClassVersionError</code> happens because of a higher JDK during compile time and lower JDK during runtime.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 11239393, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>The version number shown describes the version of the JRE the class file is compatible with.</p>\n\n<p>The reported major numbers are:</p>\n\n<pre><code>Java SE 9 = 53,\nJava SE 8 = 52,\nJava SE 7 = 51,\nJava SE 6.0 = 50,\nJava SE 5.0 = 49,\nJDK 1.4 = 48,\nJDK 1.3 = 47,\nJDK 1.2 = 46,\nJDK 1.1 = 45\n</code></pre>\n\n<p>(Source: <a href=\"https://en.wikipedia.org/wiki/Java_class_file#General_layout\">Wikipedia</a>)</p>\n\n<p>To fix the actual problem you should try to either run the Java code with a newer version of Java JRE or specify the target parameter to the Java compiler to instruct the compiler to create code compatible with earlier Java versions. </p>\n\n<p>For example, in order to generate class files compatible with Java 1.4, use the following command line:</p>\n\n<pre><code>javac -target 1.4 HelloWorld.java\n</code></pre>\n\n<p>With newer versions of the Java compiler you are likely to get a warning about the bootstrap class path not being set. More information about this error is available in blog post <em><a href=\"https://blogs.oracle.com/darcy/entry/bootclasspath_older_source\">New javac warning for setting an older source without bootclasspath</a></em>.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 11432195, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>This error means you're trying to load a Java \"class\" file that was compiled with a newer version of Java than you have installed.</p>\n\n<p>For example, your <code>.class</code> file could have been compiled for JDK 7, and you're trying to run it with JDK 6.</p>\n\n<p>So the solution is to either:</p>\n\n<ul>\n<li>Upgrade your Java runtime or</li>\n<li><p>Recompile the class if you have the source, using your local Java compiler (if you have one). </p>\n\n<p>javac FileName.java</p></li>\n</ul>\n\n<p>For developers, this can happen if another developer checks in a .class file, and they've got a newer version of java than you have!</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 14987879, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>In Eclipse, I just went to menu command <em>Window</em> -> <em>Preferences</em> -> <em>Java</em> -> <em>Compiler</em> and then set \"Compiler compliance level\" to 1.6.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 16345710, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>You can have some JAR library compiled in Java 7, and you have only Java 6 as Java Runtime. It  could happen with some new libraries.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 17297854, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>In Eclipse's menu <em>Window</em> -> <em>Preferences</em> -> <em>Java</em> -> <em>Compiler</em> check also \"Configure Project Specific Settings\".</p>\n\n<p>If you stil have the error with same Java version: try to delete build folder of your project manually. Then restart Eclipse.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 18077509, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>As answered elsewhere by several people, the Java program is being run on an older version of Java than the one it was compiled it for. It needs to be \"crosscompiled\" for backward compatibility. To put it another way, there is a mismatch between source and target Java versions.</p>\n\n<p>Changing options in Eclipse menus don't answer the original poster, who said he/she is not using Eclipse. On OpenJDK javac version 1.7, you can crosscompile for 1.6 if you use parameters <code>-source</code> and <code>-target</code>, plus provide the <em>rt.jar</em> -file of the target version (that is, the older one) at compile time. If you actually install the 1.6 JRE, you can point to its installation (for example, /usr/lib/jvm/java-6-openjdk-i386/jre/lib/rt.jar on Ubuntu, /usr/jdk/jdk1.6.0_60/jre/lib/rt.jar on SunOS apparently. Sorry, I don't know where it is on a Windows system). Like so:</p>\n\n<pre><code>javac -source 1.6 -target 1.6 -bootclasspath /usr/lib/jvm/java-6-openjdk-i386/jre/lib/rt.jar HelloWorld.java\n</code></pre>\n\n<p>It looks like you can just download rt.jar from the Internet, and point to it. This is not too elegant though:</p>\n\n<pre><code>javac -source 1.6 -target 1.6 -bootclasspath ./rt.jar HelloWorld.java\n</code></pre>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 18834769, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>You are trying to run your program with a Java version that does not support the version in which the code was compiled. <strong>So basically you must have compiled your code with a higher version and trying to run it using a lower version.</strong></p>\n\n<p>As you are getting</p>\n\n<pre><code>Unsupported major.minor version 51.0\n</code></pre>\n\n<p>and version <strong>51.0</strong> corresponds to <strong>J2SE 7</strong> you have most probably compiled your code in Java 7 and trying to run it using a lower version. Check what <code>java -version</code> displays. It should be the Java 7 version. If not make appropriate changes in the PATH/JAVA_HOME. Or you can compile with the same version you are trying to run the code. If the configurations are confusing you can always give absolute path <code>/home/user/jdk1.7.0_11/bin/javac</code> and <code>/home/user/jdk1.7.0_11/bin/java</code>.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 19111845, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I have faced the same problem when I was working with an <a href=\"http://en.wikipedia.org/wiki/Apache_Ant\" rel=\"nofollow\">Ant</a> script to build my application.</p>\n\n<p>I use <a href=\"http://en.wikipedia.org/wiki/Eclipse_%28software%29\" rel=\"nofollow\">Eclipse</a> for my application development, and I changed the compiler version in build properties of the project. But that didn't work for me. Then I found out that I can provide the compiler version in the Ant script.</p>\n\n<p>I modified the Ant script at the section where it compile Java files.</p>\n\n<pre><code>&lt;target name=\"build-java\" depends=\"prepare-build\"&gt;\n    &lt;echo message=\"Compiling java files\"/&gt;\n    &lt;javac ....\n           target=\"1.5\"...\n    &lt;/javac&gt;\n&lt;/target&gt;\n</code></pre>\n\n<p>This worked for me to resolve the unsupported major minor issue.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 19353132, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>When I installed <a href=\"http://en.wikipedia.org/wiki/Java_Development_Kit\">JDK</a> 1.7, the problem got solved.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 20965499, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I had a similar situation on Mac, and the following process worked for me:</p>\n\n<p>In the terminal, type</p>\n\n<pre><code>vi ~/.profile\n</code></pre>\n\n<p>Then add this line in the file, and save</p>\n\n<pre><code>export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk&lt;version&gt;.jdk/Contents/Home\n</code></pre>\n\n<p>where version is the one on your computer, such as <code>1.7.0_25</code>.</p>\n\n<p>Exit the editor, then type the following command make it become effective</p>\n\n<pre><code>source ~/.profile \n</code></pre>\n\n<p>Then type java -version to check the result</p>\n\n<pre><code>java -version \n</code></pre>\n\n<p>What is <code>.profile</code> file?</p>\n\n<blockquote>\n  <p>.profile file is a hidden file. It is an optional file which tells the system which commands to run when the user whose profile file it is logs in. For example, if my username is bruno and there is a .profile file in /Users/bruno/, all of its contents will be executed during the log-in procedure.</p>\n</blockquote>\n\n<p>Source: <a href=\"http://computers.tutsplus.com/tutorials/speed-up-your-terminal-workflow-with-command-aliases-and-profile--mac-30515\">http://computers.tutsplus.com/tutorials/speed-up-your-terminal-workflow-with-command-aliases-and-profile--mac-30515</a></p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 21695143, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I had the same error message when running Ant from Eclipse, but the other solutions mentioned here didn't solve my problem. The funny thing was that running Ant from the Windows command line was running fine, so it had to be a configuration issue within Eclipse.</p>\n\n<p>It turned out that under Eclipse you can specify the environment that Ant should be running with and this was set as a JRE instead of a JDK.</p>\n\n<ul>\n<li>Go to: Run -> External Tools -> External Tools Configurations ...</li>\n<li>Select the Ant build.xml for your project (if you have multiple projects)</li>\n<li>Activate the Tab 'JRE'</li>\n<li>Here was selected 'Separate JRE: jre6'. When I changed this to a JDK from the 1.6 or 1.7 series, the error was gone.</li>\n</ul>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 21699403, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>If somebody is facing the same issue while using <a href=\"http://en.wikipedia.org/wiki/Apache_Maven\" rel=\"nofollow\">Maven</a>, you can cross compile using the plug-in <em><a href=\"http://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html\" rel=\"nofollow\">Maven Compiler</a></em>.</p>\n\n<h3> </h3>\n\n<pre><code> &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.6&lt;/source&gt;\n                    &lt;target&gt;1.6&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n       .....\n</code></pre>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 22298353, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>First let's get some basics right...</p>\n\n<p>JRE is a component in <a href=\"http://en.wikipedia.org/wiki/NetBeans\" rel=\"nofollow\">NetBeans</a>/<a href=\"http://en.wikipedia.org/wiki/Eclipse_%28software%29\" rel=\"nofollow\">Eclipse</a>/standalone that is going to provide you with libraries, JVM, Java plugins &amp; Java web start. Note that it does not provide compliers or debuggers.</p>\n\n<p>JDK is the superset of JRE along with compliers and debuggers.</p>\n\n<p>So when you have your default library as a JRE instead of JDK, you are going to have a nice time importing stuff, but it won't compile.</p>\n\n<p>Instead, set your path to JDK (I use NetBeans, and I set them using netbeans.conf in netbeans/etc/netbeans.conf and change the path).</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 22514103, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>Today, this error message appeared in our <a href=\"http://en.wikipedia.org/wiki/Apache_Tomcat\" rel=\"nofollow\">Tomcat</a> 7 on <a href=\"http://en.wikipedia.org/wiki/List_of_Ubuntu_releases#Ubuntu_12.04_LTS_.28Precise_Pangolin.29\" rel=\"nofollow\">Ubuntu 12.04.2 LTS</a> (Precise Pangolin):</p>\n\n<blockquote>\n  <p>/var/log/tomcat7/localhost.2014-04-08.log: <br/>\n  Apr 8, 2014 9:00:55 AM org.apache.catalina.core.StandardContext filterStart <br/>\n  SEVERE: Exception starting filter struts2 <br/>\n  java.lang.UnsupportedClassVersionError: controller/ReqAccept : Unsupported major.minor version 51.0 (unable to load class controller.ReqAccept)</p>\n</blockquote>\n\n<p>The <a href=\"http://en.wikipedia.org/wiki/Apache_Struts\" rel=\"nofollow\">Struts</a> application is compiled with Java 7.</p>\n\n<p>It turned out, someone uses \"service tomcat [stop/start]\" to restart Tomcat 7,</p>\n\n<blockquote>\n  <p>$ ps -ef | grep java<br>\n  tomcat7  31783 1 32 20:13 ? 00:00:03 /usr/lib/jvm/default-java/bin/java...<br>\n  $ /usr/lib/jvm/default-java/bin/java -version<br>\n  java version \"1.6.0_27\"</p>\n</blockquote>\n\n<p>Which causes the \"Unsupported major.minor version 51.0\" error.</p>\n\n<p>When we used \"/etc/init.d/tomcat7 [stop/start]\" to restart Tomcat 7, the problem was solved.</p>\n\n<blockquote>\n  <p>$ ps -ef | grep java<br>\n  tomcat7  31886 1 80 20:24 ? 00:00:10 /usr/local/java/jdk1.7.0_15/bin/java<br>\n  $ /usr/local/java/jdk1.7.0_15/bin/java -version<br>\n  java version \"1.7.0_15\"</p>\n</blockquote>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 22927824, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>Had this problem when I reverted to Java 6 and tried to run classes previously compiled with Java 7. What worked for me was Preferences > java > compiler --> set compliance level to 1.6 and crucially \"configure project settings\".. </p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 23073993, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>Based on this...</p>\n\n<pre><code>J2SE 8 = 52\nJ2SE 7 = 51\nJ2SE 6.0 = 50\nJ2SE 5.0 = 49\nJDK 1.4 = 48\nJDK 1.3 = 47\nJDK 1.2 = 46\nJDK 1.1 = 45\n</code></pre>\n\n<p>In Eclipse, right click on project in package explorer:</p>\n\n<p><strong>Build Path</strong> -> <strong>Configure Build Path</strong></p>\n\n<p>Under:</p>\n\n<p><strong>Java Build Path</strong> -> <strong>Libraries</strong> -> <strong>Add Library</strong> -> <strong>JRE System Library</strong> -> <strong>Installed JREs</strong> -> <strong>Search</strong>.</p>\n\n<p>Add the required JRE by selecting the library in the list available after the search is complete.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 23907333, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I had the problem whereby I was having to run a Maven compilation on my project from the command line in order to run my unit tests; if I made a change to the test class and let Eclipse automatically recompile it, then I got the \"Unsupported major.minor version 51.0\" error.</p>\n\n<p>I do have both JDK6 and JDK7 installed, but all my JRE settings were pointing at 1.6, both in the pom and from the project properties page in Eclipse. No amount of Maven Update Project and/or refreshing solved this.</p>\n\n<p>Finally I tried closing the project and re-opening it, and this seemed to fix it! HTH</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 24290721, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>You have compiled your Java class with JDK 7 and you are trying to run same class on JDK 6 .</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 24424941, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<ul>\n<li>Install JDK 7.0.55 and set the Java for <a href=\"http://en.wikipedia.org/wiki/Eclipse_%28software%29\" rel=\"nofollow\">Eclipse</a> for JDK 7.0.55.</li>\n<li>Build the project with JDK 7.0.55 by configuring on build path JDK 7.0.55.</li>\n<li>Set the compiler in Eclipse for JDK 7.0.55 by menu <em>Windows</em> -> <em>Preferences</em> -> <em>Java</em> -> <em>Compiler</em> - choose 1.7.</li>\n</ul>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 25116527, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I solved it. I ran:</p>\n\n<pre><code>JAVA_HOME=/usr/lib/jvm/java-7-openjdk-i386\n</code></pre>\n\n<p>The error is misleading, <code>Unsupported major.minor version 51.0</code>. This gives the impression that version 51 (Java 7) is not supported. And we should use Java 6.</p>\n\n<p>The error should have been:</p>\n\n<blockquote>\n  <p>The current Java version, 50, is unsupported. Use Java version 7 (51:0 and greater) instead.`</p>\n</blockquote>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 25439289, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I got the same problem with a project written in 1.7 and tried to execute in 1.6.</p>\n\n<p>My solution in Eclipse:</p>\n\n<ul>\n<li><p>Right click on your Project <strong>Properties -> Java Build Path -> Libraries</strong></p></li>\n<li><p>Select your JRE System Library and click <strong>Edit</strong> on the right, and choose the target JRE.</p></li>\n<li><p>Now go to <strong>Java Compiler</strong> on the left, and change the <strong>Compiler compliance level</strong> to your target. </p></li>\n</ul>\n\n<p>That worked for me.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 25601324, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I got the same problem, and I fixed this issue by <a href=\"http://brianoneill.blogspot.in/2012/11/installing-jdk-7-on-mac-os-x.html\" rel=\"nofollow\">this solution</a> on a Mac. I hope it helps someone.  It's because the system doesn't know about the newer version of JDK, and it still points to the old JDK.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 25664462, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>You have used a higher version of the JDK to compile and trying to run from a lower version of JDK/<a href=\"http://en.wikipedia.org/wiki/Java_Virtual_Machine#Execution_environment\" rel=\"nofollow\">JRE</a>.</p>\n\n<p>To check this, see the version information:</p>\n\n<pre><code>javac -version\n\njava -version\n</code></pre>\n\n<p>They will be different and javac will have a higher version number.</p>\n\n<p>To get around this, run using java from the JDK version or if you have a newer JRE/JDK that will work as well.</p>\n\n<p><code>which javac</code> will tell you the location, for example, <code>/usr/bin/javac</code>. Just run directly using <code>/usr/bin/java &lt;program&gt;</code>.</p>\n\n<p>OR you can set the environment variable as a permanent solution.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 26007105, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I had the same situation but any of above tips didn't help :) In our environment we had tomcat running as a service on Windows. We installed Java 1.7 and set up JAVA_HOME on this version. Off course the sources were built on Java 1.7. Nevertheless the tomcat said that it use previous version of JVM. After a deep analized turn out that the Tomcat service installed on Windows still keeping the old value for JAVA_HOME pointing to Java 1.6. After installing new Tomcat service everything were resolved.\nSo the conclusion is: When you change java version and tomcat running as a service, you have to reinstall tomcat service.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 27190279, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<blockquote>\n  <p>How do I fix it?</p>\n</blockquote>\n\n<p>This error means that the JRE that is being used to execute your class code does not recognise the version of Java used. Usually because the version of Java that generated your class file (i.e. compiled it) is newer.</p>\n\n<p>To fix it, you can either </p>\n\n<p>a) Compile your Java sources with the same, or older, version of the Java compiler as will be sued to run it. i.e. Install the appropriate JDK</p>\n\n<p>b) Compile your Java sources with the newer version of the Java compiler but in compatibility mode. i.e. use the <code>-target</code> parameter.</p>\n\n<p>c) Run your compiled classes in a JRE that is the same, or newer, version as the JDK used to compile the classes.</p>\n\n<p>You can check the versions you are currently using with\n<code>javac -version</code> for the compiler, and <code>java -version</code> for the runtime.</p>\n\n<blockquote>\n  <p>Should I install the JDK, and setup my path variable to the JDK\n  instead of JRE?</p>\n</blockquote>\n\n<p>For compilation, certainly, install and configure the specific JDK that you want.</p>\n\n<p>For runtime, you can use the one that comes with the JDK or a standalone JRE, but regardless, make sure that you have installed the right versions and that you have configured your PATH such that there are no surprises.</p>\n\n<blockquote>\n  <p>What is the difference between the PATH variable in JRE or JDK?</p>\n</blockquote>\n\n<p>The PATH environment variable tells the command shell where to look for the command you type. When you type <code>java</code>, the command shell interpreter will look through all the locations specified in the <code>PATH</code> variable, from left to right, to find the appropriate <code>java</code> runtime executable to run. If you have multiple versions of Java installed - i.e. you have the <code>java</code> executable in multiple locations specified in the PATH variable, then the first one encountered when going from left to right will be the one that is executed.</p>\n\n<p>The compiler command is <code>javac</code> and only comes with the JDK. The runtime command is <code>java</code> and comes with the JDK and is in the JRE.</p>\n\n<p>It is likely that you have one version (51.0 = Java 7) of <code>javac</code> installed, and you also have the same version of <code>java</code> installed, but that another previous version of <code>java</code> is appearing earlier in the PATH and so is being invoked instead of the one you expect.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 29275199, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>The most common issue is misconfiguration of your <code>JAVA_HOME</code> variable which should point to the right Java Development Kit library, if you've multiple installed.</p>\n\n<p>See also:</p>\n\n<h3>Debian/Ubuntu</h3>\n\n<p>To check which java (openjdk) you've installed, check via:</p>\n\n<pre><code>dpkg -l \"openjdk*\" | grep ^i\n</code></pre>\n\n<p>You may use:</p>\n\n<pre><code>sudo update-alternatives --config java\n</code></pre>\n\n<p>to select the alternative java version.</p>\n\n<p>Or check which are available for install:</p>\n\n<pre><code>sudo apt-cache search ^openjdk\n</code></pre>\n\n<p>Then you can install, for example:</p>\n\n<pre><code>sudo apt-get install openjdk-7-jre\n</code></pre>\n\n<h3>Fedora, Oracle Linux, Red Hat</h3>\n\n<p>Install/upgrade appropriate package via:</p>\n\n<pre><code>yum install java-1.7.0-openjdk java-1.7.0-openjdk-devel\n</code></pre>\n\n<blockquote>\n  <p>The <code>java-1.7.0-openjdk</code> package contains just the Java Runtime Environment. If you want to develop Java programs then install the <code>java-1.7.0-openjdk-devel</code> package.</p>\n</blockquote>\n\n<h3>BSD</h3>\n\n<p>There is an OpenJDK 7 package in the FreeBSD Ports collection called <a href=\"http://www.freshports.org/java/openjdk7/\">openjdk7</a> which probably needs to be reconfigured.</p>\n\n<p>See: <a href=\"https://wiki.openjdk.java.net/display/BSDPort/Main\">OpenJDK wiki page</a>.</p>\n\n<h3>Windows</h3>\n\n<p>Just install appropriate  Java SE Development Kit library from the <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html\">Oracle site</a> or install </p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 29446295, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>Oh Mac OS X I was able to solve this problem by setting the JAVA_HOME variable:</p>\n\n<pre><code>export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.7.0_75.jdk/Contents/Home\n</code></pre>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 29534315, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I got the same issue with Spring Source Tool(STS) IDE for grails project. I checked the installed java version and the project java version were 1.7.*. Later I found that in <strong>GGTS.ini</strong> file the java version was set to 1.6:</p>\n\n<p><strong>Solution:</strong></p>\n\n<p>-Dosgi.requiredJavaVersion=1.6 changed to<br>\n-Dosgi.requiredJavaVersion=1.7<br>\nAdd below two lines before -vmargs<br>\n-vm<br>\njdk1.7.0_21/jre/lib/amd64/server/libjvm.so</p>\n\n<p>Problem solved. Happy coding.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 29717289, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>Yet another way to fix this on Mac OS X with homebrew installed, is this:</p>\n\n<pre><code>brew install Caskroom/cask/java\n</code></pre>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 31805886, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>Add to your pom.xml</p>\n\n<pre><code>&lt;project ....&gt;\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>where 1.7 is the Java version you intend to use. This overwrites the maven compiler setting, so it's good to debug from here.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 32327057, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I solved this issue for me by checking that Maven Dependencies were being deployed in Deployment Assembly. In my case they were not. Adding it fixed the problem</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 33458079, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<ul>\n<li>If you use maven set your java compile level. Open command line write <strong>java -version</strong> for your compile level.</li>\n</ul>\n\n<p><a href=\"http://i.stack.imgur.com/oyfMl.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/oyfMl.png\" alt=\"enter image description here\"></a></p>\n\n<ul>\n<li>If you use IntelliJ IDEA select project->File->Settings->Build Execution Deployment -> Compiler -> Java Compiler then change byte code as 1.7 like image\n<a href=\"http://i.stack.imgur.com/GXStV.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/GXStV.png\" alt=\"enter image description here\"></a> </li>\n</ul>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 33494080, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>If you have a second project added to your build path make sure it has the <strong>same compiler version</strong> as your first one:\nProperties -> Java Compiler -> Compiler compliance level</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 38416698, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I'm using OS X 10.11.5 and I tried setting JAVA_HOME and forcing the \"correct\" java version via maven. Nothing helped.</p>\n\n<p>The problem happened when the OS X account was logged out while the application was still running. After logging in again, OS X opened the old terminal session with greyed out history. I used the same terminal session to build the project but failed with the unsupported class version error.</p>\n\n<p>Cleaning the maven project didn't help at all.</p>\n\n<p>To solve the problem, I simply had to close the auto-opened terminal window and use a new one.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 38475951, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>Your java file is compiled with a different version (higher compiler version) than the version (lower runtime version) you are trying to run it with.</p>\n\n<p>It is basic understanding that classes compiled with lower versions are expected to run in the later higher versions. But the opposite (compiled with higher compiler version and trying to run it with lower runtime version) is quite not possible sometimes.  </p>\n\n<p>Hence you are shown this error, when trying to execute your program. <strong>Unsupported major.minor version x.x</strong></p>\n\n<blockquote>\n  <p><strong>Q:</strong> I have created an application in Java 7, but when my users try to\n  run it they get an Unsupported major.minor version 51.0 error. What\n  does this mean and what can I do about it?</p>\n  \n  <p><strong>A:</strong> If you compile an application using javac in Java 7, the resulting classfiles will have the 51.0 version number. Versions of\n  Java prior to 7 do not recogize this number, so your users will have\n  to upgrade to Java 7 prior to running your application. If you are not\n  using any Java 7 APIs you can try to compile your application using\n  javac -target 1.6 to create a 1.6-compatible classfile. If your\n  application is deployed using webstart you can specify the minimum\n  version required. For more information, see the docs on Java Web Start\n  and JNLP here. This issue will go away once we trigger autoupdate to\n  Java 7 for end-users currently having Java 6 on their desktops. The\n  timeline for this is not yet determined, we want to give developers\n  time to work out any issues between their code and JDK 7 first.</p>\n</blockquote>\n\n<p>(Source: <a href=\"https://blogs.oracle.com/henrik/entry/java_7_questions_answers\" rel=\"nofollow\">oracle.com</a>)</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 39474551, "question_id": 10382929, "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}], "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi", "question_id": 10382929}, {"body": "<p>I bumped into this strange macro code in <a href=\"https://github.com/torvalds/linux/blob/ff2d8b19a3a62559afba1c53360c8577a7697714/include/linux/kernel.h#L677-L682\">/usr/include/linux/kernel.h</a>:</p>\n\n<pre><code>/* Force a compilation error if condition is true, but also produce a\n   result (of value 0 and type size_t), so the expression can be used\n   e.g. in a structure initializer (or where-ever else comma expressions\n   aren't permitted). */\n#define BUILD_BUG_ON_ZERO(e) (sizeof(struct { int:-!!(e); }))\n#define BUILD_BUG_ON_NULL(e) ((void *)sizeof(struct { int:-!!(e); }))\n</code></pre>\n\n<p>What does <code>:-!!</code> do?</p>\n", "title": "What is &quot;:-!!&quot; in C code?", "tags": ["c", "linux", "macros", "linux-kernel"], "answers": [{"body": "<p>The <code>:</code> is a bitfield. As for <code>!!</code>, that is <a href=\"http://stackoverflow.com/questions/248693/double-negation-in-c-code\">logical double negation</a> and so returns <code>0</code> for false or <code>1</code> for true. And the <code>-</code> is a minus sign, i.e. arithmetic negation.</p>\n\n<p>It's all just a trick to get the compiler to barf on invalid inputs.</p>\n\n<p>Consider <code>BUILD_BUG_ON_ZERO</code>. When <code>-!!(e)</code> evaluates to a negative value, that produces a compile error. Otherwise <code>-!!(e)</code> evaluates to 0,  and a 0 width bitfield has size of 0. And hence the macro evaluates to a <code>size_t</code> with value 0.</p>\n\n<p>The name is weak in my view because the build in fact fails when the input is <em>not</em> zero.</p>\n\n<p><code>BUILD_BUG_ON_NULL</code> is very similar, but yields a pointer rather than an <code>int</code>.</p>\n", "title": "What is &quot;:-!!&quot; in C code?", "answer_id": 9229662, "question_id": 9229601, "tags": ["c", "linux", "macros", "linux-kernel"]}, {"body": "<p>It's creating a size <code>0</code> bitfield if the condition is false, but a size <code>-1</code> (<code>-!!1</code>) bitfield if the condition is true/non-zero.  In the former case, there is no error and the struct is initialized with an int member.  In the latter case, there is a compile error (and no such thing as a size <code>-1</code> bitfield is created, of course).</p>\n", "title": "What is &quot;:-!!&quot; in C code?", "answer_id": 9229667, "question_id": 9229601, "tags": ["c", "linux", "macros", "linux-kernel"]}, {"body": "<p>This is, in effect, <strong>a way to check whether the expression e can be evaluated to be 0, and if not, to fail the build</strong>.</p>\n\n<p>The macro is somewhat misnamed; it should be something more like <code>BUILD_BUG_OR_ZERO</code>, rather than <code>...ON_ZERO</code>. (There have been <strong><a href=\"http://lkml.indiana.edu/hypermail/linux/kernel/0703.1/1546.html\">occasional discussions about whether this is a confusing name</a></strong>.)</p>\n\n<p>You should read the expression like this:</p>\n\n<pre><code>sizeof(struct { int: -!!(e); }))\n</code></pre>\n\n<ol>\n<li><p><code>(e)</code>: Compute expression <code>e</code>.</p></li>\n<li><p><code>!!(e)</code>: Logically negate twice: <code>0</code> if <code>e == 0</code>; otherwise <code>1</code>.</p></li>\n<li><p><code>-!!(e)</code>: Numerically negate: <code>0</code> if <code>e == 0</code>; otherwise <code>-1</code>.</p></li>\n<li><p><code>struct{int: -!!(0);} --&gt; struct{int: 0;}</code>: If it was zero, then we declare a struct with an anonymous integer bitfield that has width zero. Everything is fine and we proceed as normal.</p></li>\n<li><p><code>struct{int: -!!(1);} --&gt; struct{int: -1;}</code>: On the other hand, if it <em>isn't</em> zero, then it will be some negative number. Declaring any bitfield with <em>negative</em> width is a compilation error.</p></li>\n</ol>\n\n<p>So we'll either wind up with a bitfield that has width 0 in a struct, which is fine, or a bitfield with negative width, which is a compilation error. Then we take <code>sizeof</code> that field, so we get a <code>size_t</code> with the appropriate width (which will be zero in the case where <code>e</code> is zero).</p>\n\n<hr/>\n\n<p>Some people have asked: <strong>Why not just use an <code>assert</code>?</strong></p>\n\n<p><a href=\"http://stackoverflow.com/a/9230305/75170\">keithmo's answer</a> here has a good response:</p>\n\n<blockquote>\n  <p>These macros implement a compile-time test, while assert() is a run-time test.</p>\n</blockquote>\n\n<p>Exactly right. You don't want to detect problems in your <em>kernel</em> at runtime that could have been caught earlier! It's a critical piece of the operating system. To whatever extent problems can be detected at compile time, so much the better.</p>\n", "title": "What is &quot;:-!!&quot; in C code?", "answer_id": 9229793, "question_id": 9229601, "tags": ["c", "linux", "macros", "linux-kernel"]}, {"body": "<p>Some people seem to be confusing these macros with <code>assert()</code>.</p>\n\n<p>These macros implement a compile-time test, while <code>assert()</code> is a run-time test.</p>\n", "title": "What is &quot;:-!!&quot; in C code?", "answer_id": 9230305, "question_id": 9229601, "tags": ["c", "linux", "macros", "linux-kernel"]}, {"body": "<p>Well, I am quite surprised that the alternatives to this syntax have not been mentioned.  Another common (but older) mechanism is to call a function that isn't defined and rely on the optimizer to compile-out the function call if your assertion is correct.</p>\n\n<pre><code>#define MY_COMPILETIME_ASSERT(test)              \\\n    do {                                         \\\n        extern void you_did_something_bad(void); \\\n        if (!(test))                             \\\n            you_did_something_bad(void);         \\\n    } while (0)\n</code></pre>\n\n<p>While this mechanism works (as long as optimizations are enabled) it has the downside of not reporting an error until you link, at which time it fails to find the definition for the function you_did_something_bad().  That's why kernel developers starting using tricks like the negative sized bit-field widths and the negative-sized arrays (the later of which stopped breaking builds in GCC 4.4).</p>\n\n<p>In sympathy for the need for compile-time assertions, GCC 4.3 introduced the the <a href=\"http://gcc.gnu.org/onlinedocs/gcc-4.8.1/gcc/Function-Attributes.html#index-g_t_0040code_007bflatten_007d-function-attribute-2586\"><code>error</code> function attribute</a> that allows you to extend upon this older concept, but generate a compile-time error with a message of your choosing -- no more cryptic \"negative sized array\" error messages!</p>\n\n<pre><code>#define MAKE_SURE_THIS_IS_FIVE(number)                          \\\n    do {                                                        \\\n        extern void this_isnt_five(void) __attribute__((error(  \\\n                \"I asked for five and you gave me \" #number))); \\\n        if ((number) != 5)                                      \\\n            this_isnt_five();                                   \\\n    } while (0)\n</code></pre>\n\n<p>In fact, as of Linux 3.9, we now have a macro called <a href=\"http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/include/linux/compiler.h?id=9e895ace5d82df8929b16f58e9f515f6d54ab82d#n337\"><code>compiletime_assert</code></a> which uses this feature and most of the macros in <a href=\"http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/include/linux/bug.h?id=9e895ace5d82df8929b16f58e9f515f6d54ab82d\"><code>bug.h</code></a> have been updated accordingly.  Still, this macro can't be used as an initializer.  However, using by <a href=\"http://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html#Statement-Exprs\"><em>statement expressions</em></a> (another GCC C-extension), you can!</p>\n\n<pre><code>#define ANY_NUMBER_BUT_FIVE(number)                           \\\n    ({                                                        \\\n        typeof(number) n = (number);                          \\\n        extern void this_number_is_five(void) __attribute__(( \\\n                error(\"I told you not to give me a five!\"))); \\\n        if (n == 5)                                           \\\n            this_number_is_five();                            \\\n        n;                                                    \\\n    })\n</code></pre>\n\n<p>This macro will evaluate its parameter exactly once (in case it has side-effects) and create a compile-time error that says \"I told you not to give me a five!\" if the expression evaluates to five or is not a compile-time constant.</p>\n\n<p>So why aren't we using this instead of negative-sized bit-fields? Alas, there are currently many restrictions of the use of statement expressions, including their use as constant initializers (for enum constants, bit-field width, etc.) even if the statement expression is completely constant its self (i.e., can be fully evaluated at compile-time and otherwise passes the <a href=\"http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html#index-g_t_005f_005fbuiltin_005fconstant_005fp-3386\"><code>__builtin_constant_p()</code></a> test).  Further, they cannot be used outside of a function body.</p>\n\n<p>Hopefully, GCC will amend these shortcomings soon and allow constant statement expressions to be used as constant initializers.  The challenge here is the language specification defining what is a legal constant expression.  C++11 added the constexpr keyword for just this type or thing, but no counterpart exists in C11.  While C11 did get static assertions, which will solve part of this problem, it wont solve all of these shortcomings.  So I hope that gcc can make a constexpr functionality available as an extension via -std=gnuc99 &amp; -std=gnuc11 or some such and allow its use on statement expressions et. al.</p>\n", "title": "What is &quot;:-!!&quot; in C code?", "answer_id": 17338165, "question_id": 9229601, "tags": ["c", "linux", "macros", "linux-kernel"]}], "link": "http://stackoverflow.com/questions/9229601/what-is-in-c-code", "question_id": 9229601}, {"body": "<p>I am not sure whether it is possible to <code>scp</code> a folder from remote to local, but still I am left with no other options. I use ssh to log into my server and from there I would like to copy the folder <code>foo</code> to <code>home/user/Desktop</code> (my local). Is there any command so that I can do this?</p>\n", "title": "How to scp a folder from remote to local?", "tags": ["shell", "command-line", "copy", "scp"], "answers": [{"body": "<pre><code>scp -r user@your.server.example.com:/path/to/foo /home/user/Desktop/\n</code></pre>\n\n<p>From <code>man scp</code></p>\n\n<pre><code>-r Recursively copy entire directories\n</code></pre>\n", "title": "How to scp a folder from remote to local?", "answer_id": 11304926, "question_id": 11304895, "tags": ["shell", "command-line", "copy", "scp"]}, {"body": "<p>To use full power of <strong>scp</strong> you need to go through next steps:</p>\n\n<ol>\n<li><a href=\"http://serverfault.com/questions/2429/how-do-you-setup-ssh-to-authenticate-using-keys-instead-of-a-username-password\"><strong>Public key authorisation</strong></a></li>\n<li><a href=\"http://nerderati.com/2011/03/simplify-your-life-with-an-ssh-config-file\"><strong>Create ssh aliases</strong></a></li>\n</ol>\n\n<p>Then, for example if you'll have this <strong>~/.ssh/config</strong>:</p>\n\n<pre><code>Host test\n    User testuser\n    HostName test-site.com\n    Port 22022\n\nHost prod\n    User produser\n    HostName production-site.com\n    Port 22022\n</code></pre>\n\n<p>you'll save yourself from password entry and simplify <strong>scp</strong> syntax like this:</p>\n\n<pre><code>scp -r prod:/path/foo /home/user/Desktop   # copy to local\nscp -r prod:/path/foo test:/tmp            # copy from remote prod to remote test\n</code></pre>\n\n<p>More over, you will be able to use remote path-completion:</p>\n\n<pre><code>scp test:/var/log/  # press tab twice\nDisplay all 151 possibilities? (y or n)\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>For enabling remote bash-completion you need to have bash-shell on both <code>&lt;source&gt;</code> and <code>&lt;target&gt;</code> hosts, and properly working bash-completion. For more information see related questions:</p>\n\n<p><a href=\"http://unix.stackexchange.com/questions/33336/how-to-enable-autocompletion-for-remote-paths-when-using-scp\">How to enable autocompletion for remote paths when using scp?</a><br>\n<a href=\"http://serverfault.com/questions/26768/scp-filename-tab-completion\">SCP filename tab completion</a></p>\n", "title": "How to scp a folder from remote to local?", "answer_id": 20368457, "question_id": 11304895, "tags": ["shell", "command-line", "copy", "scp"]}, {"body": "<p>Better to first compress catalog on remote server:</p>\n\n<pre><code>tar czfP backup.tar.gz /path/to/catalog\n</code></pre>\n\n<p>Secondly, download from remote:</p>\n\n<pre><code>scp user@your.server.example.com:/path/to/backup.tar.gz .\n</code></pre>\n\n<p>At the end, extract the files:</p>\n\n<pre><code>tar -xzvf backup.tar.gz\n</code></pre>\n", "title": "How to scp a folder from remote to local?", "answer_id": 23931989, "question_id": 11304895, "tags": ["shell", "command-line", "copy", "scp"]}, {"body": "<p>What I always use is:</p>\n\n<pre><code>scp -r username@IP:/path/to/server/source/folder/  .\n</code></pre>\n\n<p><strong>. (dot)</strong> :  it means <code>current folder</code>. so copy from server and paste here only.</p>\n\n<p><strong>IP</strong> :  can be an IP address like <code>125.55.41.311</code> or it can be host like <code>ns1.mysite.com</code>.</p>\n", "title": "How to scp a folder from remote to local?", "answer_id": 24135482, "question_id": 11304895, "tags": ["shell", "command-line", "copy", "scp"]}, {"body": "<p>And if you have one hell of a files to download from the remote location and if you don't much care about security, try changing the scp default encryption (Triple-DES) to something like 'blowfish'.</p>\n\n<p>This will reduce file copying time drastically.</p>\n\n<pre><code>scp -c blowfish -r user@your.server.example.com:/path/to/foo /home/user/Desktop/\n</code></pre>\n", "title": "How to scp a folder from remote to local?", "answer_id": 24256706, "question_id": 11304895, "tags": ["shell", "command-line", "copy", "scp"]}, {"body": "<pre><code>scp -r -P port usrname@ip:/path-to-folder  .\n</code></pre>\n\n<p>example:\n<strong>scp -r -P 27000 abc@10.70.12.12:/tmp/hotel_dump .</strong></p>\n\n<pre><code>port = 27000\nusername = \"abc\" , remote server username\npath-to-folder = tmp/hotel_dump\n. = current local directory\n</code></pre>\n", "title": "How to scp a folder from remote to local?", "answer_id": 31239879, "question_id": 11304895, "tags": ["shell", "command-line", "copy", "scp"]}, {"body": "<p>Go to Files on your unity toolbar</p>\n\n<p><a href=\"http://i.stack.imgur.com/ZD6gk.png\"><img src=\"http://i.stack.imgur.com/ZD6gk.png\" alt=\"enter image description here\"></a></p>\n\n<p>Press Ctrl + l and write here_goes_your_user_name@192.168.10.123</p>\n\n<p>The 192.168.1.103  is the host that you want to connect.</p>\n\n<p>The here one example</p>\n\n<p><a href=\"http://i.stack.imgur.com/TFZ4B.png\"><img src=\"http://i.stack.imgur.com/TFZ4B.png\" alt=\"enter image description here\"></a></p>\n", "title": "How to scp a folder from remote to local?", "answer_id": 33618253, "question_id": 11304895, "tags": ["shell", "command-line", "copy", "scp"]}, {"body": "<p>I dont know why but I was had to use local folder before source server directive . to make it work </p>\n\n<pre><code>scp -r . root@888.888.888.888:/usr/share/nginx/www/example.org\n</code></pre>\n", "title": "How to scp a folder from remote to local?", "answer_id": 36946339, "question_id": 11304895, "tags": ["shell", "command-line", "copy", "scp"]}, {"body": "<p>To copy all from <strong>Local Location</strong> to <strong>Remote Location</strong> (Upload)</p>\n\n<pre><code>scp -r /path/to/file username@hostname:/path/to/destination\n</code></pre>\n\n<p>To copy all from <strong>Remote Location</strong> to <strong>Local Location</strong> (Download)</p>\n\n<pre><code>scp -r username@hostname:/path/to/file /path/to/destination\n</code></pre>\n\n<p>Custom Port where <code>xxxx</code> is custom port number</p>\n\n<pre><code> scp -r -p xxxx username@hostname:/path/to/file /path/to/destination\n</code></pre>\n\n<p><strong>Help:</strong> </p>\n\n<ol>\n<li><code>-r</code> Recursively copy all directories and Files</li>\n<li>Always use full location from <code>/</code>, Get full location by <code>pwd</code></li>\n<li>This will work over only default port SSH <code>22</code></li>\n<li><code>scp</code> will replace all existing files</li>\n<li><code>hostname</code> will be hostname or IP address</li>\n<li>if need custom port <code>scp</code> than use <code>-p Port Number</code> with both command</li>\n</ol>\n\n<p><strong>Note:</strong> Some time custom port can be not work due to port not allowed on the firewall, so make sure that custom port is allowed on the firewall for incoming and outgoing connection </p>\n", "title": "How to scp a folder from remote to local?", "answer_id": 37387546, "question_id": 11304895, "tags": ["shell", "command-line", "copy", "scp"]}, {"body": "<p>The question was how to copy a folder from remote to local with <code>scp</code> command.</p>\n\n<p><code>$ scp -r userRemote@remoteIp:/path/remoteDir /path/localDir</code></p>\n\n<p>But here is the better way for do it with <code>sftp</code> - SSH File Transfer Protocol (also Secure File Transfer Protocol, or SFTP) is a network protocol that provides file access, file transfer, and file management over any reliable data stream.(wikipedia).</p>\n\n<p><code>$ sftp user_remote@remote_ip</code></p>\n\n<p><code>sftp&gt; cd /path/to/remoteDir</code> </p>\n\n<p><code>sftp&gt; get -r remoteDir</code></p>\n\n<p><code>Fetching /path/to/remoteDir to localDir 100%  398  0.4KB/s   00:00</code></p>\n\n<p>For help about <code>sftp</code> command just type <code>help</code> or <code>?</code>.</p>\n", "title": "How to scp a folder from remote to local?", "answer_id": 38949896, "question_id": 11304895, "tags": ["shell", "command-line", "copy", "scp"]}], "link": "http://stackoverflow.com/questions/11304895/how-to-scp-a-folder-from-remote-to-local", "question_id": 11304895}, {"body": "<p>I have a div tag which contains text, and I want to align the contents of this div vertically center.</p>\n\n<p>Here is my div style:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>#box\r\n{\r\n  height: 90px;\r\n  width: 270px;\r\n  background: #000;\r\n  font-size: 48px;\r\n  font-style: oblique;\r\n  color: #FFF;\r\n  text-align: center;\r\n  margin-top: 20px;\r\n  margin-left: 5px;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div Id=\"box\"&gt;\r\n  Lorem ipsum dolor sit amet, consectetur adipiscing elit.\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>What is the best way to do this?</p>\n", "title": "How to vertically center text with CSS?", "tags": ["html", "css", "vertical-alignment"], "answers": [{"body": "<p>You can try this basic approach:</p>\n\n<pre><code>#box {\n  height: 90px;\n  line-height: 90px;\n}\n</code></pre>\n\n<p><a href=\"http://jsfiddle.net/BRxKX/\">Demo</a></p>\n\n<p>It only works for a single line of text though, because we set the line's height to the same height as the containing box element.</p>\n\n<hr>\n\n<h2>A more versatile approach</h2>\n\n<p>And here is another way to align text vertically. This solution will work for a single line and multiple lines of text, but it still requires a fixed height container:</p>\n\n<pre><code>&lt;div&gt;\n  &lt;span&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit.&lt;/span&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The CSS just sizes the <code>&lt;div&gt;</code>, vertically center aligns the <code>&lt;span&gt;</code> by setting the <code>&lt;div&gt;</code>'s line-height equal to its height, and makes the <code>&lt;span&gt;</code> an inline-block with <code>vertical-align: middle</code>. Then it sets the line-height back to normal for the <code>&lt;span&gt;</code>, so its contents will flow naturally inside the block.</p>\n\n<pre><code>div {\n  width: 250px;\n  height: 100px;\n  line-height: 100px;\n  text-align: center;\n}\n\nspan {\n  display: inline-block;\n  vertical-align: middle;\n  line-height: normal;      \n}\n</code></pre>\n\n<p><a href=\"http://jsfiddle.net/CtH9k/\">Demo</a></p>\n\n<hr>\n\n<h2>Simulating table display</h2>\n\n<p>And here is another option, which may not work on older <a href=\"http://caniuse.com/css-table\">browsers that don't support <code>display: table</code> and <code>display: table-cell</code></a> (basically that means Internet Explorer 7). The HTML is the same as the second example:</p>\n\n<pre><code>&lt;div&gt;\n  &lt;span&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit.&lt;/span&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Using CSS we 'simulate' table display behavior, since tables support vertical alignment:</p>\n\n<pre><code>div {\n  display: table;\n  width: 250px;\n  height: 100px;\n  text-align: center;\n}\n\nspan {\n  display: table-cell;\n  vertical-align: middle;\n}\n</code></pre>\n\n<p><a href=\"http://jsfiddle.net/D4quh/\">Demo</a></p>\n\n<hr>\n\n<h2>Using absolute positioning</h2>\n\n<p>This technique uses an absolutely positioned element setting top, bottom, left and right to 0. It is described in more detail in an article in Smashing Magazine, <em><a href=\"http://coding.smashingmagazine.com/2013/08/09/absolute-horizontal-vertical-centering-css/\">Absolute Horizontal And Vertical Centering In CSS</a></em>.</p>\n", "title": "How to vertically center text with CSS?", "answer_id": 8865463, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p>You can easily do this by adding the following piece of CSS code:</p>\n\n<pre><code>display: table-cell;\nvertical-align: middle;\n</code></pre>\n\n<p>That means your CSS finally looks like:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>#box {\r\n  height: 90px;\r\n  width: 270px;\r\n  background: #000;\r\n  font-size: 48px;\r\n  font-style: oblique;\r\n  color: #FFF;\r\n  text-align: center;\r\n  margin-top: 20px;\r\n  margin-left: 5px;\r\n  display: table-cell;\r\n  vertical-align: middle;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div id=\"box\"&gt;\r\n  Some text\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n", "title": "How to vertically center text with CSS?", "answer_id": 8865488, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p>For a single line of text (or a single character) you can use this technique:</p>\n\n<p>It <strong>can</strong> be used when <code>#box</code> has non-fixed, <strong>relative height in %</strong>.</p>\n\n<p><code>&lt;div id=\"box\"&gt;&lt;/div&gt;</code></p>\n\n<pre><code>#box::before {\n    display: block;\n    content: \"\";\n    height: 50%;\n}\n\n#box::after {\n    vertical-align: top;\n    line-height: 0;\n    content: \"TextContent\";\n}\n</code></pre>\n\n<p>See live demo at <a href=\"http://jsbin.com/ipujIyeM/2/edit?html,css,output\" rel=\"nofollow\">JsBin</a> (easier to edit CSS) or <a href=\"http://jsfiddle.net/47j7a/\" rel=\"nofollow\">JsFiddle</a> (easier to change height of result frame).</p>\n\n<p>If you want to place inner text in HTML, not in CSS, then you need to wrap text content in additional <em>inline</em> element and edit <code>#box::after</code> to match it. (And, of course, <code>content:</code> property should be removed.)<br>\nFor example,<br>\n<code>&lt;div id=\"box\"&gt;&lt;span&gt;TextContent&lt;/span&gt;&lt;/div&gt;</code><br>\nIn this case <code>#box::after</code> should be replaced to <code>#box span</code>.</p>\n\n<p>For IE8 support you must replace <code>::</code> with <code>:</code>.</p>\n", "title": "How to vertically center text with CSS?", "answer_id": 21503471, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p>Another way (not mentioned here yet) is with <a href=\"http://www.w3.org/TR/css3-flexbox/\">Flexbox</a>.</p>\n\n<p>Just add the following code to the <strong>container</strong> element:</p>\n\n<pre><code>display: flex;\njustify-content: center; /* align horizontal */\nalign-items: center; /* align vertical */\n</code></pre>\n\n<h2><a href=\"http://jsfiddle.net/danield770/4rrL4/594/\">Flexbox demo 1</a></h2>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.box {\r\n  height: 150px;\r\n  width: 400px;\r\n  background: #000;\r\n  font-size: 24px;\r\n  font-style: oblique;\r\n  color: #FFF;\r\n  text-align: center;\r\n  padding: 0 20px;\r\n  margin: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n  /* align horizontal */\r\n  align-items: center;\r\n  /* align vertical */\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class=\"box\"&gt;\r\n  Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Alternatively, instead of aligning the content via the <em>container</em>, flexbox can also center the a <strong>flex item</strong> with an <a href=\"https://www.w3.org/TR/css-flexbox-1/#auto-margins\">auto margin</a> <em>when there is only one flex-item in the flex container</em> (like the example given in the question above).</p>\n\n<p>So to center the flex item both horizontally and vertically just set it with <code>margin:auto</code></p>\n\n<h2><a href=\"http://jsfiddle.net/danield770/4rrL4/815/\">Flexbox Demo 2</a></h2>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.box {\r\n  height: 150px;\r\n  width: 400px;\r\n  background: #000;\r\n  font-size: 24px;\r\n  font-style: oblique;\r\n  color: #FFF;\r\n  text-align: center;\r\n  padding: 0 20px;\r\n  margin: 20px;\r\n  display: flex;\r\n}\r\n.box span {\r\n  margin: auto;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class=\"box\"&gt;\r\n  &lt;span&gt;margin:auto on a flex item centers it both horizontally and vertically&lt;/span&gt; \r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>NB:</strong> All the above applies to centering items while laying them out in <strong>horizontal rows</strong>. This is also the default behavior, because by default the value for <code>flex-direction</code> is <code>row</code>. If, however flex-items need to be laid out in <strong>vertical columns</strong>, then <code>flex-direction: column</code> should be set on the container to set the main-axis as column and additionally the <code>justify-content</code> and <code>align-items</code> properties now work <em>the other way around</em> with <code>justify-content: center</code> centering vertically and  <code>align-items: center</code> centering horizontally)</p>\n\n<h2><a href=\"http://jsfiddle.net/danield770/4rrL4/888/\"><code>flex-direction: column</code> demo</a></h2>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.box {\r\n  height: 150px;\r\n  width: 400px;\r\n  background: #000;\r\n  font-size: 18px;\r\n  font-style: oblique;\r\n  color: #FFF;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  /* vertically aligns items */\r\n  align-items: center;\r\n  /* horizontally aligns items */\r\n}\r\np {\r\n  margin: 5px;\r\n  }</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class=\"box\"&gt;\r\n  &lt;p&gt;\r\n    When flex-direction is column...\r\n  &lt;/p&gt;\r\n  &lt;p&gt;\r\n    \"justify-content: center\" - vertically aligns\r\n  &lt;/p&gt;\r\n  &lt;p&gt;\r\n    \"align-items: center\" - horizontally aligns\r\n  &lt;/p&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>A good place to start with Flexbox to see some of it's features and get syntax for maximum browser support is <a href=\"http://the-echoplex.net/flexyboxes/\">flexyboxes</a> </p>\n\n<p>Also, browser support nowadays is very good: <a href=\"http://caniuse.com/#feat=flexbox\">caniuse</a></p>\n\n<p>For cross-browser compatibility for <code>display: flex</code> and <code>align-items</code>, you can use the following:</p>\n\n<pre><code>display: -webkit-box;\ndisplay: -webkit-flex;\ndisplay: -moz-box;\ndisplay: -ms-flexbox;\ndisplay: flex;\n-webkit-flex-align: center;\n-ms-flex-align: center;\n-webkit-align-items: center;\nalign-items: center;\n</code></pre>\n", "title": "How to vertically center text with CSS?", "answer_id": 22218694, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p>The simple and versatile way is (as michielvoo table approach):</p>\n\n<pre><code>[ctrv]{\n    display:table !important;\n}\n\n[ctrv] &gt; *{ /* adressing direct discendents */\n      display:table-cell;\n      vertical-align: middle;\n      // text-align: center; /* optional */\n}\n</code></pre>\n\n<p>Using this attribute (or a equivalent class) on a parent tag works even for many childs to align:</p>\n\n<pre><code>&lt;parent ctrv&gt;  &lt;ch1/&gt;  &lt;ch2/&gt;   &lt;/parent&gt;\n</code></pre>\n", "title": "How to vertically center text with CSS?", "answer_id": 22251069, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p>All credit goes to this link owner @Sebastian Ekstr\u00f6m <a href=\"http://zerosixthree.se/vertical-align-anything-with-just-3-lines-of-css/\">Link</a>; please go through this. See it in action <a href=\"http://codepen.io/sebastianekstrom/pen/kzEhe\">codepen</a>. By reading the above article I also created <a href=\"http://jsfiddle.net/hegvLmee/1/\">a demo fiddle</a>.</p>\n\n<p>With just three lines of CSS (excluding vendor prefixes) we can do it with the help of a transform: translateY vertically centers whatever we want, even if we don\u2019t know its height.</p>\n\n<p>The CSS property transform is usually used for rotating and scaling elements, but with its translateY function we can now vertically align elements. Usually this must be done with absolute positioning or setting line-heights, but these require you to either know the height of the element or only works on single-line text, etc.</p>\n\n<p>So, to do this we write:</p>\n\n<pre><code>.element {\n    position: relative;\n    top: 50%;\n    transform: translateY(-50%);\n} \n</code></pre>\n\n<p>That\u2019s all you need. It is a similar technique to the absolute-position method, but with the upside that we don\u2019t have to set any height on the element or position-property on the parent. It works straight out of the box, even in <a href=\"http://en.wikipedia.org/wiki/Internet_Explorer_9\">Internet&nbsp;Explorer&nbsp;9</a>!</p>\n\n<p>To make it even more simple, we can write it as a mixin with its vendor prefixes.</p>\n", "title": "How to vertically center text with CSS?", "answer_id": 25242776, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p><strong>Flexible approach</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>div {\r\n  width: 250px;\r\n  min-height: 50px;\r\n  line-height: 50px;\r\n  text-align: center;\r\n  border: 1px solid #123456;\r\n  margin-bottom:5px;\r\n}\r\nspan {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  line-height: normal;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div&gt;\r\n  &lt;span&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit.&lt;br /&gt;\r\n    Lorem ipsum dolor sit amet, consectetur adipiscing elit.&lt;br /&gt;\r\n    Lorem ipsum dolor sit amet, consectetur adipiscing elit.&lt;/span&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;\r\n  &lt;span&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit.&lt;/span&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;\r\n  &lt;span&gt;Lorem ipsum dolor sit amet.&lt;/span&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n", "title": "How to vertically center text with CSS?", "answer_id": 25546207, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p>A better, easier, responsive approach is to set <code>margin-top</code> in CSS to around 45%:</p>\n\n<pre><code>margin-top: 45%;\n</code></pre>\n\n<p>You might have to play with that number, but it will be in the center of the surrounding div.</p>\n", "title": "How to vertically center text with CSS?", "answer_id": 25625496, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p>Another way:</p>\n\n<p>Don't set the <code>height</code> attribute of the <code>div</code>, but instead use <code>padding:</code> to achieve the effect.  Similarly to line-height, it only works if you have one line of text.  Although this way, if you have more content, the text will still be centered, but the div itself will be slightly larger.</p>\n\n<p>So instead of going with:</p>\n\n<pre><code>div {\n  height:120px;\n  line-height: 120px;\n}\n</code></pre>\n\n<p>You can say:</p>\n\n<pre><code>div {\n   padding: 60px 0; //Maybe 60 minus font-size divided by two, if you want to be  exact\n}\n</code></pre>\n\n<p>This will set the top and bottom <code>padding</code> of the <code>div</code> to <code>60px</code>, and the left and right <code>padding</code> to zero, making the <code>div</code> 120px (plus the height of your font) high, and placing the text vertically centered in the div.</p>\n", "title": "How to vertically center text with CSS?", "answer_id": 26087916, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p>For reference and to add a simpler answer:</p>\n\n<p>Pure CSS:</p>\n\n<pre><code>.vertical-align {\n    position: relative;\n    top: 50%;\n    -webkit-transform: translateY(-50%);\n    -ms-transform: translateY(-50%);\n    transform: translateY(-50%);\n}\n</code></pre>\n\n<p>Or as a SASS/SCSS Mixin:</p>\n\n<pre><code>@mixin vertical-align {\n    position: relative;\n    top: 50%;\n    -webkit-transform: translateY(-50%);\n    -ms-transform: translateY(-50%);\n    transform: translateY(-50%);\n}\n</code></pre>\n\n<p>Use by:</p>\n\n<pre><code>.class-to-center {\n    @include vertical-align;\n}\n</code></pre>\n\n<p>By Sebastian Ekstr\u00f6m's blog post <em><a href=\"http://zerosixthree.se/vertical-align-anything-with-just-3-lines-of-css/\">Vertical align anything with just 3 lines of CSS</a></em>:</p>\n\n<p>This method can cause elements to be blurry due to the element being placed on a \u201chalf pixel\u201d. A solution for this is to set its parent element to preserve-3d. Like following:</p>\n\n<pre><code>.parent-element {\n    -webkit-transform-style: preserve-3d;\n    -moz-transform-style: preserve-3d;\n    transform-style: preserve-3d;\n}\n</code></pre>\n\n<p>We live in 2015+ and <a href=\"https://en.wikipedia.org/wiki/CSS_Flex_Box_Layout\">Flex Box</a> is supported by every major modern browser.</p>\n\n<p>It will be the way websites are made from here on out.</p>\n\n<p><strong><em>Learn it!</em></strong></p>\n", "title": "How to vertically center text with CSS?", "answer_id": 26565610, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p>I needed a row of clickable elephants, vertically centered, but without using a table to get around some Internet&nbsp;Explorer&nbsp;9 weirdness. I eventually found the nicest CSS (for my needs) and it's great in Firefox, Chrome, and Internet&nbsp;Explorer&nbsp;11 .. sadly Internet&nbsp;Explorer&nbsp;9 is still laughing at me :( Someone might find this handy...</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>div  { border:1px dotted blue;  display:inline;        line-height:100px;   height:100px; }\r\nspan { border:1px solid red;    display:inline-block;  line-height:normal;  vertical-align:middle; }\r\n.out { border:3px solid silver; display:inline-block;  }</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class=\"out\" onclick=\"alert(1)\"&gt;\r\n  &lt;div&gt; &lt;span&gt;&lt;img src=\"http://www.birdfolk.co.uk/littleredsolo.png\"/&gt;&lt;/span&gt; &lt;/div&gt;\r\n  &lt;div&gt; &lt;span&gt;A lovely clickable option.&lt;/span&gt; &lt;/div&gt;\r\n&lt;/div&gt;\r\n\r\n&lt;div class=\"out\" onclick=\"alert(2)\"&gt;\r\n  &lt;div&gt; &lt;span&gt;&lt;img src=\"http://www.birdfolk.co.uk/bang2/Ship01.png\"/&gt;&lt;/span&gt; &lt;/div&gt;\r\n  &lt;div&gt; &lt;span&gt;Something charming to click on.&lt;/span&gt; &lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>(Obviously you don't need the borders, but they can help you see how it works!)</p>\n", "title": "How to vertically center text with CSS?", "answer_id": 26650193, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p>I would just like to extend the answer from @michielvoo in order to release need for line-height and breathing of div height. It is basically just simplified version like this:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>div {\r\n  width: 250px;\r\n  /* height: 100px;\r\n  line-height: 100px; */\r\n  text-align: center;\r\n  border: 1px solid #123456;\r\n  backgrond-color: #bbbbff;\r\n  padding: 10px;\r\n  margin: 10px;\r\n}\r\n\r\nspan {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n\r\n  line-height: normal;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div&gt;\r\n  &lt;span&gt;All grown-ups were once children... but only few of them remember it&lt;/span&gt;\r\n&lt;/div&gt;\r\n\r\n&lt;div&gt;\r\n  &lt;span&gt;And now here is my secret, a very simple secret: It is only with the heart that one can see rightly; what is essential is invisible to the eye.&lt;/span&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>NOTE: commented out part of CSS is needed for <strong>fixed-height</strong> of enclosing div.</p>\n", "title": "How to vertically center text with CSS?", "answer_id": 28658649, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<pre><code>.element{position: relative;top: 50%;transform: translateY(-50%);}\n</code></pre>\n\n<p>Add this small code in the CSS property of your element. It is awesome. Try it!</p>\n", "title": "How to vertically center text with CSS?", "answer_id": 29058077, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p>The solution accepted as the answer is perfect to use <code>line-height</code> the same as the height of div, but this solution does not work perfectly when text is wrapped OR is in two lines.</p>\n\n<p>Try this one if text is wrapped or is on multiple lines inside a div.</p>\n\n<pre><code>#box\n{\n  display: table-cell;\n  vertical-align: middle;\n}\n</code></pre>\n\n<p>For more reference, see:</p>\n\n<ul>\n<li><p><em><a href=\"https://css-tricks.com/vertically-center-multi-lined-text/\" rel=\"nofollow\">Vertically Center Multi-Lined Text</a></em></p></li>\n<li><p><em><a href=\"http://www.vanseodesign.com/css/vertical-centering/\" rel=\"nofollow\">6 Methods For Vertical Centering With CSS</a></em></p></li>\n</ul>\n", "title": "How to vertically center text with CSS?", "answer_id": 31112161, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p>Newer browsers now support the CSS <code>calc</code> function. If you are targeting these browsers you may want to look into doing something like this:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div style=\"position: relative; width: 400px; height: 400px; background-color: red\"&gt;\r\n  &lt;span style=\"position: absolute; line-height: 40px; height: 80px; text-align: center; width: 300px; overflow: hidden; top: calc(50% - 40px); left: calc(50% - 150px);\"&gt;\r\n    Here are two lines that will be centered even if the parent div changes size.\r\n  &lt;/span&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>The key is to use <code>style = \"top: calc(50% - [innerFixedHeightInPX/2]px); height: [innerFixedHeightInPX]px;\"</code> inside an absolute or relatively positioned parent div.</p>\n", "title": "How to vertically center text with CSS?", "answer_id": 32657952, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p><strong>For all your vertical alignment needs!</strong></p>\n\n<p>Declare this Mixin:</p>\n\n<pre><code>@mixin vertical-align($position: relative) {\n  position: $position;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  -ms-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n</code></pre>\n\n<p>Then include it in your element:</p>\n\n<pre><code>.element{\n    @include vertical-align();\n}\n</code></pre>\n", "title": "How to vertically center text with CSS?", "answer_id": 33374169, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p>Try <a href=\"http://codepen.io/hicTech/pen/emvMBw\" rel=\"nofollow\">this solution</a>:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.EXTENDER {\r\n    position: absolute;\r\n    top: 0px;\r\n    left: 0px;\r\n    bottom: 0px;\r\n    right: 0px;\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow-y: hidden;\r\n    overflow-x: hidden;\r\n}\r\n\r\n.PADDER-CENTER {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: -webkit-box;\r\n    display: -moz-box;\r\n    display: -ms-flexbox;\r\n    display: -webkit-flex;\r\n    display: flex;\r\n    -webkit-box-pack: center;\r\n    -moz-box-pack: center;\r\n    -ms-flex-pack: center;\r\n    -webkit-justify-content: center;\r\n    justify-content: center;\r\n    -webkit-box-align: center;\r\n    -moz-box-align: center;\r\n    -ms-flex-align: center;\r\n    -webkit-align-items: center;\r\n    align-items: center;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class=\"EXTENDER\"&gt;\r\n  &lt;div class=\"PADDER-CENTER\"&gt;\r\n    &lt;div contentEditable=\"true\"&gt;Edit this text...&lt;/div&gt;\r\n  &lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Built using <a href=\"http://www.css.plus\" rel=\"nofollow\">CSS+</a>.</p>\n", "title": "How to vertically center text with CSS?", "answer_id": 34027117, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p>Here is working code:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>body{\r\n  margin:0;\r\n}\r\ndiv {\r\n  height: 80px;\r\n  background: #171717;\r\n  font-size: 24px;\r\n  text-align: center;\r\n  font-style: normal;\r\n  color: #FFF;\r\n  margin-top: 18px;\r\n  margin-left: 4px;\r\n  line-height: 80px;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;html xmlns=\"http://www.w3.org/1999/xhtml\"&gt;\r\n  &lt;head&gt;\r\n    &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /&gt;\r\n    &lt;title&gt;Align text vertically center in div using CSS&lt;/title&gt;\r\n  &lt;/head&gt;\r\n\r\n  &lt;body&gt;\r\n    &lt;div&gt;\r\n      &lt;span&gt;&lt;a class=\"btn\" href=\"http://ownanswers.com/\"\r\n               rel=\"dofollow\"&gt;OwnAnswers.com&lt;/a&gt;\r\n      &lt;/span&gt;\r\n      For asking your questions, visit this site.\r\n    &lt;/div&gt;\r\n  &lt;/body&gt;\r\n&lt;/html&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>Result</strong></p>\n\n<p><a href=\"http://i.stack.imgur.com/OyddC.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/OyddC.png\" alt=\"Enter image description here\"></a></p>\n", "title": "How to vertically center text with CSS?", "answer_id": 34589544, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p>You can also use below properties.</p>\n\n<pre><code>display: flex; \nalign-content: center; \njustify-content : center;\n</code></pre>\n", "title": "How to vertically center text with CSS?", "answer_id": 36642010, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p>A very simple &amp; most powerful solution to vertically align center:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.outer-div {\r\n  height: 100px;\r\n  width: 200px;\r\n  text-align: center;\r\n  border: 1px solid #000;\r\n}\r\n\r\n.inner {\r\n  position: relative;\r\n  top: 45%;\r\n  transform: translateY(-45%);\r\n  color: red;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class=\"outer-div\"&gt;\r\n  &lt;span class=\"inner\"&gt;No data available&lt;/span&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n", "title": "How to vertically center text with CSS?", "answer_id": 36888826, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p>Set it within <code>button</code> instead of <code>div</code> if you don't care about its little visually 3d effect. </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>#box\r\n{\r\n  height: 120px;\r\n  width: 300px;\r\n  background: #000;\r\n  font-size: 48px;\r\n  font-style: oblique;\r\n  color: #FFF;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;button Id=\"box\" disabled&gt;\r\n  Lorem ipsum dolor sit amet, consectetur adipiscing elit.\r\n&lt;/button&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n", "title": "How to vertically center text with CSS?", "answer_id": 38355976, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p><a href=\"https://css-tricks.com/vertically-center-multi-lined-text/\" rel=\"nofollow\">This</a> works perfectly </p>\n\n<p>you have to use table style for the div and center align for the content</p>\n", "title": "How to vertically center text with CSS?", "answer_id": 38873768, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p>I'm not sure anyone has gone the <code>writing-mode</code> route, but I think it solves the problem cleanly and has a <strong>broad support</strong>:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.vertical {\r\n  //border: 1px solid green;\r\n  writing-mode: vertical-lr;\r\n  text-align: center;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n.horizontal {\r\n  //border: 1px solid blue;\r\n  display: inline-block;\r\n  writing-mode: horizontal-tb;\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\n.content {\r\n  text-align: left;\r\n  display: inline-block;\r\n  border: 1px solid #e0e0e0;\r\n  padding: .5em 1em;\r\n  border-radius: 1em;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class=\"vertical\"&gt;\r\n  &lt;div class=\"horizontal\"&gt;\r\n    &lt;div class=\"content\"&gt;\r\n      I'm centered in the vertical and horizontal thing\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>This will, of course, work with any dimensions you need (besides 100% of the parent). If you uncomment the border lines, it'll be helpful to familiarize yourself.</p>\n\n<p><a href=\"http://jsfiddle.net/Neithan/gudgd26v/\" rel=\"nofollow\">JSFiddle demo</a> for you to fiddle.</p>\n\n<p><a href=\"http://caniuse.com/#feat=css-writing-mode\" rel=\"nofollow\">Caniuse support</a>: 85.22% + 6.26% = <strong>91.48%</strong> (even IE is in!)</p>\n", "title": "How to vertically center text with CSS?", "answer_id": 39186614, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}, {"body": "<p>.text{ background:#ccc;  position:relative; float:left; text-align:center; width:400px; line-height:80px; font-size:24px; color:#000; float:left;  }</p>\n", "title": "How to vertically center text with CSS?", "answer_id": 39324487, "question_id": 8865458, "tags": ["html", "css", "vertical-alignment"]}], "link": "http://stackoverflow.com/questions/8865458/how-to-vertically-center-text-with-css", "question_id": 8865458}, {"body": "<p>Why would someone prefer either the <a href=\"http://lodash.com/\">lodash.js</a> or <a href=\"http://underscorejs.org/\">underscore.js</a> utility libary over the other?</p>\n\n<p>Lodash seems to be a drop-in replacement for underscore, the latter having been around longer.</p>\n\n<p>I think both are brilliant, but I do not know enough about how they work to make an educated comparison, and I would like to know more about the differences.</p>\n", "title": "Differences between lodash and underscore", "tags": ["underscore.js", "javascript", "lodash"], "answers": [{"body": "<p>Lo-Dash is inspired by underscore, but nowadays is superior solution. You can make your <a href=\"http://lodash.com/custom-builds\">custom builds</a>, have a <a href=\"http://lodash.com/benchmarks\">higher performance</a>, support AMD and have <a href=\"http://lodash.com/#features\">great extra features</a>. Check this <a href=\"http://jsperf.com/lodash-underscore\">Lo-Dash vs Underscore benchmarks</a> on jsperf and.. this <a href=\"http://kitcambridge.be/blog/say-hello-to-lo-dash/\">awesome post about lo-dash</a>:</p>\n\n<p>One of the most useful feature when you work with collections, is the shorthand syntax:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>var characters = [\n  { 'name': 'barney', 'age': 36, 'blocked': false },\n  { 'name': 'fred',   'age': 40, 'blocked': true }\n];\n\n// using \"_.filter\" callback shorthand\n_.filter(characters, { 'age': 36 });\n\n// using underscore\n_.filter(characters, function(character) { return character.age === 36; } );\n\n// \u2192 [{ 'name': 'barney', 'age': 36, 'blocked': false }]\n</code></pre>\n\n<p>(taken from <a href=\"http://lodash.com/docs#filter\">lodash docs</a>)</p>\n", "title": "Differences between lodash and underscore", "answer_id": 13869090, "question_id": 13789618, "tags": ["underscore.js", "javascript", "lodash"]}, {"body": "<p>I created Lo-Dash to provide more consistent cross-environment iteration support for arrays, strings, objects, and <code>arguments</code> objects<sup>1</sup>. It has since become a superset of Underscore, providing more consistent API behavior, more <a href=\"http://lodash.com\">features</a> (like AMD support, deep clone, and deep merge), more thorough <a href=\"http://lodash.com/docs\">documentation</a> and unit tests (tests which run in Node, Ringo, Rhino, Narwhal, PhantomJS, and browsers), better overall performance and optimizations for large arrays/object iteration, and more flexibility with <a href=\"http://lodash.com/\">custom builds</a> and template pre-compilation utilities.</p>\n\n<p>Because Lo-Dash is updated more frequently than Underscore, a <code>lodash underscore</code> build <a href=\"http://lodash.com/\">is provided</a> to ensure compatibility with the latest stable version of Underscore.</p>\n\n<p>At one point I was even given <a href=\"https://s3.amazonaws.com/f.cl.ly/items/2e0O0S010f2A3s1W283U/push_access.png?v=ba693725\">push access</a> to Underscore, in part because Lo-Dash is responsible for raising more than 30 issues; landing bug fixes, new features, &amp; perf gains in Underscore v1.4.x+.</p>\n\n<p>In addition there are at least 3 Backbone boilerplates that include Lo-Dash by default and Lo-Dash is now mentioned in Backbone\u2019s official <a href=\"http://backbonejs.org/#downloads\">documentation</a>.</p>\n\n<p>Check out Kit Cambridge's post, <a href=\"http://kitcambridge.be/blog/say-hello-to-lo-dash/\">Say \"Hello\" to Lo-Dash</a>, for a deeper breakdown on the differences between Lo-Dash and Underscore.</p>\n\n<p>Footnotes:</p>\n\n<ol>\n<li>Underscore has inconsistent support for arrays, strings, objects, and <code>arguments</code> objects. In newer browsers, Underscore methods ignore <a href=\"http://www.2ality.com/2012/06/dense-arrays.html\">holes in arrays</a>, \"Objects\" methods iterate <code>arguments</code> objects, strings are treated as array-like, and methods correctly iterate functions (ignoring their \"prototype\" property) and objects (iterating shadowed properties like \"toString\" and \"valueOf\"), while in older browsers they will not. Also, Underscore methods like <code>_.clone</code> preserve holes in arrays, while others like <code>_.flatten</code> don't.</li>\n</ol>\n", "title": "Differences between lodash and underscore", "answer_id": 13898916, "question_id": 13789618, "tags": ["underscore.js", "javascript", "lodash"]}, {"body": "<p>In addition to John's answer, and reading up on lodash (which I had hitherto regarded as a \"me-too\" to underscore), and seeing the performance tests, reading the source-code, and <a href=\"http://kitcambridge.be/blog/say-hello-to-lo-dash/\">blog posts</a>, the few points which make lodash much superior to underscore are these:</p>\n\n<ol>\n<li><p>It's not about the speed, as it is about <em>consistency</em> of speed (?)</p>\n\n<blockquote>\n  <p>If you look into underscore's source-code, you'll see in the first few lines that underscore falls-back on the native implementations of many functions. Although in an ideal world, this would have been a better approach, if you look at some of the perf links given in <a href=\"http://allyoucanleet.com/post/21624742336/jsconf-us-12-slides\">these slides</a>, it is not hard to draw the conclusion that the quality of those 'native implementations' vary a lot browser-to-browser. Firefox is damn fast in some of the functions, and in some Chrome dominates. (I imagine there would be some scenarios where IE would dominate too). I believe that it's better to prefer a code whose <strong>performance</strong> is more consistent across browsers.</p>\n  \n  <p>Do read the blog post earlier, and instead of believing it for its sake, judge for yourself by running the <a href=\"http://lodash.com/benchmarks\">benchmarks</a>. I am stunned right now, seeing a lodash performing 100-150% faster than underscore in even <em>simple</em>, <em>native</em> functions such as <code>Array.every</code> in Chrome!</p>\n</blockquote></li>\n<li><p>The <strong>extras</strong> in lodash are also quite useful.</p></li>\n<li>As for Xananax's highly upvoted comment suggesting contribution to underscore's code: It's always better to have <strong>GOOD</strong> competition, not only does it keep innovation going, but also drives you to keep yourself (or your library) in good shape.</li>\n</ol>\n\n<p>Here is a <a href=\"https://github.com/bestiejs/lodash/wiki/build-differences\">list of differences</a> between lodash, and it's underscore-build is a drop-in replacement for your underscore projects.</p>\n", "title": "Differences between lodash and underscore", "answer_id": 18300039, "question_id": 13789618, "tags": ["underscore.js", "javascript", "lodash"]}, {"body": "<p>This is 2014 and a couple of years too late. Still I think my point holds:</p>\n\n<p>IMHO this discussion got blown out of proportion quite a bit. Quoting the aforementioned <a href=\"http://kitcambridge.be/blog/say-hello-to-lo-dash/\">blog post</a>:</p>\n\n<blockquote>\n  <p>Most JavaScript utility libraries, such as Underscore, Valentine, and\n  wu, rely on the \u201cnative-first dual approach.\u201d This approach prefers\n  native implementations, falling back to vanilla JavaScript only if the\n  native equivalent is not supported. But jsPerf revealed an interesting\n  trend: the most efficient way to iterate over an array or array-like\n  collection is to avoid the native implementations entirely, opting for\n  simple loops instead.</p>\n</blockquote>\n\n<p>As if \"simple loops\" and \"vanilla Javascript\" are more native than Array or Object method implementations. Jeez ...</p>\n\n<p>It certainly would be nice to have a single source of truth, but there isn't. Even if you've been told otherwise, there is no Vanilla God, my dear. I'm sorry. The only assumption that really holds is that we are all writing Javascript code that aims at performing well in all major browsers, knowing that all of them have different implementations of the same things. It's a bitch to cope with, to put it mildly. But that's the premise, whether you like it or not. </p>\n\n<p>Maybe y'all are working on large scale projects that need twitterish performance so that you really see the difference <a href=\"http://jsperf.com/lodash-underscore\">between 850,000 (underscore) vs. 2,500,000 (lodash) iterations over a list per sec</a> right now! </p>\n\n<p>I for one am not. I mean, I worked projects where I had to address performance issues, but they were never solved or caused by neither Underscore nor Lo-Dash. And unless I get hold of the real differences in implementation and performance (we're talking C++ right now) of lets say a loop over an iterable (object or array, sparse or not!), I rather don't get bothered with any claims based on the results of a benchmark platform that <a href=\"https://github.com/bestiejs/benchmark.js/blob/master/package.json\">is already opinionated</a>.</p>\n\n<p>It only needs one single update of lets say Rhino to set its Array method implementations on fire in a fashion that not a single \"medieval loop methods perform better and forever and whatnot\" priest can argue his/her way around the simple fact that all of a sudden array methods in FF are much faster than his/her opinionated brainfuck. Man, you just can't cheat your runtime environment by cheating your runtime environment! Think about that when promoting ... </p>\n\n<blockquote>\n  <p>your utility belt</p>\n</blockquote>\n\n<p>... next time. </p>\n\n<p>So to keep it relevant: </p>\n\n<ul>\n<li>Use Underscore if you're into convenience without sacrificing native ish.</li>\n<li>Use Lo-Dash if you're into convenience and like its extended feature catalogue (deep copy etc.) and if you're in desperate need of instant performance and most importantly don't mind settling for an alternative as soon as native API's outshine opinionated workaurounds. Which is going to happen soon. Period.</li>\n<li>There's even a third solution. DIY! Know your environments. Know about inconsistencies. Read their (<a href=\"https://github.com/lodash/lodash\">John-David</a>'s and <a href=\"https://github.com/jashkenas/underscore\">Jeremy</a>'s) code. Don't use this or that without being able to explain why a consistency/compatibility layer is really needed and enhances your workflow or improves the performance of your app. It is very likely that your requirements are satisfied with a simple polyfill that you're perfectly able to write yourself. Both libraries are just plain vanilla with a little bit of sugar. <a href=\"https://github.com/jashkenas/underscore/commit/4e4bc194c0a0e06aa8f7633695ad10030d871a2b#commitcomment-1361732\">They both just fight over who's serving the sweetest pie</a>. But believe me, in the end both are only cooking with water. There's no Vanilla God so there can't be no Vanilla pope, right? </li>\n</ul>\n\n<p>Choose whatever approach fits your needs the most. As usual. I'd prefer fallbacks on actual implementations over opinionated runtime cheats anytime but even that seems to be a matter of taste nowadays. Stick to quality resources like <a href=\"http://developer.mozilla.com\">http://developer.mozilla.com</a> and <a href=\"http://caniuse.com\">http://caniuse.com</a> and you'll be just fine. </p>\n", "title": "Differences between lodash and underscore", "answer_id": 25797208, "question_id": 13789618, "tags": ["underscore.js", "javascript", "lodash"]}, {"body": "<p><a href=\"http://benmccormick.org/2014/11/12/underscore-vs-lodash/\" rel=\"nofollow\">http://benmccormick.org/2014/11/12/underscore-vs-lodash/</a></p>\n\n<p>Latest article comparing the two by Ben McCormick:</p>\n\n<blockquote>\n  <ol>\n  <li><p>Lo-Dash's API is a superset of Underscore's.</p></li>\n  <li><p>Under the hood [Lo-Dash] has been completely rewritten.</p></li>\n  <li><p>Lo-Dash is definitely not slower than Underscore.</p></li>\n  <li><p>What has Lo-Dash added?</p>\n  \n  <ul>\n  <li>Usability Improvements</li>\n  <li>Extra Functionality</li>\n  <li>Performance Gains</li>\n  <li>Shorthand syntaxes for chaining</li>\n  <li>Custom Builds to only use what you need</li>\n  <li>Semantic versioning and 100% code coverage</li>\n  </ul></li>\n  </ol>\n</blockquote>\n", "title": "Differences between lodash and underscore", "answer_id": 27342533, "question_id": 13789618, "tags": ["underscore.js", "javascript", "lodash"]}, {"body": "<p>I just found one difference that ended up being important for me. The non-underscore-compatible version of lodash's <code>_.extend()</code> does <em>not</em> copy over class-level-defined properties or methods.</p>\n\n<p>I've created a Jasmine test in CoffeeScript that demonstrates this:</p>\n\n<p><a href=\"https://gist.github.com/softcraft-development/1c3964402b099893bd61\" rel=\"nofollow\">https://gist.github.com/softcraft-development/1c3964402b099893bd61</a></p>\n\n<p>Fortunately, <code>lodash.underscore.js</code> preserves Underscore's behaviour of copying everything, which for my situation was the desired behaviour.</p>\n", "title": "Differences between lodash and underscore", "answer_id": 27448418, "question_id": 13789618, "tags": ["underscore.js", "javascript", "lodash"]}, {"body": "<p>Not sure if that is what OP meant, but I came accross this question because I was searching for a list of issues I have to keep in mind when migrating from underscore to lodash.</p>\n\n<p>I would really appreciate if someone posted an article with a complete list of such differences. Let me start with the things I've learned the hard way (that is, things which made my code explode on production:/) :</p>\n\n<ul>\n<li>_.flatten in underscore is deep by default and you have to pass true as second argument to make it shallow. In lodash it is shallow by default and passing true as second argument will make it deep! :)</li>\n<li>_.last in underscore accepts a second argument which tells how many elements you want. In lodash there is no such option. You can emulate this with .slice</li>\n<li>_.first (same issue)</li>\n<li>_.template in underscore can be used in many ways, one of which is providing the template string and data and getting HTML back (or at least that's how it worked some time ago). In lodash you receive a function which you should then feed with the data.</li>\n<li>_(something).map(foo) works in underscore, but in lodash I had to rewrite it to _.map(something,foo) //perhaps that was just a TypeScript issue</li>\n</ul>\n", "title": "Differences between lodash and underscore", "answer_id": 29255425, "question_id": 13789618, "tags": ["underscore.js", "javascript", "lodash"]}, {"body": "<p>For the most part underscore is subset of lodash.  At times, like presently underscore will have cool little functions lodash doesn't have like mapObject.  This one saved me a lot of time in the development of my project.</p>\n", "title": "Differences between lodash and underscore", "answer_id": 30235987, "question_id": 13789618, "tags": ["underscore.js", "javascript", "lodash"]}, {"body": "<p>There is movement towards merging the two libraries. Great idea I think!</p>\n\n<p><a href=\"https://github.com/jashkenas/underscore/issues/2182\">https://github.com/jashkenas/underscore/issues/2182</a></p>\n", "title": "Differences between lodash and underscore", "answer_id": 30996142, "question_id": 13789618, "tags": ["underscore.js", "javascript", "lodash"]}, {"body": "<p>lodash has _.mapValues() which is identical to underescore's _.mapObject()</p>\n", "title": "Differences between lodash and underscore", "answer_id": 31493565, "question_id": 13789618, "tags": ["underscore.js", "javascript", "lodash"]}, {"body": "<p>If like me you were expecting list of usage differences between underscore and lodash, there's a <a href=\"https://github.com/lodash/lodash/wiki/Migrating\">guide for migrating from underscore to lodash</a>.</p>\n\n<p>Here's the current state of it for posterity:</p>\n\n<blockquote>\n  <ul>\n  <li>Underscore <code>_.compose</code> is Lodash <code>_.flowRight</code></li>\n  <li>Underscore <code>_.contains</code> is Lodash <code>_.includes</code></li>\n  <li>Underscore <code>_.findWhere</code> is Lodash <code>_.find</code></li>\n  <li>Underscore <code>_.invoke</code> is Lodash <code>_.invokeMap</code></li>\n  <li>Underscore <code>_.mapObject</code> is Lodash <code>_.mapValues</code></li>\n  <li>Underscore <code>_.pluck</code> is Lodash <code>_.map</code></li>\n  <li>Underscore <code>_.where</code> is Lodash <code>_.filter</code></li>\n  <li>Underscore <code>_.any</code> is Lodash <code>_.some</code></li>\n  <li>Underscore <code>_.all</code> is Lodash <code>_.every</code></li>\n  <li>Underscore <code>_.each</code> doesn\u2019t allow exiting by returning <code>false</code></li>\n  <li>Underscore <code>_.flatten</code> is deep by default while Lodash is shallow</li>\n  <li>Underscore <code>_.isFinite</code> doesn\u2019t align with <code>Number.isFinite</code><br>   (e.g. <code>_.isFinite('1')</code> returns <code>true</code> in Underscore but <code>false</code> in\n  Lodash)</li>\n  <li>Underscore <code>_.matches</code> shorthand doesn\u2019t support deep comparisons<br>   (e.g. <code>_.filter(objects, { 'a': { 'b': 'c' } })</code>)</li>\n  <li>Underscore \u2265 1.7 &amp; Lodash have changed their <code>_.template</code> syntax to<br><code>_.template(string, option)(data)</code></li>\n  <li>Lodash <code>_.uniq</code> does not accept an <code>iteratee</code> function like Underscore's. Use Lodash <code>_.uniqBy</code></li>\n  <li>Lodash <code>_.first</code> and <code>._last</code> do not accept an <code>n</code> argument like Underscore's. Use <code>slice</code></li>\n  <li>Lodash <code>_.memoize</code> caches are <code>Map</code> like objects</li>\n  <li>Lodash supports <a href=\"https://lodash.com/docs#_\">implicit chaining</a>, <a href=\"http://filimanjaro.com/blog/2014/introducing-lazy-evaluation/\">lazy chaining, &amp; shortcut\n  fusion</a></li>\n  <li>Lodash split its overloaded <code>_.head</code>, <code>_.last</code>, <code>_.rest</code>, &amp; <code>_.initial</code> out into<br>   <code>_.take</code>, <code>_.takeRight</code>, <code>_.drop</code>, &amp;\n  <code>_.dropRight</code><br>   (i.e. <code>_.head(array, 2)</code> in Underscore is\n  <code>_.take(array, 2)</code> in Lodash)</li>\n  </ul>\n</blockquote>\n", "title": "Differences between lodash and underscore", "answer_id": 38500450, "question_id": 13789618, "tags": ["underscore.js", "javascript", "lodash"]}], "link": "http://stackoverflow.com/questions/13789618/differences-between-lodash-and-underscore", "question_id": 13789618}, {"body": "<p>What command or short key can I use to exit the PostgreSQL command line utility <code>psql</code>?\nHere is the gist of the answers: </p>\n\n<p><strong>Type the following to exit the PostgreSQL command line utility <code>psql</code>:</strong> </p>\n\n<p><code>\\q</code> + <kbd>Enter</kbd></p>\n\n<p>Press the following key combinations for <strong>Windows</strong>, <strong>Mac</strong> or <strong>Linux</strong>: </p>\n\n<p><kbd>ctrl</kbd>+<kbd>D</kbd></p>\n\n<p>For more command options type: </p>\n\n<p><code>\\?</code> + <kbd>Enter</kbd></p>\n", "title": "How to exit from PostgreSQL command line utility: psql", "tags": ["postgresql", "postgresql-9.1", "psql"], "answers": [{"body": "<p>Type <code>\\q</code> and then press <code>ENTER</code> to quit <code>psql</code>.</p>\n", "title": "How to exit from PostgreSQL command line utility: psql", "answer_id": 9463370, "question_id": 9463318, "tags": ["postgresql", "postgresql-9.1", "psql"]}, {"body": "<p>And for all kinds of similar questions: Use <strong><code>\\?</code></strong> in psql for help.</p>\n\n<p>Or read about <a href=\"http://www.postgresql.org/docs/current/interactive/app-psql.html#APP-PSQL-META-COMMANDS\">psql meta commands in the excellent manual</a>.</p>\n", "title": "How to exit from PostgreSQL command line utility: psql", "answer_id": 11733890, "question_id": 9463318, "tags": ["postgresql", "postgresql-9.1", "psql"]}, {"body": "<p><kbd>Ctrl</kbd>+<kbd>D</kbd> is what I usually use to exit psql console.</p>\n", "title": "How to exit from PostgreSQL command line utility: psql", "answer_id": 12106607, "question_id": 9463318, "tags": ["postgresql", "postgresql-9.1", "psql"]}, {"body": "<p>My usual key sequence is:</p>\n\n<pre><code>quit()\nquit\nexit()\nexit\nq\nq()\n!q\n^C\nhelp\nAlt + Tab\ngoogle.com\nQuit PSQL\n\\q\n</code></pre>\n\n<p>I think veterans of the psql command line usually shorten that to just:</p>\n\n<pre><code>\\q\n</code></pre>\n", "title": "How to exit from PostgreSQL command line utility: psql", "answer_id": 23122582, "question_id": 9463318, "tags": ["postgresql", "postgresql-9.1", "psql"]}, {"body": "<p>I learned that I could include \\q in a batch .sql file, so I could have psql quit earlier from an \\i operation.  </p>\n", "title": "How to exit from PostgreSQL command line utility: psql", "answer_id": 24356941, "question_id": 9463318, "tags": ["postgresql", "postgresql-9.1", "psql"]}, {"body": "<p>For Linux command line <strong>\\q</strong> + <strong>enter.</strong> </p>\n\n<p>Quiting with <strong>Ctrl</strong> + <strong>D</strong> also is works </p>\n", "title": "How to exit from PostgreSQL command line utility: psql", "answer_id": 33255715, "question_id": 9463318, "tags": ["postgresql", "postgresql-9.1", "psql"]}], "link": "http://stackoverflow.com/questions/9463318/how-to-exit-from-postgresql-command-line-utility-psql", "question_id": 9463318}, {"body": "<p>I've got some poorly-formatted HTML code that I'd like to reformat. Is there a command that will automatically reformat HTML code in Sublime Text 2 so it looks better and is easier to read?</p>\n", "title": "How do I reformat HTML code using Sublime Text 2?", "tags": ["html", "sublimetext2", "sublimetext", "indentation", "reformat"], "answers": [{"body": "<p>The only one package I've been able to find is <a href=\"https://github.com/SublimeText/Tag\">Tag</a>.</p>\n\n<p>You can install it using the package control. <a href=\"https://sublime.wbond.net\">https://sublime.wbond.net</a></p>\n\n<p>After installing package control. Go to package control (<em>Preferences</em> -> <em>Package Control</em>) then type <code>install</code>, hit <kbd>enter</kbd>. Then type <code>tag</code> and hit <kbd>enter</kbd>.</p>\n\n<p>After installing Tag, highlight the text and press the shortcut <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>F</kbd>.</p>\n", "title": "How do I reformat HTML code using Sublime Text 2?", "answer_id": 8858512, "question_id": 8839753, "tags": ["html", "sublimetext2", "sublimetext", "indentation", "reformat"]}, {"body": "<p>I think this is what you're looking for: </p>\n\n<p><a href=\"https://github.com/victorporof/Sublime-HTMLPrettify\" rel=\"nofollow\">https://github.com/victorporof/Sublime-HTMLPrettify</a></p>\n", "title": "How do I reformat HTML code using Sublime Text 2?", "answer_id": 8862358, "question_id": 8839753, "tags": ["html", "sublimetext2", "sublimetext", "indentation", "reformat"]}, {"body": "<p>I'm using <a href=\"http://tidy.sourceforge.net/\" rel=\"nofollow\">tidy</a> together with custom build system to prettify HTML.</p>\n\n<p>I have HTMLTidy.sublime-build in my Packages/User/ directory:</p>\n\n<pre><code>{\n  \"cmd\": [\"tidy\", \"-config\", \"$packages/User/tidy_config.cfg\", \"$file\"]\n}\n</code></pre>\n\n<p>and tidy_config.cfg file in the same directory:</p>\n\n<pre><code>indent: auto\ntab-size: 4\nshow-warnings: no\nwrite-back: yes\nquiet: yes\nindent-cdata: yes\ntidy-mark: no\nwrap: 0\n</code></pre>\n\n<p>And just select build system and press <kbd>ctrl</kbd>+<kbd>b</kbd> or <kbd>cmd</kbd>+<kbd>b</kbd> to reformat file content. One minor issue with that is that ST2 does not automatically reload the file so to see the results you have to switch to some other file and back (or to other application and back).</p>\n\n<p>On Mac I've used macports to install tidy, on Windows you'd have to download it yourself and specify working directory in the build system, where tidy is located:</p>\n\n<pre><code>\"working_dir\": \"c:\\\\HTMLTidy\\\\\"\n</code></pre>\n\n<p>or add it to the PATH.</p>\n", "title": "How do I reformat HTML code using Sublime Text 2?", "answer_id": 9344894, "question_id": 8839753, "tags": ["html", "sublimetext2", "sublimetext", "indentation", "reformat"]}, {"body": "<p>You don't need any plugins to do this.\nJust select all lines (<kbd>Ctrl </kbd><kbd>A</kbd>) and then from the menu select Edit &rarr; Line &rarr; Reindent.\nThis will work if your file is saved with an extension that contains HTML like <code>.html</code> or <code>.php</code>.</p>\n\n<p>If you do this often, you may find this key mapping useful:</p>\n\n<pre><code>{ \"keys\": [\"ctrl+shift+r\"], \"command\": \"reindent\" , \"args\": { \"single_line\": false } }\n</code></pre>\n\n<p>If your file is not saved (e.g. you just pasted in a snippet to a new window), you can manually set the language for indentation by selecting the menu View &rarr; Syntax &rarr; <code>language of choice</code> before selecting the reindent option.</p>\n", "title": "How do I reformat HTML code using Sublime Text 2?", "answer_id": 10888837, "question_id": 8839753, "tags": ["html", "sublimetext2", "sublimetext", "indentation", "reformat"]}, {"body": "<p>There's a plugin called SublimeHtmlTidy which works pretty well </p>\n\n<p><a href=\"https://github.com/welovewordpress/SublimeHtmlTidy\">https://github.com/welovewordpress/SublimeHtmlTidy</a></p>\n", "title": "How do I reformat HTML code using Sublime Text 2?", "answer_id": 12330112, "question_id": 8839753, "tags": ["html", "sublimetext2", "sublimetext", "indentation", "reformat"]}, {"body": "<p>Simply go to</p>\n\n<p>Edit -> Tag -> Auto-format tags on document</p>\n", "title": "How do I reformat HTML code using Sublime Text 2?", "answer_id": 12791252, "question_id": 8839753, "tags": ["html", "sublimetext2", "sublimetext", "indentation", "reformat"]}, {"body": "<p>Just a general tip. What I did to auto-tidy up my HTML, was install the package HTML_Tidy, and then add the following keybinding to the default settings (which I use):</p>\n\n<pre><code>{ \"keys\": [\"enter\"], \"command\": \"html_tidy\" },\n</code></pre>\n\n<p>this runs HTML Tidy with every enter. There may be drawbacks to this, I'm quite new to Sublime myself, but it seems to do what I want :)</p>\n", "title": "How do I reformat HTML code using Sublime Text 2?", "answer_id": 13180128, "question_id": 8839753, "tags": ["html", "sublimetext2", "sublimetext", "indentation", "reformat"]}, {"body": "<p>I am yet to have the privilege to comment so this is simply additional information related to @peter's <a href=\"http://stackoverflow.com/a/10888837/409023\">answer</a> above answer. </p>\n\n<p>I found HTML did not align as expected if IE <a href=\"http://webdesign.about.com/cs/htmltags/a/aacommentsie.htm\">conditional comments</a> in the header were not completely in-line e.g. flush to the left:</p>\n\n<pre><code>&lt;!--[if lt IE 7]&gt;\n&lt;p class='chromeframe'&gt;Your browser is &lt;em&gt;unsupported&lt;/em&gt;. &lt;a href=\"http://browsehappy.com/\"&gt;Upgrade to a different browser&lt;/a&gt; or &lt;a href=\"http://www.google.com/chromeframe/?redirect=true\"&gt;install Google Chrome Frame&lt;/a&gt; to experience this site.&lt;/p&gt;\n&lt;![endif]--&gt;\n&lt;!-- Le HTML5 shim, for IE6-8 support of HTML elements --&gt;\n&lt;!--[if lt IE 9]&gt;\n&lt;script src=\"http://html5shim.googlecode.com/svn/trunk/html5.js\"&gt;&lt;/script&gt;\n&lt;![endif]--&gt; \n</code></pre>\n", "title": "How do I reformat HTML code using Sublime Text 2?", "answer_id": 13490852, "question_id": 8839753, "tags": ["html", "sublimetext2", "sublimetext", "indentation", "reformat"]}, {"body": "<p>I created a Package called <strong>HTMLBeautify</strong> that does a decent job of reformatting HTML. I based it off of a Perl script I found back in 1997\u2014I updated it to work with all the new fangled modern tags. :)</p>\n\n<p>Check it out and let me know what you think!</p>\n\n<p><a href=\"https://github.com/rareyman/HTMLBeautify\">https://github.com/rareyman/HTMLBeautify</a></p>\n", "title": "How do I reformat HTML code using Sublime Text 2?", "answer_id": 14445205, "question_id": 8839753, "tags": ["html", "sublimetext2", "sublimetext", "indentation", "reformat"]}, {"body": "<p>Altough the question is for HTML, I would also additionally like to give info about how to <strong>auto-format your Javascript code for Sublime Text 2</strong>;</p>\n\n<p>You can select all your code(<kbd>ctrl+A</kbd>) and use the in-app functionality, reindent(<code>Edit</code> -> <code>Line</code> -> <code>Reindent</code>) or you can use JsFormat formatting plugin for <code>Sublime Text 2</code> if you would like to have more customizable settings on how to format your code to addition to the Sublime Text's default tab/indent settings. </p>\n\n<p><a href=\"https://github.com/jdc0589/JsFormat\">https://github.com/jdc0589/JsFormat</a></p>\n\n<p>You can easily install <strong>JsFormat</strong> with using Package Control (<code>Preferences</code> -> <code>Package Control</code>) Open package control then <em>type install, hit <kbd>enter</kbd></em>. Then type <code>js format</code> and hit <kbd>enter</kbd>, you're done. \n(The package controller will show the status of the installation with success and errors on the bottom left bar of <code>Sublime</code>)</p>\n\n<p>Add the following line to your key bindings (<code>Preferences</code> -> <code>Key Bindings User</code>) </p>\n\n<pre><code>{ \"keys\": [\"ctrl+alt+2\"], \"command\": \"js_format\"}\n</code></pre>\n\n<p>I'm using <kbd>ctrl+alt+2</kbd>, you can change this shortcut key whatever you want to. So far, <code>JsFormat</code> is a good plugin, worth to try it!</p>\n\n<p>Hope this will help someone.</p>\n", "title": "How do I reformat HTML code using Sublime Text 2?", "answer_id": 17274482, "question_id": 8839753, "tags": ["html", "sublimetext2", "sublimetext", "indentation", "reformat"]}, {"body": "<p>There are half a dozen or so ways to format HTML in Sublime. I've tested each of the most popular plugins (see the <a href=\"http://sublimetexttips.com/formatting-html-with-sublime-text/\">writeup I did on my blog</a> for full details), but here's a quick overview of some of the most popular options:</p>\n\n<h2>Reindent command</h2>\n\n<p>Pros:</p>\n\n<ul>\n<li>Ships with Sublime, so no plugin install needed</li>\n</ul>\n\n<p>Cons:</p>\n\n<ul>\n<li>Doesn't delete extra blank lines</li>\n<li>Can't handle minified HTML, lines with multiple open tags</li>\n<li>Doesn't properly format <code>&lt;script&gt;</code> blocks</li>\n</ul>\n\n<h2><a href=\"https://github.com/SublimeText/Tag\">Tag</a></h2>\n\n<p>Pros:</p>\n\n<ul>\n<li>Supports ST2/ST3</li>\n<li>Removes extra blank lines</li>\n<li>No binary dependencies</li>\n</ul>\n\n<p>Cons:</p>\n\n<ul>\n<li>Chokes on PHP tags</li>\n<li>Doesn't handle <code>&lt;script&gt;</code> blocks correctly</li>\n</ul>\n\n<h2><a href=\"https://github.com/welovewordpress/SublimeHtmlTidy\">HTMLTidy</a></h2>\n\n<p>Pros:</p>\n\n<ul>\n<li>Handles PHP tags</li>\n<li>Some settings to tweak formatting</li>\n</ul>\n\n<p>Cons:</p>\n\n<ul>\n<li>Requires PHP (falls back to web service)</li>\n<li>ST2 only</li>\n<li>Abandoned?</li>\n</ul>\n\n<h2><a href=\"https://github.com/rareyman/HTMLBeautify\">HTMLBeautify</a></h2>\n\n<p>Pros:</p>\n\n<ul>\n<li>Supports ST2/ST3</li>\n<li>Simple and no binaray dependencies</li>\n<li>Support for OS X, Win and Linux</li>\n</ul>\n\n<p>Cons:</p>\n\n<ul>\n<li>Chokes a bit with inline comments</li>\n<li>Does expand minimized/compressed code </li>\n</ul>\n\n<h2><a href=\"https://github.com/victorporof/Sublime-HTMLPrettify\">HTML-CSS-JS Prettify</a></h2>\n\n<p>Pros:</p>\n\n<ul>\n<li>Supports ST2/ST3</li>\n<li>Handles HTML, CSS, JS</li>\n<li>Great integration with Sublime's menus</li>\n<li>Highly customizable</li>\n<li>Per-project settings</li>\n<li>Format on save option</li>\n</ul>\n\n<p>Cons:</p>\n\n<ul>\n<li>Requires Node.js</li>\n<li>Not great for embedded PHP </li>\n</ul>\n\n<h2>Which is best?</h2>\n\n<p>HTML-CSS-JS Prettify is the winner in my book. Lots of great features, not much to complain about.</p>\n", "title": "How do I reformat HTML code using Sublime Text 2?", "answer_id": 21206739, "question_id": 8839753, "tags": ["html", "sublimetext2", "sublimetext", "indentation", "reformat"]}, {"body": "<p>There is a nice open source <a href=\"https://github.com/akalongman/sublimetext-codeformatter\" rel=\"nofollow\">CodeFormatter plugin</a>, which(along reindenting) can beautify dirty code even all of it is in single line.</p>\n", "title": "How do I reformat HTML code using Sublime Text 2?", "answer_id": 23237795, "question_id": 8839753, "tags": ["html", "sublimetext2", "sublimetext", "indentation", "reformat"]}, {"body": "<p>For me, the <code>HTML Prettify</code> solution was extremely simple. I went to the <a href=\"https://github.com/victorporof/Sublime-HTMLPrettify\" rel=\"nofollow\">HTML Prettify page</a>. </p>\n\n<ol>\n<li>Needed the <code>Sublime Package Manager</code></li>\n<li>Followed the Instructions for installing the package manager <a href=\"https://sublime.wbond.net/installation\" rel=\"nofollow\">here</a></li>\n<li>typed <kbd>cmd + shift + p</kbd> to bring up the menu</li>\n<li>Typed <code>prettify</code></li>\n<li>Chose the <code>HTML prettify</code> selection in the menu</li>\n</ol>\n\n<p>Boom. Done. Looks great</p>\n", "title": "How do I reformat HTML code using Sublime Text 2?", "answer_id": 24982739, "question_id": 8839753, "tags": ["html", "sublimetext2", "sublimetext", "indentation", "reformat"]}, {"body": "<p>you can set shortcut key F12 easy!!!</p>\n\n<pre><code>{ \"keys\": [\"f12\"], \"command\": \"reindent\" , \"args\": { \"single_line\": false } }\n</code></pre>\n\n<p>see detail at  <a href=\"http://how-to-sublime-text.blogspot.com/2014/11/reformat-code.html\" rel=\"nofollow\">http://how-to-sublime-text.blogspot.com/2014/11/reformat-code.html</a></p>\n", "title": "How do I reformat HTML code using Sublime Text 2?", "answer_id": 27065335, "question_id": 8839753, "tags": ["html", "sublimetext2", "sublimetext", "indentation", "reformat"]}, {"body": "<p>I recommend this plugin: <a href=\"https://packagecontrol.io/packages/HTML-CSS-JS%20Prettify\">HTML/CSS/JS Prettify</a>, It really works.</p>\n\n<p>After the installation, just select the code and press <kbd>Ctrl+Shift+H</kbd>.</p>\n\n<p>Done!</p>\n", "title": "How do I reformat HTML code using Sublime Text 2?", "answer_id": 27810959, "question_id": 8839753, "tags": ["html", "sublimetext2", "sublimetext", "indentation", "reformat"]}], "link": "http://stackoverflow.com/questions/8839753/how-do-i-reformat-html-code-using-sublime-text-2", "question_id": 8839753}, {"body": "<p>Since the upgrade to iOS 6, we are seeing Safari's web view take the liberty of caching <code>$.ajax</code> calls. This is in the context of a PhoneGap application so it is using the Safari WebView. Our <code>$.ajax</code> calls are <code>POST</code> methods and we have cache set to false <code>{cache:false}</code>, but still this is happening. We tried manually adding a <code>TimeStamp</code> to the headers but it did not help.</p>\n\n<p>We did more research and found that Safari is only returning cached results for web services that have a function signature that is static and does not change from call to call.  For instance, imagine a function called something like:</p>\n\n<pre><code>getNewRecordID(intRecordType)\n</code></pre>\n\n<p>This function receives the same input parameters over and over again, but the data it returns should be different every time.</p>\n\n<p>Must be in Apple's haste to make iOS 6 zip along impressively they got too happy with the cache settings.  Has anyone else seen this behavior on iOS 6? If so, what exactly is causing it?</p>\n\n<hr>\n\n<p>The workaround that we found was to modify the function signature to be something like this:</p>\n\n<pre><code>getNewRecordID(intRecordType, strTimestamp)\n</code></pre>\n\n<p>and then always pass in a <code>TimeStamp</code> parameter as well, and just discard that value on the server side.  This works around the issue.  I hope this helps some other poor soul who spends 15 hours on this issue like I did!</p>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"], "answers": [{"body": "<p>I just had this issue as well in a <a href=\"http://en.wikipedia.org/wiki/PhoneGap\">PhoneGap</a> application. I solved it by using the JavaScript function <code>getTime()</code> in the following manner:</p>\n\n<pre><code>var currentTime = new Date();\nvar n = currentTime.getTime();\npostUrl = \"http://www.example.com/test.php?nocache=\"+n;\n$.post(postUrl, callbackFunction);\n</code></pre>\n\n<p>I wasted a few hours figuring this out. It would have been nice of Apple to notify developers of this caching issue.</p>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 12507961, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>After a bit of investigation, turns out that Safari on iOS6 will cache POSTs that have either no Cache-Control headers or even \"Cache-Control: max-age=0\".</p>\n\n<p>The only way I've found of preventing this caching from happening at a global level rather than having to hack random querystrings onto the end of service calls is to set \"Cache-Control: no-cache\".</p>\n\n<p>So:</p>\n\n<ul>\n<li>No Cache-Control or Expires headers = iOS6 Safari will cache</li>\n<li>Cache-Control max-age=0 and an immediate Expires = iOS6 Safari will cache</li>\n<li>Cache-Control: no-cache = iOS6 Safari will NOT cache</li>\n</ul>\n\n<p>I suspect that Apple is taking advantage of this from the HTTP spec in section 9.5 about POST:</p>\n\n<blockquote>\n  <p>Responses to this method are not cacheable, unless the response\n     includes appropriate Cache-Control or Expires header fields. However,\n     the 303 (See Other) response can be used to direct the user agent to\n     retrieve a cacheable resource.</p>\n</blockquote>\n\n<p>So in theory you can cache POST responses...who knew. But no other browser maker has ever thought it would be a good idea until now. But that does NOT account for the caching when no Cache-Control or Expires headers are set, only when there are some set. So it must be a bug.</p>\n\n<p>Below is what I use in the right bit of my Apache config to target the whole of my API because as it happens I don't actually want to cache anything, even gets. What I don't know is how to set this just for POSTs.</p>\n\n<pre><code>Header set Cache-Control \"no-cache\"\n</code></pre>\n\n<p>Update: Just noticed that I didn't point out that it is only when the POST is the same, so change any of the POST data or URL and you're fine. So you can as mentioned elsewhere just add some random data to the URL or a bit of POST data.</p>\n\n<p>Update: You can limit the \"no-cache\" just to POSTs if you wish like this in Apache:</p>\n\n<pre><code>SetEnvIf Request_Method \"POST\" IS_POST\nHeader set Cache-Control \"no-cache\" env=IS_POST\n</code></pre>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 12516555, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>I had the same problem with a webapp getting data from ASP.NET webservice</p>\n\n<p>This worked for me:</p>\n\n<pre><code>public WebService()\n{\n    HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache);\n    ...\n}\n</code></pre>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 12521180, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>Simple solution for all your web service requests, assuming you're using jQuery:</p>\n\n<pre><code>$.ajaxPrefilter(function (options, originalOptions, jqXHR) {\n    // you can use originalOptions.type || options.type to restrict specific type of requests\n    options.data = jQuery.param($.extend(originalOptions.data||{}, { \n      timeStamp: new Date().getTime()\n    }));\n});\n</code></pre>\n\n<p>Read more about the jQuery prefilter call <a href=\"http://api.jquery.com/jQuery.ajaxPrefilter/\">here</a>.</p>\n\n<p>If you aren't using jQuery, check the docs for your library of choice.  They may have similar functionality.</p>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 12527248, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>Depending on the app you can trouble shoot the issue now in iOS 6 using Safari>Advanced>Web Inspector so that is helpful with this situation. </p>\n\n<p>Connect the phone to Safari on a Mac an then use the developer menu to trouble shoot the web app. </p>\n\n<p>Clear the website data on the iPhone after update to iOS6, including specific to the app using a Web View. Only one app had an issue and this solved it during IOS6 Beta testing way back, since then no real problems. </p>\n\n<p>You may need to look at your app as well, check out NSURLCache if in a WebView in a custom app.</p>\n\n<p><a href=\"https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLCache_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003754\" rel=\"nofollow\">https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLCache_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003754</a></p>\n\n<p>I guess depending on the true nature of your problem, implementation, etc. ..  </p>\n\n<p>Ref:  $.ajax calls </p>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 12538702, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>Finally, I've a solution to my uploading problem.</p>\n\n<p>In JavaScript:</p>\n\n<pre><code>var xhr = new XMLHttpRequest();\nxhr.open(\"post\", 'uploader.php', true);\nxhr.setRequestHeader(\"pragma\", \"no-cache\");\n</code></pre>\n\n<p>In <a href=\"http://en.wikipedia.org/wiki/PHP\" rel=\"nofollow\">PHP</a>:</p>\n\n<pre><code>header('cache-control: no-cache');\n</code></pre>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 12542888, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>While adding cache-buster parameters to make the request look different seems like a solid solution, I would advise against it, as it would hurt any application that relies on actual caching taking place. Making the APIs output the correct headers is the best possible solution, even if that's slightly more difficult than adding cache busters to the callers.</p>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 12560731, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>My workaround in <a href=\"http://en.wikipedia.org/wiki/ASP.NET\" rel=\"nofollow\">ASP.NET</a> (pagemethods, webservice, etc.)</p>\n\n<pre><code>protected void Application_BeginRequest(object sender, EventArgs e)\n{\n    Response.Cache.SetCacheability(HttpCacheability.NoCache);\n}\n</code></pre>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 12565758, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>It worked with <a href=\"http://en.wikipedia.org/wiki/ASP.NET\" rel=\"nofollow\">ASP.NET</a> only after adding the <code>pragma:no-cache</code> header in <a href=\"http://en.wikipedia.org/wiki/Internet_Information_Services\" rel=\"nofollow\">IIS</a>. <code>Cache-Control: no-cache</code> was not enough.</p>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 12573581, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>You can also fix this issue by modifying the <a href=\"http://en.wikipedia.org/wiki/JQuery\">jQuery</a> <a href=\"http://en.wikipedia.org/wiki/Ajax_%28programming%29\">Ajax</a> function by doing the following (as of 1.7.1) to the top of the Ajax function (function starts at line 7212). This change will activate the built-in anti-cache feature of jQuery for all POST requests.</p>\n\n<p>(The full script is available at <code>http://dl.dropbox.com/u/58016866/jquery-1.7.1.js</code>.)</p>\n\n<p>Insert below line 7221:</p>\n\n<pre><code>if (options.type === \"POST\") {\n    options.cache = false;\n}\n</code></pre>\n\n<p>Then modify the following (starting at line ~7497).</p>\n\n<pre><code>if (!s.hasContent) {\n    // If data is available, append data to URL\n    if (s.data) {\n        s.url += (rquery.test(s.url) ? \"&amp;\" : \"?\") + s.data;\n        // #9682: remove data so that it's not used in an eventual retry\n        delete s.data;\n    }\n\n    // Get ifModifiedKey before adding the anti-cache parameter\n    ifModifiedKey = s.url;\n\n    // Add anti-cache in URL if needed\n    if (s.cache === false) {\n        var ts = jQuery.now(),\n        // Try replacing _= if it is there\n        ret = s.url.replace(rts, \"$1_=\" + ts);\n\n        // If nothing was replaced, add timestamp to the end.\n        s.url = ret + ((ret === s.url) ? (rquery.test(s.url) ? \"&amp;\" : \"?\") + \"_=\" + ts : \"\");\n    }\n}\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>// More options handling for requests with no content\nif (!s.hasContent) {\n    // If data is available, append data to URL\n    if (s.data) {\n        s.url += (rquery.test(s.url) ? \"&amp;\" : \"?\") + s.data;\n        // #9682: remove data so that it's not used in an eventual retry\n        delete s.data;\n    }\n\n    // Get ifModifiedKey before adding the anti-cache parameter\n    ifModifiedKey = s.url;\n}\n\n// Add anti-cache in URL if needed\nif (s.cache === false) {\n    var ts = jQuery.now(),\n    // Try replacing _= if it is there\n    ret = s.url.replace(rts, \"$1_=\" + ts);\n\n    // If nothing was replaced, add timestamp to the end.\n    s.url = ret + ((ret === s.url) ? (rquery.test(s.url) ? \"&amp;\" : \"?\") + \"_=\" + ts : \"\");\n}\n</code></pre>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 12623722, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>In order to resolve this issue for WebApps added to the home screen, both of the top voted workarounds need to be followed. Caching needs to be turned off on the webserver to prevent new requests from being cached going forward and some random input needs to be added to every post request in order for requests that have already been cached to go through. Please refer to my post:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/12642726/ios6-is-there-a-way-to-clear-cached-ajax-post-requests-for-webapp-added-to-hom\">iOS6 - Is there a way to clear cached ajax POST requests for webapp added to home screen?</a></p>\n\n<p>WARNING: to anyone who implemented a workaround by adding a timestamp to their requests without turning off caching on the server. If your app is added to the home screen, EVERY post response will now be cached, clearing safari cache doesn't clear it and it doesn't seem to expire. Unless someone has a way to clear it, this looks like a potential memory leak!</p>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 12643378, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>I found one workaround that makes me curious as to why it works.  Before reading Tadej's answer concerning ASP.NET web service, I was trying to come up with something that would work.  </p>\n\n<p>And I'm not saying that it's a good solution, but I just wanted to document it here.</p>\n\n<p>main page:  includes a JavaScript function, checkStatus().  The method calls another method which uses a jQuery AJAX call to update the html content.  I used setInterval to call checkStatus().  Of course, I ran into the caching problem.</p>\n\n<p>Solution:  use another page to call the update.</p>\n\n<p>On the main page, I set a boolean variable, runUpdate, and added the following to the body tag:</p>\n\n<pre><code>&lt;iframe src=\"helper.html\" style=\"display: none; visibility: hidden;\"&gt;&lt;/iframe&gt;\n</code></pre>\n\n<p>In the  of helper.html:</p>\n\n<pre><code>&lt;meta http-equiv=\"refresh\" content=\"5\"&gt;\n&lt;script type=\"text/javascript\"&gt;\n    if (parent.runUpdate) { parent.checkStatus(); }\n&lt;/script&gt;\n</code></pre>\n\n<p>So, if checkStatus() is called from the main page, I get the cached content.  If I call checkStatus from the child page, I get updated content.</p>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 12785195, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>That's the work around for GWT-RPC</p>\n\n<pre><code>class AuthenticatingRequestBuilder extends RpcRequestBuilder \n{\n       @Override\n       protected RequestBuilder doCreate(String serviceEntryPoint) \n       {\n               RequestBuilder requestBuilder = super.doCreate(serviceEntryPoint);           \n               requestBuilder.setHeader(\"Cache-Control\", \"no-cache\");\n\n               return requestBuilder;\n       }\n}\n\nAuthenticatingRequestBuilder builder = new AuthenticatingRequestBuilder();\n((ServiceDefTarget)myService).setRpcRequestBuilder(builder);    \n</code></pre>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 12853812, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>I hope this can be of use to other developers banging their head against the wall on this one.  I found that any of the following prevents Safari on iOS 6 from caching the POST response:</p>\n\n<ul>\n<li>adding [cache-control: no-cache] in the request headers</li>\n<li>adding a variable URL parameter such as the current time</li>\n<li>adding [pragma: no-cache] in the response headers</li>\n<li>adding [cache-control: no-cache] in the response headers</li>\n</ul>\n\n<p>My solution was the following in my Javascript (all my AJAX requests are POST).</p>\n\n<pre><code>$.ajaxSetup({\n    type: 'POST',\n    headers: { \"cache-control\": \"no-cache\" }\n});\n</code></pre>\n\n<p>I also add the [pragma: no-cache] header to many of my server responses.</p>\n\n<p>If you use the above solution be aware that any $.ajax() calls you make that are set to global: false will NOT use the settings specified in $.ajaxSetup(), so you will need to add the headers in again.</p>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 12856562, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>A quick work-around for GWT-RPC services is to add this to all the remote methods:</p>\n\n<pre><code>getThreadLocalResponse().setHeader(\"Cache-Control\", \"no-cache\");\n</code></pre>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 12924716, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>This is an update of Baz1nga's answer. Since <code>options.data</code> is not an object but a string I just resorted to concatenating the timestamp:</p>\n\n<pre><code>$.ajaxPrefilter(function (options, originalOptions, jqXHR) {\n  if (originalOptions.type == \"post\" || options.type == \"post\") {\n\n    if (options.data &amp;&amp; options.data.length)\n      options.data += \"&amp;\";\n    else\n      options.data = \"\";\n\n    options.data += \"timeStamp=\" + new Date().getTime();\n  }\n});\n</code></pre>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 13068682, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>From my own blog post <em><a href=\"http://www.einternals.com/blog/web-development/ios6-0-caching-ajax-post-requests\">iOS 6.0 caching Ajax POST requests</a></em>:</p>\n\n<p>How to fix it: There are various methods to prevent caching of requests. The recommended method is adding a no-cache header. This is how it is done.</p>\n\n<h3>jQuery:</h3>\n\n<p>Check for iOS 6.0 and set Ajax header like this:</p>\n\n<pre><code>$.ajaxSetup({ cache: false });\n</code></pre>\n\n<h3>ZeptoJS:</h3>\n\n<p>Check for iOS 6.0 and set the Ajax header like this:</p>\n\n<pre><code>$.ajax({\n    type: 'POST',\n    headers : { \"cache-control\": \"no-cache\" },\n    url : ,\n    data:,\n    dataType : 'json',\n    success : function(responseText) {\u2026}\n</code></pre>\n\n<h2>Server side</h2>\n\n<h3>Java:</h3>\n\n<pre><code>httpResponse.setHeader(\"Cache-Control\", \"no-cache, no-store, must-revalidate\");\n</code></pre>\n\n<p>Make sure to add this at the top the page before any data is sent to the client.</p>\n\n<h3>.NET</h3>\n\n<pre><code>Response.Cache.SetNoStore();\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>Response.Cache.SetCacheability(System.Web.HttpCacheability.NoCache);\n</code></pre>\n\n<h3>PHP</h3>\n\n<pre><code>header('Cache-Control: no-cache, no-store, must-revalidate'); // HTTP 1.1.\nheader('Pragma: no-cache'); // HTTP 1.0.\n</code></pre>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 13373812, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>For those that use <code>Struts 1</code>, here is how I fixed the issue.</p>\n\n<p><strong>web.xml</strong></p>\n\n<pre><code>&lt;filter&gt;\n    &lt;filter-name&gt;SetCacheControl&lt;/filter-name&gt;\n    &lt;filter-class&gt;com.example.struts.filters.CacheControlFilter&lt;/filter-class&gt;\n&lt;/filter&gt;\n\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;SetCacheControl&lt;/filter-name&gt;\n    &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;\n    &lt;http-method&gt;POST&lt;/http-method&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n\n<p><strong>com.example.struts.filters.CacheControlFilter.js</strong></p>\n\n<pre><code>package com.example.struts.filters;\n\nimport java.io.IOException;\nimport java.util.Date;\nimport javax.servlet.*;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class CacheControlFilter implements Filter {\n\n        public void doFilter(ServletRequest request, ServletResponse response,\n                     FilterChain chain) throws IOException, ServletException {\n\n        HttpServletResponse resp = (HttpServletResponse) response;\n        resp.setHeader(\"Expires\", \"Mon, 18 Jun 1973 18:00:00 GMT\");\n        resp.setHeader(\"Last-Modified\", new Date().toString());\n        resp.setHeader(\"Cache-Control\", \"no-store, no-cache, must-revalidate, max-age=0, post-check=0, pre-check=0\");\n        resp.setHeader(\"Pragma\", \"no-cache\");\n\n        chain.doFilter(request, response);\n    }\n\n    public void init(FilterConfig filterConfig) throws ServletException {\n    }\n\n    public void destroy() {\n    }\n\n}\n</code></pre>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 14247612, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>I was able to fix my problem by using a combination of $.ajaxSetup and appending a timestamp to the url of my post (not to the post parameters/body). This based on the recommendations of previous answers</p>\n\n<pre><code>$(document).ready(function(){\n    $.ajaxSetup({ type:'POST', headers: {\"cache-control\",\"no-cache\"}});\n\n    $('#myForm').submit(function() {\n        var data = $('#myForm').serialize();\n        var now = new Date();\n        var n = now.getTime();\n        $.ajax({\n            type: 'POST',\n            url: 'myendpoint.cfc?method=login&amp;time='+n,\n            data: data,\n            success: function(results){\n                if(results.success) {\n                    window.location = 'app.cfm';\n                } else {\n                    console.log(results);\n                    alert('login failed');\n                }\n            }\n        });\n    });\n});\n</code></pre>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 14416881, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>This JavaScript snippet works great with jQuery and jQuery Mobile:</p>\n\n<pre><code>$.ajaxSetup({\n    cache: false,\n    headers: {\n        'Cache-Control': 'no-cache'\n    }\n});\n</code></pre>\n\n<p>Just place it somewhere in your JavaScript code (after jQuery is loaded, and best before you do AJAX requests) and it should help.</p>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 14531163, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>Things that <strong>DID NOT WORK</strong> for me with an iPad 4/iOS 6:</p>\n\n<p>My request containing: Cache-Control:no-cache</p>\n\n<pre><code>//asp.net's:\nHttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache)\n</code></pre>\n\n<p>Adding cache: false to my jQuery ajax call</p>\n\n<pre><code> $.ajax(\n        {\n            url: postUrl,\n            type: \"POST\",\n            cache: false,\n            ...\n</code></pre>\n\n<p>Only this did the trick:</p>\n\n<pre><code>var currentTime = new Date();\nvar n = currentTime.getTime();\npostUrl = \"http://www.example.com/test.php?nocache=\"+n;\n$.post(postUrl, callbackFunction);\n</code></pre>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 16272665, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>I think you have already resolved your issue, but let me share an idea about web caching.</p>\n\n<p>It is true you can add many headers in each language you use, server side, client side, and you can use many other tricks to avoid web caching, but always think that you can never know from where the client are connecting to your server, you never know if he are using a Hotel \u201cHot-Spot\u201d connection that uses Squid or other caching products.</p>\n\n<p>If the users are using proxy to hide his real position, etc\u2026 the <strong>real</strong> only way to avoid caching is the timestamp in the request also if is unused.</p>\n\n<p>For example:</p>\n\n<pre><code>/ajax_helper.php?ts=3211321456\n</code></pre>\n\n<p>Then every cache manager you have to pass didnt find the same URL in the cache repository and go re-download the page content.</p>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 24189662, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>While my login and signup pages works like a charm in Firefox, IE and Chrome... I've been struggling with this issue in Safari for IOS and OSX, few months ago I found a workaround on the SO.</p>\n\n<pre><code>&lt;body onunload=\"\"&gt;\n</code></pre>\n\n<p>OR via javascript</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\nwindow.onunload = function(e){\n    e.preventDefault();\n    return;\n};\n&lt;/script&gt;   \n</code></pre>\n\n<p>This is kinda ugly thing but works for a while.</p>\n\n<p>I don't know why, but returning null to the <code>onunload</code> event the page do not get cached in Safari.</p>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 24845013, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>In Ruby's Sinatra</p>\n\n<pre><code>before '*' do\n  if env['REQUEST_METHOD'] == 'POST'\n    headers 'Cache-Control' =&gt; 'no-cache, no-store, must-revalidate'\n  end\nend\n</code></pre>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 28803093, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}, {"body": "<p>I suggest a workaround to modify the function signature to be something like this:</p>\n\n<p>getNewRecordID(intRecordType, strTimestamp)\nand then always pass in a TimeStamp parameter as well, and just discard that value on the server side. This works around the issue.</p>\n", "title": "Is Safari on iOS 6 caching $.ajax results?", "answer_id": 38642064, "question_id": 12506897, "tags": ["javascript", "jquery", "ajax", "caching", "mobile-safari"]}], "link": "http://stackoverflow.com/questions/12506897/is-safari-on-ios-6-caching-ajax-results", "question_id": 12506897}, {"body": "<p>I've encountered an error deploying a site to a server.  When trying to load the home page, or access authentication on the new site in IIS, I get the error:</p>\n\n<blockquote>\n  <p>Config Error: This configuration section cannot be used at this path.\n  This happens when the section is locked at a parent level. Locking is\n  either by default (overrideModeDefault=\"Deny\"), or set explicitly by a\n  location tag with overrideMode=\"Deny\" or the legacy\n  allowOverride=\"false\".</p>\n</blockquote>\n\n<p>More detail can be found here, in <a href=\"http://blogs.msdn.com/b/webtopics/archive/2010/03/08/troubleshooting-http-500-19-errors-in-iis-7.aspx\">Scenario 7</a> matches my hex error code.</p>\n\n<p>The solution given on the linked site above is to set <strong>Allow</strong> for overrideModeDefault in the section mentioned in my error, in the <em>applicationHost.config</em> file.  In my case,  under <strong>Security</strong> in <em>system.webServer</em>.  But if I look at the <em>applicationHost.config</em> on my local computer, where the site is properly deployed already, that section is set to <strong>Deny</strong>.</p>\n\n<p>If this solution is correct, how is my local instance running just fine with the same <em>web.config</em>?  According to my <em>applicationHost.config</em>, that section should be locked, but it's not.  I'd prefer to not change the <em>applicationHost.config</em> file, because there are many other sites running on that server.  Is there another solution?</p>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "tags": ["iis", "iis-7", "iis-8.5"], "answers": [{"body": "<p>Browse to \u201cC:\\Windows\\System32\\inetsrv\\config\u201d (you will need administrator rights here)\nOpen applicationHost.config</p>\n\n<p><strong>Note</strong>: In IISExpress and Visual Studio 2015 the applicationHost.config is stored in $(solutionDir).vs\\config\\applicationhost.config </p>\n\n<p>Find the section that showed up in the \u201cconfig source\u201d part of the error message page.  For me this has typically been \u201cmodules\u201d or \u201chandlers\u201d</p>\n\n<p>Change the overrideModeDefault attribute to be \u201cAllow\u201d</p>\n\n<p>So the whole line now looks like:</p>\n\n<pre><code>&lt;section name=\"modules\" allowDefinition=\"MachineToApplication\" overrideModeDefault=\"Allow\" /&gt;\n</code></pre>\n\n<p>After saving the file, the page loaded up fine in my browser.</p>\n\n<p><strong>Warning:</strong>\n<a href=\"http://dpotter.net/technical/2009/11/editing-applicationhostconfig-on-64-bit-windows/\">Editing applicationHost.config on 64-bit Windows</a></p>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 10390085, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>You could also use the <strong>IIS Manager</strong> to edit those settings.</p>\n\n<p>Care of this <a href=\"http://www.iis.net/learn/manage/managing-your-configuration-settings/an-overview-of-feature-delegation-in-iis#02\">Learn IIS article</a>:</p>\n\n<p>Using the <strong>Feature Delegation</strong> from the root of IIS:</p>\n\n<p><img src=\"http://i.stack.imgur.com/dAeNa.jpg\" alt=\"Feature delegation icon in IIS Manager\"></p>\n\n<p>You can then control each of machine-level read/write permissions, which will otherwise give you the <em>overrideMode=\"Deny\"</em> errors.</p>\n\n<p><img src=\"http://i.stack.imgur.com/2rE7Q.jpg\" alt=\"Example use of Feature Delegation\"></p>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 12343141, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>I had the same problem. Don't remember where I found it on the web, but here is what I did:</p>\n\n<ul>\n<li>Click \"Start button\"</li>\n<li>in the search box, enter \"Turn windows features on or off\"</li>\n<li>in the features window, Click: \"Internet Information Services\"</li>\n<li>Click: \"World Wide Web Services\"</li>\n<li>Click: \"Application Development Features\"</li>\n<li>Check (enable) the features. I checked all but CGI.</li>\n</ul>\n\n<p>btw, I'm using Windows 7.</p>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 12867753, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>You need to unlock handlers. This can be done using following cmd command:</p>\n\n<pre><code>%windir%\\system32\\inetsrv\\appcmd.exe unlock config -section:system.webServer/handlers\n</code></pre>\n\n<p>Maybe another info for people that are getting this error on IIS 8, in my case was on Microsoft Server 2012 platform. I had spend couple of hours battling with other errors that bubbled up after executing appcmd. In the end I was able to fix it by removing Web Server Role and installing it again. </p>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 13752745, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>In my case, I got this error because I was operating on the wrong configuration file.</p>\n\n<p>I was doing this:</p>\n\n<pre><code>Configuration config = serverManager.GetWebConfiguration(websiteName);\nConfigurationSection serverRuntimeSection = config.GetSection(\"system.webServer/serverRuntime\");\nserverRuntimeSection[\"alternateHostName\"] = hostname;\n</code></pre>\n\n<p>instead of the correct code:</p>\n\n<pre><code>Configuration config = serverManager.GetApplicationHostConfiguration();\nConfigurationSection serverRuntimeSection = configApp.GetSection(\"system.webServer/serverRuntime\", websiteName);\nserverRuntimeSection[\"alternateHostName\"] = hostname;\n</code></pre>\n\n<p>in other words, I was trying to operate on the website's web.config instead of the global file C:\\Windows\\System32\\inetsrv\\config\\applicationHost.config, which has a section (or can have a section) for the website.  The setting I was trying to change exists only in the applicationHost.config file.</p>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 16973481, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>For <strong>Windows Server 2012</strong> and <strong>IIS 8</strong>, the procedure is similar.</p>\n\n<p>The <code>Web Server (IIS)</code> and <code>Application Server</code> should be installed, and you should also have the optional <code>Web Server (IIS) Support</code> under <code>Application Server</code>.</p>\n\n<p><img src=\"http://i.stack.imgur.com/zKoK2.jpg\" alt=\"Windows Server 2012 and IIS 8 Requirements for MVC\"></p>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 21445937, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>On <em>Windows Server 2012</em> with <em>IIS 8</em> I have solved this by enabling <em>ASP.NET 4.5</em> feature:</p>\n\n<p><img src=\"http://i.stack.imgur.com/zr0ot.png\" alt=\"enter image description here\"></p>\n\n<p>and then following <a href=\"http://stackoverflow.com/a/21445937/187752\">ken's answer</a>.</p>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 21684521, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>For Windows Server 2008 and IIS 7, the procedure is similar. \nplease refer to this:\n<a href=\"http://msdn.microsoft.com/en-us/library/vstudio/bb763178%28v=vs.100%29.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/vstudio/bb763178(v=vs.100).aspx</a></p>\n\n<p>in add role service, u will see \"Application Development Features\"</p>\n\n<p>Check (enable) the features. I checked all.</p>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 23604395, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>I had the same issue. </p>\n\n<ul>\n<li>Resolved it by enabling Application Server feature. Restarted iis\nafter that.</li>\n</ul>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 23689968, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>In my case it was that on server was not enabled \"HTTP Activation\" under .NET Framework Features. So for Windows Server 2012 the solution which worked for me was:</p>\n\n<p>Server Manager -> Add roles and features -> Features -> make sure that under .NET Framework  of version you want to use is checked \"HTTP Activation\"</p>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 23844504, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>As per <a href=\"http://stackoverflow.com/a/25698296/834431\">my answer to this similar issue</a>;</p>\n\n<p>Try unlocking the relevant IIS configuration settings at server level, as follows:</p>\n\n<ol>\n<li>Open <strong>IIS Manager</strong></li>\n<li><strong>Select the server</strong> in the Connections pane</li>\n<li>Open <strong>Configuration Editor</strong> in the main pane</li>\n<li>In the Sections drop down, select the section to unlock, e.g. <strong>system.webServer > defaultPath</strong></li>\n<li>Click <strong>Unlock Attribute</strong> in the right pane</li>\n<li>Repeat for any other settings which you need to unlock</li>\n<li>Restart IIS (optional) - Select the server in the Conncetions pane, click Restart in the Actions pane</li>\n</ol>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 25698312, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>Norwegian google ref:  </p>\n\n<blockquote>\n  <p>Denne konfigurasjonsdelen kan ikke brukes i denne banen. Dette skjer n\u00e5r delen er l\u00e5st p\u00e5 et overordnet niv\u00e5. L\u00e5sing skjer som standard (overrideModeDefault=\"Deny\") eller angis eksplisitt av en stedskode med overrideMode=\"Deny\" eller den eldre allowOverride=\"false\".</p>\n</blockquote>\n\n<p>Turning on all Application development options fixed this for me. I probably don't need all, but now it works.</p>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 26480333, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>I needed to run these two commands from and elevated command prompt:</p>\n\n<pre><code>%windir%/system32/inetsrv/appcmd unlock config /section:anonymousAuthentication\n\n%windir%/system32/inetsrv/appcmd unlock config -section:windowsAuthentication\n</code></pre>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 26993099, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>This worked for me\nAlso in IIS 8 you can solve this problem by changing the server to IIS Express. Goto debug->Properties \nIn the Web select the server as IIS Express from the dropdown and then rebuild the solution</p>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 27242722, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>Received this same issue after installing IIS 7 on Vista Home Premium.  To correct error I changed the following values located in the applicationHost.config file located in Windows\\system32\\inetsrv.</p>\n\n<p>Change all of the following values located in section  --> </p>\n\n<pre><code>&lt;div mce_keep=\"true\"&gt;&lt;section name=\"handlers\" overrideModeDefault=\"Deny\" /&gt; change this value from \"Deny\" to \"Allow\"&lt;/div&gt;\n&lt;div mce_keep=\"true\"&gt;&lt;section name=\"modules\" allowDefinition=\"MachineToApplication\" overrideModeDefault=\"Deny\" /&gt; change this value from \"Deny\" to \"Allow\"&lt;/div&gt;\n</code></pre>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 29443859, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>To make a change at Application Level (Web.Config):</p>\n\n<p>Please remove the Trust Level from the web.config:\n</p>\n\n<p>Actually I was getting this error when I was trying to host my Website on the Hosting Server where I don't have control on their Server. Removing the above line from my Application web.config solved my issue.</p>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 30914042, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>I had an issue where I was putting in the override = \"Allow\" values (mentioned here already)......but on a x64 bit system.......my 32 notepad++ was phantom saving them.  Switching to Notepad (which is a 64bit application on a x64 bit O/S) allowed me to save the settings.</p>\n\n<p>See :</p>\n\n<p><a href=\"http://dpotter.net/technical/2009/11/editing-applicationhostconfig-on-64-bit-windows/\" rel=\"nofollow\">http://dpotter.net/technical/2009/11/editing-applicationhostconfig-on-64-bit-windows/</a></p>\n\n<p>The relevant text:</p>\n\n<p><em>One of the problems I\u2019m running down required that I view and possibly edit applicationHost.config.  This file is located at %SystemRoot%\\System32\\inetsrv\\config.  Seems simple enough.  I was able to find it from the command line easily, but when I went to load it in my favorite editor (Notepad++) I got a file not found error.  Turns out that the System32 folder is redirected for 32-bit applications to SysWOW64.  There appears to be no way to view the System32 folder using a 32-bit app.  Go figure.\nFortunately, 64-bit versions of Windows ship with a 64-bit version of Notepad.  As much as I dislike it, at least it works.</em></p>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 31973108, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>In my case I was getting this error when attempting to update the authentication settings in IIS also in addition to browsing.  I was able to remove this error by removing the authentication setting from the web.config itself.  Removing a problematic configuration section may be less invasive and preferable in some cases than changing the server roles and features too much:</p>\n\n<p><strong>Section Removed:</strong></p>\n\n<pre><code>    &lt;security&gt;\n        &lt;authentication&gt;\n            &lt;windowsAuthentication enabled=\"true\" /&gt;\n        &lt;/authentication&gt;\n    &lt;/security&gt;\n</code></pre>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 32235331, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>I needed to change the SSL settings on a subfolder when i got this nice message. In my case following action helped me out.</p>\n\n<p>Opened C:\\Windows\\System32\\inetsrv\\config\\applicationHost.config</p>\n\n<p>And changed the value from overrideModeDefault=\"Deny\" to \"Allow\"</p>\n\n<pre><code>&lt;sectionGroup name=\"system.webServer\"&gt;\n ...\n    &lt;sectionGroup name=\"security\"&gt;\n        &lt;section name=\"access\" overrideModeDefault=\"Allow\" /&gt;\n    &lt;/sectionGroup&gt;\n</code></pre>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 32281015, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>In our case on IIS 8 we found the error was produced when attempting to view Authentication\" for a site, when:</p>\n\n<ol>\n<li>The server Feature Delegation marked as \"Authentication - Windows\" = \"Read Only\"</li>\n<li>The site had a web.config that explicitly referenced windows authentication; e.g., </li>\n</ol>\n\n<p>Marking the site Feature Delegation \"Authentication - Windows\" = \"Read/Write\", the error went away.  It appears that, with the feature marked \"Read Only\", the web.config is not allowed to reference it at all even to disable it, as this apparently constitutes a write.</p>\n\n<p><a href=\"http://i.stack.imgur.com/UUxxx.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/UUxxx.png\" alt=\"site web.config\"></a>\n<a href=\"http://i.stack.imgur.com/NLtt9.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/NLtt9.png\" alt=\"IIS Manager - Server Feature Delegation\"></a></p>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 33790020, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>Seems that with IIS Express and VS 2015, there's a copy of the applicationHost.config file at $(solutionDir).vs\\config\\applicationhost.config so you'll need to make changes there.  See this link: <a href=\"http://digitaldrummerj.me/iis-express-windows-authentication/\">http://digitaldrummerj.me/iis-express-windows-authentication/</a></p>\n\n<p>Make sure these lines are changed per below:</p>\n\n<pre><code>&lt;section name=\"windowsAuthentication\" overrideModeDefault=\"Allow\" /&gt;\n&lt;section name=\"anonymousAuthentication\" overrideModeDefault=\"Allow\" /&gt;\n&lt;add name=\"WindowsAuthenticationModule\" lockItem=\"false\" /&gt;\n&lt;add name=\"AnonymousAuthenticationModule\" lockItem=\"false\" /&gt;\n</code></pre>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 34751250, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>The following worked for me:</p>\n\n<p>Go to project properties.  Web tab.  Set to Local IIS and set specific page.</p>\n\n<p>I have Windows 7 and Visual Studio 2013.</p>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 35071778, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>Can You try this:</p>\n\n<p>Go to application path where you're getting deny error, right click </p>\n\n<p><strong>Properties->Security tab</strong></p>\n\n<p>In that, change the permissions and check the checkbox read and write. Then it will work without any error hopefully.</p>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 35429548, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>The Powershell way of enabling the features (Windows Server 2012 +) - trim as needed:</p>\n\n<pre><code>Install-WindowsFeature NET-Framework-Core\nInstall-WindowsFeature Web-Server -IncludeAllSubFeature\nInstall-WindowsFeature NET-Framework-Features -IncludeAllSubFeature\nInstall-WindowsFeature NET-Framework-45-ASPNET -IncludeAllSubFeature\nInstall-WindowsFeature Application-Server -IncludeAllSubFeature\nInstall-WindowsFeature MSMQ -IncludeAllSubFeature\nInstall-WindowsFeature WAS -IncludeAllSubFeature\n</code></pre>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 35891698, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>The best option is to Change <code>Application Settings</code> from the <code>Custom Site Delegation</code><br>\nOpen <code>IIS</code> and from the root select <code>Feature Delegation</code> and then select <code>Application Settings</code> and from the right sidebar select <code>Read/Write</code>\n<a href=\"http://i.stack.imgur.com/Fz3qv.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/Fz3qv.png\" alt=\"Step #1\"></a>\n<a href=\"http://i.stack.imgur.com/byo2u.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/byo2u.png\" alt=\"Step #2\"></a></p>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 38975349, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}, {"body": "<p>i solved this issue </p>\n\n<p>go to cmd and execute  aspnet_regiis -i</p>\n\n<p>hope it helpful to someone.</p>\n", "title": "IIS - this configuration section cannot be used at this path (configuration locking?)", "answer_id": 39463080, "question_id": 9794985, "tags": ["iis", "iis-7", "iis-8.5"]}], "link": "http://stackoverflow.com/questions/9794985/iis-this-configuration-section-cannot-be-used-at-this-path-configuration-lock", "question_id": 9794985}, {"body": "<p>I'm stuck and cannot escape. It says:</p>\n\n<pre><code>\"type :quit&lt;Enter&gt; to quit VIM\"\n</code></pre>\n\n<p>but when I type that it simply appears in the object body.</p>\n", "title": "How to exit the VIM editor?", "tags": ["vim", "vi"], "answers": [{"body": "<p>Hit the <kbd>Esc</kbd> key; that goes into command mode. Then you can type</p>\n\n<ul>\n<li><code>:q</code>  to quit (short for <code>:quit</code>)</li>\n<li><code>:q!</code> to quit without saving (short for <code>:quit!</code>)</li>\n<li><code>:wq</code> to write and quit (think write and quit)</li>\n<li><code>:wq!</code> to write and quit even if file has only read permission (if file does not have write permission: force write)</li>\n<li><code>:x</code>  to write and quit (similar to <code>:wq</code>, but won't write if there are no changes)</li>\n<li><code>:qa</code> to quit all (short for <code>:quitall</code>)</li>\n</ul>\n\n<p>When you press <code>:</code>, a <code>:</code> will appear at the bottom of the screen.</p>\n\n<p>Or you can press <kbd>Esc</kbd> <code>ZZ</code> (<kbd>Esc</kbd> <kbd>Shift</kbd>+<kbd>Z</kbd> <kbd>Shift</kbd>+<kbd>Z</kbd>) to write/save if the file was changed, then quit.</p>\n\n<p>Or if you don't want to save changes you can use ZQ instead.</p>\n\n<p>Vim has extensive help, so type <kbd>Esc</kbd><code>:help</code><kbd>Return</kbd> and you will have all your answers and even a neat tutorial.</p>\n", "title": "How to exit the VIM editor?", "answer_id": 11828573, "question_id": 11828270, "tags": ["vim", "vi"]}, {"body": "<p>If you want to quit without saving in vim <em>and</em> have vim return a non-zero exit code, you can use <code>:cq</code>.</p>\n\n<p>I use this all the time because I can't be bothered to pinky shift for <code>!</code>.  I often pipe things to vim which don't need to be saved in a file.  We also have an odd SVN wrapper at work which must be exited with a non-zero value in order to abort a checkin.</p>\n", "title": "How to exit the VIM editor?", "answer_id": 21403753, "question_id": 11828270, "tags": ["vim", "vi"]}, {"body": "<p>In case you need to exit Vim in <strong>easy mode</strong> (while using <code>-y</code> option) you can enter normal Vim mode by hitting <code>control + L</code> and then any of the normal exiting options will work.</p>\n", "title": "How to exit the VIM editor?", "answer_id": 24826612, "question_id": 11828270, "tags": ["vim", "vi"]}, {"body": "<p>After hitting <kbd>ESC</kbd> (or <kbd>cmd</kbd> + <kbd>C</kbd> on my computer) you must hit <kbd>:</kbd> for the command prompt to appear. Then, you may enter <code>quit</code>.</p>\n\n<p>You may find that the machine will not allow you to quit because your information hasn't been saved. If you'd like to quit anyway, enter <kbd>!</kbd> directly after the quit (i.e. <code>:quit!</code>).</p>\n", "title": "How to exit the VIM editor?", "answer_id": 27191702, "question_id": 11828270, "tags": ["vim", "vi"]}, {"body": "<p>I got VIM by installing a GIT client on Windows. <code>:q</code> wouldn't exit VIM for me. <code>:exit</code> did however...</p>\n", "title": "How to exit the VIM editor?", "answer_id": 28342808, "question_id": 11828270, "tags": ["vim", "vi"]}, {"body": "<p>Before you enter a command, <strong>hit the <kbd>Esc</kbd> key</strong>. After you enter it, hit the <kbd>Return</kbd> to confirm.</p>\n\n<p><kbd>Esc</kbd> finishes the current command and switches Vim to <a href=\"http://vimdoc.sourceforge.net/htmldoc/cmdline.html#Command-line\">command-line mode</a>.   Now if you press <kbd>:</kbd>, the <code>:</code> will appear at the <em>bottom</em> of the screen. This confirms that you're actually typing a command and not editing the file. </p>\n\n<p>Most commands have abbreviations, with optional part enclosed in brackets: <code>c[ommand]</code>.</p>\n\n<p>Commands marked with '*' are Vim-only (not implemented in Vi).</p>\n\n<p><strong>Safe-quit (fails if there are unsaved changes):</strong></p>\n\n<ul>\n<li><code>:q[uit]</code>  Quit the current <a href=\"http://vimdoc.sourceforge.net/htmldoc/windows.html#window\">window</a>. Quit Vim if this is the last        window.  This fails when changes have been made in current <a href=\"http://vimdoc.sourceforge.net/htmldoc/windows.html#buffers\">buffer</a>.</li>\n<li><code>:qa[ll]</code>*  Quit all windows and Vim, unless there are some buffers which have been changed.</li>\n</ul>\n\n<p><strong>Prompt-quit (prompts if there are unsaved changes)</strong></p>\n\n<ul>\n<li><code>:conf[irm] q[uit]</code>* Quit, but give prompt when there are some buffers which have been changed.</li>\n<li><code>:conf[irm] xa[ll]</code>* Write all changed buffers and exit Vim. Bring up a prompt when some buffers cannot be written.</li>\n</ul>\n\n<p><strong>Write (save) changes and quit:</strong></p>\n\n<ul>\n<li><code>:wq</code> Write the current file (even if it was not changed) and quit.  Writing fails when the file is read-only or the buffer does not have a name. <code>:wqa[ll]</code>* for all windows.</li>\n<li><code>:wq!</code> The same, but writes even read-only files. <code>:wqa[ll]!</code>* for all windows.</li>\n<li><code>:x[it]</code>, <code>ZZ</code>(with <a href=\"http://vimdoc.sourceforge.net/htmldoc/editing.html#ZZ\">details</a>). Write the file only <em>if it was changed</em> and quit, <code>:xa[ll]</code>* for all windows.</li>\n</ul>\n\n<p><strong>Discard changes and quit:</strong></p>\n\n<ul>\n<li><code>:q[uit]!</code> <code>ZQ</code>* Quit without writing, also when visible buffers have changes.  Does not exit when there are changed hidden buffers. </li>\n<li><code>:qa[ll]!</code>*, <code>:quita[ll][!]</code>* Quit Vim, all changes to the buffers (including hidden) are lost.</li>\n</ul>\n\n<p><strong>Press <kbd>Return</kbd> to confirm the command.</strong></p>\n\n<p>This answer doesn't reference all Vim write and quit commands and arguments. Indeed, they are referenced in the <a href=\"http://vimdoc.sourceforge.net/htmldoc/editing.html#:q\">Vim documentation</a>. </p>\n\n<p>Vim has extensive built-in help, type <kbd>Esc</kbd><code>:help</code><kbd>Return</kbd> to open it.</p>\n\n<p><sub>\nThis answer was inspired by the <a href=\"http://stackoverflow.com/a/11828573/2790048\">other one</a>, originally authored by @dirvine and edited by other SO users. I've included more information from Vim reference, SO comments and some other sources. Differences for Vi and Vim are reflected too.\n</sub></p>\n", "title": "How to exit the VIM editor?", "answer_id": 30710567, "question_id": 11828270, "tags": ["vim", "vi"]}, {"body": "<p><kbd>Esc</kbd><kbd>Esc</kbd><kbd>Esc</kbd>:qa!</p>\n\n<p>This in case you have no idea what you've done while attempting to exit and you don't want to write anything to the files.</p>\n\n<p>It is possible that you enter e.g. insert mode, then visual mode and then operator pending mode and thus need to press <kbd>Esc</kbd> three times.</p>\n", "title": "How to exit the VIM editor?", "answer_id": 31028197, "question_id": 11828270, "tags": ["vim", "vi"]}, {"body": "<p>So, I guess like me you are not into <code>VIM</code> and want to <code>Quit</code> without <code>Saving</code>.</p>\n\n<p>Just do the following</p>\n\n<ul>\n<li>Press the <kbd>ESC</kbd> key.</li>\n<li>Now type <kbd>:cq</li>\n<li>Then press <kbd>Return</kbd> or Enter</kbd>.</li>\n</ul>\n\n<p>And we are back home :)</p>\n", "title": "How to exit the VIM editor?", "answer_id": 37848412, "question_id": 11828270, "tags": ["vim", "vi"]}, {"body": "<p>Press Escape then<br/>\n<code>:q</code> <em>to quit</em> (short for :quit)<br/>\n<code>:q!</code> <em>to quit without saving</em> (short for :quit!)<br/>\n<code>:wq</code> <em>to write and quit</em> (think write and quit)<br/>\n<code>:wq!</code> <em>to write and quit even if file has only read permission</em> (if file does not have write permission: force write)</p>\n", "title": "How to exit the VIM editor?", "answer_id": 38414537, "question_id": 11828270, "tags": ["vim", "vi"]}], "link": "http://stackoverflow.com/questions/11828270/how-to-exit-the-vim-editor", "question_id": 11828270}, {"body": "<p>I wanted to compare reading lines of string input from stdin using Python and C++ and was shocked to see my C++ code run an order of magnitude slower than the equivalent Python code.  Since my C++ is rusty and I'm not yet an expert Pythonista, please tell me if I'm doing something wrong or if I'm misunderstanding something.  </p>\n\n<hr>\n\n<p>(tl;dr answer: include the statement: cin.sync_with_stdio(false) or just use fgets instead.</p>\n\n<p>tl;dr results: scroll all the way down to the bottom of my question and look at the table.)</p>\n\n<hr>\n\n<p><strong>C++ code:</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;time.h&gt;\n\nusing namespace std;\n\nint main() {\n    string input_line;\n    long line_count = 0;\n    time_t start = time(NULL);\n    int sec;\n    int lps;                                                                   \n\n    while (cin) {\n        getline(cin, input_line);\n        if (!cin.eof())\n            line_count++;\n    };\n\n    sec = (int) time(NULL) - start;\n    cerr &lt;&lt; \"Read \" &lt;&lt; line_count &lt;&lt; \" lines in \" &lt;&lt; sec &lt;&lt; \" seconds.\" ;\n    if (sec &gt; 0) {\n        lps = line_count / sec;\n        cerr &lt;&lt; \" LPS: \" &lt;&lt; lps &lt;&lt; endl;\n    } else\n        cerr &lt;&lt; endl;\n    return 0;\n}\n\n//Compiled with:\n//g++ -O3 -o readline_test_cpp foo.cpp\n</code></pre>\n\n<p><strong>Python Equivalent:</strong></p>\n\n<pre><code>#!/usr/bin/env python\nimport time\nimport sys\n\ncount = 0\nstart = time.time()\n\nfor line in  sys.stdin:\n    count += 1\n\ndelta_sec = int(time.time() - start_time)\nif delta_sec &gt;= 0:\n    lines_per_sec = int(round(count/delta_sec))\n    print(\"Read {0} lines in {1} seconds. LPS: {2}\".format(count, delta_sec,\n       lines_per_sec))\n</code></pre>\n\n<p><strong>Here are my results:</strong></p>\n\n<pre><code>$ cat test_lines | ./readline_test_cpp \nRead 5570000 lines in 9 seconds. LPS: 618889\n\n$cat test_lines | ./readline_test.py \nRead 5570000 lines in 1 seconds. LPS: 5570000\n</code></pre>\n\n<p><strong>Edit:</strong> <em>I should note that I tried this both under OS-X (10.6.8) and Linux 2.6.32 (RHEL 6.2).  The former is a macbook pro, the latter is a very beefy server, not that this is too pertinent.</em></p>\n\n<p><strong>Edit 2:</strong> <em>(Removed this edit, as no longer applicable)</em></p>\n\n<pre><code>$ for i in {1..5}; do echo \"Test run $i at `date`\"; echo -n \"CPP:\"; cat test_lines | ./readline_test_cpp ; echo -n \"Python:\"; cat test_lines | ./readline_test.py ; done\nTest run 1 at Mon Feb 20 21:29:28 EST 2012\nCPP:   Read 5570001 lines in 9 seconds. LPS: 618889\nPython:Read 5570000 lines in 1 seconds. LPS: 5570000\nTest run 2 at Mon Feb 20 21:29:39 EST 2012\nCPP:   Read 5570001 lines in 9 seconds. LPS: 618889\nPython:Read 5570000 lines in 1 seconds. LPS: 5570000\nTest run 3 at Mon Feb 20 21:29:50 EST 2012\nCPP:   Read 5570001 lines in 9 seconds. LPS: 618889\nPython:Read 5570000 lines in 1 seconds. LPS: 5570000\nTest run 4 at Mon Feb 20 21:30:01 EST 2012\nCPP:   Read 5570001 lines in 9 seconds. LPS: 618889\nPython:Read 5570000 lines in 1 seconds. LPS: 5570000\nTest run 5 at Mon Feb 20 21:30:11 EST 2012\nCPP:   Read 5570001 lines in 10 seconds. LPS: 557000\nPython:Read 5570000 lines in  1 seconds. LPS: 5570000\n</code></pre>\n\n<p><strong>Edit 3:</strong> </p>\n\n<p>Okay, I tried J.N.'s suggestion of trying having python store the line read: but it made no difference to python's speed.  </p>\n\n<p>I also tried J.N.'s suggestion of using scanf into a char array instead of getline into a std::string.  Bingo!  This resulted in equivalent performance for both python and c++. (3,333,333 LPS with my input data, which by the way are just short lines of three fields each, usually about 20 chars wide, though sometimes more).</p>\n\n<p>Code:</p>\n\n<pre><code>char input_a[512];\nchar input_b[32];\nchar input_c[512];\nwhile(scanf(\"%s %s %s\\n\", input_a, input_b, input_c) != EOF) {             \n    line_count++;\n};\n</code></pre>\n\n<p>Speed:</p>\n\n<pre><code>$ cat test_lines | ./readline_test_cpp2 \nRead 10000000 lines in 3 seconds. LPS: 3333333\n$ cat test_lines | ./readline_test2.py \nRead 10000000 lines in 3 seconds. LPS: 3333333\n</code></pre>\n\n<p>(Yes, I ran it several times.) So, I guess I will now use scanf instead of getline.  But, I'm still curious if people think this performance hit from std::string/getline is typical and reasonable. </p>\n\n<p><strong>Edit 4 (was: Final Edit / Solution):</strong></p>\n\n<p>Adding:\n    cin.sync_with_stdio(false);</p>\n\n<p>Immediately above my original while loop above results in code that runs faster than Python.  </p>\n\n<p><strong>New performance comparison</strong> (this is on my 2011 Macbook Pro), using the original code, the original with the sync disabled, and the original python, respectively, on a file with 20M lines of text.  Yes, I ran it several times to eliminate disk caching confound.</p>\n\n<pre><code>$ /usr/bin/time cat test_lines_double | ./readline_test_cpp\n       33.30 real         0.04 user         0.74 sys\nRead 20000001 lines in 33 seconds. LPS: 606060\n$ /usr/bin/time cat test_lines_double | ./readline_test_cpp1b\n        3.79 real         0.01 user         0.50 sys\nRead 20000000 lines in 4 seconds. LPS: 5000000\n$ /usr/bin/time cat test_lines_double | ./readline_test.py \n        6.88 real         0.01 user         0.38 sys\nRead 20000000 lines in 6 seconds. LPS: 3333333\n</code></pre>\n\n<p>Thanks to @Vaughn Cato for his answer!  <strong><em>Any elaboration people can make or good references people can point to as to why this sync happens, what it means, when it's useful, and when it's okay to disable would be greatly appreciated by posterity.</em></strong> :-)</p>\n\n<p><strong>Edit 5 / Better Solution:</strong></p>\n\n<p>As suggested by Gandalf The Gray below, gets is even faster than scanf or the unsynchronized cin approach.  I also learned that <a href=\"http://c-faq.com/stdio/scanfprobs.html\">scanf</a> and <a href=\"http://c-faq.com/stdio/getsvsfgets.html\">gets</a> are both UNSAFE and should NOT BE USED due to potential of buffer overflow.  So, I wrote this iteration using fgets, the safer alternative to gets.  Here are the pertinent lines for my fellow noobs:</p>\n\n<pre><code>char input_line[MAX_LINE];\nchar *result;\n\n//&lt;snip&gt;\n\nwhile((result = fgets(input_line, MAX_LINE, stdin )) != NULL)    \n    line_count++;\nif (ferror(stdin))\n    perror(\"Error reading stdin.\");\n</code></pre>\n\n<p>Now, here are the results using an even larger file (100M lines; ~3.4GB) on a fast server with very fast disk, comparing the python, the unsynced cin, and the fgets approaches, as well as comparing with the wc utility.  [The scanf version segfaulted and I don't feel like troubleshooting it.]:</p>\n\n<pre><code>$ /usr/bin/time cat temp_big_file | readline_test.py \n0.03user 2.04system 0:28.06elapsed 7%CPU (0avgtext+0avgdata 2464maxresident)k\n0inputs+0outputs (0major+182minor)pagefaults 0swaps\nRead 100000000 lines in 28 seconds. LPS: 3571428\n\n$ /usr/bin/time cat temp_big_file | readline_test_unsync_cin \n0.03user 1.64system 0:08.10elapsed 20%CPU (0avgtext+0avgdata 2464maxresident)k\n0inputs+0outputs (0major+182minor)pagefaults 0swaps\nRead 100000000 lines in 8 seconds. LPS: 12500000\n\n$ /usr/bin/time cat temp_big_file | readline_test_fgets \n0.00user 0.93system 0:07.01elapsed 13%CPU (0avgtext+0avgdata 2448maxresident)k\n0inputs+0outputs (0major+181minor)pagefaults 0swaps\nRead 100000000 lines in 7 seconds. LPS: 14285714\n\n$ /usr/bin/time cat temp_big_file | wc -l\n0.01user 1.34system 0:01.83elapsed 74%CPU (0avgtext+0avgdata 2464maxresident)k\n0inputs+0outputs (0major+182minor)pagefaults 0swaps\n100000000\n\n\nRecap (lines per second):\npython:         3,571,428 \ncin (no sync): 12,500,000\nfgets:         14,285,714\nwc:            54,644,808\n</code></pre>\n\n<p>As you can see, fgets is better but still pretty far from wc performance; I'm pretty sure this is due to the fact that wc examines each character without any memory copying.  I suspect that, at this point, other parts of the code will become the bottleneck, so I don't think optimizing to that level would even be worthwhile, even if possible (since, after all, I actually need to store the read lines in memory).  </p>\n\n<p>Also note that a small tradeoff with using a char * buffer and fgets vs unsynced cin to string is that the latter can read lines of any length, while the former requires limiting input to some finite number.  In practice, this is probably a non-issue for reading most line-based input files, as the buffer can be set to a very large value that would not be exceeded by valid input. </p>\n\n<p>This has been educational.  Thanks to all for your comments and suggestions.</p>\n\n<p><strong>Edit 6:</strong></p>\n\n<p>As suggested by J.F. Sebastian in the comments below, the GNU wc utility uses plain C read() (within the safe-read.c wrapper) to read chunks (of 16k bytes) at a time and count new lines.  Here's a python equivalent based on J.F.'s code (just showing the relevant snippet that replaces the python for loop:</p>\n\n<pre><code>BUFFER_SIZE = 16384 \ncount = sum(chunk.count('\\n') for chunk in iter(partial(sys.stdin.read, BUFFER_SIZE), ''))\n</code></pre>\n\n<p>The performance of this version is quite fast (though still a bit slower than the raw c wc utility, of course:</p>\n\n<pre><code>$ /usr/bin/time cat temp_big_file | readline_test3.py \n0.01user 1.16system 0:04.74elapsed 24%CPU (0avgtext+0avgdata 2448maxresident)k\n0inputs+0outputs (0major+181minor)pagefaults 0swaps\nRead 100000000 lines in 4.7275 seconds. LPS: 21152829\n</code></pre>\n\n<p>Again, it's a bit silly for me to compare C++ fgets/cin and the first python code on the one hand to wc -l and this last python snippet on the other, as the latter two don't actually store the read lines but merely count newlines.  Still, it's interesting to explore all the different implementations and think about the performance implications.  Thanks again!</p>\n\n<p><strong>Edit 7: Tiny benchmark addendum and recap</strong></p>\n\n<p>For completeness, I thought I'd update the read speed for the same file on the same box with the original (synced) C++ code.  Again, this is for a 100M line file on a fast disk. Here's the complete table now:</p>\n\n<pre><code>Implementation      Lines per second\npython (default)           3,571,428\ncin (default/naive)          819,672\ncin (no sync)             12,500,000\nfgets                     14,285,714\nwc (not fair comparison)  54,644,808\n</code></pre>\n", "title": "Why is reading lines from stdin much slower in C++ than Python?", "tags": ["c++", "python", "benchmarking", "readline", "getline"], "answers": [{"body": "<p>When the C++ program had to read the lines, it had to read the file off the disk. When you ran the <a href=\"http://en.wikipedia.org/wiki/Python_%28programming_language%29\" rel=\"nofollow\">Python</a> program, the file was already cached in memory. That's probably why the Python program appeared to run quicker.</p>\n\n<p>Also, your C++ program will always count an extra line because you don't check if <code>getline</code> succeeded before incrementing the count. Your check of <code>eof</code> is both unnecessary and wrong (because it's after the failure you mishandle).</p>\n", "title": "Why is reading lines from stdin much slower in C++ than Python?", "answer_id": 9371267, "question_id": 9371238, "tags": ["c++", "python", "benchmarking", "readline", "getline"]}, {"body": "<p>I can reproduce your results on my system. I fed a 351 megabyte binary file to both programs and the Python version divides by zero because it executes so quickly and the C++ version takes 12 seconds to execute.</p>\n\n<p>I took out the average speed arithmetic and ran the tests a few times:</p>\n\n<p><code>cat</code> takes an average of <code>0.055</code> seconds (over eight runs) to dump the file to <code>/dev/null</code>.</p>\n\n<p>The Python version takes an average of <a href=\"http://www.wolframalpha.com/input/?i=%5b.48+%2C+.45+%2C+.49+%2C+.42+%2C+.52+%2C+.50+%2C+.51+%2C+.50%5d\"><code>.484</code> seconds and <code>0.03</code> ssd</a> (over eight runs) to count the lines. Here's one representative output from <code>/usr/bin/time</code>, which is kind enough to show memory used (<code>20800</code> max resident kilobytes) and disk IO (<code>0major</code> == everything was read from cache).</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>0.48user 0.08system 0:00.56elapsed 98%CPU (0avgtext+0avgdata 20800maxresident)k\n0inputs+0outputs (0major+1604minor)pagefaults 0swaps\n</code></pre>\n\n<p>The C++ version takes an average of <a href=\"http://www.wolframalpha.com/input/?i=%5b12.24++%2C+12.35+%2C+12.23+%2C+12.21+%2C+12.86+%2C+12.27+%2C+12.12+%2C+12.34+%5d\"><code>12.32</code> seconds and <code>0.23</code> ssd</a> (over eight runs) to count the lines. One representative output from <code>/usr/bin/time</code> shows only <code>4672</code> max resident kilobytes and again, <code>0major</code> shows everything was read from cache:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>12.34user 0.09system 0:12.45elapsed 99%CPU (0avgtext+0avgdata 4672maxresident)k\n0inputs+8outputs (0major+349minor)pagefaults 0swaps\n</code></pre>\n\n<p>I've got more free memory than I know what to do with:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ free -m\n             total       used       free     shared    buffers     cached\nMem:          5979       4413       1566          0        226       2594\n-/+ buffers/cache:       1591       4387\nSwap:         6347          1       6346\n</code></pre>\n\n<p>As a quick summary, the <code>4387</code> in the <code>free</code> column of the <code>-/+ buffers/cache</code> line indicates that I've got roughly four gigabytes of memory \"free\" to the kernel any time it pleases. Memory pressure is not an issue.</p>\n\n<p>The Python version created <code>54898</code> lines in <code>strace -o /tmp/python /tmp/readlines.py &lt; /input/file</code>.</p>\n\n<p>The C++ version created <code>89802</code> lines in <code>strace -o /tmp/cpp /tmp/readlines &lt; /input/file</code>.</p>\n", "title": "Why is reading lines from stdin much slower in C++ than Python?", "answer_id": 9371649, "question_id": 9371238, "tags": ["c++", "python", "benchmarking", "readline", "getline"]}, {"body": "<p>A first element of an answer: <code>&lt;iostream&gt;</code> is slow. Damn slow. I get a huge performance boost with <code>scanf</code> as in the below, but it is still two times slower than Python.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;time.h&gt;\n#include &lt;cstdio&gt;\n\nusing namespace std;\n\nint main() {\n    char buffer[10000];\n    long line_count = 0;\n    time_t start = time(NULL);\n    int sec;\n    int lps;\n\n    int read = 1;\n    while(read &gt; 0) {\n        read = scanf(\"%s\", buffer);\n        line_count++;\n    };\n    sec = (int) time(NULL) - start;\n    line_count--;\n    cerr &lt;&lt; \"Saw \" &lt;&lt; line_count &lt;&lt; \" lines in \" &lt;&lt; sec &lt;&lt; \" seconds.\" ;\n    if (sec &gt; 0) {\n        lps = line_count / sec;\n        cerr &lt;&lt; \"  Crunch speed: \" &lt;&lt; lps &lt;&lt; endl;\n    } \n    else\n        cerr &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n", "title": "Why is reading lines from stdin much slower in C++ than Python?", "answer_id": 9371651, "question_id": 9371238, "tags": ["c++", "python", "benchmarking", "readline", "getline"]}, {"body": "<p>By default, <code>cin</code> is synchronized with stdio, which causes it to avoid any input buffering.  If you add this to the top of your main, you should see much better performance:</p>\n\n<pre><code>std::ios_base::sync_with_stdio(false);\n</code></pre>\n\n<p>Normally, when an input stream is buffered, instead of reading one character at a time, the stream will be read in larger chunks.  This reduces the number of system calls, which are typically relatively expensive.  However, since the <code>FILE*</code> based <code>stdio</code> and <code>iostreams</code> often have separate implementations and therefore separate buffers, this could lead to a problem if both were used together.  For example:</p>\n\n<pre><code>int myvalue1;\ncin &gt;&gt; myvalue1;\nint myvalue2;\nscanf(\"%d\",&amp;myvalue2);\n</code></pre>\n\n<p>If more input was read by <code>cin</code> than it actually needed, then the second integer value wouldn't be available for the <code>scanf</code> function, which has its own independent buffer.  This would lead to unexpected results.</p>\n\n<p>To avoid this, by default, streams are synchronized with <code>stdio</code>.  One common way to achieve this is to have <code>cin</code> read each character one at a time as needed using <code>stdio</code> functions.  Unfortunately, this introduces a lot of overhead.  For small amounts of input, this isn't a big problem, but when you are reading millions of lines, the performance penalty is significant.</p>\n\n<p>Fortunately, the library designers decided that you should also be able to disable this feature to get improved performance if you knew what you were doing, so they provided the <code>sync_with_stdio</code> method.</p>\n", "title": "Why is reading lines from stdin much slower in C++ than Python?", "answer_id": 9371717, "question_id": 9371238, "tags": ["c++", "python", "benchmarking", "readline", "getline"]}, {"body": "<p>In your second example (with scanf()) reason why this is still slower might be because scanf(\"%s\") parses string and looks for any space char (space, tab, newline).</p>\n\n<p>Also, yes, CPython does some caching to avoid harddisk reads.</p>\n", "title": "Why is reading lines from stdin much slower in C++ than Python?", "answer_id": 9371784, "question_id": 9371238, "tags": ["c++", "python", "benchmarking", "readline", "getline"]}, {"body": "<p>I reproduced the original result on my computer using g++ on a Mac.</p>\n\n<p>Adding the following statements to the C++ version just before the <code>while</code> loop brings it inline with the <a href=\"http://en.wikipedia.org/wiki/Python_%28programming_language%29\">Python</a> version:</p>\n\n<pre><code>std::ios_base::sync_with_stdio(false);\nchar buffer[1048576];\nstd::cin.rdbuf()-&gt;pubsetbuf(buffer, sizeof(buffer));\n</code></pre>\n\n<p>sync_with_stdio improved speed to 2 seconds, and setting a larger buffer brought it down to 1 second.</p>\n", "title": "Why is reading lines from stdin much slower in C++ than Python?", "answer_id": 9371800, "question_id": 9371238, "tags": ["c++", "python", "benchmarking", "readline", "getline"]}, {"body": "<p>Well, I see that in your second solution you switched from <code>cin</code> to <code>scanf</code>, which was the first suggestion I was going to make you (cin is sloooooooooooow). Now, if you switch from <code>scanf</code> to <code>gets</code>, you would see another boost in performance: <code>gets</code> is the fastest C++ function for string input.</p>\n\n<p>BTW, didn't know about that sync thing, nice. But you should still try <code>gets</code>.</p>\n", "title": "Why is reading lines from stdin much slower in C++ than Python?", "answer_id": 9388343, "question_id": 9371238, "tags": ["c++", "python", "benchmarking", "readline", "getline"]}, {"body": "<p>By the way, the reason the line count for the C++ version is one greater than the count for the Python version is that the eof flag only gets set when an attempt is made to read beyond eof. So the correct loop would be:</p>\n\n<pre><code>while (cin) {\n    getline(cin, input_line);\n\n    if (!cin.eof())\n        line_count++;\n};\n</code></pre>\n", "title": "Why is reading lines from stdin much slower in C++ than Python?", "answer_id": 9656778, "question_id": 9371238, "tags": ["c++", "python", "benchmarking", "readline", "getline"]}, {"body": "<p>Nice post. But I would just like to mention that the buffer overflow problem with scanf can be handled by specifying the number of characters to be read (for any datatype).</p>\n\n<p>See the width parameter mentioned in the <a href=\"http://www.cplusplus.com/reference/clibrary/cstdio/scanf/\" rel=\"nofollow\">link</a>.</p>\n\n<p>As an example:</p>\n\n<pre><code>    char s[10];\n    scanf(\"%9s\",s);    //This will read at most 9 characters from the input.\n\n    int x;\n    scanf(\"%2d\",&amp;x);   //This will read a 2 digit number from the input. (just mentioning)\n</code></pre>\n\n<p>This can take care of buffer overflow.\nAlso dynamic width can not be specified, but to overcome that one could simply generate the format string at run-time (though this will prevent the scanf to do the sanity check at compilation).</p>\n", "title": "Why is reading lines from stdin much slower in C++ than Python?", "answer_id": 9657455, "question_id": 9371238, "tags": ["c++", "python", "benchmarking", "readline", "getline"]}, {"body": "<p>Just out of curiosity I've taken a look at what happens under the hood, and I've used <a href=\"http://en.wikipedia.org/wiki/Strace\">dtruss/strace</a> on each test.</p>\n\n<p>C++</p>\n\n<pre><code>./a.out &lt; in\nSaw 6512403 lines in 8 seconds.  Crunch speed: 814050\n</code></pre>\n\n<p>syscalls <code>sudo dtruss -c ./a.out &lt; in</code></p>\n\n<pre><code>CALL                                        COUNT\n__mac_syscall                                   1\n&lt;snip&gt;\nopen                                            6\npread                                           8\nmprotect                                       17\nmmap                                           22\nstat64                                         30\nread_nocancel                               25958\n</code></pre>\n\n<p>Python</p>\n\n<pre><code>./a.py &lt; in\nRead 6512402 lines in 1 seconds. LPS: 6512402\n</code></pre>\n\n<p>syscalls <code>sudo dtruss -c ./a.py &lt; in</code></p>\n\n<pre><code>CALL                                        COUNT\n__mac_syscall                                   1\n&lt;snip&gt;\nopen                                            5\npread                                           8\nmprotect                                       17\nmmap                                           21\nstat64                                         29\n</code></pre>\n", "title": "Why is reading lines from stdin much slower in C++ than Python?", "answer_id": 9657502, "question_id": 9371238, "tags": ["c++", "python", "benchmarking", "readline", "getline"]}, {"body": "<p>Getline, stream operatoes, scanf, can be convenient if you don't care about file loading time or if you are loading small text files...but if performance is something you care about, you should really just buffer the entire file into memory (assuming it will fit).  Here's an example:</p>\n\n<pre><code>//open file in binary mode\nstd::fstream file( filename, std::ios::in|::std::ios::binary );\nif( !file ) return NULL;\n\n//read the size...\nfile.seekg(0, std::ios::end);\nsize_t length = (size_t)file.tellg();\nfile.seekg(0, std::ios::beg);\n\n//read into memory buffer, then close it.\nchar *filebuf = new char[length+1];\nfile.read(filebuf, length);\nfilebuf[length] = '\\0'; //make it null-terminated\nfile.close();\n</code></pre>\n\n<p>If you want, you can wrap a stream around that buffer for more convenient access like this:</p>\n\n<pre><code>std::istrstream header(&amp;buffer[0], length);\n</code></pre>\n\n<p>Also, if you are in control of the file, consider using a flat binary data format instead of text.  It's more reliable to read and write because you don't have to deal with all the ambiguities of whitespace.  It's also smaller and much faster to parse.</p>\n", "title": "Why is reading lines from stdin much slower in C++ than Python?", "answer_id": 9693553, "question_id": 9371238, "tags": ["c++", "python", "benchmarking", "readline", "getline"]}, {"body": "<p>The following code was faster for me than the other code posted here so far:\n(Visual Studio 2013, 64-bit, 500 MB file with line length uniformly in [0, 1000)).</p>\n\n<pre><code>const int buffer_size = 500 * 1024;  // Too large/small buffer is not good.\nstd::vector&lt;char&gt; buffer(buffer_size);\nint size;\nwhile ((size = fread(buffer.data(), sizeof(char), buffer_size, stdin)) &gt; 0) {\n    line_count += count_if(buffer.begin(), buffer.begin() + size, [](char ch) { return ch == '\\n'; });\n}\n</code></pre>\n\n<p>It beats all my Python attempts by more than a factor 2.</p>\n", "title": "Why is reading lines from stdin much slower in C++ than Python?", "answer_id": 23248053, "question_id": 9371238, "tags": ["c++", "python", "benchmarking", "readline", "getline"]}], "link": "http://stackoverflow.com/questions/9371238/why-is-reading-lines-from-stdin-much-slower-in-c-than-python", "question_id": 9371238}, {"body": "<p>My colleague and I are working on the same repository we've branched it into two branches each technically for different projects, but they have similarities so we'll sometimes want to commit back to the *master from the branch.</p>\n\n<p>However, I have the branch, how can my colleague pull that branch specifically. A git clone of the repo does not seem to create the branches locally for him, though I can see them live on unfuddle after a push my end.</p>\n\n<p>Any help would be greatly appreciated.</p>\n\n<p>*Edit, also when I originally made the branch I did -b checkout. Not sure if that makes much difference?</p>\n\n<p>*Edit 2</p>\n\n<pre><code>iMac:test_solar dave$ git branch -r\norigin/HEAD -&gt; origin/master\norigin/daves_branch\norigin/discover\norigin/master\n\ngit fetch origin discover\ngit checkout discover\n</code></pre>\n\n<p>This is the commands I ran. But definitely no workey. I want to be able to check out that branch and then push and commit back just that branches changes from various collaborators or workstations.</p>\n", "title": "Git fetch remote branch", "tags": ["git", "branch", "git-branch", "git-fetch"], "answers": [{"body": "<p>Use <code>git branch -a</code> (both local and remote branches) or <code>git branch -r</code> (only remote branches) to see all the remotes and their branches. You can then do a <code>git checkout -t remotes/repo/branch</code> to the remote and create a local branch.</p>\n\n<p>There is also a git ls-remote command to see all the refs and tags for that remote.</p>\n", "title": "Git fetch remote branch", "answer_id": 9537535, "question_id": 9537392, "tags": ["git", "branch", "git-branch", "git-fetch"]}, {"body": "<p>You need to create a local branch that tracks a remote branch. The following command will create a local branch named <strong>daves_branch</strong>, tracking the remote branch <strong>origin/daves_branch</strong>. When you push your changes the remote branch will be updated.</p>\n\n<p>For most versions of git:</p>\n\n<pre><code>git checkout --track origin/daves_branch\n</code></pre>\n\n<p>--track is shorthand for <code>git checkout -b [branch] [remotename]/[branch]</code> where [remotename] is <strong>origin</strong> in this case and [branch] is twice the same, <strong>daves_branch</strong> in this case.</p>\n\n<p>For git 1.5.6.5 you needed this: </p>\n\n<pre><code>git checkout --track -b daves_branch origin/daves_branch\n</code></pre>\n\n<p>For git 1.7.2.3 and higher this is enough (might have started earlier but this is the earliest confirmation I could find quickly):</p>\n\n<pre><code>git checkout daves_branch\n</code></pre>\n\n<p>full details here: <a href=\"http://git-scm.com/book/en/v2/Git-Branching-Remote-Branches#Tracking-Branches\">http://git-scm.com/book/en/v2/Git-Branching-Remote-Branches#Tracking-Branches</a></p>\n", "title": "Git fetch remote branch", "answer_id": 9537923, "question_id": 9537392, "tags": ["git", "branch", "git-branch", "git-fetch"]}, {"body": "<p>I have used <a href=\"https://www.kernel.org/pub/software/scm/git/docs/git-fetch.html\"><code>fetch</code></a> followed by <a href=\"https://www.kernel.org/pub/software/scm/git/docs/git-checkout.html\"><code>checkout</code></a> ...</p>\n\n<pre><code>git fetch &lt;remote&gt; &lt;rbranch&gt;:&lt;lbranch&gt; \ngit checkout &lt;lbranch&gt;\n</code></pre>\n\n<p>... where <code>&lt;rbranch&gt;</code> is the remote branch or <em>source ref</em> and <code>&lt;lbranch&gt;</code> is the as yet <strong>non-existent</strong> local branch or <em>destination ref</em> you want to track and which you probably want to name the same as the remote branch or source ref. This is explained under <a href=\"https://www.kernel.org/pub/software/scm/git/docs/git-fetch.html#_options\">options</a> in the explanation of <code>&lt;refspec&gt;</code>.</p>\n\n<p><strong>Git is so smart it auto completes the first command if I <em>tab</em> after the first few letters of the remote branch. IE: I don't even have to name the local branch, Git automatically copies the name of the remote branch for me. Thanks Git!</strong></p>\n\n<p>Also as <a href=\"http://stackoverflow.com/a/1783426/1020470\">the answer in this similar SO post</a> shows, if you don't name the local branch in <code>fetch</code>, you can still create it when you check it out by using the <code>-b</code> flag. <em>IE:</em> <code>git fetch &lt;remote&gt; &lt;branch&gt;</code> followed by <code>git checkout -b &lt;branch&gt; &lt;remote&gt;/&lt;branch&gt;</code> does exactly the same as my initial answer. And evidently if your repo has <em>only one</em> remote, then you can just do <code>git checkout &lt;branch&gt;</code> after <code>fetch</code> and it will create a local branch for you. <em>EG:</em> You just cloned a repo and want to check out additional branches from the remote.</p>\n\n<p>I believe that some of the documentation for <code>fetch</code> may have been copied verbatim from <a href=\"https://www.kernel.org/pub/software/scm/git/docs/git-pull.html\"><code>pull</code></a>. In particular the section on <code>&lt;refspec&gt;</code> in <a href=\"https://www.kernel.org/pub/software/scm/git/docs/git-pull.html#_options\">options</a> is the same. However, I do not believe that <code>fetch</code> will ever <a href=\"https://www.kernel.org/pub/software/scm/git/docs/git-merge.html\"><code>merge</code></a>, so that if you leave the destination side of the colon empty <code>fetch</code> <strong>should do nothing</strong>.</p>\n\n<p>NOTE: That <code>git fetch &lt;remote&gt; &lt;refspec&gt;</code> is short for <code>git fetch &lt;remote&gt; &lt;refspec&gt;:</code> which would therefore do nothing, but <code>git fetch &lt;remote&gt; &lt;tag&gt;</code> is the same as <code>git fetch &lt;remote&gt; &lt;tag&gt;:&lt;tag&gt;</code> which should copy the remote <code>&lt;tag&gt;</code> locally.</p>\n\n<p>I guess this is only helpful if you want to copy a remote branch locally, but not necessarily check it out right away. Otherwise I now would use <a href=\"http://stackoverflow.com/a/9537923/1020470\">the accepted answer above</a>, which is explained in detail in the first section of the <a href=\"https://www.kernel.org/pub/software/scm/git/docs/git-checkout.html#_description\">checkout description</a> and later in the <a href=\"https://www.kernel.org/pub/software/scm/git/docs/git-checkout.html#_options\">options</a> section under the explanation of <code>--track</code>, since it's a 1-liner. <em>Well...</em> sort of a 1-liner, because you would <em>still</em> have to run <code>git fetch &lt;remote&gt;</code> first.</p>\n\n<p>FYI: The order of the <code>&lt;refspecs&gt;</code> (source:destination) explains the bizarre pre Git-1.7 method for <a href=\"http://git-scm.com/book/en/Git-Branching-Remote-Branches#Deleting-Remote-Branches\">deleting remote branches</a>. IE: Push nothing into the destination refspec.</p>\n", "title": "Git fetch remote branch", "answer_id": 16095458, "question_id": 9537392, "tags": ["git", "branch", "git-branch", "git-fetch"]}, {"body": "<p>If you are trying to \"checkout\" a new remote branch (that exists only on the remote, but not locally), here's what you'll need:</p>\n\n<blockquote>\n  <p>git fetch origin</p>\n  \n  <p>git checkout --track origin/&lt;remote_branch_name></p>\n</blockquote>\n\n<p>This assumes you want to fetch from <em>origin</em>. If not, replace <em>origin</em> by your <em>remote</em> name.</p>\n", "title": "Git fetch remote branch", "answer_id": 16608774, "question_id": 9537392, "tags": ["git", "branch", "git-branch", "git-fetch"]}, {"body": "<p>You use 'git pull' to keep your branches separate. I will use actual repo and branch names to help since 'lbranch' and 'rbranch' is tough to decipher.  </p>\n\n<p>Let's use:\n<li>myteam.unfuddle.com = the remote git server\n<li>tlc = unfuddle project account where the repo exists\n<li>daves_branch = remote branch name</p>\n\n<p>You, or any colleague, can run this to pull only your branch, no matter how many branches there are:<pre>\ngit init\ngit pull git@myteam.unfuddle.com:myteam/tlc daves_branch:refs/remotes/origin/daves_branch\n</pre></p>\n", "title": "Git fetch remote branch", "answer_id": 16701622, "question_id": 9537392, "tags": ["git", "branch", "git-branch", "git-fetch"]}, {"body": "<p>I typed</p>\n\n<pre><code>git checkout &lt;branch_name&gt;\n</code></pre>\n\n<p>and got</p>\n\n<pre><code>Branch &lt;branch_name&gt; set up to track remote branch &lt;branch_name&gt; from origin.\nSwitched to a new branch '&lt;branch_name&gt;'\n</code></pre>\n", "title": "Git fetch remote branch", "answer_id": 19416060, "question_id": 9537392, "tags": ["git", "branch", "git-branch", "git-fetch"]}, {"body": "<p>To checkout myBranch that exists remotely and not a locally - This worked for me:</p>\n\n<pre><code>git fetch --all\ngit checkout myBranch\n</code></pre>\n\n<p>I got this message:</p>\n\n<pre><code>Branch myBranch set up to track remote branch myBranch from origin\nSwitched to a new branch 'myBranch'\n</code></pre>\n", "title": "Git fetch remote branch", "answer_id": 19920407, "question_id": 9537392, "tags": ["git", "branch", "git-branch", "git-fetch"]}, {"body": "<pre><code>git fetch\n\ngit branch -r\n\ngit checkout &lt;branch_name&gt;\n</code></pre>\n", "title": "Git fetch remote branch", "answer_id": 20385697, "question_id": 9537392, "tags": ["git", "branch", "git-branch", "git-fetch"]}, {"body": "<p>The steps are as follows;</p>\n\n<ol>\n<li><p><code>git fetch origin</code> or <code>git fetch --all</code> , this will fetch all the remote branches to your local and then this the second option you can proced with.</p></li>\n<li><p><code>git checkout --track origin/&lt;The_remote_branch you want to switch over&gt;</code></p></li>\n</ol>\n\n<p>Then work on this branch and you can verify whether you are on that branch or not by  typing </p>\n\n<pre><code>git branch\n</code></pre>\n\n<p>It displayes the branch you currently in.</p>\n", "title": "Git fetch remote branch", "answer_id": 20782931, "question_id": 9537392, "tags": ["git", "branch", "git-branch", "git-fetch"]}, {"body": "<p><strong>The title and the question are confused:</strong></p>\n\n<ul>\n<li>Git fetch remote branch</li>\n<li>how can my colleague pull that branch specifically. </li>\n</ul>\n\n<p>If the question is how can I get a remote branch to work with or how to git checkout a remote branch, a simpler solution is:</p>\n\n<p>With git (>= 1.6.6) you are able to use:</p>\n\n<pre><code>git checkout &lt;branch_name&gt;\n</code></pre>\n\n<p>If local <code>&lt;branch_name&gt;</code> is not found but there does exist a tracking branch in exactly one remote with a matching name, treat as equivalent to:</p>\n\n<pre><code>git checkout -b &lt;branch_name&gt; --track &lt;remote&gt;/&lt;branch_name&gt;\n</code></pre>\n\n<p><a href=\"https://www.kernel.org/pub/software/scm/git/docs/git-checkout.html\">see documentation for git checkout</a></p>\n\n<p>For your friend:</p>\n\n<pre><code>$ git checkout discover\nBranch discover set up to track remote branch discover\nSwitched to a new branch 'discover'\n</code></pre>\n", "title": "Git fetch remote branch", "answer_id": 22759623, "question_id": 9537392, "tags": ["git", "branch", "git-branch", "git-fetch"]}, {"body": "<p>At times you are asked not to fiddle with the master branch and work only the remote branch (as I was asked to). So all you need is the remote branch.</p>\n\n<p>So to clone the remote branch alone (without the master), do this</p>\n\n<pre><code>git clone url --branch remote_branch_name\n</code></pre>\n\n<p>where,\nremote_branch_name is the name of the remote branch</p>\n\n<p>For example,</p>\n\n<pre><code>git clone git://git.kernel.org/pub/scm/linux/kernel/git/stable/linux-stable.git --branch v3.15\n</code></pre>\n\n<p>This will make sure that you clone the remote branch to your local branch with the name of the remote branch.</p>\n\n<p>Now if you commit your code and push, the code will be submitted to that branch alone.</p>\n", "title": "Git fetch remote branch", "answer_id": 28358961, "question_id": 9537392, "tags": ["git", "branch", "git-branch", "git-fetch"]}, {"body": "<p>You can fetch and checkout the remote branch in one shot too:-</p>\n\n<pre><code>git fetch &amp;&amp; git checkout the-branch-name\n</code></pre>\n", "title": "Git fetch remote branch", "answer_id": 29249096, "question_id": 9537392, "tags": ["git", "branch", "git-branch", "git-fetch"]}, {"body": "<p>If you already know your remote branch like so...</p>\n\n<pre><code>git remote\n=&gt; One\n=&gt; Two\n</code></pre>\n\n<p>and you know the branch name you wish to checkout ex. <strong>br1.2.3.4</strong> then do </p>\n\n<pre><code>git fetch One\n=&gt; returns all meta data of remote i.e. the branch name in question.\n</code></pre>\n\n<p>all that is left is to checkout the branch</p>\n\n<pre><code>git checkout br.1.2.3.4\n</code></pre>\n\n<p>Then make any new branches off of it.</p>\n", "title": "Git fetch remote branch", "answer_id": 31079273, "question_id": 9537392, "tags": ["git", "branch", "git-branch", "git-fetch"]}, {"body": "<pre><code>git checkout -b serverfix origin/serverfix\n</code></pre>\n\n<p>This is a common enough operation that git provides the --track shorthand:</p>\n\n<pre><code>git checkout --track origin/serverfix\n</code></pre>\n\n<p>In fact, this is so common that there\u2019s even a shortcut for that shortcut. If the branch name you\u2019re trying to checkout (a) doesn\u2019t exist and (b) exactly matches a name on only one remote, Git will create a tracking branch for you:</p>\n\n<pre><code>git checkout serverfix\n</code></pre>\n\n<p>To set up a local branch with a different name than the remote branch, you can easily use the first version with a different local branch name:</p>\n\n<pre><code>git checkout -b sf origin/serverfix\n</code></pre>\n\n<p>Now, your local branch sf will automatically pull from origin/serverfix.</p>\n\n<p>Source: <a href=\"https://git-scm.com/book/en/v2/Git-Branching-Remote-Branches#Tracking-Branches\">Pro Git, written by Scott Chacon and Ben Straub</a> (cut for readability)</p>\n", "title": "Git fetch remote branch", "answer_id": 36074027, "question_id": 9537392, "tags": ["git", "branch", "git-branch", "git-fetch"]}], "link": "http://stackoverflow.com/questions/9537392/git-fetch-remote-branch", "question_id": 9537392}, {"body": "<p>Using the newer <strong>ASP.NET Web API</strong>, in <strong>Chrome</strong> I am seeing XML - how can I change it to request <strong>JSON</strong> so I can view it in the browser? I do believe it is just part of the request headers, am I correct in that?</p>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "tags": ["json", "google-chrome", "asp.net-web-api"], "answers": [{"body": "<p>Have a look at content negotiation in the WebAPI. These (<a href=\"http://blogs.msdn.com/b/kiranchalla/archive/2012/02/25/content-negotiation-in-asp-net-mvc4-web-api-beta-part-1.aspx\">Part 1</a> &amp; <a href=\"http://blogs.msdn.com/b/kiranchalla/archive/2012/02/27/content-negotiation-in-asp-net-mvc4-web-api-beta-part-2.aspx\">Part 2</a>) wonderfully detailed and thorough blog posts explain how it works. </p>\n\n<p>In short, you are right, and just need to set the <code>Accept</code> or <code>Content-Type</code> request headers. Given your Action isn't coded to return a specific format, you can set <code>Accept: application/json</code>. </p>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "answer_id": 9849142, "question_id": 9847564, "tags": ["json", "google-chrome", "asp.net-web-api"]}, {"body": "<p>One quick option is to use the MediaTypeMapping specialization. Here is an example of using  QueryStringMapping in the Application_Start event:</p>\n\n<pre><code>GlobalConfiguration.Configuration.Formatters.JsonFormatter.MediaTypeMappings.Add(new QueryStringMapping(\"a\", \"b\", \"application/json\"));\n</code></pre>\n\n<p>Now whenever the url contains the querystring ?a=b in this case, Json response will be shown in the browser.</p>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "answer_id": 9883656, "question_id": 9847564, "tags": ["json", "google-chrome", "asp.net-web-api"]}, {"body": "<p>I found the Chrome app \"Advanced REST Client\" excellent to work with REST services.  You can set the Content-Type to <code>application/json</code> among other things: \n<a href=\"https://chrome.google.com/webstore/detail/hgmloofddffdnphfgcellkdfbfbjeloo\" rel=\"nofollow\">Advanced REST client</a></p>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "answer_id": 9916256, "question_id": 9847564, "tags": ["json", "google-chrome", "asp.net-web-api"]}, {"body": "<p>MVC4 Quick Tip #3\u2013Removing the XML Formatter from ASP.Net Web API</p>\n\n<p>In <code>Global.asax</code> add the line:</p>\n\n<pre><code>GlobalConfiguration.Configuration.Formatters.XmlFormatter.SupportedMediaTypes.Clear();\n</code></pre>\n\n<p>like so:</p>\n\n<pre><code>protected void Application_Start()\n{\n    AreaRegistration.RegisterAllAreas();\n\n    RegisterGlobalFilters(GlobalFilters.Filters);\n    RegisterRoutes(RouteTable.Routes);\n\n    BundleTable.Bundles.RegisterTemplateBundles();\n    GlobalConfiguration.Configuration.Formatters.XmlFormatter.SupportedMediaTypes.Clear();\n}\n</code></pre>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "answer_id": 9979861, "question_id": 9847564, "tags": ["json", "google-chrome", "asp.net-web-api"]}, {"body": "<p>In the Global.asax I am using the code below. My url to get JSON is <a href=\"http://www.digantakumar.com/api/values\">http://www.digantakumar.com/api/values</a>?<strong>json=true</strong></p>\n\n<pre><code>protected void Application_Start()\n{\n    AreaRegistration.RegisterAllAreas();\n\n    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);\n    RouteConfig.RegisterRoutes(RouteTable.Routes);\n    BundleConfig.RegisterBundles(BundleTable.Bundles);\n\n    GlobalConfiguration.Configuration.Formatters.JsonFormatter.MediaTypeMappings.Add(new  QueryStringMapping(\"json\", \"true\", \"application/json\"));\n}\n</code></pre>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "answer_id": 11357371, "question_id": 9847564, "tags": ["json", "google-chrome", "asp.net-web-api"]}, {"body": "<p>Don't use your browser to test your API.</p>\n\n<p>Instead, try to use an HTTP client that allows you to specify your request, such as CURL, or even Fiddler.</p>\n\n<p>The problem with this issue is in the client, not in the API. The web API behaves correctly, according to the browser's request.</p>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "answer_id": 11488439, "question_id": 9847564, "tags": ["json", "google-chrome", "asp.net-web-api"]}, {"body": "<p>If you do this in the <code>WebApiConfig</code> you will get JSON by default, but it will still allow you to return XML if you pass <code>text/xml</code> as the request <code>Accept</code> header</p>\n\n<pre><code>public static class WebApiConfig\n{\n    public static void Register(HttpConfiguration config)\n    {\n        config.Routes.MapHttpRoute(\n            name: \"DefaultApi\",\n            routeTemplate: \"api/{controller}/{id}\",\n            defaults: new { id = RouteParameter.Optional }\n        );\n\n        var appXmlType = config.Formatters.XmlFormatter.SupportedMediaTypes.FirstOrDefault(t =&gt; t.MediaType == \"application/xml\");\n        config.Formatters.XmlFormatter.SupportedMediaTypes.Remove(appXmlType);\n    }\n}\n</code></pre>\n\n<p>If you are not using the MVC project type and therefore did not have this class to begin with, <a href=\"http://stackoverflow.com/questions/11990036/how-to-add-web-api-to-an-existing-asp-net-mvc-4-web-application-project\">see this answer</a> for details on how to incorporate it.</p>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "answer_id": 12487921, "question_id": 9847564, "tags": ["json", "google-chrome", "asp.net-web-api"]}, {"body": "<p>I just add the following in App_Start/WebApiConfig.cs class in my MVC Web API project.</p>\n\n<pre><code>config.Formatters.JsonFormatter.SupportedMediaTypes.Add(new MediaTypeHeaderValue(\"text/html\") );\n</code></pre>\n\n<p>That makes sure you get json on most queries, but you can get xml when you send text/xml.</p>\n\n<p>If you need to have the response Content-Type as application/json please check <a href=\"http://stackoverflow.com/a/20556625/287145\">Todd's answer below</a>.</p>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "answer_id": 13277616, "question_id": 9847564, "tags": ["json", "google-chrome", "asp.net-web-api"]}, {"body": "<p>In the <strong>WebApiConfig.cs</strong>, add to the end of the <strong>Register</strong> function:</p>\n\n<pre><code>// Remove the XML formatter\nconfig.Formatters.Remove(config.Formatters.XmlFormatter);\n</code></pre>\n\n<p>source: <a href=\"http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization\">http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization</a></p>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "answer_id": 14177216, "question_id": 9847564, "tags": ["json", "google-chrome", "asp.net-web-api"]}, {"body": "<p>I used a global action filter to remove <code>Accept: application/xml</code> when the <code>User-Agent</code> header contains \"Chrome\":</p>\n\n<pre><code>internal class RemoveXmlForGoogleChromeFilter : IActionFilter\n{\n    public bool AllowMultiple\n    {\n        get { return false; }\n    }\n\n    public async Task&lt;HttpResponseMessage&gt; ExecuteActionFilterAsync(\n        HttpActionContext actionContext,\n        CancellationToken cancellationToken,\n        Func&lt;Task&lt;HttpResponseMessage&gt;&gt; continuation)\n    {\n        var userAgent = actionContext.Request.Headers.UserAgent.ToString();\n        if (userAgent.Contains(\"Chrome\"))\n        {\n            var acceptHeaders = actionContext.Request.Headers.Accept;\n            var header =\n                acceptHeaders.SingleOrDefault(\n                    x =&gt; x.MediaType.Contains(\"application/xml\"));\n            acceptHeaders.Remove(header);\n        }\n\n        return await continuation();\n    }\n}\n</code></pre>\n\n<p>Seems to work.</p>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "answer_id": 17261902, "question_id": 9847564, "tags": ["json", "google-chrome", "asp.net-web-api"]}, {"body": "<p>Appending $format=json to the end of an MVC4+ webapi function does now return the result as json, and $format=xml returns XML.\nThis is fine in Chrome, as it displays JSON data on-screen, but in IE you will be prompted to download the resulting json data.</p>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "answer_id": 18048207, "question_id": 9847564, "tags": ["json", "google-chrome", "asp.net-web-api"]}, {"body": "<p>This code makes json my default and allows me to use the XML format as well. I'll just append the <code>xml=true</code>.</p>\n\n<pre><code>GlobalConfiguration.Configuration.Formatters.XmlFormatter.MediaTypeMappings.Add(new QueryStringMapping(\"xml\", \"true\", \"application/xml\"));\nGlobalConfiguration.Configuration.Formatters.JsonFormatter.SupportedMediaTypes.Add(new MediaTypeHeaderValue(\"text/html\"));\n</code></pre>\n\n<p>Thanks everyone!</p>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "answer_id": 18582910, "question_id": 9847564, "tags": ["json", "google-chrome", "asp.net-web-api"]}, {"body": "<p>As the question is Chrome-specific, you can get the <a href=\"https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm?hl=en-US&amp;utm_source=chrome-ntp-launcher\">Postman extension</a> which allows you to set the request content type.</p>\n\n<p><img src=\"http://i.stack.imgur.com/A4GfR.png\" alt=\"Postman\"></p>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "answer_id": 19048748, "question_id": 9847564, "tags": ["json", "google-chrome", "asp.net-web-api"]}, {"body": "<p>I like <a href=\"http://stackoverflow.com/a/13277616/62600\">Felipe Leusin's approach</a> best - make sure browsers get JSON without compromising content negotiation from clients that actually want XML. The only missing piece for me was that the response headers still contained content-type: text/html. Why was that a problem? Because I use the <a href=\"https://chrome.google.com/webstore/detail/json-formatter/bcjindcccaagfpapjjmafapmmgkkhgoa\">JSON Formatter Chrome extension</a>, which inspects content-type, and I don't get the pretty formatting I'm used to. I fixed that with a simple custom formatter that accepts text/html requests and returns application/json responses:</p>\n\n<pre><code>public class BrowserJsonFormatter : JsonMediaTypeFormatter\n{\n    public BrowserJsonFormatter() {\n        this.SupportedMediaTypes.Add(new MediaTypeHeaderValue(\"text/html\"));\n        this.SerializerSettings.Formatting = Formatting.Indented;\n    }\n\n    public override void SetDefaultContentHeaders(Type type, HttpContentHeaders headers, MediaTypeHeaderValue mediaType) {\n        base.SetDefaultContentHeaders(type, headers, mediaType);\n        headers.ContentType = new MediaTypeHeaderValue(\"application/json\");\n    }\n}\n</code></pre>\n\n<p>Register like so:</p>\n\n<pre><code>config.Formatters.Add(new BrowserJsonFormatter());\n</code></pre>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "answer_id": 20556625, "question_id": 9847564, "tags": ["json", "google-chrome", "asp.net-web-api"]}, {"body": "<p>Using RequestHeaderMapping works even better, because it also sets the Content-Type = application/json in the response header, which allows Firefox (with JSONView add-on) to format the response as JSON.</p>\n\n<pre><code>GlobalConfiguration.Configuration.Formatters.JsonFormatter.MediaTypeMappings.Add(new RequestHeaderMapping(\"Accept\",\"text/html\",StringComparison.InvariantCultureIgnoreCase,true,\"application/json\"));\n</code></pre>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "answer_id": 26068063, "question_id": 9847564, "tags": ["json", "google-chrome", "asp.net-web-api"]}, {"body": "<p>From <strong>MSDN</strong> <a href=\"http://channel9.msdn.com/Events/Build/2014/3-644\" rel=\"nofollow\">Building a Single Page Application with ASP.NET and AngularJS</a> (about 41 mins in).</p>\n\n<pre><code>public static class WebApiConfig\n{\n    public static void Register(HttpConfiguration config)\n    {\n        // ... possible routing etc.\n\n        // Setup to return json and camelcase it!\n        var formatter = GlobalConfiguration.Configuration.Formatters.JsonFormatter;\n        formatter.SerializerSettings.ContractResolver =\n            new Newtonsoft.Json.Serialization.CamelCasePropertyNamesContractResolver();\n    }\n</code></pre>\n\n<p>It should be current, I tried it and it worked.</p>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "answer_id": 26128440, "question_id": 9847564, "tags": ["json", "google-chrome", "asp.net-web-api"]}, {"body": "<p>Its unclear to me why there is all of this complexity in the answer.  Sure there are lots of ways you can do this, with query strings, and headers and options... but what I believe to be the best practice is simple.  You request a plain URL (ex: <a href=\"http://yourstartup.com/api/cars\" rel=\"nofollow\">http://yourstartup.com/api/cars</a>) and in return you get json.  You get json, with the proper response header:</p>\n\n<pre><code>Content-Type: application/json\n</code></pre>\n\n<p>In looking for an answer to this very same question, I found this thread, and had to keep going because this accepted answer doesn't work exactly.  I did find an answer which I feel is just too simple not to be the best one:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/23730951/set-the-default-webapi-formatter\">Set the default WebAPI formatter</a></p>\n\n<p>I'll add my tip here as well.</p>\n\n<pre><code>WebApiConfig.cs\n\nnamespace com.yourstartup\n{\n  using ...;\n  using System.Net.Http.Formatting;\n  ...\n  config.Formatters.Clear(); //because there are defaults of XML..\n  config.Formatters.Add(new JsonMediaTypeFormatter());\n}\n</code></pre>\n\n<p>I do have a question of where the defaults (at least the ones I am seeing) come from.  Are they .NET defaults, or perhaps created somewhere else (by someone else on my project).  Anways, hope this helps.</p>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "answer_id": 33042977, "question_id": 9847564, "tags": ["json", "google-chrome", "asp.net-web-api"]}, {"body": "<p>Some time has passed since this question was asked (and answered) but another option is to override the Accept header on the server during request processing using a MessageHandler as below:</p>\n\n<pre><code>public class ForceableContentTypeDelegationHandler : DelegatingHandler\n{\n    protected async override Task&lt;HttpResponseMessage&gt; SendAsync(\n                HttpRequestMessage request,\n                CancellationToken cancellationToken)\n    {\n        var someOtherCondition = false;\n        var accHeader = request.Headers.GetValues(\"Accept\").FirstOrDefault();\n        if (someOtherCondition &amp;&amp; accHeader.Contains(\"application/xml\"))\n        {\n            request.Headers.Remove(\"Accept\");\n            request.Headers.Add(\"Accept\", \"application/json\");\n        }\n        return await base.SendAsync(request, cancellationToken);\n    }\n}\n</code></pre>\n\n<p>Where <code>someOtherCondition</code> can be anything including browser type, etc. This would be for conditional cases where only sometimes do we want to override the default content negotiation. Otherwise as per other answers, you would simply remove an unnecessary formatter from the configuration.</p>\n\n<p>You'll need to register it of course. You can either do this globally:</p>\n\n<pre><code>  public static void Register(HttpConfiguration config) {\n      config.MessageHandlers.Add(new ForceableContentTypeDelegationHandler());\n  }\n</code></pre>\n\n<p>or on a route by route basis:</p>\n\n<pre><code>config.Routes.MapHttpRoute(\n   name: \"SpecialContentRoute\",\n   routeTemplate: \"api/someUrlThatNeedsSpecialTreatment/{id}\",\n   defaults: new { controller = \"SpecialTreatment\" id = RouteParameter.Optional },\n   constraints: null,\n   handler: new ForceableContentTypeDelegationHandler()\n);\n</code></pre>\n\n<p>And since this is a message handler it will run on both the request and response ends of the pipeline much like an <code>HttpModule</code>. So you could easily acknowledge the override with a custom header:</p>\n\n<pre><code>public class ForceableContentTypeDelegationHandler : DelegatingHandler\n{\n    protected async override Task&lt;HttpResponseMessage&gt; SendAsync(\n                HttpRequestMessage request,\n                CancellationToken cancellationToken)\n    {\n        var wasForced = false;\n        var someOtherCondition = false;\n        var accHeader = request.Headers.GetValues(\"Accept\").FirstOrDefault();\n        if (someOtherCondition &amp;&amp; accHeader.Contains(\"application/xml\"))\n        {\n            request.Headers.Remove(\"Accept\");\n            request.Headers.Add(\"Accept\", \"application/json\");\n            wasForced = true;\n        }\n\n        var response =  await base.SendAsync(request, cancellationToken);\n        if (wasForced){\n          response.Headers.Add(\"X-ForcedContent\", \"We overrode your content prefs, sorry\");\n        }\n        return response;\n    }\n}\n</code></pre>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "answer_id": 34114769, "question_id": 9847564, "tags": ["json", "google-chrome", "asp.net-web-api"]}, {"body": "<p>Here is a solution similar to <a href=\"http://stackoverflow.com/a/18582910/458354\">jayson.centeno's</a> and other answers, but using the built-in extension from <code>System.Net.Http.Formatting</code>.</p>\n\n<pre><code>public static void Register(HttpConfiguration config)\n{\n    // add support for the 'format' query param\n    // cref: http://blogs.msdn.com/b/hongyes/archive/2012/09/02/support-format-in-asp-net-web-api.aspx\n    config.Formatters.JsonFormatter.AddQueryStringMapping(\"$format\", \"json\", \"application/json\");\n    config.Formatters.XmlFormatter.AddQueryStringMapping(\"$format\", \"xml\", \"application/xml\");\n\n    // ... additional configuration\n }\n</code></pre>\n\n<p>The solution was primarily geared toward supporting $format for OData in the early releases of WebApi, but it also applies to the non-OData implementation, and returns the \n<code>Content-Type: application/json; charset=utf-8</code> header in the response.</p>\n\n<p>It allows you to tack <code>&amp;$format=json</code> or <code>&amp;$format=xml</code> to the end of your uri when testing with a browser. It does not interfere with other expected behavior when using a non-browser client where you can set your own headers.</p>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "answer_id": 34749694, "question_id": 9847564, "tags": ["json", "google-chrome", "asp.net-web-api"]}, {"body": "<p>You just change the <code>App_Start/WebApiConfig.cs</code> like this:</p>\n\n<pre><code>public static void Register(HttpConfiguration config)\n    {\n        // Web API configuration and services\n\n        // Web API routes\n        config.MapHttpAttributeRoutes();\n        //Below formatter is used for returning the Json result.\n        var appXmlType = config.Formatters.XmlFormatter.SupportedMediaTypes.FirstOrDefault(t =&gt; t.MediaType == \"application/xml\");\n        config.Formatters.XmlFormatter.SupportedMediaTypes.Remove(appXmlType);\n        //Default route\n        config.Routes.MapHttpRoute(\n           name: \"ApiControllerOnly\",\n           routeTemplate: \"api/{controller}\"\n       );\n    }\n</code></pre>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "answer_id": 35262619, "question_id": 9847564, "tags": ["json", "google-chrome", "asp.net-web-api"]}, {"body": "<p>Here is the easiest way that I have used in my applications. Add given below 3 lines of code in <code>App_Start\\\\WebApiConfig.cs</code> in <code>Register</code> function</p>\n\n<pre><code>    var formatters = GlobalConfiguration.Configuration.Formatters;\n\n    formatters.Remove(formatters.XmlFormatter);\n\n    config.Formatters.JsonFormatter.SupportedMediaTypes.Add(new MediaTypeHeaderValue(\"application/json\"));\n</code></pre>\n\n<p>Asp.net web API will automatically serialize your returning object to JSON and as the <code>application/json</code> is added in the header so the browser or the receiver will understand that you are returning JSON result.</p>\n", "title": "How do I get ASP.NET Web API to return JSON instead of XML using Chrome?", "answer_id": 37498088, "question_id": 9847564, "tags": ["json", "google-chrome", "asp.net-web-api"]}], "link": "http://stackoverflow.com/questions/9847564/how-do-i-get-asp-net-web-api-to-return-json-instead-of-xml-using-chrome", "question_id": 9847564}, {"body": "<p>I have two branches, <code>branch_1</code> and <code>branch_2</code>. </p>\n\n<p>I want to see the differences between the two branches in Git.</p>\n", "title": "Comparing two branches in Git?", "tags": ["git", "git-diff"], "answers": [{"body": "<pre><code>git diff branch_1..branch_2\n</code></pre>\n\n<p>That will produce the diff between the tips of the two branches. If you'd prefer to find the diff from their common ancestor to test, you can use three dots instead of two:</p>\n\n<pre><code>git diff branch_1...branch_2\n</code></pre>\n", "title": "Comparing two branches in Git?", "answer_id": 9834872, "question_id": 9834689, "tags": ["git", "git-diff"]}], "link": "http://stackoverflow.com/questions/9834689/comparing-two-branches-in-git", "question_id": 9834689}, {"body": "<p>I'm using bootstrap for the first time and really liking it - but one thing I'd like to do is have my menu automatically drop down on hover over, rather than having to click the menu title. I'd also like to lose the little arrows next to the menu titles.</p>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "tags": ["css", "drop-down-menu", "twitter-bootstrap"], "answers": [{"body": "<p>To get the menu to automatically drop on hover then this can achieved using basic CSS. You need to work out the selector to the hidden menu option and then set it to display as block when the appropriate <code>li</code> tag is hovered over. Taking the example from the twitter bootstrap page, the selector would be as follows:</p>\n\n<pre class=\"lang-css prettyprint-override\"><code>ul.nav li.dropdown:hover &gt; ul.dropdown-menu {\n    display: block;    \n}\n</code></pre>\n\n<p>However, if you are using Bootstrap's responsive features, you will not want this functionality on a collapsed navbar (on smaller screens). To avoid this, wrap the code above in a media query:</p>\n\n<pre><code>@media (min-width: 979px) {\n  ul.nav li.dropdown:hover &gt; ul.dropdown-menu {\n    display: block;\n  }\n}\n</code></pre>\n\n<hr>\n\n<p>To hide the arrow (caret) this is done in different ways depending on whether you are using Twitter Bootstrap version 2 and lower or version 3:</p>\n\n<p><b>Bootstrap 3</b></p>\n\n<p>To remove the caret in version 3 you just need to remove the HTML <code>&lt;b class=\"caret\"&gt;&lt;/b&gt;</code> from the <code>.dropdown-toggle</code> anchor element:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;a class=\"dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\"&gt;\n    Dropdown\n    &lt;b class=\"caret\"&gt;&lt;/b&gt;    &lt;-- remove this line\n&lt;/a&gt;\n</code></pre>\n\n<p><b>Bootstrap 2 &amp; lower</b></p>\n\n<p>To remove the caret in version 2 you need a little more insight into CSS and I suggest looking at how the <code>:after</code> pseudo element works in more detail. To get you started on your way to understanding, to target and remove the arrows in the twitter bootstrap example, you would use the following CSS selector and code:</p>\n\n<pre class=\"lang-css prettyprint-override\"><code>a.menu:after, .dropdown-toggle:after {\n    content: none;\n}\n</code></pre>\n\n<p>It will work in your favour if you look further into how these work and not just use the answers that I have given you.</p>\n\n<p><strong><em>Thanks to @CocaAkat for pointing out that we were missing the \">\" child combinator to prevent sub menus being shown on the parent hover</em></strong></p>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 8878666, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>In addition to the answer from \"My Head Hurts\" (which was great):</p>\n\n<pre><code>ul.nav li.dropdown:hover ul.dropdown-menu{\n    display: block;    \n}\n</code></pre>\n\n<p>There are 2 lingering issues:</p>\n\n<ol>\n<li>Clicking on the dropdown link will open the dropdown-menu. And it will stay open unless the user clicks somewhere else, or hovers back over it, creating an awkward UI.</li>\n<li>There is a 1px margin between the dropdown link, and dropdown-menu. This causes the dropdown-menu to become hidden if you move slowly between the dropdown and dropdown-menu.</li>\n</ol>\n\n<p>The solution to (1) is removing the \"class\" and \"data-toggle\" elements from the nav link</p>\n\n<pre><code>&lt;a href=\"#\"&gt;\n     Dropdown\n     &lt;b class=\"caret\"&gt;&lt;/b&gt;\n&lt;/a&gt;\n</code></pre>\n\n<p>This also gives you the ability to create a link to your parent page - which wasn't possible with the default implementation. You can just replace the \"#\" with whatever page you want to send the user.</p>\n\n<p>The solution to (2) is removing the margin-top on the .dropdown-menu selector</p>\n\n<pre><code>.navbar .dropdown-menu {\n margin-top: 0px;\n}\n</code></pre>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 9435673, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>This is probably a stupid idea, but to just remove the arrow pointing down, you can delete the </p>\n\n<p><code>&lt;b class=\"caret\"&gt;&lt;/b&gt;</code></p>\n\n<p>This does nothing for the up pointing one, though..</p>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 9469839, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>This should hide the drop downs and their carets if they are smaller than a tablet.</p>\n\n<pre><code>@media (max-width: 768px) {\n    .navbar ul.dropdown-menu, .navbar li.dropdown b.caret {\n        display: none;\n    }\n}\n</code></pre>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 9894908, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>This will hide the up ones</p>\n\n<pre><code>.navbar .dropdown-menu:before {\n   display:none;\n}\n.navbar .dropdown-menu:after {\n   display:none;\n}\n</code></pre>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 10110002, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>I created a pure on hover dropdown menu based on the latest (v2.0.2) bootstrap framework that has support for multiple submenus and thought i'd post it for future users:</p>\n\n<p><strong>CSS</strong></p>\n\n<pre class=\"lang-css prettyprint-override\"><code>.sidebar-nav {\n    padding: 9px 0;\n}\n\n.dropdown-menu .sub-menu {\n    left: 100%;\n    position: absolute;\n    top: 0;\n    visibility: hidden;\n    margin-top: -1px;\n}\n\n.dropdown-menu li:hover .sub-menu {\n    visibility: visible;\n}\n\n.dropdown:hover .dropdown-menu {\n    display: block;\n}\n\n.nav-tabs .dropdown-menu, .nav-pills .dropdown-menu, .navbar .dropdown-menu {\n    margin-top: 0;\n}\n\n.navbar .sub-menu:before {\n    border-bottom: 7px solid transparent;\n    border-left: none;\n    border-right: 7px solid rgba(0, 0, 0, 0.2);\n    border-top: 7px solid transparent;\n    left: -7px;\n    top: 10px;\n}\n.navbar .sub-menu:after {\n    border-top: 6px solid transparent;\n    border-left: none;\n    border-right: 6px solid #fff;\n    border-bottom: 6px solid transparent;\n    left: 10px;\n    top: 11px;\n    left: -6px;\n}\n</code></pre>\n\n<p><a href=\"http://jsfiddle.net/2Smgv/3100/\">Demo</a> </p>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 10143018, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>I've used a bit of jQuery :::</p>\n\n<pre><code>//Add Hover effect to menus\njQuery('ul.nav li.dropdown').hover(function() {\n  jQuery(this).find('.dropdown-menu').stop(true, true).delay(200).fadeIn();\n}, function() {\n  jQuery(this).find('.dropdown-menu').stop(true, true).delay(200).fadeOut();\n});\n</code></pre>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 10707282, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>Even better with jQuery:</p>\n\n<pre><code>jQuery('ul.nav li.dropdown').hover(function() {\n  jQuery(this).find('.dropdown-menu').stop(true, true).show();\n  jQuery(this).addClass('open');\n}, function() {\n  jQuery(this).find('.dropdown-menu').stop(true, true).hide();\n  jQuery(this).removeClass('open');\n});\n</code></pre>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 11998832, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p><strong>[Update]</strong> The plugin is on <a href=\"https://github.com/CWSpear/twitter-bootstrap-hover-dropdown\">GitHub</a> and I am working on some improvements (like use only with data-attributes (no JS necessary). I've leaving the code in below, but it's not the same as what's on GitHub.</p>\n\n<p>I liked the purely CSS version, but it's nice to have a delay before it closes, as it's usually a better user experience (i.e. not punished for a mouse slip that goes 1 px outside the dropdown, etc), and as mentioned in the comments, there's that 1px of margin you have to deal with or sometimes the nav closes unexpectedly when you're moving to the dropdown from the original button, etc.</p>\n\n<p>I created a quick little plugin that I've used on a couple sites and it's worked nicely. Each nav item is independently handled, so they have their own delay timers, etc.</p>\n\n<p><strong>JS</strong></p>\n\n<pre><code>// outside the scope of the jQuery plugin to\n// keep track of all dropdowns\nvar $allDropdowns = $();\n\n// if instantlyCloseOthers is true, then it will instantly\n// shut other nav items when a new one is hovered over\n$.fn.dropdownHover = function(options) {\n\n    // the element we really care about\n    // is the dropdown-toggle's parent\n    $allDropdowns = $allDropdowns.add(this.parent());\n\n    return this.each(function() {\n        var $this = $(this).parent(),\n            defaults = {\n                delay: 500,\n                instantlyCloseOthers: true\n            },\n            data = {\n                delay: $(this).data('delay'),\n                instantlyCloseOthers: $(this).data('close-others')\n            },\n            options = $.extend(true, {}, defaults, options, data),\n            timeout;\n\n        $this.hover(function() {\n            if(options.instantlyCloseOthers === true)\n                $allDropdowns.removeClass('open');\n\n            window.clearTimeout(timeout);\n            $(this).addClass('open');\n        }, function() {\n            timeout = window.setTimeout(function() {\n                $this.removeClass('open');\n            }, options.delay);\n        });\n    });\n};  \n</code></pre>\n\n<p>The <code>delay</code> parameter is pretty self explanatory, and the <code>instantlyCloseOthers</code> will instantly close all other dropdowns that are open when you hover over a new one.</p>\n\n<p>Not pure CSS, but hopefully will help someone else at this late hour (i.e. this is an old thread).</p>\n\n<p>If you want, you can see the different processes I went through (in a discussion on the <code>#concrete5</code> IRC) to get it to work via the different steps in this gist: <a href=\"https://gist.github.com/3876924\">https://gist.github.com/3876924</a></p>\n\n<p>The plugin pattern approach is much cleaner to support individual timers, etc.</p>\n\n<p>See the <a href=\"http://cameronspear.com/blog/twitter-bootstrap-dropdown-on-hover-plugin/\">blog post</a> for more.</p>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 12851616, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>Just want to add, that if you have multiple dropdowns (as I do) you should write:</p>\n\n<pre><code>ul.nav li.dropdown:hover &gt; ul.dropdown-menu {\n    display: block;    \n}\n</code></pre>\n\n<p>And it'll work properly.</p>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 13166858, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>Jquery solution is good but it will need to either deal with on click events (for mobile or tablet)  as hover won't work properly... Could maybe do some window re-size detection?</p>\n\n<p>Andres Ilich's answer from above seems to work well but should be wrapped in a media query:</p>\n\n<pre><code>@media (min-width: 980px) {\n\n.dropdown-menu .sub-menu {\n    left: 100%;\n    position: absolute;\n    top: 0;\n    visibility: hidden;\n    margin-top: -1px;\n}\n\n.dropdown-menu li:hover .sub-menu {\n    visibility: visible;\n}\n\n.dropdown:hover .dropdown-menu {\n    display: block;\n}\n\n.nav-tabs .dropdown-menu, .nav-pills .dropdown-menu, .navbar .dropdown-menu {\n    margin-top: 0;\n}\n\n.navbar .sub-menu:before {\n    border-bottom: 7px solid transparent;\n    border-left: none;\n    border-right: 7px solid rgba(0, 0, 0, 0.2);\n    border-top: 7px solid transparent;\n    left: -7px;\n    top: 10px;\n}\n.navbar .sub-menu:after {\n    border-top: 6px solid transparent;\n    border-left: none;\n    border-right: 6px solid #fff;\n    border-bottom: 6px solid transparent;\n    left: 10px;\n    top: 11px;\n    left: -6px;\n}\n\n}\n</code></pre>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 14273269, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>This works for Wordpress Bootstrap</p>\n\n<pre><code>.navbar .nav &gt; li &gt; .dropdown-menu:after,\n.navbar .nav &gt; li &gt; .dropdown-menu:before {\n    content: none;\n}\n</code></pre>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 15439763, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>i my opinion the best way is like this.</p>\n\n<pre><code>;(function($, window, undefined) {\n    // outside the scope of the jQuery plugin to\n    // keep track of all dropdowns\n    var $allDropdowns = $();\n\n    // if instantlyCloseOthers is true, then it will instantly\n    // shut other nav items when a new one is hovered over\n    $.fn.dropdownHover = function(options) {\n\n        // the element we really care about\n        // is the dropdown-toggle's parent\n        $allDropdowns = $allDropdowns.add(this.parent());\n\n        return this.each(function() {\n            var $this = $(this),\n                $parent = $this.parent(),\n                defaults = {\n                    delay: 500,\n                    instantlyCloseOthers: true\n                },\n                data = {\n                    delay: $(this).data('delay'),\n                    instantlyCloseOthers: $(this).data('close-others')\n                },\n                settings = $.extend(true, {}, defaults, options, data),\n                timeout;\n\n            $parent.hover(function(event) {\n                // so a neighbor can't open the dropdown\n                if(!$parent.hasClass('open') &amp;&amp; !$this.is(event.target)) {\n                    return true;\n                }\n\n                if(settings.instantlyCloseOthers === true)\n                    $allDropdowns.removeClass('open');\n\n                window.clearTimeout(timeout);\n                $parent.addClass('open');\n            }, function() {\n                timeout = window.setTimeout(function() {\n                    $parent.removeClass('open');\n                }, settings.delay);\n            });\n\n            // this helps with button groups!\n            $this.hover(function() {\n                if(settings.instantlyCloseOthers === true)\n                    $allDropdowns.removeClass('open');\n\n                window.clearTimeout(timeout);\n                $parent.addClass('open');\n            });\n\n            // handle submenus\n            $parent.find('.dropdown-submenu').each(function(){\n                var $this = $(this);\n                var subTimeout;\n                $this.hover(function() {\n                    window.clearTimeout(subTimeout);\n                    $this.children('.dropdown-menu').show();\n                    // always close submenu siblings instantly\n                    $this.siblings().children('.dropdown-menu').hide();\n                }, function() {\n                    var $submenu = $this.children('.dropdown-menu');\n                    subTimeout = window.setTimeout(function() {\n                        $submenu.hide();\n                    }, settings.delay);\n                });\n            });\n        });\n    };\n\n    $(document).ready(function() {\n        // apply dropdownHover to all elements with the data-hover=\"dropdown\" attribute\n        $('[data-hover=\"dropdown\"]').dropdownHover();\n    });\n})(jQuery, this);\n</code></pre>\n\n<p>sample markup:</p>\n\n<pre><code>&lt;li class=\"dropdown\"&gt;\n    &lt;a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" data-hover=\"dropdown\" data-delay=\"1000\" data-close-others=\"false\"&gt;\n        Account &lt;b class=\"caret\"&gt;&lt;/b&gt;\n    &lt;/a&gt;\n    &lt;ul class=\"dropdown-menu\"&gt;\n        &lt;li&gt;&lt;a tabindex=\"-1\" href=\"#\"&gt;My Account&lt;/a&gt;&lt;/li&gt;\n        &lt;li class=\"divider\"&gt;&lt;/li&gt;\n        &lt;li&gt;&lt;a tabindex=\"-1\" href=\"#\"&gt;Change Email&lt;/a&gt;&lt;/li&gt;\n        &lt;li&gt;&lt;a tabindex=\"-1\" href=\"#\"&gt;Change Password&lt;/a&gt;&lt;/li&gt;\n        &lt;li class=\"divider\"&gt;&lt;/li&gt;\n        &lt;li&gt;&lt;a tabindex=\"-1\" href=\"#\"&gt;Logout&lt;/a&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n&lt;/li&gt;\n</code></pre>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 18715753, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>I've managed it as follows : <br /></p>\n\n<pre><code>$('ul.nav li.dropdown').hover(function(){\n       $(this).children('ul.dropdown-menu').slideDown(); \n    }, function(){\n       $(this).children('ul.dropdown-menu').slideUp(); \n});\n</code></pre>\n\n<p>hope this helps someone...</p>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 19096947, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>Overwrite bootstrap.js with this script.</p>\n\n<pre><code>jQuery(document).ready(function ($) {\n$('.navbar .dropdown').hover(function() {\n    $(this).addClass('extra-nav-class').find('.dropdown-menu').first().stop(true, true).delay(250).slideDown();\n}, function() {\n    var na = $(this)\n    na.find('.dropdown-menu').first().stop(true, true).delay(100).slideUp('fast', function(){ na.removeClass('extra-nav-class') })\n});\n\n$('.dropdown-submenu').hover(function() {\n    $(this).addClass('extra-nav-class').find('.dropdown-menu').first().stop(true, true).delay(250).slideDown();\n}, function() {\n    var na = $(this)\n    na.find('.dropdown-menu').first().stop(true, true).delay(100).slideUp('fast', function(){ na.removeClass('extra-nav-class') })\n});\n\n}); \n</code></pre>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 21275258, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>There are a lot of really good solutions here. But I thought that I would go ahead and put mine in here as another alternative. It's just a simple jQuery snippet that does it the way bootstrap would if it supported hover for dropdowns instead of just click. I've only tested this with version 3 so I don't know if it would work with version 2. Save it as a snippet in your editor and have it at the stroke of a key.</p>\n\n<pre><code>&lt;script&gt;\n    $(function() {\n        $(\".dropdown\").hover(\n            function(){ $(this).addClass('open') },\n            function(){ $(this).removeClass('open') }\n        );\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>Basically, It's just saying when you hover on the dropdown class, it will add the open class to it. Then it just works. When you stop hovering on either the parent li with the dropdown class or the child ul/li's, it removes the open class. Obviously, this is only one of many solutions, and you can add to it to make it work on only specific instances of .dropdown. Or add a transition to either parent or child.</p>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 21486327, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>Here's my technique that adds a slight delay before the menu is closed after you stop hovering on the menu or the toggle button. The <code>&lt;button&gt;</code> that you would normally click to display the nav menu is <code>#nav_dropdown</code>.</p>\n\n<pre><code>$(function() {\n  var delay_close_it, nav_menu_timeout, open_it;\n  nav_menu_timeout = void 0;\n  open_it = function() {\n    if (nav_menu_timeout) {\n      clearTimeout(nav_menu_timeout);\n      nav_menu_timeout = null;\n    }\n    return $('.navbar .dropdown').addClass('open');\n  };\n  delay_close_it = function() {\n    var close_it;\n    close_it = function() {\n      return $('.navbar .dropdown').removeClass('open');\n    };\n    return nav_menu_timeout = setTimeout(close_it, 500);\n  };\n  $('body').on('mouseover', '#nav_dropdown, #nav_dropdown *', open_it).on('mouseout', '#nav_dropdown', delay_close_it);\n  return $('body').on('mouseover', '.navbar .dropdown .dropdown-menu', open_it).on('mouseout', '.navbar .dropdown .dropdown-menu', delay_close_it);\n});\n</code></pre>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 21863793, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>The best way of doing it is to just trigger bootstraps click event with a hover. This way, it should still remain touch device friendly</p>\n\n<pre><code>$('.dropdown').hover(function(){ \n  $('.dropdown-toggle', this).trigger('click'); \n});\n</code></pre>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 22112229, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>So you have this code:</p>\n\n<pre><code>&lt;a class=\"dropdown-toggle\" data-toggle=\"dropdown\"&gt;Show menu&lt;/a&gt;\n\n&lt;ul class=\"dropdown-menu\" role=\"menu\"&gt;\n    &lt;li&gt;Link 1&lt;/li&gt;\n    &lt;li&gt;Link 2&lt;/li&gt; \n    &lt;li&gt;Link 3&lt;/li&gt;                                             \n&lt;/ul&gt;\n</code></pre>\n\n<p>Normally it works on click event, and you want it work on hover event. This is very simple, just use this javascript/jquery code:</p>\n\n<pre><code>$(document).ready(function () {\n    $('.dropdown-toggle').mouseover(function() {\n        $('.dropdown-menu').show();\n    })\n\n    $('.dropdown-toggle').mouseout(function() {\n        t = setTimeout(function() {\n            $('.dropdown-menu').hide();\n        }, 100);\n\n        $('.dropdown-menu').on('mouseenter', function() {\n            $('.dropdown-menu').show();\n            clearTimeout(t);\n        }).on('mouseleave', function() {\n            $('.dropdown-menu').hide();\n        })\n    })\n})\n</code></pre>\n\n<p>This works very well and here is the explanation: we have a button, and a menu. When we hover the button we display the menu, and when we mouseout of the button we hide the menu after 100ms. If you wonder why i use that, is because you need time to drag the cursor from the button over the menu. When you are on the menu, the time is reset and you can stay there as many time as you want. When you exit the menu, we will hide the menu instantly without any timeout.</p>\n\n<p>I've used this code in many projects, if you encounter any problem using it, feel free to ask me questions.</p>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 22353173, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>Simply customize your CSS style in three lines of code</p>\n\n<pre><code>.dropdown:hover .dropdown-menu {\n   display: block;\n}\n</code></pre>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 22877385, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>Also added margin-top:0 to reset the bootstrap css margin for .dropdown-menu so the menu list dosen't dissapear when the user hovers slowly from drop down menu to the menu list.</p>\n\n<pre><code>ul.nav li.dropdown:hover &gt; ul.dropdown-menu {\n    display: block;    \n}\n\n.nav .dropdown-menu {\n    margin-top: 0;\n}\n</code></pre>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 23654267, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>We saw, <strong>In addition to the answer from</strong> \"<em>My Head Hurts</em>\", \"<em>Cory Price</em>\" found out 2 problems</p>\n\n<blockquote>\n  <p><strong>Problem 1:</strong> Clicking on the dropdown link will open the dropdown-menu.  And it will stay open unless the user clicks somewhere\n  else, or hovers back over it, creating an awkward UI.</p>\n  \n  <p><strong>Solution</strong>:Remove the \"class\" and \"data-toggle\" elements from the nav link</p>\n</blockquote>\n\n<p>The <strong>solution</strong> was nearly perfect,but the problem here is, when it comes to mobile devices and tablets, it won't work!</p>\n\n<p>I'm using a bit of jquery to fix this..</p>\n\n<pre><code>    if ( $(window).width() &gt; 769) {\n            $('.dropdown-toggle').removeAttr('data-toggle');\n            $('.dropdown-menu').removeAttr('style');\n            $('.dropdown').removeClass('open');\n\n        }\n        $(window).resize(function () {\n            if ( $(window).width() &gt; 769) {\n                $('.dropdown-toggle').removeAttr('data-toggle');\n                $('.dropdown-menu').removeAttr('style');\n                $('.dropdown').removeClass('open');\n            }\n            else    {\n                $('.dropdown-toggle').attr(\"data-toggle\",\"dropdown\");\n\n            }\n        });\n</code></pre>\n\n<blockquote>\n  <p><strong>note</strong>:Here we assume that the collapse to mobile devices and tablets is from 768px</p>\n</blockquote>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 25664502, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>If you have an element with a <code>dropdown</code> class like this (for example):</p>\n\n<pre><code>&lt;ul class=\"list-unstyled list-inline\"&gt;\n    &lt;li class=\"dropdown\"&gt;\n        &lt;a data-toggle=\"dropdown\" href=\"#\"&gt;&lt;i class=\"fa fa-bars\"&gt;&lt;/i&gt; Dropdown 1&lt;/a&gt;\n        &lt;ul class=\"dropdown-menu\"&gt;\n            &lt;li&gt;&lt;a href=\"\"&gt;Item 1&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"\"&gt;Item 2&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"\"&gt;Item 3&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"\"&gt;Item 4&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"\"&gt;Item 5&lt;/a&gt;&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/li&gt;\n    &lt;li class=\"dropdown\"&gt;\n        &lt;a data-toggle=\"dropdown\" href=\"#\"&gt;&lt;i class=\"fa fa-user\"&gt;&lt;/i&gt; Dropdown 2&lt;/a&gt;\n        &lt;ul class=\"dropdown-menu\"&gt;\n            &lt;li&gt;&lt;a href=\"\"&gt;Item A&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"\"&gt;Item B&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"\"&gt;Item C&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"\"&gt;Item D&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"\"&gt;Item E&lt;/a&gt;&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>then you can have the dropdown menu to be automatically drop down on hover over, rather than having to click its title, by using this snippet of jQuery code:</p>\n\n<pre><code>&lt;script&gt;\n    $('.dropdown').hover(\n        function() {\n            $(this).find('.dropdown-menu').stop(true, true).delay(200).fadeIn();\n        }, \n        function() {\n            $(this).find('.dropdown-menu').stop(true, true).delay(200).fadeOut();\n        }\n    );\n\n    $('.dropdown-menu').hover(\n        function() {\n            $(this).stop(true, true);\n        },\n        function() {\n            $(this).stop(true, true).delay(200).fadeOut();\n        }\n    );\n&lt;/script&gt;\n</code></pre>\n\n<p>here is a <a href=\"http://jsbin.com/miruw/1/edit?html,js,output\">Demo</a></p>\n\n<p><em>This answer relied on <a href=\"http://stackoverflow.com/a/10707282/458204\">@Michael answer</a>, I have made some changes and added some additions to get the dropdown menu work properly</em></p>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 26079295, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>for the caret.. I haven't seen no one specify a simple css that totally blocks caret.\nhere ya go:</p>\n\n<pre><code>.caret{display:none !important;}\n</code></pre>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 27817357, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>Use two links inline. Hide the link with the dropdown toggle and add the onmouseover event over the visible link to click the dropdown menu.</p>\n\n<pre><code>       &lt;a class=\"pretty-button\" href=\"#\" alt=\"Notifications\"  onmouseover=\"$('#notifications-dropdown').click()\"&gt;\n            &lt;/a&gt;\n       &lt;a style=\"display:none\" id=\"notifications-dropdown\" class=\"js-nav js-tooltip js-dynamic-tooltip\" href=\"#\" alt=\"Notifications\" data-toggle=\"dropdown\"&gt;\n               &lt;span class=\"fa fa-flag fa-2x\"&gt;&lt;/span&gt; \n            &lt;/a&gt;\n</code></pre>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 28283616, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>To enhance <a href=\"http://stackoverflow.com/a/23654267/858905\">Sudharshan's answer</a>, I wrap this in a media query to prevent the hover when on XS display widths...</p>\n\n<pre><code>@media (min-width:768px)\n{\n    ul.nav li.dropdown:hover &gt; ul.dropdown-menu {\n        display: block;    \n    }\n\n    .nav .dropdown-menu {\n        margin-top: 0;\n    }\n}\n</code></pre>\n\n<p>Also the caret in the markup is not required, just the <strong>dropdown</strong> class for the <strong>li</strong>.</p>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 28733964, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>I have published a <strong>proper plugin</strong> for the Bootstrap 3 dropdown hover functionality, in which you can even define what happens when clicking on the <code>dropdown-toggle</code> element (the click can be disabled):</p>\n\n<p><a href=\"https://github.com/istvan-ujjmeszaros/bootstrap-dropdown-hover\" rel=\"nofollow\">https://github.com/istvan-ujjmeszaros/bootstrap-dropdown-hover</a></p>\n\n<hr>\n\n<h2>Why I made it, when there are many solutions already?</h2>\n\n<p>I had issues with all the previously existing solutions. The simple CSS ones are not using the <code>.open</code> class on the <code>.dropdown</code>, so there will be no feedback on the dropdown toggle element when the dropdown is visible.</p>\n\n<p>The js ones are interfering with clicking on <code>.dropdown-toggle</code>, so the dropdown shows up on hover, then hides it when clicking on an opened dropdown, and moving out the mouse will trigger the dropdown to show up again. Some of the js solutions are braking iOS compatibility, some plugins are not working on modern desktop browsers which are supporting the touch events.</p>\n\n<p>That's why I made the <a href=\"https://github.com/istvan-ujjmeszaros/bootstrap-dropdown-hover\" rel=\"nofollow\">Bootstrap Dropdown Hover</a> <strong>plugin</strong> which prevents all these issues by <strong>using only the standard Bootstrap javascript API, without any hack</strong>. Even the Aria attributes are working fine with this plugin.</p>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 31084776, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>I just add CSS in bootstrap.min in last, then it works. </p>\n\n<p>Only this css add and now it works.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code> .dropdown-menu .sub-menu {\r\n    left: 100%;\r\n    position: absolute;\r\n    top: 0;\r\n    visibility: hidden;\r\n    margin-top: -1px;\r\n}\r\n\r\n.dropdown-menu li:hover .sub-menu {\r\n    visibility: visible;\r\n}\r\n\r\n.dropdown:hover .dropdown-menu {\r\n    display: block;\r\n}\r\n\r\n.nav-tabs .dropdown-menu, .nav-pills .dropdown-menu, .navbar .dropdown-menu {\r\n    margin-top: 0;\r\n}\r\n\r\n.navbar .sub-menu:before {\r\n    border-bottom: 7px solid transparent;\r\n    border-left: none;\r\n    border-right: 7px solid rgba(0, 0, 0, 0.2);\r\n    border-top: 7px solid transparent;\r\n    left: -7px;\r\n    top: 10px;\r\n}\r\n.navbar .sub-menu:after {\r\n    border-top: 6px solid transparent;\r\n    border-left: none;\r\n    border-right: 6px solid #fff;\r\n    border-bottom: 6px solid transparent;\r\n    left: 10px;\r\n    top: 11px;\r\n    left: -6px;\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 32369965, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>You can use the default <code>$().dropdown('toggle')</code> method to toggle the dropdown menu on hover:</p>\n\n<pre><code>$(\".nav .dropdown\").hover(function() {\n  $(this).find(\".dropdown-toggle\").dropdown(\"toggle\");\n});\n</code></pre>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 32734898, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>this worked for me</p>\n\n<pre><code> .dropdown:hover .dropdown-menu {\ndisplay: block;\n}\n</code></pre>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 32969148, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}, {"body": "<p>Here is the JSFiddle -> <a href=\"https://jsfiddle.net/PRkonsult/mn31qf0p/1/\" rel=\"nofollow\">https://jsfiddle.net/PRkonsult/mn31qf0p/1/</a></p>\n\n<p>The Javascript bit at the bottom is what does the actual magic.</p>\n\n<p>HTML</p>\n\n<pre><code>&lt;!--http://getbootstrap.com/components/#navbar--&gt;\n&lt;div class=\"body-wrap\"&gt;\n  &lt;div class=\"container\"&gt;\n    &lt;nav class=\"navbar navbar-inverse\" role=\"navigation\"&gt;\n      &lt;div class=\"container-fluid\"&gt;\n        &lt;!-- Brand and toggle get grouped for better mobile display --&gt;\n        &lt;div class=\"navbar-header\"&gt;\n          &lt;button type=\"button\" class=\"navbar-toggle\" data-toggle=\"collapse\" data-target=\"#bs-example-navbar-collapse-1\"&gt;\n            &lt;span class=\"sr-only\"&gt;Toggle navigation&lt;/span&gt;\n            &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n            &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n            &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n          &lt;/button&gt;\n          &lt;a class=\"navbar-brand\" href=\"#\"&gt;Brand&lt;/a&gt;\n        &lt;/div&gt;\n\n        &lt;!-- Collect the nav links, forms, and other content for toggling --&gt;\n        &lt;div class=\"collapse navbar-collapse\" id=\"bs-example-navbar-collapse-1\"&gt;\n          &lt;ul class=\"nav navbar-nav\"&gt;\n            &lt;li class=\"active\"&gt;&lt;a href=\"#\"&gt;Link&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"#\"&gt;Link&lt;/a&gt;&lt;/li&gt;\n            &lt;li class=\"dropdown\"&gt;\n              &lt;a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\"&gt;Dropdown &lt;b class=\"caret\"&gt;&lt;/b&gt;&lt;/a&gt;\n              &lt;ul class=\"dropdown-menu\"&gt;\n                &lt;li&gt;&lt;a href=\"#\"&gt;Action&lt;/a&gt;&lt;/li&gt;\n                &lt;li&gt;&lt;a href=\"#\"&gt;Another action&lt;/a&gt;&lt;/li&gt;\n                &lt;li&gt;&lt;a href=\"#\"&gt;Something else here&lt;/a&gt;&lt;/li&gt;\n                &lt;li class=\"divider\"&gt;&lt;/li&gt;\n                &lt;li&gt;&lt;a href=\"#\"&gt;Separated link&lt;/a&gt;&lt;/li&gt;\n                &lt;li class=\"divider\"&gt;&lt;/li&gt;\n                &lt;li&gt;&lt;a href=\"#\"&gt;One more separated link&lt;/a&gt;&lt;/li&gt;\n              &lt;/ul&gt;\n            &lt;/li&gt;\n          &lt;/ul&gt;\n\n          &lt;ul class=\"nav navbar-nav navbar-right\"&gt;\n            &lt;li&gt;&lt;a href=\"#\"&gt;Link&lt;/a&gt;&lt;/li&gt;\n            &lt;li class=\"dropdown\"&gt;\n              &lt;a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\"&gt;Dropdown &lt;b class=\"caret\"&gt;&lt;/b&gt;&lt;/a&gt;\n              &lt;ul class=\"dropdown-menu\"&gt;\n                &lt;li&gt;&lt;a href=\"#\"&gt;Action&lt;/a&gt;&lt;/li&gt;\n                &lt;li&gt;&lt;a href=\"#\"&gt;Another action&lt;/a&gt;&lt;/li&gt;\n                &lt;li&gt;&lt;a href=\"#\"&gt;Something else here&lt;/a&gt;&lt;/li&gt;\n                &lt;li class=\"divider\"&gt;&lt;/li&gt;\n                &lt;li&gt;&lt;a href=\"#\"&gt;Separated link&lt;/a&gt;&lt;/li&gt;\n              &lt;/ul&gt;\n            &lt;/li&gt;\n          &lt;/ul&gt;\n        &lt;/div&gt;\n        &lt;!-- /.navbar-collapse --&gt;\n      &lt;/div&gt;\n      &lt;!-- /.container-fluid --&gt;\n    &lt;/nav&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>CSS</p>\n\n<pre><code>/* bootstrap dropdown hover menu*/\n\nbody {\n  font-family: 'PT Sans', sans-serif;\n  font-size: 13px;\n  font-weight: 400;\n  color: #4f5d6e;\n  position: relative;\n  background: rgb(26, 49, 95);\n  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(26, 49, 95, 1)), color-stop(10%, rgba(26, 49, 95, 1)), color-stop(24%, rgba(29, 108, 141, 1)), color-stop(37%, rgba(41, 136, 151, 1)), color-stop(77%, rgba(39, 45, 100, 1)), color-stop(90%, rgba(26, 49, 95, 1)), color-stop(100%, rgba(26, 49, 95, 1)));\n  filter: progid: DXImageTransform.Microsoft.gradient( startColorstr='#1a315f', endColorstr='#1a315f', GradientType=0);\n}\n\n.body-wrap {\n  min-height: 700px;\n}\n\n.body-wrap {\n  position: relative;\n  z-index: 0;\n}\n\n.body-wrap:before,\n.body-wrap:after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: -1;\n  height: 260px;\n  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(26, 49, 95, 1)), color-stop(100%, rgba(26, 49, 95, 0)));\n  background: linear-gradient(to bottom, rgba(26, 49, 95, 1) 0%, rgba(26, 49, 95, 0) 100%);\n  filter: progid: DXImageTransform.Microsoft.gradient( startColorstr='#1a315f', endColorstr='#001a315f', GradientType=0);\n}\n\n.body-wrap:after {\n  top: auto;\n  bottom: 0;\n  background: linear-gradient(to bottom, rgba(26, 49, 95, 0) 0%, rgba(26, 49, 95, 1) 100%);\n  filter: progid: DXImageTransform.Microsoft.gradient( startColorstr='#001a315f', endColorstr='#1a315f', GradientType=0);\n}\n\nnav {\n  margin-top: 60px;\n  box-shadow: 5px 4px 5px #000;\n}\n</code></pre>\n\n<p>Then the important bit JS</p>\n\n<pre><code>$('ul.nav li.dropdown').hover(function() {\n  $(this).find('.dropdown-menu').stop(true, true).delay(200).fadeIn(500);\n}, function() {\n  $(this).find('.dropdown-menu').stop(true, true).delay(200).fadeOut(500);\n});\n</code></pre>\n", "title": "How to make twitter bootstrap menu dropdown on hover rather than click", "answer_id": 38941663, "question_id": 8878033, "tags": ["css", "drop-down-menu", "twitter-bootstrap"]}], "link": "http://stackoverflow.com/questions/8878033/how-to-make-twitter-bootstrap-menu-dropdown-on-hover-rather-than-click", "question_id": 8878033}, {"body": "<p>I don't understand what exactly <a href=\"http://camel.apache.org/index.html\">Camel</a> does.</p>\n\n<p>If you could give in 101 words an introduction to Camel:</p>\n\n<ul>\n<li>What exactly is it? </li>\n<li>How does it interact with an application written in Java? </li>\n<li>Is it something that goes together with the server? </li>\n<li>Is it an independent program? </li>\n</ul>\n\n<p><strong>Please explain what Camel is.</strong></p>\n", "title": "What exactly is Apache Camel?", "tags": ["java", "apache-camel", "soa", "enterprise-integration"], "answers": [{"body": "<p>If you are aware of Enterprise Integration Patterns, Apache Camel is one integration framework which implements all EIPs.</p>\n\n<p>And you can deploy Camel as a standalone application in a web-container.</p>\n\n<p>Basically, if you have to integrate several applications with different protocols and technologies, you can use Camel.</p>\n", "title": "What exactly is Apache Camel?", "answer_id": 8845358, "question_id": 8845186, "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>One of the things you need to understand, before you try to understand Apache Camel, are Enterprise Integration Patterns. Not everyone in the field is actually aware of them. While you can certainly read the Enterprise Integration Patterns book, a quicker way to get up to speed on them would be to read something like the Wikipedia article on <a href=\"http://en.wikipedia.org/wiki/Enterprise_application_integration\">Enterprise Application Integration</a>. </p>\n\n<p>One you have read and understood the subject area, you would be much more likely to understand the purpose of Apache Camel</p>\n\n<p>HTH</p>\n", "title": "What exactly is Apache Camel?", "answer_id": 8845595, "question_id": 8845186, "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>If you have 5 to 10 minutes, I generally recommend people to read this <a href=\"http://java.dzone.com/articles/open-source-integration-apache\">Integration with Apache Camel</a> by Jonathan Anstey. It's a well written piece which gives a brief introduction to and overview of some of Camel's concepts, and it implements a use case with code samples. In it, Jonathan writes:</p>\n\n<blockquote>\n  <p>Apache Camel is an open source Java framework that focuses on making integration easier and more accessible to developers. It does this by providing:</p>\n  \n  <ul>\n  <li>concrete implementations of all the widely used <a href=\"http://www.enterpriseintegrationpatterns.com/\">Enterprise Integration Patterns</a> (EIPs)</li>\n  <li>connectivity to a great variety of transports and APIs</li>\n  <li>easy to use Domain Specific Languages (DSLs) to wire EIPs and transports together</li>\n  </ul>\n</blockquote>\n\n<p>There is also a free chapter of <a href=\"http://manning.com/ibsen/\">Camel in Action</a> which introduces Camel in the first chapter. Jonathan is a co-author on that book with me.</p>\n", "title": "What exactly is Apache Camel?", "answer_id": 8849379, "question_id": 8845186, "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>Creating a <a href=\"http://www.bigsoft.co.uk/blog/index.php/2010/10/18/the-whats-and-whys-to-creating-project-descriptions\">project description</a> should not be complicated.</p>\n\n<p>I say:</p>\n\n<blockquote>\n  <p>Apache Camel is messaging technology glue with routing. It joins together messaging start and end points allowing the transference of messages from different sources to different destinations. For example: JMS -> JSON, HTTP -> JMS or funneling FTP -> JMS, HTTP -> JMS, JSON -> JMS</p>\n</blockquote>\n\n<p>Wikipedia says:</p>\n\n<blockquote>\n  <p>Apache Camel is a rule-based routing and mediation engine which provides a Java object based implementation of the Enterprise Integration Patterns using an API (or declarative Java Domain Specific Language) to configure routing and mediation rules. The domain specific language means that Apache Camel can support type-safe smart completion of routing rules in your IDE using regular Java code without huge amounts of XML configuration files; though XML configuration inside Spring is also supported.</p>\n</blockquote>\n\n<p>See? That wasn't hard was it?</p>\n", "title": "What exactly is Apache Camel?", "answer_id": 10836773, "question_id": 8845186, "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>My take to describe this in a more accessible way...</p>\n\n<p>In order to understand what Apache Camel is, you need to understand what Enterprise Integration Patterns are.</p>\n\n<p>Let's start with what we presumably already know: The Singleton pattern, the Factory pattern, etc; They are merely ways of organizing your solution to the problem, but they are not solutions themselves. These patterns were analyzed and extracted for the rest of us by the Gang of Four, when they published their book: <a href=\"http://en.wikipedia.org/wiki/Design_Patterns\">Design Patterns</a>. They saved some of us tremendous effort in thinking of how to best structure our code.</p>\n\n<p>Much like the Gang of Four, Gregor Hohpe and Bobby Woolf authored the book <a href=\"http://www.eaipatterns.com/\">Enterprise Integration Patterns</a> (EIP) in which they propose and document a set of new patterns and <em>blueprints</em> for how we could <em>best</em> design large component-based systems, where components can be running on the same process or in a different machine.</p>\n\n<p>They basically propose that we structure our system to be <em>message</em> oriented -- where components communicate with each others using messages as inputs and outputs and absolutely nothing else. They show us a complete set of patterns that we may choose from and implement in our different components that will together form the whole system.</p>\n\n<p><strong>So what is Apache Camel?</strong></p>\n\n<p>Apache Camel offers you the interfaces for the EIPs, the base objects, commonly needed implementations, debugging tools, a configuration system, and many other helpers which will save you a ton of time when you want to implement your solution to follow the EIPs.</p>\n\n<p>Take MVC. MVC is pretty simple in theory and we could implement it without any framework help. But good MVC frameworks provide us with the structure ready-to-use and have gone the extra mile and thought out all the other \"side\" things you need when you create a large MVC project and that's why we use them most of the time.</p>\n\n<p>That's exactly what Apache Camel is for EIPs. <strong>It's a complete production-ready framework for people who want to implement their solution to follow the EIPs.</strong></p>\n", "title": "What exactly is Apache Camel?", "answer_id": 11540451, "question_id": 8845186, "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>A definition from another perspective: </p>\n\n<p>Apache Camel is an integration framework. It consists of some Java libraries, which helps you implementing integration problems on the Java platform. What this means and how it differs from APIs on the one side and an Enterprise Service Bus (ESB) on the other side is described in my article \"<a href=\"http://www.kai-waehner.de/blog/2011/06/02/when-to-use-apache-camel/\">When to use Apache Camel</a>\". </p>\n", "title": "What exactly is Apache Camel?", "answer_id": 15452135, "question_id": 8845186, "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>In short: </p>\n\n<p>When there is a requirement to connect / integrate systems, you will probably need to connect to some data source and then process this data to match your business requirements.</p>\n\n<p>In order to do that:</p>\n\n<p>1) You could develop custom program that would do it (might be time consuming and hard to understand, maintain for other developer) </p>\n\n<p>2) Alternatively, you could use Apache Camel to do it in standardised way (it has most of the connectors already developed for you, you just need to set it up and plug your logic - called Process):</p>\n\n<p>Camel will help you to:</p>\n\n<ol>\n<li>Consume data from any source/format</li>\n<li>Process this data</li>\n<li>Output data to any source/format</li>\n</ol>\n\n<p>By using Apache Camel you will make it easy to understand / maintain / extend your system to another developer.</p>\n\n<p>Apache Camel is developed with Enterprise Integration Patterns. The patterns help you to integrate systems in a good way :-)</p>\n", "title": "What exactly is Apache Camel?", "answer_id": 16927203, "question_id": 8845186, "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>Here is another attempt at it.</p>\n\n<p>You know how there are/were things like Webmethods, ICAN Seebeyond, Tibco BW, IBM Broker. They all did help with integration solutions in the enterprise. These tools are commonly known by the name Enterprise Application Integration (EAI) tools.</p>\n\n<p>There were mostly drag drop tools built around these technologies and in parts you would have to write adapters in Java. These adapter code were either untested or had poor tooling/automation around testing.</p>\n\n<p>Just like with design patterns in programming, you have Enterprise Integration patterns for common integration solutions. They were made famous by a book of the same name by Gregor Hohpe and Bobby Woolf.</p>\n\n<p>Although it is quite possible to implement integration solutions which use one or many EIP, Camel is an attempt at doing this within your code base using one of XML, Java, Groovy or Scala.</p>\n\n<p>Camel supports all Enterprise Integration Patterns listed in the book via its rich DSL and routing mechanism.</p>\n\n<p>So Camel is a competing technoloy to other EAI tools with better support for testing your integration code. The code is concise because of the Domain Specific Languages (DSLs). It is readable by even business users and it is free and makes you productive.</p>\n", "title": "What exactly is Apache Camel?", "answer_id": 19905650, "question_id": 8845186, "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>There are lot of frameworks that facilitates us for messaging and solving problems in messaging. One such product is Apache Camel.</p>\n\n<p>Most of the common problems have proven solutions called as design patterns. The design pattern for messaging is Enterprise Integration patterns(EIPs) which are well explained <a href=\"http://www.eaipatterns.com/toc.html\">here</a>. Apache camel help us to implement our solution using the EIPs.</p>\n\n<p>The strength of an integration framework is its ability to facilitate us through EIPs or other patterns,number of transports and components and ease of development on which Apache camel stands on the top of the list </p>\n\n<p>Each of the Frameworks has its own advantages  Some of the special features of Apache camel are the following.</p>\n\n<ol>\n<li>It provides the coding to be in many DSLs namely Java DSL and Spring xml based DSL , which are popular.</li>\n<li>Easy use and simple to use. </li>\n<li>Fuse IDE is a product that helps you to code through UI</li>\n</ol>\n", "title": "What exactly is Apache Camel?", "answer_id": 23929350, "question_id": 8845186, "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>Camel helps in routing, transformation, monitoring. </p>\n\n<p>It uses Routes; which can be described as :</p>\n\n<p><em>When service bus receives particular message, it will route it through no of services/broker destinations such as queue/topics. This path is known as route.</em></p>\n\n<p>Example:\n<em>your stock application has got some input by analyst, it will be processed through the application/web component and then result will be published to all the interested/registered members for particular stock update.</em></p>\n", "title": "What exactly is Apache Camel?", "answer_id": 25407488, "question_id": 8845186, "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>A diagram is better than thousands of description.\nThis Diagram illustrates  the architecture of Camel.</p>\n\n<p><img src=\"http://camel.apache.org/architecture.data/camel-components.png\" alt=\"enter image description here\"></p>\n", "title": "What exactly is Apache Camel?", "answer_id": 27663938, "question_id": 8845186, "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>BASED ON ANALOGY</p>\n\n<p>Camel based routing can be understood much easily by putting yourself in the shoes of a Airline owner (eg.: American Airlines, Jet Airways) .</p>\n\n<p>Purpose of 'your airline' is to 'carry' 'passengers' from one 'city' to another one in the world. You use aircrafts from different 'aircraft companies' like Boeing, Airbus, HAL for carrying passengers.</p>\n\n<p>Your airline's boards passengers using 'airports' of the from city and deboards them using the airport of the to city. A passenger may 'travel' to multiple cities, but everywhere they have to go through the airport to travel between your airline's aircraft and the city.</p>\n\n<p>Note that a passenger 'departing' from the city is essentially 'arriving' into your airlines' aircraft. And a passeger  'arriving' into the city, is essentially departing from the aircraft. Since we are in the shoes of airline owner, the term 'arrival passenger' and 'departing passenger' are reversed from our conventional notions which are based on cities perspective.</p>\n\n<p>Same 'airport' infrastructure of each city is used by 'departing' passengers and 'arrival' passengers. An airport provides 'departing infrastructure' for departing passengers, which is different from the 'arrival infrastructure' provided for arriving passengers.</p>\n\n<p>Passengers can continue doing their day to their activities due to various 'amenities' provided inside the aircraft by your airlines, while travelling.</p>\n\n<p>On top of that, your airline also provides lounge facilities for special treatments like 'understanding local language' and or preparing you for the 'travel'.</p>\n\n<p><strong>Lets replace few words/phrases used above with following:</strong></p>\n\n<p>your airline: Apache Camel</p>\n\n<p>aircraft companies: Transport mechanisms</p>\n\n<p>your airline's aircraft: Apache Camel's underlying transport mechanism</p>\n\n<p>carry: route</p>\n\n<p>passengers: message;</p>\n\n<p>city: system;</p>\n\n<p>airport: Camel Component;</p>\n\n<p>understanding local languages: Type Conversions;</p>\n\n<p>departing: producing, produced</p>\n\n<p>arriving: consuming, consumed</p>\n\n<p>travel: routed</p>\n\n<p>amenities: provided</p>\n\n<p>After replacing the words, here is what you get:</p>\n\n<p><strong>Purpose of 'Apache Camel'</strong> is to route 'messages' from one 'system' to another one in the world. Apache camel uses different transport mechanisms for message routing.</p>\n\n<p>Apache Camel picks up messages using 'Camel based Component' of the 'from' system and drops them using the 'Camel based Component' of the 'to' system. A message may route to multiple systems, but everywhere they have to go through 'Camel based Components' to travel between 'Apache Camel's underlying transport mechanism' and the system.</p>\n\n<p>Note that a message 'produced' from the system is essentially 'consumed' into Apache Camel's underlying transport mechanism'. And a message consumed by a system, is essentially produced by the 'Apache Camel's underlying transport mechanism'.</p>\n\n<p>Since we are attempting to understand Camel, we must think from Camel's perspective here onwards. The meaning of the terms 'consumer message' and 'producer message' are ,thus, reversed from our conventional notions which are based on a system's perspective.</p>\n\n<p>Same 'Camel based Component's ' coding infrastructure is used by 'producer message' and 'consumer message'. A 'Camel based Component' provides a 'producer endpoint' for 'producer message' and a 'consumer endpoint' for 'consumer message'.</p>\n\n<p>Messages can be processed by Camel when they are being routed.</p>\n\n<p>On top of this routing, Camel provides special features like 'Type Conversion' and many more...</p>\n", "title": "What exactly is Apache Camel?", "answer_id": 29605854, "question_id": 8845186, "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>Simply Put: Apache Camel is the Swiss Army knife for developers doing integration work. </p>\n\n<p>Site: <a href=\"http://camel.apache.org\" rel=\"nofollow\">http://camel.apache.org</a></p>\n\n<p>Best Book: Camel in Action</p>\n\n<p>Underlying patterns: <a href=\"http://www.enterpriseintegrationpatterns.com/\" rel=\"nofollow\">http://www.enterpriseintegrationpatterns.com/</a></p>\n", "title": "What exactly is Apache Camel?", "answer_id": 29703844, "question_id": 8845186, "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>Most \"new\" things in computing aren't really new at all, they're just a mystifying wrapper around something that already well-understood.  When they're hard to understand, it's usually because someone decided to invent new language terms or colonise existing terms for a different purpose (a good example of <em>that</em> is the X developers' reversal of what \"client\" and \"server\" mean.)</p>\n\n<p>Camel is a Java-based wrapper/API for inter-application middleware.  </p>\n\n<p>Middleware is a general term for software that provides interpretation services between entities that don't share a common language or data types.</p>\n\n<p>That's what Camel is, at bottom.  We can flesh out the description by noting that it provides for EIP-type middleware.</p>\n\n<p>It doesn't provide the middleware itself, since it can't know the details of what the applications need to communicate.  But it provides the API for creating the invariant parts of that middleware (create a start point, create an end point, create conditions for starting and ending, etc)</p>\n\n<p>Hope that helps.</p>\n", "title": "What exactly is Apache Camel?", "answer_id": 32458754, "question_id": 8845186, "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>Yes, this is probably a bit late. But one thing to add to everyone else's comments is that, Camel is actually a toolbox rather than a complete set of features. You should bear this in mind when developing and need to do various transformations and protocol conversions. </p>\n\n<p>Camel itself relies on other frameworks and therefore sometimes you need to understand those as well in order to understand which is best suited for your needs. There are for example multiple ways to handle REST. This can get a bit confusing at first, but once you starting using and testing you will feel at ease and your knowledge of the different concepts will increase.</p>\n", "title": "What exactly is Apache Camel?", "answer_id": 32709196, "question_id": 8845186, "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<blockquote>\n  <p>What exactly is it?</p>\n</blockquote>\n\n<p><em>Apache Camel</em> is a lightweight integration framework which implements all Enterprise Integration patterns.You can easily integrate different applications using the required patterns. </p>\n\n<p><em>You can use Java, Spring XML, Scala or Groovy. Almost every technology you can imagine is available, for example HTTP, FTP, JMS, EJB, JPA, RMI, JMS, JMX, LDAP, Netty etc.</em> </p>\n\n<p>Have a look at this <a href=\"https://dzone.com/articles/when-use-apache-camel\" rel=\"nofollow\">article</a> and <a href=\"http://camel.apache.org/enterprise-integration-patterns.html\" rel=\"nofollow\">EIP pattern article</a> </p>\n\n<blockquote>\n  <p>How does it interact with an application written in Java?</p>\n</blockquote>\n\n<p>Camel uses a <em>Java Domain Specific Language or DSL</em> for creating Enterprise Integration Patterns or Routes in a variety of domain-specific languages (DSL) as listed below.</p>\n\n<p><em>Java DSL</em> - A Java based DSL using the fluent builder style.</p>\n\n<p>The story of Enterprise Integration Pattern resolves around these concepts : </p>\n\n<p><em>Message, End Point, Producer, Consumer, Routing, Bus, Transform and Process</em>.</p>\n\n<p>Have a look at this <a href=\"http://www.javaworld.com/article/2078883/open-source-tools/java-tip-write-an-soa-integration-layer-with-apache-camel.html\" rel=\"nofollow\">article</a> By Anirban Konar  for one of real time use cases.</p>\n\n<blockquote>\n  <p>Is it something that goes together with the server?</p>\n</blockquote>\n\n<p>It acts as a bridge across multiple enterprise sub systems.</p>\n\n<blockquote>\n  <p>Is it an independent program?</p>\n</blockquote>\n\n<p>Apache Camel, an integration framework, integrates different independent applications. </p>\n\n<p><em>The major advantage of Camel</em> : You can integrate different applications with different technologies (and different protocols) by using same same concepts for every integration. </p>\n", "title": "What exactly is Apache Camel?", "answer_id": 34154102, "question_id": 8845186, "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>In plane english, camel gets (many) things done without much of boiler plate code.</p>\n\n<p>Just to give you a perspective, the java DSL given below will create a REST endpoint which will be able to accept an XML consisting of List of Products and splits it into multiple products and invoke Process method of BrandProcessor with it. \nAnd just by adding .parallelProcessing (note the commented out part) it will parallel process all the Product Objects. (Product class is JAXB/XJC generated Java stub from the XSD which the input xml is confined to.) This much code (along with few Camel dependencies) will get the job done which used to take 100s of lines of Java code.</p>\n\n<pre><code>from(\"servlet:item-delta?matchOnUriPrefix=true&amp;httpMethodRestrict=POST\").split(stax(Product.class))/*.parallelProcessing()*/.process(itemDeltaProcessor);\n</code></pre>\n\n<p>After Adding the route ID and Logging statement</p>\n\n<pre><code>from(\"servlet:item-delta?matchOnUriPrefix=true&amp;httpMethodRestrict=POST\")\n.routeId(\"Item-DeltaRESTRoute\")\n.log(LoggingLevel.INFO, \"Item Delta received on Item-DeltaRESTRoute\")\n.split(stax(Product.class))\n.parallelProcessing()\n.process(itemDeltaProcessor);\n</code></pre>\n\n<p>This is just a sample, Camel is much more than just REST end point. Just take a look the pluggable component list <a href=\"http://camel.apache.org/components.html\" rel=\"nofollow\">http://camel.apache.org/components.html</a></p>\n", "title": "What exactly is Apache Camel?", "answer_id": 37219754, "question_id": 8845186, "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}], "link": "http://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel", "question_id": 8845186}, {"body": "<p>The <a href=\"http://docs.angularjs.org/api/ng.%24rootScope.Scope\">API Reference Scope page</a> says:</p>\n\n<blockquote>\n  <p>A scope <em>can</em> inherit from a parent scope.</p>\n</blockquote>\n\n<p>The <a href=\"http://docs.angularjs.org/guide/scope\">Developer Guide Scope page</a> says:</p>\n\n<blockquote>\n  <p>A scope (prototypically) inherits properties from its parent scope.</p>\n</blockquote>\n\n<p>So, does a child scope always prototypically inherit from its parent scope?  Are there exceptions?  When it does inherit, is it always normal JavaScript prototypal inheritance?</p>\n", "title": "What are the nuances of scope prototypal / prototypical inheritance in AngularJS?", "tags": ["javascript", "angularjs", "inheritance", "prototype", "prototypal-inheritance"], "answers": [{"body": "<p><strong>Quick answer</strong>: <br>\nA child scope normally prototypically inherits from its parent scope, but not always.  One exception to this rule is a directive with <code>scope: { ... }</code> -- this creates an \"isolate\" scope that does not prototypically inherit.  This construct is often used when creating a \"reusable component\" directive.</p>\n\n<p>As for the nuances, scope inheritance is normally straightfoward... until you need <strong>2-way data binding</strong> (i.e., form elements, ng-model) in the child scope.  Ng-repeat, ng-switch, and ng-include can trip you up if you try to bind to a <strong>primitive</strong> (e.g., number, string, boolean) in the parent scope from inside the child scope.  It doesn't work the way most people expect it should work.  The child scope gets its own property that hides/shadows the parent property of the same name.  Your workarounds are</p>\n\n<ol>\n<li>define objects in the parent for your model, then reference a property of that object  in the child:  parentObj.someProp</li>\n<li>use $parent.parentScopeProperty (not always possible, but easier than 1. where possible)</li>\n<li>define a function on the parent scope, and call it from the child (not always possible)</li>\n</ol>\n\n<p><hr>\n<strong>L-o-n-g answer</strong>:</p>\n\n<h2>JavaScript Prototypal Inheritance</h2>\n\n<p><strong>Also placed on the AngularJS wiki:</strong> <a href=\"https://github.com/angular/angular.js/wiki/Understanding-Scopes\">https://github.com/angular/angular.js/wiki/Understanding-Scopes</a></p>\n\n<p>It is important to first have a solid understanding of prototypal inheritance, especially if you are coming from a server-side background and you are more failiar with class-ical inheritance.  So let's review that first.</p>\n\n<p>Suppose parentScope has properties aString, aNumber, anArray, anObject, and aFunction.  If childScope prototypically inherits from parentScope, we have:</p>\n\n<p><img src=\"http://i.stack.imgur.com/aTAGg.png\" alt=\"prototypal inheritance\"></p>\n\n<p>(Note that to save space, I show the <code>anArray</code> object as a single blue object with its three values, rather than an single blue object with three separate gray literals.)</p>\n\n<p>If we try to access a property defined on the parentScope from the child scope, JavaScript will first look in the child scope, not find the property, then look in the inherited scope, and find the property.  (If it didn't find the property in the parentScope, it would continue up the prototype chain... all the way up to the root scope). So, these are all true:</p>\n\n<pre><code>childScope.aString === 'parent string'\nchildScope.anArray[1] === 20\nchildScope.anObject.property1 === 'parent prop1'\nchildScope.aFunction() === 'parent output'\n</code></pre>\n\n<p>Suppose we then do this:</p>\n\n<pre><code>childScope.aString = 'child string'\n</code></pre>\n\n<p>The prototype chain is not consulted, and a new aString property is added to the childScope.  <strong>This new property hides/shadows the parentScope property with the same name.</strong>  This will become very important when we discuss ng-repeat and ng-include below.</p>\n\n<p><img src=\"http://i.stack.imgur.com/OyVPW.png\" alt=\"property hiding\"></p>\n\n<p>Suppose we then do this:</p>\n\n<pre><code>childScope.anArray[1] = '22'\nchildScope.anObject.property1 = 'child prop1'\n</code></pre>\n\n<p>The prototype chain is consulted because the objects (anArray and anObject) are not found in the childScope.  The objects are found in the parentScope, and the property values are updated on the original objects.  No new properties are added to the childScope;  no new objects are created.  (Note that in JavaScript arrays and functions are also objects.)</p>\n\n<p><img src=\"http://i.stack.imgur.com/2QceU.png\" alt=\"follow the prototype chain\"></p>\n\n<p>Suppose we then do this:</p>\n\n<pre><code>childScope.anArray = [100, 555]\nchildScope.anObject = { name: 'Mark', country: 'USA' }\n</code></pre>\n\n<p>The prototype chain is not consulted, and child scope gets two new object properties that hide/shadow the parentScope object properties with the same names.</p>\n\n<p><img src=\"http://i.stack.imgur.com/hKetH.png\" alt=\"more property hiding\"></p>\n\n<p>Takeaways:</p>\n\n<ul>\n<li>If we read childScope.propertyX, and childScope has propertyX, then the prototype chain is not consulted.</li>\n<li>If we set childScope.propertyX, the prototype chain is not consulted.</li>\n</ul>\n\n<p>One last scenario:</p>\n\n<pre><code>delete childScope.anArray\nchildScope.anArray[1] === 22  // true\n</code></pre>\n\n<p>We deleted the childScope property first, then when we try to access the property again, the prototype chain is consulted.</p>\n\n<p><img src=\"http://i.stack.imgur.com/56uoe.png\" alt=\"after removing a child property\"></p>\n\n<hr>\n\n<h2>Angular Scope Inheritance</h2>\n\n<p>The contenders:</p>\n\n<ul>\n<li>The following create new scopes, and inherit prototypically: ng-repeat, ng-include, ng-switch, ng-controller, directive with <code>scope: true</code>, directive with <code>transclude: true</code>.</li>\n<li>The following creates a new scope which does not inherit prototypically: directive with <code>scope: { ... }</code>.  This creates an \"isolate\" scope instead.</li>\n</ul>\n\n<p>Note, by default, directives do not create new scope -- i.e., the default is <code>scope: false</code>.</p>\n\n<h3>ng-include</h3>\n\n<p>Suppose we have in our controller:</p>\n\n<pre><code>$scope.myPrimitive = 50;\n$scope.myObject    = {aNumber: 11};\n</code></pre>\n\n<p>And in our HTML:</p>\n\n<pre><code>&lt;script type=\"text/ng-template\" id=\"/tpl1.html\"&gt;\n&lt;input ng-model=\"myPrimitive\"&gt;\n&lt;/script&gt;\n&lt;div ng-include src=\"'/tpl1.html'\"&gt;&lt;/div&gt;\n\n&lt;script type=\"text/ng-template\" id=\"/tpl2.html\"&gt;\n&lt;input ng-model=\"myObject.aNumber\"&gt;\n&lt;/script&gt;\n&lt;div ng-include src=\"'/tpl2.html'\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>Each ng-include generates a new child scope, which prototypically inherits from the parent scope.</p>\n\n<p><img src=\"http://i.stack.imgur.com/ziDfx.png\" alt=\"ng-include child scopes\"></p>\n\n<p>Typing (say, \"77\") into the first input textbox causes the child scope to get a new <code>myPrimitive</code> scope property that hides/shadows the parent scope property of the same name.  This is probably not what you want/expect.</p>\n\n<p><img src=\"http://i.stack.imgur.com/7l8dg.png\" alt=\"ng-include with a primitive\"></p>\n\n<p>Typing (say, \"99\") into the second input textbox does not result in a new child property.  Because tpl2.html binds the model to an object property, prototypal inheritance kicks in when the ngModel looks for object myObject -- it finds it in the parent scope.</p>\n\n<p><img src=\"http://i.imgur.com/ZqqloMS.png\" alt=\"ng-include with an object\"></p>\n\n<p>We can rewrite the first template to use $parent, if we don't want to change our model from a primitive to an object:</p>\n\n<pre><code>&lt;input ng-model=\"$parent.myPrimitive\"&gt;\n</code></pre>\n\n<p>Typing (say, \"22\") into this input textbox does not result in a new child property.  The model is now bound to a property of the parent scope (because $parent is a child scope property that references the parent scope).</p>\n\n<p><img src=\"http://i.stack.imgur.com/kd8pj.png\" alt=\"ng-include with $parent\"></p>\n\n<p>For all scopes (prototypal or not), Angular always tracks a parent-child relationship (i.e., a hierarchy), via scope properties $parent, $$childHead and $$childTail.  I normally don't show these scope properties in the diagrams.</p>\n\n<p>For scenarios where form elements are not involved, another solution is to define a function on the parent scope to modify the primitive.  Then ensure the child always calls this function, which will be available to the child scope due to prototypal inheritance. E.g.,</p>\n\n<pre><code>// in the parent scope\n$scope.setMyPrimitive = function(value) {\n     $scope.myPrimitive = value;\n}\n</code></pre>\n\n<p>Here is a <a href=\"http://jsfiddle.net/mrajcok/jNxyE/\">sample fiddle</a> that uses this \"parent function\" approach.  (The fiddle was written as part of this answer: <a href=\"http://stackoverflow.com/a/14104318/215945\">http://stackoverflow.com/a/14104318/215945</a>.)</p>\n\n<p>See also <a href=\"http://stackoverflow.com/a/13782671/215945\">http://stackoverflow.com/a/13782671/215945</a> and <a href=\"https://github.com/angular/angular.js/issues/1267\">https://github.com/angular/angular.js/issues/1267</a>.</p>\n\n<h3>ng-switch</h3>\n\n<p>ng-switch scope inheritance works just like ng-include.  So if you need 2-way data binding to a primitive in the parent scope, use $parent, or change the model to be an object and then bind to a property of that object.  This will avoid child scope hiding/shadowing of parent scope properties.</p>\n\n<p>See also <a href=\"http://stackoverflow.com/questions/12405005/angularjs-bind-scope-of-a-switch-case/12414410\">AngularJS, bind scope of a switch-case?</a></p>\n\n<h3>ng-repeat</h3>\n\n<p>Ng-repeat works a little differently.  Suppose we have in our controller:</p>\n\n<pre><code>$scope.myArrayOfPrimitives = [ 11, 22 ];\n$scope.myArrayOfObjects    = [{num: 101}, {num: 202}]\n</code></pre>\n\n<p>And in our HTML:</p>\n\n<pre><code>&lt;ul&gt;&lt;li ng-repeat=\"num in myArrayOfPrimitives\"&gt;\n       &lt;input ng-model=\"num\"&gt;\n    &lt;/li&gt;\n&lt;ul&gt;\n&lt;ul&gt;&lt;li ng-repeat=\"obj in myArrayOfObjects\"&gt;\n       &lt;input ng-model=\"obj.num\"&gt;\n    &lt;/li&gt;\n&lt;ul&gt;\n</code></pre>\n\n<p>For each item/iteration, ng-repeat creates a new scope, which prototypically inherits from the parent scope, <strong>but it also assigns the item's value to a new property on the new child scope</strong>.  (The name of the new property is the loop variable's name.)  Here's what the Angular source code for ng-repeat actually is:</p>\n\n<pre><code>childScope = scope.$new();  // child scope prototypically inherits from parent scope\n...\nchildScope[valueIdent] = value;  // creates a new childScope property\n</code></pre>\n\n<p>If item is a primitive (as in myArrayOfPrimitives), essentially a copy of the value is assigned to the new child scope property.  Changing the child scope property's value (i.e., using ng-model, hence child scope <code>num</code>) does <strong>not</strong> change the array the parent scope references.  So in the first ng-repeat above, each child scope gets a <code>num</code> property that is independent of the myArrayOfPrimitives array:</p>\n\n<p><img src=\"http://i.stack.imgur.com/nLoiW.png\" alt=\"ng-repeat with primitives\"></p>\n\n<p>This ng-repeat will not work (like you want/expect it to).  Typing into the textboxes changes the values in the gray boxes, which are only visible in the child scopes.  What we want is for the inputs to affect the myArrayOfPrimitives array, not a child scope primitive property.  To accomplish this, we need to change the model to be an array of objects.</p>\n\n<p>So, if item is an object, a reference to the original object (not a copy) is assigned to the new child scope property.  Changing the child scope property's value (i.e., using ng-model, hence <code>obj.num</code>) <strong>does</strong> change the object the parent scope references.  So in the second ng-repeat above, we have:</p>\n\n<p><img src=\"http://i.stack.imgur.com/QSjTJ.png\" alt=\"ng-repeat with objects\"></p>\n\n<p>(I colored one line gray just so that it is clear where it is going.)</p>\n\n<p>This works as expected.  Typing into the textboxes changes the values in the gray boxes, which are visible to both the child and parent scopes.</p>\n\n<p>See also <a href=\"http://stackoverflow.com/questions/13714884/difficulty-with-ng-model-ng-repeat-and-inputs\">Difficulty with ng-model, ng-repeat, and inputs</a> and \n<a href=\"http://stackoverflow.com/a/13782671/215945\">http://stackoverflow.com/a/13782671/215945</a></p>\n\n<h3>ng-controller</h3>\n\n<p>Nesting controllers using ng-controller results in normal prototypal inheritance, just like ng-include and ng-switch, so the same techniques apply.\nHowever, \"it is considered bad form for two controllers to share information via $scope inheritance\" -- <a href=\"http://onehungrymind.com/angularjs-sticky-notes-pt-1-architecture/\">http://onehungrymind.com/angularjs-sticky-notes-pt-1-architecture/</a>\nA service should be used to share data between controllers instead.</p>\n\n<p>(If you really want to share data via controllers scope inheritance, there is nothing you need to do.  The child scope will have access to all of the parent scope properties.\nSee also <a href=\"http://stackoverflow.com/questions/13825419/controller-load-order-differs-when-loading-or-navigating/13843771#13843771\">Controller load order differs when loading or navigating</a>)</p>\n\n<h3>directives</h3>\n\n<ol>\n<li>default (<code>scope: false</code>) - the directive does not create a new scope, so there is no inheritance here.  This is easy, but also dangerous because, e.g., a directive might think it is creating a new property on the scope, when in fact it is clobbering an existing property.  This is not a good choice for writing directives that are intended as reusable components.</li>\n<li><code>scope: true</code> - the directive creates a new child scope that prototypically inherits from the parent scope.  If more than one directive (on the same DOM element) requests a new scope, only one new child scope is created.  Since we have \"normal\" prototypal inheritance, this is like ng-include and ng-switch, so be wary of 2-way data binding to parent scope primitives, and child scope hiding/shadowing of parent scope properties.</li>\n<li><code>scope: { ... }</code> - the directive creates a new isolate/isolated scope.  It does not prototypically inherit.  This is usually your best choice when creating reusable components, since the directive cannot accidentally read or modify the parent scope.  However, such directives often need access to a few parent scope properties.  The object hash is used to set up two-way binding (using '=') or one-way binding (using '@') between the parent scope and the isolate scope.  There is also '&amp;' to bind to parent scope expressions.  So, these all create local scope properties that are derived from the parent scope.\nNote that attributes are used to help set up the binding -- you can't just reference parent scope property names in the object hash, you have to use an attribute.  E.g., this won't work if you want to bind to parent property <code>parentProp</code> in the isolated scope: <code>&lt;div my-directive&gt;</code> and <code>scope: { localProp: '@parentProp' }</code>.  An attribute must be used to specify each parent property that the directive wants to bind to: <code>&lt;div my-directive the-Parent-Prop=parentProp&gt;</code> and <code>scope: { localProp: '@theParentProp' }</code>.\n<br>Isolate scope's <code>__proto__</code> references Object.\nIsolate scope's $parent references the parent scope, so although it is isolated and doesn't inherit prototypically from the parent scope, it is still a child scope.\n<br>For the picture below we have\n<br>  <code>&lt;my-directive interpolated=\"{{parentProp1}}\" twowayBinding=\"parentProp2\"&gt;</code> and\n<br>  <code>scope: { interpolatedProp: '@interpolated', twowayBindingProp: '=twowayBinding' }</code>\n<br>Also, assume the directive does this in its linking function: <code>scope.someIsolateProp = \"I'm isolated\"</code>\n<br> <img src=\"http://i.stack.imgur.com/MUxS4.png\" alt=\"isolated scope\">\n<br>For more information on isolate scopes see <a href=\"http://onehungrymind.com/angularjs-sticky-notes-pt-2-isolated-scope/\">http://onehungrymind.com/angularjs-sticky-notes-pt-2-isolated-scope/</a></li>\n<li><code>transclude: true</code> - the directive creates a new \"transcluded\" child scope, which prototypically inherits from the parent scope.  The transcluded and the isolated scope (if any) are siblings -- the $parent property of each scope references the same parent scope.  When a transcluded and an isolate scope both exist, isolate scope property $$nextSibling will reference the transcluded scope.  I'm not aware of any nuances with the transcluded scope.\n<br>For the picture below, assume the same directive as above with this addition: <code>transclude: true</code>\n<br><img src=\"http://i.stack.imgur.com/fkWHA.png\" alt=\"transcluded scope\"></li>\n</ol>\n\n<p>This <a href=\"http://jsfiddle.net/mrajcok/7g3QM/\">fiddle</a> has a <code>showScope()</code> function that can be used to examine an isolate and transcluded scope.  See the instructions in the comments in the fiddle.</p>\n\n<hr>\n\n<h2>Summary</h2>\n\n<p>There are four types of scopes:</p>\n\n<ol>\n<li>normal prototypal scope inheritance -- ng-include, ng-switch, ng-controller, directive with <code>scope: true</code></li>\n<li>normal prototypal scope inheritance with a copy/assignment -- ng-repeat.  Each iteration of ng-repeat creates a new child scope, and that new child scope always gets a new property.</li>\n<li>isolate scope -- directive with <code>scope: {...}</code>.  This one is not prototypal, but '=', '@', and '&amp;' provide a mechanism to access parent scope properties, via attributes.</li>\n<li>transcluded scope -- directive with <code>transclude: true</code>.  This one is also normal prototypal scope inheritance, but it is also a sibling of any isolate scope.</li>\n</ol>\n\n<p>For all scopes (prototypal or not), Angular always tracks a parent-child relationship (i.e., a hierarchy), via properties $parent and $$childHead and $$childTail.</p>\n\n<p>Diagrams were generated with <a href=\"/questions/tagged/graphviz\" class=\"post-tag\" title=\"show questions tagged 'graphviz'\" rel=\"tag\">graphviz</a> \"*.dot\" files, which are on <a href=\"https://github.com/mrajcok/angularjs-prototypal-inheritance-diagrams\">github</a>. Tim Caswell's \"<a href=\"http://howtonode.org/object-graphs\">Learning JavaScript with Object Graphs</a>\" was the inspiration for using GraphViz for the diagrams. </p>\n", "title": "What are the nuances of scope prototypal / prototypical inheritance in AngularJS?", "answer_id": 14049482, "question_id": 14049480, "tags": ["javascript", "angularjs", "inheritance", "prototype", "prototypal-inheritance"]}, {"body": "<p>I in no way want to compete with Mark's answer, but just wanted to highlight the piece that finally made everything click as someone new to <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Inheritance_and_the_prototype_chain\">Javascript inheritance and its prototype chain</a>.</p>\n\n<p><strong>Only property reads search the prototype chain, not writes.</strong> So when you set</p>\n\n<pre><code>myObject.prop = '123';\n</code></pre>\n\n<p>It doesn't look up the chain, but when you set </p>\n\n<pre><code>myObject.myThing.prop = '123';\n</code></pre>\n\n<p><strong>there's a subtle read going on within that write operation</strong> that tries to look up myThing before writing to its prop. So that's why writing to object.properties from the child gets at the parent's objects.</p>\n", "title": "What are the nuances of scope prototypal / prototypical inheritance in AngularJS?", "answer_id": 23699009, "question_id": 14049480, "tags": ["javascript", "angularjs", "inheritance", "prototype", "prototypal-inheritance"]}, {"body": "<p>I would like to add an example of prototypical inheritance with javascript to @Scott Driscoll answer. We'll be using classical inheritance pattern with Object.create() which is a part of  EcmaScript 5 specification.</p>\n\n<p>First we create \"Parent\" object function</p>\n\n<pre><code>function Parent(){\n\n}\n</code></pre>\n\n<p>Then add a prototype to \"Parent\" object function</p>\n\n<pre><code> Parent.prototype = {\n primitive : 1,\n object : {\n    one : 1\n   }\n}\n</code></pre>\n\n<p>Create \"Child\" object function</p>\n\n<pre><code>function Child(){\n\n}\n</code></pre>\n\n<p>Assign child prototype (Make child prototype inherit from parent prototype)</p>\n\n<pre><code>Child.prototype = Object.create(Parent.prototype);\n</code></pre>\n\n<p>Assign proper \"Child\" prototype constructor</p>\n\n<pre><code>Child.prototype.constructor = Child;\n</code></pre>\n\n<p>Add method \"changeProps\" to a child prototype, which will rewrite \"primitive\" property value in Child object and change \"object.one\" value  both in Child and Parent objects</p>\n\n<pre><code>Child.prototype.changeProps = function(){\n    this.primitive = 2;\n    this.object.one = 2;\n};\n</code></pre>\n\n<p>Initiate Parent (dad) and Child (son) objects.</p>\n\n<pre><code>var dad = new Parent();\nvar son = new Child();\n</code></pre>\n\n<p>Call Child (son) changeProps method</p>\n\n<pre><code>son.changeProps();\n</code></pre>\n\n<p><em>Check the results.</em></p>\n\n<p>Parent primitive property did not change</p>\n\n<pre><code>console.log(dad.primitive); /* 1 */\n</code></pre>\n\n<p>Child primitive property changed (rewritten)</p>\n\n<pre><code>console.log(son.primitive); /* 2 */\n</code></pre>\n\n<p>Parent and Child object.one properties changed</p>\n\n<pre><code>console.log(dad.object.one); /* 2 */\nconsole.log(son.object.one); /* 2 */\n</code></pre>\n\n<p>Working example here <a href=\"http://jsbin.com/xexurukiso/1/edit/\">http://jsbin.com/xexurukiso/1/edit/</a></p>\n\n<p>More info on Object.create here <a href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/create\">https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/create</a></p>\n", "title": "What are the nuances of scope prototypal / prototypical inheritance in AngularJS?", "answer_id": 26822932, "question_id": 14049480, "tags": ["javascript", "angularjs", "inheritance", "prototype", "prototypal-inheritance"]}], "link": "http://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs", "question_id": 14049480}, {"body": "<p>I've an annoying problem in JavaScript.</p>\n\n<pre><code>&gt; parseInt(1 / 0, 19)\n&gt; 18\n</code></pre>\n\n<p>Why does <code>parseInt</code> return <code>18</code>?</p>\n", "title": "Why does parseInt(1/0, 19) return 18?", "tags": ["javascript", "parseint"], "answers": [{"body": "<p>The result of <code>1/0</code> is <a href=\"https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Infinity\"><code>Infinity</code></a>.</p>\n\n<p><a href=\"https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt\"><code>parseInt</code></a> treats its first argument as a string which means first of all <code>Infinity.toString()</code> is called, producing the string <code>\"Infinity\"</code>. So it works the same as if you asked it to convert <code>\"Infinity\"</code> in base 19 to decimal.</p>\n\n<p>Here are the digits in base 19 along with their decimal values:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Base 19   Base 10 (decimal)\n---------------------------\n   0            0\n   1            1\n   2            2\n   3            3\n   4            4\n   5            5\n   6            6\n   7            7\n   8            8\n   9            9\n   a            10\n   b            11\n   c            12\n   d            13\n   e            14\n   f            15\n   g            16\n   h            17\n   i            18\n</code></pre>\n\n<p>What happens next is that <code>parseInt</code> scans the input <code>\"Infinity\"</code> to find which part of it can be parsed and stops after accepting the first <code>I</code> (because <code>n</code> is not a valid digit in base 19).</p>\n\n<p>Therefore it behaves as if you called <code>parseInt(\"I\", 19)</code>, which converts to decimal 18 by the table above.</p>\n", "title": "Why does parseInt(1/0, 19) return 18?", "answer_id": 11340718, "question_id": 11340673, "tags": ["javascript", "parseint"]}, {"body": "<p>Here's the sequence of events:</p>\n\n<ul>\n<li><code>1/0</code> evaluates to <code>Infinity</code></li>\n<li><code>parseInt</code> reads <code>Infinity</code> and happily notes that <code>I</code> is 18 in base 19</li>\n<li><code>parseInt</code> ignores the remainder of the string, since it can't be converted.</li>\n</ul>\n\n<p>Note that you'd get a result for any base <code>&gt;= 19</code>, but not for bases below that. For bases <code>&gt;= 24</code>, you'll get a larger result, as <code>n</code> becomes a valid digit at that point.</p>\n", "title": "Why does parseInt(1/0, 19) return 18?", "answer_id": 11340746, "question_id": 11340673, "tags": ["javascript", "parseint"]}, {"body": "<p>To add to the above answers:</p>\n\n<p>parseInt is intended to parse strings into numbers (the clue is in the name).  In your situation, you don't want to do any parsing at all since 1/0 is <em>already</em> a number, so it's a strange choice of function.  If you have a number (which you do) and want to convert it to a particular base, you should use <a href=\"https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/toString\">toString with a radix</a> instead.</p>\n\n<pre><code>var num = 1 / 0;\nvar numInBase19 = num.toString(19); // returns the string \"Infinity\"\n</code></pre>\n", "title": "Why does parseInt(1/0, 19) return 18?", "answer_id": 11417209, "question_id": 11340673, "tags": ["javascript", "parseint"]}, {"body": "<p>To add to the above answers</p>\n\n<p><code>parseInt(1/0,19)</code> is equivalent to <code>parseInt(\"Infinity\",19)</code></p>\n\n<p>Within base 19 numbers <code>0-9</code> and  <code>A-I</code> <code>(or a-i)</code> are a valid numbers. So, from the \"Infinity\" it takes <code>I</code> of base 19 and converts to base 10 which becomes 18\nThen it tries to take the next character i.e. <code>n</code> which is not present in base 19 so discards next characters (as per javascript's behavior of converting string to number)</p>\n\n<p>So, if you write <code>parseInt(\"Infinity\",19)</code> OR  <code>parseInt(\"I\",19)</code> OR <code>parseInt(\"i\",19)</code> the result will be same i.e <code>18</code>.</p>\n\n<p>Now, if you write <code>parseInt(\"I0\",19)</code> the result will be <code>342</code>\nas <code>I X 19 (the base)^1 + 0 X 19^0</code>  = <code>18 X 19^1 + 0 X 19^0</code> = <code>18 X 19 + 0 X 1</code>  = <code>342</code></p>\n\n<p>Similarly, <code>parseInt(\"I11\",19)</code> will result in <code>6518</code></p>\n\n<p>i.e. </p>\n\n<pre><code>  18 X 19^2  +   1 X 19^1   +  1 X 19^0\n= 18 X 19^2  +   1 X 19^1   +  1 X 19^0\n= 18 X 361   +   1 X 19     +  1 X 1\n= 6498  +  19  +  1\n= 6518\n</code></pre>\n", "title": "Why does parseInt(1/0, 19) return 18?", "answer_id": 11518316, "question_id": 11340673, "tags": ["javascript", "parseint"]}], "link": "http://stackoverflow.com/questions/11340673/why-does-parseint1-0-19-return-18", "question_id": 11340673}, {"body": "<p>How to find the version of an installed node.js/npm <strong>package</strong>?</p>\n\n<p>This prints the version of npm itself:</p>\n\n<pre><code>npm -v &lt;package-name&gt;\n</code></pre>\n\n<p>This prints a cryptic error:</p>\n\n<pre><code>npm version &lt;package-name&gt;\n</code></pre>\n\n<p>This prints the package version <em>on the registry</em> (i.e. the latest version available):</p>\n\n<pre><code>npm view &lt;package-name&gt; version\n</code></pre>\n\n<p>How do I get the <strong>installed version</strong>?</p>\n", "title": "Find the version of an installed npm package", "tags": ["node.js", "package", "npm"], "answers": [{"body": "<p><code>npm list</code> for local packages or <code>npm list -g</code> for globally installed packages.</p>\n\n<p>The result should look like (package@version):</p>\n\n<pre><code>\u251c\u2500\u252c cli-color@0.1.6 \n\u2502 \u2514\u2500\u2500 es5-ext@0.7.1 \n\u251c\u2500\u2500 coffee-script@1.3.3 \n\u251c\u2500\u2500 less@1.3.0 \n\u251c\u2500\u252c sentry@0.1.2 \n\u2502 \u251c\u2500\u2500 file@0.2.1 \n\u2502 \u2514\u2500\u2500 underscore@1.3.3 \n\u2514\u2500\u2500 uglify-js@1.2.6 \n</code></pre>\n\n<p><strong>Edit</strong>: As <a href=\"http://stackoverflow.com/users/322418/juanpaco\">@juanpaco</a> pointed out it is now possible to directly display the version of one package if you know the name of the package.</p>\n\n<p>For example: <code>npm list grunt</code> will result in:</p>\n\n<pre><code>projectName@projectVersion /path/to/project/folder\n\u2514\u2500\u2500 grunt@0.4.1\n</code></pre>\n", "title": "Find the version of an installed npm package", "answer_id": 10986132, "question_id": 10972176, "tags": ["node.js", "package", "npm"]}, {"body": "<p>Another quick way of finding out what packages are installed <strong>locally</strong> and <strong>without their dependencies</strong> is to use:</p>\n\n<pre><code>npm list --depth=0\n</code></pre>\n\n<p>Which gives you something like </p>\n\n<pre><code>\u251c\u2500\u2500 bower@0.8.6\n\u251c\u2500\u2500 grunt@0.4.1\n\u251c\u2500\u2500 grunt-bower-requirejs@0.4.3\n\u251c\u2500\u2500 grunt-contrib-clean@0.4.1\n\u251c\u2500\u2500 grunt-contrib-coffee@0.7.0\n\u251c\u2500\u2500 grunt-contrib-copy@0.4.1\n\u251c\u2500\u2500 grunt-contrib-imagemin@0.1.4\n\u251c\u2500\u2500 grunt-contrib-jshint@0.1.1\n\u251c\u2500\u2500 grunt-contrib-livereload@0.1.2\n\u251c\u2500\u2500 grunt-contrib-requirejs@0.4.1\n\u251c\u2500\u2500 grunt-regarde@0.1.1\n\u2514\u2500\u2500 grunt-svgmin@0.1.0\n</code></pre>\n\n<p>Obviously, the same can be done globally with <code>npm list -g --depth=0</code>.</p>\n\n<p>This method is clearer in case you have installed a lot of packages.</p>\n", "title": "Find the version of an installed npm package", "answer_id": 16704412, "question_id": 10972176, "tags": ["node.js", "package", "npm"]}, {"body": "<p><code>npm view &lt;package&gt; version</code> - returns the latest available version on the package.</p>\n\n<p><code>npm list --depth=0</code> - returns versions of all installed modules without dependencies.</p>\n\n<p><code>npm list</code> - returns versions of all modules and dependencies.</p>\n\n<p>And lastly to get node version: <code>node -v</code></p>\n", "title": "Find the version of an installed npm package", "answer_id": 24501909, "question_id": 10972176, "tags": ["node.js", "package", "npm"]}, {"body": "<p>If you agree to install <a href=\"http://stedolan.github.io/jq/\">jq</a>, you can use the JSON output of <code>npm list</code>.</p>\n\n<pre><code>npm -j ls &lt;package-name&gt; | jq -r .version\n</code></pre>\n\n<p>or, if you want to be verbose </p>\n\n<pre><code>npm --json list &lt;package-name&gt; | jq --raw-output '.version'\n</code></pre>\n\n<p>For instance:</p>\n\n<pre><code>$ npm -j ls ghost | jq -r .version\n0.4.2\n</code></pre>\n\n<p>Also, the JSON format is slightly different for global packages, so you'll need to change the query.</p>\n\n<p>For instance:</p>\n\n<pre><code>$ npm -j -g ls | jq -r .dependencies.ghost.version\n0.4.2\n</code></pre>\n", "title": "Find the version of an installed npm package", "answer_id": 25285517, "question_id": 10972176, "tags": ["node.js", "package", "npm"]}, {"body": "<p>use npm {{pkg name}} -v\n this is the easy way to extract package version</p>\n", "title": "Find the version of an installed npm package", "answer_id": 28272254, "question_id": 10972176, "tags": ["node.js", "package", "npm"]}, {"body": "<pre><code>npm info YOUR_PACKAGE version\n</code></pre>\n\n<p>e.g.</p>\n\n<pre><code>npm info grunt version\n0.4.5\n</code></pre>\n", "title": "Find the version of an installed npm package", "answer_id": 31017037, "question_id": 10972176, "tags": ["node.js", "package", "npm"]}, {"body": "<p>Here's a portable Unix (using <code>grep</code> and <code>sed</code>) one-liner that returns the version string of a globally-installed npm package (remove the <code>g</code> from <code>-pg</code> to query local packages instead):</p>\n\n<pre><code>$ npm ll -pg --depth=0 grunt | grep -o \"@.*:\" | sed 's/.$//; s/^.//'\n0.4.5\n</code></pre>\n\n<ul>\n<li>the <code>npm ll</code> outputs a parseable string formatted like: <code>/usr/lib/node_modules/npm:npm@2.14.8:</code>;</li>\n<li>the <code>grep</code> command extracts the value between <code>@</code> and <code>:</code>, inclusive;</li>\n<li>the <code>sed</code> command removes the surrounding characters.</li>\n</ul>\n", "title": "Find the version of an installed npm package", "answer_id": 33426237, "question_id": 10972176, "tags": ["node.js", "package", "npm"]}, {"body": "<p>You can use <em>npm view [module] version</em>, <em>npm info [module] version</em>, <em>npm show [module] version</em> or <em>npm v [module] version</em> to check the version on an installed npm module.</p>\n\n<p>Let's suppose my grunt module version is the 0.4.5:</p>\n\n<pre><code>npm view grunt version =&gt; 0.4.5\nnpm info grunt version =&gt; 0.4.5\nnpm show grunt version =&gt; 0.4.5\nnpm v grunt version    =&gt; 0.4.5\n</code></pre>\n", "title": "Find the version of an installed npm package", "answer_id": 33675669, "question_id": 10972176, "tags": ["node.js", "package", "npm"]}, {"body": "<p>I just used \n<code>npm list | grep &lt;package name&gt;</code>\nand it worked great </p>\n\n<p>On windows run:</p>\n\n<p><code>npm list | find &lt;package name&gt;</code></p>\n\n<p>In PowerShell run:</p>\n\n<p><code>npm list | sls &lt;package name&gt;</code></p>\n", "title": "Find the version of an installed npm package", "answer_id": 35037644, "question_id": 10972176, "tags": ["node.js", "package", "npm"]}, {"body": "<p>Try with:</p>\n\n<pre><code>npm list --depth 1 --global packagename\n</code></pre>\n", "title": "Find the version of an installed npm package", "answer_id": 37211072, "question_id": 10972176, "tags": ["node.js", "package", "npm"]}, {"body": "<p>Using this Command in Terminal to Find the Nodejs Version :</p>\n\n<p>nodejs -v </p>\n\n<p>Using this Command in Terminal to Find the NPM Version :</p>\n\n<p>npm -v</p>\n", "title": "Find the version of an installed npm package", "answer_id": 38482268, "question_id": 10972176, "tags": ["node.js", "package", "npm"]}, {"body": "<p>If you are brave enough (and have <code>node</code> installed), you can always do something like:</p>\n\n<pre><code>echo \"console.log(require('./package.json').version);\" | node\n</code></pre>\n\n<p>This will print the version of the current package.\nYou can also modify it to go insane, like this:</p>\n\n<pre><code>echo \"eval('var result='+require('child_process').execSync('npm version',{encoding:'utf8'})); console.log(result.WHATEVER_PACKAGE_NAME);\" | node\n</code></pre>\n\n<p>That will print the version of <code>WHATEVER_PACKAGE_NAME</code> package, that is seen by <code>npm version</code>.</p>\n", "title": "Find the version of an installed npm package", "answer_id": 38791946, "question_id": 10972176, "tags": ["node.js", "package", "npm"]}, {"body": "<p>JSON file has the version of all the packages installed. You could use * to get the latest version.</p>\n", "title": "Find the version of an installed npm package", "answer_id": 39257907, "question_id": 10972176, "tags": ["node.js", "package", "npm"]}, {"body": "<p>NPM Check do a great job with that ! + interactive REPL :)\n<a href=\"https://www.npmjs.com/package/npm-check\" rel=\"nofollow\">https://www.npmjs.com/package/npm-check</a> \"Check for outdated, incorrect, and unused dependencies.\"</p>\n", "title": "Find the version of an installed npm package", "answer_id": 39332467, "question_id": 10972176, "tags": ["node.js", "package", "npm"]}], "link": "http://stackoverflow.com/questions/10972176/find-the-version-of-an-installed-npm-package", "question_id": 10972176}, {"body": "<p>I've read the AngularJS documentation on the topic carefully, and then fiddled around with a directive. Here's the <a href=\"http://jsfiddle.net/iweinfuld/7g3QM/3/\">fiddle</a>.</p>\n\n<p>And here are some relevant snippets:</p>\n\n<ul>\n<li><p>From the HTML:</p>\n\n<pre><code>&lt;pane bi-title=\"title\" title=\"{{title}}\"&gt;{{text}}&lt;/pane&gt;\n</code></pre></li>\n<li><p>From the pane directive:</p>\n\n<pre><code>scope: { biTitle: '=', title: '@', bar: '=' },\n</code></pre></li>\n</ul>\n\n<p>There are several things I don't get:</p>\n\n<ul>\n<li>Why do I have to use <code>\"{{title}}\"</code> with <code>'@'</code> and <code>\"title\"</code> with <code>'='</code>?</li>\n<li>Can I also access the parent scope directly, without decorating my element with an attribute?</li>\n<li>The documentation says <em>\"Often it's desirable to pass data from the isolated scope via an expression and to the parent scope\"</em>, but that seems to work fine with bidirectional binding too. Why would the expression route be better?</li>\n</ul>\n\n<p>I found another fiddle that shows the expression solution too: <a href=\"http://jsfiddle.net/maxisam/QrCXh/\">http://jsfiddle.net/maxisam/QrCXh/</a></p>\n", "title": "What is the difference between &#39;@&#39; and &#39;=&#39; in directive scope in AngularJS?", "tags": ["angularjs", "angularjs-directive", "angularjs-scope"], "answers": [{"body": "<p>The '=' means bi-directional binding, so a reference to a variable to the parent scope. This means, when you change the variable in the directive, it will be changed in the parent scope as well.</p>\n\n<p>'@' means the variable will be copied (cloned) into the directive.</p>\n\n<p>As far as I know, this</p>\n\n<pre><code>&lt;pane bi-title=\"{{title}}\" title=\"{{title}}\"&gt;{{text}}&lt;/pane&gt;\n</code></pre>\n\n<p>should work too. bi-title will receive the parent scope variable value, which can be changed in the directive.</p>\n\n<p>If you need to change several variables in the parent scope, you could execute a function on the parent scope from within the directive (or pass data via a service).</p>\n", "title": "What is the difference between &#39;@&#39; and &#39;=&#39; in directive scope in AngularJS?", "answer_id": 14050313, "question_id": 14050195, "tags": ["angularjs", "angularjs-directive", "angularjs-scope"]}, {"body": "<blockquote>\n  <p>why do I have to use \"{{title}}\" with '@' and \"title\" with '='?</p>\n</blockquote>\n\n<p>@ binds a local/directive scope property to the <strong>evaluated value of the DOM attribute</strong>.  If you use <code>title=title1</code> or <code>title=\"title1\"</code>, the value of DOM attribute \"title\" is simply the string <code>title1</code>.  If you use <code>title=\"{{title}}\"</code>, the value of the DOM attribute \"title\" is the interpolated value of <code>{{title}}</code>, hence the string will be whatever parent scope property \"title\" is currently set to.  Since attribute values are always strings, you will always end up with a string value for this property in the directive's scope when using @.</p>\n\n<p>= binds a local/directive scope property to <strong>a parent scope property</strong>.  So with =, you use the parent model/scope property name as the value of the DOM attribute.  You can't use <code>{{}}</code>s with =.</p>\n\n<p>With @, you can do things like <code>title=\"{{title}} and then some\"</code> -- {{title}} is interpolated, then the string \"and them some\" is concatenated with it.  The final concatenated string is what the local/directive scope property gets.  (You can't do this with =, only @.)</p>\n\n<p>With @, you will need to use <code>attr.$observe('title', function(value) { ... })</code> if you need to use the value in your link(ing) function.  E.g., <code>if(scope.title == \"...\")</code> won't work like you expect.  Note that this means you can only access this attribute <a href=\"https://github.com/angular/angular.js/wiki/Understanding-Directives\"><em>asynchronously</em></a>.\nYou don't need to use $observe() if you are only using the value in a template.  E.g., <code>template: '&lt;div&gt;{{title}}&lt;/div&gt;'</code>.</p>\n\n<p>With =, you don't need to use $observe.</p>\n\n<blockquote>\n  <p>can I also access the parent scope directly, without decorating my element with an attribute?</p>\n</blockquote>\n\n<p>Yes, but only if you don't use an isolate scope.  Remove this line from your directive -- <code>scope: { ... }</code> -- and then your directive will not create a new scope.  It will use the parent scope.  You can then access all of the parent scope properties directly.</p>\n\n<blockquote>\n  <p>The documentation says \"Often it's desirable to pass data from the isolated scope via an expression and to the parent scope\", but that seems to work fine with bidirectional binding too. Why would the expression route be better?</p>\n</blockquote>\n\n<p>Yes, bidirectional binding allows the local/directive scope and the parent scope to share data.  \"Expression binding\" allows the directive to call an expression (or function) defined by a DOM attribute -- and you can also pass data as arguments to the expression or function.  So, if you don't need to share data with the parent -- you just want to call a function defined in the parent scope -- you can use the &amp; syntax.</p>\n\n<p>See also</p>\n\n<ul>\n<li><a href=\"http://onehungrymind.com/angularjs-sticky-notes-pt-2-isolated-scope/\">Lukas's isolated scope blog post</a> (covers @, =, &amp;)</li>\n<li><a href=\"http://stackoverflow.com/questions/13032621/need-some-examples-of-binding-attributes-in-custom-angularjs-tags/13033249#13033249\">dnc253's explanation</a> of @ and =</li>\n<li><a href=\"http://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs/14049482#14049482\">my blog-like answer</a> about scopes -- the <strong>directives</strong> section (way at the bottom, just before the Summary section) has a picture of an isolate scope and its parent scope -- the directive scope uses @ for one property and = for another</li>\n<li><a href=\"http://stackoverflow.com/questions/14908133/what-is-the-difference-between-vs-and-in-angularjs\">What is the difference between &amp; vs @ and = in angularJS</a></li>\n</ul>\n", "title": "What is the difference between &#39;@&#39; and &#39;=&#39; in directive scope in AngularJS?", "answer_id": 14063373, "question_id": 14050195, "tags": ["angularjs", "angularjs-directive", "angularjs-scope"]}, {"body": "<p>Even when the scope is local, as in your example, you may access the parent scope through the property <code>$parent</code>. Assume in the code below, that <code>title</code> is defined on the parent scope. You may then access title as <code>$parent.title</code>:</p>\n\n<pre><code>link : function(scope) { console.log(scope.$parent.title) },\ntemplate : \"the parent has the title {{$parent.title}}\"\n</code></pre>\n\n<p>However in most cases the same effect is better obtained using attributes.</p>\n\n<p>An example of where I found the \"&amp;\" notation, which is used \"to pass data from the isolated scope via an expression and to the parent scope\", useful (and a two-way databinding could not be used) was in a directive for rendering a special datastructure inside an ng-repeat.</p>\n\n<pre><code>&lt;render data = \"record\" deleteFunction = \"dataList.splice($index,1)\" ng-repeat = \"record in dataList\" &gt; &lt;/render&gt;\n</code></pre>\n\n<p>One part of the rendering was a delete button and here it was useful to attach a deletefunction from the outside scope via &amp;. Inside the render-directive it looks like</p>\n\n<pre><code>scope : { data = \"=\", deleteFunction = \"&amp;\"},\ntemplate : \"... &lt;button ng-click = \"deleteFunction()\"&gt;&lt;/button&gt;\"\n</code></pre>\n\n<p>2-way databinding i.e. <code>data = \"=\"</code> can not be used as the delete function would run on every <code>$digest</code> cycle, which is not good, as the record is then immediately deleted and never rendered.</p>\n", "title": "What is the difference between &#39;@&#39; and &#39;=&#39; in directive scope in AngularJS?", "answer_id": 24693373, "question_id": 14050195, "tags": ["angularjs", "angularjs-directive", "angularjs-scope"]}, {"body": "<p>If you would like to see more how this work with a live example. <a href=\"http://jsfiddle.net/juanmendez/k6chmnch/\">http://jsfiddle.net/juanmendez/k6chmnch/</a></p>\n\n<pre><code>var app = angular.module('app', []);\napp.controller(\"myController\", function ($scope) {\n    $scope.title = \"binding\";\n});\napp.directive(\"jmFind\", function () {\n    return {\n        replace: true,\n        restrict: 'C',\n        transclude: true,\n        scope: {\n            title1: \"=\",\n            title2: \"@\"\n        },\n        template: \"&lt;div&gt;&lt;p&gt;{{title1}} {{title2}}&lt;/p&gt;&lt;/div&gt;\"\n    };\n});\n</code></pre>\n", "title": "What is the difference between &#39;@&#39; and &#39;=&#39; in directive scope in AngularJS?", "answer_id": 27072010, "question_id": 14050195, "tags": ["angularjs", "angularjs-directive", "angularjs-scope"]}, {"body": "<p>There are a lot of great answers here, but I would like to offer my perspective on the differences between '@', '=', and '&amp;' binding that proved useful for me.</p>\n\n<p>All three bindings are ways of passing data from your parent scope to your directive's isolated scope through the element's attributes:</p>\n\n<blockquote>\n  <ol>\n  <li><p><strong>@</strong> binding is for passing strings. \n     These strings support <code>{{}}</code> expressions for interpolated values. \n     For example: \n     . The interpolated expression is evaluated against \n     directive's parent scope.</p></li>\n  <li><p><strong>=</strong> binding is for two-way model binding. The model in parent scope\n     is linked to the model in the directive's isolated scope. Changes to\n     one model affects the other, and vice versa.</p></li>\n  <li><p><strong>&amp;</strong> binding is for passing a method into your directive's scope so that\n     it can be called within your directive.  The method is pre-bound to\n     the directive's parent scope, and supports arguments.  For example if the method is hello(name) in parent scope, then in\n     order to execute the method from inside your directive, you must \n     call $scope.hello({name:'world'})</p></li>\n  </ol>\n</blockquote>\n\n<p>I find that it's easier to remember these differences by referring to the scope bindings by a shorter description:</p>\n\n<ul>\n<li><strong>@</strong> <em>Attribute string binding</em></li>\n<li><strong>=</strong> <em>Two-way model binding</em></li>\n<li><strong>&amp;</strong> <em>Callback method binding</em></li>\n</ul>\n\n<p>The symbols also make it clearer as to what the scope variable represents inside of your directive's implementation:</p>\n\n<ul>\n<li><strong>@</strong> <em>string</em></li>\n<li><strong>=</strong> <em>model</em></li>\n<li><strong>&amp;</strong> <em>method</em></li>\n</ul>\n\n<p>In order of usefulness (for me anyways):</p>\n\n<ol>\n<li>=</li>\n<li>@</li>\n<li>&amp;</li>\n</ol>\n", "title": "What is the difference between &#39;@&#39; and &#39;=&#39; in directive scope in AngularJS?", "answer_id": 28310787, "question_id": 14050195, "tags": ["angularjs", "angularjs-directive", "angularjs-scope"]}, {"body": "<p>There are three ways scope can be added in the directive:</p>\n\n<ol>\n<li><strong>Parent scope</strong>: This is the default scope inheritance. </li>\n</ol>\n\n<p>The directive and its parent(controller/directive inside which it lies) scope is same.\nSo any changes made to the scope variables inside directive are reflected in the parent controller as well. You don't need to specify this as it is default.</p>\n\n<ol start=\"2\">\n<li><strong>Child scope</strong>: directive creates a child scope which inherits from the parent scope if you specify the scope variable of the directive as true. </li>\n</ol>\n\n<p>Here, if you change the scope variables inside directive, it wont reflect in the parent scope, but if you change the property of a scope variable, that is reflected in the parent scope, as you actually modified the scope variable of the parent.</p>\n\n<p>Example,</p>\n\n<pre><code>app.directive(\"myDirective\", function(){\n\n    return {\n        restrict: \"EA\",\n        scope: true,\n        link: function(element, scope, attrs){\n            scope.somvar = \"new value\"; //doesnot reflect in the parent scope\n            scope.someObj.someProp = \"new value\"; //reflects as someObj is of parent, we modified that but did not override.\n        }\n    };\n});\n</code></pre>\n\n<ol start=\"3\">\n<li><strong>Isolated scope</strong>: This is used when you want to create scope that does not inherit from the controller scope. </li>\n</ol>\n\n<p>This happens when you are creating plugins as this makes the directive generic, since it can be placed in any html and does not gets affected by its parent scope.</p>\n\n<p>Now, if you dont want any interaction with the parent scope, then you can just specify scope as empty object. like,</p>\n\n<pre><code>scope: {} //this does not interact with the parent scope in any way\n</code></pre>\n\n<p>Mostly this is not the case as we need some interaction with the parent scope, so we want some of the values/ changes to pass through.\nFor this reason we use:</p>\n\n<pre><code>1. \"@\"   (  Text binding / one-way binding )\n2. \"=\"   ( Direct model binding / two-way binding )\n3. \"&amp;\"   ( Behaviour binding / Method binding  )\n</code></pre>\n\n<p><strong>@</strong> means that the changes from the controller scope will be reflected in the directive scope but if you modify the value in the directive scope, the controller scope variable will not get affected. </p>\n\n<p>@ always expects the mapped attribute to be an expression. This is very important; because to make the \u201c@\u201d prefix work, we need to wrap the attribute value inside {{}}. </p>\n\n<p><strong>=</strong> is birectional so if you change the variable in directive scope, the controller scope variable gets affected as well</p>\n\n<p><strong>&amp;</strong> is used to bind controller scope method so that if needed we can call it from the directive</p>\n\n<p>Advantage here is that, the name of variable need not be same in controller scope and directive scope. </p>\n\n<p>Example, directive scope has a variable \"dirVar\" which syncs with variable \"contVar\" of the controller scope. This gives a lot of power and generalisation to the directive as one controller can sync with variable v1 while another controller using the same directive can ask dirVar to sync with variable v2.</p>\n\n<p>Below is the example of usage:</p>\n\n<p>The directive and controller are:</p>\n\n<pre><code> var app = angular.module(\"app\", []);\n app.controller(\"MainCtrl\", function( $scope ){\n    $scope.name = \"Harry\";\n    $scope.color = \"#333333\";\n    $scope.reverseName = function(){\n     $scope.name = $scope.name.split(\"\").reverse().join(\"\");\n    };\n    $scope.randomColor = function(){\n        $scope.color = '#'+Math.floor(Math.random()*16777215).toString(16);\n    };\n});\napp.directive(\"myDirective\", function(){\n    return {\n        restrict: \"EA\",\n        scope: {\n            name: \"@\",\n            color: \"=\",\n            reverse: \"&amp;\"\n        },\n        link: function(element, scope, attrs){\n           //do something like\n           $scope.reverse(); \n          //calling the controllers function\n        }\n    };\n});\n</code></pre>\n\n<p>And the html(note the differnce for @ and =):</p>\n\n<pre><code>&lt;div my-directive\n  class=\"directive\"\n  name=\"{{name}}\"\n  reverse=\"reverseName()\"\n  color=\"color\" &gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Here is a <a href=\"http://www.undefinednull.com/2014/02/11/mastering-the-scope-of-a-directive-in-angularjs/\">link</a> to the blog which describes it nicely. </p>\n", "title": "What is the difference between &#39;@&#39; and &#39;=&#39; in directive scope in AngularJS?", "answer_id": 29880354, "question_id": 14050195, "tags": ["angularjs", "angularjs-directive", "angularjs-scope"]}, {"body": "<p><code>@</code> <strong>get as string</strong></p>\n\n<ul>\n<li>This does not create any bindings whatsoever. You're simply getting the word you passed in as a string</li>\n</ul>\n\n<p><code>=</code> <strong>2 way binding</strong></p>\n\n<ul>\n<li>changes made from the controller will be reflected in the reference held by the directive, and vice-versa</li>\n</ul>\n\n<p><code>&amp;</code> This behaves a bit differently, because the scope gets a function that <strong>returns the object that was passed in</strong>. I'm assuming this was necessary to make it work. <em>The fiddle should make this clear.</em></p>\n\n<ul>\n<li><strong>After calling this getter function, the resulting object behaves as follows:</strong>\n\n<ul>\n<li>if a <em>function</em> was passed: then the function is executed in the parent (controller) closure when called</li>\n<li>if a <em>non-function</em> was passed in: simply get a local copy of the object that has no bindings</li>\n</ul></li>\n</ul>\n\n<p><br>\n<a href=\"http://jsfiddle.net/93sufr7L/14/\">This fiddle should demonstrate how they work</a>. Pay special attention to the scope functions with <code>get...</code> in the name to hopefully better understand what I mean about <code>&amp;</code></p>\n", "title": "What is the difference between &#39;@&#39; and &#39;=&#39; in directive scope in AngularJS?", "answer_id": 32217611, "question_id": 14050195, "tags": ["angularjs", "angularjs-directive", "angularjs-scope"]}, {"body": "<p>I created a little HTML file that contains Angular code demonstrating the differences between them:</p>\n\n<p><a href=\"https://gist.github.com/RobertAKARobin/a02426c375596f0bef89\">https://gist.github.com/RobertAKARobin/a02426c375596f0bef89</a></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Angular&lt;/title&gt;\n    &lt;script src=\"https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js\"&gt;&lt;/script&gt;\n  &lt;/head&gt;\n  &lt;body ng-app=\"myApp\"&gt;\n    &lt;div ng-controller=\"myCtrl as VM\"&gt;\n      &lt;a my-dir\n        attr1=\"VM.sayHi('Juan')\"\n        attr2=\"VM.sayHi('Juan')\"\n        attr3=\"VM.sayHi('Juan')\"&gt;&lt;/a&gt;\n    &lt;/div&gt;\n    &lt;script&gt;\n    angular.module(\"myApp\", [])\n    .controller(\"myCtrl\", [function(){\n      this.sayHi = function(name){\n        return (\"Hey there, \" + name);\n      }\n    }])\n    .directive(\"myDir\", [function(){\n      return {\n        scope: { attr1: \"=\", attr2: \"@\", attr3: \"&amp;\" },\n        link: function(scope){\n          console.log(scope.attr1); // logs \"Hey there, Juan\"\n          console.log(scope.attr2); // logs \"VM.sayHi('Juan')\"\n          console.log(scope.attr3); // logs \"function (a){return h(c,a)}\"\n          console.log(scope.attr3()); // logs \"Hey there, Juan\"\n        }\n      }\n    }]);\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n", "title": "What is the difference between &#39;@&#39; and &#39;=&#39; in directive scope in AngularJS?", "answer_id": 34336984, "question_id": 14050195, "tags": ["angularjs", "angularjs-directive", "angularjs-scope"]}, {"body": "<p>I implemented all the possible options in a fiddle.</p>\n\n<p>It deals with all the options:</p>\n\n<pre><code>scope:{\n    name:'&amp;'\n},\n\nscope:{\n    name:'='\n},\n\nscope:{\n    name:'@'\n},\n\nscope:{\n\n},\n\nscope:true,\n</code></pre>\n\n<p><a href=\"https://jsfiddle.net/rishulmatta/v7xf2ujm\" rel=\"nofollow\">https://jsfiddle.net/rishulmatta/v7xf2ujm</a></p>\n", "title": "What is the difference between &#39;@&#39; and &#39;=&#39; in directive scope in AngularJS?", "answer_id": 34378474, "question_id": 14050195, "tags": ["angularjs", "angularjs-directive", "angularjs-scope"]}, {"body": "<p><strong>@</strong> local scope property is used to access string values that are defined outside the directive.</p>\n\n<p><strong>=</strong> In cases where you need to create a two-way binding between the outer scope and the directive\u2019s isolate scope you can use the = character.</p>\n\n<p><strong>&amp;</strong> local scope property allows the consumer of a directive to pass in a function that the directive can invoke. </p>\n\n<p>Kindly check the below link which gives you clear understanding with examples.I found it really very useful so thought of sharing it.</p>\n\n<p><a href=\"http://weblogs.asp.net/dwahlin/creating-custom-angularjs-directives-part-2-isolate-scope\" rel=\"nofollow\">http://weblogs.asp.net/dwahlin/creating-custom-angularjs-directives-part-2-isolate-scope</a></p>\n", "title": "What is the difference between &#39;@&#39; and &#39;=&#39; in directive scope in AngularJS?", "answer_id": 35225132, "question_id": 14050195, "tags": ["angularjs", "angularjs-directive", "angularjs-scope"]}, {"body": "<p>The <strong>=</strong> way is <strong>2-way binding</strong>, which lets you to have <strong>live</strong> changes inside your directive. When someone changes that variable out of directive, you will have that changed data inside your directive, but <strong>@</strong> way is not <strong>two-ways binding</strong>. It works like <strong>Text</strong>. You bind once, and you will have only its value.</p>\n\n<p>To get it more clearly, you can use this great article:</p>\n\n<p><a href=\"http://www.w3docs.com/snippets/angularjs/angularjs-directive-isolated-scopes.html\" rel=\"nofollow\">AngularJS Directive Scope '@' and '='</a></p>\n", "title": "What is the difference between &#39;@&#39; and &#39;=&#39; in directive scope in AngularJS?", "answer_id": 37150321, "question_id": 14050195, "tags": ["angularjs", "angularjs-directive", "angularjs-scope"]}, {"body": "<p>Simply we can use,  </p>\n\n<p><strong>@</strong> :- for String values.  </p>\n\n<p><strong>=</strong> :- for object value for two way data binding.  </p>\n\n<p><strong>&amp;</strong> :- for methods and functions.</p>\n", "title": "What is the difference between &#39;@&#39; and &#39;=&#39; in directive scope in AngularJS?", "answer_id": 39204321, "question_id": 14050195, "tags": ["angularjs", "angularjs-directive", "angularjs-scope"]}], "link": "http://stackoverflow.com/questions/14050195/what-is-the-difference-between-and-in-directive-scope-in-angularjs", "question_id": 14050195}, {"body": "<p>I would like to access my <code>$scope</code> variable in Chrome's JavaScript console. How do I do that?</p>\n\n<p>I can neither see <code>$scope</code> nor the name of my module <code>myapp</code> in the console as variables.</p>\n", "title": "How to access the $scope variable in browser&#39;s console using AngularJS?", "tags": ["angularjs", "angularjs-scope"], "answers": [{"body": "<p>Pick an element in the HTML panel of the developer tools and type this in the console:</p>\n\n<pre><code>angular.element($0).scope()\n</code></pre>\n\n<p>In <a href=\"http://en.wikipedia.org/wiki/WebKit\">WebKit</a>, <code>$0</code> is a reference to the selected DOM node in the elements tab, so by doing this you get the selected DOM node scope printed out in the console.</p>\n\n<p>You can also target the scope by element ID, like so:</p>\n\n<pre><code>angular.element(document.getElementById('yourElementId')).scope()\n</code></pre>\n\n<p><strong>Addons/Extensions</strong></p>\n\n<p>There are some very useful Chrome extensions that you might want to check out:</p>\n\n<ul>\n<li><p><a href=\"https://chrome.google.com/webstore/detail/angularjs-batarang/ighdmehidhipcmcojjgiloacoafjmpfk\">Batarang</a>. This has been around for a while.</p></li>\n<li><p><a href=\"http://ng-inspector.org/\">ng-inspector</a>. This is the newest one, and as the name suggests, it allows you to inspect your application's scopes.</p></li>\n</ul>\n\n<p><strong>Playing with jsFiddle</strong></p>\n\n<p>When working with jsfiddle you can open the fiddle in <em>show</em> mode by adding <code>/show</code> at the end of the URL. When running like this you have access to the <code>angular</code> global. You can try it here:</p>\n\n<p><a href=\"http://jsfiddle.net/jaimem/Yatbt/show\">http://jsfiddle.net/jaimem/Yatbt/show</a></p>\n\n<p><strong>jQuery Lite</strong></p>\n\n<p>If you load jQuery before AngularJS, <code>angular.element</code> can be passed a jQuery selector. So you could inspect the scope of a controller with</p>\n\n<pre><code>angular.element('[ng-controller=ctrl]').scope()\n</code></pre>\n\n<p>Of a button</p>\n\n<pre><code> angular.element('button:eq(1)').scope()\n</code></pre>\n\n<p>... and so on.</p>\n\n<p>You might actually want to use a global function to make it easier:</p>\n\n<pre><code>window.SC = function(selector){\n    return angular.element(selector).scope();\n};\n</code></pre>\n\n<p>Now you could do this</p>\n\n<pre><code>SC('button:eq(10)')\nSC('button:eq(10)').row   // -&gt; value of scope.row\n</code></pre>\n\n<p>Check here: <a href=\"http://jsfiddle.net/jaimem/DvRaR/1/show/\">http://jsfiddle.net/jaimem/DvRaR/1/show/</a></p>\n", "title": "How to access the $scope variable in browser&#39;s console using AngularJS?", "answer_id": 13744085, "question_id": 13743058, "tags": ["angularjs", "angularjs-scope"]}, {"body": "<p>Somewhere in your controller (often the last line is a good place), put</p>\n\n<pre><code>console.log($scope);\n</code></pre>\n\n<p>If you want to see an inner/implicit scope, say inside an ng-repeat, something like this will work.</p>\n\n<pre><code>&lt;li ng-repeat=\"item in items\"&gt;\n   ...\n   &lt;a ng-click=\"showScope($event)\"&gt;show scope&lt;/a&gt;\n&lt;/li&gt;\n</code></pre>\n\n<p>Then in your controller</p>\n\n<pre><code>function MyCtrl($scope) {\n    ...\n    $scope.showScope = function(e) {\n        console.log(angular.element(e.srcElement).scope());\n    }\n}\n</code></pre>\n\n<p>Note that above we define the showScope() function in the parent scope, but that's okay... the child/inner/implicit scope can access that function, which then prints out the scope based on the event, and hence the scope associated with the element that fired the event.</p>\n\n<p>@jm-'s suggestion also works, <s>but I don't think it works inside a jsFiddle.  I get this error on jsFiddle inside Chrome:</p>\n\n<pre><code>&gt; angular.element($0).scope()\nReferenceError: angular is not defined\n</code></pre>\n\n<p></s></p>\n", "title": "How to access the $scope variable in browser&#39;s console using AngularJS?", "answer_id": 13752724, "question_id": 13743058, "tags": ["angularjs", "angularjs-scope"]}, {"body": "<p>To improve on jm's answer...</p>\n\n<pre><code>// Access whole scope\nangular.element(myDomElement).scope();\n\n// Access and change variable in scope\nangular.element(myDomElement).scope().myVar = 5;\nangular.element(myDomElement).scope().myArray.push(newItem);\n\n// Update page to reflect changed variables\nangular.element(myDomElement).scope().$apply();\n</code></pre>\n\n<p>Or if you're using jQuery, this does the same thing...</p>\n\n<pre><code>$('#elementId').scope();\n$('#elementId').scope().$apply();\n</code></pre>\n\n<p>Another easy way to access a DOM element from the console (as jm mentioned) is to click on it in the 'elements' tab, and it automatically gets stored as <code>$0</code>.</p>\n\n<pre><code>angular.element($0).scope();\n</code></pre>\n", "title": "How to access the $scope variable in browser&#39;s console using AngularJS?", "answer_id": 15756337, "question_id": 13743058, "tags": ["angularjs", "angularjs-scope"]}, {"body": "<p>If you have installed <a href=\"https://chrome.google.com/webstore/detail/angularjs-batarang/ighdmehidhipcmcojjgiloacoafjmpfk\">Batarang</a></p>\n\n<p>Then you can just write:</p>\n\n<pre><code>$scope\n</code></pre>\n\n<p>when you have the element selected in the elements view in chrome. \nRef - <a href=\"https://github.com/angular/angularjs-batarang#console\">https://github.com/angular/angularjs-batarang#console</a></p>\n", "title": "How to access the $scope variable in browser&#39;s console using AngularJS?", "answer_id": 18662514, "question_id": 13743058, "tags": ["angularjs", "angularjs-scope"]}, {"body": "<p>I agree the best is Batarang with it's <code>$scope</code> after selecting an object (it's the same as <code>angular.element($0).scope()</code> or even shorter with jQuery: <code>$($0).scope()</code> (my favorite))</p>\n\n<p>Also, if like me you have you main scope on the <code>body</code> element, a <code>$('body').scope()</code> works fine.</p>\n", "title": "How to access the $scope variable in browser&#39;s console using AngularJS?", "answer_id": 21321802, "question_id": 13743058, "tags": ["angularjs", "angularjs-scope"]}, {"body": "<p>This is a way of getting at scope without Batarang, you can do:</p>\n\n<pre><code>var scope = angular.element('#selectorId').scope();\n</code></pre>\n\n<p>Or if you want to find your scope by controller name, do this:</p>\n\n<pre><code>var scope = angular.element('[ng-controller=myController]').scope();\n</code></pre>\n\n<p>After you make changes to your model, you'll need to apply the changes to the DOM by calling:</p>\n\n<pre><code>scope.$apply();\n</code></pre>\n", "title": "How to access the $scope variable in browser&#39;s console using AngularJS?", "answer_id": 24043389, "question_id": 13743058, "tags": ["angularjs", "angularjs-scope"]}, {"body": "<p>Say you want to access the scope of the element like</p>\n\n<pre><code>&lt;div ng-controller=\"hw\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>You could use the following in the console: </p>\n\n<pre><code>angular.element(document.querySelector('[ng-controller=hw]')).scope();\n</code></pre>\n\n<p>This will give you the scope at that element.</p>\n", "title": "How to access the $scope variable in browser&#39;s console using AngularJS?", "answer_id": 25649267, "question_id": 13743058, "tags": ["angularjs", "angularjs-scope"]}, {"body": "<p>One caveat to many of these answers: if you alias your controller your scope objects will be in an object within the returned object from <code>scope()</code>.</p>\n\n<p>For example, if your controller directive is created like so: \n<code>&lt;div ng-controller=\"FormController as frm\"&gt;</code>\nthen to access a <code>startDate</code> property of your controller, you would call <code>angular.element($0).scope().frm.startDate</code></p>\n", "title": "How to access the $scope variable in browser&#39;s console using AngularJS?", "answer_id": 28687929, "question_id": 13743058, "tags": ["angularjs", "angularjs-scope"]}, {"body": "<p>Just define a JavaScript variable outside the scope and assign it to your scope in your controller:</p>\n\n<pre><code>var myScope;\n...\napp.controller('myController', function ($scope,log) {\n     myScope = $scope;\n     ...\n</code></pre>\n\n<p>That's it! It should work in all browsers (tested at least in Chrome and Mozilla).</p>\n\n<p>It is working, and I'm using this method.</p>\n", "title": "How to access the $scope variable in browser&#39;s console using AngularJS?", "answer_id": 30886723, "question_id": 13743058, "tags": ["angularjs", "angularjs-scope"]}, {"body": "<p>I usually use jQuery data() function for that:</p>\n\n<pre><code>$($0).data().$scope\n</code></pre>\n\n<p>The $0 is currently selected item in chrome DOM inspector.\n$1, $2 .. and so on are previously selected items.</p>\n", "title": "How to access the $scope variable in browser&#39;s console using AngularJS?", "answer_id": 31796565, "question_id": 13743058, "tags": ["angularjs", "angularjs-scope"]}, {"body": "<p>Inspect the element, then use this in the console</p>\n\n<pre><code>s = $($0).scope()\n// `s` is the scope object if it exists\n</code></pre>\n", "title": "How to access the $scope variable in browser&#39;s console using AngularJS?", "answer_id": 34137774, "question_id": 13743058, "tags": ["angularjs", "angularjs-scope"]}, {"body": "<p>To add and enhance the other answers, in the console, enter <code>$($0)</code> to get the element. If it's an Angularjs application, a jQuery lite version is loaded by default.  </p>\n\n<p>If you are not using jQuery, you can use angular.element($0) as in:</p>\n\n<pre><code>angular.element($0).scope()\n</code></pre>\n\n<p>To check if you have jQuery and the version, run this command in the console:</p>\n\n<pre><code>$.fn.jquery\n</code></pre>\n\n<p>If you have inspected an element, the currently selected element is available via the command line API reference $0. Both Firebug and Chrome have this reference.</p>\n\n<p>However, the Chrome developer tools will make available the last five elements (or heap objects) selected through the properties named $0, $1, $2, $3, $4 using these references.  The most recently selected element or object can be referenced as $0, the second most recent as $1 and so on.</p>\n\n<p>Here is the <a href=\"https://getfirebug.com/wiki/index.php/Command_Line_API\" rel=\"nofollow\">Command Line API reference for Firebug</a> that lists it's references.</p>\n\n<p><code>$($0).scope()</code> will return the scope associated with the element. You can see its properties right away.</p>\n\n<p>Some other things that you can use are: </p>\n\n<ul>\n<li>View an elements parent scope:</li>\n</ul>\n\n<p><code>$($0).scope().$parent</code>. </p>\n\n<ul>\n<li>You can chain this too: </li>\n</ul>\n\n<p><code>$($0).scope().$parent.$parent</code></p>\n\n<ul>\n<li>You can look at the root scope: </li>\n</ul>\n\n<p><code>$($0).scope().$root</code></p>\n\n<ul>\n<li>If you highlighted a directive with isolate scope, you can look at it with:</li>\n</ul>\n\n<p><code>$($0).isolateScope()</code></p>\n\n<p>See <a href=\"http://eng.localytics.com/tips-and-tricks-for-debugging-unfamiliar-angularjs-code/\" rel=\"nofollow\">Tips and Tricks for Debugging Unfamiliar Angularjs Code</a> for more details and examples.</p>\n", "title": "How to access the $scope variable in browser&#39;s console using AngularJS?", "answer_id": 38726133, "question_id": 13743058, "tags": ["angularjs", "angularjs-scope"]}], "link": "http://stackoverflow.com/questions/13743058/how-to-access-the-scope-variable-in-browsers-console-using-angularjs", "question_id": 13743058}, {"body": "<p>I feel a bit thick at this point. I've spent days trying to fully wrap my head around suffix tree construction, but because I don't have a mathematical background, many of the explanations elude me as they start to make excessive use of mathematical symbology. The closest to a good explanation that I've found is <em><a href=\"http://marknelson.us/1996/08/01/suffix-trees/\">Fast String Searching With Suffix Trees</a></em>, but he glosses over various points and some aspects of the algorithm remain unclear.</p>\n\n<p>A step-by-step explanation of this algorithm here on Stack&nbsp;Overflow would be invaluable for many others besides me, I'm sure.</p>\n\n<p>For reference, here's Ukkonen's paper on the algorithm: <a href=\"http://www.cs.helsinki.fi/u/ukkonen/SuffixT1withFigs.pdf\">http://www.cs.helsinki.fi/u/ukkonen/SuffixT1withFigs.pdf</a></p>\n\n<p>My basic understanding, so far:</p>\n\n<ul>\n<li>I need to iterate through each prefix P of a given string T</li>\n<li>I need to iterate through each suffix S in prefix P and add that to tree</li>\n<li>To add suffix S to the tree, I need to iterate through each character in S, with the iterations consisting of either walking down an existing branch that starts with the same set of characters C in S and potentially splitting an edge into descendent nodes when I reach a differing character in the suffix, OR if there was no matching edge to walk down. When no matching edge is found to walk down for C, a new leaf edge is created for C.</li>\n</ul>\n\n<p>The basic algorithm appears to be O(n<sup>2</sup>), as is pointed out in most explanations, as we need to step through all of the prefixes, then we need to step through each of the suffixes for each prefix. Ukkonen's algorithm is apparently unique because of the suffix pointer technique he uses, though I think <em>that</em> is what I'm having trouble understanding.</p>\n\n<p>I'm also having trouble understanding:</p>\n\n<ul>\n<li>exactly when and how the \"active point\" is assigned, used and changed</li>\n<li>what is going on with the canonization aspect of the algorithm</li>\n<li>Why the implementations I've seen need to \"fix\" bounding variables that they are using</li>\n</ul>\n\n<hr>\n\n<p><strong>EDIT</strong> (April 13, 2012)</p>\n\n<p>Here is the completed source code that I've written and output based on jogojapan's answer below. The code outputs a detailed description and text-based diagram of the steps it takes as it builds the tree. It is a first version and could probably do with optimization and so forth, but it works, which is the main thing.</p>\n\n<p>[Redacted URL, see updated link below]</p>\n\n<p><strong>EDIT</strong> (April 15, 2012)</p>\n\n<p>The source code has been completely rewritten from scratch and now not only works correctly, but it supports automatic canonization and renders a nicer looking text graph of the output. Source code and sample output is at:</p>\n\n<blockquote>\n  <p><strong><a href=\"https://gist.github.com/2373868\">https://gist.github.com/2373868</a></strong></p>\n</blockquote>\n", "title": "Ukkonen&#39;s suffix tree algorithm in plain English?", "tags": ["algorithm", "search", "suffix-tree"], "answers": [{"body": "<p>I have had quite a lot problems to implement this data structure myself. In the end I found <a href=\"http://www.cise.ufl.edu/~sahni/dsaaj/enrich/c16/suffix.htm\">this</a> article and managed to implement it. A great plus for it is that you have a step-by-step example for a quite long string so you get to see what you should do. Please take a look at the article and I will be more then happy to give tips where needed. I am hesitant to gove yet another full-blown explanation as there are alredy quite a few round the internet.</p>\n", "title": "Ukkonen&#39;s suffix tree algorithm in plain English?", "answer_id": 9452861, "question_id": 9452701, "tags": ["algorithm", "search", "suffix-tree"]}, {"body": "<p>My intuition is as follows:</p>\n\n<p>After k iterations of the main loop you have constructed a suffix tree which contains all suffixes of the complete string that start in the first k characters.</p>\n\n<p>At the start, this means the suffix tree contains a single root node that represents the entire string (this is the only suffix that starts at 0).</p>\n\n<p>After len(string) iterations you have a suffix tree that contains all suffixes.</p>\n\n<p>During the loop the key is the active point.  My guess is that this represents the deepest point in the suffix tree that corresponds to a proper suffix of the first k characters of the string. (I think proper means that the suffix cannot be the entire string.)</p>\n\n<p>For example, suppose you have seen characters 'abcabc'.  The active point would represent the point in the tree corresponding to the suffix 'abc'.</p>\n\n<p>The active point is represented by (origin,first,last).\nThis means that you are currently at the point in the tree that you get to by starting at node origin and then feeding in the characters in string[first:last]</p>\n\n<p>When you add a new character you look to see whether the active point is still in the existing tree.  If it is then you are done.\nOtherwise you need to add a new node to the suffix tree at the active point, fallback to the next shortest match, and check again.</p>\n\n<p>Note 1:\nThe suffix pointers give a link to the next shortest match for each node.</p>\n\n<p>Note 2:\nWhen you add a new node and fallback you add a new suffix pointer for the new node.\nThe destination for this suffix pointer will be the node at the shortened active point.\nThis node will either already exist, or be created on the next iteration of this fallback loop.</p>\n\n<p>Note 3: The canonization part simply saves time in checking the active point.\nFor example, suppose you always used origin=0, and just changed first and last.\nTo check the active point you would have to follow the suffix tree each time along all the intermediate nodes.\nIt makes sense to cache the result of following this path by recording just the distance from the last node.</p>\n\n<p>Can you give a code example of what you mean by \"fix\" bounding variables?</p>\n\n<p>Health warning: I also found this algorithm particularly hard to understand so please realise that this intuition is likely to be incorrect in all important details...</p>\n", "title": "Ukkonen&#39;s suffix tree algorithm in plain English?", "answer_id": 9456760, "question_id": 9452701, "tags": ["algorithm", "search", "suffix-tree"]}, {"body": "<p>The following is an attempt to describe the Ukkonen algorithm by first showing what it does when the string is simple (i.e. does not contain any repeated characters), and then extending it to the full algorithm.</p>\n\n<p><strong>First, a few preliminary statements.</strong></p>\n\n<ol>\n<li><p>What we are building, is <em>basically</em> like a search trie. So there\nis a root node, edges going out of it leading to new nodes, and\nfurther edges going out of those, and so forth</p></li>\n<li><p><strong>But</strong>: Unlike in a search trie, the edge labels are not single\ncharacters. Instead, each edge is labeled using a pair of integers\n<code>[from,to]</code>. These are pointers into the text. In this sense, each\nedge carries a string label of arbitrary length, but takes only O(1)\nspace (two pointers).</p></li>\n</ol>\n\n<h2>Basic principle</h2>\n\n<p>I would like to first demonstrate how to create the suffix tree of a\nparticularly simple string, a string with no repeated characters:</p>\n\n<pre><code>abc\n</code></pre>\n\n<p>The algorithm <strong>works in steps, from left to right</strong>. There is <strong>one step for every character of the string</strong>. Each step might involve more than one individual operation, but we will see (see the final observations at the end) that the total number of operations is O(n).</p>\n\n<p>So, we start from the <em>left</em>, and first insert only the single character\n<code>a</code> by creating an edge from the root node (on the left) to a leaf,\nand labeling it as <code>[0,#]</code>, which means the edge represents the\nsubstring starting at position 0 and ending at <em>the current end</em>. I\nuse the symbol <code>#</code> to mean <em>the current end</em>, which is at position 1\n(right after <code>a</code>).</p>\n\n<p>So we have an initial tree, which looks like this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/aOwIL.png\" alt=\"\"></p>\n\n<p>And what it means is this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/SZH4k.png\" alt=\"\"></p>\n\n<p>Now we progress to position 2 (right after <code>b</code>). <strong>Our goal at each step</strong>\nis to insert <strong>all suffixes up to the current position</strong>. We do this\nby</p>\n\n<ul>\n<li>expanding the existing <code>a</code>-edge to <code>ab</code></li>\n<li>inserting one new edge for <code>b</code></li>\n</ul>\n\n<p>In our representation this looks like</p>\n\n<p><img src=\"http://i.stack.imgur.com/onmqt.png\" alt=\"enter image description here\"></p>\n\n<p>And what it means is:</p>\n\n<p><img src=\"http://i.stack.imgur.com/tchAx.png\" alt=\"\"></p>\n\n<p><strong>We observe</strong> two things:</p>\n\n<ul>\n<li>The edge representation for <code>ab</code> is <strong>the same</strong> as it used to be\nin the initial tree: <code>[0,#]</code>. Its meaning has automatically changed\nbecause we updated the current position <code>#</code> from 1 to 2.</li>\n<li>Each edge consumes O(1) space, because it consists of only two\npointers into the text, regardless of how many characters it\nrepresents.</li>\n</ul>\n\n<p>Next we increment the position again and update the tree by appending\na <code>c</code> to every existing edge and inserting one new edge for the new\nsuffix <code>c</code>.</p>\n\n<p>In our representation this looks like</p>\n\n<p><img src=\"http://i.stack.imgur.com/wCEdI.png\" alt=\"\"></p>\n\n<p>And what it means is:</p>\n\n<p><img src=\"http://i.stack.imgur.com/UpUFw.png\" alt=\"\"></p>\n\n<p><strong>We observe:</strong></p>\n\n<ul>\n<li>The tree is the correct suffix tree <em>up to the current position</em>\nafter each step</li>\n<li>There are as many steps as there are characters in the text</li>\n<li>The amount of work in each step is O(1), because all existing edges\nare updated automatically by incrementing <code>#</code>, and inserting the\none new edge for the final character can be done in O(1)\ntime. Hence for a string of length n, only O(n) time is required.</li>\n</ul>\n\n<h2>First extension: Simple repetitions</h2>\n\n<p>Of course this works so nicely only because our string does not\ncontain any repetitions. We now look at a more realistic string:</p>\n\n<pre><code>abcabxabcd\n</code></pre>\n\n<p>It starts with <code>abc</code> as in the previous example, then <code>ab</code> is repeated\nand followed by <code>x</code>, and then <code>abc</code> is repeated followed by <code>d</code>.</p>\n\n<p><strong>Steps 1 through 3:</strong> After the first 3 steps we have the tree from the previous example:</p>\n\n<p><img src=\"http://i.stack.imgur.com/AclCh.png\" alt=\"\"></p>\n\n<p><strong>Step 4:</strong> We move <code>#</code> to position 4. This implicitly updates all existing\nedges to this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/xhVMY.png\" alt=\"\"></p>\n\n<p>and we need to insert the final suffix of the current step, <code>a</code>, at\nthe root.</p>\n\n<p>Before we do this, we introduce <strong>two more variables</strong> (in addition to\n<code>#</code>), which of course have been there all the time but we haven't used\nthem so far:</p>\n\n<ul>\n<li>The <strong>active point</strong>, which is a triple\n<code>(active_node,active_edge,active_length)</code></li>\n<li>The <code>remainder</code>, which is an integer indicating how many new suffixes\nwe need to insert</li>\n</ul>\n\n<p>The exact meaning of these two will become clear soon, but for now\nlet's just say:</p>\n\n<ul>\n<li>In the simple <code>abc</code> example, the active point was always\n<code>(root,'\\0x',0)</code>, i.e. <code>active_node</code> was the root node, <code>active_edge</code> was specified as the null character <code>'\\0x'</code>, and <code>active_length</code> was zero. The effect of this was that the one new edge that\nwe inserted in every step was inserted at the root node as a\nfreshly created edge. We will see soon why a triple is necessary to\nrepresent this information.</li>\n<li>The <code>remainder</code> was always set to 1 at the beginning of each\nstep. The meaning of this was that the number of suffixes we had to\nactively insert at the end of each step was 1 (always just the\nfinal character).</li>\n</ul>\n\n<p>Now this is going to change. When we insert the current final\ncharacter <code>a</code> at the root, we notice that there is already an outgoing\nedge starting with <code>a</code>, specifically: <code>abca</code>. Here is what we do in\nsuch a case:</p>\n\n<ul>\n<li>We <strong>do not</strong> insert a fresh edge <code>[4,#]</code> at the root node. Instead we\nsimply notice that the suffix <code>a</code> is already in our\ntree. It ends in the middle of a longer edge, but we are not\nbothered by that. We just leave things the way they are.</li>\n<li>We <strong>set the active point</strong> to <code>(root,'a',1)</code>. That means the active\npoint is now somewhere in the middle of outgoing edge of the root node that starts with <code>a</code>, specifically, after position 1 on that edge. We\nnotice that the edge is specified simply by its first\ncharacter <code>a</code>. That suffices because there can be <em>only one</em> edge\nstarting with any particular character (confirm that this is true after reading through the entire description).</li>\n<li>We also increment <code>remainder</code>, so at the beginning of the next step\nit will be 2.</li>\n</ul>\n\n<p><strong>Observation:</strong> When the final <strong>suffix we need to insert is found to\nexist in the tree already</strong>, the tree itself is <strong>not changed</strong> at all (we only update the active point and <code>remainder</code>). The tree\nis then not an accurate representation of the suffix tree <em>up to the\ncurrent position</em> any more, but it <strong>contains</strong> all suffixes (because the final\nsuffix <code>a</code> is contained <em>implicitly</em>). Hence, apart from updating the\nvariables (which are all of fixed length, so this is O(1)), there was\n<strong>no work</strong> done in this step.</p>\n\n<p><strong>Step 5:</strong> We update the current position <code>#</code> to 5. This\nautomatically updates the tree to this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/XL6bg.png\" alt=\"\"></p>\n\n<p>And <strong>because <code>remainder</code> is 2</strong>, we need to insert two final\nsuffixes of the current position: <code>ab</code> and <code>b</code>. This is basically because:</p>\n\n<ul>\n<li>The <code>a</code> suffix from the previous step has never been properly\ninserted. So it has <em>remained</em>, and since we have progressed one\nstep, it has now grown from <code>a</code> to <code>ab</code>.</li>\n<li>And we need to insert the new final edge <code>b</code>.</li>\n</ul>\n\n<p>In practice this means that we go to the active point (which points to\nbehind the <code>a</code> on what is now the <code>abcab</code> edge), and insert the\ncurrent final character <code>b</code>. <strong>But:</strong> Again, it turns out that <code>b</code> is\nalso already present on that same edge.</p>\n\n<p>So, again, we do not change the tree. We simply:</p>\n\n<ul>\n<li>Update the active point to <code>(root,'a',2)</code> (same node and edge\nas before, but now we point to behind the <code>b</code>)</li>\n<li>Increment the <code>remainder</code> to 3 because we still have not properly\ninserted the final edge from the previous step, and we don't insert\nthe current final edge either.</li>\n</ul>\n\n<p>To be clear: We had to insert <code>ab</code> and <code>b</code> in the current step, but\nbecause <code>ab</code> was already found, we updated the active point and did\nnot even attempt to insert <code>b</code>. Why? Because if <code>ab</code> is in the tree,\n<strong>every suffix</strong> of it (including <code>b</code>) must be in the tree,\ntoo. Perhaps only <em>implicitly</em>, but it must be there, because of the\nway we have built the tree so far.</p>\n\n<p>We proceed to <strong>step 6</strong> by incrementing <code>#</code>. The tree is\nautomatically updated to:</p>\n\n<p><img src=\"http://i.stack.imgur.com/bLLT9.png\" alt=\"\"></p>\n\n<p>Because <strong><code>remainder</code> is 3</strong>, we have to insert <code>abx</code>, <code>bx</code> and\n<code>x</code>. The active point tells us where <code>ab</code> ends, so we only need to\njump there and insert the <code>x</code>. Indeed, <code>x</code> is not there yet, so we\nsplit the <code>abcabx</code> edge and insert an internal node:</p>\n\n<p><img src=\"http://i.stack.imgur.com/6HYtR.png\" alt=\"\"></p>\n\n<p>The edge representations are still pointers into the text, so\nsplitting and inserting an internal node can be done in O(1) time.</p>\n\n<p>So we have dealt with <code>abx</code> and decrement <code>remainder</code> to 2. Now we\nneed to insert the next remaining suffix, <code>bx</code>. But before we do that\nwe need to update the active point. The rule for this, after splitting\nand inserting an edge, will be called <strong>Rule 1</strong> below, and it applies whenever the\n<code>active_node</code> is root (we will learn rule 3 for other cases further\nbelow). Here is rule 1:</p>\n\n<p>After an insertion from root,</p>\n\n<ul>\n<li><code>active_node</code> remains root</li>\n<li><code>active_edge</code> is set to the first character of the new suffix we\nneed to insert, i.e. <code>b</code></li>\n<li><code>active_length</code> is reduced by 1</li>\n</ul>\n\n<p>Hence, the new active-point triple <code>(root,'b',1)</code> indicates that the\nnext insert has to be made at the <code>bcabx</code> edge, behind 1 character,\ni.e. behind <code>b</code>. We can identify the insertion point in O(1) time and\ncheck whether <code>x</code> is already present or not. If it was present, we\nwould end the current step and leave everything the way it is. But <code>x</code>\nis not present, so we insert it by splitting the edge:</p>\n\n<p><img src=\"http://i.stack.imgur.com/YVvbJ.png\" alt=\"\"></p>\n\n<p>Again, this took O(1) time and we update <code>remainder</code> to 1 and the\nactive point to <code>(root,'x',0)</code> as rule 1 states.</p>\n\n<p>But there is one more thing we need to do. We'll call this <strong>Rule 2:</strong></p>\n\n<blockquote>\n  <p>If we split an edge and insert a new node, and if that is <em>not the\n  first node</em> created during the current step, we connect the previously\n  inserted node and the new node through a special pointer, a <strong>suffix\n  link</strong>. We will later see why that is useful. Here is what we get, the\n  suffix link is represented as a dotted edge:</p>\n</blockquote>\n\n<p><img src=\"http://i.stack.imgur.com/zL9yl.png\" alt=\"\"></p>\n\n<p>We still need to insert the final suffix of the current step,\n<code>x</code>. Since the <code>active_length</code> component of the active node has fallen\nto 0, the final insert is made at the root directly. Since there is no\noutgoing edge at the root node starting with <code>x</code>, we insert a new\nedge:</p>\n\n<p><img src=\"http://i.stack.imgur.com/992gV.png\" alt=\"\"></p>\n\n<p>As we can see, in the current step all remaining inserts were made.</p>\n\n<p>We proceed to <strong>step 7</strong> by setting <code>#</code>=7, which automatically appends the next character,\n<code>a</code>, to all leaf edges, as always. Then we attempt to insert the new final\ncharacter to the active point (the root), and find that it is there\nalready. So we end the current step without inserting anything and\nupdate the active point to <code>(root,'a',1)</code>.</p>\n\n<p>In <strong>step 8</strong>,, <code>#</code>=8, we append <code>b</code>, and as seen before, this only\nmeans we update the active point to <code>(root,'a',2)</code> and increment <code>remainder</code> without doing\nanything else, because <code>b</code> is already present. <strong>However,</strong> we notice (in O(1) time) that the active point\nis now at the end of an edge. We reflect this by re-setting it to\n<code>(node1,'\\0x',0)</code>. Here, I use <code>node1</code> to refer to the\ninternal node the <code>ab</code> edge ends at.</p>\n\n<p>Then, in <strong>step <code>#</code>=9</strong>, we need to insert 'c' and this will help us to\nunderstand the final trick:</p>\n\n<h2>Second extension: Using suffix links</h2>\n\n<p>As always, the <code>#</code> update appends <code>c</code> automatically to the leaf edges\nand we go to the active point to see if we can insert 'c'. It turns\nout 'c' exists already at that edge, so we set the active point to\n<code>(node1,'c',1)</code>, increment <code>remainder</code> and do nothing else.</p>\n\n<p>Now in <strong>step <code>#</code>=10</strong>, <code>remainder is 4</code>, and so we first need to insert\n<code>abcd</code> (which remains from 3 steps ago) by inserting <code>d</code> at the active\npoint.</p>\n\n<p>Attempting to insert <code>d</code> at the active point causes an edge split in\nO(1) time:</p>\n\n<p><img src=\"http://i.stack.imgur.com/Rkdzd.png\" alt=\"\"></p>\n\n<p>The <code>active_node</code>, from which the split was initiated, is marked in\nred above. Here is the final rule, <strong>Rule 3:</strong></p>\n\n<blockquote>\n  <p>After splitting an edge from an <code>active_node</code> that is not the root\n  node, we follow the suffix link going out of that node, if there is\n  any, and reset the <code>active_node</code> to the node it points to. If there is\n  no suffix link, we set the <code>active_node</code> to the root. <code>active_edge</code>\n  and <code>active_length</code> remain unchanged.</p>\n</blockquote>\n\n<p>So the active point is now <code>(node2,'c',1)</code>, and <code>node2</code> is marked in\nred below:</p>\n\n<p><img src=\"http://i.stack.imgur.com/0IS5C.png\" alt=\"\"></p>\n\n<p>Since the insertion of <code>abcd</code> is complete, we decrement <code>remainder</code> to\n3 and consider the next remaining suffix of the current step,\n<code>bcd</code>. Rule 3 has set the active point to just the right node and edge\nso inserting <code>bcd</code> can be done by simply inserting its final character\n<code>d</code> at the active point.</p>\n\n<p>Doing this causes another edge split, and <strong>because of rule 2</strong>, we\nmust create a suffix link from the previously inserted node to the new\none:</p>\n\n<p><img src=\"http://i.stack.imgur.com/DNVQO.png\" alt=\"\"></p>\n\n<p><strong>We observe:</strong> Suffix links enable us to reset the active point so we\n  can make the next <em>remaining insert</em> at O(1) effort. Look at the\n  graph above to confirm that indeed node at label <code>ab</code> is linked to\n  the node at <code>b</code> (its suffix), and the node at <code>abc</code> is linked to\n  <code>bc</code>.</p>\n\n<p>The current step is not finished yet. <code>remainder</code> is now 2, and we\nneed to follow rule 3 to reset the active point again. Since the\ncurrent <code>active_node</code> (red above) has no suffix link, we reset to\nroot. The active point is now <code>(root,'c',1)</code>.</p>\n\n<p>Hence the next insert occurs at the one outgoing edge of the root node\nwhose label starts with <code>c</code>: <code>cabxabcd</code>, behind the first character,\ni.e. behind <code>c</code>. This causes another split:</p>\n\n<p><img src=\"http://i.stack.imgur.com/wZ7Bj.png\" alt=\"\"></p>\n\n<p>And since this involves the creation of a new internal node,we follow\nrule 2 and set a new suffix link from the previously created internal\nnode:</p>\n\n<p><img src=\"http://i.stack.imgur.com/urgol.png\" alt=\"\"></p>\n\n<p>(I am using <a href=\"http://www.graphviz.org/\">Graphviz Dot</a> for these little\ngraphs. The new suffix link caused dot to re-arrange the existing\nedges, so check carefully to confirm that the only thing that was\ninserted above is a new suffix link.)</p>\n\n<p>With this, <code>remainder</code> can be set to 1 and since the <code>active_node</code> is\nroot, we use rule 1 to update the active point to <code>(root,'d',0)</code>. This\nmeans the final insert of the current step is to insert a single <code>d</code>\nat root:</p>\n\n<p><img src=\"http://i.stack.imgur.com/TPxLe.png\" alt=\"\"></p>\n\n<p>That was the final step and we are done. There are number of <strong>final\nobservations</strong>, though:</p>\n\n<ul>\n<li><p>In each step we move <code>#</code> forward by 1 position. This automatically\nupdates all leaf nodes in O(1) time.</p></li>\n<li><p>But it does not deal with a) any suffixes <em>remaining</em> from previous\nsteps, and b) with the one final character of the current step.</p></li>\n<li><p><code>remainder</code> tells us how many additional inserts we need to\nmake. These inserts correspond one-to-one to the final suffixes of\nthe string that ends at the current position <code>#</code>. We consider one\nafter the other and make the insert. <strong>Important:</strong> Each insert is\ndone in O(1) time since the active point tells us exactly where to\ngo, and we need to add only one single character at the active\npoint. Why? Because the other characters are <em>contained implicitly</em>\n(otherwise the active point would not be where it is).</p></li>\n<li><p>After each such insert, we decrement <code>remainder</code> and follow the\nsuffix link if there is any. If not we go to root (rule 3). If we\nare at root already, we modify the active point using rule 1. In\nany case, it takes only O(1) time.</p></li>\n<li><p>If, during one of these inserts, we find that the character we want\nto insert is already there, we don't do anything and end the\ncurrent step, even if <code>remainder</code>>0. The reason is that any\ninserts that remain will be suffixes of the one we just tried to\nmake. Hence they are all <em>implicit</em> in the current tree. The fact\nthat <code>remainder</code>>0 makes sure we deal with the remaining suffixes\nlater.</p></li>\n<li><p>What if at the end of the algorithm <code>remainder</code>>0? This will be the\ncase whenever the end of the text is a substring that occurred\nsomewhere before. In that case we must append one extra character\nat the end of the string that has not occurred before. In the\nliterature, usually the dollar sign <code>$</code> is used as a symbol for\nthat. <strong>Why does that matter?</strong> --> If later we use the completed suffix tree to search for suffixes, we must accept matches only if they <em>end at a leaf</em>. Otherwise we would get a lot of spurious matches, because there are <em>many</em> strings <em>implicitly</em> contained in the tree that are not actual suffixes of the main string. Forcing <code>remainder</code> to be 0 at the end is essentially a way to ensure that all suffixes end at a leaf node. <strong>However,</strong> if we want to use the tree to search for <em>general substrings</em>, not only <em>suffixes</em> of the main string, this final step is indeed not required, as suggested by the OP's comment below.</p></li>\n<li><p>So what is the complexity of the entire algorithm? If the text is n\ncharacters in length, there are obviously n steps (or n+1 if we add\nthe dollar sign). In each step we either do nothing (other than\nupdating the variables), or we make <code>remainder</code> inserts, each taking O(1)\ntime. Since <code>remainder</code> indicates how many times we have done nothing\nin previous steps, and is decremented for every insert that we make\nnow, the total number of times we do something is exactly n (or\nn+1). Hence, the total complexity is O(n).</p></li>\n<li><p>However, there is one small thing that I did not properly explain:\nIt can happen that we follow a suffix link, update the active\npoint, and then find that its <code>active_length</code> component does not\nwork well with the new <code>active_node</code>. For example, consider a situation\nlike this:</p></li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/7t0dg.png\" alt=\"\"></p>\n\n<p>(The dashed lines indicate the rest of the tree. The dotted line is a\nsuffix link.)</p>\n\n<p>Now let the active point be <code>(red,'d',3)</code>, so it points to the place\nbehind the <code>f</code> on the <code>defg</code> edge. Now assume we made the necessary\nupdates and now follow the suffix link to update the active point\naccording to rule 3. The new active point is <code>(green,'d',3)</code>. However,\nthe <code>d</code>-edge going out of the green node is <code>de</code>, so it has only 2\ncharacters. In order to find the correct active point, we obviously\nneed to follow that edge to the blue node and reset to <code>(blue,'f',1)</code>.</p>\n\n<p>In a particularly bad case, the <code>active_length</code> could be as large as\n<code>remainder</code>, which can be as large as n. And it might very well happen\nthat to find the correct active point, we need not only jump over one\ninternal node, but perhaps many, up to n in the worst case. Does that\nmean the algorithm has a hidden O(n<sup>2</sup>) complexity, because\nin each step <code>remainder</code> is generally O(n), and the post-adjustments\nto the active node after following a suffix link could be O(n), too?</p>\n\n<p>No. The reason is that if indeed we have to adjust the active point\n(e.g. from green to blue as above), that brings us to a new node that\nhas its own suffix link, and <code>active_length</code> will be reduced. As\nwe follow down the chain of suffix links we make the remaining inserts, <code>active_length</code> can only\ndecrease, and the number of active-point adjustments we can make on\nthe way can't be larger than <code>active_length</code> at any given time. Since\n<code>active_length</code> can never be larger than <code>remainder</code>, and <code>remainder</code>\nis O(n) not only in every single step, but the total sum of increments\never made to <code>remainder</code> over the course of the entire process is\nO(n) too, the number of active point adjustments is also bounded by\nO(n).</p>\n", "title": "Ukkonen&#39;s suffix tree algorithm in plain English?", "answer_id": 9513423, "question_id": 9452701, "tags": ["algorithm", "search", "suffix-tree"]}, {"body": "<p>I tried to implement the Suffix Tree with the approach given in jogojapan's answer, but it didn't work for some cases due to wording used for the rules. Moreover, I've mentioned that nobody managed to implement an absolutely correct suffix tree using this approach. Below I will write an \"overview\" of jogojapan's answer with some modifications to the rules. I will also describe the case when we forget to create <strong><em>important</em></strong> suffix links.</p>\n\n<p><strong>Additional variables used</strong></p>\n\n<ol>\n<li><strong>active point</strong> - a triple (active_node; active_edge; active_length), showing from where we must start inserting a new suffix.</li>\n<li><strong>remainder</strong> - shows the number of suffixes we must add <em>explicitly</em>. For instance, if our word is 'abcaabca', and remainder = 3, it means we must process 3 last suffixes: <strong>bca</strong>, <strong>ca</strong> and <strong>a</strong>.</li>\n</ol>\n\n<p>Let's use a concept of an <strong>internal node</strong> - all the nodes, except the <em>root</em> and the <em>leafs</em> are <strong>internal nodes</strong>.</p>\n\n<p><strong>Observation 1</strong></p>\n\n<p>When the final suffix we need to insert is found to exist in the tree already, the tree itself is not changed at all (we only update the <code>active point</code> and <code>remainder</code>).</p>\n\n<p><strong>Observation 2</strong></p>\n\n<p>If at some point <code>active_length</code> is greater or equal to the length of current edge (<code>edge_length</code>), we move our <code>active point</code> down until <code>edge_length</code> is strictly greater than <code>active_length</code>.</p>\n\n<p>Now, let's redefine the rules:</p>\n\n<p><strong>Rule 1</strong></p>\n\n<blockquote>\n  <p>If after an insertion from the <em>active node</em> = <em>root</em>, the <em>active length</em> is greater than 0, then:</p>\n  \n  <ol>\n  <li><em>active node</em> is not changed</li>\n  <li><em>active length</em> is decremented</li>\n  <li><em>active edge</em> is shifted right (to the first character of the next suffix we must insert)</li>\n  </ol>\n</blockquote>\n\n<p><strong>Rule 2</strong></p>\n\n<blockquote>\n  <p>If we create a new <em>internal node</em> <strong>OR</strong> make an inserter from an <em>internal node</em>, and this is not the first <strong>SUCH</strong> <em>internal node</em> at current step, then we link the previous <strong>SUCH</strong> node with <strong>THIS</strong> one through a <em>suffix link</em>.</p>\n</blockquote>\n\n<p>This definition of the <code>Rule 2</code> is different from jogojapan', as here we take into account not only the <em>newly created</em> internal nodes, but also the internal nodes, from which we make an insertion.</p>\n\n<p><strong>Rule 3</strong></p>\n\n<blockquote>\n  <p>After an insert from the <em>active node</em> which is not the <em>root</em> node, we must follow the suffix link and set the <em>active node</em> to the node it points to. If there is no a suffix link, set the <em>active node</em> to the <em>root</em> node. Either way, <em>active edge</em> and <em>active length</em> stay unchanged.</p>\n</blockquote>\n\n<p>In this definition of <code>Rule 3</code> we also consider the inserts of leaf nodes (not only split-nodes).</p>\n\n<p><strong>And finally, Observation 3:</strong></p>\n\n<p>When the symbol we want to add to the tree is already on the edge, we, according to <code>Observation 1</code>, update only <code>active point</code> and <code>remainder</code>, leaving the tree unchanged. <strong>BUT</strong> if there is an <em>internal node</em> marked as <em>needing suffix link</em>, we must connect that node with our current <code>active node</code> through a suffix link.</p>\n\n<p>Let's look at the example of a suffix tree for <strong>cdddcdc</strong> if we add a suffix link in such case and if we don't:</p>\n\n<ol>\n<li><p>If we <strong>DON'T</strong> connect the nodes through a suffix link:</p>\n\n<ul>\n<li>before adding the last letter <strong>c</strong>:</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/zPiF1.png\" alt=\"\"></p>\n\n<ul>\n<li>after adding the last letter <strong>c</strong>:</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/5fsmd.png\" alt=\"\"></p></li>\n<li><p>If we <strong>DO</strong> connect the nodes through a suffix link:</p>\n\n<ul>\n<li>before adding the last letter <strong>c</strong>:</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/lZrAF.png\" alt=\"\"></p>\n\n<ul>\n<li>after adding the last letter <strong>c</strong>:</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/XUFjk.png\" alt=\"\"></p></li>\n</ol>\n\n<p>Seems like there is no significant difference: in the second case there are two more suffix links. But these suffix links are <em>correct</em>, and one of them - from the blue node to the red one - is very <strong>important</strong> for our approach with <strong>active point</strong>. The problem is that if we don't put a suffix link here, later, when we add some new letters to the tree, we might omit adding some nodes to the tree due to the <code>Rule 3</code>, because, according to it, if there's no a suffix link, then we must put the <code>active_node</code> to the root.</p>\n\n<p>When we were adding the last letter to the tree, the red node had <strong>already existed</strong> before we made an insert from the blue node (the edge labled <strong>'c'</strong>). As there was an insert from the blue node, we mark it as <em>needing a suffix link</em>. Then, relying on the <strong>active point</strong> approach, the <code>active node</code> was set to the red node. But we don't make an insert from the red node, as the letter <strong>'c'</strong> is already on the edge. Does it mean that the blue node must be left without a suffix link? No, we must connect the blue node with the red one through a suffix link. Why is it correct? Because the <strong>active point</strong> approach guarantees that we get to a right place, i.e., to the next place where we must process an insert of a <strong>shorter</strong> suffix.</p>\n\n<p>Finally, here are my implementations of the Suffix Tree:</p>\n\n<ol>\n<li><a href=\"http://pastie.org/10904255\" rel=\"nofollow\">Java</a></li>\n<li><a href=\"http://pastie.org/10904259\" rel=\"nofollow\">C++</a></li>\n</ol>\n\n<p>Hope that this \"overview\" combined with jogojapan's detailed answer will help somebody to implement his own Suffix Tree.</p>\n", "title": "Ukkonen&#39;s suffix tree algorithm in plain English?", "answer_id": 14580102, "question_id": 9452701, "tags": ["algorithm", "search", "suffix-tree"]}, {"body": "<p>Hi i have tried to implement the above explained implementation in ruby , please check it out.\nit seems to work fine.</p>\n\n<p>the only difference in the implementation is that , i have tried to use the edge object instead of just using symbols.</p>\n\n<p>its also present at <a href=\"https://gist.github.com/suchitpuri/9304856\" rel=\"nofollow\">https://gist.github.com/suchitpuri/9304856</a></p>\n\n<pre><code>    require 'pry'\n\n\nclass Edge\n    attr_accessor :data , :edges , :suffix_link\n    def initialize data\n        @data = data\n        @edges = []\n        @suffix_link = nil\n    end\n\n    def find_edge element\n        self.edges.each do |edge|\n            return edge if edge.data.start_with? element\n        end\n        return nil\n    end\nend\n\nclass SuffixTrees\n    attr_accessor :root , :active_point , :remainder , :pending_prefixes , :last_split_edge , :remainder\n\n    def initialize\n        @root = Edge.new nil\n        @active_point = { active_node: @root , active_edge: nil , active_length: 0}\n        @remainder = 0\n        @pending_prefixes = []\n        @last_split_edge = nil\n        @remainder = 1\n    end\n\n    def build string\n        string.split(\"\").each_with_index do |element , index|\n\n\n            add_to_edges @root , element        \n\n            update_pending_prefix element                           \n            add_pending_elements_to_tree element\n            active_length = @active_point[:active_length]\n\n            # if(@active_point[:active_edge] &amp;&amp; @active_point[:active_edge].data &amp;&amp; @active_point[:active_edge].data[0..active_length-1] ==  @active_point[:active_edge].data[active_length..@active_point[:active_edge].data.length-1])\n            #   @active_point[:active_edge].data = @active_point[:active_edge].data[0..active_length-1]\n            #   @active_point[:active_edge].edges &lt;&lt; Edge.new(@active_point[:active_edge].data)\n            # end\n\n            if(@active_point[:active_edge] &amp;&amp; @active_point[:active_edge].data &amp;&amp; @active_point[:active_edge].data.length == @active_point[:active_length]  )\n                @active_point[:active_node] =  @active_point[:active_edge]\n                @active_point[:active_edge] = @active_point[:active_node].find_edge(element[0])\n                @active_point[:active_length] = 0\n            end\n        end\n    end\n\n    def add_pending_elements_to_tree element\n\n        to_be_deleted = []\n        update_active_length = false\n        # binding.pry\n        if( @active_point[:active_node].find_edge(element[0]) != nil)\n            @active_point[:active_length] = @active_point[:active_length] + 1               \n            @active_point[:active_edge] = @active_point[:active_node].find_edge(element[0]) if @active_point[:active_edge] == nil\n            @remainder = @remainder + 1\n            return\n        end\n\n\n\n        @pending_prefixes.each_with_index do |pending_prefix , index|\n\n            # binding.pry           \n\n            if @active_point[:active_edge] == nil and @active_point[:active_node].find_edge(element[0]) == nil\n\n                @active_point[:active_node].edges &lt;&lt; Edge.new(element)\n\n            else\n\n                @active_point[:active_edge] = node.find_edge(element[0]) if @active_point[:active_edge]  == nil\n\n                data = @active_point[:active_edge].data\n                data = data.split(\"\")               \n\n                location = @active_point[:active_length]\n\n\n                # binding.pry\n                if(data[0..location].join == pending_prefix or @active_point[:active_node].find_edge(element) != nil )                  \n\n\n                else #tree split    \n                    split_edge data , index , element\n                end\n\n            end\n        end \n    end\n\n\n\n    def update_pending_prefix element\n        if @active_point[:active_edge] == nil\n            @pending_prefixes = [element]\n            return\n\n        end\n\n        @pending_prefixes = []\n\n        length = @active_point[:active_edge].data.length\n        data = @active_point[:active_edge].data\n        @remainder.times do |ctr|\n                @pending_prefixes &lt;&lt; data[-(ctr+1)..data.length-1]\n        end\n\n        @pending_prefixes.reverse!\n\n    end\n\n    def split_edge data , index , element\n        location = @active_point[:active_length]\n        old_edges = []\n        internal_node = (@active_point[:active_edge].edges != nil)\n\n        if (internal_node)\n            old_edges = @active_point[:active_edge].edges \n            @active_point[:active_edge].edges = []\n        end\n\n        @active_point[:active_edge].data = data[0..location-1].join                 \n        @active_point[:active_edge].edges &lt;&lt; Edge.new(data[location..data.size].join)\n\n\n        if internal_node\n            @active_point[:active_edge].edges &lt;&lt; Edge.new(element)\n        else\n            @active_point[:active_edge].edges &lt;&lt; Edge.new(data.last)        \n        end\n\n        if internal_node\n            @active_point[:active_edge].edges[0].edges = old_edges\n        end\n\n\n        #setup the suffix link\n        if @last_split_edge != nil and @last_split_edge.data.end_with?@active_point[:active_edge].data \n\n            @last_split_edge.suffix_link = @active_point[:active_edge] \n        end\n\n        @last_split_edge = @active_point[:active_edge]\n\n        update_active_point index\n\n    end\n\n\n    def update_active_point index\n        if(@active_point[:active_node] == @root)\n            @active_point[:active_length] = @active_point[:active_length] - 1\n            @remainder = @remainder - 1\n            @active_point[:active_edge] = @active_point[:active_node].find_edge(@pending_prefixes.first[index+1])\n        else\n            if @active_point[:active_node].suffix_link != nil\n                @active_point[:active_node] = @active_point[:active_node].suffix_link               \n            else\n                @active_point[:active_node] = @root\n            end \n            @active_point[:active_edge] = @active_point[:active_node].find_edge(@active_point[:active_edge].data[0])\n            @remainder = @remainder - 1     \n        end\n    end\n\n    def add_to_edges root , element     \n        return if root == nil\n        root.data = root.data + element if(root.data and root.edges.size == 0)\n        root.edges.each do |edge|\n            add_to_edges edge , element\n        end\n    end\nend\n\nsuffix_tree = SuffixTrees.new\nsuffix_tree.build(\"abcabxabcd\")\nbinding.pry\n</code></pre>\n", "title": "Ukkonen&#39;s suffix tree algorithm in plain English?", "answer_id": 22126672, "question_id": 9452701, "tags": ["algorithm", "search", "suffix-tree"]}], "link": "http://stackoverflow.com/questions/9452701/ukkonens-suffix-tree-algorithm-in-plain-english", "question_id": 9452701}, {"body": "<p>In countless places online I have seen the recommendation to include CSS prior to JavaScript. The reasoning is generally, <a href=\"http://stackoverflow.com/questions/6005827/what-can-i-do-to-decrease-load-times-of-html-pages/6005832#6005832\">of this form</a>:</p>\n\n<blockquote>\n  <p>When it comes to ordering your CSS and JavaScript, you want your CSS\n  to come first. The reason is that the rendering thread has all the\n  style information it needs to render the page. If the JavaScript\n  includes come first, the JavaScript engine has to parse it all before\n  continuing on to the next set of resources. This means the rendering\n  thread can't completely show the page, since it doesn't have all the\n  styles it needs.</p>\n</blockquote>\n\n<p>My actual testing reveals something quite different: </p>\n\n<h3>My test harness</h3>\n\n<p>I use the following Ruby script to generate specific delays for various resources: </p>\n\n<pre><code>require 'rubygems'\nrequire 'eventmachine'\nrequire 'evma_httpserver'\nrequire 'date'\n\nclass Handler  &lt; EventMachine::Connection\n  include EventMachine::HttpServer\n\n  def process_http_request\n    resp = EventMachine::DelegatedHttpResponse.new( self )\n\n    return unless @http_query_string\n\n    path = @http_path_info\n    array = @http_query_string.split(\"&amp;\").map{|s| s.split(\"=\")}.flatten\n    parsed = Hash[*array]\n\n    delay = parsed[\"delay\"].to_i / 1000.0\n    jsdelay = parsed[\"jsdelay\"].to_i\n\n    delay = 5 if (delay &gt; 5)\n    jsdelay = 5000 if (jsdelay &gt; 5000)\n\n    delay = 0 if (delay &lt; 0) \n    jsdelay = 0 if (jsdelay &lt; 0)\n\n    # Block which fulfills the request\n    operation = proc do\n      sleep delay \n\n      if path.match(/.js$/)\n        resp.status = 200\n        resp.headers[\"Content-Type\"] = \"text/javascript\"\n        resp.content = \"(function(){\n            var start = new Date();\n            while(new Date() - start &lt; #{jsdelay}){}\n          })();\"\n      end\n      if path.match(/.css$/)\n        resp.status = 200\n        resp.headers[\"Content-Type\"] = \"text/css\"\n        resp.content = \"body {font-size: 50px;}\"\n      end\n    end\n\n    # Callback block to execute once the request is fulfilled\n    callback = proc do |res|\n        resp.send_response\n    end\n\n    # Let the thread pool (20 Ruby threads) handle request\n    EM.defer(operation, callback)\n  end\nend\n\nEventMachine::run {\n  EventMachine::start_server(\"0.0.0.0\", 8081, Handler)\n  puts \"Listening...\"\n}\n</code></pre>\n\n<p>The above mini server allows me to set arbitrary delays for JavaScript files (both server and client) and arbitrary CSS delays. For example, <code>http://10.0.0.50:8081/test.css?delay=500</code> gives me a 500&nbsp;ms delay transferring the CSS. </p>\n\n<p>I use the following page to test.</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n      &lt;title&gt;test&lt;/title&gt;\n      &lt;script type='text/javascript'&gt;\n          var startTime = new Date();\n      &lt;/script&gt;\n      &lt;link href=\"http://10.0.0.50:8081/test.css?delay=500\" type=\"text/css\" rel=\"stylesheet\"&gt;\n      &lt;script type=\"text/javascript\" src=\"http://10.0.0.50:8081/test2.js?delay=400&amp;amp;jsdelay=1000\"&gt;&lt;/script&gt; \n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;p&gt;\n      Elapsed time is: \n      &lt;script type='text/javascript'&gt;\n        document.write(new Date() - startTime);\n      &lt;/script&gt;\n    &lt;/p&gt;    \n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>When I include the CSS first, the page takes 1.5&nbsp;seconds to render: </p>\n\n<p><img src=\"http://i.stack.imgur.com/ZDgrs.png\" alt=\"CSS first\"></p>\n\n<p>When I include the JavaScript first, the page takes 1.4&nbsp;seconds to render: </p>\n\n<p><img src=\"http://i.stack.imgur.com/5o5SG.png\" alt=\"JavaScript first\"></p>\n\n<p>I get similar results in Chrome, Firefox and Internet&nbsp;Explorer. In Opera however, the ordering simply does not matter.</p>\n\n<p>What appears to be happening is that the JavaScript interpreter refuses to start until all the CSS is downloaded. So, it seems that having JavaScript includes first is more efficient as the JavaScript thread gets more run time. </p>\n\n<p>Am I missing something, is the recommendation to place CSS includes prior to JavaScript includes not correct? </p>\n\n<p><sub>It is clear that we could add async or use setTimeout to free up the render thread or put the JavaScript code in the footer, or use a JavaScript loader. The point here is about ordering of essential JavaScript bits and CSS bits in the head.</sub></p>\n", "title": "Is the recommendation to include CSS before JavaScript invalid?", "tags": ["javascript", "css", "performance"], "answers": [{"body": "<p><em>Personally,</em> I would not place too much emphasis on such \"folk wisdom.\"  What may have been true in the past might well not be true now.  I would assume that all of the operations relating to a web-page's interpretation and rendering are fully asynchronous (\"fetching\" something and \"acting upon it\" are two entirely different things that might be being handled by different threads, <em>etc.</em>), and in any case entirely beyond your control or your concern.</p>\n\n<p>I'd put CSS references in the \"head\" portion of the document, along with any references to external scripts.  (Some scripts may demand to be placed in the body, and if so, oblige them.)</p>\n\n<p>Beyond that ... if you observe that \"this seems to be faster/slower than that, on this/that browser,\" treat this observation as an interesting but irrelevant <em>curiosity</em> and don't let it influence your design decisions.  Too many things change too fast.  <em>(Anyone want to lay any bets on how many <strong>minutes</strong> it will be before the Firefox team comes out with yet another interim-release of their product?  Yup, me neither.)</em></p>\n", "title": "Is the recommendation to include CSS before JavaScript invalid?", "answer_id": 9271556, "question_id": 9271276, "tags": ["javascript", "css", "performance"]}, {"body": "<p>Were your tests performed on your personal computer, or on a web server? It is a blank page, or is it a complex online system with images, databases, etc.? Are your scripts performing a simple hover event action, or are they a core component to how your website renders and interacts with the user? There are several things to consider here, and the relevance of these recommendations almost always become rules when you venture into high-caliber web development.</p>\n\n<p><strong>The purpose of the \"put stylesheets at the top and scripts at the bottom\" rule is that, in general, it's the best way to achieve optimal <em>progressive rendering</em>,</strong> which is critical to the user experience.</p>\n\n<p>All else aside: assuming your test is valid, and you really are producing results contrary to the popular rules, it'd come as no surprise, really. Every website (and everything it takes to make the whole thing appear on a user's screen) is different and the Internet is constantly evolving. </p>\n", "title": "Is the recommendation to include CSS before JavaScript invalid?", "answer_id": 9271660, "question_id": 9271276, "tags": ["javascript", "css", "performance"]}, {"body": "<p>There are two main reasons to put CSS before JavaScript.</p>\n\n<ol>\n<li><p>Old browsers (Internet&nbsp;Explorer 6-7, Firefox 2, etc.) would block all subsequent downloads when they started downloading a script. So if you have <code>a.js</code> followed by <code>b.css</code> they get downloaded sequentially: first a then b. If you have <code>b.css</code> followed by <code>a.js</code> they get downloaded in parallel so the page loads more quickly.</p></li>\n<li><p>Nothing is rendered until all stylesheets are downloaded - this is true in all browsers. Scripts are different - they block rendering of all DOM elements that are <em>below the script tag</em> in the page. If you put your scripts in the HEAD then it means the entire page is blocked from rendering until all stylesheets and all scripts are downloaded. While it makes sense to block all rendering for stylesheets (so you get the correct styling the first time and avoid the flash of unstyled content FOUC), it doesn't make sense to block rendering of the entire page for scripts. Often scripts don't affect any DOM elements or just a portion of DOM elements. <strong>It's best to load scripts as low in the page as possible, or even better load them asynchronously.</strong></p></li>\n</ol>\n\n<p>It's fun to create examples with <a href=\"http://cuzillion.com/\">Cuzillion</a>. For example, <a href=\"http://stevesouders.com/cuzillion/?c0=hj1hfff2_0_f\">this page</a> has a script in the HEAD so the entire page is blank until it's done downloading. However, if we move the script to the end of the BODY block the page header renders since those DOM elements occur above the SCRIPT tag, as you can see on <a href=\"http://stevesouders.com/cuzillion/?c0=bj1hfff2_0_f\">this page</a>.</p>\n", "title": "Is the recommendation to include CSS before JavaScript invalid?", "answer_id": 9272629, "question_id": 9271276, "tags": ["javascript", "css", "performance"]}, {"body": "<p>This is a very interesting question.  I've always put my CSS <code>&lt;link href=\"...\"&gt;</code>s before my JS <code>&lt;script src=\"...\"&gt;</code>s because \"I read one time that it's better.\"  So, you're right; it's high time we do some actual research!</p>\n\n<p>I set up my own test harness in Node (code below).  Basically, I:</p>\n\n<ul>\n<li>Made sure there was no HTTP caching so the browser would have to do a full download each time a page is loaded.</li>\n<li>To simulate reality, I included jQuery and the <a href=\"http://html5boilerplate.com/\">H5BP</a> CSS (so there's a decent amount of script/CSS to parse)</li>\n<li>Set up two pages - one with CSS before script, one with CSS after script.</li>\n<li>Recorded how long it took for the external script in the <strong><code>&lt;head&gt;</code></strong> to execute</li>\n<li>Recorded how long it took for the inline script in the <strong><code>&lt;body&gt;</code></strong> to execute, which is analogous to <code>DOMReady</code>.</li>\n<li>Delayed sending CSS and/or script to the browser by 500ms.</li>\n<li>Ran the test 20 times in the 3 major browsers.</li>\n</ul>\n\n<h1>Results</h1>\n\n<p>First, with the CSS file delayed by 500ms:</p>\n\n<pre><code>     Browser: Chrome 18    | IE 9         | Firefox 9\n         CSS: first  last  | first  last  | first last\n=======================================================\nHeader Exec |              |              |\nAverage     | 583ms  36ms  | 559ms  42ms  | 565ms 49ms\nSt Dev      | 15ms   12ms  | 9ms    7ms   | 13ms  6ms\n------------|--------------|--------------|------------\nBody Exec   |              |              |\nAverage     | 584ms  521ms | 559ms  513ms | 565ms 519ms\nSt Dev      | 15ms   9ms   | 9ms    5ms   | 13ms  7ms\n</code></pre>\n\n<p>Next, I set jQuery to delay by 500ms instead of the CSS:</p>\n\n<pre><code>     Browser: Chrome 18    | IE 9         | Firefox 9\n         CSS: first  last  | first  last  | first last\n=======================================================\nHeader Exec |              |              |\nAverage     | 597ms  556ms | 562ms  559ms | 564ms 564ms\nSt Dev      | 14ms   12ms  | 11ms   7ms   | 8ms   8ms\n------------|--------------|--------------|------------\nBody Exec   |              |              |\nAverage     | 598ms  557ms | 563ms  560ms | 564ms 565ms\nSt Dev      | 14ms   12ms  | 10ms   7ms   | 8ms   8ms\n</code></pre>\n\n<p>Finally, I set <strong>both</strong> jQuery and the CSS to delay by 500ms:</p>\n\n<pre><code>     Browser: Chrome 18    | IE 9         | Firefox 9\n         CSS: first  last  | first  last  | first last\n=======================================================\nHeader Exec |              |              |\nAverage     | 620ms  560ms | 577ms  577ms | 571ms 567ms\nSt Dev      | 16ms   11ms  | 19ms   9ms   | 9ms   10ms\n------------|--------------|--------------|------------\nBody Exec   |              |              |\nAverage     | 623ms  561ms | 578ms  580ms | 571ms 568ms\nSt Dev      | 18ms   11ms  | 19ms   9ms   | 9ms   10ms\n</code></pre>\n\n<h1>Conclusions</h1>\n\n<p>First, it's important to note that I'm operating under the assumption that you have scripts located in the <code>&lt;head&gt;</code> of your document (as opposed to the end of the <code>&lt;body&gt;</code>).  There are various arguments regarding why you might link to your scripts in the <code>&lt;head&gt;</code> versus the end of the document, but that's outside the scope of this answer.  This is strictly about whether <code>&lt;script&gt;</code>s should go before <code>&lt;link&gt;</code>s in the <code>&lt;head&gt;</code>.</p>\n\n<p><strong>In modern DESKTOP browsers,</strong> it looks like linking to CSS first <strong>never</strong> provides a performance gain.  Putting CSS after script gets you a trivial amount of gain when both CSS and script are delayed, but gives you large gains when CSS is delayed.  (Shown by the <code>last</code> columns in the first set of results.)</p>\n\n<p>Given that linking to CSS last does not seem to hurt performance but <em>can</em> provide gains under certain circumstances, <strong>you should link to external stylesheets <em>after</em> you link to external scripts <em>only on desktop browsers</em></strong> if the performance of old browsers is not a concern.  <strong>Read on for the mobile situation.</strong></p>\n\n<h1>Why?</h1>\n\n<p>Historically, when a browser encountered a <code>&lt;script&gt;</code> tag pointing to an external resource, the browser would <strong>stop</strong> parsing the HTML, retrieve the script, execute it, then continue parsing the HTML.  In contrast, if the browser encountered a <code>&lt;link&gt;</code> for an external stylesheet, it would <em>continue</em> parsing the HTML while it fetched the CSS file (in parallel).</p>\n\n<p>Hence, the widely-repeated advice to put stylesheets first &ndash; they would download first, and the first script to download could be loaded in parallel.</p>\n\n<p>However, modern browsers (including all of the browsers I tested with above) have implemented <a href=\"https://www.google.com/search?q=speculative+parsing\"><em>speculative parsing</em></a>, where the browser \"looks ahead\" in the HTML and begins downloading resources <em>before</em> scripts download and execute.</p>\n\n<p>In old browsers without speculative parsing, putting scripts first will affect performance since they will not download in parallel.</p>\n\n<h2>Browser Support</h2>\n\n<p>Speculative parsing was first implemented in: (along with the percentage of worldwide desktop browser users using this version or greater as of Jan 2012)</p>\n\n<ul>\n<li>Chrome 1 (WebKit 525) (100%)</li>\n<li>IE 8 (75%)</li>\n<li>Firefox 3.5 (96%)</li>\n<li>Safari 4 (99%)</li>\n<li>Opera 11.60 (85%)</li>\n</ul>\n\n<p>In total, roughly 85% of desktop browsers in use today support speculative loading.  Putting scripts before CSS will have a performance penalty on 15% of users <em>globally</em>; YMMV based on your site's specific audience.  (And remember that number is shrinking.)</p>\n\n<p>On mobile browsers, it's a little harder to get definitive numbers simply due to how heterogeneous the mobile browser and OS landscape is.  Since speculative rendering was implemented in WebKit 525 (released Mar 2008), and just about every worthwhile mobile browser is based on WebKit, we can conclude that \"most\" mobile browsers <em>should</em> support it.  According to <a href=\"http://www.quirksmode.org/webkit.html\">quirksmode</a>, iOS 2.2/Android 1.0 use WebKit 525.  I have no idea what Windows Phone looks like.</p>\n\n<p><strong>However,</strong> I ran the test on my Android 4 device, and while I saw numbers similar to the desktop results, I hooked it up to the fantastic new <a href=\"http://code.google.com/chrome/mobile/docs/debugging.html\">remote debugger</a> in Chrome for Android, and Network tab showed that the browser was actually waiting to download the CSS until the JavaScripts completely loaded &ndash; in other words, <strong>even the newest version of WebKit for Android does not appear to support speculative parsing.</strong>  I suspect it might be turned off due to the CPU, memory, and/or network constraints inherent to mobile devices.</p>\n\n<h1>Code</h1>\n\n<p>Forgive the sloppiness &ndash; this was Q&amp;D.</p>\n\n<p>app.js</p>\n\n<pre><code>var express = require('express')\n, app = express.createServer()\n, fs = require('fs');\n\napp.listen(90);\n\nvar file={};\nfs.readdirSync('.').forEach(function(f) {\n    console.log(f)\n    file[f] = fs.readFileSync(f);\n    if (f != 'jquery.js' &amp;&amp; f != 'style.css') app.get('/' + f, function(req,res) {\n        res.contentType(f);\n        res.send(file[f]);\n    });\n});\n\n\napp.get('/jquery.js', function(req,res) {\n    setTimeout(function() {\n        res.contentType('text/javascript');\n        res.send(file['jquery.js']);\n    }, 500);\n});\n\napp.get('/style.css', function(req,res) {\n    setTimeout(function() {\n        res.contentType('text/css');\n        res.send(file['style.css']);\n    }, 500);\n});\n\n\nvar headresults={\n    css: [],\n    js: []\n}, bodyresults={\n    css: [],\n    js: []\n}\napp.post('/result/:type/:time/:exec', function(req,res) {\n    headresults[req.params.type].push(parseInt(req.params.time, 10));\n    bodyresults[req.params.type].push(parseInt(req.params.exec, 10));\n    res.end();\n});\n\napp.get('/result/:type', function(req,res) {\n    var o = '';\n    headresults[req.params.type].forEach(function(i) {\n        o+='\\n' + i;\n    });\n    o+='\\n';\n    bodyresults[req.params.type].forEach(function(i) {\n        o+='\\n' + i;\n    });\n    res.send(o);\n});\n</code></pre>\n\n<p>css.html</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;CSS first&lt;/title&gt;\n        &lt;script&gt;var start = Date.now();&lt;/script&gt;\n        &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n        &lt;script src=\"jquery.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"test.js\"&gt;&lt;/script&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;script&gt;document.write(jsload - start);bodyexec=Date.now()&lt;/script&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>js.html</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;CSS first&lt;/title&gt;\n        &lt;script&gt;var start = Date.now();&lt;/script&gt;\n        &lt;script src=\"jquery.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"test.js\"&gt;&lt;/script&gt;\n        &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;script&gt;document.write(jsload - start);bodyexec=Date.now()&lt;/script&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>test.js</p>\n\n<pre><code>var jsload = Date.now();\n\n\n$(function() {\n    $.post('/result' + location.pathname.replace('.html','') + '/' + (jsload - start) + '/' + (bodyexec - start));\n});\n</code></pre>\n\n<p>jquery.js was <a href=\"http://code.jquery.com/jquery-1.7.1.min.js\">jquery-1.7.1.min.js</a></p>\n", "title": "Is the recommendation to include CSS before JavaScript invalid?", "answer_id": 9272730, "question_id": 9271276, "tags": ["javascript", "css", "performance"]}, {"body": "<p>I would not emphasize too much on the results that you have got, I believe that it is subjective, but I have a reason to explain you that it is better to put in CSS before js.</p>\n\n<p>During the loading of your website, there are two scenarios that you would see:</p>\n\n<p><strong>CASE 1:    white screen > unstyled website > styled website > interaction > styled and interactive website<br><br>\nCASE 2:    white screen > unstyled website > interaction > styled website > styled and interactive website</strong>\n<br><br>\nI honestly can't imagine anyone choosing Case 2. This would mean that visitors using slow internet connections will be faced with an unstyled website, that allows them to interact with it using Javascript (since that is already loaded). Furthermore, the amount of time spend looking at an unstyled website would be maximized this way. Why would anyone want that?</p>\n\n<p>It also works better as <a href=\"http://api.jquery.com/ready/\">jQuery states</a> </p>\n\n<blockquote>\n  <p>\"When using scripts that rely on the value of CSS style properties,\n  it's important to reference external stylesheets or embed style\n  elements before referencing the scripts\".</p>\n</blockquote>\n\n<p>When the files are loaded in the wrong order (first JS, then CSS), any Javascript code relying on properties set in CSS files (for example the width or height of a div) won't be loaded correctly. It seems that with the wrong loading order, the correct properties are 'sometimes' known to Javascript (perhaps this is caused by a race condition?). This effect seems bigger or smaller depending on the browser used.</p>\n", "title": "Is the recommendation to include CSS before JavaScript invalid?", "answer_id": 9273445, "question_id": 9271276, "tags": ["javascript", "css", "performance"]}, {"body": "<p>I include CSS files before Javascript for a different reason.</p>\n\n<p>If my Javascript needs to do dynamic sizing of some page element (for those corner cases where CSS is really a main in the back) then loading the CSS after the JS is russing can lead to race conditions, where the element is resized before CSS styles are applied and thus looks weird when the styles finally kick in. If I load the CSS beforehand I can guarantee that things run in the intended order and that the final layout is what I want it to be.</p>\n", "title": "Is the recommendation to include CSS before JavaScript invalid?", "answer_id": 9277745, "question_id": 9271276, "tags": ["javascript", "css", "performance"]}, {"body": "<p>We have to keep in mind that new browsers have worked on their Javascript engines, their parsers and so on, optimizing common code and markup problems in a way that problems experienced in ancient browsers such as &lt;=IE8 are no longer relevant, not only with regards to markup but also to use of JavaScript variables, element selectors etc. \nI can see in the not so distant future a situation where technology has reached a point where performance is not really an issue anymore.</p>\n", "title": "Is the recommendation to include CSS before JavaScript invalid?", "answer_id": 9278623, "question_id": 9271276, "tags": ["javascript", "css", "performance"]}, {"body": "<p>I'm not exactly sure how your testing 'render' time as your using java script. However consider this</p>\n\n<p>One page on your site is 50k which is not unreasonable. The user is on the east coast while your server is on the west. MTU is definitely not 10k so there will be a few trips back and forth. It may take 1/2 a second to receive your page and stylesheets. Typically (for me) javascript (via jquery plugin and such) are much more than CSS. Theres also what happens when your internet connection chokes up midway on the page but lets ignore that (it happens to me occasionally and i believe the css renders but i am not 100% sure).</p>\n\n<p>Since css is in head there may be additional connections to get it which means it potentially can finish before the page does. Anyways during the type the remainder of the page takes and the javascript files (which is many more bytes) the page is unstyled which makes the site/connection appear slow.</p>\n\n<p>EVEN IF the JS interpreter refuses to start until the CSS is done the time taken to download the javascript code especially when far from the server is cutting into css time which will make the site look not pretty.</p>\n\n<p>Its a small optimization but thats the reason for it.</p>\n", "title": "Is the recommendation to include CSS before JavaScript invalid?", "answer_id": 9285218, "question_id": 9271276, "tags": ["javascript", "css", "performance"]}, {"body": "<p>Steve Souders has already given a definitive answer but...</p>\n\n<p>I wonder whether there's an issue with both Sam's original test and Josh's repeat of it.</p>\n\n<p>Both tests appear to have been performed on low latency connections where setting up the TCP connection will have a trivial cost.</p>\n\n<p>How this affects the result of the test I'm not sure and I'd want to look at the waterfalls for the tests over a 'normal' latency connection but...</p>\n\n<p>The first file downloaded <em>should</em> get the connection used for the html page, and the second file downloaded will get the new connection. (Flushing the  early alters that dynamic, but it's not being done here)</p>\n\n<p>In newer browsers the second TCP connection is opened speculatively so the connection overhead is reduced / goes away, in older browsers this isn't true and the second connection will have the overhead of being opened.</p>\n\n<p>Quite how/if this affects the outcome of the tests I'm not sure.</p>\n", "title": "Is the recommendation to include CSS before JavaScript invalid?", "answer_id": 9674581, "question_id": 9271276, "tags": ["javascript", "css", "performance"]}, {"body": "<p>It is suggested to include CSS file before JavaScript for one (or perhaps another) good reason:</p>\n\n<p>JavaScript blocks the browser from doing just about anything until it is downloaded, parsed and executed. Why? Because the JavaScript file might contain instructions such as <code>document.write(\"&lt;!--\")</code> which, when executed, change the markup of the page.</p>\n\n<p>If you put the CSS files before JavaScript files in your HTML source, things get better. Browser can load the two files (CSS and JavaScript) in parallel. Of course it would block while it attempts to download, parse and execute the JavaScript file but this period will then  be utilized to download other files in parallel.</p>\n", "title": "Is the recommendation to include CSS before JavaScript invalid?", "answer_id": 10350462, "question_id": 9271276, "tags": ["javascript", "css", "performance"]}, {"body": "<p>Is the recommendation to include CSS before JavaScript invalid?</p>\n\n<p>Not if you treat it as simply a recommendation. But if your treat it as a hard and fast rule?, yes, it is invalid.</p>\n\n<p>From <a href=\"https://developer.mozilla.org/en-US/docs/Web/Reference/Events/DOMContentLoaded\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/Reference/Events/DOMContentLoaded</a></p>\n\n<blockquote>\n  <p>Stylesheet loads block script execution, so if you have a <code>&lt;script&gt;</code>\n  after a <code>&lt;link rel=\"stylesheet\" ...&gt;</code> the page will not finish parsing\n  - and DOMContentLoaded will not fire - until the stylesheet is loaded.</p>\n</blockquote>\n\n<p>It appears that you need to know what each script relies on and make sure that execution of the script is delayed until after the right completion event. If the script relies only on the DOM, it can resume in ondomready/domcontentloaded, if it relies on images to be loaded or stylesheets to be applied, then if I read the above reference correctly, that code must be deferred until the onload event.</p>\n\n<p>I don't think that one sock size fits all, even though that is the way they are sold and I know that one shoe size does not fit all. I don't think that there is a definitive answer to which to load first, styles or script. It is more a case by case decision of what must be loaded in what order and what can be deferred until later as not being on the \"critical path\".</p>\n\n<p>To speak to the observer that commented that it is better to delay the users ability to interact until the sheet is pretty. There are many of you out there and you annoy your counterparts that feel the opposite. They came to a site to accomplish a purpose and delays to their ability to interact with a site while waiting for things that don't matter to finish loading are very frustrating.  I am not saying that you are wrong, only that you should be aware that there is another faction that exists that does not share your priority.</p>\n\n<p>This question particularly applies to all of the ads being placed on web sites. I would love it if site authors rendered just placeholder divs for the ad content and made sure that their site was loaded and interactive before injecting the ads in an onload event.  Even then I would like to see the ads loaded serially instead of all at once because they impact my ability to even scroll the site content while the bloated ads are loading. But that is just one persons point of view.</p>\n\n<ul>\n<li>Know your users and what they value.</li>\n<li>Know your users and what browsing environment they use.</li>\n<li>Know what each file does, and what its pre-requisites are. Making everything work will take precedence over both speed and pretty.</li>\n<li>Use tools that show you the network time line when developing.</li>\n<li>Test in each of the environments that your users use. It may be needed to dynamically (server side, when creating the page) alter the order of loading based on the users environment.</li>\n<li>When in doubt, alter the order and measure again.</li>\n<li>It is possible that intermixing styles and scripts in the load order will be optimal; not all of one then all of the other.</li>\n<li>Experiment not just what order to load the files but where. Head? In Body? After Body? DOM Ready/Loaded? Loaded?</li>\n<li>Consider async and defer options when appropriate to reduce the net delay the user will experience before being able to interact with the page. Test to determine if they help or hurt.</li>\n<li>There will always be trade offs to consider when evaluating the optimal load order. Pretty vs. Responsive being just one.</li>\n</ul>\n", "title": "Is the recommendation to include CSS before JavaScript invalid?", "answer_id": 16753397, "question_id": 9271276, "tags": ["javascript", "css", "performance"]}, {"body": "<p>I think this wont be true for all the cases. Because css will download parallel but js cant. Consider for the same case,</p>\n\n<p>Instead of having single css, take 2 or 3 css files and try it out these ways,</p>\n\n<p>1) css..css..js\n2) css..js..css\n3) js..css..css</p>\n\n<p>I'm sure css..css..js will give better result than all others. </p>\n", "title": "Is the recommendation to include CSS before JavaScript invalid?", "answer_id": 18398346, "question_id": 9271276, "tags": ["javascript", "css", "performance"]}, {"body": "<p>Here is a <em>SUMMARY</em> of all the major answers above (or maybe below later :)</p>\n\n<p>For modern browsers, put css wherever you like it. They would analyze your html file (which they call <em>speculative parsing</em>) and start downloading css in parallel with html parsing. </p>\n\n<p>For old browsers keep putting css on top (if you don't want to show a naked but interactive page first).</p>\n\n<p>For all browsers, put javascript as farther down on the page as possible, since it will halt parsing of your html. Preferably, download it asynchronously (i.e., ajax call)</p>\n\n<p>There are also, some experimental results for a particular case which claims putting javascript first (as opposed to traditional wisdom of putting CSS first) gives better performance but there is no logical reasoning given for it, and lacks validation regarding widespread applicability, so you can ignore it for now. </p>\n\n<p>So, to answer the question: Yes. The recommendation to include the CSS before JS is invalid for the modern browsers. Put CSS wherever you like, and put JS towards the end, as possible. </p>\n", "title": "Is the recommendation to include CSS before JavaScript invalid?", "answer_id": 36756514, "question_id": 9271276, "tags": ["javascript", "css", "performance"]}], "link": "http://stackoverflow.com/questions/9271276/is-the-recommendation-to-include-css-before-javascript-invalid", "question_id": 9271276}, {"body": "<p>We're using a Ruby web-app with <a href=\"http://redis.io/\">Redis</a> server for caching. Is there a point to test <a href=\"http://memcached.org/\">Memcached</a> instead?</p>\n\n<p>What will give us better performance? Any pros or cons between Redis and Memcached?</p>\n\n<p>Points to consider:</p>\n\n<ul>\n<li>Read/write speed.</li>\n<li>Memory usage.</li>\n<li>Disk I/O dumping.</li>\n<li>Scaling.</li>\n</ul>\n", "title": "Memcached vs. Redis?", "tags": ["caching", "web-applications", "memcached", "redis"], "answers": [{"body": "<p>Memcached is good at being a simple key/value store and is good at doing key => STRING. This makes it really good for session storage.</p>\n\n<p>Redis is good at doing key => SOME_OBJECT.</p>\n\n<p>It really depends on what you are going to be putting in there.  My understanding is that in terms of performance they are pretty even.</p>\n\n<p>Also good luck finding any objective benchmarks, if you do find some kindly send them my way.</p>\n", "title": "Memcached vs. Redis?", "answer_id": 10559763, "question_id": 10558465, "tags": ["caching", "web-applications", "memcached", "redis"]}, {"body": "<p>If you don't mind a crass writing style, <a href=\"http://systoilet.wordpress.com/2010/08/09/redis-vs-memcached/\">Redis vs Memcached</a> on the Systoilet blog is worth a read from a usability standpoint, but be sure to read the back &amp; forth in the comments before drawing any conclusions on performance; there are some methodological problems (single-threaded busy-loop tests), and Redis has made some improvements since the article was written as well. </p>\n\n<p>And no benchmark link is complete without confusing things a bit, so also check out some conflicting benchmarks at <a href=\"http://dormando.livejournal.com/525147.html\">Dormondo's LiveJournal</a> and <a href=\"http://antirez.com/post/redis-memcached-benchmark.html\">the Antirez Weblog</a>. </p>\n\n<p><em>Edit</em> -- as Antirez points out, the Systoilet analysis is rather ill-conceived. Even beyond the single-threading shortfall, much of the performance disparity in those benchmarks can be attributed to the client libraries rather than server throughput. The benchmarks at <a href=\"http://antirez.com/post/redis-memcached-benchmark.html\">the Antirez Weblog</a> do indeed present a much more apples-to-apples (with the same mouth) comparison.</p>\n", "title": "Memcached vs. Redis?", "answer_id": 11059017, "question_id": 10558465, "tags": ["caching", "web-applications", "memcached", "redis"]}, {"body": "<p><strong>TL;DR</strong>: For anything new, use Redis.</p>\n\n<p><strong>Updated 4/1/2015</strong></p>\n\n<p>Today marks the day that memcached no longer has any significant advantages over redis, while redis continues to have many distinct advantages over memcached. <a href=\"https://groups.google.com/forum/#!msg/redis-db/dO0bFyD_THQ/Uoo2GjIx6qgJ\">Today marks the release of redis 3.0, with support for clustering</a>. Previously when looking at memcached vs redis you might have been inclined to choose memcached due to the 3rd party clustering tools available. Now redis offers clustering, and unlike memcached support is provided out-of-the-box. Being built-in provides a more robust solution that is easier to administrate. Combined with other high availability tools in-the-box like replication and Sentinel (monitoring), redis clearly has the more compelling scaling story today.</p>\n\n<p>As of today every major feature and strength memcached offers are now a subset of redis' features and strengths. Any use case you might use memcached for redis can solve equally well. They are both lightning fast as volatile caches. While that's <em>all</em> that memcached is its only the tip of the redis iceberg.</p>\n\n<p>Memcached is a volatile in-memory key/value store. Redis can act like one (and do that job as well as memcached), but it is a <strong>data structure server</strong>.</p>\n\n<h2>The Redis Superset</h2>\n\n<p>Here are a few of the features that redis offers which memcached doesn't and allows redis to be used as a \"real\" data store instead of just a cache.</p>\n\n<ul>\n<li><strong>Powerful data types and powerful commands to leverage them. Hashes, Sorted Sets, Lists, and more.</strong></li>\n<li>Persistence to disk, by default.</li>\n<li>Transactions with optimistic locking (WATCH/MULTI/EXEC)</li>\n<li>Pub/sub. Extremely fast.</li>\n<li>Values up to 512MB in size (memcached limited to 1MB per key)</li>\n<li>Lua scripting (as of 2.6)</li>\n<li>Built in clustering (as of <a href=\"http://antirez.com/news/79\">3.0</a>)</li>\n<li>Extremely fast at everything. Benchmarks are often conflicting, but this much is clear: when used like memcached Redis falls somewhere between nearly as fast or maybe even a little faster. Like memcached it is often bound by available network or memory bandwidth instead of CPU or other bottlenecks and will rarely be the culprit when your app is slowing down.</li>\n</ul>\n\n<p>The powerful data types are particularly important. They allow redis to provide a fantastic shared queue (<a href=\"http://redis.io/commands#list\">lists</a>), a great messaging solution (<a href=\"http://redis.io/commands#pubsub\">pub/sub</a>), a good place for storing sessions (<a href=\"http://redis.io/commands#hash\">hashes</a>), and a compelling place for high score tracking (<a href=\"http://redis.io/commands#sorted_set\">sorted sets</a>). These are just a few examples that scratch the surface.</p>\n\n<h2>Conclusion</h2>\n\n<p>To answer your original question: The performance and memory usage of Redis compared to memcached should be relatively similar. Close enough that for most uses any performance difference in either direction is academic as neither is likely to be the bottleneck.</p>\n\n<p>Unless you already have a large investment in memcached, going forward redis is the obvious solution. For solutions both tools would solve, go with the one that offers more flexibility for new use cases and also provides better out-of-the-box availability, scalability, and administration: redis.</p>\n\n<p>Not only is redis the better option for places you might use memcached, it enables whole new types of use cases and usage patterns.</p>\n\n<p>Memcached is a fine piece of software that is stable and hardened. If you already have a large investment in memcached then you may want to stick with it. There are many use cases where redis is as-good-as memcached but isn't better. Evaluate the benefits of redis (if any) and compare that to the cost of switching. Make your own determination if moving to redis is worth your time.</p>\n", "title": "Memcached vs. Redis?", "answer_id": 11257333, "question_id": 10558465, "tags": ["caching", "web-applications", "memcached", "redis"]}, {"body": "<p>Another bonus is that it can be very clear how memcache is going to behave in a caching scenario, while redis is generally used as a persistent datastore, though it can be configured to behave just like memcached aka evicting Least Recently Used items when it reaches max capacity.   </p>\n\n<p>Some apps I've worked on use both just to make it clear how we intend the data to behave - stuff in memcache, we write code to handle the cases where it isn't there - stuff in redis, we rely on it being there.</p>\n\n<p>Other than that Redis is generally regarded as superior for most use cases being more feature-rich and thus flexible.</p>\n", "title": "Memcached vs. Redis?", "answer_id": 11329349, "question_id": 10558465, "tags": ["caching", "web-applications", "memcached", "redis"]}, {"body": "<p>Use Redis if </p>\n\n<ol>\n<li><p>You require selectively deleting/expiring items in the cache. (You need this)</p></li>\n<li><p>You require the ability to query keys of a particular type. eq. 'blog1:posts:*', 'blog2:categories:xyz:posts:*'. oh yeah! this is very important. Use this to invalidate certain types of cached items selectively. You can also use this to invalidate fragment cache, page cache, only AR objects of a given type, etc.</p></li>\n<li><p>Persistence (You will need this too, unless you are okay with your cache having to warm up after every restart. Very essential for objects that seldom change)</p></li>\n</ol>\n\n<p>Use memcached if</p>\n\n<ol>\n<li>Memcached gives you headached! </li>\n<li>umm... clustering? meh. if you gonna go that far, use Varnish and Redis for caching fragments and AR Objects.</li>\n</ol>\n\n<p>From my experience I've had much better stability with Redis than Memcached</p>\n", "title": "Memcached vs. Redis?", "answer_id": 11338583, "question_id": 10558465, "tags": ["caching", "web-applications", "memcached", "redis"]}, {"body": "<p>We thought of Redis as a load-takeoff for our project at work. We thought that by using a module in nginx called HttpRedis2Module or something similar we would have awesome speed but when testing with AB-test we're proven wrong.</p>\n\n<p>Maybe the module was bad or our layout but it was a very simple task and it was even faster to take data with php and then stuff it into MongoDB. We're using APC as caching-system and with that php and MongoDB. It was much much faster then nginx Redis module.</p>\n\n<p>My tip is to test it yourself, doing it will show you the results for your environment. We decided that using Redis was unnecessary in our project as it would not make any sense.</p>\n", "title": "Memcached vs. Redis?", "answer_id": 11343709, "question_id": 10558465, "tags": ["caching", "web-applications", "memcached", "redis"]}, {"body": "<p>One major difference that hasn't been pointed out here is that Memcache has an upper memory limit at all times, while Redis does not by default (but can be configured to). If you would always like to store a key/value for certain amount of time (and never evict it because of low memory) you want to go with Redis. Of course, you also risk the issue of running out of memory...</p>\n", "title": "Memcached vs. Redis?", "answer_id": 15154716, "question_id": 10558465, "tags": ["caching", "web-applications", "memcached", "redis"]}, {"body": "<p>Memcached is multithreaded and fast.</p>\n\n<p>Redis has lots of features and is very fast, but completely limited to one core as it is based on an event loop.</p>\n\n<p>We use both. Memcached is used for caching objects, primarily reducing read load on the databases. Redis is used for things like sorted sets which are handy for rolling up time-series data.</p>\n", "title": "Memcached vs. Redis?", "answer_id": 16363820, "question_id": 10558465, "tags": ["caching", "web-applications", "memcached", "redis"]}, {"body": "<p>Have a look at <a href=\"https://groups.google.com/forum/?fromgroups#!topic/memcached/n8zLJRyYNY4\" rel=\"nofollow\">https://groups.google.com/forum/?fromgroups#!topic/memcached/n8zLJRyYNY4</a> for optimizing multi-get queries with memcached which is specific to social networking system. This is somewhat similar to \"executing lua script on Redis server\" though less flexible.</p>\n", "title": "Memcached vs. Redis?", "answer_id": 17063462, "question_id": 10558465, "tags": ["caching", "web-applications", "memcached", "redis"]}, {"body": "<p><strong>This is too long to be posted as a comment to already accepted answer, so I put it as a separate answer</strong></p>\n\n<p>One thing also to consider is whether you expect to have a hard upper memory limit on your cache instance.</p>\n\n<p>Since redis is an nosql database with tons of features and caching is only one option it can be used for, it allocates memory as it needs it \u2014\u00a0the more objects you put in it, the more memory it uses. The <code>maxmemory</code> option does not strictly enforces upper memory limit usage. As you work with cache, keys are evicted and expired; chances are your keys are not all the same size, so internal memory fragmentation occurs.</p>\n\n<p>By default redis uses <a href=\"http://www.canonware.com/jemalloc/\">jemalloc</a> memory allocator, which tries its best to be both memory-compact and fast, but it is a general purpose memory allocator and it cannot keep up with lots of allocations and object purging occuring at a high rate. Because of this, on some load patterns redis process can apparently leak memory because of internal fragmentation. For example, if you have a server with 7 Gb RAM and you want to use redis as non-persistent LRU cache, you may find that redis process with <code>maxmemory</code> set to 5Gb over time would use more and more memory, eventually hitting total RAM limit until out-of-memory killer interferes.</p>\n\n<p>memcached is a better fit to scenario described above, as it manages its memory in a completely different way. memcached allocates one big chunk of memory \u2014\u00a0everything it will ever need\u00a0\u2014 and then manages this memory by itself, using its own implemented <a href=\"https://en.wikipedia.org/wiki/Slab_allocation\">slab allocator</a>. Moreover, memcached tries hard to keep internal fragmentation low, as it actually <a href=\"https://www.adayinthelifeof.nl/2011/02/06/memcache-internals/\">uses per-slab LRU algorithm</a>, when LRU evictions are done with object size considered.</p>\n\n<p>With that said, memcached still has a strong position in environments, where memory usage has to be enforced and/or be predictable. We've tried to use latest stable redis (2.8.19) as a drop-in non-persistent LRU-based memcached replacement in workload of 10-15k op/s, and it leaked memory A LOT; the same workload was crashing Amazon's ElastiCache redis instances in a day or so because of the same reasons.</p>\n", "title": "Memcached vs. Redis?", "answer_id": 28808386, "question_id": 10558465, "tags": ["caching", "web-applications", "memcached", "redis"]}, {"body": "<p>I'd say redis, as it's much faster than memcached, even though it runs on a single core of a machine, and memcached can be run in parallel, it'd take a lot of processing to hit redis's upper limit when configured correctly</p>\n", "title": "Memcached vs. Redis?", "answer_id": 29007438, "question_id": 10558465, "tags": ["caching", "web-applications", "memcached", "redis"]}, {"body": "<p>It would not be wrong, if we say that redis is combination of (cache + data structure) while memcached is just a cache.</p>\n", "title": "Memcached vs. Redis?", "answer_id": 30859661, "question_id": 10558465, "tags": ["caching", "web-applications", "memcached", "redis"]}, {"body": "<p>I got the opportunity to use both memcached and redis together in the caching proxy that i have worked on , let me share you where exactly i have used what and reason behind same....</p>\n\n<p>Redis ></p>\n\n<p>1) Used for indexing the cache content , over the cluster . I have more than billion keys in spread over redis clusters , redis response times is quite less and stable .</p>\n\n<p>2) Basically , its a key/value store , so where ever in you application you have something similar, one can use redis with bothering much.</p>\n\n<p>3) Redis persistency, failover and backup (AOF ) will make your job easier .</p>\n\n<p>Memcache ></p>\n\n<p>1) yes , an optimized memory that can be used as cache . I used it for storing cache content getting accessed very frequently (with 50 hits/second)with size less than 1 MB .</p>\n\n<p>2) I allocated only 2GB out of 16 GB for memcached that too when my single content size was >1MB  .</p>\n\n<p>3) As the content grows near the limits , occasionally i have observed higher response times in the stats(not the case with redis) .</p>\n\n<p>If you ask for overall experience Redis is much green as it is easy to configure, much flexible with stable robust features. </p>\n\n<p>Further , there is a benchmarking result available at this <a href=\"http://ruturaj.net/redis-memcached-tokyo-tyrant-and-mysql-comparision/\" rel=\"nofollow\">link</a> , below are few higlight from same,</p>\n\n<p><a href=\"http://i.stack.imgur.com/jJYki.jpg\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/jJYki.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"http://i.stack.imgur.com/RSRvZ.jpg\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/RSRvZ.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Hope this helps!!</p>\n", "title": "Memcached vs. Redis?", "answer_id": 33168070, "question_id": 10558465, "tags": ["caching", "web-applications", "memcached", "redis"]}, {"body": "<p>Test. Run some simple benchmarks. For a long while I considered myself an old school rhino since I used mostly memcached and considered Redis the new kid.</p>\n\n<p>With my current company Redis was used as the main cache. When I dug into some performance stats and simply started testing, Redis was, in terms of performance, comparable or minimally <strong>slower</strong> than MySQL.</p>\n\n<p>Memcached, though simplistic, blew Redis out of water <strong>totally</strong>. It scaled much better:</p>\n\n<ul>\n<li>for bigger values (required change in slab size, but worked)</li>\n<li>for multiple concurrent requests</li>\n</ul>\n\n<p>Also, memcached eviction policy is in my view, much better implemented, resulting in overall more stable average response time while handling more data than the cache can handle.</p>\n\n<p>Some benchmarking revealed that Redis, in our case, performs very poorly. This I believe has to do with many variables:</p>\n\n<ul>\n<li>type of hardware you run Redis on</li>\n<li>types of data you store</li>\n<li>amount of gets and sets</li>\n<li>how concurrent your app is</li>\n<li>do you need data structure storage</li>\n</ul>\n\n<p>Personally, I don't share the view Redis authors have on concurrency and multithreading.</p>\n", "title": "Memcached vs. Redis?", "answer_id": 33688286, "question_id": 10558465, "tags": ["caching", "web-applications", "memcached", "redis"]}, {"body": "<p>The biggest remaining reason is specialization.</p>\n\n<p>Redis can do a lot of different things and one side effect of that is developers may start using a lot of those different feature sets on the same instance. If you're using the LRU feature of Redis for a cache along side hard data storage that is NOT LRU it's entirely possible to run out of memory.</p>\n\n<p>If you're going to setup a dedicated Redis instance to be used ONLY as an LRU instance to avoid that particular scenario then there's not really any compelling reason to use Redis over Memcached.</p>\n\n<p>If you need a reliable \"never goes down\" LRU cache...Memcached will fit the bill since it's impossible for it to run out of memory by design and the specialize functionality prevents developers from trying to make it so something that could endanger that. Simple separation of concerns.</p>\n", "title": "Memcached vs. Redis?", "answer_id": 33836414, "question_id": 10558465, "tags": ["caching", "web-applications", "memcached", "redis"]}], "link": "http://stackoverflow.com/questions/10558465/memcached-vs-redis", "question_id": 10558465}, {"body": "<p>I'm a beginner RoR programmer who's planning to deploy my app using Heroku. Word from my other advisor friends says that Heroku is really easy, good to use. The only problem is that I still have no idea what Heroku does..</p>\n\n<p>I've looked at their <a href=\"http://www.heroku.com/how/command\">website</a> and in a nutshell, what Heroku does is help with scaling but... why does that even matter? How does Heroku help with:</p>\n\n<ol>\n<li><p>Speed - My research implied that deploying AWS on the US East Coast would be the fastest if i am targeting a US/Asia based audience</p></li>\n<li><p>Security - How secure are they?</p></li>\n<li><p>Scaling - How does it actually work?</p></li>\n<li><p>Cost efficiency - There's something like a dyno that makes it easy to scale.</p></li>\n<li><p>How do they fare against their competitors? For example, <a href=\"http://www.engineyard.com/\">Engine Yard</a> and <a href=\"http://www.bluebox.net/\">bluebox</a>?</p></li>\n</ol>\n\n<p>Please use layman English terms to explain... I'm a beginner programmer. Thank you.</p>\n", "title": "Why do people use Heroku when AWS is present? What&#39;s distinguishing about Heroku", "tags": ["ruby-on-rails", "heroku", "amazon-web-services"], "answers": [{"body": "<p>First things first, AWS and Heroku are different things. AWS offer Infrastructure as a Service (<a href=\"https://en.wikipedia.org/wiki/Cloud_computing#Infrastructure_as_a_service_.28IaaS.29\">IaaS</a>) whereas Heroku offer a Platform as a Service (<a href=\"https://en.wikipedia.org/wiki/Platform_as_a_service\">PaaS</a>).</p>\n\n<p>What's the difference? Very approximately, IaaS gives you components you need in order to build things on top of it; PaaS gives you an environment where you just push code and some basic configuration and get a running application. IaaS can give you more power and flexibility, at the cost of having to build and maintain more yourself.</p>\n\n<p>To get your code running on AWS and looking a bit like a Heroku deployment, you'll want some EC2 instances - you'll want a load balancer / caching layer installed on them (e.g. <a href=\"https://www.varnish-cache.org/\">Varnish</a>), you'll want instances running something like <a href=\"http://www.modrails.com/\">Passenger</a> and <a href=\"http://nginx.org/\">nginx</a> to serve your code, you'll want to deploy and configure a clustered database instance of something like <a href=\"http://www.postgresql.org/\">PostgreSQL</a>. You'll want a deployment system with something like <a href=\"https://github.com/capistrano/capistrano/wiki\">Capistrano</a>, and something doing log aggregation. </p>\n\n<p>That's not an insignificant amount of work to set up and maintain. With Heroku, the effort required to get to that sort of stage is maybe a few lines of application code and a <code>git push</code>. </p>\n\n<p>So you're this far, and you want to scale up. Great. You're using <a href=\"http://puppetlabs.com/\">Puppet</a> for your EC2 deployment, right? So now you configure your Capistrano files to spin up/down instances as needed; you re-jig your Puppet config so Varnish is aware of web-worker instances and will automatically pool between them. Or you <code>heroku scale web:+5</code>.</p>\n\n<p>Hopefully that gives you an idea of the comparison between the two. Now to address your specific points:</p>\n\n<h2>Speed</h2>\n\n<p>Currently Heroku only runs on AWS instances in <code>us-east</code> and <code>eu-west</code>. For you, this sounds like what you want anyway. For others, it's potentially more of a consideration.</p>\n\n<h2>Security</h2>\n\n<p>I've seen a lot of internally-maintained production servers that are way behind on security updates, or just generally poorly put together. With Heroku, you have someone else managing that sort of thing, which is either a blessing or a curse depending on how you look at it! </p>\n\n<p>When you deploy, you're effectively handing your code straight over to Heroku. This may be an issue for you. Their article on <a href=\"http://devcenter.heroku.com/articles/dyno-isolation\">Dyno Isolation</a> details their isolation technologies (it seems as though multiple dynos are run on individual EC2 instances). Several colleagues have expressed issues with these technologies and the strength of their isolation; I am alas not in a position of enough knowledge / experience to really comment, but my current Heroku deployments consider that \"good enough\". It may be an issue for you, I don't know.</p>\n\n<h2>Scaling</h2>\n\n<p>I touched on how one might implement this in my IaaS vs PaaS comparison above. Approximately, your application has a <code>Procfile</code>, which has lines of the form <code>dyno_type: command_to_run</code>, so for example (cribbed from <a href=\"http://devcenter.heroku.com/articles/process-model\">http://devcenter.heroku.com/articles/process-model</a>):</p>\n\n<pre><code>web:    bundle exec rails server\nworker: bundle exec rake jobs:work\n</code></pre>\n\n<p>This, with a:</p>\n\n<pre><code>heroku scale web:2 worker:10\n</code></pre>\n\n<p>will result in you having 2 <code>web</code> dynos and 10 <code>worker</code> dynos running. Nice, simple, easy. Note that <code>web</code> is a special dyno type, which has access to the outside world, and is behind their nice web traffic multiplexer (probably some sort of Varnish / nginx combination) that will route traffic accordingly. Your workers probably interact with a message queue for similar routing, from which they'll get the location via a URL in the environment.</p>\n\n<h2>Cost Efficiency</h2>\n\n<p>Lots of people have lots of different opinions about this. Currently it's $0.05/hr for a dyno hour, compared to $0.025/hr for an AWS micro instance or $0.09/hr for an AWS small instance.</p>\n\n<p>Heroku's <a href=\"http://devcenter.heroku.com/articles/dynos\">dyno documentation</a> says you have about 512MB of RAM, so it's probably not <em>too</em> unreasonable to consider a dyno as a bit like an EC2 micro instance. Is it worth double the price? How much do you value your time? The amount of time and effort required to build on top of an IaaS offering to get it to this standard is definitely not cheap. I can't really answer this question for you, but don't underestimate the 'hidden costs' of setup and maintenance.</p>\n\n<p>(A bit of an aside, but if I connect to a dyno from here (<code>heroku run bash</code>), a cursory look shows 4 cores in <code>/proc/cpuinfo</code> and 36GB of RAM - this leads me to believe that I'm on a <a href=\"http://aws.amazon.com/ec2/instance-types/\">\"High-Memory Double Extra Large Instance\"</a>. The Heroku <a href=\"http://devcenter.heroku.com/articles/dynos\">dyno documentation</a> says each dyno receives 512MB of RAM, so I'm potentially sharing with up to 71 other dynos. (I don't have enough data about the homogeny of Heroku's AWS instances, so your milage may vary))</p>\n\n<h2>How do they fare against their competitors?</h2>\n\n<p>This, I'm afraid I can't really help you with. The only competitor I've ever really looked at was <a href=\"http://code.google.com/appengine/\">Google App Engine</a> - at the time I was looking to deploy Java applications, and <a href=\"http://code.google.com/p/googleappengine/wiki/WillItPlayInJava\">the amount of restrictions on usable frameworks and technologies</a> was incredibly off-putting. This is more than \"just a Java thing\" - the amount of general restrictions and necessary considerations (<a href=\"http://code.google.com/appengine/kb/general.html\">the FAQ</a> hints at several) seemed less than convenient. In contrast, deploying to Heroku has been a dream.</p>\n\n<h2>Conclusion</h2>\n\n<p>I hope this answers your questions (please comment if there are gaps / other areas you'd like addressed). I feel I should offer my personal position. I love Heroku for \"quick deployments\". When I'm starting an application, and I want some cheap hosting (the Heroku free tier is awesome - essentially if you only need one web dyno and 5MB of PostgreSQL, it's free to host an application), Heroku is my go-to position. For \"Serious Production Deployment\" with several paying customers, with a service-level-agreement, with dedicated time to spend on ops, et cetera, I can't quite bring myself to offload that much control to Heroku, and then either AWS or our own servers have been the hosting platform of choice.</p>\n\n<p>Ultimately, it's about what works best for you. You say you're \"a beginner programmer\" - it might just be that using Heroku will let you focus on writing Ruby, and not have to spend time getting all the other infrastructure around your code built up. I'd definitely give it a try.</p>\n\n<hr>\n\n<p>Note, AWS does actually have a PaaS offering, <a href=\"http://aws.amazon.com/elasticbeanstalk/\">Elastic Beanstalk</a>, that supports Ruby, Node.js, PHP, Python, .NET and Java. I think generally most people, when they see \"AWS\", jump to things like EC2 and S3 and EBS, which are definitely IaaS offerings</p>\n", "title": "Why do people use Heroku when AWS is present? What&#39;s distinguishing about Heroku", "answer_id": 9803182, "question_id": 9802259, "tags": ["ruby-on-rails", "heroku", "amazon-web-services"]}, {"body": "<p>well.. its not all that rosy..</p>\n\n<p>first of all: AWS is not rocket science, and if you know your way around deploying \"things\" at the end of the day its better to use AWS, and cheaper .. instead of any other PaaS which tend to be always more expensive in exchange of doing \"things\" for you ...\nIMHO AWS is lot better and you have lot more control overall, </p>\n\n<p>especially now when there is rightScale , bitnami, etc ... and all those pre made EC2 images for so many different software stacks.</p>\n", "title": "Why do people use Heroku when AWS is present? What&#39;s distinguishing about Heroku", "answer_id": 21530320, "question_id": 9802259, "tags": ["ruby-on-rails", "heroku", "amazon-web-services"]}, {"body": "<p>As Kristian Glass Said, there is no comparison between IaaS(<a href=\"http://aws.amazon.com/ec2/\">aws</a>) and PaaS(<a href=\"http://heroku.com/\">Heroku</a>, <a href=\"https://www.engineyard.com/\">EngineYard</a>). </p>\n\n<p>PaaS basically helps developers to speed the development of app,thereby saving money and most importantly innovating their applications and business instead of setting up configurations and managing things like servers and databases. Other features buying to use PaaS is the application deployment process such as agility, High Availability, Monitoring, Scale / Descale, limited need for expertise, easy deployment, and reduced cost and development time. </p>\n\n<p>But still there is a dark side to PaaS which lead barrier to PaaS adoption : </p>\n\n<ul>\n<li>Less Control over Server and databases</li>\n<li>Costs will be very high if not governed properly</li>\n<li>Premature and dubious in current day and age</li>\n</ul>\n\n<p>Apart from above you should have enough skill set to mange you IaaS:</p>\n\n<ul>\n<li>Hardware acquisition</li>\n<li>Operating System </li>\n<li>Server Software </li>\n<li>Server Side Scripting Environment</li>\n<li>Web server </li>\n<li>Database Management System(Mysql, Redis etc)</li>\n<li>Configure production server</li>\n<li>Tool for testing and deployment</li>\n<li>Monitoring App</li>\n<li>High Availability</li>\n<li>Load Blancing/ Http Routing</li>\n<li>Service Backup Policies </li>\n<li>Team Collaboration </li>\n<li>Rebuild Production </li>\n</ul>\n\n<p>If you have small scale business, PaaS will be best option for you:</p>\n\n<ul>\n<li>Pay as you Go</li>\n<li>Low start up cost</li>\n<li>Leave the plumbing to expert</li>\n<li>PaaS handles auto scaling/descaling, Load balancing, disaster recovery</li>\n<li>PaaS manages all security requirements</li>\n<li>PaaS manages reliability, High Availability</li>\n<li>Paas manages many third party add-ons for you</li>\n</ul>\n\n<p>It will be totally individual choice based on requirement. You can have details on my PPT <a href=\"http://www.slideshare.net/PravinMishra3/hosting-rails-appfinal\">Hosting Rails Apps</a>. </p>\n", "title": "Why do people use Heroku when AWS is present? What&#39;s distinguishing about Heroku", "answer_id": 21546799, "question_id": 9802259, "tags": ["ruby-on-rails", "heroku", "amazon-web-services"]}, {"body": "<p>There are a lot of different ways to look at this decision from development, IT, and business objectives, so don't feel bad if it seems overwhelming. But also - don't overthink scalability.</p>\n\n<p>Think about your <em>requirements</em>.</p>\n\n<p>I've engineered websites which have serviced over 8M uniques a day and delivered terabytes of video a week built on infrastructures starting at $250k in capital hardware unr by a huge $MM IT labor staff.</p>\n\n<p>But I've also had smaller websites which were designed to generate $10-$20k per year, didn't have very high traffic, db or processing requirements, and I ran those off a $10/mo generic hosting account without compromise.</p>\n\n<p>In the future, deployment will look more like Heroku than AWS, just because of progress. There is zero value in the IT knob-turning of scaling internet infrastructures which isn't increasingly automatable, and none of it has anything to do with the value of the product or service you are offering.</p>\n\n<p>Also, keep in mind with a commercial website - scalability is what we often call a 'good problem to have' - although scalability issues with sites like Facebook and Twitter were very high-profile, they had zero negative effect on their success - the news might have even <em>contributed</em> to more signups (all press is good press).</p>\n\n<p>If you have a service which is generating a 100k+ uniques a day and having scaling issues, I'd be glad to take it off your hands for you no matter what the language, db, platform, or infrastructure you are running on!</p>\n\n<p>Scalability is a fixable implementation problem - not having customers is an existential issue.</p>\n", "title": "Why do people use Heroku when AWS is present? What&#39;s distinguishing about Heroku", "answer_id": 21814796, "question_id": 9802259, "tags": ["ruby-on-rails", "heroku", "amazon-web-services"]}, {"body": "<p>Actually you can use both - you can develop an app with amazon servers ec2. Then push it (with git) to heroku for free for awhile (use heroku free tier to serve it to the public) and test it like so. It is very cost effective in comparison to rent a server, but you  will have to talk with a more restrictive heroku api which is something you should think about. Source: this method was adopted for one of my online classes \"Startup engineering from Coursera/Stanford by Balaji S. Srinivasan and Vijay S. Pande</p>\n\n<p><img src=\"http://i.stack.imgur.com/EysMq.png\" alt=\"Added a scheme so my explanation will be easier to understand\"></p>\n", "title": "Why do people use Heroku when AWS is present? What&#39;s distinguishing about Heroku", "answer_id": 21827897, "question_id": 9802259, "tags": ["ruby-on-rails", "heroku", "amazon-web-services"]}, {"body": "<p>AWS / Heroku - Both are free for small hobby projects(to start with). In Heroku you dont even need a credit card info. </p>\n\n<p>Heroku is a Platform as a service, where you could use all the existing things. If you are fine with the architecture(that heroku provides), then heroku is great.</p>\n\n<p>Heroku</p>\n\n<ul>\n<li>PAAS</li>\n<li>Documentation is very good. </li>\n<li>Have in built tools and architecture.</li>\n<li>Limited control over architecture while designing app.</li>\n<li>Heroku is best at what they provide.</li>\n<li>Deployment is taken care(through git commands only).</li>\n<li>Good support.</li>\n<li>Not time consuming.</li>\n</ul>\n\n<p>AWS</p>\n\n<ul>\n<li>IAAS</li>\n<li>AWS is versatile. They have many kinds of products. EC2, LAMBDA, EMR    etc.,. </li>\n<li>You can go for Dedicated instance. You have more control over the architecture. like choosing OS, Version of the sofwares, etc.,. more than one backend layers..</li>\n<li>I have also used Elastic Beanstalk(AWS) which is heroku equivalent(PAAS). Still prefer Heroku to BeanStalk. BeanStalk is not free.</li>\n<li>Can use the automated deployment. or have ur own.</li>\n<li>Great support.</li>\n</ul>\n\n<p>Conclusion</p>\n\n<p>It depends on options/efforts that the developer wants to have/take.\nIf you want to start an app right away, without much customization of the architecture, then could choose Heroku. \nIf you want to build an app, and would like to focus on various things like architecture, using a different webserver, also want to use the other services that AWS provides, then you may have to choose AWS. Playing with AWS may be time consuming based on what service/product you choose but it is more than worth. AWS also comes with many services/products to plug/play. </p>\n", "title": "Why do people use Heroku when AWS is present? What&#39;s distinguishing about Heroku", "answer_id": 32944469, "question_id": 9802259, "tags": ["ruby-on-rails", "heroku", "amazon-web-services"]}, {"body": "<p>It's been a significant percentage of our business migrating people from Heroku to AWS. There are advantages to both, but it's gets messy on Heroku after a while... once you need a certain level of complexity no longer easy to maintain with Heroku's limitations.</p>\n\n<p>That said, there are increasingly options to have the ease of Heroku and the flexibility of AWS by being on AWS with great frameworks/tools.</p>\n", "title": "Why do people use Heroku when AWS is present? What&#39;s distinguishing about Heroku", "answer_id": 34685892, "question_id": 9802259, "tags": ["ruby-on-rails", "heroku", "amazon-web-services"]}, {"body": "<p>Well, people usually ask this question: Heroku or AWS when starting to deploy something.</p>\n\n<p>My experiment of using both of Heroku &amp; AWS, here is my quick review and comparison:</p>\n\n<p><strong>Heroku</strong></p>\n\n<ul>\n<li>1 command to deploy whatever your project types: Ruby on Rails, Nodejs</li>\n<li>So many 1-click to integrate plugins &amp; third parties: It is super easy to start with something.</li>\n<li>Don't have auto scaling, that means you need to manually scale up/down</li>\n<li>Cost is kind of expensive, especially, when system needs more resources</li>\n<li>Free instance available</li>\n<li>Free instance goes to sleep if it is inactive.</li>\n<li>Data center: US &amp; EU only</li>\n<li>CAN dive into/access to machine level by using <code>heroku run bash</code> (Thanks MJafar Mash for the advice)</li>\n<li>Don't need to know too much about DevOps</li>\n</ul>\n\n<p><strong>AWS - EC2</strong></p>\n\n<ul>\n<li>This just like a machine with pre-config OS (or not), so you need to install software, library to make your website/service go online.</li>\n<li>Plugin &amp; Library need to be integrated manually, or automation script (public script &amp; written by you)</li>\n<li>Auto scaling &amp; load balancer are the supported services, just learn how to config &amp; integrate to your system</li>\n<li>Cost is kinda cheap, depends on which services and number of hours you use it</li>\n<li>There are several free hours for T2.micro instances, but usually, you will pay few dollars every month (if still using T2.micro)</li>\n<li>Your free instance won't go to sleep, available 24/7 (because you may pay for it :) )</li>\n<li>Data center: around the world. Pick the region which is the best fit for you.</li>\n<li>Dive into machine level. So you can enjoy it</li>\n<li>Some knowledge about DevOps, but it is okay, Stackoverflow is helpful there!</li>\n</ul>\n\n<p><strong>AWS Elastic Beanstalk</strong> an alternative of Heroku, but cheaper</p>\n\n<ul>\n<li><p>Elastic Beanstalk was announced as a public beta from 2010, it helps we easier to work with deployment. For detail please go <a href=\"http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/Welcome.html\" rel=\"nofollow\">here</a></p></li>\n<li><p>Basically, Beanstalk is free, the cost you will pay will be for the services you use &amp; number of hours of usage.</p></li>\n<li><p>I use Elastic Beanstalk for a long time, and I think it can be the replacement of Heroku and cheaper!</p></li>\n</ul>\n\n<p><strong>Summary</strong></p>\n\n<ul>\n<li>Heroku: Easy at beginning, <strong>FREE</strong> instance, but expensive later</li>\n<li>AWS:    Not easy, free hours available, kind of <strong>cheaper</strong>, Beanstalk should be concerned to use</li>\n</ul>\n\n<p>So in my current system, I use Heroku for staging, and Beanstalk for production!</p>\n", "title": "Why do people use Heroku when AWS is present? What&#39;s distinguishing about Heroku", "answer_id": 37388751, "question_id": 9802259, "tags": ["ruby-on-rails", "heroku", "amazon-web-services"]}], "link": "http://stackoverflow.com/questions/9802259/why-do-people-use-heroku-when-aws-is-present-whats-distinguishing-about-heroku", "question_id": 9802259}, {"body": "<p>In the <a href=\"https://angularjs.org/#create-components\">\"Create Components\" section of AngularJS's homepage</a>, there is this example:</p>\n\n<pre><code>controller: function($scope, $element) {\n  var panes = $scope.panes = [];\n  $scope.select = function(pane) {\n    angular.forEach(panes, function(pane) {\n      pane.selected = false;\n    });\n    pane.selected = true;\n  }\n  this.addPane = function(pane) {\n    if (panes.length == 0) $scope.select(pane);\n    panes.push(pane);\n  }\n}\n</code></pre>\n\n<p>Notice how the <code>select</code> method is added to <code>$scope</code>, but the <code>addPane</code> method is added to <code>this</code>. If I change it to <code>$scope.addPane</code>, the code breaks.</p>\n\n<p>The documentation says that there in fact is a difference, but it doesn't mention what the difference is:</p>\n\n<blockquote>\n  <p>Previous versions of Angular (pre 1.0 RC) allowed you to use <code>this</code> interchangeably with the <code>$scope</code> method, but this is no longer the case. Inside of methods defined on the scope <code>this</code> and <code>$scope</code> are interchangeable (angular sets <code>this</code> to <code>$scope</code>), but not otherwise inside your controller constructor.</p>\n</blockquote>\n\n<p>How does <code>this</code> and <code>$scope</code> work in AngularJS controllers?</p>\n", "title": "&#39;this&#39; vs $scope in AngularJS controllers", "tags": ["angularjs", "angularjs-scope", "this"], "answers": [{"body": "<p>The reason 'addPane' is assigned to this is because of the <code>&lt;pane&gt;</code> directive.</p>\n\n<p>The <code>pane</code> directive does <code>require: '^tabs'</code>, which puts the tabs controller object from a parent directive, into the link function.</p>\n\n<p><code>addPane</code> is assigned to <code>this</code> so that the <code>pane</code> link function can see it.  Then in the <code>pane</code> link function, <code>addPane</code> is just a property of the <code>tabs</code> controller, and it's just tabsControllerObject.addPane.  So the pane directive's linking function can access the tabs controller object and therefore access the addPane method.</p>\n\n<p>I hope my explanation is clear enough.. it's kind of hard to explain.</p>\n", "title": "&#39;this&#39; vs $scope in AngularJS controllers", "answer_id": 11615502, "question_id": 11605917, "tags": ["angularjs", "angularjs-scope", "this"]}, {"body": "<blockquote>\n  <p>\"How does <code>this</code> and <code>$scope</code> work in AngularJS controllers?\"</p>\n</blockquote>\n\n<p><strong>Short answer</strong>:</p>\n\n<ul>\n<li><code>this</code>\n\n<ul>\n<li>When the controller constructor function is called, <code>this</code> is the controller.</li>\n<li>When a function defined on a <code>$scope</code> object is called, <code>this</code> is the \"scope in effect when the function was called\".  This may (or may not!) be the <code>$scope</code> that the function is defined on.  So, inside the function, <code>this</code> and <code>$scope</code> may <strong>not</strong> be the same.</li>\n</ul></li>\n<li><code>$scope</code>\n\n<ul>\n<li>Every controller has an associated <code>$scope</code> object.</li>\n<li>A controller (constructor) function is responsible for setting model properties and functions/behaviour on its associated <code>$scope</code>.</li>\n<li>Only methods defined on this <code>$scope</code> object (and parent scope objects, if prototypical inheritance is in play) are accessible from the HTML/view.  E.g., from <code>ng-click</code>, filters, etc.</li>\n</ul></li>\n</ul>\n\n<p><strong>Long answer</strong>:</p>\n\n<p>A controller function is a JavaScript constructor function.  When the constructor function executes (e.g., when a view loads), <code>this</code> (i.e., the \"function context\") is set to the controller object. So in the \"tabs\" controller constructor function, when the addPane function is created</p>\n\n<pre><code>this.addPane = function(pane) { ... }\n</code></pre>\n\n<p>it is created on the controller object, not on $scope.  Views cannot see the addPane function -- they only have access to functions defined on $scope.  In other words, in the HTML, this won't work:</p>\n\n<pre><code>&lt;a ng-click=\"addPane(newPane)\"&gt;won't work&lt;/a&gt;\n</code></pre>\n\n<p>After the \"tabs\" controller constructor function executes, we have the following:</p>\n\n<p><img src=\"http://i.stack.imgur.com/PUMuU.png\" alt=\"after tabs controller constructor function\"></p>\n\n<p>The dashed black line indicates prototypal inheritance -- an isolate scope prototypically inherits from <a href=\"http://docs.angularjs.org/api/ng.$rootScope.Scope\">Scope</a>.  (It does not prototypically inherit from the scope in effect where the directive was encountered in the HTML.)</p>\n\n<p>Now, the pane directive's link function wants to communicate with the tabs directive (which really means it needs to affect the tabs isolate $scope in some way).  Events could be used, but another mechanism is to have the pane directive <code>require</code> the tabs controller.  (There appears to be no mechanism for the pane directive to <code>require</code> the tabs $scope.)</p>\n\n<p>So, this begs the question: if we only have access to the tabs controller, how do we get access to the tabs isolate $scope (which is what we really want)?</p>\n\n<p>Well, the red dotted line is the answer.  The addPane() function's \"scope\" (I'm referring to JavaScript's function scope/closures here) gives the function access to the tabs isolate $scope.  I.e., addPane() has access to the \"tabs IsolateScope\" in the diagram above because of a closure that was created when addPane() was defined.  (If we instead defined addPane() on the tabs $scope object, the pane directive would not have access to this function, and hence it would have no way to communicate with the tabs $scope.)</p>\n\n<p>To answer the other part of your question: <code>how does $scope work in controllers?</code>:</p>\n\n<p>Within functions defined on $scope, <code>this</code> is set to \"the $scope in effect where/when the function was called\".  Suppose we have the following HTML:</p>\n\n<pre><code>&lt;div ng-controller=\"ParentCtrl\"&gt;\n   &lt;a ng-click=\"logThisAndScope()\"&gt;log \"this\" and $scope&lt;/a&gt; - parent scope\n   &lt;div ng-controller=\"ChildCtrl\"&gt;\n      &lt;a ng-click=\"logThisAndScope()\"&gt;log \"this\" and $scope&lt;/a&gt; - child scope\n   &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And the <code>ParentCtrl</code> (Solely) has</p>\n\n<pre><code>$scope.logThisAndScope = function() {\n    console.log(this, $scope)\n}\n</code></pre>\n\n<p>Clicking the first link will show that <code>this</code> and <code>$scope</code> are the same, since \"<em>the scope in effect when the function was called</em>\" is the scope associated with the <code>ParentCtrl</code>.</p>\n\n<p>Clicking the second link will reveal <code>this</code> and <code>$scope</code> are <strong>not</strong> the same, since \"<em>the scope in effect when the function was called</em>\" is the scope associated with the <code>ChildCtrl</code>.  So here, <code>this</code> is set to <code>ChildCtrl</code>'s <code>$scope</code>.  Inside the method, <code>$scope</code> is still the <code>ParentCtrl</code>'s $scope.</p>\n\n<p><a href=\"http://jsfiddle.net/mrajcok/sbZw7/\">Fiddle</a></p>\n\n<p>I try to not use <code>this</code> inside of a function defined on $scope, as it becomes confusing which $scope is being affected, especially considering that ng-repeat, ng-include, ng-switch, and directives can all create their own child scopes.</p>\n", "title": "&#39;this&#39; vs $scope in AngularJS controllers", "answer_id": 14168699, "question_id": 11605917, "tags": ["angularjs", "angularjs-scope", "this"]}, {"body": "<blockquote>\n  <p>Previous versions of Angular (pre 1.0 RC) allowed you to use this\n  interchangeably with the $scope method, but this is no longer the\n  case. Inside of methods defined on the scope this and $scope are\n  interchangeable (angular sets this to $scope), but not otherwise\n  inside your controller constructor.</p>\n</blockquote>\n\n<p>To bring back this behaviour (does anyone know why was it changed?) you can add:</p>\n\n<pre><code>return angular.extend($scope, this);\n</code></pre>\n\n<p>at the end of your controller function (provided that $scope was injected to this controller function).</p>\n\n<p>This has a nice effect of having access to parent scope via controller object that you can get in child with <code>require: '^myParentDirective'</code></p>\n", "title": "&#39;this&#39; vs $scope in AngularJS controllers", "answer_id": 24323316, "question_id": 11605917, "tags": ["angularjs", "angularjs-scope", "this"]}, {"body": "<p>I just read a pretty interesting explanation on the difference between the two, and a growing preference to attach models to the controller and alias the controller to bind models to the view. <a href=\"http://toddmotto.com/digging-into-angulars-controller-as-syntax/\">http://toddmotto.com/digging-into-angulars-controller-as-syntax/</a> is the article. He doesn't mention it but when defining directives, if you need to share something between multiple directives and don't want a service (there are legitimate cases where services are a hassle) then attach the data to the parent directive's controller. The $scope service provides plenty of useful things, $watch being the most obvious, but if all you need to to bind data to the view, using the plain controller and 'controller as' in the template is fine, and arguably preferable.</p>\n", "title": "&#39;this&#39; vs $scope in AngularJS controllers", "answer_id": 25558281, "question_id": 11605917, "tags": ["angularjs", "angularjs-scope", "this"]}, {"body": "<p>In this course(<a href=\"https://www.codeschool.com/courses/shaping-up-with-angular-js\">https://www.codeschool.com/courses/shaping-up-with-angular-js</a>) they explain how to use \"this\" and many other stuff.</p>\n\n<p>If you add method to the controller through \"this\" method, you have to call it in the view with controller's name \"dot\" your property or method.</p>\n\n<p>For example using your controller in the view you may have code like this:</p>\n\n<pre><code>    &lt;div data-ng-controller=\"YourController as aliasOfYourController\"&gt;\n\n       Your first pane is {{aliasOfYourController.panes[0]}}\n\n    &lt;/div&gt;\n</code></pre>\n", "title": "&#39;this&#39; vs $scope in AngularJS controllers", "answer_id": 26011035, "question_id": 11605917, "tags": ["angularjs", "angularjs-scope", "this"]}, {"body": "<p>As per my knowledge, everyone know what is <code>this</code> in a function. <code>this</code> refers to the caller of the function in which <code>this</code> is written.</p>\n\n<p><strong>When to use <code>$scope</code></strong>\nWhen you want to make any variable/function available to the view(html) which is associated to a controller then use <code>$scope</code> (for data binding).</p>\n\n<p><strong>When to use <code>this</code></strong>\n<code>this</code> refers to the object which is calling the function in which <code>this</code> is written.</p>\n", "title": "&#39;this&#39; vs $scope in AngularJS controllers", "answer_id": 27702731, "question_id": 11605917, "tags": ["angularjs", "angularjs-scope", "this"]}, {"body": "<p>I recommend you to read the following post:\n<a href=\"http://codetunnel.io/angularjs-controller-as-or-scope/\">http://codetunnel.io/angularjs-controller-as-or-scope/</a></p>\n\n<p>it describes very well the advantages of using \"Controller as\" to expose variables over \"$scope\".</p>\n\n<p>I know you asked specifically about methods and not variables, but I think that it's better to stick to one technique and be consistent with it. </p>\n\n<p>So for my opinion, because of the variables issue discussed in the post, it's better to just use the \"Controller as\" technique and also apply it to the methods.</p>\n", "title": "&#39;this&#39; vs $scope in AngularJS controllers", "answer_id": 33496827, "question_id": 11605917, "tags": ["angularjs", "angularjs-scope", "this"]}], "link": "http://stackoverflow.com/questions/11605917/this-vs-scope-in-angularjs-controllers", "question_id": 11605917}, {"body": "<p>Could someone explain to me the meaning of <code>@classmethod</code> and <code>@staticmethod</code> in python? I need to know the difference and the meaning. </p>\n\n<p>As far as I understand, <code>@classmethod</code> tells a class that it's a method which should be inherited into subclasses, or... something. However, what's the point of that? Why not just define the class method without adding <code>@classmethod</code> or <code>@staticmethod</code> or any <code>@</code> definitions?</p>\n\n<p><strong>tl;dr:</strong> <em>when</em> should I use them, <em>why</em> should I use them, and <em>how</em> should I use them?</p>\n\n<p>I'm pretty advanced with C++, so using more advanced programming concepts shouldn't be a problem. Feel free giving me a corresponding C++ example if possible.</p>\n", "title": "Python @classmethod and @staticmethod for beginner?", "tags": ["python", "oop", "static-methods", "class-method"], "answers": [{"body": "<p><code>@classmethod</code> means: when this method is called, we pass the class as the first argument instead of the instance of that class (as we normally do with methods). This means you can use the class and its properties inside that method rather than a particular instance.</p>\n\n<p><code>@staticmethod</code> means:  when this method is called, we don't pass an instance of the class to it (as we normally do with methods). This means you can put a function inside a class but you can't access the instance of that class (this is useful when your method does not use the instance).</p>\n", "title": "Python @classmethod and @staticmethod for beginner?", "answer_id": 12179325, "question_id": 12179271, "tags": ["python", "oop", "static-methods", "class-method"]}, {"body": "<p>Though <code>classmethod</code> and <code>staticmethod</code> are quite similar, there's a slight difference in usage for both entities: <code>classmethod</code> must have a reference to a class object as the first parameter, whereas <code>staticmethod</code> can have no parameters at all.</p>\n\n<p>Let's look at all that was said in real examples.</p>\n\n<p><strong>Boilerplate</strong></p>\n\n<p>Let's assume an example of a class, dealing with date information (this is what will be our boilerplate to cook on):</p>\n\n<pre><code>class Date(object):\n\n    day = 0\n    month = 0\n    year = 0\n\n    def __init__(self, day=0, month=0, year=0):\n        self.day = day\n        self.month = month\n        self.year = year\n</code></pre>\n\n<p>This class obviously could be used to store information about certain dates (without timezone information; let's assume all dates are presented in UTC).</p>\n\n<p>Here we have <code>__init__</code>, a typical initializer of Python class instances, which receives arguments as a typical <code>instancemethod</code>, having the first non-optional argument (<code>self</code>) that holds reference to a newly created instance.</p>\n\n<p><strong>Class Method</strong></p>\n\n<p>We have some tasks that can be nicely done using <code>classmethod</code>s.</p>\n\n<p><em>Let's assume that we want to create a lot of <code>Date</code> class instances having date information coming from outer source encoded as a string of next format ('dd-mm-yyyy'). We have to do that in different places of our source code in project.</em></p>\n\n<p>So what we must do here is:</p>\n\n<ol>\n<li>Parse a string to receive day, month and year as three integer variables or a 3-item tuple consisting of that variable.</li>\n<li>Instantiate <code>Date</code> by passing those values to initialization call.</li>\n</ol>\n\n<p>This will look like:</p>\n\n<pre><code>day, month, year = map(int, string_date.split('-'))\ndate1 = Date(day, month, year)\n</code></pre>\n\n<p>For this purpose, C++ has such feature as overloading, but Python lacks that feature- so here's when <code>classmethod</code> applies. Lets create another \"<em>constructor</em>\".</p>\n\n<pre><code>    @classmethod\n    def from_string(cls, date_as_string):\n        day, month, year = map(int, date_as_string.split('-'))\n        date1 = cls(day, month, year)\n        return date1\n\ndate2 = Date.from_string('11-09-2012')\n</code></pre>\n\n<p>Let's look more carefully at the above implementation, and review what advantages we have here:</p>\n\n<ol>\n<li>We've implemented date string parsing in one place and it's reusable now.</li>\n<li>Encapsulation works fine here (if you think that you could implement string parsing as a single function elsewhere, this solution fits OOP paradigm far better).</li>\n<li><code>cls</code> is an object that holds <strong>class itself</strong>, not an instance of the class. It's pretty cool because if we inherit our <code>Date</code> class, all children will have <code>from_string</code> defined also.</li>\n</ol>\n\n<p><strong>Static method</strong></p>\n\n<p>What about <code>staticmethod</code>? It's pretty similar to <code>classmethod</code> but doesn't take any obligatory parameters (like a class method or instance method does).</p>\n\n<p>Let's look at the next use case.</p>\n\n<p><em>We have a date string that we want to validate somehow. This task is also logically bound to <code>Date</code> class we've used so far, but still doesn't require instantiation of it.</em></p>\n\n<p>Here is where <code>staticmethod</code> can be useful. Let's look at the next piece of code:</p>\n\n<pre><code>    @staticmethod\n    def is_date_valid(date_as_string):\n        day, month, year = map(int, date_as_string.split('-'))\n        return day &lt;= 31 and month &lt;= 12 and year &lt;= 3999\n\n    # usage:\n    is_date = Date.is_date_valid('11-09-2012')\n</code></pre>\n\n<p>So, as we can see from usage of <code>staticmethod</code>, we don't have any access to what the class is- it's basically just a function,  called syntactically like a method, but without access to the object and it's internals (fields and another methods), while classmethod does.</p>\n", "title": "Python @classmethod and @staticmethod for beginner?", "answer_id": 12179752, "question_id": 12179271, "tags": ["python", "oop", "static-methods", "class-method"]}, {"body": "<p>Rostyslav Dzinko's answer is very appropriate. I thought I could highlight one other reason you should choose <code>@classmethod</code> over <code>@staticmethod</code>.</p>\n\n<p>In the example above, Rostyslav used the <code>@classmethod</code> <code>from_string</code> as a Factory to create <code>Date</code> objects from otherwise unacceptable parameters. The same can be done with <code>@staticmethod</code> as is shown in the code below:</p>\n\n\n\n<pre class=\"lang-py prettyprint-override\"><code>class Date:\n  def __init__(self, month, day, year):\n    self.month = month\n    self.day   = day\n    self.year  = year\n\n\n  def display(self):\n    return \"{0}-{1}-{2}\".format(self.month, self.day, self.year)\n\n\n  @staticmethod\n  def millenium(month, day):\n    return Date(month, day, 2000)\n\nnew_year = Date(1, 1, 2013)               # Creates a new Date object\nmillenium_new_year = Date.millenium(1, 1) # also creates a Date object. \n\n# Proof:\nnew_year.display()           # \"1-1-2013\"\nmillenium_new_year.display() # \"1-1-2000\"\n\nisinstance(new_year, Date) # True\nisinstance(millenium_new_year, Date) # True\n</code></pre>\n\n<p>Thus both <code>new_year</code> and <code>millenium_new_year</code> are instances of <code>Date</code> class.</p>\n\n<p>But, if you observe closely, the Factory process is hard-coded to create <code>Date</code> objects no matter what. What this means is that even if the <code>Date</code> class is subclassed, the subclasses will still create plain <code>Date</code> object (without any property of the subclass). See that in the example below:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class DateTime(Date):\n  def display(self):\n      return \"{0}-{1}-{2} - 00:00:00PM\".format(self.month, self.day, self.year)\n\n\ndatetime1 = DateTime(10, 10, 1990)\ndatetime2 = DateTime.millenium(10, 10)\n\nisinstance(datetime1, DateTime) # True\nisinstance(datetime2, DateTime) # False\n\ndatetime1.display() # returns \"10-10-1990 - 00:00:00PM\"\ndatetime2.display() # returns \"10-10-2000\" because it's not a DateTime object but a Date object. Check the implementation of the millenium method on the Date class\n</code></pre>\n\n<p><code>datetime2</code> is not an instance of <code>DateTime</code>? WTF? Well that's because of the <code>@staticmethod</code> decorator used.</p>\n\n<p>In most cases, this is undesired. If what you want is a Factory method that is aware of the class that called it, then <code>@classmethod</code> is what you need.</p>\n\n<p>Rewriting the <code>Date.millenium</code> as (that's the only part of the above code that changes)</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>@classmethod\ndef millenium(cls, month, day):\n    return cls(month, day, 2000)\n</code></pre>\n\n<p>ensures that the <code>class</code> is not hard-coded but rather learnt. <code>cls</code> can be any subclass. The resulting <code>object</code> will rightly be an instance of <code>cls</code>. Let's test that out.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>datetime1 = DateTime(10, 10, 1990)\ndatetime2 = DateTime.millenium(10, 10)\n\nisinstance(datetime1, DateTime) # True\nisinstance(datetime2, DateTime) # True\n\n\ndatetime1.display() # \"10-10-1990 - 00:00:00PM\"\ndatetime2.display() # \"10-10-2000 - 00:00:00PM\"\n</code></pre>\n\n<p>The reason is, as you know by now, <code>@classmethod</code> was used instead of <code>@staticmethod</code></p>\n", "title": "Python @classmethod and @staticmethod for beginner?", "answer_id": 14605349, "question_id": 12179271, "tags": ["python", "oop", "static-methods", "class-method"]}, {"body": "<p><code>@staticmethod</code> function is nothing more than a function defined inside a class. It is callable without instantiating the class first. It\u2019s definition is immutable via inheritance.</p>\n\n<ul>\n<li>Python does not have to instantiate a <strong>bound-method</strong> for object.</li>\n<li>It eases the readability of the code: seeing <strong>@staticmethod</strong>, we know that the method does not depend on the state of object itself;</li>\n</ul>\n\n<p><code>@classmethod</code> function also callable without instantiating the class, but its definition follows Sub class, not Parent class, via inheritance, can be overridden by subclass. That\u2019s because the first argument for <code>@classmethod</code> function must always be <code>cls (class)</code>.</p>\n\n<ul>\n<li><strong>Factory methods</strong>, that are used to create an instance for a class using for example some sort of pre-processing. </li>\n<li><strong>Static methods calling static methods</strong>: if you split a static methods in several static methods, you shouldn't hard-code the class name but use class methods</li>\n</ul>\n\n<p><a href=\"http://julien.danjou.info/blog/2013/guide-python-static-class-abstract-methods\">here</a> is good link to this topic.</p>\n", "title": "Python @classmethod and @staticmethod for beginner?", "answer_id": 23054064, "question_id": 12179271, "tags": ["python", "oop", "static-methods", "class-method"]}, {"body": "<p><strong><em>A little compilation</em></strong></p>\n\n<p><strong>@staticmethod</strong>\nA way to write a method inside a class without reference to the object it is being called on. So no need to pass implicit argument like self or cls.\nIt is written exactly the same how written outside the class, but it is not of no use in python because if you need to encapsulate a method inside a class since this method needs to be the part of that class @staticmethod is comes handy in that case.</p>\n\n<p><strong>@classmethod</strong>\nIt is important when you want to write a factory method and by this custom attribute(s) can be attached in a class. This attribute(s) can be overridden in the inherited class.</p>\n\n<p>A comparison between these two methods can be as below</p>\n\n<p><a href=\"http://i.stack.imgur.com/LUyfq.png\"><img src=\"http://i.stack.imgur.com/LUyfq.png\" alt=\"Table\"></a></p>\n", "title": "Python @classmethod and @staticmethod for beginner?", "answer_id": 31503491, "question_id": 12179271, "tags": ["python", "oop", "static-methods", "class-method"]}, {"body": "<p>One would use <code>@classmethod</code> when he/she would want to change the behaviour of the method based on which subclass is calling the method. remember we have a reference to the calling class in a class method.</p>\n\n<p>While using static you would want the behaviour to remain unchanged across subclasses </p>\n\n<p>Example:</p>\n\n<pre><code>class Hero:\n\n  @staticmethod\n  def say_hello():\n     print(\"Helllo...\")\n\n  @classmethod\n  def say_class_hello(cls):\n     if(cls.__name__==\"HeroSon\"):\n        print(\"Hi Kido\")\n     elif(cls.__name__==\"HeroDaughter\"):\n        print(\"Hi Princess\")\n\nclass HeroSon(Hero):\n  def say_son_hello(self):\n     print(\"test  hello\")\n\n\n\nclass HeroDaughter(Hero):\n  def say_daughter_hello(self):\n     print(\"test  hello daughter\")\n\n\ntestson = HeroSon()\n\ntestson.say_class_hello()\n\ntestson.say_hello()\n\ntestdaughter = HeroDaughter()\n\ntestdaughter.say_class_hello()\n\ntestdaughter.say_hello()\n</code></pre>\n", "title": "Python @classmethod and @staticmethod for beginner?", "answer_id": 32134507, "question_id": 12179271, "tags": ["python", "oop", "static-methods", "class-method"]}], "link": "http://stackoverflow.com/questions/12179271/python-classmethod-and-staticmethod-for-beginner", "question_id": 12179271}, {"body": "<p>What are undefined reference/unresolved external symbol errors? What are common causes and how to fix/prevent them?</p>\n\n<p><sub>Feel free to edit/add your own.</sub></p>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"], "answers": [{"body": "<p>Compiling a C++ program takes place in several steps, as specified by <strong>2.2</strong> <a href=\"http://stackoverflow.com/a/8834196/673730\">(credits to Keith Thompson for the reference)</a>:</p>\n\n<blockquote>\n  <p>The precedence among the syntax rules of translation is specified by the following phases <em>[see footnote]</em>.</p>\n  \n  <ol>\n  <li>Physical source file characters are mapped, in an implementation-defined manner, to the basic source character set\n  (introducing new-line characters for end-of-line indicators) if\n  necessary. <em>[SNIP]</em></li>\n  <li>Each instance of a backslash character (\\) immediately followed by a new-line character is deleted, splicing physical source lines to\n  form logical source lines. <em>[SNIP]</em></li>\n  <li>The source file is decomposed into preprocessing tokens (2.5) and sequences of white-space characters (including comments). <em>[SNIP]</em></li>\n  <li>Preprocessing directives are executed, macro invocations are expanded, and _Pragma unary operator expressions are executed. <em>[SNIP]</em></li>\n  <li>Each source character set member in a character literal or a string literal, as well as each escape sequence and universal-character-name\n  in a character literal or a non-raw string literal, is converted to\n  the corresponding member of the execution character set; <em>[SNIP]</em></li>\n  <li>Adjacent string literal tokens are concatenated.</li>\n  <li>White-space characters separating tokens are no longer significant. Each preprocessing token is converted into a token. (2.7). The\n  resulting tokens are syntactically and semantically analyzed and\n  translated as a translation unit. <em>[SNIP]</em></li>\n  <li>Translated translation units and instantiation units are combined as follows: <em>[SNIP]</em></li>\n  <li><strong>All external entity references are resolved. Library components are linked to satisfy external references to entities not defined in the\n  current translation. All such translator output is collected into a\n  program image which contains information needed for execution in its\n  execution environment.</strong> (emphasis mine)</li>\n  </ol>\n  \n  <p><em>[footnote]</em> Implementations must behave as if these separate phases occur, although in practice different phases might be folded together.</p>\n</blockquote>\n\n<p>The specified errors occur during this last stage of compilation, most commonly referred to as linking. It basically means that you compiled a bunch of implementation files into object files or libraries and now you want to get them to work together.</p>\n\n<p>Say you defined symbol <code>a</code> in <code>a.cpp</code>. Now, <code>b.cpp</code> <em>declared</em> that symbol and used it. Before linking, it simply assumes that that symbol was defined <em>somewhere</em>, but it doesn't yet care where. The linking phase is responsible for finding the symbol and correctly linking it to <code>b.cpp</code> (well, actually to the object or library that uses it).</p>\n\n<p>If you're using MSVS, you'll see that projects generate <code>.lib</code> files. These contain a table of exported symbols, and a table of imported symbols. The imported symbols are resolved against the libraries you link against, and the exported symbols are provided for the libraries that use that <code>.lib</code> (if any).</p>\n\n<p>Similar mechanism exist for other compilers/platforms.</p>\n\n<p>Common error messages are <code>error LNK2001</code>, <code>error LNK1120</code>, <code>error LNK2019</code> for <strong>MSVS</strong> and <code>undefined reference to symbolName</code> for <strong>gcc</strong>.</p>\n\n<p>The code:</p>\n\n<pre><code>struct X\n{\n   virtual void foo();\n};\nstruct Y : X\n{\n   void foo() {}\n};\nstruct A\n{\n   virtual ~A() = 0;\n};\nstruct B: A\n{\n   virtual ~B(){}\n};\nextern int x;\nvoid foo();\nint main()\n{\n   x = 0;\n   foo();\n   Y y;\n   B b;\n}\n</code></pre>\n\n<p>would generate the following errors with <strong>gcc</strong>:</p>\n\n<pre><code>/home/AbiSfw/ccvvuHoX.o: In function `main':\nprog.cpp:(.text+0x10): undefined reference to `x'\nprog.cpp:(.text+0x19): undefined reference to `foo()'\nprog.cpp:(.text+0x2d): undefined reference to `A::~A()'\n/home/AbiSfw/ccvvuHoX.o: In function `B::~B()':\nprog.cpp:(.text._ZN1BD1Ev[B::~B()]+0xb): undefined reference to `A::~A()'\n/home/AbiSfw/ccvvuHoX.o: In function `B::~B()':\nprog.cpp:(.text._ZN1BD0Ev[B::~B()]+0x12): undefined reference to `A::~A()'\n/home/AbiSfw/ccvvuHoX.o:(.rodata._ZTI1Y[typeinfo for Y]+0x8): undefined reference to `typeinfo for X'\n/home/AbiSfw/ccvvuHoX.o:(.rodata._ZTI1B[typeinfo for B]+0x8): undefined reference to `typeinfo for A'\ncollect2: ld returned 1 exit status\n</code></pre>\n\n<p>and similar errors with <strong>MSVS</strong>:</p>\n\n<pre><code>1&gt;test2.obj : error LNK2001: unresolved external symbol \"void __cdecl foo(void)\" (?foo@@YAXXZ)\n1&gt;test2.obj : error LNK2001: unresolved external symbol \"int x\" (?x@@3HA)\n1&gt;test2.obj : error LNK2001: unresolved external symbol \"public: virtual __thiscall A::~A(void)\" (??1A@@UAE@XZ)\n1&gt;test2.obj : error LNK2001: unresolved external symbol \"public: virtual void __thiscall X::foo(void)\" (?foo@X@@UAEXXZ)\n1&gt;...\\test2.exe : fatal error LNK1120: 4 unresolved externals\n</code></pre>\n\n<p>Common causes include:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/a/12574400/673730\">Failure to link against appropriate libraries/object files or compile implementation files</a></li>\n<li><a href=\"http://stackoverflow.com/a/12574403/673730\">Declared and undefined variable or function.</a></li>\n<li><a href=\"http://stackoverflow.com/a/12574407/673730\">Common issues with class-type members</a></li>\n<li><a href=\"http://stackoverflow.com/a/12574417/673730\">Template implementations not visible.</a></li>\n<li><a href=\"http://stackoverflow.com/a/12574420/673730\">Symbols were defined in a C program and used in C++ code.</a></li>\n<li><a href=\"http://stackoverflow.com/a/12574423/673730\">Incorrectly importing/exporting methods/classes across modules/dll. (MSVS specific)</a></li>\n<li><a href=\"http://stackoverflow.com/a/20358542/673730\">Circular library dependency</a></li>\n<li><a href=\"http://stackoverflow.com/questions/5259714/undefined-reference-to-winmain16/5260237#5260237\">undefined reference to `WinMain@16'</a></li>\n<li><a href=\"http://stackoverflow.com/a/24675715/1356926\">Interdependent library order</a></li>\n<li><a href=\"http://stackoverflow.com/questions/14364362/visualstudio-project-with-multiple-sourcefiles-of-the-same-name\">Multiple source files of the same name</a></li>\n<li><a href=\"http://stackoverflow.com/a/25744263/3747990\">Mistyping or not including the .lib extension when using the <code>#pragma</code> (MSVC)</a></li>\n<li><a href=\"http://stackoverflow.com/a/35891188/3747990\">Problems with template friends</a></li>\n<li><a href=\"http://stackoverflow.com/a/36475406/3747990\">Inconsistent <code>UNICODE</code> definitions</a></li>\n</ul>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 12573818, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<h3>Failure to link against appropriate libraries/object files or compile implementation files</h3>\n\n<p>Commonly, each translation unit will generate an object file that contains the definitions of the symbols defined in that translation unit. \nTo use those symbols, you have to link against those object files.</p>\n\n<p>Under <strong>gcc</strong> you would specify all object files that are to be linked together in the command line, or compile the implementation files together.</p>\n\n<pre><code>g++ -o test objectFile1.o objectFile2.o -lLibraryName\n</code></pre>\n\n<p>The <code>libraryName</code> here is just the bare name of the library, without platform-specific additions. So e.g. on Linux library files are usually called <code>libfoo.so</code> but you'd only write <code>-lfoo</code>. On Windows that same file might be called <code>foo.lib</code>, but you'd use the same argument. You might have to add the directory where those files can be found using <code>-L\u2039directory\u203a</code>. Make sure to not write a space after <code>-l</code> or <code>-L</code>.</p>\n\n<p>For <strong>XCode</strong>:  Add the User Header Search Paths -> add the Library Search Path -> drag and drop the actual library reference into the project folder.</p>\n\n<p>Under <strong>MSVS</strong>, files added to a project automatically have their object files linked together and a <code>lib</code> file would be generated (in common usage). To use the symbols in a separate project, you'd \nneed to include the <code>lib</code> files in the project settings. This is done in the Linker section of the project properties, in <code>Input -&gt; Additional Dependencies</code>. (the path to the <code>lib</code> file should be\nadded in <code>Linker -&gt; General -&gt; Additional Library Directories</code>) When using a third-party library that is provided with a <code>lib</code> file, failure to do so usually results in the error.</p>\n\n<p>It can also happen that you forget to add the file to the compilation, in which case the object file won't be generated. In <strong>gcc</strong> you'd add the files to the command line. In <strong>MSVS</strong> adding the file to the project will make it compile it automatically (albeit files can, manually, be individually excluded from the build).</p>\n\n<p>In Windows programming, the tell-tale sign that you did not link a necessary library is that the name of the unresolved symbol begins with <code>__imp_</code>. Look up the name of the function in the documentation, and it should say which library you need to use. For example, MSDN puts the information in a box at the bottom of each function in a section called \"Library\".</p>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 12574400, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<h3>Declared but did not define a variable or function.</h3>\n\n<p>A typical variable declaration is</p>\n\n<pre><code>extern int x;\n</code></pre>\n\n<p>As this is only a declaration, a <strong>single definition</strong> is needed. A corresponding definition would be:</p>\n\n<pre><code>int x;\n</code></pre>\n\n<p>For example, the following would generate an error:</p>\n\n<pre><code>extern int x;\nint main()\n{\n    x = 0;\n}\n//int x; // uncomment this line for successful definition\n</code></pre>\n\n<p>Similar remarks apply to functions. Declaring a function without defining it leads to the error:</p>\n\n<pre><code>void foo(); // declaration only\nint main()\n{\n   foo();\n}\n//void foo() {} //uncomment this line for successful definition\n</code></pre>\n\n<p>Be careful that the function you implement exactly matches the one you declared. For example, you may have mismatched cv-qualifiers:</p>\n\n<pre><code>void foo(int&amp; x);\nint main()\n{\n   int x;\n   foo(x);\n}\nvoid foo(const int&amp; x) {} //different function, doesn't provide a definition\n                          //for void foo(int&amp; x)\n</code></pre>\n\n<p>Other examples of mismatches include</p>\n\n<ul>\n<li>Function/variable declared in one namespace, defined in another.</li>\n<li>Function/variable declared as class member, defined as global (or vice versa).</li>\n<li>Function return type, parameter number and types, and calling convention do not all exactly agree.</li>\n</ul>\n\n<p>The error message from the compiler will often give you the full declaration of the variable or function that was declared but never defined. Compare it closely to the definition you provided. <em>Make sure every detail matches.</em></p>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 12574403, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<h2>Class members:</h2>\n\n<h3>A pure <code>virtual</code> destructor needs an implementation.</h3>\n\n<p>Declaring a destructor pure still requires you to define it (unlike a regular function):</p>\n\n<pre><code>struct X\n{\n    virtual ~X() = 0;\n};\nstruct Y : X\n{\n    ~Y() {}\n};\nint main()\n{\n    Y y;\n}\n//X::~X(){} //uncomment this line for successful definition\n</code></pre>\n\n<p>This happens because base class destructors are called when the object is destroyed implicitly, so a definition is required.    </p>\n\n<h3><code>virtual</code> methods must either be implemented or defined as pure.</h3>\n\n<p>This is similar to non-<code>virtual</code> methods with no definition, with the added reasoning that \nthe pure declaration generates a dummy vtable and you might get the linker error without using the function:</p>\n\n<pre><code>struct X\n{\n    virtual void foo();\n};\nstruct Y : X\n{\n   void foo() {}\n};\nint main()\n{\n   Y y; //linker error although there was no call to X::foo\n}\n</code></pre>\n\n<p>For this to work, declare <code>X::foo()</code> as pure:</p>\n\n<pre><code>struct X\n{\n    virtual void foo() = 0;\n};\n</code></pre>\n\n<h3>Non-<code>virtual</code> class members</h3>\n\n<p>Some members need to be defined even if not used explicitly:</p>\n\n<pre><code>struct A\n{ \n    ~A();\n};\n</code></pre>\n\n<p>The following would yield the error:</p>\n\n<pre><code>A a;      //destructor undefined\n</code></pre>\n\n<p>The implementation can be inline, in the class definition itself:</p>\n\n<pre><code>struct A\n{ \n    ~A() {}\n};\n</code></pre>\n\n<p>or outside:</p>\n\n<pre><code>A::~A() {}\n</code></pre>\n\n<p>If the implementation is outside the class definition, but in a header, the methods have to be marked as <code>inline</code> to prevent a multiple definition.</p>\n\n<p>All used member methods need to be defined if used.</p>\n\n<h3>A common mistake is forgetting to qualify the name:</h3>\n\n<pre><code>struct A\n{\n   void foo();\n};\n\nvoid foo() {}\n\nint main()\n{\n   A a;\n   a.foo();\n}\n</code></pre>\n\n<p>The definition should be</p>\n\n<pre><code>void A::foo() {}\n</code></pre>\n\n<h3><code>static</code> data members must be defined outside the class in a <strong>single translation unit</strong>:</h3>\n\n<pre><code>struct X\n{\n    static int x;\n};\nint main()\n{\n    int x = X::x;\n}\n//int X::x; //uncomment this line to define X::x\n</code></pre>\n\n<p>An initializer can be provided for a <code>static</code> <code>const</code> data member of integral or enumeration type within the class definition; however, odr-use of this member will still require a namespace scope definition as described above. C++11 allows initialization inside the class for all <code>static const</code> data members.</p>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 12574407, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<h3>Template implementations not visible.</h3>\n\n<p>Unspecialized templates must have their definitions visible to all translation units that use them. That means you can't separate the definition of a template\nto an implementation file. If you must separate the implementation, the usual workaround is to have an <code>impl</code> file which you include at the end of the header that\ndeclares the template. A common situation is:</p>\n\n<pre><code>template&lt;class T&gt;\nstruct X\n{\n    void foo();\n};\n\nint main()\n{\n    X&lt;int&gt; x;\n    x.foo();\n}\n\n//differentImplementationFile.cpp\ntemplate&lt;class T&gt;\nvoid X&lt;T&gt;::foo()\n{\n}\n</code></pre>\n\n<p>To fix this, you must move the definition of <code>X::foo</code> to the header file or some place visible to the translation unit that uses it.</p>\n\n<p>Specialized templates can be implemented in an implementation file and the implementation doesn't have to be visible, but the specialization must be previously declared.</p>\n\n<p>For further explanation and another possible solution (explicit instantiation) see <a href=\"http://stackoverflow.com/questions/495021\">this question and answer</a>.</p>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 12574417, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<h3>Symbols were defined in a C program and used in C++ code.</h3>\n\n<p>The function (or variable) <code>void foo()</code> was defined in a C program and you attempt to use it in a C++ program:</p>\n\n<pre><code>void foo();\nint main()\n{\n    foo();\n}\n</code></pre>\n\n<p>The C++ linker expects names to be mangled, so you have to declare the function as:</p>\n\n<pre><code>extern \"C\" void foo();\nint main()\n{\n    foo();\n}\n</code></pre>\n\n<p>Equivalently, instead of being defined in a C program, the function (or variable) <code>void foo()</code> was defined in C++ but with C linkage:</p>\n\n<pre><code>extern \"C\" void foo();\n</code></pre>\n\n<p>and you attempt to use it in a C++ program with C++ linkage.</p>\n\n<p>If an entire library is included in a header file (and was compiled as C code); the include will need to be as follows;</p>\n\n<pre><code>extern \"C\" {\n    #include \"cheader.h\"\n}\n</code></pre>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 12574420, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<h3>Incorrectly importing/exporting methods/classes across modules/dll (compiler specific).</h3>\n\n<p>MSVS requires you to specify which symbols to export and import using <code>__declspec(dllexport)</code> and <code>__declspec(dllimport)</code>.</p>\n\n<p>This dual functionality is usually obtained through the use of a macro:</p>\n\n<pre><code>#ifdef THIS_MODULE\n#define DLLIMPEXP __declspec(dllexport)\n#else\n#define DLLIMPEXP __declspec(dllimport)\n#endif\n</code></pre>\n\n<p>The macro <code>THIS_MODULE</code> would only be defined in the module that exports the function. That way, the declaration:</p>\n\n<pre><code>DLLIMPEXP void foo();\n</code></pre>\n\n<p>expands to</p>\n\n<pre><code>__declspec(dllexport) void foo();\n</code></pre>\n\n<p>and tells the compiler to export the function, as the current module contains its definition. When including the declaration in a different module, it would expand to   </p>\n\n<pre><code>__declspec(dllimport) void foo();\n</code></pre>\n\n<p>and tells the compiler that the definition is in one of the libraries you linked against (also see <strong>1)</strong>). </p>\n\n<p>You can similary import/export classes:</p>\n\n<pre><code>class DLLIMPEXP X\n{\n};\n</code></pre>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 12574423, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<p><strong>If all else fails, recompile.</strong></p>\n\n<p>I was recently able to get rid of an unresolved external error in Visual Studio 2012 just by recompiling the offending file. When I re-built, the error went away. </p>\n\n<p>This usually happens when two (or more) libraries have a cyclic dependency. Library A attempts to use symbols in B.lib and library B attempts to use symbols from A.lib. Neither exist to start off with. When you attempt to compile A, the link step will fail because it can't find B.lib. A.lib will be generated, but no dll. You then compile B, which will succeed and generate B.lib. Re-compiling A will now work because B.lib is now found.</p>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 20358542, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<p><strong>undefined reference to <code>WinMain@16</code> or similar <em>'unusual'</em> <code>main()</code> entry point reference</strong> (especially for <a href=\"/questions/tagged/visual-studio\" class=\"post-tag\" title=\"show questions tagged &#39;visual-studio&#39;\" rel=\"tag\">visual-studio</a>).</p>\n\n<p>You may have missed to choose the right project type with your actual IDE. The IDE may want to bind e.g. Windows Application projects to such entry point function (as specified in the missing reference above), instead of the commonly used <code>int main(int argc, char** argv);</code> signature.</p>\n\n<p>If your IDE supports <em>Plain Console Projects</em> you might want to choose this project type, instead of a windows application project.</p>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 22160071, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<p><strong>Linked .lib file is associated to a .dll</strong></p>\n\n<p>I had the same issue. Say i have projects MyProject and TestProject. I had effectively linked the lib file for MyProject to the TestProject. However, this lib file was produced as the DLL for the MyProject was built. Also, I did not contain source code for all methods in the MyProject, but only access to the DLL's entry points. </p>\n\n<p>To solve the issue, i built the MyProject as a LIB, and linked TestProject to this .lib file (i copy paste the generated .lib file into the TestProject folder). I can then build again MyProject as a DLL. It is compiling since the lib to which TestProject is linked does contain code for all methods in classes in MyProject. </p>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 22866347, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<p>Also if you're using 3rd party libraries make sure you have the correct 32/64 bit binaries</p>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 24291364, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<h3>The order in which interdependent linked libraries are specified is wrong.</h3>\n\n<p>The order in which libraries are linked DOES matter if the libraries depend on each other. In general, if library <code>A</code> depends on library <code>B</code>, then <code>libA</code> <strong>MUST</strong> appear before <code>libB</code> in the linker flags.</p>\n\n<p>For example:</p>\n\n<pre><code>// B.h\n#ifndef B_H\n#define B_H\n\nstruct B {\n    B(int);\n    int x;\n};\n\n#endif\n\n// B.cpp\n#include \"B.h\"\nB::B(int xx) : x(xx) {}\n\n// A.h\n#include \"B.h\"\n\nstruct A {\n    A(int x);\n    B b;\n};\n\n// A.cpp\n#include \"A.h\"\n\nA::A(int x) : b(x) {}\n\n// main.cpp\n#include \"A.h\"\n\nint main() {\n    A a(5);\n    return 0;\n};\n</code></pre>\n\n<p>Create the libraries:</p>\n\n<pre><code>$ g++ -c A.cpp\n$ g++ -c B.cpp\n$ ar rvs libA.a A.o \nar: creating libA.a\na - A.o\n$ ar rvs libB.a B.o \nar: creating libB.a\na - B.o\n</code></pre>\n\n<p>Compile:</p>\n\n<pre><code>$ g++ main.cpp -L. -lB -lA\n./libA.a(A.o): In function `A::A(int)':\nA.cpp:(.text+0x1c): undefined reference to `B::B(int)'\ncollect2: error: ld returned 1 exit status\n$ g++ main.cpp -L. -lA -lB\n$ ./a.out\n</code></pre>\n\n<p>So to repeat again, the order <strong>DOES</strong> matter!</p>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 24675715, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<p>Microsoft offers a <code>#pragma</code> to reference the correct library at link time;</p>\n\n<pre><code>#pragma comment(lib, \"libname.lib\")\n</code></pre>\n\n<p>In addition to the library path including the directory of the library, this should be the full name of the library.</p>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 25744263, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<p><strong>what is an \"undefined reference/unresolved external symbol\"</strong></p>\n\n<p>I'll try to explain what is an \"undefined reference/unresolved external symbol\".</p>\n\n<blockquote>\n  <p>note: i use g++ and Linux and all examples is for it </p>\n</blockquote>\n\n<p>For example we have a code</p>\n\n<pre><code>// src1.cpp\nvoid print();\n\nstatic int local_var_name; // 'static' makes variable not visible for other modules\nint global_var_name = 123;\n\nint main()\n{\n    print();\n    return 0;\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>// src2.cpp\nextern \"C\" int printf (const char*, ...);\n\nextern int global_var_name;\n//extern int local_var_name;\n\nvoid print ()\n{\n    // printf(\"%d%d\\n\", global_var_name, local_var_name);\n    printf(\"%d\\n\", global_var_name);\n}\n</code></pre>\n\n<p>Make object files</p>\n\n<pre><code>$ g++ -c src1.cpp -o src1.o\n$ g++ -c src2.cpp -o src2.o\n</code></pre>\n\n<p>After assembler phase we have an object file, which contains any symbols to export. \nLook at the symbols</p>\n\n<pre><code>$ readelf --symbols src1.o\n  Num:    Value          Size Type    Bind   Vis      Ndx Name\n     5: 0000000000000000     4 OBJECT  LOCAL  DEFAULT    4 _ZL14local_var_name # [1]\n     9: 0000000000000000     4 OBJECT  GLOBAL DEFAULT    3 global_var_name     # [2]\n</code></pre>\n\n<p>I've rejected some lines from output, because they are not matter</p>\n\n<p>So, we see follow symbols to export.</p>\n\n<pre><code>[1] - this is our static (local) variable (important - Bind has a type \"LOCAL\")\n[2] - this is our global variable\n</code></pre>\n\n<p>src2.cpp exports nothing and we have seen no its symbols</p>\n\n<p>Link our object files</p>\n\n<pre><code>$ g++ src1.o src2.o -o prog\n</code></pre>\n\n<p>and run it</p>\n\n<pre><code>$ ./prog\n123\n</code></pre>\n\n<p>Linker sees exported sysmbols and links it. Now we try to uncomment lines in src2.cpp like here</p>\n\n<pre><code>// src2.cpp\nextern \"C\" int printf (const char*, ...);\n\nextern int global_var_name;\nextern int local_var_name;\n\nvoid print ()\n{\n    printf(\"%d%d\\n\", global_var_name, local_var_name);\n}\n</code></pre>\n\n<p>and rebuild an object file</p>\n\n<pre><code>$ g++ -c src2.cpp -o src2.o\n</code></pre>\n\n<p>OK (no errors), because we only build object file, linking is not done yet.\nTry to link</p>\n\n<pre><code>$ g++ src1.o src2.o -o prog\nsrc2.o: In function `print()':\nsrc2.cpp:(.text+0x6): undefined reference to `local_var_name'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>It is happened because our local_var_name is static, i.e. it is not visible for other modules. \nNow more deeply. Get translation phase output</p>\n\n<pre><code>$ g++ -S src1.cpp -o src1.s\n\n// src1.s\nlook src1.s\n\n    .file   \"src1.cpp\"\n    .local  _ZL14local_var_name\n    .comm   _ZL14local_var_name,4,4\n    .globl  global_var_name\n    .data\n    .align 4\n    .type   global_var_name, @object\n    .size   global_var_name, 4\nglobal_var_name:\n    .long   123\n    .text\n    .globl  main\n    .type   main, @function\nmain:\n; assembler code, not interesting for us\n.LFE0:\n    .size   main, .-main\n    .ident  \"GCC: (Ubuntu 4.8.2-19ubuntu1) 4.8.2\"\n    .section    .note.GNU-stack,\"\",@progbits\n</code></pre>\n\n<p>So, we've seen there is no label for local_var_name, that's why linker not found it. But we are hackers :) and we can fix it. Open src1.s in your texteditor and change</p>\n\n<pre><code>.local  _ZL14local_var_name\n.comm   _ZL14local_var_name,4,4\n</code></pre>\n\n<p>to </p>\n\n<pre><code>    .globl  local_var_name\n    .data\n    .align 4\n    .type   local_var_name, @object\n    .size   local_var_name, 4\nlocal_var_name:\n    .long   456789\n</code></pre>\n\n<p>i.e. you should have like bellow</p>\n\n<pre><code>    .file   \"src1.cpp\"\n    .globl  local_var_name\n    .data\n    .align 4\n    .type   local_var_name, @object\n    .size   local_var_name, 4\nlocal_var_name:\n    .long   456789\n    .globl  global_var_name\n    .align 4\n    .type   global_var_name, @object\n    .size   global_var_name, 4\nglobal_var_name:\n    .long   123\n    .text\n    .globl  main\n    .type   main, @function\nmain:\n; ...\n</code></pre>\n\n<p>we have changed visibility of local_var_name and set its value to 456789\nTry to build an object file from it</p>\n\n<pre><code>$ g++ -c src1.s -o src2.o\n</code></pre>\n\n<p>ok, see readelf output (symbols)</p>\n\n<pre><code>$ readelf --symbols src1.o\n8: 0000000000000000     4 OBJECT  GLOBAL DEFAULT    3 local_var_name\n</code></pre>\n\n<p>now local_var_name has Bind GLOBAL (was LOCAL)</p>\n\n<p>link</p>\n\n<pre><code>$ g++ src1.o src2.o -o prog\n</code></pre>\n\n<p>and run it</p>\n\n<pre><code>$ ./prog \n123456789\n</code></pre>\n\n<p>ok, we hack it :)</p>\n\n<p>So, as result - an \"undefined reference/unresolved external symbol error\" happens when linker cannot find global symbols in object files.</p>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 26233563, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<h2>A bug in the compiler/IDE</h2>\n\n<p>I recently had this problem, and it turned out <a href=\"http://stackoverflow.com/questions/27748699/unresolved-reference-to-constructor-which-is-defined/27748920#27748920\">it was a bug in Visual Studio Express 2013</a>. I had to remove a source file from the project and re-add it to overcome the bug.</p>\n\n<p>Steps to try if you believe it could be a bug in compiler/IDE:</p>\n\n<ul>\n<li>Clean the project (some IDEs have an option to do this, you can also\nmanually do it by deleting the object files)</li>\n<li>Try start a new project,\ncopying all source code from the original one.</li>\n</ul>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 27749171, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<p><strong>Visual Studio NuGet package needs to be updated for new toolset version</strong></p>\n\n<p>I just had this problem trying to link libpng with Visual Studio 2013.  The problem is that the package file only had libraries for Visual Studio 2010 and 2012.</p>\n\n<p>The correct solution is to hope the developer releases an updated package and then upgrade, but it worked for me by hacking in an extra setting for VS2013, pointing at the VS2012 library files.</p>\n\n<p>I edited the package (in the <code>packages</code> folder inside the solution's directory) by finding <code>packagename\\build\\native\\packagename.targets</code> and inside that file, copying all the <code>v110</code> sections.  I changed the <code>v110</code> to <code>v120</code> in <strong>the condition fields only</strong> being very careful to leave the filename paths all as <code>v110</code>.  This simply allowed Visual Studio 2013 to link to the libraries for 2012, and in this case, it worked.</p>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 27995557, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<p><strong>A wrapper around GNU ld that doesn't support linker scripts</strong></p>\n\n<p>Some .so files are actually <a href=\"https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/4/html/Using_ld_the_GNU_Linker/simple-commands.html\">GNU ld linker scripts</a>, e.g. <a href=\"https://www.threadingbuildingblocks.org/download\">libtbb.so</a> file is an ASCII text file with this contents:</p>\n\n<pre><code>INPUT (libtbb.so.2)\n</code></pre>\n\n<p>Some more complex builds may not support this. For example, if you include -v in the compiler options, you can see that the <a href=\"http://www.mainsoft.com/content/mainsoft-unix-and-linux-overview\">mainwin gcc wrapper mwdip</a> discards linker script command files in the verbose output list of libraries to link in. A simple work around is to replace the linker script input command file with a copy of the file instead (or a symlink), e.g.</p>\n\n<pre><code>cp libtbb.so.2 libtbb.so\n</code></pre>\n\n<p>Or you could replace the -l argument with the full path of the .so, e.g. instead of <code>-ltbb</code> do <code>/home/foo/tbb-4.3/linux/lib/intel64/gcc4.4/libtbb.so.2</code></p>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 29350920, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<p>This is one of most confusion error messages that every VC++ programmers have seen time and time again. Let\u2019s make things clarity first.</p>\n\n<p><strong>A. What is symbol?</strong>\nIn short, a symbol is a name. It can be a variable name, a function name, a class name, a typedef name, or anything except those names and signs that belong to C++ language. It is user defined or introduced by a dependency library (another user defined).</p>\n\n<p><strong>B. What is external?</strong>\nIn VC++, every source file (.cpp,.c,etc.) is considered as a translation unit, the compiler compiles one unit at a time, and generate one object file(.obj) for current translation unit. (Note that every header file that this source file included will be preprocessed and will be considered as part of this translation unit)Everything within a translation unit is considered as internal, everything else is considered as external. In C++, you may reference an external symbol by using keywords like: extern, __declspec (dllimport) and so on.</p>\n\n<p><strong>C. What is \u201cresolve\u201d?</strong>\nResolve is a linking-time term. In linking-time, linker attempts to find the external definition for every symbol in object files that cannot find its definition internally. The scope of this searching process including:</p>\n\n<ul>\n<li>All object files that generated in compiling time</li>\n<li>All libraries (.lib) that is either explicitly or implicitly\nspecified as additional dependencies of this building application.</li>\n</ul>\n\n<p>This searching process is called resolve.</p>\n\n<p><strong>D. Finally, why Unresolved External Symbol?</strong>\nIf the linker cannot find the external definition for a symbol that has no definition internally, it reports an Unresolved External Symbol error.</p>\n\n<p><strong>E. Possible causes of LNK2019</strong>: Unresolved External Symbol error.\nWe already know that this error is due to the linker failed to find the definition of external symbols, the possible causes can be sorted as:</p>\n\n<ol>\n<li>Definition exists</li>\n</ol>\n\n<p>For example, if we have a function called foo defined in a.cpp:</p>\n\n<pre><code>int foo()\n{\n    return 0;\n}\n</code></pre>\n\n<p>In b.cpp we want to call function foo, so we add</p>\n\n<pre><code>void foo();\n</code></pre>\n\n<p>to declare function foo(), and call it in another function body, say <code>bar()</code>:</p>\n\n<pre><code>void bar()\n{\n    foo();\n}\n</code></pre>\n\n<p>Now when you build this code you will get a LNK2019 error complaining that foo is unresolved symbol. In this case, we know that foo() has its definition in a.cpp, but different from the one we are calling(different return value). This is the case that definition exists.</p>\n\n<ol start=\"2\">\n<li>Definition does not exist</li>\n</ol>\n\n<p>If we want to call some functions in a library, but the import library is not added into the additional dependency list (set from: <code>Project | Properties | Configuration Properties | Linker | Input | Additional Dependency</code>) of your project setting. Now the linker will report a LNK2019 since the definition is not exist in current searching scope.</p>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 29610614, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<h2>Use the linker to help diagnose the error</h2>\n\n<p>Most modern linkers include a verbose option that prints out to varying degrees;</p>\n\n<ul>\n<li>Link invocation (command line),</li>\n<li>Data on what libraries are included in the link stage,</li>\n<li>The location of the libraries,</li>\n<li>Search paths used.</li>\n</ul>\n\n<p>For gcc and clang; you would typically add <code>-v -Wl,--verbose</code> or <code>-v -Wl,-v</code> to the command line. More details can be found here;</p>\n\n<ul>\n<li>Linux <a href=\"http://linux.die.net/man/1/ld\" rel=\"nofollow\">ld man page</a>.</li>\n<li>LLVM <a href=\"http://llvm.org/releases/3.6.2/docs/CommandGuide/llvm-link.html#cmdoption-v\" rel=\"nofollow\">linker page</a>.</li>\n<li>\"An introduction to GCC\" <a href=\"http://www.network-theory.co.uk/docs/gccintro/gccintro_75.html\" rel=\"nofollow\">chapter 9</a>.</li>\n</ul>\n\n<p>For MSVC, <code>/VERBOSE</code> (in particular <code>/VERBOSE:LIB</code>) is added to the link command line.</p>\n\n<ul>\n<li>The MSDN page on the <a href=\"https://msdn.microsoft.com/en-us/library/wdsk6as6.aspx\" rel=\"nofollow\"><code>/VERBOSE</code> linker option</a>.</li>\n</ul>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 31650575, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<p>Suppose you have a big project written in c++ which has a thousand of .cpp files  and a thousand of .h files.And let's says the project also depends on ten static libraries . Let's says we are on Windows and we build our project in Visual Studio 20xx . When you press Ctr + F7 Visual Studio start compiling the whole solution ( suppose we have just one project in the solution )</p>\n\n<p><strong>What's the meaning of compilation ?</strong></p>\n\n<ul>\n<li>Visual Studio search into file <strong>.vcxproj</strong> and start compiling each file which has the extansion .cpp . Order of compilation is undefined.So you must not assume that the file main.cpp is compiled first</li>\n<li>If .cpp files depends on   additional .h files  in order to find symbols\nthat may or may not be defined in the file .cpp</li>\n<li>If exists one .cpp file in which the compiler could not find one symbol,a <strong>compiler time error</strong> raises with the message <em>Symbol x could not be found</em></li>\n<li>For each file with extension .cpp is generated an object file .o and also Visual Studio writes the output in a file named <em>ProjectName.Cpp.Clean.txt</em> which contains all object files that must be processed by linker.</li>\n</ul>\n\n<p>The Second step of compilation is done by Linker.Linker should merge all the object file and build finally the output ( which may be an executable or a library)</p>\n\n<p><strong>Steps In Linking a project</strong>    </p>\n\n<ul>\n<li>Parse all the object files and find the definition which was only declared in headers ( eg : The code of one method of a class as is mentioned in previous answers,or event the initialization of a static variable which is member inside a class)</li>\n<li>If one symbol could not be found in object files he also is searched in Additional Libraries.For adding a new library to a project <strong>Configuration properties</strong> -> <strong>VC++ Directories</strong>  -> <strong>Library Directories</strong> and here you specified additional folder for searching libraries and <strong>Configuration properties</strong> -> <strong>Linker</strong> -> <strong>Input</strong> for specifying the name of the library. \n-If the Linker could not find the symbol which you write in one .cpp he raises an <strong>linker time error</strong> which may sounds like \n<code>error LNK2001: unresolved external symbol \"void __cdecl foo(void)\" (?foo@@YAXXZ)</code></li>\n</ul>\n\n<p><strong>Observation</strong></p>\n\n<ol>\n<li>Once the Linker find one symbol he doesn't search in other libraries for it</li>\n<li>The order of linking libraries <strong>does matter</strong>.</li>\n<li>If Linker find an external symbol in one static library he includes the symbol in output of the project.However if the library is shared( dynamic ) he doesn't includes the code ( symbols ) in output, but  <em>Run-Time</em> crashes may occur</li>\n</ol>\n\n<p><strong>How To Solve this kind of error</strong></p>\n\n<p>Compiler Time Error : </p>\n\n<ul>\n<li>Make sure you write your c++ project syntactical correct.</li>\n</ul>\n\n<p>Linker Time Error</p>\n\n<ul>\n<li>Define all your symbol which you declare in your header files</li>\n<li>Use <code>#pragma once</code> for allowing compiler not to include one header if it was already included by the current .cpp which is compiled</li>\n<li>Make sure that your external library doesn't contains symbols that may enter in conflict with other symbols you defined in your header files</li>\n<li>When you use template make sure you include the definition of each template function in header file for allowing the compiler to generate appropriate code for any instantiations .  </li>\n</ul>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 31946065, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<p>Since people seem to be directed to this question when it comes to linker errors I am going to add this here.</p>\n\n<p>One possible reason for linker errors with GCC 5.2.0 is that a new libstdc++ library ABI is now chosen by default.</p>\n\n<blockquote>\n  <p>If you get linker errors about undefined references to symbols that involve types in the std::__cxx11 namespace or the tag [abi:cxx11] then it probably indicates that you are trying to link together object files that were compiled with different values for the _GLIBCXX_USE_CXX11_ABI macro. This commonly happens when linking to a third-party library that was compiled with an older version of GCC. If the third-party library cannot be rebuilt with the new ABI then you will need to recompile your code with the old ABI.</p>\n</blockquote>\n\n<p>So if you suddenly get linker errors when switching to a GCC after 5.1.0 this would be a thing to check out.</p>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 32500124, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<h2>Clean and rebuild</h2>\n\n<p>A \"clean\" of the build can remove the \"dead wood\" that may be left lying around from previous builds, failed builds, incomplete builds and other build system related build issues.</p>\n\n<p>In general the IDE or build will include some form of \"clean\" function, but this may not be correctly configured (e.g. in a manual makefile) or may fail (e.g. the intermediate or resultant binaries are read-only).</p>\n\n<p>Once the \"clean\" has completed, verify that the \"clean\" has succeeded and all the generated intermediate file (e.g. an automated makefile) have been successfully removed.</p>\n\n<p>This <em>process can be seen as a final resort, but is often a good first step</em>; especially if the code related to the error has recently been added (either locally or from the source repository).</p>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 35599792, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<h2>Befriending templates...</h2>\n\n<p>Given the code snippet of a template type with a friend operator (or function);</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Foo {\n    friend std::ostream&amp; operator&lt;&lt; (std::ostream&amp; os, const Foo&lt;T&gt;&amp; a);\n};\n</code></pre>\n\n<p>The <code>operator&lt;&lt;</code> is being declared as a non-template function. For every type <code>T</code> used with <code>Foo</code>, there needs to be a non-templated <code>operator&lt;&lt;</code>. For example, if there is a type <code>Foo&lt;int&gt;</code> declared, then there must be an operator implementation as follows;</p>\n\n<pre><code>std::ostream&amp; operator&lt;&lt; (std::ostream&amp; os, const Foo&lt;int&gt;&amp; a) {/*...*/}\n</code></pre>\n\n<p>Since it is not implemented, the linker fails to find it and results in the error.</p>\n\n<p>To correct this, you can declare a template operator before the <code>Foo</code> type and then declare as a friend, the appropriate instantiation. The syntax is a little awkward, but is looks as follows;</p>\n\n<pre><code>// forward declare the Foo\ntemplate &lt;typename&gt;\nclass Foo;\n\n// forward declare the operator &lt;&lt;\ntemplate &lt;typename T&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp;, const Foo&lt;T&gt;&amp;);\n\ntemplate &lt;typename T&gt;\nclass Foo {\n    friend std::ostream&amp; operator&lt;&lt; &lt;&gt;(std::ostream&amp; os, const Foo&lt;T&gt;&amp; a);\n    // note the required &lt;&gt;        ^^^^\n    // ...\n};\n\ntemplate &lt;typename T&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp;, const Foo&lt;T&gt;&amp;)\n{\n  // ... implement the operator\n}\n</code></pre>\n\n<p>The above code limits the friendship of the operator to the corresponding instantiation of <code>Foo</code>, i.e. the <code>operator&lt;&lt; &lt;int&gt;</code> instantiation is limited to access the private members of the instantiation of <code>Foo&lt;int&gt;</code>.</p>\n\n<p>Alternatives include;</p>\n\n<ul>\n<li><p>Allowing the friendship to extend to all instantiations of the templates, as follows;</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Foo {\n    template &lt;typename T1&gt;\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Foo&lt;T1&gt;&amp; a);\n    // ...\n};\n</code></pre></li>\n<li><p>Or, the implementation for the <code>operator&lt;&lt;</code> can be done inline inside the class definition;</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Foo {\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Foo&amp; a)\n    { /*...*/ }\n    // ...\n};\n</code></pre></li>\n</ul>\n\n<p><em>Note</em>, when the declaration of the operator (or function) only appears in the class, the name is not available for \"normal\" lookup, only for argument dependent lookup, from <a href=\"http://en.cppreference.com/w/cpp/language/friend\" rel=\"nofollow\">cppreference</a>;</p>\n\n<blockquote>\n  <p>A name first declared in a friend declaration within class or class template X becomes a member of the innermost enclosing namespace of X, but is not accessible for lookup (except argument-dependent lookup that considers X) unless a matching declaration at the namespace scope is provided...</p>\n</blockquote>\n\n<p>There is further reading on template friends at <a href=\"http://en.cppreference.com/w/cpp/language/friend#Template_friends\" rel=\"nofollow\">cppreference</a> and the <a href=\"https://isocpp.org/wiki/faq/templates#template-friends\" rel=\"nofollow\">C++ FAQ</a>.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/e9221c4bb23f9cd0\" rel=\"nofollow\">Code listing showing the techniques above</a>.</p>\n\n<hr>\n\n<p><em>As a side note to the failing code sample; g++ warns about this as follows</em></p>\n\n<blockquote>\n  <p><code>warning: friend declaration 'std::ostream&amp; operator&lt;&lt;(...)' declares a non-template function [-Wnon-template-friend]</code></p>\n  \n  <p><code>note: (if this is not what you intended, make sure the function template has already been declared and add &lt;&gt; after the function name here)</code> </p>\n</blockquote>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 35891188, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<h2>Inconsistent <code>UNICODE</code> definitions</h2>\n\n<p>A Windows UNICODE build is built with <code>TCHAR</code> etc. being defined as <code>wchar_t</code> etc. When not building with <code>UNICODE</code> defined as build with <code>TCHAR</code> defined as <code>char</code> etc. These <code>UNICODE</code> and <code>_UNICODE</code> defines affect all the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd374131(v=vs.85).aspx\" rel=\"nofollow\">\"<code>T</code>\" string types</a>; <code>LPTSTR</code>, <code>LPCTSTR</code> and their elk.</p>\n\n<p>Building one library with <code>UNICODE</code> defined and attempting to link it in a project where <code>UNICODE</code> is not defined will result in linker errors since there will be a mismatch in the definition of <code>TCHAR</code>; <code>char</code> vs. <code>wchar_t</code>.</p>\n\n<p>The error usually includes a function a value with a <code>char</code> or <code>wchar_t</code> derived type, these could include <code>std::basic_string&lt;&gt;</code> etc. as well. When browsing through the affect function in the code, there will be a reference to <code>TCHAR</code> or <code>std::basic_string&lt;TCHAR&gt;</code> etc. This is a tell-tale sign that the code was originally intended for both a UNICODE and a Multi-Byte Character (or \"narrow\") build.</p>\n\n<p>To correct this, build all the required libraries and projects with a consistent definition of <code>UNICODE</code> (and <code>_UNICODE</code>).</p>\n\n<ol>\n<li><p>This can be done with either;</p>\n\n<pre><code>#define UNICODE\n#define _UNICODE\n</code></pre></li>\n<li><p>Or in the project settings;</p>\n\n<blockquote>\n  <p>Project Properties > General > Project Defaults > Character Set</p>\n</blockquote></li>\n<li><p>Or on the command line;</p>\n\n<pre><code>/DUNICODE /D_UNICODE\n</code></pre></li>\n</ol>\n\n<p>The alternative is applicable as well, if UNICODE is not intended to be used, make sure the defines are not set, and/or the multi-character setting is used in the projects and consistently applied.</p>\n\n<p>Do not forget to be consistent between the \"Release\" and \"Debug\" builds as well.</p>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 36475406, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}, {"body": "<p><strong>Getting unmanaged/native C++/CLI class in a DLL into a unmanaged unit test in Visual Studio</strong></p>\n\n<p><strong>Problem</strong></p>\n\n<p>I'm using the MS directions <a href=\"https://msdn.microsoft.com/en-us/library/hh270864.aspx\" rel=\"nofollow\">\"Unit testing native code with Test Explorer\"</a></p>\n\n<p>First I create an unmanaged DLL using the templates.  That gives me:</p>\n\n<p>Win32Project1.h</p>\n\n<pre><code>#ifdef WIN32PROJECT1_EXPORTS\n#define WIN32PROJECT1_API __declspec(dllexport)\n#else\n#define WIN32PROJECT1_API __declspec(dllimport)\n#endif\n\n// This class is exported from the Win32Project1.dll\nclass WIN32PROJECT1_API CWin32Project1 {\npublic:\n    CWin32Project1(void);\n\n    bool Foo();\n};\n\nextern WIN32PROJECT1_API int nWin32Project1;\n\nWIN32PROJECT1_API int fnWin32Project1(void);\n</code></pre>\n\n<p>Win32Project1.cpp</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"Win32Project1.h\"\n\n\n// This is an example of an exported variable\nWIN32PROJECT1_API int nWin32Project1=0;\n\n// This is an example of an exported function.\nWIN32PROJECT1_API int fnWin32Project1(void)\n{\n    return 42;\n}\n\n// This is the constructor of a class that has been exported.\n// see Win32Project1.h for the class definition\nCWin32Project1::CWin32Project1()\n{\n    return;\n}\n\nbool CWin32Project1::Foo() {return true;}\n</code></pre>\n\n<p>Then I create an unmanaged unit test project from the templates and add a unit test.</p>\n\n<p>UnitTest1.cpp</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"CppUnitTest.h\"\n#include \"..\\Win32Project1\\Win32Project1.h\"\n\nusing namespace Microsoft::VisualStudio::CppUnitTestFramework;\n\nnamespace UnitTest1\n{       \n    TEST_CLASS(UnitTest1)\n    {\n    public:\n\n        TEST_METHOD(TestMethod1)\n        {\n            auto bar = new CWin32Project1();\n            Assert::AreEqual(true, bar-&gt;Foo());\n        }\n\n    };\n}\n</code></pre>\n\n<p>When I compile this, I get the errors:</p>\n\n<pre><code>1&gt;unittest1.obj : error LNK2019: unresolved external symbol \"__declspec(dllimport) public: __thiscall CWin32Project1::CWin32Project1(void)\" ... referenced in function \"public: void __thiscall UnitTest1::UnitTest1::TestMethod1(void)\" (?TestMethod1@UnitTest1@1@QAEXXZ)\n1&gt;unittest1.obj : error LNK2019: unresolved external symbol \"__declspec(dllimport) public: bool __thiscall CWin32Project1::Foo(void)\" ... referenced in function \"public: void __thiscall UnitTest1::UnitTest1::TestMethod1(void)\"\n</code></pre>\n\n<p><strong>Solution</strong></p>\n\n<p>UnitTest1.vcxproj needs the following changes:</p>\n\n<pre><code>&lt;AdditionalLibraryDirectories&gt;$(SolutionDir)Debug;$(VCInstallDir)UnitTest\\lib;%(AdditionalLibraryDirectories)&lt;/AdditionalLibraryDirectories&gt;\n&lt;AdditionalDependencies&gt;Win32Project1.lib;%(AdditionalDependencies)&lt;/AdditionalDependencies&gt;\n</code></pre>\n", "title": "What is an undefined reference/unresolved external symbol error and how do I fix it?", "answer_id": 37169908, "question_id": 12573816, "tags": ["c++", "linker-error", "undefined-reference", "c++-faq", "unresolved-external"]}], "link": "http://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix", "question_id": 12573816}, {"body": "<p>In Windows 7, you could go into a programs compatibility settings and check off to always run as an Administrator. Is there a similar option in Windows 8? </p>\n\n<p>I've always disabled UAC on my machines, and did the same after my Windows 8 upgrade, or so I thought. It turns out there is no <code>off</code> option, only turning off the notifications. </p>\n\n<p>This means nothing is run as an Administrator despite being in the Administrator group. I need to keep closing and reopening my consoles\\Visual Studio when I try to debug (attach to process, not <kbd>F5</kbd>), which is very frustrating. </p>\n\n<p>It's really annoying that I need to either remember to take extra steps to open it as an Administrator or tell it to close and re-open when I go to debug for the first time.</p>\n", "title": "Can you force Visual Studio to always run as an Administrator in Windows 8?", "tags": ["visual-studio", "windows-8", "uac"], "answers": [{"body": "<p>After looking on Super User I found <a href=\"http://superuser.com/questions/462912\">this question</a> which explains how to do this with the shortcut on the start screen. Similarly you can do the same when Visual Studio is pinned to the task bar. In either location:</p>\n\n<ol>\n<li>Right click the Visual Studio icon</li>\n<li>Go to <code>Properties</code></li>\n<li>Under the <code>Shortcut tab</code> select <code>Advanced</code></li>\n<li>Check <code>Run as administrator</code></li>\n</ol>\n\n<p>Unlike in Windows 7 this only works if you launch the application from the shortcut you changed. After updating both Visual Studio shortcuts it seems to also work when you open a solution file from Explorer.</p>\n\n<p><strong>Update Warning:</strong>\nIt looks like one of the major flaws in running Visual Studio with elevated permissions is since Explorer isn't running with them as well you can't drag and drop files into Visual Studio for editing. You need to open them through the file open dialog. Nor can you double click any file associated to Visual Studio and have it open in Visual Studio (aside from solutions it seems) because you'll get an error message saying <code>There was a problem sending the command to the program.</code> Once I uncheck to always start with elevated permissions (using VSCommands) then I'm able to open files directly and drop them into an open instance of Visual Studio.</p>\n\n<p><strong>Update For The Daring:</strong>\nDespite there being no UI to turn off UAC like in the past, that I saw at least, you can still do so through the registry. The key to edit is:</p>\n\n<pre><code>HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\nEnableLUA - DWORD 1-Enabled, 0-Disabled\n</code></pre>\n\n<p>After changing this Windows will prompt you to restart. Once restarted you'll be back to everything running with admin permissions if you're an admin. The issues I reported above are now gone as well.</p>\n", "title": "Can you force Visual Studio to always run as an Administrator in Windows 8?", "answer_id": 12257385, "question_id": 12257110, "tags": ["visual-studio", "windows-8", "uac"]}, {"body": "<p>You can also download <a href=\"http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8\">VSCommands for VS2012</a> by Squared Infinity which has a feature to change it to run as admin (as well as some other cool bits and pieces)</p>\n\n<p><img src=\"http://i.stack.imgur.com/4VoyY.png\" alt=\"enter image description here\"></p>\n\n<p><strong>Update</strong></p>\n\n<p>One can install the commands from the Visual Studio menu bar using <code>Tools</code>-><code>Extensions and Updates</code> selecting <code>Online</code> and searching for <code>vscommands</code> where then one selects <code>VSCommands for Visual Studio 20XX</code> depending on whether using 2012 or 2013 (or greater going forward) and download and install.</p>\n", "title": "Can you force Visual Studio to always run as an Administrator in Windows 8?", "answer_id": 12258763, "question_id": 12257110, "tags": ["visual-studio", "windows-8", "uac"]}, {"body": "<p>VSCommands didn't work for me and caused a problem when I installed Visual Studio 2010 aside of Visual Studio 2012.</p>\n\n<p>After some experimentations I found the trick:</p>\n\n<p>Go to HKEY_CURRENT_USER\\Software\\Microsoft\\Windows NT\\CurrentVersion\\AppCompatFlags\\Layers and add an entry with the name \"C:\\Program Files (x86)\\Common Files\\Microsoft Shared\\MSEnv\\VSLauncher.exe\" and the value \"RUNASADMIN\". </p>\n\n<p>This should solve your issue. I've also blogged about that: <a href=\"http://daniellang.net/always-run-visual-studio-as-administrator-in-windows-8/\">http://daniellang.net/always-run-visual-studio-as-administrator-in-windows-8/</a></p>\n", "title": "Can you force Visual Studio to always run as an Administrator in Windows 8?", "answer_id": 12848517, "question_id": 12257110, "tags": ["visual-studio", "windows-8", "uac"]}, {"body": "<p>In Windows 8, you have to right-click <code>devenv.exe</code> and select \"Troubleshoot compatibility\".</p>\n\n<ol>\n<li>select \"Troubleshoot program\"</li>\n<li>check \"The program requires additional permissions\"</li>\n<li>click \"Next\", click \"Test the program...\"</li>\n<li>wait for the program to launch</li>\n<li>click \"Next\"</li>\n<li>select \"Yes, save these settings for this program\"</li>\n<li>click \"Close\"</li>\n</ol>\n", "title": "Can you force Visual Studio to always run as an Administrator in Windows 8?", "answer_id": 12859334, "question_id": 12257110, "tags": ["visual-studio", "windows-8", "uac"]}, {"body": "<ol>\n<li>On Windows 8 Start Menu select All Apps</li>\n<li>Right click on Visual Studio 2010 Icon</li>\n<li>Select Open File Location</li>\n<li>Right click on Visual Studio 2010 shortcut icon</li>\n<li>Click Advanced button</li>\n<li>Check the Run as Administrator checkbox</li>\n<li>Click OK</li>\n</ol>\n", "title": "Can you force Visual Studio to always run as an Administrator in Windows 8?", "answer_id": 13131821, "question_id": 12257110, "tags": ["visual-studio", "windows-8", "uac"]}, {"body": "<p>This is a copy of <a href=\"http://superuser.com/questions/462912/always-start-visual-studio-as-an-administrator-on-windows-8/512928#512928\">my answer to a similar post on SuperUser</a>:</p>\n\n<h2>Option 1 - Set VSLauncher.exe and DevEnv.exe to always run as admin</h2>\n\n<p>To have Visual Studio always run as admin <strong>when opening any .sln file</strong>:</p>\n\n<ol>\n<li>Navigate to <code>C:\\Program Files (x86)\\Common Files\\Microsoft Shared\\MSEnv\\VSLauncher.exe</code>.</li>\n<li>Right-click on <code>VSLauncher.exe</code> and choose <strong>Troubleshoot compatibility</strong>.</li>\n<li>Choose <strong>Troubleshoot program</strong>.</li>\n<li>Check off <strong>The program requires additional permissions</strong> and hit Next.</li>\n<li>Click the <strong>Test the program...</strong> button to launch VS.</li>\n<li>Click Next, then hit <strong>Yes, save these settings for this program</strong>, and then the <strong>close</strong> buton.</li>\n</ol>\n\n<p>To have Visual Studio always run as an admin <strong>when just opening visual studio directly</strong>, do the same thing to the DevEnv.exe file(s).  These file are located at:</p>\n\n<h3>Visual Studio 2010</h3>\n\n<p><code>C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\Common7\\IDE\\devenv.exe</code></p>\n\n<h3>Visual Studio 2012</h3>\n\n<p><code>C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\Common7\\IDE\\devenv.exe</code></p>\n\n<h3>Visual Studio 2013</h3>\n\n<p><code>C:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\Common7\\IDE\\devenv.exe</code></p>\n\n<h3>Visual Studio 2015</h3>\n\n<p><code>C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE\\devenv.exe</code></p>\n\n<h2>Option 2 - Use VSCommands extension for Visual Studio</h2>\n\n<p>Install the free <a href=\"http://superuser.com/questions/462912/always-start-visual-studio-as-an-administrator-on-windows-8/512928#512928\">VSCommands extension for Visual Studio</a> (it's in <a href=\"http://visualstudiogallery.msdn.microsoft.com/site/search?query=VSCommands&amp;f%5B0%5D.Value=VSCommands&amp;f%5B0%5D.Type=SearchText&amp;ac=4\" rel=\"nofollow\">the Visual Studio Extensions Gallery</a>) and then configure it to always have Visual Studio start with admin privileges by going to Tools -> VSCommands -> Options -> IDE Enhancements -> General and check off <code>Always start Visual Studio with elevated permissions</code> and click the Save button.</p>\n\n<p><strong>Note:</strong> VSCommands is not currently available for VS 2015, but their site says they are working on updating it to support VS 2015.</p>\n\n<h2>My Opinion</h2>\n\n<p>I prefer Option 2 because:</p>\n\n<ul>\n<li>it also allows you to easily turn off this functionality.</li>\n<li>VSCommands comes with lots of other great features so I always have it installed anyways.</li>\n<li>it's just easier to do than option 1.</li>\n</ul>\n", "title": "Can you force Visual Studio to always run as an Administrator in Windows 8?", "answer_id": 13650073, "question_id": 12257110, "tags": ["visual-studio", "windows-8", "uac"]}, {"body": "<p>If you using <strong>Total Commander</strong> as I do, you should do the same for Total Commander to be run as admin always. Then you will be able to open sql file on double click in same SQL Server management instance, or to open any Visual Studio file on double click and not have multiple instances open.</p>\n\n<p>This Troubleshoot program adds registry value to HKEY_CURRENT_USER\\Software\\Microsoft\\Windows NT\\CurrentVersion\\AppCompatFlags\\Layers for any program, so if you like to write it directly you can.</p>\n", "title": "Can you force Visual Studio to always run as an Administrator in Windows 8?", "answer_id": 16460170, "question_id": 12257110, "tags": ["visual-studio", "windows-8", "uac"]}, {"body": "<p>Just find the program in Program Files directory (or in other location). Right click on the EXE file, on the second tab at the bottom check the checkbox of forcing running that program with administration privileges.\nFrom now all shortcuts of the exe file will be fired with administration privileges :)</p>\n", "title": "Can you force Visual Studio to always run as an Administrator in Windows 8?", "answer_id": 17303271, "question_id": 12257110, "tags": ["visual-studio", "windows-8", "uac"]}, {"body": "<p>I know this is a little late, but I just figured out how to do this by modifying (read, \"hacking\") the manifest of the devenv.exe file.  I should have come here first because the stated solutions seem a little easier, and probably more supported by Microsoft. :)</p>\n\n<p>Here's how I did it:</p>\n\n<ol>\n<li>Create a project in VS called \"Exe Manifests\". (I think any version will work, but I used 2013 Pro. Also, it doesn't really matter what you name it.)</li>\n<li>\"Add existing item\" to the project, browse to the Visual Studio exe, and click Okay. In my case, it was \"C:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\Common7\\IDE\\devenv.exe\".</li>\n<li>Double-click on the \"devenv.exe\" file that should now be listed as a file in your project. It should bring up the exe in a resource editor.</li>\n<li>Expand the \"RT_MANIFEST\" node, then double-click on \"1\" under that. This will open up the executable's manifest in the binary editor.</li>\n<li>Find the requestedExecutionLevel tag and replace \"asInvoker\" with \"requireAdministrator\". A la:  <code>&lt;requestedExecutionLevel level=\"requireAdministrator\" uiAccess=\"false\"&gt;&lt;/requestedExecutionLevel&gt;</code></li>\n<li>Save the file.  </li>\n</ol>\n\n<p>You've just saved the copy of the executable that was added to your project. Now you need to back up the original and copy your <em>modified</em> exe to your installation directory.</p>\n\n<p>As I said, this is probably not the <em>right</em> way to do it, but it seems to work. If anyone knows of any negative fallout or requisite wrist-slapping that needs to happen, please chime in!</p>\n", "title": "Can you force Visual Studio to always run as an Administrator in Windows 8?", "answer_id": 27609031, "question_id": 12257110, "tags": ["visual-studio", "windows-8", "uac"]}, {"body": "<p>I found a simple way to do this on EightForums (<a href=\"http://www.eightforums.com/tutorials/9564-run-administrator-windows-8-a.html\" rel=\"nofollow\">Option 8</a>), create a string value under HKEY_CURRENT_USER\\Software\\Microsoft\\Windows NT\\CurrentVersion\\AppCompatFlags\\Layers. Set the name to the path to the program and the value to ~RUNASDMIN.\nNext time you open the program it will open as an administrator</p>\n\n<pre><code>[HKEY_CURRENT_USER\\Software\\Microsoft\\Windows NT\\CurrentVersion\\AppCompatFlags\\Layers]\n    \"C:\\\\Program Files (x86)\\\\Microsoft Visual Studio 12.0\\\\Common7\\\\IDE\\\\devenv.exe\"=\"~RUNASADMIN\"\n</code></pre>\n", "title": "Can you force Visual Studio to always run as an Administrator in Windows 8?", "answer_id": 37430674, "question_id": 12257110, "tags": ["visual-studio", "windows-8", "uac"]}, {"body": "<p>Visual Studio does elevate itself automatically if the project's application manifest specifies an administrative <code>requestedExecutionLevel</code>, so you just need to edit that. Visual Studio will detect that and relaunch itself as administrator when needed.</p>\n", "title": "Can you force Visual Studio to always run as an Administrator in Windows 8?", "answer_id": 37880413, "question_id": 12257110, "tags": ["visual-studio", "windows-8", "uac"]}, {"body": "<p>This error occurs because of The current user didn\u2019t have a sufficient privilege to open Visual Studio.</p>\n\n<p>To overcome this issue by right-clicking on visual studio and select run as administrator at every time you intend to open it</p>\n\n<p>Also, you can check the compatibility troubleshooting </p>\n\n<ul>\n<li>Right Click on Visual Studio > Select Troubleshoot compatibility.</li>\n<li>Select Troubleshoot Program.</li>\n<li>Check The program requires additional permissions.</li>\n<li>Click on Test the program.</li>\n<li>Wait for a moment till the program launch.Click Next.</li>\n<li>Select Yes, save these settings for this program. </li>\n<li>Wait for resolving the issue.</li>\n<li>Make sure the final status is fixed.Click Close.</li>\n</ul>\n\n<p>To find the detail steps with image for How to apply that check this link</p>\n\n<p><a href=\"https://blog.devoworx.net/2016/01/06/this-task-requires-the-application-to-have-elevated-permissions/\" rel=\"nofollow\">https://blog.devoworx.net/2016/01/06/this-task-requires-the-application-to-have-elevated-permissions/</a></p>\n\n<p>Hope it helps you</p>\n", "title": "Can you force Visual Studio to always run as an Administrator in Windows 8?", "answer_id": 38275839, "question_id": 12257110, "tags": ["visual-studio", "windows-8", "uac"]}], "link": "http://stackoverflow.com/questions/12257110/can-you-force-visual-studio-to-always-run-as-an-administrator-in-windows-8", "question_id": 12257110}, {"body": "<h3>What is this?</h3>\n\n<p>This is a number of answers about warnings, errors and notices you might encounter while programming PHP and have no clue how to fix. This is also a Community Wiki, so everyone is invited to participate in adding to and maintaining this list. </p>\n\n<h3>Why is this?</h3>\n\n<p>Questions like <a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770075#12770075\">\"Headers already sent\"</a> or <a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12769983#12769983\">\"Calling a member of a non-object\"</a> pop up frequently on Stack&nbsp;Overflow. The root cause of those questions is always the same. So the answers to those questions typically repeat them and then show the OP which line to change in his/her particular case. These answers do not add any value to the site because they only apply to the OP's particular code. Other users having the same error can not easily read the solution out of it because they are too localized. That is sad, because once you understood the root cause, fixing the error is trivial. Hence, this list tries to explain the solution in a general way to apply.</p>\n\n<h3>What should I do here?</h3>\n\n<p>If your question has been marked as a duplicate of this, please find your error message below and apply the fix to your code. The answers usually contain further links to investigate in case it shouldn't be clear from the general answer alone.</p>\n\n<p>If you want to contribute, please add your \"favorite\" error message, warning or notice, one per answer, a short description what it means (even if it is only highlighting terms to their manual page), a possible solution or debugging approach and a listing of existing Q&amp;A that are of value. Also, feel free to improve any existing answers.</p>\n\n<h2>The List</h2>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12772851#12772851\">Nothing is seen. The page is empty and white.</a> (also known as <em>White Page/Screen Of Death</em>)</li>\n<li><a href=\"http://stackoverflow.com/a/24423272/476\">Code doesn't run/what looks like parts of my PHP code are output</a></li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770075#12770075\">Warning: Cannot modify header information - headers already sent</a></li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770072#12770072\">Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given</a> a.k.a.<br>\n<a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770072#12770072\">Warning: mysql_fetch_array(): supplied argument is not a valid MySQL result resource</a> a.k.a.<br>\n<a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770072#12770072\">Warning: mysqli_num_rows() expects parameter 1 to be mysqli_result, boolean given</a> (or similar variations)</li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/14067623#14067623\">Warning: <em>[function]</em> expects parameter 1 to be resource, boolean given</a></li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12820243#12820243\">Warning: <em>[function]</em>: failed to open stream: <em>[reason]</em></a></li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12772244#12772244\">Warning: open_basedir restriction in effect</a></li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770089/#21507314\">Warning: Division by zero</a></li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770089/#27678436\">Warning: Illegal string offset 'XXX'</a></li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/22316776#22316776\">Parse error: syntax error, unexpected '['</a></li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770089/#12770089\">Parse error: syntax error, unexpected T_XXX</a></li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/13935532#13935532\">Parse error:  syntax error, unexpected T_ENCAPSED_AND_WHITESPACE</a></li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770129#12770129\">Parse error: syntax error, unexpected T_PAAMAYIM_NEKUDOTAYIM</a></li>\n<li><a href=\"http://stackoverflow.com/a/15539535/1723893\">Parse error: syntax error, unexpected T_VARIABLE</a></li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770179#12770179\">Fatal error: Allowed memory size of XXX bytes exhausted (tried to allocate XXX bytes)</a></li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12769983#12769983\">Fatal error: Call to a member function ... on a non-object</a></li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12784048#12784048\">Fatal Error: Call to Undefined function XXX</a></li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/13879461#13879461\">Fatal Error: Cannot redeclare XXX</a></li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770530#12770530\">Fatal error: Can't use function return value in write context</a></li>\n<li><a href=\"http://stackoverflow.com/questions/1885302/php-what-does-this-error-mean-abstract-method-must-be-compatible\">Fatal error: Declaration of AAA::BBB() must be compatible with that of CCC::BBB()</a> '</li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770317#12770317\">Fatal error: Using $this when not in object context</a></li>\n<li><a href=\"http://stackoverflow.com/a/24507107/476\">Notice: Array to string conversion</a></li>\n<li><a href=\"http://stackoverflow.com/a/26572398/367456\">Notice: Trying to get property of non-object error</a></li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12778634#12778634\">Notice: Undefined variable</a></li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770836#12770836\">Notice: Undefined Index</a></li>\n<li><a href=\"http://stackoverflow.com/a/21793407/3933332\">Notice: Undefined offset XXX</a> [Reference]</li>\n<li><a href=\"http://stackoverflow.com/a/17630869/367456\">Notice: Uninitialized string offset: XXX</a></li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12773272#12773272\">Notice: Use of undefined constant XXX - assumed 'XXX'</a></li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12771239#12771239\">MySQL: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ... at line ...</a></li>\n<li><a href=\"http://stackoverflow.com/a/21942832/367456\">Strict Standards: Non-static method <em>[&lt;class>::&lt;method>]</em> should not be called statically</a></li>\n</ul>\n\n<p>Also see </p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php\">Reference - What does this symbol mean in PHP?</a></li>\n</ul>\n", "title": "Reference - What does this error mean in PHP?", "tags": ["php", "debugging", "warnings"], "answers": [{"body": "<h3>Fatal error: Call to a member function ... on a non-object</h3>\n\n<p>Happens with code similar to <code>xyz-&gt;method()</code> where <code>xyz</code> is not an object and therefore that <code>method</code> can not be called.</p>\n\n<p>This is a fatal error which will stop the script (forward compatibility notice: It will become a catchable error starting with PHP 7).</p>\n\n<p>Most often this is a sign that the code has missing checks for error conditions. Validate that an object is actually an object before calling its methods.</p>\n\n<p>A <a href=\"http://stackoverflow.com/search?q=%5Bphp%5D+%5Bpdo%5D+Fatal+error%3A+Call+to+a+member+function+on+a+non-object\">typical</a> example would be</p>\n\n<pre><code>// ... some code using PDO\n$statement = $pdo-&gt;prepare('invalid query', ...);\n$statement-&gt;execute(...);\n</code></pre>\n\n<p>In the example above, the query cannot be prepared and <code>prepare()</code> will assign <code>false</code> to <code>$statement</code>. Trying to call the <code>execute()</code> method will then result in the Fatal Error because <code>false</code> is a \"non-object\" because the value is a boolean.</p>\n\n<p>Figure out <em>why</em> your function returned a boolean instead of an object. For example, check the <code>$pdo</code> object for the last error that occurred. Details on how to debug this will depend on how errors are handled for the particular function/object/class in question.</p>\n\n<p>If even the <code>-&gt;prepare</code> is failing then your <code>$pdo</code> database handle object <a href=\"http://stackoverflow.com/questions/4910796/scope-error-call-to-a-member-function-prepare-on-a-non-object\">didn't get passed into the current scope</a>. Find where it got defined. Then pass it as a parameter, store it as property, or share it via the global scope.</p>\n\n<p>Related Questions:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/q/54566/727208\">Call to a member function on a non-object</a></li>\n<li><a href=\"http://stackoverflow.com/search?q=%5Bphp%5D+Fatal+error%3A+Call+to+a+member+function+on+a+non-object\">List all PHP \"Fatal error: Call to a member function ... on a non-object\" Questions on Stackoverflow</a></li>\n</ul>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 12769983, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given</h3>\n\n<p>First and foremost:</p>\n\n<blockquote>\n  <p><a href=\"http://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php\"><strong>Please, don't use <code>mysql_*</code> functions in new code</strong></a>. They are no longer maintained <a href=\"https://wiki.php.net/rfc/mysql_deprecation\">and are officially deprecated</a>. See the <a href=\"http://uk.php.net/manual/en/function.mysql-connect.php\"><strong>red box</strong></a>? Learn about <a href=\"http://en.wikipedia.org/wiki/Prepared_statement\"><em>prepared statements</em></a> instead, and use <a href=\"http://php.net/pdo\">PDO</a> or <a href=\"http://php.net/mysqli\">MySQLi</a> - <a href=\"http://php.net/manual/en/mysqlinfo.api.choosing.php\">this article</a> will help you decide which. If you choose PDO, <a href=\"http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers\">here is a good tutorial</a>.</p>\n</blockquote>\n\n<hr>\n\n<p>This happens when you try to fetch data from the result of <code>mysql_query</code> but the query failed.</p>\n\n<p>This is a warning and won't stop the script, but will make your program wrong.</p>\n\n<p>You need to check the result returned by <code>mysql_query</code> by </p>\n\n<pre><code>$res = mysql_query($sql);\nif (!$res) {\n   die(mysql_error());\n}\n// after checking, do the fetch\n</code></pre>\n\n<p>Related Questions:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select\">mysql_fetch_array() expects parameter 1 to be resource, boolean given in select</a></li>\n<li><a href=\"http://stackoverflow.com/search?q=Warning:%20mysql_fetch_array%28%29%20expects%20parameter%201%20to%20be%20resource&amp;submit=search\">All \"mysql_fetch_array() expects parameter 1 to be resource, boolean given\" Questions on Stackoverflow</a></li>\n</ul>\n\n<p>Related Errors:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/14067623#14067623\">Warning: <em>[function]</em> expects parameter 1 to be resource, boolean given</a></li>\n</ul>\n\n<p>Other <code>mysql*</code> functions that also expect a mysql result resource as parameter will produce the same error for the same reason.</p>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 12770072, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Warning: Cannot modify header information - headers already sent</h3>\n\n<p>Happens when your script tries to send a HTTP header to the client but there already was output before, which resulted in headers to be already sent to the client.</p>\n\n<p>This is an <a href=\"http://www.php.net/manual/en/errorfunc.constants.php\"><code>E_WARNING</code></a> and it will not stop the script.</p>\n\n<p>A typical example would be a template file like this:</p>\n\n<pre><code>&lt;html&gt;\n    &lt;?php session_start(); ?&gt;\n    &lt;head&gt;&lt;title&gt;My Page&lt;/title&gt;\n&lt;/html&gt;\n...\n</code></pre>\n\n<p>The <code>session_start()</code> function will try to send headers with the session cookie to the client. But PHP already sent headers when it wrote the <code>&lt;html&gt;</code> element to the output stream. You'd have to move the <code>session_start()</code> to the top.</p>\n\n<p>You can solve this by going through the lines <em>before</em> the code triggering the Warning and check where it outputs. Move any header sending code before that code. </p>\n\n<p>An often overlooked output is new lines after PHP's closing <code>?&gt;</code>. It is considered a standard practice to omit <code>?&gt;</code> when it is the last thing in the file. Likewise, another common cause for this warning is when the opening <code>&lt;?php</code> has an empty space, line, or invisible character before it, causing the webserver to send the headers and the whitespace/newline thus when PHP starts parsing won't be able to submit any header.</p>\n\n<p>If your file has more than one <code>&lt;?php ... ?&gt;</code> code block in it, you should not have any spaces in between them. (Note: You might have multiple blocks if you had code that was automatically constructed)</p>\n\n<p>Also make sure you don't have any Byte Order Marks in your code, for example when the encoding of the script is UTF-8 with BOM.</p>\n\n<p>Related Questions:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/8028957/headers-already-sent-by-php\">Headers already sent by PHP</a></li>\n<li><a href=\"http://stackoverflow.com/search?q=headers+already+sent+%5bphp%5d\">All PHP \"Headers already sent\" Questions on Stackoverflow</a></li>\n<li><a href=\"http://stackoverflow.com/search?q=BOM+php\">Byte Order Mark</a></li>\n<li><a href=\"http://stackoverflow.com/questions/4673747/what-php-functions-create-output\">What PHP Functions Create Output?</a></li>\n</ul>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 12770075, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Parse error: syntax error, unexpected T_XXX</h3>\n\n<p>Happens when you have <a href=\"http://php.net/tokens\"><code>T_XXX</code> token</a> in unexpected place, unbalanced (superfluous) parentheses, use of short tag without activating it in php.ini, and many more.</p>\n\n<p>Related Questions:</p>\n\n<ul>\n<li>Reference: <a href=\"http://stackoverflow.com/q/18050071/367456\">PHP Parse/Syntax Errors; and How to solve them?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/7059753/parse-error-syntax-error-unexpected\">Parse Error: syntax error: unexpected '{'</a></li>\n<li><a href=\"http://stackoverflow.com/questions/11482527/parse-error-syntax-error-unexpected-end-of-file-in-my-php-code\">Parse error: Syntax error, unexpected end of file in my PHP code</a></li>\n<li><a href=\"http://stackoverflow.com/questions/992403/parse-error-syntax-error-unexpected-in-fix\">Parse error: syntax error, unexpected '&lt;' in - Fix?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/9762216/parse-error-syntax-error-unexpected\">Parse error: syntax error, unexpected '?'</a></li>\n</ul>\n\n<p>For further help see:</p>\n\n<ul>\n<li><a href=\"http://phpcodechecker.com/\">http://phpcodechecker.com/</a> - Which does provide some more helpful explanations on your syntax woes.</li>\n</ul>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 12770089, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Parse error: syntax error, unexpected T_PAAMAYIM_NEKUDOTAYIM</h3>\n\n<p>The scope resolution operator is also called \"Paamayim Nekudotayim\" from the Hebrew \u05e4\u05e2\u05de\u05d9\u05d9\u05dd \u05e0\u05e7\u05d5\u05d3\u05ea\u05d9\u05d9\u05dd\u200e. which means \"double colon\" or \"double dot twice\".</p>\n\n<p>This error typically happens if you inadvertently put <code>::</code> in your code.</p>\n\n<p>Related Questions:</p>\n\n<ul>\n<li>Reference: <a href=\"http://stackoverflow.com/q/18050071/367456\">PHP Parse/Syntax Errors; and How to solve them?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/2903564/what-do-two-colons-mean-in-php\">What do two colons mean in PHP?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/3173501/in-php-whats-the-difference-between-double-colon-and-arrow\">What&#39;s the difference between :: (double colon) and -&gt; (arrow) in PHP?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/8734823/unexpected-t-paamayim-nekudotayim-expecting-t-ns-separator\">Unexpected T_PAAMAYIM_NEKUDOTAYIM, expecting T_NS_Separator</a></li>\n</ul>\n\n<p>Documentation:</p>\n\n<ul>\n<li><a href=\"http://php.net/manual/en/language.oop5.paamayim-nekudotayim.php\">Scope Resolution Operator (::)</a></li>\n</ul>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 12770129, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Fatal error: Allowed memory size of XXX bytes exhausted (tried to allocate XXX bytes)</h3>\n\n<p>There is not enough memory to run your script. PHP has reached the memory limit and stops executing it. This error is fatal, the script stops. The value of the <a href=\"http://php.net/memory_limit\">memory limit</a> can be configured either in the <code>php.ini</code> file or by using <code>ini_set('memory_limit', '128 M');</code> in the script (which will overwrite the value defined in <code>php.ini</code>). The purpose of the memory limit is to prevent a single PHP script from gobbling up all the available memory and bringing the whole web server down.</p>\n\n<p>The first thing to do is to minimise the amount of memory your script needs. For instance, if you're reading a large file into a variable or are fetching many records from a database and are storing them all in an array, that may use a lot of memory. Change your code to instead read the file line by line or fetch database records one at a time without storing them all in memory. This does require a bit of a conceptual awareness of what's going on behind the scenes and when data is stored in memory vs. elsewhere.</p>\n\n<p>If this error occurred when your script was not doing memory-intensive work, you need to check your code to see whether there is a memory leak. The <a href=\"http://php.net/manual/function.memory-get-usage.php\"><code>memory_get_usage</code></a> function is your friend.</p>\n\n<p>Related Questions:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/search?q=Fatal%20error%3a%20Allowed%20memory%20size%20of%20xxxx%20bytes%20exhausted\">All \"Fatal error: Allowed memory size of XXX bytes exhausted\" Questions on Stackoverflow</a></li>\n</ul>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 12770179, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Fatal error: Using $this when not in object context</h3>\n\n<p><a href=\"http://php.net/language.variables.basics\"><code>$this</code> is a special variable in PHP</a> which can not be assigned. If it is accessed in a context where it does not exist, this fatal error is given.</p>\n\n<p>This error can occur:</p>\n\n<ol>\n<li><p>If a non-static method is called statically. Example:</p>\n\n<pre><code>class Foo {\n   protected $var;\n   public function __construct($var) {\n       $this-&gt;var = $var;\n   }\n\n   public static function bar () {\n       // ^^^^^^\n       echo $this-&gt;var;\n       //   ^^^^^\n   }\n}\n\nFoo::bar();\n</code></pre>\n\n<p><strong><em>How to fix:</em></strong> review your code again, <code>$this</code> can only be used in object context, and should never be used in a static method. Also, a static method should not access the non-static property. Use <code>self::$static_property</code> to access the static property.</p></li>\n<li><p>If code from a class method has been copied over into a normal function or just the global scope <em>and</em> keeping the <code>$this</code> special variable.<br>\n<strong><em>How to fix:</em></strong> Review the code and replace <code>$this</code> with a different substitution variable.</p></li>\n</ol>\n\n<p>Related Questions:</p>\n\n<ol>\n<li>Call non-static method as static: <a href=\"http://stackoverflow.com/q/2350937/367456\">PHP Fatal error: Using $this when not in object context</a></li>\n<li>Copy over code: <a href=\"http://stackoverflow.com/q/1643931/367456\">Fatal error: Using $this when not in object context</a></li>\n<li><a href=\"http://stackoverflow.com/search?q=Fatal%20error:%20Using%20$this%20when%20not%20in%20object%20context\">All \"Using $this when not in object context\" Questions on Stackoverflow</a></li>\n</ol>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 12770317, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Fatal error: Can't use function return value in write context</h3>\n\n<p>This usually happens when using a function directly with <code>empty</code>.</p>\n\n<p>Example:</p>\n\n<pre><code>if (empty(is_null(null))) {\n  echo 'empty';\n}\n</code></pre>\n\n<p>This is because <a href=\"http://php.net/manual/en/function.empty.php\"><code>empty</code></a> is a language construct and not a function, it cannot be called with an expression as its argument in PHP versions before 5.5.  Prior to PHP 5.5, the argument to <code>empty()</code> must be a <em>variable</em>, but an arbitrary expression (such as a the return value of a function) is permissible in PHP 5.5+.</p>\n\n<p><code>empty</code>, despite its name, does not actually check if a variable is \"empty\". Instead, it checks if a variable doesn't exist, or <code>== false</code>. Expressions (like <code>is_null(null)</code> in the example) will always be deemed to exist, so here <code>empty</code> is only checking if it is equal to false. You could replace <code>empty()</code> here with <code>!</code>, e.g. <code>if (!is_null(null))</code>, or explicitly compare to false, e.g. <code>if (is_null(null) == false)</code>.</p>\n\n<p>Related Questions:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/4872184/fatal-error-cant-use-function-return-value\">Fatal error: Can't use function the return value</a></li>\n</ul>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 12770530, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Notice: Undefined Index</h3>\n\n<p>Happens when you try to access an array by a key that does not exist in the array. </p>\n\n<p>A typical example for an <code>Undefined Index</code> notice would be (<a href=\"http://codepad.org/bsoiXSzw\">demo</a>)</p>\n\n<pre><code>$data = array('foo' =&gt; '42', 'bar');\necho $data['spinach'];\necho $data[1];\n</code></pre>\n\n<p>Both <code>spinach</code> and <code>1</code> do not exist in the array, causing an <a href=\"http://www.php.net/manual/en/errorfunc.constants.php\"><code>E_NOTICE</code></a> to be triggered.</p>\n\n<p>The solution is to make sure the index or offset exists prior to accessing that index. This may mean that you need to fix a bug in your program to ensure that those indexes do exist when you expect them to. Or it may mean that you need to test whether the indexes exist using <a href=\"http://php.net/array_key_exists\"><code>array_key_exists</code></a> or <a href=\"http://php.net/isset\"><code>isset</code></a>:</p>\n\n<pre><code>$data = array('foo' =&gt; '42', 'bar');\nif (array_key_exists('spinach', $data)) {\n    echo $data['spinach'];\n}\nelse {\n    echo 'No key spinach in array';\n}\n</code></pre>\n\n<p>If you have code like:</p>\n\n<pre><code>&lt;?php echo $_POST['message']; ?&gt;\n&lt;form method=\"post\" action=\"\"&gt;\n    &lt;input type=\"text\" name=\"message\"&gt;\n    ...\n</code></pre>\n\n<p>then <code>$_POST['message']</code> will not be set when this page is first loaded and you will get the above error. Only when the form is submitted and this code is run a second time will the array index exist. You typically check for this with:</p>\n\n<pre><code>if ($_POST)  ..  // if the $_POST array is not empty\n// or\nif ($_SERVER['REQUEST_METHOD'] == 'POST') ..  // page was requested with POST\n</code></pre>\n\n<p>Related Questions:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index\">Reference: \u201cNotice: Undefined variable\u201d and \u201cNotice: Undefined index\u201d</a></li>\n<li><a href=\"http://stackoverflow.com/search?q=[php]+undefined+index\">All PHP \"Notice: Undefined Index\" Questions on Stackoverflow</a></li>\n<li><a href=\"http://php.net/arrays\">http://php.net/arrays</a></li>\n</ul>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 12770836, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>MySQL: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ... at line ...</h3>\n\n<p>This error is often caused because you forgot to properly escape the data passed to a MySQL query.</p>\n\n<p>An example of what <strong>not</strong> to do (the \"Bad Idea\"):</p>\n\n<pre><code>$query = \"UPDATE `posts` SET my_text='{$_POST['text']}' WHERE id={$_GET['id']}\";\nmysqli_query($db, $query);\n</code></pre>\n\n<p>This code could be included in a page with a form to submit, with an URL such as <a href=\"http://example.com/edit.php?id=10\" rel=\"nofollow\">http://example.com/edit.php?id=10</a> (to edit the post n\u00b010)</p>\n\n<p>What will happen if the submitted text contains single quotes? <code>$query</code> will end up with:</p>\n\n<pre><code>$query = \"UPDATE `posts` SET my_text='I'm a PHP newbie' WHERE id=10';\n</code></pre>\n\n<p>And when this query is sent to MySQL, it will complain that the syntax is wrong, because there is an extra single quote in the middle.</p>\n\n<p>To avoid such errors, you <strong>MUST</strong> always escape the data before use in a query.</p>\n\n<p>Escaping data before use in a SQL query is also very important because if you don't, your script will be open to SQL injections. An SQL injection may cause alteration, loss or modification of a record, a table or an entire database. This is a very serious security issue!</p>\n\n<p>Documentation:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php\">How can I prevent SQL-injection in PHP?</a></li>\n<li><a href=\"http://php.net/mysql_real_escape_string\" rel=\"nofollow\"><code>mysql_real_escape_string()</code></a>  </li>\n<li><a href=\"http://php.net/mysqli_real_escape_string\" rel=\"nofollow\"><code>mysqli_real_escape_string()</code></a>  </li>\n<li><a href=\"http://stackoverflow.com/questions/332365/xkcd-sql-injection-please-explain\">How does the SQL injection from the &quot;Bobby Tables&quot; XKCD comic work?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/5741187/sql-injection-that-gets-around-mysql-real-escape-string\">SQL injection that gets around mysql_real_escape_string()</a></li>\n</ul>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 12771239, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Warning: open_basedir restriction in effect</h3>\n\n<p>This warning can appear with various functions that are related to file and directory access. It warns about a configuration issue.</p>\n\n<p>When it appears, it means that access has been forbidden to some files.</p>\n\n<p>The warning itself does not break anything, but most often a script does not properly work if file-access is prevented. </p>\n\n<p>The fix is normally to change the <a href=\"http://www.php.net/manual/en/configuration.php\">PHP configuration</a>, the related setting is called <a href=\"http://www.php.net/manual/en/ini.core.php#ini.open-basedir\"><code>open_basedir</code></a>.</p>\n\n<p>Sometimes the wrong file or directory names are used, the fix is then to use the right ones.</p>\n\n<p>Related Questions:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/1846882/open-basedir-restriction-in-effect-file-is-not-within-the-allowed-paths\">open_basedir restriction in effect. File(/) is not within the allowed path(s):</a></li>\n<li><a href=\"http://stackoverflow.com/search?q=%5Bphp%5D+Warning%3A+open_basedir+restriction+in+effect\">All PHP \"Warning: open_basedir restriction in effect\" Querstions on Stackoverflow</a></li>\n</ul>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 12772244, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Nothing is seen. The page is empty and white.</h3>\n\n<p>Also known as the <em>White Page Of Death</em> or <em>White Screen Of Death</em>. This happens when error reporting is turned off and a fatal error (often syntax error) occurred.</p>\n\n<p>If you have error logging enabled, you will find the concrete error message in your error log. This will usually be in a file called \"php_errors.log\", either in a central location (e.g. <code>/var/log/apache2</code> on many Linux environments) or in the directory of the script itself (sometimes used in a shared hosting environment).</p>\n\n<p>Sometimes it might be more straightforward to temporarily enable the display of errors. The white page will then display the error message. Take care because these errors are visible  to everybody visiting the website.</p>\n\n<p>This can be easily done by adding at the top of the script the following PHP code:</p>\n\n<pre><code>ini_set('display_errors', 1); error_reporting(~0);\n</code></pre>\n\n<p>The code will turn on the display of errors and set reporting to the highest level.</p>\n\n<p>Since the <a href=\"http://php.net/ini_set\"><code>ini_set()</code></a> is executed at runtime it has no effects on parsing/syntax errors. Those errors will appear in the log. If you want to display them in the output as well (e.g. in a browser) you have to set the <a href=\"http://php.net/display_startup_errors\"><code>display_startup_errors</code></a> directive to <code>true</code>. Do this either in the <code>php.ini</code> or in a <code>.htaccess</code> or by <a href=\"http://docs.php.net/configuration.changes\">any other method that affects the configuration <em>before</em> runtime</a>.</p>\n\n<p>You can use the same methods to set the <a href=\"http://php.net/manual/pt_BR/errorfunc.configuration.php#ini.log-errors\">log_errors</a> and <a href=\"http://php.net/manual/pt_BR/errorfunc.configuration.php#ini.error-log\">error_log</a> directives to choose your own log file location.</p>\n\n<p>Looking in the log or using the display, you will get a much better error message and the line of code where your script comes to halt.</p>\n\n<p>Related questions:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/1475297/phps-white-screen-of-death\">PHP's white screen of death</a></li>\n<li><a href=\"http://stackoverflow.com/questions/2914127/white-screen-of-death\">White screen of death!</a></li>\n<li><a href=\"http://stackoverflow.com/questions/5680831/php-5-3-does-not-display-error-messages\">PHP Does Not Display Error Messages</a></li>\n<li><a href=\"http://stackoverflow.com/q/3075355/367456\">PHP emitting 500 on errors - where is this documented?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/845021/how-to-get-useful-error-messages-in-php\">How to get useful error messages in PHP?</a></li>\n<li><a href=\"http://stackoverflow.com/search?q=%5Bphp%5D+White+Page+Screen+Of+Death\">All PHP \"White Page of Death\" Questions on Stackoverflow</a></li>\n</ul>\n\n<p>Related errors:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770089/#12770089\">Parse error: syntax error, unexpected T_XXX</a></li>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12769983#12769983\">Fatal error: Call to a member function ... on a non-object</a></li>\n<li><a href=\"http://stackoverflow.com/a/24423272/476\">Code doesn't run/what looks like parts of my PHP code are output</a></li>\n</ul>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 12772851, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Notice: Use of undefined constant XXX - assumed 'XXX'</h3>\n\n<p>This notice occurs when a token is used in the code and appears to be a constant, but a constant by that name is not defined.</p>\n\n<p>One of the most common causes of this notice is failure to quote a string used as an associative array key.</p>\n\n<p>For example:</p>\n\n<pre><code>// Wrong\necho $array[key];\n\n// Right\necho $array['key'];\n</code></pre>\n\n<p>Another common causes is a missing <code>$</code> (dollar) sign in front of a variable name:</p>\n\n<pre><code>// Wrong\necho varName;\n\n// Right\necho $varName;\n</code></pre>\n\n<p>It can also be a sign that a needed PHP extension or library is missing when you try to access a constant defined by that library.</p>\n\n<p>Related Questions:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/2941169/what-does-the-php-error-message-notice-use-of-undefined-constant-mean\">What does the PHP error message \u201cNotice: Use of undefined constant\u201d mean?</a></li>\n</ul>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 12773272, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Notice: Undefined variable</h3>\n\n<p>Happens when you try to use a variable that wasn't previously defined.</p>\n\n<p>A typical example would be</p>\n\n<pre><code>foreach ($items as $item) {\n    // do something with item\n    $counter++;\n}\n</code></pre>\n\n<p>If you didn't define <code>$counter</code> before, the code above will trigger the notice.</p>\n\n<p>The correct way would be to set the variable before using it, even if it's just an empty string like </p>\n\n<pre><code>$counter = 0;\nforeach ($items as $item) {\n    // do something with item\n    $counter++;\n}\n</code></pre>\n\n<p>Related Questions:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/search?q=Notice%3A+Undefined+Variable+%5bphp%5d\">All PHP \"Notice: Undefined Variable\" Questions on Stackoverflow</a></li>\n<li><a href=\"http://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index\">PHP: &quot;Notice: Undefined variable&quot; and &quot;Notice: Undefined index&quot;</a></li>\n<li><a href=\"http://stackoverflow.com/questions/16959576/reference-what-is-variable-scope-and-which-variables-are-accessible-from-where/16959577#16959577\">Reference: What is variable scope, which variables are accessible from where and what are &quot;undefined variable&quot; errors?</a></li>\n</ul>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 12778634, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Fatal error: Call to undefined function XXX</h3>\n\n<p>Happens when you try to call a function that is not defined yet. Common causes include missing extensions and includes, conditional function declaration, function in function declaration or simple typos.</p>\n\n<p><strong>Example 1 - Conditional Function Declaration</strong></p>\n\n<pre><code>$someCondition = false;\nif ($someCondition === true) {\n    function fn() {\n        return 1;\n    }\n}\necho fn(); // triggers error\n</code></pre>\n\n<p>In this case, <code>fn()</code> will never be declared because <code>$someCondition</code> is not true. </p>\n\n<p><strong>Example 2 - Function in Function Declaration</strong></p>\n\n<pre><code>function createFn() \n{\n    function fn() {\n        return 1;\n    }\n}\necho fn(); // triggers error\n</code></pre>\n\n<p>In this case, <code>fn</code> will only be declared once <code>createFn()</code> gets called. Note that subsequent calls to <code>createFn()</code> will trigger an error about Redeclaration of an Existing function.</p>\n\n<p>You may also see this for a PHP built-in function. Try searching for the function in <a href=\"http://php.net/manual/en/funcref.php\">the official manual</a>, and check what \"extension\" (PHP module) it belongs to, and what versions of PHP support it.</p>\n\n<p>In case of a missing extension, install that extension and enable it in php.ini. Refer to the Installation Instructions in the PHP Manual for the extension your function appears in.</p>\n\n<p>If the function was introduced in a newer version of PHP from what you are using, you may find links to alternative implementations in the manual or its comment section. If it has been removed from PHP, look for information about why, as it may no longer be necessary.</p>\n\n<p>In case of missing includes, make sure to include the file declaring the function before calling the function. </p>\n\n<p>In case of typos, fix the typo.</p>\n\n<p>Related Questions:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/search?q=Fatal+error%3A+Call+to+undefined+function\">http://stackoverflow.com/search?q=Fatal+error%3A+Call+to+undefined+function</a></li>\n</ul>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 12784048, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Warning: <em>[function]</em>: failed to open stream: <em>[reason]</em></h3>\n\n<p>It happens when you call a file usually by <code>include</code>, <code>require</code> or <code>fopen</code> and PHP couldn't find the file or have not enough permission to load the file.</p>\n\n<p>This can happen for a variety of reasons :</p>\n\n<ul>\n<li>file path is wrong</li>\n<li>file path is relative</li>\n<li>include path is wrong</li>\n<li>permissions are too restrictive</li>\n<li>SELinux is in force</li>\n<li>and many more ...</li>\n</ul>\n\n<p>One common mistake is to not use an absolute path. This can be easily solved by using a full path or <a href=\"http://php.net/manual/language.constants.predefined.php\" rel=\"nofollow\">magic constants</a> like <code>__DIR__</code> or  <code>dirname(__FILE__)</code>:</p>\n\n<pre><code>include __DIR__ . '/inc/globals.inc.php';\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>require dirname(__FILE__) . '/inc/globals.inc.php';\n</code></pre>\n\n<p>Ensuring the right path is used is one step in troubleshooting these issues, this can also be related to non-existing files, rights of the filesystem preventing access or open basedir restrictions by PHP itself.</p>\n\n<p>The best way to solve this problem quickly is to follow the troubleshooting checklist below.</p>\n\n<p>Related Questions:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/36577020/failed-to-open-stream-no-such-file-or-directory\">Troubleshooting checklist : Failed to open stream</a></li>\n</ul>\n\n<p>Related Errors:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12772244#12772244\">Warning: open_basedir restriction in effect</a></li>\n</ul>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 12820243, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Fatal error: Cannot redeclare class <em>[class name]</em></h3>\n\n<h3>Fatal error: Cannot redeclare <em>[function name]</em></h3>\n\n<p>This means you're either using the same function/class name twice and need to rename one of them,  or it is because you have used <code>require</code> or <code>include</code> where you should be using <code>require_once</code> or <code>include_once</code>.</p>\n\n<p>When a class or a function is declared in PHP, it is immutable, and cannot later be declared with a new value.</p>\n\n<p>Consider the following code:</p>\n\n<p><em>class.php</em></p>\n\n<pre><code>&lt;?php\n\nclass MyClass\n{\n    public function doSomething()\n    {\n        // do stuff here\n    }\n}\n</code></pre>\n\n<p><em>index.php</em></p>\n\n<pre><code>&lt;?php\n\nfunction do_stuff()\n{\n   require 'class.php';\n   $obj = new MyClass;\n   $obj-&gt;doSomething();\n}\n\ndo_stuff();\ndo_stuff();\n</code></pre>\n\n<p>The second call to <code>do_stuff()</code> will produce the error above. By changing <code>require</code> to <code>require_once</code>, we can be certain that the file that contains the definition of <code>MyClass</code> will only be loaded once, and the error will be avoided.</p>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 13879461, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Parse error:  syntax error, unexpected T_ENCAPSED_AND_WHITESPACE</h3>\n\n<p>This error is most often encountered when attempting to reference an array value with a <em>quoted key</em> for interpolation inside a double-quoted string, when the entire complex variable construct is not enclosed in <code>{}</code>.</p>\n\n<h3>The error case:</h3>\n\n<p>This will result in <code>Unexpected T_ENCAPSED_AND_WHITESPACE</code>:</p>\n\n<pre><code>echo \"This is a double-quoted string with a quoted array key in $array['key']\";\n//---------------------------------------------------------------------^^^^^\n</code></pre>\n\n<h3>Possible fixes:</h3>\n\n<p>In a double-quoted string, PHP will permit array key strings to be used <em>unquoted</em>, and will not issue an <code>E_NOTICE</code>.  So the above could be written as:</p>\n\n<pre><code>echo \"This is a double-quoted string with an un-quoted array key in $array[key]\";\n//------------------------------------------------------------------------^^^^^\n</code></pre>\n\n<p>The entire complex array variable and key(s) can be enclosed in <code>{}</code>, in which case they <em>should</em> be quoted to avoid an <code>E_NOTICE</code>.  <a href=\"http://php.net/manual/en/language.types.string.php#language.types.string.syntax.double\">The PHP documentation</a> recommends this syntax for complex variables.</p>\n\n<pre><code>echo \"This is a double-quoted string with a quoted array key in {$array['key']}\";\n//--------------------------------------------------------------^^^^^^^^^^^^^^^\n// Or a complex array property of an object:\necho \"This is a a double-quoted string with a complex {$object-&gt;property-&gt;array['key']}\";\n</code></pre>\n\n<p>Of course, the alternative to <em>any</em> of the above is to concatenate the array variable in instead of interpolate it:</p>\n\n<pre><code>echo \"This is a double-quoted string with an array variable \" . $array['key'] . \" concatenated inside.\";\n//----------------------------------------------------------^^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>For reference, see the section on <strong>Variable Parsing</strong> in <a href=\"http://php.net/manual/en/language.types.string.php#language.types.string.syntax.double\">the PHP Strings manual page</a></p>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 13935532, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Warning: <em>[function]</em> expects parameter 1 to be resource, boolean given</h3>\n\n<p>(A more general variation of <a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770072#12770072\">Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given</a>)</p>\n\n<p>Resources are a <a href=\"http://php.net/manual/en/language.types.resource.php\">type</a> in PHP (like strings, integers or objects). A resource is an opaque blob with no inherently meaningful value of its own. A resource is specific to and defined by a certain set of PHP functions or extension. For instance, the Mysql extension <a href=\"http://php.net/manual/en/mysql.resources.php\">defines two resource types</a>:</p>\n\n<blockquote>\n  <p>There are two resource types used in the MySQL module. The first one is the link identifier for a database connection, the second a resource which holds the result of a query.</p>\n</blockquote>\n\n<p>The cURL extension defines another <a href=\"http://php.net/manual/en/curl.resources.php\">two resource types</a>:</p>\n\n<blockquote>\n  <p>... a cURL handle and a cURL multi handle.</p>\n</blockquote>\n\n<p>When <code>var_dump</code>ed, the values look like this:</p>\n\n<pre><code>$resource = curl_init();\nvar_dump($resource);\n\nresource(1) of type (curl)\n</code></pre>\n\n<p>That's all most resources are, a numeric identifier (<code>(1)</code>) of a certain type (<code>(curl)</code>).</p>\n\n<p>You carry these resources around and pass them to different functions for which such a resource means something. Typically these functions allocate certain data in the background and a resource is just a reference which they use to keep track of this data internally.</p>\n\n<hr>\n\n<p>The \"<strong>... expects parameter 1 to be resource, boolean given</strong>\" error is typically the result of an unchecked operation that was supposed to create a resource, but returned <code>false</code> instead. For instance, the <a href=\"http://php.net/manual/en/function.fopen.php\"><code>fopen</code> function</a> has this description:</p>\n\n<blockquote>\n  <p><strong>Return Values</strong></p>\n  \n  <p>Returns a file pointer resource on success, or <code>FALSE</code> on error.</p>\n</blockquote>\n\n<p>So in this code, <code>$fp</code> will either be a <code>resource(x) of type (stream)</code> or <code>false</code>:</p>\n\n<pre><code>$fp = fopen(...);\n</code></pre>\n\n<p>If you do not check whether the <code>fopen</code> operation succeed or failed and hence whether <code>$fp</code> is a valid resource or <code>false</code> and pass <code>$fp</code> to another function which expects a resource, you may get the above error:</p>\n\n<pre><code>$fp   = fopen(...);\n$data = fread($fp, 1024);\n\nWarning: fread() expects parameter 1 to be resource, boolean given\n</code></pre>\n\n<p>You always need to error check the return value of functions which are trying to allocate a resource <strong><em>and may fail</em></strong>:</p>\n\n<pre><code>$fp = fopen(...);\n\nif (!$fp) {\n    trigger_error('Failed to allocate resource');\n    exit;\n}\n\n$data = fread($fp, 1024);\n</code></pre>\n\n<p>Related Errors:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770072#12770072\">Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given</a></li>\n</ul>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 14067623, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Parse error: syntax error, unexpected T_VARIABLE</h3>\n\n<p>Possible scenario</p>\n\n<p>I can't seem to find where my code has went wrong. Here is my full error:</p>\n\n<blockquote>\n  <p>Parse error: syntax error, unexpected T_VARIABLE on line x</p>\n</blockquote>\n\n<p>What I am trying </p>\n\n<pre><code>$sql = 'SELECT * FROM dealer WHERE id=\"'$id.'\"';\n</code></pre>\n\n<p>Answer</p>\n\n<p><strong>Parse error:</strong> A problem with the syntax of your program, such as leaving a semicolon off of the end of a statement or, like the case above, missing the <code>.</code> operator. The interpreter stops running your program when it encounters a parse error.</p>\n\n<p>In simple words this is a syntax error, meaning that there is something in your code stopping it from being parsed correctly and therefore running.</p>\n\n<p><strong>What you should do</strong> is check carefully at the lines around where the error is for any simple mistakes.</p>\n\n<p>That error message means that in line x of the file, the PHP interpreter was expecting to see an open parenthesis but instead, it encountered something called <code>T_VARIABLE</code>. That <code>T_VARIABLE</code> thing is called a <code>token</code>. It's the PHP interpreter's way of expressing different fundamental parts of programs. When the interpreter reads in a program, it translates what you've written into a list of tokens. Wherever you put a variable in your program, there is a<code>T_VARIABLE</code> token in the interpreter's list.</p>\n\n<p><a href=\"http://php.net/tokens\"><strong>Good read: List of Parser Tokens</strong></a></p>\n\n<p>So make sure you enable at least <code>E_PARSE</code> in your <code>php.ini</code>. Parse errors should not exist in production scripts.</p>\n\n<p>I always recommended to add the following statement, while coding:</p>\n\n<pre><code>error_reporting(E_ALL);\n</code></pre>\n\n<p><a href=\"http://php.net/manual/en/function.error-reporting.php\">PHP error reporting</a> </p>\n\n<p>Also a good idea to use an IDE which will let you know parse errors while typing. You can use:</p>\n\n<ol>\n<li><a href=\"http://netbeans.org/downloads/\">NetBeans</a> (fine peace of beauty, free software) (the best in my opinion)</li>\n<li><a href=\"http://www.jetbrains.com/phpstorm/\">PhpStorm</a> (uncle Gordon love this: P, paid plan, contains proprietary and free software)</li>\n<li><a href=\"http://www.eclipse.org/downloads/packages/eclipse-php-developers/heliosr\">Eclipse</a> (beauty and the beast, free software)</li>\n</ol>\n\n<p>Related Questions:</p>\n\n<ul>\n<li>Reference: <a href=\"http://stackoverflow.com/q/18050071/367456\">PHP Parse/Syntax Errors; and How to solve them?</a></li>\n</ul>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 15539535, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Notice: Uninitialized string offset: <code>*</code></h3>\n\n<p>As the name indicates, such type of error occur, when you are most likely trying to iterate over, or find a value from array with a non-existing key. </p>\n\n<p>Consider you, are trying to show every letter from <code>$string</code> </p>\n\n<pre><code>$string = 'ABCD'; \nfor ($i=0, $len = strlen($string); $i &lt;= $len; $i++){\n    echo \"$string[$i] \\n\"; \n}\n</code></pre>\n\n<p>The above example will generate (<a href=\"https://eval.in/38350\" rel=\"nofollow\">online demo</a>):</p>\n\n<pre><code>A\nB\nC\nD\nNotice: Uninitialized string offset: 4 in XXX on line X\n</code></pre>\n\n<p>And, as soon as the script finishes echoing <code>D</code> you'll get the error, because inside the <code>for()</code> loop, you have told PHP to show you the from first to fifth string character from <code>'ABCD'</code> Which, exists, but since the loop starts to count from <code>0</code> and echoes <code>D</code> by the time it reaches to <code>4</code>, it will throw an offset error. </p>\n\n<p>Similar Errors:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/q/14086365/367456\">Illegal string offset 'option 1'</a></li>\n</ul>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 17630869, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Warning: Division by zero</h3>\n\n<p>The warning message 'Division by zero' is one of the most commonly asked questions among new PHP developers.  This error will not cause an exception, therefore, some developers will occasionally suppress the warning by adding the error suppression operator @ before the expression.  For example:</p>\n\n<pre><code>$value = @(2 / 0);\n</code></pre>\n\n<p>But, like with any warning, the best approach would be to track down the cause of the warning and resolve it.  The cause of the warning is going to come from any instance where you attempt to divide by 0, a variable equal to 0, or a variable which has not been assigned (because NULL == 0) because the result will be 'undefined'.</p>\n\n<p>To correct this warning, you should rewrite your expression to check that the value is not 0, if it is, do something else.  If the value is zero you should not divide, or change the value to 1 and then divide so the division results in the equivalent of having divided only by the additional variable.</p>\n\n<pre><code>if ( $var1 == 0 ) { // check if var1 equals zero\n    $var1 = 1; // var1 equaled zero so change var1 to equal one instead\n    $var3 = ($var2 / $var1); // divide var1/var2 ie. 1/1\n} else {\n    $var3 = ($var2 / $var1); // if var1 does not equal zero, divide\n}\n</code></pre>\n\n<p>Related Questions:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/5539002/warning-division-by-zero\">warning: division by zero</a></li>\n<li><a href=\"http://stackoverflow.com/questions/11592602/warning-division-by-zero-working-on-php-and-mysql\">Warning: Division By Zero Working on PHP and MySQL</a></li>\n<li><a href=\"http://stackoverflow.com/questions/6667601/division-by-zero-error-in-wordpress-theme\">Division by zero error in WordPress Theme</a></li>\n<li><a href=\"http://stackoverflow.com/questions/3731710/how-to-suppress-the-division-by-zero-error-and-set-the-result-to-null-for-the\">How to suppress the \u201cDivision by zero\u201d error</a></li>\n<li><a href=\"http://stackoverflow.com/questions/3071067/how-to-catch-a-division-by-zero\">How to catch a division by zero?</a></li>\n</ul>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 21507314, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Strict Standards: Non-static method <em>[&lt;class>::&lt;method>]</em> should not be called statically</h3>\n\n<p>Occurs when you try to call a non-static method on a class as it was static, and you also have the <code>E_STRICT</code> flag in your <code>error_reporting()</code> settings.</p>\n\n<p>Example :</p>\n\n<pre><code>class HTML {\n   public function br() {\n      echo '&lt;br&gt;';\n   }\n}\n</code></pre>\n\n<p><code>HTML::br()</code> or <code>$html::br()</code></p>\n\n<p>You can actually avoid this error by not adding <code>E_STRICT</code> to <code>error_reporting()</code>, eg</p>\n\n<pre><code>error_reporting(E_ALL &amp; ~E_STRICT);\n</code></pre>\n\n<p>since as for PHP 5.4.0 and above, <code>E_STRICT</code> is included in <code>E_ALL</code> [<a href=\"http://dk1.php.net/manual/en/migrating5.errorrep.php\">ref</a>]. But that is not adviceable. The solution is to define your intended static function as actual <code>static</code> :</p>\n\n<pre><code>public static function br() {\n  echo '&lt;br&gt;';\n}\n</code></pre>\n\n<p>or call the function conventionally :</p>\n\n<pre><code>$html = new HTML();\n$html-&gt;br();\n</code></pre>\n\n<hr>\n\n<p>Related questions :  </p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/10768576/how-can-i-solve-non-static-method-xxxxxx-should-not-be-called-statically-in\">How can I solve \"Non-static method xxx:xxx() should not be called statically in PHP 5.4?</a></li>\n</ul>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 21942832, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Parse error: syntax error, unexpected '['</h3>\n\n<p>This error comes in two variatians:</p>\n\n<h3>Variation 1</h3>\n\n<pre><code>$arr = [1, 2, 3];\n</code></pre>\n\n<p>This array initializer syntax was only introduced in PHP 5.4; it will raise a parser error on versions before that. If possible, upgrade your installation or use the old syntax:</p>\n\n<pre><code>$arr = array(1, 2, 3);\n</code></pre>\n\n<p>See also <a href=\"http://docs.php.net/manual/en/language.types.array.php#example-83\">this example</a> from the manual.</p>\n\n<h3>Variation 2</h3>\n\n<pre><code>$suffix = explode(',', 'foo,bar')[1];\n</code></pre>\n\n<p>Array dereferencing function results was also introduced in PHP 5.4. If it's not possible to upgrade you need to use a (temporary) variable:</p>\n\n<pre><code>$parts = explode(',', 'foo,bar');\n$suffix = $parts[1];\n</code></pre>\n\n<p>See also <a href=\"http://docs.php.net/manual/en/language.types.array.php#example-89\">this example</a> from the manual.</p>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 22316776, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Code doesn't run/what looks like parts of my PHP code are output</h3>\n\n<p>If you see no result from your PHP code whatsoever and/or you are seeing parts of your literal PHP source code output in the webpage, you can be pretty sure that your PHP isn't actually getting executed. If you use View Source in your browser, you're probably seeing the whole PHP source code file as is. Since PHP code is embedded in <code>&lt;?php ?&gt;</code> tags, the browser will try to interpret those as HTML tags and the result may look somewhat confused.</p>\n\n<p>To actually run your PHP scripts, you need:</p>\n\n<ul>\n<li>a web server which executes your script</li>\n<li>to set the file extension to .php, otherwise the web server won't interpret it as such*</li>\n<li>to access your .php file via the web server</li>\n</ul>\n\n<p><sub>* Unless you reconfigure it, everything can be configured.</sub></p>\n\n<p>This last one is particularly important. Just double clicking the file will likely open it in your browser using an address such as:</p>\n\n<pre><code>file://C:/path/to/my/file.php\n</code></pre>\n\n<p>This is completely bypassing any web server you may have running and the file is not getting interpreted. You need to visit the URL of the file on your web server, likely something like:</p>\n\n<pre><code>http://localhost/my/file.php\n</code></pre>\n\n<p>You may also want to check whether you're using short open tags <code>&lt;?</code> instead of <code>&lt;?php</code> and your PHP configuration has turned short open tags off.</p>\n\n<p>Also see <a href=\"http://stackoverflow.com/questions/5121495/php-code-is-not-being-executed-i-can-see-it-on-source-code-of-page\">PHP code is not being executed (i can see it on source code of page)</a></p>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 24423272, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Notice: Array to string conversion</h3>\n\n<p>This simply happens if you try to treat an array as a string:</p>\n\n<pre><code>$arr = array('foo', 'bar');\n\necho $arr;  // Notice: Array to string conversion\n$str = 'Foo ' . $arr;  // Notice: Array to string conversion\n</code></pre>\n\n<p>An array cannot simply be <code>echo</code>'d or concatenated with a string, because the result is not well defined. PHP will use the string \"Array\" in place of the array, and trigger the notice to point out that that's probably not what was intended and that you should be checking your code here. You probably want something like this instead:</p>\n\n<pre><code>echo $arr[0];\n$str = 'Foo ' . join(', ', $arr);\n</code></pre>\n\n<p>If this notice appears somewhere you don't expect, it means a variable which you thought is a string is actually an array. That means you have a bug in your code which makes this variable an array instead of the string you expect.</p>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 24507107, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Notice: Trying to get property of non-object error</h3>\n\n<p>Happens when you try to access a property of an object while there is no object.</p>\n\n<p>A typical example for a non-object notice would be</p>\n\n<pre><code>$users = json_decode('[{\"name\": \"hakre\"}]');\necho $users-&gt;name; # Notice: Trying to get property of non-object\n</code></pre>\n\n<p>In this case, <code>$users</code> is an array (so not an object) and it does not have any properties.</p>\n\n<p>This is similar to accessing a non-existing index or key of an array (see <a href=\"http://stackoverflow.com/a/12770836/367456\">Notice: Undefined Index</a>).</p>\n\n<p>This example is much simplified. Most often such a notice signals an unchecked return value, e.g. when a library returns <code>NULL</code> if an object does not exists or just an unexpected non-object value (e.g. in an Xpath result, JSON structures with unexpected format, XML with unexpected format etc.) but the code does not check for such a condition.</p>\n\n<p>As those non-objects are often processed further on, often a fatal-error happens next on calling an object method on a non-object (see: <a href=\"http://stackoverflow.com/a/12769983/367456\">Fatal error: Call to a member function ... on a non-object</a>) halting the script.</p>\n\n<p>It can be easily prevented by checking for error conditions and/or that a variable matches an expectation. Here such a notice with a <strong>DOMXPath</strong> example:</p>\n\n<pre><code>$result  = $xpath-&gt;query(\"//*[@id='detail-sections']/div[1]\");\n$divText = $result-&gt;item(0)-&gt;nodeValue; # Notice: Trying to get property of non-object\n</code></pre>\n\n<p>The problem is accessing the <code>nodeValue</code> property (field) of the first item while it has not been checked if it exists or not in the <code>$result</code> collection. Instead it pays to make the code more explicit by assigning variables to the objects the code operates on:</p>\n\n<pre><code>$result  = $xpath-&gt;query(\"//*[@id='detail-sections']/div[1]\");\n$div     = $result-&gt;item(0);\n$divText = \"-/-\";\nif ($div) {\n    $divText = $div-&gt;nodeValue;\n}\necho $divText;\n</code></pre>\n\n<p>Related errors:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/a/12770836/367456\">Notice: Undefined Index</a></li>\n<li><a href=\"http://stackoverflow.com/a/12769983/367456\">Fatal error: Call to a member function ... on a non-object</a></li>\n</ul>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 26572398, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Warning: Illegal string offset 'XXX'</h3>\n\n<p>This happens when you try to access an array element with the square bracket syntax, but you're doing this on a string, and not on an array, so the operation clearly <em>doesn't make sense</em>.</p>\n\n<p>Example:</p>\n\n<pre><code>$var = \"test\";\necho $var[\"a_key\"];\n</code></pre>\n\n<p>If you think the variable should be an array, see where it comes from and fix the problem there.</p>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 27678436, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}, {"body": "<h3>Warning: mysql_connect(): Access denied for user 'name'@'host'</h3>\n\n<p>This warning shows up when you connect to a MySQL/MariaDB server with invalid or missing credentials (username/password). So this is typically <em>not</em> a code problem, but a server configuration issue.</p>\n\n<ul>\n<li><p>See the manual page on <a href=\"http://php.net/mysql_connect\"><code>mysql_connect(\"localhost\", \"user\", \"pw\")</code></a> for examples.</p></li>\n<li><p>Check that you actually used a <code>$username</code> and <code>$password</code>.  </p>\n\n<ul>\n<li>It's uncommon that you gain access using no password - which is what happened when the Warning: said <code>(using password: NO)</code>.</li>\n<li><p>Only the local test server usually allows to connect with username <code>root</code>, no password, and the <code>test</code> database name.</p></li>\n<li><p>You can test if they're <strong>really correct</strong> using the command line client:<br>\n<code>mysql --user=\"username\" --password=\"password\" testdb</code></p></li>\n<li><p>Username and password are <em>case-sensitive</em> and whitespace is <em>not</em> ignored. If your password contains meta characters like <code>$</code>, escape them, or put the password in <a href=\"http://stackoverflow.com/questions/3446216/what-is-the-difference-between-single-quoted-and-double-quoted-strings-in-php\">single quotes</a>.</p></li>\n<li><p>Most shared hosting providers predeclare mysql accounts in relation to the unix user account (sometimes just prefixes or extra numeric suffixes). See the docs for a pattern or documentation, and CPanel or whatever interface for setting a password.</p></li>\n<li><p>See the MySQL manual on <a href=\"https://dev.mysql.com/doc/refman/5.1/en/adding-users.html\">Adding user accounts</a> using the command line. When connected as <em>admin user</em> you can issue a query like:<br>\n <code>CREATE USER 'username'@'localhost' IDENTIFIED BY 'newpassword';</code></p></li>\n<li><p>Or use <a href=\"https://www.adminer.org/\">Adminer</a> or <a href=\"http://downloads.mysql.com/archives/workbench/\">WorkBench</a> or any other graphical tool to create, check or correct account details.</p></li>\n<li><p>If you can't fix your credentials, then asking the internet to \"please help\" will have no effect. Only you and your hosting provider have permissions and sufficient access to diagnose and fix things.</p></li>\n</ul></li>\n<li><p>Verify that you <strong>could reach</strong> the database server, using the host name given by your provider:<br>\n <code>ping dbserver.hoster.example.net</code></p>\n\n<ul>\n<li><p>Check this from a SSH console directly on your webserver. Testing from your local development client to your shared hosting server is rarely meaningful.</p></li>\n<li><p>Often you just want the server name to be <code>\"localhost\"</code>, which normally utilizes a local named socket when available. Othertimes you can try <code>\"127.0.0.1\"</code> as fallback.</p></li>\n<li><p>Should your MySQL/MariaDB server listen on a different port, then use <code>\"servername:3306\"</code>.</p></li>\n<li><p>If that fails, then there's a perhaps a firewall issue. (Off-topic, not a programming question. No remote guess-helping possible.)</p></li>\n</ul></li>\n<li><p>When using <strong>constants</strong> like e.g. <code>DB_USER</code> or <code>DB_PASSWORD</code>, check that they're actually <a href=\"http://php.net/define\">defined</a>.</p>\n\n<ul>\n<li><p>If you get a <code>\"Warning: Access defined for 'DB_USER'@'host'\"</code> and a <code>\"Notice: use of undefined constant 'DB_PASS'\"</code>, then that's your problem.</p></li>\n<li><p>Verify that your e.g. <code>xy/db-config.php</code> was actually included and whatelse.</p></li>\n</ul></li>\n<li><p>Check for correctly set <strong><a href=\"http://dev.mysql.com/doc/refman/5.6/en/grant.html\"><code>GRANT</code></a> permissions</strong>.</p>\n\n<ul>\n<li><p>It's not sufficient to have a <code>username</code>+<code>password</code> pair.</p></li>\n<li><p>Each MySQL/MariaDB account can have an attached set of permissions.</p></li>\n<li><p>Those can restrict which databases you are allowed to connect to, from which client/server the connection may originate from, and which queries are permitted.</p></li>\n<li><p>The \"Access denied\" warning thus may as well show up for <a href=\"http://php.net/mysql_query\"><code>mysql_query</code></a> calls, if you don't have permissions to <code>SELECT</code> from a specific table, or <code>INSERT</code>/<code>UPDATE</code>, and more commonly <code>DELETE</code> anything.</p></li>\n<li><p>You can <a href=\"http://stackoverflow.com/questions/5016505/mysql-grant-all-privileges-on-database\">adapt account permissions</a> when connected per command line client using the <em>admin account</em> with a query like:<br>\n <code>GRANT ALL ON yourdb.* TO 'username'@'localhost';</code></p></li>\n</ul></li>\n<li><p>If the warning shows up first with <code>Warning: mysql_query(): Access denied for user ''@'localhost'</code> then you may have a <a href=\"http://php.net/manual/en/mysql.configuration.php\">php.ini-preconfigured account/password pair</a>.</p>\n\n<ul>\n<li><p>Check that <code>mysql.default_user=</code> and <code>mysql.default_password=</code> have meaningful values.</p></li>\n<li><p>Oftentimes this is a provider-configuration. So contact their support for mismatches.</p></li>\n</ul></li>\n<li><p>Find the documentation of your shared hosting provider:</p>\n\n<ul>\n<li><p>e.g. <a href=\"http://support.hostgator.com/articles/specialized-help/technical/sql-errors\">HostGator</a>, <a href=\"https://www.godaddy.com/help/connecting-to-mysql-using-php-216\">GoDaddy</a>, <a href=\"https://hilfe-center.1und1.de/hosting/skript--und-programmiersprachen-c10082634/php-c10082686/problemloesung-c10085144/haeufige-mysql-fehlermeldungen-in-php-skripten-oder--programmen-a10791915.html\">1and1</a>, <a href=\"https://www.digitalocean.com/community/questions/access-denied-for-installing-mysql\">DigitalOcean</a>, <a href=\"https://my.bluehost.com/cgi/help/2213\">BlueHost</a>, <a href=\"http://wiki.dreamhost.com/MySQL\">DreamHost</a>, <a href=\"https://mediatemple.net/community/products/dv/204642990/why-can&#39;t-i-connect-to-my-mysql-database-from-php\">MediaTemple</a>, <a href=\"http://www.inmotionhosting.com/support/community-support/databases/1045-access-denied-for-user-mysql-error\">ixWebhosting</a>, <a href=\"http://www.lunarforums.com/php-and-mysql-support/trouble-connecting-to-my-sql-db/\">lunarhosting</a>, or just google yours\u00b4.</p></li>\n<li><p>Else consult your webhosting provider through their support channels.</p></li>\n</ul></li>\n<li><p>Note that you may also have <em>depleted the available connection pool</em>. You'll get access denied warnings for too many concurrent connections. (You have to investigate the setup. That's an off-topic server configuration issue, not a programming question.)</p></li>\n<li><p>Your libmysql client <em>version may not be compatible</em> with the database server. Normally MySQL and MariaDB servers can be reached with PHPs compiled in driver. If you have a custom setup, or an outdated PHP version, and a much newer database server, or significantly outdated one - then the version mismatch may prevent connections. (No, you have to investigate yourself. Nobody can guess your setup).</p></li>\n</ul>\n\n<p>More references:</p>\n\n<ul>\n<li><a href=\"http://superuser.com/questions/584106/mysql-access-denied-for-rootname-of-the-computer\">Serverfault: mysql access denied for 'root'@'name of the computer'</a></li>\n<li><a href=\"http://stackoverflow.com/questions/18782452/warning-mysql-connect-access-denied\">Warning: mysql_connect(): Access denied</a></li>\n<li><a href=\"http://stackoverflow.com/questions/15531530/warning-mysql-select-db-access-denied-for-user-localhost-using-password\">Warning: mysql_select_db() Access denied for user &#39;&#39;@&#39;localhost&#39; (using password: NO)</a></li>\n<li><a href=\"http://stackoverflow.com/questions/11482970/1045-access-denied-for-user-rootlocalhost-using-password-no\">#1045 - Access denied for user &#39;root&#39;@&#39;localhost&#39; (using password: NO)</a></li>\n</ul>\n\n<blockquote>\n  <p>Btw, you probably don't want to use <a href=\"http://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php\"><code>mysql_*</code> functions anymore</a>. Newcomers often migrate to <a href=\"http://php.net/manual/en/mysqlinfo.api.choosing.php\">mysqli</a>, which however is just as tedious. Instead read up on <a href=\"http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers\">PDO and prepared statements</a>.<br>\n   <code>$db = new PDO(\"mysql:host=localhost;dbname=testdb\", \"username\", \"password\");</code></p>\n</blockquote>\n", "title": "Reference - What does this error mean in PHP?", "answer_id": 32681786, "question_id": 12769982, "tags": ["php", "debugging", "warnings"]}], "link": "http://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php", "question_id": 12769982}, {"body": "<p>I have tried reading some articles, but I am not very clear on the concepts yet.</p>\n\n<p>Would someone like to take a shot at explaining to me what these technologies are:</p>\n\n<ol>\n<li>Long Polling</li>\n<li>Server-Sent Events</li>\n<li>Websockets</li>\n<li>Comet</li>\n</ol>\n\n<p>One thing that I came across every time was, the server keeps a connection open and pushes data to the client. How is the connection kept open, and how does the client get the pushed data? (How does the client use the data, maybe some code might help?)</p>\n\n<p>Now, which one of them should I use for a real-time app. I have been hearing a lot about websockets (with socket.io [a node.js library]) but why not PHP?</p>\n", "title": "What are Long-Polling, Websockets, Server-Sent Events (SSE) and Comet?", "tags": ["php", "websocket", "comet", "long-polling", "server-sent-events"], "answers": [{"body": "<p><em>In the examples below the client is the browser and the server is the webserver hosting the website.</em></p>\n\n<p>Before you can understand these technologies, you have to understand <em>classic</em> HTTP web traffic first.</p>\n\n<h2>Regular HTTP:</h2>\n\n<ol>\n<li>A client requests a webpage from a server.</li>\n<li>The server calculates the response</li>\n<li>The server sends the response to the client. </li>\n</ol>\n\n<p><img src=\"http://i.stack.imgur.com/TK1ZG.png\" alt=\"HTTP\"></p>\n\n<h2>Ajax Polling:</h2>\n\n<ol>\n<li>A client requests a webpage from a server using regular HTTP (see HTTP above).</li>\n<li>The requested webpage executes JavaScript which requests a file from the server at regular intervals (e.g. 0.5 seconds).</li>\n<li>The server calculates each response and sends it back, just like normal HTTP traffic.</li>\n</ol>\n\n<p><img src=\"http://i.stack.imgur.com/qlMEU.png\" alt=\"Ajax Polling\"></p>\n\n<h2>Ajax Long-Polling:</h2>\n\n<ol>\n<li>A client requests a webpage from a server using regular HTTP (see HTTP above).</li>\n<li>The requested webpage executes JavaScript which requests a file from the server.</li>\n<li>The server does not immediately respond with the requested information but waits until there's <strong>new</strong> information available.</li>\n<li>When there's new information available, the server responds with the new information.</li>\n<li>The client receives the new information and immediately sends another request to the server, re-starting the process. </li>\n</ol>\n\n<p><img src=\"http://i.stack.imgur.com/zLnOU.png\" alt=\"Ajax Long-Polling\"></p>\n\n<h2>HTML5 Server Sent Events (SSE) / EventSource:</h2>\n\n<ol>\n<li>A client requests a webpage from a server using regular HTTP (see HTTP above).</li>\n<li>The requested webpage executes javascript which opens a connection to the server.</li>\n<li><p>The server sends an event to the client when there's new information available. </p>\n\n<ul>\n<li>Real-time traffic from server to client, mostly that's what you'll need</li>\n<li>You'll want to use a server that has an event loop</li>\n<li>Not possible to connect with a server from another domain</li>\n<li>If you want to read more, I found these very useful: <a href=\"https://developer.mozilla.org/en-US/docs/Server-sent_events/Using_server-sent_events\">(article)</a>, <a href=\"http://html5doctor.com/server-sent-events/#api\">(article)</a>, <a href=\"http://www.html5rocks.com/en/tutorials/eventsource/basics/\">(article)</a>, <a href=\"http://jaxenter.com/tutorial-jsf-2-and-html5-server-sent-events-42932.html\">(tutorial)</a>.</li>\n</ul></li>\n</ol>\n\n<p><img src=\"http://i.stack.imgur.com/ziR5h.png\" alt=\"HTML5 SSE\"></p>\n\n<h2>HTML5 Websockets:</h2>\n\n<ol>\n<li>A client requests a webpage from a server using regular http (see HTTP above).</li>\n<li>The requested webpage executes JavaScript which opens a connection with the server.</li>\n<li><p>The server and the client can now send each other messages when new data (on either side) is available.</p>\n\n<ul>\n<li>Real-time traffic from the server to the client <strong>and</strong> from the client to the server</li>\n<li>You'll want to use a server that has an event loop</li>\n<li>With WebSockets it is possible to connect with a server from another domain.</li>\n<li>It is also possible to use a third party hosted websocket server, for example <a href=\"http://pusher.com/\">Pusher</a> or <a href=\"http://www.leggetter.co.uk/real-time-web-technologies-guide\">others</a>. This way you'll only have to implement the client side, which is very easy!</li>\n<li>If you want to read more, I found these very useful: (<a href=\"http://www.developerfusion.com/article/143158/an-introduction-to-websockets/\">article</a>), <a href=\"https://developer.mozilla.org/en-US/docs/WebSockets/Writing_WebSocket_client_applications\">(article)</a> (<a href=\"http://net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/\">tutorial</a>).</li>\n</ul></li>\n</ol>\n\n<p><img src=\"http://i.stack.imgur.com/CgDlc.png\" alt=\"HTML5 WebSockets\"></p>\n\n<h2>Comet:</h2>\n\n<p>Comet is a collection of techniques prior to HTML5 which use streaming and long-polling to achieve real time applications. Read more on <a href=\"http://en.wikipedia.org/wiki/Comet_%28programming%29\">wikipedia</a> or <a href=\"http://www.ibm.com/developerworks/web/library/wa-reverseajax1/index.html\">this</a> article.</p>\n\n<hr>\n\n<blockquote>\n  <p>Now, which one of them should I use for a realtime app (that I need to\n  code). I have been hearing a lot about websockets (with socket.io [a\n  node.js library]) but why not PHP ?</p>\n</blockquote>\n\n<p>You can use PHP with WebSockets, check out <a href=\"http://socketo.me/\">Ratchet</a>. </p>\n", "title": "What are Long-Polling, Websockets, Server-Sent Events (SSE) and Comet?", "answer_id": 12855533, "question_id": 11077857, "tags": ["php", "websocket", "comet", "long-polling", "server-sent-events"]}, {"body": "<p>Tieme put a lot of effort into his excellent answer, but I think the core of the OPs question is how these technologies relate to PHP rather than how each technology works. </p>\n\n<p>PHP is the most used language in web development besides the obvious client side html, css, and javascript. Yet PHP has 2 major issues when it comes to real time applications: </p>\n\n<p>1) PHP started as a very basic CGI. PHP has progressed very far since it's early stage, but it happened in small steps. PHP already had many millions of users by the time it became the embed-able and flexible C library that it is today, most of whom were dependent on it's earlier model of execution, so it hasn't yet made a solid attempt to escape the cgi model internally. Even the commandline interface invokes the PHP library (libphp5.so on linux, php5ts.dll on windows, etc) as if it still a cgi processing a GET/POST request. It still executes code as if it just has to build a \"page\" and then end it's life cycle. As a result, it has very little support for multi-thread or event driven programming (within PHP userspace), making it currently unpractical for real time, multi-user applications. </p>\n\n<p>Note that PHP does have extensions to provide event loops (such as libevent) and threads (such as pthreads) in PHP userspace, but very, very, few of the applications use these.</p>\n\n<p>2) PHP still has significant issues with garbage collection. Although these issues have been consistently improving (likely it's greatest step to end the life cycle as described above), even the best attempts at creating long running PHP applications require being restarted on a regular basis. This also make it unpractical for real time applications.</p>\n\n<p>PHP 7 will be a great step to fix these issues as well, and seems very promising as a platform for real-time applications. </p>\n", "title": "What are Long-Polling, Websockets, Server-Sent Events (SSE) and Comet?", "answer_id": 26354684, "question_id": 11077857, "tags": ["php", "websocket", "comet", "long-polling", "server-sent-events"]}], "link": "http://stackoverflow.com/questions/11077857/what-are-long-polling-websockets-server-sent-events-sse-and-comet", "question_id": 11077857}, {"body": "<p>I can't find it now, but I <em>swear</em> there used to be a T-shirt for sale featuring the immortal words:</p>\n\n<hr>\n\n<p>What part of</p>\n\n<p><img src=\"http://i.stack.imgur.com/hZhjl.png\" alt=\"Milney Hindley\"></p>\n\n<p>do you <em>not</em> understand?</p>\n\n<hr>\n\n<p>In my case, the answer would be... all of it!</p>\n\n<p>In particular, I often see notation like this in Haskell papers, but I have no clue what any of it means. I have no idea what branch of mathematics it's supposed to be.</p>\n\n<p>I recognise the letters of the Greek alphabet of course, and symbols such as \"\u2209\" (which usually means that something is not an element of a set).</p>\n\n<p>On the other hand, I've never seen \"\u22a2\" before (<a href=\"https://en.wikipedia.org/wiki/List_of_mathematical_symbols\">Wikipedia claims it might mean \"partition\"</a>). I'm also unfamiliar with the use of the vinculum here. (Usually it denotes a fraction, but that does not <em>appear</em> to be the case here.)</p>\n\n<p>I imagine SO is not a good place to be explaining the entire Milner Hindley algorithm. But if somebody could at least tell me where to start looking to comprehend what this sea of symbols means, that would be helpful. (I'm sure I can't be the only person who's wondering...)</p>\n", "title": "&quot;What part of Milner-Hindley do you not understand?&quot;", "tags": ["haskell", "functional-programming", "lambda-calculus", "hindley-milner", "denotational-semantics"], "answers": [{"body": "<blockquote>\n  <p>if somebody could at least tell me where to start looking to comprehend what this sea of symbols means</p>\n</blockquote>\n\n<p>See \"<a href=\"http://www.cs.cmu.edu/~rwh/plbook/book.pdf\"><strong>Practical Foundations of Programming Languages.</strong></a>\", chapters 2 and 3, on the style of logic through judgements and derivations. The entire book is <a href=\"http://rads.stackoverflow.com/amzn/click/1107029570\">now available on Amazon.</a></p>\n\n<h2>Chapter 2</h2>\n\n<h1>Inductive Definitions</h1>\n\n<p>Inductive definitions are an indispensable tool in the study of programming languages. In this chapter we will develop the basic framework of inductive definitions, and give some examples of their use. An inductive definition consists of a set of <em>rules</em> for deriving <em>judgments</em>, or <em>assertions</em>, of a variety of forms. Judgments are statements about one or more syntactic objects of a specified sort. The rules specify necessary and sufficient conditions for the validity of a judgment, and hence fully determine its meaning.</p>\n\n<h3>2.1 Judgments</h3>\n\n<p>We start with the notion of a <em>judgment</em>, or <em>assertion</em> about a syntactic object. We shall make use of many forms of judgment, including examples such as these:</p>\n\n<ul>\n<li><em>n</em> <strong>nat</strong> \u2014 <em>n</em> is a natural number</li>\n<li><em>n</em> = <em>n1</em> + <em>n2</em> \u2014 <em>n</em> is the sum of <em>n1</em> and <em>n2</em></li>\n<li><em>\u03c4</em> <strong>type</strong> \u2014 <em>\u03c4</em> is a type</li>\n<li><em>e</em> : <em>\u03c4</em> \u2014 expression <em>e</em> has type <em>\u03c4</em></li>\n<li><em>e</em> \u21d3 <em>v</em> \u2014 expression <em>e</em> has value <em>v</em></li>\n</ul>\n\n<p>A judgment states that one or more syntactic objects have a property or stand in some relation to one another. The property or relation itself is called a <em>judgment form</em>, and the judgment that an object or objects have that property or stand in that relation is said to be an <em>instance</em> of that judgment form. A judgment form is also called a <em>predicate</em>, and the objects constituting an instance are its <em>subjects</em>. We write <em>a</em> <strong>J</strong> for the judgment asserting that <strong>J</strong> holds of <em>a</em>. When it is not important to stress the subject of the judgment, (text cuts off here)</p>\n", "title": "&quot;What part of Milner-Hindley do you not understand?&quot;", "answer_id": 12533495, "question_id": 12532552, "tags": ["haskell", "functional-programming", "lambda-calculus", "hindley-milner", "denotational-semantics"]}, {"body": "<p>The notation comes from <a href=\"http://en.wikipedia.org/wiki/Natural_deduction\">natural deduction</a>.</p>\n\n<p>\u22a2 symbol is called <a href=\"http://en.wikipedia.org/wiki/Turnstile_%28symbol%29\">turnstile</a>. </p>\n\n<p>The 6 rules are very easy.</p>\n\n<p><code>Var</code> rule is rather trivial rule - it says that if type for identifier is already present in your type environment, then to infer the type you just take it from the environment as is.</p>\n\n<p><code>App</code> rule says that if you have two identifiers <code>e0</code> and <code>e1</code> and can infer their types, then you can infer the type of application <code>e0 e1</code>. The rule reads like this if you know that <code>e0 :: t0 -&gt; t1</code> and <code>e1 :: t0</code> (the same t0!), then application is well-typed and the type is <code>t1</code>.</p>\n\n<p><code>Abs</code> and <code>Let</code> are rules to infer types for lambda-abstraction and let-in.</p>\n\n<p><code>Inst</code> rule says that you can substitute a type with less general one.</p>\n", "title": "&quot;What part of Milner-Hindley do you not understand?&quot;", "answer_id": 12534336, "question_id": 12532552, "tags": ["haskell", "functional-programming", "lambda-calculus", "hindley-milner", "denotational-semantics"]}, {"body": "<p>This syntax, while it may look complicated, is actually fairly simple. The basic idea comes from logic: the whole expression is an implication with the top half being the assumptions and the bottom half being the result. That is, if you know that the top expressions are true, you can conclude that the bottom expressions are true as well.</p>\n\n<h2>Symbols</h2>\n\n<p>Another thing to keep in mind is that some letters have traditional meanings; particularly, \u0393 represents the \"context\" you're in\u2014that is, what the types of other things you've seen are. So something like <code>\u0393 \u22a2 ...</code> means \"the expression <code>...</code> when you know the types of every expression in <code>\u0393</code>.</p>\n\n<p>The <code>\u22a2</code> symbol essentially means that you can prove something. So <code>\u0393 \u22a2 ...</code> is a statement saying \"I can prove <code>...</code> in a context <code>\u0393</code>. These statements are also called type judgements. </p>\n\n<p>Another thing to keep in mind: in math, just like ML and Scala, <code>x : \u03c3</code> means that <code>x</code> has type <code>\u03c3</code>. You can read it just like Haskell's <code>x :: \u03c3</code>.</p>\n\n<h2>What each rule means</h2>\n\n<p>So, knowing this, the first expression becomes easy to understand: if we know that <code>x : \u03c3 \u2208 \u0393</code> (that is, <code>x</code> has some type <code>\u03c3</code> in some context <code>\u0393</code>), then we know that <code>\u0393 \u22a2 x : \u03c3</code> (that is, in <code>\u0393</code>, <code>x</code> has type <code>\u03c3</code>). So really, this isn't telling you anything super-interesting; it just tells you how to use your context.</p>\n\n<p>The other rules are also simple. For example, take <code>[App]</code>. This rule has two conditions: <code>e\u2080</code> is a function from some type <code>\u03c4</code> to some type <code>\u03c4'</code> and <code>e\u2081</code> is a value of type <code>\u03c4</code>. Now you know what type you will get by applying <code>e\u2080</code> to <code>e\u2081</code>! Hopefully this isn't a surprise :).</p>\n\n<p>The next rule has some more new syntax. Particularly, <code>\u0393, x : \u03c4</code> just means the context made up of <code>\u0393</code> and the judgement <code>x : \u03c4</code>. So, if we know that the variable <code>x</code> has a type of <code>\u03c4</code> and the expression <code>e</code> has a type <code>\u03c4'</code>, we also know the type of a function that takes <code>x</code> and returns <code>e</code>. This just tells us what to do if we've figured out what type a function takes and what type it returns, so it shouldn't be surprising either.</p>\n\n<p>The next one just tells you how to handle <code>let</code> statements. If you know that some expression <code>e\u2081</code> has a type <code>\u03c4</code> as long as <code>x</code> has a type <code>\u03c3</code>, then a <code>let</code> expression which locally binds <code>x</code> to a value of type <code>\u03c3</code> will make <code>e\u2081</code> have a type <code>\u03c4</code>. Really, this just tells you that a let statement essentially lets you expand the context with a new binding\u2014which is exactly what <code>let</code> does!</p>\n\n<p>The <code>[Inst]</code> rule deals with sub-typing. It says that if you have a value of type <code>\u03c3'</code> and it is a sub-type of <code>\u03c3</code> (<code>\u2291</code> represents a partial ordering relation) then that expression is <em>also</em> of type <code>\u03c3</code>.</p>\n\n<p>The final rule deals with generalizing types. A quick aside: a free variable is a variable that is not introduced by a let-statement or lambda inside some expression; this expression now depends on the value of the free variable from its context.The rule is saying that if there is some variable <code>\u03b1</code> which is <em>not</em> \"free\" in anything in your context, then it is safe to say that any expression whose type you know <code>e : \u03c3</code> will have that type for <em>any</em> value of <code>\u03b1</code>.</p>\n\n<h2>How to use the rules</h2>\n\n<p>So, now that you understand the symbols, what do you do with these rules? Well, you can use these rules to figure out the type of various values. To do this, look at your expression (say <code>f x y</code>) and find a rule that has a conclusion (the bottom part) that matches your statement. Let's call the thing you're trying to find your \"goal\". In this case, you would look at the rule that ends in <code>e\u2080 e\u2081</code>. When you've found this, you now have to find rules proving everything above the line of this rule. These things generally correspond to the types of sub-expressions, so you're essentially recursing on parts of the expression. You just do this until you finish your proof tree, which gives you a proof of the type of your expression. </p>\n\n<p>So all these rules do is specify exactly\u2014and in the usual mathematically pedantic detail :P\u2014how to figure out the types of expressions.</p>\n\n<p>Now, this should sound familiar if you've ever used Prolog\u2014you're essentially computing the proof tree like a human Prolog interpreter. There is a reason Prolog is called \"logic programming\"! This is also important as the first way I was introduced to the H-M inference algorithm was by implementing it in Prolog. This is actually surprisingly simple and makes what's going on clear. You should certainly try it.</p>\n\n<p>Note: I probably made some mistakes in this explanation and would love it if somebody would point them out. I'll actually be covering this in class in a couple of weeks, so I'll be more confident then :P.</p>\n", "title": "&quot;What part of Milner-Hindley do you not understand?&quot;", "answer_id": 12534737, "question_id": 12532552, "tags": ["haskell", "functional-programming", "lambda-calculus", "hindley-milner", "denotational-semantics"]}, {"body": "<ul>\n<li>The <em>horizontal bar</em> means that \"[above] <strong>implies</strong> [below]\".</li>\n<li>If there are <em>multiple expressions</em> in [above], then consider them <strong>anded</strong> together; all of the [above] must be true in order to guarantee the [below].</li>\n<li><code>:</code> means <strong>has type</strong></li>\n<li><code>\u2208</code> means <strong>is in</strong>. (Likewise <code>\u2209</code> means \"is not in\".)</li>\n<li><code>\u0393</code> is usually used to refer to an <strong>environment</strong> or context; in this case it can be thought of as a set of type annotations, pairing an identifier with its type. Therefore <code>x : \u03c3  \u2208 \u0393</code> means that the environment <code>\u0393</code> includes the fact that <code>x</code> has type <code>\u03c3</code>.</li>\n<li><code>\u22a2</code> can be read as <strong>proves</strong> or determines. <code>\u0393 \u22a2 x : \u03c3</code> means that the environment <code>\u0393</code> determines that <code>x</code> has type <code>\u03c3</code>.</li>\n<li><code>,</code> is a way of <strong>including</strong> specific additional assumptions into an environment <code>\u0393</code>.<br>\nTherefore, <code>\u0393, x : \u03c4 \u22a2 e : \u03c4'</code> means that environment <code>\u0393</code>, <em>with the additional, overriding assumption that <code>x</code> has type <code>\u03c4</code></em>, proves that <code>e</code> has type <code>\u03c4'</code>.</li>\n</ul>\n", "title": "&quot;What part of Milner-Hindley do you not understand?&quot;", "answer_id": 12535304, "question_id": 12532552, "tags": ["haskell", "functional-programming", "lambda-calculus", "hindley-milner", "denotational-semantics"]}, {"body": "<blockquote>\n  <p>I imagine SO is not a good place to be explaining the entire Milner Hindley algorithm.</p>\n</blockquote>\n\n<p>If you <strong><em>are</em></strong> looking for a good explanation of the algorithm, the best that I've found so far is in chapter 30 of Shriram Krinshnamurthi's <a href=\"http://cs.brown.edu/~sk/Publications/Books/ProgLangs/2007-04-26/plai-2007-04-26.pdf\"><em>Programming Languages: Application and Interpretation</em></a> (CC licensed!).  Here's one good reason why it's a good explanation: examples!</p>\n\n<p><img src=\"http://i.stack.imgur.com/QPOzZ.png\" alt=\"enter image description here\"></p>\n", "title": "&quot;What part of Milner-Hindley do you not understand?&quot;", "answer_id": 16215688, "question_id": 12532552, "tags": ["haskell", "functional-programming", "lambda-calculus", "hindley-milner", "denotational-semantics"]}, {"body": "<p>There are two ways to think of e : \u03c3. One is \"the expression e has type \u03c3\", another is \"the ordered pair of the expression e and the type \u03c3\".</p>\n\n<p>View \u0393 as the knowledge about the types of expressions, implemented as a set of pairs of expression and type, e : \u03c3.</p>\n\n<p>The turnstyle \u22a2 can means that from the knowledge on the left, we can deduce what's on the right.</p>\n\n<p>The first rule [Var] can thus be read:\nIf our knowledge \u0393 contains the pair e : \u03c3, then we can deduce from \u0393 that e has type \u03c3.</p>\n\n<p>The second rule [App] can be read:\nIf we from \u0393 can deduce that e_0 has the type \u03c4 \u2192 \u03c4', and we from \u0393 can deduce that e_1 has the type \u03c4, then we from \u0393 can deduce that e_0 e_1 has the type \u03c4'.</p>\n\n<p>It's common to write \u0393, e : \u03c3 instead of \u0393 \u222a {e : \u03c3}.</p>\n\n<p>The third rule [Abs] can thus be read:\nIf we from \u0393 extended with x : \u03c4 can deduce that e has type \u03c4', then we from \u0393 can deduce that \u03bbx e has the type \u03c4 \u2192 \u03c4'.</p>\n\n<p>The fourth rule [Let] is left as an exercise. :-)</p>\n\n<p>The fifth rule [Inst] can be read:\nIf we from \u0393 can deduce that e has type \u03c3', and \u03c3' is a subtype of \u03c3, then we from \u0393 can deduce that e has type \u03c3.</p>\n\n<p>The sixth and last rule [Gen] can be read:\nIf we from \u0393 can deduce that e has type \u03c3, and \u03b1 is not a free type variable in any of the types in \u0393, then we from \u0393 can deduce that e has type \u2200\u03b1 \u03c3.</p>\n", "title": "&quot;What part of Milner-Hindley do you not understand?&quot;", "answer_id": 16218128, "question_id": 12532552, "tags": ["haskell", "functional-programming", "lambda-calculus", "hindley-milner", "denotational-semantics"]}], "link": "http://stackoverflow.com/questions/12532552/what-part-of-milner-hindley-do-you-not-understand", "question_id": 12532552}, {"body": "<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/3573623/is-it-possible-to-preview-stash-appplication-in-git\">Is it possible to preview stash appplication in git?</a>  </p>\n</blockquote>\n\n\n\n<p>I see <a href=\"http://git-scm.com/book/en/Git-Tools-Stashing\">here</a> you can apply/unapply a stash and even create a new branch off of a stash. Is it possible to simply see what is inside the stash without actually applying it?</p>\n", "title": "Git: see what&#39;s in a stash without applying stash", "tags": ["git", "git-stash"], "answers": [{"body": "<p>From the <code>man git-stash</code> page: </p>\n\n<blockquote>\n  <p>The modifications stashed away by this command can be listed with git stash list,\n         inspected with git stash show</p>\n</blockquote>\n\n<pre><code>show [&lt;stash&gt;]\n       Show the changes recorded in the stash as a diff between the stashed state and\n       its original parent. When no &lt;stash&gt; is given, shows the latest one. By default,\n       the command shows the diffstat, but it will accept any format known to git diff\n       (e.g., git stash show -p stash@{1} to view the second most recent stash in patch\n       form).\n</code></pre>\n\n<p>So, to view the content of the most recent stash, run</p>\n\n<pre><code>git stash show -p\n</code></pre>\n\n<p>To view the content of an arbitrary stash, run something like</p>\n\n<pre><code>git stash show -p stash@{1}\n</code></pre>\n", "title": "Git: see what&#39;s in a stash without applying stash", "answer_id": 10726185, "question_id": 10725729, "tags": ["git", "git-stash"]}], "link": "http://stackoverflow.com/questions/10725729/git-see-whats-in-a-stash-without-applying-stash", "question_id": 10725729}, {"body": "<p>I've been looking on info about self-invoking functions, and somewhere I stumbled on this notation:</p>\n\n<pre><code>+function(){}\n</code></pre>\n\n<p>Can someone explain to me what the <code>+</code> sign in front of the function means/does?</p>\n", "title": "JavaScript plus sign in front of function name", "tags": ["javascript"], "answers": [{"body": "<p>It forces the parser to treat the part following the <code>+</code> as an expression. This is usually used for functions that are invoked immediately, e.g.:</p>\n\n<pre><code>+function() { console.log(\"Foo!\"); }();\n</code></pre>\n\n<p>Without the <code>+</code> there, if the parser is in a state where it's expecting a statement (which can be an expression or several non-expression statements), the word <code>function</code> looks like the beginning of a function <em>declaration</em> rather than a function <em>expression</em> and so the <code>()</code> following it (the ones at the end of the line above) would be a syntax error (as would the absense of a name, in that example). <em>With</em> the <code>+</code>, it makes it a function expression, which means the name is optional and which results in a reference to the function, which can be invoked, so the parentheses are valid.</p>\n\n<p><code>+</code> is just one of the options. It can also be <code>-</code>, <code>!</code>, <code>~</code>, or just about any other unary operator. Alternately, you can use parentheses (this is more common, but neither more nor less correct syntactically):</p>\n\n<pre><code>(function() { console.log(\"Foo!\"); })();\n// or\n(function() { console.log(\"Foo!\"); }());\n</code></pre>\n", "title": "JavaScript plus sign in front of function name", "answer_id": 13341710, "question_id": 13341698, "tags": ["javascript"]}, {"body": "<p>Subsidiary to @TJCrowder's answer, <code>+</code> is usually used to force numerical casting of a value <a href=\"http://stackoverflow.com/questions/5450076/whats-the-significant-use-of-unary-plus-and-minus-operators\">as this SO answer explains</a>. In this instance it is called the 'unary plus operator' (for ease of googling).</p>\n\n<pre><code>var num = +variant;\n</code></pre>\n\n<p>So in front of a function it can be a way to force the function's result to be interpreted as a number. I doubt it happens yet, but theoretically the JIT could use that to compile the function as a numerical-only function etc. However, to prevent the unary plus being a concatenation when used in a larger expression, you would need parentheses:</p>\n\n<pre><code>blah + (+(function(){ var scope; return \"4\"; })());\n</code></pre>\n", "title": "JavaScript plus sign in front of function name", "answer_id": 13342427, "question_id": 13341698, "tags": ["javascript"]}, {"body": "<p>So the short answer is that it prevents a syntax error, by using the function results in one way or another.</p>\n\n<p>You can also instruct the engine that you're not even interested in the return value by using the <code>void</code> operator:</p>\n\n<pre><code>void function() { console.log(\"Foo!\"); }();\n</code></pre>\n\n<p>Of course, putting braces around the whole thing also serves that purpose.</p>\n", "title": "JavaScript plus sign in front of function name", "answer_id": 13420836, "question_id": 13341698, "tags": ["javascript"]}], "link": "http://stackoverflow.com/questions/13341698/javascript-plus-sign-in-front-of-function-name", "question_id": 13341698}, {"body": "<p>The <em><a href=\"https://www.destroyallsoftware.com/talks/wat\">'Wat' talk for CodeMash 2012</a></em> basically points out a few bizarre quirks with Ruby and JavaScript.</p>\n\n<p>I have made a JSFiddle of the results at <a href=\"http://jsfiddle.net/fe479/9/\">http://jsfiddle.net/fe479/9/</a>.</p>\n\n<p>The behaviours specific to JavaScript (as I don't know Ruby) are listed below.</p>\n\n<p>I found in the JSFiddle that some of my results didn't correspond with those in the video, and I am not sure why. I am, however, curious to know how JavaScript is handling working behind the scenes in each case.</p>\n\n<pre><code>Empty Array + Empty Array\n[] + []\nresult:\n&lt;Empty String&gt;\n</code></pre>\n\n<p>I am quite curious about the <code>+</code> operator when used with arrays in JavaScript.\nThis matches the video's result.</p>\n\n<pre><code>Empty Array + Object\n[] + {}\nresult:\n[Object]\n</code></pre>\n\n<p>This matches the video's result. What's going on here? Why is this an object. What does the <code>+</code> operator do?</p>\n\n<pre><code>Object + Empty Array\n{} + []\nresult\n[Object]\n</code></pre>\n\n<p>This doesn't match the video. The video suggests that the result is 0, whereas I get [Object].</p>\n\n<pre><code>Object + Object\n{} + {}\nresult:\n[Object][Object]\n</code></pre>\n\n<p>This doesn't match the video either, and how does outputting a variable result in two objects? Maybe my JSFiddle is wrong.</p>\n\n<pre><code>Array(16).join(\"wat\" - 1)\nresult:\nNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaN\n</code></pre>\n\n<p>Doing wat + 1 results in <code>wat1wat1wat1wat1</code>...</p>\n\n<p>I suspect this is just straightforward behaviour that trying to subtract a number from a string results in NaN.</p>\n", "title": "What is the explanation for these bizarre JavaScript behaviours mentioned in the &#39;Wat&#39; talk for CodeMash 2012?", "tags": ["javascript"], "answers": [{"body": "<p>Here's a list of explanations for the results you're seeing (and supposed to be seeing). The references I'm using are from the <a href=\"http://www.ecma-international.org/publications/standards/Ecma-262.htm\">ECMA-262 standard</a>.</p>\n\n<ol>\n<li><h3><code>[] + []</code></h3>\n\n<p>When using the addition operator, both the left and right operands are converted to primitives first (<a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-11.6.1\">\u00a711.6.1</a>). As per <a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-9.1\">\u00a79.1</a>, converting an object (in this case an array) to a primitive returns its default value, which for objects with a valid <code>toString()</code> method is the result of calling <code>object.toString()</code> (<a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-8.12.8\">\u00a78.12.8</a>). For arrays this is the same as calling <code>array.join()</code> (<a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.2\">\u00a715.4.4.2</a>). Joining an empty array results in an empty string, so step #7 of the addition operator returns the concatenation of two empty strings, which is the empty string.</p></li>\n<li><h3><code>[] + {}</code></h3>\n\n<p>Similar to <code>[] + []</code>, both operands are converted to primitives first. For \"Object objects\" (\u00a715.2), this is again the result of calling <code>object.toString()</code>, which for non-null, non-undefined objects is <code>\"[object Object]\"</code> (<a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-15.2.4.2\">\u00a715.2.4.2</a>).</p></li>\n<li><h3><code>{} + []</code></h3>\n\n<p>The <code>{}</code> here is not parsed as an object, but instead as an empty block (<a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-12.1\">\u00a712.1</a>, at least as long as you're not forcing that statement to be an expression, but more about that later). The return value of empty blocks is empty, so the result of that statement is the same as <code>+[]</code>. The unary <code>+</code> operator (<a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-11.4.6\">\u00a711.4.6</a>) returns <code>ToNumber(ToPrimitive(operand))</code>. As we already know, <code>ToPrimitive([])</code> is the empty string, and according to <a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-9.3.1\">\u00a79.3.1</a>, <code>ToNumber(\"\")</code> is 0.</p></li>\n<li><h3><code>{} + {}</code></h3>\n\n<p>Similar to the previous case, the first <code>{}</code> is parsed as a block with empty return value. Again, <code>+{}</code> is the same as <code>ToNumber(ToPrimitive({}))</code>, and <code>ToPrimitive({})</code> is <code>\"[object Object]\"</code> (see <code>[] + {}</code>). So to get the result of <code>+{}</code>, we have to apply <code>ToNumber</code> on the string <code>\"[object Object]\"</code>. When following the steps from <a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-9.3.1\">\u00a79.3.1</a>, we get <code>NaN</code> as a result:</p>\n\n<blockquote>\n  <p>If the grammar cannot interpret the String as an expansion of <em>StringNumericLiteral</em>, then the result of <a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-9.3\">ToNumber</a> is <strong>NaN</strong>.</p>\n</blockquote></li>\n<li><h3><code>Array(16).join(\"wat\" - 1)</code></h3>\n\n<p>As per <a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.1.1\">\u00a715.4.1.1</a> and <a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.2.2\">\u00a715.4.2.2</a>, <code>Array(16)</code> creates a new array with length 16. To get the value of the argument to join, <a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-11.6.2\">\u00a711.6.2</a> steps #5 and #6 show that we have to convert both operands to a number using <code>ToNumber</code>. <code>ToNumber(1)</code> is simply 1 (<a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-9.3\">\u00a79.3</a>), whereas <code>ToNumber(\"wat\")</code> again is <code>NaN</code> as per <a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-9.3.1\">\u00a79.3.1</a>. Following step 7 of <a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-11.6.2\">\u00a711.6.2</a>, <a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-11.6.3\">\u00a711.6.3</a> dictates that </p>\n\n<blockquote>\n  <p>If either operand is <strong>NaN</strong>, the result is <strong>NaN</strong>.</p>\n</blockquote>\n\n<p>So the argument to <code>Array(16).join</code> is <code>NaN</code>. Following \u00a715.4.4.5 (<code>Array.prototype.join</code>), we have to call <code>ToString</code> on the argument, which is <code>\"NaN\"</code> (<a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-9.8.1\">\u00a79.8.1</a>):</p>\n\n<blockquote>\n  <p>If <em>m</em> is <strong>NaN</strong>, return the String <strong><code>\"NaN\"</code></strong>.</p>\n</blockquote>\n\n<p>Following step 10 of <a href=\"http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.5\">\u00a715.4.4.5</a>, we get 15 repetitions of the concatenation of <code>\"NaN\"</code> and the empty string, which equals the result you're seeing.\nWhen using <code>\"wat\" + 1</code> instead of <code>\"wat\" - 1</code> as argument, the addition operator converts <code>1</code> to a string instead of converting <code>\"wat\"</code> to a number, so it effectively calls <code>Array(16).join(\"wat1\")</code>.</p></li>\n</ol>\n\n<p>As to why you're seeing different results for the <code>{} + []</code> case: When using it as a function argument, you're forcing the statement to be an <em>ExpressionStatement</em>, which makes it impossible to parse <code>{}</code> as empty block, so it's instead parsed as an empty object literal.</p>\n", "title": "What is the explanation for these bizarre JavaScript behaviours mentioned in the &#39;Wat&#39; talk for CodeMash 2012?", "answer_id": 9033306, "question_id": 9032856, "tags": ["javascript"]}, {"body": "<p>I second @Ventero\u2019s solution. If you want to, you can go into more detail as to how <code>+</code> converts its operands.</p>\n\n<p><strong>First step (\u00a79.1):</strong> convert both operands to primitives (primitive values are <code>undefined</code>, <code>null</code>, booleans, numbers, strings; all other values are objects, including arrays and functions). If an operand is already primitive, you are done. If not, it is an object <code>obj</code> and the following steps are performed:</p>\n\n<ol>\n<li>Call <code>obj.valueOf()</code>. If it returns a primitive, you are done. Direct instances of <code>Object</code> and arrays return themselves, so you are not done yet.</li>\n<li>Call <code>obj.toString()</code>. If it returns a primitive, you are done. <code>{}</code> and <code>[]</code> both return a string, so you are done.</li>\n<li>Otherwise, throw a <code>TypeError</code>.</li>\n</ol>\n\n<p>For dates, step 1 and 2 are swapped. You can observe the conversion behavior as follows:</p>\n\n<pre><code>var obj = {\n    valueOf: function () {\n        console.log(\"valueOf\");\n        return {}; // not a primitive\n    },\n    toString: function () {\n        console.log(\"toString\");\n        return {}; // not a primitive\n    }\n}\n</code></pre>\n\n<p>Interaction (<code>Number()</code> first converts to primitive then to number):</p>\n\n<pre><code>&gt; Number(obj)\nvalueOf\ntoString\nTypeError: Cannot convert object to primitive value\n</code></pre>\n\n<p><strong>Second step (\u00a711.6.1):</strong> If one of the operands is a string, the other operand is also converted to string and the result is produced by concatenating two strings. Otherwise, both operands are converted to numbers and the result is produced by adding them.</p>\n\n<p>More detailed explanation of the conversion process: \u201c<a href=\"http://www.2ality.com/2012/01/object-plus-object.html\">What is {} + {} in JavaScript?</a>\u201d</p>\n", "title": "What is the explanation for these bizarre JavaScript behaviours mentioned in the &#39;Wat&#39; talk for CodeMash 2012?", "answer_id": 9059527, "question_id": 9032856, "tags": ["javascript"]}, {"body": "<p>We may refer to the specification and that's great and most accurate, but most of the cases can also be explained in a more comprehensible way with the following statements:</p>\n\n<ul>\n<li><code>+</code> and <code>-</code> operators work only with primitive values. More specifically <code>+</code>(addition) works with either strings or numbers, and <code>+</code>(unary) and <code>-</code>(subtraction and unary) works only with numbers.</li>\n<li>All native functions or operators that expect primitive value as argument, will first convert that argument to desired primitive type. It is done with <code>valueOf</code> or <code>toString</code>, which are available on any object. That's the reason why such functions or operators don't throw errors when invoked on objects.</li>\n</ul>\n\n<p>So we may say that:</p>\n\n<ul>\n<li><code>[] + []</code> is same as <code>String([]) + String([])</code> which is same as <code>'' + ''</code>. I mentioned above  that <code>+</code>(addition) is also valid for numbers, but there is no valid number representation of an array in JavaScript, so addition of strings is used instead.</li>\n<li><code>[] + {}</code> is same as <code>String([]) + String({})</code> which is same as <code>'' + '[object Object]'</code></li>\n<li><code>{} + []</code>. This one deserves more explanation (see Ventero answer). In that case, curly braces are treated not as an object but as an empty block, so it turns out to be same as <code>+[]</code>. Unary <code>+</code> works only with numbers, so the implementation tries to get a number out of <code>[]</code>. First it tries <code>valueOf</code> which in the case of arrays returns the same object, so then it tries the last resort: conversion of a <code>toString</code> result to a number. We may write it as <code>+Number(String([]))</code> which is same as <code>+Number('')</code> which is same as <code>+0</code>.</li>\n<li><code>Array(16).join(\"wat\" - 1)</code> subtraction <code>-</code> works only with numbers, so it's the same as: <code>Array(16).join(Number(\"wat\") - 1)</code>, as <code>\"wat\"</code> can't be converted to a valid number. We receive <code>NaN</code>, and any arithmetic operation on <code>NaN</code> results with <code>NaN</code>, so we have: <code>Array(16).join(NaN)</code>.</li>\n</ul>\n", "title": "What is the explanation for these bizarre JavaScript behaviours mentioned in the &#39;Wat&#39; talk for CodeMash 2012?", "answer_id": 9063160, "question_id": 9032856, "tags": ["javascript"]}, {"body": "<p>This is more of a comment than an answer, but for some reason I can't comment on your question. I wanted to correct your JSFiddle code. However, I posted this on Hacker News and someone suggested that I repost it here.</p>\n\n<p>The problem in the JSFiddle code is that <code>({})</code> (opening braces inside of parentheses) is not the same as <code>{}</code> (opening braces as the start of a line of code). So when you type <code>out({} + [])</code> you are forcing the <code>{}</code> to be something which it is not when you type <code>{} + []</code>. This is part of the overall 'wat'-ness of Javascript.</p>\n\n<p>The basic idea was simple JavaScript wanted to allow both of these forms:</p>\n\n<pre><code>if (u)\n    v;\n\nif (x) {\n    y;\n    z;\n}\n</code></pre>\n\n<p>To do so, two interpretations were made of the opening brace: 1. it is <em>not required</em> and 2. it can appear <em>anywhere</em>.</p>\n\n<p>This was a wrong move. Real code doesn't have an opening brace appearing in the middle of nowhere, and real code also tends to be more fragile when it uses the first form rather than the second. (About once every other month at my last job, I'd get called to a coworker's desk when their modifications to my code weren't working, and the problem was that they'd added a line to the \"if\" without adding curly braces. I eventually just adopted the habit that the curly braces are always required, even when you're only writing one line.)</p>\n\n<p>Fortunately in many cases eval() will replicate the full wat-ness of JavaScript. The JSFiddle code should read:</p>\n\n<pre><code>function out(code) {\n    function format(x) {\n        return typeof x === \"string\" ?\n            JSON.stringify(x) : x;\n    }   \n    document.writeln('&amp;gt;&amp;gt;&amp;gt; ' + code);\n    document.writeln(format(eval(code)));\n}\ndocument.writeln(\"&lt;pre&gt;\");\nout('[] + []');\nout('[] + {}');\nout('{} + []');\nout('{} + {}');\nout('Array(16).join(\"wat\" + 1)');\nout('Array(16).join(\"wat - 1\")');\nout('Array(16).join(\"wat\" - 1) + \" Batman!\"');\ndocument.writeln(\"&lt;/pre&gt;\");\n</code></pre>\n\n<p>[Also that is the first time I have written document.writeln in many many many years, and I feel a little dirty writing anything involving both document.writeln() and eval().]</p>\n", "title": "What is the explanation for these bizarre JavaScript behaviours mentioned in the &#39;Wat&#39; talk for CodeMash 2012?", "answer_id": 9068992, "question_id": 9032856, "tags": ["javascript"]}, {"body": "<p>To buttress what has been shared earlier.</p>\n\n<p>The underlying cause of this behaviour is partly due to the weakly-typed nature of JavaScript. For example, the expression 1 + \u201c2\u201d is ambiguous since there are two possible interpretations based on the operand types (int, string) and (int int):</p>\n\n<ul>\n<li>User intends to concatenate two strings, result: \u201c12\u201d</li>\n<li>User intends to add two numbers, result: 3</li>\n</ul>\n\n<p>Thus with varying input types,the output possibilities increase.</p>\n\n<p>The addition algorithm </p>\n\n<ol>\n<li>Coerce operands to primitive values</li>\n</ol>\n\n<p>The JavaScript primitives are string, number, null, undefined and boolean (Symbol is coming soon in ES6). Any other value is an object (e.g. arrays, functions and objects). The coercion process for converting objects into primitive values is described thus:</p>\n\n<ul>\n<li><p>If a primitive value is returned when object.valueOf() is invoked, then return this value, otherwise continue</p></li>\n<li><p>If a primitive value is returned when object.toString() is invoked, then return this value, otherwise continue</p></li>\n<li><p>Throw a TypeError</p></li>\n</ul>\n\n<p>Note: For date values, the order is to invoke toString before valueOf.</p>\n\n<ol start=\"2\">\n<li><p>If any operand value is a string, then do a string concatenation</p></li>\n<li><p>Otherwise, convert both operands to their numeric value and then add these values</p></li>\n</ol>\n\n<p>Knowing the various coercion values of types in JavaScript does help to make the confusing outputs clearer. See the coercion table below</p>\n\n<pre><code>+-----------------+-------------------+---------------+\n| Primitive Value |   String value    | Numeric value |\n+-----------------+-------------------+---------------+\n| null            | \u201cnull\u201d            | 0             |\n| undefined       | \u201cundefined\u201d       | NaN           |\n| true            | \u201ctrue\u201d            | 1             |\n| false           | \u201cfalse\u201d           | 0             |\n| 123             | \u201c123\u201d             | 123           |\n| []              | \u201c\u201d                | 0             |\n| {}              | \u201c[object Object]\u201d | NaN           |\n+-----------------+-------------------+---------------+\n</code></pre>\n\n<p>It is also good to know that JavaScript's + operator is left-associative as this determines what the output will be cases involving more than one + operation.</p>\n\n<p>Leveraging the \nThus 1 + \"2\" will give \"12\" because any addition involving a string will always default to string concatenation.</p>\n\n<p>You can read more examples in <a href=\"http://abdulapopoola.com/2015/09/30/why-javascript-seems-to-get-addition-wrong/\" rel=\"nofollow\">this blog post</a> (disclaimer I wrote it).</p>\n", "title": "What is the explanation for these bizarre JavaScript behaviours mentioned in the &#39;Wat&#39; talk for CodeMash 2012?", "answer_id": 32935836, "question_id": 9032856, "tags": ["javascript"]}], "link": "http://stackoverflow.com/questions/9032856/what-is-the-explanation-for-these-bizarre-javascript-behaviours-mentioned-in-the", "question_id": 9032856}, {"body": "<p>Starting with a recent new version of ADT, I've noticed this new attribute on the layout XML files, for example:</p>\n\n<pre><code>&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:orientation=\"vertical\"\n    android:layout_width=\"fill_parent\"\n    android:layout_height=\"fill_parent\"\n    tools:context=\".MainActivity\" /&gt;\n</code></pre>\n\n<p><strong>What is \"tools:context\" used for?</strong></p>\n\n<p>How does it even know the exact path to the activity that is written there? Does it look at the package of the app, inside the manifest?</p>\n\n<p>Is it limited to classes that extend Context or only activities?  Is it usable for ListView items etc.?</p>\n", "title": "What&#39;s &quot;tools:context&quot; in Android layout files?", "tags": ["android", "xml", "android-layout", "adt", "android-context"], "answers": [{"body": "<p>This is most probably the activity the tools UI editor uses to render your layout (it will find the right theme based on the activity). This is documented <a href=\"http://tools.android.com/recent/newconfigchooser\">here</a> (around the middle of the article; subscribe to that page to keep up to date).</p>\n", "title": "What&#39;s &quot;tools:context&quot; in Android layout files?", "answer_id": 11078889, "question_id": 11078487, "tags": ["android", "xml", "android-layout", "adt", "android-context"]}, {"body": "<p>That attribute is basically the persistence for the \"Associated Activity\" selection above the layout.  At runtime, a layout is always associated with an activity. It can of course be associated with more than one, but at least one. In the tool, we need to know about this mapping (which at runtime happens in the other direction; an activity can call setContentView(layout) to display a layout) in order to drive certain features.</p>\n\n<p>Right now, we're using it for one thing only: Picking the right theme to show for a layout (since the manifest file can register themes to use for an <em>activity</em>, and once we know the activity associated with the layout, we can pick the right theme to show for the layout). In the future, we'll use this to drive additional features - such as rendering the action bar (which is associated with the activity), a place to add onClick handlers, etc.</p>\n\n<p>The reason this is a tools: namespace attribute is that this is only a designtime mapping for use by the tool. The layout itself can be used by multiple activities/fragments etc. We just want to give you a way to pick a designtime binding such that we can for example show the right theme; you can change it at any time, just like you can change our listview and fragment bindings, etc.</p>\n\n<p>(Here's the full changeset which has more details on <a href=\"https://android-review.googlesource.com/#/c/36273/\">this</a>)</p>\n\n<p>And yeah, <a href=\"http://tools.android.com/recent/newconfigchooser\">the link</a> Nikolay listed above shows how the new configuration chooser looks and works</p>\n\n<p>One more thing: The \"tools\" namespace is special. The android packaging tool knows to ignore it, so none of those attributes will be packaged into the APK. We're using it for extra metadata in the layout. It's also where for example the attributes to suppress lint warnings are stored -- as tools:ignore. </p>\n", "title": "What&#39;s &quot;tools:context&quot; in Android layout files?", "answer_id": 11110969, "question_id": 11078487, "tags": ["android", "xml", "android-layout", "adt", "android-context"]}, {"body": "<p>According to the <a href=\"http://tools.android.com/tech-docs/tools-attributes\">Android Tools Project Site</a>:</p>\n\n<p><strong>tools:context</strong>  </p>\n\n<p>This attribute is typically set on the root element in a layout XML file, and records which activity the layout is associated with (at designtime, since obviously a layout can be used by more than one layout). This will for example be used by the layout editor to guess a default theme, since themes are defined in the Manifest and are associated with activities, not layouts. You can use the same dot prefix as in manifests to just specify the activity class without the full application package name as a prefix.  </p>\n\n<pre><code>&lt;android.support.v7.widget.GridLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"    \n    xmlns:tools=\"http://schemas.android.com/tools\"\n    tools:context=\".MainActivity\"&gt;  \n</code></pre>\n\n<p>Used by: Layout editors in Studio &amp; Eclipse, Lint</p>\n", "title": "What&#39;s &quot;tools:context&quot; in Android layout files?", "answer_id": 21913470, "question_id": 11078487, "tags": ["android", "xml", "android-layout", "adt", "android-context"]}, {"body": "<p>\u201ctools:context\u201d is one of the Design Attributes that can facilitate layout creation in XML in the development framework. This attribute is used to show the development framework what activity class is picked for implementing the layout. Using \u201ctools:context\u201d, Android Studio chooses the necessary theme for the preview automatically.</p>\n\n<p>If you\u2019d like to know more about some other attributes and useful tools for Android app development, take a look at this review: <a href=\"http://cases.azoft.com/4-must-know-tools-for-effective-android-development/\" rel=\"nofollow\">http://cases.azoft.com/4-must-know-tools-for-effective-android-development/</a></p>\n", "title": "What&#39;s &quot;tools:context&quot; in Android layout files?", "answer_id": 38349967, "question_id": 11078487, "tags": ["android", "xml", "android-layout", "adt", "android-context"]}], "link": "http://stackoverflow.com/questions/11078487/whats-toolscontext-in-android-layout-files", "question_id": 11078487}, {"body": "<pre><code>def main():\n    for i in xrange(10**8):\n        pass\nmain()\n</code></pre>\n\n<p>This piece of code in Python runs in  </p>\n\n<pre><code>real    0m1.841s\nuser    0m1.828s\nsys     0m0.012s\n</code></pre>\n\n<p>However, if the for loop isn't placed within a function, </p>\n\n<pre><code>for i in xrange(10**8):\n    pass\n</code></pre>\n\n<p>then it runs for a much longer time:</p>\n\n<pre><code>real    0m4.543s\nuser    0m4.524s\nsys     0m0.012s\n</code></pre>\n\n<p>Why is this?</p>\n\n<p>Note: The timing is done with the time function in BASH in Linux.</p>\n", "title": "Why does Python code run faster in a function?", "tags": ["python", "performance", "profiling", "benchmarking", "cpython"], "answers": [{"body": "<p>Inside a function, the bytecode is</p>\n\n<pre><code>  2           0 SETUP_LOOP              20 (to 23)\n              3 LOAD_GLOBAL              0 (xrange)\n              6 LOAD_CONST               3 (100000000)\n              9 CALL_FUNCTION            1\n             12 GET_ITER            \n        &gt;&gt;   13 FOR_ITER                 6 (to 22)\n             16 STORE_FAST               0 (i)\n\n  3          19 JUMP_ABSOLUTE           13\n        &gt;&gt;   22 POP_BLOCK           \n        &gt;&gt;   23 LOAD_CONST               0 (None)\n             26 RETURN_VALUE        \n</code></pre>\n\n<p>At top level, the bytecode is</p>\n\n<pre><code>  1           0 SETUP_LOOP              20 (to 23)\n              3 LOAD_NAME                0 (xrange)\n              6 LOAD_CONST               3 (100000000)\n              9 CALL_FUNCTION            1\n             12 GET_ITER            \n        &gt;&gt;   13 FOR_ITER                 6 (to 22)\n             16 STORE_NAME               1 (i)\n\n  2          19 JUMP_ABSOLUTE           13\n        &gt;&gt;   22 POP_BLOCK           \n        &gt;&gt;   23 LOAD_CONST               2 (None)\n             26 RETURN_VALUE        \n</code></pre>\n\n<p>The difference is that <a href=\"http://docs.python.org/library/dis.html#opcode-STORE_FAST\"><code>STORE_FAST</code></a> is faster (!) than <a href=\"http://docs.python.org/library/dis.html#opcode-STORE_NAME\"><code>STORE_NAME</code></a>.  This is because in a function, <code>i</code> is a local but at toplevel it is a global.</p>\n\n<p>To examine bytecode, use the <a href=\"http://docs.python.org/library/dis.html\"><code>dis</code> module</a>.  I was able to disassemble the function directly, but to disassemble the toplevel code I had to use the <a href=\"http://docs.python.org/library/functions.html#compile\"><code>compile</code> builtin</a>.</p>\n", "title": "Why does Python code run faster in a function?", "answer_id": 11241708, "question_id": 11241523, "tags": ["python", "performance", "profiling", "benchmarking", "cpython"]}, {"body": "<p>You might ask <em>why</em> it is faster to store local variables than globals. This is a CPython implementation detail.</p>\n\n<p>Remember that CPython is compiled to bytecode, which the interpreter runs. When a function is compiled, the local variables are stored in a fixed-size array (<em>not</em> a <code>dict</code>) and variable names are assigned to indexes. This is possible because you can't dynamically add local variables to a function. Then retrieving a local variable is literally a pointer lookup into the list and a refcount increase on the <code>PyObject</code> which is trivial.</p>\n\n<p>Contrast this to a global lookup (<code>LOAD_GLOBAL</code>), which is a true <code>dict</code> search involving a hash and so on. Incidentally, this is why you need to specify <code>global i</code> if you want it to be global: if you ever assign to a variable inside a scope, the compiler will issue <code>STORE_FAST</code>s for its access unless you tell it not to.</p>\n\n<p>By the way, global lookups are still pretty optimised. Attribute lookups <code>foo.bar</code> are the <em>really</em> slow ones!</p>\n", "title": "Why does Python code run faster in a function?", "answer_id": 11242447, "question_id": 11241523, "tags": ["python", "performance", "profiling", "benchmarking", "cpython"]}, {"body": "<p>Aside from local/global variable store times, <strong>opcode prediction</strong> makes the function faster.</p>\n\n<p>As the other answers explain, the function uses the <code>STORE_FAST</code> opcode in the loop. Here's the bytecode for the function's loop:</p>\n\n<pre><code>    &gt;&gt;   13 FOR_ITER                 6 (to 22)   # get next value from iterator\n         16 STORE_FAST               0 (x)       # set local variable\n         19 JUMP_ABSOLUTE           13           # back to FOR_ITER\n</code></pre>\n\n<p>Normally when a programme is run, Python executes each opcode one after the other, keeping track of the a stack and preforming other checks on the stack frame after each opcode is executed. Opcode prediction means that in certain cases Python is able to jump directly to the next opcode, thus avoiding some of this overhead.</p>\n\n<p>In this case, every time Python sees <code>FOR_ITER</code> (the top of the loop), it will \"predict\" that <code>STORE_FAST</code> is the next opcode it has to execute. Python then peeks at the next opcode and, if the prediction was correct, it jumps straight to <code>STORE_FAST</code>. This has the effect of squeezing the two opcodes into a single opcode.</p>\n\n<p>On the other hand, the <code>STORE_NAME</code> opcode is used in the loop at the global level. Python does <em>not</em> make similar predictions when it sees this opcode. Instead, it must go back to the top of the evaluation-loop which has obvious implications for the speed at which the loop is executed.</p>\n\n<p>To give some more technical detail about this optimisation, here's a quote from the <a href=\"https://hg.python.org/cpython/file/45b1ae1ef318/Python/ceval.c#l784\"><code>ceval.c</code></a> file (the \"engine\" of Python's virtual machine):</p>\n\n<blockquote>\n  <p>Some opcodes tend to come in pairs thus making it possible to\n   predict the second code when the first is run.  For example,\n   <code>GET_ITER</code> is often followed by <code>FOR_ITER</code>. And <strong><code>FOR_ITER</code> is often\n   followed by <code>STORE_FAST</code></strong> or <code>UNPACK_SEQUENCE</code>.</p>\n  \n  <p>Verifying the prediction costs a single high-speed test of a register\n      variable against a constant.  If the pairing was good, then the\n      processor's own internal branch predication has a high likelihood of\n      success, resulting in a nearly zero-overhead transition to the\n      next opcode.  A successful prediction saves a trip through the eval-loop\n      including its two unpredictable branches, the <code>HAS_ARG</code> test and the\n      switch-case.  Combined with the processor's internal branch prediction,\n      a successful <code>PREDICT</code> has the effect of making the two opcodes run as if\n      they were a single new opcode with the bodies combined.</p>\n</blockquote>\n\n<p>We can see in the source code for the <a href=\"https://hg.python.org/cpython/file/45b1ae1ef318/Python/ceval.c#l2493\"><code>FOR_ITER</code></a> opcode exactly where the prediction for <code>STORE_FAST</code> is made:</p>\n\n<pre class=\"lang-C prettyprint-override\"><code>case FOR_ITER:                         // the FOR_ITER opcode case\n    v = TOP();\n    x = (*v-&gt;ob_type-&gt;tp_iternext)(v); // x is the next value from iterator\n    if (x != NULL) {                     \n        PUSH(x);                       // put x on top of the stack\n        PREDICT(STORE_FAST);           // predict STORE_FAST will follow - success!\n        PREDICT(UNPACK_SEQUENCE);      // this and everything below is skipped\n        continue;\n    }\n    // error-checking and more code for when the iterator ends normally                                     \n</code></pre>\n\n<p>The <code>PREDICT</code> function expands to <code>if (*next_instr == op) goto PRED_##op</code> i.e. we just jump to the start of the predicted opcode. In this case, we jump here:</p>\n\n<pre class=\"lang-C prettyprint-override\"><code>PREDICTED_WITH_ARG(STORE_FAST);\ncase STORE_FAST:\n    v = POP();                     // pop x back off the stack\n    SETLOCAL(oparg, v);            // set it as the new local variable\n    goto fast_next_opcode;\n</code></pre>\n\n<p>The local variable is now set and the next opcode is up for execution. Python continues through the iterable until it reaches the end, making the successful prediction each time.</p>\n\n<p>The <a href=\"https://wiki.python.org/moin/CPythonVmInternals\">Python wiki page</a> has more information about how CPython's virtual machine works.</p>\n", "title": "Why does Python code run faster in a function?", "answer_id": 29460892, "question_id": 11241523, "tags": ["python", "performance", "profiling", "benchmarking", "cpython"]}], "link": "http://stackoverflow.com/questions/11241523/why-does-python-code-run-faster-in-a-function", "question_id": 11241523}, {"body": "<p>Here is the extract from the program in question. The matrix <code>img[][]</code> has the size SIZE\u00d7SIZE, and is initialized at:</p>\n\n<p><code>img[j][i] = 2 * j + i</code></p>\n\n<p>Then, you make a matrix <code>res[][]</code>, and each field in here is made to be the average of the 9 fields around it in the img matrix. The border is left at 0 for simplicity.</p>\n\n<pre><code>for(i=1;i&lt;SIZE-1;i++) \n    for(j=1;j&lt;SIZE-1;j++) {\n        res[j][i]=0;\n        for(k=-1;k&lt;2;k++) \n            for(l=-1;l&lt;2;l++) \n                res[j][i] += img[j+l][i+k];\n        res[j][i] /= 9;\n}\n</code></pre>\n\n<p>That's all there's to the program. For completeness' sake, here is what comes before. No code comes after. As you can see, it's just initialization.</p>\n\n<pre><code>#define SIZE 8192\nfloat img[SIZE][SIZE]; // input image\nfloat res[SIZE][SIZE]; //result of mean filter\nint i,j,k,l;\nfor(i=0;i&lt;SIZE;i++) \n    for(j=0;j&lt;SIZE;j++) \n        img[j][i] = (2*j+i)%8196;\n</code></pre>\n\n<p>Basically, this program is slow when SIZE is a multiple of 2048, e.g. the execution times:</p>\n\n<pre><code>SIZE = 8191: 3.44 secs\nSIZE = 8192: 7.20 secs\nSIZE = 8193: 3.18 secs\n</code></pre>\n\n<p>The compiler is GCC.\nFrom what I know, this is because of memory management, but I don't really know too much about that subject, which is why I'm asking here.</p>\n\n<p>Also how to fix this would be nice, but if someone could explain these execution times I'd already be happy enough.</p>\n\n<p>I already know of malloc/free, but the problem is not amount of memory used, it's merely execution time, so I don't know how that would help.</p>\n", "title": "Why is my program slow when looping over exactly 8192 elements?", "tags": ["c++", "performance", "memory-management", "gcc"], "answers": [{"body": "<p>The difference is caused by the same super-alignment issue from the following related questions:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/q/11413855/922184\">Why is transposing a matrix of 512x512 much slower than transposing a matrix of 513x513?</a></li>\n<li><a href=\"http://stackoverflow.com/q/7905760/922184\">Matrix multiplication: Small difference in matrix size, large difference in timings</a></li>\n</ul>\n\n<p>But that's only because there's one other problem with the code.</p>\n\n<p>Starting from the original loop:</p>\n\n<pre><code>for(i=1;i&lt;SIZE-1;i++) \n    for(j=1;j&lt;SIZE-1;j++) {\n        res[j][i]=0;\n        for(k=-1;k&lt;2;k++) \n            for(l=-1;l&lt;2;l++) \n                res[j][i] += img[j+l][i+k];\n        res[j][i] /= 9;\n}\n</code></pre>\n\n<p>First notice that the two inner loops are trivial. They can be unrolled as follows:</p>\n\n<pre><code>for(i=1;i&lt;SIZE-1;i++) {\n    for(j=1;j&lt;SIZE-1;j++) {\n        res[j][i]=0;\n        res[j][i] += img[j-1][i-1];\n        res[j][i] += img[j  ][i-1];\n        res[j][i] += img[j+1][i-1];\n        res[j][i] += img[j-1][i  ];\n        res[j][i] += img[j  ][i  ];\n        res[j][i] += img[j+1][i  ];\n        res[j][i] += img[j-1][i+1];\n        res[j][i] += img[j  ][i+1];\n        res[j][i] += img[j+1][i+1];\n        res[j][i] /= 9;\n    }\n}\n</code></pre>\n\n<p>So that leaves the two outer-loops that we're interested in.</p>\n\n<p>Now we can see the problem is the same in this question: <a href=\"http://stackoverflow.com/q/9936132/922184\">Why does the order of the loops affect performance when iterating over a 2D array?</a></p>\n\n<p>You are iterating the matrix column-wise instead of row-wise.</p>\n\n<hr>\n\n<p>To solve this problem, you should interchange the two loops.</p>\n\n<pre><code>for(j=1;j&lt;SIZE-1;j++) {\n    for(i=1;i&lt;SIZE-1;i++) {\n        res[j][i]=0;\n        res[j][i] += img[j-1][i-1];\n        res[j][i] += img[j  ][i-1];\n        res[j][i] += img[j+1][i-1];\n        res[j][i] += img[j-1][i  ];\n        res[j][i] += img[j  ][i  ];\n        res[j][i] += img[j+1][i  ];\n        res[j][i] += img[j-1][i+1];\n        res[j][i] += img[j  ][i+1];\n        res[j][i] += img[j+1][i+1];\n        res[j][i] /= 9;\n    }\n}\n</code></pre>\n\n<p>This eliminates all the non-sequential access completely so you no longer get random slow-downs on large powers-of-two.</p>\n\n<hr>\n\n<p><strong>Core i7 920 @ 3.5 GHz</strong></p>\n\n<p>Original code:</p>\n\n<pre><code>8191: 1.499 seconds\n8192: 2.122 seconds\n8193: 1.582 seconds\n</code></pre>\n\n<p>Interchanged Outer-Loops:</p>\n\n<pre><code>8191: 0.376 seconds\n8192: 0.357 seconds\n8193: 0.351 seconds\n</code></pre>\n", "title": "Why is my program slow when looping over exactly 8192 elements?", "answer_id": 12265928, "question_id": 12264970, "tags": ["c++", "performance", "memory-management", "gcc"]}, {"body": "<p>The following tests have been done with Visual C++ compiler as it is used by the default Qt Creator install (I guess with no optimization flag). When using GCC, there is no big difference between Mystical's version and my \"optimized\" code. So the conclusion is that compiler optimizations take care off micro optimization better than humans (me at last). I leave the rest of my answer for reference.</p>\n\n<hr>\n\n<p>It's not efficient to process images this way. It's better to use single dimension arrays. Processing all pixels is the done in one loop. Random access to points could be done using:</p>\n\n<pre><code>pointer + (x + y*width)*(sizeOfOnePixel)\n</code></pre>\n\n<p>In this particular case, it's better to compute and cache the sum of three pixels groups horizontally because they are used three times each.</p>\n\n<p>I've done some tests and I think it's worth sharing. Each result is an average of five tests.</p>\n\n<p>Original code by user1615209:</p>\n\n<pre><code>8193: 4392 ms\n8192: 9570 ms\n</code></pre>\n\n<p>Mystical's version:</p>\n\n<pre><code>8193: 2393 ms\n8192: 2190 ms\n</code></pre>\n\n<p>Two pass using a 1D array: first pass for horizontal sums, second for vertical sum and average.\nTwo pass addressing with three pointers and only increments like this:</p>\n\n<pre><code>imgPointer1 = &amp;avg1[0][0];\nimgPointer2 = &amp;avg1[0][SIZE];\nimgPointer3 = &amp;avg1[0][SIZE+SIZE];\n\nfor(i=SIZE;i&lt;totalSize-SIZE;i++){\n    resPointer[i]=(*(imgPointer1++)+*(imgPointer2++)+*(imgPointer3++))/9;\n}\n\n8193: 938 ms\n8192: 974 ms\n</code></pre>\n\n<p>Two pass using a 1D array and addressing like this:</p>\n\n<pre><code>for(i=SIZE;i&lt;totalSize-SIZE;i++){\n    resPointer[i]=(hsumPointer[i-SIZE]+hsumPointer[i]+hsumPointer[i+SIZE])/9;\n}\n\n8193: 932 ms\n8192: 925 ms\n</code></pre>\n\n<p>One pass caching horizontal sums just one row ahead so they stay in cache:</p>\n\n<pre><code>// Horizontal sums for the first two lines\nfor(i=1;i&lt;SIZE*2;i++){\n    hsumPointer[i]=imgPointer[i-1]+imgPointer[i]+imgPointer[i+1];\n}\n// Rest of the computation\nfor(;i&lt;totalSize;i++){\n    // Compute horizontal sum for next line\n    hsumPointer[i]=imgPointer[i-1]+imgPointer[i]+imgPointer[i+1];\n    // Final result\n    resPointer[i-SIZE]=(hsumPointer[i-SIZE-SIZE]+hsumPointer[i-SIZE]+hsumPointer[i])/9;\n}\n\n8193: 599 ms\n8192: 652 ms\n</code></pre>\n\n<p>Conclusion:</p>\n\n<ul>\n<li>No benefits of using several pointers and just increments (I thought it would have been faster)</li>\n<li>Caching horizontal sums is better than computing them several time.</li>\n<li>Two pass is not three times faster, two times only.</li>\n<li>It's possible to achieve 3.6 times faster using both a single pass and caching an intermediary result</li>\n</ul>\n\n<p>I'm sure it's possible to do much better.</p>\n\n<p><strong>NOTE</strong>\nPlease, note that I wrote this answer to target general performance issues rather than the cache problem explained in Mystical's excellent answer. At the beginning it was just pseudo code. I was asked to do tests in the comments... Here is a completely refactored version with tests.</p>\n", "title": "Why is my program slow when looping over exactly 8192 elements?", "answer_id": 12268128, "question_id": 12264970, "tags": ["c++", "performance", "memory-management", "gcc"]}], "link": "http://stackoverflow.com/questions/12264970/why-is-my-program-slow-when-looping-over-exactly-8192-elements", "question_id": 12264970}, {"body": "<p>How would you divide a number by 3 without using <code>*</code>, <code>/</code>, <code>+</code>, <code>-</code>, <code>%</code>,  operators?</p>\n\n<p>The number may be signed or unsigned.</p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "tags": ["c", "math", "division"], "answers": [{"body": "<p>Write the program in Pascal and use the <code>DIV</code> operator.</p>\n\n<p>Since the question is tagged <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged 'c'\" rel=\"tag\">c</a>, you can probably write a function in Pascal and call it from your C program; the method for doing so is system-specific.</p>\n\n<p>But here's an example that works on my Ubuntu system with the Free Pascal <code>fp-compiler</code> package installed.  (I'm doing this out of sheer misplaced stubbornness; I make no claim that this is useful.)</p>\n\n<p><strong><code>divide_by_3.pas</code></strong> :</p>\n\n<pre><code>unit Divide_By_3;\ninterface\n    function div_by_3(n: integer): integer; cdecl; export;\nimplementation\n    function div_by_3(n: integer): integer; cdecl;\n    begin\n        div_by_3 := n div 3;\n    end;\nend.\n</code></pre>\n\n<p><strong><code>main.c</code></strong> :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nextern int div_by_3(int n);\n\nint main(void) {\n    int n;\n    fputs(\"Enter a number: \", stdout);\n    fflush(stdout);\n    scanf(\"%d\", &amp;n);\n    printf(\"%d / 3 = %d\\n\", n, div_by_3(n));\n    return 0;\n}\n</code></pre>\n\n<p><strong>To build:</strong></p>\n\n<pre><code>fpc divide_by_3.pas &amp;&amp; gcc divide_by_3.o main.c -o main\n</code></pre>\n\n<p><strong>Sample execution:</strong></p>\n\n<pre><code>$ ./main\nEnter a number: 100\n100 / 3 = 33\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11694693, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p><em>(note: see Edit 2 below for a better version!)</em></p>\n\n<p>This is not as tricky as it sounds, because you said \"without using the [..] <code>+</code> [..] <strong>operators</strong>\". See below, if you want to forbid using the <code>+</code> character all together.</p>\n\n<pre><code>unsigned div_by(unsigned const x, unsigned const by) {\n  unsigned floor = 0;\n  for (unsigned cmp = 0, r = 0; cmp &lt;= x;) {\n    for (unsigned i = 0; i &lt; by; i++)\n      cmp++; // that's not the + operator!\n    floor = r;\n    r++; // neither is this.\n  }\n  return floor;\n}\n</code></pre>\n\n<p>then just say <code>div_by(100,3)</code> to divide <code>100</code> by <code>3</code>.</p>\n\n<hr>\n\n<h3><strong>Edit</strong>: You can go on and replace the <code>++</code> operator as well:</h3>\n\n<pre><code>unsigned inc(unsigned x) {\n  for (unsigned mask = 1; mask; mask &lt;&lt;= 1) {\n    if (mask &amp; x)\n      x &amp;= ~mask;\n    else\n      return x &amp; mask;\n  }\n  return 0; // overflow (note that both x and mask are 0 here)\n}\n</code></pre>\n\n<hr>\n\n<h1>Edit 2: Slightly faster version without using any operator that contains the <code>+</code>,<code>-</code>,<code>*</code>,<code>/</code>,<code>%</code> <em>characters</em>.</h1>\n\n<pre><code>unsigned add(char const zero[], unsigned const x, unsigned const y) {\n  // this exploits that &amp;foo[bar] == foo+bar if foo is of type char*\n  return (int)(uintptr_t)(&amp;((&amp;zero[x])[y]));\n}\n\nunsigned div_by(unsigned const x, unsigned const by) {\n  unsigned floor = 0;\n  for (unsigned cmp = 0, r = 0; cmp &lt;= x;) {\n    cmp = add(0,cmp,by);\n    floor = r;\n    r = add(0,r,1);\n  }\n  return floor;\n}\n</code></pre>\n\n<p>We use the first argument of the <code>add</code> function because we cannot denote the type of pointers without using the <code>*</code> character, except in function parameter lists, where the syntax <code>type[]</code> is identical to <code>type* const</code>.</p>\n\n<p>FWIW, you can easily implement a multiplication function using a similar trick to use the <code>0x55555556</code> trick proposed by <a href=\"http://stackoverflow.com/a/11694787/430766\">AndreyT</a>:</p>\n\n<pre><code>int mul(int const x, int const y) {\n  return sizeof(struct {\n    char const ignore[y];\n  }[x]);\n}\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11694707, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Use <a href=\"http://en.wikibooks.org/wiki/C_Programming/C_Reference/stdlib.h/itoa\">itoa</a> to convert to a base 3 string. Drop the last <a href=\"https://en.wikipedia.org/wiki/Ternary_numeral_system\">trit</a> and convert back to base 10.</p>\n\n<pre><code>// Note: itoa is non-standard but actual implementations\n// don't seem to handle negative when base != 10.\nint div3(int i) {\n    char str[42];\n    sprintf(str, \"%d\", INT_MIN); // Put minus sign at str[0]\n    if (i&gt;0)                     // Remove sign if positive\n        str[0] = ' ';\n    itoa(abs(i), &amp;str[1], 3);    // Put ternary absolute value starting at str[1]\n    str[strlen(&amp;str[1])] = '\\0'; // Drop last digit\n    return strtol(str, NULL, 3); // Read back result\n}\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11694755, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>This is a <a href=\"http://web.archive.org/web/20121103111129/http://forums.hscripts.com/viewtopic.php?f=13&amp;t=1358\">simple function</a> which performs the desired operation.But it requires <code>+</code> operator, so all you have to do is to add the values with the bit-operators:</p>\n\n<pre><code>// replaces the + operator\nint add(int x, int y) {\n    while(x) {\n        int t = (x &amp; y) &lt;&lt;1;\n        y ^= x;\n        x = t;\n    }\n    return y;\n}\n\nint divideby3 (int num) {\n    int sum = 0;\n    while (num &gt; 3) {\n        sum = add(num &gt;&gt; 2, sum);\n        num = add(num &gt;&gt; 2, num &amp; 3);\n    }\n    if (num == 3)\n        sum = add(sum, 1);\n    return sum; \n}\n</code></pre>\n\n<p>As Jim commented this works because:</p>\n\n<ul>\n<li><code>n = 4 * a + b</code></li>\n<li><code>n / 3 = a + (a + b) / 3</code> </li>\n<li><p><code>So sum += a, n = a + b</code>, and iterate </p></li>\n<li><p>When <code>a == 0 (n &lt; 4)</code>, <code>sum += floor(n / 3);</code> i.e. 1, <code>if n == 3, else 0</code></p></li>\n</ul>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11694778, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>To divide a 32-bit number by 3 one can multiply it by <code>0x55555556</code> and then take the upper 32 bits of the 64 bit result.</p>\n\n<p>Now all that's left to do is to implement multiplication using bit operations and shifts...</p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11694787, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<pre><code>log(pow(exp(number),0.33333333333333333333)) /* :-) */\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11694818, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Idiotic conditions call for an idiotic solution:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    FILE * fp=fopen(\"temp.dat\",\"w+b\");\n    int number=12346;\n    int divisor=3;\n    char * buf = calloc(number,1);\n    fwrite(buf,number,1,fp);\n    rewind(fp);\n    int result=fread(buf,divisor,number,fp);\n    printf(\"%d / %d = %d\", number, divisor, result);\n    free(buf);\n    fclose(fp);\n    return 0;\n}\n</code></pre>\n\n<p>If also the decimal part is needed, just declare <code>result</code> as <code>double</code> and add to it the result of <code>fmod(number,divisor)</code>.</p>\n\n<p><strong>Explanation of how it works</strong></p>\n\n<ol>\n<li>The <code>fwrite</code> writes <code>number</code> bytes (number being 123456 in the example above).</li>\n<li><code>rewind</code> resets the file pointer to the front of the file.</li>\n<li><code>fread</code> reads a maximum of <code>number</code> \"records\" that are <code>divisor</code> in length from the file, and returns the number of elements it read.</li>\n</ol>\n\n<p>If you write 30 bytes then read back the file in units of 3, you get 10 \"units\".  30 / 3 = 10</p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11694828, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char *argv[])\n{\n\n    int num = 1234567;\n    int den = 3;\n    div_t r = div(num,den); // div() is a standard C function.\n    printf(\"%d\\n\", r.quot);\n\n    return 0;\n}\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11694903, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>You can use (platform dependent) inline assembly, e.g., for x86: <a href=\"http://ideone.com/lL4uKT\">(also works for negative numbers)</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n  unsigned int dividend = -42, divisor = 5, quotient, remainder;\n\n  __asm__ ( \"cdq; idivl %%ebx;\"\n          : \"=a\" (quotient), \"=d\" (remainder)\n          : \"a\"  (dividend), \"b\"  (divisor)\n          : );\n\n  printf(\"%i / %i = %i, remainder: %i\\n\", dividend, divisor, quotient, remainder);\n  return 0;\n}\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11694951, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Using <a href=\"http://hackersdelight.org/magic.htm\"><strong>Hacker's Delight Magic number calculator</strong></a> </p>\n\n<pre><code>int divideByThree(int num)\n{\n  return (fma(num, 1431655766, 0) &gt;&gt; 32);\n}\n</code></pre>\n\n<p>Where <a href=\"http://en.cppreference.com/w/c/numeric/math/fma\">fma</a> is a standard library function defined in <code>math.h</code> header.</p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11695297, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Here's my solution: </p>\n\n<pre><code>public static int div_by_3(long a) {\n    a &lt;&lt;= 30;\n    for(int i = 2; i &lt;= 32 ; i &lt;&lt;= 1) {\n        a = add(a, a &gt;&gt; i);\n    }\n    return (int) (a &gt;&gt; 32);\n}\n\npublic static long add(long a, long b) {\n    long carry = (a &amp; b) &lt;&lt; 1;\n    long sum = (a ^ b);\n    return carry == 0 ? sum : add(carry, sum);\n}\n</code></pre>\n\n<p>First, note that </p>\n\n<pre><code>1/3 = 1/4 + 1/16 + 1/64 + ...\n</code></pre>\n\n<p>Now, the rest is simple!</p>\n\n<pre><code>a/3 = a * 1/3  \na/3 = a * (1/4 + 1/16 + 1/64 + ...)\na/3 = a/4 + a/16 + 1/64 + ...\na/3 = a &gt;&gt; 2 + a &gt;&gt; 4 + a &gt;&gt; 6 + ...\n</code></pre>\n\n<p>Now all we have to do is add together these bit shifted values of a! Oops! We can't add though, so instead, we'll have to write an add function using bit-wise operators! If you're familiar with bit-wise operators, my solution should look fairly simple... but just in-case you aren't, I'll walk through an example at the end.</p>\n\n<p>Another thing to note is that first I shift left by 30! This is to make sure that the fractions don't get rounded off.</p>\n\n<pre><code>11 + 6\n\n1011 + 0110  \nsum = 1011 ^ 0110 = 1101  \ncarry = (1011 &amp; 0110) &lt;&lt; 1 = 0010 &lt;&lt; 1 = 0100  \nNow you recurse!\n\n1101 + 0100  \nsum = 1101 ^ 0100 = 1001  \ncarry = (1101 &amp; 0100) &lt;&lt; 1 = 0100 &lt;&lt; 1 = 1000  \nAgain!\n\n1001 + 1000  \nsum = 1001 ^ 1000 = 0001  \ncarry = (1001 &amp; 1000) &lt;&lt; 1 = 1000 &lt;&lt; 1 = 10000  \nOne last time!\n\n0001 + 10000\nsum = 0001 ^ 10000 = 10001 = 17  \ncarry = (0001 &amp; 10000) &lt;&lt; 1 = 0\n\nDone!\n</code></pre>\n\n<p>It's simply carry addition that you learned as a child!</p>\n\n<pre><code>111\n 1011\n+0110\n-----\n10001\n</code></pre>\n\n<p>This implementation <strong>failed</strong> because we can not add all terms of the equation:</p>\n\n<pre><code>a / 3 = a/4 + a/4^2 + a/4^3 + ... + a/4^i + ... = f(a, i) + a * 1/3 * 1/4^i\nf(a, i) = a/4 + a/4^2 + ... + a/4^i\n</code></pre>\n\n<p>Suppose the reslut of <code>div_by_3(a)</code> = x, then <code>x &lt;= floor(f(a, i)) &lt; a / 3</code>. When <code>a = 3k</code>, we get wrong answer.</p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11695947, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Yet another solution. This should handle all ints (including negative ints) except the min value of an int, which would need to be handled as a hard coded exception. This basically does division by subtraction but only using bit operators (shifts, xor, &amp; and complement). For faster speed, it subtracts 3 * (decreasing powers of 2). In c#, it executes around 444 of these DivideBy3 calls per millisecond (2.2 seconds for 1,000,000 divides), so not horrendously slow, but no where near as fast as a simple x/3. By comparison, Coodey's nice solution is about 5 times faster than this one.</p>\n\n<pre><code>public static int DivideBy3(int a) {\n    bool negative = a &lt; 0;\n    if (negative) a = Negate(a);\n    int result;\n    int sub = 3 &lt;&lt; 29;\n    int threes = 1 &lt;&lt; 29;\n    result = 0;\n    while (threes &gt; 0) {\n        if (a &gt;= sub) {\n            a = Add(a, Negate(sub));\n            result = Add(result, threes);\n        }\n        sub &gt;&gt;= 1;\n        threes &gt;&gt;= 1;\n    }\n    if (negative) result = Negate(result);\n    return result;\n}\npublic static int Negate(int a) {\n    return Add(~a, 1);\n}\npublic static int Add(int a, int b) {\n    int x = 0;\n    x = a ^ b;\n    while ((a &amp; b) != 0) {\n        b = (a &amp; b) &lt;&lt; 1;\n        a = x;\n        x = a ^ b;\n    }\n    return x;\n}\n</code></pre>\n\n<p>This is c# because that's what I had handy, but differences from c should be minor.</p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11696513, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>It is easily possible on the <a href=\"https://en.wikipedia.org/wiki/Setun\">Setun computer</a>.</p>\n\n<p>To divide an integer by 3, <a href=\"https://en.wikipedia.org/wiki/Balanced_ternary\">shift right by 1 place</a>.</p>\n\n<p>I'm not sure whether it's strictly possible to implement a conforming C compiler on such a platform though. We might have to stretch the rules a bit, like interpreting \"at least 8 bits\" as \"capable of holding at least integers from -128 to +127\".</p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11696743, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>First that I've come up with.</p>\n\n<pre><code>irb(main):101:0&gt; div3 = -&gt; n { s = '%0' + n.to_s + 's'; (s % '').gsub('   ', ' ').size }\n=&gt; #&lt;Proc:0x0000000205ae90@(irb):101 (lambda)&gt;\nirb(main):102:0&gt; div3[12]\n=&gt; 4\nirb(main):103:0&gt; div3[666]\n=&gt; 222\n</code></pre>\n\n<p><strong>EDIT:</strong> Sorry, I didn't notice the tag <code>C</code>. But you can use the idea about string formatting, I guess...</p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11697010, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>This one is the classical division algorithm in base 2:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nint main()\n{\n  uint32_t mod3[6] = { 0,1,2,0,1,2 };\n  uint32_t x = 1234567; // number to divide, and remainder at the end\n  uint32_t y = 0; // result\n  int bit = 31; // current bit\n  printf(\"X=%u   X/3=%u\\n\",x,x/3); // the '/3' is for testing\n\n  while (bit&gt;0)\n  {\n    printf(\"BIT=%d  X=%u  Y=%u\\n\",bit,x,y);\n    // decrement bit\n    int h = 1; while (1) { bit ^= h; if ( bit&amp;h ) h &lt;&lt;= 1; else break; }\n    uint32_t r = x&gt;&gt;bit;  // current remainder in 0..5\n    x ^= r&lt;&lt;bit;          // remove R bits from X\n    if (r &gt;= 3) y |= 1&lt;&lt;bit; // new output bit\n    x |= mod3[r]&lt;&lt;bit;    // new remainder inserted in X\n  }\n  printf(\"Y=%u\\n\",y);\n}\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11705575, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Use <a href=\"http://www.gnu.org/software/gsl/manual/html_node/Level-1-CBLAS-Functions.html\" rel=\"nofollow\">cblas</a>, included as part of OS X's Accelerate framework. </p>\n\n<pre><code>[02:31:59] [william@relativity ~]$ cat div3.c\n#import &lt;stdio.h&gt;\n#import &lt;Accelerate/Accelerate.h&gt;\n\nint main() {\n    float multiplicand = 123456.0;\n    float multiplier = 0.333333;\n    printf(\"%f * %f == \", multiplicand, multiplier);\n    cblas_sscal(1, multiplier, &amp;multiplicand, 1);\n    printf(\"%f\\n\", multiplicand);\n}\n\n[02:32:07] [william@relativity ~]$ clang div3.c -framework Accelerate -o div3 &amp;&amp; ./div3\n123456.000000 * 0.333333 == 41151.957031\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11707530, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Didn't cross-check if this answer is already published. If the program need to be extended to floating numbers, the numbers can be multiplied by 10*number of precision needed and then the following code can be again applied.  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int aNumber = 500;\n    int gResult = 0;\n\n    int aLoop = 0;\n\n    int i = 0;\n    for(i = 0; i &lt; aNumber; i++)\n    {\n        if(aLoop == 3)\n        {\n           gResult++;\n           aLoop = 0;\n        }  \n        aLoop++;\n    }\n\n    printf(\"Reulst of %d / 3 = %d\", aNumber, gResult);\n\n    return 0;\n}\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11708675, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>This should work for any divisor, not only three. Currently only for unsigned, but extending it to signed should not be that difficult.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nunsigned sub(unsigned two, unsigned one);\nunsigned bitdiv(unsigned top, unsigned bot);\nunsigned sub(unsigned two, unsigned one)\n{\nunsigned bor;\nbor = one;\ndo      {\n        one = ~two &amp; bor;\n        two ^= bor;\n        bor = one&lt;&lt;1;\n        } while (one);\nreturn two;\n}\n\nunsigned bitdiv(unsigned top, unsigned bot)\n{\nunsigned result, shift;\n\nif (!bot || top &lt; bot) return 0;\n\nfor(shift=1;top &gt;= (bot&lt;&lt;=1); shift++) {;}\nbot &gt;&gt;= 1;\n\nfor (result=0; shift--; bot &gt;&gt;= 1 ) {\n        result &lt;&lt;=1;\n        if (top &gt;= bot) {\n                top = sub(top,bot);\n                result |= 1;\n                }\n        }\nreturn result;\n}\n\nint main(void)\n{\nunsigned arg,val;\n\nfor (arg=2; arg &lt; 40; arg++) {\n        val = bitdiv(arg,3);\n        printf(\"Arg=%u Val=%u\\n\", arg, val);\n        }\nreturn 0;\n}\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11723849, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<pre><code>#!/bin/ruby\n\ndef div_by_3(i)\n  i.div 3        # always return int http://www.ruby-doc.org/core-1.9.3/Numeric.html#method-i-div\nend\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11723974, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Solution using <a href=\"http://en.cppreference.com/w/c/numeric/math/fma\" rel=\"nofollow\">fma() library function</a>, works for any positive number:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main()\n{\n    int number = 8;//Any +ve no.\n    int temp = 3, result = 0;\n    while(temp &lt;= number){\n        temp = fma(temp, 1, 3); //fma(a, b, c) is a library function and returns (a*b) + c.\n        result = fma(result, 1, 1);\n    } \n    printf(\"\\n\\n%d divided by 3 = %d\\n\", number, result);\n}\n</code></pre>\n\n<p><a href=\"http://stackoverflow.com/a/11757290/981787\">See my another answer</a>.</p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11728217, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Here it is in Python with, basically, string comparisons and a state machine.</p>\n\n<pre><code>def divide_by_3(input):\n  to_do = {}\n  enque_index = 0\n  zero_to_9 = (0, 1, 2, 3, 4, 5, 6, 7, 8, 9)\n  leave_over = 0\n  for left_over in (0, 1, 2):\n    for digit in zero_to_9:\n      # left_over, digit =&gt; enque, leave_over\n      to_do[(left_over, digit)] = (zero_to_9[enque_index], leave_over)\n      if leave_over == 0:\n        leave_over = 1\n      elif leave_over == 1:\n        leave_over = 2\n      elif leave_over == 2 and enque_index != 9:\n        leave_over = 0\n        enque_index = (1, 2, 3, 4, 5, 6, 7, 8, 9)[enque_index]\n  answer_q = []\n  left_over = 0\n  digits = list(str(input))\n  if digits[0] == \"-\":\n    answer_q.append(\"-\")\n  digits = digits[1:]\n  for digit in digits:\n    enque, left_over = to_do[(left_over, int(digit))]\n    if enque or len(answer_q):\n      answer_q.append(enque)\n  answer = 0\n  if len(answer_q):\n    answer = int(\"\".join([str(a) for a in answer_q]))\n  return answer\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11730637, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Using <a href=\"http://www.php.net/manual/en/intro.bc.php\" rel=\"nofollow\">BC Math</a> in <a href=\"http://en.wikipedia.org/wiki/PHP\" rel=\"nofollow\">PHP</a>:</p>\n\n<pre><code>&lt;?php\n    $a = 12345;\n    $b = bcdiv($a, 3);   \n?&gt;\n</code></pre>\n\n<hr>\n\n<p><strong><a href=\"http://en.wikipedia.org/wiki/MySQL\" rel=\"nofollow\">MySQL</a></strong> (it's an interview from Oracle)</p>\n\n<pre><code>&gt; SELECT 12345 DIV 3;\n</code></pre>\n\n<hr>\n\n<p><strong><a href=\"http://en.wikipedia.org/wiki/Pascal_%28programming_language%29\" rel=\"nofollow\">Pascal</a>:</strong></p>\n\n<pre><code>a:= 12345;\nb:= a div 3;\n</code></pre>\n\n<hr>\n\n<p><strong>x86-64 assembly language:</strong></p>\n\n<pre><code>mov  r8, 3\nxor  rdx, rdx   \nmov  rax, 12345\nidiv r8\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11737381, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Since it's from Oracle, how about a lookup table of pre calculated answers. :-D </p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11752918, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<pre><code>int div3(int x)\n{\n  int reminder = abs(x);\n  int result = 0;\n  while(reminder &gt;= 3)\n  {\n     result++;\n\n     reminder--;\n     reminder--;\n     reminder--;\n  }\n  return result;\n}\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11753530, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Using counters is a basic solution:</p>\n\n<pre><code>int DivBy3(int num) {\n    int result = 0;\n    int counter = 0;\n    while (1) {\n        if (num == counter)       //Modulus 0\n            return result;\n        counter = abs(~counter);  //++counter\n\n        if (num == counter)       //Modulus 1\n            return result;\n        counter = abs(~counter);  //++counter\n\n        if (num == counter)       //Modulus 2\n            return result;\n        counter = abs(~counter);  //++counter\n\n        result = abs(~result);    //++result\n    }\n}\n</code></pre>\n\n<p>It is also easy to perform a modulus function, check the comments.</p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11754108, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Using a Linux shell script:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    int number = 30;\n    char command[25];\n    snprintf(command, 25, \"echo $((%d %c 3)) \", number, 47);\n    system( command );\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://stackoverflow.com/a/11728217/981787\">See my another answer</a>.</p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11757290, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>The following script generates a C program that solves the problem without using the operators <code>* / + - %</code>:</p>\n\n<pre><code>#!/usr/bin/env python3\n\nprint('''#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\nconst int32_t div_by_3(const int32_t input)\n{\n''')\n\nfor i in range(-2**31, 2**31):\n    print('    if(input == %d) return %d;' % (i, i / 3))\n\n\nprint(r'''\n    return 42; // impossible\n}\nint main()\n{\n    const int32_t number = 8;\n    printf(\"%d / 3 = %d\\n\", number, div_by_3(number));\n}\n''')\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11762305, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>It's really quite easy.</p>\n\n<pre><code>if (number == 0) return 0;\nif (number == 1) return 0;\nif (number == 2) return 0;\nif (number == 3) return 1;\nif (number == 4) return 1;\nif (number == 5) return 1;\nif (number == 6) return 2;\n</code></pre>\n\n<p>(I have of course omitted some of the program for the sake of brevity.) If the programmer gets tired of typing this all out, I'm sure that he or she could write a separate program to generate it for him. I happen to be aware of a certain operator, <code>/</code>, that would simplify his job immensely.</p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11787806, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Would it be cheating to use the <code>/</code> operator \"behind the scenes\" by using <code>eval</code> and string concatenation?</p>\n\n<p>For example, in Javacript, you can do</p>\n\n<pre><code>function div3 (n) {\n    var div = String.fromCharCode(47);\n    return eval([n, div, 3].join(\"\"));\n}\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11818349, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Good 'ol <a href=\"http://en.wikipedia.org/wiki/Bc_programming_language\" rel=\"nofollow\"><code>bc</code></a>:</p>\n\n<pre><code>$ num=1337; printf \"scale=5;${num}\\x2F3;\\n\" | bc\n445.66666\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 11957408, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>if we consider <code>__div__</code> is not orthographically <code>/</code></p>\n\n<pre><code>def divBy3(n):\n    return n.__div__(3)\n\nprint divBy3(9), 'or', 9//3\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 12060499, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>3 in base 2 is 11.</p>\n\n<p>So just do long division (like in middle school) in base 2 by 11.  It is even easier in base 2 than base 10.</p>\n\n<p>For each bit position starting with most significant:</p>\n\n<p>Decide if prefix is less than 11.</p>\n\n<p>If it is output 0.</p>\n\n<p>If it is not output 1, and then substitute prefix bits for appropriate change. There are only three cases:</p>\n\n<pre><code> 11xxx -&gt;    xxx    (ie 3 - 3 = 0)\n100xxx -&gt;   1xxx    (ie 4 - 3 = 1)\n101xxx -&gt;  10xxx    (ie 5 - 3 = 2)\n</code></pre>\n\n<p>All other prefixes are unreachable.</p>\n\n<p>Repeat until lowest bit position and you're done.</p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 12061237, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Here's a method my Grandfather taught me when I was a child. It requires + and / operators but it makes calculations easy.</p>\n\n<p>Add the individual digits together and then see if its a multiple of 3.</p>\n\n<p>But this method works for numbers above 12.</p>\n\n<p>Example: 36,</p>\n\n<p>3+6=9 which is a multiple of 3.</p>\n\n<p>42,</p>\n\n<p>4+2=6 which is a multiple of 3.</p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 12061868, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Well you could think of using a <strong>graph/tree</strong> like structure to solve the problem. Basically generate as many vertices as the number that is to be divided by 3. Then keep pairing each un-paired vertex with two other vertices.</p>\n\n<p>Rough pseudocode:</p>\n\n<pre><code>function divide(int num)\n    while(num!=0)\n        Add a new vertice to vertiexList.\n        num--\n    quotient = 0\n    for each in vertexList(lets call this vertex A)\n        if vertexList not empty\n            Add an edge between A and another vertex(say B)\n        else\n            your Remainder is 1 and Quotient is quotient\n        if vertexList not empty\n            Add an edge between A and another vertex(say C)\n        else\n            your remainder is 2 and Quotient is quotient\n        quotient++\n        remove A, B, C from vertexList\n    Remainder is 0 and Quotient is quotient\n</code></pre>\n\n<p>This can obviously be optimized and the complexity depends on how big you number is, but it shoud work providing you can do ++ and --.\nIt's as good as counting only cooler.</p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 12066085, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>How about this approach (c#)?</p>\n\n<pre><code>private int dividedBy3(int n) {\n        List&lt;Object&gt; a = new Object[n].ToList();\n        List&lt;Object&gt; b = new List&lt;object&gt;();\n        while (a.Count &gt; 2) {\n            a.RemoveRange(0, 3);\n            b.Add(new Object());\n        }\n        return b.Count;\n    }\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 12067974, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>I think the right answer is:</p>\n\n<p>Why would I not use a basic operator to do a basic operation?</p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 12087312, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>first:</p>\n\n<pre><code>x/3 = (x/4) / (1-1/4)\n</code></pre>\n\n<p>then figure out how to solve x/(1 - y):</p>\n\n<pre><code>x/(1-1/y)\n  = x * (1+y) / (1-y^2)\n  = x * (1+y) * (1+y^2) / (1-y^4)\n  = ...\n  = x * (1+y) * (1+y^2) * (1+y^4) * ... * (1+y^(2^i)) / (1-y^(2^(i+i))\n  = x * (1+y) * (1+y^2) * (1+y^4) * ... * (1+y^(2^i))\n</code></pre>\n\n<p>with y = 1/4:</p>\n\n<pre><code>int div3(int x) {\n    x &lt;&lt;= 6;    // need more precise\n    x += x&gt;&gt;2;  // x = x * (1+(1/2)^2)\n    x += x&gt;&gt;4;  // x = x * (1+(1/2)^4)\n    x += x&gt;&gt;8;  // x = x * (1+(1/2)^8)\n    x += x&gt;&gt;16; // x = x * (1+(1/2)^16)\n    return (x+1)&gt;&gt;8; // as (1-(1/2)^32) very near 1,\n                     // we plus 1 instead of div (1-(1/2)^32)\n}\n</code></pre>\n\n<p>although it uses <code>+</code>, but somebody already implements add by bitwise op</p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 12091039, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Okay I think we all agree that this isn't a real world problem. So just for fun, here's how to do it with Ada and multithreading:</p>\n\n<pre><code>with Ada.Text_IO;\n\nprocedure Divide_By_3 is\n\n   protected type Divisor_Type is\n      entry Poke;\n      entry Finish;\n   private\n      entry Release;\n      entry Stop_Emptying;\n      Emptying : Boolean := False;\n   end Divisor_Type;\n\n   protected type Collector_Type is\n      entry Poke;\n      entry Finish;\n   private\n      Emptying : Boolean := False;\n   end Collector_Type;\n\n   task type Input is\n   end Input;\n   task type Output is\n   end Output;\n\n   protected body Divisor_Type is\n      entry Poke when not Emptying and Stop_Emptying'Count = 0 is\n      begin\n         requeue Release;\n      end Poke;\n      entry Release when Release'Count &gt;= 3 or Emptying is\n         New_Output : access Output;\n      begin\n         if not Emptying then\n            New_Output := new Output;\n            Emptying := True;\n            requeue Stop_Emptying;\n         end if;\n      end Release;\n      entry Stop_Emptying when Release'Count = 0 is\n      begin\n         Emptying := False;\n      end Stop_Emptying;\n      entry Finish when Poke'Count = 0 and Release'Count &lt; 3 is\n      begin\n         Emptying := True;\n         requeue Stop_Emptying;\n      end Finish;\n   end Divisor_Type;\n\n   protected body Collector_Type is\n      entry Poke when Emptying is\n      begin\n         null;\n      end Poke;\n      entry Finish when True is\n      begin\n         Ada.Text_IO.Put_Line (Poke'Count'Img);\n         Emptying := True;\n      end Finish;\n   end Collector_Type;\n\n   Collector : Collector_Type;\n   Divisor : Divisor_Type;\n\n   task body Input is\n   begin\n      Divisor.Poke;\n   end Input;\n\n   task body Output is\n   begin\n      Collector.Poke;\n   end Output;\n\n   Cur_Input : access Input;\n\n   -- Input value:\n   Number : Integer := 18;\nbegin\n   for I in 1 .. Number loop\n      Cur_Input := new Input;\n   end loop;\n   Divisor.Finish;\n   Collector.Finish;\nend Divide_By_3;\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 12092834, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Quite amused none answered with a generic division:</p>\n\n<pre><code>/* For the given integer find the position of MSB */\nint find_msb_loc(unsigned int n)\n{\n    if (n == 0)\n        return 0;\n\n    int loc = sizeof(n)  * 8 - 1;\n    while (!(n &amp; (1 &lt;&lt; loc)))\n        loc--;\n    return loc;\n}\n\n\n/* Assume both a and b to be positive, return a/b */\nint divide_bitwise(const unsigned int a, const unsigned int b)\n{\n    int int_size = sizeof(unsigned int) * 8;\n    int b_msb_loc = find_msb_loc(b);\n\n    int d = 0; // dividend\n    int r = 0; // reminder\n    int t_a = a;\n    int t_a_msb_loc = find_msb_loc(t_a);\n    int t_b = b &lt;&lt; (t_a_msb_loc - b_msb_loc);\n\n    int i;\n    for(i = t_a_msb_loc; i &gt;= b_msb_loc; i--)  {\n        if (t_a &gt; t_b) {\n            d = (d &lt;&lt; 1) | 0x1;\n            t_a -= t_b; // Not a bitwise operatiion\n            t_b = t_b &gt;&gt; 1;\n         }\n        else if (t_a == t_b) {\n            d = (d &lt;&lt; 1) | 0x1;\n            t_a = 0;\n        }\n        else { // t_a &lt; t_b\n            d = d &lt;&lt; 1;\n            t_b = t_b &gt;&gt; 1;\n        }\n    }\n\n    r = t_a;\n    printf(\"==&gt; %d %d\\n\", d, r);\n    return d;\n}\n</code></pre>\n\n<p>The bitwise addition has already been given in one of the answers so skipping it.</p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 13423815, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>All answers are probably not that what the interviewer liked to hear:</p>\n\n<p>My answer:</p>\n\n<blockquote>\n  <p>\"I would never do that, who will me pay for such silly things. Nobody\n  will have an advantage on that, its not faster, its only silly.\n  Prozessor designers have to know that, but this must then work for all numbers, not only for division by 3\"</p>\n</blockquote>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 13880217, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>It seems no one mentioned the division criterion for 3 represented in binary - sum of even digits should equal the sum of odd digits (similar to criterion of 11 in decimal). There are solutions using this trick under <a href=\"http://stackoverflow.com/questions/844867/check-if-a-number-is-divisible-by-3\">Check if a number is divisible by 3</a>.</p>\n\n<p>I suppose that this is the possible duplicate that Michael Burr's edit mentioned.</p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 14115414, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Where InputValue is the number to divide by 3</p>\n\n<pre><code>SELECT AVG(NUM) \n  FROM (SELECT InputValue NUM from sys.dual\n         UNION ALL SELECT 0 from sys.dual\n         UNION ALL SELECT 0 from sys.dual) divby3\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 15073518, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct { char a,b,c; } Triple;\n\nunsigned long div3(Triple *v, char *r) {\n  if ((long)v &lt;= 2)  \n    return (unsigned long)r;\n  return div3(&amp;v[-1], &amp;r[1]);\n}\n\nint main() {\n  unsigned long v = 21; \n  int r = div3((Triple*)v, 0); \n  printf(\"%ld / 3 = %d\\n\", v, r); \n  return 0;\n}\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 15399542, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Why don't we just apply the definition studied at College? The result maybe inefficient but clear, as the multiplication is just a recursive subtraction and subtraction is an addition, then the addition can be performed by a recursive xor/and logic port combination.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint add(int a, int b){\n   int rc;\n   int carry;\n   rc = a ^ b; \n   carry = (a &amp; b) &lt;&lt; 1;\n   if (rc &amp; carry) \n      return add(rc, carry);\n   else\n      return rc ^ carry; \n}\n\nint sub(int a, int b){\n   return add(a, add(~b, 1)); \n}\n\nint div( int D, int Q )\n{\n/* lets do only positive and then\n * add the sign at the end\n * inversion needs to be performed only for +Q/-D or -Q/+D\n */\n   int result=0;\n   int sign=0;\n   if( D &lt; 0 ) {\n      D=sub(0,D);\n      if( Q&lt;0 )\n         Q=sub(0,Q);\n      else\n         sign=1;\n   } else {\n      if( Q&lt;0 ) {\n         Q=sub(0,Q);\n         sign=1;\n      } \n   }\n   while(D&gt;=Q) {\n      D = sub( D, Q );\n      result++;\n   }\n/*\n* Apply sign\n*/\n   if( sign )\n      result = sub(0,result);\n   return result;\n}\n\nint main( int argc, char ** argv ) \n{\n    printf( \"2 plus 3=%d\\n\", add(2,3) );\n    printf( \"22 div 3=%d\\n\", div(22,3) );\n    printf( \"-22 div 3=%d\\n\", div(-22,3) );\n    printf( \"-22 div -3=%d\\n\", div(-22,-3) );\n    printf( \"22 div 03=%d\\n\", div(22,-3) );\n    return 0;\n}\n</code></pre>\n\n<p>As someone says... first make this work. Note that algorithm should work for negative Q...</p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 19998569, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>Generally, a solution to this would be:</p>\n\n<p><code>log(pow(exp(numerator),pow(denominator,-1)))</code></p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 21324806, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>I would use this code to divide all positive, non float numbers. Basically you want to align the divisor bits to the left to match the dividend bits. For each segment of the dividend (size of divisor) you want to check to make sure if the the segment of dividend is greater than the divisor then you want to Shift Left and then OR in the first registrar. This concept was originally created in 2004 (standford I believe), Here is a C version which uses that concept. Note: (I modified it a bit)</p>\n\n<pre><code>int divide(int a, int b)\n{\n    int c = 0, r = 32, i = 32, p = a + 1;\n    unsigned long int d = 0x80000000;\n\n    while ((b &amp; d) == 0)\n    {\n        d &gt;&gt;= 1;\n        r--;\n    }\n\n    while (p &gt; a)\n    {\n        c &lt;&lt;= 1;\n        p = (b &gt;&gt; i--) &amp; ((1 &lt;&lt; r) - 1);\n        if (p &gt;= a)\n            c |= 1;\n    }\n    return c; //p is remainder (for modulus)\n}\n</code></pre>\n\n<p>Example Usage:</p>\n\n<pre><code>int n = divide( 3, 6); //outputs 2\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 21419090, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>This will work ...</p>\n\n<p><code>smegma$ curl http://www.wolframalpha.com/input/?i=14+divided+by+3 2&gt;/dev/null | gawk 'match($0, /link to /input/\\?i=([0-9.+-]+)/, ary) { print substr( $0, ary[1, \"start\"], ary[1, \"length\"] )}' 4.6666666666666666666666666666666666666666666666666666</code></p>\n\n<p>Just substitute '14' and '3' with your numbers.</p>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 25497126, "question_id": 11694546, "tags": ["c", "math", "division"]}, {"body": "<p>If you remind yourself standard school method of division and do it in binary, you will discover that in case of 3 you only divide and subtract a limited set of values (from 0 to 5 in this case). These can be treated with a switch statement to get rid of arithmetic operators.</p>\n\n<pre><code>static unsigned lamediv3(unsigned n)\n{\n  unsigned result = 0, remainder = 0, mask = 0x80000000;\n\n  // Go through all bits of n from MSB to LSB.\n  for (int i = 0; i &lt; 32; i++, mask &gt;&gt;= 1)\n  {\n    result &lt;&lt;= 1;\n    // Shift in the next bit of n into remainder.\n    remainder = remainder &lt;&lt; 1 | !!(n &amp; mask);\n\n    // Divide remainder by 3, update result and remainer.\n    // If remainder is less than 3, it remains intact.\n    switch (remainder)\n    {\n    case 3:\n      result |= 1;\n      remainder = 0;\n      break;\n\n    case 4:\n      result |= 1;\n      remainder = 1;\n      break;\n\n    case 5:\n      result |= 1;\n      remainder = 2;\n      break;\n    }\n  }\n\n  return result;\n}\n\n#include &lt;cstdio&gt;\n\nint main()\n{\n  // Verify for all possible values of a 32-bit unsigned integer.\n  unsigned i = 0;\n\n  do\n  {\n    unsigned d = lamediv3(i);\n\n    if (i / 3 != d)\n    {\n      printf(\"failed for %u: %u != %u\\n\", i, d, i / 3);\n      return 1;\n    }\n  }\n  while (++i != 0);\n}\n</code></pre>\n", "title": "Divide a number by 3 without using *, /, +, -, % operators", "answer_id": 29311405, "question_id": 11694546, "tags": ["c", "math", "division"]}], "link": "http://stackoverflow.com/questions/11694546/divide-a-number-by-3-without-using-operators", "question_id": 11694546}, {"body": "<p>I'm on windows and my <code>.gitignore</code> file seems to be being ignored by git - could the .ignore file be corrupt?  What file format, locale or culture does git expect?</p>\n\n<p>My <code>.gitignore</code>:</p>\n\n<pre><code>#this is a comment\ndebug.log\nnbproject/\n</code></pre>\n\n<p>Output from <code>git status</code>:</p>\n\n<pre><code># On branch master\n# Your branch is ahead of 'origin/master' by 1 commit.\n#\n# Untracked files:\n#   (use \"git add &lt;file&gt;...\" to include in what will be committed)\n#\n#       debug.log\n#       nbproject/\nnothing added to commit but untracked files present (use \"git add\" to track)\n</code></pre>\n\n<p>I would like it if <code>debug.log</code> and <code>nbproject/</code> did not appear in the untracked files list.</p>\n\n<p>Where should I start looking to fix this?</p>\n", "title": ".gitignore not working", "tags": ["git", "gitignore"], "answers": [{"body": "<p>Even if you haven't tracked the files so far, git seems to be able to \"know\" about them even after you add them to <code>.gitignore</code>. </p>\n\n<hr>\n\n<h2>NOTE : First commit your current changes, or you will lose them.</h2>\n\n<hr>\n\n<p>Then run the following commands from the top folder of your git repo:</p>\n\n<pre><code>git rm -r --cached .\ngit add .\ngit commit -m \"fixed untracked files\"\n</code></pre>\n", "title": ".gitignore not working", "answer_id": 11451731, "question_id": 11451535, "tags": ["git", "gitignore"]}, {"body": "<p>Fixed.  Ok, I created the .gitignore file in notepad on windows and it wasn't working.  When I viewed the .gitignore file in linux it looked like organised gibberish - perhaps notepad had written out unicode rather than ascii or whatever 8-bit is.</p>\n\n<p>So I rewrote the file on my linux box, and when I pulled it back into windows it works fine!  Hurrah!</p>\n", "title": ".gitignore not working", "answer_id": 11451916, "question_id": 11451535, "tags": ["git", "gitignore"]}, {"body": "<p>One thing to also look at, is are you saving your .gitignore file with the correct line endings?</p>\n\n<p>WINDOWS:\nIf you're using it in windows, are you saving it with windows line endings?  Not all programs will do this by default, notepad++ and many php editors default to linux line endings so the files will be server compatible.  One easy way to check this, is open the file in windows notepad.  If everything appears on one line, then the file was saved with linux line endings.</p>\n\n<p>LINUX:\nIf you are having trouble with the file working in a linux environment.  Open the file in an editor such as emacs or nano.  If you see any non-printable characters, then the file was saved with windows line endings.</p>\n", "title": ".gitignore not working", "answer_id": 13354744, "question_id": 11451535, "tags": ["git", "gitignore"]}, {"body": "<p>First commit your current changes or you will <strong>lose</strong> them.</p>\n\n<pre><code>git rm . -r --cached\ngit add .\ngit commit -m \"fixed untracked files\"\n</code></pre>\n", "title": ".gitignore not working", "answer_id": 16821937, "question_id": 11451535, "tags": ["git", "gitignore"]}, {"body": "<p>Another cause of this issue is blank spaces or tabs before the statement:</p>\n\n<p>Example:</p>\n\n<pre><code>#Be aware of following:\n notWorkingIgnore.*\nworkingIgnore.*\n</code></pre>\n\n<p>And as pointed out by the comment bellow a trailing space can be an issue aswell</p>\n\n<pre><code>#Be aware of following:\nnotWorkingIgnore.* #&lt;-Space\nworkingIgnore.*#&lt;-Nospace\n</code></pre>\n", "title": ".gitignore not working", "answer_id": 20736016, "question_id": 11451535, "tags": ["git", "gitignore"]}, {"body": "<p>Without adding another commit to your project, one line will be enough to make <code>.gitignore</code> work as it is supposed to:</p>\n\n<pre><code>git rm -r --cached debug.log nbproject\n</code></pre>\n", "title": ".gitignore not working", "answer_id": 22520528, "question_id": 11451535, "tags": ["git", "gitignore"]}, {"body": "<p>Also check out the <strong>directory</strong>, where you put .gitignore\nIt should be in <strong>root of your project</strong>: </p>\n\n<pre><code>./myproject/.gitignore\n</code></pre>\n\n<p>not in </p>\n\n<pre><code>./myproject/.git/.gitignore\n</code></pre>\n", "title": ".gitignore not working", "answer_id": 26354062, "question_id": 11451535, "tags": ["git", "gitignore"]}, {"body": "<p>I had this same problem. I believe the issue was a CR vs CR+LF discrepancy. I stashed things in my .gitignore using cmd (on windows 7) and the following command:   </p>\n\n<p>Bad:</p>\n\n<blockquote>\n  <p>echo \"file_to_be_ignored.py\" >> .gitignore<br>\n  echo \"*~\" >> .gitignore</p>\n</blockquote>\n\n<p>Etc.</p>\n\n<p>The issue was that this command does not place the correct end-of-line marker for git to recognize the newlines (either CR or CR+LF when git expects the other). I solved the problem by manually replacing each newline in vim (vim to the rescue!) and it worked perfectly.</p>\n\n<p>Try editing your .gitignore in Notepad++ or vim (ideally), even if the file looks like it's formatted correctly, try replacing the newlines. Sounds weird, I know, but worked for me. :D</p>\n", "title": ".gitignore not working", "answer_id": 28642919, "question_id": 11451535, "tags": ["git", "gitignore"]}, {"body": "<p>I noticed that the encoding of the <code>.gitignore</code> was having an effect--if the file was Unicode, it was ignored, if it was ASCII, it wasn't.</p>\n\n<p>Process:</p>\n\n<ol>\n<li>Verify status: <code>PS&gt; git status</code></li>\n<li>Create a function to <a href=\"http://stackoverflow.com/a/9121679/134367\">Get-FileEncoding</a></li>\n<li>Test <code>.gitignore</code>'s encoding: <code>PS&gt; Get-FileEncoding .gitignore</code></li>\n<li><a href=\"http://stackoverflow.com/a/9121679/134367\">Change the encoding</a> to ASCII: <code>PS&gt; Set-Content .gitignore -Encoding Ascii -Value (Get-Content .gitignore)</code></li>\n<li>Confirm: <code>PS&gt; git status</code></li>\n</ol>\n", "title": ".gitignore not working", "answer_id": 31998545, "question_id": 11451535, "tags": ["git", "gitignore"]}, {"body": "<p>There's another issue with <code>.gitignore</code> that might happen, especially for a windows user, git does not like it when you name <code>.gitignore</code> (such as <code>unity.gitignore</code>). You'll want to always name it <code>.gitignore</code>, or on windows, <code>.gitignore.</code>as windows thinks you are trying to rename it without a filename.</p>\n", "title": ".gitignore not working", "answer_id": 32037026, "question_id": 11451535, "tags": ["git", "gitignore"]}, {"body": "<p>When .gitignore file is not working (adding something into .gitignore file or removing something from .gitignore file), you can check the following tips:</p>\n\n<ol>\n<li>you must pay attention to the global gitignore file which sometimes\nmay influence your gitignore.</li>\n<li><p>When you add something into .gitignore file, as the person who answered\nthis question first:  </p>\n\n<pre><code>git rm -r --cached .\ngit add .\ngit commit -m \"fixed untracked files\"  \n</code></pre></li>\n<li><p>When you remove something from .gitignore file.The above steps will\nnot work for you.  You can try this:</p>\n\n<pre><code>git add -f \"filetype\"\ngit commit -m \u201cRefresh removing filetype from .gitignore file.\u201d\n</code></pre></li>\n</ol>\n\n<p>the \"filetype\" means the file or filetype you want to remove from the .gitignore file. You want to make the filetype be tracked again.</p>\n", "title": ".gitignore not working", "answer_id": 32377642, "question_id": 11451535, "tags": ["git", "gitignore"]}, {"body": "<p>All the answers here are actually workarounds. You need to create the .gitignore file BEFORE you run <code>git init</code>, otherwise <code>git</code> will never know you need to ignore those files because they have been tracked already.</p>\n\n<pre><code>echo .idea/ &gt;&gt; .gitignore\ngit init\n</code></pre>\n\n<p>If you develop on a daily basis, I advise you to add your habitual ignored files to your <code>~/.gitignore_global</code> file. That way, <code>git</code> will already know which files you (meaning \"your user\", since it's a file in your home directory) usually ignore.</p>\n", "title": ".gitignore not working", "answer_id": 33926626, "question_id": 11451535, "tags": ["git", "gitignore"]}, {"body": "<p>Ok, so in my case the accepted solution did not work, and what worked is described here:</p>\n\n<p><a href=\"https://ericnelson.wordpress.com/2014/06/21/is-visual-studio-2013-ignoring-your-gitignore-file/\" rel=\"nofollow\">https://ericnelson.wordpress.com/2014/06/21/is-visual-studio-2013-ignoring-your-gitignore-file/</a></p>\n\n<p>In short:</p>\n\n<ul>\n<li>Close Visual Studio.</li>\n<li>Navigate to your .git folder</li>\n<li>Delete ms-persist.xml</li>\n<li>Restart Visual Studio</li>\n</ul>\n\n<p>Hope this helps somebody sometime</p>\n", "title": ".gitignore not working", "answer_id": 36282011, "question_id": 11451535, "tags": ["git", "gitignore"]}], "link": "http://stackoverflow.com/questions/11451535/gitignore-not-working", "question_id": 11451535}, {"body": "<p>Ryan Davis\u2019s <a href=\"http://www.zenspider.com/ruby/quickref.html#general-tips\">Ruby QuickRef</a> says (without explanation):</p>\n\n<blockquote>\n  <p>Don\u2019t rescue Exception. EVER. or I will stab you.</p>\n</blockquote>\n\n<p>Why not? What\u2019s the right thing to do?</p>\n", "title": "Why is it bad style to `rescue Exception =&gt; e` in Ruby?", "tags": ["ruby", "exception-handling"], "answers": [{"body": "<p>Because this captures all exceptions. It's unlikely that your program can recover from <strong>any</strong> of them. </p>\n\n<p>You should handle only exceptions that you know how to recover from. If you don't anticipate a certain kind of exception, don't handle it, crash loudly (write details to the log), then diagnose logs and fix code.</p>\n\n<p>Swallowing exceptions is bad, don't do this.</p>\n", "title": "Why is it bad style to `rescue Exception =&gt; e` in Ruby?", "answer_id": 10048215, "question_id": 10048173, "tags": ["ruby", "exception-handling"]}, {"body": "<p><code>Exception</code> is the root of <a href=\"http://rubylearning.com/images/exception.jpg\">Ruby's exception hierarchy</a>, so when you <code>rescue Exception</code> you rescue from <em>everything</em>, including subclasses such as <code>SyntaxError</code>, <code>LoadError</code>, and <code>Interrupt</code>.</p>\n\n<p>Rescuing <code>Interrupt</code> prevents the user from using <kbd>CTRL</kbd><kbd>C</kbd> to exit the program.</p>\n\n<p>Rescuing <code>SignalException</code> prevents the program from responding correctly to signals. It will be unkillable except by <code>kill -9</code>.</p>\n\n<p>Rescuing <code>SyntaxError</code> means that <code>eval</code>s that fail will do so silently.</p>\n\n<p>All of these can be shown by running this program, and trying to <kbd>CTRL</kbd><kbd>C</kbd> or <code>kill</code> it:</p>\n\n<pre><code>loop do\n  begin\n    sleep 1\n    eval \"djsakru3924r9eiuorwju3498 += 5u84fior8u8t4ruyf8ihiure\"\n  rescue Exception\n    puts \"I refuse to fail or be stopped!\"\n  end\nend\n</code></pre>\n\n<p>Rescuing from <code>Exception</code> isn't even the default. Doing</p>\n\n<pre><code>begin\n  # iceberg!\nrescue\n  # lifeboats\nend\n</code></pre>\n\n<p>does not rescue from <code>Exception</code>, it rescues from <code>StandardError</code>. You should generally specify something more specific than the default <code>StandardError</code>, but rescuing from <code>Exception</code> <em>broadens</em> the scope rather than narrowing it, and can have catastrophic results and make bug-hunting extremely difficult.</p>\n\n<hr>\n\n<p>If you have a situation where you do want to rescue from <code>StandardError</code> and you need a variable with the exception, you can use this form:</p>\n\n<pre><code>begin\n  # iceberg!\nrescue =&gt; e\n  # lifeboats\nend\n</code></pre>\n\n<p>which is equivalent to:</p>\n\n<pre><code>begin\n  # iceberg!\nrescue StandardError =&gt; e\n  # lifeboats\nend\n</code></pre>\n\n<hr>\n\n<p>One of the few common cases where it\u2019s sane to rescue from <code>Exception</code> is for logging/reporting purposes, in which case you should immediately re-raise the exception:</p>\n\n<pre><code>begin\n  # iceberg?\nrescue Exception =&gt; e\n  # do some logging\n  raise e  # not enough lifeboats ;)\nend\n</code></pre>\n", "title": "Why is it bad style to `rescue Exception =&gt; e` in Ruby?", "answer_id": 10048406, "question_id": 10048173, "tags": ["ruby", "exception-handling"]}, {"body": "<p>That's a specific case of the rule that you shouldn't catch <em>any</em> exception you don't know how to handle. If you don't know how to handle it, it's always better to let some other part of the system catch and handle it.</p>\n", "title": "Why is it bad style to `rescue Exception =&gt; e` in Ruby?", "answer_id": 10050511, "question_id": 10048173, "tags": ["ruby", "exception-handling"]}, {"body": "<p>The <em>real</em> rule is: Don't throw away exceptions.  The objectivity of the author of your quote is questionable, as evidenced by the fact that it ends with</p>\n\n<blockquote>\n  <p>or I will stab you</p>\n</blockquote>\n\n<p>Of course, be aware that signals (by default) throw exceptions, and normally long-running processes are terminated through a signal, so catching Exception and not terminating on signal exceptions will make your program very hard to stop.  So don't do this:</p>\n\n<pre><code>#! /usr/bin/ruby\n\nwhile true do\n  begin\n    line = STDIN.gets\n    # heavy processing\n  rescue Exception =&gt; e\n    puts \"caught exception #{e}! ohnoes!\"\n  end\nend\n</code></pre>\n\n<p>No, really, don't do it.  Don't even run that to see if it works.</p>\n\n<p>However, say you have a threaded server and you want all exceptions to not:</p>\n\n<ol>\n<li>be ignored (the default)</li>\n<li>stop the server (which happens if you say <code>thread.abort_on_exception = true</code>).  </li>\n</ol>\n\n<p>Then this is perfectly acceptable in your connection handling thread:</p>\n\n<pre><code>begin\n  # do stuff\nrescue Exception =&gt; e\n  myLogger.error(\"uncaught #{e} exception while handling connection: #{e.message}\")\n    myLogger.error(\"Stack trace: #{backtrace.map {|l| \"  #{l}\\n\"}.join}\")\nend\n</code></pre>\n\n<p>The above works out to a variation of Ruby's default exception handler, with the advantage that it doesn't also kill your program.  Rails does this in its request handler.</p>\n\n<p>Signal exceptions are raised in the main thread.  Background threads won't get them, so there is no point in trying to catch them there.</p>\n\n<p>This is particularly useful in a production environment, where you do <em>not</em> want your program to simply stop whenever something goes wrong. Then you can take the stack dumps in your logs and add to your code to deal with specific exception further down the call chain and in a more graceful manner.</p>\n\n<p>Note also that there is another Ruby idiom which has much the same effect:</p>\n\n<pre><code>a = do_something rescue \"something else\"\n</code></pre>\n\n<p>In this line, if <code>do_something</code> raises an exception, it is caught by Ruby, thrown away, and <code>a</code> is assigned <code>\"something else\"</code>.</p>\n\n<p>Generally, don't do that, except in special cases where you <em>know</em> you don't need to worry.  One example:</p>\n\n<pre><code>debugger rescue nil\n</code></pre>\n\n<p>The <code>debugger</code> function is a rather nice way to set a breakpoint in your code, but if running outside a debugger, and Rails, it raises an exception.  Now theoretically you shouldn't be leaving debug code lying around in your program (pff! nobody does that!)  but you might want to keep it there for a while for some reason, but not continually run your debugger.</p>\n\n<p>Note:</p>\n\n<ol>\n<li><p>If you've run someone else's program that catches signal exceptions and ignores them, (say the code above) then:</p>\n\n<ul>\n<li>in Linux, in a shell, type <code>pgrep ruby</code>, or <code>ps | grep ruby</code>, look for your offending program's PID, and then run <code>kill -9 &lt;PID&gt;</code>.   </li>\n<li>in Windows, use the Task Manager (<kbd>CTRL</kbd>-<kbd>SHIFT</kbd>-<kbd>ESC</kbd>), go to the \"processes\" tab, find your process, right click it and select \"End process\".</li>\n</ul></li>\n<li><p>If you are working with someone else's program which is, for whatever reason, peppered with these ignore-exception blocks, then putting this at the top of the mainline is one possible cop-out:</p>\n\n<pre><code>%W/INT QUIT TERM/.each { |sig| trap sig,\"SYSTEM_DEFAULT\" }\n</code></pre>\n\n<p>This causes the program to respond to the normal termination signals by immediately terminating, bypassing exception handlers,  <em>with no cleanup</em>.  So it could cause data loss or similar.  Be careful!</p></li>\n<li><p>If you need to do this:</p>\n\n<pre><code>begin\n  do_something\nrescue Exception =&gt; e\n  critical_cleanup\n  raise\nend\n</code></pre>\n\n<p>you can actually do this:</p>\n\n<pre><code>begin\n  do_something\nensure\n  critical_cleanup\nend\n</code></pre>\n\n<p>In the second case, <code>critical cleanup</code> will be called every time, whether or not an exception is thrown.</p></li>\n</ol>\n", "title": "Why is it bad style to `rescue Exception =&gt; e` in Ruby?", "answer_id": 10052064, "question_id": 10048173, "tags": ["ruby", "exception-handling"]}, {"body": "<p>Let's say you are in a car (running Ruby). You recently installed a new steering wheel with the over-the-air upgrade system (which uses <code>eval</code>), but you didn't know one of the programmers messed up on syntax.</p>\n\n<p>You are on a bridge, and realize you are going a bit towards the railing, so you turn left.</p>\n\n<pre><code>def turn_left\n  self.turn left:\nend\n</code></pre>\n\n<p>oops! That's probably <em>Not Good</em>\u2122, luckily, Ruby raises a <code>SyntaxError</code>.</p>\n\n<p>The car should stop immediately - right?</p>\n\n<p>Nope.</p>\n\n<pre><code>begin\n  #...\n  eval self.steering_wheel\n  #...\nrescue Exception =&gt; e\n  self.beep\n  self.log \"Caught #{e}.\", :warn\n  self.log \"Logged Error - Continuing Process.\", :info\nend\n</code></pre>\n\n<blockquote>\n  <p><strong>beep beep</strong></p>\n  \n  <p>Warning: Caught SyntaxError Exception.</p>\n  \n  <p>Info: Logged Error - Continuing Process.</p>\n</blockquote>\n\n<p>You notice something is wrong, and you slam on the emergency breaks (<code>^C</code>: <code>Interrupt</code>)</p>\n\n<blockquote>\n  <p><strong>beep beep</strong></p>\n  \n  <p>Warning: Caught Interrupt Exception.</p>\n  \n  <p>Info: Logged Error - Continuing Process.</p>\n</blockquote>\n\n<p>Yeah - that didn't help much. You're pretty close to the rail, so you put the car in park (<code>kill</code>ing: <code>SignalException</code>).</p>\n\n<blockquote>\n  <p><strong>beep beep</strong></p>\n  \n  <p>Warning: Caught SignalException Exception.</p>\n  \n  <p>Info: Logged Error - Continuing Process.</p>\n</blockquote>\n\n<p>At the last second, you pull out the keys (<code>kill -9</code>), and the car stops, you slam forward into the steering wheel (the airbag can't inflate because you didn't gracefully stop the program - you terminated it), and the computer in the back of your car slams into the seat in front of it. A half-full can of Coke spills over the papers. The groceries in the back are crushed, and most are covered in egg yolk and milk. The car needs serious repair and cleaning. (Data Loss) </p>\n\n<p>Hopefully you have insurance (Backups). Oh yeah - because the airbag didn't inflate, you're probably hurt (getting fired, etc).</p>\n\n<hr>\n\n<p>But wait! There's <del>more</del> reasons why you might want to use <code>rescue Exception =&gt; e</code>!</p>\n\n<p>Let's say you're that car, and you want to make sure the airbag inflates if the car is going more than 5mph before stopping.</p>\n\n<pre><code> begin \n    # do driving stuff\n rescue Exception =&gt; e\n    self.airbags.inflate if self.speed &gt;= 5.mph \n    raise\n end\n</code></pre>\n\n<p>Here's the exception to the rule: You can catch <code>Exception</code> <strong>only if you re-raise the exception</strong>. So, a better rule is to never swallow <code>Exception</code>, and always re-raise the error.</p>\n\n<p>But adding rescue is both easy to forget in a language like Ruby, and putting a rescue statement right before re-raising an issue feels a little non-DRY. And you <strong>do not</strong> want to forget the <code>raise</code> statement. And if you do, good luck trying to find that error.</p>\n\n<p>Thankfully, Ruby is awesome, you can just use the <code>ensure</code> keyword, which makes sure the code runs. The <code>ensure</code> keyword will run the code no matter what - if an exception is thrown, if one isn't, the only exception being if the world ends (or other unlikely events).</p>\n\n<pre><code> begin \n    # do driving stuff\n ensure\n    self.airbags.inflate if self.speed &gt;= 5.mph \n end\n</code></pre>\n\n<p>Boom! And that code should run anyways. The only reason you should use <code>rescue Exception =&gt; e</code> is if you need access to the exception, or if you only want code to run on an exception. And remember to re-raise the error. Every time. Or you will have 3 people stabbing you (including your boss).</p>\n\n<hr>\n\n<h2>TL;DR</h2>\n\n<p>Don't <code>rescue Exception =&gt; e</code> (and not re-raise the exception) - or you <em>might</em> drive off a bridge.</p>\n", "title": "Why is it bad style to `rescue Exception =&gt; e` in Ruby?", "answer_id": 35121040, "question_id": 10048173, "tags": ["ruby", "exception-handling"]}], "link": "http://stackoverflow.com/questions/10048173/why-is-it-bad-style-to-rescue-exception-e-in-ruby", "question_id": 10048173}, {"body": "<p>How can I reset the auto-increment of a field? I want it to start counting from 1 again.</p>\n", "title": "How to reset AUTO_INCREMENT in MySQL?", "tags": ["mysql", "sql", "auto-increment"], "answers": [{"body": "<p>You can reset the counter with:</p>\n\n<pre><code>ALTER TABLE tablename AUTO_INCREMENT = 1\n</code></pre>\n\n<p>For InnoDB you cannot set the <code>auto_increment</code> value lower or equal to the highest current index. (quote from <a href=\"http://viralpatel.net/blogs/reseting-mysql-autoincrement-column/\">ViralPatel</a>):</p>\n\n<blockquote>\n  <p>Note that you cannot reset the counter to a value less than or equal\n  to any that have already been used. For MyISAM, if the value is less\n  than or equal to the maximum value currently in the AUTO_INCREMENT\n  column, the value is reset to the current maximum plus one. For\n  InnoDB, if the value is less than the current maximum value in the\n  column, no error occurs and the current sequence value is not changed.</p>\n</blockquote>\n\n<p>See <em><a href=\"http://stackoverflow.com/q/2410689/367456\">How to Reset an MySQL AutoIncrement using a MAX value from another table?</a></em> on how to dynamically get an acceptable value.</p>\n", "title": "How to reset AUTO_INCREMENT in MySQL?", "answer_id": 8923132, "question_id": 8923114, "tags": ["mysql", "sql", "auto-increment"]}, {"body": "<pre><code>ALTER TABLE tablename AUTO_INCREMENT = 1\n</code></pre>\n", "title": "How to reset AUTO_INCREMENT in MySQL?", "answer_id": 8923135, "question_id": 8923114, "tags": ["mysql", "sql", "auto-increment"]}, {"body": "<p>Simply like this:</p>\n\n<pre><code>ALTER TABLE tablename AUTO_INCREMENT = value;\n</code></pre>\n\n<p>reference: <a href=\"http://dev.mysql.com/doc/refman/5.1/en/alter-table.html\">http://dev.mysql.com/doc/refman/5.1/en/alter-table.html</a></p>\n", "title": "How to reset AUTO_INCREMENT in MySQL?", "answer_id": 8923140, "question_id": 8923114, "tags": ["mysql", "sql", "auto-increment"]}, {"body": "<p>I suggest you to go to Query Browser and do the following:</p>\n\n<ol>\n<li>Go to schemata and find the table you want to alter. </li>\n<li>Right click and select copy create statement. </li>\n<li>Open a result tab and paste the create statement their.</li>\n<li>Go to the last line of the create statement and look for the Auto_Increment=N,\n(Where N is a current number for auto_increment field.)</li>\n<li>Replace N with 1.</li>\n<li>Press <strong><kbd>ctrl</kbd>+<kbd>enter</kbd></strong>.</li>\n</ol>\n\n<p>Auto_increment should reset to one once you enter new row int the table.</p>\n\n<p>I don't know what will happen if you try to add a row where an auto_increment field value already exist.</p>\n\n<p>Hope this help!</p>\n", "title": "How to reset AUTO_INCREMENT in MySQL?", "answer_id": 17482748, "question_id": 8923114, "tags": ["mysql", "sql", "auto-increment"]}, {"body": "<p>There are good options given in <a href=\"http://viralpatel.net/blogs/reseting-mysql-autoincrement-column/\">How To Reset MySQL Autoincrement Column</a></p>\n\n<p>Note that <code>ALTER TABLE tablename AUTO_INCREMENT = value;</code> does <em>not</em> work for InnoDB</p>\n", "title": "How to reset AUTO_INCREMENT in MySQL?", "answer_id": 18890642, "question_id": 8923114, "tags": ["mysql", "sql", "auto-increment"]}, {"body": "<p>The highest rated answers to this question all recommend \"ALTER yourtable AUTO_INCREMENT= value\".   However, this only works when <code>value</code> in the alter is greater than the current max value of the autoincrement column.   <a href=\"http://dev.mysql.com/doc/refman/5.0/en/alter-table.html\">According to the MySQL documentation</a>:  </p>\n\n<blockquote>\n  <p>You cannot reset the counter to a value less than or equal to any that\n  have already been used. For MyISAM, if the value is less than or equal\n  to the maximum value currently in the AUTO_INCREMENT column, the value\n  is reset to the current maximum plus one. For InnoDB, you can use\n  ALTER TABLE ... AUTO_INCREMENT = value as of MySQL 5.0.3, but if the\n  value is less than the current maximum value in the column, no error\n  occurs and the current sequence value is not changed.</p>\n</blockquote>\n\n<p>In essence, you can only alter AUTO_INCREMENT to increase the value of the autoincrement column, not reset it to 1, as the OP asks in the second part of the question.  For options that actually allow you set the AUTO_INCREMENT downward from its current max, take a look at <a href=\"http://stackoverflow.com/questions/740358/mysql-reorder-reset-auto-increment-primary-key\">MySQL: Reorder/Reset auto increment primary key?</a>.</p>\n", "title": "How to reset AUTO_INCREMENT in MySQL?", "answer_id": 20480308, "question_id": 8923114, "tags": ["mysql", "sql", "auto-increment"]}, {"body": "<pre><code>ALTER TABLE news_feed DROP id\n\nALTER TABLE news_feed ADD  id BIGINT( 200 ) NOT NULL AUTO_INCREMENT FIRST ,ADD PRIMARY KEY (id)\n</code></pre>\n\n<p>I used this in some of my scripts , the id field is droped and then added back with previous settings , all the existent fields within the database table are filled in with new auto increment values , this should also work with InnoDB . </p>\n\n<p><strong>Note that all the fields within the table will be recounted and will have other ids !!!.</strong></p>\n", "title": "How to reset AUTO_INCREMENT in MySQL?", "answer_id": 23402631, "question_id": 8923114, "tags": ["mysql", "sql", "auto-increment"]}, {"body": "<p><img src=\"http://i.stack.imgur.com/YxbA4.png\" alt=\"enter image description here\">There is a very easy way with phpmyadmin under the \"operations\" tab, you can set, in the table options, autoincrement to the number you want.</p>\n", "title": "How to reset AUTO_INCREMENT in MySQL?", "answer_id": 23449385, "question_id": 8923114, "tags": ["mysql", "sql", "auto-increment"]}, {"body": "<pre><code>SET  @num := 0;\n\nUPDATE your_table SET id = @num := (@num+1);\n\nALTER TABLE your_table AUTO_INCREMENT =1;\n</code></pre>\n\n<p>I think this will do it</p>\n", "title": "How to reset AUTO_INCREMENT in MySQL?", "answer_id": 23458602, "question_id": 8923114, "tags": ["mysql", "sql", "auto-increment"]}, {"body": "<p>The best solution that worked for me:</p>\n\n<pre><code>ALTER TABLE my_table MODIFY COLUMN ID INT(10) UNSIGNED;\nCOMMIT;\nALTER TABLE my_table MODIFY COLUMN ID INT(10) UNSIGNED AUTO_INCREMENT;\nCOMMIT;\n</code></pre>\n\n<p>Its fast, works with innoDB, and I don't need to know the current maximum value!\nThis way the auto increment counter will reset and it will start automatically from the maximum value exists.</p>\n", "title": "How to reset AUTO_INCREMENT in MySQL?", "answer_id": 25879519, "question_id": 8923114, "tags": ["mysql", "sql", "auto-increment"]}, {"body": "<p>You can also use the syntax <code>TRUNCATE</code> table like this :\n<code>TRUNCATE TABLE table_name</code></p>\n\n<p><em>BEWARE!!</em> <code>TRUNCATE TABLE your_table</code> will <strong>delete everything</strong> in your <code>your_table</code>!!</p>\n", "title": "How to reset AUTO_INCREMENT in MySQL?", "answer_id": 30252499, "question_id": 8923114, "tags": ["mysql", "sql", "auto-increment"]}, {"body": "<p>I tried to alter the table and set auto_increment to 1 but it did not work. I resolved to delete the column name I was incrementing, then create a new column with your preferred name and set that new column to increment from the onset.</p>\n", "title": "How to reset AUTO_INCREMENT in MySQL?", "answer_id": 31243081, "question_id": 8923114, "tags": ["mysql", "sql", "auto-increment"]}, {"body": "<p>Adding an update because the functionality changed in MySQL 5.6. As of MySQL 5.6 you CAN use the simple ALTER TABLE with InnoDB:</p>\n\n<pre><code>ALTER TABLE tablename AUTO_INCREMENT = 1;\n</code></pre>\n\n<p>The docs are updated to reflect this:</p>\n\n<p><a href=\"http://dev.mysql.com/doc/refman/5.6/en/alter-table.html\">http://dev.mysql.com/doc/refman/5.6/en/alter-table.html</a></p>\n\n<p>My testing also shows that the table is NOT copied, the value is simply changed.</p>\n", "title": "How to reset AUTO_INCREMENT in MySQL?", "answer_id": 32789322, "question_id": 8923114, "tags": ["mysql", "sql", "auto-increment"]}, {"body": "<p>For MYISAM </p>\n\n<pre><code>ALTER TABLE tablename AUTO_INCREMENT = 1;\n</code></pre>\n\n<p>For INNO DB</p>\n\n<pre><code>SET  @num := 0;\nUPDATE your_table SET id = @num := (@num+1);\nALTER TABLE your_table AUTO_INCREMENT =1;\n</code></pre>\n", "title": "How to reset AUTO_INCREMENT in MySQL?", "answer_id": 38801535, "question_id": 8923114, "tags": ["mysql", "sql", "auto-increment"]}, {"body": "<p>Below code works for me </p>\n\n<pre><code>Alter TABLE employee AUTO_INCREMENT = 5;\n</code></pre>\n\n<p>version - 5.7.13</p>\n\n<p>Engine - innodb</p>\n", "title": "How to reset AUTO_INCREMENT in MySQL?", "answer_id": 39173978, "question_id": 8923114, "tags": ["mysql", "sql", "auto-increment"]}], "link": "http://stackoverflow.com/questions/8923114/how-to-reset-auto-increment-in-mysql", "question_id": 8923114}, {"body": "<p>I'm finding that I need to update the my page to my scope manually more and more since building an application in angular.</p>\n\n<p>The only way I know of to do this is to call <code>$apply()</code> from the scope of my controllers and directives. The problem with this is that it keeps throwing an error to the console that reads  :</p>\n\n<blockquote>\n  <p>Error: $digest already in progress</p>\n</blockquote>\n\n<p>Does anyone know how to avoid this error or achieve the same thing but a different way?</p>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "tags": ["angularjs", "angularjs-scope", "angular-digest"], "answers": [{"body": "<p>When you get this error, it basically means that it's already in the process of updating your view. You really shouldn't need to call <code>$apply()</code> within your controller. If your view isn't updating as you would expect, and then you get this error after calling <code>$apply()</code>, it most likely means you're not updating the the model correctly. If you post some specifics, we could figure out the core problem.</p>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 12729820, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<blockquote>\n  <p><strong>Don't use this pattern</strong> - This will end up causing more errors than it solves. Even though you think it fixed something, it didn't. </p>\n</blockquote>\n\n<p>You can check if a <code>$digest</code> is already in progress by checking <code>$scope.$$phase</code>. </p>\n\n<pre><code>if(!$scope.$$phase) {\n  //$digest or $apply\n}\n</code></pre>\n\n<p><code>$scope.$$phase</code> will return <code>\"$digest\"</code> or <code>\"$apply\"</code> if a <code>$digest</code> or <code>$apply</code> is in progress. I believe the difference between these states is that <code>$digest</code> will process the watches of the current scope and its children, and <code>$apply</code> will process the watchers of all scopes.</p>\n\n<p>To @dnc253's point, if you find yourself calling <code>$digest</code> or <code>$apply</code> frequently, you may be doing it wrong. I generally find I need to digest when I need to update the scope's state as a result of a DOM event firing outside the reach of Angular. For example, when a twitter bootstrap modal becomes hidden. Sometimes the DOM event fires when a <code>$digest</code> is in progress, sometimes not. That's why I use this check. </p>\n\n<p>I would love to know a better way if anyone knows one.</p>\n\n<hr>\n\n<p>From comments: \nby @anddoutoi</p>\n\n<p><a href=\"https://github.com/angular/angular.js/wiki/Anti-Patterns\">angular.js Anti Patterns</a></p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Don't do <code>if (!$scope.$$phase) $scope.$apply()</code>, it means your <code>$scope.$apply()</code> isn't high enough in the call stack.</li>\n  </ol>\n</blockquote>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 12859093, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<p>Sometimes you will still get errors if you use this way (<a href=\"http://stackoverflow.com/a/12859093/801426\">http://stackoverflow.com/a/12859093/801426</a>).</p>\n\n<p>Try this:</p>\n\n<pre><code>if(! $rootScope.$root.$$phase) {\n...\n</code></pre>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 16301044, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<p>Handy little helper method to keep this process DRY: </p>\n\n<pre><code>function safeApply(scope, fn) {\n    (scope.$$phase || scope.$root.$$phase) ? fn() : scope.$apply(fn);\n}\n</code></pre>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 17114810, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<p>The digest cycle is a synchronous call. It won't yield control to the browser's event loop until it is done. There are a few ways to deal with this. The easiest way to deal with this is to use the built in $timeout, and a second way is if you are using underscore or lodash (and you should be), call the following:</p>\n\n<pre><code>$timeout(function(){\n    //any code in here will automatically have an apply run afterwards\n});\n</code></pre>\n\n<p>or if you have underscore:</p>\n\n<pre><code>_.defer(function(){$scope.$apply();});\n</code></pre>\n\n<p>We tried several workarounds, and we hated injecting $rootScope into all of our controllers, directives, and even some factories. So, the $timeout and _.defer have been our favorite so far. These methods successfully tell angular to wait until the next animation loop, which will guarantee that the current scope.$apply is over. </p>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 17958847, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<p>I have been able to solve this problem by calling <code>$eval</code> instead of <code>$apply</code> in places where I know that the <code>$digest</code> function will be running.</p>\n\n<p>According to the <a href=\"http://docs.angularjs.org/guide/scope\" rel=\"nofollow\">docs</a>, <code>$apply</code> basically does this:</p>\n\n<pre><code>function $apply(expr) {\n  try {\n    return $eval(expr);\n  } catch (e) {\n    $exceptionHandler(e);\n  } finally {\n    $root.$digest();\n  }\n}\n</code></pre>\n\n<p>In my case, an <code>ng-click</code> changes a variable within a scope, and a $watch on that variable changes other variables which have to be <code>$applied</code>. This last step causes the error \"digest already in progress\".</p>\n\n<p>By replacing <code>$apply</code> with <code>$eval</code> inside the watch expression the scope variables get updated as expected.</p>\n\n<p>Therefore, it <em>appears</em> that if digest is going to be running anyways because of some other change within Angular, <code>$eval</code>'ing is all you need to do.</p>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 18563072, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<p>I had the same problem with third parties scripts like CodeMirror for example and Krpano,\nand even using safeApply methods mentioned here haven't solved the error for me.</p>\n\n<p>But what do has solved it is using $timeout service (don't forget to inject it first).</p>\n\n<p>Thus, something like:</p>\n\n<pre><code>$timeout(function() {\n  // run my code safely here\n})\n</code></pre>\n\n<p>and if inside your code you are using </p>\n\n<blockquote>\n  <p>this</p>\n</blockquote>\n\n<p>perhaps because it's inside a factory directive's controller or just need some kind of binding, then you would do something like:</p>\n\n<pre><code>.factory('myClass', [\n  '$timeout',\n  function($timeout) {\n\n    var myClass = function() {};\n\n    myClass.prototype.surprise = function() {\n      // Do something suprising! :D\n    };\n\n    myClass.prototype.beAmazing = function() {\n      // Here 'this' referes to the current instance of myClass\n\n      $timeout(angular.bind(this, function() {\n          // Run my code safely here and this is not undefined but\n          // the same as outside of this anonymous function\n          this.surprise();\n       }));\n    }\n\n    return new myClass();\n\n  }]\n)\n</code></pre>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 18582337, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<p>You can also use evalAsync. It will run sometime after digest has finished!</p>\n\n<pre><code>scope.evalAsync(function(scope){\n    //use the scope...\n});\n</code></pre>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 18885062, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<p>From a recent discussion with the Angular guys on this very topic: <strong>For future-proofing reasons, you should not use <code>$$phase</code></strong></p>\n\n<p>When pressed for the \"right\" way to do it, the answer is currently</p>\n\n<pre><code>$timeout(function() {\n  // anything you want can go here and will safely be run on the next digest.\n})\n</code></pre>\n\n<p>I recently ran into this when writing angular services to wrap the facebook, google, and twitter APIs which, to varying degrees, have callbacks handed in.</p>\n\n<p>Here's an example from within a service. (For the sake of brevity, the rest of the service -- that set up variables, injected $timeout etc. -- has been left off.)</p>\n\n<pre><code>window.gapi.client.load('oauth2', 'v2', function() {\n    var request = window.gapi.client.oauth2.userinfo.get();\n    request.execute(function(response) {\n        // This happens outside of angular land, so wrap it in a timeout \n        // with an implied apply and blammo, we're in action.\n        $timeout(function() {\n            if(typeof(response['error']) !== 'undefined'){\n                // If the google api sent us an error, reject the promise.\n                deferred.reject(response);\n            }else{\n                // Resolve the promise with the whole response if ok.\n                deferred.resolve(response);\n            }\n        });\n    });\n});\n</code></pre>\n\n<p>Note that the delay argument for $timeout is optional and will default to 0 if left unset (<a href=\"https://github.com/angular/angular.js/blob/v1.2.0-rc.2/src/ng/timeout.js#L41\">$timeout</a> calls <a href=\"https://github.com/angular/angular.js/blob/v1.2.0-rc.2/src/ng/browser.js\">$browser.defer</a> which <a href=\"https://github.com/angular/angular.js/blob/v1.2.0-rc.2/src/ng/browser.js#L344\">defaults to 0 if delay isn't set</a>)</p>\n\n<p>A little non-intuitive, but that's the answer from the guys writing Angular, so it's good enough for me!</p>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 18996042, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<p>yearofmoo did a great job at creating a reusable $safeApply function for us : </p>\n\n<blockquote>\n  <p><a href=\"https://github.com/yearofmoo/AngularJS-Scope.SafeApply\" rel=\"nofollow\">https://github.com/yearofmoo/AngularJS-Scope.SafeApply</a></p>\n</blockquote>\n\n<p>Usage :</p>\n\n<pre><code>//use by itself\n$scope.$safeApply();\n\n//tell it which scope to update\n$scope.$safeApply($scope);\n$scope.$safeApply($anotherScope);\n\n//pass in an update function that gets called when the digest is going on...\n$scope.$safeApply(function() {\n\n});\n\n//pass in both a scope and a function\n$scope.$safeApply($anotherScope,function() {\n\n});\n\n//call it on the rootScope\n$rootScope.$safeApply();\n$rootScope.$safeApply($rootScope);\n$rootScope.$safeApply($scope);\n$rootScope.$safeApply($scope, fn);\n$rootScope.$safeApply(fn);\n</code></pre>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 20122412, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<p>Understanding that the Angular documents call checking the <code>$$phase</code> an <a href=\"https://github.com/angular/angular.js/wiki/Anti-Patterns\" rel=\"nofollow\">anti-pattern</a>, I tried to get <code>$timeout</code> and <code>_.defer</code> to work.</p>\n\n<p>The timeout and deferred methods create a flash of unparsed <code>{{myVar}}</code> content in the dom like a <a href=\"http://www.paulirish.com/2009/fighting-the-font-face-fout/\" rel=\"nofollow\">FOUT</a>. For me this was not acceptable. It leaves me without much to be told dogmatically that something is a hack, and not have a suitable alternative.</p>\n\n<p>The only thing that works every time is:</p>\n\n<p><code>if(scope.$$phase !== '$digest'){ scope.$digest() }</code>.</p>\n\n<p>I don't understand the danger of this method, or why it's described as a hack by people in the comments and the angular team. The command seems precise and easy to read:</p>\n\n<blockquote>\n  <p>\"Do the digest unless one is already happening\"</p>\n</blockquote>\n\n<p>In CoffeeScript it's even prettier:</p>\n\n<p><code>scope.$digest() unless scope.$$phase is '$digest'</code></p>\n\n<p>What's the issue with this? Is there an alternative that won't create a FOUT? <a href=\"https://github.com/yearofmoo/AngularJS-Scope.SafeApply\" rel=\"nofollow\">$safeApply</a> looks fine but uses the <code>$$phase</code> inspection method, too.</p>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 20862377, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<p>I would advise you to use a custom event rather than triggering a digest cycle.</p>\n\n<p>I've come to find that broadcasting custom events and registering listeners for this events is a good solution for triggering an action you wish to occur whether or not you are in a digest cycle. </p>\n\n<p>By creating a custom event you are also being more efficient with your code because you are only triggering listeners subscribed to said event and NOT triggering all watches bound to the scope as you would if you invoked scope.$apply.</p>\n\n<pre><code>$scope.$on('customEventName', function (optionalCustomEventArguments) {\n   //TODO: Respond to event\n});\n\n\n$scope.$broadcast('customEventName', optionalCustomEventArguments);\n</code></pre>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 20886119, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<p>See <a href=\"http://docs.angularjs.org/error/$rootScope:inprog\">http://docs.angularjs.org/error/$rootScope:inprog</a></p>\n\n<p>The problem arises when you have a call to <code>$apply</code> that is sometimes run asynchronously outside of Angular code (when $apply should be used) and sometimes synchronously inside Angular code (which causes the <code>$digest already in progress</code> error).</p>\n\n<p>This may happen, for example, when you have a library that asynchronously fetches items from a server and caches them.  The first time an item is requested, it will be retrieved asynchronously so as not to block code execution.  The second time, however, the item is already in cache so it can be retrieved synchronously.</p>\n\n<p>The way to prevent this error is to ensure that the code that calls <code>$apply</code> is run asynchronously.  This can be done by running your code inside a call to <code>$timeout</code> with the delay set to <code>0</code> (which is the default).  However, calling your code inside <code>$timeout</code> removes the necessity to call <code>$apply</code>, because $timeout will trigger another <code>$digest</code> cycle on its own, which will, in turn, do all the necessary updating, etc.</p>\n\n<p><strong>Solution</strong></p>\n\n<p>In short, instead of doing this:</p>\n\n<pre><code>... your controller code...\n\n$http.get('some/url', function(data){\n    $scope.$apply(function(){\n        $scope.mydate = data.mydata;\n    });\n});\n\n... more of your controller code...\n</code></pre>\n\n<p>do this:</p>\n\n<pre><code>... your controller code...\n\n$http.get('some/url', function(data){\n    $timeout(function(){\n        $scope.mydate = data.mydata;\n    });\n});\n\n... more of your controller code...\n</code></pre>\n\n<p>Only call <code>$apply</code> when you know the code running it will always be run outside of Angular code (e.g. your call to $apply will happen inside a callback that is called by code outside of your Angular code).</p>\n\n<p>Unless someone is aware of some impactful disadvantage to using <code>$timeout</code> over <code>$apply</code>, I don't see why you couldn't always use <code>$timeout</code> (with zero delay) instead of <code>$apply</code>, as it will do approximately the same thing.</p>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 21269546, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<p>Found this: <a href=\"https://coderwall.com/p/ngisma\" rel=\"nofollow\">https://coderwall.com/p/ngisma</a> where Nathan Walker (near bottom of page) suggests a decorator in $rootScope to create func 'safeApply', code:</p>\n\n<pre><code>yourAwesomeModule.config([\n  '$provide', function($provide) {\n    return $provide.decorator('$rootScope', [\n      '$delegate', function($delegate) {\n        $delegate.safeApply = function(fn) {\n          var phase = $delegate.$$phase;\n          if (phase === \"$apply\" || phase === \"$digest\") {\n            if (fn &amp;&amp; typeof fn === 'function') {\n              fn();\n            }\n          } else {\n            $delegate.$apply(fn);\n          }\n        };\n        return $delegate;\n      }\n    ]);\n  }\n]);\n</code></pre>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 23021562, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<p>Many of the answers here contain good advices but can also lead to confusion. Simply using <code>$timeout</code> is <em>not</em> the best nor the right solution.\nAlso, be sure to read that if you are concerned by performances or scalability.</p>\n\n<h2>Things you should know</h2>\n\n<ul>\n<li><p><code>$$phase</code> is private to the framework and there are good reasons for that.</p></li>\n<li><p><code>$timeout(callback)</code> will wait until the current digest cycle (if any) is done, then execute the callback, then run at the end a full <code>$apply</code>.</p></li>\n<li><p><code>$timeout(callback, delay, false)</code> will do the same (with an optional delay before executing the callback), but will not fire an <code>$apply</code> (third argument) which saves performances if you didn't modify your Angular model ($scope).</p></li>\n<li><p><code>$scope.$apply(callback)</code> invokes, among other things, <code>$rootScope.$digest</code>, which means it will redigest the root scope of the application and all of its children, even if you're within an isolated scope.</p></li>\n<li><p><code>$scope.$digest()</code> will simply sync its model to the view, but will not digest its parents scope, which can save a lot of performances when working on an isolated part of your HTML with an isolated scope (from a directive mostly). $digest does not take a callback: you execute the code, then digest.</p></li>\n<li><p><code>$scope.$evalAsync(callback)</code> has been introduced with angularjs 1.2, and will probably solve most of your troubles. Please refer to the last paragraph to learn more about it.</p></li>\n<li><p>if you get the <code>$digest already in progress error</code>, then your architecture is wrong: either you don't need to redigest your scope, or <em>you should not be in charge of that</em> (see below).</p></li>\n</ul>\n\n<h2>How to structure your code</h2>\n\n<p>When you get that error, you're trying to digest your scope while it's already in progress: since you don't know the state of your scope at that point, you're not in charge of dealing with its digestion.</p>\n\n<pre><code>function editModel() {\n  $scope.someVar = someVal;\n  /* Do not apply your scope here since we don't know if that\n     function is called synchronously from Angular or from an\n     asynchronous code */\n}\n\n// Processed by Angular, for instance called by a ng-click directive\n$scope.applyModelSynchronously = function() {\n  // No need to digest\n  editModel();\n}\n\n// Any kind of asynchronous code, for instance a server request\ncallServer(function() {\n  /* That code is not watched nor digested by Angular, thus we\n     can safely $apply it */\n  $scope.$apply(editModel);\n});\n</code></pre>\n\n<p>And if you know what you're doing and working on an isolated small directive while part of a big Angular application, you could prefer $digest instead over $apply to save performances.</p>\n\n<h2>Update since Angularjs 1.2</h2>\n\n<p>A new, powerful method has been added to any $scope: <code>$evalAsync</code>. Basically, it will execute its callback within the current digest cycle if one is occurring, otherwise a new digest cycle will start executing the callback.</p>\n\n<p>That is still not as good as a <code>$scope.$digest</code> if you really know that you only need to synchronize an isolated part of your HTML (since a new <code>$apply</code> will be triggered if none is in progress), but this is the best solution when you are executing a function which <em>you cannot know it if will be executed synchronously or not</em>, for instance after fetching a resource potentially cached: sometimes this will require an async call to a server, otherwise the resource will be locally fetched synchronously.</p>\n\n<p>In these cases and all the others where you had a <code>!$scope.$$phase</code>, be sure to use <code>$scope.$evalAsync( callback )</code></p>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 23102223, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<p>You should use $evalAsync or $timeout according to the context.</p>\n\n<p>This is a link with a good explanation: </p>\n\n<blockquote>\n  <p><a href=\"http://www.bennadel.com/blog/2605-scope-evalasync-vs-timeout-in-angularjs.htm\" rel=\"nofollow\">http://www.bennadel.com/blog/2605-scope-evalasync-vs-timeout-in-angularjs.htm</a></p>\n</blockquote>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 24886964, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<p>The shortest form of safe <code>$apply</code> is:</p>\n\n<pre><code>$timeout(angular.noop)\n</code></pre>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 26909505, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<p>Do a check before using <code>$scope.$digest</code>.</p>\n\n<pre><code>if($scope.$$phase)\n{\n    $scope.$digest();//$scope.$apply();\n}\n</code></pre>\n\n<p>Although it is recommended that you should use <code>$scope.$digest</code> as it internally call <code>$scope.$apply</code></p>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 27702802, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<p>This will be solve your problem:</p>\n\n<pre><code>if(!$scope.$$phase) {\n  //TODO\n}\n</code></pre>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 28462512, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<p>use <code>$scope.$$phase || $scope.$apply();</code> instead</p>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 30372394, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<p>This is my utils service:</p>\n\n<pre><code>angular.module('myApp', []).service('Utils', function Utils($timeout) {\n    var Super = this;\n\n    this.doWhenReady = function(scope, callback, args) {\n        if(!scope.$$phase) {\n            if (args instanceof Array)\n                callback.apply(scope, Array.prototype.slice.call(args))\n            else\n                callback();\n        }\n        else {\n            $timeout(function() {\n                Super.doWhenReady(scope, callback, args);\n            }, 250);\n        }\n    };\n});\n</code></pre>\n\n<p>and this is an example for it's usage:</p>\n\n<pre><code>angular.module('myApp').controller('MyCtrl', function ($scope, Utils) {\n    $scope.foo = function() {\n        // some code here . . .\n    };\n\n    Utils.doWhenReady($scope, $scope.foo);\n\n    $scope.fooWithParams = function(p1, p2) {\n        // some code here . . .\n    };\n\n    Utils.doWhenReady($scope, $scope.fooWithParams, ['value1', 'value2']);\n};\n</code></pre>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 32175311, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<p>similar to answers above but this has worked faithfully for me...\nin a service add:</p>\n\n<pre><code>    //sometimes you need to refresh scope, use this to prevent conflict\n    this.applyAsNeeded = function (scope) {\n        if (!scope.$$phase) {\n            scope.$apply();\n        }\n    };\n</code></pre>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 34753349, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}, {"body": "<p>I have been using this method and it seems to work perfectly fine. This just waits for the time the cycle has finished and then triggers <code>apply()</code>. Simply call the function <code>apply(&lt;your scope&gt;)</code> from anywhere you want.</p>\n\n<pre><code>function apply(scope) {\n  if (!scope.$$phase &amp;&amp; !scope.$root.$$phase) {\n    scope.$apply();\n    console.log(\"Scope Apply Done !!\");\n  } \n  else {\n    console.log(\"Scheduling Apply after 200ms digest cycle already in progress\");\n    setTimeout(function() {\n        apply(scope)\n    }, 200);\n  }\n}\n</code></pre>\n", "title": "AngularJS : Prevent error $digest already in progress when calling $scope.$apply()", "answer_id": 37141319, "question_id": 12729122, "tags": ["angularjs", "angularjs-scope", "angular-digest"]}], "link": "http://stackoverflow.com/questions/12729122/angularjs-prevent-error-digest-already-in-progress-when-calling-scope-apply", "question_id": 12729122}, {"body": "<p>I keep seeing role attributes in some people's work. I use it too, but I'm not sure about its effect.</p>\n\n<p>f.e.:</p>\n\n<pre><code>&lt;header id=\"header\" role=\"banner\"&gt;\n    header stuff in here\n&lt;/header&gt;\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>&lt;section id=\"facebook\" role=\"contentinfo\"&gt;\n    facebook stuff in here\n&lt;/section&gt;\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>&lt;section id=\"main\" role=\"main\"&gt;\n     main content stuff in here\n&lt;/section&gt;\n</code></pre>\n\n<p>Is this role attribute necessary?</p>\n\n<p>Is this attribute better for semantics?</p>\n\n<p>Does it improve SEO?</p>\n\n<p>A list of roles can be found <a href=\"http://www.w3.org/TR/2007/WD-xhtml-role-20071004/\">here</a>, but I see some people make up their own. Is that allowed or a correct use of the role attribute?</p>\n\n<p>Any thoughts on this?</p>\n", "title": "What is the purpose of the &quot;role&quot; attribute in html?", "tags": ["html"], "answers": [{"body": "<p>As I understand it, roles were initially defined by XHTML but were deprecated. However, they are now defined by HTML 5, see here: <a href=\"http://www.w3.org/TR/wai-aria/complete#roles\" rel=\"nofollow\">http://www.w3.org/TR/wai-aria/complete#roles</a></p>\n\n<p>The purpose of the role attribute is to identify to parsing software the exact function of an element (and its children) as part of a web application. This is mostly as an accessibility thing for screen readers, but I can also see it as being useful for embedded browsers and screen scrapers. In order to be useful to the unusual HTML client, the attribute needs to be set to one of the roles from the spec I linked. If you make up your own, this 'future' functionality can't work - a comment would be better. </p>\n\n<p>Practicalities here: <a href=\"http://www.accessibleculture.org/articles/2011/04/html5-aria-2011/\" rel=\"nofollow\">http://www.accessibleculture.org/articles/2011/04/html5-aria-2011/</a></p>\n", "title": "What is the purpose of the &quot;role&quot; attribute in html?", "answer_id": 10403139, "question_id": 10403138, "tags": ["html"]}, {"body": "<p>Most of the roles you see were defined as part of ARIA 1.0, and then later incorporated into HTML5. Some of the new HTML5 elements (dialog, main, etc.) are even based on the original ARIA roles. </p>\n\n<p><a href=\"http://www.w3.org/TR/wai-aria/\">http://www.w3.org/TR/wai-aria/</a></p>\n\n<p>There are two primary reasons to use roles in addition to your native semantic element.</p>\n\n<p><strong>Reason #1.</strong> Overriding the role where no host language element is appropriate or, for various reasons, a less semantically appropriate element was used.</p>\n\n<p>In this example, a link was used, even though the resulting functionality is more button-like than a navigation link.</p>\n\n<pre><code>&lt;a href=\"#\" role=\"button\" aria-label=\"Delete item 1\"&gt;Delete&lt;/a&gt;\n</code></pre>\n\n<p>Screen readers will hear this as a button (as opposed to a link), and you can use a CSS attribute selector to avoid class-itis and div-itis.</p>\n\n<pre><code>*[role=\"button\"] {\n  /* style these a buttons w/o relying on a .button class */\n}\n</code></pre>\n\n<p><strong>Reason #2.</strong> Backing up a native element's role, to support browsers that implemented the ARIA role but haven't yet implemented the native element's role.</p>\n\n<p>For example, the \"main\" role has been supported in browsers for many years, but it's a relatively recent addition to HTML5, so many browsers don't yet support the semantic for <code>&lt;main&gt;</code>. </p>\n\n<pre><code>&lt;main role=\"main\"&gt;\u2026&lt;/main&gt;\n</code></pre>\n\n<p>This is technically redundant, but helps some users and doesn't harm any. In a few years, this technique will likely become unnecessary.</p>\n\n<p>You also wrote: </p>\n\n<blockquote>\n  <p>I see some people make up their own. Is that allowed or a correct use of the role attribute?</p>\n</blockquote>\n\n<p>That's not an invalid use of the attribute unless a real role is not included. Browsers will apply the first recognized role in the token list.</p>\n\n<pre><code>&lt;span role=\"foo link note bar\"&gt;...&lt;/a&gt;\n</code></pre>\n\n<p>Out of the list, only <code>link</code> and <code>note</code> are valid roles, and so the link role will be applied because it comes first. If you use custom roles, make sure they don't conflict with any defined role in ARIA or the host language you're using (HTML, SVG, MathML, etc.)</p>\n", "title": "What is the purpose of the &quot;role&quot; attribute in html?", "answer_id": 18664038, "question_id": 10403138, "tags": ["html"]}, {"body": "<p>Useful for bootstrap buttons from anchors </p>\n\n<pre><code>&lt;a href=\"#\" class=\"btn btn-info\" role=\"button\"&gt;Link Button&lt;/a&gt;\n</code></pre>\n\n<p>From here: <a href=\"http://www.w3schools.com/bootstrap/bootstrap_buttons.asp\" rel=\"nofollow\">http://www.w3schools.com/bootstrap/bootstrap_buttons.asp</a></p>\n", "title": "What is the purpose of the &quot;role&quot; attribute in html?", "answer_id": 32971554, "question_id": 10403138, "tags": ["html"]}], "link": "http://stackoverflow.com/questions/10403138/what-is-the-purpose-of-the-role-attribute-in-html", "question_id": 10403138}, {"body": "<p>I have a computer with 1 MB of RAM and no other local storage. I must use it to accept 1 million 8-digit decimal numbers over a TCP connection, sort them, and then send the sorted list out over another TCP connection. </p>\n\n<p>The list of numbers may contain duplicates, which I must not discard. The code will be placed in ROM, so I need not subtract the size of my code from the 1&nbsp;MB. I already have code to drive the Ethernet port and handle TCP/IP connections, and it requires 2&nbsp;KB for its state data, including a 1&nbsp;KB buffer via which the code will read and write data. Is there a solution to this problem?</p>\n\n<p><strong>Sources Of Question And Answer:</strong><br>\n<a href=\"http://tech.slashdot.org/comments.pl?sid=232757&amp;cid=18925745\">slashdot.org</a></p>\n\n<p><a href=\"http://nick.cleaton.net/ramsort.html\">cleaton.net</a></p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "tags": ["algorithm", "sorting", "embedded", "ram"], "answers": [{"body": "<p>If the range of the numbers is limited (there can be only mod 2 8 digit numbers, or only 10 different 8 digit numbers for example), then you could write an optimized sorting algorithm. But if you want to sort all possible 8 digit numbers, this is not possible with that low amount of memory.</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 12974584, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>A solution is possible only because of the difference between 1 megabyte and 1 million bytes. There are about 2 to the power 8093729.5 different ways to choose 1 million 8-digit numbers with duplicates allowed and order unimportant, so a machine with only 1 million bytes of RAM doesn't have enough states to represent all the possibilities. But 1M (less 2k for TCP/IP) is 1022*1024*8 = 8372224 bits, so a solution is possible.</p>\n\n<p><strong>Part 1, initial solution</strong></p>\n\n<p>This approach needs a little more than 1M, I'll refine it to fit into 1M later.</p>\n\n<p>I'll store a compact sorted list of numbers in the range 0 to 99999999 as a sequence of sublists of 7-bit numbers. The first sublist holds numbers from 0 to 127, the second sublist holds numbers from 128 to 255, etc. 100000000/128 is exactly 781250, so 781250 such sublists will be needed.</p>\n\n<p>Each sublist consists of a 2-bit sublist header followed by a sublist body. The sublist body takes up 7 bits per sublist entry. The sublists are all concatenated together, and the format makes it possible to tell where one sublist ends and the next begins. The total storage required for a fully populated list is 2*781250 + 7*1000000 = 8562500 bits, which is about 1.021 M-bytes.</p>\n\n<p>The 4 possible sublist header values are:</p>\n\n<p><strong>00</strong> Empty sublist, nothing follows.</p>\n\n<p><strong>01</strong> Singleton, there is only one entry in the sublist and and next 7 bits hold it.</p>\n\n<p><strong>10</strong> The sublist holds at least 2 distinct numbers. The entries are stored in non-decreasing order, except that the last entry is less than or equal to the first. This allows the end of the sublist to be identified. For example, the numbers 2,4,6 would be stored as (4,6,2). The numbers 2,2,3,4,4 would be stored as (2,3,4,4,2).</p>\n\n<p><strong>11</strong> The sublist holds 2 or more repetitions of a single number. The next 7 bits give the number. Then come zero or more 7-bit entries with the value 1, followed by a 7-bit entry with the value 0. The length of the sublist body dictates the number of repetitions. For example, the numbers 12,12 would be stored as (12,0), the numbers 12,12,12 would be stored as (12,1,0), 12,12,12,12 would be (12,1,1,0) and so on.</p>\n\n<p>I start off with an empty list, read a bunch of numbers in and store them as 32 bit integers, sort the new numbers in place (using heapsort, probably) and then merge them into a new compact sorted list. Repeat until there are no more numbers to read, then walk the compact list once more to generate the output.</p>\n\n<p>The line below represents memory just before the start of the list merge operation. The \"O\"s are the region that hold the sorted 32-bit integers. The \"X\"s are the region that hold the old compact list. The \"=\" signs are the expansion room for the compact list, 7 bits for each integer in the \"O\"s. The \"Z\"s are other random overhead.</p>\n\n<pre><code>ZZZOOOOOOOOOOOOOOOOOOOOOOOOOO==========XXXXXXXXXXXXXXXXXXXXXXXXXX\n</code></pre>\n\n<p>The merge routine starts reading at the leftmost \"O\" and at the leftmost \"X\", and starts writing at the leftmost \"=\". The write pointer doesn't catch the compact list read pointer until all of the new integers are merged, because both pointers advance 2 bits for each sublist and 7 bits for each entry in the old compact list, and there is enough extra room for the 7-bit entries for the new numbers.</p>\n\n<p><strong>Part 2, cramming it into 1M</strong></p>\n\n<p>To Squeeze the solution above into 1M, I need to make the compact list format a bit more compact. I'll get rid of one of the sublist types, so that there will be just 3 different possible sublist header values. Then I can use \"00\", \"01\" and \"1\" as the sublist header values and save a few bits. The sublist types are:</p>\n\n<p>A Empty sublist, nothing follows.</p>\n\n<p>B Singleton, there is only one entry in the sublist and and next 7 bits hold it.</p>\n\n<p>C The sublist holds at least 2 distinct numbers. The entries are stored in non-decreasing order, except that the last entry is less than or equal to the first. This allows the end of the sublist to be identified. For example, the numbers 2,4,6 would be stored as (4,6,2). The numbers 2,2,3,4,4 would be stored as (2,3,4,4,2).</p>\n\n<p>D The sublist consists of 2 or more repetitions of a single number.</p>\n\n<p>My 3 sublist header values will be \"A\", \"B\" and \"C\", so I need a way to represent D-type sublists.</p>\n\n<p>Suppose I have the C-type sublist header followed by 3 entries, such as \"C[17][101][58]\". This can't be part of a valid C-type sublist as described above, since the third entry is less than the second but more than the first. I can use this type of construct to represent a D-type sublist. In bit terms, anywhere I have \"C{00?????}{1??????}{01?????}\" is an impossible C-type sublist. I'll use this to represent a sublist consisting of 3 or more repetitions of a single number. The first two 7-bit words encode the number (the \"N\" bits below) and are followed by zero or more {0100001} words followed by a {0100000} word.</p>\n\n<pre><code>For example, 3 repetitions: \"C{00NNNNN}{1NN0000}{0100000}\", 4 repetitions: \"C{00NNNNN}{1NN0000}{0100001}{0100000}\", and so on.\n</code></pre>\n\n<p>That just leaves lists that hold exactly 2 repetitions of a single number. I'll represent those with another impossible C-type sublist pattern: \"C{0??????}{11?????}{10?????}\". There's plenty of room for the 7 bits of the number in the first 2 words, but this pattern is longer than the sublist that it represents, which makes things a bit more complex. The five question-marks at the end can be considered not part of the pattern, so I have: \"C{0NNNNNN}{11N????}10\" as my pattern, with the number to be repeated stored in the \"N\"s. That's 2 bits too long.</p>\n\n<p>I'll have to borrow 2 bits and pay them back from the 4 unused bits in this pattern. When reading, on encountering \"C{0NNNNNN}{11N00AB}10\", output 2 instances of the number in the \"N\"s, overwrite the \"10\" at the end with bits A and B, and rewind the read pointer by 2 bits. Destructive reads are ok for this algorithm, since each compact list gets walked only once.</p>\n\n<p>When writing a sublist of 2 repetitions of a single number, write \"C{0NNNNNN}11N00\" and set the borrowed bits counter to 2. At every write where the borrowed bits counter is non-zero, it is decremented for each bit written and \"10\" is written when the counter hits zero. So the next 2 bits written will go into slots A and B, and then the \"10\" will get dropped onto the end.</p>\n\n<p>With 3 sublist header values represented by \"00\", \"01\" and \"1\", I can assign \"1\" to the most popular sublist type. I'll need a small table to map sublist header values to sublist types, and I'll need an occurrence counter for each sublist type so that I know what the best sublist header mapping is.</p>\n\n<p>The worst case minimal representation of a fully populated compact list occurs when all the sublist types are equally popular. In that case I save 1 bit for every 3 sublist headers, so the list size is 2*781250 + 7*1000000 - 781250/3 = 8302083.3 bits. Rounding up to a 32 bit word boundary, thats 8302112 bits, or 1037764 bytes.</p>\n\n<p>1M minus the 2k for TCP/IP state and buffers is 1022*1024 = 1046528 bytes, leaving me 8764 bytes to play with.</p>\n\n<p>But what about the process of changing the sublist header mapping ? In the memory map below, \"Z\" is random overhead, \"=\" is free space, \"X\" is the compact list.</p>\n\n<pre><code>ZZZ=====XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n</code></pre>\n\n<p>Start reading at the leftmost \"X\" and start writing at the leftmost \"=\" and work right. When it's done the compact list will be a little shorter and it will be at the wrong end of memory:</p>\n\n<pre><code>ZZZXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX=======\n</code></pre>\n\n<p>So then I'll need to shunt it to the right:</p>\n\n<pre><code>ZZZ=======XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n</code></pre>\n\n<p>In the header mapping change process, up to 1/3 of the sublist headers will be changing from 1-bit to 2-bit. In the worst case these will all be at the head of the list, so I'll need at least 781250/3 bits of free storage before I start, which takes me back to the memory requirements of the previous version of the compact list :(</p>\n\n<p>To get around that, I'll split the 781250 sublists into 10 sublist groups of 78125 sublists each. Each group has its own independent sublist header mapping. Using the letters A to J for the groups:</p>\n\n<pre><code>ZZZ=====AAAAAABBCCCCDDDDDEEEFFFGGGGGGGGGGGHHIJJJJJJJJJJJJJJJJJJJJ\n</code></pre>\n\n<p>Each sublist group shrinks or stays the same during a sublist header mapping change:</p>\n\n<pre><code>ZZZ=====AAAAAABBCCCCDDDDDEEEFFFGGGGGGGGGGGHHIJJJJJJJJJJJJJJJJJJJJ\nZZZAAAAAA=====BBCCCCDDDDDEEEFFFGGGGGGGGGGGHHIJJJJJJJJJJJJJJJJJJJJ\nZZZAAAAAABB=====CCCCDDDDDEEEFFFGGGGGGGGGGGHHIJJJJJJJJJJJJJJJJJJJJ\nZZZAAAAAABBCCC======DDDDDEEEFFFGGGGGGGGGGGHHIJJJJJJJJJJJJJJJJJJJJ\nZZZAAAAAABBCCCDDDDD======EEEFFFGGGGGGGGGGGHHIJJJJJJJJJJJJJJJJJJJJ\nZZZAAAAAABBCCCDDDDDEEE======FFFGGGGGGGGGGGHHIJJJJJJJJJJJJJJJJJJJJ\nZZZAAAAAABBCCCDDDDDEEEFFF======GGGGGGGGGGGHHIJJJJJJJJJJJJJJJJJJJJ\nZZZAAAAAABBCCCDDDDDEEEFFFGGGGGGGGGG=======HHIJJJJJJJJJJJJJJJJJJJJ\nZZZAAAAAABBCCCDDDDDEEEFFFGGGGGGGGGGHH=======IJJJJJJJJJJJJJJJJJJJJ\nZZZAAAAAABBCCCDDDDDEEEFFFGGGGGGGGGGHHI=======JJJJJJJJJJJJJJJJJJJJ\nZZZAAAAAABBCCCDDDDDEEEFFFGGGGGGGGGGHHIJJJJJJJJJJJJJJJJJJJJ=======\nZZZ=======AAAAAABBCCCDDDDDEEEFFFGGGGGGGGGGHHIJJJJJJJJJJJJJJJJJJJJ\n</code></pre>\n\n<p>The worst case temporary expansion of a sublist group during a mapping change is 78125/3 = 26042 bits, under 4k. If I allow 4k plus the 1037764 bytes for a fully populated compact list, that leaves me 8764 - 4096 = 4668 bytes for the \"Z\"s in the memory map.</p>\n\n<p>That should be plenty for the 10 sublist header mapping tables, 30 sublist header occurrence counts and the other few counters, pointers and small buffers I'll need, and space I've used without noticing, like stack space for function call return addresses and local variables.</p>\n\n<p><strong>Part 3, how long would it take to run?</strong></p>\n\n<p>With an empty compact list the 1-bit list header will be used for an empty sublist, and the starting size of the list will be 781250 bits. In the worst case the list grows 8 bits for each number added, so 32 + 8 = 40 bits of free space are needed for each of the 32-bit numbers to be placed at the top of the list buffer and then sorted and merged. In the worst case, changing the sublist header mapping results in a space usage of 2*781250 + 7*entries - 781250/3 bits.</p>\n\n<p>With a policy of changing the sublist header mapping after every fifth merge once there are at least 800000 numbers in the list, a worst case run would involve a total of about 30M of compact list reading and writing activity.</p>\n\n<p><strong>Source:</strong></p>\n\n<p><strong><a href=\"http://nick.cleaton.net/ramsortsol.html\">http://nick.cleaton.net/ramsortsol.html</a></strong></p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 12978097, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p><strong>Please see the <a href=\"http://stackoverflow.com/questions/12748246/sorting-1-million-8-digit-numbers-in-1mb-of-ram/12978097#12978097\">first correct answer</a> or <a href=\"http://stackoverflow.com/a/13067807/448474\">the later answer with arithmetic encoding</a>.</strong> Below you may find some fun, but not a 100% bullet-proof solution.</p>\n\n<p>This is quite an interesting task and here is an another solution. I hope somebody would find the result useful (or at least interesting).</p>\n\n<p><strong>Stage 1: Initial data structure, rough compression approach, basic results</strong></p>\n\n<p>Let's do some simple math: we have 1M (1048576 bytes) of RAM initially available to store 10^6 8 digit decimal numbers. [0;99999999]. So to store one number 27 bits are needed (taking the assumption that unsigned numbers will be used). Thus, to store a raw stream ~3.5M of RAM will be needed. Somebody already said it doesn't seem to be feasible, but I would say the task can be solved if the input is \"good enough\". Basically, the idea is to compress the input data with compression factor 0.29 or higher and do sorting in a proper manner.</p>\n\n<p>Let's solve the compression issue first. There are some relevant tests already available:</p>\n\n<p><a href=\"http://www.theeggeadventure.com/wikimedia/index.php/Java_Data_Compression\">http://www.theeggeadventure.com/wikimedia/index.php/Java_Data_Compression</a></p>\n\n<blockquote>\n  <p>\"I ran a test to compress one million consecutive integers using\n  various forms of compression. The results are as follows:\"</p>\n</blockquote>\n\n<pre><code>None     4000027\nDeflate  2006803\nFiltered 1391833\nBZip2    427067\nLzma     255040\n</code></pre>\n\n<p>It looks like LZMA (<a href=\"http://en.wikipedia.org/wiki/Lempel%E2%80%93Ziv%E2%80%93Markov_chain_algorithm\">Lempel\u2013Ziv\u2013Markov chain algorithm</a>) is a good choice to continue with. I've prepared a simple PoC, but there are still some details to be highlighted:</p>\n\n<ol>\n<li>Memory is limited so the idea is to presort numbers and use \ncompressed buckets (dynamic size) as temporary storage</li>\n<li>It is easier to achieve a better compression factor with presorted\ndata, so there is a static buffer for each bucket (numbers from the buffer are to be sorted before LZMA)</li>\n<li>Each bucket holds a specific range, so the final sort can be done for\neach bucket separately </li>\n<li>Bucket's size can be properly set, so there will be enough memory to\ndecompress stored data and do the final sort for each bucket separately</li>\n</ol>\n\n<p><img src=\"http://i.stack.imgur.com/ln7xO.png\" alt=\"In-memory sorting\"></p>\n\n<p><strong>Please note, attached code is a <a href=\"http://en.wikipedia.org/wiki/Proof_of_Concept\">POC</a>, it can't be used as a final solution, it just demonstrates the idea of using several smaller buffers to store presorted numbers in some optimal way (possibly compressed). LZMA is not proposed as a final solution. It is used as a fastest possible way to introduce a compression to this PoC.</strong></p>\n\n<p>See the PoC code below (please note it just a demo, to compile it <a href=\"https://github.com/jponge/lzma-java\">LZMA-Java</a> will be needed):</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class MemorySortDemo {\n\nstatic final int NUM_COUNT = 1000000;\nstatic final int NUM_MAX   = 100000000;\n\nstatic final int BUCKETS      = 5;\nstatic final int DICT_SIZE    = 16 * 1024; // LZMA dictionary size\nstatic final int BUCKET_SIZE  = 1024;\nstatic final int BUFFER_SIZE  = 10 * 1024;\nstatic final int BUCKET_RANGE = NUM_MAX / BUCKETS;\n\nstatic class Producer {\n    private Random random = new Random();\n    public int produce() { return random.nextInt(NUM_MAX); }\n}\n\nstatic class Bucket {\n    public int size, pointer;\n    public int[] buffer = new int[BUFFER_SIZE];\n\n    public ByteArrayOutputStream tempOut = new ByteArrayOutputStream();\n    public DataOutputStream tempDataOut = new DataOutputStream(tempOut);\n    public ByteArrayOutputStream compressedOut = new ByteArrayOutputStream();\n\n    public void submitBuffer() throws IOException {\n        Arrays.sort(buffer, 0, pointer);\n\n        for (int j = 0; j &lt; pointer; j++) {\n            tempDataOut.writeInt(buffer[j]);\n            size++;\n        }            \n        pointer = 0;\n    }\n\n    public void write(int value) throws IOException {\n        if (isBufferFull()) {\n            submitBuffer();\n        }\n        buffer[pointer++] = value;\n    }\n\n    public boolean isBufferFull() {\n        return pointer == BUFFER_SIZE;\n    }\n\n    public byte[] compressData() throws IOException {\n        tempDataOut.close();\n        return compress(tempOut.toByteArray());\n    }        \n\n    private byte[] compress(byte[] input) throws IOException {\n        final BufferedInputStream in = new BufferedInputStream(new ByteArrayInputStream(input));\n        final DataOutputStream out = new DataOutputStream(new BufferedOutputStream(compressedOut));\n\n        final Encoder encoder = new Encoder();\n        encoder.setEndMarkerMode(true);\n        encoder.setNumFastBytes(0x20);\n        encoder.setDictionarySize(DICT_SIZE);\n        encoder.setMatchFinder(Encoder.EMatchFinderTypeBT4);\n\n        ByteArrayOutputStream encoderPrperties = new ByteArrayOutputStream();\n        encoder.writeCoderProperties(encoderPrperties);\n        encoderPrperties.flush();\n        encoderPrperties.close();\n\n        encoder.code(in, out, -1, -1, null);\n        out.flush();\n        out.close();\n        in.close();\n\n        return encoderPrperties.toByteArray();\n    }\n\n    public int[] decompress(byte[] properties) throws IOException {\n        InputStream in = new ByteArrayInputStream(compressedOut.toByteArray());\n        ByteArrayOutputStream data = new ByteArrayOutputStream(10 * 1024);\n        BufferedOutputStream out = new BufferedOutputStream(data);\n\n        Decoder decoder = new Decoder();\n        decoder.setDecoderProperties(properties);\n        decoder.code(in, out, 4 * size);\n\n        out.flush();\n        out.close();\n        in.close();\n\n        DataInputStream input = new DataInputStream(new ByteArrayInputStream(data.toByteArray()));\n        int[] array = new int[size];\n        for (int k = 0; k &lt; size; k++) {\n            array[k] = input.readInt();\n        }\n\n        return array;\n    }\n}\n\nstatic class Sorter {\n    private Bucket[] bucket = new Bucket[BUCKETS];\n\n    public void doSort(Producer p, Consumer c) throws IOException {\n\n        for (int i = 0; i &lt; bucket.length; i++) {  // allocate buckets\n            bucket[i] = new Bucket();\n        }\n\n        for(int i=0; i&lt; NUM_COUNT; i++) {         // produce some data\n            int value = p.produce();\n            int bucketId = value/BUCKET_RANGE;\n            bucket[bucketId].write(value);\n            c.register(value);\n        }\n\n        for (int i = 0; i &lt; bucket.length; i++) { // submit non-empty buffers\n            bucket[i].submitBuffer();\n        }\n\n        byte[] compressProperties = null;\n        for (int i = 0; i &lt; bucket.length; i++) { // compress the data\n            compressProperties = bucket[i].compressData();\n        }\n\n        printStatistics();\n\n        for (int i = 0; i &lt; bucket.length; i++) { // decode &amp; sort buckets one by one\n            int[] array = bucket[i].decompress(compressProperties);\n            Arrays.sort(array);\n\n            for(int v : array) {\n                c.consume(v);\n            }\n        }\n        c.finalCheck();\n    }\n\n    public void printStatistics() {\n        int size = 0;\n        int sizeCompressed = 0;\n\n        for (int i = 0; i &lt; BUCKETS; i++) {\n            int bucketSize = 4*bucket[i].size;\n            size += bucketSize;\n            sizeCompressed += bucket[i].compressedOut.size();\n\n            System.out.println(\"  bucket[\" + i\n                    + \"] contains: \" + bucket[i].size\n                    + \" numbers, compressed size: \" + bucket[i].compressedOut.size()\n                    + String.format(\" compression factor: %.2f\", ((double)bucket[i].compressedOut.size())/bucketSize));\n        }\n\n        System.out.println(String.format(\"Data size: %.2fM\",(double)size/(1014*1024))\n                + String.format(\" compressed %.2fM\",(double)sizeCompressed/(1014*1024))\n                + String.format(\" compression factor %.2f\",(double)sizeCompressed/size));\n    }\n}\n\nstatic class Consumer {\n    private Set&lt;Integer&gt; values = new HashSet&lt;&gt;();\n\n    int v = -1;\n    public void consume(int value) {\n        if(v &lt; 0) v = value;\n\n        if(v &gt; value) {\n            throw new IllegalArgumentException(\"Current value is greater than previous: \" + v + \" &gt; \" + value);\n        }else{\n            v = value;\n            values.remove(value);\n        }\n    }\n\n    public void register(int value) {\n        values.add(value);\n    }\n\n    public void finalCheck() {\n        System.out.println(values.size() &gt; 0 ? \"NOT OK: \" + values.size() : \"OK!\");\n    }\n}\n\npublic static void main(String[] args) throws IOException {\n    Producer p = new Producer();\n    Consumer c = new Consumer();\n    Sorter sorter = new Sorter();\n\n    sorter.doSort(p, c);\n}\n}\n</code></pre>\n\n<p>With random numbers it produces the following:</p>\n\n<pre><code>bucket[0] contains: 200357 numbers, compressed size: 353679 compression factor: 0.44\nbucket[1] contains: 199465 numbers, compressed size: 352127 compression factor: 0.44\nbucket[2] contains: 199682 numbers, compressed size: 352464 compression factor: 0.44\nbucket[3] contains: 199949 numbers, compressed size: 352947 compression factor: 0.44\nbucket[4] contains: 200547 numbers, compressed size: 353914 compression factor: 0.44\nData size: 3.85M compressed 1.70M compression factor 0.44\n</code></pre>\n\n<p>For a simple ascending sequence (one bucket is used) it produces:</p>\n\n<pre><code>bucket[0] contains: 1000000 numbers, compressed size: 256700 compression factor: 0.06\nData size: 3.85M compressed 0.25M compression factor 0.06\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p><strong>Conclusion:</strong></p>\n\n<ol>\n<li>Don't try to fool the <a href=\"http://en.wikipedia.org/wiki/Lossless_compression#Limitations\">Nature</a></li>\n<li>Use simpler compression with lower memory footprint</li>\n<li>Some additional clues are really needed. Common bullet-proof solution does not seem to be feasible. </li>\n</ol>\n\n<p><strong>Stage 2: Enhanced compression, final conclusion</strong></p>\n\n<p>As was already mentioned in the previous section, any suitable compression technique can be used. So let's get rid of LZMA in favor of simpler and better (if possible)  approach. There are a lot of good solutions including <a href=\"http://en.wikipedia.org/wiki/Arithmetic_coding\">Arithmetic coding</a>, <a href=\"http://en.wikipedia.org/wiki/Radix_tree\">Radix tree</a> etc. </p>\n\n<p>Anyway, simple but useful encoding scheme will be more illustrative than yet another external library, providing some nifty algorithm. The actual solution is pretty straightforward: since there are buckets with partially sorted data, deltas can be used instead of numbers. </p>\n\n<p><img src=\"http://i.stack.imgur.com/qMyHZ.png\" alt=\"encoding scheme\"></p>\n\n<p>Random input test shows slightly better results:</p>\n\n<pre><code>bucket[0] contains: 10103 numbers, compressed size: 13683 compression factor: 0.34\nbucket[1] contains: 9885 numbers, compressed size: 13479 compression factor: 0.34\n...\nbucket[98] contains: 10026 numbers, compressed size: 13612 compression factor: 0.34\nbucket[99] contains: 10058 numbers, compressed size: 13701 compression factor: 0.34\nData size: 3.85M compressed 1.31M compression factor 0.34\n</code></pre>\n\n<p>Sample code</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>  public static void encode(int[] buffer, int length, BinaryOut output) {\n    short size = (short)(length &amp; 0x7FFF);\n\n    output.write(size);\n    output.write(buffer[0]);\n\n    for(int i=1; i&lt; size; i++) {\n        int next = buffer[i] - buffer[i-1];\n        int bits = getBinarySize(next);\n\n        int len = bits;\n\n        if(bits &gt; 24) {\n          output.write(3, 2);\n          len = bits - 24;\n        }else if(bits &gt; 16) {\n          output.write(2, 2);\n          len = bits-16;\n        }else if(bits &gt; 8) {\n          output.write(1, 2);\n          len = bits - 8;\n        }else{\n          output.write(0, 2);\n        }\n\n        if (len &gt; 0) {\n            if ((len % 2) &gt; 0) {\n                len = len / 2;\n                output.write(len, 2);\n                output.write(false);\n            } else {\n                len = len / 2 - 1;\n                output.write(len, 2);\n            }\n\n            output.write(next, bits);\n        }\n    }\n}\n\npublic static short decode(BinaryIn input, int[] buffer, int offset) {\n    short length = input.readShort();\n    int value = input.readInt();\n    buffer[offset] = value;\n\n    for (int i = 1; i &lt; length; i++) {\n        int flag = input.readInt(2);\n\n        int bits;\n        int next = 0;\n        switch (flag) {\n            case 0:\n                bits = 2 * input.readInt(2) + 2;\n                next = input.readInt(bits);\n                break;\n            case 1:\n                bits = 8 + 2 * input.readInt(2) +2;\n                next = input.readInt(bits);\n                break;\n            case 2:\n                bits = 16 + 2 * input.readInt(2) +2;\n                next = input.readInt(bits);\n                break;\n            case 3:\n                bits = 24 + 2 * input.readInt(2) +2;\n                next = input.readInt(bits);\n                break;\n        }\n\n        buffer[offset + i] = buffer[offset + i - 1] + next;\n    }\n\n   return length;\n}\n</code></pre>\n\n<p>Please note, this approach:</p>\n\n<ol>\n<li>does not consume a lot of memory</li>\n<li>works with streams</li>\n<li>provides not so bad results</li>\n</ol>\n\n<p>Full code can be found <a href=\"http://renat.in.ua/web/stackoverflow/MemorySortDemo.java\">here</a>, BinaryInput and BinaryOutput implementations can be found <a href=\"http://introcs.cs.princeton.edu/java/stdlib/\">here</a></p>\n\n<p><strong>Final conclusion</strong></p>\n\n<p>No final conclusion :) Sometimes it is really good idea to move one level up and review the task from a <a href=\"http://en.wikipedia.org/wiki/G%C3%B6del,_Escher,_Bach\">meta-level</a> point of view. </p>\n\n<p>It was fun to spend some time with this task. BTW, there are a lot of interesting answers below. Thank you for your attention and happy codding.</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 12982179, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>If the input stream could be received few times this would be much easier (no info about that, idea and time-performance problem). Then, we could count the decimal values. With counted values it would be easy to make the output stream. Compress by counting the values.\nIt depends what would be in the input stream.</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 12993283, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>A radix tree representation would come close to handling this problem, since the radix tree takes advantage of \"prefix compression\".  But it's hard to conceive of a radix tree representation that could represent a single node in one byte -- two is probably about the limit.</p>\n\n<p>But, regardless of how the data is represented, once it is sorted it can be stored in prefix-compressed form, where the numbers 10, 11, and 12 would be represented by, say 001b, 001b, 001b, indicating an increment of 1 from the previous number.  Perhaps, then, 10101b would represent an increment of 5, 1101001b an increment of 9, etc.</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 12998208, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>(My original answer was wrong, sorry for the bad math, see below the break.)</p>\n\n<p>How about this?</p>\n\n<p>The first 27 bits store the lowest number you have seen, then the difference to the next number seen, encoded as follows: 5 bits to store the number of bits used in storing the difference, then the difference. Use 00000 to indicate that you saw that number again.</p>\n\n<p>This works because as more numbers are inserted, the average difference between numbers goes down, so you use less bits to store the difference as you add more numbers. I believe this is called a delta list.</p>\n\n<p>The worst case I can think of is all numbers evenly spaced (by 100), e.g. Assuming 0 is the first number:</p>\n\n<pre><code>000000000000000000000000000 00111 1100100\n                            ^^^^^^^^^^^^^\n                            a million times\n\n27 + 1,000,000 * (5+7) bits = ~ 427k\n</code></pre>\n\n<hr>\n\n<p>Reddit to the rescue!</p>\n\n<p>If all you had to do was sort them, this problem would be easy. It takes 122k (1 million bits) to store which numbers you have seen (0th bit on if 0 was seen, 2300th bit on if 2300 was seen, etc.</p>\n\n<p>You read the numbers, store them in the bit field, and then shift the bits out while keeping a count.</p>\n\n<p>BUT, you have to remember how many you have seen. I was inspired by the sublist answer above to come up with this scheme:</p>\n\n<p>Instead of using one bit, use either 2 or 27 bits:</p>\n\n<ul>\n<li>00 means you did not see the number.</li>\n<li>01 means you saw it once</li>\n<li>1 means you saw it, and the next 26 bits are the count of how many times.</li>\n</ul>\n\n<p>I think this works: if there are no duplicates, you have a 244k list.\nIn the worst case you see each number twice (if you see one number three times, it shortens the rest of the list for you), that means you have seen 50,000 more than once, and you have seen 950,000 items 0 or 1 times.</p>\n\n<p>50,000 * 27 + 950,000 * 2 = 396.7k.</p>\n\n<p>You can make further improvements if you use the following encoding:</p>\n\n<p>0 means you did not see the number\n10 means you saw it once\n11 is how you keep count </p>\n\n<p>Which will, on average, result in 280.7k of storage.</p>\n\n<p>EDIT: my Sunday morning math was wrong.</p>\n\n<p>The worst case is we see 500,000 numbers twice, so the math becomes:</p>\n\n<p>500,000 *27 + 500,000 *2 = 1.77M</p>\n\n<p>The alternate encoding results in an average storage of</p>\n\n<p>500,000 * 27 + 500,000 = 1.70M</p>\n\n<p>: (</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 12998695, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>I would try a <a href=\"http://en.wikipedia.org/wiki/Radix_tree\">Radix Tree</a>. If you could store the data in a tree, you could then do an in-order traverse to transmit the data.</p>\n\n<p>I'm not sure you could fit this into 1MB, but I think it's worth a try.</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 12999798, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>Sort of like sleepsort:</p>\n\n<pre><code>for i = 1 to 1000000\n    input N\n        Send a message on the network with delay of (N * some constant)\n</code></pre>\n\n<p>QED</p>\n\n<p>How do you do this, you ask? Well:</p>\n\n<p><a href=\"http://www.shysecurity.com/posts/PingFS\" rel=\"nofollow\">http://www.shysecurity.com/posts/PingFS</a></p>\n\n<p>PingFS is a set of python [sic] scripts which, in Linux, provide virtual disk storage on the network. Each file is broken up into 64-1024 byte blocks, sent over the wire in an ICMP echo request, and promptly erased from memory. Each time the server sends back your bundle of joy, PingFS recognizes its data and sends another gift [the data]. Download at the bottom of the page.</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13000070, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>If the numbers are evenly distributed we can use <a href=\"http://en.wikipedia.org/wiki/Counting_sort\" rel=\"nofollow\">Counting sort</a>. We should keep the number of times that each number is repeated in an array. \nAvailable space is: 1 MB - 3 KB = 1045504 B or  8364032 bits\nNumber of bits per number= 8364032/1000000 = 8\nTherefore, we can store the number of times each number is repeated to the maximum of 2^8-1=255.\nUsing this approach we have an extra  364032 bits unused that can be used to handle cases where a number is repeated more than 255 times. For example we can say a number 255 indicates a repetition greater than or equal to 255. In this case we should store a sequence of numbers+repetitions. We can handle 7745 special cases as shown bellow:</p>\n\n<p>364032/ (bits need to represent each number + bits needed to represent 1 million)=\n364032 / (27+20)=7745</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13000127, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>There is one rather sneaky trick not mentioned here so far. We assume that you have no extra way to store data, but that is not strictly true. </p>\n\n<p>One way around your problem is to do the following horrible thing, which should not be attempted by anyone under any circumstances: Use the network traffic to store data. And no, I don't mean NAS.</p>\n\n<p>You can sort the numbers with only a few bytes of RAM in the following way:</p>\n\n<ul>\n<li>First take 2 variables: <code>COUNTER</code> and <code>VALUE</code>.</li>\n<li>First set all registers to <code>0</code>;</li>\n<li>Every time you receive an integer <code>I</code>, increment <code>COUNTER</code> and set <code>VALUE</code> to <code>max(VALUE, I)</code>;</li>\n<li>Then send an ICMP echo request packet with data set to I to the router. Erase I and repeat.</li>\n<li>Every time you receive the returned ICMP packet, you simply extract the integer and send it back out again in another echo request. This produces a huge number of ICMP requests scuttling backward and forward containing the integers.</li>\n</ul>\n\n<p>Once <code>COUNTER</code> reaches <code>1000000</code>, you have all of the values stored in the incessant stream of ICMP requests, and <code>VALUE</code> now contains the maximum integer. Pick some <code>threshold T &gt;&gt; 1000000</code>. Set <code>COUNTER</code> to zero. Every time you receive an ICMP packet, increment <code>COUNTER</code> and send the contained integer I back out in another echo request, unless <code>I=VALUE</code>, in which case transmit it to the destination for the sorted integers. Once <code>COUNTER=T</code>, decrement <code>VALUE</code> by <code>1</code>, reset <code>COUNTER</code> to zero and repeat. Once <code>VALUE</code> reaches zero you should have transmitted all integers in order from largest to smallest to the destination, and have only used about 47 bits of RAM for the two persistent variables (and whatever small amount you need for the temporary values).</p>\n\n<p>I know this is horrible, and I know there can be all sorts of practical issues, but I thought it might give some of you a laugh or at least horrify you.</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13000176, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>There is one solution to this problem across all possible inputs. Cheat.</p>\n\n<ol>\n<li>Read m values over TCP, where m is near the max that can be sorted in memory, maybe n/4.</li>\n<li>Sort the 250,000 (or so) numbers and output them.</li>\n<li>Repeat for the other 3 quarters.</li>\n<li>Let the receiver merge the 4 lists of numbers it has received as it processes them. (It's not much slower than using a single list.)</li>\n</ol>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13001472, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>As ROM size does not count one does not need any additional RAM besides the TCP buffers. Just implement a big finite-state machine. Each state represents a multi-set of numbers read in. After reading a million numbers one has just to print the numbers corresponding to the reached state.</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13001607, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<blockquote>\n  <p>I have a computer with 1M of RAM and no other local storage</p>\n</blockquote>\n\n<p>Another way to cheat: you could use non-local (networked) storage instead (your question does not preclude this) and call a networked service that could use straightforward disk-based mergesort (or just enough RAM to sort in-memory, since you only need to accept 1M numbers), without needing the (admittedly extremely ingenious) solutions already given.</p>\n\n<p>This might be cheating, but it's not clear whether you are looking for a solution to a real-world problem, or a puzzle that invites bending of the rules... if the latter, then a simple cheat may get better results than a complex but \"genuine\" solution (which as others have pointed out, can only work for compressible inputs).</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13001679, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>What kind of computer are you using? It may not have any other \"normal\" local storage, but does it have video RAM, for example? 1 megapixel x 32 bits per pixel (say) is pretty close to your required data input size.</p>\n\n<p>(I largely ask in memory of the old <a href=\"http://en.wikipedia.org/wiki/RiscPC\">Acorn RISC PC</a>, which could 'borrow' VRAM to expand the available system RAM, if you chose a low resolution or low colour-depth screen mode!). This was rather useful on a machine with only a few MB of normal RAM.</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13001761, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>Suppose this task is possible.  Just prior to output, there will be an in-memory representation of the million sorted numbers.  How many different such representations are there?  Since there may be repeated numbers we can't use nCr (choose), but there is an operation called multichoose that works on <a href=\"http://mathworld.wolfram.com/Multiset.html\" rel=\"nofollow\">multisets</a>.</p>\n\n<ul>\n<li>There are <a href=\"http://www.wolframalpha.com/input/?i=multichoose%28100000000%2C1000000%29\" rel=\"nofollow\">2.2e2436455</a> ways to choose a million numbers in range 0..99,999,999.</li>\n<li>That requires <a href=\"http://www.wolframalpha.com/input/?i=log2%28multichoose%28100000000%2C1000000%29%29\" rel=\"nofollow\">8,093,730</a> bits to represent every possible combination, or 1,011,717 bytes.  </li>\n</ul>\n\n<p>So theoretically it may be possible, if you can come up with a sane (enough) representation of the sorted list of numbers.  For example, an insane representation might require a 10MB lookup table or thousands of lines of code.</p>\n\n<p>However, if \"1M RAM\" means one million bytes, then clearly there is not enough space.  The fact that 5% more memory makes it theoretically possible suggests to me that the representation will have to be VERY efficient and probably not sane.</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13001778, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>There are 10^6 values in a range of 10^8, so there's one value per hundred code points on average. Store the distance from the Nth point to the (N+1)th. Duplicate values have a skip of 0. This means that the skip needs an average of just under 7 bits to store, so a million of them will happily fit into our 8 million bits of storage.</p>\n\n<p>These skips need to be encoded into a bitstream, say by Huffman encoding. Insertion is by iterating through the bitstream and rewriting after the new value. Output by iterating through   and writing out the implied values. For practicality, it probably wants to be done as, say, 10^4 lists covering 10^4 code points (and an average of 100 values) each.</p>\n\n<p>A good Huffman tree for random data can be built a priori by assuming a Poisson distribution (mean=variance=100) on the length of the skips, but real statistics can be kept on the input and used to generate an optimal tree to deal with pathological cases.</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13002121, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>We could play with the networking stack to send the numbers in sorted order before we have all the numbers.  If you send 1M of data, TCP/IP will break it into 1500 byte packets and stream them in order to the target.  Each packet will be given a sequence number.</p>\n\n<p>We can do this by hand.  Just before we fill our RAM we can sort what we have and send the list to our target but leave holes in our sequence around each number.  Then process the 2nd 1/2 of the numbers the same way using those holes in the sequence.</p>\n\n<p>The networking stack on the far end will assemble the resulting data stream in order of sequence before handing it up to the application.</p>\n\n<p>It's using the network to perform a merge sort.  This is a total hack, but I was inspired by the other networking hack listed previously.</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13002369, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>Sorting is a secondary problem here. As other said, just storing the integers is hard, and <strong>cannot work on all inputs</strong>, since 27 bits per number would be necessary.</p>\n\n<p>My take on this is: store only the differences between the consecutive (sorted) integers, as they will be most likely small. Then use a compression scheme, e.g. with 2 additional bits per input number, to encode how many bits the number is stored on.\nSomething like:</p>\n\n<pre><code>00 -&gt; 5 bits\n01 -&gt; 11 bits\n10 -&gt; 19 bits\n11 -&gt; 27 bits\n</code></pre>\n\n<p>It should be possible to store a fair number of possible input lists within the given memory constraint. The maths of how to pick the compression scheme to have it work on the maximum number of inputs, are beyond me.</p>\n\n<p>I hope you may be able to exploit <strong>domain-specific knowledge of your input</strong> to find a good enough <strong>integer compression scheme</strong> based on this.</p>\n\n<p>Oh and then, you do an insertion sort on that sorted list as you receive data.</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13002555, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>Gilmanov's answer is very wrong in its assumptions. It starts speculating based in a <em>pointless</em> measure of a million <strong>consecutive</strong> integers. That means no gaps. Those random gaps, however small, really makes it a poor idea.</p>\n\n<p>Try it yourself. Get 1 million random 27 bit integers, sort them, compress with <a href=\"http://en.wikipedia.org/wiki/7-Zip\" rel=\"nofollow\">7-Zip</a>, xz, whatever LZMA you want. The result is over 1.5&nbsp;MB. The premise on top is compression of sequential numbers. Even <em>delta encoding</em> of that is <strong>over 1.1&nbsp;MB</strong>. And never mind this is using over 100&nbsp;MB of RAM for compression. So even the compressed integers don't fit the problem <em>and never mind run time RAM usage</em>.</p>\n\n<p>It's saddens me how people just upvote pretty graphics and rationalization.</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint32_t ints[1000000]; // Random 27-bit integers\n\nint cmpi32(const void *a, const void *b) {\n    return ( *(int32_t *)a - *(int32_t *)b );\n}\n\nint main() {\n    int32_t *pi = ints; // Pointer to input ints (REPLACE W/ read from net)\n\n    // Fill pseudo-random integers of 27 bits\n    srand(time(NULL));\n    for (int i = 0; i &lt; 1000000; i++)\n        ints[i] = rand() &amp; ((1&lt;&lt;27) - 1); // Random 32 bits masked to 27 bits\n\n    qsort(ints, 1000000, sizeof (ints[0]), cmpi32); // Sort 1000000 int32s\n\n    // Now delta encode, optional, store differences to previous int\n    for (int i = 1, prev = ints[0]; i &lt; 1000000; i++) {\n        ints[i] -= prev;\n        prev    += ints[i];\n    }\n\n    FILE *f = fopen(\"ints.bin\", \"w\");\n    fwrite(ints, 4, 1000000, f);\n    fclose(f);\n    exit(0);\n\n}\n</code></pre>\n\n<p>Now compress ints.bin with LZMA...</p>\n\n<pre><code>$ xz -f --keep ints.bin       # 100 MB RAM\n$ 7z a ints.bin.7z ints.bin   # 130 MB RAM\n$ ls -lh ints.bin*\n    3.8M ints.bin\n    1.1M ints.bin.7z\n    1.2M ints.bin.xz\n</code></pre>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13002669, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p><strong>Google</strong>'s (bad) approach, from HN thread. Store RLE-style counts.</p>\n\n<blockquote>\n  <p>Your initial data structure is '99999999:0' (all zeros, haven't seen any numbers) and then lets say you see the number 3,866,344 so your data structure becomes '3866343:0,1:1,96133654:0' as you can see the numbers will always alternate between number of zero bits and number of '1' bits so you can just assume the odd numbers represent 0 bits and the even numbers 1 bits. This becomes (3866343,1,96133654)</p>\n</blockquote>\n\n<p>Their problem doesn't seem to cover duplicates, but let's say they use \"0:1\" for duplicates.</p>\n\n<p>Big problem #1: insertions for 1M integers <em>would take ages</em>.</p>\n\n<p>Big problem #2: like all plain delta encoding solutions, some distributions can't be covered this way. For example, 1m integers with distances 0:99 (e.g. +99 each one). Now think the same but with <strong>random distance</strong> in the <strong>range of 0:99</strong>. (Note: 99999999/1000000 = 99.99)</p>\n\n<p>Google's approach is both unworthy (slow) and incorrect. But to their defense, their problem might have been slightly different.</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13002796, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>My suggestions here owe a lot to <a href=\"http://stackoverflow.com/a/13001778/1763801\">Dan's solution</a></p>\n\n<p>First off I assume the solution must handle <em>all</em> possible input lists. I think the popular answers do not make this assumption (which IMO is a huge mistake).</p>\n\n<p>It is known that no form of lossless compression will reduce the size of all inputs.</p>\n\n<p>All the popular answers assume they will be able to apply compression effective enough to allow them extra space. In fact, a chunk of extra space large enough to hold some portion of their partially completed list in an uncompressed form and allow them to perform their sorting operations. This is just a bad assumption.</p>\n\n<p>For such a solution, anyone with knowledge of how they do their compression will be able to design some input data that does not compress well for this scheme, and the \"solution\" will most likely then break due to running out of space.</p>\n\n<p>Instead I take a mathematical approach. Our possible outputs are all the lists of length LEN consisting of elements in the range 0..MAX. Here the LEN is 1,000,000 and our MAX is 100,000,000.</p>\n\n<p>For arbitrary LEN and MAX, the amount of bits needed to encode this state is:</p>\n\n<p>Log2(MAX Multichoose LEN)</p>\n\n<p>So for our numbers, once we have completed recieving and sorting, we will need at least Log2(100,000,000 MC 1,000,000) bits to store our result in a way that can uniquely distinguish all possible outputs.</p>\n\n<p><a href=\"http://www.wolframalpha.com/input/?i=%28log2%28multichoose%28100000000,1000000%29%29%29/%288%2a1024%29\" rel=\"nofollow\">This is ~= 988kb</a>. So we actually have enough space to hold our result. From this point of view, it is possible.</p>\n\n<p>[Deleted pointless rambling now that better examples exist...]</p>\n\n<p>Best answer <a href=\"http://stackoverflow.com/a/13067807/1763801\">is here</a>.</p>\n\n<p>Another good answer <a href=\"http://stackoverflow.com/a/12978097/1763801\">is here</a> and basically uses insertion sort as the function to expand the list by one element (buffers a few elements and pre-sorts, to allow insertion of more than one at a time, saves a bit of time). uses a nice compact state encoding too, buckets of seven bit deltas</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13002900, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>I would exploit the retransmission behaviour of TCP.</p>\n\n<ol>\n<li>Make the TCP component create a large receive window.</li>\n<li>Receive some amount of packets without sending an ACK for them.\n\n<ul>\n<li>Process those in passes creating some (prefix) compressed data structure</li>\n<li>Send duplicate ack for last packet that is not needed anymore/wait for retransmission timeout</li>\n<li>Goto 2</li>\n</ul></li>\n<li>All packets were accepted</li>\n</ol>\n\n<p>This assumes some kind of benefit of buckets or multiple passes.</p>\n\n<p>Probably by sorting the batches/buckets and merging them. -> radix trees</p>\n\n<p>Use this technique to accept and sort the first 80% then read the last 20%, verify that the last 20% do not contain numbers that would land in the first 20% of the lowest numbers. Then send the 20% lowest numbers, remove from memory, accept the remaining 20% of new numbers and merge.**</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13002942, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>I think one way to think about this is from a combinatorics viewpoint: how many possible combinations of sorted number orderings are there? If we give the combination 0,0,0,....,0 the code 0, and 0,0,0,...,1 the code 1, and 99999999, 99999999, ... 99999999 the code N, what is N? In other words, how big is the result space?</p>\n\n<p>Well, one way to think about this is noticing that this is a bijection of the problem of finding the number of monotonic paths in an N x M grid, where N = 1,000,000 and M = 100,000,000. In other words, if you have a grid that is 1,000,000 wide and 100,000,000 tall, how many shortest paths from the bottom left to the top right are there? Shortest paths of course require you only ever either move right or up (if you were to move down or left you would be undoing previously accomplished progress). To see how this is a bijection of our number sorting problem, observe the following:</p>\n\n<p>You can imagine any horizontal leg in our path as a number in our ordering, where the Y location of the leg represents the value.</p>\n\n<p><img src=\"http://i.stack.imgur.com/aJp4b.png\" alt=\"enter image description here\"></p>\n\n<p>So if the path simply moves to the right all the way to the end, then jumps all the way to the top, that is equivalent to the ordering 0,0,0,...,0. if it instead begins by jumping all the way to the top and then moves to the right 1,000,000 times, that is equivalent to 99999999,99999999,..., 99999999. A path where it moves right once, then up once, then right one, then up once, etc to the very end (then necessarily jumps all the way to the top), is equivalent to 0,1,2,3,...,999999.</p>\n\n<p>Luckily for us this problem has already been solved, such a grid has (N + M) Choose (M) paths:</p>\n\n<p>(1,000,000 + 100,000,000) Choose (100,000,000) ~= 2.27 * 10^2436455</p>\n\n<p>N thus equals 2.27 * 10^2436455, and so the code 0 represents 0,0,0,...,0 and the code 2.27 * 10^2436455 and some change represents 99999999,99999999,..., 99999999.</p>\n\n<p>In order to store all the numbers from 0 to 2.27 * 10^2436455 you need lg2 (2.27 * 10^2436455) = 8.0937 * 10^6 bits.</p>\n\n<p>1 megabyte = 8388608 bits > 8093700 bits</p>\n\n<p>So it appears that we at least actually have enough room to store the result! Now of course the interesting bit is doing the sorting as the numbers stream in. Not sure the best approach to this is given we have 294908 bits remaining. I imagine an interesting technique would be to at each point assume that that is is the entire ordering, finding the code for that ordering, and then as you receive a new number going back and updating the previous code. Hand wave hand wave.</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13002959, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>Now aiming to an actual solution, covering all possible cases of input in the 8 digit range with only 1MB of RAM. NOTE: work in progress, tomorrow will continue. Using arithmetic coding of deltas of the sorted ints, worst case for 1M sorted ints would cost about 7bits per entry (since 99999999/1000000 is 99, and log2(99) is almost 7 bits).</p>\n\n<p>But you need the 1m integers sorted to get to 7 or 8 bits! Shorter series would have bigger deltas, therefore more bits per element.</p>\n\n<p>I'm working on taking as many as possible and compressing (almost) in-place. First batch of close to 250K ints would need about 9 bits each at best. So result would take about 275KB. Repeat with remaining free memory a few times. Then decompress-merge-in-place-compress those compressed chunks. This is <strong>quite hard</strong>, but possible. I think.</p>\n\n<p>The merged lists would get closer and closer to the 7bit per integer target. But I don't know how many iterations it would take of the merge loop. Perhaps 3.</p>\n\n<p>But the imprecision of the arithmetic coding implementation might make it impossible. If this problem is possible at all, it would be extremely tight.</p>\n\n<p>Any volunteers?</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13003127, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>We have 1&nbsp;MB - 3&nbsp;KB RAM = 2^23 - 3*2^13 bits = 8388608 - 24576 = 8364032 bits available.</p>\n\n<p>We are given 10^6 numbers in a 10^8 range. This gives an average gap of ~100 &lt; 2^7 = 128</p>\n\n<p>Let's first consider the simpler problem of fairly evenly spaced numbers when all gaps are &lt; 128. This is easy. Just store the first number and the 7-bit gaps:</p>\n\n<p>(27 bits) + 10^6 7-bit gap numbers = 7000027 bits required</p>\n\n<p>Note repeated numbers have gaps of 0.</p>\n\n<p>But what if we have gaps larger than 127?</p>\n\n<p>OK, let's say a gap size &lt; 127 is represented directly, but a gap size of 127 is followed by a continuous 8-bit encoding for the actual gap length:</p>\n\n<pre><code> 10xxxxxx xxxxxxxx                       = 127 .. 16,383\n 110xxxxx xxxxxxxx xxxxxxxx              = 16384 .. 2,097,151\n</code></pre>\n\n<p>etc.</p>\n\n<p>Note this number representation describes its own length so we know when the next gap number starts.</p>\n\n<p>With just small gaps &lt; 127, this still requires 7000027 bits.</p>\n\n<p>There can be up to (10^8)/(2^7) = 781250 23-bit gap number, requiring an extra 16*781,250 = 12,500,000 bits which is too much. We need a more compact and slowly increasing representation of gaps.</p>\n\n<p>The average gap size is 100 so if we reorder them as\n[100, 99, 101, 98, 102, ..., 2, 198, 1, 199, 0, 200, 201, 202, ...]\nand index this with a dense binary Fibonacci base encoding with no pairs of zeros (for example, 11011=8+5+2+1=16) with numbers delimited by '00' then I think we can keep the gap representation short enough, but it needs more analysis.</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13003570, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>You have to count up to at most 99,999,999 and indicate 1,000,000 stops along the way.  So a bitstream can be used that is interpreted such that at 1 indicates in increment a counter and a 0 indicates to output a number.  If the first 8 bits in the stream are 00110010, we would have 0, 0, 2, 2, 3 so far.</p>\n\n<p><code>log(99,999,999 + 1,000,000) / log(2) = 26.59</code>.  You have <code>2^28</code> bits in your memory.  You only need to use half!</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13004000, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>If it is possible to read the input file more than once (your problem statement doesn't say it can't), the following should work. It is described in Benchley's book \"Programming Perls.\" If we store each number in 8 bytes we can store 250,000 numbers in one megabyte. Use a program that makes 40 passes over the input file. On the first pass it reads into memory any integer between 0 and 249,999, sorts the (at most) 250,000 integers and writes them to the output file. The second pass sorts the integers from 250,000 to 499,999 and so on to the 40th pass, which sorts 9,750,000 to 9,999,999.</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13004018, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>To represent the sorted array one can just store the first element and the difference between adjacent elements. In this way we are concerned with encoding 10^6 elements that can sum up to at most 10^8. Let's call this <strong>D</strong>. To encode the elements of <strong>D</strong> one can use a <a href=\"http://en.wikipedia.org/wiki/Huffman_coding\" rel=\"nofollow\">Huffman code</a>. The dictionary for the Huffman code can be created on the go and the array updated every time a new item is inserted in the sorted array (insertion sort). Note that when the dictionary changes because of a new item the whole array should be updated to match the new encoding. </p>\n\n<p>The average number of bits for encoding each element of <strong>D</strong> is maximized if we have equal number of each unique element.  Say elements <em>d1</em>, <em>d2</em>, ..., <em>dN</em> in <strong>D</strong> each appear <em>F</em> times. In that case (in worst case we have both 0 and 10^8 in input sequence) we have</p>\n\n<p><strong>sum(1&lt;=<em>i</em>&lt;=<em>N</em>)</strong> <em>F</em>. <em>di</em> = 10^8 </p>\n\n<p>where </p>\n\n<p><strong>sum(1&lt;=<em>i</em>&lt;=<em>N</em>)</strong> <em>F</em> = 10^6, or <em>F</em>=10^6/<em>N</em> and the normalized frequency will be <em>p</em>= <em>F</em>/10^=1/<em>N</em></p>\n\n<p>The average number of bits will be -log2(1/<em>P</em>) = log2(<em>N</em>). Under these circumstances we should find a case that maximizes <em>N</em>. This happens if we have consecutive numbers for <em>di</em> starting from 0, or, <em>di</em>= <em>i</em>-1, therefore</p>\n\n<p>10^8=<strong>sum(1&lt;=<em>i</em>&lt;=<em>N</em>)</strong> <em>F</em>. <em>di</em> = <strong>sum(1&lt;=<em>i</em>&lt;=<em>N</em>)</strong> (10^6/<em>N</em>) (i-1) = (10^6/<em>N</em>) <em>N</em> (<em>N</em>-1)/2</p>\n\n<p>i.e.</p>\n\n<p><em>N</em> &lt;= 201. And for this case average number of bits is log2(201)=7.6511 which means we will need around 1 byte per input element for saving the sorted array. Note that this doesn't mean <strong>D</strong> in general cannot have more than 201 elements. It just sows that if elements of <strong>D</strong> are uniformly distributed, it cannot have more than 201 unique values.</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13004132, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>You just need to store the differences between the numbers in sequence, and use an encoding to compress these sequence numbers. We have 2^23 bits. We shall divide it into 6bit chunks, and let the last bit indicate whether the number extends to another 6 bits (5bits plus extending chunk). </p>\n\n<p>Thus, 000010 is 1, and 000100 is 2. 000001100000 is 128. Now, we consider the worst cast in representing differences in sequence of a numbers up to 10,000,000. There can be 10,000,000/2^5 differences greater than 2^5, 10,000,000/2^10 differences greater than 2^10, and 10,000,000/2^15 differences greater than 2^15, etc.</p>\n\n<p>So, we add how many bits it will take to represent our the sequence. We have 1,000,000*6 + roundup(10,000,000/2^5)*6+roundup(10,000,000/2^10)*6+roundup(10,000,000/2^15)*6+roundup(10,000,000/2^20)*4=7935479.</p>\n\n<p>2^24 = 8388608. Since 8388608 > 7935479, we should easily have enough memory. We will probably need another little bit of memory to store the sum of where are when we insert new numbers. We then go through the sequence, and find where to insert our new number, decrease the next difference if necessary, and shift everything after it right.</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13005095, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>This is assuming base 10 and as an example, your memory is using 8 bit words:\nMemory map the entire range of numbers using 3 bit increments. The First 3 bits would correspond to the number 0. The second set of 3 bit would map to number 1. Three hundred thousandth set of 3-bit would map to the number 300k. Repeat this until you have mapped out all the 8 digit numbers. This would total 375k bytes in total if memory range was continuous. </p>\n\n<p>The 1st bit out of the 3 would mark the presence of the number. The next 2 bits would indicate the amount of duplicates that could be represented in bytes(1..3) if none, the duplicates field would be 00. There will be a second list that uses a counter that increments each time a 3 bit field is marked as having a duplicate. If it marked with 1 it will have a single bit range to count the amount of duplicates it has. 8 bits can represent a range 255. </p>\n\n<p>As I'm losing track of thoughts. The second list will keep track of how many duplicates for each number. if the 255th number has a duplicate and is the first number to have a duplicate it's index in the list will be 0. If 23,543 is the second number to have a duplicate it's index will be 1. Wash,rise and repeat.</p>\n\n<p>Worst case scenario is you have 500k numbers with duplicates. This can be represented by a single byte(since 1 fits in easy). So 375kB(ideally) + 500kB bytes is close to .875MB. Depending on your processor this should leave enough room left over for pointers,indexing and all of the other fun stuff.</p>\n\n<p>If you have a single number that has 1M duplicates. all you need is 3 bytes, since your limited to 1M numbers, that's all you have to worry about. So on your second list it will be just be 3 byes with the total amount. </p>\n\n<p>Now for the fun part. The second list will need to be sorted for each new number that comes in. In the 3 bit field the last 2 are the number of bytes that contains the number of duplicates. Since the second list is expected to be in order it will need to be sorted. Since the amount of bytes can vary. Think insertion sort! </p>\n\n<p>This would keep the amount of pointers and things you need to increment to a minimum so you should have a little bit of flexibility with the maybe 250k bytes left.</p>\n\n<p>GoodLuck! This sounds so much more elegant in my mind...</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13005194, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>I think the solution is to combine techniques from video encoding, namely the discrete cosine transformation.  In digital video, rather recording the changing the brightness or colour of video as regular values such as 110 112 115 116, each is subtracted from the last (similar to run length encoding). 110 112 115 116 becomes 110 2 3 1.  The values, 2 3 1 require less bits than the originals.</p>\n\n<p>So lets say we create a list of the input values as they arrive on the socket. We are storing in each element, not the value, but the offset of the one before it.  We sort as we go, so the offsets are only going to be positive.  But the offset could be 8 decimal digits wide which this fits in 3 bytes. Each element can't be 3 bytes, so we need to pack these. We could use the top bit of each byte as a \"continue bit\", indicating that the next byte is part of the number and the lower 7 bits of each byte need to be combined. zero is valid for duplicates.</p>\n\n<p>As the list fills up, the numbers should be get closer together, meaning on average only 1 byte is used to determine the distance to the next value.  7 bits of value and 1 bit of offset if convenient, but there may be a sweet spot that requires less than 8 bits for a \"continue\" value.</p>\n\n<p>Anyway, I did some experiment. I use a random number generator and I can fit a million sorted 8 digit decimal numbers into about 1279000 bytes. The average space between each number is consistently 99...</p>\n\n<pre><code>public class Test {\n    public static void main(String[] args) throws IOException {\n        // 1 million values\n        int[] values = new int[1000000];\n\n        // create random values up to 8 digits lrong\n        Random random = new Random();\n        for (int x=0;x&lt;values.length;x++) {\n            values[x] = random.nextInt(100000000);\n        }\n        Arrays.sort(values);\n\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n\n        int av = 0;    \n        writeCompact(baos, values[0]);     // first value\n        for (int x=1;x&lt;values.length;x++) {\n            int v = values[x] - values[x-1];  // difference\n            av += v;\n            System.out.println(values[x] + \" diff \" + v);\n            writeCompact(baos, v);\n        }\n\n        System.out.println(\"Average offset \" + (av/values.length));\n        System.out.println(\"Fits in \" + baos.toByteArray().length);\n    }\n\n    public static void writeCompact(OutputStream os, long value) throws IOException {\n        do {\n            int b = (int) value &amp; 0x7f;\n            value = (value &amp; 0x7fffffffffffffffl) &gt;&gt; 7;\n            os.write(value == 0 ? b : (b | 0x80));\n        } while (value != 0);\n    }\n}\n</code></pre>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13007585, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>If we don't know anything about those numbers, we are limited by the following constraints:</p>\n\n<ul>\n<li>we need to load all numbers before we can sort them them,</li>\n<li>the set of numbers is not compressible.</li>\n</ul>\n\n<p>If these assumptions hold, there is no way to carry out your task, as you will need at least 26,575,425 bits of storage (3,321,929 bytes).</p>\n\n<p>What can you tell us about your data ?</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13008452, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>The trick is to represent the algorithms state, which is an integer multi-set, as a compressed stream of \"increment counter\"=\"+\" and \"output counter\"=\"!\" characters. For example, the set {0,3,3,4} would be represented as \"!+++!!+!\", followed by any number of \"+\" characters. To modify the multi-set you stream out the characters, keeping only a constant amount decompressed at a time, and make changes inplace before streaming them back in compressed form.</p>\n\n<p><strong>Details</strong></p>\n\n<p>We know there are exactly 10^6 numbers in the final set, so there are at most 10^6 \"!\" characters. We also know that our range has size 10^8, meaning there are at most 10^8 \"+\" characters. The number of ways we can arrange 10^6 \"!\"s amongst 10^8 \"+\"s is <code>(10^8 + 10^6) choose 10^6</code>, and so specifying some particular arrangement takes <a href=\"http://www.wolframalpha.com/input/?i=log_2%28%2810%5E8%20%2b%2010%5E6%29%20choose%2010%5E6%29%20/%202%5E23\" rel=\"nofollow\">~0.965 MiB</a>` of data. That'll be a tight fit.</p>\n\n<p>We can treat each character as independent without exceeding our quota. There are exactly 100 times more \"+\" characters than \"!\" characters, which simplifies to 100:1 odds of each character being a \"+\" if we forget that they are dependent. Odds of 100:101 corresponds to <a href=\"http://www.wolframalpha.com/input/?i=-1/101%20%2a%20log_2%281/101%29%20%2b%20-100/101%20%2a%20log_2%28100/101%29\" rel=\"nofollow\">~0.08 bits per character</a>, for an almost identical total of <a href=\"http://www.wolframalpha.com/input/?i=%28-1/101%20%2a%20log_2%201/101%20%20%2b%20-100/101%20%2a%20log_2%20100/101%29%2a%2810%5E8%2b10%5E6%29/2%5E23\" rel=\"nofollow\">~0.965 MiB</a> (ignoring the dependency has a cost of only <a href=\"http://www.wolframalpha.com/input/?i=log_2%28%2810%5E8%20%2b%2010%5E6%29%20choose%2010%5E6%29%20-%20%28-1/101%20%2a%20log_2%201/101%20%20%2b%20-100/101%20%2a%20log_2%20100/101%29%2a%2810%5E8%2b10%5E6%29\" rel=\"nofollow\">~12 bits</a> in this case!).</p>\n\n<p>The simplest technique for storing independent characters with known prior probability is <a href=\"http://en.wikipedia.org/wiki/Huffman_encoding\" rel=\"nofollow\">Huffman coding</a>. Note that we need an impractically large tree (A huffman tree for blocks of 10 characters has an average cost per block of about 2.4 bits, for a total of ~2.9 Mib. A huffman tree for blocks of 20 characters has an average cost per block of about 3 bits, which is a total of ~1.8 MiB. We're probably going to need a block of size on the order of a hundred, implying more nodes in our tree than all the computer equipment that has ever existed can store.). However, ROM is technically \"free\" according to the problem and practical solutions that take advantage of the regularity in the tree will look essentially the same.</p>\n\n<p><strong>Pseudo-code</strong></p>\n\n<ul>\n<li>Have a sufficiently large huffman tree (or similar block-by-block compression data) stored in ROM</li>\n<li>Start with a compressed string of 10^8 \"+\" characters.</li>\n<li>To insert the number N, stream out the compressed string until N \"+\" characters have gone past then insert a \"!\". Stream the recompressed string back over the previous one as you go, keeping a constant amount of buffered blocks to avoid over/under-runs.</li>\n<li>Repeat one million times: [input, stream decompress>insert>compress], then decompress to output</li>\n</ul>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13016013, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>Have you tried converting to hex?</p>\n\n<p>I can see a big reduction on filesize after and before; then, work by part with the free space. Maybe, converting to dec again, order, hex, another chunk,convert to dec, order...</p>\n\n<p>Sorry.. I don't know if could work</p>\n\n<pre><code># for i in {1..10000};do echo $(od -N1 -An -i /dev/urandom) ; done &gt; 10000numbers\n# for i in $(cat 10000numbers ); do printf '%x\\n' $i; done &gt; 10000numbers_hex\n# ls -lah total 100K\ndrwxr-xr-x  2 diego diego 4,0K oct 22 22:32 .\ndrwx------ 39 diego diego  12K oct 22 22:31 ..\n-rw-r--r--  1 diego diego  29K oct 22 22:33 10000numbers_hex\n-rw-r--r--  1 diego diego  35K oct 22 22:31 10000numbers\n</code></pre>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13022571, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>If the input stream could be received few times this would be much\neasier (no information about that, idea and time-performance problem). </p>\n\n<p>Then, we could count the decimal values. With counted values it would be\neasy to make the output stream. Compress by counting the values. It\ndepends what would be in the input stream.</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13049260, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p><a href=\"https://gist.github.com/3952090\">Here's some working C++ code</a> which solves the problem.</p>\n\n<p><s>Proof that the memory constraints are satisfied:</s></p>\n\n<p><b>Editor: </b>There is no proof of the maximum memory requirements offered by the author either in this post or in his blogs. Since the number of bits necessary to encode a value depends on the values previously encoded, such a proof is likely non-trivial. The author notes that the largest encoded size he could stumble upon empirically was <code>1011732</code>, and chose the buffer size <code>1013000</code> arbitrarily.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>typedef unsigned int u32;\n\nnamespace WorkArea\n{\n    static const u32 circularSize = 253250;\n    u32 circular[circularSize] = { 0 };         // consumes 1013000 bytes\n\n    static const u32 stageSize = 8000;\n    u32 stage[stageSize];                       // consumes 32000 bytes\n\n    ...\n</code></pre>\n\n<p>Together, these two arrays take 1045000 bytes of storage. That leaves 1048576 - 1045000 - 2&times;1024 = 1528 bytes for remaining variables and stack space.</p>\n\n<p>It runs in about 23 seconds on my Xeon W3520. You can verify that the program works using the following Python script, assuming a program name of <code>sort1mb.exe</code>.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from subprocess import *\nimport random\n\nsequence = [random.randint(0, 99999999) for i in xrange(1000000)]\n\nsorter = Popen('sort1mb.exe', stdin=PIPE, stdout=PIPE)\nfor value in sequence:\n    sorter.stdin.write('%08d\\n' % value)\nsorter.stdin.close()\n\nresult = [int(line) for line in sorter.stdout]\nprint('OK!' if result == sorted(sequence) else 'Error!')\n</code></pre>\n\n<p>A detailed explanation of the algorithm can be found in the following series of posts:</p>\n\n<ul>\n<li><a href=\"http://preshing.com/20121026/1mb-sorting-explained\">1MB Sorting Explained</a></li>\n<li><a href=\"http://preshing.com/20121105/arithmetic-coding-and-the-1mb-sorting-problem\">Arithmetic Coding and the 1MB Sorting Problem</a></li>\n<li><a href=\"http://preshing.com/20121105/arithmetic-encoding-using-fixed-point-math\">Arithmetic Encoding Using Fixed-Point Math</a></li>\n</ul>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 13067807, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}, {"body": "<p>While receiving the stream do these steps.  </p>\n\n<p>1st set some reasonable chunk size</p>\n\n<p>Pseudo Code idea: </p>\n\n<ol>\n<li>The first step would be to find all the duplicates and stick them in a dictionary with its count and remove them.  </li>\n<li>The third step would be to place number that exist in sequence of their algorithmic steps and place them in counters special dictionaries with the first number and their step like n, n+1 ... ,n+2, 2n, 2n+1, 2n+2... </li>\n<li>Begin to compress in chunks some reasonable ranges of number like every 1000 or ever 10000 the remaining numbers that appear less often to repeat.</li>\n<li>Uncompress that range if a number is found and add it to the range and leave it uncompressed for a while longer.</li>\n<li>Otherwise just add that number to a byte[chunkSize]</li>\n</ol>\n\n<p>Continue the first 4 steps while receiving the stream. \nThe final step would be to either fail if you exceeded memory or start outputting the result once all the data is collected by beginning to sort the ranges and spit out the results in order and uncompressing those in order that need to be uncompressed and sort them when you get to them.</p>\n", "title": "Sorting 1 million 8-digit numbers in 1 MB of RAM", "answer_id": 27259357, "question_id": 12748246, "tags": ["algorithm", "sorting", "embedded", "ram"]}], "link": "http://stackoverflow.com/questions/12748246/sorting-1-million-8-digit-numbers-in-1-mb-of-ram", "question_id": 12748246}, {"body": "<p>I am trying to clean up the way my anchors work. I have a header that is fixed to the top of the page, so when you link to an anchor elsewhere in the page, the page jumps so the anchor is at the top of the page, leaving the content behind the fixed header (I hope that makes sense).  I need a way to offset the anchor by the 25px from the height of the header. I would prefer HTML or CSS, but Javascript would be acceptable as well.</p>\n", "title": "offsetting an html anchor to adjust for fixed header", "tags": ["javascript", "html", "css", "anchor", "offset"], "answers": [{"body": "<p>For the same issue, I used an easy solution : put a padding-top of 40px on each anchor.</p>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 9482419, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>I found this solution:</p>\n\n<pre><code>&lt;a name=\"myanchor\"&gt;\n    &lt;h1 style=\"padding-top: 40px; margin-top: -40px;\"&gt;My anchor&lt;/h1&gt;\n&lt;/a&gt;\n</code></pre>\n\n<p>This doesn't create any gap in the content and anchor links works really nice.</p>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 11842865, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>As @moeffju suggests, this can be <a href=\"http://nicolasgallagher.com/jump-links-and-viewport-positioning/demo/\">achieved with CSS</a>. The issue I ran into (which I'm surprised I haven't seen discussed) is the trick of overlapping previous elements with padding or a transparent border prevents hover and click actions at the bottom of those sections because the following one comes higher in the z-order.</p>\n\n<p>The best fix I found was to place section content in a <code>div</code> that is at <code>z-index: 1</code>:</p>\n\n<pre><code>// Apply to elements that serve as anchors\n.offset-anchor {\n  border-top: 75px solid transparent;\n  margin: -75px 0 0;\n  -webkit-background-clip: padding-box;\n  -moz-background-clip: padding;\n  background-clip: padding-box;\n}\n\n// Because offset-anchor causes sections to overlap the bottom of previous ones,\n// we need to put content higher so links aren't blocked by the transparent border.\n.container {\n  position: relative;\n  z-index: 1;\n}\n</code></pre>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 12935557, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>I ran into this same issue and ended up handling the click events manually, like:</p>\n\n<pre><code>$('#mynav a').click(() -&gt;\n  $('html, body').animate({\n      scrollTop: $($(this).attr('href')).offset().top - 40\n  }, 200\n  return false\n)\n</code></pre>\n\n<p>Scroll animation optional, of course.</p>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 12943012, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>As this is a concern of presentation, a pure CSS solution would be ideal. However, this question was posed in 2012, and although relative positioning / negative margin solutions have been suggested, these approaches seem rather hacky, create potential flow issues, and cannot respond dynamically to changes in the DOM / viewport.</p>\n\n<p>With that in mind I believe that using JavaScript is <em>still</em> (December 2015) the best approach. Below is a vanilla-JS solution which will respond both to anchor clicks and resolve the page hash on load <strong><a href=\"http://jsfiddle.net/ianclark001/eqtosjtv/\">(See JSFiddle)</a></strong>. Modify the <code>.getFixedOffset()</code> method if dynamic calculations are required. If you're using jQuery, <a href=\"http://jsfiddle.net/ianclark001/rkocah23/\">here's a modified solution with better event delegation and smooth scrolling</a>.</p>\n\n<pre><code>(function(document, history, location) {\n  var HISTORY_SUPPORT = !!(history &amp;&amp; history.pushState);\n\n  var anchorScrolls = {\n    ANCHOR_REGEX: /^#[^ ]+$/,\n    OFFSET_HEIGHT_PX: 50,\n\n    /**\n     * Establish events, and fix initial scroll position if a hash is provided.\n     */\n    init: function() {\n      this.scrollToCurrent();\n      window.addEventListener('hashchange', this.scrollToCurrent.bind(this));\n      document.body.addEventListener('click', this.delegateAnchors.bind(this));\n    },\n\n    /**\n     * Return the offset amount to deduct from the normal scroll position.\n     * Modify as appropriate to allow for dynamic calculations\n     */\n    getFixedOffset: function() {\n      return this.OFFSET_HEIGHT_PX;\n    },\n\n    /**\n     * If the provided href is an anchor which resolves to an element on the\n     * page, scroll to it.\n     * @param  {String} href\n     * @return {Boolean} - Was the href an anchor.\n     */\n    scrollIfAnchor: function(href, pushToHistory) {\n      var match, rect, anchorOffset;\n\n      if(!this.ANCHOR_REGEX.test(href)) {\n        return false;\n      }\n\n      match = document.getElementById(href.slice(1));\n\n      if(match) {\n        rect = match.getBoundingClientRect();\n        anchorOffset = window.pageYOffset + rect.top - this.getFixedOffset();\n        window.scrollTo(window.pageXOffset, anchorOffset);\n\n        // Add the state to history as-per normal anchor links\n        if(HISTORY_SUPPORT &amp;&amp; pushToHistory) {\n          history.pushState({}, document.title, location.pathname + href);\n        }\n      }\n\n      return !!match;\n    },\n\n    /**\n     * Attempt to scroll to the current location's hash.\n     */\n    scrollToCurrent: function() {\n      this.scrollIfAnchor(window.location.hash);\n    },\n\n    /**\n     * If the click event's target was an anchor, fix the scroll position.\n     */\n    delegateAnchors: function(e) {\n      var elem = e.target;\n\n      if(\n        elem.nodeName === 'A' &amp;&amp;\n        this.scrollIfAnchor(elem.getAttribute('href'), true)\n      ) {\n        e.preventDefault();\n      }\n    }\n  };\n\n  window.addEventListener(\n    'DOMContentLoaded', anchorScrolls.init.bind(anchorScrolls)\n  );\n})(window.document, window.history, window.location);\n</code></pre>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 13067009, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>I was looking for a solution to this as well. In my case it was pretty easy.</p>\n\n<p>I have a list menu with all the links:</p>\n\n<pre><code>&lt;ul&gt;\n&lt;li&gt;&lt;a href=\"#one\"&gt;one&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"#two\"&gt;two&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"#three\"&gt;three&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"#four\"&gt;four&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>And below that the headings where it should go to.</p>\n\n<pre><code>&lt;h3&gt;one&lt;/h3&gt;\n&lt;p&gt;text here&lt;/p&gt;\n\n&lt;h3&gt;two&lt;/h3&gt;\n&lt;p&gt;text here&lt;/p&gt;\n\n&lt;h3&gt;three&lt;/h3&gt;\n&lt;p&gt;text here&lt;/p&gt;\n\n&lt;h3&gt;four&lt;/h3&gt;\n&lt;p&gt;text here&lt;/p&gt;\n</code></pre>\n\n<p>Now because I have a fixed menu at the top of my page I can't just make it go to my  tag because that would be behind the  menu.</p>\n\n<p>Instead I put a span tag inside my  tag with the proper id.</p>\n\n<pre><code>&lt;h3&gt;&lt;span id=\"one\"&gt;&lt;/span&gt;one&lt;/h3&gt;\n</code></pre>\n\n<p>Now use 2 lines of css to position them properly.</p>\n\n<pre><code>h3{ position:relative; }\nh3 span{ position:absolute; top:-200px;}\n</code></pre>\n\n<p>Change the top value to match the height of your fixed header (or more).\nNow I assume this would work with other elements as well.</p>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 13138463, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>You could just use CSS without any javascript.</p>\n\n<p>Give your anchor a class:</p>\n\n<pre><code>&lt;a class=\"anchor\" id=\"top\"&gt;&lt;/a&gt;\n</code></pre>\n\n<p>You can then position the anchor an offset higher or lower than where it actually appears on the page, by making it a block element and relatively positioning it. -250px will position the anchor up 250px</p>\n\n<pre><code>a.anchor {\n    display: block;\n    position: relative;\n    top: -250px;\n    visibility: hidden;\n}\n</code></pre>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 13184714, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>Pure css solution inspired by Alexander Savin:</p>\n\n<pre><code>a[name] {\n  padding-top: 40px;\n  margin-top: -40px;\n  display: inline-block; /* required for webkit browsers */\n}\n</code></pre>\n\n<p>Optionally you may want to add the following if the target is still off the screen:</p>\n\n<pre><code>  vertical-align: top;\n</code></pre>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 13881860, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>@AlexanderSavin's solution works great in <code>WebKit</code> browsers for me.</p>\n\n<p>I additionally had to use <a href=\"https://developer.mozilla.org/en-US/docs/CSS/%3atarget\" rel=\"nofollow\">:target</a> pseudo-class which applies style to the selected anchor to adjust padding in <code>FF</code>, <code>Opera</code> &amp; <code>IE9</code>:</p>\n\n<pre><code>a:target {\n  padding-top: 40px\n}\n</code></pre>\n\n<p><em>Note that this style is not for <code>Chrome</code> / <code>Safari</code> so you'll probably have to use css-hacks, conditional comments etc.</em></p>\n\n<p>Also I'd like to notice that Alexander's solution works due to the fact that targeted element is <code>inline</code>. If you don't want link you could simply change <code>display</code> property:</p>\n\n<pre><code>&lt;div id=\"myanchor\" style=\"display: inline\"&gt;\n   &lt;h1 style=\"padding-top: 40px; margin-top: -40px;\"&gt;My anchor&lt;/h1&gt;\n&lt;/div&gt;\n</code></pre>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 14834934, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>Adding to Ziav's answer (with thanks to Alexander Savin), I need to be using the old-school <code>&lt;a name=\"...\"&gt;...&lt;/a&gt;</code> as we're using <code>&lt;div id=\"...\"&gt;...&lt;/div&gt;</code> for another purpose in our code. I had some display issues using <code>display: inline-block</code> -- the first line of every <code>&lt;p&gt;</code> element was turning out to be slightly right-indented (on both Webkit and Firefox browsers). I ended up trying other <code>display</code> values and <code>display: table-caption</code> works perfectly for me.</p>\n\n<pre><code>.anchor {\n  padding-top: 60px;\n  margin-top: -60px;\n  display: table-caption;\n}\n</code></pre>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 16188689, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>I'm facing this problem in a TYPO3 website, where all \"Content Elements\" are wrapped with something like:</p>\n\n<pre><code>&lt;div id=\"c1234\" class=\"contentElement\"&gt;...&lt;/div&gt;\n</code></pre>\n\n<p>and i changed the rendering so it renders like this:</p>\n\n<pre><code>&lt;div id=\"c1234\" class=\"anchor\"&gt;&lt;/div&gt;\n&lt;div class=\"contentElement\"&gt;...&lt;/div&gt;\n</code></pre>\n\n<p>And this CSS:</p>\n\n<pre><code>.anchor{\n    position: relative;\n    top: -50px;\n}\n</code></pre>\n\n<p>The fixed topbar being 40px high, now the anchors work again and start 10px under the topbar.</p>\n\n<p>Only drawback of this technique is you can no longer use <code>:target</code>. </p>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 16195939, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>I added 40px-height <code>.vspace</code> element holding the anchor before each of my <code>h1</code> elements.</p>\n\n<pre><code>&lt;div class=\"vspace\" id=\"gherkin\"&gt;&lt;/div&gt;\n&lt;div class=\"page-header\"&gt;\n  &lt;h1&gt;Gherkin&lt;/h1&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>In the CSS:</p>\n\n<pre><code>.vspace { height: 40px;}\n</code></pre>\n\n<p>It's working great and the space is not chocking.</p>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 16513876, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>Solutions with changing position property are not always possible (it can destroy layout) therefore I suggest this:</p>\n\n<p>HTML:</p>\n\n<pre><code>&lt;a id=\"top\"&gt;Anchor&lt;/a&gt;\n</code></pre>\n\n<p>CSS:</p>\n\n<pre><code>#top {\n    margin-top: -250px;\n    padding-top: 250px;\n}\n</code></pre>\n\n<p>Use this:</p>\n\n<pre><code>&lt;a id=\"top\"&gt;&amp;nbsp;&lt;/a&gt;\n</code></pre>\n\n<p>to minimize overlapping, and set font-size to 1px. Empty anchor will not work in some browsers.</p>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 17047997, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<h2>You can do it without js and without altering html. It\u00b4s css-only.</h2>\n\n<pre><code>a[id]:before {\n    content:\"\";\n    display:block;\n    height:50px;\n    margin:-30px 0 0;\n}\n</code></pre>\n\n<p>That will append a pseudo-element before every a-tag with an id. Adjust values to match the height of your header.</p>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 17303334, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>how about hidden span tags with linkable IDs that provide the height of the navbar:</p>\n\n<pre><code>#head1 {\n  padding-top: 60px;\n  height: 0px;\n  visibility: hidden;\n}\n\n\n&lt;span class=\"head1\"&gt;somecontent&lt;/span&gt;\n&lt;h5 id=\"headline1\"&gt;This Headline is not obscured&lt;/h5&gt;\n</code></pre>\n\n<p>heres the fiddle: <a href=\"http://jsfiddle.net/N6f2f/7\" rel=\"nofollow\">http://jsfiddle.net/N6f2f/7</a></p>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 18274740, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>I had been facing a similar issue, unfortunately after implementing all the solutions above, I came to the following conclusion.</p>\n\n<ol>\n<li>My inner elements had a fragile CSS structure and implementing a position relative / absolute play, was completely breaking the page design.</li>\n<li>CSS is not my strong suit.</li>\n</ol>\n\n<p>I wrote this simple scrolling js, that accounts for the offset caused due to the header and relocated the div about 125 pixels below. Please use it as you see fit.</p>\n\n<p>The HTML</p>\n\n<pre><code>&lt;div id=\"#anchor\"&gt;&lt;/div&gt; &lt;!-- #anchor here is the anchor tag which is on your URL --&gt;\n</code></pre>\n\n<p>The JavaScript</p>\n\n<pre><code> $(function() {\n  $('a[href*=#]:not([href=#])').click(function() {\n    if (location.pathname.replace(/^\\//,'') == this.pathname.replace(/^\\//,'') \n&amp;&amp; location.hostname == this.hostname) {\n\n      var target = $(this.hash);\n      target = target.length ? target : $('[name=' + this.hash.slice(1) +']');\n      if (target.length) {\n        $('html,body').animate({\n          scrollTop: target.offset().top - 125 //offsets for fixed header\n        }, 1000);\n        return false;\n      }\n    }\n  });\n  //Executed on page load with URL containing an anchor tag.\n  if($(location.href.split(\"#\")[1])) {\n      var target = $('#'+location.href.split(\"#\")[1]);\n      if (target.length) {\n        $('html,body').animate({\n          scrollTop: target.offset().top - 125 //offset height of header here too.\n        }, 1000);\n        return false;\n      }\n    }\n});\n</code></pre>\n\n<p>See a <a href=\"http://scholowiz.herokuapp.com/about#change\">live implementation here</a>.</p>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 20320919, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>You can also add an anchor with follow attr:</p>\n\n<pre><code>(text-indent:-99999px;)\nvisibility: hidden;\nposition:absolute;\ntop:-80px;    \n</code></pre>\n\n<p>and give the parent container a position relative.</p>\n\n<p>Works perfect for me.</p>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 20438993, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>The above methods don't work very well if your anchor is a table element or within a table (row or cell).</p>\n\n<p>I had to use javascript and bind to the window <code>hashchange</code> event to work around this (<a href=\"http://jsfiddle.net/Mottie/3afdN/\" rel=\"nofollow\">demo</a>):</p>\n\n<pre><code>function moveUnderNav() {\n    var $el, h = window.location.hash;\n    if (h) {\n        $el = $(h);\n        if ($el.length &amp;&amp; $el.closest('table').length) {\n            $('body').scrollTop( $el.closest('table, tr').position().top - 26 );\n        }\n    }\n}\n\n$(window)\n    .load(function () {\n        moveUnderNav();\n    })\n    .on('hashchange', function () {\n        moveUnderNav();\n    });\n</code></pre>\n\n<p>* Note: The <a href=\"http://caniuse.com/#feat=hashchange\" rel=\"nofollow\">hashchange</a> event is not available in all browsers.</p>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 21078520, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>You can achieve this without an ID using the <code>a[name]:not([href])</code> css selector. This simply looks for links with a name and no href e.g. <code>&lt;a name=\"anc1\"&gt;&lt;/a&gt;</code></p>\n\n<p>An example rule might be:</p>\n\n<pre><code>a[name]:not([href]){\n    display: block;    \n    position: relative;     \n    top: -100px;\n    visibility: hidden;\n}\n</code></pre>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 21120834, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>For modern browsers, just add the CSS3 :target selector to the page. This will apply to all the anchors automatically.</p>\n\n<pre><code>:target {\n    display: block;    \n    position: relative;     \n    top: -100px;\n    visibility: hidden;\n}\n</code></pre>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 21707103, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>Borrowing some of the code from an answer given <a href=\"http://stackoverflow.com/questions/14804941/how-to-add-smooth-scrolling-to-bootstraps-scroll-spy-function\">at this link</a> (no author is specified), you can include a nice smooth-scroll effect to the anchor, while making it stop at -60px above the anchor, fitting nicely underneath the fixed bootstrap navigation bar (requires jQuery):</p>\n\n<pre><code>$(\".dropdown-menu a[href^='#']\").on('click', function(e) {\n   // prevent default anchor click behavior\n   e.preventDefault();\n\n   // animate\n   $('html, body').animate({\n       scrollTop: $(this.hash).offset().top - 60\n     }, 300, function(){\n     });\n});\n</code></pre>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 22396624, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>My solution combines the target and before selectors for our CMS. Other techniques don't account for text in the anchor. Adjust the height and the negative margin to the offset you need...</p>\n\n<pre><code>:target:before {\n    content: \"\";\n    display: inline-block;\n    height: 180px;\n    margin: -180px 0 0;\n}\n</code></pre>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 22655654, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>FWIW this worked for me:</p>\n\n<pre><code>*[id]:before { \n  display: block; \n  content: \" \"; \n  margin-top: -75px; \n  height: 75px; \n  visibility: hidden; \n}\n</code></pre>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 24298427, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>A further twist to the excellent answer from @Jan is to incorporate this into the #uberbar fixed header, which uses jQuery (or MooTools). (<a href=\"http://davidwalsh.name/persistent-header-opacity\" rel=\"nofollow\">http://davidwalsh.name/persistent-header-opacity</a>)</p>\n\n<p>I've tweaked the code so the the top of the content is always below not under the fixed header and also added the anchors from @Jan again making sure that the anchors are always positioned below the fixed header.</p>\n\n<p>The CSS:</p>\n\n<pre><code>#uberbar { \n    border-bottom:1px solid #0000cc; \n    position:fixed; \n    top:0; \n    left:0; \n    z-index:2000; \n    width:100%;\n}\n\na.anchor {\n    display: block;\n    position: relative;\n    visibility: hidden;\n}\n</code></pre>\n\n<p>The jQuery (including tweaks to both the #uberbar and the anchor approaches:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n$(document).ready(function() {\n    (function() {\n        //settings\n        var fadeSpeed = 200, fadeTo = 0.85, topDistance = 30;\n        var topbarME = function() { $('#uberbar').fadeTo(fadeSpeed,1); }, topbarML = function() { $('#uberbar').fadeTo(fadeSpeed,fadeTo); };\n        var inside = false;\n        //do\n        $(window).scroll(function() {\n            position = $(window).scrollTop();\n            if(position &gt; topDistance &amp;&amp; !inside) {\n                //add events\n                topbarML();\n                $('#uberbar').bind('mouseenter',topbarME);\n                $('#uberbar').bind('mouseleave',topbarML);\n                inside = true;\n            }\n            else if (position &lt; topDistance){\n                topbarME();\n                $('#uberbar').unbind('mouseenter',topbarME);\n                $('#uberbar').unbind('mouseleave',topbarML);\n                inside = false;\n            }\n        });\n        $('#content').css({'margin-top': $('#uberbar').outerHeight(true)});\n        $('a.anchor').css({'top': - $('#uberbar').outerHeight(true)});\n    })();\n});\n&lt;/script&gt;\n</code></pre>\n\n<p>And finally the HTML:</p>\n\n<pre><code>&lt;div id=\"uberbar\"&gt;\n    &lt;!--CONTENT OF FIXED HEADER--&gt;\n&lt;/div&gt;\n....\n&lt;div id=\"content\"&gt;\n    &lt;!--MAIN CONTENT--&gt;\n    ....\n    &lt;a class=\"anchor\" id=\"anchor1\"&gt;&lt;/a&gt;\n    ....\n    &lt;a class=\"anchor\" id=\"anchor2\"&gt;&lt;/a&gt;\n    ....\n&lt;/div&gt;\n</code></pre>\n\n<p>Maybe this is useful to somebody who likes the #uberbar fading dixed header!</p>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 26806275, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>This was inspired by the answer by Shouvik - same concept as his, only the size of the fixed header isn't hard coded. As long as your fixed header is in the first header node, this should \"just work\"</p>\n\n<pre><code>/*jslint browser: true, plusplus: true, regexp: true */\n\nfunction anchorScroll(fragment) {\n    \"use strict\";\n    var amount, ttarget;\n    amount = $('header').height();\n    ttarget = $('#' + fragment);\n    $('html,body').animate({ scrollTop: ttarget.offset().top - amount }, 250);\n    return false;\n}\n\nfunction outsideToHash() {\n    \"use strict\";\n    var fragment;\n    if (window.location.hash) {\n        fragment = window.location.hash.substring(1);\n        anchorScroll(fragment);\n    }\n}\n\nfunction insideToHash(nnode) {\n    \"use strict\";\n    var fragment;\n    fragment = $(nnode).attr('href').substring(1);\n    anchorScroll(fragment);\n}\n\n$(document).ready(function () {\n    \"use strict\";\n    $(\"a[href^='#']\").bind('click',  function () {insideToHash(this); });\n    outsideToHash();\n});\n</code></pre>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 27053212, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>Here's the solution that we use on our site. Adjust the <code>headerHeight</code> variable to whatever your header height is. Add the <code>js-scroll</code> class to the anchor that should scroll on click.</p>\n\n<pre><code>// SCROLL ON CLICK\n// --------------------------------------------------------------------------\n$('.js-scroll').click(function(){\n    var headerHeight = 60;\n\n    $('html, body').animate({\n        scrollTop: $( $.attr(this, 'href') ).offset().top - headerHeight\n    }, 500);\n    return false;\n});\n</code></pre>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 27534702, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>Instead of having a fixed-position navbar which is underlapped by the rest of the content of the page (with the whole page body being scrollable), consider instead having a non-scrollable body with a static navbar and then having the page content in an absolutely-positioned scrollable div below.</p>\n\n<p>That is, have HTML like this...</p>\n\n<pre><code>&lt;div class=\"static-navbar\"&gt;NAVBAR&lt;/div&gt;\n&lt;div class=\"scrollable-content\"&gt;\n  &lt;p&gt;Bla bla bla&lt;/p&gt;\n  &lt;p&gt;Yadda yadda yadda&lt;/p&gt;\n  &lt;p&gt;Mary had a little lamb&lt;/p&gt;\n  &lt;h2 id=\"stuff-i-want-to-link-to\"&gt;Stuff&lt;/h2&gt;\n  &lt;p&gt;More nonsense&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>... and CSS like this:</p>\n\n<pre><code>.static-navbar {\n  height: 100px;\n}\n.scrollable-content {\n  position: absolute;\n  top: 100px;\n  bottom: 0;\n  overflow-y: scroll;\n  width: 100%;\n}\n</code></pre>\n\n<p>This achieves the desired result in a straightforward, non-hacky way. The only difference in behaviour between this and some of the clever CSS hacks suggested above are that the scrollbar (in browsers that render one) will be attached to the content div rather than the whole height of the page. You may or may not consider this desirable.</p>\n\n<p><a href=\"http://jsfiddle.net/69dx1dec/\" rel=\"nofollow\">Here's a JSFiddle demonstrating this in action.</a></p>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 28920612, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}, {"body": "<p>This takes many elements from previous answers and combines into a tiny (194 bytes minified) anonymous jQuery function.  Adjust <em>fixedElementHeight</em> for the height of your menu or blocking element.</p>\n\n<pre><code>    (function($, window) {\n        var adjustAnchor = function() {\n\n            var $anchor = $(':target'),\n                    fixedElementHeight = 100;\n\n            if ($anchor.length &gt; 0) {\n\n                $('html, body')\n                    .stop()\n                    .animate({\n                        scrollTop: $anchor.offset().top - fixedElementHeight\n                    }, 200);\n\n            }\n\n        };\n\n        $(window).on('hashchange load', function() {\n            adjustAnchor();\n        });\n\n    })(jQuery, window);\n</code></pre>\n\n<p>If you don't like the animation, replace</p>\n\n<pre><code>$('html, body')\n     .stop()\n     .animate({\n         scrollTop: $anchor.offset().top - fixedElementHeight\n     }, 200);\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>window.scrollTo(0, $anchor.offset().top - fixedElementHeight);\n</code></pre>\n\n<p>Uglified version:</p>\n\n<pre><code> !function(o,n){var t=function(){var n=o(\":target\"),t=100;n.length&gt;0&amp;&amp;o(\"html, body\").stop().animate({scrollTop:n.offset().top-t},200)};o(n).on(\"hashchange load\",function(){t()})}(jQuery,window);\n</code></pre>\n", "title": "offsetting an html anchor to adjust for fixed header", "answer_id": 29853395, "question_id": 10732690, "tags": ["javascript", "html", "css", "anchor", "offset"]}], "link": "http://stackoverflow.com/questions/10732690/offsetting-an-html-anchor-to-adjust-for-fixed-header", "question_id": 10732690}, {"body": "<p>I see two issues with AngularJS application regarding search engines and SEO:</p>\n\n<p>1) What happens with custom tags? Do search engines ignore the whole content within those tags? i.e. suppose I have</p>\n\n<pre><code>&lt;custom&gt;\n  &lt;h1&gt;Hey, this title is important&lt;/h1&gt;\n&lt;/custom&gt;\n</code></pre>\n\n<p>would <code>&lt;h1&gt;</code> be indexed despite being inside custom tags?</p>\n\n<p><br></p>\n\n<p>2) Is there a way to avoid search engines of indexing {{}} binds literally? i.e.</p>\n\n<pre><code>&lt;h2&gt;{{title}}&lt;/h2&gt;\n</code></pre>\n\n<p>I know I could do something like</p>\n\n<pre><code>&lt;h2 ng-bind=\"title\"&gt;&lt;/h2&gt;\n</code></pre>\n\n<p>but what if I want to actually let the crawler \"see\" the title? Is server-side rendering the only solution?</p>\n", "title": "How do search engines deal with AngularJS applications?", "tags": ["html5", "angularjs", "seo", "search-engine", "google-search"], "answers": [{"body": "<p><strong>Update May 2014</strong></p>\n\n<p>Google crawlers <a href=\"http://googlewebmastercentral.blogspot.no/2014/05/understanding-web-pages-better.html\">now executes javascript</a> - you can use the <a href=\"https://www.google.com/webmasters/tools/home\">Google Webmaster Tools</a> to better understand how your sites are rendered by Google.  </p>\n\n<p><strong>Original answer</strong><br>\nIf you want to optimize your app for search engines there is unfortunately no way around serving a pre-rendered version to the crawler. You can read more about Google's recommendations for ajax and javascript-heavy sites <a href=\"https://developers.google.com/webmasters/ajax-crawling/docs/html-snapshot\">here</a>.</p>\n\n<p>If this is an option I'd recommend reading <a href=\"http://www.yearofmoo.com/2012/11/angularjs-and-seo.html\">this article</a> about how to do SEO for Angular with server-side rendering. </p>\n\n<p>I\u2019m not sure what the crawler does when it encounters custom tags.</p>\n", "title": "How do search engines deal with AngularJS applications?", "answer_id": 13521668, "question_id": 13499040, "tags": ["html5", "angularjs", "seo", "search-engine", "google-search"]}, {"body": "<p>You should really check out the tutorial on building an SEO-friendly AngularJS site on the year of moo blog. He walks you through all the steps outlined on Angular's documentation. <a href=\"http://www.yearofmoo.com/2012/11/angularjs-and-seo.html\">http://www.yearofmoo.com/2012/11/angularjs-and-seo.html</a></p>\n\n<p>Using this technique, the search engine sees the expanded HTML instead of the custom tags.</p>\n", "title": "How do search engines deal with AngularJS applications?", "answer_id": 13593841, "question_id": 13499040, "tags": ["html5", "angularjs", "seo", "search-engine", "google-search"]}, {"body": "<p>I wrote article how to make your angularjs app (under nginx server) searchable: <a href=\"http://senior-java-developer.com/html5angularjsnginx-crawlable-application/\">http://senior-java-developer.com/html5angularjsnginx-crawlable-application/</a></p>\n", "title": "How do search engines deal with AngularJS applications?", "answer_id": 17654486, "question_id": 13499040, "tags": ["html5", "angularjs", "seo", "search-engine", "google-search"]}, {"body": "<p>Angular's own website serves simplified content to search engines: <a href=\"http://docs.angularjs.org/?_escaped_fragment_=/tutorial/step_09\">http://docs.angularjs.org/?_escaped_fragment_=/tutorial/step_09</a></p>\n\n<p>Say your Angular app is consuming a Node.js/Express-driven JSON api, like <code>/api/path/to/resource</code>. Perhaps you could redirect any requests with <code>?_escaped_fragment_</code> to <code>/api/path/to/resource.html</code>, and use <a href=\"http://expressjs.com/api.html#res.format\">content negotiation</a> to render an HTML template of the content, rather than return the JSON data.</p>\n\n<p>The only thing is, your Angular routes would need to match 1:1 with your REST API.</p>\n\n<p><strong>EDIT</strong>: I'm realizing that this has the potential to really muddy up your REST api and I don't recommend doing it outside of very simple use-cases where it might be a natural fit.</p>\n\n<p>Instead, you can use an entirely different set of routes and controllers for your robot-friendly content. But then you're duplicating all of your AngularJS routes and controllers in Node/Express.</p>\n\n<p>I've settled on generating snapshots with a headless browser, even though I feel that's a little less-than-ideal.</p>\n", "title": "How do search engines deal with AngularJS applications?", "answer_id": 20110707, "question_id": 13499040, "tags": ["html5", "angularjs", "seo", "search-engine", "google-search"]}, {"body": "<p>Things have changed quite a bit since this question was asked. There are now options to let Google index your AngularJS site. The easiest option I found was to use <strong><a href=\"http://prerender.io\">http://prerender.io</a></strong> free service that will generate the crwalable pages for you and serve that to the search engines. It is supported on almost all server side web platforms. I have recently started using them and the support is excellent too. </p>\n\n<p><strong>I do not have any affiliation with them, this is coming from a happy user.</strong></p>\n", "title": "How do search engines deal with AngularJS applications?", "answer_id": 20222499, "question_id": 13499040, "tags": ["html5", "angularjs", "seo", "search-engine", "google-search"]}, {"body": "<h1>Let's get definitive about AngularJS and SEO</h1>\n\n<p>Google, Yahoo, Bing, and other search engines crawl the web in traditional ways using traditional crawlers. They run <em>robots</em> that crawl the HTML on web pages, collecting information along the way. They keep interesting words and look for other links to other pages (these links, the amount of them and the number of them come into play with SEO). </p>\n\n<h2>So why don't search engines deal with javascript sites?</h2>\n\n<p>The answer has to do with the fact that the search engine robots work through headless browsers and they most often do <em>not</em> have a javascript rendering engine to render the javascript of a page. This works for most pages as most static pages don't care about JavaScript rendering their page, as their content is already available.</p>\n\n<h2>What can be done about it?</h2>\n\n<p>Luckily, crawlers of the larger sites have started to implement a mechanism that allows us to make our JavaScript sites crawlable, but it <strong>requires us to implement a change to our site</strong>.</p>\n\n<p>If we change our <code>hashPrefix</code> to be <code>#!</code> instead of simply <code>#</code>, then modern search engines will change the request to use <code>_escaped_fragment_</code> instead of <code>#!</code>. (With HTML5 mode, i.e. where we have links without the hash prefix, we can implement this same feature by looking at the <code>User Agent</code> header in our backend).</p>\n\n<p>That is to say, instead of a request from a normal browser that looks like:</p>\n\n<p><code>http://www.ng-newsletter.com/#!/signup/page</code></p>\n\n<p>A search engine will search the page with:</p>\n\n<p><code>http://www.ng-newsletter.com/?_escaped_fragment_=/signup/page</code></p>\n\n<p>We can set the hash prefix of our Angular apps using a built-in method from <code>ngRoute</code>:</p>\n\n<pre><code>angular.module('myApp', [])\n.config(['$location', function($location) {\n  $location.hashPrefix('!');\n}]);\n</code></pre>\n\n<p>And, if we're using <code>html5Mode</code>, we will need to implement this using the meta tag:</p>\n\n<pre><code>&lt;meta name=\"fragment\" content=\"!\"&gt;\n</code></pre>\n\n<p>Reminder, we can set the <code>html5Mode()</code> with the <code>$location</code> service:</p>\n\n<pre><code>angular.module('myApp', [])\n.config(['$location', \nfunction($location) {\n  $location.html5Mode(true);\n}]);\n</code></pre>\n\n<h2>Handling the search engine</h2>\n\n<p>We have a lot of opportunities to determine how we'll deal with actually delivering content to search engines as static HTML. We can host a backend ourselves, we can use a service to host a back-end for us, we can use a proxy to deliver the content, etc. Let's look at a few options:</p>\n\n<h3>Self-hosted</h3>\n\n<p>We can write a service to handle dealing with crawling our own site using a headless browser, like phantomjs or zombiejs, taking a snapshot of the page with rendered data and storing it as HTML. Whenever we see the query string <code>?_escaped_fragment_</code> in a search request, we can deliver the static HTML snapshot we took of the page instead of the pre-rendered page through only JS. This requires us to have a backend that delivers our pages with conditional logic in the middle. We can use something like <a href=\"https://prerender.io/\">prerender.io's</a> backend as a starting point to run this ourselves. Of course, we still need to handle the proxying and the snippet handling, but it's a good start.</p>\n\n<h3>With a paid service</h3>\n\n<p>The easiest and the fastest way to get content into search engine is to use a service <a href=\"http://www.brombone.com/\">Brombone</a>, <a href=\"http://getseojs.com/\">seo.js</a>, <a href=\"http://www.seo4ajax.com/\">seo4ajax</a>, and <a href=\"https://prerender.io/\">prerender.io</a> are good examples of these that will host the above content rendering for you. This is a good option for the times when we don't want to deal with running a server/proxy. Also, it's usually super quick.</p>\n\n<p>For more information about Angular and SEO, we wrote an extensive tutorial on it at <a href=\"http://www.ng-newsletter.com/posts/serious-angular-seo.html\">http://www.ng-newsletter.com/posts/serious-angular-seo.html</a> <strong>and</strong> we detailed it even more in our book <strong>ng-book: The Complete Book on AngularJS</strong>. Check it out at <a href=\"https://www.ng-book.com/\">ng-book.com</a>.</p>\n", "title": "How do search engines deal with AngularJS applications?", "answer_id": 20766253, "question_id": 13499040, "tags": ["html5", "angularjs", "seo", "search-engine", "google-search"]}, {"body": "<p>Google's Crawlable Ajax Spec, as referenced in the other answers here, is basically the answer.</p>\n\n<p>If you're interested in how other search engines and social bots deal with the same issues I wrote up the state of art here: <a href=\"http://blog.ajaxsnapshots.com/2013/11/googles-crawlable-ajax-specification.html\">http://blog.ajaxsnapshots.com/2013/11/googles-crawlable-ajax-specification.html</a></p>\n\n<p>I work for a <a href=\"https://ajaxsnapshots.com\">https://ajaxsnapshots.com</a>, a company that implements the Crawlable Ajax Spec as a service - the information in that report is based on observations from our logs.</p>\n", "title": "How do search engines deal with AngularJS applications?", "answer_id": 21270765, "question_id": 13499040, "tags": ["html5", "angularjs", "seo", "search-engine", "google-search"]}, {"body": "<p><strong>The crawlers do not need a rich featured pretty styled gui, they only want to see the content</strong>, so you do not need to give them a snapshot of a page that has been built for humans.</p>\n\n<p>My solution: to <strong>give the crawler what the crawler wants</strong>:</p>\n\n<p>You must think of what do the crawler want, and give him only that.</p>\n\n<p>TIP don't mess with the back. Just add a little server-sided frontview using the same API</p>\n", "title": "How do search engines deal with AngularJS applications?", "answer_id": 21721307, "question_id": 13499040, "tags": ["html5", "angularjs", "seo", "search-engine", "google-search"]}, {"body": "<p>This has drastically changed.</p>\n\n<p><a href=\"http://searchengineland.com/bing-offers-recommendations-for-seo-friendly-ajax-suggests-html5-pushstate-152946\">http://searchengineland.com/bing-offers-recommendations-for-seo-friendly-ajax-suggests-html5-pushstate-152946</a></p>\n\n<p>If you use:\n$locationProvider.html5Mode(true);\nyou are set. </p>\n\n<p>No more rendering pages.</p>\n", "title": "How do search engines deal with AngularJS applications?", "answer_id": 21894105, "question_id": 13499040, "tags": ["html5", "angularjs", "seo", "search-engine", "google-search"]}, {"body": "<p>A good practice can be found here:</p>\n\n<p><a href=\"http://scotch.io/tutorials/javascript/angularjs-seo-with-prerender-io?_escaped_fragment_=tag\">http://scotch.io/tutorials/javascript/angularjs-seo-with-prerender-io?_escaped_fragment_=tag</a></p>\n", "title": "How do search engines deal with AngularJS applications?", "answer_id": 22437772, "question_id": 13499040, "tags": ["html5", "angularjs", "seo", "search-engine", "google-search"]}, {"body": "<h2>Use PushState and Precomposition</h2>\n\n<p>The current (2015) way to do this is using the JavaScript pushState method.</p>\n\n<p>PushState changes the URL in the top browser bar without reloading the page. Say you have a page containing tabs. The tabs hide and show content, and the content is inserted dynamically, either using AJAX or by simply setting display:none and display:block to hide and show the correct tab content.</p>\n\n<p>When the tabs are clicked, use pushState to update the url in the address bar. When the page is rendered, use the value in the address bar to determine which tab to show. Angular routing will do this for you automatically.</p>\n\n<h2>Precomposition</h2>\n\n<p>There are two ways to hit a PushState Single Page App (SPA)</p>\n\n<ol>\n<li>Via PushState, where the user clicks a PushState link and the content is AJAXed in.</li>\n<li>By hitting the URL directly.</li>\n</ol>\n\n<p>The initial hit on the site will involve hitting the URL directly. Subsequent hits will simply AJAX in content as the PushState updates the URL.</p>\n\n<p>Crawlers harvest links from a page then add them to a queue for later processing. This means that for a crawler, every hit on the server is a direct hit, they don't navigate via Pushstate.</p>\n\n<p>Precomposition bundles the initial payload into the first response from the server, possibly as a JSON object. This allows the Search Engine to render the page without executing the AJAX call.</p>\n\n<p>There is some evidence to suggest that Google might not execute AJAX requests. More on this here:</p>\n\n<p><a href=\"http://www.analog-ni.co/precomposing-a-spa-may-become-the-holy-grail-to-seo\">http://www.analog-ni.co/precomposing-a-spa-may-become-the-holy-grail-to-seo</a></p>\n\n<h2>Search Engines can read and execute JavaScript</h2>\n\n<p>Google has been able to parse JavaScript for some time now, it's why they originally developed Chrome, to act as a full featured headless browser for the Google spider. If a link has a valid href attribute, the new URL can be indexed. There's nothing more to do.</p>\n\n<p>If clicking a link in addition triggers a pushState call, the site can be navigated by the user via PushState.</p>\n\n<h2>Search Engine Support for PushState URLs</h2>\n\n<p>PushState is currently supported by Google and Bing.</p>\n\n<h3>Google</h3>\n\n<p>Here's Matt Cutts responding to Paul Irish's question about PushState for SEO:</p>\n\n<p><a href=\"http://youtu.be/yiAF9VdvRPw\">http://youtu.be/yiAF9VdvRPw</a></p>\n\n<p>Here is Google announcing full JavaScript support for the spider:</p>\n\n<p><a href=\"http://googlewebmastercentral.blogspot.de/2014/05/understanding-web-pages-better.html\">http://googlewebmastercentral.blogspot.de/2014/05/understanding-web-pages-better.html</a></p>\n\n<p>The upshot is that Google supports PushState and will index PushState URLs.</p>\n\n<p>See also Google webmaster tools' fetch as Googlebot. You will see your JavaScript (including Angular) is executed. </p>\n\n<h3>Bing</h3>\n\n<p>Here is Bing's announcement of support for pretty PushState URLs dated March 2013:</p>\n\n<p><a href=\"http://blogs.bing.com/webmaster/2013/03/21/search-engine-optimization-best-practices-for-ajax-urls/\">http://blogs.bing.com/webmaster/2013/03/21/search-engine-optimization-best-practices-for-ajax-urls/</a></p>\n\n<h2>Don't use HashBangs #!</h2>\n\n<p>Hashbang urls were an ugly stopgap requiring the developer to provide a pre-rendered version of the site at a special location. They still work, but you don't need to use them.</p>\n\n<p>Hashbang URLs look like this:</p>\n\n<p><code>domain.com/#!path/to/resource</code></p>\n\n<p>This would be paired with a metatag like this:</p>\n\n<p><code>&lt;meta name=\"fragment\" content=\"!\"&gt;</code></p>\n\n<p>Google will not index them in this form, but will instead pull a static version of the site from the _escaped_fragments_ URL and index that. </p>\n\n<p>Pushstate URLs look like any ordinary URL:</p>\n\n<p><code>domain.com/path/to/resource</code></p>\n\n<p>The difference is that Angular handles them for you by intercepting the change to document.location dealing with it in JavaScript.</p>\n\n<p>If you want to use PushState URLs (and you probably do) take out all the old hash style URLs and metatags and simply enable HTML5 mode in your config block.</p>\n\n<h2>Testing your site</h2>\n\n<p>Google Webmaster tools now contains a tool which will allow you to fetch a URL as google, and render JavaScript as Google renders it.</p>\n\n<p><a href=\"https://www.google.com/webmasters/tools/googlebot-fetch\">https://www.google.com/webmasters/tools/googlebot-fetch</a></p>\n\n<h2>Generating PushState URLs in Angular</h2>\n\n<p>To generate real URLs in Angular, rather than # prefixed ones, set HTML5 mode on your $locationProvider object.</p>\n\n<pre><code>$locationProvider.html5Mode(true);\n</code></pre>\n\n<h2>Server Side</h2>\n\n<p>Since you are using real URLs, you will need to ensure the same template (plus some precomposed content) gets shipped by your server for all valid URLs. How you do this will vary depending on your server architecture.</p>\n\n<h2>Sitemap</h2>\n\n<p>Your app may use unusual forms of navigation, for example hover or scroll. To ensure Google is able to drive your app, I would probably suggest creating a sitemap, a simple list of all the urls your app responds to. You can place this at the default location (/sitemap or /sitemap.xml), or tell Google about it using webmaster tools.</p>\n\n<p>It's a good idea to have a sitemap anyway.</p>\n\n<h2>Browser support</h2>\n\n<p>Pushstate works in IE10. In older browsers, Angular will automatically fall back to hash style URLs</p>\n\n<h2>A demo page</h2>\n\n<p>The following content is rendered using a pushstate URL with precomposition:</p>\n\n<p><a href=\"http://html5.gingerhost.com/london\">http://html5.gingerhost.com/london</a></p>\n\n<p>As can be verified, at <a href=\"https://www.google.co.uk/webhp?sourceid=chrome-instant&amp;ion=1&amp;espv=2&amp;ie=UTF-8#q=ginger+London&#39;s+ancient+core\">this link</a>, the content is indexed and is appearing in Google. </p>\n\n<h2>Serving 404 and 301 Header status codes</h2>\n\n<p>Because the search engine will always hit your server for every request, you can serve header status codes from your server and expect Google to see them.</p>\n", "title": "How do search engines deal with AngularJS applications?", "answer_id": 23245379, "question_id": 13499040, "tags": ["html5", "angularjs", "seo", "search-engine", "google-search"]}, {"body": "<p>Use something like PreRender, it makes static pages of your site so search engines can index it.</p>\n\n<p>Here you can find out for what platforms it is available: <a href=\"https://prerender.io/documentation/install-middleware#asp-net\" rel=\"nofollow\">https://prerender.io/documentation/install-middleware#asp-net</a></p>\n", "title": "How do search engines deal with AngularJS applications?", "answer_id": 28671681, "question_id": 13499040, "tags": ["html5", "angularjs", "seo", "search-engine", "google-search"]}, {"body": "<p>Crawlers (or bots) are designed to crawl HTML content of web pages but due to AJAX operations for asynchronous data fetching, this became a problem as it takes sometime to render page and show dynamic content on it. Similarly, <code>AngularJS</code> also use asynchronous model, which creates problem for Google crawlers.</p>\n\n<p>Some developers create basic html pages with real data and serve these pages from server side at the time of crawling. We can render same pages with <code>PhantomJS</code> on serve side which has <code>_escaped_fragment_</code> (Because Google looks for <code>#!</code> in our site urls and then takes everything after the <code>#!</code> and adds it in <code>_escaped_fragment_</code> query parameter). For more detail please read this <a href=\"http://www.tothenew.com/blog/angular-seo/\" rel=\"nofollow\">blog</a> .</p>\n", "title": "How do search engines deal with AngularJS applications?", "answer_id": 32948128, "question_id": 13499040, "tags": ["html5", "angularjs", "seo", "search-engine", "google-search"]}, {"body": "<p>As of now Google has changed their AJAX crawling proposal.</p>\n\n<blockquote>\n  <p><a href=\"http://googlewebmastercentral.blogspot.is/2015/10/deprecating-our-ajax-crawling-scheme.html\">Times have changed. Today, as long as you're not blocking Googlebot from crawling your JavaScript or CSS files, we are generally able to render and understand your web pages like modern browsers.</a></p>\n</blockquote>\n\n<p><em>tl;dr: [Google] are no longer recommending the AJAX crawling proposal [Google] made back in 2009.</em></p>\n", "title": "How do search engines deal with AngularJS applications?", "answer_id": 33145517, "question_id": 13499040, "tags": ["html5", "angularjs", "seo", "search-engine", "google-search"]}, {"body": "<p>I have found an elegant solution that would cover most of your bases. I wrote about it initially <a href=\"http://bnlconsulting.com/blog/dynamic-metadata-in-angularjs\" rel=\"nofollow\">here</a> and answered another similar StackOverflow question <a href=\"http://stackoverflow.com/a/33810531/4163426\">here</a> which references it.</p>\n\n<p>FYI this solution also includes hardcoded fallback tags in case Javascript isn't picked up by the crawler. I haven't explicitly outlined it, but it is worth mentioning that you should be activating HTML5 mode for proper URL support.</p>\n\n<p>Also note: these aren't the complete files, just the important parts of those that are relevant. If you need help writing the boilerplate for directives, services, etc. that can be found elsewhere. Anyway, here goes...</p>\n\n<p><strong>app.js</strong></p>\n\n<p>This is where you provide the custom metadata for each of your routes (title, description, etc.)</p>\n\n<pre><code>$routeProvider\n   .when('/', {\n       templateUrl: 'views/homepage.html',\n       controller: 'HomepageCtrl',\n       metadata: {\n           title: 'The Base Page Title',\n           description: 'The Base Page Description' }\n   })\n   .when('/about', {\n       templateUrl: 'views/about.html',\n       controller: 'AboutCtrl',\n       metadata: {\n           title: 'The About Page Title',\n           description: 'The About Page Description' }\n   })\n</code></pre>\n\n<p><strong>metadata-service.js</strong> (service)</p>\n\n<p>Sets the custom metadata options or use defaults as fallbacks.</p>\n\n<pre><code>var self = this;\n\n// Set custom options or use provided fallback (default) options\nself.loadMetadata = function(metadata) {\n  self.title = document.title = metadata.title || 'Fallback Title';\n  self.description = metadata.description || 'Fallback Description';\n  self.url = metadata.url || $location.absUrl();\n  self.image = metadata.image || 'fallbackimage.jpg';\n  self.ogpType = metadata.ogpType || 'website';\n  self.twitterCard = metadata.twitterCard || 'summary_large_image';\n  self.twitterSite = metadata.twitterSite || '@fallback_handle';\n};\n\n// Route change handler, sets the route's defined metadata\n$rootScope.$on('$routeChangeSuccess', function (event, newRoute) {\n  self.loadMetadata(newRoute.metadata);\n});\n</code></pre>\n\n<p><strong>metaproperty.js</strong> (directive)</p>\n\n<p>Packages the metadata service results for the view.</p>\n\n<pre><code>return {\n  restrict: 'A',\n  scope: {\n    metaproperty: '@'\n  },\n  link: function postLink(scope, element, attrs) {\n    scope.default = element.attr('content');\n    scope.metadata = metadataService;\n\n    // Watch for metadata changes and set content\n    scope.$watch('metadata', function (newVal, oldVal) {\n      setContent(newVal);\n    }, true);\n\n    // Set the content attribute with new metadataService value or back to the default\n    function setContent(metadata) {\n      var content = metadata[scope.metaproperty] || scope.default;\n      element.attr('content', content);\n    }\n\n    setContent(scope.metadata);\n  }\n};\n</code></pre>\n\n<p><strong>index.html</strong></p>\n\n<p>Complete with the hardcoded fallback tags mentioned earlier, for crawlers that can't pick up any Javascript.</p>\n\n<pre><code>&lt;head&gt;\n  &lt;title&gt;Fallback Title&lt;/title&gt;\n  &lt;meta name=\"description\" metaproperty=\"description\" content=\"Fallback Description\"&gt;\n\n  &lt;!-- Open Graph Protocol Tags --&gt;\n  &lt;meta property=\"og:url\" content=\"fallbackurl.com\" metaproperty=\"url\"&gt;\n  &lt;meta property=\"og:title\" content=\"Fallback Title\" metaproperty=\"title\"&gt;\n  &lt;meta property=\"og:description\" content=\"Fallback Description\" metaproperty=\"description\"&gt;\n  &lt;meta property=\"og:type\" content=\"website\" metaproperty=\"ogpType\"&gt;\n  &lt;meta property=\"og:image\" content=\"fallbackimage.jpg\" metaproperty=\"image\"&gt;\n\n  &lt;!-- Twitter Card Tags --&gt;\n  &lt;meta name=\"twitter:card\" content=\"summary_large_image\" metaproperty=\"twitterCard\"&gt;\n  &lt;meta name=\"twitter:title\" content=\"Fallback Title\" metaproperty=\"title\"&gt;\n  &lt;meta name=\"twitter:description\" content=\"Fallback Description\" metaproperty=\"description\"&gt;\n  &lt;meta name=\"twitter:site\" content=\"@fallback_handle\" metaproperty=\"twitterSite\"&gt;\n  &lt;meta name=\"twitter:image:src\" content=\"fallbackimage.jpg\" metaproperty=\"image\"&gt;\n&lt;/head&gt;\n</code></pre>\n\n<p>This should help dramatically with most search engine use cases. If you want fully dynamic rendering for social network crawlers (which are iffy on Javascript support), you'll still have to use one of the pre-rendering services mentioned in some of the other answers.</p>\n\n<p>Hope this helps!</p>\n", "title": "How do search engines deal with AngularJS applications?", "answer_id": 34295050, "question_id": 13499040, "tags": ["html5", "angularjs", "seo", "search-engine", "google-search"]}], "link": "http://stackoverflow.com/questions/13499040/how-do-search-engines-deal-with-angularjs-applications", "question_id": 13499040}, {"body": "<p>I assume the title is self explanatory. Just want to change the look of the Visual Studio 2012 not to show  menu title in all capital letters.</p>\n", "title": "How to disable all caps menu titles in Visual Studio", "tags": ["visual-studio-2012", "visual-studio-2013"], "answers": [{"body": "<p><a href=\"http://www.richard-banks.org/2012/06/how-to-prevent-visual-studio-2012-all.html\">Richard Banks posted</a> about a registry key for just such a tweak.</p>\n\n<h3>Visual Studio 2012 (Full)</h3>\n\n<pre><code>HKEY_CURRENT_USER\\Software\\Microsoft\\VisualStudio\\11.0\\General\nDWORD: SuppressUppercaseConversion\nValue: 1\n</code></pre>\n\n<p>In PowerShell, you can run this to set that registry key and the uppercase goes away.</p>\n\n<pre><code>Set-ItemProperty -Path HKCU:\\Software\\Microsoft\\VisualStudio\\11.0\\General -Name SuppressUppercaseConversion -Type DWord -Value 1\n</code></pre>\n\n<h3>Visual Studio Express 2012</h3>\n\n<p>The above registry key is not the one that will affect Visual Studio Express 2012 RC. A <a href=\"http://www.richard-banks.org/2012/06/how-to-prevent-visual-studio-2012-all.html#comment-510984742703194994\">comment by FormatC</a> showed up on Banks post about the key for Express. You can find that key mentioned in <a href=\"http://stackoverflow.com/a/10906509/48700\">Mike Gleason's answer</a> or run the following PowerShell command to set it.</p>\n\n<pre><code>Set-ItemProperty -Path HKCU:\\Software\\Microsoft\\VSWinExpress\\11.0\\General -Name SuppressUppercaseConversion -Type DWord -Value 1\n</code></pre>\n\n<h3>Visual Studio Express 2012 for Web</h3>\n\n<pre><code>Set-ItemProperty -Path HKCU:\\Software\\Microsoft\\VWDExpress\\11.0\\General -Name SuppressUppercaseConversion -Type DWord -Value 1\n</code></pre>\n\n<h3>Visual Studio 2013</h3>\n\n<p>Replace <code>11.0</code> with <code>12.0</code> in the registry keys above.</p>\n\n<h3>Visual Studio 2015 Developer Preview</h3>\n\n<p>Replace <code>11.0</code> with <code>14.0</code> in the registry keys above.</p>\n", "title": "How to disable all caps menu titles in Visual Studio", "answer_id": 10859562, "question_id": 10859173, "tags": ["visual-studio-2012", "visual-studio-2013"]}, {"body": "<p>For express use:</p>\n\n<pre><code>HKEY_CURRENT_USER\\Software\\Microsoft\\VSWinExpress\\11.0\\GeneralSuppressUppercaseConversion \n</code></pre>\n\n<p>Credit to <a href=\"http://www.richard-banks.org/2012/06/how-to-prevent-visual-studio-2012-all.html\">FormatC</a></p>\n", "title": "How to disable all caps menu titles in Visual Studio", "answer_id": 10906509, "question_id": 10859173, "tags": ["visual-studio-2012", "visual-studio-2013"]}, {"body": "<p>I have written an extension which will do this for you.</p>\n\n<p>You can download it from the Visual Studio Gallery:</p>\n\n<ul>\n<li><a href=\"http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8\">VSCommands for Visual Studio 2012</a></li>\n<li><a href=\"http://visualstudiogallery.msdn.microsoft.com/c6d1c265-7007-405c-a68b-5606af238ece\">VSCommands for Visual Studio 2013</a></li>\n</ul>\n\n<p>It can also hide main menu altogether and have it appear only on mouse over or alt key press (like in IE)</p>\n\n<p><img src=\"http://i.stack.imgur.com/1Lg14.png\" alt=\"enter image description here\">\n<img src=\"http://i.stack.imgur.com/woJ7m.png\" alt=\"enter image description here\">\n<img src=\"http://i.stack.imgur.com/ySGRw.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/zcbwx.png\" alt=\"enter image description here\"></p>\n", "title": "How to disable all caps menu titles in Visual Studio", "answer_id": 10937002, "question_id": 10859173, "tags": ["visual-studio-2012", "visual-studio-2013"]}, {"body": "<p>I have been using the following reg files to enable/disable the lowercasing in Visual Studio 2012 and Visual Studio 2013:</p>\n\n<p><a href=\"http://erwinmayer.com/dl/VS2012_ALLCAPS_Toggle.zip\" rel=\"nofollow\">http://erwinmayer.com/dl/VS2012_ALLCAPS_Toggle.zip</a>\n<a href=\"http://erwinmayer.com/dl/VS2013_ALLCAPS_Toggle.zip\" rel=\"nofollow\">http://erwinmayer.com/dl/VS2013_ALLCAPS_Toggle.zip</a></p>\n\n<p>Just double click on <code>VS201x_ALLCAPS_Disable.reg</code> inside the archive to disable all caps menu titles, and <code>VS201x_ALLCAPS_Enable.reg</code> to re-enable them.</p>\n\n<p>You can easily edit the reg files before with a text editor to see what they contain.</p>\n", "title": "How to disable all caps menu titles in Visual Studio", "answer_id": 12399732, "question_id": 10859173, "tags": ["visual-studio-2012", "visual-studio-2013"]}, {"body": "<p>And for</p>\n\n<p><strong>Visual Studio Express 2012 for Windows Desktop</strong></p>\n\n<pre><code>HKEY_CURRENT_USER\\Software\\Microsoft\\WDExpress\\11.0\\General\nDWORD: SuppressUppercaseConversion\nValue: 1\n</code></pre>\n\n<p>I guess the reason MS omitted any mention of Visual Studio from the keyname is that such a mention might help someone identify the key :)</p>\n", "title": "How to disable all caps menu titles in Visual Studio", "answer_id": 12451095, "question_id": 10859173, "tags": ["visual-studio-2012", "visual-studio-2013"]}, {"body": "<p>The VS Commands extension can do this and is one of the most popular on the gallery. Worth checking out!</p>\n\n<p><img src=\"http://i.stack.imgur.com/VsgNI.png\" alt=\"enter image description here\"></p>\n\n<p><a href=\"http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8?SRC=VSIDE\">http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8?SRC=VSIDE</a></p>\n", "title": "How to disable all caps menu titles in Visual Studio", "answer_id": 12826167, "question_id": 10859173, "tags": ["visual-studio-2012", "visual-studio-2013"]}, {"body": "<p>I think <strong>\"VSCommands for Visual Studio 2012\"</strong> is the best option for this.</p>\n\n<p>Grab this plugin from here: \n<a href=\"http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8\" rel=\"nofollow\">http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8</a></p>\n", "title": "How to disable all caps menu titles in Visual Studio", "answer_id": 20249971, "question_id": 10859173, "tags": ["visual-studio-2012", "visual-studio-2013"]}, {"body": "<p>For Visual Studio 2012 Express for Windows Phone, use</p>\n\n<pre><code>HKEY_CURRENT_USER\\Software\\Microsoft\\VPDExpress\\11.0\\General\\SuppressUppercaseConversion\n</code></pre>\n", "title": "How to disable all caps menu titles in Visual Studio", "answer_id": 20312539, "question_id": 10859173, "tags": ["visual-studio-2012", "visual-studio-2013"]}, {"body": "<p>After years Microsoft has changed their mind on this feature. As of Visual Studio 2013 Update 3 RC, an option has been added to change between mixed case and upper case: <em>Tools -> Options -> Environment -> General -> Turn off upper case in the menu bar</em><br>\nObviously this is not for VS 2012 but going forward this option will be there.</p>\n\n<p><a href=\"http://blogs.msdn.com/b/bharry/archive/2014/07/02/vs-tfs-2013-3-update-3-rc.aspx\">Here</a> is the notification from Brian Harry of Microsoft:</p>\n\n<blockquote>\n  <p>Mixed Case Menus \u2013 I know I\u2019m going to get some feedback on this one :)  This is a long standing request by a vocal portion of the VS user base since VS 2012 to change the \u201cALL CAPS\u201d menus.  In VS 2013 Update 3, we have added a Tools \u2013> Options setting to control whether you see ALL CAPS or Mixed Case.  The default is still ALL CAPS but, if you change it, it will persist across upgrades and will roam across your IDE instances using the VS Online roaming settings feature (if you log into VS so it knows who you are).</p>\n</blockquote>\n", "title": "How to disable all caps menu titles in Visual Studio", "answer_id": 24540971, "question_id": 10859173, "tags": ["visual-studio-2012", "visual-studio-2013"]}, {"body": "<p>Now that Visual Studio 2015 has changed the default back to Title Case, for those crazies like me who had gotten used to ALL CAPS, you can change it back by <strong>disabling</strong> the following option:</p>\n\n<ul>\n<li>Tools -> Options -> Environment -> General -> Apply title case styling to menu bar</li>\n</ul>\n", "title": "How to disable all caps menu titles in Visual Studio", "answer_id": 31565761, "question_id": 10859173, "tags": ["visual-studio-2012", "visual-studio-2013"]}, {"body": "<p><strong>Visual Studio 2015 Community Edition</strong> does not respond to the SuppressUppercaseConversion registry value.</p>\n\n<p>The answer is to <strong>enable</strong> the option boflynn identified:</p>\n\n<p>\u2022 <strong>Tools</strong> -> <strong>Options</strong> -> <strong>Environment</strong> -> <strong>General</strong> -> <strong>Apply title case styling to menu bar</strong></p>\n\n<p>In my case that setting was not on by default, perhaps since I ported my VS 2013 settings.</p>\n\n<p>-Noel</p>\n", "title": "How to disable all caps menu titles in Visual Studio", "answer_id": 32282475, "question_id": 10859173, "tags": ["visual-studio-2012", "visual-studio-2013"]}], "link": "http://stackoverflow.com/questions/10859173/how-to-disable-all-caps-menu-titles-in-visual-studio", "question_id": 10859173}, {"body": "<p>I'm updating an old app with an <code>AdBannerView</code> and when there is no ad, it slides off screen. When there is an ad it slides on screen. Basic stuff.</p>\n\n<p>Old style, I set the frame in an animation block.\nNew style, I have a <code>IBOutlet</code> to the constraint which determines the Y position, in this case it's distance from the bottom of the superview, and modify the constant.</p>\n\n<pre><code>- (void)moveBannerOffScreen {\n    [UIView animateWithDuration:5\n             animations:^{\n                          _addBannerDistanceFromBottomConstraint.constant = -32;\n                     }];\n    bannerIsVisible = FALSE;\n}\n\n- (void)moveBannerOnScreen {\n    [UIView animateWithDuration:5\n             animations:^{\n                         _addBannerDistanceFromBottomConstraint.constant = 0;\n             }];\n    bannerIsVisible = TRUE;\n}\n</code></pre>\n\n<p>And the banner moves, exactly as expected, but no animation.</p>\n\n<p><strong>UPDATE:</strong> I re-watched WWDC12 video \"<a href=\"https://developer.apple.com/devcenter/download.action?path=/videos/wwdc_2012__sd/session_228__best_practices_for_mastering_auto_layout.mov\">Best Practices for Mastering Auto Layout</a>\" which covers animation. It discusses how to update constraints using <code>CoreAnimation</code>. </p>\n\n<p><img src=\"http://i.stack.imgur.com/576mp.png\" alt=\"enter image description here\">\n<img src=\"http://i.stack.imgur.com/lr9mQ.png\" alt=\"enter image description here\"></p>\n\n<p>I've tried with the following code, but get the exact same results.</p>\n\n<pre><code>- (void)moveBannerOffScreen {\n    _addBannerDistanceFromBottomConstraint.constant = -32;\n    [UIView animateWithDuration:2\n                     animations:^{\n                         [self.view setNeedsLayout];\n                     }];\n    bannerIsVisible = FALSE;\n}\n\n- (void)moveBannerOnScreen {\n    _addBannerDistanceFromBottomConstraint.constant = 0;\n    [UIView animateWithDuration:2\n                     animations:^{\n                         [self.view setNeedsLayout];\n                     }];\n    bannerIsVisible = TRUE;\n}\n</code></pre>\n\n<p>On a side note, I have checked numerous times and this is being executed on the main thread. </p>\n", "title": "How do I animate constraint changes?", "tags": ["ios", "animation", "ios6", "autolayout"], "answers": [{"body": "<p>Two important notes:</p>\n\n<ol>\n<li><p>You need to call <code>layoutIfNeeded</code> within the animation block.  <a href=\"https://developer.apple.com/library/watchos/documentation/UserExperience/Conceptual/AutolayoutPG/AutoLayoutbyExample/AutoLayoutbyExample.html#//apple_ref/doc/uid/TP40010853-CH5-SW15\">Apple actually recommends</a> you call it once before the animation block to ensure that all pending layout operations have been completed  </p></li>\n<li><p>You need to call it specifically on the <strong>parent view</strong> (e.g. <code>self.view</code>), not the child view that has the constraints attached to it.  Doing so will update <em>all</em> constrained views, including animating other views that might be constrained to the view that you changed the constraint of (e.g. View B is attached to the bottom of View A and you just changed View A's top offset and you want View B to animate with it)</p></li>\n</ol>\n\n<p>Try this:</p>\n\n<pre><code>- (void)moveBannerOffScreen {\n    [self.view layoutIfNeeded];\n\n    _addBannerDistanceFromBottomConstraint.constant = -32;\n    [UIView animateWithDuration:5\n        animations:^{\n            [self.view layoutIfNeeded]; // Called on parent view\n        }];\n    bannerIsVisible = FALSE;\n}\n\n- (void)moveBannerOnScreen { \n    [self.view layoutIfNeeded];\n\n    _addBannerDistanceFromBottomConstraint.constant = 0;\n    [UIView animateWithDuration:5\n        animations:^{\n            [self.view layoutIfNeeded]; // Called on parent view\n        }];\n    bannerIsVisible = TRUE;\n}\n</code></pre>\n\n<p>And the <strong>Swift</strong> way....</p>\n\n<pre><code>_addBannerDistanceFromBottomConstraint.constant = 0\n\nUIView.animateWithDuration(5) {\n    self.view.layoutIfNeeded()\n}\n</code></pre>\n", "title": "How do I animate constraint changes?", "answer_id": 12664093, "question_id": 12622424, "tags": ["ios", "animation", "ios6", "autolayout"]}, {"body": "<p>There is an article talk about this:\n<a href=\"http://weblog.invasivecode.com/post/42362079291/auto-layout-and-core-animation-auto-layout-was\" rel=\"nofollow\">http://weblog.invasivecode.com/post/42362079291/auto-layout-and-core-animation-auto-layout-was</a></p>\n\n<p>In which, he coded like this:</p>\n\n<pre><code>- (void)handleTapFrom:(UIGestureRecognizer *)gesture {\n    if (_isVisible) {\n        _isVisible = NO;\n        self.topConstraint.constant = -44.;    // 1\n        [self.navbar setNeedsUpdateConstraints];  // 2\n        [UIView animateWithDuration:.3 animations:^{\n            [self.navbar layoutIfNeeded]; // 3\n        }];\n    } else {\n        _isVisible = YES;\n        self.topConstraint.constant = 0.;\n        [self.navbar setNeedsUpdateConstraints];\n        [UIView animateWithDuration:.3 animations:^{\n            [self.navbar layoutIfNeeded];\n        }];\n    }\n}\n</code></pre>\n\n<p>Hope it helps.</p>\n", "title": "How do I animate constraint changes?", "answer_id": 18781797, "question_id": 12622424, "tags": ["ios", "animation", "ios6", "autolayout"]}, {"body": "<pre><code>// Step 1, update your constraint\nself.myOutletToConstraint.constant = 50; // New height (for example)\n\n// Step 2, trigger animation\n[UIView animateWithDuration:2.0 animations:^{\n\n    // Step 3, call layoutIfNeeded on your animated view's parent\n    [self.view layoutIfNeeded];\n}];\n</code></pre>\n", "title": "How do I animate constraint changes?", "answer_id": 20745550, "question_id": 12622424, "tags": ["ios", "animation", "ios6", "autolayout"]}, {"body": "<p>I appreciate the answer provided, but I think it would be nice to take it a bit further.</p>\n\n<h3>The basic block animation from the documentation</h3>\n\n<pre><code>[containerView layoutIfNeeded]; // Ensures that all pending layout operations have been completed\n[UIView animateWithDuration:1.0 animations:^{\n     // Make all constraint changes here\n     [containerView layoutIfNeeded]; // Forces the layout of the subtree animation block and then captures all of the frame changes\n}];\n</code></pre>\n\n<p>but really this is a very simplistic scenario. What if I want to animate subview constraints via the  <code>updateConstraints</code> method?</p>\n\n<h3>An animation block that calls the subviews updateConstraints method</h3>\n\n<pre><code>[self.view layoutIfNeeded];\n[self.subView setNeedsUpdateConstraints];\n[self.subView updateConstraintsIfNeeded];\n[UIView animateWithDuration:1.0f delay:0.0f options:UIViewAnimationOptionLayoutSubviews animations:^{\n    [self.view layoutIfNeeded];\n} completion:nil];\n</code></pre>\n\n<p>The updateConstraints method is overridden in the UIView subclass and must call super at the end of the method.</p>\n\n<pre><code>- (void)updateConstraints\n{\n    // Update some constraints\n\n    [super updateConstraints];\n}\n</code></pre>\n\n<p><a href=\"https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/AutolayoutPG/\">The AutoLayout Guide</a> leaves much to be desired but it is worth reading. I myself am using this as part of a <code>UISwitch</code> that toggles a subview with a pair of <code>UITextField</code>s with a simple and subtle collapse animation (0.2 seconds long). The constraints for the subview are being handled in the UIView subclasses updateConstraints methods as described above.</p>\n", "title": "How do I animate constraint changes?", "answer_id": 21271978, "question_id": 12622424, "tags": ["ios", "animation", "ios6", "autolayout"]}, {"body": "<p>I was trying to animate Constraints and was not really easy to found a good explanation.</p>\n\n<p>What other answers are saying is totally true: you need to call <code>[self.view layoutIfNeeded];</code> inside  <code>animateWithDuration: animations:</code>. However, the other important point is to have pointers for every <code>NSLayoutConstraint</code> you want to animate.</p>\n\n<p><a href=\"https://github.com/GabrielMassana/AnimatedConstraint\" rel=\"nofollow\">I created an example in GitHub</a>.</p>\n", "title": "How do I animate constraint changes?", "answer_id": 27121762, "question_id": 12622424, "tags": ["ios", "animation", "ios6", "autolayout"]}, {"body": "<p>HI I found and example to animate views with constraints, may it can help others\n<a href=\"http://www.mindyourcode.com/ios/animate-nslayoutconstraint-change/\" rel=\"nofollow\">http://www.mindyourcode.com/ios/animate-nslayoutconstraint-change/</a></p>\n", "title": "How do I animate constraint changes?", "answer_id": 30658982, "question_id": 12622424, "tags": ["ios", "animation", "ios6", "autolayout"]}, {"body": "<p>Generally, you just need to update constraints and call <code>layoutIfNeeded</code> inside the animation block. This can be either changing the <code>.constant</code> property of an <code>NSLayoutConstraint</code>, adding remove constraints (iOS 7), or changing the <code>.active</code> property of constraints (iOS 8 &amp; 9).</p>\n\n<h3>Sample Code:</h3>\n\n<pre><code>[UIView animateWithDuration:0.3 animations:^{\n    // Move to right\n    self.leadingConstraint.active = false;\n    self.trailingConstraint.active = true;\n\n    // Move to bottom\n    self.topConstraint.active = false;\n    self.bottomConstraint.active = true;\n\n    // Make the animation happen\n    [self.view setNeedsLayout];\n    [self.view layoutIfNeeded];\n}];\n</code></pre>\n\n<h3>Sample Setup:</h3>\n\n<p><a href=\"http://i.stack.imgur.com/EuPOs.jpg\"><img src=\"http://i.stack.imgur.com/EuPOs.jpg\" alt=\"Xcode Project so sample animation project.\"></a></p>\n\n<h3>Controversy</h3>\n\n<p>There are some questions about whether the constraint should be changed <strong><em>before</em></strong> the animation block, or <strong><em>inside</em></strong> it (see previous answers).</p>\n\n<p>The following is a Twitter conversation between Martin Pilkington who teaches iOS, and Ken Ferry who wrote Auto Layout. Ken explains that though changing constants outside of the animation block <strong>may currently</strong> work, it's not safe and they should really be change <strong><em>inside</em></strong> the animation block.\n<a href=\"https://twitter.com/kongtomorrow/status/440627401018466305\">https://twitter.com/kongtomorrow/status/440627401018466305</a></p>\n\n<h3>Animation:</h3>\n\n<p><img src=\"http://i.stack.imgur.com/xakEC.gif\" width=\"250\" /></p>\n\n<h3>Sample Project</h3>\n\n<p>Here's a simple project showing how a view can be animated. It's using Objective C and animates the view by changing the <code>.active</code> property of several constraints.\n<a href=\"https://github.com/shepting/SampleAutoLayoutAnimation\">https://github.com/shepting/SampleAutoLayoutAnimation</a></p>\n", "title": "How do I animate constraint changes?", "answer_id": 33684018, "question_id": 12622424, "tags": ["ios", "animation", "ios6", "autolayout"]}, {"body": "<h2>Storyboard, Code, Tips and a few Gotchas</h2>\n\n<p>The other answers are just fine but this one highlights a few fairly important gotchas of animating constraints using a recent example. I went through a lot of variations before I realized the following:</p>\n\n<p>Make the constraints you want to target into Class variables to hold a strong reference. In Swift I used lazy variables:</p>\n\n<pre><code>lazy var centerYInflection:NSLayoutConstraint = {\n       let temp =  self.view.constraints.filter({ $0.firstItem is MNGStarRating }).filter ( { $0.secondItem is UIWebView }).filter({ $0.firstAttribute == .CenterY }).first\n        return temp!\n}()\n</code></pre>\n\n<p>After some experimentation I noted that one MUST obtain the constraint from the view <strong>ABOVE</strong> (aka the superview) the two views where the constraint is defined. In the example below (both MNGStarRating and UIWebView are the two types of items I am creating a constraint between, and they are subviews within self.view).</p>\n\n<p><strong>Filter Chaining</strong></p>\n\n<p>I take advantage of Swift's filter method to separate the desired constraint that will serve as the inflection point. One could also get much more complicated but filter does a nice job here.</p>\n\n<p><strong>Animating Constraints Using Swift</strong></p>\n\n<blockquote>\n  <p>Nota Bene - This example is the storyboard/code solution and assumes\n  one has made default constraints in the storyboard. One can then\n  animate the changes using code.</p>\n</blockquote>\n\n<p>Assuming you create a property to filter with accurate criteria and get to a specific inflection point for your animation (of course you could also filter for an array and loop through if you need multiple constraints):</p>\n\n<pre><code>lazy var centerYInflection:NSLayoutConstraint = {\n    let temp =  self.view.constraints.filter({ $0.firstItem is MNGStarRating }).filter ( { $0.secondItem is UIWebView }).filter({ $0.firstAttribute == .CenterY }).first\n    return temp!\n}()\n</code></pre>\n\n<p>....</p>\n\n<p>Sometime later...</p>\n\n<pre><code>@IBAction func toggleRatingView (sender:AnyObject){\n\n    let aPointAboveScene = -(max(UIScreen.mainScreen().bounds.width,UIScreen.mainScreen().bounds.height) * 2.0)\n\n    self.view.layoutIfNeeded()\n\n\n    //Use any animation you want, I like the bounce in springVelocity...\n    UIView.animateWithDuration(1.0, delay: 0.0, usingSpringWithDamping: 0.3, initialSpringVelocity: 0.75, options: [.CurveEaseOut], animations: { () -&gt; Void in\n\n        //I use the frames to determine if the view is on-screen\n        if CGRectContainsRect(self.view.frame, self.ratingView.frame) {\n\n            //in frame ~ animate away\n            //I play a sound to give the animation some life\n\n            self.centerYInflection.constant = aPointAboveScene\n            self.centerYInflection.priority = UILayoutPriority(950)\n\n        } else {\n\n            //I play a different sound just to keep the user engaged\n            //out of frame ~ animate into scene\n            self.centerYInflection.constant = 0\n            self.centerYInflection.priority = UILayoutPriority(950)\n            self.view.setNeedsLayout()\n            self.view.layoutIfNeeded()\n         }) { (success) -&gt; Void in\n\n            //do something else\n\n        }\n    }\n}\n</code></pre>\n\n<h2>The many wrong turns</h2>\n\n<p>These notes are really a set of tips that I wrote for myself. I did all the don'ts personally and painfully. Hopefully this guide can spare others.</p>\n\n<ol>\n<li><p>Watch out for zPositioning. Sometimes when nothing is apparently\nhappening, you should hide some of the other views or use the view\ndebugger to locate your animated view. I've even found cases where a User Defined Runtime\nAttribute was lost in a storyboard's xml and led to the animated\nview being covered (while working).</p></li>\n<li><p>Always take a minute to read the documentation (new and old), Quick\nHelp, and headers. Apple keeps making a lot of changes to better\nmanage AutoLayout constraints (see stack views). Or at least the <a href=\"https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/AutolayoutPG/LayoutUsingStackViews.html#//apple_ref/doc/uid/TP40010853-CH11-SW1\" rel=\"nofollow\">AutoLayout Cookbook</a>. Keep in mind that sometimes the best solutions are in the older documentation/videos.</p></li>\n<li><p>Play around with the values in the animation and consider using\nother animateWithDuration variants.</p></li>\n<li><p>Don't hardcode specific layout values as criteria for determining\nchanges to other constants, instead use values that allow you to\ndetermine the location of the view. <code>CGRectContainsRect</code> is one\nexample</p></li>\n<li>If needed, don't hesitate to use the layout margins associated with\na view participating in the constraint definition \n<code>let viewMargins = self.webview.layoutMarginsGuide</code>: is on example</li>\n<li>Don't do work you don't have to do, all views with constraints on the\nstoryboard have constraints attached to the property\nself.viewName.constraints</li>\n<li>Change your priorities for any constraints to less than 1000. I set\nmine to 250 (low) or 750 (high) on the storyboard; (if you try to change a 1000 priority to anything in code then the app will crash because 1000 is required)</li>\n<li>Consider not immediately trying to use activateConstraints and\ndeactivateConstraints (they have their place but when just learning or if you are using a storyboard using these probably means your doing too much ~ they do have a place though as seen below)</li>\n<li>Consider not using addConstraints / removeConstraints unless you are\nreally adding a new constraint in code. I found that most times I\nlayout the views in the storyboard with desired constraints (placing\nthe view offscreen), then in code, I  animate the constraints previously created in the storyboard to move the view around.</li>\n<li>I spent a lot of wasted time building up constraints with the new\nNSAnchorLayout class and subclasses. These work just fine but it\ntook me a while to realize that all the constraints that I needed\nalready existed in the storyboard. If you build constraints in code\nthen most certainly use this method to aggregate your constraints:</li>\n</ol>\n\n<p><strong>Quick Sample Of Solutions to AVOID when using Storyboards</strong></p>\n\n<pre><code>private var _nc:[NSLayoutConstraint] = []\n    lazy var newConstraints:[NSLayoutConstraint] = {\n\n        if !(self._nc.isEmpty) {\n            return self._nc\n        }\n\n        let viewMargins = self.webview.layoutMarginsGuide\n        let minimumScreenWidth = min(UIScreen.mainScreen().bounds.width,UIScreen.mainScreen().bounds.height)\n\n        let centerY = self.ratingView.centerYAnchor.constraintEqualToAnchor(self.webview.centerYAnchor)\n        centerY.constant = -1000.0\n        centerY.priority = (950)\n        let centerX =  self.ratingView.centerXAnchor.constraintEqualToAnchor(self.webview.centerXAnchor)\n        centerX.priority = (950)\n\n        if let buttonConstraints = self.originalRatingViewConstraints?.filter({\n\n            ($0.firstItem is UIButton || $0.secondItem is UIButton )\n        }) {\n            self._nc.appendContentsOf(buttonConstraints)\n\n        }\n\n        self._nc.append( centerY)\n        self._nc.append( centerX)\n\n        self._nc.append (self.ratingView.leadingAnchor.constraintEqualToAnchor(viewMargins.leadingAnchor, constant: 10.0))\n        self._nc.append (self.ratingView.trailingAnchor.constraintEqualToAnchor(viewMargins.trailingAnchor, constant: 10.0))\n        self._nc.append (self.ratingView.widthAnchor.constraintEqualToConstant((minimumScreenWidth - 20.0)))\n        self._nc.append (self.ratingView.heightAnchor.constraintEqualToConstant(200.0))\n\n        return self._nc\n    }()\n</code></pre>\n\n<p>If you forget one of these tips or the more simple ones such as where to add the layoutIfNeeded, most likely nothing will happen: In which case you may have a half baked solution like this:</p>\n\n<blockquote>\n  <p>NB - Take a moment to read the AutoLayout Section Below and the\n  original guide. There is a way to use these techniques to supplement\n  your Dynamic Animators.</p>\n</blockquote>\n\n<pre><code>UIView.animateWithDuration(1.0, delay: 0.0, usingSpringWithDamping: 0.3, initialSpringVelocity: 1.0, options: [.CurveEaseOut], animations: { () -&gt; Void in\n\n            //\n            if self.starTopInflectionPoint.constant &lt; 0  {\n                //-3000\n                //offscreen\n                self.starTopInflectionPoint.constant = self.navigationController?.navigationBar.bounds.height ?? 0\n                self.changeConstraintPriority([self.starTopInflectionPoint], value: UILayoutPriority(950), forView: self.ratingView)\n\n            } else {\n\n                self.starTopInflectionPoint.constant = -3000\n                 self.changeConstraintPriority([self.starTopInflectionPoint], value: UILayoutPriority(950), forView: self.ratingView)\n            }\n\n        }) { (success) -&gt; Void in\n\n            //do something else\n        }\n\n    }\n</code></pre>\n\n<p>Snippet from the AutoLayout Guide (note the second snippet is for using OS X). <strong>BTW - This is no longer in the current guide as far as I can see.</strong>  The preferred techniques continue to evolve.</p>\n\n<p><strong>Animating Changes Made by Auto Layout</strong></p>\n\n<p>If you need full control over animating changes made by Auto Layout, you must make your constraint changes programmatically. The basic concept is the same for both iOS and OS X, but there are a few minor differences.</p>\n\n<p>In an iOS app, your code would look something like the following:</p>\n\n<pre><code>[containerView layoutIfNeeded]; // Ensures that all pending layout operations have been completed\n[UIView animateWithDuration:1.0 animations:^{\n     // Make all constraint changes here\n     [containerView layoutIfNeeded]; // Forces the layout of the subtree animation block and then captures all of the frame changes\n}];\n</code></pre>\n\n<p>In OS X, use the following code when using layer-backed animations:</p>\n\n<pre><code>[containterView layoutIfNeeded];\nNSAnimationContext runAnimationGroup:^(NSAnimationContext *context) {\n     [context setAllowsImplicitAnimation: YES];\n     // Make all constraint changes here\n     [containerView layoutIfNeeded];\n}];\nWhen you aren\u2019t using layer-backed animations, you must animate the constant using the constraint\u2019s animator:\n\n[[constraint animator] setConstant:42];\n</code></pre>\n\n<p>For those who learn better visually check out this early <a href=\"https://developer.apple.com/videos/play/wwdc2012-232/\" rel=\"nofollow\">video from Apple</a>.</p>\n\n<h2>Pay Close Attention</h2>\n\n<p>Often in documentation there are small notes or pieces of code that lead to bigger ideas. For example attaching auto layout constraints to dynamic animators is a big idea.</p>\n\n<p><del>Good Luck and May the Force be with you.</del></p>\n", "title": "How do I animate constraint changes?", "answer_id": 34214911, "question_id": 12622424, "tags": ["ios", "animation", "ios6", "autolayout"]}, {"body": "<p>In the context of constraint animation, I would like to mention a specific situation where I animated a constraint immediately within a keyboard_opened notification. </p>\n\n<p>Constraint defined a top space from a textfield to top of the container. Upon keyboard opening, I just divide the constant by 2.</p>\n\n<p>I was unable to achieve a conistent smooth constraint animation directly within the keyboard notification. About half the times view would just jump to its new position - without animating.</p>\n\n<p>It occured to me there might be some additional layouting happening as result of keyboard opening. \nAdding a simple dispatch_after block with a 10ms delay made the animation run every time - no jumping.</p>\n", "title": "How do I animate constraint changes?", "answer_id": 36651711, "question_id": 12622424, "tags": ["ios", "animation", "ios6", "autolayout"]}, {"body": "<p>Swift solution:</p>\n\n<pre><code>yourConstraint.constant = 50\nUIView.animateWithDuration(1, animations: yourView.layoutIfNeeded)\n</code></pre>\n", "title": "How do I animate constraint changes?", "answer_id": 38891421, "question_id": 12622424, "tags": ["ios", "animation", "ios6", "autolayout"]}], "link": "http://stackoverflow.com/questions/12622424/how-do-i-animate-constraint-changes", "question_id": 12622424}, {"body": "<p>Is it possible to construct a snippet of code in <a href=\"http://en.wikipedia.org/wiki/Java_%28programming_language%29\">Java</a> that would make a hypothetical <code>java.lang.ChuckNorrisException</code> uncatchable?</p>\n\n<p>Thoughts that came to mind are using for example interceptors or <a href=\"http://en.wikipedia.org/wiki/Aspect-oriented_programming\">aspect-oriented programming</a>.</p>\n", "title": "Uncatchable ChuckNorrisException", "tags": ["java", "exception", "exception-handling", "aop"], "answers": [{"body": "<p>Any code can catch Throwable. So no, whatever exception you create is going to be a subclass of Throwable and will be subject to being caught. </p>\n", "title": "Uncatchable ChuckNorrisException", "answer_id": 13883239, "question_id": 13883166, "tags": ["java", "exception", "exception-handling", "aop"]}, {"body": "<p>No. All exceptions in Java must subclass <code>java.lang.Throwable</code>, and although it may not be good practice, you can catch every type of exception like so:</p>\n\n<pre><code>try {\n    //Stuff\n} catch ( Throwable T ){\n    //Doesn't matter what it was, I caught it.\n}\n</code></pre>\n\n<p>See the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html\" rel=\"nofollow\" title=\"Throwable\">java.lang.Throwable</a> documentation for more information.</p>\n\n<p>If you're trying to avoid <a href=\"http://en.wikipedia.org/wiki/Exception_handling#Checked_exceptions\" rel=\"nofollow\">checked exceptions</a> (ones that must be explicitly handled) then you will want to subclass Error, or RuntimeException.</p>\n", "title": "Uncatchable ChuckNorrisException", "answer_id": 13883244, "question_id": 13883166, "tags": ["java", "exception", "exception-handling", "aop"]}, {"body": "<p>With such an exception it would obviously be mandatory to use a <code>System.exit(Integer.MIN_VALUE);</code> from the constructor because this is what would happen if you threw such an exception ;)</p>\n", "title": "Uncatchable ChuckNorrisException", "answer_id": 13883318, "question_id": 13883166, "tags": ["java", "exception", "exception-handling", "aop"]}, {"body": "<p>Any exception you throw has to extend Throwable, so it can be always caught. So answer is no.</p>\n\n<p>If you want to make it difficult to handle, you can override methods <code>getCause(), getMessage()</code>, <code>getStackTrace()</code>, <code>toString()</code> to throw another <code>java.lang.ChuckNorrisException</code>.</p>\n", "title": "Uncatchable ChuckNorrisException", "answer_id": 13883349, "question_id": 13883166, "tags": ["java", "exception", "exception-handling", "aop"]}, {"body": "<p>I haven't tried this, so I don't know if the <a href=\"http://en.wikipedia.org/wiki/Java_virtual_machine\">JVM</a> would restrict something like this, but maybe you could compile code which throws <code>ChuckNorrisException</code>, but at runtime provide a class definition of <code>ChuckNorrisException</code> which <em>does not extend Throwable</em>.</p>\n\n<p>UPDATE:</p>\n\n<p>It doesn't work. It generates a verifier error:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.VerifyError: (class: TestThrow, method: ma\\\nin signature: ([Ljava/lang/String;)V) Can only throw Throwable objects\nCould not find the main class: TestThrow.  Program will exit.\n</code></pre>\n\n<p>UPDATE 2:</p>\n\n<p>Actually, you can get this to work if you disable the byte code verifier! (<code>-Xverify:none</code>)</p>\n\n<p>UPDATE 3:</p>\n\n<p>For those following from home, here is the full script:</p>\n\n<p>Create the following classes:</p>\n\n<pre><code>public class ChuckNorrisException\n    extends RuntimeException // &lt;- Comment out this line on second compilation\n{\n    public ChuckNorrisException() { }\n}\n\npublic class TestVillain {\n    public static void main(String[] args) {\n        try {\n            throw new ChuckNorrisException();\n        }\n        catch(Throwable t) {\n            System.out.println(\"Gotcha!\");\n        }\n        finally {\n            System.out.println(\"The end.\");\n        }\n    }\n}\n</code></pre>\n\n<p>Compile classes:</p>\n\n<pre><code>javac -cp . TestVillain.java ChuckNorrisException.java\n</code></pre>\n\n<p>Run:</p>\n\n<pre><code>java -cp . TestVillain\nGotcha!\nThe end.\n</code></pre>\n\n<p>Comment out \"extends RuntimeException\" and <em>recompile <code>ChuckNorrisException.java</code> only</em> :</p>\n\n<pre><code>javac -cp . ChuckNorrisException.java\n</code></pre>\n\n<p>Run:</p>\n\n<pre><code>java -cp . TestVillain\nException in thread \"main\" java.lang.VerifyError: (class: TestVillain, method: main signature: ([Ljava/lang/String;)V) Can only throw Throwable objects\nCould not find the main class: TestVillain.  Program will exit.\n</code></pre>\n\n<p>Run without verification:</p>\n\n<pre><code>java -Xverify:none -cp . TestVillain\nThe end.\nException in thread \"main\"\n</code></pre>\n", "title": "Uncatchable ChuckNorrisException", "answer_id": 13883510, "question_id": 13883166, "tags": ["java", "exception", "exception-handling", "aop"]}, {"body": "<p>In the constructor you could start a thread which repeatedly calls <code>originalThread.stop (ChuckNorisException.this)</code> </p>\n\n<p>The thread could catch the exception repeatedly but would keep throwing it until it dies.</p>\n", "title": "Uncatchable ChuckNorrisException", "answer_id": 13886113, "question_id": 13883166, "tags": ["java", "exception", "exception-handling", "aop"]}, {"body": "<p>You can keep ChuckNorris internal or private and encapsulate him or swollow him...</p>\n\n<p><code>try { doChuckAction(); } catch(ChuckNorrisException cne) { /*do something else*/ }</code></p>\n", "title": "Uncatchable ChuckNorrisException", "answer_id": 13889356, "question_id": 13883166, "tags": ["java", "exception", "exception-handling", "aop"]}, {"body": "<p>The only <code>ChuckNorrisException</code>s in Java should be <code>OutOfMemoryError</code> and <code>StackOverflowError</code>.</p>\n\n<p>You can actually \"catch\" them in the means that a <code>catch(OutOfMemoryError ex)</code> will execute in case the exception is thrown, but that block will automatically rethrow the exception to the caller.</p>\n\n<p>I don't think that <code>public class ChuckNorrisError extends Error</code> does the trick but you could give it a try. I found no documentation about extending <code>Error</code></p>\n", "title": "Uncatchable ChuckNorrisException", "answer_id": 13891979, "question_id": 13883166, "tags": ["java", "exception", "exception-handling", "aop"]}, {"body": "<p>After having pondered this, I have successfully created an uncatchable exception. I chose to name it <code>JulesWinnfield</code>, however, rather than Chuck, because it is one mushroom-cloud-laying-mother-exception. Furthermore, it might not be exactly what you had in mind, but it certainly can't be caught. Observe:</p>\n\n<pre><code>public static class JulesWinnfield extends Exception\n{\n    JulesWinnfield()\n    {\n        System.err.println(\"Say 'What' again! I dare you! I double dare you!\");\n        System.exit(25-17); // And you shall know I am the LORD\n    }\n}\n\n\npublic static void main(String[] args)\n{       \n    try\n    {\n        throw new JulesWinnfield();\n    } \n    catch(JulesWinnfield jw)\n    {\n        System.out.println(\"There's a word for that Jules - a bum\");\n    }\n}\n</code></pre>\n\n<p><em>Et voila!</em> Uncaught exception.</p>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>run:</p>\n  \n  <p>Say 'What' again! I dare you! I double dare you! </p>\n  \n  <p>Java Result: 8</p>\n  \n  <p>BUILD SUCCESSFUL (total time: 0 seconds)</p>\n</blockquote>\n\n<p>When I have a little more time, I'll see if I can't come up with something else, as well.</p>\n\n<p>Also, check this out:</p>\n\n<pre><code>public static class JulesWinnfield extends Exception\n{\n    JulesWinnfield() throws JulesWinnfield, VincentVega\n    {\n        throw new VincentVega();\n    }\n}\n\npublic static class VincentVega extends Exception\n{\n    VincentVega() throws JulesWinnfield, VincentVega\n    {\n        throw new JulesWinnfield();\n    }\n}\n\n\npublic static void main(String[] args) throws VincentVega\n{\n\n    try\n    {\n        throw new JulesWinnfield();\n    }\n    catch(JulesWinnfield jw)\n    {\n\n    }\n    catch(VincentVega vv)\n    {\n\n    }\n}\n</code></pre>\n\n<p>Causes a stack overflow - again, exceptions remain uncaught.</p>\n", "title": "Uncatchable ChuckNorrisException", "answer_id": 13892084, "question_id": 13883166, "tags": ["java", "exception", "exception-handling", "aop"]}, {"body": "<pre><code>public class ChuckNorrisException extends Exception {\n    public ChuckNorrisException() {\n        System.exit(1);\n    }\n}\n</code></pre>\n\n<p>(Granted, <em>technically</em> this exception is never actually thrown, but a proper <code>ChuckNorrisException</code> can't be thrown -- it throws you first.)</p>\n", "title": "Uncatchable ChuckNorrisException", "answer_id": 13895207, "question_id": 13883166, "tags": ["java", "exception", "exception-handling", "aop"]}, {"body": "<p>Two fundamental problems with exception handling in Java are that it uses the type of an exception to indicate whether action should be taken based upon it, and that anything which takes action based upon an exception (i.e. \"catch\"es it) is presumed to resolve the underlying condition.  It would be useful to have a means by which an exception object could decide which handlers should execute, and whether the handlers that have executed so far have cleaned things up enough for the present method to satisfy its exit conditions.  While this could be used to make \"uncatchable\" exceptions, two bigger uses would be to (1) make exceptions which will only be considered handled when they're caught by code that actually knows how to deal with them, and (2) allow for sensible handling of exceptions which occur in a <code>finally</code> block (if a <code>FooException</code> during a <code>finally</code> block during the unwinding of a <code>BarException</code>, both exceptions should propagate up the call stack; both should be catchable, but unwinding should continue until both have been caught).  Unfortunately, I don't think there would be any way to make existing exception-handling code work that way without breaking things.</p>\n", "title": "Uncatchable ChuckNorrisException", "answer_id": 13897317, "question_id": 13883166, "tags": ["java", "exception", "exception-handling", "aop"]}, {"body": "<p><code>Is it possible to construct a snippet of code in java that would make a hypothetical java.lang.ChuckNorrisException uncatchable?</code></p>\n\n<p>Yes, and here's the answer: Design your <code>java.lang.ChuckNorrisException</code> such that it is not an instance of <code>java.lang.Throwable</code>. Why? An unthrowable object is uncatchable by definition because you can never catch something that can never be thrown.</p>\n", "title": "Uncatchable ChuckNorrisException", "answer_id": 13928874, "question_id": 13883166, "tags": ["java", "exception", "exception-handling", "aop"]}, {"body": "<p>My answer is based on @jtahlborn's idea, but it's a fully working <a href=\"http://en.wikipedia.org/wiki/Java_%28programming_language%29\">Java</a> program, that can be packaged into a <a href=\"http://en.wikipedia.org/wiki/JAR_%28file_format%29\">JAR</a> file and even deployed to your favorite application server as a part of a <a href=\"http://en.wikipedia.org/wiki/Web_application\">web application</a>.</p>\n\n<p>First of all, let's define <code>ChuckNorrisException</code> class so that it doesn't crash JVM from the beginning (Chuck really loves crashing JVMs BTW :)</p>\n\n<pre><code>package chuck;\n\nimport java.io.PrintStream;\nimport java.io.PrintWriter;\n\npublic class ChuckNorrisException extends Exception {\n\n    public ChuckNorrisException() {\n    }\n\n    @Override\n    public Throwable getCause() {\n        return null;\n    }\n\n    @Override\n    public String getMessage() {\n        return toString();\n    }\n\n    @Override\n    public void printStackTrace(PrintWriter s) {\n        super.printStackTrace(s);\n    }\n\n    @Override\n    public void printStackTrace(PrintStream s) {\n        super.printStackTrace(s);\n    }\n}\n</code></pre>\n\n<p>Now goes <code>Expendables</code> class to construct it:</p>\n\n<pre><code>package chuck;\n\nimport javassist.*;\n\npublic class Expendables {\n\n    private static Class clz;\n\n    public static ChuckNorrisException getChuck() {\n        try {\n            if (clz == null) {\n                ClassPool pool = ClassPool.getDefault();\n                CtClass cc = pool.get(\"chuck.ChuckNorrisException\");\n                cc.setSuperclass(pool.get(\"java.lang.Object\"));\n                clz = cc.toClass();\n            }\n            return (ChuckNorrisException)clz.newInstance();\n        } catch (Exception ex) {\n            throw new RuntimeException(ex);\n        }\n    }\n}\n</code></pre>\n\n<p>And finally the <code>Main</code> class to kick some butt:</p>\n\n<pre><code>package chuck;\n\npublic class Main {\n\n    public void roundhouseKick() throws Exception {\n        throw Expendables.getChuck();\n    }\n\n    public void foo() {\n        try {\n            roundhouseKick();\n        } catch (Throwable ex) {\n            System.out.println(\"Caught \" + ex.toString());\n        }\n    }\n\n    public static void main(String[] args) {\n        try {\n            System.out.println(\"before\");\n            new Main().foo();\n            System.out.println(\"after\");\n        } finally {\n            System.out.println(\"finally\");\n        }\n    }\n}\n</code></pre>\n\n<p>Compile and run it with following command:</p>\n\n<pre><code>java -Xverify:none -cp .:&lt;path_to_javassist-3.9.0.GA.jar&gt; chuck.Main\n</code></pre>\n\n<p>You will get following output:</p>\n\n<pre><code>before\nfinally\n</code></pre>\n\n<p>No surprise - it's a roundhouse kick after all :)</p>\n", "title": "Uncatchable ChuckNorrisException", "answer_id": 13942854, "question_id": 13883166, "tags": ["java", "exception", "exception-handling", "aop"]}, {"body": "<p>A variant on the theme is the surprising fact that you can throw undeclared checked exceptions from Java code. Since it is not declared in the methods signature, the compiler won't let you catch the exception itself, though you can catch it as java.lang.Exception.</p>\n\n<p>Here's a helper class that lets you throw anything, declared or not:</p>\n\n<pre><code>public class SneakyThrow {\n  public static RuntimeException sneak(Throwable t) {\n    throw SneakyThrow.&lt;RuntimeException&gt; throwGivenThrowable(t);\n  }\n\n  private static &lt;T extends Throwable&gt; RuntimeException throwGivenThrowable(Throwable t) throws T {\n    throw (T) t;\n  }\n}\n</code></pre>\n\n<p>Now <code>throw SneakyThrow.sneak(new ChuckNorrisException());</code> does throw a ChuckNorrisException, but the compiler complains in</p>\n\n<pre><code>try {\n  throw SneakyThrow.sneak(new ChuckNorrisException());\n} catch (ChuckNorrisException e) {\n}\n</code></pre>\n\n<p>about catching an exception that is not thrown if ChuckNorrisException is a checked exception.</p>\n", "title": "Uncatchable ChuckNorrisException", "answer_id": 14001288, "question_id": 13883166, "tags": ["java", "exception", "exception-handling", "aop"]}, {"body": "<p>Call System.exit(1) in the <code>finalize</code>, and just throw a copy of the exception from all the other methods, so that the program will exit.</p>\n", "title": "Uncatchable ChuckNorrisException", "answer_id": 23146015, "question_id": 13883166, "tags": ["java", "exception", "exception-handling", "aop"]}, {"body": "<p>Actually the accepted answer is not so nice because Java needs to be run without verification, i.e. the code would not work under normal circumstances.</p>\n\n<p>AspectJ to the rescue for the <strong>real solution</strong>!</p>\n\n<p><strong>Exception class:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\npublic class ChuckNorrisException extends RuntimeException {\n    public ChuckNorrisException(String message) {\n        super(message);\n    }\n}\n</code></pre>\n\n<p><strong>Aspect:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport de.scrum_master.app.ChuckNorrisException;\n\npublic aspect ChuckNorrisAspect {\n    before(ChuckNorrisException chuck) : handler(*) &amp;&amp; args(chuck) {\n        System.out.println(\"Somebody is trying to catch Chuck Norris - LOL!\");\n        throw chuck;\n    }\n}\n</code></pre>\n\n<p><strong>Sample application:</strong></p>\n\n<pre><code>package de.scrum_master.app;\n\npublic class Application {\n    public static void main(String[] args) {\n        catchAllMethod();\n    }\n\n    private static void catchAllMethod() {\n        try {\n            exceptionThrowingMethod();\n        }\n        catch (Throwable t) {\n            System.out.println(\"Gotcha, \" + t.getClass().getSimpleName() + \"!\");\n        }\n    }\n\n    private static void exceptionThrowingMethod() {\n        throw new ChuckNorrisException(\"Catch me if you can!\");\n    }\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Somebody is trying to catch Chuck Norris - LOL!\nException in thread \"main\" de.scrum_master.app.ChuckNorrisException: Catch me if you can!\n    at de.scrum_master.app.Application.exceptionThrowingMethod(Application.java:18)\n    at de.scrum_master.app.Application.catchAllMethod(Application.java:10)\n    at de.scrum_master.app.Application.main(Application.java:5)\n</code></pre>\n", "title": "Uncatchable ChuckNorrisException", "answer_id": 23168980, "question_id": 13883166, "tags": ["java", "exception", "exception-handling", "aop"]}, {"body": "<p>It is easily possible to simulate a uncaught exception on the current thread. This will trigger the regular behavior of an uncaught exception, and thus gets the job done semantically. It will, however, not necessarily stop the current thread's execution, as no exception is actually thrown.</p>\n\n<pre><code>Throwable exception = /* ... */;\nThread currentThread = Thread.currentThread();\nThread.UncaughtExceptionHandler uncaughtExceptionHandler =\n    currentThread.getUncaughtExceptionHandler();\nuncaughtExceptionHandler.uncaughtException(currentThread, exception);\n// May be reachable, depending on the uncaught exception handler.\n</code></pre>\n\n<p>This is actually useful in (very rare) situations, for example when proper <code>Error</code> handling is required, but the method is invoked from a framework catching (and discarding) any <code>Throwable</code>.</p>\n", "title": "Uncatchable ChuckNorrisException", "answer_id": 34688397, "question_id": 13883166, "tags": ["java", "exception", "exception-handling", "aop"]}, {"body": "<p>Add a throw clause at the end. It's a big risk, because nobody throws Chuck Norris! =)</p>\n", "title": "Uncatchable ChuckNorrisException", "answer_id": 37731204, "question_id": 13883166, "tags": ["java", "exception", "exception-handling", "aop"]}], "link": "http://stackoverflow.com/questions/13883166/uncatchable-chucknorrisexception", "question_id": 13883166}, {"body": "<p>Can you please describe what the TypeScript language is?</p>\n\n<p>What can it do that JavaScript or available libraries cannot do, that would give me reason to consider it?</p>\n", "title": "What is TypeScript and why would I use it in place of JavaScript?", "tags": ["javascript", "typescript"], "answers": [{"body": "<h2>1000ft view...</h2>\n\n<p><a href=\"http://www.typescriptlang.org\">TypeScript</a> is a superset of JavaScript which primarily provides optional static typing, classes and interfaces. One of the big benefits is to enable IDEs to provide a richer environment for spotting common errors <em>as you type the code</em>.</p>\n\n<p>To get an idea of what I mean, watch <a href=\"http://channel9.msdn.com/posts/Anders-Hejlsberg-Introducing-TypeScript\">Microsoft's introductory video</a> on the language.</p>\n\n<p>For a large JavaScript project, adopting TypeScript might result in more robust software, while still being deployable where a regular JavaScript application would run.</p>\n\n<p>It is open source, but you only get the clever Intellisense as you type if you use a supported IDE. Initially, this was only Microsoft's Visual Studio (also noted in blog post from <a href=\"http://tirania.org/blog/archive/2012/Oct-01.html\">Miguel de Icaza</a>). These days, <a href=\"https://github.com/Microsoft/TypeScript/wiki/TypeScript-Editor-Support\">other IDEs offer TypeScript support too</a>.</p>\n\n<h2>Are there other technologies like it?</h2>\n\n<p>There's <a href=\"http://coffeescript.org/\">CoffeeScript</a>, but that really serves a different purpose. IMHO, CoffeeScript provides readability for humans, but TypeScript also provides deep readability for <em>tools</em> through its optional static typing (see this <a href=\"http://www.hanselman.com/blog/WhyDoesTypeScriptHaveToBeTheAnswerToAnything.aspx\">recent blog post</a> for a little more critique). There's also <a href=\"http://en.wikipedia.org/wiki/Dart_%28programming_language%29\">Dart</a> but that's a full on replacement for JavaScript (though it <a href=\"http://www.dartlang.org/docs/dart-up-and-running/contents/ch04-tools-dart2js.html\">can produce JavaScript code</a>)</p>\n\n<h2>Example</h2>\n\n<p>As an example, here's some TypeScript (you can play with this in the <a href=\"http://www.typescriptlang.org/Playground/\">TypeScript Playground</a>)</p>\n\n<pre><code>class Greeter {\n    greeting: string;\n    constructor (message: string) {\n        this.greeting = message;\n    }\n    greet() {\n        return \"Hello, \" + this.greeting;\n    }\n}  \n</code></pre>\n\n<p>And here's the JavaScript it would produce</p>\n\n<pre><code>var Greeter = (function () {\n    function Greeter(message) {\n        this.greeting = message;\n    }\n    Greeter.prototype.greet = function () {\n        return \"Hello, \" + this.greeting;\n    };\n    return Greeter;\n})();\n</code></pre>\n\n<p>Notice how the TypeScript defines the type of member variables and class method parameters. This is removed when translating to JavaScript, but used by the IDE and compiler to spot errors, like passing a numeric type to the constructor.</p>\n\n<p>It's also capable of inferring types which aren't explicitly declared, for example, it would determine the <code>greet()</code> method returns a string.</p>\n\n<h2>Debugging Typescript</h2>\n\n<p>Many browsers and IDEs offer direct debugging support through sourcemaps. See this Stack Overflow question for more details: <a href=\"http://stackoverflow.com/questions/12711826/debugging-typescript-code-with-visual-studio\">Debugging TypeScript code with Visual Studio</a></p>\n\n<h2>Want to know more?</h2>\n\n<p>I originally wrote this answer when Typescript was still hot-off-the-presses. Check out <a href=\"http://stackoverflow.com/a/35048303/6521\">Lodewijk's answer</a> to this question for some more current detail.</p>\n", "title": "What is TypeScript and why would I use it in place of JavaScript?", "answer_id": 12694578, "question_id": 12694530, "tags": ["javascript", "typescript"]}, {"body": "<p>\"<strong><a href=\"https://www.pluralsight.com/courses/typescript\">TypeScript Fundamentals</a></strong>\"  -- a Pluralsight video-course by <strong><a href=\"https://www.pluralsight.com/authors/dan-wahlin\">Dan Wahlin</a></strong> and <strong><a href=\"https://www.pluralsight.com/authors/john-papa\">John Papa</a></strong> is a really good, presently (March 25, 2016) updated to reflect TypeScript 1.8, introduction to Typescript. </p>\n\n<p>For me the really good features, beside the nice possibilities for intellisense, are the <em>classes</em>, <em>interfaces</em>, <em>modules</em>, the ease of implementing AMD, and the possibility to use the Visual Studio Typescript debugger when invoked with IE.</p>\n\n<p><strong>To summarize</strong>: If used as intended, Typescript can make JavaScript programming more reliable, and easier. It can increase the productivity of the JavaScript programmer significantly over the full SDLC.</p>\n", "title": "What is TypeScript and why would I use it in place of JavaScript?", "answer_id": 34477523, "question_id": 12694530, "tags": ["javascript", "typescript"]}, {"body": "<p>Though the accepted answer is fine, I felt it really doesn't do TypeScript justice at this point. It is not the early days anymore. TypeScript is finding a lot more adoption now with several popular frameworks being written in TypeScript. The reasons why you should choose TypeScript instead of JavaScript are many now. </p>\n\n<h1>Relation to JavaScript</h1>\n\n<p>JavaScript is standardized through the ECMAScript standards. Not all browsers in use support all features of newer ECMAScript standards (see this <a href=\"https://kangax.github.io/compat-table/es6/\">table</a>). TypeScript supports new ECMAScript standards and compiles them to (older) ECMAScript targets of your choosing (current targets are 3, 5 and 6 [a.k.a. 2015]). This means that you can use features of ES2015 and beyond, like modules, lambda functions, classes, the spread operator, destructuring, today. It also adds type support of course, which is not part of any ECMAScript standard and may likely never be due to the interpreted nature instead of compiled nature of JavaScript. The type system of TypeScript is relatively rich and includes: interfaces, enums, hybrid types, generics, union and intersection types, access modifiers and much more. The <a href=\"http://www.typescriptlang.org\">official website</a> of TypeScript gives an overview of these features.</p>\n\n<h1>Relation to other JavaScript targeting languages</h1>\n\n<p>TypeScript has a unique philosophy compared to other languages that compile to JavaScript. JavaScript code is valid TypeScript code; TypeScript is a superset of JavaScript. You can almost rename your <code>.js</code> files to <code>.ts</code> files and start using TypeScript. TypeScript files are compiled to readable JavaScript, so that migration back is possible and understanding the compiled TypeScript is not hard at all. This way TypeScript builds on the successes of JavaScript while improving on its weaknesses. </p>\n\n<p>On the one hand, you have future proof tools that take modern ECMAScript standards and compile it down to older JavaScript versions with Babel being the most popular one. On the other hand, you have languages that may totally differ from JavaScript which target JavaScript, like Coffeescript, Clojure, Dart, Elm, Haxe, ScalaJs, and a whole host more (see this <a href=\"https://github.com/jashkenas/coffeescript/wiki/List-of-languages-that-compile-to-JS\">list</a>). These languages, though they might be better then where JavaScript's future might ever lead, run a greater risk of not finding enough adoption for their futures to be guaranteed. You might also have more trouble finding experienced developers for some of these languages, though the ones you will find can often be more enthusiastic. Interop with JavaScript can also be a bit more involved, since they are farther removed from what JavaScript actually is.</p>\n\n<p>TypeScript sits in between these two extremes, thus balancing the risk. TypeScript is not a risky choice by any standard. It takes very little effort to get used to if you are known to JavaScript, since it is not a completely different language, has excellent JavaScript interoperability support and it has seen a lot of adoption recently.</p>\n\n<h1>Optionally static typing and type inference</h1>\n\n<p>JavaScript is dynamically typed. This means JavaScript does not know what type a variable is until it is actually instantiated at run-time. This also means that it may be too late. TypeScript adds type support to JavaScript. Bugs that are caused by false assumptions of some variable being of a certain type can be completely eradicated if you play your cards right; how strict you type your code or if you type your code at all is up to you. </p>\n\n<p>TypeScript makes typing a bit easier and a lot less explicit by the usage of type inference. For example: <code>var x = \"hello\"</code> in TypeScript is the same as <code>var x : string = \"hello\"</code>. The type is simply inferred from its use. Even it you don't explicitly type the types, they are still there to save you from doing something which otherwise would result in a run-time error. </p>\n\n<p>TypeScript is optionally typed by default. For example <code>function divideByTwo(x) { return  x / 2 }</code> is a valid function in TypeScript which can be called with <em>any</em> kind of parameter, even though calling it with a string will obviously result in a <em>runtime</em> error. Just like you are used to in JavaScript. This works, because when no type was explicitly assigned and the type could not be inferred, like in the divideByTwo example, TypeScript will implicitly assign the type <code>any</code>. This means the divideByTwo function's type signature automatically becomes <code>function divideByTwo(x : any) : any</code>.  There is a compiler flag to disallow this behavior: <code>--noImplicitAny</code>. Enabling this flag gives you a greater degree of safety, but also means you will have to do more typing. </p>\n\n<p>Types have a cost associated with them. First of all there is a learning curve, and second of all, of course, it will cost you a bit more time to set up a codebase using proper strict typing too. In my experience, these costs are totally worth it on any serious codebase you are sharing with others. <a href=\"http://macbeth.cs.ucdavis.edu/lang_study.pdf\">A Large Scale Study of Programming Languages and Code Quality in Github</a> suggests that <em>\"that statically typed languages in general are less defect prone than the dynamic types, and that strong typing is better than weak typing in the same regard.\"</em></p>\n\n<p>It is interesting to note that this very same paper finds that TypeScript is less error prone then JavaScript:</p>\n\n<blockquote>\n  <p>For those with positive coefficients we can expect that the language\n  is associated with, ceteris paribus, a greater number of defect fixes.\n  These languages include C, C++, <em>JavaScript</em>, Objective-C, Php, and\n  Python. The languages Clojure, Haskell, Ruby, Scala, and <em>TypeScript</em>,\n  all have negative coefficients implying that these languages are less\n  likely than the average to result in defect fixing commits.</p>\n</blockquote>\n\n<h1>Enhanced IDE support</h1>\n\n<p>The development experience with TypeScript is a great improvement over JavaScript. The IDE is informed in real-time by the TypeScript compiler on its rich type information. This gives a couple of major advantages. For example, with TypeScript you can safely do refactorings like renames across your entire codebase. Through code completion you can get inline help on whatever functions a library might offer. No more need to remember them or look them up in online references. Compilation errors are reported directly in the IDE with a red squiggly line while you are busy coding. All in all this allows for a significant gain in productivity compared to working with JavaScript. One can spend more time coding and less time debugging.</p>\n\n<p>There is a wide range of IDEs that have excellent support for TypeScript, like Visual Studio &amp; VS code, Atom, Sublime, and IntelliJ/WebStorm. </p>\n\n<h1>Strict null checks</h1>\n\n<p><em>Note</em>: The following feature will be part of the upcoming TypeScript 2.0 release. There are many exciting new features in this release, but I would like to highlight this one in particular since it is such a big improvement over JavaScript.</p>\n\n<p>Runtime errors of the form <code>cannot read property 'x' of undefined</code> or <code>undefined is not a function</code> are very commonly caused by bugs in JavaScript code. Out of the box TypeScript already reduces the probability of these kinds of errors occurring, since one cannot use a variable that is not known to the TypeScript compiler (with the exception of properties of <code>any</code> typed variables). It is still possible though to mistakenly utilize a variable that is set to <code>undefined</code>. However, with the upcoming 2.0 version of TypeScript you can eliminate these kinds of errors alltogether through the usage of non-nullable types. This works as follows: </p>\n\n<p>With strict null checks enabled (<code>--strictNullChecks</code> compiler flag) the TypeScript compiler will not allow <code>undefined</code> to be assigned to a variable unless you explicitly declare it to be of nullable type. For example, <code>let x : number = undefined</code> will result in a compile error. This fits perfectly with type theory, since <code>undefined</code> is not a number. One can define <code>x</code> to be a sum type of <code>number</code> and <code>undefined</code> to correct this: <code>let x : number | undefined = undefined</code>. The short hand notation is <code>let x : number? = undefined</code>.</p>\n\n<p>Once a type is known to be nullable, meaning it is of a type that can also be of the value <code>null</code> or <code>undefined</code>, the TypeScript compiler can determine through control flow based type analysis whether or not your code can safely use a variable or not. In other words when you check a variable is <code>undefined</code> through for example an <code>if</code> statement the TypeScript compiler will infer that the type in that branch of your code's control flow is not anymore nullable and therefore can safely be used. Here is a simple example:</p>\n\n<pre><code>let x : number?;\nif (x !== undefined) x += 1; // this line will compile, because x is checked.\nx += 1; // this line will fail compilation, because x might be undefined.\n</code></pre>\n\n<p>During the build 2016 conference co-designer of TypeScript Anders Hejlsberg gave a detailed explanation and demonstration of this feature: <a href=\"https://channel9.msdn.com/Events/Build/2016/B881\">video</a> (from 44:30 to 56:30).</p>\n\n<h1>Compilation</h1>\n\n<p>To use TypeScript you need a build process to compile to JavaScript code. The build process generally takes only a couple of seconds depending of course on the size of your project. The TypeScript compiler supports incremental compilation (<code>--watch</code> compiler flag), so that all subsequent changes can be compiled at greater speed. </p>\n\n<p>The TypeScript compiler can inline source map information in the generated .js files or create separate .map files. Source map information can be used by debugging utilities like the Chrome DevTools or some IDE to relate the lines in the JavaScript to the ones that generated them in the TypeScript. This makes it possible for you to set breakpoints and inspect variables during runtime. Source map information works pretty good, it was around long before TypeScript, but debugging TypeScript is generally not as great as when using JavaScript directly. Take the  <code>this</code> keyword for example. Due to the changed semantics of the <code>this</code> keyword around closures since ES2015, <code>this</code> may actually exists during runtime as a variable called <code>_this</code> (see <a href=\"http://stackoverflow.com/questions/30056593/visual-studio-shows-wrong-value-for-this-in-typescript/30070859#30070859\">this answer</a>). This may confuse you during debugging, but generally is not a problem if you know about it or inspect the JavaScript code. It should be noted that Babel suffers the exact same kind of issue.</p>\n\n<p>There are a few other tricks the TypeScript compiler can do, like generating intercepting code based on <a href=\"http://stackoverflow.com/q/29775830/1860591\">decorators</a>, generating module loading code for different module systems and parsing <a href=\"https://github.com/Microsoft/TypeScript/wiki/JSX\">JSX</a>. However, you will likely require a build tool besides the Typescript compiler. For example if you want to compress your code you will have to add other tools to your build process to do so.</p>\n\n<p>There are TypeScript compilation plugins available for <a href=\"https://github.com/TypeStrong/ts-loader\">Webpack</a>, <a href=\"https://www.npmjs.com/package/gulp-typescript\">Gulp</a>, <a href=\"https://www.npmjs.com/package/grunt-typescript\">Grunt</a> and pretty much any other JavaScript build tool out there. The TypeScript documentation has a section on <a href=\"https://www.typescriptlang.org/docs/handbook/integrating-with-build-tools.html\">integrating with build tools</a> covering them all. A <a href=\"https://www.npmjs.com/package/tslint\">linter</a> is also available in case you would like even more build time checking. There are also a great number of seed projects out there that will get you started with TypeScript in combination with a bunch of other technologies like Angular 2, React, Ember, SystemJs, WebPack, Gulp, etc.</p>\n\n<h1>JavaScript interoperability</h1>\n\n<p>Since TypeScript is so closely related to JavaScript it has great interoperability capabilities, but some extra work is required to work with JavaScript libraries in TypeScript. <a href=\"http://www.typescriptlang.org/Handbook#modules-working-with-other-javascript-libraries\">TypeScript definitions</a> are needed so that the TypeScript compiler understands that function calls like <code>_.groupBy</code> or <code>angular.copy</code> or <code>$.fadeOut</code> are not in fact illegal statements. The definitions for these functions are placed in <code>.d.ts</code> files. </p>\n\n<p>The simplest form a definition can take is to allow an identifier to be used in anyway. For example, when using <a href=\"https://lodash.com/\">Lodash</a>, a single line definition file <code>declare var _ : any</code> will allow you to call any function you want on <code>_</code>, but then of course you are also still able to make mistakes: <code>_.foobar()</code> would be a legal TypeScript call, but is of course an illegal call at run-time. If you want proper type support and code completion your definition file needs to to be more exact (see <a href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/lodash/lodash.d.ts\">lodash.d.ts</a> for an example). </p>\n\n<p><a href=\"https://www.npmjs.com/\">Npm modules</a> that come pre-packaged with their own type definitions are automatically understood by the TypeScript compiler (see <a href=\"https://www.typescriptlang.org/docs/handbook/typings-for-npm-packages.html\">documentation</a>). For pretty much any other semi-popular JavaScript library that does not include its own definitions (most projects at this point) somebody out there has already made a <code>.d.ts</code> file. These can be downloaded and managed with a command line tool called <a href=\"https://github.com/typings/typings\">Typings</a>. Typings gets most of its type definitions from a Github repository called <a href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/\">DefinitelyTyped</a>, but is also able to get them via other source like Github, Npm, Bower, etc. After installing Typings you can run <code>typings install lodash</code> on the command-line in your project directory and you will be ready to start using Lodash. Now your IDE will tell you exactly which Lodash functions are available when you type <code>_.</code> in your editor. </p>\n\n<p>There is one caveat: the TypeScript definitions must match the version of the library you are using at runtime. If they do not, TypeScript might disallow you from calling a function or dereferencing a variable that exist or allow you to call a function or dereference a variable that does not exist. Typings uses a registry to be able to provide different versions of definitions. This is a fairly recent development and to be honest there are not a lot of different versions of libraries available yet, so often times times it is simply the best to use the latest version of a library as definitions tend to be up to date.</p>\n\n<p>To be honest, there is a slight hassle to this and it may be one of the reasons you do not choose TypeScript, but instead go for something like Babel that does not suffer from having to get type definitions at all. On the other hand, if you know what you are doing you can easily overcome any kind of issues caused by incorrect or missing definition files.</p>\n\n<h1>Converting from JavaScript to TypeScript</h1>\n\n<p>Any <code>.js</code> file can be renamed to a <code>.ts</code> and ran through the TypeScript compiler to get syntactically the same JavaScript code as an output (if it was syntactically correct in the first place). Even when the TypeScript compiler gets compilation errors it will still produce a <code>.js</code> file. It can even accept <code>.js</code> files as input with the <code>--allowJs</code> flag. This allows you to start with TypeScript right away. Unfortunately compilation errors are likely to occur in the beginning. One does need to remember that these are not show-stopping errors like you may be used to with other compilers.  </p>\n\n<p>The compilation errors one gets in the beginning when converting a JavaScript project to a TypeScript project are unavoidable by TypeScript's nature. TypeScript checks <em>all</em> code for validity and thus it needs to know about all functions and variables that are used. Thus type definitions need to be in place for all of them otherwise compilation errors are bound to occur. As mentioned in the chapter above, for pretty much any JavaScript framework there are <code>.d.ts</code> files that can easily be acquired with a few <code>typings install</code> commands. It might however be that you've used some obscure library for which no TypeScript definitions are available or that you've polyfilled some JavaScript primitives. In that case you must supply type definitions for these bits in order for the compilation errors to dissapear. Just create a <code>.d.ts</code> file and include it in the tsconfig.json's <code>files</code> array, so that it is always considered by the TypeScript compiler. In it declare those bits that TypeScript does not know about as type <code>any</code>. Once you've eliminated all errors you can gradually introduce typing to those parts according to your needs.</p>\n\n<p>Some work on (re)configuring your build pipeline will also be needed to get TypeScript into the build pipeline. As mentioned in the chapter on compilation there are plenty of good resources out there and I encourage you to look for seed projects that use the combination of tools you want to be working with. </p>\n\n<p>The biggest hurdle is the learning curve. I encourage you to play around with a small project at first. Look how it works, how it builds, which files it uses, how it is configured, how it functions in your IDE, how it is structured, which tools it uses, etc. Converting a large JavaScript codebase to TypeScript is very doable when you know what you are doing, but it might be frustrating when you don't.</p>\n\n<h1>Adoption</h1>\n\n<p>TypeScript is open source (Apache 2 licensed, see <a href=\"https://github.com/Microsoft/TypeScript\">github</a>) and backed by Microsoft. <a href=\"https://en.wikipedia.org/wiki/Anders_Hejlsberg\">Anders Hejlsberg</a>, the lead architect of C# is spearheading the project. It's a very active project; the TypeScript team has been releasing a lot of new features in the last few years and a lot of great ones are still planned to come (see the <a href=\"https://github.com/Microsoft/TypeScript/wiki/Roadmap\">roadmap</a>). It also is currently trending (see <a href=\"https://www.google.com/trends/explore#q=typescript\">google trends</a>). Npm downloads have increased 20 fold since last year. In February 2016 TypeScript had over a million downloads per month (<a href=\"https://devchat.tv/js-jabber/209-jsj-typescript-with-anders-hejlsberg\">source</a>). Many great projects are coded nowadays using TypeScript, most notably Angular 2 and RxJs. </p>\n", "title": "What is TypeScript and why would I use it in place of JavaScript?", "answer_id": 35048303, "question_id": 12694530, "tags": ["javascript", "typescript"]}, {"body": "<p>Typescript does something similar to what less or sass does for CSS. They are super sets of it, which means that every JS code you write is valid typescript code. Plus you can use the other goodies that it adds to the language, and the transpiled code will be valid js. You can even set the JS version that you want your resulting code on. </p>\n\n<p>Currently Typescript is a super set of ES2015, so might be a good choice to start learning the new js features and transpile to the needed standard for your project. </p>\n", "title": "What is TypeScript and why would I use it in place of JavaScript?", "answer_id": 35349467, "question_id": 12694530, "tags": ["javascript", "typescript"]}, {"body": "<p>Every year  JavaScript is changing \nEcma script 5 (ES5) which all browser support and precompiled.\nES6/ES2015 and ES/2016 came this year with lots of changes so to pop up these changes there is something in between which should take cares about so Typescript.\nTypeScript is Types -> Means we have to define datatype of each property and methods.If you know c# then Typescript is easy to understand.</p>\n\n<p>Big advantage of Typescript is we identity Type related issues early before going to production.\nThis allows unit tests to fail if there is any type mismatch.</p>\n", "title": "What is TypeScript and why would I use it in place of JavaScript?", "answer_id": 37657170, "question_id": 12694530, "tags": ["javascript", "typescript"]}], "link": "http://stackoverflow.com/questions/12694530/what-is-typescript-and-why-would-i-use-it-in-place-of-javascript", "question_id": 12694530}, {"body": "<p>I am trying to get my first taste of Android development using Eclipse. I ran into this problem when trying to run Eclipse, having installed version 4.2 only minutes ago.</p>\n\n<p>After first trying to start Eclipse without any parameters to specify the Java VM, I got an error message saying it couldn't find a Java VM called javaw.exe inside the Eclipse folder, so I found where Java was installed and specified that location as the parameter in the shortcut's target. Now I get a different error, \"Java was started but returned exit code=13\".</p>\n\n<p>Similar questions seem to indicate that it's a 32-bit/64-bit conflict, but I'm 99% positive that I downloaded 64-bit versions of both Eclipse and Java (RE 7u5), which I chose because I have 64-bit Windows 7. </p>\n\n<ul>\n<li>If anyone knows how to confirm that my Eclipse and Java are 64-bit,\nthat'd be appreciated.</li>\n<li>If you think my problem is a different one, please help!</li>\n<li>Please speak as plainly as you can, as I am totally new to Eclipse\nand Java.</li>\n</ul>\n\n<blockquote>\n  <p>Shortcut Target: \"C:\\Program Files\\Eclipse-SDK-4.2-win32-x86_64\\eclipse\\eclipse.exe\" -vm \"C:\\Program Files (x86)\\Java\\jre7\\bin\\javaw.exe\"</p>\n</blockquote>\n\n<p><strong>Full error code...:</strong></p>\n\n<pre><code>Java was started but returned exit code=13\nC:\\Program Files (x86)\\Java\\jre7\\bin\\javaw.exe\n-Xms40m\n-Xmx512m\n-XX:MaxPermSize=256m\n-jar C:\\Program Files\\Eclipse-SDK-4.2-win32-x86_64\\eclipse\\\\plugins/org.eclipse.equinox.launcher_1.30v20120522-1813.jar\n-os win32\n-ws win32\n-arch x86_64\n-showsplash C:\\Program Files\\Eclipse-SDK-4.2-win32-x86_64\\eclipse\\\\plugins\\org.eclipse.platform_4.2.0.v201206081400\\splash.bmp\n-launcher C:\\Program Files\\Eclipse-SDK-4.2-win32-x86_64\\eclipse\\eclipse.exe\n-name Eclipse\n--launcher.library C:\\Program Files\\Eclipse-SDK-4.2-win32-x86_64\\eclipse\\\\plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v201205221813\\eclipse_1503.dll\n-startup C:\\Program Files\\Eclipse-SDK-4.2-win32-x86_64\\eclipse\\\\plugins/org.eclipse.equinox.launcher_1.30v20120522-1813.jar\n--launcher.overrideVmargs\n-exitdata 1e30_5c\n-vm C:\\Program Files (x86)\\Java\\jre7\\bin\\javaw.exe\n-vmargs\n-Xms40m\n-Xmx512m\n-XX:MaxPermSize=256m\n-jar C:\\Program Files\\Eclipse-SDK-4.2-win32-x86_64\\eclipse\\\\plugins/org.eclipse.equinox.launcher_1.30v20120522-1813.jar\n</code></pre>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "tags": ["java", "android", "eclipse", "windows"], "answers": [{"body": "<p>Your version of Eclipse is 64-bit, based on the paths and filenames.\nHowever, the version of Java that it's picking up is 32-bit, as indicated by where it is coming from, indicated on this line:</p>\n\n<pre><code>-vm C:\\Program Files (x86)\\Java\\jre7\\bin\\javaw.exe\n</code></pre>\n\n<p><code>Program Files (x86)</code> is the folder where 64-bit Windows places <strong>32-bit</strong> programs.</p>\n\n<p><code>Program Files</code> is the folder where 64-bit Windows places <strong>64-bit</strong> programs.</p>\n\n<p>This can happen when a system has more than one JVM installed, as is often the case on Windows 64-bit (for example, the JRE download page uses the bit-ness of the browser to determine what bit-ness download to offer you, and many people use(d) 32-bit browsers even though they run 64-bit Windows).</p>\n\n<p>The best way to fix this, assuming you do in fact have 64-bit JRE or JDK on your system, is to specify in <code>eclipse.ini</code> exactly which JVM you want it to use. The instructions are detailed in <a href=\"https://wiki.eclipse.org/Eclipse.ini\">the Eclipse wiki page</a>, but basically you have to specify the <code>-vm</code> option in the ini file - make sure to read the wiki page carefully as the format is very specific.</p>\n\n<p>Specifying the JVM path in <code>eclipse.ini</code> is strongly recommended because doing so isolates Eclipse from any potential changes to your system <code>PATH</code> that some program installers might make (I'm talking to you, Oracle!).</p>\n\n<p>Another option would be to download and use 32-bit Eclipse instead of 64-bit, but it's still strongly recommended to specify the path to the JVM in <code>eclipse.ini</code>.</p>\n\n<hr>\n\n<p><em>Left for historical reference</em>:</p>\n\n<p>To check your version of Java, run </p>\n\n<pre>\n  java -version \n</pre>\n\n<p>in a console (command prompt). On Windows 7 with 64-bit Java 6 I get:</p>\n\n<pre>\n  java version \"1.6.0_27\"\n  Java(TM) SE Runtime Environment (build 1.6.0_27-b07)\n  Java HotSpot(TM) 64-Bit Server VM (build 20.2-b06, mixed mode)\n</pre>\n\n<p>Note the 3rd line, which shows that this is a 64-bit version. </p>\n\n<p>On a 32-bit version you'll get something like:</p>\n\n<pre>\n  Java HotSpot(TM) Client VM (build 20.1-b02, mixed mode, sharing) \n</pre>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 11461676, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>It could be due to less memory. You can modify the eclipse.ini file to increase the memory. Something like this might help you : <a href=\"http://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse%3F\" rel=\"nofollow\">http://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse%3F</a></p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 11461761, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>the solution is simple, put the \"eclipse\" folder on \"c:/Program Files\" if it does not work put it in \"c:/Program Files (x86)\"</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 13060451, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>The strangest fix ever. look at your eclipse path, and make sure you do not have strange characters (<code>like !,#,@</code>). worked for me.</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 13701215, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>I had same issue <strong>Java was started but returned exit code=13</strong>. My solution was to create environment variable to Windows properties <em>variable name</em> = PATH <em>variable value</em> = <strong>C:\\Program Files\\Java\\jdk1.7.0_02\\bin</strong> not to <strong>C:\\Program Files (x86)\\Java\\jre7\\bin</strong>.</p>\n\n<p>Next i put line to eclipse.ini --> C:\\Program Files\\Java\\jdk1.7.0_02\\bin\\javaw.exe.</p>\n\n<p>That works for me.</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 14476165, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>Make sure you don't have special characters (<code>%</code>, <code>$</code>, <code>#</code>, etc.) at Eclipse path.</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 16770938, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>I had the same problem. i was using windows8 with 64 bit OS. I just changed the path to Program Files(*86) and then it started work.\nI put this line in eclipse.ini file like,</p>\n\n<pre><code>-vm\n C:\\Program Files (x86)\\Java\\jre7\\bin\\javaw.exe\n</code></pre>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 25174911, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>I uninstalled java update 25, so that issue solved</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 26480143, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>This might happen if you have several versions of java in the same machine, to fix this i did the following:</p>\n\n<ol>\n<li>Checked current JAVA_HOME value, in Windows echo %JAVA_HOME%</li>\n<li>Accessed the route of javaw.exe</li>\n<li>Replaced the shortcuts pointing to java home location.</li>\n</ol>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 26491116, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>If you install a 64 bit Eclipse Version on a PC with a 32 bit JRE this is guarantee to occur. So the solution is quite straight forward: You need to sync them by updating either one. This shall happen when downloading oracle fusion middleware and the eclipse expects a 32 bit env while your JRE is 64 bit  and your JAVA home is pointing a 64 bit JDK.  </p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 26524425, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>I found I had installed 32-bit Eclipse by mistake, and was trying to use it with a 64-bit JRE, which is why I got this error. To see whether you have 32 or 64 bit Eclipse installed, see this answer: <a href=\"http://stackoverflow.com/a/9578565/191761\">http://stackoverflow.com/a/9578565/191761</a></p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 26591537, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>If you have recently installed Java 8 and uninstalled Java 7, install JDK 8 and retry.</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 26655172, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>I got this error, and found that my PATH variable (on Windows) was probably changed. First in my PATH was this entry:</p>\n\n<pre><code>C:\\ProgramData\\Oracle\\Java\\javapath\n</code></pre>\n\n<p>..and eclipse ran <code>\"C:\\ProgramData\\Oracle\\Java\\javapath\\javaw\"</code> - which gave the error. I suspect that this is something that came along with an installation of Java 8.</p>\n\n<p>I have several java versions installed (6,7 and 8), so I removed that entry from the PATH and tried to restart Eclipse again, which worked fine.</p>\n\n<p><a href=\"https://java.com/en/download/help/path.xml\">Instructions on how to edit PATH variable</a></p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 26709519, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>I have just solved the same issue upon setting up my Windows 8.1 PC. Exactly like @George Papatheodorou mentioned above (sorry I cannot add a comment), Eclipse and JRE must be both 64 bit or 32 bit.</p>\n\n<p>However, it seems for Windows 8/8.1 environment, you are going to get 32-bit JRE by default(and I do not know where to change that default for the download), as explained here: <a href=\"http://java.com/en/download/faq/win8_faq.xml\" rel=\"nofollow\">http://java.com/en/download/faq/win8_faq.xml</a></p>\n\n<p>I was using 64-bit Eclipse so there was a discrepancy. I then installed 32-bit Eclipse and everything works fine this time.</p>\n\n<p>So before bothering changing any environment variables, check your JRE and Eclipse version.</p>\n\n<p>UPDATE: of course you can use 64-bit JRE with 64-bit Eclipse. Just make sure they match because Windows 8.1 will give you 32-bit by default.</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 26784435, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>I was facing same Issue. I had installed version 8 and update 25 32 bit.\nTo fix install Java SE Development Kit 7 Update 71 (64 bit). Then through appwiz.cpl delete the other version i.e. Java Update 25. Done.</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 26996874, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>I tried some of above solutions, but not worked for me.</p>\n\n<p>finally I found another way, .......</p>\n\n<p>Go to <strong>Environment Variables</strong> ->  <strong>system variables</strong></p>\n\n<p>set <strong>C:\\Program Files\\Java\\jdk1.7.0_02\\bin\\javaw.exe</strong> to the path in the system variables.</p>\n\n<p>Try it, worked for me...</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 27099115, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>For me the solution was to go into (on Windows 8.1):</p>\n\n<pre><code>System &gt; Advanced system setting &gt; Environment Variables \n</code></pre>\n\n<p>Under 'System variables' in the 'Path' variable there was the following first:</p>\n\n<pre><code>C:\\ProgramData\\Oracle\\Java\\javapath;\n</code></pre>\n\n<p>I removed this and Eclipse worked again!</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 27265585, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p><img src=\"http://i.stack.imgur.com/MWRJ5.png\" alt=\"enter image description here\"></p>\n\n<p>The issue fixed by doing the following steps,</p>\n\n<ol>\n<li><p>The eclipse finds the JAVA executables from<br>\n'C:\\ProgramData\\Oracle\\Java\\javapath' </p></li>\n<li><p>The folder structure will contain shortcuts to the below executables,<br>\ni. java.exe<br>\nii. javaw.exe<br>\niii. javaws.exe </p></li>\n<li><p>For me the executable paths were pointing to my <strong>Program Files(x86)</strong> (home for 32 bit applications) folder location </p></li>\n<li><p>I corrected it to <strong>Program Files</strong> (which homes 64 bit applications) and the issue got resolved</p></li>\n</ol>\n\n<p>Please find the screenshot for the same.</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 27462141, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>I had <code>x64</code> bit <code>JDK</code>. There was nothing in my <code>path settings</code>. So I installed <code>x86 JDK</code>. This solved my problem perfectly. Thanks all above.</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 27490683, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>I tried following solution:</p>\n\n<p>I created a shortcut of javaw.exe from path <strong>C:\\Program Files\\Java\\jdk1.7.0_71\\bin</strong></p>\n\n<p>and paste it into this path <strong>C:\\ProgramData\\Oracle\\Java\\javapath</strong></p>\n\n<p>After that launch Eclipse and it worked for me</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 27544174, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>If nothing works, then the last solution you can try is to completely uninstall java from your computer and then install it again, and make sure the path variables are set correctly.</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 27655008, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>I had this issue.  I installed Java 8 update 25 via Chrome, and therafter attempting to start Eclipse gave the mentioned error.</p>\n\n<p>Uninstalled that update, and Eclipse works again.</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 27808713, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>I had similar error after installing Java 8 on my Win 7, 64 bit system. Changing Environment variables etc did not help. So I tried to remove the Java Update 8 but that too did not help. What fixed my problem was downloading 64 bit version of Java 8 SDK. I hope this helps.</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 28111567, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>I had the same issue after I upgrade my jdk from 1.7 to 1.8. I'm using eclipse luna. The error is gone after I degrade jdk to 1.7.</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 28396802, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>The best answer here is too long. I cannot comment so i add my answer.\n1. Go here:\n<a href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html\" rel=\"nofollow\">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a>\n2. Download the latest sdk (of course for x64 if your computer is x64)\n3. install it\n4. now the party is finished, it's time to work with eclipse ;)</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 28427832, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>A clean reinstall of the <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html\">Java JDK</a> did the trick in my case. Running <a href=\"https://projects.eclipse.org/releases/luna\">Eclipse Luna</a> like a charm now.</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 28499951, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>I had this message when I had forgot to install the JDK.</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 28646547, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>I also encountered the same issue. It turned out that the environment variable <strong>Path</strong> was pointing to an incorrect java version.</p>\n\n<p>Please check the environment variable and point it to correct java i.e For example: </p>\n\n<pre><code>c:\\Program Files (x86)\\Java\\jdk1.6.0_17\\bin\n</code></pre>\n\n<p>To check the environment variable go to:</p>\n\n<pre><code>Computer -&gt; properties -&gt; Advanced system settings -&gt; Advanced -&gt; Environment variables\n</code></pre>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 29027006, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>Adding vm argument to .ini file worked for me</p>\n\n<pre><code>-vm\nC:\\Program Files\\Java\\jdk1.7.0_65\\bin\\javaw.exe\n</code></pre>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 29078519, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>It turned out I only had the 32bit Java Runtime installed. </p>\n\n<pre><code>C:\\Program Files (x86)\\Java\\jre1.8.0_45\\\n</code></pre>\n\n<p>All Eclipse really wanted was for me to install the 64bit Java Runtime. &lt;= SOLVED</p>\n\n<pre><code>Java SE Runtime Environment 8u45  jdk-8u45-windows-x64.exe\n</code></pre>\n\n<p><a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html\" rel=\"nofollow\">http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html</a></p>\n\n<p>Confirm your installation by checking you now have this folder</p>\n\n<pre><code>C:\\Program Files\\Java\\jre1.8.0_45\\\n</code></pre>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 30971509, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>This type of errors occur basically due to use of different versions of java with different version of eclipse.</p>\n\n<p>Suppose you are installing 64 bit jdk on your system then make sure you install 64 bit versioned eclipse with it.\nAnd if you are installing 32 bit jdk on your system then make sure you install 32 bit versioned eclipse with it.</p>\n\n<p>I had the similar problem.I have installed 32 bit jdk and was trying to use 64 bit eclipse.</p>\n\n<p>But when I installed 64 bit jdk on my system then eclipse started working without any problem.</p>\n\n<p>It is advised to better install 32 bit version java along with 32 bit version eclipse on a system with 32 bit configuration and similarly for 64 bit systems.\nThis helps to increase performance of the system.</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 31641242, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>I've solved this issue by installing a JDK (v7 update 80) whereas I had only had the JRE installed before.</p>\n\n<p>Note: this was for IBM's RTC software (built on eclipse)</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 34935339, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}, {"body": "<p>Top answer didn't work for me: I had no environment variables defining java path or no java in my path. However the path C:\\ProgramData\\Oracle\\Java\\javapath\\javaw.exe was always present in the eclipse mars error popup in the -vm option even if I tried to override in the eclipse.ini.</p>\n\n<p>I workaround this by opening a command prompt, cd'ing the directory where the eclipse.exe was and:</p>\n\n<pre><code>C:\\EclipseMars&gt;mklink javaw.exe \"C:\\Program Files\\Java\\jdk1.7.0_79\\bin\"\nsymbolic link created for javaw.exe &lt;&lt;===&gt;&gt; C:\\Program Files\\Java\\jdk1.7.0_79\\bin\n</code></pre>\n\n<p>no changes to eclipse.ini were required.\nI did try to specify the -vm option of in eclipse.ini and it was taken into account but in the error popup a -vm option was present twice even if only one -vm was present in the eclipse.ini.\nIn my eclipse.ini I have no -vm option and just the simlink seems to have corrected it.</p>\n", "title": "Can&#39;t start Eclipse - Java was started but returned exit code=13", "answer_id": 37477815, "question_id": 11461607, "tags": ["java", "android", "eclipse", "windows"]}], "link": "http://stackoverflow.com/questions/11461607/cant-start-eclipse-java-was-started-but-returned-exit-code-13", "question_id": 11461607}, {"body": "<p>What's the easiest way to do this from my bash prompt?</p>\n", "title": "How do I drop a MongoDB database from the command line?", "tags": ["mongodb"], "answers": [{"body": "<p>The best way to do it is from the mongodb console: </p>\n\n<pre><code>&gt; use mydb; \n&gt; db.dropDatabase();\n</code></pre>\n\n<p>Alternatively, you can stop <code>mongod</code> and delete the data files from your data directory, then restart.</p>\n\n<p>Hint: you can also move the data files to a subfolder, and delete them if you're sure you no longer need them.</p>\n", "title": "How do I drop a MongoDB database from the command line?", "answer_id": 8857323, "question_id": 8857276, "tags": ["mongodb"]}, {"body": "<p>Like this:</p>\n\n<pre><code>mongo &lt;dbname&gt; --eval \"db.dropDatabase()\"\n</code></pre>\n\n<p>More info on scripting the shell from the command line here: <a href=\"https://docs.mongodb.com/manual/tutorial/write-scripts-for-the-mongo-shell/#scripting\">https://docs.mongodb.com/manual/tutorial/write-scripts-for-the-mongo-shell/#scripting</a></p>\n", "title": "How do I drop a MongoDB database from the command line?", "answer_id": 8857373, "question_id": 8857276, "tags": ["mongodb"]}, {"body": "<p>You could also use a \"heredoc\":</p>\n\n<pre><code>mongo localhost/db &lt;&lt;EOF\ndb.dropDatabase()\nEOF\n</code></pre>\n\n<p>Results in output like:</p>\n\n<pre><code>mongo localhost/db &lt;&lt;EOF\ndb.dropDatabase()\nEOF\nMongoDB shell version: 2.2.2\nconnecting to: localhost/db\n{ \"dropped\" : \"db\", \"ok\" : 1 }    \nbye\n</code></pre>\n\n<p>I like to use heredocs for things like this, in case you want more complex sequence of commands. </p>\n", "title": "How do I drop a MongoDB database from the command line?", "answer_id": 14861935, "question_id": 8857276, "tags": ["mongodb"]}, {"body": "<p>Other way:</p>\n\n<pre><code>echo \"db.dropDatabase()\" | mongo &lt;database name&gt;\n</code></pre>\n", "title": "How do I drop a MongoDB database from the command line?", "answer_id": 18703902, "question_id": 8857276, "tags": ["mongodb"]}, {"body": "<p>This is a bit more verbose but I think it's safer:</p>\n\n<pre><code>mongo //to start the mongodb shell\n\nshow dbs //to list existing databases\n\nuse &lt;dbname&gt; //the &lt;dbname&gt; is the database you'd like to drop\n\ndb //should show &lt;dbname&gt; just to be sure I'm working with the right database\n\ndb.dropDatabase() //will delete the database and return { \"dropped\" : \"&lt;dbname&gt;\", \"ok\" : 1 }\n</code></pre>\n", "title": "How do I drop a MongoDB database from the command line?", "answer_id": 18997305, "question_id": 8857276, "tags": ["mongodb"]}, {"body": "<p>Execute in a terminal:</p>\n\n<pre><code>mongo // To go to shell\n\nshow databases // To show all existing databases.\n\nuse &lt;DATA_BASE&gt; // To switch to the wanted database.\n\ndb.dropDatabase() // To remove the current database.\n</code></pre>\n", "title": "How do I drop a MongoDB database from the command line?", "answer_id": 19613430, "question_id": 8857276, "tags": ["mongodb"]}, {"body": "<p>Here are some use full delete operations for mongodb using mongo shell</p>\n\n<p>To delete particular document in collections: <code>db.mycollection.remove( {name:\"stack\"} )</code></p>\n\n<p>To delete all documents in collections:  <code>db.mycollection.remove()</code></p>\n\n<p>To delete collection :  <code>db.mycollection.drop()</code></p>\n\n<p>to delete database :\nfirst go to that database by <code>use mydb</code> command and then </p>\n\n<pre><code>db.dropDatabase()\n</code></pre>\n\n<p>directly form command prompt or blash : <code>mongo mydb --eval \"db.dropDatabase()</code></p>\n", "title": "How do I drop a MongoDB database from the command line?", "answer_id": 20492491, "question_id": 8857276, "tags": ["mongodb"]}, {"body": "<p><strong>You don't need heredocs or eval</strong>, <code>mongo</code> itself can act as an interpreter:</p>\n\n<pre><code>#!/usr/bin/env mongo\nvar db = new Mongo().getDB(\"someDatabase\");\ndb.dropDatabase();\n</code></pre>\n", "title": "How do I drop a MongoDB database from the command line?", "answer_id": 23909051, "question_id": 8857276, "tags": ["mongodb"]}, {"body": "<p>Start MongoDB</p>\n\n<p>Command for Database drop is :</p>\n\n<p><strong>1.</strong> first select the database which you want to delete</p>\n\n<pre><code>use &lt; database name &gt;\n</code></pre>\n\n<p><strong>2.</strong> Then use this..</p>\n\n<pre><code>db.dropDatabase()\n</code></pre>\n", "title": "How do I drop a MongoDB database from the command line?", "answer_id": 25225193, "question_id": 8857276, "tags": ["mongodb"]}, {"body": "<p>In you command prompt, First connect to mongodb using following command :</p>\n\n<ul>\n<li><strong>mongo -h [host-name]:[port:number] -d [dbname] -u [username] -p [password]</strong></li>\n</ul>\n\n<p>you will be accessing db with .</p>\n\n<p>Run the following command to drop the whole database:</p>\n\n<ul>\n<li><strong>db.dropDatabase()</strong></li>\n</ul>\n", "title": "How do I drop a MongoDB database from the command line?", "answer_id": 26324913, "question_id": 8857276, "tags": ["mongodb"]}, {"body": "<p>The dropDatabase command drops the current database, deleting the associated data files. There are two ways to drop a database in MongoDB. First, if you want to drop a database <strong>weather</strong> from MongoDB. To drop a database the first thing to do is switch to the database using <strong>use</strong> command and give the drop command as below.</p>\n\n<p><strong>use weather</strong></p>\n\n<p><strong>db.runCommand({dropDatabaase: 1})</strong></p>\n\n<p>Second, The mongo shell also provides the helper method <strong>db.dropDatabase()</strong>. The steps are same as above.</p>\n\n<p><strong>use weather</strong></p>\n\n<p><strong>db.dropDatabase()</strong></p>\n\n<p>If you like to know more about it, please have a look \n<a href=\"http://docs.mongodb.org/manual/reference/command/dropDatabase/\" rel=\"nofollow\">http://docs.mongodb.org/manual/reference/command/dropDatabase/</a></p>\n", "title": "How do I drop a MongoDB database from the command line?", "answer_id": 32024334, "question_id": 8857276, "tags": ["mongodb"]}, {"body": "<p>Using Javascript, you can easily create a script.js to drop your database:</p>\n\n<h1>script.js</h1>\n\n<pre><code>use bad_db\ndb.dropDatabase()\n</code></pre>\n\n<p>Than run:</p>\n\n<pre><code>mongo &lt; script.js\n</code></pre>\n", "title": "How do I drop a MongoDB database from the command line?", "answer_id": 39047289, "question_id": 8857276, "tags": ["mongodb"]}, {"body": "<p>connect with <code>mongoDB</code> using your <code>terminal</code> or <code>command prompt</code></p>\n\n<ul>\n<li>run <code>mongo</code> command, this will start the connection.</li>\n<li>then run <code>show dbs</code> command, this will show all the available/created/existing <code>databases</code> you have.</li>\n<li>then <code>select</code> the <code>database</code> you want to <code>drop/delete</code> with this command , ex : think your database name is <code>myfirst</code> then run <code>use myfirst</code>. this will switch to <code>myfirst</code> database.</li>\n<li>Now you can delete the database with this command, run <code>db.dropDatabase()</code>.this will delete selected database.</li>\n</ul>\n\n<p>hope this will help to you.</p>\n", "title": "How do I drop a MongoDB database from the command line?", "answer_id": 39071965, "question_id": 8857276, "tags": ["mongodb"]}], "link": "http://stackoverflow.com/questions/8857276/how-do-i-drop-a-mongodb-database-from-the-command-line", "question_id": 8857276}, {"body": "<p>Where does the Mac App Store download the files to under Lion? I need the DMG file in order to repair something in my system, but how can I access that file?</p>\n", "title": "How to download Xcode 4 / 5 / 6 / 7 / 8 and get the DMG file?", "tags": ["ios", "xcode6", "xcode4", "xcode5", "xcode7"], "answers": [{"body": "<p>Xcode 4.3 is distributes as an application. Not a bundle like Xcode 4.2 and earlier. If you want to reinstall Xcode you can just trash the Xcode application in the /Applications folder and download the application again via the Mac App Store.</p>\n", "title": "How to download Xcode 4 / 5 / 6 / 7 / 8 and get the DMG file?", "answer_id": 10335922, "question_id": 10335747, "tags": ["ios", "xcode6", "xcode4", "xcode5", "xcode7"]}, {"body": "<p>You can find the DMGs for Xcode and other development tools on <a href=\"https://developer.apple.com/download/more/\">https://developer.apple.com/download/more/</a> (requires Apple ID to login).</p>\n\n<p>You must login to have a valid session before downloading anything below.</p>\n\n<p>*(Newest on top. For each minor version (6.3, 5.1, etc.) <strong>only the latest revision is kept</strong> in the list.)</p>\n\n<ul>\n<li><strong>Xcode 8</strong>\n\n<ul>\n<li><a href=\"https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_8/Xcode_8.xip\">8.0</a></li>\n</ul></li>\n<li><strong>Xcode 7</strong>\n\n<ul>\n<li><a href=\"https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_7.3.1/Xcode_7.3.1.dmg\">7.3.1</a></li>\n<li><a href=\"https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_7.2.1/Xcode_7.2.1.dmg\">7.2.1</a> (Last version supporting OS X 10.10 Yosemite)</li>\n<li><a href=\"http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/Xcode_7.1.1/Xcode_7.1.1.dmg\">7.1.1</a></li>\n<li><a href=\"http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/Xcode_7.0.1/Xcode_7.0.1.dmg\">7.0.1</a></li>\n</ul></li>\n<li><strong>Xcode 6</strong>\n\n<ul>\n<li><a href=\"http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/Xcode_6.4/Xcode_6.4.dmg\">6.4</a></li>\n<li><a href=\"http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/Xcode_6.3.2/Xcode_6.3.2.dmg\">6.3.2</a></li>\n<li><a href=\"http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/Xcode_6.2/Xcode_6.2.dmg\">6.2</a></li>\n<li><a href=\"https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_6.1.1/xcode_6.1.1.dmg\">6.1.1</a></li>\n<li><a href=\"https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_6.0.1/xcode_6.0.1.dmg\">6.0.1</a></li>\n</ul></li>\n<li><strong>Xcode 5</strong>\n\n<ul>\n<li><a href=\"https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_5.1.1/xcode_5.1.1.dmg\">5.1.1</a></li>\n<li><a href=\"https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_5.0.2/xcode_5.0.2.dmg\">5.0.2</a></li>\n</ul></li>\n<li><strong>Xcode 4</strong>\n\n<ul>\n<li><a href=\"https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_4.6.3/xcode4630916281a.dmg\">4.6.3</a></li>\n<li><a href=\"https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_4.5.2/xcode4520418508a.dmg\">4.5.2</a></li>\n<li><a href=\"https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_4.4.1/xcode_4.4.1_6938145.dmg\">4.4.1</a></li>\n<li><a href=\"https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_4.3.2/xcode_432_lion.dmg\">4.3.2</a></li>\n<li><a href=\"http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_4.2_for_lion_21264/installxcode_42_lion.dmg\">4.2</a></li>\n<li><a href=\"http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_4.1_for_lion_21263/installxcode_41_lion.dmg\">4.1</a></li>\n<li><a href=\"http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_4.0.2_and_ios_sdk_4.3/xcode_4.0.2_and_ios_sdk_4.3.dmg\">4.0.2</a></li>\n</ul></li>\n<li><strong>Even Older Versions</strong>\n\n<ul>\n<li><a href=\"http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_3.2.6_and_ios_sdk_4.3__final/xcode_3.2.6_and_ios_sdk_4.3.dmg\">3.2.6</a></li>\n<li><a href=\"http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_3.1.4_developer_tools/xcode314_2809_developerdvd.dmg\">3.1.4</a></li>\n<li><a href=\"http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_3.0/xcode_3.0.dmg\">3.0</a></li>\n<li><a href=\"http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_2.5_developer_tools/xcode25_8m2558_developerdvd.dmg\">2.5</a></li>\n<li><a href=\"http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_2.4.1/xcode_2.4.1_8m1910_6936315.dmg\">2.4.1</a></li>\n<li><a href=\"http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_2.3/xcode_2.3_8m1780_oz693620813.dmg\">2.3</a></li>\n<li><a href=\"http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_tools_2.2.1/xcode_2.2.1_8g1165_018213632.dmg\">2.2.1</a></li>\n<li><a href=\"http://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_v1.5/xcode_tools_1.5_cd.dmg.bin\">1.5</a></li>\n<li><a href=\"http://developer.apple.com/devcenter/download.action?path=/Mac_OS_X/Mac_OS_X_10.3_Build_7B85/7B85_Xcode_CD.dmg\">1.0</a></li>\n</ul></li>\n</ul>\n", "title": "How to download Xcode 4 / 5 / 6 / 7 / 8 and get the DMG file?", "answer_id": 10335943, "question_id": 10335747, "tags": ["ios", "xcode6", "xcode4", "xcode5", "xcode7"]}, {"body": "<p>You can download all the developer tools at <a href=\"https://developer.apple.com/download/more/\" rel=\"nofollow\">https://developer.apple.com/download/more/</a>.</p>\n\n<p><em>(You must <a href=\"http://connect.apple.com/\" rel=\"nofollow\">login</a> before)</em>.</p>\n", "title": "How to download Xcode 4 / 5 / 6 / 7 / 8 and get the DMG file?", "answer_id": 12724297, "question_id": 10335747, "tags": ["ios", "xcode6", "xcode4", "xcode5", "xcode7"]}, {"body": "<p>Update: This url can be download by another way without app store!</p>\n\n<p><a href=\"http://adcdownload.apple.com/Developer_Tools/xcode_4.5.2/xcode4520418508a.dmg\" rel=\"nofollow\">http://adcdownload.apple.com/Developer_Tools/xcode_4.5.2/xcode4520418508a.dmg</a></p>\n", "title": "How to download Xcode 4 / 5 / 6 / 7 / 8 and get the DMG file?", "answer_id": 13364638, "question_id": 10335747, "tags": ["ios", "xcode6", "xcode4", "xcode5", "xcode7"]}, {"body": "<p>You need Apple's Developer License.\nGo to\n<a href=\"https://developer.apple.com/downloads/\">https://developer.apple.com/downloads/</a></p>\n\n<p>Or you can go to \n<a href=\"https://developer.apple.com/\">https://developer.apple.com/</a>\nand click Downloads.</p>\n\n<p>Uncheck everything other than Developer Tools.\nYou will see latest XCode on top.\nCurrently it's XCode 6.1\nDownload it and some supporting stuff like Command line tools, etc.</p>\n", "title": "How to download Xcode 4 / 5 / 6 / 7 / 8 and get the DMG file?", "answer_id": 26417919, "question_id": 10335747, "tags": ["ios", "xcode6", "xcode4", "xcode5", "xcode7"]}, {"body": "<p>You need to log in with AppleID   </p>\n\n<p>I got xcode 5 here after login, i clicked the link and it automatically started download</p>\n\n<p>For Xcode 5\n5.1.1: <a href=\"https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_5.1.1/xcode_5.1.1.dmg\" rel=\"nofollow\">https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_5.1.1/xcode_5.1.1.dmg</a></p>\n\n<p>5.0.2: <a href=\"https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_5.0.2/xcode_5.0.2.dmg\" rel=\"nofollow\">https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_5.0.2/xcode_5.0.2.dmg</a></p>\n", "title": "How to download Xcode 4 / 5 / 6 / 7 / 8 and get the DMG file?", "answer_id": 30231771, "question_id": 10335747, "tags": ["ios", "xcode6", "xcode4", "xcode5", "xcode7"]}, {"body": "<p>For Latest beta you can visit \n<a href=\"https://developer.apple.com/xcode/download/\">Here</a>\nFor Older or Appstore there is an additional tools link at the bottom of website\n<a href=\"https://developer.apple.com/downloads/\">Additional Tools</a>\n<a href=\"http://i.stack.imgur.com/ePr88.png\"><img src=\"http://i.stack.imgur.com/ePr88.png\" alt=\"enter image description here\"></a>\nit will promote you to login to your apple developer account,after that you will get access to Downloads for Apple Developers.there you can find available downloads from apple.\n<a href=\"http://i.stack.imgur.com/lWAVB.png\"><img src=\"http://i.stack.imgur.com/lWAVB.png\" alt=\"enter image description here\"></a></p>\n", "title": "How to download Xcode 4 / 5 / 6 / 7 / 8 and get the DMG file?", "answer_id": 32816015, "question_id": 10335747, "tags": ["ios", "xcode6", "xcode4", "xcode5", "xcode7"]}, {"body": "<p>You can download <code>dmg file</code> from <a href=\"https://developer.apple.com/downloads/\">Apple download section</a>.\nYou need to have <em>Apple account</em> in order to download it. If you don't have it then create a new account.</p>\n\n<p><a href=\"http://i.stack.imgur.com/94s8v.png\"><img src=\"http://i.stack.imgur.com/94s8v.png\" alt=\"URL for download\"></a></p>\n\n<p><a href=\"http://i.stack.imgur.com/uI8mZ.png\"><img src=\"http://i.stack.imgur.com/uI8mZ.png\" alt=\"Login into apple account\"></a></p>\n\n<p>Login with apple account and you can see <em>list of downloads for apple developers</em> as shown in screenshot.</p>\n\n<p>You can download <code>any Xcode version</code> by simply <em>clicking on dmg file</em> present on right hand side.</p>\n\n<p><a href=\"http://i.stack.imgur.com/8OZpR.png\"><img src=\"http://i.stack.imgur.com/8OZpR.png\" alt=\"List of downloads\"></a></p>\n", "title": "How to download Xcode 4 / 5 / 6 / 7 / 8 and get the DMG file?", "answer_id": 33773819, "question_id": 10335747, "tags": ["ios", "xcode6", "xcode4", "xcode5", "xcode7"]}, {"body": "<p>Apple appears to have changed the format of the download to a compressed file.  The common path still holds true though.</p>\n\n<ul>\n<li><strong>Xcode 8</strong>\n\n<ul>\n<li><a href=\"https://developer.apple.com/services-account/download?path=/Developer_Tools/Xcode_8/Xcode_8.xip\" rel=\"nofollow\">8.0</a></li>\n</ul></li>\n</ul>\n", "title": "How to download Xcode 4 / 5 / 6 / 7 / 8 and get the DMG file?", "answer_id": 39426068, "question_id": 10335747, "tags": ["ios", "xcode6", "xcode4", "xcode5", "xcode7"]}], "link": "http://stackoverflow.com/questions/10335747/how-to-download-xcode-4-5-6-7-8-and-get-the-dmg-file", "question_id": 10335747}, {"body": "<p>I had a problem with my mac where I couldn't save any kind of file on the disk anymore.\nI had to reboot OSX lion and reset the permissions on files and acls.</p>\n\n<p>But now when I want to commit a repository I get the following error from ssh:</p>\n\n<pre><code>Permissions 0777 for '/Users/username/.ssh/id_rsa' are too open.\nIt is recommended that your private key files are NOT accessible by others.\nThis private key will be ignored.\n</code></pre>\n\n<p>What permissions levels should i give to the id_rsa file?</p>\n", "title": "ssh &quot;permissions are too open&quot; error", "tags": ["permissions", "ssh"], "answers": [{"body": "<p>0600 is what mine is set at (and it's working)</p>\n", "title": "ssh &quot;permissions are too open&quot; error", "answer_id": 9270752, "question_id": 9270734, "tags": ["permissions", "ssh"]}, {"body": "<p>Keys need to be only readable by you:</p>\n\n<pre><code>chmod 400 ~/.ssh/id_rsa\n</code></pre>\n\n<p><strong>edit:</strong> <em>600</em> appears to be fine as well (in fact better, per comment), have a peek at <a href=\"http://bodhizazen.net/Tutorials/SSH_keys\">this article</a>.</p>\n\n<p><strong>edit again:</strong>\nThe relevant portion from the manpage (<code>man ssh</code>)</p>\n\n<blockquote>\n<pre><code> ~/.ssh/id_rsa\n         Contains the private key for authentication.  These files contain sensitive \n         data and should be readable by the user but not\n         accessible by others (read/write/execute).  ssh will simply ignore a private \n         key file if it is              \n         accessible by others.  It is possible to specify a\n         passphrase when generating the key which will be used to encrypt the sensitive \n         part of this file using 3DES.\n\n ~/.ssh/identity.pub\n ~/.ssh/id_dsa.pub\n ~/.ssh/id_ecdsa.pub\n ~/.ssh/id_rsa.pub\n         Contains the public key for authentication.  These files are not sensitive and \n         can (but need not) be readable by anyone.\n</code></pre>\n</blockquote>\n", "title": "ssh &quot;permissions are too open&quot; error", "answer_id": 9270753, "question_id": 9270734, "tags": ["permissions", "ssh"]}, {"body": "<p>There is one exception to the \"0x00\" permissions requirement on a key. If the key is owned by root and group-owned by a group with users in it, then it can be \"0440\" and any user in that group can use the key.</p>\n\n<p>I believe this will work with any permissions in the set \"0xx0\" but I haven't tested every combination with every version. I have tried 0660 with 5.3p1-84 on CentOS 6, and the group not the primary group of the user but a secondary group, and it works fine.</p>\n\n<p>This would typically not be done for someone's personal key, but for a key used for automation, in a situation where you don't want the application to be able to mess with the key.</p>\n\n<p>Similar rules apply to the .ssh directory restrictions.</p>\n", "title": "ssh &quot;permissions are too open&quot; error", "answer_id": 19960216, "question_id": 9270734, "tags": ["permissions", "ssh"]}, {"body": "<p>I am using VPC on EC2 and was getting the same error messages. I noticed I was using the public DNS. I changed that to the private DNS and vola!! it worked...</p>\n", "title": "ssh &quot;permissions are too open&quot; error", "answer_id": 22353211, "question_id": 9270734, "tags": ["permissions", "ssh"]}, {"body": "<p>what worked for me</p>\n\n<blockquote>\n  <p>chgrp Users FOLDER</p>\n  \n  <p>chmod 600 FOLDER</p>\n</blockquote>\n", "title": "ssh &quot;permissions are too open&quot; error", "answer_id": 22674741, "question_id": 9270734, "tags": ["permissions", "ssh"]}, {"body": "<p>Using Cygwin in Windows 8.1, there is a command need to be run:</p>\n\n<blockquote>\n  <p>chgrp Users ~/.ssh/id_rsa</p>\n</blockquote>\n\n<p>Then the solution posted here can be applied, 400 or 600 is OK.</p>\n\n<blockquote>\n  <p>chmod 600 ~/.ssh/id_rsa</p>\n</blockquote>\n\n<p>Ref: <a href=\"http://vineetgupta.com/blog/cygwin-permissions-bug-on-windows-8\">http://vineetgupta.com/blog/cygwin-permissions-bug-on-windows-8</a></p>\n", "title": "ssh &quot;permissions are too open&quot; error", "answer_id": 23011136, "question_id": 9270734, "tags": ["permissions", "ssh"]}, {"body": "<p>AFAIK the values are:</p>\n\n<p>700  for the hidden directory \".ssh\" where key file is located</p>\n\n<p>600  for the keyfile \"id_rsa\"</p>\n", "title": "ssh &quot;permissions are too open&quot; error", "answer_id": 26903916, "question_id": 9270734, "tags": ["permissions", "ssh"]}, {"body": "<p>The locale-independent solution that works on Windows 8.1 is:</p>\n\n<pre><code>chgrp 545 ~/.ssh/id_rsa\nchmod 600 ~/.ssh/id_rsa\n</code></pre>\n\n<p>GID 545 is a <a href=\"https://cygwin.com/cygwin-ug-net/ntsec.html\">special ID</a> that always refers to the 'Users' group, even if you locale uses a different word for Users.</p>\n", "title": "ssh &quot;permissions are too open&quot; error", "answer_id": 28647713, "question_id": 9270734, "tags": ["permissions", "ssh"]}, {"body": "<p>Intersting message here.\nOperating Syatems are smart enough to deny remote connections if your private key is too open. It understands the risk where permissions for id_rsa is wide open (read, is edittable by anyone).</p>\n\n<p>{ One might have changed your lock first and then open it with the keys he already had. }</p>\n\n<p><code>cd ~/.ssh; chmod 400 id_rsa</code></p>\n\n<p>PS: </p>\n\n<p>While working on the multiple servers (non-production), most of us feel need to connect remote server with ssh. A good idea is to have a pice of application level code (may be java using jsch) to create ssh trusts between servers. This way connection will be passwordless. Incase, perl is installed - one may use net ssh module too.</p>\n", "title": "ssh &quot;permissions are too open&quot; error", "answer_id": 30208484, "question_id": 9270734, "tags": ["permissions", "ssh"]}], "link": "http://stackoverflow.com/questions/9270734/ssh-permissions-are-too-open-error", "question_id": 9270734}, {"body": "<p>Is it possible to create an HTML fragment in an Angular controller and have this HTML shown in the view?</p>\n\n<p>This comes from a requirement to turn an inconsistent JSON blob into a nested list of <code>id : value</code> pairs. Therefore the HTML is created in the controller and I am now looking to display it.</p>\n\n<p>I have created a model property, but cannot render this in the view without it just printing the HTML.</p>\n\n<hr>\n\n<p>Update</p>\n\n<p>It appears that the problem arises from angular rendering the created HTML as a string within quotes. Will attempt to find a way around this.</p>\n\n<p>Example controller :</p>\n\n<pre><code>var SomeController = function () {\n\n    this.customHtml = '&lt;ul&gt;&lt;li&gt;render me please&lt;/li&gt;&lt;/ul&gt;';\n}\n</code></pre>\n\n<p>Example view :</p>\n\n<pre><code>&lt;div ng:bind=\"customHtml\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>Gives :</p>\n\n<pre><code>&lt;div&gt;\n    \"&lt;ul&gt;&lt;li&gt;render me please&lt;/li&gt;&lt;/ul&gt;\"\n&lt;/div&gt;\n</code></pre>\n", "title": "AngularJS : Insert HTML into view", "tags": ["javascript", "angularjs", "escaping", "html-sanitizing"], "answers": [{"body": "<p>For Angular 1.x, use <code>ng-bind-html</code> in the HTML:</p>\n\n<pre><code>&lt;div ng-bind-html=\"thisCanBeusedInsideNgBindHtml\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>At this point you would get a <code>attempting to use an unsafe value in a safe context</code> error so you need to either use <a href=\"https://docs.angularjs.org/api/ngSanitize/service/$sanitize\">ngSanitize</a> or <a href=\"https://docs.angularjs.org/api/ng/service/$sce\">$sce</a> to resolve that.</p>\n\n<h3>$sce</h3>\n\n<p>Use <code>$sce.trustAsHtml()</code> in the controller to convert the html string.</p>\n\n<pre><code> $scope.thisCanBeusedInsideNgBindHtml = $sce.trustAsHtml(someHtmlVar);\n</code></pre>\n\n<h3>ngSanitize</h3>\n\n<p>There are 2 steps:</p>\n\n<ol>\n<li><p>include the angular-sanitize.min.js resource, i.e.:<br>\n<code>&lt;script src=\"lib/angular/angular-sanitize.min.js\"&gt;&lt;/script&gt;</code></p></li>\n<li><p>In a js file (controller or usually app.js), include ngSanitize, i.e.:<br>\n<code>angular.module('myApp', ['myApp.filters', 'myApp.services', 'myApp.directives', 'ngSanitize'])</code></p></li>\n</ol>\n", "title": "AngularJS : Insert HTML into view", "answer_id": 10971756, "question_id": 9381926, "tags": ["javascript", "angularjs", "escaping", "html-sanitizing"]}, {"body": "<p>I have tried today, the only way I found was this</p>\n\n<p><code>&lt;div ng-bind-html-unsafe=\"expression\"&gt;&lt;/div&gt;</code></p>\n", "title": "AngularJS : Insert HTML into view", "answer_id": 11640420, "question_id": 9381926, "tags": ["javascript", "angularjs", "escaping", "html-sanitizing"]}, {"body": "<p>on html</p>\n\n<pre><code>&lt;div ng-controller=\"myAppController as myCtrl\"&gt;\n\n&lt;div ng-bind-html-unsafe=\"myCtrl.comment.msg\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>&lt;div ng-bind-html=\"myCtrl.comment.msg\"&gt;&lt;/div\n</code></pre>\n\n<p>on controller</p>\n\n<pre><code>mySceApp.controller(\"myAppController\", function myAppController( $sce) {\n\nthis.myCtrl.comment.msg = $sce.trustAsHtml(html);\n</code></pre>\n\n<p>works also with <code>$scope.comment.msg = $sce.trustAsHtml(html);</code></p>\n", "title": "AngularJS : Insert HTML into view", "answer_id": 20640671, "question_id": 9381926, "tags": ["javascript", "angularjs", "escaping", "html-sanitizing"]}, {"body": "<p>See the answers I posted for you in these two locations:</p>\n\n<p><a href=\"http://forum.ionicframework.com/t/eval-json-data-as-html/1455/6\" rel=\"nofollow\">http://forum.ionicframework.com/t/eval-json-data-as-html/1455/6</a></p>\n\n<p><a href=\"http://codepen.io/calendee/pen/DKhbc\" rel=\"nofollow\">http://codepen.io/calendee/pen/DKhbc</a></p>\n", "title": "AngularJS : Insert HTML into view", "answer_id": 22103573, "question_id": 9381926, "tags": ["javascript", "angularjs", "escaping", "html-sanitizing"]}, {"body": "<p><a href=\"http://stackoverflow.com/questions/21829275/angular-js-shows-html-within-the-tag\">Angular JS shows HTML within the tag</a> </p>\n\n<p>The solution provided in the above link worked for me, none of the options on this thread did. For anyone looking for the same thing with AngularJS version 1.2.9</p>\n\n<p>Here's a copy: </p>\n\n<blockquote>\n  <p>Ok I found solution for this:</p>\n  \n  <p>JS:</p>\n\n<pre><code>$scope.renderHtml = function(html_code)\n{\n    return $sce.trustAsHtml(html_code);\n};\n</code></pre>\n  \n  <p>HTML:</p>\n\n<pre><code>&lt;p ng-bind-html=\"renderHtml(value.button)\"&gt;&lt;/p&gt;\n</code></pre>\n</blockquote>\n\n<p>EDIT:</p>\n\n<p>Here's the set up:</p>\n\n<p>JS file:</p>\n\n<pre><code>angular.module('MyModule').controller('MyController', ['$scope', '$http', '$sce',\n    function ($scope, $http, $sce) {\n        $scope.renderHtml = function (htmlCode) {\n            return $sce.trustAsHtml(htmlCode);\n        };\n\n        $scope.body = '&lt;div style=\"width:200px; height:200px; border:1px solid blue;\"&gt;&lt;/div&gt;'; \n\n    }]);\n</code></pre>\n\n<p>HTML file:</p>\n\n<pre><code>&lt;div ng-controller=\"MyController\"&gt;\n    &lt;div ng-bind-html=\"renderHtml(body)\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n", "title": "AngularJS : Insert HTML into view", "answer_id": 22640608, "question_id": 9381926, "tags": ["javascript", "angularjs", "escaping", "html-sanitizing"]}, {"body": "<p>You can also create a filter like so:</p>\n\n<pre><code>var app = angular.module(\"demoApp\", ['ngResource']);\n\napp.filter(\"trust\", ['$sce', function($sce) {\n  return function(htmlCode){\n    return $sce.trustAsHtml(htmlCode);\n  }\n}]);\n</code></pre>\n\n<p>Then in the view</p>\n\n<pre><code>&lt;div ng-bind-html=\"trusted_html_variable | trust\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p><strong>Note</strong>:  This filter trusts any and all html passed to it, and could present an XSS vulnerability if variables with user input are passed to it.</p>\n", "title": "AngularJS : Insert HTML into view", "answer_id": 25513186, "question_id": 9381926, "tags": ["javascript", "angularjs", "escaping", "html-sanitizing"]}, {"body": "<p>I found that using ng-sanitize did not allow me to add ng-click in the html.</p>\n\n<p>To solve this I added a directive. Like this:</p>\n\n<pre><code>app.directive('htmldiv', function($compile, $parse) {\nreturn {\n  restrict: 'E',\n  link: function(scope, element, attr) {\n    scope.$watch(attr.content, function() {\n      element.html($parse(attr.content)(scope));\n      $compile(element.contents())(scope);\n    }, true);\n  }\n}\n});\n</code></pre>\n\n<p>And this is the HTML:</p>\n\n<pre><code>&lt;htmldiv content=\"theContent\"&gt;&lt;/htmldiv&gt;\n</code></pre>\n\n<p>Good luck.</p>\n", "title": "AngularJS : Insert HTML into view", "answer_id": 25983469, "question_id": 9381926, "tags": ["javascript", "angularjs", "escaping", "html-sanitizing"]}, {"body": "<p>Another solution, very similar to blrbr's except using a scoped attribute is:</p>\n\n<pre><code>angular.module('app')\n.directive('renderHtml', ['$compile', function ($compile) {\n    return {\n      restrict: 'E',\n      scope: {\n        html: '='\n      },\n      link: function postLink(scope, element, attrs) {\n\n          function appendHtml() {\n              if(scope.html) {\n                  var newElement = angular.element(scope.html);\n                  $compile(newElement)(scope);\n                  element.append(newElement);\n              }\n          }\n\n          scope.$watch(function() { return scope.html }, appendHtml);\n      }\n    };\n  }]);\n</code></pre>\n\n<p>And then </p>\n\n<pre><code>&lt;render-html html=\"htmlAsString\"&gt;&lt;/render-html&gt;\n</code></pre>\n\n<p>Note you may replace <code>element.append()</code> with <code>element.replaceWith()</code></p>\n", "title": "AngularJS : Insert HTML into view", "answer_id": 26144607, "question_id": 9381926, "tags": ["javascript", "angularjs", "escaping", "html-sanitizing"]}, {"body": "<p>Fortunately, you don't need any fancy filters or unsafe methods to avoid that error message. This is the complete implementation to properly output HTML markup in a view in the intended and safe way.</p>\n\n<p>The sanitize module must be included after Angular:</p>\n\n<pre><code>&lt;script src=\"//ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.js\"&gt;&lt;/script&gt;\n&lt;script src=\"//ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular-sanitize.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>Then, the module must be loaded:</p>\n\n<pre><code>angular.module('app', [\n  'ngSanitize'\n]);\n</code></pre>\n\n<p>This will allow you to include markup in a string from a controller, directive, etc:</p>\n\n<pre><code>scope.message = \"&lt;strong&gt;42&lt;/strong&gt; is the &lt;em&gt;answer&lt;/em&gt;.\";\n</code></pre>\n\n<p>Finally, in a template, it must be output like so:</p>\n\n<pre><code>&lt;p ng-bind-html=\"message\"&gt;&lt;/p&gt;\n</code></pre>\n\n<p>Which will produce the expected output: <strong>42</strong> is the <em>answer</em>.</p>\n", "title": "AngularJS : Insert HTML into view", "answer_id": 26411465, "question_id": 9381926, "tags": ["javascript", "angularjs", "escaping", "html-sanitizing"]}, {"body": "<p>you can also use <strong><em>ng-include</em></strong>. </p>\n\n<pre><code>&lt;div class=\"col-sm-9 TabContent_container\" ng-include=\"template/custom.html\"&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>you can use <strong><em>\"ng-show\"</em></strong> to show hide this template data.</p>\n", "title": "AngularJS : Insert HTML into view", "answer_id": 26419190, "question_id": 9381926, "tags": ["javascript", "angularjs", "escaping", "html-sanitizing"]}, {"body": "<p>there is one more solution for this problem using creating new <strong>attribute or directives</strong> in angular.</p>\n\n<p><strong><em>product-specs.html</em></strong> </p>\n\n<pre><code> &lt;h4&gt;Specs&lt;/h4&gt;\n        &lt;ul class=\"list-unstyled\"&gt;\n          &lt;li&gt;\n            &lt;strong&gt;Shine&lt;/strong&gt;\n            : {{product.shine}}&lt;/li&gt;\n          &lt;li&gt;\n            &lt;strong&gt;Faces&lt;/strong&gt;\n            : {{product.faces}}&lt;/li&gt;\n          &lt;li&gt;\n            &lt;strong&gt;Rarity&lt;/strong&gt;\n            : {{product.rarity}}&lt;/li&gt;\n          &lt;li&gt;\n            &lt;strong&gt;Color&lt;/strong&gt;\n            : {{product.color}}&lt;/li&gt;\n        &lt;/ul&gt;\n</code></pre>\n\n<p><strong><em>app.js</em></strong></p>\n\n<pre><code> (function() {\nvar app = angular.module('gemStore', []);    \napp.directive(\"     &lt;div ng-show=\"tab.isSet(2)\" product-specs&gt;\", function() {\nreturn {\n  restrict: 'E',\n  templateUrl: \"product-specs.html\"\n};\n});\n</code></pre>\n\n<p><strong><em>index.html</em></strong></p>\n\n<pre><code> &lt;div&gt;\n &lt;product-specs&gt;  &lt;/product-specs&gt;//it will load product-specs.html file here.\n &lt;/div&gt;\n</code></pre>\n\n<p>or </p>\n\n<pre><code>&lt;div  product-specs&gt;//it will add product-specs.html file \n</code></pre>\n\n<p>or </p>\n\n<pre><code>&lt;div ng-include=\"product-description.html\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p><a href=\"https://docs.angularjs.org/guide/directive\" rel=\"nofollow\">https://docs.angularjs.org/guide/directive</a></p>\n", "title": "AngularJS : Insert HTML into view", "answer_id": 26987488, "question_id": 9381926, "tags": ["javascript", "angularjs", "escaping", "html-sanitizing"]}, {"body": "<p>Just did this using ngBindHtml by following <a href=\"https://docs.angularjs.org/api/ng/directive/ngBindHtml\">angular(v1.4) docs</a>,</p>\n\n<pre><code>&lt;div ng-bind-html=\"expression\"&gt;&lt;/div&gt; \nand expression can be \"&lt;ul&gt;&lt;li&gt;render me please&lt;/li&gt;&lt;/ul&gt;\"\n</code></pre>\n\n<p>Make sure you include ngSanitize in the module's dependencies.\nThen it should work fine.</p>\n", "title": "AngularJS : Insert HTML into view", "answer_id": 29136320, "question_id": 9381926, "tags": ["javascript", "angularjs", "escaping", "html-sanitizing"]}, {"body": "<p><code>ng-bind-html-unsafe</code> no longer works.  </p>\n\n<p>This is the shortest way:</p>\n\n<p><strong>Create a filter:</strong></p>\n\n<pre><code>myApp.filter('unsafe', function($sce) { return $sce.trustAsHtml; });\n</code></pre>\n\n<p><strong>And in your view:</strong></p>\n\n<pre><code>&lt;div ng-bind-html=\"customHtml | unsafe\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>P.S. This method doesn't require you to include the <code>ngSanitize</code> module.</p>\n", "title": "AngularJS : Insert HTML into view", "answer_id": 32162706, "question_id": 9381926, "tags": ["javascript", "angularjs", "escaping", "html-sanitizing"]}], "link": "http://stackoverflow.com/questions/9381926/angularjs-insert-html-into-view", "question_id": 9381926}, {"body": "<p>I am using Git and I have committed few files using </p>\n\n<pre><code>git commit -a\n</code></pre>\n\n<p>Later, I found that a file had mistakenly been added to the commit.</p>\n\n<p>How can I remove a file from the last commit?</p>\n", "title": "Remove files from Git commit", "tags": ["git", "git-commit"], "answers": [{"body": "<p><strong>ATTENTION</strong>! If you only want to remove a file from your previous commit, and <em>keep it on disk</em>, read <a href=\"http://stackoverflow.com/a/15321456/11343\">juzzlin's answer</a> just above.</p>\n\n<p>If this is your last commit and you want to <strong>completely delete the file from your local and the remote repository</strong>, you can: </p>\n\n<ol>\n<li>remove the file <code>git rm &lt;file&gt;</code></li>\n<li>commit with amend flag: <code>git commit --amend</code></li>\n</ol>\n\n<p>The amend flag tells git to commit again, but \"merge\" (not in the sense of merging two branches) this commit with the last commit.</p>\n\n<p>And to say it like yo, the <code>rm</code> in the git command is doing what <code>rm</code> itself does!</p>\n", "title": "Remove files from Git commit", "answer_id": 12481977, "question_id": 12481639, "tags": ["git", "git-commit"]}, {"body": "<p>If you have not pushed the changes on the server you can use</p>\n\n<pre><code>git reset --soft HEAD~1\n</code></pre>\n\n<p>It will reset all the changes and revert to one  commit back</p>\n\n<p>If you have pushed your changes then follow steps as answered by @CharlesB</p>\n", "title": "Remove files from Git commit", "answer_id": 12482845, "question_id": 12481639, "tags": ["git", "git-commit"]}, {"body": "<p>Removing the file using rm will delete it!</p>\n\n<p>You're always adding to a commit in git rather than removing, so in this instance return the file to the state it was in prior to the first commit (this may be a delete 'rm' action if the file is new) and then re-commit and the file will go.</p>\n\n<p>To return the file to some previous state:</p>\n\n<pre><code>    git checkout &lt;commit_id&gt; &lt;path_to_file&gt;\n</code></pre>\n\n<p>or to return it to the state at the remote HEAD:</p>\n\n<pre><code>    git checkout origin/master &lt;path_to_file&gt;\n</code></pre>\n\n<p>then amend the commit and you should find the file has disappeared from the list (and not deleted from your disk!)</p>\n", "title": "Remove files from Git commit", "answer_id": 14563682, "question_id": 12481639, "tags": ["git", "git-commit"]}, {"body": "<p>I think other answers here are wrong, because this is a question of moving the mistakenly committed files back to the staging area from the previous commit, without cancelling the changes done to them. This can be done like Paritosh Singh suggested:</p>\n\n<pre><code>git reset --soft HEAD^ \n</code></pre>\n\n<p>or</p>\n\n<pre><code>git reset --soft HEAD~1\n</code></pre>\n\n<p>Then reset the unwanted files in order to leave them out from the commit:</p>\n\n<pre><code>git reset HEAD path/to/unwanted_file\n</code></pre>\n\n<p>Now commit again, you can even re-use the same commit message:</p>\n\n<pre><code>git commit -c ORIG_HEAD  \n</code></pre>\n", "title": "Remove files from Git commit", "answer_id": 15321456, "question_id": 12481639, "tags": ["git", "git-commit"]}, {"body": "<p>If you want to preserve your commit (maybe you already spent some time writing a detailed commit message and don't want to lose it), and you only want to remove the file from the commit, but not from the repository entirely:</p>\n\n<pre><code>git checkout origin/&lt;remote-branch&gt; &lt;filename&gt;\ngit commit --amend\n</code></pre>\n", "title": "Remove files from Git commit", "answer_id": 17155890, "question_id": 12481639, "tags": ["git", "git-commit"]}, {"body": "<pre><code>git checkout HEAD~ path/to/file\ngit commit --amend\n</code></pre>\n", "title": "Remove files from Git commit", "answer_id": 18410048, "question_id": 12481639, "tags": ["git", "git-commit"]}, {"body": "<p>This site <a href=\"http://sethrobertson.github.io/GitFixUm/fixup.html\" rel=\"nofollow\">On undoing, fixing, or removing commits in git</a> explains this in an interactive manner !</p>\n", "title": "Remove files from Git commit", "answer_id": 22433838, "question_id": 12481639, "tags": ["git", "git-commit"]}, {"body": "<p>Something that worked for me, but still think there should be a better solution:</p>\n\n<pre><code>$ git revert &lt;commit_id&gt;\n$ git reset HEAD~1 --hard\n</code></pre>\n\n<p>Just leave the change you want to discard in the other commit, check others out</p>\n\n<pre><code>$ git commit --amend // or stash and rebase to &lt;commit_id&gt; to amend changes\n</code></pre>\n", "title": "Remove files from Git commit", "answer_id": 25300710, "question_id": 12481639, "tags": ["git", "git-commit"]}, {"body": "<p>The following will unstage just the file you intended, which is what the OP asked.</p>\n\n<pre><code>git reset HEAD^ /path/to/file\n</code></pre>\n\n<p>You'll see something like the following...</p>\n\n<blockquote>\n  <p>Changes to be committed:   (use \"git reset HEAD ...\" to unstage)</p>\n  \n  <p>modified:   /path/to/file</p>\n  \n  <p>Changes not staged for commit:   (use \"git add ...\" to update\n  what will be committed)   (use \"git checkout -- ...\" to discard\n  changes in working directory)</p>\n  \n  <p>modified:   /path/to/file</p>\n</blockquote>\n\n<ul>\n<li>\"Changes to be committed\" is the previous version of the file before the commit.  This will look like a deletion if the file never existed.  If you commit this change, there will be a revision that reverts the change to the file in your branch.</li>\n<li>\"Changes not staged for commit\" is the change you committed, and the current state of the file</li>\n</ul>\n\n<p>At this point, you can do whatever you like to the file, such as resetting to a different version.  </p>\n\n<p>When you're ready to commit:</p>\n\n<pre><code>git commit --amend -a\n</code></pre>\n\n<p>or (if you've got some other changes going on that you don't want to commit, yet)</p>\n\n<pre><code>git commit add /path/to/file\ngit commit --amend\n</code></pre>\n", "title": "Remove files from Git commit", "answer_id": 27340569, "question_id": 12481639, "tags": ["git", "git-commit"]}, {"body": "<p>Existing answers are all talking about removing the unwanted files from the <strong><em>last</em></strong> commit.</p>\n\n<p>If you want to remove unwanted files from an <strong><em>old</em></strong> commit and don't want to create a new commit, which is unnecessary, because of the action:</p>\n\n<p>1.</p>\n\n<p>Find the commit that you want the file to conform to.</p>\n\n<pre><code>git checkout &lt;commit_id&gt; &lt;path_to_file&gt;\n</code></pre>\n\n<p>you can do this multiple times if you want to remove many files.</p>\n\n<p>2.</p>\n\n<pre><code>git commit -am \"remove unwanted files\"\n</code></pre>\n\n<p>3.</p>\n\n<p>Find the commit_id of the commit <strong>on which the files were added mistakenly</strong>, let's say \"35c23c2\" here</p>\n\n<pre><code>git rebase 35c23c2~1 -i  // notice: \"~1\" is necessary\n</code></pre>\n\n<p>This command opens the editor according to your settings. The default one is vim.</p>\n\n<p>Move the  last commit, which should be \"remove unwanted files\", to the next line of the incorrect commit(\"35c23c2\" in our case), and set the command as <code>fixup</code>:</p>\n\n<pre><code>pick 35c23c2 the first commit\nfixup 0d78b28 remove unwanted files\n</code></pre>\n\n<p>You should be good after saving the file.</p>\n\n<p>If you unfortunately get conflicts, you have to solve them manually.</p>\n", "title": "Remove files from Git commit", "answer_id": 28173964, "question_id": 12481639, "tags": ["git", "git-commit"]}, {"body": "<p>Using git GUI can simplify removing a file from the prior commit.</p>\n\n<p>Assuming that this isn't a shared branch and you don't mind <a href=\"https://git-scm.com/book/en/v2/Git-Tools-Rewriting-History\" rel=\"nofollow\">rewriting history</a>, then run:</p>\n\n<pre><code>git gui citool --amend\n</code></pre>\n\n<p>You can un-check the file that was mistakenly committed and then click \"Commit\".</p>\n\n<p><img src=\"http://i.stack.imgur.com/2t0XK.png\" alt=\"enter image description here\"></p>\n\n<p>The file is removed from the commit, but will be <em>kept on disk</em>.  So if you un-checked the file after mistakenly adding it, it will show in your untracked files list (and if you un-checked the file after mistakenly modifying it it will show in your changes not staged for commit list).</p>\n", "title": "Remove files from Git commit", "answer_id": 30311679, "question_id": 12481639, "tags": ["git", "git-commit"]}, {"body": "<p>Do a sequence of the following commands:    </p>\n\n<pre><code>//to remove the last commit, but preserve changes  \ngit reset --soft HEAD~1\n\n//to remove unneded file from the staging area  \ngit reset HEAD `&lt;your file&gt;` \n\n//finally make a new commit  \ngit commit -m 'Your message'\n</code></pre>\n", "title": "Remove files from Git commit", "answer_id": 32501145, "question_id": 12481639, "tags": ["git", "git-commit"]}, {"body": "<pre><code>git rm --cached &lt;file_to_remove_from_commit_&lt;commit_id&gt;_which_added_file&gt;\ngit commit -m \"removed unwanted file from git\"\n</code></pre>\n\n<p>will leave you the local file still. If you don't want the file locally either, you can skip the --cached option.</p>\n\n<p>If all work is on your local branch, you need to keep the file in a later commit, and like having a clean history, I think a simpler way to do this could be:</p>\n\n<pre><code>git rm --cached &lt;file_to_remove_from_commit_&lt;commit_id&gt;_which_added_file&gt;\ngit commit --squash &lt;commit_id&gt;\ngit add &lt;file_to_remove_from_commit_&lt;commit_id&gt;_which_added_file&gt;\ngit commit -m \"brand new file!\"\ngit rebase --interactive &lt;commit_id&gt;^\n</code></pre>\n\n<p>and you can then finish the rebase with ease without having to remember more complex commands or commit message or type as much.</p>\n", "title": "Remove files from Git commit", "answer_id": 35570291, "question_id": 12481639, "tags": ["git", "git-commit"]}, {"body": "<p>Actually, I think a quicker and easier way is to use git rebase interactive mode.</p>\n\n<pre><code>git rebase -i head~1  \n</code></pre>\n\n<p>(or head~4, how ever far you want to go)</p>\n\n<p>and then, instead of 'pick', use 'edit'.\nI did not realize how powerful 'edit' is.</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=2dQosJaLN18\" rel=\"nofollow\">https://www.youtube.com/watch?v=2dQosJaLN18</a></p>\n\n<p>Hope you will find it helpful.  </p>\n", "title": "Remove files from Git commit", "answer_id": 37333888, "question_id": 12481639, "tags": ["git", "git-commit"]}, {"body": "<p>Just wanted to complement the top answer as I had to run an extra command:</p>\n\n<pre><code>git reset --soft HEAD^\ngit checkout origin/master &lt;filepath&gt;\n</code></pre>\n\n<p>Cheers!</p>\n", "title": "Remove files from Git commit", "answer_id": 37441508, "question_id": 12481639, "tags": ["git", "git-commit"]}], "link": "http://stackoverflow.com/questions/12481639/remove-files-from-git-commit", "question_id": 12481639}, {"body": "<p>In my activity, I'm calling a second activity from the main activity by <code>startActivityForResult</code>. In my second activity there are some methods that finish this activity (maybe without result), however, just one of them return a result.</p>\n\n<p>For example, from the main activity I call a second one. In this activity I'm checking some features of handset such as does it have a camera. If it doesn't have then I'll close this activity. Also, during preparation of <code>MediaRecorder</code> or <code>MediaPlayer</code> if a problem happens then I'll close this activity.</p>\n\n<p>If its device has a camera and recording is done completely, then after recording a video if a user clicks on the done button then I'll send the result (address of the recorded video) back to main activity.</p>\n\n<p>How do I check the result from the main activity?</p>\n", "title": "How to manage `startActivityForResult` on Android?", "tags": ["android", "android-intent"], "answers": [{"body": "<blockquote>\n  <p>How to check the result from the main activity?</p>\n</blockquote>\n\n<p>You need to override <a href=\"http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29\"><code>Activity.onActivityResult()</code></a> then check its parameters: </p>\n\n<ul>\n<li><code>requestCode</code> identifies which app returned these results. This is defined by you when you call <code>startActivityForResult()</code>.</li>\n<li><code>resultCode</code> informs you whether this app succeeded, failed, or something different</li>\n<li><code>data</code> holds any information returned by this app. This may be <code>null</code>.</li>\n</ul>\n", "title": "How to manage `startActivityForResult` on Android?", "answer_id": 10407192, "question_id": 10407159, "tags": ["android", "android-intent"]}, {"body": "<p>From your <code>FirstActivity</code> call the <code>SecondActivity</code> using  <code>startActivityForResult()</code> method</p>\n\n<p>For example:</p>\n\n<pre><code>Intent i = new Intent(this, SecondActivity.class);\nstartActivityForResult(i, 1);\n</code></pre>\n\n<p>In your <code>SecondActivity</code> set the data which you want to return back to <code>FirstActivity</code>. If you don't want to return back, don't set any.</p>\n\n<p>For example: In secondActivity if you want to send back data:</p>\n\n<pre><code>Intent returnIntent = new Intent();\nreturnIntent.putExtra(\"result\",result);\nsetResult(Activity.RESULT_OK,returnIntent);\nfinish();\n</code></pre>\n\n<p>If you don't want to return data:</p>\n\n<pre><code>Intent returnIntent = new Intent();\nsetResult(Activity.RESULT_CANCELED, returnIntent);\nfinish();\n</code></pre>\n\n<p>Now in your FirstActivity class write following code for the <code>onActivityResult()</code> method.</p>\n\n<pre><code>@Override\nprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\n\n    if (requestCode == 1) {\n        if(resultCode == Activity.RESULT_OK){\n            String result=data.getStringExtra(\"result\");\n        }\n        if (resultCode == Activity.RESULT_CANCELED) {\n            //Write your code if there's no result\n        }\n    }\n}//onActivityResult\n</code></pre>\n\n<p><a class='doc-link' href=\"https://stackoverflow.com/documentation/android/103/intent/533/getting-a-result-from-an-activity#t=201607221535377858152\">Documentation on Returning a Result from an Activity</a></p>\n", "title": "How to manage `startActivityForResult` on Android?", "answer_id": 10407371, "question_id": 10407159, "tags": ["android", "android-intent"]}, {"body": "<p>If you want to update the user interface with activity result, you can't to use <code>this.runOnUiThread(new Runnable() {}</code>\nDoing this the UI won't refresh with new value. Instead, you can do this:</p>\n\n<pre><code>@Override\nprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n\n    if (resultCode == RESULT_CANCELED) {\n        return;\n    }\n\n    global_lat = data.getDoubleExtra(\"LATITUDE\", 0);\n    global_lng = data.getDoubleExtra(\"LONGITUDE\", 0);\n    new_latlng = true;\n}\n\n@Override\nprotected void onResume() {\n    super.onResume();\n\n    if(new_latlng)\n    {\n        PhysicalTagProperties.this.setLocation(global_lat, global_lng);\n        new_latlng=false;\n    }\n}\n</code></pre>\n\n<p>This seems silly but works pretty well.</p>\n", "title": "How to manage `startActivityForResult` on Android?", "answer_id": 22270232, "question_id": 10407159, "tags": ["android", "android-intent"]}, {"body": "<p>First you use <code>startActivityForResult()</code> with parameters in first <code>Activity</code> and if you want to send data from second <code>Activity</code> to first <code>Activity</code> then pass value using <code>Intent</code> with <code>setResult()</code> method and get that data inside <code>onActivityResult()</code> method in first <code>Activity</code>.</p>\n", "title": "How to manage `startActivityForResult` on Android?", "answer_id": 26120912, "question_id": 10407159, "tags": ["android", "android-intent"]}, {"body": "<p>Complementing the answer from @Nishant,the best way to return the activity result is:</p>\n\n<pre><code>Intent returnIntent = getIntent();\nreturnIntent.putExtra(\"result\",result);\nsetResult(RESULT_OK,returnIntent);\nfinish();\n</code></pre>\n\n<p>I was having problem with</p>\n\n<pre><code>new Intent();\n</code></pre>\n\n<p>Then I found out that the correct way is using </p>\n\n<pre><code>getIntent();\n</code></pre>\n\n<p>to get the current intent</p>\n", "title": "How to manage `startActivityForResult` on Android?", "answer_id": 30468476, "question_id": 10407159, "tags": ["android", "android-intent"]}, {"body": "<p>For those who have problem with <a href=\"http://stackoverflow.com/questions/10564474/wrong-requestcode-in-onactivityresult\">wrong requestCode in onActivityResult</a></p>\n\n<p>If you are calling <code>startActivityForResult()</code> from your <code>Fragment</code>, the requestCode is changed by the Activity that owns the Fragment.</p>\n\n<p>If you want to get the correct resultCode in your activity try this:</p>\n\n<p>Change:</p>\n\n<p><code>startActivityForResult(intent, 1);</code> To:</p>\n\n<p><code>getActivity().startActivityForResult(intent, 1);</code></p>\n", "title": "How to manage `startActivityForResult` on Android?", "answer_id": 33302951, "question_id": 10407159, "tags": ["android", "android-intent"]}], "link": "http://stackoverflow.com/questions/10407159/how-to-manage-startactivityforresult-on-android", "question_id": 10407159}, {"body": "<p>I was always under the impression that you could give a stash a name by doing <code>git stash save stashname</code>, which you could later on apply by doing <code>git stash apply stashname</code>. But it seems that in this case all that happens is that <code>stashname</code> will be used as the stash description.</p>\n\n<p>Is there no way to actually name a stash? If not, what would you recommend to achieve equivalent functionality? Essentially I have a small stash which I would periodically like to apply, but don't want to always have to hunt in <code>git stash list</code> what its actual stash number is.</p>\n", "title": "How to name and retrieve a stash by name in git?", "tags": ["git", "git-stash"], "answers": [{"body": "<p>Stashes are not meant to be permanent things like you want. You'd probably be better served using tags on commits. Construct the thing you want to stash. Make a commit out of it. Create a tag for that commit. Then roll back your branch to <code>HEAD^</code>. Now when you want to reapply that stash you can use <code>git cherry-pick -n tagname</code> (<code>-n</code> is <code>--no-commit</code>).</p>\n", "title": "How to name and retrieve a stash by name in git?", "answer_id": 11269321, "question_id": 11269256, "tags": ["git", "git-stash"]}, {"body": "<p>You can turn a stash into a branch if you feel it's important enough:</p>\n\n<pre><code>git stash branch &lt;branchname&gt; [&lt;stash&gt;]\n</code></pre>\n\n<p>from the man page:</p>\n\n<p>This creates and checks out a new branch named &lt;branchname&gt; starting from the commit at which the &lt;stash&gt; was originally created, applies the changes recorded in &lt;stash&gt; to the new working tree and index, then drops the &lt;stash&gt; if that completes successfully. When no &lt;stash&gt; is given, applies the latest one.</p>\n\n<p>This is useful if the branch on which you ran git stash save has changed enough that git stash apply fails due to conflicts. Since the stash is applied on top of the commit that was HEAD at the time git stash was run, it restores the originally stashed state with no conflicts.</p>\n\n<p>You can later rebase this new branch to some other place that's a descendent of where you were when you stashed.</p>\n", "title": "How to name and retrieve a stash by name in git?", "answer_id": 11269780, "question_id": 11269256, "tags": ["git", "git-stash"]}, {"body": "<p>You can actually find the stash by name using git's regular expression syntax for addressing objects:</p>\n\n<pre><code>stash^{/&lt;regex&gt;}\n:/&lt;regex&gt;\n</code></pre>\n\n<p>For example, when saving your stash with a save name:</p>\n\n<pre><code>git stash save \"guacamole sauce WIP\"\n</code></pre>\n\n<p>... you can use a regular expression to address that stash:</p>\n\n<pre><code>git stash apply stash^{/guacamo}\n</code></pre>\n\n<p>This will apply the youngest stash that matches the regular expression <code>guacamo</code>. That way, you don't have to know what number the stash is at in the stack, you just have to know its name. There is no terser syntax for this, but you can create an alias in your <code>.gitconfig</code> file:</p>\n\n<pre><code>[alias]\nsshow = \"!f() { git stash show stash^{/$*} -p; }; f\"\nsapply = \"!f() { git stash apply stash^{/$*}; }; f\"\n</code></pre>\n\n<p>You can then use <code>git sapply &lt;regex&gt;</code> to apply that stash (without dropping).<br> You can then use <code>git sshow &lt;regex&gt;</code> to show: files changed, insertions, and deletions</p>\n\n<p><strong>EDIT:</strong> Props to <a href=\"http://stackoverflow.com/a/3322412/46588\">this StackOverflow answer</a> on how to use bash arguments in git aliases.</p>\n\n<p><strong>EDIT 2:</strong> This answer used to contain <code>drop</code> and <code>list</code> aliases, but I've since removed them, since <code>drop</code> requires the <code>stash@{n}</code> syntax while <code>list</code> didn't filter the stashes at all. If anyone knows how to resolve a stash SHA-1 hash to a stash ref, then I could implement the other commands as well.</p>\n\n<p><strong>EDIT 3:</strong> Per <a href=\"http://stackoverflow.com/users/349555/isyi\">isyi</a>'s suggestion I've added a patch flag to show what the contents of the stash are when showing one.</p>\n", "title": "How to name and retrieve a stash by name in git?", "answer_id": 11688523, "question_id": 11269256, "tags": ["git", "git-stash"]}, {"body": "<p>This is how you do it:</p>\n\n<pre><code>git stash save \"my_stash\"\n</code></pre>\n\n<p>where \"my_stash\" is the stash name...</p>\n\n<p>Some more useful things to know: All the stashes are stored in a stack.\nType in :</p>\n\n<pre><code>git stash list\n</code></pre>\n\n<p>This will list down all your stashes.</p>\n\n<p>To apply a stash and remove it from the stash stack, You can give,</p>\n\n<pre><code>git stash pop stash@{n}\n</code></pre>\n\n<p>To apply a stash and keep it in the stash stack, type:</p>\n\n<pre><code>git stash apply stash@{n}\n</code></pre>\n\n<p>Where n in the index of the stashed change.</p>\n", "title": "How to name and retrieve a stash by name in git?", "answer_id": 15197232, "question_id": 11269256, "tags": ["git", "git-stash"]}, {"body": "<h3>Alias</h3>\n\n<p><code>sapply = \"!f() { git stash apply \\\"$(git stash list | awk -F: --posix -vpat=\\\"$*\\\" \\\"$ 0 ~ pat {print $ 1; exit}\\\")\\\"; }; f\"</code></p>\n\n<h3>Usage</h3>\n\n<p><code>git sapply \"&lt;regex&gt;\"</code></p>\n\n<ul>\n<li>compatible with Git for Windows</li>\n</ul>\n\n<p><em>Edit: I sticked to my original solution, but I see why majority would prefer Etan Reisner's version (above). So just for the record:</em></p>\n\n<pre><code>sapply = \"!f() { git stash apply \\\"$(git stash list | grep -E \\\"$*\\\" | awk \\\"{ print $ 1; }\\\" | sed -n \\\"s/://;1p\\\")\\\"; }; f\"\n</code></pre>\n", "title": "How to name and retrieve a stash by name in git?", "answer_id": 20229686, "question_id": 11269256, "tags": ["git", "git-stash"]}, {"body": "<p><strong>Alias</strong>\nThis might be a more direct syntax for Unix-like systems without needing to encapsulate in a function.\nAdd the following to ~/.gitconfig under [alias]</p>\n\n<pre><code>sshow = !sh -c 'git stash show stash^{/$*} -p' -\nsapply = !sh -c 'git stash apply stash^{/$*}' -\nssave = !sh -c 'git stash save \"${1}\"' -\n</code></pre>\n\n<p>Usage:\n    sapply <em>regex</em></p>\n\n<p>Example:\n    git sshow MySecretStash</p>\n\n<p>The hyphen at the end says take input from standard input.</p>\n", "title": "How to name and retrieve a stash by name in git?", "answer_id": 25452120, "question_id": 11269256, "tags": ["git", "git-stash"]}, {"body": "<p>For everything besides the stash creation, I'd propose another solution by introducing <a href=\"https://github.com/junegunn/fzf/\" rel=\"nofollow\">fzf</a> as a dependency. Recommend taking 5 minutes of your time and get introduced to it, as it is over-all great productivity booster.</p>\n\n<p>Anyway, a related excerpt from their <a href=\"https://github.com/junegunn/fzf/wiki/examples\" rel=\"nofollow\">examples page</a> offering stash searching. It's very easy to change the sciptlet to add additional functionality (like stash application or dropping):</p>\n\n<pre><code>fstash() {\n    local out q k sha\n    while out=$(\n            git stash list --pretty=\"%C(yellow)%h %&gt;(14)%Cgreen%cr %C(blue)%gs\" |\n            fzf --ansi --no-sort --query=\"$q\" --print-query \\\n                --expect=ctrl-d,ctrl-b); do\n        mapfile -t out &lt;&lt;&lt; \"$out\"\n        q=\"${out[0]}\"\n        k=\"${out[1]}\"\n        sha=\"${out[-1]}\"\n        sha=\"${sha%% *}\"\n        [[ -z \"$sha\" ]] &amp;&amp; continue\n        if [[ \"$k\" == 'ctrl-d' ]]; then\n            git diff $sha\n        elif [[ \"$k\" == 'ctrl-b' ]]; then\n            git stash branch \"stash-$sha\" $sha\n            break;\n        else\n            git stash show -p $sha\n        fi\n    done\n}\n</code></pre>\n", "title": "How to name and retrieve a stash by name in git?", "answer_id": 39425845, "question_id": 11269256, "tags": ["git", "git-stash"]}], "link": "http://stackoverflow.com/questions/11269256/how-to-name-and-retrieve-a-stash-by-name-in-git", "question_id": 11269256}, {"body": "<p>I was doing some work in my repository and noticed a file has local changes. I didn't want them anymore so I deleted the file, thinking I can just checkout a fresh copy. I wanted to do the git equivalent of</p>\n\n<pre><code>svn up .\n</code></pre>\n\n<p>Using <code>git pull</code> didn't seem to work. Some random searching led me to a site where someone recommended doing</p>\n\n<pre><code>git checkout HEAD^ src/\n</code></pre>\n\n<p>(<code>src</code> is the directory containing the deleted file). </p>\n\n<p><strong>Now I find out I have a detached head. I have no idea what that is. How can I undo?</strong></p>\n", "title": "Fix a Git detached head?", "tags": ["git"], "answers": [{"body": "<p>When you check out a specific commit in <code>git</code>, you end up in a <em>detached head</em> state...that is, your working copy no longer reflects the state of a named reference (like \"master\").  This is useful for examining the past state of the repository, but not what you want if you're actually trying to revert changes.</p>\n\n<p>If you have made changes to a particular file and you simply want to discard them, you can use the <code>checkout</code> command like this:</p>\n\n<pre><code>git checkout myfile\n</code></pre>\n\n<p>This will discard any uncommitted changes and revert the file to whatever state it has in the head of your current branch.  If you want to discard changes that you have already committed, you may want to use the <code>reset</code> command.  For example, this will reset the repository to the state of the previous commit, discarding any subsequent changes:</p>\n\n<pre><code>git reset --hard HEAD^\n</code></pre>\n\n<p>However, if you are sharing the repository with other people, a <code>git reset</code> can be disruptive (because it erases a portion of the repository history).  If you have already shared changes with other people, you generally want to look at <code>git revert</code> instead, which generates an \"anticommit\" -- that is, it creates a new commit that \"undoes\" the changes in question.</p>\n\n<p><a href=\"http://book.git-scm.com/5_git_hooks.html\">The Git Book</a> has more details.</p>\n", "title": "Fix a Git detached head?", "answer_id": 10229188, "question_id": 10228760, "tags": ["git"]}, {"body": "<p>Detached head means you are no longer on a branch, you have checked out a single commit in the history (in this case the commit previous to HEAD, i.e. HEAD^).</p>\n\n<p>You only need to checkout the branch you were on, e.g. </p>\n\n<pre><code>git checkout master\n</code></pre>\n\n<p>Next time you have changed a file and want to restore it to the state it is in the index, don't delete the file first, just do</p>\n\n<pre><code>git checkout -- path/to/foo\n</code></pre>\n\n<p>This will restore the file foo to the state it is in the index. </p>\n", "title": "Fix a Git detached head?", "answer_id": 10229202, "question_id": 10228760, "tags": ["git"]}, {"body": "<p>How to exit (\u201cfix\u201d) detached HEAD state <em>when you already changed something in this mode</em> and want to <em>save your changes</em>. (That part is optional though.)</p>\n\n<ol>\n<li><p><strong>Commit changes you want to keep.</strong> If you want to take over any of the changes you made in detached HEAD state, commit them. Like:</p>\n\n<pre><code>git commit -a -m \"your commit message\"\n</code></pre></li>\n<li><p><strong>Discard changes you do not want to keep.</strong> The hard reset will discard any uncommitted changes that you made in detached HEAD state:</p>\n\n<pre><code>git reset --hard\n</code></pre>\n\n<p>(Without this, step 3 would fail, complaining about modified uncommitted files in the detached HEAD.)</p></li>\n<li><p><strong>Check out your branch.</strong> Exit detached HEAD state by checking out the branch you worked on before, for example:</p>\n\n<pre><code>git checkout master\n</code></pre></li>\n<li><p><strong>Take over your commits.</strong> You can now take over the commits you made in detached HEAD state by cherry-picking, as shown in <a href=\"http://stackoverflow.com/a/15774498/1270008\">my answer to another question</a>.</p>\n\n<pre><code>git reflog\ngit cherry-pick &lt;hash1&gt; &lt;hash2&gt; &lt;hash3&gt; \u2026\n</code></pre></li>\n</ol>\n", "title": "Fix a Git detached head?", "answer_id": 17045215, "question_id": 10228760, "tags": ["git"]}, {"body": "<p>If you have changed files you don't want to lose, you can push them. I have committed them in the detached mode and after that you can move to a temporary branch to integrate later in master.</p>\n\n<pre><code>git commit -m \".....\"\ngit branch my-temporary-work\ngit checkout master\ngit merge my-temporary-work\n</code></pre>\n\n<p>Extracted from: </p>\n\n<p><a href=\"http://stackoverflow.com/questions/7124486/what-to-do-with-commit-made-in-a-detached-head/7124513#7124513\">What to do with commit made in a detached head</a></p>\n", "title": "Fix a Git detached head?", "answer_id": 20479669, "question_id": 10228760, "tags": ["git"]}, {"body": "<pre><code>git pull origin master\n</code></pre>\n\n<p>worked for me. It was just about giving remote and branch name explicitly.</p>\n", "title": "Fix a Git detached head?", "answer_id": 23657204, "question_id": 10228760, "tags": ["git"]}, {"body": "<p>Here's what I just did after I realized I was on a detached head and had already made some changes.</p>\n\n<p>I committed the changes.</p>\n\n<pre><code>$ git commit -m \"...\"\n[detached HEAD 1fe56ad] ...\n</code></pre>\n\n<p>I remembered the hash (1fe56ad) of the commit. Then I checked out the branch I should have been on.</p>\n\n<pre><code>$ git checkout master\nSwitched to branch 'master'\n</code></pre>\n\n<p>Finally I applied the changes of the commit to the branch.</p>\n\n<pre><code>$ git cherry-pick 1fe56ad\n[master 0b05f1e] ...\n</code></pre>\n\n<p>I think this is a bit easier than creating a temporary branch.</p>\n", "title": "Fix a Git detached head?", "answer_id": 25100306, "question_id": 10228760, "tags": ["git"]}, {"body": "<p>If you made some changes and then realized that you are on a detached head, there is a simple solution for that: stash -> checkout master -> stash pop:</p>\n\n<pre><code>git stash\ngit checkout master   # Fix the detached head state\ngit stash pop         # ... or for extra safety use 'stash apply' then later \n                      # after fixing everything do 'stash drop'\n</code></pre>\n\n<p>You will have your uncommited changes and normal \"attached\" HEAD, like nothing happened.</p>\n", "title": "Fix a Git detached head?", "answer_id": 27735365, "question_id": 10228760, "tags": ["git"]}, {"body": "<p>In my case, I run <code>git status</code> and I saw that I had a few untracked files on my working directory.</p>\n\n<p>I just had to clean them (since I didn't need them) to run the rebase I wanted to perform.</p>\n", "title": "Fix a Git detached head?", "answer_id": 30944357, "question_id": 10228760, "tags": ["git"]}, {"body": "<p>Since \"detached head state\" has you on a temp branch, just use <code>git checkout -</code> which puts you on the last branch you were currently on.</p>\n", "title": "Fix a Git detached head?", "answer_id": 33834631, "question_id": 10228760, "tags": ["git"]}, {"body": "<p><strong>Addendum</strong></p>\n\n<p>If the branch to which you wish to return was the last checkout that you had made, you can simply use <code>checkout @{-1}</code>. This will take you back to your previous checkout. </p>\n\n<p>Further, you can alias this command with, for example, <code>git global --config alias.prev</code> so that you just need to type <code>git prev</code> to toggle back to the previous checkout.</p>\n", "title": "Fix a Git detached head?", "answer_id": 34945280, "question_id": 10228760, "tags": ["git"]}, {"body": "<p>Detached head means: \n (1)  You are no longer on a branch, \n (2) You have checked out a single commit in the history</p>\n\n<p>\u00a0<strong>if you have no changes:</strong> you can switch to master by applying the following command</p>\n\n<pre><code>  git checkout master\n</code></pre>\n\n<p><strong>if you have changes that you want to keep:</strong> </p>\n\n<p>In case of detached HEAD, commits work like normal, except no named branch gets updated.\u00a0 To get master branch updated \nwith your committed changes, make a temporary branch where you are (this way the temporary branch will have all the committed changes you have made in the detached HEAD) , then switch to the master branch and merge the temporary branch with the master. </p>\n\n<pre><code>git branch  temp\ngit checkout master\ngit merge temp\n</code></pre>\n", "title": "Fix a Git detached head?", "answer_id": 39197098, "question_id": 10228760, "tags": ["git"]}], "link": "http://stackoverflow.com/questions/10228760/fix-a-git-detached-head", "question_id": 10228760}, {"body": "<p>C and C++ have many differences, and not all valid C code is valid C++ code.<br>\n(By \"valid\" I mean standard code with defined behavior, i.e. not implementation-specific/undefined/etc.)</p>\n\n<p>Is there any scenario in which a piece of code valid in both C and C++ would produce <em>different</em> behavior when compiled with a standard compiler in each language?</p>\n\n<p>To make it a reasonable/useful comparison (I'm trying to learn something practically useful, not to try to find obvious loopholes in the question), let's assume:</p>\n\n<ul>\n<li>Nothing preprocessor-related (which means no hacks with <code>#ifdef __cplusplus</code>, pragmas, etc.)  </li>\n<li>Anything implementation-defined is the same in both languages (e.g. numeric limits, etc.)</li>\n<li>We're comparing reasonably recent versions of each standard (e.g. say, C++98 and C90 or later)<br>\nIf the versions matter, then please mention which versions of each produce different behavior.</li>\n</ul>\n", "title": "Can code that is valid in both C and C++ produce different behavior when compiled in each language?", "tags": ["c++", "c"], "answers": [{"body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    printf(\"%d\\n\", (int)sizeof('a'));\n    return 0;\n}\n</code></pre>\n\n<p>In C, this prints whatever the value of <code>sizeof(int)</code> is on the current system, which is typically <code>4</code> in most systems commonly in use today.</p>\n\n<p>In C++, this must print 1.</p>\n", "title": "Can code that is valid in both C and C++ produce different behavior when compiled in each language?", "answer_id": 579836, "question_id": 12887700, "tags": ["c++", "c"]}, {"body": "<p>An old chestnut that depends on the C compiler, not recognizing C++ end-of-line comments...</p>\n\n<pre><code>...\nint a = 4 //* */ 2\n        +2;\nprintf(\"%i\\n\",a);\n...\n</code></pre>\n", "title": "Can code that is valid in both C and C++ produce different behavior when compiled in each language?", "answer_id": 579945, "question_id": 12887700, "tags": ["c++", "c"]}, {"body": "<p><em>The C++ Programming Language (3rd Edition)</em> gives three examples:</p>\n\n<ol>\n<li><p>sizeof('a'), as @Adam Rosenfield mentioned;</p></li>\n<li><p><code>//</code> comments being used to create hidden code:</p></li>\n</ol>\n\n<p>.</p>\n\n<pre><code>int f(int a, int b)\n{\n    return a //* blah */ b\n        ;\n}\n</code></pre>\n\n<p>3) Structures etc. hiding stuff in out scopes, as in your example.</p>\n", "title": "Can code that is valid in both C and C++ produce different behavior when compiled in each language?", "answer_id": 579951, "question_id": 12887700, "tags": ["c++", "c"]}, {"body": "<pre><code>struct abort\n{\n    int x;\n};\n\nint main()\n{\n    abort();\n    return 0;\n}\n</code></pre>\n\n<p>Returns with exit code of 0 in C++, or 3 in C.</p>\n\n<p>This trick could probably be used to do something more interesting, but I couldn't think of a good way of creating a constructor that would be palatable to C. I tried making a similarly boring example with the copy constructor, that would let an argument be passed, albeit in a rather non-portable fashion:</p>\n\n<pre><code>struct exit\n{\n    int x;\n};\n\nint main()\n{\n    struct exit code;\n    code.x=1;\n\n    exit(code);\n\n    return 0;\n}\n</code></pre>\n\n<p>VC++ 2005 refused to compile that in C++ mode, though, complaining about how \"exit code\" was redefined. (I think this is a compiler bug, unless I've suddenly forgotten how to program.) It exited with a process exit code of 1 when compiled as C though.</p>\n", "title": "Can code that is valid in both C and C++ produce different behavior when compiled in each language?", "answer_id": 579955, "question_id": 12887700, "tags": ["c++", "c"]}, {"body": "<p>Another one listed by the C++ Standard:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint x[1];\nint main(void) {\n    struct x { int a[2]; };\n    /* size of the array in C */\n    /* size of the struct in C++ */\n    printf(\"%d\\n\", (int)sizeof(x)); \n}\n</code></pre>\n", "title": "Can code that is valid in both C and C++ produce different behavior when compiled in each language?", "answer_id": 579998, "question_id": 12887700, "tags": ["c++", "c"]}, {"body": "<p>The following, valid in C and C++, is going to (most likely) result in different values in <code>i</code> in C and C++:</p>\n\n<pre><code>int i = sizeof('a');\n</code></pre>\n\n<p>See <a href=\"http://stackoverflow.com/questions/2172943/size-of-character-a-in-c-c\">Size of character (&#39;a&#39;) in C/C++</a> for an explanation of the difference.</p>\n\n<p><strong>UPDATE:</strong> Another one from <a href=\"http://david.tribble.com/text/cdiffs.htm\">this article</a>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint  sz = 80;\n\nint main(void)\n{\n    struct sz { char c; };\n\n    int val = sizeof(sz);      // sizeof(int) in C,\n                               // sizeof(struct sz) in C++\n    printf(\"%d\\n\", val);\n    return 0;\n}\n</code></pre>\n", "title": "Can code that is valid in both C and C++ produce different behavior when compiled in each language?", "answer_id": 12887719, "question_id": 12887700, "tags": ["c++", "c"]}, {"body": "<p>Here is an example that takes advantage of the difference between function calls and object declarations in C and C++, as well as the fact that C90 allows the calling of undeclared functions:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct f { int x; };\n\nint main() {\n    f();\n}\n\nint f() {\n    return printf(\"hello\");\n}\n</code></pre>\n\n<p>In C++ this will print nothing because a temporary <code>f</code> is created and destroyed, but in C90 it will print <code>hello</code> because functions can be called without having been declared.</p>\n\n<p>In case you were wondering about the name <code>f</code> being used twice, the C and C++ standards explicitly allows this, and to make an object you have to say <code>struct f</code> to disambiguate if you want the structure, or leave off <code>struct</code> if you want the function.</p>\n", "title": "Can code that is valid in both C and C++ produce different behavior when compiled in each language?", "answer_id": 12887839, "question_id": 12887700, "tags": ["c++", "c"]}, {"body": "<p>Per C++11 standard:</p>\n\n<p><strong>a.</strong> The comma operator performs lvalue-to-rvalue conversion in C but not C++:</p>\n\n<pre><code>   char arr[100];\n   int s = sizeof(0, arr);       // The comma operator is used.\n</code></pre>\n\n<p>In C++ the value of this expression will be 100 and in C this will be <code>sizeof(char*)</code>.</p>\n\n<p><strong>b.</strong> In C++ the type of enumerator is its enum. In C the type of enumerator is int.</p>\n\n<pre><code>   enum E { a, b, c };\n   sizeof(a) == sizeof(int);     // In C\n   sizeof(a) == sizeof(E);       // In C++\n</code></pre>\n\n<p>And at the same time <code>sizeof(int)</code> may not be equal to <code>sizeof(E)</code>.</p>\n\n<p><strong>c.</strong> In C++ a function declared with empty params list takes no arguments. In C empty params list mean that the number and type of function params is unknown.</p>\n\n<pre><code>   int f();           // int f(void) in C++\n                      // int f(*unknown*) in C\n</code></pre>\n", "title": "Can code that is valid in both C and C++ produce different behavior when compiled in each language?", "answer_id": 12887996, "question_id": 12887700, "tags": ["c++", "c"]}, {"body": "<p>C90 vs. C++11 (<code>int</code> vs. <code>double</code>):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n  auto j = 1.5;\n  printf(\"%d\", (int)sizeof(j));\n  return 0;\n}\n</code></pre>\n\n<p>In C <code>auto</code> means local variable. In C90 it's ok to omit variable or function type. It defaults to <code>int</code>. In C++11 <code>auto</code> means something completely different, it tells the compiler to infer the type of the variable from the value used to initialize it.</p>\n", "title": "Can code that is valid in both C and C++ produce different behavior when compiled in each language?", "answer_id": 12888281, "question_id": 12887700, "tags": ["c++", "c"]}, {"body": "<p>For C++ vs. C90, there's at least one way to get different behavior that's not implementation defined. C90 doesn't have single-line comments. With a little care, we can use that to create an expression with entirely different results in C90 and in C++.</p>\n\n<pre><code>int a = 10 //* comment */ 2 \n        + 3;\n</code></pre>\n\n<p>In C++, everything from the <code>//</code> to the end of the line is a comment, so this works out as:</p>\n\n<pre><code>int a = 10 + 3;\n</code></pre>\n\n<p>Since C90 doesn't have single-line comments, only the <code>/* comment */</code> is a comment. The first <code>/</code> and the <code>2</code> are both parts of the initialization, so it comes out to:</p>\n\n<pre><code>int a = 10 / 2 + 3;\n</code></pre>\n\n<p>So, a correct C++ compiler will give 13, but a correct C compiler 8. Of course, I just picked arbitrary numbers here -- you can use other numbers as you see fit.</p>\n", "title": "Can code that is valid in both C and C++ produce different behavior when compiled in each language?", "answer_id": 12890117, "question_id": 12887700, "tags": ["c++", "c"]}, {"body": "<p>Inline functions in C default to external scope where as those in C++ do not.</p>\n\n<p>Compiling the following two files together would print the \"I am inline\" in case of GNU C but nothing for C++.</p>\n\n<p>File 1</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct fun{};\n\nint main()\n{\n    fun();  // In C, this calls the inline function from file 2 where as in C++\n            // this would create a variable of struct fun\n    return 0;\n}\n</code></pre>\n\n<p>File 2</p>\n\n<pre><code>#include &lt;stdio.h&gt;\ninline void fun(void)\n{\n    printf(\"I am inline\\n\");\n} \n</code></pre>\n\n<p>Also, C++ implicitly treats any <code>const</code> global as <code>static</code> unless it is explicitly declared <code>extern</code>, unlike C in which <code>extern</code> is the default.</p>\n", "title": "Can code that is valid in both C and C++ produce different behavior when compiled in each language?", "answer_id": 12894377, "question_id": 12887700, "tags": ["c++", "c"]}, {"body": "<p>Another <code>sizeof</code> trap: boolean expressions.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\n    printf(\"%d\\n\", (int)sizeof !0);\n}\n</code></pre>\n\n<p>It equals to <code>sizeof(int)</code> in C, because the expression is of type <code>int</code>, but is typically 1 in C++ (though it's not required to be). In practice they are almost always different.</p>\n", "title": "Can code that is valid in both C and C++ produce different behavior when compiled in each language?", "answer_id": 12894970, "question_id": 12887700, "tags": ["c++", "c"]}, {"body": "<p>Another example that I haven't seen mentioned yet, this one highlighting a preprocessor difference:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n#if true\n    printf(\"true!\\n\");\n#else\n    printf(\"false!\\n\");\n#endif\n    return 0;\n}\n</code></pre>\n\n<p>This prints \"false\" in C and \"true\" in C++ - In C, any undefined macro evaluates to 0.  In C++, there's 1 exception: \"true\" evaluates to 1.</p>\n", "title": "Can code that is valid in both C and C++ produce different behavior when compiled in each language?", "answer_id": 12926158, "question_id": 12887700, "tags": ["c++", "c"]}, {"body": "<p>This program prints <code>1</code> in C++ and <code>0</code> in C:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    int d = (int)(abs(0.6) + 0.5);\n    printf(\"%d\", d);\n    return 0;\n}\n</code></pre>\n\n<p>This happens because there is <code>double abs(double)</code> overload in C++, so <code>abs(0.6)</code> returns <code>0.6</code> while in C it returns <code>0</code> because of implicit double-to-int conversion before invoking <code>int abs(int)</code>. In C, you have to use <code>fabs</code> to work with <code>double</code>.</p>\n", "title": "Can code that is valid in both C and C++ produce different behavior when compiled in each language?", "answer_id": 13889589, "question_id": 12887700, "tags": ["c++", "c"]}, {"body": "<p>Don't forget the distinction between the C and C++ global namespaces. Suppose you have a <strong>foo.cpp</strong></p>\n\n<pre><code>#include &lt;cstdio&gt;\n\nvoid foo(int r)\n{\n  printf(\"I am C++\\n\");\n}\n</code></pre>\n\n<p>and a <strong>foo2.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid foo(int r)\n{\n  printf(\"I am C\\n\");\n}\n</code></pre>\n\n<p>Now suppose you have a <strong>main.c</strong> and <strong>main.cpp</strong> which both look like this:</p>\n\n<pre><code>extern void foo(int);\n\nint main(void)\n{\n  foo(1);\n  return 0;\n}\n</code></pre>\n\n<p>When compiled as C++, it will use the symbol in the C++ global namespace; in C it will use the C one:</p>\n\n<pre><code>$ diff main.cpp main.c\n$ gcc -o test main.cpp foo.cpp foo2.c\n$ ./test \nI am C++\n$ gcc -o test main.c foo.cpp foo2.c\n$ ./test \nI am C\n</code></pre>\n", "title": "Can code that is valid in both C and C++ produce different behavior when compiled in each language?", "answer_id": 26421966, "question_id": 12887700, "tags": ["c++", "c"]}, {"body": "<pre><code>#include &lt;stdio.h&gt;\n\nstruct A {\n    double a[32];\n};\n\nint main() {\n    struct B {\n        struct A {\n            short a, b;\n        } a;\n    };\n    printf(\"%d\\n\", sizeof(struct A));\n    return 0;\n}\n</code></pre>\n\n<p>This program prints <code>128</code> (<code>32 * sizeof(double)</code>) when compiled using a C++ compiler and <code>4</code> when compiled using a C compiler.</p>\n\n<p>This is because C does not have the notion of scope resolution. In C structures contained in other structures get put into the scope of the outer structure.</p>\n", "title": "Can code that is valid in both C and C++ produce different behavior when compiled in each language?", "answer_id": 32187257, "question_id": 12887700, "tags": ["c++", "c"]}], "link": "http://stackoverflow.com/questions/12887700/can-code-that-is-valid-in-both-c-and-c-produce-different-behavior-when-compile", "question_id": 12887700}, {"body": "<p>Does Python have something like an empty string variable where you can do?:</p>\n\n<pre><code>if myString == string.empty:\n</code></pre>\n\n<p>Regardless what's the most elegant way to check for empty string values? I find hardcoding <code>\"\"</code> every time for checking an empty string not as good.</p>\n", "title": "Most elegant way to check if the string is empty in Python?", "tags": ["python", "string"], "answers": [{"body": "<p>Empty strings are <a href=\"http://docs.python.org/2/library/stdtypes.html#truth-value-testing\">\"falsy\"</a> which means they are considered false in a Boolean context, so you can just do this:</p>\n\n<pre><code>if not myString:\n</code></pre>\n\n<p>This is the preferred way if you know that your variable is a string.  If your variable could also be some other type then you should use <code>myString == \"\"</code>.  See the documentation on <a href=\"http://docs.python.org/library/stdtypes.html#truth-value-testing\">Truth Value Testing</a> for other values that are false in Boolean contexts.</p>\n", "title": "Most elegant way to check if the string is empty in Python?", "answer_id": 9573259, "question_id": 9573244, "tags": ["python", "string"]}, {"body": "<p>The most elegant way would probably be to simply check if its true or falsy, e.g.:</p>\n\n<pre><code>if not my_string:\n</code></pre>\n\n<p>However, you may want to strip white space because:</p>\n\n<pre><code> &gt;&gt;&gt; bool(\"\")\n False\n &gt;&gt;&gt; bool(\"   \")\n True\n &gt;&gt;&gt; bool(\"   \".strip())\n False\n</code></pre>\n\n<p>You should probably be a bit more explicit in this however, unless you know for sure that this string has passed some kind of validation and is a string that can be tested this way.</p>\n", "title": "Most elegant way to check if the string is empty in Python?", "answer_id": 9573278, "question_id": 9573244, "tags": ["python", "string"]}, {"body": "<p>From <a href=\"http://www.python.org/dev/peps/pep-0008/\">PEP 8</a>, in the <a href=\"https://www.python.org/dev/peps/pep-0008/#programming-recommendations\">\u201cProgramming Recommendations\u201d section</a>:</p>\n\n<blockquote>\n  <p>For sequences, (strings, lists, tuples), use the fact that empty sequences are false.</p>\n</blockquote>\n\n<p>So you should use:</p>\n\n<pre><code>if not some_string:\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>if some_string:\n</code></pre>\n\n<p>Just to clarify, sequences are <strong>evaluated</strong> to <code>False</code> or <code>True</code> in a Boolean context if they are empty or not. They are <strong>not equal</strong> to <code>False</code> or <code>True</code>.</p>\n", "title": "Most elegant way to check if the string is empty in Python?", "answer_id": 9573283, "question_id": 9573244, "tags": ["python", "string"]}, {"body": "<p><code>if stringname:</code> gives a <code>false</code> when the string is empty. I guess it can't be simpler than this.</p>\n", "title": "Most elegant way to check if the string is empty in Python?", "answer_id": 9573332, "question_id": 9573244, "tags": ["python", "string"]}, {"body": "<p>If you want to differentiate between empty and null strings, I would suggest using <code>if len(string)</code>, otherwise, I'd suggest using simply <code>if string</code> as others have said.  The caveat about strings full of whitespace still applies though, so don't forget to <code>strip</code>.</p>\n", "title": "Most elegant way to check if the string is empty in Python?", "answer_id": 9573389, "question_id": 9573244, "tags": ["python", "string"]}, {"body": "<pre><code>a = ''\nb = '   '\na.isspace() -&gt; False\nb.isspace() -&gt; True\n</code></pre>\n", "title": "Most elegant way to check if the string is empty in Python?", "answer_id": 18108072, "question_id": 9573244, "tags": ["python", "string"]}, {"body": "<p>You may have a look at this <a href=\"http://stackoverflow.com/questions/21979604/assigning-empty-value-or-string-in-python/21980679#21980679\">Assigning empty value or string in Python</a></p>\n\n<p>This is about comparing strings that are empty. So instead of testing for emptiness with <code>not</code>, you may test is your string is equal to empty string with <code>\"\"</code> the empty string...</p>\n", "title": "Most elegant way to check if the string is empty in Python?", "answer_id": 21980754, "question_id": 9573244, "tags": ["python", "string"]}, {"body": "<p>I would test noneness before stripping. Also, I would use the fact that empty strings are False (or Falsy). </p>\n\n<p>This is what I would use to test if a String is either None OR Empty OR Blank:</p>\n\n<pre><code>def isBlank (myString):\n    if myString and myString.strip():\n        #myString is not None AND myString is not empty or blank\n        return False\n    #myString is None OR myString is empty or blank\n    return True\n</code></pre>\n\n<p>And, the exact opposite not None NOR Empty NOR Blank:</p>\n\n<pre><code>def isNotBlank (myString):\n    if myString and myString.strip():\n        #myString is not None AND myString is not empty or blank\n        return True\n    #myString is None OR myString is empty or blank\n    return False\n</code></pre>\n\n<p>Lastly, more concise forms:</p>\n\n<pre><code>def isBlank (myString):\n    return not (myString and myString.strip())\n\ndef isNotBlank (myString):\n    return (myString and myString.strip())\n</code></pre>\n", "title": "Most elegant way to check if the string is empty in Python?", "answer_id": 24534152, "question_id": 9573244, "tags": ["python", "string"]}, {"body": "<p>As prmatta posted above, but with mistake.</p>\n\n<pre><code>def isNoneOrEmptyOrBlankString (myString):\n    if myString:\n        if not myString.strip():\n            return True\n        else:\n            return False\n    return False\n</code></pre>\n", "title": "Most elegant way to check if the string is empty in Python?", "answer_id": 26693971, "question_id": 9573244, "tags": ["python", "string"]}, {"body": "<p>I once wrote something similar to Bartek's answer and javascript inspired:</p>\n\n<pre><code>def isNotEmpty(s):\n    return bool(s and s.strip())\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>print isNotEmpty(\"\")    # False\nprint isNotEmpty(\"   \") # False\nprint isNotEmpty(\"ok\")  # True\nprint isNotEmpty(None)  # False\n</code></pre>\n", "title": "Most elegant way to check if the string is empty in Python?", "answer_id": 27982561, "question_id": 9573244, "tags": ["python", "string"]}, {"body": "<p>for those who expect a behaviour like the apache <a href=\"http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#isBlank(java.lang.CharSequence)\" rel=\"nofollow\">StringUtils.isBlank</a> or Guava <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Strings.html#isNullOrEmpty(java.lang.String)\" rel=\"nofollow\">Strings.isNullOrEmpty</a> :</p>\n\n<pre><code>if mystring and mystring.strip():\n    print \"not blank string\"\nelse:\n    print \"blank string\"\n</code></pre>\n", "title": "Most elegant way to check if the string is empty in Python?", "answer_id": 28433279, "question_id": 9573244, "tags": ["python", "string"]}, {"body": "<p>Test empty or blank string (shorter way):</p>\n\n<pre><code>if myString.strip():\n    print(\"it's not an empty or blank string\")\nelse:\n    print(\"it's an empty or blank string\")\n</code></pre>\n", "title": "Most elegant way to check if the string is empty in Python?", "answer_id": 30137396, "question_id": 9573244, "tags": ["python", "string"]}, {"body": "<p>How about this?  Perhaps it's not \"the most elegant\", but it seems pretty complete, clear, and safe to me:</p>\n\n<pre><code>if (s is None) or (str(s).strip()==\"\"): // STRING s IS \"EMPTY\"...\n</code></pre>\n\n<p>Is there a possibility for an exception or a false positive with this?</p>\n", "title": "Most elegant way to check if the string is empty in Python?", "answer_id": 33390778, "question_id": 9573244, "tags": ["python", "string"]}, {"body": "<p>When you are reading file by lines and want to determine, which line is empty, make sure you will use <code>.strip()</code>, because there is new line character in \"empty\" line:</p>\n\n<pre><code>lines = open(\"my_file.log\", \"r\").readlines()\n\nfor line in lines:\n    if not line.strip():\n        continue\n\n    # your code for non-empty lines\n</code></pre>\n", "title": "Most elegant way to check if the string is empty in Python?", "answer_id": 35827935, "question_id": 9573244, "tags": ["python", "string"]}], "link": "http://stackoverflow.com/questions/9573244/most-elegant-way-to-check-if-the-string-is-empty-in-python", "question_id": 9573244}, {"body": "<p>How can I delete all of my <a href=\"http://en.wikipedia.org/wiki/Git_%28software%29\">Git</a> stashes at once?</p>\n\n<p>Specifically I mean, with typing in one command.</p>\n", "title": "How can I delete all of my Git stashes at once?", "tags": ["git"], "answers": [{"body": "<p>It does what you need:</p>\n\n<pre><code>git stash clear\n</code></pre>\n\n<p>The <a href=\"http://www.kernel.org/pub/software/scm/git/docs/git-stash.html\">official, publicly available documentation</a> says it all:</p>\n\n<blockquote>\n  <p><strong><code>clear</code></strong></p>\n  \n  <p>Remove all the stashed states. Note that those states will then be subject to pruning, and may be impossible to recover (...).</p>\n</blockquote>\n", "title": "How can I delete all of my Git stashes at once?", "answer_id": 11369406, "question_id": 11369375, "tags": ["git"]}, {"body": "<p>Git Stash clear is the good way. it is  in the <a href=\"https://git-scm.com/docs/git-stash\" rel=\"nofollow\">official documentation</a></p>\n\n<p>Clear: Remove all the stashed states. Note that those states will then be subject to pruning, and may be impossible to recover (see Examples below for a possible strategy).\nYou need to be careful because you never recover previus stash</p>\n\n<p>first of all open your terminal</p>\n\n<p>list all your stash:</p>\n\n<pre><code>git stash list \n</code></pre>\n\n<p>clean</p>\n\n<pre><code>git stash clear\n</code></pre>\n\n<p>now write again git stash list and you have an empty stash</p>\n", "title": "How can I delete all of my Git stashes at once?", "answer_id": 37350015, "question_id": 11369375, "tags": ["git"]}], "link": "http://stackoverflow.com/questions/11369375/how-can-i-delete-all-of-my-git-stashes-at-once", "question_id": 11369375}, {"body": "<p>I am stuck between these two NoSQL databases. </p>\n\n<p>In my project I will be creating a database within a database. For example, I need a solution to create dynamic tables. </p>\n\n<p>So users can create tables with columns and rows. I think either MongoDB or CouchDB will be good for this, but I am not sure which one. I will also need efficient paging as well.</p>\n", "title": "When to use CouchDB over MongoDB and vice versa", "tags": ["mongodb", "performance", "nosql", "comparison", "couchdb"], "answers": [{"body": "<p>I'm sure you can with Mongo (more familiar with it), and pretty sure you can with couch too.</p>\n\n<p>Both are documented oriented (JSON-based) so there would be no \"columns\" but rather fields in documents -- but they can be fully dynamic.</p>\n\n<p>They both do it you may want to look at other factors on which to use: other features you care about, popularity, etc. Google insights, indeed.com job posts would be ways to look at popularity.</p>\n\n<p>You could just try it i think you should be able to have mongo running in 5 minutes.</p>\n", "title": "When to use CouchDB over MongoDB and vice versa", "answer_id": 12438790, "question_id": 12437790, "tags": ["mongodb", "performance", "nosql", "comparison", "couchdb"]}, {"body": "<p>Of C,A &amp; P (Consistency, Availability &amp; Partition tolerance) which 2 are more important to you? Quick reference, the <a href=\"http://blog.nahurst.com/visual-guide-to-nosql-systems\"><em>Visual Guide To NoSQL Systems</em></a></p>\n\n<ul>\n<li>MongodB : Consistency and Partition Tolerance</li>\n<li>CouchDB : Availability and Partition Tolerance</li>\n</ul>\n\n<p>A blog post, <a href=\"http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis\"><em>Cassandra vs MongoDB vs CouchDB vs Redis vs Riak vs HBase vs Membase vs Neo4j comparison</em></a> has '<em>Best used</em>' scenarios for each NoSQL database compared. Quoting the link, </p>\n\n<ul>\n<li>MongoDB: If you need dynamic queries. If you prefer to define indexes, not map/reduce functions. If you need good performance on a big DB. If you wanted CouchDB, but your data changes too much, filling up disks.</li>\n<li>CouchDB : For accumulating, occasionally changing data, on which pre-defined queries are to be run. Places where versioning is important.</li>\n</ul>\n\n<p>A recent (Feb 2012) and more <a href=\"https://plus.google.com/107397941677313236670/posts/LFBB233PKQ1\">comprehensive comparison</a> by Riyad Kalla, </p>\n\n<ul>\n<li>MongoDB : Master-Slave Replication ONLY</li>\n<li>CouchDB : Master-Master Replication</li>\n</ul>\n\n<p>A blog post (Oct 2011) by someone who tried both, <em><a href=\"http://openmymind.net/2011/10/27/A-MongoDB-Guy-Learns-CouchDB/\">A MongoDB Guy Learns CouchDB</a></em> commented on the CouchDB's paging being not as useful.</p>\n\n<p>A dated (Jun 2009) <a href=\"http://www.kchodorow.com/blog/2009/06/29/couchdb-vs-mongodb-benchmark/\">benchmark</a> by <a href=\"http://www.kchodorow.com/blog/about/\">Kristina Chodorow</a> (<em>part of team behind MongoDB</em>),</p>\n\n<p>I'd go for MongoDB.</p>\n\n<p>Hope it helps.</p>\n", "title": "When to use CouchDB over MongoDB and vice versa", "answer_id": 12444653, "question_id": 12437790, "tags": ["mongodb", "performance", "nosql", "comparison", "couchdb"]}, {"body": "<p>Be aware of an issue with sparse unique indexes in MongoDB. I've hit it and it is extremely cumbersome to workaround. </p>\n\n<p>The problem is this - you have a field, which is unique if present and you wish to find all the objects where the field is absent. The way sparse unique indexes are implemented in Mongo is that objects where that field is missing are not in the index at all - they cannot be retrieved by a query on that field - <code>{$exists: false}</code> just does not work. </p>\n\n<p>The only workaround I have come up with is having a special null family of values, where an empty value is translated to a special prefix (like <strong>null:</strong>) concatenated to a uuid. This is a real headache, because one has to take care of transforming to/from the empty values when writing/quering/reading. A major nuisance.</p>\n\n<p>I have never used server side javascript execution in MongoDB (it is not advised anyway) and their map/reduce has awful performance when there is just one Mongo node. Because of all these reasons I am now considering to check out CouchDB, maybe it fits more to my particular scenario.</p>\n\n<p>BTW, if anyone knows the link to the respective Mongo issue describing the sparse unique index problem - please share.</p>\n", "title": "When to use CouchDB over MongoDB and vice versa", "answer_id": 14677861, "question_id": 12437790, "tags": ["mongodb", "performance", "nosql", "comparison", "couchdb"]}, {"body": "<p>I summarize the answers found in that article:</p>\n\n<p><a href=\"http://www.quora.com/How-does-MongoDB-compare-to-CouchDB-What-are-the-advantages-and-disadvantages-of-each\">http://www.quora.com/How-does-MongoDB-compare-to-CouchDB-What-are-the-advantages-and-disadvantages-of-each</a></p>\n\n<p>MongoDB: Better querying, data storage in BSON (faster access), better data consistency, multiple collections</p>\n\n<p>CouchDB: Better replication, with master to master replication and conflict resolution, data storage in JSON (human-readable, better access through REST services), querying through map-reduce.</p>\n\n<p>So in conclusion, MongoDB is faster, CouchDB is safer.</p>\n\n<p>Also: <a href=\"http://nosql.mypopescu.com/post/298557551/couchdb-vs-mongodb\">http://nosql.mypopescu.com/post/298557551/couchdb-vs-mongodb</a></p>\n", "title": "When to use CouchDB over MongoDB and vice versa", "answer_id": 23914051, "question_id": 12437790, "tags": ["mongodb", "performance", "nosql", "comparison", "couchdb"]}, {"body": "<p>The answers above all over complicate the story.</p>\n\n<ol>\n<li>If you plan to have a mobile component, or need desktop users to work offline and then sync their work to a server you need CouchDB.</li>\n<li>If your code will run only on the server then go with MongoDB</li>\n</ol>\n\n<p>That's it. Unless you need CouchDB's (awesome) ability to replicate to mobile and desktop devices, MongoDB has the performance, community and tooling advantage at present.</p>\n", "title": "When to use CouchDB over MongoDB and vice versa", "answer_id": 28575461, "question_id": 12437790, "tags": ["mongodb", "performance", "nosql", "comparison", "couchdb"]}, {"body": "<p>Very old question but it's on top of Google and I don't quite like the answers I see so here's my own.</p>\n\n<p>There's much more to Couchdb than the ability to develop CouchApps. Most people use CouchDb in a classical 3-tiers web architecture. </p>\n\n<p>In practice the deciding factor for most people will be the fact that MongoDb allows ad-hoc querying with a SQL like syntax while CouchDb doesn't (you've got to create map/reduce views which turns some people off even though creating these views is Rapid Application Development friendly - they have nothing to do with stored procedures).</p>\n\n<p>To address points raised in the accepted answer : CouchDb has a great versionning system, but it doesn't mean that it is only suited (or more suited) for places where versionning is important. Also, couchdb is heavy-write friendly thanks to its append-only nature (writes operations return in no time while guaranteeing that no data will ever be lost).</p>\n\n<p>One very important thing that is not mentioned by anyone is the fact that CouchDb relies on b-tree indexes. This means that whether you have 1 \"row\" or 20 billions, the querying time will always remain below 10ms. This is a game changer which makes CouchDb a low-latency and read-friendly database, and this really shouldn't be overlooked.</p>\n\n<p>To be fair and exhaustive the advantage MongoDb has over CouchDb is tooling and marketing. They have first-class citizen tools for all major languages and platforms making the on-boarding easy and this added to their adhoc querying makes the transition from SQL even easier.</p>\n\n<p>CouchDb doesn't have this level of tooling - even though there are many libraries available today - but CouchDb is exposed as an HTTP API and it is therefore quite easy to create a wrapper in your favorite language to talk with it. I personally like this approach as it avoids bloat and allows you to only take what you want (interface segregation principle).</p>\n\n<p>So I'd say using one or the other is largely a matter of comfort and preference with their paradigms. CouchDb approach \"just fits\", for certain people, but if after learning about the database features (in the exhaustive <a href=\"http://guide.couchdb.org/\">official guide</a>) you don't have your \"hell yeah\" moment, you should probably move on. </p>\n\n<p>I'd discourage using CouchDb if you just want to use \"the right tool for the right job\". because you'll find out that you can't just use it that way and you'll end up being pissed and writing blog posts such as \"Where are joins in CouchDb ?\" and \"Where is transaction management ?\". Indeed  Couchdb is - paradoxically - very transparent but at the same time requires a paradigm shift and a change in the way you approach problems to really shine (and really work). </p>\n\n<p>But once you've done that it really pays off. I'd personally need very strong reasons or a major deal breaker on a project to choose another database, but so far I haven't met any.</p>\n", "title": "When to use CouchDB over MongoDB and vice versa", "answer_id": 37632625, "question_id": 12437790, "tags": ["mongodb", "performance", "nosql", "comparison", "couchdb"]}, {"body": "<p>Ask this questions yourself? And you will decide your DB selection.</p>\n\n<ol>\n<li>Do you need <strong>master-master</strong>? Then CouchDB. Mainly CouchDB supports master-master replication which anticipates nodes being disconnected for long periods of time. MongoDB would not do well in that environment.</li>\n<li>Do you need <strong>MAXIMUM R/W throughput</strong>? Then MongoDB</li>\n<li>Do you need ultimate <strong>single-server durability</strong> because you are only going to have a single DB server? Then CouchDB.</li>\n<li>Are you storing a <strong>MASSIVE data</strong> set that needs sharding while maintaining insane throughput? Then MongoDB.</li>\n<li>Do you need strong <strong>consistency</strong> of data? Then MongoDB.</li>\n<li>Do you need high <strong>availability</strong> of database? Then CouchDB. </li>\n<li>Are you hoping <strong>multi databases</strong> and multi tables/ collections? Then MongoDB</li>\n<li>You have a <strong>mobile app offline users</strong> and want to sync their activity data to a server? Then you need CouchDB.</li>\n<li>Do you need large variety of <strong>querying</strong> engine? Then MongoDB</li>\n<li>Do you need large <strong>community</strong> to be using DB? Then MongoDB</li>\n</ol>\n", "title": "When to use CouchDB over MongoDB and vice versa", "answer_id": 38902274, "question_id": 12437790, "tags": ["mongodb", "performance", "nosql", "comparison", "couchdb"]}], "link": "http://stackoverflow.com/questions/12437790/when-to-use-couchdb-over-mongodb-and-vice-versa", "question_id": 12437790}, {"body": "<p>When trying to delete a key from a dictionary, I write:</p>\n\n<pre><code>if 'key' in myDict:\n    del myDict['key']\n</code></pre>\n\n<p>Is there a one line way of doing this?</p>\n", "title": "How to remove a key from a dictionary?", "tags": ["python", "dictionary"], "answers": [{"body": "<p>Use <a href=\"http://docs.python.org/library/stdtypes.html#dict.pop\"><code>dict.pop()</code></a>:</p>\n\n<pre><code>my_dict.pop('key', None)\n</code></pre>\n\n<p>This will return <code>my_dict[key]</code> if <code>key</code> exists in the dictionary, and <code>None</code> otherwise. If the second parameter is not specified (ie. <code>my_dict.pop('key')</code>) and <code>key</code> does not exist, a <code>KeyError</code> is raised.</p>\n", "title": "How to remove a key from a dictionary?", "answer_id": 11277439, "question_id": 11277432, "tags": ["python", "dictionary"]}, {"body": "<p>Specifically to answer \"is there a one line way of doing this?\"</p>\n\n<pre><code>if 'key' in myDict: del myDict['key']\n</code></pre>\n\n<p>...well, you <em>asked</em> ;-)</p>\n\n<p>You should consider, though, that this way of deleting an object from a <code>dict</code> is <a href=\"http://stackoverflow.com/q/17326067/722332\">not atomic</a>\u2014it is possible that <code>'key'</code> may be in <code>myDict</code> during the <code>if</code> statement, but may be deleted before <code>del</code> is executed, in which case <code>del</code> will fail with a <code>KeyError</code>.  Given this, it would be safest to either <a href=\"http://stackoverflow.com/a/11277439/722332\">use <code>dict.pop</code></a> or something along the lines of</p>\n\n<pre><code>try:\n    del myDict['key']\nexcept KeyError:\n    pass\n</code></pre>\n\n<p>which, of course, is definitely <em>not</em> a one-liner.</p>\n", "title": "How to remove a key from a dictionary?", "answer_id": 11277484, "question_id": 11277432, "tags": ["python", "dictionary"]}, {"body": "<p>It took me some time to figure out what exactly <code>my_dict.pop(\"key\", None)</code> is doing. So I'll add this as an answer to save others googling time:</p>\n\n<blockquote>\n  <p>pop(key[, default])</p>\n  \n  <p>If key is in the dictionary, remove it and return its value, else\n  return default. If default is not given and key is not in the \n  dictionary, a KeyError is raised</p>\n</blockquote>\n\n<p><a href=\"https://docs.python.org/2/library/stdtypes.html#dict.pop\">Documentation</a></p>\n", "title": "How to remove a key from a dictionary?", "answer_id": 15206537, "question_id": 11277432, "tags": ["python", "dictionary"]}, {"body": "<p>If you need to remove a lot of keys from a dictionary in one line of code, I think using map() is quite succinct and pythonic readable: </p>\n\n<pre><code>myDict = {'a':1,'b':2,'c':3,'d':4}\nmap(myDict.pop, ['a','c']) #the list of keys to remove\n&gt;&gt;&gt; myDict\n{'b': 2, 'd': 4}\n</code></pre>\n\n<p>And if you need to catch errors where you pop a value that isn't in the dictionary, use lambda inside map() like this:</p>\n\n<pre><code>map(lambda x: myDict.pop(x,None), ['a','c','e'])\n[1, 3, None] #pop returns\n&gt;&gt;&gt; myDict\n{'b': 2, 'd': 4}\n</code></pre>\n\n<p>Works. and 'e' did not cause an error, even there myDict did not have an 'e' key.</p>\n", "title": "How to remove a key from a dictionary?", "answer_id": 32616904, "question_id": 11277432, "tags": ["python", "dictionary"]}], "link": "http://stackoverflow.com/questions/11277432/how-to-remove-a-key-from-a-dictionary", "question_id": 11277432}, {"body": "<p></p>Usually I use <code>$(\"#id\").val()</code> to return the value of the selected option , but this time it doesn't work.</p>\nThe selected tag has the id <code>aioConceptName</code></p>\n\n<h3>html code </h3>\n\n<pre><code>&lt;label&gt;Name&lt;/label&gt;\n    &lt;input type=\"text\" name=\"name\" /&gt;\n    &lt;select id=\"aioConceptName\"&gt;\n        &lt;option&gt;choose io&lt;/option&gt;\n        &lt;option&gt;roma&lt;/option&gt;\n        &lt;option&gt;totti&lt;/option&gt;\n    &lt;/select&gt;\n</code></pre>\n", "title": "jQuery Get Selected Option From Dropdown", "tags": ["javascript", "jquery", "html"], "answers": [{"body": "<p>For dropdown options you probably want something like this:</p>\n\n<pre><code>var conceptName = $('#aioConceptName').find(\":selected\").text();\n</code></pre>\n\n<p>The reason <code>val()</code> doesn't do the trick is because clicking an option doesn't change the value of the dropdown--it just adds the <code>:selected</code> property to the selected option which is a <em>child</em> of the dropdown.</p>\n", "title": "jQuery Get Selected Option From Dropdown", "answer_id": 10659117, "question_id": 10659097, "tags": ["javascript", "jquery", "html"]}, {"body": "<p>I stumbled across this question and developed a more concise version of Elliot BOnneville's answer:</p>\n\n<pre><code>var conceptName = $('#aioConceptName :selected').text();\n</code></pre>\n\n<p>or generically:</p>\n\n<pre><code>$('#id :pseudoclass')\n</code></pre>\n\n<p>This saves you an extra jQuery call, selects everything in one shot, and is more clear (my opinion).</p>\n", "title": "jQuery Get Selected Option From Dropdown", "answer_id": 13182209, "question_id": 10659097, "tags": ["javascript", "jquery", "html"]}, {"body": "<p>Try this for value...</p>\n\n<pre><code>$(\"select#id_of_select_element option\").filter(\":selected\").val();\n</code></pre>\n\n<p>or this for text...</p>\n\n<pre><code>$(\"select#id_of_select_element option\").filter(\":selected\").text();\n</code></pre>\n", "title": "jQuery Get Selected Option From Dropdown", "answer_id": 15107787, "question_id": 10659097, "tags": ["javascript", "jquery", "html"]}, {"body": "<p>Try this:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$('select').change(function() {\r\n  var a=$(':selected').text(); // \"city1city2choose iofoo\"\r\n  var b=$(':selected').val();  // \"city1\" - selects just first query !\r\n  //but..\r\n  var c=$(':selected').map(function(){ // [\"city1\",\"city2\",\"choose io\",\"foo\"]\r\n    return $(this).text();\r\n  }); \r\n  var d=$(':selected').map(function(){ // [\"city1\",\"c2\",\"s1\",\"s5\"]\r\n    return $(this).val();\r\n  });\r\n  console.log(a,b,c,d);\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;select id=\"form-s\" multiple=\"multiple\"&gt;\r\n  &lt;option selected&gt;city1&lt;/option&gt;\r\n  &lt;option selected value=\"c2\"&gt;city2&lt;/option&gt;\r\n  &lt;option value=\"c3\"&gt;city3&lt;/option&gt;\r\n&lt;/select&gt;   \r\n&lt;select id=\"aioConceptName\"&gt;\r\n  &lt;option value=\"s1\" selected &gt;choose io&lt;/option&gt;\r\n  &lt;option value=\"s2\"&gt;roma &lt;/option&gt;\r\n  &lt;option value=\"s3\"&gt;totti&lt;/option&gt;\r\n&lt;/select&gt;\r\n&lt;select id=\"test\"&gt;\r\n  &lt;option value=\"s4\"&gt;paloma&lt;/option&gt;\r\n  &lt;option value=\"s5\" selected &gt;foo&lt;/option&gt;\r\n  &lt;option value=\"s6\"&gt;bar&lt;/option&gt;\r\n&lt;/select&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n", "title": "jQuery Get Selected Option From Dropdown", "answer_id": 16204798, "question_id": 10659097, "tags": ["javascript", "jquery", "html"]}, {"body": "<p>Have you considered using plain old javascript?</p>\n\n<pre><code>var box = document.getElementById('aioConceptName');\n\nconceptName = box.options[box.selectedIndex].text;\n</code></pre>\n\n<p>See also <a href=\"http://stackoverflow.com/questions/4641962/getting-an-option-text-value-with-javascript\">Getting an option text/value with javascript</a></p>\n", "title": "jQuery Get Selected Option From Dropdown", "answer_id": 16447522, "question_id": 10659097, "tags": ["javascript", "jquery", "html"]}, {"body": "<p>If you are in event context, in jQuery, you can retrieve the selected option element using :<br>\n<code>$(this).find('option:selected')</code> like this : </p>\n\n<pre><code>$('dropdown_selector').change(function() {\n    var option = $(this).find('option:selected');\n});\n</code></pre>\n", "title": "jQuery Get Selected Option From Dropdown", "answer_id": 17552250, "question_id": 10659097, "tags": ["javascript", "jquery", "html"]}, {"body": "<p><strong>Set the values for each of the options</strong></p>\n\n<pre><code>&lt;select id=\"aioConceptName\"&gt;\n    &lt;option value=\"0\"&gt;choose io&lt;/option&gt;\n    &lt;option value=\"1\"&gt;roma&lt;/option&gt;\n    &lt;option value=\"2\"&gt;totti&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p><code>$('#aioConceptName').val()</code> didn't work because <code>.val()</code> returns the <code>value</code> attribute. To have it work properly, the <code>value</code> attributes must be set on each <code>&lt;option&gt;</code>.</p>\n\n<p>Now you can call <code>$('#aioConceptName').val()</code> instead of all this <code>:selected</code> voodoo being suggested by others.</p>\n", "title": "jQuery Get Selected Option From Dropdown", "answer_id": 19609269, "question_id": 10659097, "tags": ["javascript", "jquery", "html"]}, {"body": "<pre><code>$('#aioConceptName option:selected').val();\n</code></pre>\n", "title": "jQuery Get Selected Option From Dropdown", "answer_id": 20230133, "question_id": 10659097, "tags": ["javascript", "jquery", "html"]}, {"body": "<p>For anyone who found out that best answer don't work.</p>\n\n<p>Try to use:</p>\n\n<pre><code>  $( \"#aioConceptName option:selected\" ).attr(\"value\");\n</code></pre>\n\n<p>Works for me in recent projects so it is worth to look on it.</p>\n", "title": "jQuery Get Selected Option From Dropdown", "answer_id": 21431370, "question_id": 10659097, "tags": ["javascript", "jquery", "html"]}, {"body": "<p>Using jQuery, just add a <code>change</code> event and get selected value or text within that handler.</p>\n\n<p>If you need selected text, please use this code:</p>\n\n<pre><code>$(\"#aioConceptName\").change(function () {\n    alert($(\"#aioConceptName :selected\").text())\n});\n</code></pre>\n\n<p>Or if you need selected value, please use this code:</p>\n\n<pre><code>$(\"#aioConceptName\").change(function () {\n    alert($(\"#aioConceptName :selected\").attr('value'))\n});\n</code></pre>\n", "title": "jQuery Get Selected Option From Dropdown", "answer_id": 24884627, "question_id": 10659097, "tags": ["javascript", "jquery", "html"]}, {"body": "<p>Just this should work:</p>\n\n<pre><code>var conceptName = $('#aioConceptName').val();\n</code></pre>\n", "title": "jQuery Get Selected Option From Dropdown", "answer_id": 26974064, "question_id": 10659097, "tags": ["javascript", "jquery", "html"]}, {"body": "<p>Use the <a href=\"http://api.jquery.com/val/\"><code>jQuery.val()</code></a> function for select elements, too:</p>\n\n<blockquote>\n  <p>The .val() method is primarily used to get the values of form elements\n  such as input, select and textarea. In the case of select elements, it\n  returns <code>null</code> when no option is selected and an array containing the\n  value of each selected option when there is at least one and it is\n  possible to select more because the <code>multiple</code> attribute is present.</p>\n</blockquote>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(function() {\r\n  $(\"#aioConceptName\").on(\"change\", function() {\r\n    $(\"#debug\").text($(\"#aioConceptName\").val());\r\n  }).trigger(\"change\");\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n\r\n&lt;select id=\"aioConceptName\"&gt;\r\n  &lt;option&gt;choose io&lt;/option&gt;\r\n  &lt;option&gt;roma&lt;/option&gt;\r\n  &lt;option&gt;totti&lt;/option&gt;\r\n&lt;/select&gt;\r\n&lt;div id=\"debug\"&gt;&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n", "title": "jQuery Get Selected Option From Dropdown", "answer_id": 28395273, "question_id": 10659097, "tags": ["javascript", "jquery", "html"]}], "link": "http://stackoverflow.com/questions/10659097/jquery-get-selected-option-from-dropdown", "question_id": 10659097}, {"body": "\n\n<p>My version of node is always v0.6.1-pre even after I install brew node and NVM install v0.6.19.</p>\n\n<p>My node version is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>node -v\nv0.6.1-pre\n</code></pre>\n\n<p>NVM says this (after I install a version of node for the first time in one bash terminal):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>nvm ls\nv0.6.19\ncurrent:    v0.6.19\n</code></pre>\n\n<p>But when I restart bash, this is what I see:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>nvm ls\nv0.6.19\ncurrent:    v0.6.1-pre\ndefault -&gt; 0.6.19 (-&gt; v0.6.19)\n</code></pre>\n\n<p>So where is this phantom node 0.6.1-pre version and how can I get rid of it? I'm trying to install libraries via NPM so that I can work on a project.</p>\n\n<p>I tried using BREW to update before NVM, using \"brew update\" and \"brew install node\". \nI've tried deleting the \"node\" directory in my /usr/local/include and the \"node\" and \"node_modules\" in my \"/usr/local/lib\".\nI've tried uninstalling npm and reinstalling it following <a href=\"http://superuser.com/questions/268946/uninstall-node-js\">these</a> instructions.</p>\n\n<p>All of this because I was trying to update an older version of node to install the \"zipstream\" library. Now there's folders in my users directory, and the node version STILL isn't up to date, even though NVM says it's using 0.6.19.</p>\n\n<p><strong>Ideally, I'd like to uninstall nodejs, npm, and nvm, and just reinstall the entire thing from scratch on my system.</strong></p>\n", "title": "How do I completely uninstall Node.js, and reinstall from beginning (Mac OS X)", "tags": ["javascript", "node.js", "npm"], "answers": [{"body": "<p>Apparently, there was a <code>/Users/myusername/local</code> folder that contained a <code>include</code> with <code>node</code> and <code>lib</code> with <code>node</code> and <code>node_modules</code>. How and why this was created instead of in my <code>/usr/local</code> folder, I do not know.</p>\n\n<p>Deleting these local references fixed the phantom v0.6.1-pre. If anyone has an explanation, I'll choose that as the correct answer.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>You may need to do the additional instructions as well:</p>\n\n<pre><code>sudo rm -rf /usr/local/{lib/node{,/.npm,_modules},bin,share/man}/{npm*,node*,man1/node*}\n</code></pre>\n\n<p>which is the equivalent of (same as above)...</p>\n\n<pre><code>sudo rm -rf /usr/local/bin/npm /usr/local/share/man/man1/node* /usr/local/lib/dtrace/node.d ~/.npm ~/.node-gyp /opt/local/bin/node opt/local/include/node /opt/local/lib/node_modules\n</code></pre>\n\n<p>or (same as above) broken down...</p>\n\n<p>To completely uninstall node + npm is to do the following:</p>\n\n<ol>\n<li>go to <strong>/usr/local/lib</strong> and delete any <strong>node</strong> and <strong>node_modules</strong></li>\n<li>go to <strong>/usr/local/include</strong> and delete any <strong>node</strong> and <strong>node_modules</strong> directory </li>\n<li>if you installed with <strong>brew install node</strong>, then run <strong>brew uninstall node</strong> in your terminal</li>\n<li>check your Home directory for any <strong>local</strong> or <strong>lib</strong> or <strong>include</strong> folders, and delete any <strong>node</strong> or <strong>node_modules</strong> from there</li>\n<li>go to <strong>/usr/local/bin</strong> and delete any <strong>node</strong> executable</li>\n</ol>\n\n<p>Then download <strong>nvm</strong> and follow the instructions to install node. The latest versions of node come with <strong>npm</strong>, I believe, but you can also reinstall that as well.</p>\n", "title": "How do I completely uninstall Node.js, and reinstall from beginning (Mac OS X)", "answer_id": 11178106, "question_id": 11177954, "tags": ["javascript", "node.js", "npm"]}, {"body": "<p>I have been hit by an issue during uninstall of Node.js on my mac. I had some strange behavior like <code>npm</code> is still their even after having removing it with all this.</p>\n\n<p>It was because I had an old install done with macport. So you also have to uninstall it using port:</p>\n\n<pre><code>sudo port uninstall nodejs\n</code></pre>\n\n<p>It may have install many different versions of Node.js so uninstall them all (one by one).</p>\n", "title": "How do I completely uninstall Node.js, and reinstall from beginning (Mac OS X)", "answer_id": 18241626, "question_id": 11177954, "tags": ["javascript", "node.js", "npm"]}, {"body": "<p>On Mavericks I install it from the node pkg (from nodejs site) and I uninstall it so I can re-install using brew. I only run 3 commands in the terminal:</p>\n\n<ol>\n<li><code>sudo rm -rf  /usr/local/lib/node_modules/npm/</code></li>\n<li><code>brew uninstall node</code></li>\n<li><code>brew doctor</code></li>\n<li><code>brew prune</code></li>\n</ol>\n\n<p>If there is still a node installation, repeat step 2. After all is ok, I install using <code>brew install node</code></p>\n", "title": "How do I completely uninstall Node.js, and reinstall from beginning (Mac OS X)", "answer_id": 21197870, "question_id": 11177954, "tags": ["javascript", "node.js", "npm"]}, {"body": "<p>I'm not sure about the Mac OS installer, but I've found that the NodeJS .msi installer for Windows has an option to uninstall Node. I did that and it worked perfectly.</p>\n", "title": "How do I completely uninstall Node.js, and reinstall from beginning (Mac OS X)", "answer_id": 23304103, "question_id": 11177954, "tags": ["javascript", "node.js", "npm"]}, {"body": "<p>I know this post is a little dated but just wanted to share the commands that worked for me in Terminal when removing Node.js</p>\n\n<pre><code>lsbom -f -l -s -pf /var/db/receipts/org.nodejs.pkg.bom | while read f; do  sudo rm /usr/local/${f}; done\n\nsudo rm -rf /usr/local/lib/node /usr/local/lib/node_modules /var/db/receipts/org.nodejs.*\n</code></pre>\n", "title": "How do I completely uninstall Node.js, and reinstall from beginning (Mac OS X)", "answer_id": 24611994, "question_id": 11177954, "tags": ["javascript", "node.js", "npm"]}, {"body": "<p>maybe you need to make</p>\n\n<pre><code>hash -r \n</code></pre>\n\n<p>it helps with problem of symlink</p>\n\n<pre><code>$ node -v\n$ bash: /opt/local/bin/node: No such file or directory\n</code></pre>\n", "title": "How do I completely uninstall Node.js, and reinstall from beginning (Mac OS X)", "answer_id": 25948649, "question_id": 11177954, "tags": ["javascript", "node.js", "npm"]}, {"body": "<h1><strong>For brew users, OSX</strong>:</h1>\n\n<pre><code>brew uninstall node;\nbrew prune;\nrm -f /usr/local/bin/npm;\nrm -f /usr/local/lib/dtrace/node.d;\nrm -rf ~/.npm;\n</code></pre>\n\n<p>then</p>\n\n<pre><code>brew install node;\nwhich node #=&gt; /usr/local/bin/node\nexport NODE_PATH='/usr/local/lib/node_modules' # add to bashrc if not already there\n</code></pre>\n", "title": "How do I completely uninstall Node.js, and reinstall from beginning (Mac OS X)", "answer_id": 26919540, "question_id": 11177954, "tags": ["javascript", "node.js", "npm"]}, {"body": "<p>Additional to the main answer I needed to remove all npm instances found in:</p>\n\n<pre><code>rm -rf /usr/local/share/man/man1/npm*\n</code></pre>\n", "title": "How do I completely uninstall Node.js, and reinstall from beginning (Mac OS X)", "answer_id": 27869967, "question_id": 11177954, "tags": ["javascript", "node.js", "npm"]}, {"body": "<p>This fixed it for me <a href=\"https://gist.github.com/DanHerbert/9520689\" rel=\"nofollow\">Fixing npm On Mac OS X for Homebrew Users</a>. And it does not require too many steps.</p>\n\n<p>Just go to the solution part if you don't care about the why.</p>\n", "title": "How do I completely uninstall Node.js, and reinstall from beginning (Mac OS X)", "answer_id": 28407771, "question_id": 11177954, "tags": ["javascript", "node.js", "npm"]}, {"body": "<p>Expanding on <a href=\"http://stackoverflow.com/a/11178106/2083544\" title=\"Dominic Tancredi\">Dominic Tancredi's awesome answer</a>, I've rolled this into a bash package and stand-alone script. If you are already using the \"Back Package Manager\" called <a href=\"http://bpkg.io\" rel=\"nofollow\">bpkg</a> you can install the script by running:</p>\n\n<pre><code>bpkg install -g brock/node-reinstall\n</code></pre>\n\n<p>Or you can have a look at the script on Github at <a href=\"http://github.com/brock/node-reinstall\" rel=\"nofollow\">brock/node-reinstall</a>. The script allows you to re-install node using nvm or nave, and to specify a node version as your default.</p>\n", "title": "How do I completely uninstall Node.js, and reinstall from beginning (Mac OS X)", "answer_id": 28991934, "question_id": 11177954, "tags": ["javascript", "node.js", "npm"]}, {"body": "<p>downgrade node to 0.10.36</p>\n\n<pre><code>  sudo npm cache clean -f\n  sudo npm install -g n\n  sudo n 0.10.36\n</code></pre>\n\n<p>upgrade node to stable v</p>\n\n<pre><code>  sudo npm cache clean -f\n  sudo npm install -g n\n  sudo n stable\n</code></pre>\n", "title": "How do I completely uninstall Node.js, and reinstall from beginning (Mac OS X)", "answer_id": 30520440, "question_id": 11177954, "tags": ["javascript", "node.js", "npm"]}, {"body": "<ol>\n<li><p>First:</p>\n\n<pre><code>lsbom -f -l -s -pf /var/db/receipts/org.nodejs.pkg.bom | while read f; do  sudo rm /usr/local/${f}; done\n\nsudo rm -rf /usr/local/lib/node /usr/local/lib/node_modules /var/db/receipts/org.nodejs.*\n</code></pre></li>\n<li><p>To recap, the best way (I've found) to completely uninstall node + npm is to do the following:</p>\n\n<p>go to <code>/usr/local/lib</code> and delete any node and node_modules</p>\n\n<pre><code>cd /usr/local/lib\n\nsudo rm -rf node*\n</code></pre></li>\n<li><p>go to <code>/usr/local/include</code> and delete any node and node_modules directory</p>\n\n<pre><code>cd /usr/local/include\n\nsudo rm -rf node*\n</code></pre></li>\n<li><p>if you installed with <code>brew install node</code>, then run <code>brew uninstall node</code> in your terminal</p>\n\n<pre><code>brew uninstall node\n</code></pre></li>\n<li><p>check your Home directory for any \"local\" or \"lib\" or \"include\" folders, and delete any \"node\" or \"node_modules\" from there</p>\n\n<p>go to /usr/local/bin and delete any node executable</p>\n\n<pre><code>cd /usr/local/bin\n\nsudo rm -rf /usr/local/bin/npm\n\nls -las\n</code></pre></li>\n<li><p>You may need to do the additional instructions as well:</p>\n\n<pre><code>sudo rm -rf /usr/local/share/man/man1/node.1\n\nsudo rm -rf /usr/local/lib/dtrace/node.d\n\nsudo rm -rf ~/.npm\n</code></pre></li>\n</ol>\n\n<p>Source: <a href=\"https://gist.github.com/TonyMtz/d75101d9bdf764c890ef\">tonyMtz</a></p>\n", "title": "How do I completely uninstall Node.js, and reinstall from beginning (Mac OS X)", "answer_id": 31102612, "question_id": 11177954, "tags": ["javascript", "node.js", "npm"]}, {"body": "<p>I had installed Node.js from source downloaded from the git repository.  I installed with:</p>\n\n<pre><code>./configure\n$ make\n$ sudo make install\n</code></pre>\n\n<p>Because the make file supports it, I can do:</p>\n\n<pre><code>$ sudo make uninstall\n</code></pre>\n", "title": "How do I completely uninstall Node.js, and reinstall from beginning (Mac OS X)", "answer_id": 31573083, "question_id": 11177954, "tags": ["javascript", "node.js", "npm"]}, {"body": "<p>(server: ubuntu 14)</p>\n\n<p>1.) install nvm (node version manager) <a href=\"https://github.com/creationix/nvm\" rel=\"nofollow\">https://github.com/creationix/nvm</a></p>\n\n<p>2.) nvm install node</p>\n\n<p>3.) npm -v \n(inquire npm version => 3.8.6)</p>\n\n<p>4.) node -v\n(inquire node version => v6.0.0)</p>\n", "title": "How do I completely uninstall Node.js, and reinstall from beginning (Mac OS X)", "answer_id": 37019584, "question_id": 11177954, "tags": ["javascript", "node.js", "npm"]}], "link": "http://stackoverflow.com/questions/11177954/how-do-i-completely-uninstall-node-js-and-reinstall-from-beginning-mac-os-x", "question_id": 11177954}, {"body": "<p>In the MongoDB shell, how do I list all collections for the current database that I'm using?</p>\n", "title": "How to list all collections in the mongo shell?", "tags": ["mongodb"], "answers": [{"body": "<pre><code>&gt; show collections\n</code></pre>\n\n<p>will list all the collections in the currently selected DB, as stated in the command line help (<code>help</code>).</p>\n", "title": "How to list all collections in the mongo shell?", "answer_id": 8866066, "question_id": 8866041, "tags": ["mongodb"]}, {"body": "<p>You can do:</p>\n\n<pre><code>db.getCollectionNames()\n</code></pre>\n", "title": "How to list all collections in the mongo shell?", "answer_id": 8866075, "question_id": 8866041, "tags": ["mongodb"]}, {"body": "<p><code>&gt; show tables</code></p>\n\n<p>It gives the same result as Cameron's answer.</p>\n", "title": "How to list all collections in the mongo shell?", "answer_id": 19366587, "question_id": 8866041, "tags": ["mongodb"]}, {"body": "<p>Apart from the options suggested by other people:</p>\n\n<pre><code>show collections  //output every collection\nshow tables\ndb.getCollectionNames() //shows all collections as a list\n</code></pre>\n\n<p>There is also another way which can be really handy if you want to know how each of the collections was created (for example it is a capped collection with a particular size)</p>\n\n<pre><code>db.system.namespaces.find()\n</code></pre>\n", "title": "How to list all collections in the mongo shell?", "answer_id": 19699006, "question_id": 8866041, "tags": ["mongodb"]}, {"body": "<p>First you need to use a database to show all collection/tables inside it.</p>\n\n<pre><code>&gt;show dbs\nusers 0.56787GB\ntest (empty)\n&gt;db.test.help() // this will give you all the function which can be used with this db\n&gt;use users\n&gt;show tables //will show all the collection in the db\n</code></pre>\n", "title": "How to list all collections in the mongo shell?", "answer_id": 19873717, "question_id": 8866041, "tags": ["mongodb"]}, {"body": "<p>Try:</p>\n\n<pre><code>help // To show all help methods\nshow dbs  // To show all dbs\nuse dbname  // To select your db\nshow collections // To show all collections in selected db\n</code></pre>\n", "title": "How to list all collections in the mongo shell?", "answer_id": 23466077, "question_id": 8866041, "tags": ["mongodb"]}, {"body": "<blockquote>\n  <p>how do I list all collections for the current database that I'm using?</p>\n</blockquote>\n\n<h1>3 Methods</h1>\n\n<ul>\n<li><code>show collections</code></li>\n<li><code>show tables</code></li>\n<li><code>db.getCollectionNames()</code></li>\n</ul>\n\n<hr>\n\n<h2>To list all <em>databases</em>:</h2>\n\n<pre><code>show dbs\n</code></pre>\n\n<h2>To enter or use given database:</h2>\n\n<pre><code>use databasename\n</code></pre>\n\n<hr>\n\n<h2>To list all <em>collections</em>:</h2>\n\n<pre><code>show collections\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n<pre><code>collection1  \ncollection2  \nsystem.indexes\n</code></pre>\n</blockquote>\n\n<p>(or)</p>\n\n<pre><code>show tables\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n<pre><code>collection1  \ncollection2  \nsystem.indexes\n</code></pre>\n</blockquote>\n\n<p>(or) </p>\n\n<pre><code>db.getCollectionNames()\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n<pre><code>[ \"collection1\", \"collection2\", \"system.indexes\" ]\n</code></pre>\n</blockquote>\n\n<hr>\n\n<h2>To enter or use given collection</h2>\n\n<pre><code>use collectionname\n</code></pre>\n", "title": "How to list all collections in the mongo shell?", "answer_id": 23734995, "question_id": 8866041, "tags": ["mongodb"]}, {"body": "<p>If you want to show all collections from mongodb shell (command line), use shell helper </p>\n\n<pre><code>show collections\n</code></pre>\n\n<p>that show all collections for current database.\nIf you want to get all collection list from your application then you can use mongodb  database method</p>\n\n<pre><code>db.getCollectionNames()\n</code></pre>\n\n<p>For more info mongodb shell helper you can seee \n<a href=\"http://docs.mongodb.org/manual/reference/mongo-shell/\">http://docs.mongodb.org/manual/reference/mongo-shell/</a></p>\n", "title": "How to list all collections in the mongo shell?", "answer_id": 27597646, "question_id": 8866041, "tags": ["mongodb"]}, {"body": "<p>I use:</p>\n\n<pre><code> &gt; show collections\n</code></pre>\n\n<p>but other option is using <strong><a href=\"http://docs.mongodb.org/manual/reference/method/db.getCollectionNames/\" rel=\"nofollow\">getCollectionNames()</strong></a> method that returns an array containing all collections in the existing database.</p>\n\n<pre><code>db.getCollectionNames()\n</code></pre>\n", "title": "How to list all collections in the mongo shell?", "answer_id": 27906642, "question_id": 8866041, "tags": ["mongodb"]}, {"body": "<p>The command used for displaying all the collection in the mongoDb database is</p>\n\n<pre><code>show collections \n</code></pre>\n\n<p>Before running the show collections command you have to select the database </p>\n\n<pre><code>use mydb //mydb is the name of the database being selected\n</code></pre>\n\n<p>To see all the databases you can use the command</p>\n\n<pre><code>show dbs // shows all the database names present \n</code></pre>\n\n<p>For more info visit this link : <a href=\"http://docs.mongodb.org/manual/tutorial/getting-started/\">http://docs.mongodb.org/manual/tutorial/getting-started/</a></p>\n", "title": "How to list all collections in the mongo shell?", "answer_id": 29448862, "question_id": 8866041, "tags": ["mongodb"]}, {"body": "<p>you can use <code>show tables</code> or <code>show collections</code></p>\n", "title": "How to list all collections in the mongo shell?", "answer_id": 29669655, "question_id": 8866041, "tags": ["mongodb"]}, {"body": "<p>On >=2.x, you can do</p>\n\n<pre><code>db.listCollections()\n</code></pre>\n\n<p>On 1.x you can do</p>\n\n<pre><code>db.getCollectionNames()\n</code></pre>\n", "title": "How to list all collections in the mongo shell?", "answer_id": 34734640, "question_id": 8866041, "tags": ["mongodb"]}, {"body": "<p>The following commands on mongoshell are common</p>\n\n<pre><code>show databases\nshow collections\n</code></pre>\n\n<p>Also,</p>\n\n<pre><code>show dbs\nuse mydb\ndb.getCollectionNames()\n</code></pre>\n\n<p>Sometimes it's useful to see all collections as well as the indexes on the collections which are part of the overall namespace:</p>\n\n<p>Here's how you would do that:</p>\n\n<pre><code> db.getCollectionNames().forEach(function(collection) {\nindexes = db[collection].getIndexes();\nprint(\"Indexes for \" + collection + \":\");\nprintjson(indexes);\n});\n</code></pre>\n\n<p>Between the 3 commands and this snippet you should be well covered!</p>\n", "title": "How to list all collections in the mongo shell?", "answer_id": 34978736, "question_id": 8866041, "tags": ["mongodb"]}, {"body": "<pre><code>&gt; show dbs        \nanuradhfirst  0.000GB\nlocal         0.000GB\n&gt; use anuradhfirst\nswitched to db anuradhfirst\n&gt; show collections\nrecord\n</code></pre>\n\n<ul>\n<li>connect with mongo database using <code>mongo</code>, this will start the connection.</li>\n<li>then run <code>show dbs</code> command, this will show you all exiting/available database.</li>\n<li>then select the <code>database</code> you want.in above it is <code>anuradhfirst</code>, then run <code>use anuradhfirst</code>.this will switch to the database you want.</li>\n<li>then run <code>show collections</code> command, this will show all the <code>collections</code> inside your selected database.</li>\n</ul>\n", "title": "How to list all collections in the mongo shell?", "answer_id": 39072062, "question_id": 8866041, "tags": ["mongodb"]}], "link": "http://stackoverflow.com/questions/8866041/how-to-list-all-collections-in-the-mongo-shell", "question_id": 8866041}, {"body": "<p>I've seen so many different standards for the JSON date format:</p>\n\n<pre><code>\"\\\"\\\\/Date(1335205592410)\\\\/\\\"\"         .NET JavaScriptSerializer\n\"\\\"\\\\/Date(1335205592410-0500)\\\\/\\\"\"    .NET DataContractJsonSerializer\n\"2012-04-23T18:25:43.511Z\"              JavaScript built-in JSON object\n\"2012-04-21T18:25:43-05:00\"             ISO 8601\n</code></pre>\n\n<p>Which one is the right one? Or best? Is there any sort of standard on this?</p>\n", "title": "The &quot;right&quot; JSON date format", "tags": ["javascript", "json"], "answers": [{"body": "<p>JSON does not know anything about dates. What .NET does is a non-standard hack/extension.</p>\n\n<p>I would use a format that can be easily converted to a <code>Date</code> object in JavaScript, i.e. one that can be passed to <a href=\"https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date\"><code>new Date(...)</code></a>. The easiest and probably most portable format is the timestamp containing milliseconds since 1970.</p>\n", "title": "The &quot;right&quot; JSON date format", "answer_id": 10286228, "question_id": 10286204, "tags": ["javascript", "json"]}, {"body": "<p><strong>There is no right format</strong>; The <strong><a href=\"http://www.json.org/\">JSON specification</a></strong> does not specify a format for exchanging dates which is why there are so many different ways to do it.</p>\n\n<p><strong>The best format is arguably a date represented in <a href=\"http://www.w3.org/TR/NOTE-datetime\">8601 format</a></strong>; it is a well known and widely used format and can be handled across many different languages, making it very well suited for interoperability. If you have control over the generated json, for example, you provide data to other systems in json format, choosing 8601 as the date interchange format is a good choice.</p>\n\n<p>If you do not have control over the generated json, for example, you are the consumer of json from several different existing systems, the best way of handling this is to have a date parsing utility function to handle the different formats expected.</p>\n", "title": "The &quot;right&quot; JSON date format", "answer_id": 10286243, "question_id": 10286204, "tags": ["javascript", "json"]}, {"body": "<p><a href=\"http://json.org/\">JSON</a> itself <strong>does not</strong> specify how dates should be represented, but JavaScript does.</p>\n\n<p>You <em>should</em> use the format emitted by <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date\"><code>Date</code></a>'s <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toJSON\"><code>toJSON</code></a> method:</p>\n\n<p><code>2012-04-23T18:25:43.511Z</code></p>\n\n<p>Here's why:</p>\n\n<ol>\n<li><p>It's human readable but also succinct</p></li>\n<li><p>It sorts correctly</p></li>\n<li><p>It includes fractional seconds, which can help re-establish chronology</p></li>\n<li><p>It conforms to <a href=\"http://en.wikipedia.org/wiki/ISO_8601\">ISO 8601</a></p></li>\n<li><p>ISO 8601 has been well-established internationally for more than a decade</p></li>\n<li><p>ISO 8601 is endorsed by <a href=\"http://www.w3.org/TR/NOTE-datetime\">W3C</a>, <a href=\"http://tools.ietf.org/html/rfc3339\">RFC3339</a>, and <a href=\"http://xkcd.com/1179/\">XKCD</a></p></li>\n</ol>\n\n<p><strong>That being said</strong>, every date library ever written can understand \"milliseconds since 1970\". So for easy portability, ThiefMaster is right.</p>\n", "title": "The &quot;right&quot; JSON date format", "answer_id": 15952652, "question_id": 10286204, "tags": ["javascript", "json"]}, {"body": "<p>From <a href=\"https://tools.ietf.org/html/rfc7493\">RFC 7493 (The I-JSON Message Format )</a>:</p>\n\n<p>I-JSON stands for either Internet JSON or Interoperable JSON, depending on who you ask.</p>\n\n<blockquote>\n  <p>Protocols often contain data items that are designed to contain\n  timestamps or time durations.  It is RECOMMENDED that all such data\n  items be expressed as string values in ISO 8601 format, as specified\n  in <a href=\"https://www.ietf.org/rfc/rfc3339.txt\">RFC 3339</a>, with the additional restrictions that uppercase rather\n  than lowercase letters be used, that the timezone be included not\n  defaulted, and that optional trailing seconds be included even when\n  their value is \"00\".  It is also RECOMMENDED that all data items\n  containing time durations conform to the \"duration\" production in\n  Appendix A of RFC 3339, with the same additional restrictions.</p>\n</blockquote>\n", "title": "The &quot;right&quot; JSON date format", "answer_id": 29308069, "question_id": 10286204, "tags": ["javascript", "json"]}, {"body": "<p>There is only one correct answer to this and most systems get it wrong.  Number of milliseconds since epoch, aka a 64 bit integer.  Time Zone is a UI concern and has no business in the app layer or db layer.  Why does your db care what time zone something is, when you know it's going to store it as a 64 bit integer then do the transformation calculations.</p>\n\n<p>Strip out the extraneous bits and just treat dates as numbers up to the UI.  You can use simple arithmetic operators to do queries and logic.</p>\n", "title": "The &quot;right&quot; JSON date format", "answer_id": 34324385, "question_id": 10286204, "tags": ["javascript", "json"]}, {"body": "<p>I think that really depends on the use case. In many cases it might be more beneficial to use a proper object model (instead of rendering the date to a string), like so:</p>\n\n<pre><code>{\n     \"year\": 2012,\n     \"month\": 4,\n     \"day\": 23,\n     \"hour\": 18,\n     \"minute\": 25,\n     \"second\": 43,\n     \"timeZone\": \"America/New_York\"\n}\n</code></pre>\n\n<p>Admittedly this is more verbose than RFC 3339 but:</p>\n\n<ul>\n<li>it's human readable as well</li>\n<li>it implements a proper object model (as in OOP, as far as JSON permits it)</li>\n<li>it supports time zones (not just the UTC offset at the given date and time)</li>\n<li>it can support smaller units like milliseconds, nanoseconds, ... or simply fractional seconds</li>\n<li>it doesn't require a separate parsing step (to parse the date-time string), the JSON parser will do everything for you</li>\n<li>easy creation with any date-time framework or implementation in any language</li>\n<li>can easily be extended to support other calendar scales (Hebrew, Chinese, Islamic ...) and eras (AD, BC, ...)</li>\n<li>it's year 10000 safe ;-) (RFC 3339 isn't)</li>\n<li>supports all-day dates and floating times (Javascript's <code>Date.toJSON()</code> doesn't)</li>\n</ul>\n\n<p>I don't think that correct sorting (as noted by funroll for RFC 3339) is a feature that's really needed when serializing a date to JSON. Also that's only true for date-times having the same time zone offset.</p>\n", "title": "The &quot;right&quot; JSON date format", "answer_id": 34557433, "question_id": 10286204, "tags": ["javascript", "json"]}], "link": "http://stackoverflow.com/questions/10286204/the-right-json-date-format", "question_id": 10286204}, {"body": "<p>Apparently, folk have figured out how to make <a href=\"http://xkcd.com/\">xkcd</a> style graphs <a href=\"http://mathematica.stackexchange.com/questions/11350/xkcd-style-graphs\">in Mathematica</a> and <a href=\"http://tex.stackexchange.com/questions/74878/create-xkcd-style-diagram-in-tex\">in LaTeX</a>. Can we do it in R? Ggplot2-ers? A geom_xkcd and/or theme_xkcd?</p>\n\n<p>I guess in base graphics, par(xkcd=TRUE)?  How do I do it?</p>\n\n<p><img src=\"http://i.stack.imgur.com/f2UqI.png\" alt=\"xkcd#1064\" title=\"FYI: I&#39;ll be releasing a wolf into a randomly-chosen front yard sometime in the next 30 years. Now your fear is reasonable, and you don&#39;t need to feel embarrassed anymore. Problem solved!\"></p>\n\n<p>As a first stab (and as much more elegantly shown below) in ggplot2, adding the jitter argument to a line makes for a great hand-drawn look.  So - </p>\n\n<pre><code>ggplot(mapping=aes(x=seq(1,10,.1), y=seq(1,10,.1))) + \n  geom_line(position=\"jitter\", color=\"red\", size=2) + theme_bw()\n</code></pre>\n\n<p>It makes for a nice example - but the axes and fonts appear trickier. Fonts appear solved (below), though. Is the only way to deal with axes to blank them out and draw them in by hand? Is there a more elegant solution? In particular, in ggplot2, can element_line in the new theme system be modified to take a jitter-like argument?</p>\n", "title": "How can we make xkcd style graphs?", "tags": ["r", "ggplot2"], "answers": [{"body": "<p>This is a very, very rough start and only covers (partially) the hand-drawn look and feel of the lines.  It would take a little bit of work to automate this but adding some AR(1) noise to the response function could make it seem slightly hand drawn</p>\n\n<pre><code>set.seed(551)\nx &lt;- seq(0, 1, length.out = 1000)\ny &lt;- sin(x)\n\nimperfect &lt;- arima.sim(n = length(y), model = list(ar = c(.9999)))\nimperfect &lt;- scale(imperfect)\nz &lt;- y + imperfect*.005\nplot(x, z, type = \"l\", col = \"blue\", lwd = 2)\n</code></pre>\n", "title": "How can we make xkcd style graphs?", "answer_id": 12675462, "question_id": 12675147, "tags": ["r", "ggplot2"]}, {"body": "<p>Here is my take on the lines with <code>ggplot2</code> using some of the code from above:</p>\n\n<pre><code>ggplot()+geom_line(aes(x=seq(0,1,length.out=1000),y=sin(x)),position=position_jitter(width=0.02),lwd=1.5,col=\"white\")+\n  geom_line(aes(x=seq(0,1,length.out=1000),y=sin(x)),position=position_jitter(width=0.004),lwd=1.4,col=\"red\")+\n  geom_line(aes(x=seq(0,1,length.out=1000),y=cos(x)),position=position_jitter(width=0.02),lwd=1.5,col=\"white\")+\n  geom_line(aes(x=seq(0,1,length.out=1000),y=cos(x)),position=position_jitter(width=0.004),lwd=1.4,col=\"blue\")+\n  theme_bw()+theme(panel.grid.major=element_blank(),panel.grid.minor=element_blank())\n</code></pre>\n\n<p>Not sure how to replace the axes, but could use the same approach with <code>jitter</code>.  Then it's a matter of importing the font from XKCD and layering with <code>geom_text</code>.</p>\n", "title": "How can we make xkcd style graphs?", "answer_id": 12680192, "question_id": 12675147, "tags": ["r", "ggplot2"]}, {"body": "<p>Here's an attempt at the fonts, based on links from the xkcd forums and the <code>extrafont</code> package:</p>\n\n<p>As noted above there is a <a href=\"http://forums.xkcd.com/viewtopic.php?f=2&amp;t=59581\" rel=\"nofollow\">forum discussion about fonts on the xkcd site</a>: I grabbed the first one I could find, there may be other (better?) options (@jebyrnes posts another source for possible fonts in comments above -- the TTF file is <a href=\"http://antiyawn.com/uploads/Humor-Sans.ttf\" rel=\"nofollow\">here</a>):</p>\n\n<pre><code>   xkcdFontURL &lt;- \"http://simonsoftware.se/other/xkcd.ttf\"\n   download.file(xkcdFontURL,dest=\"xkcd.ttf\",mode=\"wb\")\n</code></pre>\n\n<p>(This is for quickie, one-off use: for regular use you should put it in some standard system font directory.)</p>\n\n<pre><code>   library(extrafont)\n</code></pre>\n\n<p>The most useful information about fonts was <a href=\"https://github.com/wch/extrafont\" rel=\"nofollow\">on the extrafont github site</a> -- this is taken from there</p>\n\n<pre><code>font_import(\".\")   ## because we downloaded to working directory\nloadfonts()\n</code></pre>\n\n<p>Example taken more or less verbatim from the github site:</p>\n\n<pre><code>library(ggplot2)\np &lt;- ggplot(mtcars, aes(x=wt, y=mpg)) + geom_point() +\n  ggtitle(\"Fuel Efficiency of 32 Cars\") +\n  xlab(\"Weight (x1000 lb)\") + ylab(\"Miles per Gallon\") +\n  theme(text=element_text(size=16, family=\"xkcd\"))\n\nggsave(\"xkcd_ggplot.pdf\", plot=p,  width=4, height=4)\n## needed for Windows:\n##   Sys.setenv(R_GSCMD = \"C:/Program Files/gs/gs9.05/bin/gswin32c.exe\")\nembed_fonts(\"xkcd_ggplot.pdf\")\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/7ui0L.png\" alt=\"enter image description here\"></p>\n", "title": "How can we make xkcd style graphs?", "answer_id": 12680311, "question_id": 12675147, "tags": ["r", "ggplot2"]}, {"body": "<p>Basic line-drawing function:</p>\n\n<pre><code>xkcd_line &lt;- function(x, y, color) {\n  len &lt;- length(x);\n  rg &lt;- par(\"usr\");\n  yjitter &lt;- (rg[4] - rg[3]) / 1000;\n  xjitter &lt;- (rg[2] - rg[1]) / 1000;\n  x_mod &lt;- x + rnorm(len) * xjitter;\n  y_mod &lt;- y + rnorm(len) * yjitter;\n  lines(x_mod, y_mod, col='white', lwd=10);\n  lines(x_mod, y_mod, col=color, lwd=5);\n}\n</code></pre>\n\n<p>Basic axis:</p>\n\n<pre><code>xkcd_axis &lt;- function() {\n\u00a0\u00a0rg &lt;- par(\"usr\");\n\u00a0\u00a0yaxis &lt;- 1:100 / 100 * (rg[4] - rg[3]) + rg[3];\n\u00a0\u00a0xaxis &lt;- 1:100 / 100 * (rg[2] - rg[1]) + rg[1];\n\u00a0\u00a0xkcd_line(1:100 * 0 + rg[1] + (rg[2]-rg[1])/100, yaxis,'black')\n\u00a0\u00a0xkcd_line(xaxis, 1:100 * 0 + rg[3] + (rg[4]-rg[3])/100, 'black')\n}\n</code></pre>\n\n<p>And sample code:</p>\n\n<pre><code>data &lt;- data.frame(x=1:100)\ndata$one &lt;- exp(-((data$x - 50)/10)^2)\ndata$two &lt;- sin(data$x/10)\nplot.new()\nplot.window(\n    c(min(data$x),max(data$x)),\n    c(min(c(data$one,data$two)),max(c(data$one,data$two))))\nxkcd_axis()\nxkcd_line(data$x, data$one, 'red')\nxkcd_line(data$x, data$two, 'blue')\n</code></pre>\n\n<p>Produces:</p>\n\n<p><img src=\"http://i.stack.imgur.com/Bx2Mm.png\" alt=\"Example chart\"></p>\n", "title": "How can we make xkcd style graphs?", "answer_id": 12680841, "question_id": 12675147, "tags": ["r", "ggplot2"]}, {"body": "<p>Thinking along the same line as some of the other answers, I've \"un-ggplotted\" the chart and also added on the flexibility of the x-axis label locations (which seems to be common in xkcd) and an arbitrary label on the chart. </p>\n\n<p>Note that I had a few issues with loading the Humor Sans font and manually downloaded it to working directory. </p>\n\n<p><img src=\"http://i.stack.imgur.com/uMUym.jpg\" alt=\"enter image description here\"></p>\n\n<p>And the code...</p>\n\n<pre><code>library(ggplot2)\nlibrary(extrafont)\n\n### Already have read in fonts (see previous answer on how to do this)\nloadfonts()\n\n### Set up the trial dataset \ndata &lt;- NULL\ndata$x &lt;- seq(1, 10, 0.1)\ndata$y1 &lt;- sin(data$x)\ndata$y2 &lt;- cos(data$x)\ndata$xaxis &lt;- -1.5\n\ndata &lt;- as.data.frame(data)\n\n### XKCD theme\ntheme_xkcd &lt;- theme(\n    panel.background = element_rect(fill=\"white\"), \n    axis.ticks = element_line(colour=NA),\n    panel.grid = element_line(colour=\"white\"),\n    axis.text.y = element_text(colour=NA), \n    axis.text.x = element_text(colour=\"black\"),\n    text = element_text(size=16, family=\"Humor Sans\")\n    )\n\n ### Plot the chart\n p &lt;- ggplot(data=data, aes(x=x, y=y1))+\n      geom_line(aes(y=y2), position=\"jitter\")+\n      geom_line(colour=\"white\", size=3, position=\"jitter\")+\n      geom_line(colour=\"red\", size=1, position=\"jitter\")+\n      geom_text(family=\"Humor Sans\", x=6, y=-1.2, label=\"A SIN AND COS CURVE\")+\n      geom_line(aes(y=xaxis), position = position_jitter(h = 0.005), colour=\"black\")+\n      scale_x_continuous(breaks=c(2, 5, 6, 9), \n      labels = c(\"YARD\", \"STEPS\", \"DOOR\", \"INSIDE\"))+labs(x=\"\", y=\"\")+\n      theme_xkcd\n\nggsave(\"xkcd_ggplot.jpg\", plot=p, width=8, height=5)\n</code></pre>\n", "title": "How can we make xkcd style graphs?", "answer_id": 12681845, "question_id": 12675147, "tags": ["r", "ggplot2"]}, {"body": "<p>You might want to consider the following package:</p>\n\n<p><a href=\"http://xkcd.r-forge.r-project.org/\">Package xkcd</a>: Plotting ggplot2 graphics in a XKCD style.</p>\n\n<pre><code>library(xkcd)\nvignette(\"xkcd-intro\")\n</code></pre>\n\n<p>Some examples (Scatterplots, Bar Charts):</p>\n\n<ul>\n<li>Scatterplot:</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/IWMKd.png\" alt=\"Scatterplot\"></p>\n\n<ul>\n<li>Bar Chart:</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/LyEvh.png\" alt=\"Bar Chart\"></p>\n", "title": "How can we make xkcd style graphs?", "answer_id": 16597217, "question_id": 12675147, "tags": ["r", "ggplot2"]}, {"body": "<p>I designed a xkcd themed analytics calendar just using RStudio. Here is an example of bar plot xkcd style</p>\n\n<ul>\n<li>Font used = HumorSans.ttf [link given above]</li>\n<li>Package used [xkcd]</li>\n</ul>\n\n<p>To generate this plot\n<img src=\"http://i.stack.imgur.com/GkL19.jpg\" alt=\"Bar plot proxy for &#39;Dangers at Work&#39;\"></p>\n\n<p>Here is the code used</p>\n\n<pre><code>#using packages xkcd, ggplot \nlibrary(xkcd)\nlibrary(ggplot2)\nfont_import(pattern=\"[H/h]umor\")\nloadfonts()\n\n### Set up the trial dataset \nd1 &lt;- data.frame('type'=c('DROWNING','RADIATION','TOILET',\"ELECTRICAL\",'NOISE','PANTRY','YOUR    FALLING ON OBJECTS','OBJECTS FALLING ON YOU','BOSS','FIRE','TRAVEL TO WORK'),'score'=c(2,2,3,6,6,6,11,14,21,26,30))\n\n# we will keep adding layers on plot p. first the bar plot\np &lt;- NULL\np &lt;- ggplot() + xkcdrect(aes(xmin = type-0.1,xmax= type+0.1,ymin=0,ymax =score),\n                     d1,fill= \"#D55E00\", colour= \"#D55E00\")  +\n     geom_text(data=d1,aes(x=type,y=score+2.5,label=score,ymax=0),family=\"Humor Sans\") +   coord_flip()\n\n#hand drawn axes\nd1long &lt;- NULL\nd1long &lt;- rbind(c(0,-2),d1,c(12,32))\nd1long$xaxis &lt;- -1\nd1long$yaxis &lt;- 11.75\n\n# drawing jagged axes\np &lt;- p + geom_line(data=d1long,aes(x=type,y=jitter(xaxis)),size=1)\np &lt;- p + geom_line(data=d1long,aes(x=yaxis,y=score), size=1) \n\n# draw axis ticks and labels\np &lt;- p +  scale_x_continuous(breaks=seq(1,11,by=1),labels = data$Type) +\n     scale_y_continuous(breaks=NULL)\n\n#writing stuff on the graph\nt1 &lt;- \"GOOGLE RESULTS\"\np &lt;- p + annotate('text',family=\"Humor Sans\", x=12.5, y=12, label=t1, size=6) \n\n# XKCD theme\np &lt;- p + theme(panel.background = element_rect(fill=\"white\"),\n           panel.grid = element_line(colour=\"white\"),axis.text.x = element_blank(), \n           axis.text.y = element_text(colour=\"black\"),text = element_text(size=18, family=\"Humor   Sans\") ,panel.grid.major = element_blank(),panel.grid.minor = element_blank(),panel.border = element_blank(),axis.title.y = element_blank(),axis.title.x = element_blank(),axis.ticks = element_blank())\n\nprint(p)\n</code></pre>\n", "title": "How can we make xkcd style graphs?", "answer_id": 27633134, "question_id": 12675147, "tags": ["r", "ggplot2"]}], "link": "http://stackoverflow.com/questions/12675147/how-can-we-make-xkcd-style-graphs", "question_id": 12675147}, {"body": "<p>I am developing a <strong>payment processing app</strong> for Android, and I want to prevent a hacker from accessing any resources, assets or source code from the <a href=\"http://en.wikipedia.org/wiki/APK_%28file_format%29\">APK</a> file.</p>\n\n<p>If someone changes the .apk extension to .zip then they can unzip it and easily access all the app's resources and assets, and using <a href=\"http://code.google.com/p/dex2jar/wiki/Faq\">dex2jar</a> and a Java decompiler, they can also access the source code. It's very easy to reverse engineer an Android APK file - for more details see Stack Overflow question <em><a href=\"http://stackoverflow.com/questions/12732882/reverse-engineering-from-apk-to-project\">Reverse engineering from an APK file to a project</a></em>.</p>\n\n<p>I have used the Proguard tool provided with the Android SDK. When I reverse engineer an APK file generated using a signed keystore and Proguard, I get obfuscated code. However, the names of Android components remain unchanged and some code, like key-values used in the app, remains unchanged. As per Proguard documentation the tool can't obfuscate components mentioned in the Manifest file.</p>\n\n<p>Now my questions are:</p>\n\n<ol>\n<li>How can I <strong>completely avoid</strong> reverse engineering of an Android APK? Is this possible?</li>\n<li>How can I protect all the app's resources, assets and source code so that hackers can't hack the APK file in any way?</li>\n<li><strong>Is there a way to make hacking more tough or even impossible?</strong> What more can I do to protect the source code in my APK file?</li>\n</ol>\n", "title": "How to avoid reverse engineering of an APK file?", "tags": ["android", "security", "proguard", "reverse-engineering"], "answers": [{"body": "<p>Developers can take following steps to prevent an APK from theft somehow,</p>\n\n<ul>\n<li><p>the most basic way is to use tools like <code>ProGuard</code> to obfuscate their code, but up until now, it has been quite difficult to completely prevent someone from decompiling an app.</p></li>\n<li><p>Also I have heard about a tool <a href=\"http://www.decompilingandroid.com/hosedex2jar/\">HoseDex2Jar</a>.  It stops <code>Dex2Jar</code> by inserting harmless code in an Android APK that confuses and disables <code>Dex2Jar</code> and protects the code from decompilation. It could somehow prevent hackers from decompiling an APK into readable java code. </p></li>\n<li><p>Use some server side application to communicate with the application only when it is needed. It could help prevent the important data.</p></li>\n</ul>\n\n<p>At all, you can not completely protect your code from the potential hackers. Somehow, you could make it difficult and a bit frustrating task for them to decompile your code. One of the most efficient way is to write in native code(C/C++) and store it as compiled libraries.</p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 13854589, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<blockquote>\n  <p>&nbsp;1. How can I completely avoid reverse engineering of an Android APK? Is this possible?</p>\n</blockquote>\n\n<p>AFAIK, there is not any trick for complete avoidance of reverse engineering.</p>\n\n<p>And also very well said by @inazaruk: <em>Whatever you do to your code, a potential attacker is able to change it in any way she or he finds it feasible</em>. You basically can't protect your application from being modified. And any protection you put in there can be disabled/removed.</p>\n\n<blockquote>\n  <p>&nbsp;2. How can I protect all the app's resources, assets and source code so that hackers can't hack the APK file in any way?</p>\n</blockquote>\n\n<p>You can do different tricks to make hacking harder though. For example, use obfuscation (if it's Java code). This usually slows down reverse engineering significantly.</p>\n\n<blockquote>\n  <p>&nbsp;3. Is there a way to make hacking more tough or even impossible? What more can I do to protect the source code in my APK file?</p>\n</blockquote>\n\n<p>As everyone says, and as you probably know, there's no 100% security. But the place to start for Android, that Google has built in, is ProGuard. If you have the option of including <strong>shared libraries</strong>, you can include the needed code in C++ to verify file sizes, integration,\netc. If you need to add an external native library to your APK's library folder on every build,\nthen you can use it by the below suggestion.</p>\n\n<p>Put the library in the native library path which defaults to \"libs\" in\nyour project folder. If you built the native code for the <strong>'armeabi'</strong> target then put it\nunder <strong>libs/armeabi</strong>. If it was built with <strong>armeabi-v7a</strong> then put it under\n<strong>libs/armeabi-v7a.</strong></p>\n\n<pre><code>&lt;project&gt;/libs/armeabi/libstuff.so\n</code></pre>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 13854693, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<blockquote>\n  <p>&nbsp;1. How can I completely avoid reverse engineering of an Android APK? Is this possible?</p>\n</blockquote>\n\n<p>Impossible</p>\n\n<blockquote>\n  <p>&nbsp;2. How can I protect all the app's resources, assets and source code so that hackers can't hack the APK file in any way?</p>\n</blockquote>\n\n<p>Impossible</p>\n\n<blockquote>\n  <p>&nbsp;3. Is there a way to make hacking more tough or even impossible? What more can I do to protect the source code in my APK file?</p>\n</blockquote>\n\n<p>More tough - possible, but in fact it will be more tough mostly for the average user, who is just googling for hacking guides. If somebody really wants to hack your app - it will be hacked, sooner or later.</p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 13854703, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<p>100% avoidance of reverse engineering of the Android APK is not possible, but you can use these ways to avoid extracting more data, like source code, assets form your APK, and resources:</p>\n\n<ol>\n<li><p>Use ProGuard to obfuscate application code</p></li>\n<li><p>Use <em>NDK</em> using <em>C and C++</em> to put your application core and secure part of code in <code>.so</code> files</p></li>\n<li><p>To secure resources, don't include all important resources in the assets folder with APK. Download these resources at the time of application first start up.</p></li>\n</ol>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 13854747, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<p>AFAIK, you cannot protect the files in the /res directory anymore than they are protected right now.</p>\n\n<p>However, there are steps you can take to protect your source code, or at least what it does if not everything.</p>\n\n<ol>\n<li>Use tools like ProGuard. These will obfuscate your code, and make it harder to read when decompiled, if not impossible.</li>\n<li>Move the most critical parts of the service out of the app, and into a webservice, hidden behind a server side language like PHP. For example, if you have an algorithm that's taken you a million dollars to write. You obviously don't want people stealing it out of your app. Move the algorithm and have it process the data on a remote server, and use the app to simply provide it with the data. Or use the NDK to write them natively into .so files, which are much less likely to be decompiled than apks. I don't think a decompiler for .so files even exists as of now (and even if it did, it wouldn't be as good as the Java decompilers). Additionally, as @nikolay mentioned in the comments, you should use SSL when interacting between the server and device.</li>\n<li>When storing values on the device, don't store them in a raw format. For example, if you have a game, and you're storing the amount of in game currency the user has in SharedPreferences. Let's assume it's <code>10000</code> coins. Instead of saving <code>10000</code> directly, save it using an algorithm like <code>((currency*2)+1)/13</code>. So instead of <code>10000</code>, you save <code>1538.53846154</code> into the SharedPreferences. However, the above example isn't perfect, and you'll have to work to come up with an equation that won't lose currency to rounding errors etc.</li>\n<li>You can do a similar thing for server side tasks. Now for an example, let's actually take your payment processing app. Let's say the user has to make a payment of <code>$200</code>. Instead of sending a raw <code>$200</code> value to the server, send a series of smaller, predefined, values that add up to <code>$200</code>. For example, have a file or table on your server that equates words with values. So let's say that <code>Charlie</code> corresponds to <code>$47</code>, and <code>John</code> to <code>$3</code>. So instead of sending <code>$200</code>, you can send <code>Charlie</code> four times and <code>John</code> four times. On the server, interpret what they mean and add it up. This prevents a hacker from sending arbitrary values to your server, as they do not know what word corresponds to what value. As an added measure of security, you could have an equation similar to point 3 for this as well, and change the keywords every <code>n</code> number of days.</li>\n<li>Finally, you can insert random useless source code into your app, so that the hacker is looking for a needle in a haystack. Insert random classes containing snippets from the internet, or just functions for calculating random things like the Fibonacci sequence. Make sure these classes compile, but aren't used by the actual functionality of the app. Add enough of these false classes, and the hacker would have a tough time finding your real code.</li>\n</ol>\n\n<p>All in all, there's no way to protect your app 100%. You can make it harder, but not impossible. Your web server could be compromised, the hacker could figure out your keywords by monitoring multiple transaction amounts and the keywords you send for it, the hacker could painstakingly go through the source and figure out which code is a dummy.</p>\n\n<p>You can only fight back, but never win.</p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 13854751, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<p>The main question here is that can the dex files be decompiled and the answer is they can be \"sort of\". There are disassemblers like <a href=\"http://dedexer.sourceforge.net/\">dedexer</a> and <a href=\"http://code.google.com/p/smali/\">smali</a>.</p>\n\n<p>ProGuard, properly configured, will obfuscate your code. DexGuard which is a commercial extended version of ProGuard, may help a bit more. However, your code can still be converted into smali and developers with reverse-engineering experience will be able to figure out what you are doing from the smali.</p>\n\n<p>Maybe choose a good license and enforce it by the law in best possible way.</p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 13854794, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<blockquote>\n  <p>&nbsp;1. How can I completely avoid reverse engineering of an Android APK? Is this possible?</p>\n</blockquote>\n\n<p><strong>This isn't possible</strong></p>\n\n<blockquote>\n  <p>&nbsp;2. How can I protect all the app's resources, assets and source code so that hackers can't hack the APK file in any way?</p>\n</blockquote>\n\n<p>When somebody change a .apk extension to .zip, then after unzipping, someone can easily get all resources (except <em>Manifest.xml</em>), but with <strong><a href=\"http://code.google.com/p/android-apktool/\">APKtool</a></strong> one can get the real content of the manifest file too. Again, a no.</p>\n\n<blockquote>\n  <p>&nbsp;3. Is there a way to make hacking more tough or even impossible? What more can I do to protect the source code in my APK file?</p>\n</blockquote>\n\n<p>Again, no, but you can prevent upto some level, that is, </p>\n\n<ul>\n<li>Download a resource from the Web and do some encryption process</li>\n<li>Use a pre-compiled native library (C, C++, JNI, NDK)</li>\n<li>Always perform some hashing (<a href=\"http://en.wikipedia.org/wiki/MD5\">MD5</a>/<a href=\"http://en.wikipedia.org/wiki/SHA-1\">SHA</a> keys or any other logic)</li>\n</ul>\n\n<p>Even with <code>Smali</code>, people can play with your code. All in all, it's not POSSIBLE.</p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 13854795, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<p>At no point in the history of computing has it ever been possible to prevent reverse-engineering of software when you give a working copy of it to your attacker. Also, in most likelihood, <strong>it never will be possible</strong>.</p>\n\n<p>With that understood, there is an obvious solution: <em>don't give your secrets to your attacker.</em> While you can't protect the contents of your APK, what you <em>can</em> protect is anything you don't distribute. Typically this is server-side software used for things like activation, payments, rule-enforcement, and other juicy bits of code. You can protect valuable assets by <em>not</em> distributing them in your APK. Instead, set up a server that responds to requests from your app, \"uses\" the assets (whatever that might mean) and then sends the result back to the app. If this model doesn't work for the assets you have in mind, then you may want to re-think your strategy.</p>\n\n<p>Also, <strong>if your primary goal is to prevent app piracy</strong>: don't even bother. You've already burned more time and money on this problem than any anti-piracy measure could possibly ever hope to save you. The return on investment for solving this problem is so low that it doesn't make sense to even think about it.</p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 13855806, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<p>I suggest you to look at <em><a href=\"http://www.arxan.com/solutions/\" rel=\"nofollow\">Protect Software Applications from Attacks</a></em>. It's a commercial service, but my friend's company used this and they are glad to use it.</p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 13855814, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<p>Your client should hire someone that knows what they are doing, who can make the right decisions and can mentor you.</p>\n\n<p>Talk above about you having some ability to change the transaction processing system on the backend is absurd - you shouldn't be allowed to make such architectural changes, so don't expect to be able to.</p>\n\n<p>My rationale on this:</p>\n\n<p>Since your domain is payment processing, its safe to assume that PCI DSS and/or PA DSS (and potential state/federal law) will be significant to your business - to be compliant you must show you are secure. To be insecure then find out (via testing) that you aren't secure, then fixing, retesting, etcetera until security  can be verified at a suitable level = expensive, slow, high-risk way to success. To do the right thing, think hard up front, commit experienced talent to the job, develop in a secure manner, then test, fix (less), etcetera (less) until security can be verified at a suitable level = inexpensive, fast, low-risk way to success.</p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 13859680, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<p>Basically it's not possible. It will never be possible. However, there is hope. You can use an <a href=\"http://en.wikipedia.org/wiki/Obfuscation_%28software%29\" rel=\"nofollow\">obfuscator</a> to make it so some common attacks are a lot harder to carry out including things like:</p>\n\n<ol>\n<li>Renaming methods/classes (so in the decompiler you get types like <code>a.a</code>)</li>\n<li>Obfuscating control flow (so in the decompiler the code is very hard to read)</li>\n<li>Encrypting strings and possibly resources</li>\n</ol>\n\n<p>I'm sure there are others, but that's the main ones. I work for a company called PreEmptive Solutions on a <a href=\"http://en.wikipedia.org/wiki/.NET_Framework\" rel=\"nofollow\">.NET</a> obfuscator. They also have a Java obfuscator that works for Android as well one called <a href=\"http://www.preemptive.com/products/dasho\" rel=\"nofollow\">DashO</a>.</p>\n\n<p>Obfuscation always comes with a price, though. Notably, performance is usually worse, and it requires some extra time around releases usually. However, if your intellectual property is extremely important to you, then it's usually worth it.</p>\n\n<p>Otherwise, your only choice is to make it so that your Android application just passes through to a server that hosts all of the real logic of your application. This has its own share of problems, because it means users must be connected to the Internet to use your app.</p>\n\n<p>Also, it's not just Android that has this problem. It's a problem on every app store. It's just a matter of how difficult it is to get to the package file (for example, I don't believe it's very easy on iPhones, but it's still possible).</p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 13863133, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<blockquote>\n  <p><strong>First rule of app security:</strong> Any machine to which an attacker gains unrestricted physical or electronic access now belongs to your attacker, regardless of where it actually is or what you paid for it.</p>\n  \n  <p><strong>Second rule of app security:</strong> Any software that leaves the physical boundaries inside which an attacker cannot penetrate now belongs to your attacker, regardless of how much time you spent coding it.</p>\n  \n  <p><strong>Third rule:</strong> Any information that leaves those same physical boundaries that an attacker cannot penetrate now belongs to your attacker, no matter how valuable it is to you.</p>\n</blockquote>\n\n<p>The foundations of information technology security are based on these three fundamental principles; the only truly secure computer is the one locked in a safe, inside a Farraday cage, inside a steel cage. There are computers that spend most of their service lives in just this state; once a year (or less), they generate the private keys for trusted root certification authorities (in front of a host of witnesses with cameras recording every inch of the room in which they are located).</p>\n\n<p>Now, most computers are not used under these types of environments; they're physically out in the open, connected to the Internet over a wireless radio channel. In short, they're vulnerable, as is their software. They are therefore not to be trusted. There are certain things that computers and their software must know or do in order to be useful, but care must be taken to ensure that they can never know or do enough to cause damage (at least not permanent damage outside the bounds of that single machine).</p>\n\n<p>You already knew all this; that's why you're trying to protect the code of your application. But, therein lies the first problem; obfuscation tools can make the code a mess for a human to try to dig through, but the program still has to run; that means the actual logic flow of the app and the data it uses are unaffected by obfuscation. Given a little tenacity, an attacker can simply un-obfuscate the code, and that's not even necessary in certain cases where what he's looking at can't be anything else but what he's looking for.</p>\n\n<p>Instead, you should be trying to ensure that an attacker cannot do anything with your code, no matter how easy it is for him to obtain a clear copy of it. That means, no hard-coded secrets, because those secrets aren't secret as soon as the code leaves the building in which you developed it.</p>\n\n<p>These key-values you have hard-coded should be removed from the application's source code entirely. Instead, they should be in one of three places; volatile memory on the device, which is harder (but still not impossible) for an attacker to obtain an offline copy of; permanently on the server cluster, to which you control access with an iron fist; or in a second data store unrelated to your device or servers, such as a physical card or in your user's memories (meaning it will eventually be in volatile memory, but it doesn't have to be for long).</p>\n\n<p>Consider the following scheme. The user enters their credentials for the app from memory into the device. You must, unfortunately, trust that the user's device is not already compromised by a keylogger or Trojan; the best you can do in this regard is to implement multi-factor security, by remembering hard-to-fake identifying information about the devices the user has used (MAC/IP, IMEI, etc), and providing at least one additional channel by which a login attempt on an unfamiliar device can be verified.</p>\n\n<p>The credentials, once entered, are obfuscated by the client software (using a secure hash), and the plain-text credentials discarded; they have served their purpose. The obfuscated credentials are sent over a secure channel to the certificate-authenticated server, which hashes them <em>again</em> to produce the data used to verify the validity of the login. This way, the client never knows what is actually compared to the database value, the app server never knows the plaintext credentials behind what it receives for validation, the data server never knows how the data it stores for validation is produced, and a man in the middle sees only gibberish even if the secure channel were compromised.</p>\n\n<p>Once verified, the server transmits back a token over the channel. The token is only useful within the secure session, is composed of either random noise or an encrypted (and thus verifiable) copy of the session identifiers, and the client application must send this token on the same channel to the server as part of any request to do something. The client application will do this many times, because it can't do anything involving money, sensitive data, or anything else that could be damaging by itself; it must instead ask the server to do this task. The client application will never write any sensitive information to persistent memory on the device itself, at least not in plain text; the client can ask the server over the secure channel for a symmetric key to encrypt any local data, which the server will remember; in a later session the client can ask the server for the same key to decrypt the data for use in volatile memory. That data won't be the only copy, either; anything the client stores should also be transmitted in some form to the server.</p>\n\n<p>Obviously, this makes your application heavily dependent on Internet access; the client device cannot perform any of its basic functions without proper connection to and authentication by the server. No different than Facebook, really.</p>\n\n<p>Now, the computer that the attacker wants is your server, because it and not the client app/device is the thing that can make him money or cause other people pain for his enjoyment. That's OK; you get much more bang for your buck spending money and effort to secure the server than in trying to secure all the clients. The server can be behind all kinds of firewalls and other electronic security, and additionally can be physically secured behind steel, concrete, keycard/pin access, and 24-hour video surveillance. Your attacker would need to be very sophisticated indeed to gain any kind of access to the server directly, and you would (should) know about it immediately. </p>\n\n<p>The best an attacker can do is steal a user's phone and credentials and log in to the server with the limited rights of the client. Should this happen, just like losing a credit card, the legitimate user should be instructed to call an 800 number (preferably easy to remember, and not on the back of a card they'd carry in their purse, wallet or briefcase which could be stolen alongside the mobile device) from any phone they can access that connects them directly to your customer service. They state their phone was stolen, provide some basic unique identifier, and the account is locked, any transactions the attacker may have been able to process are rolled back, and the attacker is back to square one.</p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 13867141, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<p>The other upvoted answers here are correct. I just want to provide another option.</p>\n\n<p>For certain functionality that you deem important you can host the <a href=\"http://developer.android.com/reference/android/webkit/WebView.html\">WebView</a> control in your app. The functionality would then be implemented on your web server. It will look like it's running in your application.</p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 13867248, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<p>If we want to make reverse engineering (almost) impossible, we can put the application on a highly tamper-resistant chip, which executes all sensitive stuff internally, and communicates with some protocol to make controlling GUI possible on the host. Even tamper-resistant chips are not 100% crack proof; they just set the bar a lot higher than software methods. Of course, this is inconvenient: the application requires some little USB wart which holds the chip to be inserted into the device.</p>\n\n<p>The question doesn't reveal the motivation for wanting to protect this application so jealously. </p>\n\n<p>If the aim is to improve the security of the payment method by concealing whatever security flaws the application may have (known or otherwise), it is completely wrongheaded.  The security-sensitive bits should in fact be open-sourced, if that is feasible. You should make it as easy as possible for any security researcher who reviews your application to find those bits and scrutinize their operation, and to contact you. Payment applications should not contain any embedded certificates. That is to say, there should be no server appliaction which trusts a device simply because it has a fixed certificate from the factory. A payment transaction should be made on the user's credentials alone, using a correctly designed end-to-end authentication protocol which precludes trusting the application, or the platform, or the network, etc.</p>\n\n<p>If the aim is to prevent cloning, short of that tamper-proof chip, there isn't anything you can do to protect the program from being reverse-engineered and copied, so that someone incorporates a compatible payment method into their own application, giving rise to \"unauthorized clients\". There are ways to make it difficult to develop unauthorized clients. One would be to create checksums based on snapshots of the program's complete state: all state variables, for everything. GUI, logic, whatever. A clone program will not have exactly the same internal state. Sure, it is a state machine which has similar externally visible state transitions (as can be observed by inputs and outputs), but hardly the same internal state. A server application can interrogate the program: what is your detailed state? (i.e. give me a checksum over all of your internal state variables).  This can be compared against dummy client code which executes on the server in parallel, going through the genuine state transitions. A third party clone will have to replicate all of the relevant state changes of the genuine program in order to give the correct responses, which will hamper its development.</p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 13870938, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<blockquote>\n  <p>&nbsp;1. How can I completely avoid reverse engineering of an Android APK? Is this possible?</p>\n</blockquote>\n\n<p><strong>That is impossible</strong></p>\n\n<blockquote>\n  <p>&nbsp;2. How can I protect all the app's resources, assets and source code so that hackers can't hack the APK file in any way?</p>\n</blockquote>\n\n<p><strong>Developers can take steps such as using tools like ProGuard to obfuscate their code, but up until now, it has been quite difficult to completely prevent someone from decompiling an app.</strong></p>\n\n<p>It's a really great tool and can increase the difficulty of 'reversing' your code whilst shrinking your code's footprint.</p>\n\n<p>Integrated ProGuard support: ProGuard is now packaged with the SDK Tools. Developers can now obfuscate their code as an integrated part of a release build.</p>\n\n<blockquote>\n  <p>&nbsp;3. Is there a way to make hacking more tough or even impossible? What more can I do to protect the source code in my APK file?</p>\n</blockquote>\n\n<p>While researching, I came to know about <a href=\"http://www.decompilingandroid.com/hosedex2jar/\">HoseDex2Jar</a>. This tool will protect your code from decompiling, but it seems not to be possible to protect your code completely.</p>\n\n<p>Some of helpful links, you can refer to them. </p>\n\n<ul>\n<li><a href=\"http://android-developers.blogspot.in/2010/09/proguard-android-and-licensing-server.html\">Proguard, Android, and the Licensing Server</a></li>\n<li><a href=\"http://android-developers.blogspot.in/2010/09/securing-android-lvl-applications.html\">Securing Android LVL Applications</a></li>\n<li>Stack Overflow question <em><a href=\"http://stackoverflow.com/questions/4336637/is-it-really-impossible-to-protect-android-apps-from-reverse-engineering\">Is it really impossible to protect Android apps from reverse engineering?</a></em></li>\n<li>Stack Overflow question <em><a href=\"http://stackoverflow.com/questions/13380097/how-to-prevent-reverse-engineer-for-android-apk-to-secure-code\">How to prevent reverse engineering of an Android APK file to secure code?</a></em></li>\n</ul>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 13873041, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<p>As someone who worked extensively on payment platforms, including one mobile payments application (MyCheck), I would say that you need to delegate this behaviour to the server, no user name or password for the payment processor (whichever it is) should be stored or hardcoded in the mobile application, that's the last thing you want, because the source can be understood even when if you obfuscate the code.</p>\n\n<p>Also, you shouldn't store credit cards or payment tokens on the application, everything should be, again, delegated to a service you built, it will also allow you later on, be PCI-compliant more easily, and the Credit Card companies won't breath down your neck (like they did for us).</p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 13902671, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<blockquote>\n  <p>How can I protect all the app's resources, assets and source code so that hackers can't hack the APK file in any way?</p>\n</blockquote>\n\n<p>An APK file is protected with the <a href=\"http://en.wikipedia.org/wiki/SHA-1\" rel=\"nofollow\">SHA-1</a> algorithm. You can see some files in the <strong>META-INF</strong> folder of APK. If you extract any APK file and change any of its content and zip it again and when you run that new APK file on an Android machine, it will not work, because the SHA-1 hashes will never match. </p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 13945953, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<p>Here are few methods you can try:</p>\n\n<ol>\n<li>Use <a href=\"http://en.wikipedia.org/wiki/Obfuscation_%28software%29\">obfuscation</a> and tools like <a href=\"http://proguard.sourceforge.net/\">ProGuard</a>.</li>\n<li>Encrypt some part of source and data.</li>\n<li>Use a proprietary inbuilt checksum in the app to detect tempering.</li>\n<li>Introduce code to avoid loading in a debugger, that is, let the app have the ability to detect the debugger and exit / kill the debugger.</li>\n<li>Seperate the authentication as an online service.</li>\n<li>Use <a href=\"http://dl.acm.org/citation.cfm?id=1900550\">application diversity</a> </li>\n<li>Use the finger printing technique for e.g., hardware signatures of the devices from different subsystem before authenticating the device.</li>\n</ol>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 14111809, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<p>While I agree there's no 100% solution that's going to protect your code, v3 of <a href=\"http://www.decompilingandroid.com\" rel=\"nofollow\">HoseDex2Jar</a> is now up if you want to give it a try.</p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 14127250, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<p>Aren't TPM chips (Trusted Platform Module) supposed to manage protected code for you ? They are becoming common on PCs (especially Apple ones) and they may already exist in today's smartphone chips. Unfortunately there is no OS API to make use of it yet. Hopefully Android will add support for this one day. That's also the key to clean content DRM (which Google is working on for WebM).</p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 14216084, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<p>Just an addition to already good answers above.</p>\n\n<p>Another trick I know is to store valuable codes as Java Library. Then set that Library to be your Android Project. Would be good as C .so file but Android Lib would do.</p>\n\n<p>This way these valuable codes stored on Android Library won't be visible after decompiling.</p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 15826768, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<p>Basically, there are 5 methods to protect your APK.\nIsolate Java Program, Encrypt Class Files, Convert to Native Codes, Code Obfuscation and <a href=\"http://www.apkprotect.com/\" rel=\"nofollow\">Online Encryption</a>\nI suggest you use online encryption because it is safe and convenient. You needn't spend to much time to achieve this. Such as <a href=\"http://www.apkprotect.com/\" rel=\"nofollow\">APK Protect</a>, it is an online encryption website for APK. It provides Java codes and C++ codes protection to achieve anti-debugging and decompile effects. The operation process is simple and easy.</p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 17670464, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<p>when they have the app on their phone, they have full access to memory of it. so if u want to prevent it from being hacked, you could try to make it so that u cant just get the static memory address directly by using a debugger. they could do a stack buffer overflow if they have somewhere to write and they have a limit. so try to make it so when they write something, if u have to have a limit, if they send in more chars than limit, if (input > limit) then ignore, so they cant put assembly code there.</p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 32372516, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<blockquote>\n  <p>I am developing a <strong>payment processing app</strong></p>\n</blockquote>\n\n<p>Google <a href=\"http://techcrunch.com/2010/03/19/google-chrome-1337/\" rel=\"nofollow\">have been</a> very successful in avoiding malicious hackers in general by using a <a href=\"http://www.securityweek.com/google-promises-more-money-chrome-vulnerabilities\" rel=\"nofollow\">simple financial method</a> to \"protect\" <a href=\"https://www.google.pt/about/appsecurity/chrome-rewards/\" rel=\"nofollow\">Google Chrome</a>, and I quote: </p>\n\n<blockquote>\n  <p>We have a standing $50,000 reward for participants that can compromise a Chromebook or Chromebox with device persistence in guest mode</p>\n</blockquote>\n\n<p>Your best bet to actually get closer to 100% \"security\" is picking the right fight for your money's worth.</p>\n\n<p>Now, that won't protect you from lunatics and lucky pranksters, but... The later group will only enjoy little time in while the system readjusts. While a lunatic is something you only need to worry in case you're big enough to have a nemesis. And that would make a great story! :)</p>\n\n<p>Invest in Ai. Identifying patterns in money flow to predict potential risks is much more \"secure\" than trying to prevent money leakage.</p>\n\n<p><sup>I tried writing <a href=\"http://talk.cregox.com/t/cheap-philosophical-links-about-the-financial-rabbit-hole/7748?u=cregox\" rel=\"nofollow\">more about all the above in my \"blog\"</a>, such as why I'm putting \"security\" and \"protect\" in quotes (what do they even really mean?).</sup></p>\n\n<hr>\n\n<p>In other words, instead of asking \"<em>how to avoid reverse engineering</em>\" try asking \"<em>how to engineer a <strong>bullet proof</strong> payment processing app</em>\".</p>\n\n<p>Finally, as a <em>processing app</em> you shouldn't care less for whatever fake security you think you can create in your binary code. Worry about your <strong>server</strong> instead. Make a strict communication protocol to make monitoring the server easier, for instance. Now <strong>that</strong> can be reliable!</p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 33669507, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<p>Its not possible to completely avoid RE but By making them more complex internally, you put make it more difficult for attackers to see the clear operation of the app, which may reduce the number of attack vectors.</p>\n\n<p>If the application handles highly sensitive data, Various techniques exist which can increase the complexity of reverse engineering your code. One technique is to use C/C++ to limit easy runtime manipulation by the attacker. There are ample C and C++ libraries that are very mature and easy to integrate with  Android offers JNI.  An attacker must first circumvent the debugging restrictions in order to attack the application on a low level. This adds further complexity to an attack. Android applications should have android:debuggable=\u201dfalse\u201d set in the application manifest to prevent easy run time manipulation by an attacker or malware. </p>\n\n<p><strong>Trace Checking</strong> \u2013 An application can determine whether or not it is currently being traced by a debugger or other debugging tool. If being traced, the application can perform any number of possible attack response actions, such as discarding encryption keys to protect user data, notifying a server administrator, or other such type responses in an attempt to defend itself. This can be determined by checking the process status flags or using other techniques like comparing the return value of ptrace attach, checking parent process, blacklist debuggers in the process list or comparing timestamps on different places of the program.</p>\n\n<p><strong>Optimizations</strong> - To hide advanced mathematical computations and other types of complex logic, utilizing compiler optimizations can help <strong>obfuscate</strong> the object code so that it cannot easily be disassembled by an attacker, making it more difficult for an attacker to gain an understanding of the particular code. In Android this can more easily be achieved by utilizing natively compiled libraries with the NDK. In addition, using an LLVM Obfuscator or any protector SDK will provide better machine code obfuscation.</p>\n\n<p><strong>Stripping binaries</strong> \u2013 Stripping native binaries is an effective way to increase the amount of time and skill level required of an attacker in order to view the makeup of your application\u2019s low level functions. By stripping a binary, the symbol table of the binary is stripped, so that an attacker cannot easily debug or reverse engineer an application.You can refer techniques used on GNU/Linux systems like sstriping or using UPX.</p>\n\n<p><strong>And at last you must be aware about  obfuscation and tools like ProGuard.</strong></p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 33932635, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<blockquote>\n  <p>Nothing is secure when you put it on end-users hand but some common practice may make this harder for attacker to steal data.</p>\n</blockquote>\n\n<ul>\n<li>Put your main logic (algorithms) into server side.</li>\n<li>Communicate with server and client; make sure communication b/w server and client is secured via SSL or HTTPS; or use other techniques key-pair generation algorithms (ECC, RSA). Ensure that sensitive information is remain End-to-End encrypted.</li>\n<li>Use sessions and expire them after specific time interval.</li>\n<li>Encrypt resources and fetch them from server on demand.</li>\n<li><strong>Or you can make Hybrid app which access system via <code>webview</code> protect resource + code on server</strong></li>\n</ul>\n\n<p>Multiple approaches; this is obvious you have to sacrifice among <strong>performance</strong> and <strong>security</strong></p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 35411378, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}, {"body": "<p><strong>APK signature scheme v2 in Android N</strong></p>\n\n<p>The PackageManager class now supports verifying apps using the APK signature scheme v2. The APK signature scheme v2 is a whole-file signature scheme that significantly improves verification speed and strengthens integrity guarantees by detecting any unauthorized changes to APK files.</p>\n\n<p>To maintain backward-compatibility, an APK must be signed with the v1 signature scheme (JAR signature scheme) before being signed with the v2 signature scheme. With the v2 signature scheme, verification fails if you sign the APK with an additional certificate after signing with the v2 scheme.</p>\n\n<p>APK signature scheme v2 support will be available later in the N Developer Preview.</p>\n\n<p><a href=\"http://developer.android.com/preview/api-overview.html#apk_signature_v2\" rel=\"nofollow\">http://developer.android.com/preview/api-overview.html#apk_signature_v2</a></p>\n", "title": "How to avoid reverse engineering of an APK file?", "answer_id": 37252496, "question_id": 13854425, "tags": ["android", "security", "proguard", "reverse-engineering"]}], "link": "http://stackoverflow.com/questions/13854425/how-to-avoid-reverse-engineering-of-an-apk-file", "question_id": 13854425}, {"body": "<p>It's a useful feature, to be sure, but is there any way to disable it? For instance, if the form is a single text field and already has a \"clear\" button beside it, it's superfluous to also have the X. In this situation, it would be better to remove it.</p>\n\n<p>Can it be done, and if so, how?</p>\n", "title": "Remove IE10&#39;s &quot;clear field&quot; X button on certain inputs?", "tags": ["internet-explorer-10"], "answers": [{"body": "<p>Style the <a href=\"http://msdn.microsoft.com/en-us/library/windows/apps/hh465740.aspx\"><code>::-ms-clear</code> pseudo-element</a> for the box:</p>\n\n<pre class=\"lang-css prettyprint-override\"><code>.someinput::-ms-clear {\n    display: none;\n}\n</code></pre>\n", "title": "Remove IE10&#39;s &quot;clear field&quot; X button on certain inputs?", "answer_id": 14007839, "question_id": 14007655, "tags": ["internet-explorer-10"]}, {"body": "<p>I found it's better to set the <code>width</code> and <code>height</code> to <code>0px</code>. Otherwise, IE10 ignores the padding defined on the  field -- <code>padding-right</code> -- which was intended to keep the text from typing over the 'X' icon that I overlayed on the input field. I'm guessing that IE10 is internally applying the <code>padding-right</code> of the input to the <code>::--ms-clear</code> pseudo element, and hiding the pseudo element does not restore the <code>padding-right</code> value to the <code>input</code>.</p>\n\n<p>This worked better for me:</p>\n\n<pre><code>.someinput::-ms-clear {\n  width : 0;\n  height: 0;\n}\n</code></pre>\n", "title": "Remove IE10&#39;s &quot;clear field&quot; X button on certain inputs?", "answer_id": 14739092, "question_id": 14007655, "tags": ["internet-explorer-10"]}, {"body": "<p>I would apply this rule to all input fields of type text, so it doesn't need to be duplicated later:</p>\n\n<pre><code>input[type=text]::-ms-clear { display: none; }\n</code></pre>\n\n<p>As pointed out by <a href=\"http://stackoverflow.com/users/4329/david-cumps\">David Cumps</a>, one can even get less specific by using just:</p>\n\n<pre><code>::-ms-clear { display: none; }\n</code></pre>\n\n<p>I have used the later even before adding this answer, but thought that most people would prefer to be more specific than that. Both solutions work fine.</p>\n", "title": "Remove IE10&#39;s &quot;clear field&quot; X button on certain inputs?", "answer_id": 18270721, "question_id": 14007655, "tags": ["internet-explorer-10"]}, {"body": "<p>You should style for <code>::-ms-clear</code> (<a href=\"http://msdn.microsoft.com/en-us/library/windows/apps/hh465740.aspx\">http://msdn.microsoft.com/en-us/library/windows/apps/hh465740.aspx</a>):</p>\n\n<pre><code>::-ms-clear {\n   display: none;\n}\n</code></pre>\n\n<p>And you also style for <code>::-ms-reveal</code> pseudo-element for password field:</p>\n\n<pre><code>::-ms-reveal {\n   display: none;\n}\n</code></pre>\n", "title": "Remove IE10&#39;s &quot;clear field&quot; X button on certain inputs?", "answer_id": 21869433, "question_id": 14007655, "tags": ["internet-explorer-10"]}, {"body": "<p>I think it's worth noting that all the style and CSS based solutions don't work when a page is running in compatibility mode. The compatibility mode renderer ignores the ::-ms-clear element, even though the browser shows the x. </p>\n\n<p>If your page needs to run in compatibility mode, you may be stuck with the X showing.</p>\n\n<p>In my case, I am working with some third party data bound controls, and our solution was to handle the \"onchange\" event and clear the backing store if the field is cleared with the x button. </p>\n", "title": "Remove IE10&#39;s &quot;clear field&quot; X button on certain inputs?", "answer_id": 38726115, "question_id": 14007655, "tags": ["internet-explorer-10"]}], "link": "http://stackoverflow.com/questions/14007655/remove-ie10s-clear-field-x-button-on-certain-inputs", "question_id": 14007655}, {"body": "<p>After installing Visual Studio 2012 and opening my solution I get a series of errors in this form:</p>\n\n<blockquote>\n  <p>The Web Application Project Foo is configured to use IIS.<br>\n  Unable to access the IIS metabase. You do not have sufficient privilege to access IIS web sites on your machine.</p>\n</blockquote>\n\n<p>I get this for each of our web applications.  Things I have tried:</p>\n\n<ol>\n<li>Running Visual Studio as Administrator </li>\n<li>Running aspnet_regiis.exe -ga MyUserName </li>\n<li>Running aspnet_regiis.exe -i</li>\n</ol>\n\n<p>These seem to be common solutions for this problem but I have not had any success with them.  Is there anything else I can try to do?  </p>\n", "title": "Error - Unable to access the IIS metabase", "tags": ["c#", ".net", "iis"], "answers": [{"body": "<p>I think you are not running visual studio with administrator permissions. Look that:</p>\n\n<p><a href=\"http://bloggingabout.net/blogs/rick/archive/2012/10/04/unable-to-access-the-iis-metabase.aspx\">http://bloggingabout.net/blogs/rick/archive/2012/10/04/unable-to-access-the-iis-metabase.aspx</a></p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 12859962, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>I think we encountered a similar problem at work. For us, the solution was to go into Control Panel -> Programs and Features -> Turn Windows Features on or off... inside that, we had to select Internet Information Services -> Web Management Tools -> IIS 6 Management Compatibility -> IIS Metabase and IIS 6 configuration compatibility.\n<a href=\"http://i.stack.imgur.com/pa800.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/pa800.png\" alt=\"Windows Features dialog showing IIS Metabase option\"></a></p>\n\n<p>Give that a try and let me know if it helps!</p>\n\n<p>Note: We're running IIS 7.5 on Windows 7 using both Visual Studio 2005 and 2010 and doing stuff with super-old-school WebServices (.asmx)...</p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 12860348, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p><strong>Thank you to everyone that answered.</strong> Since this was closed for a long time I couldn't provide much feedback, but I did eventually fix my problem. I tried many of these other solutions and they didn't fix my issue, but I'm sure they help when the root cause is different.</p>\n\n<p><strong>My Solution</strong></p>\n\n<p>I solved this problem by turning off the IIS and .Net Framework features within Windows 7 and then turning them back on. It seems like this re-installation is what fixed my issue. I still don't know what caused the problem, but at least one other developer on my team had the same issue.</p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 14715377, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>I also had a similar problem. My solution is an extension to the answer \"Run as admin\" which I hope someone might find useful.</p>\n\n<p>I was running VS2012 and almost every time I had to do the Right Click, Run As Administrator. I got tired of this so instead I went into its properties on the shortcut, clicked advanced, and then clicked the \"Run as Administrator\" option. Now VS2012 always runs as administrator whenever I open it <strong>from that shortcut</strong>.</p>\n\n<p>The from that shortcut bit is important. I proceeded to branch my project, and download the branch to a new local folder. Then, when I opened it from the shortcut I had no problem. But if I went directly into the folder, and ran the project locally <strong>without the shortcut, it did not</strong> run as administrator and I got this error.</p>\n\n<p>Once I opened VS2012 as usual first, then using File/Open/Project It worked again no problem. (because I was running as admin). But I wasn't running as admin when I opened the solution using windows file manager.</p>\n\n<p>The other suggestions seem somewhat extreme, but this is pretty simple so I would tend to give this a try first.</p>\n\n<p>Hope this was helpful.</p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 14979186, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>I just had the same issue with me today. And I found it annoying. Though I have other two websites already under development from the same IIS but still was not able to create new site. Strange, but I did this.</p>\n\n<ul>\n<li>Delete the site from IIS</li>\n<li>Create new site, give it a name \"new_site\"</li>\n<li>Select Application Pool other than the site name itself. So it wont be messing up with default settings.</li>\n<li>Keep IP \"unassigned\" if you are running it from same machine</li>\n<li>give it some unused port</li>\n<li>Run Visual Studio as \"Run as Administrator\" by right-clicking on VS executable shortcut. </li>\n<li>You are done!</li>\n</ul>\n\n<p>You do not need to turn off/re-install anything other than what I have stated since it works.</p>\n\n<p>Let me know if anybody had the same issue just like me and solved the same way. I think it was not the issue but a wrong way of creating website on localhost which Visual Studio rejects to open.</p>\n\n<p>I hope this will help newbies. </p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 15645335, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<ol>\n<li>Create a shortcut to the \"devenv.exe\"</li>\n<li>select the \"Run as administrator\" option for the shortcut</li>\n<li>doble click on the short cut and reopen your project</li>\n</ol>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 16192220, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>I resolved this issue by granting IIS AppPool identity permissions to the <code>%systemroot%\\inetsrv\\config</code></p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 16389609, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>On <strong>Windows 8 Pro</strong>:  </p>\n\n<pre><code>%systemroot%\\inetsrv\\config\n</code></pre>\n\n<p>On <strong>Windows 7 and 8.1 and 10</strong></p>\n\n<pre><code>%systemroot%\\System32\\inetsrv\\config \n</code></pre>\n\n<p>(Where <code>%systemroot%</code> is usually <code>C:\\Windows</code>)</p>\n\n<p>Navigate to the appropriate location above in Windows Explorer. You will be blocked access with a popup which says:</p>\n\n<blockquote>\n  <p>\"You don't have access to this folder - Click continue to permanently get access to this folder\" </p>\n</blockquote>\n\n<p>Click 'continue' for this folder, and with the Export folder underneath. I changed the shortcut back to \"Run as me\" (a member of the domain and local administrators ) and was able to open and deploy the solution.</p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 17460774, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>This seems like one of those \"All errors lead to this message\" type of bugs. </p>\n\n<p>Mine  was that the App Pool was just turned off. I turned it back on, and everything worked fine.</p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 17687682, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>If you are working on a project which does not require the use of IIS, then a workaround to open the project with this error is to simply right click on the unloaded project and click edit, search for:</p>\n\n<pre><code>&lt;ProjectExtensions&gt;\n    &lt;VisualStudio&gt;\n      &lt;FlavorProperties GUID=\"\"&gt;\n        &lt;WebProjectProperties&gt;\n          &lt;UseIIS&gt;True&lt;/UseIIS&gt;\n        &lt;/WebProjectProperties&gt;\n      &lt;/FlavorProperties&gt;\n    &lt;/VisualStudio&gt;\n  &lt;/ProjectExtensions&gt;\n&lt;/Project&gt;\n</code></pre>\n\n<p>and set USEIIS to false</p>\n\n<pre><code>&lt;UseIIS&gt;False&lt;/UseIIS&gt;\n</code></pre>\n\n<p>reload the project by right clicking on it after saving changes.</p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 18072703, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>I have had two seperate types of problem lead to this error, and thought I'd share...</p>\n\n<pre><code>1. The directory was on an network share and due to UAC restrictions, was \n   unable to be accessed -- even when running as an admin.\n2. The directory was on a drive that didn't exist...\n</code></pre>\n\n<p>Both of these stem from an unfortunate (imo) choice by MS to put things in the Documents or My Document directory, combinee with really lousy error messages.  In both of the above cases the fundamental problem was that the <a href=\"http://stackoverflow.com/questions/12946476/where-is-the-iis-express-configuration-metabase-file-found\">IISExpress Config file</a> goes in My Documents, and it either didn't exist or couldn't be accessed.</p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 19174876, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>In my message, beside complaining about \"Unable to access the IIS metabase\", it also mentions can't access <code>\"&lt;IISUrl&gt;http://localhost:6416/&lt;/IISUrl&gt;\"</code>. Right click on the unload project, click Edit, find the line <code>\"&lt;IISUrl&gt;http://localhost:6416/&lt;/IISUrl&gt;\"</code>, comment it out. Reload and it should work. This has to do with administrator doesn't have permission to access that address.</p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 20385787, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>I just had this issue today and I found that I didn't open VS as 'Run as Administrator'.\nAfter doing this, I was able to publish the Service.</p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 21188692, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>In addition to the <a href=\"http://stackoverflow.com/a/18072703/1412975\">answer</a> by @nologo, I also had to use IIS. So I changed the </p>\n\n<pre><code>&lt;UseIIS&gt;True&lt;/UseIIS&gt;\n</code></pre>\n\n<p>to 'False' first.</p>\n\n<ul>\n<li>Opened the solution and ensured that the project could be loaded.</li>\n<li>Close solution and that instance of Visual Studio</li>\n<li>Change the value to 'True' again</li>\n<li>Open the solution.\nThis time, I didn't get any error/warning. I could also run with Ctrl+F5 or F5 without any problem while my project was mapped to an IIS website.</li>\n</ul>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 21277427, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>I had a similar problem. Visual Studio would not load any web projects and showed the error: creation of virtual directory &lt;myproj:myport&gt; failed. Unable to access the IIS metabase.</p>\n\n<p>In my case it was actually IISExpress that was at the root of the problem. Right clicking on IIS Express in Programs and Features in the control panel and choosing repair fixed the issue in less than two minutes.</p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 22023841, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>I'm using Win 8 Pro and VS 2013.\nAfter trying everything in this page... I simply reinstalled IIS Express 8 and everything works fine now (even without running as an admin).</p>\n\n<p>My conclusion is that this is a rather generic error and there are multiple root causes.</p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 25123263, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>Open visual studio command prompt and type below command and run\naspnet_regiis -ga machinename\\ASPNET\nAfter run the above command Reset the IIS and test the application that resolve your issue.</p>\n\n<p>If above command doesn\u2019t resolve your problem then try to run below command in visual studio command prompt</p>\n\n<p>aspnet_regiis -i\nAlternatively we can run above command from our windows command prompt also</p>\n\n<p>Go to the Start menu and open Run and enter and click Ok</p>\n\n<p>%windir%\\Microsoft.NET\\Framework\\v2.0.50727\\aspnet_regiis.exe \u2013I\nAfter that Reset the IIS and test the application that resolves your issue</p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 25200696, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>One more thing you could try:</p>\n\n<ul>\n<li>Check if you have pending Windows updates. </li>\n<li>If you do, please reboot before trying anything else.</li>\n</ul>\n\n<p>I tend to never shut down my machine, so I had plenty of them waiting for a reboot. And that fixed it.</p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 25323764, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>You can solve this problem by actually unchecking the IIS tools in your Windows feature list. Then, repair your Visual Studio 2013 installation and make sure Web Developer is checked. It will install IIS 8 with which VS will work nicely.</p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 25338536, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>On a windows 81, from an admin command prompt, use: </p>\n\n<pre><code>icacls \"C:\\Windows\\System32\\inetsrv\\config\" /t /grant \"IIS AppPool\\DefaultAppPool\":(R)\n</code></pre>\n\n<p>Then go back in VS, right click on the failed project, choose Reload.</p>\n\n<p>Credit to: <a href=\"http://stackoverflow.com/questions/7334216/iis7-permissions-overview-applicationpoolidentity\">IIS7 Permissions Overview - ApplicationPoolIdentity</a></p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 25748137, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>I had this problem - the symptoms were the same, but the issue I had was that I had set the \"My Documents\" folder to be on a network share, and the share was not accessible. </p>\n\n<p>The root problem was that the IIS config files located at %USERPROFILE%\\Documents are not accessible. Once I changed the \"My Documents\" folder location (I modified the reg value), it started working again.</p>\n\n<p>I know that this may not be a common scenario that you might run into, but I've posted it here because it gives the same symptoms.</p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 28531832, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>Create a new WebSite, after error go to folder where you created a project, in a txt app open the .csproj file, find this tag \"<code>&lt;UseIIS&gt;</code>\" and change \"false\" to \"true\", in lines bellow find the tag \"<code>&lt;IISUrl&gt;</code>\" then put the iis url(find url in iis), your tags must be like this:</p>\n\n<pre><code>&lt;WebProjectProperties&gt;\n      &lt;UseIIS&gt;True&lt;/UseIIS&gt;\n      &lt;AutoAssignPort&gt;True&lt;/AutoAssignPort&gt;\n      &lt;DevelopmentServerPort&gt;0&lt;/DevelopmentServerPort&gt;\n      &lt;DevelopmentServerVPath&gt;/&lt;/DevelopmentServerVPath&gt;\n      &lt;IISUrl&gt;http://localhost/yourIISAppAlias\n      &lt;/IISUrl&gt;\n      &lt;NTLMAuthentication&gt;False&lt;/NTLMAuthentication&gt;\n      &lt;UseCustomServer&gt;False&lt;/UseCustomServer&gt;\n      &lt;CustomServerUrl&gt;\n      &lt;/CustomServerUrl&gt;\n      &lt;SaveServerSettingsInUserFile&gt;False&lt;/SaveServerSettingsInUserFile&gt;\n    &lt;/WebProjectProperties&gt;\n</code></pre>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 28936189, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>Changing this key worked for me:</p>\n\n<p>HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\User Shell Folders\\Personal</p>\n\n<p>The location didn't exist.</p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 29705227, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>I had the same problem. For me it was that I was using the same my documents as on a previous Windows installation. Simply removing the IISExpress folder from my documents did the trick.</p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 30094359, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>If you have administrator permissions, Right Click to Visual Studio icon > properties and then advanced, \"Run as administrator\" check.\nYou can run visaul studio as administrator directly anymore.\nThis way, formal and so basic.</p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 30343787, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>I experienced this on a Windows 10 Professional 64-bit machine, and none of the other answers posted here helped.  It began happening after I experienced a blue-screen-of-death, and I discovered that UAC had switched itself back on. Running Visual Studio as Administrator alone was not the solution, as my source control was on a network drive, which Visual Studio could not access with UAC on.   </p>\n\n<p>Turning UAC back off via GPEDIT fixed the problem.</p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 35769044, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>I came across this today and fixed the problem by removing the IISUrl from the Project file:</p>\n\n<ol>\n<li>Right click project</li>\n<li>Click Edit</li>\n<li><p>Delete the following line:</p>\n\n<pre><code> &lt;IISUrl&gt;http://localhost:xxxxx &lt;/IISUrl&gt;\n</code></pre></li>\n<li><p>Reload project</p></li>\n<li>Now add a new IIS virtual directory by right clicking Project > Properties > Web and selecting Use Local IIS Web Server (Uncheck Use IIS Express)  and clicking the Create Virtual Directory button.</li>\n</ol>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 36035234, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>I tried everything above.  The credit goes to all of the responses above.  Having tried all of the suggestions on their own, I just assembled this combination of suggestions in an order that made sense to me.  Note my Documents folder is on a shared drive.  The subst/IISExpress stuff is not applicable unless you're in the same boat.</p>\n\n<ul>\n<li>Configure VS to run as admin</li>\n<li>Uninstall IIS via Add/Remove Programs, Windows Features</li>\n<li>Reboot</li>\n<li>Run WinRAR or something similar as admin and archive <code>C:\\windows\\system32\\inetsrv\\</code></li>\n<li>Run cmd as admin and <code>rmdir /s c:\\windows\\system32\\inetsrv\\</code> to completely remove all traces of the last install.  Leave elevated cmd prompt open for later.</li>\n<li>Reinstall IIS with IIS 6 Metabase compatibility (doubt this was necessary)</li>\n<li>Leave Default AppPool and Default Website as-is (I had previously deleted both)</li>\n<li>Ran <code>C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\aspnet_regiis.exe -ga MYDOMAIN\\scottt732</code></li>\n<li>Ran <code>C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\aspnet_regiis.exe -i</code></li>\n</ul>\n\n<p>Also, because my Documents folder is on a share drive, I was having IIS Express issues.  I don't use/like IIS Express, but Visual Studio complained about it.</p>\n\n<ul>\n<li>From elevated cmd prompt, ran <code>subst U: c:\\Temp</code>.  Created <code>C:\\Temp\\Documents\\</code> and copied the IISExpress folder from my U drive.</li>\n<li>Created <code>CustomUserHome</code> key in <code>HKCU\\Software\\Microsoft\\IISExpress</code> with <code>C:\\Temp\\Documents\\IISExpress</code></li>\n<li>This allowed me to get Visual Studio to open my web projects and edit the properties.  I tweaked the projects to store web server settings in a user file and adjusted it to use a Custom URL (not sure if this was necessary)</li>\n<li>I may/may not have to run the <code>subst</code> command each time I restart.  Don't care.</li>\n</ul>\n\n<p>And after throwing in the towel 3 times and spending roughly ~6 hours I can open web projects in Visual Studio (2015 Update 2).  </p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 36798351, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}, {"body": "<p>You might run across this problem and have same problem as me.  I \"solved\" it before and then power outage and computer crashed, not sure why a <strong>registry</strong> setting reverted but it is the <strong>SOURCE</strong> of my problem.</p>\n\n<ol>\n<li>I tried all the running as adminstrator</li>\n<li>All the IIS  / IIS express re-installs.   </li>\n<li>Various \"hacks\"</li>\n</ol>\n\n<p>Came down to having to fix the registry again.</p>\n\n<ol>\n<li><p>Could not as administrator even open regedit    (Need to access registry   since problem is not with gpedit.msc  admin template ) </p></li>\n<li><p>UnHookExec.inf     on desktop </p></li>\n</ol>\n\n<p>Just save\u00a0UnHookExec.inf\u00a0and install it by right clicking and selecting install. Installing the file will not show any popup or notice box.\n<a href=\"http://www.tweakandtrick.com/2011/04/enable-regedit-registry-editor.html\" rel=\"nofollow\">http://www.tweakandtrick.com/2011/04/enable-regedit-registry-editor.html</a></p>\n\n<ol start=\"3\">\n<li><strong>HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\User Shell Folders\\Personal</strong> pointing to non-existant fileshare. Changing that to local path solved this problem for me. \u2013 Pasi Savolainen Jul 14 '14 at 8:41</li>\n</ol>\n\n<p>(changed from  <code>\\\\cs2data\\home\\stickelt\\my documents</code>  to  <code>c:\\dev</code>  )</p>\n\n<p>Now <strong>ALL is good</strong> and Visual Studio opened solution with 15 projects and connects to IIS and does not complain about not being able to access iis metadata</p>\n\n<p>I had never ran into this before, as nobody at current job had this problem ( many have been here a long time, some got clones of other machines that \"worked\"  and many are on another domain etc.. ) </p>\n", "title": "Error - Unable to access the IIS metabase", "answer_id": 38153276, "question_id": 12859891, "tags": ["c#", ".net", "iis"]}], "link": "http://stackoverflow.com/questions/12859891/error-unable-to-access-the-iis-metabase", "question_id": 12859891}, {"body": "<p>In the following program you can see that for each value slightly less that <code>.5</code> is rounded down, except for <code>0.5</code>.</p>\n\n<pre><code>for (int i = 10; i &gt;= 0; i--) {\n    long l = Double.doubleToLongBits(i + 0.5);\n    double x;\n    do {\n        x = Double.longBitsToDouble(l);\n        System.out.println(x + \" rounded is \" + Math.round(x));\n        l--;\n    } while (Math.round(x) &gt; i);\n}\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>10.5 rounded is 11\n10.499999999999998 rounded is 10\n9.5 rounded is 10\n9.499999999999998 rounded is 9\n8.5 rounded is 9\n8.499999999999998 rounded is 8\n7.5 rounded is 8\n7.499999999999999 rounded is 7\n6.5 rounded is 7\n6.499999999999999 rounded is 6\n5.5 rounded is 6\n5.499999999999999 rounded is 5\n4.5 rounded is 5\n4.499999999999999 rounded is 4\n3.5 rounded is 4\n3.4999999999999996 rounded is 3\n2.5 rounded is 3\n2.4999999999999996 rounded is 2\n1.5 rounded is 2\n1.4999999999999998 rounded is 1\n0.5 rounded is 1\n0.49999999999999994 rounded is 1\n0.4999999999999999 rounded is 0\n</code></pre>\n\n<p>I am using Java 6 update 31.</p>\n", "title": "Why does Math.round(0.49999999999999994) return 1", "tags": ["java", "floating-point", "double", "rounding"], "answers": [{"body": "<p><strong>Summary</strong></p>\n\n<p>In Java 6 (and presumably earlier), <code>round(x)</code> is implemented as <code>floor(x+0.5)</code>.<sup>1</sup>   This is a specification bug, for precisely this one pathological case.<sup>2</sup>  Java 7 no longer mandates this broken implementation.<sup>3</sup></p>\n\n<p><strong>The problem</strong></p>\n\n<p>0.5+0.49999999999999994 is exactly 1 in double precision:</p>\n\n<pre><code>static void print(double d) {\n    System.out.printf(\"%016x\\n\", Double.doubleToLongBits(d));\n}\n\npublic static void main(String args[]) {\n    double a = 0.5;\n    double b = 0.49999999999999994;\n\n    print(a);      // 3fe0000000000000\n    print(b);      // 3fdfffffffffffff\n    print(a+b);    // 3ff0000000000000\n    print(1.0);    // 3ff0000000000000\n}\n</code></pre>\n\n<p>This is because 0.49999999999999994 has a smaller exponent than 0.5, so when they're added, its mantissa is shifted, and the ULP gets bigger.</p>\n\n<p><strong>The solution</strong></p>\n\n<p>Since Java 7, OpenJDK (for example) implements it thus:<sup>4</sup></p>\n\n<pre><code>public static long round(double a) {\n    if (a != 0x1.fffffffffffffp-2) // greatest double value less than 0.5\n        return (long)floor(a + 0.5d);\n    else\n        return 0;\n}\n</code></pre>\n\n<hr>\n\n<p><sub>\n1. <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#round%28double%29\">http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#round%28double%29</a>\n</sub></p>\n\n<p><sub>\n2. <a href=\"http://bugs.java.com/bugdatabase/view_bug.do?bug_id=6430675\">http://bugs.java.com/bugdatabase/view_bug.do?bug_id=6430675</a> (credits to @SimonNickerson for finding this)\n</sub></p>\n\n<p><sub>\n3. <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#round%28double%29\">http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#round%28double%29</a>\n</sub></p>\n\n<p><sub>\n4. <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7u40-b43/java/lang/Math.java#Math.round%28double%29\">http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7u40-b43/java/lang/Math.java#Math.round%28double%29</a>\n</sub></p>\n", "title": "Why does Math.round(0.49999999999999994) return 1", "answer_id": 9903075, "question_id": 9902968, "tags": ["java", "floating-point", "double", "rounding"]}, {"body": "<p>I've got the same on jdk 1.6 32bit, but on java 7 64bit I've go 0 for 0.49999999999999994 rounded is 0 and the last line is not printed. It seems to be VM issue, however, using floating points, you should expect the results to differ a bit on various environments (CPU, 32- or 64-bit mode)</p>\n\n<p>And, when using <code>round</code> or inverting matrixes or etc., this <em>bits</em> can make a huge difference.</p>\n\n<p>x64 output:</p>\n\n<pre><code>10.5 rounded is 11\n10.499999999999998 rounded is 10\n9.5 rounded is 10\n9.499999999999998 rounded is 9\n8.5 rounded is 9\n8.499999999999998 rounded is 8\n7.5 rounded is 8\n7.499999999999999 rounded is 7\n6.5 rounded is 7\n6.499999999999999 rounded is 6\n5.5 rounded is 6\n5.499999999999999 rounded is 5\n4.5 rounded is 5\n4.499999999999999 rounded is 4\n3.5 rounded is 4\n3.4999999999999996 rounded is 3\n2.5 rounded is 3\n2.4999999999999996 rounded is 2\n1.5 rounded is 2\n1.4999999999999998 rounded is 1\n0.5 rounded is 1\n0.49999999999999994 rounded is 0\n</code></pre>\n", "title": "Why does Math.round(0.49999999999999994) return 1", "answer_id": 9903125, "question_id": 9902968, "tags": ["java", "floating-point", "double", "rounding"]}, {"body": "<p>This appears to be a known bug (<a href=\"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6430675\">Java bug 6430675: Math.round has surprising behavior for 0x1.fffffffffffffp-2</a>) which has been fixed in Java 7.</p>\n", "title": "Why does Math.round(0.49999999999999994) return 1", "answer_id": 9903269, "question_id": 9902968, "tags": ["java", "floating-point", "double", "rounding"]}, {"body": "<p>source code in JDK 6</p>\n\n<pre><code>public static long round(double a) {\n    return (long)Math.floor(a + 0.5d);\n}\n</code></pre>\n\n<p>source code in JDK 7</p>\n\n<pre><code>public static long round(double a) {\n    if (a != 0x1.fffffffffffffp-2) { \n        // a is not the greatest double value less than 0.5\n        return (long)Math.floor(a + 0.5d);\n    } else {\n        return 0; \n    }\n}\n</code></pre>\n\n<p>When the value is 0.49999999999999994d, in JDK 6, it will call <strong>floor</strong> and hence returns 1 but in JDK 7, the if condition is checking whether the number is greatest double value less than 0.5 or not. As in this case the number is not the greatest double value less than 0.5, so else block returns 0.</p>\n\n<p>You can try 0.49999999999999999d, which will return 1 but not 0, because this is the greatest double value less than 0.5.</p>\n", "title": "Why does Math.round(0.49999999999999994) return 1", "answer_id": 9903777, "question_id": 9902968, "tags": ["java", "floating-point", "double", "rounding"]}, {"body": "<p>The answer hereafter is an excerpt of an oracle bug report at <a href=\"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6430675\">http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6430675</a>. Visit the link for the full explanation.</p>\n\n<p><strong>The methods {Math, StrictMath.round are operationally defined as</strong></p>\n\n<pre><code>(long)Math.floor(a + 0.5d)\n</code></pre>\n\n<p>for double arguments.  While this definition usually works as expected, it gives the surprising result of 1, rather than 0, for 0x1.fffffffffffffp-2 (0.49999999999999994).</p>\n\n<p>The value 0.49999999999999994 is the greatest floating-point value less than 0.5.  As a hexadecimal floating-point literal its value is 0x1.fffffffffffffp-2, which is equal to (2 - 2^52) * 2^-2. == (0.5 - 2^54).  Therefore, the exact value of the sum</p>\n\n<pre><code>(0.5 - 2^54) + 0.5\n</code></pre>\n\n<p>is 1 - 2^54.  This is halfway between the two adjacent floating-point numbers (1 - 2^53) and 1.  In the IEEE 754 arithmetic round to nearest even rounding mode used by Java, when a floating-point results is inexact, the closer of the two representable floating-point values which bracket the exact result must be returned; if both values are equally close, the one which its last bit zero is returned.  In this case the correct return value from the add is 1, not the greatest value less than 1.</p>\n\n<p>While the method is operating as defined, the behavior on this input is very surprising; the specification coudl be ameneded to something more like \"Round to the closest long, rounding ties up,\" which would allow the behavior on this input to be changed.</p>\n", "title": "Why does Math.round(0.49999999999999994) return 1", "answer_id": 16938560, "question_id": 9902968, "tags": ["java", "floating-point", "double", "rounding"]}], "link": "http://stackoverflow.com/questions/9902968/why-does-math-round0-49999999999999994-return-1", "question_id": 9902968}, {"body": "<p>I've installed Visual Studio 2012 Release Preview, and it appears to be fine, but now when I try to use Visual Studio 2010 to compile C++ projects, I get the following error message:</p>\n\n<blockquote>\n  <p>LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt</p>\n</blockquote>\n\n<p>I'm not 100% sure of this, but it seems to be related to projects that have <code>.rc</code> (resource) files in them.</p>\n\n<p>I've tried repairing Visual Studio 2010 from Add/Remove programs and rebooting, but this has no effect.</p>\n\n<p>I also get the same error if I use Visual Studio 2012 RC to compile the C++ projects when set to use the Visual Studio 2010 toolset. Upgrading to the Visual Studio 2011 toolset fixes the problem (but of course I don't want to do this for production code).</p>\n\n<p>Update: I've <em>uninstalled Visual Studio 2012</em>, rebooted, and the problem still persists! Help!</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"], "answers": [{"body": "<p>I solved this problem eventually by doing a full uninstall of VS2012 RC, followed by a full uninstall of VS2010, then a reinstall from scratch of VS2010.</p>\n\n<p>It took forever, but I'm now able to compile C++ projects in VS2010 again.</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 10889633, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p><a href=\"http://social.msdn.microsoft.com/Forums/da-DK/vssetup/thread/d10adba0-e082-494a-bb16-2bfc039faa80\">This MSDN thread</a> explains how to fix it.</p>\n\n<p>To summarize: </p>\n\n<ul>\n<li><p>Either disable incremental linking, by going to </p>\n\n<pre><code>Project Properties \n   -&gt; Configuration Properties \n       -&gt; Linker (General) \n          -&gt; Enable Incremental Linking -&gt; \"No (/INCREMENTAL:NO)\"\n</code></pre></li>\n<li><p>or install VS2010 SP1.</p></li>\n</ul>\n\n<p>Edits (@CraigRinger): Note that installing VS 2010 SP1 will <em>remove the 64-bit compilers</em>. You need to install the <a href=\"http://blogs.msdn.com/b/heaths/archive/2011/04/01/visual-c-2010-sp1-compiler-update-for-the-windows-sdk-7-1.aspx\">VS 2010 SP1 compiler pack</a> to get them back.</p>\n\n<p>This affects <strong>Microsoft Windows SDK 7.1 for Windows 7 and .NET 4.0</strong> as well as <strong>Visual Studio 2010</strong>.</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 10890428, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>I tried a few times and finally solved the problem by uninstalling several times the VS2010. I think I hadn't uninstalled all the files and that's why it didn't worked from the first time. </p>\n\n<p>In the installation of VS2012 it is said that if you have VS2010 SP1 you can't work at the same project in both programs. It is recommended to have only one program. </p>\n\n<p>Thanks!</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 11012263, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>It's because of <a href=\"http://en.wikipedia.org/wiki/.NET_Framework\">.NET</a> Framework 4.5 is replacing .NET Framework 4.0.\nI uninstalled Visual Studio 2010 several times with no luck. When I removed .NET Framework 4.5 and reinstalled Visual Studio 2010 it went fine.</p>\n\n<p>See <em><a href=\"http://social.msdn.microsoft.com/Forums/en/vssetup/thread/b315c30f-141d-4346-b77d-ec08a0362d7f\">Uninstall Visual Studio 11 completely to do a fresh install</a></em>.</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 11087771, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>If you have installed Visual Studio 2012 RC, then it installed .NET 4.5 RC.</p>\n\n<p>Uninstall .NET 4.5 RC, and install the version you need (4.0 for VS 2010). This should clear up any problems you are having.</p>\n\n<p>This solved the same problem. There is no need to uninstall Visual Studio.</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 12272425, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>For me, setting 'Generate Manifest' to 'No' fixed it. (Also fixed with /INCREMENTAL:NO)</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 12304733, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>+1 to user Short for <a href=\"http://stackoverflow.com/questions/10888391/error-link-fatal-error-lnk1123-failure-during-conversion-to-coff-file-inval/10890428#10890428\">an answer</a> that worked for me!</p>\n\n<p>I tried to do some debugging of this with <code>msbuild /v:diag</code>, and I'm seeing that <a href=\"http://en.wikipedia.org/wiki/MSBuild\" rel=\"nofollow\">MSBuild</a> is trying to embed a manifest in the executable, with &lt;somename&gt;.dll.embed.manifest.res on the linker command line, where that is a resource file built from &lt;somename&gt;.dll.embed.manifest. But the manifest file is an empty Unicode text file. (That is, a two-byte file with the Unicode 0xFEFF prefix)</p>\n\n<p>So the root problem seems to have something to do with that manifest file not being generated, or it being used when &lt;somename&gt;.dll.intermediate.manifest should have been used.</p>\n\n<p>An alternate solution seems to be to turn off the \"Embed Manifest\" option under Properties, Manifest Tool, Input and Output.</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 12790605, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>I set <strong>Enable Incremental Linking</strong> to <strong>\"No (/INCREMENTAL:NO)\"</strong> and it <em>doesn't work for me</em>.</p>\n\n<p>Next I've changed:</p>\n\n<pre><code>Project Properties \n   -&gt; Configuration Properties \n       -&gt; General\n          -&gt; Platform Toolset -&gt; \"Visual Studio 2012 (v110)\"\n</code></pre>\n\n<p>and it works for me :)</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 12833195, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>The issue was magically resolved for me by removing <a href=\"http://en.wikipedia.org/wiki/.NET_Framework\">.NET</a> 4.5, and replacing it with <strong>.NET 4.0</strong>. I then had to repair Visual Studio 2010 - it being corrupted along the way somehow.</p>\n\n<p>I had previously installed, and then un-installed, Visual Studio 2012 - which may be related to the issue.</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 12942709, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>I have not installed Visual Studio 2012, but I still got this error in Visual Studio 2010. I got this resolved after installing Visual Studio 2010 SP1.</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 13725625, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>If disabling incremental linking doesn't work for you, and turning off \"Embed Manifest\" doesn't work either, then search your path for multiple versions of CVTRES.exe.</p>\n\n<p>By debugging with the /VERBOSE linker option I found the linker was writing that error message when it tried to invoke cvtres and it failed.</p>\n\n<p>It turned out that I had two versions of this utility in my path.  One at <code>C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\BIN\\cvtres.exe</code> and one at <code>C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\cvtres.exe</code>.   After VS2012 install, the VS2010 version of cvtres.exe will no longer work.  If that's the first one in your path, and the linker decides it needs to convert a .res file to COFF object format, the link will fail with LNK1123.</p>\n\n<p>(Really annoying that the error message has nothing to do with the actual problem, but that's not unusual for a Microsoft product.)</p>\n\n<p>Just delete/rename the older version of the utility, or re-arrange your PATH variable, so that the version that works comes first.</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 14144713, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>According to this thread in MSDN forums: <a href=\"http://social.msdn.microsoft.com/Forums/da-DK/vssetup/thread/d10adba0-e082-494a-bb16-2bfc039faa80\">VS2012 RC installation breaks VS2010 C++ projects</a>, simply, take <code>cvtres.exe</code> from <strong>VS2010 SP1</strong></p>\n\n<pre><code>C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\cvtres.exe\n</code></pre>\n\n<p>or from <strong>VS2012</strong></p>\n\n<pre><code>C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\bin\\cvtres.exe\n</code></pre>\n\n<p>and copy it over the <code>cvtres.exe</code> in <strong>VS2010 RTM</strong> installation (the one <strong>without SP1</strong>)</p>\n\n<pre><code>C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\cvtres.exe\n</code></pre>\n\n<p>This way, you will effectively use the corrected version of <code>cvtres.exe</code> which is 11.0.51106.1.</p>\n\n<p>Repeat the same steps for 64-bit version of the tool in <code>C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\amd64\\cvtres.exe</code>.</p>\n\n<p>This solution is an alternative to installation of SP1 for VS2010 - in some cases you simply can't install SP1 (i.e. if you need to support pre-SP1 builds).</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 15270378, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>Reinstalling CMake worked for me. The new copy of CMake figured out that it should use Visual Studio 11 instead of 10.</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 15646925, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>I solved this by doing the following:</p>\n\n<ol>\n<li>In a command prompt, type msconfig and press enter.</li>\n<li>Click services tab. </li>\n<li>Look for \"Application Experience\" and put tick mark (that is, select this to enable). </li>\n<li>Click OK. And restart if necessary.</li>\n</ol>\n\n<p>Thus the problem will go forever. Do build randomly and debug your C++ projects without any disturbance.</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 17063745, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>I was using the Windows SDK for core Win32 programming and had .NET 4.5 installed for \"unknown\" reasons. I have uninstalled that and installed 4.0 like previous answers and yeah, it worked for me too.</p>\n\n<p>Just am flabbergasted that I had to use the useless .NET framework for building Win32 apps using the SDK.</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 17189638, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>For those of you looking for a solution for this problem with the OpenGL SuperBible 6th source code samples, the solution is building in <em>Release</em> instead of <em>Debug</em>. All projects have disabled the incremental linking option in the <em>Release</em> version.</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 18137933, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>Check the version of <code>cvtrs.exe</code>:</p>\n\n<pre><code>dir \"C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\cvtres.exe\"\n</code></pre>\n\n<p>Wrong version:<br>\n<code>date</code>: 03/18/2010<br>\n<code>time</code>: 01:16 PM<br>\n<code>size</code>: 31,048 bytes <br />\n<code>name</code>: cvtres.exe</p>\n\n<p>Correct version:<br />\n<code>date</code>: 02/21/2011<br />\n<code>time</code>: 06:03 PM<br>\n<code>size</code>: 31,056 bytes <br />\n<code>name</code>: cvtres.exe</p>\n\n<p>If you have wrong version you should copy the correct version from:</p>\n\n<pre><code>C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\bin\\cvtres.exe\n</code></pre>\n\n<p>and replace the one here:</p>\n\n<pre><code>C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\cvtres.exe\n</code></pre>\n\n<p>i.e.</p>\n\n<pre><code>copy \"C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\bin\\cvtres.exe\" \"C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\cvtres.exe\"\n</code></pre>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 19270299, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>My problem was that I've had two paths on my PC that contained the same libraries. Both paths were added to the <strong>Additional Library Directories</strong> in <strong>Configuration Properties -> Linker -> General</strong>. Removing one of the paths solved the problem.</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 19425317, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>As of January 2014, for some reasons I got installed .NET Framework 4.5.1, I don't know if due to a third party software installation or to an automatic update. </p>\n\n<p>On January 29th, I got installed one component and I started receiving the </p>\n\n<pre><code>LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt \n</code></pre>\n\n<p>message. At that time, I solved by avoiding the incremental link. </p>\n\n<p>On Jan. 31st, I got installed another component of .NET Framework 4.5.1 and the incremental link trick did not work anymore. I then installed the Visual Studio 2010 SP1, but afterwards the problem became: </p>\n\n<pre><code>Error   6   error LNK1104: cannot open file 'msvcrtd.lib'. \n</code></pre>\n\n<p>I think the SP1 messed up my Visual Studio 2010 installation. </p>\n\n<p>So I uninstalled .NET Framework 4.5.1, installed .NET Framework 4.0 and uninstalled and then reinstalled Visual Studio 2010. That worked for me.</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 21502827, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>It didn't work for me after Enable Incremental Linking -> \"No (/INCREMENTAL:NO)\", but it works for me after I deleted the rc file.</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 22704554, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>Even inspite of installing Service pack you are getting the error then try removing/renaming the cvtres.exe in the C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin folder. This has worked for me.</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 26730646, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>If you're using x64, <a href=\"https://ask.mozilla.org/question/26/link-fatal-error-lnk1123-failure-during-conversion-to-coff-file-invalid-or-corrupt/\">here's a resource will help</a>:</p>\n\n<p>This happens because Microsoft .NET 4.5 is incompatible with Visual C++ 10. The workaround is to ensure that you run the .NET version of cvtres.exe rather than the Visual C++ version. I did this by renaming the Visual C++ versions of those files and copying the .NET versions in their place.</p>\n\n<pre><code>1. C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\cvtres.exe\n2. C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\amd64\\cvtres.exe\n\n1. C:\\windows\\Microsoft.NET\\Framework\\v4.0.30319\\cvtres.exe\n2. C:\\windows\\Microsoft.NET\\Framework64\\v4.0.30319\\cvtres.exe\n</code></pre>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 29010876, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>I had the same problem after updating of .NET: \nI uninstalled the .NET framework first,\ndownloaded visual studio from <a href=\"https://www.visualstudio.com/downloads/download-visual-studio-vs#d-2010-express\" rel=\"nofollow\">visualstudio.com</a> and selected \"repair\". </p>\n\n<p>NET framework were installed automatically with visual studio -> and now it works fine!</p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 31194162, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>To summarize:</p>\n\n<pre><code>Step1\n\nProject Properties \n   -&gt; Configuration Properties \n       -&gt; Linker (General) \n          -&gt; Enable Incremental Linking -&gt; \"No (/INCREMENTAL:NO)\"\n</code></pre>\n\n<p>if step1 not work, do Step2</p>\n\n<pre><code>Project Properties \n   -&gt; Configuration Properties \n       -&gt; Manifest Tool (Input and Output) \n          -&gt; Enable Incremental Linking -&gt; \"No\"\n</code></pre>\n\n<p>if step2 not work, do Step3\nCopy file one of:</p>\n\n<ol>\n<li>C:\\Program Files (x86)\\Microsoft Visual Studio\n11.0\\VC\\bin\\cvtres.exe</li>\n<li>C:\\Program Files (x86)\\Microsoft Visual Studio\n12.0\\VC\\bin\\cvtres.exe</li>\n<li><p>C:\\Program Files (x86)\\Microsoft Visual Studio\n13.0\\VC\\bin\\cvtres.exe</p>\n\n<p>Then, replace to C:\\Program Files (x86)\\Microsoft Visual Studio\n10.0\\VC\\bin\\cvtres.exe\nWith me, do 3 step it work</p></li>\n</ol>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 32856743, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}, {"body": "<p>I had the same problem with <strong>Microsoft Visual Studio 2010 Ultimate</strong> and it was solved by the method described in <a href=\"https://www.youtube.com/watch?v=OZHjYqTJTMg\" rel=\"nofollow\">this youtube video</a>  </p>\n\n<p>The video suggests to rename the file <strong>cvtres.exe</strong> in <strong>C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin</strong> <code>(in my Win7X64 matchine)</code> to <strong>cvtres-old.exe</strong></p>\n", "title": "Error &#39;LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt&#39; after installing Visual Studio 2012 Release Preview", "answer_id": 37226011, "question_id": 10888391, "tags": ["visual-studio-2010", "visual-studio", "visual-studio-2012"]}], "link": "http://stackoverflow.com/questions/10888391/error-link-fatal-error-lnk1123-failure-during-conversion-to-coff-file-inval", "question_id": 10888391}, {"body": "<p>What are the core architectural differences between these technologies?  </p>\n\n<p>Also, what use cases are generally more appropriate for each?</p>\n", "title": "Solr vs. ElasticSearch", "tags": ["search", "solr", "lucene", "elasticsearch"], "answers": [{"body": "<h2>Update</h2>\n\n<p>Now that the question scope has been corrected, I might add something in this regard as well:</p>\n\n<p>There are many comparisons between <a href=\"http://lucene.apache.org/solr/\">Apache Solr</a> and <a href=\"http://www.elasticsearch.org/\">ElasticSearch</a> available, so I'll reference those I found most useful myself, i.e. covering the most important aspects:</p>\n\n<ul>\n<li><p>Bob Yoplait already linked kimchy's answer to <a href=\"http://stackoverflow.com/a/2288211/45773\">ElasticSearch, Sphinx, Lucene, Solr, Xapian. Which fits for which usage?</a>, which summarizes the reasons why he <em>went ahead and created ElasticSearch</em>, which in his opinion <em>provides a much superior distributed model and ease of use</em> in comparison to Solr.</p></li>\n<li><p>Ryan Sonnek's <a href=\"http://blog.socialcast.com/realtime-search-solr-vs-elasticsearch/\">Realtime Search: Solr vs Elasticsearch</a> provides an insightful analysis/comparison and explains why he switched from Solr to ElasticSeach, despite being a happy Solr user already - he summarizes this as follows:    </p>\n\n<blockquote>\n  <p><strong>Solr</strong> may be the weapon of choice when building <strong>standard search\n  applications</strong>, but <strong>Elasticsearch</strong> takes it to the next level with an\n  <strong>architecture for creating modern realtime search applications</strong>.\n  Percolation is an exciting and innovative feature that singlehandedly\n  blows Solr right out of the water. <strong>Elasticsearch is scalable, speedy\n  and a dream to integrate with</strong>. Adios Solr, it was nice knowing you. <em>[emphasis mine]</em></p>\n</blockquote></li>\n<li><p>The Wikipedia article on ElasticSearch quotes a <a href=\"http://en.wikipedia.org/wiki/ElasticSearch#Comparison_to_other_software\">comparison</a> from the reputed German iX magazine, listing advantages and disadvantages, which pretty much summarize what has been said above already:    </p>\n\n<blockquote>\n  <p><strong>Advantages</strong>:</p>\n  \n  <ul>\n  <li>ElasticSearch is distributed. No separate project required. Replicas are near real-time too, which is called \"Push replication\".</li>\n  <li>ElasticSearch fully supports the near real-time search of Apache\n  Lucene.</li>\n  <li>Handling multitenancy is not a special configuration, where\n  with Solr a more advanced setup is necessary.</li>\n  <li>ElasticSearch introduces\n  the concept of the Gateway, which makes full backups easier.</li>\n  </ul>\n  \n  <p><strong>Disadvantages</strong>:</p>\n  \n  <ul>\n  <li><strike>Only one main developer</strike> <em>[not applicable anymore according to the current <a href=\"https://github.com/elasticsearch\">elasticsearch GitHub organization</a>, besides having a pretty active committer base in the first place]</em></li>\n  <li><strike>No autowarming feature</strike> <em>[not applicable anymore according to the new <a href=\"https://github.com/elasticsearch/elasticsearch/issues/1913\">Index Warmup API</a>]</em></li>\n  </ul>\n</blockquote></li>\n</ul>\n\n<hr>\n\n<h2>Initial Answer</h2>\n\n<p>They are completely different technologies addressing completely different use cases, thus cannot be compared at all in any meaningful way:</p>\n\n<ul>\n<li><p><a href=\"http://lucene.apache.org/solr/\">Apache Solr</a> - <em>Apache Solr offers Lucene's capabilities in an easy to use, fast <strong>search server</strong> with additional features like faceting, scalability and much more</em></p></li>\n<li><p><a href=\"http://aws.amazon.com/elasticache/\">Amazon ElastiCache</a> - <em>Amazon ElastiCache is a web service that makes it easy to deploy, operate, and scale an <strong>in-memory cache</strong> in the cloud.</em></p>\n\n<ul>\n<li>Please note that <em>Amazon ElastiCache is protocol-compliant with Memcached, a widely adopted memory object caching system, so code, applications, and popular tools that you use today with existing Memcached environments will work seamlessly with the service</em> (see <a href=\"http://memcached.org/\">Memcached</a> for details).</li>\n</ul></li>\n</ul>\n\n<p><em>[emphasis mine]</em></p>\n\n<p>Maybe this has been confused with the following two related technologies one way or another:</p>\n\n<ul>\n<li><p><a href=\"http://www.elasticsearch.org/\">ElasticSearch</a> - <em>It is an Open Source (Apache 2), Distributed, RESTful, Search Engine built on top of Apache Lucene.</em></p></li>\n<li><p><a href=\"http://aws.amazon.com/cloudsearch/\">Amazon CloudSearch</a> - <em>Amazon CloudSearch is a fully-managed search service in the cloud that allows customers to easily integrate fast and highly scalable search functionality into their applications.</em></p></li>\n</ul>\n\n<p>The <em>Solr</em> and <em>ElasticSearch</em> offerings sound strikingly similar at first sight, and both use the same backend search engine, namely <a href=\"http://lucene.apache.org/core/\">Apache Lucene</a>.</p>\n\n<p>While <em>Solr</em> is older, quite versatile and mature and widely used accordingly, <em>ElasticSearch</em> has been developed specifically to address <em>Solr</em> shortcomings with scalability requirements in modern cloud environments, which are hard(er) to address with <em>Solr</em>.</p>\n\n<p>As such it would probably be most useful to compare <em>ElasticSearch</em> with the recently introduced <em>Amazon CloudSearch</em> (see the introductory post <a href=\"http://aws.typepad.com/aws/2012/04/amazon-cloudsearch-start-searching-in-one-hour.html\">Start Searching in One Hour for Less Than $100 / Month</a>), because both claim to cover the same use cases in principle.</p>\n", "title": "Solr vs. ElasticSearch", "answer_id": 10213568, "question_id": 10213009, "tags": ["search", "solr", "lucene", "elasticsearch"]}, {"body": "<p>I see some of the above answers are now a bit out of date.  From my perspective, and I work with both Solr(Cloud and non-Cloud) and ElasticSearch on a daily basis, here are some interesting differences:</p>\n\n<ul>\n<li>Community: Solr has a bigger, more mature user, dev, and contributor community.  ES has a smaller, but active community of users and a growing community of contributors</li>\n<li>Maturity: Solr is more mature, but ES has grown rapidly and I consider it stable</li>\n<li>Performance: hard to judge.  I/we have not done direct performance benchmarks.  A person at LinkedIn did compare Solr vs. ES vs. Sensei once, but the initial results should be ignored because they used non-expert setup for both Solr and ES.</li>\n<li>Design: People love Solr.  The Java API is somewhat verbose, but people like how it's put together.  Solr code is unfortunately not always very pretty.  Also, ES has sharding, real-time replication, document and routing built-in.  While some of this exists in Solr, too, it feels a bit like an after-thought.</li>\n<li>Support: there are companies providing tech and consulting support for both Solr and ElasticSearch.  I think the only company that provides support for both is Sematext (disclosure: I'm Sematext founder)</li>\n<li>Scalability: both can be scaled to very large clusters.  ES is easier to scale than pre-Solr 4.0 version of Solr, but with Solr 4.0 that's no longer the case.</li>\n</ul>\n\n<p>For more thorough coverage of Solr vs. ElasticSearch topic have a look at <a href=\"http://blog.sematext.com/2012/08/23/solr-vs-elasticsearch-part-1-overview/\">http://blog.sematext.com/2012/08/23/solr-vs-elasticsearch-part-1-overview/</a> . This is the first post in the series of posts from Sematext doing direct and neutral Solr vs. ElasticSearch comparison. Disclosure: I work at Sematext.</p>\n", "title": "Solr vs. ElasticSearch", "answer_id": 12131150, "question_id": 10213009, "tags": ["search", "solr", "lucene", "elasticsearch"]}, {"body": "<p>While all of the above links have merit, and have benefited me greatly in the past, as a linguist \"exposed\" to various Lucene search engines for the last 15 years, I have to say that elastic-search development is very fast in Python. That being said, some of the code felt non-intuitive to me. So, I reached out to one component of the ELK stack, Kibana, from an open source perspective, and found that I could generate the somewhat cryptic code of elasticsearch very easily in Kibana. Also, I could pull Chrome Sense es queries into Kibana as well. If you use Kibana to evaluate es, it will further speed up your evaluation. What took hours to run on other platforms was up and running in JSON in Sense on top of elasticsearch (RESTful interface) in a few minutes at worst (largest data sets); in seconds at best. The documentation for elasticsearch, while 700+ pages, didn't answer questions I had that normally would be resolved in SOLR or other Lucene documentation, which obviously took more time to analyze. Also, you may want to take a look at Aggregates in elastic-search, which have taken Faceting to a new level. </p>\n\n<p>Bigger picture: if you're doing data science, text analytics, or computational linguistics, elasticsearch has some ranking algorithms that seem to innovate well in the information retrieval area. If you're using any TF/IDF algorithms, Text Frequency/Inverse Document Frequency, elasticsearch extends this 1960's algorithm to a new level, even using BM25, Best Match 25, and other Relevancy Ranking algorithms. So, if you are scoring or ranking words, phrases or sentences, elasticsearch does this scoring on the fly, without the large overhead of other data analytics approaches that take hours--another elasticsearch time savings. \nWith es, combining some of the strengths of bucketing from aggregations with the real-time JSON data relevancy scoring and ranking, you could find a winning combination, depending on either your agile (stories) or architectural(use cases) approach.</p>\n\n<p>Note: did see a similar discussion on aggregations above, but not on aggregations and relevancy scoring--my apology for any overlap.\nDisclosure: I don't work for elastic and won't be able to benefit in the near future from their excellent work due to a different architecural path, unless I do some charity work with elasticsearch, which wouldn't be a bad idea</p>\n", "title": "Solr vs. ElasticSearch", "answer_id": 35166184, "question_id": 10213009, "tags": ["search", "solr", "lucene", "elasticsearch"]}, {"body": "<p>I have use Elasticsearch for 3 years and Solr for about a month, I feel elasticsearch cluster is quite easy to install as compared to Solr installation. Elasticsearch has a pool of help documents with great explanation. One of the use case I was stuck up with Histogram Aggregation which was available in ES however not found in Solr.</p>\n", "title": "Solr vs. ElasticSearch", "answer_id": 35645231, "question_id": 10213009, "tags": ["search", "solr", "lucene", "elasticsearch"]}, {"body": "<p>If you are already using SOLR, remain stick to it. If you are starting up, go for Elastic search.</p>\n\n<p>Maximum major issues have been fixed in SOLR and it is quite mature.</p>\n", "title": "Solr vs. ElasticSearch", "answer_id": 39144606, "question_id": 10213009, "tags": ["search", "solr", "lucene", "elasticsearch"]}, {"body": "<p>I have been working on both solr and elastic search for .Net applications.\nThe major difference what i have faced is</p>\n\n<p>Elastic search : </p>\n\n<ul>\n<li>More code and less configuration, however there are api's to change\nbut still is a code change</li>\n<li>for complex types, type within types i.e nested types(wasn't able to achieve in solr)</li>\n</ul>\n\n<p>Solr :</p>\n\n<ul>\n<li>less code and more configuration and hence less maintenance</li>\n<li>for grouping results during querying(lots of work to achieve in\nelastic    search in short no straight way)</li>\n</ul>\n", "title": "Solr vs. ElasticSearch", "answer_id": 39372797, "question_id": 10213009, "tags": ["search", "solr", "lucene", "elasticsearch"]}], "link": "http://stackoverflow.com/questions/10213009/solr-vs-elasticsearch", "question_id": 10213009}, {"body": "<p>As I understand it, when inside a factory I return an object that gets injected into a controller. When inside a service I am dealing with the object using <code>this</code> and not returning anything. </p>\n\n<p>I was under the assumption that a service was <em>always a singleton</em>, and that a <strong>new factory object</strong> gets injected in every controller. However, as it turns out, a factory object is a singleton too?</p>\n\n<p>Example code to demonstrate:</p>\n\n<pre><code>var factories = angular.module('app.factories', []);\nvar app = angular.module('app',  ['ngResource', 'app.factories']);\n\nfactories.factory('User', function () {\n  return {\n    first: 'John',\n    last: 'Doe'\n  };\n});\n\napp.controller('ACtrl', function($scope, User) {\n  $scope.user = User;\n});\n\napp.controller('BCtrl', function($scope, User) {\n  $scope.user = User;\n});\n</code></pre>\n\n<p>When changing <code>user.first</code> in <code>ACtrl</code> it turns out that <code>user.first</code> in <code>BCtrl</code> is also changed, e.g. <code>User</code> is a singleton? </p>\n\n<p>My assumption was that a new instance was injected in a controller with a factory?</p>\n", "title": "Confused about Service vs Factory", "tags": ["angularjs"], "answers": [{"body": "<p><strong>All angular services are singletons</strong>:</p>\n\n<p>Docs (see <em>Services as singletons</em>): <a href=\"https://docs.angularjs.org/guide/services\">https://docs.angularjs.org/guide/services</a></p>\n\n<blockquote>\n  <p>Lastly, it is important to realize that all Angular services are application singletons. This means that there is only one instance of a given service per injector. </p>\n</blockquote>\n\n<p>Basically the difference between the service and factory is as follows:</p>\n\n<pre><code>app.service('myService', function() {\n\n  // service is just a constructor function\n  // that will be called with 'new'\n\n  this.sayHello = function(name) {\n     return \"Hi \" + name + \"!\";\n  };\n});\n\napp.factory('myFactory', function() {\n\n  // factory returns an object\n  // you can run some code before\n\n  return {\n    sayHello : function(name) {\n      return \"Hi \" + name + \"!\";\n    }\n  }\n});\n</code></pre>\n\n<p>Check out this presentation about $provide: <a href=\"http://slides.wesalvaro.com/20121113/#/\">http://slides.wesalvaro.com/20121113/#/</a></p>\n\n<p>Those slides were used in one of the AngularJs meetups: <a href=\"http://blog.angularjs.org/2012/11/more-angularjs-meetup-videos.html\">http://blog.angularjs.org/2012/11/more-angularjs-meetup-videos.html</a></p>\n", "title": "Confused about Service vs Factory", "answer_id": 13763886, "question_id": 13762228, "tags": ["angularjs"]}, {"body": "<p>There is also a way to return a constructor function so you can return <strong><em>newable</em></strong> classes in factories, like this:</p>\n\n<pre><code>function MyObjectWithParam($rootScope, name) {\n  this.$rootScope = $rootScope;\n  this.name = name;\n}\nMyObjectWithParam.prototype.getText = function () {\n  return this.name;\n};\n\nApp.factory('MyObjectWithParam', function ($injector) {\n  return function(name) { \n    return $injector.instantiate(MyObjectWithParam,{ name: name });\n  };\n}); \n</code></pre>\n\n<p>So you can do this in a controller, which uses MyObjectWithParam:</p>\n\n<pre><code>var obj = new MyObjectWithParam(\"hello\"),\n</code></pre>\n\n<p>See here the full example: <br>\n<a href=\"http://plnkr.co/edit/GKnhIN?p=preview\">http://plnkr.co/edit/GKnhIN?p=preview</a></p>\n\n<p>And here the google group pages, where it was discussed:\n<br>\n<a href=\"https://groups.google.com/forum/#!msg/angular/56sdORWEoqg/b8hdPskxZXsJ\">https://groups.google.com/forum/#!msg/angular/56sdORWEoqg/b8hdPskxZXsJ</a> </p>\n", "title": "Confused about Service vs Factory", "answer_id": 15904939, "question_id": 13762228, "tags": ["angularjs"]}, {"body": "<p>Adding to the first answer, I think .service() is for people who have written their code in more object oriented style(C#/Java) (using this keyword and instantiating object via prototype/Constructor function).</p>\n\n<p>Factory is for developers who write code which is more natural to javascript/functional style of coding.</p>\n\n<p>Take a look at the source code of .service and .factory method inside angular.js - internally they all call provider method:</p>\n\n<pre><code>  function provider(name, provider_) {\n    if (isFunction(provider_)) {\n      provider_ = providerInjector.instantiate(provider_);\n    }\n    if (!provider_.$get) {\n      throw Error('Provider ' + name + ' must define $get factory method.');\n    }\n    return providerCache[name + providerSuffix] = provider_;\n  }\n\n  function factory(name, factoryFn) { \\\n    return provider(name, { $get: factoryFn }); \n  }\n\n  function service(name, constructor) {\n    return factory(name, ['$injector', function($injector) {\n      return $injector.instantiate(constructor);\n    }]);\n  }\n</code></pre>\n", "title": "Confused about Service vs Factory", "answer_id": 17212583, "question_id": 13762228, "tags": ["angularjs"]}, {"body": "<h2><a href=\"http://jsfiddle.net/pkozlowski_opensource/PxdSP/14/\">live example</a></h2>\n\n<h2>\" hello world \" example</h2>\n\n<p>with <code>factory</code> / <code>service</code> / <code>provider</code> :</p>\n\n<pre><code>var myApp = angular.module('myApp', []);\n\n//service style, probably the simplest one\nmyApp.service('helloWorldFromService', function() {\n    this.sayHello = function() {\n        return \"Hello, World!\"\n    };\n});\n\n//factory style, more involved but more sophisticated\nmyApp.factory('helloWorldFromFactory', function() {\n    return {\n        sayHello: function() {\n            return \"Hello, World!\"\n        }\n    };\n});\n\n//provider style, full blown, configurable version     \nmyApp.provider('helloWorld', function() {\n    // In the provider function, you cannot inject any\n    // service or factory. This can only be done at the\n    // \"$get\" method.\n\n    this.name = 'Default';\n\n    this.$get = function() {\n        var name = this.name;\n        return {\n            sayHello: function() {\n                return \"Hello, \" + name + \"!\"\n            }\n        }\n    };\n\n    this.setName = function(name) {\n        this.name = name;\n    };\n});\n\n//hey, we can configure a provider!            \nmyApp.config(function(helloWorldProvider){\n    helloWorldProvider.setName('World');\n});\n\n\nfunction MyCtrl($scope, helloWorld, helloWorldFromFactory, helloWorldFromService) {\n\n    $scope.hellos = [\n        helloWorld.sayHello(),\n        helloWorldFromFactory.sayHello(),\n        helloWorldFromService.sayHello()];\n}\u200b\n</code></pre>\n", "title": "Confused about Service vs Factory", "answer_id": 19636552, "question_id": 13762228, "tags": ["angularjs"]}, {"body": "<p>Here are the primary differences:</p>\n\n<h2>Services</h2>\n\n<p>Syntax: <code>module.service( 'serviceName', function );</code></p>\n\n<p>Result: When declaring serviceName as an injectable argument you will be provided with the <strong>instance of a function</strong> passed to <code>module.service</code>.</p>\n\n<p>Usage: Could be useful for <strong>sharing utility functions</strong> that are useful to invoke by simply appending () to the injected function reference. Could also be run with <code>injectedArg.call( this )</code> or similar.</p>\n\n<h2>Factories</h2>\n\n<p>Syntax: <code>module.factory( 'factoryName', function );</code></p>\n\n<p>Result: When declaring factoryName as an injectable argument you will be provided the <strong>value that is returned by invoking the function reference</strong> passed to <code>module.factory</code>.</p>\n\n<p>Usage: Could be useful for returning a <strong>'class'</strong> function that can then be new'ed to create instances.</p>\n\n<p>Also check <a href=\"http://docs.angularjs.org/guide/dev_guide.services.creating_services\">AngularJS documentation</a> and similar question on stackoverflow <a href=\"http://stackoverflow.com/questions/13762228/confused-about-service-vs-factory\">confused about service vs factory</a>.</p>\n\n<p>Here is <a href=\"http://jsfiddle.net/manishchhabra/Ne5P8/\">example using services and factory</a>. Read more about <a href=\"http://blog.manishchhabra.com/2013/09/angularjs-service-vs-factory-with-example/\">AngularJS service vs factory</a>.</p>\n", "title": "Confused about Service vs Factory", "answer_id": 20735422, "question_id": 13762228, "tags": ["angularjs"]}, {"body": "<p>Here are some more examples of services vs factories which may be useful in seeing the difference between them. Basically, a service has \"new ...\" called on it, it is already instantiated. A factory is not instantiated automatically.</p>\n\n\n\n<h2>Basic Examples</h2>\n\n<h3>Return a class object which has a single method</h3>\n\n<p>Here is a service that has a single method:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>angular.service('Hello', function () {\n  this.sayHello = function () { /* ... */ };\n});\n</code></pre>\n\n<p>Here is a factory that returns an object with a method:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>angular.factory('ClassFactory', function () {\n  return {\n    sayHello: function () { /* ... */ }\n  };\n});\n</code></pre>\n\n<h3>Return a value</h3>\n\n<p>A factory that returns a list of numbers:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>angular.factory('NumberListFactory', function () {\n  return [1, 2, 3, 4, 5];\n});\n\nconsole.log(NumberListFactory);\n</code></pre>\n\n<p>A service that returns a list of numbers:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>angular.service('NumberLister', function () {\n  this.numbers = [1, 2, 3, 4, 5];\n});\n\nconsole.log(NumberLister.numbers);\n</code></pre>\n\n<p>The output in both cases is the same, the list of numbers.</p>\n\n<h2>Advanced Examples</h2>\n\n<h3>\"Class\" variables using factories</h3>\n\n<p>In this example we define a CounterFactory, it increments or decrements a counter and you can get the current count or get how many CounterFactory objects have been created:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>angular.factory('CounterFactory', function () {\n  var number_of_counter_factories = 0; // class variable\n\n  return function () {\n    var count = 0; // instance variable\n    number_of_counter_factories += 1; // increment the class variable\n\n    // this method accesses the class variable\n    this.getNumberOfCounterFactories = function () {\n      return number_of_counter_factories;\n    };\n\n    this.inc = function () {\n      count += 1;\n    };\n    this.dec = function () {\n      count -= 1;\n    };\n    this.getCount = function () {\n      return count;\n    };\n  }\n\n})\n</code></pre>\n\n<p>We use the <code>CounterFactory</code> to create multiple counters. We can access the class variable to see how many counters were created:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>var people_counter;\nvar places_counter;\n\npeople_counter = new CounterFactory();\nconsole.log('people', people_counter.getCount());\npeople_counter.inc();\nconsole.log('people', people_counter.getCount());\n\nconsole.log('counters', people_counter.getNumberOfCounterFactories());\n\nplaces_counter = new CounterFactory();\nconsole.log('places', places_counter.getCount());\n\nconsole.log('counters', people_counter.getNumberOfCounterFactories());\nconsole.log('counters', places_counter.getNumberOfCounterFactories());\n</code></pre>\n\n<p>The output of this code is:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>people 0\npeople 1\ncounters 1\nplaces 0\ncounters 2\ncounters 2\n</code></pre>\n", "title": "Confused about Service vs Factory", "answer_id": 25010607, "question_id": 13762228, "tags": ["angularjs"]}, {"body": "<p>For me the revelation came when I realise that they all work the same way: by running something <strong>once</strong>, storing the value they get, and then cough up <strong>that same stored value</strong> when referenced through Dependency Injection.</p>\n\n<p>Say we have:</p>\n\n<pre><code>app.factory('a', fn);\napp.service('b', fn);\napp.provider('c', fn);\n</code></pre>\n\n<p>The difference between the three is that:</p>\n\n<ol>\n<li><code>a</code>'s stored value comes from running <code>fn</code></li>\n<li><code>b</code>\u2019s stored value comes from <code>new</code>ing <code>fn</code></li>\n<li><code>c</code>\u2019s stored value comes from first getting an instance by <code>new</code>ing <code>fn</code>, and then running a <code>$get</code> method of the instance</li>\n</ol>\n\n<p>which means, there\u2019s something like a cache object inside angular, whose value of each injection is only assigned once, when they've been injected the first time, and where:</p>\n\n<pre><code>cache.a = fn()\ncache.b = new fn()\ncache.c = (new fn()).$get()\n</code></pre>\n\n<p>This is why we use <code>this</code> in services, and define a <code>this.$get</code> in providers.</p>\n\n<p>Hope this helps.</p>\n", "title": "Confused about Service vs Factory", "answer_id": 26924234, "question_id": 13762228, "tags": ["angularjs"]}, {"body": "<p>The basic difference, is that <em>provider</em> allows to set primitive (non-objects), array, or callback function values into the factory declared variable, and thus if returning an object it has to be explicitly declared and returned.</p>\n\n<p>On the other hand a <em>service</em> can only be used to set the service declared variable to an object, thus we can avoid the explicit creation and returning of the objects, while on the other hand it allows usage of the <em>this</em> keyword.</p>\n\n<p>Or in short words \"<em>provider</em> is a more generic form while <em>service</em> is limited to objects only\".</p>\n", "title": "Confused about Service vs Factory", "answer_id": 27052561, "question_id": 13762228, "tags": ["angularjs"]}, {"body": "<p>Very simply:</p>\n\n<p>.service - registered function will be invoked as a constructor (aka 'newed')</p>\n\n<p>.factory - registered function will be invoked as a simple function</p>\n\n<p>Both get invoked once resulting in a singleton object that gets injected into other components of your app.</p>\n", "title": "Confused about Service vs Factory", "answer_id": 27129069, "question_id": 13762228, "tags": ["angularjs"]}, {"body": "<p>\u201cFactory\u201d and \u201cService\u201d are different ways of doing DI (Dependency injection) in angular. </p>\n\n<p>So when we define DI using \u201cservice\u201d as shown in the code below. This creates a new GLOBAL instance of the \u201cLogger\u201d object and injects it in to the function.</p>\n\n<pre><code>app.service(\"Logger\", Logger); // Injects a global object\n</code></pre>\n\n<p>When you define DI using a \u201cfactory\u201d it does not create a instance. It just passes the method and later the consumer internally has to make calls to the factory for object instances.</p>\n\n<pre><code>app.factory(\"Customerfactory\", CreateCustomer);\n</code></pre>\n\n<p>Below is a simple image which shows visually how DI process for \u201cService\u201d is different than \u201cFactory\u201d.</p>\n\n<p><img src=\"http://i.stack.imgur.com/M55Yi.png\" alt=\"enter image description here\"></p>\n\n<p>Factory should be used  When we want to create different types of objects depending on scenarios. For example depending on scenario we want to create a simple \u201cCustomer\u201d object , or \u201cCustomer\u201d with \u201cAddress\u201d object or \u201cCustomer\u201d with \u201cPhone\u201d object. <a href=\"http://www.codeproject.com/Articles/891718/AngularJS-Interview-Questions-and-Answers#WhatisaFactoryinAngular\">Here is a detailed explanation of this paragraph</a> </p>\n\n<p>Service should be used When we have utility or shared functions to be injected like Utility , Logger , Error handler etc.</p>\n", "title": "Confused about Service vs Factory", "answer_id": 29403645, "question_id": 13762228, "tags": ["angularjs"]}, {"body": "<p>All providers work the same way. The different methods <code>service</code>, <code>factory</code>, <code>provider</code> just let you accomplish the same thing in less code.</p>\n\n<p>P.S. There's also <code>value</code> and <code>constant</code>.</p>\n\n<p>Each special case down the chain starting with <code>provider</code> and ending with <code>value</code> has an added limitation. So to decide between them you have to ask yourself which let's you accomplish what you want with less code.</p>\n\n<p>Here is a picture that shows you what I mean:</p>\n\n<p><a href=\"http://www.simplygoodcode.com/2015/11/the-difference-between-service-provider-and-factory-in-angularjs/\"><img src=\"http://i.stack.imgur.com/CkdHl.png\" alt=\"enter image description here\"></a></p>\n\n<p>You can a breakdown and reference guide on the blog post I got this image from:</p>\n\n<p><a href=\"http://www.simplygoodcode.com/2015/11/the-difference-between-service-provider-and-factory-in-angularjs/\">http://www.simplygoodcode.com/2015/11/the-difference-between-service-provider-and-factory-in-angularjs/</a></p>\n", "title": "Confused about Service vs Factory", "answer_id": 34202620, "question_id": 13762228, "tags": ["angularjs"]}, {"body": "<p><strong>Service</strong> : returns the actual function: Useful for sharing utility functions that are useful to invoke by simply appending () to the injected function reference.  </p>\n\n<p><strong>Factory</strong> : returns the function's return value: instantiate an object like new Object() in java.   </p>\n\n<p><strong>Provider</strong> : returns the output of the function's $get function: Configurable.</p>\n\n<p><a href=\"http://jsbin.com/ohamub/1/edit?html,output\" rel=\"nofollow\">code</a><br>\n<a href=\"https://groups.google.com/forum/#!msg/angular/56sdORWEoqg/HuZsOsMvKv4J\" rel=\"nofollow\">source</a></p>\n", "title": "Confused about Service vs Factory", "answer_id": 34324462, "question_id": 13762228, "tags": ["angularjs"]}, {"body": "<p>This is how I understood the difference between them in terms of design patterns:</p>\n\n<p><strong>Service</strong>: Return a type, that will be newed to create an object of that type. If Java analogy is used, Service returns a <strong>Java Class definition</strong>. </p>\n\n<p><strong>Factory</strong>: Returns a concrete object that can be immediately used. In Java Analogy a Factory returns a <strong>Java Object</strong>.</p>\n\n<p>The part that often confuses people (including myself) is that when you inject a Service or a Factory in your code they can be used the same way, what you get in your code in both cases is a concrete object that you can immediately invoke. Which means in case of the Service, angular calls \"new\" on the service declaration on behalf of you.  I think this is a convoluted concept.</p>\n", "title": "Confused about Service vs Factory", "answer_id": 34957351, "question_id": 13762228, "tags": ["angularjs"]}, {"body": "<h2><a href=\"http://viralpatel.net/blogs/angularjs-service-factory-tutorial/\" rel=\"nofollow\">AngularJS Service vs Factory</a></h2>\n\n<pre><code>module.service( 'serviceName', function );\n\nmodule.factory( 'factoryName', function );\n</code></pre>\n\n<p>When declaring <code>serviceName</code> as an <code>injectable</code> argument you will be provided with an instance of the function. In other words new <code>FunctionYouPassedToService()</code>. This object instance becomes the service object that <code>AngularJS</code> registers and injects later to other <code>services / controllers</code> if required.</p>\n\n<p>When declaring <code>factoryName</code> as an <code>injectable</code> argument you will be provided with the value that is returned by invoking the function reference passed to <code>module.factory</code>.</p>\n\n<p>In below example we define <code>MyService</code> in two different ways. Note how in .service we create service methods using <code>this.methodname</code>. In .factory we created a factory object and assigned the methods to it.</p>\n\n<p><strong>AngularJS .service</strong></p>\n\n<pre><code>module.service('MyService', function() {\n    this.method1 = function() {\n            //..\n        }\n\n    this.method2 = function() {\n            //..\n        }\n});\n</code></pre>\n\n<p><strong>AngularJS .factory</strong></p>\n\n<pre><code>module.factory('MyService', function() {\n\n    var factory = {}; \n\n    factory.method1 = function() {\n            //..\n        }\n\n    factory.method2 = function() {\n            //..\n        }\n\n    return factory;\n});\n</code></pre>\n", "title": "Confused about Service vs Factory", "answer_id": 35619808, "question_id": 13762228, "tags": ["angularjs"]}, {"body": "<p>This would be the best and short answer for understanding Service Vs Factory Vs Provider </p>\n\n<p><em>Source</em>: <a href=\"https://groups.google.com/forum/#!msg/angular/56sdORWEoqg/HuZsOsMvKv4J\" rel=\"nofollow\">https://groups.google.com/forum/#!msg/angular/56sdORWEoqg/HuZsOsMvKv4J</a></p>\n\n<p>Here what <strong>ben</strong> says with a <strong>demo</strong> <a href=\"http://jsbin.com/ohamub/1/edit?html,output\" rel=\"nofollow\">http://jsbin.com/ohamub/1/edit?html,output</a></p>\n\n<p>\"There are comments in the code illustrating the primary differences but I will expand on them a bit here. As a note, I am just getting my head around this so if I say anything that is wrong please let me know.</p>\n\n<p><strong><em>Services</em></strong></p>\n\n<p><strong>Syntax</strong>: module.service( 'serviceName', function );</p>\n\n<p><strong>Result</strong>: When declaring serviceName as an injectable argument you will be provided the actual function reference passed to module.service.</p>\n\n<p><strong>Usage</strong>: Could be useful for sharing utility functions that are useful to invoke by simply appending () to the injected function reference. Could also be run with injectedArg.call( this ) or similar.</p>\n\n<p><strong><em>Factories</em></strong></p>\n\n<p><strong>Syntax</strong>: module.factory( 'factoryName', function );</p>\n\n<p><strong>Result</strong>: When declaring factoryName as an injectable argument you will be provided the value that is returned by invoking the function reference passed to module.factory.</p>\n\n<p><strong>Usage</strong>: Could be useful for returning a 'class' function that can then be new'ed to create instances.</p>\n\n<p><strong><em>Providers</em></strong></p>\n\n<p><strong>Syntax</strong>: module.provider( 'providerName', function );</p>\n\n<p><strong>Result</strong>: When declaring providerName as an injectable argument you will be provided the value that is returned by invoking the $get method of the function reference passed to module.provider.</p>\n\n<p><strong>Usage</strong>: Could be useful for returning a 'class' function that can then be new'ed to create instances but that requires some sort of configuration before being injected. Perhaps useful for classes that are reusable across projects? Still kind of hazy on this one.\"\nBen</p>\n", "title": "Confused about Service vs Factory", "answer_id": 36971508, "question_id": 13762228, "tags": ["angularjs"]}, {"body": "<p><em>I had this confusion for a while and I'm trying my best to provide a simple explanation here. Hope this will help!</em></p>\n\n<p><code>angular .factory</code> and <code>angular .service</code> both are used to initialize a service and work in the same way. </p>\n\n<p><strong>The only difference is, how you want to initialize your service.</strong> </p>\n\n<p><strong>Both are Singletons</strong></p>\n\n<hr/>\n\n<pre><code>var app = angular.module('app', []);\n</code></pre>\n\n<p><hr/></p>\n\n<h1>Factory</h1>\n\n<h2>app.factory(<code>&lt;service name&gt;</code>, <code>&lt;function with a return value&gt;</code>)</h2>\n\n<p>If you would like to initialize your service from <strong>a function that you have with a return value</strong>, you have to use this <code>factory</code> method.</p>\n\n<p>e.g.</p>\n\n<pre><code>function myService() {\n  //return what you want\n  var service = {\n    myfunc: function (param) { /* do stuff */ }\n  }\n  return service;\n}\n\napp.factory('myService', myService);\n</code></pre>\n\n<p><strong>When injecting this service (e.g. to your controller):</strong> </p>\n\n<ul>\n<li>Angular will <strong>call</strong> your given function (as <code>myService()</code>) to return the object</li>\n<li><em>Singleton</em> - called only once, stored, and pass the same object.</li>\n</ul>\n\n<p><hr/></p>\n\n<h1>Service</h1>\n\n<h2>app.service(<code>&lt;service name&gt;</code>, <code>&lt;constructor function&gt;</code>)</h2>\n\n<p>If you would like to initialize your service from <strong>a constructor function</strong> (using <code>this</code> keyword), you have to use this <code>service</code> method.</p>\n\n<p>e.g.</p>\n\n<pre><code>function myService() {\n  this.myfunc: function (param) { /* do stuff */ }\n}\n\napp.service('myService', myService);\n</code></pre>\n\n<p><strong>When injecting this service (e.g. to your controller):</strong> </p>\n\n<ul>\n<li>Angular will <code>new</code>ing your given function (as <code>new myService()</code>) to return the object</li>\n<li><em>Singleton</em> - called only once, stored, and pass the same object.</li>\n</ul>\n\n<p><hr/>\nNOTE: If you use <code>factory</code> with <code>&lt;constructor function&gt;</code> or <code>service</code> with <code>&lt;function with a return value&gt;</code>, it will not work.</p>\n\n<hr/>\n\n<h1>Examples - DEMOs</h1>\n\n<ul>\n<li><strong><a href=\"http://plnkr.co/edit/65ErFP5rIUrfgtW93JZn?p=preview\" rel=\"nofollow\">Angular Service vs Factory</a></strong></li>\n<li><strong><a href=\"http://plnkr.co/edit/910nt34d8DTISdtzLD8E?p=preview\" rel=\"nofollow\">Angular Service vs Factory (with route)</a></strong></li>\n</ul>\n", "title": "Confused about Service vs Factory", "answer_id": 38036541, "question_id": 13762228, "tags": ["angularjs"]}, {"body": "<p>This is what helped me to understand the difference, thanks to a blog post by Pascal Precht.</p>\n\n<p>A service is a method on a module that takes a name and a function that defines the service. You can inject and use that particular service in other components, like controllers, directives and filters.  A factory is a method on a module and it also takes a name and a function, that defines the factory. We can also inject and use the it same way we did with the service.</p>\n\n<p>Objects created with new use the value of the prototype property of their constructor function as their prototype, so I found the Angular code that calls Object.create(), that I believe is the service constructor function when it gets instantiated. However, a factory function is really just a function that gets called, which is why we have to return an object literal for the factory.</p>\n\n<p>Here is the angular 1.5 code I found for factory:</p>\n\n<pre><code>var needsRecurse = false;\n    var destination = copyType(source);\n\n    if (destination === undefined) {\n      destination = isArray(source) ? [] : Object.create(getPrototypeOf(source));\n      needsRecurse = true;\n    }\n</code></pre>\n\n<p>Angular source code snippet for the factory() function:</p>\n\n<pre><code> function factory(name, factoryFn, enforce) {\n    return provider(name, {\n      $get: enforce !== false ? enforceReturnValue(name, factoryFn) : factoryFn\n    });\n  }\n</code></pre>\n\n<p>It takes the name and the factory function that is passed and returns a provider with the same name, that has a $get method which is our factory function. Whenever you ask the injector for a specific dependency, it basically asks the corresponding provider for an instance of that service, by calling the $get() method. That\u2019s why $get() is required, when creating providers.</p>\n\n<p>Here is the angular 1.5 code for service.</p>\n\n<pre><code>function service(name, constructor) {\n    return factory(name, ['$injector', function($injector) {\n      return $injector.instantiate(constructor);\n    }]);\n  }\n</code></pre>\n\n<p>It turns out that when we call service(), it actually calls factory()! However, it doesn\u2019t just pass our service constructor function to the factory as is. It also passes a function that asks the injector to instantiate an object by the given constructor. </p>\n\n<p>In other words, if we inject MyService somewhere, what happens in the code is:</p>\n\n<pre><code>MyServiceProvider.$get(); // return the instance of the service\n</code></pre>\n\n<p>To restate it again, a service calls a factory, which is a $get() method on the corresponding provider. Moreover, $injector.instantiate() is the method that ultimately calls Object.create() with the constructor function. That\u2019s why we use \"this\" in services.</p>\n\n<p>For ES5 it doesn't matter which we use: service() or factory(), it\u2019s always a factory that is called which creates a provider for our service. </p>\n\n<p>You can do the exact same thing with services as well though.  A service is a constructor function, however, that doesn\u2019t prevent us from returning object literals. So we can take our service code and write it in a way that it basically does the exact same thing as our factory or in other words, you can write a service as a factory to return an object. </p>\n\n<p>Why do most people recommend to use factories over services?  This is the best answer I've seen which comes from Pawel Kozlowski's book: Mastering Web Application Development with AngularJS.  </p>\n\n<blockquote>\n  <p>The factory method is the most common way of getting objects into\n  AngularJS dependency injection system. It is very flexible and can\n  contain sophisticated creation logic. Since factories are regular\n  functions, we can also take advantage of a new lexical scope to\n  simulate \"private\" variables. This is very useful as we can hide\n  implementation details of a given service.\"</p>\n</blockquote>\n", "title": "Confused about Service vs Factory", "answer_id": 38151469, "question_id": 13762228, "tags": ["angularjs"]}], "link": "http://stackoverflow.com/questions/13762228/confused-about-service-vs-factory", "question_id": 13762228}, {"body": "<p>I need to add some rules to my <code>.gitignore</code> file, however, I can't find it in my project folder. Isn't it created automatically by Xcode? If not, what command allows me to create one?</p>\n", "title": "How to create .gitignore file", "tags": ["git", "xcode4.3", "gitignore"], "answers": [{"body": "<p>The .gitignore file is not added to a repository by default.  Use vi or your favorite editor to create the .gitignore file then issue a <strong>git add .gitignore</strong> followed by <strong>git commit -m \"message\" .gitignore</strong>.  That will take care of it.</p>\n\n<pre><code>echo \"\" &gt; .gitignore\ngit add .gitignore\ngit commit -m \"message\" .gitignore\n</code></pre>\n", "title": "How to create .gitignore file", "answer_id": 10744349, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>Here's my personal favorite, <a href=\"http://help.github.com/ignore-files/\">http://help.github.com/ignore-files/</a></p>\n\n<p>Also just in case you wanted to ignore xcode files, refer to this answer <a href=\"http://stackoverflow.com/a/49488/126235\">http://stackoverflow.com/a/49488/126235</a></p>\n", "title": "How to create .gitignore file", "answer_id": 10744363, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>If you don't want to have your .gitignore interfere with anyone else's repository, you can also use <code>.git/info/exclude</code>. (See <a href=\"http://help.github.com/ignore-files/\">http://help.github.com/ignore-files/</a>)</p>\n", "title": "How to create .gitignore file", "answer_id": 10746867, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>If you're using Windows it will not let you create a file without a filename in Windows Explorer. It will give you the error \"<em>You must type a file name</em>\" if you try to rename a text file as <strong>.gitignore</strong></p>\n\n<p><img src=\"http://i.imgur.com/W0J6Ort.png\" alt=\"enter image description here\"></p>\n\n<p>To get around this I used the following steps</p>\n\n<ol>\n<li>Create the text file gitignore.txt</li>\n<li>Open it in a text editor and add your rules, then save and close</li>\n<li>Hold SHIFT, right click the folder you're in, then select <strong>Open command window here</strong></li>\n<li>Then rename the file in the command line, with <code>ren gitignore.txt .gitignore</code></li>\n</ol>\n", "title": "How to create .gitignore file", "answer_id": 12298593, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>At work we are on Windows XP, and typing a period at the end of a filename doesn't work. A quick easy way to create a .gitignore file without having the \"You must type a filename\"error is:</p>\n\n<ol>\n<li>open a cmd window and type \"edit .gitignore\". </li>\n<li>type \"Alt (selects file menu), F, S.  You now have an empty .gitignore file wherever your cmd prompt is pointing.</li>\n</ol>\n\n<p>You can now populate it with your favorite text editor</p>\n", "title": "How to create .gitignore file", "answer_id": 12681361, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>As simple as things can (sometimes) be: Just add the following into your preferred command line interface (GNU Bash, Git Bash, etc.)</p>\n\n<pre><code>touch .gitignore\n</code></pre>\n\n<p>testmenow</p>\n\n<p><strike>Update: Tested with Windows CMD and it does not work on Win 8.1+. Nevertheless it does work using Git Bash which you should have installed in Windows if you are using Git.</strike></p>\n\n<p><strong>Update:</strong> As @Wardy pointed out in the comments, <code>touch</code> works on Windows as well as long as you provide the full path. This might also explain why it does not work for some users on <em>Windows</em>: The <code>touch</code> command seems to not be in the <code>$PATH</code> on some Win versions per default.</p>\n\n<pre><code>C:\\&gt; \"c:\\program files (x86)\\git\\bin\\touch.exe\" .gitignore\n</code></pre>\n", "title": "How to create .gitignore file", "answer_id": 14979265, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>The easiest way to create the .gitignore file in Windows Explorer is to create a new file named <code>.gitignore.</code>.\nThis will skip the validation of having a file extension, since is actually has an empty file extension.</p>\n", "title": "How to create .gitignore file", "answer_id": 17837041, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p><strong><a href=\"http://gitignore.io\">http://gitignore.io</a></strong> is an open source utility that can help you create useful .gitignore files for your project.  There is also a command line API that you can access via a <code>gi</code> command: <a href=\"http://gitignore.io/cli\">http://gitignore.io/cli</a></p>\n\n<ol>\n<li><p>Install <code>gi</code> command for <strong>OSX</strong>:</p>\n\n<p><code>$ echo \"function gi() { curl http://gitignore.io/api/\\$@ ;}\" &gt;&gt; ~/.bash_profile &amp;&amp; source ~/.bash_profile</code></p></li>\n<li><p>View .gitignore file contents (Output: <a href=\"http://gitignore.io/api/xcode,osx\">http://gitignore.io/api/xcode,osx</a>):</p>\n\n<p><code>$ gi xcode,osx</code></p></li>\n<li><p>You should see output on the terminal, if you want to append the results to a new .gitignore file.</p>\n\n<p><code>$ gi xcode,osx &gt;&gt; .gitignore</code></p></li>\n</ol>\n", "title": "How to create .gitignore file", "answer_id": 19451383, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>Create a .gitignore file in include all files and directories that you don't want to commit.</p>\n\n<p>Ex:</p>\n\n<pre><code>#################\n## Eclipse\n#################\n\n*.pydevproject\n.project\n.metadata\n.gradle\nbin/\ntmp/\ntarget/\n*.tmp\n*.bak\n*.swp\n*~.nib\nlocal.properties\n.classpath\n.settings/\n.loadpath\n\n# External tool builders\n.externalToolBuilders/\n\n# Locally stored \"Eclipse launch configurations\"\n*.launch\n\n# CDT-specific\n.cproject\n\n# PDT-specific\n.buildpath\n\n\n#################\n## Visual Studio\n#################\n\n## Ignore Visual Studio temporary files, build results, and\n## files generated by popular Visual Studio add-ons.\n\n# User-specific files\n*.suo\n*.user\n*.sln.docstates\n\n# Build results\n\n[Dd]ebug/\n[Rr]elease/\nx64/\nbuild/\n[Bb]in/\n[Oo]bj/\n\n# MSTest test Results\n[Tt]est[Rr]esult*/\n[Bb]uild[Ll]og.*\n\n*_i.c\n*_p.c\n*.ilk\n*.meta\n*.obj\n*.pch\n*.pdb\n*.pgc\n*.pgd\n*.rsp\n*.sbr\n*.tlb\n*.tli\n*.tlh\n*.tmp\n*.tmp_proj\n*.log\n*.vspscc\n*.vssscc\n.builds\n*.pidb\n*.log\n*.scc\n\n# Visual C++ cache files\nipch/\n*.aps\n*.ncb\n*.opensdf\n*.sdf\n*.cachefile\n\n# Visual Studio profiler\n*.psess\n*.vsp\n*.vspx\n\n# Guidance Automation Toolkit\n*.gpState\n\n# ReSharper is a .NET coding add-in\n_ReSharper*/\n*.[Rr]e[Ss]harper\n\n# TeamCity is a build add-in\n_TeamCity*\n\n# DotCover is a Code Coverage Tool\n*.dotCover\n\n# NCrunch\n*.ncrunch*\n.*crunch*.local.xml\n\n# Installshield output folder\n[Ee]xpress/\n\n# DocProject is a documentation generator add-in\nDocProject/buildhelp/\nDocProject/Help/*.HxT\nDocProject/Help/*.HxC\nDocProject/Help/*.hhc\nDocProject/Help/*.hhk\nDocProject/Help/*.hhp\nDocProject/Help/Html2\nDocProject/Help/html\n\n# Click-Once directory\npublish/\n\n# Publish Web Output\n*.Publish.xml\n*.pubxml\n\n# NuGet Packages Directory\n## TODO: If you have NuGet Package Restore enabled, uncomment the next line\n#packages/\n\n# Windows Azure Build Output\ncsx\n*.build.csdef\n\n# Windows Store app package directory\nAppPackages/\n\n# Others\nsql/\n*.Cache\nClientBin/\n[Ss]tyle[Cc]op.*\n~$*\n*~\n*.dbmdl\n*.[Pp]ublish.xml\n*.pfx\n*.publishsettings\n</code></pre>\n", "title": "How to create .gitignore file", "answer_id": 19625936, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>in windows, open a dos prompt(cmd) windows, use command line:</p>\n\n<pre><code>type &gt; .gitignore\n</code></pre>\n", "title": "How to create .gitignore file", "answer_id": 20210736, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>The following works in Powershell and Command Prompt</p>\n\n<pre><code>echo '*.ignore_me' &gt; .gitignore\n</code></pre>\n\n<p>I ran into a weird issue where git effectively wouldn't read the .gitignore file.  I then deleted .gitignore file and created one using vim which worked fine.</p>\n\n<p>To add additional files to ignore, just call the following command:</p>\n\n<pre><code>echo 'another_file_to_ignore' &gt;&gt; .gitignore\n</code></pre>\n\n<p>It will append further files to the existing .gitignore file.</p>\n", "title": "How to create .gitignore file", "answer_id": 21503681, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>To add any file in Xcode go to the menu and navigate to\nFile -> New -> File...</p>\n\n<p>For a .gitignore file choose Other -> Empty and click on Next.\nType in the name (.gitignore) into the Save As field and click Create.\nFor files starting with a dot (\".\") a warning message will pop up, telling you that the file will be hidden. Just click on Use \".\" to proceed...</p>\n\n<p>That's all.</p>\n\n<p>To fill your brand new .gitignore you can find an example for ignoring Xcode file here: <a href=\"http://stackoverflow.com/a/12021580/2120348\">http://stackoverflow.com/a/12021580/2120348</a></p>\n", "title": "How to create .gitignore file", "answer_id": 22199268, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<h1>==========  In WINDOWS ==========</h1>\n\n<ol>\n<li>Open notepad.</li>\n<li>Add the contents of your gitignore file.</li>\n<li>Click \"Save as\" and select \"all files\".  </li>\n<li>Save as <code>.gitignore</code>.  </li>\n</ol>\n\n<p><strong>======== Easy peasy!  No command line required! ========</strong></p>\n", "title": "How to create .gitignore file", "answer_id": 23970818, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>if you use Sublime as your IDE you can create a new file and save it as .gitignore. Simply using ctrl N for the new file, and ctrl S to save as \".gitignore\".</p>\n", "title": "How to create .gitignore file", "answer_id": 24152616, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p><em>My contribution is aimed at those on a mac, it can be applied to not only those working on an iOS project (as implied by the question mentioning Xcode), but any type of project.</em>\n<hr>\n<br>\nThe easy way that i do it is to go into the terminal and run <code>vim .gitignore</code> and then add the files. Usually you can just copy what you need from one of the templates on Github at <a href=\"https://github.com/github/gitignore\">https://github.com/github/gitignore</a></p>\n\n<p><br>\n<strong>Step 1</strong><br>\nWhile in your project run</p>\n\n<p><code>vim .gitnore</code></p>\n\n<p><img src=\"http://i.stack.imgur.com/g2rbc.gif\" alt=\"enter image description here\"></p>\n\n<p><br><br>\n<strong>Step 2</strong><br>\nYou now have your file open with <a href=\"http://www.vim.org/about.php\">vim</a>. </p>\n\n<p><img src=\"http://i.stack.imgur.com/LVrOY.png\" alt=\"enter image description here\"></p>\n\n<p>Press <code>i</code> to insert text. You will see that the file is ready when you see the <strong>--INSERT--</strong> at the bottom.</p>\n\n<p><img src=\"http://i.stack.imgur.com/TJPV6.png\" alt=\"enter image description here\"></p>\n\n<p><br><br>\n<strong>Step 3 (option 1)</strong><br>\nFor Objective-C projects, you can copy from <a href=\"https://raw.githubusercontent.com/github/gitignore/master/Objective-C.gitignore\">https://raw.githubusercontent.com/github/gitignore/master/Objective-C.gitignore</a> and paste it into your <code>.gitignore</code></p>\n\n<p><img src=\"http://i.stack.imgur.com/yoXdn.png\" alt=\"enter image description here\"></p>\n\n<p>Then press <code>esc</code> then type in <code>:wq</code> then press <code>return</code>. Which saves the file. </p>\n\n<p><br><br>\n<strong>Step 3 (option 2)</strong><br>\nAdd whatever files apply to your project. </p>\n\n<p>If you are not sure what to add, the best keywords to use in your search engine would be to include your project type and text editor. For example, if you use Sublime you would want to add </p>\n\n<pre><code>*.sublime-workspace\n</code></pre>\n\n<p>And if you are working with a Cordova project in Dreamweaver you would want to add </p>\n\n<pre><code>_notes\ndwsync.xml\n</code></pre>\n", "title": "How to create .gitignore file", "answer_id": 24787355, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>This was right up my ally -- though, I'm still trying to figure out how some <code>.dll</code>s got in:</p>\n\n<p><a href=\"http://www.gitignore.io/\" rel=\"nofollow\">http://www.gitignore.io/</a>\n<a href=\"http://www.diaryofaninja.com/blog/2011/06/01/how-to-easily-create-a-gitignore-file-inside-windows-explorer\" rel=\"nofollow\">http://www.diaryofaninja.com/blog/2011/06/01/how-to-easily-create-a-gitignore-file-inside-windows-explorer</a></p>\n\n<p>Hope this helps!</p>\n", "title": "How to create .gitignore file", "answer_id": 25143690, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>One thing that I haven't seen mentioned yet, is that you can actually make Xcode generate it automatically, when you start a new project.\nIn order to do so, you'll have to start doing some harmless hacking yourself...</p>\n\n<p>Before you begin: Make a backup of \"Project Templates\", as I predict you'll want to do more than I just mention, once you've discovered it.</p>\n\n<p>Now, go to /Developer/Library/Xcode/Project Templates/Application/Cocoa Application/\nAdd your .gitignore file there.</p>\n\n<p>That's all. When you create a new \"Cocoa Application\" project, then the .gitignore file is automatically copied from your project templates.</p>\n\n<p><em>Beware if you want to edit the templates themselves. Use <strong>nano</strong> for that; do not use Xcode or TextEdit, they mess up the unicode characters! -Well Xcode also messes up everything else.</em></p>\n\n<p>Note: There's also a \"File Templates\", which you should also make a backup of before you start modifying them. Again: Use <strong>nano</strong> for editing them; not Xcode, nor TextEdit.</p>\n\n<p>Here's one of my own .gitignore files, which you can use for inspiration:</p>\n\n<pre><code>.DS_Store\nIcon\\15\nIcon\\r\nIcon\\n\n/*.xcodeproj/*.mode*\n/*.xcodeproj/*.pbxuser\n/*.xcodeproj/TemplateIcon.icns\n/*.xcodeproj/.LSOverride\n!/*.xcodeproj/default.*\n/*.pbproj/*.mode*\n/*.pbproj/*.pbxuser\n/*.pbproj/*.perspective*\n/build/\n*.moved-aside\n*~.nib\n*~.xib\n</code></pre>\n\n<p>Note: I use Xcode 2.5 and Xcode 3.1.4 (would prefer 3.1, but it keeps spamming my console)</p>\n", "title": "How to create .gitignore file", "answer_id": 26290959, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>Here a nice tip under Windows:</p>\n\n<ul>\n<li>Right click in Windows Explorer, New > Text Document</li>\n<li>Name it .gitignore. (with a trailing dot - that is the tip)</li>\n<li>You end up with a .gitignore file :)</li>\n</ul>\n\n<p>Tested under Windows 7 and 8.</p>\n\n<p>This tip assumes that your Windows Explorer displays the file extensions.</p>\n\n<p><img src=\"http://i.stack.imgur.com/pPYB8.png\" alt=\"Windows Explorer .gitignore\"></p>\n", "title": "How to create .gitignore file", "answer_id": 26484621, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>Yes windows explorer wouldn't allow you to create this file name. Another easy way to come around this is to create a dummy file in the directory for example NewFile.txt and than just simply rename it in git bash like following:</p>\n\n<pre><code>mv NewFile.txt .gitignore\n</code></pre>\n", "title": "How to create .gitignore file", "answer_id": 26982425, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>I use notepad++. New File > SaveAs > .gitignore (Save as type -> All types(<em>.</em>)) </p>\n", "title": "How to create .gitignore file", "answer_id": 27304047, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>1) create a .gitignore file, so to do that, you just create a .txt file and change the extention as following:\n<img src=\"http://i.stack.imgur.com/OH5kX.jpg\" alt=\"enter image description here\"></p>\n\n<p>then you have to change the name writing the following line on the cmd:</p>\n\n<pre><code> rename git.txt .gitignore\n</code></pre>\n\n<p>where git.txt is the name of the file you've just created.</p>\n\n<p>Then you can open the file and write all the files you don\u00b4t want to add on the repository. For example mine looks like this:</p>\n\n<pre><code>#OS junk files\n[Tt]humbs.db\n*.DS_Store\n\n#Visual Studio files\n*.[Oo]bj\n*.user\n*.aps\n*.pch\n*.vspscc\n*.vssscc\n*_i.c\n*_p.c\n*.ncb\n*.suo\n*.tlb\n*.tlh\n*.bak\n*.[Cc]ache\n*.ilk\n*.log\n*.lib\n*.sbr\n*.sdf\n*.pyc\n*.xml\nipch/\nobj/\n[Bb]in\n[Dd]ebug*/\n[Rr]elease*/\nAnkh.NoLoad\n\n#Tooling\n_ReSharper*/\n*.resharper\n[Tt]est[Rr]esult*\n\n#Project files\n[Bb]uild/\n\n#Subversion files\n.svn\n\n# Office Temp Files\n~$*\n</code></pre>\n\n<p>Once you have this, you need to add it to your git repository. You have to save the file where your repository is. </p>\n\n<p>Then in your git bash you have to write the following line:</p>\n\n<p><img src=\"http://i.stack.imgur.com/d7BBV.jpg\" alt=\"enter image description here\"></p>\n\n<p>If the respository already exists then you have to do the following:</p>\n\n<p>1)    git rm -r --cached .\n2)    git add .\n3)    git commit -m \".gitignore is now working\"</p>\n\n<p>If the step 2 dowsn\u00b4t work then you should write the hole route of the files that you would like to add.</p>\n\n<p>Hope it helps!</p>\n", "title": "How to create .gitignore file", "answer_id": 28563367, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<pre><code>1. Open git terminal\n2. go to git repository of the project\n3. create a .gitignore file by **touch .gitignore** command\n4. **git add .gitignore** command to add ignore file\n5. set ignore rules in the ignore file\n6. run the command **cat .gitignore**\n</code></pre>\n\n<p>By running the command in step 3 you will get the .gitignore file in the project directory.\nThanks.</p>\n", "title": "How to create .gitignore file", "answer_id": 28627476, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<h1><strong>Few ways to create .gitignore using cmd:</strong></h1>\n\n<ul>\n<li><p><strong>With <code>copy con</code> command:</strong></p>\n\n<ol>\n<li>open <strong>cmd</strong> and say <code>cd</code> to your git repository</li>\n<li>say <code>copy con .gitignore</code> and press <strong>Ctrl+Z</strong>. </li>\n</ol></li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/O4LUj.jpg\" alt=\"enter image description here\"> \n<br> <br></p>\n\n<ul>\n<li><p><strong>With <code>start notepad .gitignore</code> command:</strong></p>\n\n<ol>\n<li>open <strong>cmd</strong> and say <code>cd</code> to your git repository</li>\n<li>say <code>start notepad .gitignore</code> and press <strong>Yes</strong> button in opened notepad dialog box.</li>\n</ol></li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/Cv5vv.jpg\" alt=\"enter image description here\">\n<br> <br></p>\n\n<ul>\n<li><p><strong>With <code>edit .gitignore</code> command (Windows x86 only):</strong></p>\n\n<ol>\n<li>open <strong>cmd</strong> and say <code>cd</code> to your git repository</li>\n<li>say <code>edit .gitignore</code> and close opened edit editor.</li>\n</ol></li>\n</ul>\n", "title": "How to create .gitignore file", "answer_id": 29923011, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>You can type <code>new-item .gitignore</code> in Windows Powershell.</p>\n", "title": "How to create .gitignore file", "answer_id": 32680847, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>Without using command line</p>\n\n<ol>\n<li>Open texteditor and add your rules.</li>\n<li>Click File->Save As</li>\n<li>Save it as \".gitignore\" (include the quotations)</li>\n</ol>\n", "title": "How to create .gitignore file", "answer_id": 34237832, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<pre><code>To force Finder to display hidden files and folders via Terminal:\n\n    Open Terminal\n    For OS X 10.9 Mavericks, run this command (lower-case finder):\n    defaults write com.apple.finder AppleShowAllFiles TRUE\n    For OS X 10.8 Mountain Lion, 10.7, or 10.6, run this command (upper-case Finder):\n    defaults write com.apple.Finder AppleShowAllFiles true\n    notice the setting for true\n    Then run this command: killall Finder\n    Then exit Terminal\n    To revert back to Finder\u2019s default setting (hide hidden files and folders), \nrun the opposite command but with the false setting.\n</code></pre>\n\n<p>Then run killall Finder and exit Terminal.</p>\n", "title": "How to create .gitignore file", "answer_id": 34995806, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>In mac -\nyou can just create a new text file.\nadd content using \n<a href=\"https://www.gitignore.io/\" rel=\"nofollow\">https://www.gitignore.io/</a></p>\n\n<p>save the file with file format as - Rich Text document with attachments.\nchange file name to .gitingore\nand select <code>use\".\"</code> when a pop up comes as in the attached image.</p>\n\n<p>NOTE : since it is a hidden file so you wont be able to see it in the directory. but it will be created.</p>\n\n<p><a href=\"http://i.stack.imgur.com/dLSiC.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/dLSiC.png\" alt=\"see image\"></a></p>\n", "title": "How to create .gitignore file", "answer_id": 37065206, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>Using Git Bash console.</p>\n\n<p>-Navigate to your project\n-Type \"touch .gitignore\"</p>\n\n<p>the .gitignore file will be created for you.</p>\n\n<p><a href=\"http://i.stack.imgur.com/JJp4x.jpg\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/JJp4x.jpg\" alt=\"enter image description here\"></a></p>\n", "title": "How to create .gitignore file", "answer_id": 37265375, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>On Windows you can use cmd\n<code>echo \"\" &gt;.gitignore</code></p>\n\n<p>Or use Git Bash cmd\n<code>touch .gitignore</code>,\nthis useful for Linux and Mac System</p>\n", "title": "How to create .gitignore file", "answer_id": 37265526, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}, {"body": "<p>I have another idea  <br/>\nLets use the echo command,  <br/> <br/>\n<code>echo sometxt &gt; .gitignore</code> <br/> <br/>\nthis will create the .gitignore file with some data \"sometxt\" <br/> you can now manually change data from the file using text editor</p>\n", "title": "How to create .gitignore file", "answer_id": 39092658, "question_id": 10744305, "tags": ["git", "xcode4.3", "gitignore"]}], "link": "http://stackoverflow.com/questions/10744305/how-to-create-gitignore-file", "question_id": 10744305}, {"body": "<p>Okay, this might just be a silly question, though I'm sure there are plenty of other people asking the same question from time to time. Me, I just want to make 100% sure about it either way. With jQuery we all know the wonderful </p>\n\n<pre><code>$('document').ready(function(){});\n</code></pre>\n\n<p>However, let's say I want to run a function that is written in standard JavaScript with no library backing it, and that I want to launch a function as soon as the page is ready to handle it. What's the proper way to approach this?</p>\n\n<p>I know I can do:</p>\n\n<pre><code>window.onload=\"myFunction()\";\n</code></pre>\n\n<p>...or I can use the <code>body</code> tag:</p>\n\n<pre><code>&lt;body onload=\"myFunction()\"&gt;\n</code></pre>\n\n<p>...or I can even try at the bottom of the page after everything but the end <code>body</code> or <code>html</code> tag like:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n   myFunction();\n&lt;/script&gt;\n</code></pre>\n\n<p>What is a cross-browser(old/new)-compliant method of issuing one or more functions in a manner like jQuery's <code>$.ready()</code>?</p>\n", "title": "pure JavaScript equivalent to jQuery&#39;s $.ready() how to call a function when the page/dom is ready for it", "tags": ["javascript", "jquery", "html"], "answers": [{"body": "<p><code>document.ondomcontentready=function(){}</code> should do the trick, but it doesn't have full browser compatibility.</p>\n\n<p>Seems like you should just use jQuery min</p>\n", "title": "pure JavaScript equivalent to jQuery&#39;s $.ready() how to call a function when the page/dom is ready for it", "answer_id": 9899422, "question_id": 9899372, "tags": ["javascript", "jquery", "html"]}, {"body": "<p>Your method:</p>\n\n<pre><code>&lt;script&gt;\n   myFunction()\n&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>is the one of the reliable way to support old and new browsers.</p>\n", "title": "pure JavaScript equivalent to jQuery&#39;s $.ready() how to call a function when the page/dom is ready for it", "answer_id": 9899700, "question_id": 9899372, "tags": ["javascript", "jquery", "html"]}, {"body": "<p>The simplest thing to do in the absence of a framework that does all the cross-browser compatibility for you is to just put a call to your code at the end of the body.  This is faster to execute than an <code>onload</code> handler because this waits only for the DOM to be ready, not for all images to load.  And, this works in every browser.</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;/head&gt;\n&lt;body&gt;\nYour HTML here\n\n&lt;script&gt;\n// self executing function here\n(function() {\n   // your page initialization code here\n   // the DOM will be available here\n\n})();\n&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>If you really don't want to do it this way and you need cross browser compatibility and you don't want to wait for <code>window.onload</code>, then you probably should go look at how a framework like jQuery implements it's <code>$(document).ready()</code> method.  It's fairly involved depending upon the capabilities of the browser.</p>\n\n<p>To give you a little idea what jQuery does (which will work wherever the script tag is placed).</p>\n\n<p>If supported, it tries the standard:</p>\n\n<pre><code>document.addEventListener('DOMContentLoaded', fn, false);\n</code></pre>\n\n<p>with a fallback to:</p>\n\n<pre><code>window.addEventListener('load', fn, false )\n</code></pre>\n\n<p>or for older versions of IE, it uses:</p>\n\n<pre><code>document.attachEvent(\"onreadystatechange\", fn);\n</code></pre>\n\n<p>with a fallback to:</p>\n\n<pre><code>window.attachEvent(\"onload\", fn);\n</code></pre>\n\n<p>And, there are some work-arounds in the IE code path that I don't quite follow, but it looks like it has something to do with frames.</p>\n\n<hr>\n\n<p>Here is a full substitute for jQuery's <code>.ready()</code> written in plain javascript:</p>\n\n<pre><code>(function(funcName, baseObj) {\n    // The public function name defaults to window.docReady\n    // but you can pass in your own object and own function name and those will be used\n    // if you want to put them in a different namespace\n    funcName = funcName || \"docReady\";\n    baseObj = baseObj || window;\n    var readyList = [];\n    var readyFired = false;\n    var readyEventHandlersInstalled = false;\n\n    // call this when the document is ready\n    // this function protects itself against being called more than once\n    function ready() {\n        if (!readyFired) {\n            // this must be set to true before we start calling callbacks\n            readyFired = true;\n            for (var i = 0; i &lt; readyList.length; i++) {\n                // if a callback here happens to add new ready handlers,\n                // the docReady() function will see that it already fired\n                // and will schedule the callback to run right after\n                // this event loop finishes so all handlers will still execute\n                // in order and no new ones will be added to the readyList\n                // while we are processing the list\n                readyList[i].fn.call(window, readyList[i].ctx);\n            }\n            // allow any closures held by these functions to free\n            readyList = [];\n        }\n    }\n\n    function readyStateChange() {\n        if ( document.readyState === \"complete\" ) {\n            ready();\n        }\n    }\n\n    // This is the one public interface\n    // docReady(fn, context);\n    // the context argument is optional - if present, it will be passed\n    // as an argument to the callback\n    baseObj[funcName] = function(callback, context) {\n        // if ready has already fired, then just schedule the callback\n        // to fire asynchronously, but right away\n        if (readyFired) {\n            setTimeout(function() {callback(context);}, 1);\n            return;\n        } else {\n            // add the function and context to the list\n            readyList.push({fn: callback, ctx: context});\n        }\n        // if document already ready to go, schedule the ready function to run\n        if (document.readyState === \"complete\") {\n            setTimeout(ready, 1);\n        } else if (!readyEventHandlersInstalled) {\n            // otherwise if we don't have event handlers installed, install them\n            if (document.addEventListener) {\n                // first choice is DOMContentLoaded event\n                document.addEventListener(\"DOMContentLoaded\", ready, false);\n                // backup is window load event\n                window.addEventListener(\"load\", ready, false);\n            } else {\n                // must be IE\n                document.attachEvent(\"onreadystatechange\", readyStateChange);\n                window.attachEvent(\"onload\", ready);\n            }\n            readyEventHandlersInstalled = true;\n        }\n    }\n})(\"docReady\", window);\n</code></pre>\n\n<p>The latest version of the code is shared publicly on GitHub at <a href=\"https://github.com/jfriend00/docReady\">https://github.com/jfriend00/docReady</a></p>\n\n<p>Usage:</p>\n\n<pre><code>// pass a function reference\ndocReady(fn);\n\n// use an anonymous function\ndocReady(function() {\n    // code here\n});\n\n// pass a function reference and a context\n// the context will be passed to the function as the first argument\ndocReady(fn, context);\n\n// use an anonymous function with a context\ndocReady(function(context) {\n    // code here that can use the context argument that was passed to docReady\n}, ctx);\n</code></pre>\n\n<hr>\n\n<p>This has been tested in:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>IE6 and up\nFirefox 3.6 and up\nChrome 14 and up\nSafari 5.1 and up\nOpera 11.6 and up\nMultiple iOS devices\nMultiple Android devices\n</code></pre>\n\n<p>Working implementation and test bed: <a href=\"http://jsfiddle.net/jfriend00/YfD3C/\">http://jsfiddle.net/jfriend00/YfD3C/</a></p>\n\n<hr>\n\n<p>Here's a summary of how it works:</p>\n\n<ol>\n<li>Create an IIFE (immediately invoked function expression) to we can have non-public state variables.</li>\n<li>Declare a public function <code>docReady(fn, context)</code></li>\n<li>When <code>docReady(fn, context)</code> is called, check if the ready handler has already fired.  If so, just schedule the newly added callback to fire right after this thread of JS finishes with <code>setTimeout(fn, 1)</code>.</li>\n<li>If the ready handler has not already fired, then add this new callback to the list of callbacks to be called later.</li>\n<li>Check if the document is already ready.  If so, execute all ready handlers.</li>\n<li>If we haven't installed event listeners yet to know when the document becomes ready, then install them now.</li>\n<li>If <code>document.addEventListener</code> exists, then install event handlers using <code>.addEventListener()</code> for both <code>\"DOMContentLoaded\"</code> and <code>\"load\"</code> events.  The \"load\" is a backup event for safety and should not be needed.</li>\n<li>If <code>document.addEventListener</code> doesn't exist, then install event handlers using <code>.attachEvent()</code> for <code>\"onreadystatechange\"</code> and <code>\"onload\"</code> events.</li>\n<li>In the <code>onreadystatechange</code> event, check to see if the <code>document.readyState === \"complete\"</code> and if so, call a function to fire all the ready handlers.</li>\n<li>In all the other event handlers, call a function to fire all the ready handlers.</li>\n<li>In the function to call all the ready handlers, check a state variable to see if we've already fired.  If we have, do nothing.  If we haven't yet been called, then loop through the array of ready functions and call each one in the order they were added.  Set a flag to indicate these have all been called so they are never executed more than once.</li>\n<li>Clear the function array so any closures they might be using can be freed.</li>\n</ol>\n\n<p>Handlers registered with <code>docReady()</code> are guaranteed to be fired in the order they were registered.</p>\n\n<p>If you call <code>docReady(fn)</code> after the document is already ready, the callback will be scheduled to execute as soon as the current thread of execution completes using <code>setTimeout(fn, 1)</code>.  This allows the calling code to always assume they are async callbacks that will be called later, even if later is as soon as the current thread of JS finishes and it preserves calling order.</p>\n", "title": "pure JavaScript equivalent to jQuery&#39;s $.ready() how to call a function when the page/dom is ready for it", "answer_id": 9899701, "question_id": 9899372, "tags": ["javascript", "jquery", "html"]}, {"body": "<p>Tested in IE9, and latest Firefox and Chrome and also supported in IE8.</p>\n\n<pre><code>document.onreadystatechange = function () {\n  var state = document.readyState\n  if (state == 'interactive') {\n      init()\n  } else if (state == 'complete') {\n      initOnCompleteLoad()\n  }\n}\u200b\n</code></pre>\n\n<p>Example: <a href=\"http://jsfiddle.net/electricvisions/Jacck/\">http://jsfiddle.net/electricvisions/Jacck/</a></p>\n\n<p><strong>UPDATE - reusable version</strong></p>\n\n<p>I have just developed the following. It's a rather simplistic equivalent to jQuery or Dom ready without backwards compatibility. It probably needs further refinement. Tested in latest versions of Chrome, Firefox and IE (10/11) and should work in older browsers as commented on. I'll update if I find any issues.</p>\n\n<pre><code>window.readyHandlers = [];\nwindow.ready = function ready(handler) {\n  window.readyHandlers.push(handler);\n  handleState();\n};\n\nwindow.handleState = function handleState () {\n  if (['interactive', 'complete'].indexOf(document.readyState) &gt; -1) {\n    while(window.readyHandlers.length &gt; 0) {\n      (window.readyHandlers.shift())();\n    }\n  }\n};\n\ndocument.onreadystatechange = window.handleState;\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>ready(function () {\n  // your code here\n});\n</code></pre>\n\n<p>It's written to handle async loading of JS but you might want to sync load this script first unless you're minifying. I've found it useful in development.</p>\n\n<p>Modern browsers also support async loading of scripts which further enhances the experience. Support for async means multiple scripts can be downloaded simultaneously all while still rendering the page. Just watch out when depending on other scripts loaded asynchronously or use a minifier or something like browserify to handle dependencies. </p>\n", "title": "pure JavaScript equivalent to jQuery&#39;s $.ready() how to call a function when the page/dom is ready for it", "answer_id": 13456810, "question_id": 9899372, "tags": ["javascript", "jquery", "html"]}, {"body": "<p>I would like to mention some of the possible ways here together with a <strong>pure javascript trick which works across all browsers</strong>:</p>\n\n<pre><code>// with jQuery \n$(document).ready(function(){ /* ... */ });\n\n// shorter jQuery version \n$(function(){ /* ... */ });\n\n// without jQuery (doesn't work in older IEs)\ndocument.addEventListener('DOMContentLoaded', function(){ \n    // your code goes here\n}, false);\n\n// and here's the trick (works everywhere):\nr(function(){\n    alert('DOM Ready!');\n});\nfunction r(f){/in/.test(document.readyState)?setTimeout('r('+f+')',9):f()}\n</code></pre>\n\n<p>The trick here, as explained by the <a href=\"http://www.dustindiaz.com/smallest-domready-ever\">original author</a>, is that we are checking the <strong>document.readyState</strong> property. If it contains the string <code>in</code> (as in <code>uninitialized</code> and <code>loading</code>, the first two <a href=\"http://www.w3schools.com/jsref/prop_doc_readystate.asp\">DOM ready states</a> out of 5) we set a timeout and check again. Otherwise, we execute the passed function.</p>\n\n<p>And here's the <a href=\"http://jsfiddle.net/ramswaroop/br21uzk7/\">jsFiddle</a> for the trick which <strong>works across all browsers.</strong> </p>\n\n<p>Thanks to <a href=\"http://tutorialzine.com/\">Tutorialzine</a> for including this in their book.</p>\n", "title": "pure JavaScript equivalent to jQuery&#39;s $.ready() how to call a function when the page/dom is ready for it", "answer_id": 30319853, "question_id": 9899372, "tags": ["javascript", "jquery", "html"]}, {"body": "<p>The good folks at HubSpot have a resource where you can find pure Javascript methodologies for achieving a lot of jQuery goodness - including <code>ready</code></p>\n\n<p><a href=\"http://youmightnotneedjquery.com/#ready\">http://youmightnotneedjquery.com/#ready</a></p>\n\n<pre><code>function ready(fn) {\n  if (document.readyState != 'loading'){\n    fn();\n  } else if (document.addEventListener) {\n    document.addEventListener('DOMContentLoaded', fn);\n  } else {\n    document.attachEvent('onreadystatechange', function() {\n      if (document.readyState != 'loading')\n        fn();\n    });\n  }\n}\n</code></pre>\n", "title": "pure JavaScript equivalent to jQuery&#39;s $.ready() how to call a function when the page/dom is ready for it", "answer_id": 30757781, "question_id": 9899372, "tags": ["javascript", "jquery", "html"]}, {"body": "<p>If you are doing <strong>VANILLA</strong> plain <strong>Javascript</strong> without jQuery, then you must use</p>\n\n<pre><code>document.addEventListener(\"DOMContentLoaded\", function(event) { \n    //your code to run since DOM is loaded and ready\n});\n</code></pre>\n\n<p>Above is the equivalent of Jquery .ready</p>\n\n<pre><code>$( document ).ready(function() {\n    console.log( \"ready!\" );\n});\n</code></pre>\n\n<p>Which ALSO could be written SHORTHAND like </p>\n\n<pre><code>$(function() {\n    console.log( \"ready!\" );\n});\n</code></pre>\n\n<p>NOT TO BE CONFUSED with BELOW (which is not meant to be DOM ready)</p>\n\n<p>DO NOT use an IFFI like this that is self executing :\n     example:</p>\n\n<pre><code>(function() {\n   // your page initialization code here  - WRONG\n   // the DOM will be available here   - WRONG\n})();\n</code></pre>\n\n<p>This IFFI will NOT wait for your DOM to load.    ( I'm even talking about latest version of Chrome browser!</p>\n", "title": "pure JavaScript equivalent to jQuery&#39;s $.ready() how to call a function when the page/dom is ready for it", "answer_id": 31171096, "question_id": 9899372, "tags": ["javascript", "jquery", "html"]}, {"body": "<h2>Ready</h2>\n\n<pre><code>function ready(fn){var d=document;(d.readyState=='loading')?d.addEventListener('DOMContentLoaded',fn):fn();}\n</code></pre>\n\n<p>Use like</p>\n\n<pre><code>ready(function(){\n    //some code\n});\n</code></pre>\n\n<hr>\n\n<h2>For self invoking code</h2>\n\n<pre><code>(function(fn){var d=document;(d.readyState=='loading')?d.addEventListener('DOMContentLoaded',fn):fn();})(function(){\n\n    //Some Code here\n    //DOM is avaliable\n    //var h1s = document.querySelector(\"h1\");\n\n});\n</code></pre>\n\n<hr>\n\n<p>Support: IE9+</p>\n", "title": "pure JavaScript equivalent to jQuery&#39;s $.ready() how to call a function when the page/dom is ready for it", "answer_id": 33885930, "question_id": 9899372, "tags": ["javascript", "jquery", "html"]}, {"body": "<p>I'm not quite sure what your asking but maybe this can help,</p>\n\n<pre><code>window.onload = function(){\n    //code. . .\n\n    }\n</code></pre>\n\n<p>or: </p>\n\n<pre><code>window.onload = main;\n\nfunction main(){\n//code. . .\n\n    }\n</code></pre>\n", "title": "pure JavaScript equivalent to jQuery&#39;s $.ready() how to call a function when the page/dom is ready for it", "answer_id": 37904429, "question_id": 9899372, "tags": ["javascript", "jquery", "html"]}], "link": "http://stackoverflow.com/questions/9899372/pure-javascript-equivalent-to-jquerys-ready-how-to-call-a-function-when-the", "question_id": 9899372}, {"body": "<p>I'm having problems dealing with unicode characters from text fetched from different web pages (on different sites). I am using BeautifulSoup. </p>\n\n<p>The problem is that the error is not always reproducible; it sometimes works with some pages, and sometimes, it barfs by throwing a <code>UnicodeEncodeError</code>. I have tried just about everything I can think of, and yet I have not found anything that works consistently without throwing some kind of Unicode-related error.</p>\n\n<p>One of the sections of code that is causing problems is shown below:</p>\n\n<pre><code>agent_telno = agent.find('div', 'agent_contact_number')\nagent_telno = '' if agent_telno is None else agent_telno.contents[0]\np.agent_info = str(agent_contact + ' ' + agent_telno).strip()\n</code></pre>\n\n<p>Here is a stack trace produced on SOME strings when the snippet above is run:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"foobar.py\", line 792, in &lt;module&gt;\n    p.agent_info = str(agent_contact + ' ' + agent_telno).strip()\nUnicodeEncodeError: 'ascii' codec can't encode character u'\\xa0' in position 20: ordinal not in range(128)\n</code></pre>\n\n<p>I suspect that this is because some pages (or more specifically, pages from some of the sites) may be encoded, whilst others may be unencoded. All the sites are based in the UK and provide data meant for UK consumption - so there are no issues relating to internalization or dealing with text written in anything other than English.</p>\n\n<p>Does anyone have any ideas as to how to solve this so that I can CONSISTENTLY fix this problem?</p>\n", "title": "UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\\xa0&#39; in position 20: ordinal not in range(128)", "tags": ["python", "unicode", "beautifulsoup", "python-2.x", "python-unicode"], "answers": [{"body": "<p>You need to read the Python <a href=\"http://docs.python.org/howto/unicode.html\">Unicode HOWTO</a>. This error is the <a href=\"http://docs.python.org/howto/unicode.html#the-unicode-type\">very first example</a>.</p>\n\n<p>Basically, stop using <code>str</code> to convert from unicode to encoded text / bytes.</p>\n\n<p>Instead, properly use <a href=\"http://docs.python.org/library/stdtypes.html#str.encode\"><code>.encode()</code></a> to encode the string:</p>\n\n<pre><code>p.agent_info = u' '.join((agent_contact, agent_telno)).encode('utf-8').strip()\n</code></pre>\n\n<p>or work entirely in unicode.</p>\n", "title": "UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\\xa0&#39; in position 20: ordinal not in range(128)", "answer_id": 9942822, "question_id": 9942594, "tags": ["python", "unicode", "beautifulsoup", "python-2.x", "python-unicode"]}, {"body": "<p>This is a classic python unicode pain point! Consider the following:</p>\n\n<pre><code>a = u'bats\\u00E0'\nprint a\n =&gt; bats\u00e0\n</code></pre>\n\n<p>All good so far, but if we call str(a), let's see what happens:</p>\n\n<pre><code>str(a)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nUnicodeEncodeError: 'ascii' codec can't encode character u'\\xe0' in position 4: ordinal not in range(128)\n</code></pre>\n\n<p>Oh dip, that's not gonna do anyone any good! To fix the error, encode the bytes explicitly with .encode and tell python what codec to use:</p>\n\n<pre><code>a.encode('utf-8')\n =&gt; 'bats\\xc3\\xa0'\nprint a.encode('utf-8')\n =&gt; bats\u00e0\n</code></pre>\n\n<p>Voil\\u00E0!</p>\n\n<p>The issue is that when you call str(), python uses the default character encoding to try and encode the bytes you gave it, which in your case are sometimes representations of unicode characters. To fix the problem, you have to tell python how to deal with the string you give it by using .encode('whatever_unicode'). Most of the time, you should be fine using utf-8.</p>\n\n<p>For an excellent exposition on this topic, see Ned Batchelder's PyCon talk here: <a href=\"http://nedbatchelder.com/text/unipain.html\">http://nedbatchelder.com/text/unipain.html</a></p>\n", "title": "UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\\xa0&#39; in position 20: ordinal not in range(128)", "answer_id": 9942885, "question_id": 9942594, "tags": ["python", "unicode", "beautifulsoup", "python-2.x", "python-unicode"]}, {"body": "<p>I've actually found that in most of my cases, just stripping out those characters is much simpler:</p>\n\n<pre><code>s = mystring.decode('ascii', 'ignore')\n</code></pre>\n", "title": "UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\\xa0&#39; in position 20: ordinal not in range(128)", "answer_id": 19727991, "question_id": 9942594, "tags": ["python", "unicode", "beautifulsoup", "python-2.x", "python-unicode"]}, {"body": "<p>A subtle problem causing even print to fail is having your environment variables set wrong, eg. here LC_ALL set to \"C\".  In Debian they discourage setting it: <a href=\"https://wiki.debian.org/Locale\">Debian wiki on Locale</a></p>\n\n<pre><code>$ echo $LANG\nen_US.utf8\n$ echo $LC_ALL \nC\n$ python -c \"print (u'voil\\u00e0')\"\nTraceback (most recent call last):\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\nUnicodeEncodeError: 'ascii' codec can't encode character u'\\xe0' in position 4: ordinal not in range(128)\n$ export LC_ALL='en_US.utf8'\n$ python -c \"print (u'voil\\u00e0')\"\nvoil\u00e0\n$ unset LC_ALL\n$ python -c \"print (u'voil\\u00e0')\"\nvoil\u00e0\n</code></pre>\n", "title": "UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\\xa0&#39; in position 20: ordinal not in range(128)", "answer_id": 20334767, "question_id": 9942594, "tags": ["python", "unicode", "beautifulsoup", "python-2.x", "python-unicode"]}, {"body": "<p>I found elegant work around for me to remove symbols and continue to keep string as string in follows:</p>\n\n<pre><code>yourstring = yourstring.encode('ascii', 'ignore').decode('ascii')\n</code></pre>\n\n<p>It's important to notice that using the ignore option is <strong>dangerous</strong> because it silently drops any unicode(and internationalization) support from the code that uses it, as seen here:</p>\n\n<pre><code>&gt;&gt;&gt; 'City: Malm\u00f6'.encode('ascii', 'ignore').decode('ascii')\n'City: Malm'\n</code></pre>\n", "title": "UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\\xa0&#39; in position 20: ordinal not in range(128)", "answer_id": 25402141, "question_id": 9942594, "tags": ["python", "unicode", "beautifulsoup", "python-2.x", "python-unicode"]}, {"body": "<p>For me, what worked was:</p>\n\n<pre><code>BeautifulSoup(html_text,from_encoding=\"utf-8\")\n</code></pre>\n\n<p>Hope this helps someone.</p>\n", "title": "UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\\xa0&#39; in position 20: ordinal not in range(128)", "answer_id": 28152554, "question_id": 9942594, "tags": ["python", "unicode", "beautifulsoup", "python-2.x", "python-unicode"]}, {"body": "<p>The problem is that you're trying to print a unicode character, but your terminal doesn't support it.</p>\n\n<p>You can try installing <code>language-pack-en</code> package to fix that:</p>\n\n<pre><code>sudo apt-get install language-pack-en\n</code></pre>\n\n<p>which provides English translation data updates for all supported packages (including Python). Install different language package if necessary (depending which characters you're trying to print).</p>\n\n<p>On some Linux distributions it's required in order to make sure that the default English locales are set-up properly (so unicode characters can be handled by shell/terminal). Sometimes it's easier to install it, than configuring it manually.</p>\n\n<p>Then when writing the code, make sure you use the right encoding in your code.</p>\n\n<p>For example:</p>\n\n<pre><code>open(foo, encoding='utf-8')\n</code></pre>\n\n<p>If you've still a problem, double check your system configuration, such as:</p>\n\n<ul>\n<li><p>your locale file (<code>/etc/default/locale</code>), which should have e.g.</p>\n\n<pre><code>LANG=\"en_US.UTF-8\"\n</code></pre></li>\n<li><p>value of <code>LANG</code>/<a href=\"http://unix.stackexchange.com/a/3219/21471\"><code>LC_CTYPE</code></a> in shell</p></li>\n</ul>\n\n<hr>\n\n<p>Demonstrating the problem and solution in fresh VM.</p>\n\n<ol>\n<li><p>Initialize and provision the VM (e.g. using <a href=\"https://www.vagrantup.com/\" rel=\"nofollow\"><code>vagrant</code></a>):</p>\n\n<pre><code>vagrant init ubuntu/vivid64; vagrant up; vagrant ssh\n</code></pre></li>\n<li><p>Printing unicode characters (such as trade mark sign like <code>\u2122</code>): </p>\n\n<pre><code>$ python -c 'print(u\"\\u2122\");'\nTraceback (most recent call last):\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\nUnicodeEncodeError: 'ascii' codec can't encode character u'\\u2122' in position 0: ordinal not in range(128)\n</code></pre></li>\n<li><p>Now installing <code>language-pack-en</code>:</p>\n\n<pre><code>$ sudo apt-get -y install language-pack-en\nThe following extra packages will be installed:\n  language-pack-en-base\nGenerating locales...\n  en_GB.UTF-8... /usr/sbin/locale-gen: done\nGeneration complete.\n</code></pre></li>\n<li><p>Now problem is solved:</p>\n\n<pre><code>$ python -c 'print(u\"\\u2122\");'\n\u2122\n</code></pre></li>\n</ol>\n", "title": "UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\\xa0&#39; in position 20: ordinal not in range(128)", "answer_id": 31987791, "question_id": 9942594, "tags": ["python", "unicode", "beautifulsoup", "python-2.x", "python-unicode"]}, {"body": "<p>Simple helper functions found <a href=\"http://code.activestate.com/recipes/466341-guaranteed-conversion-to-unicode-or-byte-string/\" rel=\"nofollow\">here</a>.</p>\n\n<pre><code>def safe_unicode(obj, *args):\n    \"\"\" return the unicode representation of obj \"\"\"\n    try:\n        return unicode(obj, *args)\n    except UnicodeDecodeError:\n        # obj is byte string\n        ascii_text = str(obj).encode('string_escape')\n        return unicode(ascii_text)\n\ndef safe_str(obj):\n    \"\"\" return the byte string representation of obj \"\"\"\n    try:\n        return str(obj)\n    except UnicodeEncodeError:\n        # obj is unicode\n        return unicode(obj).encode('unicode_escape')\n</code></pre>\n", "title": "UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\\xa0&#39; in position 20: ordinal not in range(128)", "answer_id": 34543139, "question_id": 9942594, "tags": ["python", "unicode", "beautifulsoup", "python-2.x", "python-unicode"]}, {"body": "<p>I just had this problem, and Google led me here, so just to add to the general solutions here, this is what worked for me:</p>\n\n<pre><code># 'value' contains the problematic data\nunic = u''\nunic += value\nvalue = unic\n</code></pre>\n\n<p>I had this idea after reading <a href=\"http://nedbatchelder.com/text/unipain.html\" rel=\"nofollow\">Ned's presentation</a>.</p>\n\n<p>I don't claim to fully understand why this works, though. So if anyone can edit this answer or put in a comment to explain, I'll appreciate it.</p>\n", "title": "UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\\xa0&#39; in position 20: ordinal not in range(128)", "answer_id": 35953321, "question_id": 9942594, "tags": ["python", "unicode", "beautifulsoup", "python-2.x", "python-unicode"]}, {"body": "<p>Add line below at the beginning of your script ( or as second line):</p>\n\n<pre><code># -*- coding: utf-8 -*-\n</code></pre>\n\n<p>That's definition of python source code encoding. More info in <a href=\"https://www.python.org/dev/peps/pep-0263/\" rel=\"nofollow\">PEP 263</a>.</p>\n", "title": "UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\\xa0&#39; in position 20: ordinal not in range(128)", "answer_id": 38826645, "question_id": 9942594, "tags": ["python", "unicode", "beautifulsoup", "python-2.x", "python-unicode"]}, {"body": "<p>well i tried everything but it did not help, after googling around i figured the following and it helped.\npython 2.7 is in use.</p>\n\n<pre><code># encoding=utf8\nimport sys\nreload(sys)\nsys.setdefaultencoding('utf8')\n</code></pre>\n", "title": "UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\\xa0&#39; in position 20: ordinal not in range(128)", "answer_id": 39293287, "question_id": 9942594, "tags": ["python", "unicode", "beautifulsoup", "python-2.x", "python-unicode"]}], "link": "http://stackoverflow.com/questions/9942594/unicodeencodeerror-ascii-codec-cant-encode-character-u-xa0-in-position-20", "question_id": 9942594}, {"body": "<p>In my office, the mere mention of the word Xerces is enough to incite murderous rage from developers. A cursory glance at the other Xerces questions on SO seem to indicate that almost all Maven users are \"touched\" by this problem at some point.  Unfortunately, understanding the problem requires a bit of knowledge about the history of Xerces...</p>\n\n<h1>History</h1>\n\n<ul>\n<li><p>Xerces is the most widely used XML parser in the Java ecosystem.  Almost every library or framework written in Java uses Xerces in some capacity (transitively, if not directly).</p></li>\n<li><p>The Xerces jars included in the <a href=\"http://xerces.apache.org/mirrors.cgi#binary\">official binaries</a> are, to this day, not versioned.  For example, the Xerces 2.11.0 implementation jar is named <code>xercesImpl.jar</code> and not <code>xercesImpl-2.11.0.jar</code>.</p></li>\n<li><p>The Xerces team <a href=\"https://issues.apache.org/jira/browse/XERCESJ-1454?focusedCommentId=12881865&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#comment-12881865\">does not use Maven</a>, which means they do not\nupload an official release to <a href=\"http://search.maven.org/\">Maven Central</a>.</p></li>\n<li><p>Xerces used to be <a href=\"http://xerces.apache.org/xerces2-j/faq-general.html#faq-3\">released as a single jar</a> (<code>xerces.jar</code>), but was split into two jars, one containing the API (<code>xml-apis.jar</code>) and one containing the implementations of those APIs (<code>xercesImpl.jar</code>).  Many older Maven POMs still declare a dependency on <code>xerces.jar</code>.  At some point in the past, Xerces was also released as <code>xmlParserAPIs.jar</code>, which some older POMs also depend on.</p></li>\n<li><p>The versions assigned to the xml-apis and xercesImpl jars by those who deploy their jars to Maven repositories are often different.  For example, xml-apis might be given version 1.3.03 and xercesImpl might be given version 2.8.0, even though both are from Xerces 2.8.0.  This is because people often tag the xml-apis jar with the version of the specifications that it implements.  There is a very nice, but incomplete breakdown of this <a href=\"http://swordsystems.com/2011/06/29/xerces-and-xml-api-dependency-hell/\">here</a>.</p></li>\n<li><p>To complicate matters, Xerces is the XML parser used in the reference implementation of the Java API for XML Processing (JAXP), included in the JRE. The implementation classes are repackaged under the <code>com.sun.*</code> namespace, which makes it dangerous to access them directly, as they may not be available in some JREs.  However, not all of the Xerces functionality is exposed via the <code>java.*</code> and <code>javax.*</code> APIs; for example, there is no API that exposes Xerces serialization. </p></li>\n<li><p>Adding to the confusing mess, almost all servlet containers (JBoss, Jetty, Glassfish, Tomcat, etc.), ship with Xerces in one or more of their <code>/lib</code> folders.</p></li>\n</ul>\n\n<h1>Problems</h1>\n\n<h3>Conflict Resolution</h3>\n\n<p>For some -- or perhaps all -- of the reasons above, many\norganizations publish and consume custom builds of Xerces in their\nPOMs.  This is not really a problem if you have a small application and are only using Maven Central, but it quickly becomes an issue for enterprise software where Artifactory or Nexus is proxying multiple repositories (JBoss, Hibernate, etc.):\n<img src=\"http://i.stack.imgur.com/Fe9Xa.png\" alt=\"xml-apis proxied by Artifactory\"> </p>\n\n<p>For example, organization A might publish xml-apis as:  </p>\n\n<p><code>&lt;groupId&gt;org.apache.xerces&lt;/groupId&gt;</code><br/>\n<code>&lt;artifactId&gt;xml-apis&lt;/artifactId&gt;</code><br/>\n<code>&lt;version&gt;2.9.1&lt;/version&gt;</code></p>\n\n<p>Meanwhile, organization B might publish the same jar as:</p>\n\n<p><code>&lt;groupId&gt;xml-apis&lt;/groupId&gt;</code><br/>\n<code>&lt;artifactId&gt;xml-apis&lt;/artifactId&gt;</code><br/>\n<code>&lt;version&gt;1.3.04&lt;/version&gt;</code></p>\n\n<p>Although B's jar is a lower version than A's jar, Maven does not know\nthat they are the same artifact because they have different\n<code>groupId</code>s.  Thus, it cannot perform conflict resolution and both\njars will be included as resolved dependencies:</p>\n\n<p><img src=\"http://i.stack.imgur.com/4X1ts.png\" alt=\"resolved dependencies with multiple xml-apis\"></p>\n\n<h3>Classloader Hell</h3>\n\n<p>As mentioned above, the JRE ships with Xerces in the JAXP RI.  While it would be nice to mark all Xerces Maven dependencies as <code>&lt;exclusion&gt;</code>s or as <code>&lt;provided&gt;</code>, the third-party code you depend on may or may not work with the version provided in JAXP of the JDK you're using.  In addition, you have the Xerces jars shipped in your servlet container to contend with. This leaves you with a number of choices: Do you delete the servlet version and hope that your container runs on the JAXP version? Is it better to leave the servlet version, and hope that your application frameworks run on the servlet version? If one or two of the unresolved conflicts outlined above manage to slip into your product (easy to happen in a large organization), you quickly find yourself in classloader hell, wondering which version of Xerces the classloader is picking at runtime and whether or not it will pick the same jar in Windows and Linux (probably not).</p>\n\n<h1>Solutions?</h1>\n\n<p>We've tried marking all Xerces Maven dependencies as <code>&lt;provided&gt;</code> or as an <code>&lt;exclusion&gt;</code>, but this is difficult to enforce (especially with a large team) given that the artifacts have so many aliases (xml-apis, xerces, xercesImpl, xmlParserAPIs, etc.).  Additionally, our third party libs/frameworks may not run on the JAXP version or the version provided by a servlet container.</p>\n\n<p><strong>How can we best address this problem with Maven?  Do we have to exercise such fine-grained control over our dependencies, and then rely on tiered classloading?  Is there some way to globally exclude all Xerces dependencies, and force all of our frameworks/libs to use the JAXP version?</strong></p>\n\n<hr>\n\n<p><strong>UPDATE</strong>: Joshua Spiewak has uploaded a patched version of the Xerces build scripts to <a href=\"https://issues.apache.org/jira/browse/XERCESJ-1454\">XERCESJ-1454</a> that allows for upload to Maven Central.  Vote/watch/contribute to this issue and let's fix this problem once and for all.</p>\n", "title": "Dealing with &quot;Xerces hell&quot; in Java/Maven?", "tags": ["java", "maven", "classloader", "dependency-management", "xerces"], "answers": [{"body": "<p>I guess there is one question you need to answer:</p>\n\n<p><strong>Does there exist a xerces*.jar that everything in your application can live with?</strong></p>\n\n<p>If not you are basically screwed and would have to use something like OSGI, which allows you to have different versions of a library loaded at the same time. Be warned that it basically replaces jar version issues with classloader issues ...</p>\n\n<p>If there exists such a version you could make your repository return that version for all kinds of dependencies. It's an ugly hack and would end up with the same xerces implementation in your classpath multiple times but better than having multiple different versions of xerces.</p>\n\n<p>You could exclude every dependency to xerces and add one to the version you want to use.</p>\n\n<p>I wonder if you can write some kind of version resolution strategy as a plugin for maven. This would probably the nicest solution but if at all feasible needs some research and coding.</p>\n\n<p>For the version contained in your runtime environment, you'll have to make sure it either gets removed from the application classpath or the application jars get considered first for classloading before the lib folder of the server get considered.</p>\n\n<p>So to wrap it up: It's a mess and that won't change.</p>\n", "title": "Dealing with &quot;Xerces hell&quot; in Java/Maven?", "answer_id": 11677807, "question_id": 11677572, "tags": ["java", "maven", "classloader", "dependency-management", "xerces"]}, {"body": "<p>Frankly, pretty much everything that we've encountered works just fine w/ the JAXP version, so we <em>always</em> exclude xml-apis and xercesImpl.</p>\n", "title": "Dealing with &quot;Xerces hell&quot; in Java/Maven?", "answer_id": 11678874, "question_id": 11677572, "tags": ["java", "maven", "classloader", "dependency-management", "xerces"]}, {"body": "<p>You could use the maven enforcer plugin with the banned dependency rule.  This would allow you to ban all the aliases that you don't want and allow only the one you do want.  These rules will fail the maven build of your project when violated.  Furthermore, if this rule applies to all projects in an enterprise you could put the plugin configuration in a corporate parent pom.</p>\n\n<p>see:</p>\n\n<ul>\n<li><a href=\"http://maven.apache.org/plugins/maven-enforcer-plugin/\">http://maven.apache.org/plugins/maven-enforcer-plugin/</a></li>\n<li><a href=\"http://maven.apache.org/enforcer/enforcer-rules/bannedDependencies.html\">http://maven.apache.org/enforcer/enforcer-rules/bannedDependencies.html</a></li>\n</ul>\n", "title": "Dealing with &quot;Xerces hell&quot; in Java/Maven?", "answer_id": 11691896, "question_id": 11677572, "tags": ["java", "maven", "classloader", "dependency-management", "xerces"]}, {"body": "<p>There are 2.11.0 JARs <strong>(and source JARs!)</strong> of xerces in Maven Central since 20th February 2013! See <a href=\"http://search.maven.org/#artifactdetails|xerces|xercesImpl|2.11.0|jar\">Xerces in Maven Central</a>. I wonder why they haven't resolved <a href=\"https://issues.apache.org/jira/browse/XERCESJ-1454\">https://issues.apache.org/jira/browse/XERCESJ-1454</a>...</p>\n\n<p>I've used:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;xerces&lt;/groupId&gt;\n    &lt;artifactId&gt;xercesImpl&lt;/artifactId&gt;\n    &lt;version&gt;2.11.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>and all dependencies have resolved fine - even proper <code>xml-apis-1.4.01</code>!</p>\n\n<p>And what's most important (and what wasn't obvious in the past) - the JAR in Maven Central is <strong>the same JAR as in the official <code>Xerces-J-bin.2.11.0.zip</code> distribution</strong>.</p>\n\n<p>I couldn't however find <code>xml-schema-1.1-beta</code> version - it can't be a Maven <code>classifier</code>-ed version because of additional dependencies.</p>\n", "title": "Dealing with &quot;Xerces hell&quot; in Java/Maven?", "answer_id": 15265458, "question_id": 11677572, "tags": ["java", "maven", "classloader", "dependency-management", "xerces"]}, {"body": "<p>What would help, except for excluding, is modular dependencies.</p>\n\n<p>With one flat classloading (standalone app), or <a href=\"https://community.jboss.org/wiki/JBossClassLoaderHistory\" rel=\"nofollow\">semi-hierarchical (JBoss AS/EAP 5.x)</a> this was a problem.</p>\n\n<p>But with modular frameworks like <a href=\"http://en.wikipedia.org/wiki/OSGi\" rel=\"nofollow\">OSGi</a> and <a href=\"http://planet.jboss.org/view/post.seam?post=modularized_java_with_jboss_modules\" rel=\"nofollow\">JBoss Modules</a>, this is not so much pain anymore. The libraries may use whichever library they want, independently.</p>\n\n<p>Of course, it's still most recommendable to stick with just a single implementation and version, but if there's no other way (using extra features from more libs), then modularizing might save you.</p>\n\n<p>A good example of JBoss Modules in action is, naturally, <a href=\"https://docs.jboss.org/author/display/MODULES/Module+descriptors\" rel=\"nofollow\">JBoss AS 7</a> / <a href=\"http://www.jboss.org/products/eap\" rel=\"nofollow\">EAP 6</a> / <a href=\"http://www.wildfly.org/\" rel=\"nofollow\">WildFly 8</a>, for which it was primarily developed.</p>\n\n<p>Example module definition:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;module xmlns=\"urn:jboss:module:1.1\" name=\"org.jboss.msc\"&gt;\n    &lt;main-class name=\"org.jboss.msc.Version\"/&gt;\n    &lt;properties&gt;\n        &lt;property name=\"my.property\" value=\"foo\"/&gt;\n    &lt;/properties&gt;\n    &lt;resources&gt;\n        &lt;resource-root path=\"jboss-msc-1.0.1.GA.jar\"/&gt;\n    &lt;/resources&gt;\n    &lt;dependencies&gt;\n        &lt;module name=\"javax.api\"/&gt;\n        &lt;module name=\"org.jboss.logging\"/&gt;\n        &lt;module name=\"org.jboss.modules\"/&gt;\n        &lt;!-- Optional deps --&gt;\n        &lt;module name=\"javax.inject.api\" optional=\"true\"/&gt;\n        &lt;module name=\"org.jboss.threads\" optional=\"true\"/&gt;\n    &lt;/dependencies&gt;\n&lt;/module&gt;\n</code></pre>\n\n<p>In comparison with OSGi, JBoss Modules is simpler and faster. While missing certain features, it's sufficient for most projects which are (mostly) under control of one vendor, and allow stunning fast boot (due to paralelized dependencies resolving).</p>\n\n<p><em>Note that there's a <a href=\"http://www.slideshare.net/mfrancis/java-8-modules-jigsaw-and-osgi-neil-bartlett\" rel=\"nofollow\">modularization effort underway for Java 8</a>, but AFAIK that's primarily to modularize the JRE itself, not sure whether it will be applicable to apps.</em></p>\n", "title": "Dealing with &quot;Xerces hell&quot; in Java/Maven?", "answer_id": 17246926, "question_id": 11677572, "tags": ["java", "maven", "classloader", "dependency-management", "xerces"]}, {"body": "<p>I know this doesn't answer the question exactly, but for ppl coming in from google that happen to use Gradle for their dependency management:</p>\n\n<p>I managed to get rid of all xerces/Java8 issues with Gradle like this:</p>\n\n<pre><code>configurations {\n    all*.exclude group: 'xml-apis'\n    all*.exclude group: 'xerces'\n}\n</code></pre>\n", "title": "Dealing with &quot;Xerces hell&quot; in Java/Maven?", "answer_id": 29840656, "question_id": 11677572, "tags": ["java", "maven", "classloader", "dependency-management", "xerces"]}, {"body": "<p>There is another option that hasn't been explored here: declaring Xerces dependencies in Maven as <em>optional</em>:</p>\n\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;xerces&lt;/groupId&gt;\n   &lt;artifactId&gt;xercesImpl&lt;/artifactId&gt;\n   &lt;version&gt;...&lt;/version&gt;\n   &lt;optional&gt;true&lt;/optional&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Basically what this does is to force all dependents to declare <em>their</em> version of Xerces or their project won't compile. If they want to override this dependency, they are welcome to do so, but then they will own the potential problem.</p>\n\n<p>This creates a strong incentive for downstream projects to:</p>\n\n<ul>\n<li>Make an active decision. Do they go with the same version of Xerces or use something else?</li>\n<li>Actually test their parsing (e.g. through unit testing) and classloading as well as not to clutter up their classpath. </li>\n</ul>\n\n<p>Not all developers keep track of newly introduced dependencies (e.g. with <code>mvn dependency:tree</code>). This approach will immediately bring the matter to their attention.</p>\n\n<p>It works quite well at our organization. Before its introduction, we used to live in the same hell the OP is describing.</p>\n", "title": "Dealing with &quot;Xerces hell&quot; in Java/Maven?", "answer_id": 32904715, "question_id": 11677572, "tags": ["java", "maven", "classloader", "dependency-management", "xerces"]}, {"body": "<p>Every maven project should stop depending on xerces,  they probably don't really. XML APIs and an Impl has been part of Java since 1.4. There is no need to depend on xerces or XML APIs, its like saying you depend on Java or Swing.  This is implicit.</p>\n\n<p>If I was boss of a maven repo I'd write a script to recursively remove xerces dependencies and write a read me that says this repo requires Java 1.4.</p>\n\n<p>Anything that actually breaks because it references Xerces directly via org.apache imports needs a code fix to bring it up to Java 1.4 level (and has done since 2002) or solution at JVM level via endorsed libs, not in maven.</p>\n", "title": "Dealing with &quot;Xerces hell&quot; in Java/Maven?", "answer_id": 35223700, "question_id": 11677572, "tags": ["java", "maven", "classloader", "dependency-management", "xerces"]}, {"body": "<p>I debugging first to help identify your level of XML hell. In my opinion, the first step is to add </p>\n\n<pre><code>-Djavax.xml.parsers.SAXParserFactory=com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl\n-Djavax.xml.transform.TransformerFactory=com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl\n-Djavax.xml.parsers.DocumentBuilderFactory=com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl\n</code></pre>\n\n<p>to the command line. If that works, then start excluding libraries. If not, then add </p>\n\n<pre><code>-Djaxp.debug=1\n</code></pre>\n\n<p>to the command-line.</p>\n", "title": "Dealing with &quot;Xerces hell&quot; in Java/Maven?", "answer_id": 37814020, "question_id": 11677572, "tags": ["java", "maven", "classloader", "dependency-management", "xerces"]}], "link": "http://stackoverflow.com/questions/11677572/dealing-with-xerces-hell-in-java-maven", "question_id": 11677572}, {"body": "<p>Need to download on my desktop a file from server. (UBUNTU 10.04) I haven't web access to server, just ssh.</p>\n\n<p>If its help, my OS is Mac OS X and iTerm 2 as a terminal.</p>\n", "title": "How to download a file from server using SSH?", "tags": ["linux", "unix", "ssh"], "answers": [{"body": "<p>If the SSH server support SFTP subsystem (this is part of SSH, and <em>unrelated</em> to FTP), use sftp. If it don't, try scp.  </p>\n\n<p><a href=\"http://cyberduck.ch/\">CyberDuck</a> support all of them.</p>\n", "title": "How to download a file from server using SSH?", "answer_id": 9427577, "question_id": 9427553, "tags": ["linux", "unix", "ssh"]}, {"body": "<p>In your terminal, type:</p>\n\n<pre><code>scp your_username@remotehost.edu:foobar.txt /local/dir\n</code></pre>\n\n<p>replacing the username, host, remote filename, and local directory as appropriate.</p>\n\n<p>If you want to access EC2 (or other service that requires authenticating with a private key), use the <code>-i</code> option:</p>\n\n<pre><code>scp -i key_file.pem your_username@remotehost.edu:/remote/dir/foobar.txt /local/dir\n</code></pre>\n\n<p>From: <a href=\"http://www.hypexr.org/linux_scp_help.php\">http://www.hypexr.org/linux_scp_help.php</a></p>\n", "title": "How to download a file from server using SSH?", "answer_id": 9427585, "question_id": 9427553, "tags": ["linux", "unix", "ssh"]}, {"body": "<p>You can do this with the <code>scp</code> command. <code>scp</code> uses the SSH protocol to copy files across system by extending the syntax of <code>cp</code>.  </p>\n\n<p>Copy something from this system to some other system:  </p>\n\n<pre><code>scp /path/to/local/file username@hostname:/path/to/remote/file          \n</code></pre>\n\n<p>Copy something from some system to some other system:  </p>\n\n<pre><code>scp username1@hostname1:/path/to/file username2@hostname2:/path/to/other/file   \n</code></pre>\n\n<p>Copy something from another system to this system:  </p>\n\n<pre><code>scp username@hostname:/path/to/remote/file /path/to/local/file\n</code></pre>\n", "title": "How to download a file from server using SSH?", "answer_id": 9427762, "question_id": 9427553, "tags": ["linux", "unix", "ssh"]}, {"body": "<p>scp is certainly the way to go, but for completeness you can also do:</p>\n\n<pre><code>$ ssh host 'cat /path/on/remote' &gt; /path/on/local\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$ cat /path/on/local | ssh host 'cat &gt; /path/on/remote'\n</code></pre>\n\n<p>Note, this is UUOC, but <code>&lt; /path/on/local ssh host 'cat &gt; /path'</code> could cause unnecessary confusion.</p>\n\n<p>And to proxy between two hosts:</p>\n\n<pre><code>$ ssh host1 'cat /path/on/host1' | ssh host2 'cat &gt; /path/on/host2'\n</code></pre>\n", "title": "How to download a file from server using SSH?", "answer_id": 9432529, "question_id": 9427553, "tags": ["linux", "unix", "ssh"]}], "link": "http://stackoverflow.com/questions/9427553/how-to-download-a-file-from-server-using-ssh", "question_id": 9427553}, {"body": "<p>The new iPhone 5 display has a new aspect ratio and a new resolution (640 x 1136 pixels).</p>\n\n<p>What is required to develop new or transition already existing applications to the new screen size?</p>\n\n<p>What should we keep in mind to make applications \"universal\" for both the older displays and the new widescreen aspect ratio?</p>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "tags": ["ios", "iphone", "screen", "iphone-5"], "answers": [{"body": "<ol>\n<li>Download and install latest version of <a href=\"http://itunes.apple.com/us/app/xcode/id497799835?mt=12&amp;at=1l3vpwv&amp;ct=so\" rel=\"nofollow\">Xcode</a>.</li>\n<li>Set a Launch Screen File for your app (in the general tab of your target settings). This is how you get to use the full size of any screen, including iPad split view sizes in iOS 9.</li>\n<li>Test your app, and hopefully do nothing else, since everything should work magically if you had set auto resizing masks properly, or used Auto Layout.</li>\n<li>If you didn't, adjust your view layouts, preferably with Auto Layout.</li>\n<li>If there is something you have to do for the larger screens specifically, then it looks like you have to check height of <code>[[UIScreen mainScreen] bounds]</code> as there seems to be no specific API for that. As of iOS 8 there are also size classes that abstract screen sizes into regular or compact vertically and horizontally and are recommended way to adapt your UI.</li>\n</ol>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 12397309, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>The only really required thing to do is to add a launch image named \"Default-568h@2x.png\" to the app resources, and in general case (if you're lucky enough) the app will work correctly.  </p>\n\n<p>In case the app does not handle touch events, then make sure that the key window has the proper size. The workaround is to set the proper frame:</p>\n\n<pre><code>[window setFrame:[[UIScreen mainScreen] bounds]]\n</code></pre>\n\n<p>There are other issues not related to screen size when migrating to iOS 6. Read <a href=\"https://developer.apple.com/library/prerelease/ios/releasenotes/General/RN-iOSSDK-6_0/_index.html#//apple_ref/doc/uid/TP40012166\">iOS 6.0 Release Notes</a> for details.</p>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 12444372, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>Here you can find a nice tutorial (for MonoTouch, but you can use the information for Non-MonoTouch-projects, too):<br>\n<a href=\"http://redth.info/get-your-monotouch-apps-ready-for-iphone-5-ios-6-today/\">http://redth.info/get-your-monotouch-apps-ready-for-iphone-5-ios-6-today/</a></p>\n\n<ol>\n<li><p>Create a new image for your splash/default screen (<strong>640 x 1136 pixel</strong>) with the name \"<strong>Default-568h@2x.png</strong>\"  </p></li>\n<li><p>In the <strong>iOS Simulator</strong>, go to the Hardware -> Device menu, and select \"<strong>iPhone (Retina 4-inch)</strong>\"</p></li>\n<li><p>Create other images, e.g. background images</p></li>\n<li>Detect iPhone 5 to load your new images:</li>\n</ol>\n\n<hr>\n\n<pre><code>public static bool IsTall\n{\n    get {\n        return UIDevice.currentDevice.userInterfaceIdiom\n                    == UIUserInterfaceIdiomPhone\n                &amp;&amp; UIScreen.mainScreen.bounds.size.height\n                    * UIScreen.mainScreen.scale &gt;= 1136;\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>private static string tallMagic = \"-568h@2x\";\npublic static UIImage FromBundle16x9(string path)\n{\n    //adopt the -568h@2x naming convention\n    if(IsTall())\n    {\n        var imagePath = Path.GetDirectoryName(path.ToString());\n        var imageFile = Path.GetFileNameWithoutExtension(path.ToString());\n        var imageExt = Path.GetExtension(path.ToString());\n        imageFile = imageFile + tallMagic + imageExt;\n        return UIImage.FromFile(Path.Combine(imagePath,imageFile));\n    }\n    else\n    {\n        return UIImage.FromBundle(path.ToString());\n    }\n}\n</code></pre>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 12460805, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p><strong>If you have an app built for iPhone 4S or earlier, it'll run letterboxed on iPhone 5.</strong></p>\n\n<p>To adapt your app to the new taller screen, the first thing you do is to change the launch image to: Default-568h@2x.png. Its size should be 1136x640 (HxW). <em>Yep, having the default image in the new screen size is the key to let your app take the whole of new iPhone 5's screen</em>. </p>\n\n<p><em>(Note that the naming convention works only for the default image. Naming another image \"Image-568h@2x.png\" will not cause it to be loaded in place of \"Image@2x.png\". If you need to load different images for different screen sizes, you'll have to do it programmatically.)</em></p>\n\n<p>If you're very very lucky, that might be it... but in all likelihood, <strong>you'll have to take a few more steps.</strong></p>\n\n<ul>\n<li>Make sure, your Xibs/Views use auto-layout to resize themselves.</li>\n<li>Use springs and struts to resize views.</li>\n<li>If this is not good enough for your app, design your xib/storyboard\nfor one specific screen size and reposition programmatically for the\nother.</li>\n</ul>\n\n<p>In the extreme case (when none of the above suffices), design the two Xibs and load the appropriate one in the view controller. </p>\n\n<p>To detect screen size:</p>\n\n<pre><code>if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)\n{\n\u00a0\u00a0\u00a0\u00a0CGSize result = [[UIScreen mainScreen] bounds].size;\n\u00a0\u00a0\u00a0\u00a0if(result.height == 480)\n    {\n        // iPhone Classic\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0if(result.height == 568)\n    {\n        // iPhone 5\n\u00a0\u00a0\u00a0\u00a0}\n}\n</code></pre>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 12502356, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>You could add this code:</p>\n\n<pre><code>if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone){\n        if ([[UIScreen mainScreen] respondsToSelector: @selector(scale)]) {\n            CGSize result = [[UIScreen mainScreen] bounds].size;\n            CGFloat scale = [UIScreen mainScreen].scale;\n            result = CGSizeMake(result.width * scale, result.height * scale);\n\n            if(result.height == 960) {\n                NSLog(@\"iPhone 4 Resolution\");\n            }\n            if(result.height == 1136) {\n              NSLog(@\"iPhone 5 Resolution\");\n            }\n        }\n        else{\n            NSLog(@\"Standard Resolution\");\n        }\n    }\n</code></pre>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 12552908, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>Peter, you should really take a look at Canappi, it does all that for you, all you have to do is specify the layout as such:</p>\n\n<pre><code>button mySubmitButton 'Sumbit' (100,100,100,30 + 0,88,0,0) { ... }\n</code></pre>\n\n<p>From there Canappi will generate the correct objective-c code that detects the device the app is running on and will use:</p>\n\n<pre><code>(100,100,100,30) for iPhone4\n(100,**188**,100,30) for iPhone 5\n</code></pre>\n\n<p>Canappi works like Interface Builder and Story Board combined, except that it is in a textual form. If you already have XIB files, you can convert them so you don't have to recreate the entire UI from scratch.</p>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 12586255, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>Sometimes (for pre-storyboard apps), if the layout is going to be sufficiently different, it's worth specifying a different xib according to device (see <a href=\"http://stackoverflow.com/questions/8426518/how-to-find-iphone-ipod-device-model3g-3gs-4-4s-by-code\">this question</a> - you'll need to modify the code to deal with iPhone 5) in the viewController init, as no amount of twiddling with autoresizing masks will work if you need different graphics.</p>\n\n<pre><code>-(id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil\n\n    NSString *myNibName;\n    if ([MyDeviceInfoUtility isiPhone5]) myNibName = @\"MyNibIP5\";\n    else myNibName = @\"MyNib\";\n\n    if ((self = [super initWithNibName:myNibName bundle:nibBundleOrNil])) {\n\n\n...\n</code></pre>\n\n<p>This is useful for apps which are targeting older iOS versions.</p>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 12835819, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>I had added the new default launch image and (in checking out several other SE answers...) made sure my storyboards all auto-sized themselves and subviews but the retina 4 inch still letterboxed.</p>\n\n<p>Then I noticed that my info plist had a line item for \"Launch image\" set to \"Default.png\", which I thusly removed and magically letterboxing no longer appeared.  Hopefully that saves someone else the same craziness I endured.</p>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 13091119, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>To determine if your app can support iPhone 5 Retina use this:\n(This could be more robust to return the type of display, 4S Retina, etc., but as it is written below, it just returns if the iPhone supports iOS5 Retina as a YES or NO)</p>\n\n<p>In a common \".h\" file add:</p>\n\n<pre><code>BOOL IS_IPHONE5_RETINA(void);\n</code></pre>\n\n<p>In a common \".m\" file add:</p>\n\n<pre><code>BOOL IS_IPHONE5_RETINA(void) {\n    BOOL isiPhone5Retina = NO;\n    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {\n        if ([UIScreen mainScreen].scale == 2.0f) {\n            CGSize result = [[UIScreen mainScreen] bounds].size;\n            CGFloat scale = [UIScreen mainScreen].scale;\n            result = CGSizeMake(result.width * scale, result.height * scale);\n\n            if(result.height == 960){\n                //NSLog(@\"iPhone 4, 4s Retina Resolution\");\n            }\n            if(result.height == 1136){\n                //NSLog(@\"iPhone 5 Resolution\");\n                isiPhone5Retina = YES;\n            }\n        } else {\n            //NSLog(@\"iPhone Standard Resolution\");\n        }\n    }\n    return isiPhone5Retina;\n}\n</code></pre>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 13113405, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>I solve this problem <a href=\"https://github.com/mrdepth/tools/tree/master/Retina4\">here</a>. Just add ~568h@2x suffix to images and ~568h to xib's. No needs more runtime checks or code changes.</p>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 13579726, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>I never faced such an issue with any device as I've had one codebase for all, without any hardcoded values. What I do is to have the maximum sized image as resource instead of one for each device. For example, I would have one for retina display and show it as aspect fit so it will be views as is on every device. \nComing to deciding the frame of button, for instance, at run time. For this I use the % value of the patent view, example , if I want the width to be half of parent view take 50 % of parent and same applies for height and center. </p>\n\n<p>With this I don't even need the xibs.</p>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 13590651, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>It's easy for migrating iPhone5 and iPhone4 through XIBs.........</p>\n\n<pre><code>UIViewController *viewController3;\nif ([[UIScreen mainScreen] bounds].size.height == 568)\n{\n    UIViewController *viewController3 = [[[mainscreenview alloc] initWithNibName:@\"iphone5screen\" bundle:nil] autorelease];               \n}    \nelse\n{\n     UIViewController *viewController3 = [[[mainscreenview alloc] initWithNibName:@\"iphone4screen\" bundle:nil] autorelease];\n}\n</code></pre>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 13986266, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>In a <code>constants.h</code> file you can add these define statements:</p>\n\n<pre><code> #define IS_IPAD UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad \n #define IS_IPHONE UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone\n #define IS_WIDESCREEN (fabs((double)[[UIScreen mainScreen] bounds].size.height - (double)568) &lt; DBL_EPSILON) \n #define IS_IPHONE_5 (!IS_IPAD &amp;&amp; IS_WIDESCREEN)\n</code></pre>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 14578293, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>Checking <code>bounds</code> with <code>568</code> will fail in landscape mode. iPhone 5 launches only in portrait mode but if you want to support rotations then the iPhone 5 \"check\" will need to handle this scenario as well.</p>\n\n<p>Here's a macro which handles orientation state:</p>\n\n<pre><code>#define IS_IPHONE_5 (CGSizeEqualToSize([[UIScreen mainScreen] preferredMode].size, CGSizeMake(640, 1136)))\n</code></pre>\n\n<p>The use of the 'preferredMode' call is from another posting I read a few hours ago so I did not come up with this idea.</p>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 14681579, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>You can use the <code>Auto Layout</code> feature and create the design using iPhone 5 screen resolution and it will work for the both 4\" and 3.5\" devices, but in this case you should have a enough knowledge of layout manager.</p>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 14908924, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>Try the below method in a singleton class: </p>\n\n<pre><code>-(NSString *)typeOfDevice\n    {\n        if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)\n        {\n            CGSize result = [[UIScreen mainScreen] bounds].size;\n            if(result.height == 480)\n            {\n                return @\"Iphone\";\n            }\n            if(result.height == 568)\n            {\n                return @\"Iphone 5\";\n            }\n        }\n        else{\n            return @\"Ipad\";;\n        }\n\n\n        return @\"Iphone\";\n    }\n</code></pre>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 15492689, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>I guess, it is not going to work in all cases, but in my particular project it avoided me from duplication of NIB-files:</p>\n\n<p>Somewhere in <code>common.h</code> you can make these defines based off of screen height:</p>\n\n<pre><code>#define HEIGHT_IPHONE_5 568\n#define IS_IPHONE   ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)\n#define IS_IPHONE_5 ([[UIScreen mainScreen] bounds ].size.height == HEIGHT_IPHONE_5)\n</code></pre>\n\n<p>In your base controller:</p>\n\n<pre><code>- (void)viewDidLoad\n{\n    [super viewDidLoad];\n    if (IS_IPHONE_5) {\n        CGRect r = self.view.frame;\n        r.size.height = HEIGHT_IPHONE_5 - 20;\n        self.view.frame = r;\n    }\n    // now the view is stretched properly and not pushed to the bottom\n    // it is pushed to the top instead...\n\n    // other code goes here...\n}\n</code></pre>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 15631256, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>According to me the best way of dealing with such problems and avoiding couple of condition required for checking the the height of device, is using the relative frame for views or any UI element which you are adding to you view for example: if you are adding some UI element which you want should at the bottom of view or just above tab bar then you should take the y origin with respect to your view's height or with respect to tab bar (if present) and we have auto resizing property as well. I hope this will work for you</p>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 15787772, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>You can use this define to calculate if you are using the iPhone 5 based on screen size:</p>\n\n<pre><code>#define IS_IPHONE_5 ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) &lt; DBL_EPSILON )\n</code></pre>\n\n<p>then use a simple <code>if</code> statement :</p>\n\n<pre><code>    if (IS_IPHONE_5) {\n\n    // What ever changes\n    }\n</code></pre>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 16275958, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>You can manually check the screen size to determine which device you're on:</p>\n\n<pre><code>#define DEVICE_IS_IPHONE5 ([[UIScreen mainScreen] bounds].size.height == 568)\n\nfloat height = DEVICE_IS_IPHONE5?568:480;\nif (height == 568) {\n    // 4\"\n\n} else {\n\n    // 3\"\n\n}\n</code></pre>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 16914009, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>First show this image. In that image you show warning for Retina 4 support so click on this warning and click on add so your Retina 4 splash screen automatically add in your project.</p>\n\n<p><img src=\"http://i.stack.imgur.com/c7dez.png\" alt=\"Show image here\"></p>\n\n<p>and after you use this code :</p>\n\n<pre><code>if([[UIScreen mainScreen] bounds].size.height == 568)\n    {\n        // For iphone 5\n    }\n    else\n    {\n        // For iphone 4 or less\n    }\n</code></pre>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 17379022, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>This is a real universal code, you can create 3 different story board:</p>\n\n<p>Set your project Universal mode, and set your main story iPhone with the iPhone5 storyboard and the ipad main with iPad target storyboard, now add new storyboard target for iphone and modify the resolution for iphone 4s or less now implement your <strong>AppDelegate.m</strong></p>\n\n<p><strong>iPhone4/4s</strong> (is the same for 3/3Gs) one for <strong>iPhone5</strong> and make the project <strong>universal</strong>, with a new Storyboard target for iPad, now in to <strong>AppDelegate.m</strong> under the <code>didFinishLaunching</code> add this code:</p>\n\n<pre><code>    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone){\n        UIStoryboard *storyBoard;\n\n        CGSize result = [[UIScreen mainScreen] bounds].size;\n        CGFloat scale = [UIScreen mainScreen].scale;\n        result = CGSizeMake(result.width *scale, result.height *scale);\n\n//----------------HERE WE SETUP FOR IPHONE4/4s/iPod----------------------\n\n        if(result.height == 960){\n            storyBoard = [UIStoryboard storyboardWithName:@\"iPhone4_Storyboard\" bundle:nil];\n            UIViewController *initViewController = [storyBoard instantiateInitialViewController];\n            [self.window setRootViewController:initViewController];\n        }\n\n//----------------HERE WE SETUP FOR IPHONE3/3s/iPod----------------------\n\n        if(result.height == 480){\n            storyBoard = [UIStoryboard storyboardWithName:@\"iPhone4_Storyboard\" bundle:nil];\n            UIViewController *initViewController = [storyBoard instantiateInitialViewController];\n            [self.window setRootViewController:initViewController];\n        }\n    }\n\n        return YES;\n }\n</code></pre>\n\n<p><strong>So you have created a Universal app for iPhone 3/3Gs/4/4s/5 All gen of iPod, and All type of iPad</strong></p>\n\n<p>Remember to integrate all IMG with <code>myImage.png</code> and <code>myImage@2x.png</code></p>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 17379460, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>First of all create two xibs and attach all delegates,main class to the <code>xib</code> and then u can put in this condition mentioned below in your <code>appdelegate.m</code> file in  </p>\n\n<pre><code>- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions \n\n    if ([[UIScreen mainScreen] bounds].size.height == 568)\n        {\n\n        self.ViewController = [[ViewController alloc] initWithNibName:@\"ViewControlleriphone5\" bundle:nil];\n        }\n\n        else\n        {\n             self.ViewController = [[ViewController alloc] initWithNibName:@\"ViewControlleriphone4\" bundle:nil];\n\n        }\n</code></pre>\n\n<p>you can use it any where in the program depending upon your requirements even in your <code>ViewController</code> classes. What matters the most is that you have created two <code>xib</code> files separate for <code>iphone 4(320*480) and iphone 5(320*568)</code></p>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 18095219, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>Rather than using a set of conditionals you can resize your view automatically using the screen size. </p>\n\n<pre><code>int h = [[UIScreen mainScreen] bounds].size.height;\nint w = [[UIScreen mainScreen] bounds].size.width;\nself.imageView.frame = CGRectMake(20, 80, (h-200), (w-100));\n</code></pre>\n\n<p>In my case I want a view that fills the space between some input fields at the top and some buttons at the bottom, so fixed top left corner and variable bottom right based on screen size. My app fills the image view with the photo taken by the camera so I want all the space I can get.</p>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 18535048, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>If you need to convert an already existing app to universal, you need to select corresponding xib file->show Utilities-> Show Size inspector.</p>\n\n<p>In Size inspector you can see Autosizing, by using this tool you can convert to existing iOS App.</p>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 21362230, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>Using xCode 5, select \"Migrate to Asset Catalog\" on Project>General.</p>\n\n<p>Then use \"Show in finder\" to find your launch image, you can dummy-edit it to be 640x1136, then drag it into the asset catalog as shown in the image below.</p>\n\n<p><strong>Make sure that both iOS7 and iOS6  R4 section has an image that is 640x1136.</strong> Next time you launch the app, the black bars will disappear, and your app will use 4 inch screen</p>\n\n<p><img src=\"http://i.stack.imgur.com/Ii62l.png\" alt=\"enter image description here\"></p>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 23546634, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>I would suggest to use Autoresizing Mask in your applications according to your UI interface, it saves a lot of trouble and is better than making different UI for iPhone 4 and 5 screens.</p>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 24627536, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>Point worth notice - in new Xcode you have to add this image file Default-568h@2x.png to assets</p>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 26212550, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>There is a slight problem when testing on both iOS device and iOS Simulator. It appears that simulator (XCode 6.0.1) gives switched values for width and height in <code>[[UIScreen mainScreen] bounds].size</code> depending on a device orientation.</p>\n\n<p>So this might be a problem when determinating the right physical screen size. This code helps also to distinct all 2014. iPhone model generations:</p>\n\n<ul>\n<li>iPhone4s</li>\n<li>iPhone5 (and iPhone5s)</li>\n<li>iPhone6 (and iPhone6+)</li>\n</ul>\n\n<p>It can also be easily changed to make the distinction between e.g. iPhone6 from iPhone6+.</p>\n\n<pre><code>- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {\n\n    CGSize iOSDeviceScreenSize = [[UIScreen mainScreen] bounds].size;\n\n    if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPhone)\n    {\n        if (iOSDeviceScreenSize.width &gt; 568 || // for iOS devices\n            iOSDeviceScreenSize.height &gt; 568) // for iOS simulator\n        {   // iPhone 6 and iPhone 6+\n\n            // Instantiate a new storyboard object using the storyboard file named Storyboard_iPhone6\n            storyboard = [UIStoryboard storyboardWithName:@\"MainStoryboard_iPhone6\" bundle:nil];\n\n            NSLog(@\"loaded iPhone6 Storyboard\");\n        }\n        else if (iOSDeviceScreenSize.width == 568 || // for iOS devices\n                 iOSDeviceScreenSize.height == 568) // for iOS simulator\n        {   // iPhone 5 and iPod Touch 5th generation: 4 inch screen (diagonally measured)\n\n            // Instantiate a new storyboard object using the storyboard file named Storyboard_iPhone5\n            storyboard = [UIStoryboard storyboardWithName:@\"MainStoryboard_iPhone5\" bundle:nil];\n\n            NSLog(@\"loaded iPhone5 Storyboard\");\n        }\n        else\n        {   // iPhone 3GS, 4, and 4S and iPod Touch 3rd and 4th generation: 3.5 inch screen (diagonally measured)\n\n                // Instantiate a new storyboard object using the storyboard file named Storyboard_iPhone4\n            storyboard = [UIStoryboard story    boardWithName:@\"MainStoryboard_iPhone\" bundle:nil];\n\n                NSLog(@\"loaded iPhone4 Storyboard\");\n        }\n    }\n    else if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad)\n    {   // The iOS device = iPad\n\n        storyboard = [UIStoryboard storyboardWithName:@\"MainStoryboard_iPadnew\" bundle:nil];\n\n        NSLog(@\"loaded iPad Storyboard\");\n    }\n\n    // rest my code\n}\n</code></pre>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 26297933, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}, {"body": "<p>Use the <code>Auto Layout</code> feature for views. It will adjust automatically to all resolutions.</p>\n\n<p>Create two xibs for a controller having controller name with suffix either ~iphone or ~ipad. At compile time, Xcode will take the right xib based on the device. </p>\n\n<p>Use size classes, if you want to create a single xib for both iPhone and iPad, if the view is simple enough to port to iPhone and iPad.</p>\n", "title": "How to develop or migrate apps for iPhone 5 screen resolution?", "answer_id": 27794562, "question_id": 12395200, "tags": ["ios", "iphone", "screen", "iphone-5"]}], "link": "http://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution", "question_id": 12395200}, {"body": "<p>My question involves how to go about dealing with complex nesting of <strong>templates</strong> (also called <strong>partials</strong>) in an AngularJS application.</p>\n\n<p>The best way to describe my situation is with an image I created:</p>\n\n<p><img src=\"http://i.stack.imgur.com/V17C3.png\" alt=\"AngularJS Page Diagram\"></p>\n\n<p>As you can see this has the potential to be a fairly complex application with lots of nested models.</p>\n\n<p>The application is single-page, so it loads an <strong>index.html</strong> that contains a div element in the DOM with the <code>ng-view</code> attribute.</p>\n\n<p><strong>For circle 1</strong>, You see that there is a Primary navigation that loads the appropriate templates into the <code>ng-view</code>.  I'm doing this by passing <code>$routeParams</code> to the main app module.  Here is an example of what's in my app:</p>\n\n<pre><code>angular.module('myApp', []).\n    config(['$routeProvider', function($routeProvider) {\n        $routeProvider.                     \n            when(\"/job/:jobId/zones/:zoneId\", { controller: JobDetailController, templateUrl: 'assets/job_list_app/templates/zone_edit.html' }).\n            when(\"/job/:jobId/initial_inspection\", { controller: JobDetailController, templateUrl: 'assets/job_list_app/templates/initial_inspection.html' }).\n            when(\"/job/:jobId/zones/:zoneId/rooms/:roomId\", { controller: JobDetailController, templateUrl: 'assets/job_list_app/templates/room_edit.html' })       \n\n    }]);\n</code></pre>\n\n<p><strong>In circle 2</strong>, the template that is loaded into the <code>ng-view</code> has an additional <strong>sub-navigation</strong>.  This sub-nav then needs to load templates into the area below it - but since ng-view is already being used, I'm not sure how to go about doing this.</p>\n\n<p>I know that I can include additional templates within the 1st template, but these templates are all going to be pretty complex.  I would like to keep all the templates separate in order to make the application easier to update and not have a dependency on the parent template having to be loaded in order to access its children.</p>\n\n<p><strong>In circle 3</strong>, you can see things get even more complex.  There is the potential that the sub-navigation templates will have a <strong>2nd sub-navigation</strong> that will need to load its own templates as well into the area in <strong>circle 4</strong></p>\n\n<p><strong>How does one go about structuring an AngularJS app to deal with such complex nesting of templates while keeping them all separate from one another?</strong></p>\n", "title": "Complex nesting of partials and templates", "tags": ["javascript", "angularjs"], "answers": [{"body": "<p>Well, since you can currently only have one ngView directive... I use nested directive controls. This allows you to set up templating and inherit (or isolate) scopes among them. Outside of that I use ng-switch or even just ng-show to choose which controls I'm displaying based on what's coming in from $routeParams.</p>\n\n<p><strong>EDIT</strong> Here's some example pseudo-code to give you an idea of what I'm talking about. With a nested sub navigation.</p>\n\n<p>Here's the main app page</p>\n\n<pre><code>&lt;!-- primary nav --&gt;\n&lt;a href=\"#/page/1\"&gt;Page 1&lt;/a&gt;\n&lt;a href=\"#/page/2\"&gt;Page 2&lt;/a&gt;\n&lt;a href=\"#/page/3\"&gt;Page 3&lt;/a&gt;\n\n&lt;!-- display the view --&gt;\n&lt;div ng-view&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Directive for the sub navigation</p>\n\n<pre><code>app.directive('mySubNav', function(){\n    return {\n        restrict: 'E',\n        scope: {\n           current: '=current'\n        },\n        templateUrl: 'mySubNav.html',\n        controller: function($scope) {\n        }\n    };\n});\n</code></pre>\n\n<p>template for the sub navigation</p>\n\n<pre><code>&lt;a href=\"#/page/1/sub/1\"&gt;Sub Item 1&lt;/a&gt;\n&lt;a href=\"#/page/1/sub/2\"&gt;Sub Item 2&lt;/a&gt;\n&lt;a href=\"#/page/1/sub/3\"&gt;Sub Item 3&lt;/a&gt;\n</code></pre>\n\n<p>template for a main page (from primary nav)</p>\n\n<pre><code>&lt;my-sub-nav current=\"sub\"&gt;&lt;/my-sub-nav&gt;\n\n&lt;ng-switch on=\"sub\"&gt;\n  &lt;div ng-switch-when=\"1\"&gt;\n      &lt;my-sub-area1&gt;&lt;/my-sub-area&gt;\n  &lt;/div&gt;\n  &lt;div ng-switch-when=\"2\"&gt;\n      &lt;my-sub-area2&gt;&lt;/my-sub-area&gt;\n  &lt;/div&gt;\n  &lt;div ng-switch-when=\"3\"&gt;\n      &lt;my-sub-area3&gt;&lt;/my-sub-area&gt;\n  &lt;/div&gt;\n&lt;/ng-switch&gt;\n</code></pre>\n\n<p>Controller for a main page. (from the primary nav)</p>\n\n<pre><code>app.controller('page1Ctrl', function($scope, $routeParams) {\n     $scope.sub = $routeParams.sub;\n});\n</code></pre>\n\n<p>Directive for a Sub Area</p>\n\n<pre><code>app.directive('mySubArea1', function(){\n    return {\n        restrict: 'E',\n        templateUrl: 'mySubArea1.html',\n        controller: function($scope) {\n            //controller for your sub area.\n        }\n    };\n});\n</code></pre>\n", "title": "Complex nesting of partials and templates", "answer_id": 12864135, "question_id": 12863663, "tags": ["javascript", "angularjs"]}, {"body": "<h3><em>UPDATE:</em> <a href=\"https://github.com/angular-ui/ui-router\">Check out AngularUI's new project to address this problem</a></h3>\n\n<hr>\n\n<p>For subsections it's as easy as leveraging strings in ng-include:</p>\n\n<pre><code>&lt;ul id=\"subNav\"&gt;\n  &lt;li&gt;&lt;a ng-click=\"subPage='section1/subpage1.htm'\"&gt;Sub Page 1&lt;/a&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a ng-click=\"subPage='section1/subpage2.htm'\"&gt;Sub Page 2&lt;/a&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a ng-click=\"subPage='section1/subpage3.htm'\"&gt;Sub Page 3&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ng-include src=\"subPage\"&gt;&lt;/ng-include&gt;\n</code></pre>\n\n<p>Or you can create an object in case you have links to sub pages all over the place:</p>\n\n<pre><code>$scope.pages = { page1: 'section1/subpage1.htm', ... };\n</code></pre>\n\n\n\n<pre><code>&lt;ul id=\"subNav\"&gt;\n  &lt;li&gt;&lt;a ng-click=\"subPage='page1'\"&gt;Sub Page 1&lt;/a&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a ng-click=\"subPage='page2'\"&gt;Sub Page 2&lt;/a&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a ng-click=\"subPage='page3'\"&gt;Sub Page 3&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ng-include src=\"pages[subPage]\"&gt;&lt;/ng-include&gt;\n</code></pre>\n\n<p>Or you can even use <code>$routeParams</code></p>\n\n<pre><code>$routeProvider.when('/home', ...);\n$routeProvider.when('/home/:tab', ...);\n$scope.params = $routeParams;\n</code></pre>\n\n\n\n<pre><code>&lt;ul id=\"subNav\"&gt;\n  &lt;li&gt;&lt;a href=\"#/home/tab1\"&gt;Sub Page 1&lt;/a&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"#/home/tab2\"&gt;Sub Page 2&lt;/a&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"#/home/tab3\"&gt;Sub Page 3&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ng-include src=\" '/home/' + tab + '.html' \"&gt;&lt;/ng-include&gt;\n</code></pre>\n\n<p>You can also put an ng-controller at the top-most level of each partial</p>\n", "title": "Complex nesting of partials and templates", "answer_id": 12903951, "question_id": 12863663, "tags": ["javascript", "angularjs"]}, {"body": "<p>You may checkout this library for the same purpose also:</p>\n\n<p><a href=\"http://angular-route-segment.com\">http://angular-route-segment.com</a></p>\n\n<p>It looks like what you are looking for, and it is much simpler to use than ui-router. From the <a href=\"http://angular-route-segment.com/src/example/\">demo site</a>:</p>\n\n<p>JS:</p>\n\n<pre><code>$routeSegmentProvider.\n\nwhen('/section1',          's1.home').\nwhen('/section1/:id',      's1.itemInfo.overview').\nwhen('/section2',          's2').\n\nsegment('s1', {\n    templateUrl: 'templates/section1.html',\n    controller: MainCtrl}).\nwithin().\n    segment('home', {\n        templateUrl: 'templates/section1/home.html'}).\n    segment('itemInfo', {\n        templateUrl: 'templates/section1/item.html',\n        controller: Section1ItemCtrl,\n        dependencies: ['id']}).\n    within().\n        segment('overview', {\n            templateUrl: 'templates/section1/item/overview.html'}).\n</code></pre>\n\n<p>Top-level HTML:</p>\n\n<pre><code>&lt;ul&gt;\n    &lt;li ng-class=\"{active: $routeSegment.startsWith('s1')}\"&gt;\n        &lt;a href=\"/section1\"&gt;Section 1&lt;/a&gt;\n    &lt;/li&gt;\n    &lt;li ng-class=\"{active: $routeSegment.startsWith('s2')}\"&gt;\n        &lt;a href=\"/section2\"&gt;Section 2&lt;/a&gt;\n    &lt;/li&gt;\n&lt;/ul&gt;\n&lt;div id=\"contents\" app-view-segment=\"0\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>Nested HTML:</p>\n\n<pre><code>&lt;h4&gt;Section 1&lt;/h4&gt;\nSection 1 contents.\n&lt;div app-view-segment=\"1\"&gt;&lt;/div&gt;\n</code></pre>\n", "title": "Complex nesting of partials and templates", "answer_id": 18250463, "question_id": 12863663, "tags": ["javascript", "angularjs"]}, {"body": "<p>You may use ng-include to avoid using nested ng-views.</p>\n\n<p><a href=\"http://docs.angularjs.org/api/ng/directive/ngInclude\" rel=\"nofollow\">http://docs.angularjs.org/api/ng/directive/ngInclude</a><br>\n<a href=\"http://plnkr.co/edit/ngdoc:example-example39@snapshot?p=preview\" rel=\"nofollow\">http://plnkr.co/edit/ngdoc:example-example39@snapshot?p=preview</a></p>\n\n<p>My index page I use ng-view. Then on my sub pages which I need to have nested frames. I use    ng-include. \nThe demo shows a dropdown. I replaced mine with a link  ng-click. \nIn the function I would put    $scope.template = $scope.templates[0]; or $scope.template = $scope.templates[1];</p>\n\n<pre><code>$scope.clickToSomePage= function(){\n  $scope.template = $scope.templates[0];\n};\n</code></pre>\n", "title": "Complex nesting of partials and templates", "answer_id": 22694748, "question_id": 12863663, "tags": ["javascript", "angularjs"]}, {"body": "<p>Angular ui-router supports nested views. I haven't used it yet but looks very promising.</p>\n\n<p><a href=\"http://angular-ui.github.io/ui-router/\" rel=\"nofollow\">http://angular-ui.github.io/ui-router/</a></p>\n", "title": "Complex nesting of partials and templates", "answer_id": 23249215, "question_id": 12863663, "tags": ["javascript", "angularjs"]}, {"body": "<p>I too was struggling with nested views in Angular.</p>\n\n<p>Once I got a hold of <a href=\"https://github.com/angular-ui/ui-router\">ui-router</a> I knew I was never going back to angular default routing functionality.</p>\n\n<p>Here is an example application that uses multiple levels of views nesting</p>\n\n<pre><code>app.config(function ($stateProvider, $urlRouterProvider,$httpProvider) {\n// navigate to view1 view by default\n$urlRouterProvider.otherwise(\"/view1\");\n\n$stateProvider\n    .state('view1', {\n        url: '/view1',\n        templateUrl: 'partials/view1.html',\n        controller: 'view1.MainController'\n    })\n    .state('view1.nestedViews', {\n        url: '/view1',\n        views: {\n            'childView1': { templateUrl: 'partials/view1.childView1.html' , controller: 'childView1Ctrl'},\n            'childView2': { templateUrl: 'partials/view1.childView2.html', controller: 'childView2Ctrl' },\n            'childView3': { templateUrl: 'partials/view1.childView3.html', controller: 'childView3Ctrl' }\n        }\n    })\n\n    .state('view2', {\n        url: '/view2',\n    })\n\n    .state('view3', {\n        url: '/view3',\n    })\n\n    .state('view4', {\n        url: '/view4',\n    });\n});\n</code></pre>\n\n<p>As it can be seen there are 4 main views (view1,view2,view3,view4) and view1 has 3 child views.</p>\n", "title": "Complex nesting of partials and templates", "answer_id": 25643586, "question_id": 12863663, "tags": ["javascript", "angularjs"]}], "link": "http://stackoverflow.com/questions/12863663/complex-nesting-of-partials-and-templates", "question_id": 12863663}, {"body": "<p>In the <code>os</code> module in Python, is there a way to find if a directory exists, something like:</p>\n\n<pre><code>&gt;&gt;&gt; os.direxists(os.path.join(os.getcwd()), 'new_folder')) # in pseudocode\nTrue/False\n</code></pre>\n", "title": "How to find if directory exists in Python", "tags": ["python", "directory"], "answers": [{"body": "<p>Yes, use <a href=\"http://docs.python.org/library/os.path.html#os.path.exists\"><code>os.path.exists()</code></a>.</p>\n", "title": "How to find if directory exists in Python", "answer_id": 8933273, "question_id": 8933237, "tags": ["python", "directory"]}, {"body": "<p>You're looking for <a href=\"http://docs.python.org/dev/library/os.path.html#os.path.isdir\"><code>os.path.isdir</code></a>, or <a href=\"http://docs.python.org/dev/library/os.path.html#os.path.exists\"><code>os.path.exists</code></a> if you don't care whether it's a file or a directory.</p>\n\n<p>Example:</p>\n\n<pre><code>import os\nprint(os.path.isdir(\"/home/el\"))\nprint(os.path.exists(\"/home/el/myfile.txt\"))\n</code></pre>\n", "title": "How to find if directory exists in Python", "answer_id": 8933290, "question_id": 8933237, "tags": ["python", "directory"]}, {"body": "<p>As in:</p>\n\n<pre><code>In [3]: os.path.exists('/d/temp')\nOut[3]: True\n</code></pre>\n\n<p>Probably toss in a <code>os.path.isdir(...)</code> to be sure.</p>\n", "title": "How to find if directory exists in Python", "answer_id": 8933291, "question_id": 8933237, "tags": ["python", "directory"]}, {"body": "<p>So close! <code>os.path.isdir</code> returns <code>True</code> if you pass in the name of a directory that currently exists. If it doesn't exist or it's not a directory, then it returns <code>False</code>.</p>\n", "title": "How to find if directory exists in Python", "answer_id": 8933302, "question_id": 8933237, "tags": ["python", "directory"]}, {"body": "<p>Yes use <a href=\"http://docs.python.org/library/os.path.html#os.path.isdir\">os.path.isdir(path)</a></p>\n", "title": "How to find if directory exists in Python", "answer_id": 8933306, "question_id": 8933237, "tags": ["python", "directory"]}, {"body": "<p>os provides you with a lot of these capabilities:</p>\n\n<pre><code>import os\nos.path.isdir(dir_in) #True/False: check if this is a directory\nos.listdir(dir_in)    #gets you a list of all files and directories under dir_in\n</code></pre>\n\n<p>the listdir will throw an exception if the input path is invalid.</p>\n", "title": "How to find if directory exists in Python", "answer_id": 16600118, "question_id": 8933237, "tags": ["python", "directory"]}, {"body": "<p>Just to provide the <code>os.stat</code> version (python 2):</p>\n\n<pre><code>import os, stat, errno\ndef CheckIsDir(directory):\n  try:\n    return stat.S_ISDIR(os.stat(directory).st_mode)\n  except OSError, e:\n    if e.errno == errno.ENOENT:\n      return False\n    raise\n</code></pre>\n", "title": "How to find if directory exists in Python", "answer_id": 36418012, "question_id": 8933237, "tags": ["python", "directory"]}], "link": "http://stackoverflow.com/questions/8933237/how-to-find-if-directory-exists-in-python", "question_id": 8933237}], "quota_max": 300, "page_size": 100, "quota_remaining": 291, "page": 1}