{"has_more": true, "items": [{"body": "<p>I don't know whether I am asking the right question. I was exploring <code>RecyclerView</code> and I was surprised to see that <code>RecyclerView</code> does not have <code>onItemClickListener()</code>. Because <code>RecyclerView</code> extends     </p>\n\n<blockquote>\n  <p><strong>android.view.ViewGroup</strong></p>\n</blockquote>\n\n<p>and <code>ListView</code> extends </p>\n\n<blockquote>\n  <p><strong>android.widget.AbsListView</strong></p>\n</blockquote>\n\n<p>.  However I solved my problem by writing <code>onClick</code> in my <code>RecyclerView.Adapter</code>:</p>\n\n<pre><code>public static class ViewHolder extends RecyclerView.ViewHolder implements OnClickListener {\n\n    public TextView txtViewTitle;\n    public ImageView imgViewIcon;\n\n    public ViewHolder(View itemLayoutView) {\n        super(itemLayoutView);\n        txtViewTitle = (TextView) itemLayoutView.findViewById(R.id.item_title);\n        imgViewIcon = (ImageView) itemLayoutView.findViewById(R.id.item_icon);\n    }\n\n    @Override\n    public void onClick(View v) {\n\n    }\n}\n</code></pre>\n\n<p>But still I want to know why Google removed <code>onItemClickListener()</code>? </p>\n\n<p>Is there a performance issue or something else?</p>\n", "tags": ["java", "android", "recyclerview"], "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "answers": [{"body": "<p><strong>tl;dr 2016</strong> Use RxJava and a PublishSubject to expose an Observable for the clicks.</p>\n\n<pre><code>public class ReactiveAdapter extends RecyclerView.Adapter&lt;MyAdapter.ViewHolder&gt; {\n    String[] mDataset = { \"Data\", \"In\", \"Adapter\" };\n\n    private final PublishSubject&lt;String&gt; onClickSubject = PublishSubject.create();\n\n    @Override \n    public void onBindViewHolder(final ViewHolder holder, int position) {\n        final String element = mDataset[position];\n\n        holder.itemView.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n               onClickSubject.onNext(element);\n            }\n        });\n    }\n\n    public Observable&lt;String&gt; getPositionClicks(){\n        return onClickSubject.asObservable();\n    }\n}\n</code></pre>\n\n<p><strong>Original Post:</strong></p>\n\n<p>Since the introduction of <code>ListView</code>, <code>onItemClickListener</code> has been problematic. The moment you have a click listener for any of the internal elements the callback would not be triggered but it wasn't notified or well documented (if at all) so there was a lot of confusion and SO questions about it.</p>\n\n<p>Given that <code>RecyclerView</code> takes it a step further and doesn't have a concept of a row/column, but rather an arbitrarily laid out amount of children, they have delegated the onClick to each one of them, or to programmer implementation.</p>\n\n<p>Think of <code>Recyclerview</code> not as a <code>ListView</code> 1:1 replacement but rather as a more flexible component for complex use cases. And as you say, your solution is what google expected of you. Now you have an adapter who can delegate onClick to an interface passed on the constructor, which is the correct pattern for both <code>ListView</code> and <code>Recyclerview</code>.</p>\n\n<pre><code>public static class ViewHolder extends RecyclerView.ViewHolder implements OnClickListener {\n\n    public TextView txtViewTitle;\n    public ImageView imgViewIcon;\n    public IMyViewHolderClicks mListener;\n\n    public ViewHolder(View itemLayoutView, IMyViewHolderClicks listener) {\n        super(itemLayoutView);\n        mListener = listener;\n        txtViewTitle = (TextView) itemLayoutView.findViewById(R.id.item_title);\n        imgViewIcon = (ImageView) itemLayoutView.findViewById(R.id.item_icon);\n        imgViewIcon.setOnClickListener(this);\n        itemLayoutView.setOnClickListener(this);\n    }\n\n    @Override\n    public void onClick(View v) {\n        if (v instanceof ImageView){\n           mListener.onTomato((ImageView)v);\n        } else {\n           mListener.onPotato(v);\n        }\n    }\n\n    public static interface IMyViewHolderClicks {\n        public void onPotato(View caller);\n        public void onTomato(ImageView callerImage);\n    }\n\n}\n</code></pre>\n\n<p>and then on your adapter</p>\n\n<pre><code>public class MyAdapter extends RecyclerView.Adapter&lt;MyAdapter.ViewHolder&gt; {\n\n   String[] mDataset = { \"Data\" };\n\n   @Override\n   public MyAdapter.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n       View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.my_layout, parent, false);\n\n       MyAdapter.ViewHolder vh = new ViewHolder(v, new MyAdapter.ViewHolder.IMyViewHolderClicks() { \n           public void onPotato(View caller) { Log.d(\"VEGETABLES\", \"Poh-tah-tos\"); };\n           public void onTomato(ImageView callerImage) {\u00a0Log.d(\"VEGETABLES\", \"To-m8-tohs\"); }\n        });\n        return vh;\n    }\n\n    // Replace the contents of a view (invoked by the layout manager) \n    @Override \n    public void onBindViewHolder(ViewHolder holder, int position) {\n        // Get element from your dataset at this position \n        // Replace the contents of the view with that element \n        // Clear the ones that won't be used\n        holder.txtViewTitle.setText(mDataset[position]);\n    } \n\n    // Return the size of your dataset (invoked by the layout manager) \n    @Override \n    public int getItemCount() { \n        return mDataset.length;\n    } \n  ...\n</code></pre>\n\n<p>Now look into that last piece of code: <code>onCreateViewHolder(ViewGroup parent, int viewType)</code> the signature already suggest different view types. For each one of them you'll require a different viewholder too, and subsequently each one of them can have a different set of clicks. Or you can just create a generic viewholder that takes any view and one <code>onClickListener</code> and applies accordingly. Or delegate up one level to the orchestrator so several fragments/activities have the same list with different click behaviour. Again, all flexibility is on your side.</p>\n\n<p>It is a really needed component and fairly close to what our internal implementations and improvements to <code>ListView</code> were until now. It's good that Google finally acknowledges it.</p>\n", "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "tags": ["java", "android", "recyclerview"], "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif/24933117#24933117", "question_id": 24885223, "answer_id": 24933117}, {"body": "<p><em>> <strong>How RecyclerView is different from Listview?</em></strong></p>\n\n<p>One difference is that there is <code>LayoutManager</code> class with RecyclerView by which you can manage your <code>RecyclerView</code> like-</p>\n\n<blockquote>\n  <p><strong><em>Horizontal</em></strong> or Vertical scrolling by <code>LinearLayoutManager</code></p>\n  \n  <p>GridLayout by <em><code>GridLayoutManager</code></em></p>\n  \n  <p>Staggered GridLayout by <code>StaggeredGridLayoutManager</code></p>\n</blockquote>\n\n<p>Like for horizontal scrolling for RecyclerView-</p>\n\n<pre><code>LinearLayoutManager llm = new LinearLayoutManager(context);\nllm.setOrientation(LinearLayoutManager.HORIZONTAL);\nrecyclerView.setLayoutManager(llm);\n</code></pre>\n", "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "tags": ["java", "android", "recyclerview"], "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif/27653597#27653597", "question_id": 24885223, "answer_id": 27653597}, {"body": "<p>I like this way and I'm using it</p>\n\n<p>Inside </p>\n\n<pre><code>public Adapter.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType)\n</code></pre>\n\n<p>Put </p>\n\n<pre><code>View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.view_image_and_text, parent, false);\nv.setOnClickListener(new MyOnClickListener());\n</code></pre>\n\n<p>And create this class anywhere you want it</p>\n\n<pre><code>class MyOnClickListener implements View.OnClickListener {\n    @Override\n    public void onClick(View v) {\n       int itemPosition = recyclerView.indexOfChild(v);\n       Log.e(\"Clicked and Position is \",String.valueOf(itemPosition));\n    }\n}\n</code></pre>\n\n<p>I've read before that there is a better way but I like this way is easy and not complicated.</p>\n", "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "tags": ["java", "android", "recyclerview"], "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif/29142005#29142005", "question_id": 24885223, "answer_id": 29142005}, {"body": "<p>How to put it all together example...</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/a/24933117/591860\">onClick() handling</a></li>\n<li><a href=\"http://stackoverflow.com/a/26673645/591860\">Cursor - RecyclerView</a></li>\n<li><p><a href=\"http://stackoverflow.com/a/26245463/591860\">ViewHolder types</a></p>\n\n<pre><code>public class OrderListCursorAdapter extends CursorRecyclerViewAdapter&lt;OrderListCursorAdapter.ViewHolder&gt; {\n\nprivate static final String TAG = OrderListCursorAdapter.class.getSimpleName();\nprivate static final int ID_VIEW_HOLDER_ACTUAL = 0;\nprivate static final int ID_VIEW_HOLDER = 1;\n\npublic OrderListCursorAdapter(Context context, Cursor cursor) {\n    super(context, cursor);\n}\n\npublic static class ViewHolderActual extends ViewHolder {\n    private static final String TAG = ViewHolderActual.class.getSimpleName();\n    protected IViewHolderClick listener;\n    protected Button button;\n\n    public ViewHolderActual(View v, IViewHolderClick listener) {\n        super(v, listener);\n        this.listener = listener;\n        button = (Button) v.findViewById(R.id.orderList_item_button);\n        button.setOnClickListener(this);\n    }\n\n    public void initFromData(OrderData data) {\n        Log.d(TAG, \"&gt;&lt;initFromData(data=\" + data + \")\");\n        orderId = data.getId();\n        vAddressStart.setText(data.getAddressStart());\n        vAddressEnd.setText(data.getAddressEnd());\n    }\n\n    @Override\n    public void onClick(View view) {\n        if (view instanceof Button) {\n            listener.onButtonClick((Button) view, getPosition(), this);\n        } else {\n            super.onClick(view);\n        }\n    }\n\n    public interface IViewHolderClick extends ViewHolder.IViewHolderClick {\n        public void onButtonClick(Button button, int position, ViewHolder viewHolder);\n    }\n}\n\npublic static class ViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {\n    private static final String TAG = ViewHolder.class.getSimpleName();\n    protected long orderId;\n    protected IViewHolderClick listener;\n    protected TextView vAddressStart;\n    protected TextView vAddressEnd;\n    protected TextView vStatus;\n\n    public ViewHolder(View v, IViewHolderClick listener) {\n        super(v);\n        this.listener = listener;\n        v.setOnClickListener(this);\n\n        vAddressStart = (TextView) v.findViewById(R.id.addressStart);\n        vAddressEnd = (TextView) v.findViewById(R.id.addressEnd);\n        vStatus = (TextView) v.findViewById(R.id.status);\n    }\n\n    public void initFromData(OrderData data) {\n        Log.d(TAG, \"&gt;&lt;initFromData(data=\" + data + \")\");\n        orderId = data.getId();\n        vAddressStart.setText(data.getAddressStart());\n        vAddressEnd.setText(data.getAddressEnd());\n    }\n\n    public long getOrderId() {\n        return orderId;\n    }\n\n    @Override\n    public void onClick(View view) {\n        listener.onCardClick(view, getPosition(), this);\n    }\n\n    public interface IViewHolderClick {\n        public void onCardClick(View view, int position, ViewHolder viewHolder);\n    }\n}\n\n@Override\npublic int getItemViewType(int position) {\n    return position == 0 ? ID_VIEW_HOLDER_ACTUAL : ID_VIEW_HOLDER;\n}\n\n@Override\npublic ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n    Log.d(TAG, \"&gt;&gt;onCreateViewHolder(parent=\" + parent + \", viewType=\" + viewType + \")\");\n\n    ViewHolder result;\n\n    switch (viewType) {\n        case ID_VIEW_HOLDER_ACTUAL: {\n            View itemView = LayoutInflater.from(parent.getContext()).inflate(R.layout.card_layout_actual, parent, false);\n            result = new ViewHolderActual(itemView, new ViewHolderActual.IViewHolderClick() {\n                @Override\n                public void onCardClick(View view, int position, ViewHolder viewHolder) {\n                    Log.d(TAG, \"&gt;&lt;onCardClick(view=\" + view + \", position=\" + position + \", viewHolder=\" + viewHolder + \")\");\n                    Intent intent = new Intent(view.getContext(), OrderDetailActivity.class);\n                    intent.putExtra(OrderDetailActivity.ARG_ORDER_ID, viewHolder.getOrderId());\n                    view.getContext().startActivity(intent);\n                }\n\n                @Override\n                public void onButtonClick(Button button, int position, ViewHolder viewHolder) {\n                    Log.d(TAG, \"&gt;&lt;onButtonClick(button=\" + button + \", position=\" + position + \", viewHolder=\" + viewHolder + \")\");\n                    Intent intent = new Intent(button.getContext(), OrderMapActivity.class);\n                    intent.putExtra(OrderMapActivity.ARG_ORDER_ID, viewHolder.getOrderId());\n                    button.getContext().startActivity(intent);\n                }\n            });\n            break;\n        }\n        case ID_VIEW_HOLDER:\n        default: {\n            View itemView = LayoutInflater.from(parent.getContext()).inflate(R.layout.card_layout, parent, false);\n            result = new ViewHolder(itemView, new ViewHolder.IViewHolderClick() {\n                @Override\n                public void onCardClick(View view, int position, ViewHolder viewHolder) {\n                    Log.d(TAG, \"&gt;&lt;onCardClick(view=\" + view + \", position=\" + position + \", viewHolder=\" + viewHolder + \")\");\n                    Intent intent = new Intent(view.getContext(), OrderDetailActivity.class);\n                    intent.putExtra(OrderDetailActivity.ARG_ORDER_ID, viewHolder.getOrderId());\n                    view.getContext().startActivity(intent);\n                }\n            });\n            break;\n        }\n    }\n\n    Log.d(TAG, \"&lt;&lt;onCreateViewHolder(parent=\" + parent + \", viewType=\" + viewType + \")= \" + result);\n    return result;\n}\n\n@Override\npublic void onBindViewHolder(ViewHolder viewHolder, Cursor cursor) {\n    Log.d(TAG, \"&gt;&lt;onBindViewHolder(viewHolder=\" + viewHolder + \", cursor=\" + cursor + \")\");\n    final OrderData orderData = new OrderData(cursor);\n    viewHolder.initFromData(orderData);\n}\n</code></pre>\n\n<p>}</p></li>\n</ul>\n", "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "tags": ["java", "android", "recyclerview"], "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif/29408566#29408566", "question_id": 24885223, "answer_id": 29408566}, {"body": "<p>Thanks to @marmor, I updated my answer. </p>\n\n<p>I think it's a good solution to handle the onClick() in the <strong>ViewHolder</strong> class constructor and pass it to the parent class via <strong>OnItemClickListener</strong> interface.</p>\n\n<p><strong>MyAdapter.java</strong></p>\n\n<pre><code>public class MyAdapter extends RecyclerView.Adapter&lt;MyAdapter.ViewHolder&gt;{\n\nprivate LayoutInflater layoutInflater;\nprivate List&lt;MyObject&gt; items;\nprivate AdapterView.OnItemClickListener onItemClickListener;\n\npublic MyAdapter(Context context, AdapterView.OnItemClickListener onItemClickListener, List&lt;MyObject&gt; items) {\n    layoutInflater = LayoutInflater.from(context);\n    this.items = items;\n    this.onItemClickListener = onItemClickListener;\n}\n\n@Override\npublic ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n    View view = layoutInflater.inflate(R.layout.my_row_layout, parent, false);\n    return new ViewHolder(view);\n}\n\n@Override\npublic void onBindViewHolder(ViewHolder holder, int position) {\n    MyObject item = items.get(position);\n}\n\npublic MyObject getItem(int position) {\n    return items.get(position);\n}\n\n\nclass ViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {\n    private TextView title;\n    private ImageView avatar;\n\n    public ViewHolder(View itemView) {\n        super(itemView);\n        title = itemView.findViewById(R.id.title);\n        avatar = itemView.findViewById(R.id.avatar);\n\n        title.setOnClickListener(this);\n        avatar.setOnClickListener(this);\n        itemView.setOnClickListener(this);\n    }\n\n    @Override\n    public void onClick(View view) {\n        //passing the clicked position to the parent class\n        onItemClickListener.onItemClick(null, view, getAdapterPosition(), view.getId());\n    }\n}\n}\n</code></pre>\n\n<p>Usage of adapter in other classes:</p>\n\n<p><strong>MyFragment.java</strong></p>\n\n<pre><code>public class MyFragment extends Fragment implements AdapterView.OnItemClickListener {\n\nprivate RecyclerView recycleview;\nprivate MyAdapter adapter;\n\n    .\n    .\n    .\n\nprivate void init(Context context) {\n    //passing this fragment as OnItemClickListener to the adapter\n    adapter = new MyAdapter(context, this, items);\n    recycleview.setAdapter(adapter);\n}\n\n@Override\npublic void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\n    //you can get the clicked item from the adapter using its position\n    MyObject item = adapter.getItem(position);\n\n    //you can also find out which view was clicked\n    switch (view.getId()) {\n        case R.id.title:\n            //title view was clicked\n            break;\n        case R.id.avatar:\n            //avatar view was clicked\n            break;\n        default:\n            //the whole row was clicked\n    }\n}\n\n}\n</code></pre>\n", "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "tags": ["java", "android", "recyclerview"], "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif/29841832#29841832", "question_id": 24885223, "answer_id": 29841832}, {"body": "<p>I use this method to start an Intent from RecyclerView:</p>\n\n<pre><code>@Override\n public void onBindViewHolder(ViewHolder viewHolder, int i) {\n\n    final MyClass myClass = mList.get(i);\n    viewHolder.txtViewTitle.setText(myclass.name);\n   ...\n    viewHolder.itemView.setOnClickListener(new View.OnClickListener() {\n      @Override\n       public void onClick(View v){\n             Intent detailIntent = new Intent(mContext, type.class);                                                            \n             detailIntent.putExtra(\"MyClass\", myclass);\n             mContext.startActivity(detailIntent);\n       }\n}\n);\n</code></pre>\n", "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "tags": ["java", "android", "recyclerview"], "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif/30685908#30685908", "question_id": 24885223, "answer_id": 30685908}, {"body": "<p>As far as I understand <strong>MLProgrammer-CiM</strong>  answer, simply it's possible to just do this: </p>\n\n<pre><code>class MyViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener{\n    private ImageView image;\n    private TextView title;\n    private TextView price;\n\n    public MyViewHolder(View itemView) {\n        super(itemView);\n        image = (ImageView)itemView.findViewById(R.id.horizontal_list_image);\n        title = (TextView)itemView.findViewById(R.id.horizontal_list_title);\n        price = (TextView)itemView.findViewById(R.id.horizontal_list_price);\n        image.setOnClickListener(this);\n        title.setOnClickListener(this);\n        price.setOnClickListener(this);\n    }\n\n\n    @Override\n    public void onClick(View v) {\n        Toast.makeText(context, \"Item click nr: \"+getLayoutPosition(), Toast.LENGTH_SHORT).show();\n    }\n}\n</code></pre>\n", "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "tags": ["java", "android", "recyclerview"], "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif/30976972#30976972", "question_id": 24885223, "answer_id": 30976972}, {"body": "<p>Android Recyclerview With <code>onItemClickListener</code>,\n Why we cant try this is working like <code>ListView</code> only.</p>\n\n<p>Source : <a href=\"http://sapandiwakar.in/recycler-view-item-click-handler/\">Link</a></p>\n\n<pre><code>import android.content.Context;\nimport android.support.v7.widget.RecyclerView;\nimport android.view.GestureDetector;\nimport android.view.MotionEvent;\nimport android.view.View;\n\n   public class RecyclerItemClickListener implements RecyclerView.OnItemTouchListener {\n\nprivate OnItemClickListener mListener;\npublic interface OnItemClickListener {\n    public void onItemClick(View view, int position);\n}\nGestureDetector mGestureDetector;\npublic RecyclerItemClickListener(Context context, OnItemClickListener listener) {\n    mListener = listener;\n    mGestureDetector = new GestureDetector(context, new GestureDetector.SimpleOnGestureListener() {\n        @Override\n        public boolean onSingleTapUp(MotionEvent e) {\n            return true;\n        }\n    });\n}\n@Override\npublic boolean onInterceptTouchEvent(RecyclerView view, MotionEvent e) {\n    View childView = view.findChildViewUnder(e.getX(), e.getY());\n    if (childView != null &amp;&amp; mListener != null &amp;&amp; mGestureDetector.onTouchEvent(e)) {\n        mListener.onItemClick(childView, view.getChildAdapterPosition(childView));\n    }\n    return false;\n}\n\n@Override\npublic void onTouchEvent(RecyclerView view, MotionEvent motionEvent) {\n}\n\n@Override\npublic void onRequestDisallowInterceptTouchEvent(boolean disallowIntercept) {\n\n  }\n}\n</code></pre>\n\n<p>And Set this to RecyclerView:</p>\n\n<pre><code>    recyclerView = (RecyclerView)rootView. findViewById(R.id.recyclerView);\n    RecyclerView.LayoutManager mLayoutManager = new            LinearLayoutManager(getActivity());\n    recyclerView.setLayoutManager(mLayoutManager);\n    recyclerView.addOnItemTouchListener(\n            new RecyclerItemClickListener(getActivity(), new   RecyclerItemClickListener.OnItemClickListener() {\n                @Override\n                public void onItemClick(View view, int position) {\n                    // TODO Handle item click\n                    Log.e(\"@@@@@\",\"\"+position);\n                }\n            })\n    );\n</code></pre>\n", "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "tags": ["java", "android", "recyclerview"], "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif/31589524#31589524", "question_id": 24885223, "answer_id": 31589524}, {"body": "<p>After reading <strong>@MLProgrammer-CiM</strong>'s answer, here is my code:</p>\n\n<pre><code>class NormalViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener{\n\n    @Bind(R.id.card_item_normal)\n    CardView cardView;\n\n    public NormalViewHolder(View itemView) {\n        super(itemView);\n        ButterKnife.bind(this, itemView);\n        cardView.setOnClickListener(this);\n    }\n\n    @Override\n    public void onClick(View v) {\n        if(v instanceof CardView) {\n            // use getAdapterPosition() instead of getLayoutPosition()\n            int itemPosition = getAdapterPosition();\n            removeItem(itemPosition);\n        }\n    }\n}\n</code></pre>\n", "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "tags": ["java", "android", "recyclerview"], "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif/31959511#31959511", "question_id": 24885223, "answer_id": 31959511}, {"body": "<p>Instead of implementing interface View.OnClickListener inside view holder or creating and interface and implementing interface in your activity..\nI used this code for simple on OnClickListener implementation.</p>\n\n<pre><code>public static class SimpleStringRecyclerViewAdapter\n            extends RecyclerView.Adapter&lt;SimpleStringRecyclerViewAdapter.ViewHolder&gt; {\n\n        // Your initializations goes here...\n        private List&lt;String&gt; mValues;\n\n        public static class ViewHolder extends RecyclerView.ViewHolder {\n\n            //create a variable mView\n            public final View mView;\n\n            /*All your row widgets goes here\n            public final ImageView mImageView;\n            public final TextView mTextView;*/\n\n            public ViewHolder(View view) {\n                super(view);\n                //Initialize it here\n                mView = view;\n\n                /* your row widgets initializations goes here\n                mImageView = (ImageView) view.findViewById(R.id.avatar);\n                mTextView = (TextView) view.findViewById(android.R.id.text1);*/\n            }\n        }\n\n        public String getValueAt(int position) {\n            return mValues.get(position);\n        }\n\n        public SimpleStringRecyclerViewAdapter(Context context, List&lt;String&gt; items) {\n\n            mBackground = mTypedValue.resourceId;\n            mValues = items;\n        }\n\n        @Override\n        public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n            View view = LayoutInflater.from(parent.getContext())\n                    .inflate(R.layout.list_item, parent, false);\n            view.setBackgroundResource(mBackground);\n            return new ViewHolder(view);\n        }\n\n        @Override\n        public void onBindViewHolder(final ViewHolder holder, int position) {\n            holder.mBoundString = mValues.get(position);\n            holder.mTextView.setText(mValues.get(position));\n\n            //Here it is simply write onItemClick listener here\n            holder.mView.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View v) {\n                    Context context = v.getContext();\n                    Intent intent = new Intent(context, ExampleActivity.class);\n\n                    context.startActivity(intent);\n                }\n            });\n        }\n\n        @Override\n        public int getItemCount() {\n            return mValues.size();\n        }\n    }\n</code></pre>\n", "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "tags": ["java", "android", "recyclerview"], "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif/32985328#32985328", "question_id": 24885223, "answer_id": 32985328}, {"body": "<p>See my approach on this:</p>\n\n<p><strong>First declare an interface like this:</strong></p>\n\n<pre><code>/**\n * Interface used for delegating item click events in a {@link android.support.v7.widget.RecyclerView}\n * Created by Alex on 11/28/2015.\n */\n  public interface OnRecyclerItemClickListener&lt;T&gt; {\n\n     /**\n      * Called when a click occurred inside a recyclerView item view\n      * @param view that was clicked\n      * @param position of the clicked view\n      * @param item the concrete data that is displayed through the clicked view\n      */\n      void onItemClick(View view, int position, T item);\n   }\n</code></pre>\n\n<p><strong>Then create the adapter:</strong></p>\n\n<pre><code>public class CustomRecyclerAdapter extends RecyclerView.Adapter {      \n\n    private class InternalClickListener implements View.OnClickListener{\n\n      @Override\n      public void onClick(View v) {\n        if(mRecyclerView != null &amp;&amp; mItemClickListener != null){\n            // find the position of the item that was clicked\n            int position = mRecyclerView.getChildAdapterPosition(v);\n            Data data = getItem(position);\n            // notify the main listener\n            mItemClickListener.onItemClick(v, position, data);\n        }\n    }\n}\n\nprivate final OnRecyclerItemClickListener mItemClickListener;\nprivate RecyclerView mRecyclerView;    \nprivate InternalClickListener mInternalClickListener;\n\n\n/**\n *\n * @param itemClickListener used to trigger an item click event\n */\npublic PlayerListRecyclerAdapter(OnRecyclerItemClickListener itemClickListener){        \n    mItemClickListener = itemClickListener;\n    mInternalClickListener = new InternalClickListener();\n}\n\n@Override\npublic RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n   View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.recycler_item, parent, false);\n\n    v.setOnClickListener(mInternalClickListener);\n\n    ViewHolder viewHolder = new ViewHolder(v);\n    return viewHolder;\n}\n\n@Override\npublic void onBindViewHolder(RecyclerView.ViewHolder holder, int position) {\n    // do your binding here\n}\n\n@Override\npublic int getItemCount() {\n    return mDataSet.size();\n}\n\n@Override\npublic void onAttachedToRecyclerView(RecyclerView recyclerView) {\n    super.onAttachedToRecyclerView(recyclerView);\n\n    mRecyclerView = recyclerView;\n}\n\n@Override\npublic void onDetachedFromRecyclerView(RecyclerView recyclerView) {\n    super.onDetachedFromRecyclerView(recyclerView);\n\n    mRecyclerView = null;\n}\n\npublic Data getItem(int position){\n    return mDataset.get(position);\n}\n}\n</code></pre>\n\n<p><strong>And now let's see how to integrate this from a fragment:</strong></p>\n\n<pre><code>public class TestFragment extends Fragment implements OnRecyclerItemClickListener&lt;Data&gt;{\n   private RecyclerView mRecyclerView;\n\n   @Override\n   public void onItemClick(View view, int position, Data item) {\n     // do something\n   }\n\n   @Override\n   public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n      return inflater.inflate(R.layout.test_fragment, container, false);\n   }\n\n   @Override\n   public void onViewCreated(View view, Bundle savedInstanceState) {\n      mRecyclerView = view.findViewById(idOfTheRecycler);\n      mRecyclerView .setAdapter(new CustomRecyclerAdapter(this));\n   }\n</code></pre>\n", "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "tags": ["java", "android", "recyclerview"], "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif/33971661#33971661", "question_id": 24885223, "answer_id": 33971661}, {"body": "<p>If you want to add onClick() to the child view of items, for example, a button in item, I found that you can do it easily in onCreateViewHolder() of your own RecyclerView.Adapter just like this:</p>\n\n<pre><code>        @Override\n        public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n            View v = LayoutInflater\n                    .from(parent.getContext())\n                    .inflate(R.layout.cell, null);\n\n            Button btn = (Button) v.findViewById(R.id.btn);\n            btn.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View v) {\n                    //do it\n                }\n            });\n\n            return new MyViewHolder(v);\n        }\n</code></pre>\n\n<p>i don't know whether it's a good way, but it works well. If anyone has a better idea, very glad to tell me and correct my answer! :)</p>\n", "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "tags": ["java", "android", "recyclerview"], "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif/33999017#33999017", "question_id": 24885223, "answer_id": 33999017}, {"body": "<p>This worked for me:</p>\n\n<pre><code>@Override\npublic void onBindViewHolder(PlacesListViewAdapter.ViewHolder holder, int position) {\n    ----\n    ----\n    ----\n    // Set setOnClickListener(holder);\n}\n\n\n@Override\npublic class ViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {\n\n    ----\n    ----\n    ----\n\n    @Override\n    public void onClick(View view) {\n        // Use to get the item clicked getAdapterPosition()\n    }\n}\n</code></pre>\n", "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "tags": ["java", "android", "recyclerview"], "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif/34476682#34476682", "question_id": 24885223, "answer_id": 34476682}, {"body": "<p>I have done this way, its very simple:</p>\n\n<p>Just add <strong>1 Line</strong> for <strong>Clicked RecyclerView position</strong>:</p>\n\n<pre><code>int position = getLayoutPosition()\n</code></pre>\n\n<p>Full code for <strong>ViewHolder</strong> class:</p>\n\n<pre><code>private class ChildViewHolder extends RecyclerView.ViewHolder {\n        public ImageView imageView;\n        public TextView txtView;\n\n        public ChildViewHolder(View itemView) {\n            super(itemView);\n            imageView= (ImageView)itemView.findViewById(R.id.imageView);\n            txtView= (TextView) itemView.findViewById(R.id.txtView);\n            itemView.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View view) {\n                    Log.i(\"RecyclerView Item Click Position\", String.valueOf(getLayoutPosition()));\n                }\n            });\n        }\n    }\n</code></pre>\n\n<p>Hope this will help you.</p>\n", "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "tags": ["java", "android", "recyclerview"], "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif/35178782#35178782", "question_id": 24885223, "answer_id": 35178782}, {"body": "<p>Here is a way to implement it quite easily if you have a list of POJOs and want to retrieve one on click from outside the adapter.</p>\n\n<p>In your adapter, create a listener for the click events and a method to set it:</p>\n\n<pre><code>public class MyAdapter extends RecyclerView.Adapter&lt;SitesListAdapter.ViewHolder&gt; {\n...\nprivate List&lt;MyPojo&gt; mMyPojos;\nprivate static OnItemClickListener mOnItemClickListener;\n\n...\npublic interface OnItemClickListener {\n    public void onItemClick(MyPojo pojo);\n}\n\n...\npublic void setOnItemClickListener(OnItemClickListener onItemClickListener){\n    mOnItemClickListener = onItemClickListener;\n}\n...\n</code></pre>\n\n<p>}</p>\n\n<p>In your ViewHolder, implement onClickListener and create a class member to temporarily store the POJO the view is presenting, that way (this is an example, creating a setter would be better):</p>\n\n<pre><code>public static class ViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {\n    public MyPojo mCurrentPojo;\n    ...\n    public ViewHolder(View view) {\n        super(v);\n        ...\n        view.setOnClickListener(this); //You could set this on part of the layout too\n    }\n\n    ...\n    @Override\n    public void onClick(View view) {\n        if(mOnItemClickListener != null &amp;&amp; mCurrentPojo != null){\n            mOnItemClickListener.onItemClick(mCurrentPojo);\n        }\n    }\n</code></pre>\n\n<p>Back in your adapter, set the current POJO when the ViewHolder is bound (or to null if the current view doesn't have one):</p>\n\n<pre><code>@Override\npublic void onBindViewHolder(final ViewHolder holder, final int position) {\n    final MyPojo currentPojo = mMyPojos.get(position); \n    holder.mCurrentPojo = currentPojo;\n    ...\n</code></pre>\n\n<p>That's it, now you can use it like this from your fragment/activity:</p>\n\n<pre><code>    mMyAdapter.setOnItemClickListener(new mMyAdapter.OnItemClickListener() {\n        @Override\n        public void onItemClick(MyPojo pojo) {\n            //Do whatever you want with your pojo here\n        }\n    });\n</code></pre>\n", "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "tags": ["java", "android", "recyclerview"], "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif/35730528#35730528", "question_id": 24885223, "answer_id": 35730528}, {"body": "<p>Guys use this code in Your main activity.   Very Efficient Method</p>\n\n<pre><code>RecyclerView recyclerView = (RecyclerView) findViewById(R.id.users_list);            \nUsersAdapter adapter = new UsersAdapter(users, this);\nrecyclerView.setAdapter(adapter);\nadapter.setOnCardClickListner(this);\n</code></pre>\n\n<p>Here is your Adapter class.</p>\n\n<pre><code>public class UsersAdapter extends RecyclerView.Adapter&lt;UsersAdapter.UserViewHolder&gt; {\n        private ArrayList&lt;User&gt; mDataSet;\n        OnCardClickListner onCardClickListner;\n\n\n        public UsersAdapter(ArrayList&lt;User&gt; mDataSet) {\n            this.mDataSet = mDataSet;\n        }\n\n        @Override\n        public UserViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n            View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.user_row_layout, parent, false);\n            UserViewHolder userViewHolder = new UserViewHolder(v);\n            return userViewHolder;\n        }\n\n        @Override\n        public void onBindViewHolder(UserViewHolder holder, final int position) {\n            holder.name_entry.setText(mDataSet.get(position).getUser_name());\n            holder.cardView.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View v) {\n                    onCardClickListner.OnCardClicked(v, position);\n                }\n            });\n        }\n\n        @Override\n        public int getItemCount() {\n            return mDataSet.size();\n        }\n\n        @Override\n        public void onAttachedToRecyclerView(RecyclerView recyclerView) {\n            super.onAttachedToRecyclerView(recyclerView);\n        }\n\n\n        public static class UserViewHolder extends RecyclerView.ViewHolder {\n            CardView cardView;\n            TextView name_entry;\n\n            public UserViewHolder(View itemView) {\n                super(itemView);\n                cardView = (CardView) itemView.findViewById(R.id.user_layout);\n                name_entry = (TextView) itemView.findViewById(R.id.name_entry);\n             }\n        }\n\n        public interface OnCardClickListner {\n            void OnCardClicked(View view, int position);\n        }\n\n        public void setOnCardClickListner(OnCardClickListner onCardClickListner) {\n            this.onCardClickListner = onCardClickListner;\n        }\n    }\n</code></pre>\n\n<p>After this you will get this override method in your activity.</p>\n\n<pre><code>@Override\n    public void OnCardClicked(View view, int position) {\n        Log.d(\"OnClick\", \"Card Position\" + position);\n    }\n</code></pre>\n", "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "tags": ["java", "android", "recyclerview"], "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif/35891102#35891102", "question_id": 24885223, "answer_id": 35891102}, {"body": "<p>An alternative solution is the one <a href=\"http://www.littlerobots.nl/blog/Handle-Android-RecyclerView-Clicks/\">proposed</a> by <em>Hugo Visser</em>, an Android GDE. He made a licence-free class available for you to just drop in your code and use it.</p>\n\n<p>Usage:</p>\n\n<pre><code>ItemClickSupport.addTo(mRecyclerView)\n        .setOnItemClickListener(new ItemClickSupport.OnItemClickListener() {\n    @Override\n    public void onItemClicked(RecyclerView recyclerView, int position, View v) {\n        // do it\n    }\n});\n</code></pre>\n\n<p>(it also support long item click)</p>\n\n<p>Implementation (comments added by me):</p>\n\n<pre><code>public class ItemClickSupport {\n    private final RecyclerView mRecyclerView;\n    private OnItemClickListener mOnItemClickListener;\n    private OnItemLongClickListener mOnItemLongClickListener;\n    private View.OnClickListener mOnClickListener = new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            if (mOnItemClickListener != null) {\n                // ask the RecyclerView for the viewHolder of this view.\n                // then use it to get the position for the adapter\n                RecyclerView.ViewHolder holder = mRecyclerView.getChildViewHolder(v);\n                mOnItemClickListener.onItemClicked(mRecyclerView, holder.getAdapterPosition(), v);\n            }\n        }\n    };\n    private View.OnLongClickListener mOnLongClickListener = new View.OnLongClickListener() {\n        @Override\n        public boolean onLongClick(View v) {\n            if (mOnItemLongClickListener != null) {\n                RecyclerView.ViewHolder holder = mRecyclerView.getChildViewHolder(v);\n                return mOnItemLongClickListener.onItemLongClicked(mRecyclerView, holder.getAdapterPosition(), v);\n            }\n            return false;\n        }\n    };\n    private RecyclerView.OnChildAttachStateChangeListener mAttachListener\n            = new RecyclerView.OnChildAttachStateChangeListener() {\n        @Override\n        public void onChildViewAttachedToWindow(View view) {\n            // every time a new child view is attached add click listeners to it\n            if (mOnItemClickListener != null) {\n                view.setOnClickListener(mOnClickListener);\n            }\n            if (mOnItemLongClickListener != null) {\n                view.setOnLongClickListener(mOnLongClickListener);\n            }\n        }\n\n        @Override\n        public void onChildViewDetachedFromWindow(View view) {\n\n        }\n    };\n\n    private ItemClickSupport(RecyclerView recyclerView) {\n        mRecyclerView = recyclerView;\n        // the ID must be declared in XML, used to avoid\n        // replacing the ItemClickSupport without removing\n        // the old one from the RecyclerView\n        mRecyclerView.setTag(R.id.item_click_support, this);\n        mRecyclerView.addOnChildAttachStateChangeListener(mAttachListener);\n    }\n\n    public static ItemClickSupport addTo(RecyclerView view) {\n        // if there's already an ItemClickSupport attached\n        // to this RecyclerView do not replace it, use it\n        ItemClickSupport support = (ItemClickSupport) view.getTag(R.id.item_click_support);\n        if (support == null) {\n            support = new ItemClickSupport(view);\n        }\n        return support;\n    }\n\n    public static ItemClickSupport removeFrom(RecyclerView view) {\n        ItemClickSupport support = (ItemClickSupport) view.getTag(R.id.item_click_support);\n        if (support != null) {\n            support.detach(view);\n        }\n        return support;\n    }\n\n    public ItemClickSupport setOnItemClickListener(OnItemClickListener listener) {\n        mOnItemClickListener = listener;\n        return this;\n    }\n\n    public ItemClickSupport setOnItemLongClickListener(OnItemLongClickListener listener) {\n        mOnItemLongClickListener = listener;\n        return this;\n    }\n\n    private void detach(RecyclerView view) {\n        view.removeOnChildAttachStateChangeListener(mAttachListener);\n        view.setTag(R.id.item_click_support, null);\n    }\n\n    public interface OnItemClickListener {\n\n        void onItemClicked(RecyclerView recyclerView, int position, View v);\n    }\n\n    public interface OnItemLongClickListener {\n\n        boolean onItemLongClicked(RecyclerView recyclerView, int position, View v);\n    }\n}\n</code></pre>\n\n<p>also create a file <code>values/ids.xml</code> and put this in it:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;resources&gt;\n    &lt;item name=\"item_click_support\" type=\"id\" /&gt;\n&lt;/resources&gt;\n</code></pre>\n\n<p>This class works by attaching a <code>RecyclerView.OnChildAttachStateChangeListener</code> to the <code>RecyclerView</code>. This listener is notified every time a child is attached or detached from the <code>RecyclerView</code>. The code use this to append a tap/long click listener to the view. That listener ask the <code>RecyclerView</code> for the <code>RecyclerView.ViewHolder</code> which contains the position.</p>\n\n<p>You could also adapt the code to give you back the holder itself if you need more.</p>\n\n<p>Keep in mind that it's COMPLETELY fine to handle it in your adapter by setting on each view of your list a click listener, like other answer proposed. It's just not the most efficient thing to do (you create a new listener every time you reuse a view) but it works and in most cases it's not an issue.</p>\n\n<p><strong>About the <em>Why</em> <code>RecyclerView</code> does not have an <code>onItemClickListener</code>.</strong></p>\n\n<p>The <code>RecyclerView</code> is a toolbox, in contrast of the old <code>ListView</code> it has less build in features and more flexibility. The <code>onItemClickListener</code> is not the only feature being removed from ListView. But it has lot of listeners and method to extend it to your liking, it's far more powerful in the right hands ;).</p>\n\n<p>In my opinion the most complex feature removed in <code>RecyclerView</code> is the <em>Fast Scroll</em>. Most of the other features can be easily re-implemented.</p>\n", "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "tags": ["java", "android", "recyclerview"], "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif/35917564#35917564", "question_id": 24885223, "answer_id": 35917564}, {"body": "<p>Yes you can</p>\n\n<pre><code>public ViewHolder onCreateViewHolder(ViewGroup parent,int viewType) {\n\n    //inflate the view \n\n    View view = LayoutInflator.from(parent.getContext()).inflate(R.layout.layoutID,null);\n\n    ViewHolder holder = new ViewHolder(view);\n\n    //here we can set onClicklistener\n    view.setOnClickListener(new  View.OnClickListeener(){\n        public void onClick(View v)\n        {\n            //action\n        }\n    });\n\nreturn holder;\n</code></pre>\n", "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "tags": ["java", "android", "recyclerview"], "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif/38628786#38628786", "question_id": 24885223, "answer_id": 38628786}, {"body": "<p>Here you can handle multiple onclick see below code and it is very efficient  </p>\n\n<pre><code>    public class RVNewsAdapter extends RecyclerView.Adapter&lt;RVNewsAdapter.FeedHolder&gt; {\n\n    private Context context;\n    List&lt;News&gt; newsList;\n    // Allows to remember the last item shown on screen\n    private int lastPosition = -1;\n\n    public RVNewsAdapter(List&lt;News&gt; newsList, Context context) {\n        this.newsList = newsList;\n        this.context = context;\n    }\n\n    public static class FeedHolder extends RecyclerView.ViewHolder implements OnClickListener {\n\n        ImageView img_main;\n        TextView tv_title;\n        Button bt_facebook, bt_twitter, bt_share, bt_comment;\n\n\n        public FeedHolder(View itemView) {\n            super(itemView);\n\n            img_main = (ImageView) itemView.findViewById(R.id.img_main);\n            tv_title = (TextView) itemView.findViewById(R.id.tv_title);\n            bt_facebook = (Button) itemView.findViewById(R.id.bt_facebook);\n            bt_twitter = (Button) itemView.findViewById(R.id.bt_twitter);\n            bt_share = (Button) itemView.findViewById(R.id.bt_share);\n            bt_comment = (Button) itemView.findViewById(R.id.bt_comment);\n\n            img_main.setOnClickListener(this);\n            bt_facebook.setOnClickListener(this);\n            bt_twitter.setOnClickListener(this);\n            bt_comment.setOnClickListener(this);\n            bt_share.setOnClickListener(this);\n\n        }\n\n\n        @Override\n        public void onClick(View v) {\n\n            if (v.getId() == bt_comment.getId()) {\n\n                Toast.makeText(v.getContext(), \"Comment  \" , Toast.LENGTH_SHORT).show();\n\n            } else if (v.getId() == bt_facebook.getId()) {\n\n                Toast.makeText(v.getContext(), \"Facebook  \" , Toast.LENGTH_SHORT).show();\n\n            } else if (v.getId() == bt_twitter.getId()) {\n\n                Toast.makeText(v.getContext(), \"Twitter  \" , Toast.LENGTH_SHORT).show();\n\n            } else if (v.getId() == bt_share.getId()) {\n\n                Toast.makeText(v.getContext(), \"share  \" , Toast.LENGTH_SHORT).show();\n\n            }\n            else {\n                Toast.makeText(v.getContext(), \"ROW PRESSED = \" + String.valueOf(getAdapterPosition()), Toast.LENGTH_SHORT).show();\n            }\n        }\n    }\n\n    @Override\n    public void onAttachedToRecyclerView(RecyclerView recyclerView) {\n        super.onAttachedToRecyclerView(recyclerView);\n    }\n\n    @Override\n    public FeedHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.feed_row, parent, false);\n        FeedHolder feedHolder = new FeedHolder(view);\n\n        return feedHolder;\n    }\n\n    @Override\n    public void onBindViewHolder(FeedHolder holder, int position) {\n\n        holder.tv_title.setText(newsList.get(position).getTitle());\n\n\n        // Here you apply the animation when the view is bound\n        setAnimation(holder.img_main, position);\n    }\n\n    @Override\n    public int getItemCount() {\n        return newsList.size();\n    }\n\n\n    /**\n     * Here is the key method to apply the animation\n     */\n    private void setAnimation(View viewToAnimate, int position) {\n        // If the bound view wasn't previously displayed on screen, it's animated\n        if (position &gt; lastPosition) {\n            Animation animation = AnimationUtils.loadAnimation(context, android.R.anim.slide_in_left);\n            viewToAnimate.startAnimation(animation);\n            lastPosition = position;\n        }\n    }\n\n\n}\n</code></pre>\n", "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "tags": ["java", "android", "recyclerview"], "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif/38790050#38790050", "question_id": 24885223, "answer_id": 38790050}, {"body": "<p>use <a href=\"https://github.com/janishar/PlaceHolderView\" rel=\"nofollow\">PlaceHolderView</a> </p>\n\n<pre><code>@Layout(R.layout.item_view_1)\npublic class View1{\n\n    @View(R.id.txt)\n    public TextView txt;\n\n    @Resolve\n    public void onResolved() {\n        txt.setText(String.valueOf(System.currentTimeMillis() / 1000));\n    }\n\n    @Click(R.id.btn)\n    public void onClick(){\n        txt.setText(String.valueOf(System.currentTimeMillis() / 1000));\n    }\n}\n</code></pre>\n", "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "tags": ["java", "android", "recyclerview"], "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif/39034715#39034715", "question_id": 24885223, "answer_id": 39034715}, {"body": "<p>I was looking for the solution but it is complicated for me to understand since I'm not an expert. So I tried some trick and it works fine.</p>\n\n<ol>\n<li>Add Button on the custom row and set alpha to 0.</li>\n</ol>\n\n<p>\n</p>\n\n<pre><code>    &lt;Button\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"100dp\"\n        android:id=\"@+id/button\"\n        android:alpha=\"0\"/&gt;\n    &lt;TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Text\"\n        android:id=\"@+id/textView\"\n        android:layout_margin=\"5dp\"\n        android:textSize=\"30dp\"\n        android:textStyle=\"bold\"\n        /&gt;\n</code></pre>\n\n<p></p>\n\n<ol start=\"2\">\n<li>Add button object on ViewHolder class</li>\n</ol>\n\n<p>public class ViewHolder extends RecyclerView.ViewHolder{</p>\n\n<pre><code>    TextView textView;\n    Button button;\n\n    public ViewHolder(View itemView) {\n        super(itemView);\n\n        textView = (TextView) itemView.findViewById(R.id.textView);\n        button = (Button) itemView.findViewById(R.id.button);\n\n    }\n}\n</code></pre>\n\n<ol start=\"3\">\n<li>Add Button onClick event on onBindViewHolder.</li>\n</ol>\n\n<p>@Override\n    public void onBindViewHolder(ViewHolder holder, final int position) {</p>\n\n<pre><code>    holder.textView.setText(singers[position]);\n    holder.button.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n\n            Toast.makeText(context, \"\" + singers[position], Toast.LENGTH_SHORT).show();\n        }\n    });\n}\n</code></pre>\n", "title": "Why doesn&#39;t RecyclerView have onItemClickListener()? And how RecyclerView is different from Listview?", "tags": ["java", "android", "recyclerview"], "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif/39168653#39168653", "question_id": 24885223, "answer_id": 39168653}], "creation_date": 1406025819, "score": 519, "link": "http://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif", "question_id": 24885223}, {"body": "<p>I'm a newbie to Java programming, trying to get the hang of OOP.</p>\n\n<p>So I built this abstract class:</p>\n\n<pre><code>public abstract class Vehicle{....}\n</code></pre>\n\n<p>and 2 subclasses:</p>\n\n<pre><code>public class Car extends Vehicle{....}\npublic class Boat extends Vehicle{....}\n</code></pre>\n\n<p><code>Car</code> and <code>Boat</code> also hold some unique fields and methods that aren't common (don't have the same name, so I can't define an abstract method for them in Vehicle).</p>\n\n<p>Now in mainClass I have setup my new Garage:</p>\n\n<pre><code>Vehicle[] myGarage= new Vehicle[10];\nmyGarage[0]=new Car(2,true);\nmyGarage[1]=new Boat(4,600);\n</code></pre>\n\n<p>I was very happy with polymorphism until I tried to access one of the fields that are unique to Car, such as:</p>\n\n<pre><code>boolean carIsAutomatic = myGarage[0].auto;\n</code></pre>\n\n<p>The compiler doesn't accept that. I worked around this issue using casting:</p>\n\n<pre><code>boolean carIsAutomatic = ((Car)myGarage[0]).auto;\n</code></pre>\n\n<p>That works... but it doesn't help with methods, just fields. Meaning I can't do</p>\n\n<pre><code>(Car)myGarage[0].doSomeCarStuff();\n</code></pre>\n\n<p>So my question is - what do I really have in my garage? I'm trying to get the intuition as well as understand what's going on \"behind the scenes\".</p>\n\n<hr>\n\n<p>for the sake of future readers, a short summary of the answers below:</p>\n\n<ol>\n<li>Yes, there's a <code>Car</code> in <code>myGarage[]</code></li>\n<li>Being a static typed language, the Java compiler will not lend access to methods/fields that are non-\"Vehicle\", if accessing those through a data structure based on the Vehicle super class( such as <code>Vehicle myGarage[]</code>)</li>\n<li>As for how to solve, there are 2 main approaches below:\n<ol>\n<li>Use type casting, which will ease the compiler's concerns and leave any errors in the design to run time</li>\n<li>The fact that I need casting says the design is flawed. If I need access to non-Vehicle capabilities then I shouldn't be storing the Cars and Boats in a Vehicle based data structure. Either make all those capabilities belong to Vehicle, or use more specific (derived) type based structures</li>\n</ol></li>\n<li>In many cases, composition and/or interfaces would be a better alternative to inheritance. Probably the subject of my next question...</li>\n<li>Plus many other good insights down there, if one does have the time to browse through the answers. </li>\n</ol>\n", "tags": ["java", "inheritance"], "title": "Do I really have a car in my garage?", "answers": [{"body": "<p>You garage contains Vehicles, so the compiler static control view that you have a Vehicle and as .auto is a Car field you can't access it, dynamically it is a Car so the cast don't create some problem, if it will be a Boat and you try to make cast to Car will rise an exception on runtime.</p>\n", "title": "Do I really have a car in my garage?", "tags": ["java", "inheritance"], "link": "http://stackoverflow.com/questions/24883075/do-i-really-have-a-car-in-my-garage/24883183#24883183", "question_id": 24883075, "answer_id": 24883183}, {"body": "<p>If you operate on the base type, you can only access public methods and fields of it.</p>\n\n<p>If you want to access the extended type, but have a field of the base type where it's stored (as in your case), you first have to cast it and then you can access it:</p>\n\n<pre><code>Car car = (Car)myGarage[0];\ncar.doSomeCarStuff();\n</code></pre>\n\n<p>Or shorter without temp field:</p>\n\n<pre><code>((Car)myGarage[0]).doSomeCarStuff();\n</code></pre>\n\n<p>Since you are using <code>Vehicle</code> objects, you can only call methods from the base class on them without casting. So for your garage it may be advisable to distinguish the objects in different arrays - or better lists - an array is often not a good idea, since it's far less flexible in handling than a <code>Collection</code>-based class.</p>\n", "title": "Do I really have a car in my garage?", "tags": ["java", "inheritance"], "link": "http://stackoverflow.com/questions/24883075/do-i-really-have-a-car-in-my-garage/24883197#24883197", "question_id": 24883075, "answer_id": 24883197}, {"body": "<p>You defined that your garage will store vehicles, so you do not care what type of vehicles you have. The vehicles have common features like engine, wheel, behavior like moving. \nThe actual representation of these features might be different, but at abstract layer are the same. \nYou used abstract class which means that some attributes, behaviors are exactly the same by both vehicle. If you want to express that your vehicles have common abstract features then use interface like moving might mean different by car and boat. Both can get from point A to point B, but in a different way (on wheel or on water - so the implementation will be different)\nSo you have vehicles in the garage which behave the same way and you do not car about the specific features of them.</p>\n\n<p>To answer the comment:</p>\n\n<p>Interface means a contract which describes how to communicate with the outer world. In the contract you define that your vehicle can move, can be steered, but you do not describe how it will actually work, it is described in the implementation.By abstract class you might have functions where you share some implementation, but you also have function which you do not know how it will be implemented.</p>\n\n<p>One example of using abstract class:</p>\n\n<pre><code>    abstract class Vehicle {\n\n    protected abstract void identifyWhereIAm();\n    protected abstract void startEngine();\n    protected abstract void driveUntilIArriveHome();\n    protected abstract void stopEngine();\n\n    public void navigateToHome() {\n        identifyWhereIAm();\n        startEngine();\n        driveUntilIArriveHome();\n        stopEngine();\n    } \n}\n</code></pre>\n\n<p>You will use the same steps by each vehicle, but the implementation of the steps will differ by vehicle type. Car might use GPS, boat might use sonar to identify where it is.</p>\n", "title": "Do I really have a car in my garage?", "tags": ["java", "inheritance"], "link": "http://stackoverflow.com/questions/24883075/do-i-really-have-a-car-in-my-garage/24883214#24883214", "question_id": 24883075, "answer_id": 24883214}, {"body": "<p>To answer your question you can find out what exactly is in your garage you do the following:</p>\n\n<pre><code>Vehicle v = myGarage[0];\n\nif (v instanceof Car) {\n   // This vehicle is a car\n   ((Car)v).doSomeCarStuff();\n} else if(v instanceof Boat){\n   // This vehicle is a boat\n   ((Boat)v).doSomeBoatStuff();\n}\n</code></pre>\n\n<p>UPDATE: As you can read from the comments below, this method is okay for simple solutions but it is not good practice, particularly if you have a huge number of vehicles in your garage. So use it only if you know the garage will stay small. If that's not the case, search for \"Avoiding instanceof\" on stack overflow, there are multiple ways to do it.</p>\n", "title": "Do I really have a car in my garage?", "tags": ["java", "inheritance"], "link": "http://stackoverflow.com/questions/24883075/do-i-really-have-a-car-in-my-garage/24883263#24883263", "question_id": 24883075, "answer_id": 24883263}, {"body": "<p>If you need to make the difference between <code>Car</code> and <code>Boat</code> in your garage, then you should store them in distinct structures.</p>\n\n<p>For instance:</p>\n\n<pre><code>public class Garage {\n    private List&lt;Car&gt; cars;\n    private List&lt;Boat&gt; boats;\n}\n</code></pre>\n\n<p>Then you can define methods that are specific on boats or specific on cars.</p>\n\n<h2>Why have polymorphism then?</h2>\n\n<p>Let's say <code>Vehicle</code> is like:</p>\n\n<pre><code>public abstract class Vehicle {\n   protected int price;\n   public getPrice() { return price; }\n   public abstract int getPriceAfterYears(int years);\n}\n</code></pre>\n\n<p>Every <code>Vehicle</code> has a price so it can be put inside the <code>Vehicle</code> abstract class.</p>\n\n<p>Yet, the formula determining the price after n years depends on the vehicle, so it left to the implementing class to define it. For instance:</p>\n\n<pre><code>public Car extends Vehicle {\n    // car specific\n    private boolean automatic;\n    @Override\n    public getPriceAfterYears(int years) {\n        // losing 1000$ every year\n        return Math.max(0, this.price - (years * 1000));  \n    }\n}\n</code></pre>\n\n<p>The <code>Boat</code> class may have an other definition for <code>getPriceAfterYears</code> and specific attributes and methods.</p>\n\n<p>So now back in the <code>Garage</code> class, you can define:</p>\n\n<pre><code>// car specific\npublic int numberOfAutomaticCars() {\n    int s = 0;\n    for(Car car : cars) {\n        if(car.isAutomatic()) {\n            s++;\n        }\n    }\n    return s;\n}\npublic List&lt;Vehicle&gt; getVehicles() {\n    List&lt;Vehicle&gt; v = new ArrayList&lt;&gt;(); // init with sum\n    v.addAll(cars);\n    v.addAll(boats);\n    return v;\n}\n// all vehicles method\npublic getAveragePriceAfterYears(int years) {\n    List&lt;Vehicle&gt; vehicules = getVehicles();\n    int s = 0;\n    for(Vehicle v : vehicules) {\n        // call the implementation of the actual type!\n        s += v.getPriceAfterYears(years);  \n    }\n    return s / vehicules.size();\n}\n</code></pre>\n\n<p>The interest of polymorphism is to be able to call <code>getPriceAfterYears</code> on a <code>Vehicle</code> <strong>without</strong> caring about the implementation.</p>\n\n<p>Usually, downcasting is a sign of a flawed design: do not store your vehicles all together if you need to differenciate their actual type.</p>\n\n<p>Note: of course the design here can be easily improved. It is just an example to demonstrate the points.</p>\n", "title": "Do I really have a car in my garage?", "tags": ["java", "inheritance"], "link": "http://stackoverflow.com/questions/24883075/do-i-really-have-a-car-in-my-garage/24884027#24884027", "question_id": 24883075, "answer_id": 24884027}, {"body": "<p>Your problem here is at a more fundamental level: you built <code>Vehicle</code> in such a way that <code>Garage</code> needs to know more about its objects than the <code>Vehicle</code> interface gives away. You should try and build the <code>Vehicle</code> class from the <code>Garage</code> perspective (and in general from the perspective of everything that's going to use <code>Vehicle</code>): what kind of things do they need to do with their vehicles? How can I make those things possible with my methods?</p>\n\n<p>For example, from your example:</p>\n\n<pre><code>bool carIsAutomatic = myGarage[0].auto;\n</code></pre>\n\n<p>Your garage want to know about a vehicle's engine for... reasons? Anyway, there is no need for this to be just exposed by <code>Car</code>. You can still expose an unimplemented <code>isAutomatic()</code> method in <code>Vehicle</code>, then implement it as <code>return True</code> in <code>Boat</code> and <code>return this.auto</code> in <code>Car</code>.</p>\n\n<p>It would be even better to have a three-valued <code>EngineType</code> enum (<code>HAS_NO_GEARS</code>, <code>HAS_GEARS_AUTO_SHIFT</code>, <code>HAS_GEARS_MANUAL_SHIFT</code>), which would let your code reason on the actual characteristics of a generic <code>Vehicle</code> cleanly and accurately. (You'd need this distinction to handle motorbikes, anyway.)</p>\n", "title": "Do I really have a car in my garage?", "tags": ["java", "inheritance"], "link": "http://stackoverflow.com/questions/24883075/do-i-really-have-a-car-in-my-garage/24892448#24892448", "question_id": 24883075, "answer_id": 24892448}, {"body": "<blockquote>\n  <p>I'm a newbie to Java programming, trying to get the hang of OOP.</p>\n</blockquote>\n\n<p>Just my 2 cents \u2014 I will try to make it short as many interesting things have already been said. But, in fact, there is two questions here. One about \"OOP\" and one about how it is implemented in Java.</p>\n\n<p>First of all, yes, you <em>have</em> a car in your garage. So your assumptions are right. But, Java is a <strong>statically typed</strong> language. And the type system in the compiler can only \"know\" the type of your various object by their corresponding <em>declaration</em>. Not by their usage. If you have an array of <code>Vehicle</code>, the compiler only knows that. So it will check that you only perform operation allowed on <em>any</em> <code>Vehicle</code>. (In other words, <em>methods</em> and <em>attributes</em> visible in the <code>Vehicle</code> declaration).</p>\n\n<p>You can explain to the compiler that <em>\"you in fact know this <code>Vehicle</code> is a <code>Car</code>\"</em>, by using an explicit cast <code>(Car)</code>. the compiler will believe you -- even if <em>in Java</em> there is a check at run-time, that might lead to a <code>ClassCastException</code> that prevent further damages if you <em>lied</em> <sub>(other language like C++ won't check at run-time - you have to know what you do)</sub></p>\n\n<p>Finally, if you really need, you might rely of run-time type identification (i.e.: <code>instanceof</code>) to check the \"real\" type of an object before attempting to cast it. But this is mostly considered as a bad practice in Java.</p>\n\n<p>As I said, this is the Java way of implementing OOP. There is whole different <del>class</del> <em>family</em> of languages broadly known as <em>\"dynamic languages\"</em>, that <em>only check at run-time</em> if an operation is allowed on an object or not. With those languages, you don't need to \"move up\" all the common methods to some (possibly abstract) base class to satisfy the type system. This is called <a href=\"http://en.wikipedia.org/wiki/Duck_typing\" rel=\"nofollow\">duck typing</a>.</p>\n", "title": "Do I really have a car in my garage?", "tags": ["java", "inheritance"], "link": "http://stackoverflow.com/questions/24883075/do-i-really-have-a-car-in-my-garage/24910997#24910997", "question_id": 24883075, "answer_id": 24910997}, {"body": "<p>You asked your butler:</p>\n\n<blockquote>\n  <p>Jeeves, remember my garage on the Isle of Java? Go check whether the first vehicle parked there is automatic.</p>\n</blockquote>\n\n<p>and lazy Jeeves said:</p>\n\n<blockquote>\n  <p>but sir, what if it's a vehicle that can't be automatic or non-automatic?</p>\n</blockquote>\n\n<p>That's all.</p>\n\n<p><sub>Ok, that's not really all since reality is more duck-typed than statically typed. That's why I said Jeeves is lazy.</sub></p>\n", "title": "Do I really have a car in my garage?", "tags": ["java", "inheritance"], "link": "http://stackoverflow.com/questions/24883075/do-i-really-have-a-car-in-my-garage/24915947#24915947", "question_id": 24883075, "answer_id": 24915947}, {"body": "<p>I'm really just pooling the ideas of the others here (and I'm not a Java guy, so this is pseudo rather than actual) but, in this contrived example, I would abstract my car checking approach into a dedicated class, that only knows about cars and only cares about cars when looking at garages:</p>\n\n<pre><code>abstract class Vehicle { \n    public abstract string getDescription() ;\n}\n\nclass Transmission {\n    public Transmission(bool isAutomatic) {\n        this.isAutomatic = isAutomatic;\n    }\n    private bool isAutomatic;\n    public bool getIsAutomatic() { return isAutomatic; }\n}\n\nclass Car extends Vehicle {\n    @Override\n    public string getDescription() { \n        return \"a car\";\n    }\n\n    private Transmission transmission;\n\n    public Transmission getTransmission() {\n        return transmission;\n    }\n}\n\nclass Boat extends Vehicle {\n    @Override\n    public string getDescription() {\n        return \"a boat\";\n    }\n}\n\npublic enum InspectionBoolean {\n    FALSE, TRUE, UNSUPPORTED\n}\n\npublic class CarInspector {\n    public bool isCar(Vehicle v) {\n        return (v instanceof Car);\n    }\n    public bool isAutomatic(Car car) {\n        Transmission t = car.getTransmission();\n        return t.getIsAutomatic();\n    }\n    public bool isAutomatic(Vehicle vehicle) {\n        if (!isCar(vehicle)) throw new UnsupportedVehicleException();\n        return isAutomatic((Car)vehicle);\n    }\n    public InspectionBoolean isAutomatic(Vehicle[] garage, int bay) {\n        if (!isCar(garage[bay])) return InspectionBoolean.UNSUPPORTED;\n        return isAutomatic(garage[bay]) \n             ? InspectionBoolean.TRUE\n             : InspectionBoolean.FALSE;\n    }\n}\n</code></pre>\n\n<p>Point is, you've already decided you only care about cars when you ask about the car's transmission.  So just ask the CarInspector.  Thanks to the tri-state Enum, you can now know whether it is automatic or even if it is not a car.</p>\n\n<p>Of course, you'll need different VehicleInspectors for each vehicle you care about.  And you have just pushed the problem of which VehicleInspector to instantiate up the chain.</p>\n\n<p>So instead, you might want to look at interfaces.</p>\n\n<p>Abstract <code>getTransmission</code> out to an interface (e.g. <code>HasTransmission</code>).  That way, you can check if a vehicle has a transmission, or write an TransmissionInspector:</p>\n\n<pre><code>abstract class Vehicle { }\n\nclass Transmission {\n    public Transmission(bool isAutomatic) {\n        this.isAutomatic = isAutomatic;\n    }\n    private bool isAutomatic;\n    public bool getIsAutomatic() { return isAutomatic; }\n}\n\ninterface HasTransmission { \n    Transmission getTransmission(); \n}\n\nclass Car extends Vehicle, HasTransmission {\n    private Transmission transmission;\n\n    @Override\n    public Transmission getTransmission() {\n        return transmission;\n    }\n}\n\nclass Bus extends Vehicle, HasTransmission {\n    private Transmission transmission;\n\n    @Override\n    public Transmission getTransmission() {\n        return transmission;\n    }\n}\n\nclass Boat extends Vehicle { }\n\nenum InspectionBoolean {\n    FALSE, TRUE, UNSUPPORTED\n}\n\nclass TransmissionInspector {\n    public bool hasTransmission(Vehicle v) {\n        return (v instanceof HasTransmission);\n    }\n    public bool isAutomatic(HasTransmission h) {\n        Transmission t = h.getTransmission();\n        return t.getIsAutomatic();\n    }\n    public bool isAutomatic(Vehicle v) {\n        if (!hasTranmission(v)) throw new UnsupportedVehicleException();\n        return isAutomatic((HasTransmission)v);\n    }\n    public InspectionBoolean isAutomatic(Vehicle[] garage, int bay) {\n        if (!hasTranmission(garage[bay])) return InspectionBoolean.UNSUPPORTED;\n        return isAutomatic(garage[bay]) \n             ? InspectionBoolean.TRUE\n             : InspectionBoolean.FALSE;\n    }\n}\n</code></pre>\n\n<p>Now you are saying, you only about transmission, regardless of Vehicle, so can ask the TransmissionInspector.  Both the bus and the car can be inspected by the TransmissionInspector, but it can only ask about the transmission.</p>\n\n<p>Now, you might decide that boolean values are not all you care about.  At that point, you might prefer to use a generic Supported type, that exposes both the supported state and the value:</p>\n\n<pre><code>class Supported&lt;T&gt; {\n    private bool supported = false;\n    private T value;\n\n    public Supported() { }\n    public Supported(T value) { \n        this.isSupported = true;\n        this.value = value; \n    }\n\n    public bool isSupported() { return supported; }\n    public T getValue() { \n        if (!supported) throw new NotSupportedException();\n        return value;\n    }\n}\n</code></pre>\n\n<p>Now your Inspector might be defined as:</p>\n\n<pre><code>class TransmissionInspector {\n    public Supported&lt;bool&gt; isAutomatic(Vehicle[] garage, int bay) {\n        if (!hasTranmission(garage[bay])) return new Supported&lt;bool&gt;();\n        return new Supported&lt;bool&gt;(isAutomatic(garage[bay]));\n    }\n\n    public Supported&lt;int&gt; getGearCount(Vehicle[] garage, int bay) {\n        if (!hasTranmission(garage[bay])) return new Supported&lt;int&gt;();\n        return new Supported&lt;int&gt;(getGearCount(garage[bay]));\n    }\n}\n</code></pre>\n\n<p>As I've said, I'm not a Java guy, so some of the syntax above may be wrong, but the concepts should hold.  Nevertheless, don't run the above anywhere important without testing it first.</p>\n", "title": "Do I really have a car in my garage?", "tags": ["java", "inheritance"], "link": "http://stackoverflow.com/questions/24883075/do-i-really-have-a-car-in-my-garage/24921530#24921530", "question_id": 24883075, "answer_id": 24921530}, {"body": "<p><strong>Create</strong> Vehicle level fields that will help make each individual Vehicle more distinct.</p>\n\n<pre><code>public abstract class Vehicle {\n    public final boolean isCar;\n    public final boolean isBoat;\n\n    public Vehicle (boolean isCar, boolean isBoat) {\n        this.isCar  = isCar;\n        this.isBoat = isBoat;\n    }\n}\n</code></pre>\n\n<p><strong>Set</strong> the Vehicle level fields in the inheriting class to the appropriate value.</p>\n\n<pre><code>public class Car extends Vehicle {\n    public Car (...) {\n        super(true, false);\n        ...\n    }\n}\n\npublic class Boat extends Vehicle {\n    public Boat (...) {\n        super(false, true);\n        ...\n    }\n}\n</code></pre>\n\n<p><b>Implement</b> using the Vehicle level fields to properly decipher the vehicle type.</p>\n\n<pre><code>boolean carIsAutomatic = false;\n\nif (myGarage[0].isCar) {\n    Car car = (Car) myGarage[0];\n    car.carMethod();\n    carIsAutomatic = car.auto;\n}\n\nelse if (myGarage[0].isBoat) {\n    Boat boat = (Boat) myGarage[0];\n    boat.boatMethod();\n}\n</code></pre>\n\n<p>Since your telling your compiler that everything in your garage is a Vehicle, your stuck with the Vehicle class level methods and fields. If you want to properly decipher the Vehicle type, then you should set some class level fields e.g. <code>isCar</code> and <code>isBoat</code> that will give you the programmer a better understanding of what type of Vehicle you are using. </p>\n\n<p>Java is a type safe language so its best to always type check before handling data that has been casted like your <code>Boat</code>s and <code>Car</code>s.</p>\n", "title": "Do I really have a car in my garage?", "tags": ["java", "inheritance"], "link": "http://stackoverflow.com/questions/24883075/do-i-really-have-a-car-in-my-garage/24962993#24962993", "question_id": 24883075, "answer_id": 24962993}, {"body": "<p>If you are on Java, could use reflections to check if a function is available and execute it, too</p>\n", "title": "Do I really have a car in my garage?", "tags": ["java", "inheritance"], "link": "http://stackoverflow.com/questions/24883075/do-i-really-have-a-car-in-my-garage/24964343#24964343", "question_id": 24883075, "answer_id": 24964343}, {"body": "<p>This is a good place for application of the <code>Visitor</code> design pattern.</p>\n\n<p>The beauty of this pattern is you can call unrelated code on different subclasses of a superclass without having to do weird casts everywhere or putting tons of unrelated methods into the superclass.</p>\n\n<p>This works by creating a <code>Visitor</code> object and allowing our <code>Vehicle</code> class to <code>accept()</code> the visitor.</p>\n\n<p>You can also create many types of <code>Visitor</code> and call unrelated code using the same methods, just a different <code>Visitor</code> implementation, which makes this design pattern very powerful when creating clean classes.</p>\n\n<p>A demo for example:</p>\n\n<pre><code>public class VisitorDemo {\n\n    // We'll use this to mark a class visitable.\n    public static interface Visitable {\n\n        void accept(Visitor visitor);\n    }\n\n    // This is the visitor\n    public static interface Visitor {\n\n        void visit(Boat boat);\n\n        void visit(Car car);\n\n    }\n\n    // Abstract\n    public static abstract class Vehicle implements Visitable {\n\n            // NO OTHER RANDOM ABSTRACT METHODS!\n\n    }\n\n    // Concrete\n    public static class Car extends Vehicle {\n\n        public void doCarStuff() {\n            System.out.println(\"Doing car stuff\");\n        }\n\n        @Override\n        public void accept(Visitor visitor) {\n            visitor.visit(this);\n        }\n\n    }\n\n    // Concrete\n    public static class Boat extends Vehicle {\n\n        public void doBoatStuff() {\n            System.out.println(\"Doing boat stuff\");\n        }\n\n        @Override\n        public void accept(Visitor visitor) {\n            visitor.visit(this);\n        }\n\n    }\n\n    // Concrete visitor\n    public static class StuffVisitor implements Visitor {\n\n        @Override\n        public void visit(Boat boat) {\n            boat.doBoatStuff();\n        }\n\n        @Override\n        public void visit(Car car) {\n            car.doCarStuff();\n        }\n    }\n\n    public static void main(String[] args) {\n        // Create our garage\n        Vehicle[] garage = {\n            new Boat(),\n            new Car(),\n            new Car(),\n            new Boat(),\n            new Car()\n        };\n\n        // Create our visitor\n        Visitor visitor = new StuffVisitor();\n\n        // Visit each item in our garage in turn\n        for (Vehicle v : garage) {\n            v.accept(visitor);\n        }\n    }\n\n}\n</code></pre>\n\n<p>As you can see, <code>StuffVisitor</code> allows you to call different code on <code>Boat</code> or <code>Car</code> depending on which implementation of <code>visit</code> is called. You can also create other implementations of the Visitor to call different code with the same <code>.visit()</code> pattern.</p>\n\n<p>Also notice that using this method, there is no use of <code>instanceof</code> or any hacky class checking. The only duplicated code between classes is the method <code>void accept(Visitor)</code>.</p>\n\n<p>If you want to support 3 types of concrete subclasses for example, you can just add that implementation into the <code>Visitor</code> interface too.</p>\n", "title": "Do I really have a car in my garage?", "tags": ["java", "inheritance"], "link": "http://stackoverflow.com/questions/24883075/do-i-really-have-a-car-in-my-garage/24968446#24968446", "question_id": 24883075, "answer_id": 24968446}, {"body": "<p>Modeling objects you want to present in a program (in order to solve some problem) is one thing, coding is another story. In your code, I think essentially it's inappropriate to model a garage using array. Arrays shouldn't be often considered as objects, although they do <em>appear</em> to be, usually for the sake of self-contained-ness sort of <em>integrity</em> of a language and providing some familiarity, but array as a type is really just a computer-specific thing, IMHO, especially in Java, where you can't extend arrays.</p>\n\n<p>I understand that correctly modeling a class to represent a garage won't help answer your \"cars in a garage\" question; just a piece of advice.</p>\n\n<p>Head back to the code. Other than getting some hang to OOP, a few questions would be helpful creating a scene hence to better understand the problem you want to resolve (assuming there is one, not just \"getting some hang\"):</p>\n\n<ol>\n<li>Who or what wants to understand <code>carIsAutomatic</code>?</li>\n<li>Given <code>carIsAutomatic</code>, who or what would perform <code>doSomeCarStuff</code>?</li>\n</ol>\n\n<p>It might be some inspector, or someone who knows only how to drive auto-transmission cars, etc., but from the garage's perspective, all it knows is it holds some vehicle, therefore (in this model) it is the responsibility of this inspector or driver to tell if it's a car or a boat; at this moment, you may want to start creating another bunch of classes to represent similar types of *actor*s in the scene. Depends on the problem to be resolved, if you really have to, you can model the garage to be a super intelligent system so it behaves like a vending machine, instead of a regular garage, that has a button says \"Car\" and another says \"Boat\", so that people can push the button to get a car or a boat as they want, which in turn makes this super intelligent garage responsible for telling what (a car or a boat) should be presented to its users; to follow this improvisation, the garage may require some bookkeeping when it accepts a vehicle, someone may have to provide the information, etc., all these responsibilities go beyond a simple <em>Main</em> class.</p>\n\n<p>Having said this much, certainly I understand all the troubles, along with the boilerplates, to code an OO program, especially when the problem it tries to resolve is very simple, but OO is indeed a feasible way to resolve many other problems. From my experience, with some input providing use cases, people start to design scenes how objects would interact with each other, categorize them into classes (as well as interfaces in Java), then use something like your <em>Main</em> class to bootstrap the <em>world</em>.</p>\n", "title": "Do I really have a car in my garage?", "tags": ["java", "inheritance"], "link": "http://stackoverflow.com/questions/24883075/do-i-really-have-a-car-in-my-garage/24992299#24992299", "question_id": 24883075, "answer_id": 24992299}], "creation_date": 1406019669, "score": 255, "link": "http://stackoverflow.com/questions/24883075/do-i-really-have-a-car-in-my-garage", "question_id": 24883075}, {"body": "<p>I am unable to start my Android Studio for Android development on Mac OS (10.10.1 - Yosemite)</p>\n", "tags": ["java", "android", "osx", "android-studio"], "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "answers": [{"body": "<p>Just install this guy here</p>\n\n<p><a href=\"http://support.apple.com/kb/DL1572?viewlocale=en_US&amp;locale=en_US\">http://support.apple.com/kb/DL1572?viewlocale=en_US&amp;locale=en_US</a></p>\n\n<p>and you should be good. </p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27369494#27369494", "question_id": 27369269, "answer_id": 27369494}, {"body": "<p>Open the application package for <em>Android Studio</em> in finder, and edit the <strong>Info.plist</strong> file. Change the key JVMversion. Put 1.6+ instead of 1.6*. That worked for me!.</p>\n\n<p>Cheers!</p>\n\n<p>Edited:</p>\n\n<p>While this was necessary in older versions of Android Studio, this is no longer recommended. See the official statement </p>\n\n<p><strong>\"Please note: Do not edit Info.plist to pick a different version. That will break not only the application signature, but also future patch updates to your installation.\"</strong> </p>\n\n<p>Antonio Jose's <a href=\"http://stackoverflow.com/a/27370525/906523\">answer</a> is the correct one.</p>\n\n<p>Thanks aried3r!</p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27369596#27369596", "question_id": 27369269, "answer_id": 27369596}, {"body": "<p>Edit the android studio's Info.plist file in the package so that it uses 1.7 or whatever JVMVersion you have installed. Changing the JVMVersion to 1.6+ instead of 1.6* as hasternet answered above should work too.</p>\n\n<p>The above works but is not recommended see <a href=\"http://tools.android.com/recent/androidstudio1rc3_releasecandidate3released\" rel=\"nofollow\">RC3 Release Notes</a> </p>\n\n<blockquote>\n  <p>As of RC 3, we have a better mechanism for customizing properties for\n  the launchers on all three platforms. <strong><em>You should not edit any files in\n  the IDE installation directory</em></strong>. Instead, you can customize the\n  attributes by creating your own .properties or .vmoptions files in the\n  following directories. (This has been possible on some platforms\n  before, but it required you to copy and change the entire contents of\n  the files. With the latest changes these properties are now additive\n  instead such that you can set just the attributes you care about, and\n  the rest will use the defaults from the IDE installation).</p>\n</blockquote>\n\n<p>see <a href=\"http://stackoverflow.com/questions/20925253/android-studio-failed-to-load-jvm-on-mac-osx-mavericks\">Android Studio failed to load JVM on Mac OSX (Mavericks)</a></p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27369774#27369774", "question_id": 27369269, "answer_id": 27369774}, {"body": "\n\n<p>Change this key in the <code>Info.plist</code> </p>\n\n<p>I changed from</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;key&gt;JVMVersion&lt;/key&gt;\n&lt;string&gt;1.6*&lt;/string&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;key&gt;JVMVersion&lt;/key&gt;\n&lt;string&gt;1.8*&lt;/string&gt;\n</code></pre>\n\n<p>and it worked fine now..</p>\n\n<p>Edited:<br>\nPer the official statement as mentioned above by hasternet and aried3r, the solution by Antonio Jose is correct.</p>\n\n<p>Thanks!</p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27370383#27370383", "question_id": 27369269, "answer_id": 27370383}, {"body": "<p>[Update]<br>\nThis is fixed in Android Studio 1.1\n<a href=\"https://code.google.com/p/android/issues/detail?id=82378\">https://code.google.com/p/android/issues/detail?id=82378</a></p>\n\n<blockquote>\n  <p>In the next version of Android Studio, if no java 6 is found but 7 (or greater) is found then it will use that instead. We still recommend running studio with Java 6 due to improved font rendering, but there is no work around needed if, for example, only java 8 is found.  </p>\n</blockquote>\n\n<p>[End Update]</p>\n\n<p>From <a href=\"http://tools.android.com/recent/androidstudio1rc3_releasecandidate3released\">Android Studio 1.0 RC3 Notes</a></p>\n\n<blockquote>\n  <p>As of RC 3, we have a better mechanism for customizing properties for the launchers on all three platforms. You should not edit any files in the IDE installation directory. Instead, you can customize the attributes by creating your own .properties or .vmoptions files in the following directories. (This has been possible on some platforms before, but it required you to copy and change the entire contents of the files. With the latest changes these properties are now additive instead such that you can set just the attributes you care about, and the rest will use the defaults from the IDE installation).</p>\n</blockquote>\n\n<p>However there is no explanation about what options are.</p>\n\n<p>After searching a little I found this<br>\n<a href=\"http://randomlytyping.com/blog/2013/8/5/vm-options-for-android-studio-on-mac\">Adjusting VM Options for Android Studio on Mac</a><br>\n<a href=\"https://www.jetbrains.com/idea/help/file-idea-properties.html\">IntelliJ IDEA 14.0.0 Web Help/File IDEA.Properties</a></p>\n\n<p>However no luck with that.</p>\n\n<p>Fortunately I was able to resolve it on Yosemite using environment variables as said in the 1.0 RC3 Release Notes.</p>\n\n<blockquote>\n  <p>You can also place use environment variables to point to specific override files elsewhere:<br>\n  STUDIO_VM_OPTIONS, which vmoptions file to use<br>\n  STUDIO_PROPERTIES, which property file to use<br>\n  STUDIO_JDK, which JDK to run studio with</p>\n</blockquote>\n\n<p>This was a little tricky because Android Studio is not a command line application so I had to use a AppleScript command to set the environment variable when login. More info <a href=\"http://stackoverflow.com/a/25912736/1568429\">here</a></p>\n\n<p>This is my launchctl command for the command line.  </p>\n\n<pre><code>launchctl setenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk\n</code></pre>\n\n<p>And this my AppleScript (remember to save it as an Application)  </p>\n\n<pre><code>do shell script \"launchctl setenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk\"\n</code></pre>\n\n<p>About launchctl, see <a href=\"http://stackoverflow.com/a/4567308/1568429\">here</a></p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27370525#27370525", "question_id": 27369269, "answer_id": 27370525}, {"body": "<p>I am using Mac OS X 10.10 also. And to fix this problem.</p>\n\n<ol>\n<li>Open Android Studio application package content (by right click on Android Studio icon in Application folder)</li>\n<li>Open file Infor.plist</li>\n<li><p>Search and replace:</p>\n\n<pre><code>&lt;key&gt; JVM version&lt;/key&gt;\n&lt;string&gt;1.6*&lt;/string&gt;\n</code></pre></li>\n</ol>\n\n<p>replaced by:</p>\n\n<pre><code>    &lt;key&gt; JVM version&lt;/key&gt;\n    &lt;string&gt;1.6+&lt;/string&gt;\n</code></pre>\n\n<p>That's it!</p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27390662#27390662", "question_id": 27369269, "answer_id": 27390662}, {"body": "<p>I have same problem and fixed with this way:</p>\n\n<p>You should install Java from Official Apple page.</p>\n\n<p><a href=\"http://support.apple.com/kb/DL1572\" rel=\"nofollow\">http://support.apple.com/kb/DL1572</a></p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27461835#27461835", "question_id": 27369269, "answer_id": 27461835}, {"body": "<p>On Android Tools Project Site, there is a great explanation <a href=\"http://tools.android.com/tech-docs/configuration/osx-jdk\" rel=\"nofollow\">Mac OSX JDK Selection</a>. It fixed my problem. In summary:</p>\n\n<blockquote>\n  <p>Android Studio requires two different JDKs:</p>\n  \n  <ul>\n  <li>The version of Java that the IDE itself runs with. </li>\n  <li>The version of the JDK that it uses to get the Java compiler from</li>\n  </ul>\n  \n  <p>These two can be (and usually are) the same, but you can configure\n  them individually. And on OSX in particular, they will often be\n  different.</p>\n</blockquote>\n\n<p>and for Yosemite (Mac OSX 10.10) Issues:</p>\n\n<blockquote>\n  <p>First, please make sure that you have the latest version of Java 6\n  installed; in some cases that has fixed the problems:\n  <a href=\"http://support.apple.com/kb/DL1572\" rel=\"nofollow\">http://support.apple.com/kb/DL1572</a></p>\n  \n  <p>If not, try running a recent version of Java 7 or Java 8 instead by\n  setting STUDIO_JDK as described above. That is reported to have fixed\n  the other problems (though you will get the font rendering shown for\n  Java 8 above.)</p>\n</blockquote>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27465247#27465247", "question_id": 27369269, "answer_id": 27465247}, {"body": "<p>Note that this last variable allows you to for example run Android Studio with Java 7 on OSX (which normally picks Java 6 from the version specified in Info.plist):</p>\n\n<p>$ export STUDIO_JDK=/Library/Java/JavaVirtualMachines/jdk1.7.0_67.jdk</p>\n\n<p>$ open /Applications/Android\\ Studio.app</p>\n\n<p>Worked for me</p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27481513#27481513", "question_id": 27369269, "answer_id": 27481513}, {"body": "<p>This one work for me, very simple, just export the environmentable var. but make sure u have the valid JVM first though.</p>\n\n<p><a href=\"https://code.google.com/p/android/issues/detail?id=82378\" rel=\"nofollow\">https://code.google.com/p/android/issues/detail?id=82378</a></p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27557474#27557474", "question_id": 27369269, "answer_id": 27557474}, {"body": "<p>\"On Mac OS, run Android Studio with Java Runtime Environment (JRE) 6 for optimized font rendering. You can then configure your project to use Java Development Kit (JDK) 6 or JDK 7.\"</p>\n\n<p>This was listed in <a href=\"http://developer.android.com/sdk/index.html\" rel=\"nofollow\">http://developer.android.com/sdk/index.html</a> under the system requirements for Mac OS X.</p>\n\n<p>Once you install Java 6 (not the JDK) from Apple as per Alonso C. Licks, you should be able to open Android Studio and reconfigure as you wish without having to mess around in the terminal, info.plist file, or other libraries.</p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27596922#27596922", "question_id": 27369269, "answer_id": 27596922}, {"body": "<p>On Mac OS X Yosemite just install:</p>\n\n<p>Java SE Development Kit 8</p>\n\n<p>and </p>\n\n<p>Java Version 8 Update 25</p>\n\n<p>It's all, work for me!</p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27643165#27643165", "question_id": 27369269, "answer_id": 27643165}, {"body": "<p>On Mac OS X Yosemite just install:</p>\n\n<p>Java SE Development Kit 8</p>\n\n<p>and</p>\n\n<p>Java Version 8 Update 25</p>\n\n<p>It's all, work for me too! like gehev said , so simple !</p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27725404#27725404", "question_id": 27369269, "answer_id": 27725404}, {"body": "<p>I have downloaded Intellij Idea. When I try to install Intellij, a pop-up appeared that my Mac is missing with Java RE, do you want to download it? After I downloaded missing package using Intellij, I could open Android Studio. </p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27761036#27761036", "question_id": 27369269, "answer_id": 27761036}, {"body": "<p>I resolved this issue by changing the JVM version in the Info.plist file to 1.7*</p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27769239#27769239", "question_id": 27369269, "answer_id": 27769239}, {"body": "<p>As a novice user it took me a while to understand how to fix this in a correct way. After searching and understating many answers on SO I came out with the Following steps that you need to follow to fix the issue.</p>\n\n<p><strong>Please Note:</strong></p>\n\n<p>Although the simplest solution is to update the <strong>Info.plist</strong> of android studio . But it is not recommended and not the correct way to fix it .</p>\n\n<p><strong>Official statement- \"Please note: Do not edit Info.plist to pick a different version. That will break not only the application signature, but also future patch updates to your installation.\"</strong></p>\n\n<p><strong>First Solution :</strong> If you run your Android Studio from command line, you can add these two lines into your <strong>.bash_profile</strong> </p>\n\n<pre><code>$ export STUDIO_JDK=/Library/Java/JavaVirtualMachines/jdk1.7.0_67.jdk\n\n$ open /Applications/Android\\ Studio.app\n</code></pre>\n\n<p>From next time whenever you open your terminal your studio will start automatically.</p>\n\n<p><strong>Second Solution:</strong> If you want to run Android Studio from UI(by click on Icon) follow below steps:</p>\n\n<ol>\n<li>Open <strong>script editor</strong> on mac(one can find it in <strong>spotlight</strong>)</li>\n<li><p>Copy past the below line</p>\n\n<p>do shell script \"launchctl setenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk\"</p></li>\n</ol>\n\n<p><strong>Note :-</strong> Change the jdk version according to your version. To check which version you are using open terminal and run the following command </p>\n\n<pre><code>java -version\n</code></pre>\n\n<p>3.Now save (\u2318+s) as File format: <em>Application</em>. Finally open <em>System Settings \u2192 Users &amp; Groups \u2192 Login Items</em> and add your new application that you have just created.</p>\n\n<ol start=\"4\">\n<li>Log-off and login again or you can run that application manually as well..</li>\n</ol>\n\n<p>woolaaaa\u2026Its done.</p>\n\n<p>References :</p>\n\n<p><a href=\"http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27370525#27370525\">Antonio Jose's answer</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/25385934/setting-environment-variables-via-launchd-conf-no-longer-works-in-os-x-yosemite/25912736#25912736\">ruario's answer</a></p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27794338#27794338", "question_id": 27369269, "answer_id": 27794338}, {"body": "<p>I ran this bad boy:</p>\n\n<pre><code>launchctl setenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.7.0_71.jdk/\n</code></pre>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27872641#27872641", "question_id": 27369269, "answer_id": 27872641}, {"body": "<p>I was able to get it to work by editing the info.plist changing 16* to 16+. Tried using the recommended method but that failed.</p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27908607#27908607", "question_id": 27369269, "answer_id": 27908607}, {"body": "<p>i'm dealing with the same problem and i get it worked.</p>\n\n<p>it is probably that your jdk version is not right.</p>\n\n<p>now i installed jdk1.8 and it is ok now.</p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27937534#27937534", "question_id": 27369269, "answer_id": 27937534}, {"body": "<p>You can implement the <code>STUDIO_JDK</code> solution using your user's launch agents. This involves creating one plist file in your LaunchAgents directory, located at <code>~/Library/LaunchAgents</code> </p>\n\n<p>Create a new file, <code>~/Library/LaunchAgents/UNIQUE_KEY.plist</code>, where UNIQUE_KEY is just an identifier. I use com.<em>username</em>.androidstudio.</p>\n\n<p>Copy the following text into your new plist file and modify it according the instructions below.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE plist PUBLIC \"-//Apple Computer//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"&gt;\n&lt;plist version=\"1.0\"&gt;\n&lt;dict&gt;\n   &lt;key&gt;Label&lt;/key&gt;\n   &lt;string&gt;UNIQUE_KEY&lt;/string&gt;\n   &lt;key&gt;ProgramArguments&lt;/key&gt;\n   &lt;array&gt;\n      &lt;string&gt;sh&lt;/string&gt;\n      &lt;string&gt;-c&lt;/string&gt;\n      &lt;string&gt;launchctl setenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.7.0_71.jdk&lt;/string&gt;\n   &lt;/array&gt;\n   &lt;key&gt;RunAtLoad&lt;/key&gt;\n   &lt;true/&gt;\n&lt;/dict&gt;\n&lt;/plist&gt;\n</code></pre>\n\n<p>You will need to make two modifications:</p>\n\n<ol>\n<li>Change UNIQUE_KEY to match your filename (without the .plist extension).</li>\n<li>Verify your JDK path is correct and change if necessary. I'm using 7u71 in this example.</li>\n</ol>\n\n<p>This is the same underlying solution as <a href=\"http://stackoverflow.com/a/27370525/650176\">Antonio Jose's answer</a>. It sets the STUDIO_JDK environment variable based on the Android Studio version <a href=\"http://tools.android.com/recent/androidstudio1rc3_releasecandidate3released\" rel=\"nofollow\">1.0 RC3 release notes</a>. This solution uses the LaunchAgents directory rather than AppleScript to set the environment variable. As such it is mostly a difference in how your order and organize your system and environment variables.</p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27972977#27972977", "question_id": 27369269, "answer_id": 27972977}, {"body": "<p>For those who were having trouble creating a script that launched on startup, as an alternative you can add this .plist to your LaunchAgents folder. This may be a more appropriate way of adding environment variables to the system since Yosemite decided to do away with launchd.conf. This should also work across user accounts due to the nature of the LaunchAgents folder, but I haven't tested that.</p>\n\n<p>To do this, create a .plist file with the following name and path:</p>\n\n<pre><code>/Library/LaunchAgents/setenv.STUDIO_JDK.plist\n</code></pre>\n\n<p>and the contents:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"&gt;\n&lt;plist version=\"1.0\"&gt;\n    &lt;dict&gt;\n        &lt;key&gt;Label&lt;/key&gt;\n            &lt;string&gt;setenv.STUDIO_JDK&lt;/string&gt;\n        &lt;key&gt;ProgramArguments&lt;/key&gt;\n            &lt;array&gt;\n                &lt;string&gt;sh&lt;/string&gt;\n                &lt;string&gt;-c&lt;/string&gt;\n                &lt;string&gt;\n                    launchctl setenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk\n                &lt;/string&gt;\n            &lt;/array&gt;\n        &lt;key&gt;RunAtLoad&lt;/key&gt;\n            &lt;true/&gt;\n        &lt;key&gt;ServiceIPC&lt;/key&gt;\n            &lt;false/&gt;\n        &lt;key&gt;LaunchOnlyOnce&lt;/key&gt;\n            &lt;true/&gt;\n        &lt;key&gt;KeepAlive&lt;/key&gt;\n            &lt;false/&gt;\n    &lt;/dict&gt;\n&lt;/plist&gt;\n</code></pre>\n\n<p>Then change file properties by running the following commands in Terminal:</p>\n\n<pre><code>sudo chmod 644 /Library/LaunchAgents/setenv.STUDIO_JDK.plist\n\nsudo chown root /Library/LaunchAgents/setenv.STUDIO_JDK.plist\n\nsudo chgrp wheel /Library/LaunchAgents/setenv.STUDIO_JDK.plist\n</code></pre>\n\n<p>Notes:</p>\n\n<p>1) You may need to change 'jdk1.8.0_25.jdk' to match the version that you have on your computer.</p>\n\n<p>2) I tried to use \"jdk1.8.*.jdk\" to try and account for varying Java * versions, but when I opened Android Studio I got the no JVM error even though if you run \"echo $STUDIO_JDK\" it returns the correct path. Perhaps someone has some insight as to how to fix that issue.</p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/27997629#27997629", "question_id": 27369269, "answer_id": 27997629}, {"body": "<p><strong>Do not edit the plist.</strong> These instructions worked for me the first time I installed Android Studio a few months ago as well as just today. (1/21/2015)</p>\n\n<p>All you need to do is a few simple things, although they aren't really listed on Google's website.</p>\n\n<ol>\n<li>First you need Java installed. this is not the JDK, it is seperate. You can get that from <a href=\"http://support.apple.com/kb/DL1572?viewlocale=en_US&amp;locale=en_US\" rel=\"nofollow\">this link.</a> If you don't have this it will probably throw an error saying something like \"no <strong>JVM</strong> installed.\"</li>\n<li>Second you need the Java JDK, I got JDK 7 from <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html\" rel=\"nofollow\">this link.</a> Make sure to choose the Mac OS X link under the  Java SE Development Kit 7u75 heading. If you don't have this it will probably throw an error saying something like \"no <strong>JDK</strong> installed.\"</li>\n<li>If you haven't already installed Android Studio, do that. But I'm sure you've already done that by now.</li>\n</ol>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/28079952#28079952", "question_id": 27369269, "answer_id": 28079952}, {"body": "<p>As @Gerard suggested, I summerise my original comment (<a href=\"http://stackoverflow.com/a/27370525/763459\">http://stackoverflow.com/a/27370525/763459</a>)  as an Answer, hope it can help others who are annoyed by this issue.</p>\n\n<p>There's a way without running the AppleScript: \nedit <code>.bash_profile</code> (if this file doesn't exist, please create a new one , as @Gerard suggested, you can to use <code>source .bash_profile</code> for the first time).</p>\n\n<ul>\n<li><p>Install the legacy Java (may be neccessary) <a href=\"http://support.apple.com/kb/DL1572\" rel=\"nofollow\">http://support.apple.com/kb/DL1572</a></p></li>\n<li><p>Put export STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.8.0_31.jdk</p></li>\n<li><p>Then quit terminal (or any text editors you're using to edit this file), run the Android Studio and viola</p></li>\n</ul>\n\n<p>Tested with OSX 10.10 and Android 1.0.1   </p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/28451204#28451204", "question_id": 27369269, "answer_id": 28451204}, {"body": "<p>Try downloading the Java from Apple Support Page: <a href=\"http://support.apple.com/kb/DL1572\" rel=\"nofollow\">http://support.apple.com/kb/DL1572</a> if that doesn't work for you or fails to load (<em>very common issue</em>), just follow this link to download and install the Java version you need:</p>\n\n<p><a href=\"http://support.apple.com/downloads/DL1572/en_US/JavaForOSX2014-001.dmg\" rel=\"nofollow\">http://support.apple.com/downloads/DL1572/en_US/JavaForOSX2014-001.dmg</a></p>\n\n<p>That's it.</p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/28647004#28647004", "question_id": 27369269, "answer_id": 28647004}, {"body": "<ol>\n<li><p>Install newest JDK (8u31 current)</p></li>\n<li><p>Run it by</p></li>\n</ol>\n\n<p>launchctl setenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.8.0_31.jdk/</p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/28790486#28790486", "question_id": 27369269, "answer_id": 28790486}, {"body": "<p>I had previously uninstall Java 6 and install Java 7, Android Studio was working okay, then I upgraded Android Studio and I had the issue everyone is having.  Today, I uninstalled Java 7 and installed Java 8 from Oracle.  Then I uninstall Android Studio and installed the latest.  Everything is working for me now</p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/29001396#29001396", "question_id": 27369269, "answer_id": 29001396}, {"body": "<p>Android Studio will read settings from the file ~/Library/Preferences/AndroidStudio/idea.properties.  I created this file and in it have the path to my jdk :</p>\n\n<p>STUDIO_JDK=/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk</p>\n\n<p>No editing of the Info.plist necessary!</p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/30853977#30853977", "question_id": 27369269, "answer_id": 30853977}, {"body": "<p>Java was uninstalled when I updated to OS X El Capitan.  </p>\n\n<p>See screenshot of terminal before and after I reinstalled Java.  </p>\n\n<p><a href=\"http://i.stack.imgur.com/Lh6BD.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/Lh6BD.png\" alt=\"enter image description here\"></a></p>\n\n<p>To reinstall Java I followed this link that was provided in the Android Studio dialog box. </p>\n\n<p><a href=\"http://i.stack.imgur.com/DzdeI.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/DzdeI.png\" alt=\"enter image description here\"></a></p>\n\n<p>Android Studio ran again after the Java installation was reinstalled. </p>\n", "title": "Android Studio was unable to find a valid Jvm (Related to MAC OS)", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os/32905836#32905836", "question_id": 27369269, "answer_id": 32905836}], "creation_date": 1418083419, "score": 192, "link": "http://stackoverflow.com/questions/27369269/android-studio-was-unable-to-find-a-valid-jvm-related-to-mac-os", "question_id": 27369269}, {"body": "<p>There is an issue with the Android appcompat v7 library on Samsung devices running Android 4.2. I keep getting crashes with the following stack trace in my Developer Console:</p>\n\n<pre><code>java.lang.NoClassDefFoundError: android.support.v7.internal.view.menu.MenuBuilder\n    at android.support.v7.widget.PopupMenu.&lt;init&gt;(PopupMenu.java:66)\n    at com.[my-package-name].CustomActivity$5.onClick(CustomActivity.java:215)\n    at android.view.View.performClick(View.java:4222)\n    at android.view.View$PerformClick.run(View.java:17620)\n    at android.os.Handler.handleCallback(Handler.java:800)\n    at android.os.Handler.dispatchMessage(Handler.java:100)\n    at android.os.Looper.loop(Looper.java:194)\n    at android.app.ActivityThread.main(ActivityThread.java:5391)\n    at java.lang.reflect.Method.invokeNative(Native Method)\n    at java.lang.reflect.Method.invoke(Method.java:525)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:833)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)\n    at dalvik.system.NativeStart.main(Native Method)\n</code></pre>\n\n<p>This is line 215 of CustomActivity.java:</p>\n\n<pre><code>PopupMenu popup = new PopupMenu(CustomActivity.this, mImageViewMenu);\n</code></pre>\n\n<p>The crashes come from an array of devices, but always Samsung, and always Android 4.2.</p>\n\n<p>A quick web search leads me to believe that many people have the same issue, some of the steps I have tried to solve the issue are:</p>\n\n<ul>\n<li>Check the Android project properties, make sure the appcompat library is added properly.</li>\n<li>Check the Java Build Path Order and Export project properties, make sure Android Dependencies and Android Private Libraries is checked.</li>\n<li>Confirm the class is included in the library (android.support.v7.internal.view.menu.MenuBuilder).</li>\n<li>Confirm R.java is located in gen directory for android.support.v7.appcompat.</li>\n<li>Confirm the AppCompat theme is included in the Manifest.xml activity.</li>\n<li>Clean and rebuild project.</li>\n</ul>\n\n<p>Despite these steps, and despite it working on all other devices and Android versions the crash reports still come through.</p>\n", "tags": ["java", "android", "eclipse", "appcompat"], "title": "NoClassDefFoundError: android.support.v7.internal.view.menu.MenuBuilder", "answers": [{"body": "<p>Yes. Samsung already knows about <a href=\"http://developer.samsung.com/forum/board/thread/view.do?boardName=General&amp;messageId=248142\" rel=\"nofollow\">this</a> problem.\nI can suggest you try to using same implementation of Popup from <a href=\"https://github.com/search?q=Popup%20Menu%20android%20&amp;ref=cmdform\" rel=\"nofollow\">GitHub</a>. It is not best way, but will be works.</p>\n", "title": "NoClassDefFoundError: android.support.v7.internal.view.menu.MenuBuilder", "tags": ["java", "android", "eclipse", "appcompat"], "link": "http://stackoverflow.com/questions/24809580/noclassdeffounderror-android-support-v7-internal-view-menu-menubuilder/24810104#24810104", "question_id": 24809580, "answer_id": 24810104}, {"body": "<p>EDIT:</p>\n\n<p>The solution that worked for me was (Using Proguard) to replace this:</p>\n\n<pre><code>-keep class android.support.v4.** { *; } \n-keep interface android.support.v4.** { *; }\n\n-keep class android.support.v7.** { *; }\n-keep interface android.support.v7.** { *; }\n</code></pre>\n\n<p>with this:</p>\n\n<pre><code># Allow obfuscation of android.support.v7.internal.view.menu.**\n# to avoid problem on Samsung 4.2.2 devices with appcompat v21\n# see https://code.google.com/p/android/issues/detail?id=78377\n-keep class !android.support.v7.internal.view.menu.**,android.support.** {*;}\n</code></pre>\n\n<p>Credit goes to the <a href=\"https://code.google.com/p/android/issues/detail?id=78377#c138\" rel=\"nofollow\">google group, #138</a>.</p>\n\n<p>Old answer (Temporary Workaround):\nIt happens in a project where I use an <s>spinner in the</s> ActionBar. My solution was to check for those conditions and change the app flow:</p>\n\n<pre><code>public static boolean isSamsung_4_2_2() {\n    String deviceMan = Build.MANUFACTURER;\n    String deviceRel = Build.VERSION.RELEASE;\n    return \"samsung\".equalsIgnoreCase(deviceMan) &amp;&amp; deviceRel.startsWith(\"4.2.2\");\n}\n</code></pre>\n\n<p>Then in the activity's onCreate method:</p>\n\n<pre><code>if (isSamsung_4_2_2()) {\n    setContentView(R.layout.activity_main_no_toolbar);\n} else {\n    setContentView(R.layout.activity_main);\n}\n</code></pre>\n\n<p>As pointed out this is not a definitive solution, it is just a way to allow users to have access to limited functionality while a more permanent solution is found. </p>\n", "title": "NoClassDefFoundError: android.support.v7.internal.view.menu.MenuBuilder", "tags": ["java", "android", "eclipse", "appcompat"], "link": "http://stackoverflow.com/questions/24809580/noclassdeffounderror-android-support-v7-internal-view-menu-menubuilder/26641388#26641388", "question_id": 24809580, "answer_id": 26641388}, {"body": "<p>I enabled proguard with the default proguard properties provided with an eclipse project and the problem was fixed for me. Based on some comments here <a href=\"https://code.google.com/p/android/issues/detail?id=78377\" rel=\"nofollow\">https://code.google.com/p/android/issues/detail?id=78377</a> , some people might have to repackage using:\n-repackageclasses \"android.support.v7\"</p>\n", "title": "NoClassDefFoundError: android.support.v7.internal.view.menu.MenuBuilder", "tags": ["java", "android", "eclipse", "appcompat"], "link": "http://stackoverflow.com/questions/24809580/noclassdeffounderror-android-support-v7-internal-view-menu-menubuilder/26898531#26898531", "question_id": 24809580, "answer_id": 26898531}, {"body": "<p>On which device you are facing this problem ? (Samsung/HTC etc.)</p>\n\n<p>If it is Samsung,</p>\n\n<p>Various Samsung phones are included older versions of the android support library in the framework or classpath. If you use the new material support library, you'll see this crash on those Samsung devices:</p>\n\n<pre><code>java.lang.NoClassDefFoundError: android.support.v7.internal.view.menu.MenuBuilder\n</code></pre>\n\n<p>To fix this, you must rename that class. Easiest way to do that is by running proguard. If you don't want to obfuscate, here's a 1 liner to rename just the offending classes:</p>\n\n<pre><code>-keep class !android.support.v7.internal.view.menu.**,** {*;}\n</code></pre>\n\n<p>There's an issue tracking this problem, but since it's really a Samsung bug, it's never going to get fixed on their end. Only way to fix it on the Google/AOSP side is to rename these internal classes.</p>\n\n<p><a href=\"https://code.google.com/p/android/issues/detail?id=78377\">https://code.google.com/p/android/issues/detail?id=78377</a></p>\n", "title": "NoClassDefFoundError: android.support.v7.internal.view.menu.MenuBuilder", "tags": ["java", "android", "eclipse", "appcompat"], "link": "http://stackoverflow.com/questions/24809580/noclassdeffounderror-android-support-v7-internal-view-menu-menubuilder/27254191#27254191", "question_id": 24809580, "answer_id": 27254191}, {"body": "<p>As <a href=\"https://code.google.com/p/android/issues/detail?id=78377#c150\" rel=\"nofollow\">#150 from google groups</a> said</p>\n\n<blockquote>\n  <p>Because careful with -keep class\n  !android.support.v7.internal.view.menu.**. There are a number of\n  classes in there which are referenced from the appcompat's resources.</p>\n</blockquote>\n\n<p>The better solution is add the following lines instead:</p>\n\n<pre><code>-keep class !android.support.v7.internal.view.menu.*MenuBuilder*, android.support.v7.** { *; }\n-keep interface android.support.v7.** { *; }\n</code></pre>\n", "title": "NoClassDefFoundError: android.support.v7.internal.view.menu.MenuBuilder", "tags": ["java", "android", "eclipse", "appcompat"], "link": "http://stackoverflow.com/questions/24809580/noclassdeffounderror-android-support-v7-internal-view-menu-menubuilder/27644579#27644579", "question_id": 24809580, "answer_id": 27644579}, {"body": "<p>I was having the same problem of this MenuBuilder class not found in USB debugging mode. I solved this problem by simply setting the <strong>minifyEnabled</strong> to <strong>true</strong> in both release and debug <strong>buildTypes</strong> block of <strong>build.gradle</strong> . like this:</p>\n\n<pre><code>buildTypes {\n\n    debug {\n\n        minifyEnabled true\n    }\n\n    release {\n        minifyEnabled true\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n    }\n}\n</code></pre>\n\n<p>I set the <strong>minifyEnabled</strong> to true in <strong>debug</strong> type to prevent app from crashing via USB debugging to a live handset.</p>\n", "title": "NoClassDefFoundError: android.support.v7.internal.view.menu.MenuBuilder", "tags": ["java", "android", "eclipse", "appcompat"], "link": "http://stackoverflow.com/questions/24809580/noclassdeffounderror-android-support-v7-internal-view-menu-menubuilder/30700397#30700397", "question_id": 24809580, "answer_id": 30700397}, {"body": "<p>Change the Compile Sdk Version of your project to <strong>\"API 18:(JellyBean)\"</strong> </p>\n\n<p>The default is set to <strong>\"Lollipop</strong></p>\n\n<p>STEPS</p>\n\n<ol>\n<li>Right Click on your project and select Open Module Settings (or press F4)</li>\n<li>In the properties tab <strong>Compiled Sdk Version</strong></li>\n</ol>\n", "title": "NoClassDefFoundError: android.support.v7.internal.view.menu.MenuBuilder", "tags": ["java", "android", "eclipse", "appcompat"], "link": "http://stackoverflow.com/questions/24809580/noclassdeffounderror-android-support-v7-internal-view-menu-menubuilder/31801463#31801463", "question_id": 24809580, "answer_id": 31801463}, {"body": "<p>I got the same error when trying to run a 'Hello World' app on my Samsung Galaxy Tab 3 tablet via Android Studio. The app would appear to launch and then it would crash instantly and that error would show in the console in Android Studio. I did a system update on the tablet and now I am able to run the 'Hello World' app and I'm not getting the error anymore. I hope this helps someone to resolve their issue. </p>\n\n<p>Note: The system update I performed on the tablet did not update the Android OS version, because it still says that the version is 4.2.2.</p>\n", "title": "NoClassDefFoundError: android.support.v7.internal.view.menu.MenuBuilder", "tags": ["java", "android", "eclipse", "appcompat"], "link": "http://stackoverflow.com/questions/24809580/noclassdeffounderror-android-support-v7-internal-view-menu-menubuilder/32643540#32643540", "question_id": 24809580, "answer_id": 32643540}, {"body": "<p>This issue returned in <code>AppCompat 23.1.1</code> where the <code>.internal</code> package was removed from the library jar. </p>\n\n<p>As suggested in the comments above (credits to the people who suggested it there), now also the proguard configuration has to change.</p>\n\n<p>To get the answer suggested above working again, try adding these lines to your proguard files:</p>\n\n<pre><code>#FOR APPCOMPAT 23.1.1:\n-keep class !android.support.v7.view.menu.*MenuBuilder*, android.support.v7.** { *; }\n-keep interface android.support.v7.* { *; }\n</code></pre>\n\n<p>In stead of the old fix:</p>\n\n<pre><code>#FOR OLDER APPCOMPAT VERSION:\n-keep class !android.support.v7.internal.view.menu.*MenuBuilder, android.support.v7.** { ; }\n-keep interface android.support.v7.* { *; }\n</code></pre>\n", "title": "NoClassDefFoundError: android.support.v7.internal.view.menu.MenuBuilder", "tags": ["java", "android", "eclipse", "appcompat"], "link": "http://stackoverflow.com/questions/24809580/noclassdeffounderror-android-support-v7-internal-view-menu-menubuilder/34895791#34895791", "question_id": 24809580, "answer_id": 34895791}, {"body": "<p>According to the last posts of the bug-report, this should be fixed on the new version of the support library (24.0.0) :\n<a href=\"https://code.google.com/p/android/issues/detail?id=78377#c374\">https://code.google.com/p/android/issues/detail?id=78377#c374</a></p>\n\n<p>Someone <a href=\"https://code.google.com/p/android/issues/detail?id=78377#c377\"><strong>even claimed</strong></a> it fixed it.</p>\n\n<p>This version is available <a href=\"https://developer.android.com/topic/libraries/support-library/revisions.html\"><strong>since last month</strong></a>, so you should update to it.</p>\n", "title": "NoClassDefFoundError: android.support.v7.internal.view.menu.MenuBuilder", "tags": ["java", "android", "eclipse", "appcompat"], "link": "http://stackoverflow.com/questions/24809580/noclassdeffounderror-android-support-v7-internal-view-menu-menubuilder/38301963#38301963", "question_id": 24809580, "answer_id": 38301963}], "creation_date": 1405616873, "score": 159, "link": "http://stackoverflow.com/questions/24809580/noclassdeffounderror-android-support-v7-internal-view-menu-menubuilder", "question_id": 24809580}, {"body": "<p>Let's say that I have the following code:</p>\n\n<pre><code>String word1 = \"bar\";\nString word2 = \"foo\";\nString story = \"Once upon a time, there was a foo and a bar.\"\nstory = story.replace(\"foo\", word1);\nstory = story.replace(\"bar\", word2);\n</code></pre>\n\n<p>After this code runs, the value of <code>story</code> will be <code>\"Once upon a time, there was a foo and a foo.\"</code></p>\n\n<p>A similar issue occurs if I replaced them in the opposite order:</p>\n\n<pre><code>String word1 = \"bar\";\nString word2 = \"foo\";\nString story = \"Once upon a time, there was a foo and a bar.\"\nstory = story.replace(\"bar\", word2);\nstory = story.replace(\"foo\", word1);\n</code></pre>\n\n<p>The value of <code>story</code> will be <code>\"Once upon a time, there was a bar and a bar.\"</code></p>\n\n<p>My goal is to turn <code>story</code> into <code>\"Once upon a time, there was a bar and a foo.\"</code> How could I accomplish that?</p>\n", "tags": ["java", "string", "replace"], "title": "How can I replace two strings in a way that one does not end up replacing the other?", "answers": [{"body": "<p>You use an intermediate value (which is not yet present in the sentence).</p>\n\n<pre><code>story = story.replace(\"foo\", \"lala\");\nstory = story.replace(\"bar\", \"foo\");\nstory = story.replace(\"lala\", \"bar\");\n</code></pre>\n\n<p>As a response to criticism: if you use a large enough uncommon string like <em>zq515sqdqs5d5sq1dqs4d1q5dqq\u00e9\"&amp;\u00e95d4sqjshsjddjhodfqsqc, nv\u00f9q^\u00b5\u00f9;d&amp;\u20acsdq: d: ;)\u00e0\u00e7\u00e0\u00e7lala</em> and use that, it is unlikely to the point where I won't even debate it that a user will ever enter this. The only way to know whether a user will is by knowing the source code and at that point you're with a whole other level of worries.</p>\n\n<p>Yes, maybe there are fancy regex ways. I prefer something readable that I know will not break out on me either.</p>\n\n<p>Also reiterating the excellent advise given by <a href=\"http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot#comment42159061_26791459\">@David Conrad in the comments</a>:</p>\n\n<blockquote>\n  <p>Don't use some string cleverly (stupidly) chosen to be unlikely. Use characters from the Unicode Private Use Area, U+E000..U+F8FF. Remove any such characters first, since they shouldn't legitimately be in the input (they only have application-specific meaning within some application), then use them as placeholders when replacing. </p>\n</blockquote>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26791459#26791459", "question_id": 26791441, "answer_id": 26791459}, {"body": "<p>You can always replace it with a word you are sure will appear nowhere else in the string, and then do the second replace later: </p>\n\n<pre><code>String word1 = \"bar\";\nString word2 = \"foo\";\nString story = \"Once upon a time, there was a foo and a bar.\"\nstory = story.replace(\"foo\", \"StringYouAreSureWillNeverOccur\").replace(\"bar\", \"word2\").replace(\"StringYouAreSureWillNeverOccur\", \"word1\");\n</code></pre>\n\n<p>Note that this will not work right if <code>\"StringYouAreSureWillNeverOccur\"</code> does occur.</p>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26791498#26791498", "question_id": 26791441, "answer_id": 26791498}, {"body": "<p>You can try something like this, using <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#appendReplacement(java.lang.StringBuffer,%20java.lang.String)\"><code>Matcher#appendReplacement</code></a> and <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#appendTail(java.lang.StringBuffer)\"><code>Matcher#appendTail</code></a>:</p>\n\n<pre><code>String word1 = \"bar\";\nString word2 = \"foo\";\nString story = \"Once upon a time, there was a foo and a bar.\";\n\nPattern p = Pattern.compile(\"foo|bar\");\nMatcher m = p.matcher(story);\nStringBuffer sb = new StringBuffer();\nwhile (m.find()) {\n    /* do the swap... */\n    switch (m.group()) {\n    case \"foo\":\n        m.appendReplacement(sb, word1);\n        break;\n    case \"bar\":\n        m.appendReplacement(sb, word2);\n        break;\n    default:\n        /* error */\n        break;\n    }\n}\nm.appendTail(sb);\n\nSystem.out.println(sb.toString());\n</code></pre>\n\n<pre>\nOnce upon a time, there was a bar and a foo.\n</pre>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26791582#26791582", "question_id": 26791441, "answer_id": 26791582}, {"body": "<p>Here is a Java 8 streams possibility that might be interesting for some:</p>\n\n<pre><code>String word1 = \"bar\";\nString word2 = \"foo\";\n\nString story = \"Once upon a time, there was a foo and a bar.\";\n\n// Map is from untranslated word to translated word\nMap&lt;String, String&gt; wordMap = new HashMap&lt;&gt;();\nwordMap.put(word1, word2);\nwordMap.put(word2, word1);\n\n// Split on word boundaries so we retain whitespace.\nString translated = Arrays.stream(story.split(\"\\\\b\"))\n    .map(w -&gt; wordMap.getOrDefault(w,  w))\n    .collect(Collectors.joining());\n\nSystem.out.println(translated);\n</code></pre>\n\n<hr>\n\n<p>Here is an approximation of the same algorithm in Java 7:</p>\n\n<pre><code>String word1 = \"bar\";\nString word2 = \"foo\";\nString story = \"Once upon a time, there was a foo and a bar.\";\n\n// Map is from untranslated word to translated word\nMap&lt;String, String&gt; wordMap = new HashMap&lt;&gt;();\nwordMap.put(word1, word2);\nwordMap.put(word2, word1);\n\n// Split on word boundaries so we retain whitespace.\nStringBuilder translated = new StringBuilder();\nfor (String w : story.split(\"\\\\b\"))\n{\n  String tw = wordMap.get(w);\n  translated.append(tw != null ? tw : w);\n}\n\nSystem.out.println(translated);\n</code></pre>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26791670#26791670", "question_id": 26791441, "answer_id": 26791670}, {"body": "<p>Use the <a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/StringUtils.html#replaceEach(java.lang.String,%20java.lang.String[],%20java.lang.String[])\"><code>replaceEach()</code></a> method from <a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/StringUtils.html\">Apache Commons StringUtils</a>:</p>\n\n<pre><code>StringUtils.replaceEach(story, new String[]{\"foo\", \"bar\"}, new String[]{\"bar\", \"foo\"})\n</code></pre>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26791724#26791724", "question_id": 26791441, "answer_id": 26791724}, {"body": "<p>I developed this code will solve problem:</p>\n\n<pre><code>public static String change(String s,String s1, String s2) {\n   int length = s.length();\n   int x1 = s1.length();\n   int x2 = s2.length();\n   int x12 = s.indexOf(s1);\n   int x22 = s.indexOf(s2);\n   String s3=s.substring(0, x12);\n   String s4 =s.substring(x12+3, x22);\n   s=s3+s2+s4+s1;\n   return s;\n}\n</code></pre>\n\n<p>In the main use <code>change(story,word2,word1).</code></p>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26791760#26791760", "question_id": 26791441, "answer_id": 26791760}, {"body": "<p>Search for the first word to be replaced. If it's in the string, recurse on the the part of the string before the occurrence, and on the part of the string after the occurrence.</p>\n\n<p>Otherwise, continue with the next word to be replaced.</p>\n\n<p>A naive implementation might look like this</p>\n\n<pre><code>public static String replaceAll(String input, String[] search, String[] replace) {\n  return replaceAll(input, search, replace, 0);\n}\n\nprivate static String replaceAll(String input, String[] search, String[] replace, int i) {\n  if (i == search.length) {\n    return input;\n  }\n  int j = input.indexOf(search[i]);\n  if (j == -1) {\n    return replaceAll(input, search, replace, i + 1);\n  }\n  return replaceAll(input.substring(0, j), search, replace, i + 1) +\n         replace[i] +\n         replaceAll(input.substring(j + search[i].length()), search, replace, i);\n}\n</code></pre>\n\n<p>Sample usage:</p>\n\n<pre><code>String input = \"Once upon a baz, there was a foo and a bar.\";\nString[] search = new String[] { \"foo\", \"bar\", \"baz\" };\nString[] replace = new String[] { \"bar\", \"baz\", \"foo\" };\nSystem.out.println(replaceAll(input, search, replace));\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Once upon a foo, there was a bar and a baz.\n</code></pre>\n\n<hr>\n\n<p>A less-naive version:</p>\n\n<pre><code>public static String replaceAll(String input, String[] search, String[] replace) {\n  StringBuilder sb = new StringBuilder();\n  replaceAll(sb, input, 0, input.length(), search, replace, 0);\n  return sb.toString();\n}\n\nprivate static void replaceAll(StringBuilder sb, String input, int start, int end, String[] search, String[] replace, int i) {\n  while (i &lt; search.length &amp;&amp; start &lt; end) {\n    int j = indexOf(input, search[i], start, end);\n    if (j == -1) {\n      i++;\n    } else {\n      replaceAll(sb, input, start, j, search, replace, i + 1);\n      sb.append(replace[i]);\n      start = j + search[i].length();\n    }\n  }\n  sb.append(input, start, end);\n}\n</code></pre>\n\n<p>Unfortunately, Java's <code>String</code> has no <code>indexOf(String str, int fromIndex, int toIndex)</code> method. I've omitted the implementation of <code>indexOf</code> here as I'm not certain it's correct, but it can be found on <a href=\"http://ideone.com/z1zM5H\">ideone</a>, along with some rough timings of various solutions posted here.</p>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26791826#26791826", "question_id": 26791441, "answer_id": 26791826}, {"body": "<p>If you want to be able to handle multiple occurrences of the search strings to be replaced, you can do that easily by splitting the string on each search term, then replacing it.\nHere is an example:</p>\n\n<pre><code>String regex = word1 + \"|\" + word2;\nString[] values = Pattern.compile(regex).split(story);\n\nString result;\nforeach subStr in values\n{\n   subStr = subStr.replace(word1, word2);\n   subStr = subStr.replace(word2, word1);\n   result += subStr;\n}\n</code></pre>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26792111#26792111", "question_id": 26791441, "answer_id": 26792111}, {"body": "<h2>Swapping Only One Occurrence</h2>\n\n<p>If there is only one occurrence of each of the swapable strings in the input, you can do the following:</p>\n\n<p>Before proceeding to any replace, get the indices of the occurrences of the words. After that we only replace the word found at these indexes, and not all occurrences. This solution uses <code>StringBuilder</code> and does not produce intermediate <code>String</code>s like <code>String.replace()</code>.</p>\n\n<p>One thing to note: if the swapable words have different lengths, after the first replace the second index might change (if the 1st word occurs before the 2nd) exactly with the difference of the 2 lengths. So aligning the second index will ensure this works even if we're swapping words with different lengths.</p>\n\n<pre><code>public static String swap(String src, String s1, String s2) {\n    StringBuilder sb = new StringBuilder(src);\n    int i1 = src.indexOf(s1);\n    int i2 = src.indexOf(s2);\n\n    sb.replace(i1, i1 + s1.length(), s2); // Replace s1 with s2\n    // If s1 was before s2, idx2 might have changed after the replace\n    if (i1 &lt; i2)\n        i2 += s2.length() - s1.length();\n    sb.replace(i2, i2 + s2.length(), s1); // Replace s2 with s1\n\n    return sb.toString();\n}\n</code></pre>\n\n<h2>Swapping Arbitrary Number of Occurrences</h2>\n\n<p>Analogous to the previous case we will first collect the indexes (occurrences) of the words, but in this case it will a list of integers for each word, not just one <code>int</code>. For this we will use the following utility method:</p>\n\n<pre><code>public static List&lt;Integer&gt; occurrences(String src, String s) {\n    List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n    for (int idx = 0;;)\n        if ((idx = src.indexOf(s, idx)) &gt;= 0) {\n            list.add(idx);\n            idx += s.length();\n        } else\n            return list;\n}\n</code></pre>\n\n<p>And using this we will replace the words with the other one by decreasing index (which might require to alternate between the 2 swapable words) so that we won't even have to correct the indices after a replace:</p>\n\n<pre><code>public static String swapAll(String src, String s1, String s2) {\n    List&lt;Integer&gt; l1 = occurrences(src, s1), l2 = occurrences(src, s2);\n\n    StringBuilder sb = new StringBuilder(src);\n\n    // Replace occurrences by decreasing index, alternating between s1 and s2\n    for (int i1 = l1.size() - 1, i2 = l2.size() - 1; i1 &gt;= 0 || i2 &gt;= 0;) {\n        int idx1 = i1 &lt; 0 ? -1 : l1.get(i1);\n        int idx2 = i2 &lt; 0 ? -1 : l2.get(i2);\n        if (idx1 &gt; idx2) { // Replace s1 with s2\n            sb.replace(idx1, idx1 + s1.length(), s2);\n            i1--;\n        } else { // Replace s2 with s1\n            sb.replace(idx2, idx2 + s2.length(), s1);\n            i2--;\n        }\n    }\n\n    return sb.toString();\n}\n</code></pre>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26796725#26796725", "question_id": 26791441, "answer_id": 26796725}, {"body": "<p>This is not an easy problem. And the more search-replacement parameters you have, the trickier it gets. You have several options, scattered on the palette of ugly-elegant, efficient-wasteful:</p>\n\n<ul>\n<li><p>Use <code>StringUtils.replaceEach</code> from Apache Commons as <a href=\"http://stackoverflow.com/users/1356423/alan-hay\">@AlanHay</a> recommended. This is a good option if you're free to add new dependencies in your project. You might get lucky: the dependency might be included already in your project</p></li>\n<li><p>Use a temporary placeholder as <a href=\"http://stackoverflow.com/users/1864167/jeroen-vannevel\">@Jeroen</a> suggested, and perform the replacement in 2 steps:</p>\n\n<ol>\n<li>Replace all search patterns with a unique tag that doesn't exist in the original text</li>\n<li>Replace the placeholders with the real target replacement</li>\n</ol>\n\n<p>This is not a great approach, for several reasons: it needs to ensure that the tags used in the first step are really unique; it performs more string replacement operations than really necessary</p></li>\n<li><p>Build a regex from all the patterns and use the method with <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#appendReplacement(java.lang.StringBuffer,%20java.lang.String)\"><code>Matcher</code> and <code>StringBuffer</code></a> as suggested by <a href=\"http://stackoverflow.com/users/1220238/mjolka\">@arshajii</a>. This is not terrible, but not that great either, as building the regex is kind of hackish, and it involves <code>StringBuffer</code> which went out of fashion a while ago in favor of <code>StringBuilder</code>.</p></li>\n<li><p>Use a recursive solution proposed by <a href=\"http://stackoverflow.com/users/1220238/mjolka\">@mjolka</a>, by splitting the string at the matched patterns, and recursing on the remaining segments. This is a fine solution, compact and quite elegant. Its weakness is the potentially many substring and concatenation operations, and the stack size limits that apply to all recursive solutions</p></li>\n<li><p>Split the text to words and use Java 8 streams to perform the replacements elegantly as <a href=\"http://stackoverflow.com/users/183397/msandiford\">@msandiford</a> suggested, but of course that only works if you are ok with splitting at word boundaries, which makes it not suitable as a general solution</p></li>\n</ul>\n\n<p>Here's my version, based on ideas borrowed from <a href=\"http://grepcode.com/file/repo1.maven.org/maven2/commons-lang/commons-lang/2.6/org/apache/commons/lang/StringUtils.java#StringUtils.replaceEach%28java.lang.String%2Cjava.lang.String%5B%5D%2Cjava.lang.String%5B%5D%29\">Apache's implementation</a>. It's neither simple nor elegant, but it works, and should be relatively efficient, without unnecessary steps. In a nutshell, it works like this: repeatedly find the next matching search pattern in the text, and use a <code>StringBuilder</code> to accumulate the unmatched segments and the replacements.</p>\n\n<pre><code>public static String replaceEach(String text, String[] searchList, String[] replacementList) {\n    // TODO: throw new IllegalArgumentException() if any param doesn't make sense\n    //validateParams(text, searchList, replacementList);\n\n    SearchTracker tracker = new SearchTracker(text, searchList, replacementList);\n    if (!tracker.hasNextMatch(0)) {\n        return text;\n    }\n\n    StringBuilder buf = new StringBuilder(text.length() * 2);\n    int start = 0;\n\n    do {\n        SearchTracker.MatchInfo matchInfo = tracker.matchInfo;\n        int textIndex = matchInfo.textIndex;\n        String pattern = matchInfo.pattern;\n        String replacement = matchInfo.replacement;\n\n        buf.append(text.substring(start, textIndex));\n        buf.append(replacement);\n\n        start = textIndex + pattern.length();\n    } while (tracker.hasNextMatch(start));\n\n    return buf.append(text.substring(start)).toString();\n}\n\nprivate static class SearchTracker {\n\n    private final String text;\n\n    private final Map&lt;String, String&gt; patternToReplacement = new HashMap&lt;&gt;();\n    private final Set&lt;String&gt; pendingPatterns = new HashSet&lt;&gt;();\n\n    private MatchInfo matchInfo = null;\n\n    private static class MatchInfo {\n        private final String pattern;\n        private final String replacement;\n        private final int textIndex;\n\n        private MatchInfo(String pattern, String replacement, int textIndex) {\n            this.pattern = pattern;\n            this.replacement = replacement;\n            this.textIndex = textIndex;\n        }\n    }\n\n    private SearchTracker(String text, String[] searchList, String[] replacementList) {\n        this.text = text;\n        for (int i = 0; i &lt; searchList.length; ++i) {\n            String pattern = searchList[i];\n            patternToReplacement.put(pattern, replacementList[i]);\n            pendingPatterns.add(pattern);\n        }\n    }\n\n    boolean hasNextMatch(int start) {\n        int textIndex = -1;\n        String nextPattern = null;\n\n        for (String pattern : new ArrayList&lt;&gt;(pendingPatterns)) {\n            int matchIndex = text.indexOf(pattern, start);\n            if (matchIndex == -1) {\n                pendingPatterns.remove(pattern);\n            } else {\n                if (textIndex == -1 || matchIndex &lt; textIndex) {\n                    textIndex = matchIndex;\n                    nextPattern = pattern;\n                }\n            }\n        }\n\n        if (nextPattern != null) {\n            matchInfo = new MatchInfo(nextPattern, patternToReplacement.get(nextPattern), textIndex);\n            return true;\n        }\n        return false;\n    }\n}\n</code></pre>\n\n<p>Unit tests:</p>\n\n<pre><code>@Test\npublic void testSingleExact() {\n    assertEquals(\"bar\", StringUtils.replaceEach(\"foo\", new String[]{\"foo\"}, new String[]{\"bar\"}));\n}\n\n@Test\npublic void testReplaceTwice() {\n    assertEquals(\"barbar\", StringUtils.replaceEach(\"foofoo\", new String[]{\"foo\"}, new String[]{\"bar\"}));\n}\n\n@Test\npublic void testReplaceTwoPatterns() {\n    assertEquals(\"barbaz\", StringUtils.replaceEach(\"foobar\",\n            new String[]{\"foo\", \"bar\"},\n            new String[]{\"bar\", \"baz\"}));\n}\n\n@Test\npublic void testReplaceNone() {\n    assertEquals(\"foofoo\", StringUtils.replaceEach(\"foofoo\", new String[]{\"x\"}, new String[]{\"bar\"}));\n}\n\n@Test\npublic void testStory() {\n    assertEquals(\"Once upon a foo, there was a bar and a baz, and another bar and a cat.\",\n            StringUtils.replaceEach(\"Once upon a baz, there was a foo and a bar, and another foo and a cat.\",\n                    new String[]{\"foo\", \"bar\", \"baz\"},\n                    new String[]{\"bar\", \"baz\", \"foo\"})\n    );\n}\n</code></pre>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26819171#26819171", "question_id": 26791441, "answer_id": 26819171}, {"body": "<p>One-liner in Java 8:</p>\n\n<pre><code>    story = Pattern\n        .compile(String.format(\"(?&lt;=%1$s)|(?=%1$s)\", \"foo|bar\"))\n        .splitAsStream(story)\n        .map(w -&gt; ImmutableMap.of(\"bar\", \"foo\", \"foo\", \"bar\").getOrDefault(w, w))\n        .collect(Collectors.joining());\n</code></pre>\n\n<ul>\n<li>Lookaround regular expressions (<code>?&lt;=</code>, <code>?=</code>): <a href=\"http://www.regular-expressions.info/lookaround.html\">http://www.regular-expressions.info/lookaround.html</a> </li>\n<li>If the words can contain special regex characters, use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#quote(java.lang.String)\">Pattern.quote</a> to\nescape them.</li>\n<li>I use guava ImmutableMap for conciseness, but obviously any other Map will do the job as well.</li>\n</ul>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26821761#26821761", "question_id": 26791441, "answer_id": 26821761}, {"body": "<p>\u200bIf you want to replace words in a sentence which are separated by white space as shown in your example you can use this simple algorithm.</p>\n\n<ol>\n<li>Split story on white space</li>\n<li>Replace each elements, if foo replace it to bar and vice varsa</li>\n<li>Join the array back into one string</li>\n</ol>\n\n<p>\u200bIf Splitting on space is not acceptable one can follow this alternate algorithm. \u200bYou need to use the longer string first. If the stringes are foo and fool, you need to use fool first and then foo.</p>\n\n<ol>\n<li>Split on the word foo</li>\n<li>Replace bar with foo each element of the array</li>\n<li>Join that array back adding bar after each element except the last</li>\n</ol>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26825421#26825421", "question_id": 26791441, "answer_id": 26825421}, {"body": "<p>It's easy to write a method to do this using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#regionMatches-int-java.lang.String-int-int-\" rel=\"nofollow\"><code>String.regionMatches</code></a>:</p>\n\n<pre><code>public static String simultaneousReplace(String subject, String... pairs) {\n    if (pairs.length % 2 != 0) throw new IllegalArgumentException(\n        \"Strings to find and replace are not paired.\");\n    StringBuilder sb = new StringBuilder();\n    outer:\n    for (int i = 0; i &lt; subject.length(); i++) {\n        for (int j = 0; j &lt; pairs.length; j += 2) {\n            String find = pairs[j];\n            if (subject.regionMatches(i, find, 0, find.length())) {\n                sb.append(pairs[j + 1]);\n                i += find.length() - 1;\n                continue outer;\n            }\n        }\n        sb.append(subject.charAt(i));\n    }\n    return sb.toString();\n}\n</code></pre>\n\n<p>Testing:</p>\n\n<pre><code>String s = \"There are three cats and two dogs.\";\ns = simultaneousReplace(s,\n    \"cats\", \"dogs\",\n    \"dogs\", \"budgies\");\nSystem.out.println(s);\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>There are three dogs and two budgies.</p>\n</blockquote>\n\n<p>It is not immediately obvious, but a function like this can still be dependent on the order in which the replacements are specified. Consider:</p>\n\n<pre><code>String truth = \"Java is to JavaScript\";\ntruth += \" as \" + simultaneousReplace(truth,\n    \"JavaScript\", \"Hamster\",\n    \"Java\", \"Ham\");\nSystem.out.println(truth);\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>Java is to JavaScript as Ham is to Hamster</p>\n</blockquote>\n\n<p>But reverse the replacements:</p>\n\n<pre><code>truth += \" as \" + simultaneousReplace(truth,\n    \"Java\", \"Ham\",\n    \"JavaScript\", \"Hamster\");\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>Java is to JavaScript as Ham is to HamScript</p>\n</blockquote>\n\n<p>Oops! :)</p>\n\n<p>Therefore it is sometimes useful to make sure to look for the <em>longest</em> match (as PHP's <a href=\"http://php.net/manual/en/function.strtr.php\" rel=\"nofollow\"><code>strtr</code></a> function does, for example). This version of the method will do that:</p>\n\n<pre><code>public static String simultaneousReplace(String subject, String... pairs) {\n    if (pairs.length % 2 != 0) throw new IllegalArgumentException(\n        \"Strings to find and replace are not paired.\");\n    StringBuilder sb = new StringBuilder();\n    for (int i = 0; i &lt; subject.length(); i++) {\n        int longestMatchIndex = -1;\n        int longestMatchLength = -1;\n        for (int j = 0; j &lt; pairs.length; j += 2) {\n            String find = pairs[j];\n            if (subject.regionMatches(i, find, 0, find.length())) {\n                if (find.length() &gt; longestMatchLength) {\n                    longestMatchIndex = j;\n                    longestMatchLength = find.length();\n                }\n            }\n        }\n        if (longestMatchIndex &gt;= 0) {\n            sb.append(pairs[longestMatchIndex + 1]);\n            i += longestMatchLength - 1;\n        } else {\n            sb.append(subject.charAt(i));\n        }\n    }\n    return sb.toString();\n}\n</code></pre>\n\n<p>Note that the above methods are case-sensitive. If you need a case-insensitive version it is easy to modify the above because <code>String.regionMatches</code> can take an <code>ignoreCase</code> parameter.</p>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26826286#26826286", "question_id": 26791441, "answer_id": 26826286}, {"body": "<p>Here's a less complicated answer using Map.</p>\n\n<pre><code>private static String replaceEach(String str,Map&lt;String, String&gt; map) {\n\n         Object[] keys = map.keySet().toArray();\n         for(int x = 0 ; x &lt; keys.length ; x ++ ) {\n             str = str.replace((String) keys[x],\"%\"+x);\n         }\n\n         for(int x = 0 ; x &lt; keys.length ; x ++) {\n             str = str.replace(\"%\"+x,map.get(keys[x]));\n         }\n         return str;\n     }\n</code></pre>\n\n<p>And method is called</p>\n\n<pre><code>Map&lt;String, String&gt; replaceStr = new HashMap&lt;&gt;();\nreplaceStr.put(\"Raffy\",\"awesome\");\nreplaceStr.put(\"awesome\",\"Raffy\");\nString replaced = replaceEach(\"Raffy is awesome, awesome awesome is Raffy Raffy\", replaceStr);\n</code></pre>\n\n<p>Output is:\nawesome is Raffy, Raffy Raffy is awesome awesome</p>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26835963#26835963", "question_id": 26791441, "answer_id": 26835963}, {"body": "<p>Using the answer found <a href=\"http://stackoverflow.com/questions/5034442/indexes-of-all-occurrences-of-character-in-a-string\">here</a> you can find all occurrences of the strings you wish to replace with.</p>\n\n<p>So for example you run the code in the above SO answer. Create two tables of indexes (let's say bar and foo do not appear only once in your string) and you can work with those tables on replacing them in your string.</p>\n\n<p>Now for replacing on specific index locations you can use:</p>\n\n<pre><code>public static String replaceStringAt(String s, int pos, String c) {\n   return s.substring(0,pos) + c + s.substring(pos+1);\n}\n</code></pre>\n\n<p>Whereas <code>pos</code> is the index where your strings start (from the index tables I quoted above).\nSo let's say you created two tables of indexes for each one.\nLet's call them <code>indexBar</code> and <code>indexFoo</code>.</p>\n\n<p>Now in replacing them you could simply run two loops, one for each replacements you wish to make.</p>\n\n<pre><code>for(int i=0;i&lt;indexBar.Count();i++)\nreplaceStringAt(originalString,indexBar[i],newString);\n</code></pre>\n\n<p>Similarly another loop for <code>indexFoo</code>. </p>\n\n<p>This may not be as efficient as other answers here but it's simpler to understand than Maps or other stuff.</p>\n\n<p>This would always give you the result you wish and for multiple possible occurrences of each string. As long as you store the index of each occurrence.</p>\n\n<p>Also this answer needs no recursion nor any external dependencies. As far as complexity goes it propably is O(n squared), whereas n is the sum of occurences of both words.</p>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26841632#26841632", "question_id": 26791441, "answer_id": 26841632}, {"body": "<p>If you don't want any dependencies, you could simply use an array which allows a one-time change only. This is not the most efficient solution, but it should work.</p>\n\n<pre><code>public String replace(String sentence, String[]... replace){\n    String[] words = sentence.split(\"\\\\s+\");\n    int[] lock = new int[words.length];\n    StringBuilder out = new StringBuilder();\n\n    for (int i = 0; i &lt; words.length; i++) {\n        for(String[] r : replace){\n            if(words[i].contains(r[0]) &amp;&amp; lock[i] == 0){\n                words[i] = words[i].replace(r[0], r[1]);\n                lock[i] = 1;\n            }\n        }\n\n        out.append((i &lt; (words.length - 1) ? words[i] + \" \" : words[i]));\n    }\n\n    return out.toString();\n}\n</code></pre>\n\n<p>Then, it whould work.</p>\n\n<pre><code>String story = \"Once upon a time, there was a foo and a bar.\";\n\nString[] a = {\"foo\", \"bar\"};\nString[] b = {\"bar\", \"foo\"};\nString[] c = {\"there\", \"Pocahontas\"};\nstory = replace(story, a, b, c);\n\nSystem.out.println(story); // Once upon a time, Pocahontas was a bar and a foo.\n</code></pre>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26850191#26850191", "question_id": 26791441, "answer_id": 26850191}, {"body": "<p>Consider using <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html\" rel=\"nofollow\">StringBuilder</a></p>\n\n<p>Then store the index where each string should start. If you use a place holder character at each position, then remove it, and insert the users string. You can then map the end position by adding the string length to the start position. </p>\n\n<pre><code>String firstString = \"???\";\nString secondString  = \"???\"\n\nStringBuilder story = new StringBuilder(\"One upon a time, there was a \" \n    + firstString\n    + \" and a \"\n    + secondString);\n\nint  firstWord = 30;\nint  secondWord = firstWord + firstString.length() + 7;\n\nstory.replace(firstWord, firstWord + firstString.length(), userStringOne);\nstory.replace(secondWord, secondWord + secondString.length(), userStringTwo);\n\nfirstString = userStringOne;\nsecondString = userStringTwo;\n\nreturn story;\n</code></pre>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26876298#26876298", "question_id": 26791441, "answer_id": 26876298}, {"body": "<p>What I can only share is my own method.</p>\n\n<p>You can use a temporary <code>String temp = \"&lt;?&gt;\";</code> or <code>String.Format();</code></p>\n\n<p>This is my example code created in console application via <a href=\"/questions/tagged/c%23\" class=\"post-tag\" title=\"show questions tagged 'c#'\" rel=\"tag\">c#</a> <em>-\"Idea Only, Not Exact Answer\"</em>.</p>\n\n<pre><code>static void Main(string[] args)\n    {\n        String[] word1 = {\"foo\", \"Once\"};\n        String[] word2 = {\"bar\", \"time\"};\n        String story = \"Once upon a time, there was a foo and a bar.\";\n\n        story = Switcher(story,word1,word2);\n        Console.WriteLine(story);\n        Console.Read();\n    }\n    // Using a temporary string.\n    static string Switcher(string text, string[] target, string[] value)\n    {\n        string temp = \"&lt;?&gt;\";\n        if (target.Length == value.Length)\n        {\n            for (int i = 0; i &lt; target.Length; i++)\n            {\n                text = text.Replace(target[i], temp);\n                text = text.Replace(value[i], target[i]);\n                text = text.Replace(temp, value[i]);\n            }\n        }\n        return text;\n    }\n</code></pre>\n\n<p>Or you can also use the <code>String.Format();</code></p>\n\n<pre><code>static string Switcher(string text, string[] target, string[] value)\n        {\n            if (target.Length == value.Length)\n            {\n                for (int i = 0; i &lt; target.Length; i++)\n                {\n                    text = text.Replace(target[i], \"{0}\").Replace(value[i], \"{1}\");\n                    text = String.Format(text, value[i], target[i]);\n                }\n            }\n            return text;\n        }\n</code></pre>\n\n<p><strong>Output:</strong> <code>time upon a Once, there was a bar and a foo.</code></p>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26877910#26877910", "question_id": 26791441, "answer_id": 26877910}, {"body": "<p>You can accomplish your goal with the following code block:</p>\n\n<pre><code>String word1 = \"bar\";\nString word2 = \"foo\";\nString story = \"Once upon a time, in a foo, there was a foo and a bar.\";\nstory = String.format(story.replace(word1, \"%1$s\").replace(word2, \"%2$s\"),\n    word2, word1);\n</code></pre>\n\n<p>It replaces the words regardless of the order. You can extend this principle into an utility method, like:</p>\n\n<pre><code>private static String replace(String source, String[] targets, String[] replacements) throws IllegalArgumentException {\n    if (source == null) {\n        throw new IllegalArgumentException(\"The parameter \\\"source\\\" cannot be null.\");\n    }\n\n    if (targets == null || replacements == null) {\n        throw new IllegalArgumentException(\"Neither parameters \\\"targets\\\" or \\\"replacements\\\" can be null.\");\n    }\n\n    if (targets.length == 0 || targets.length != replacements.length) {\n        throw new IllegalArgumentException(\"The parameters \\\"targets\\\" and \\\"replacements\\\" must have at least one item and have the same length.\");\n    }\n\n    String outputMask = source;\n    for (int i = 0; i &lt; targets.length; i++) {\n        outputMask = outputMask.replace(targets[i], \"%\" + (i + 1) + \"$s\");\n    }\n\n    return String.format(outputMask, (Object[])replacements);\n}\n</code></pre>\n\n<p>Which would be consumed as:</p>\n\n<pre><code>String story = \"Once upon a time, in a foo, there was a foo and a bar.\";\nstory = replace(story, new String[] { \"bar\", \"foo\" },\n    new String[] { \"foo\", \"bar\" }));\n</code></pre>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26879640#26879640", "question_id": 26791441, "answer_id": 26879640}, {"body": "<pre><code>String word1 = \"bar\";\nString word2 = \"foo\";\n\nString story = \"Once upon a time, there was a foo and a bar.\"\n\nstory = story.replace(\"foo\", \"&lt;foo /&gt;\");\nstory = story.replace(\"bar\", \"&lt;bar /&gt;\");\n\nstory = story.replace(\"&lt;foo /&gt;\", word1);\nstory = story.replace(\"&lt;bar /&gt;\", word2);\n</code></pre>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26882682#26882682", "question_id": 26791441, "answer_id": 26882682}, {"body": "<p>You are performing multiple search-replace operations on the input. This will produce undesired results when the replacement strings contain search strings. Consider the foo->bar, bar-foo example, here are the results for each iteration:</p>\n\n<ol>\n<li>Once upon a time, there was a foo and a bar. (input)</li>\n<li>Once upon a time, there was a bar and a bar. (foo->bar)</li>\n<li>Once upon a time, there was a foo and a foo. (bar->foo, output)</li>\n</ol>\n\n<p>You need to perform the replacement in one iteration without going back. A brute-force solution is as follows:</p>\n\n<ol>\n<li>Search the input from current position to end for multiple search strings until a match is found</li>\n<li>Replace the matched search string with corresponding replace string</li>\n<li>Set current position to the next character after the replaced string</li>\n<li>Repeat</li>\n</ol>\n\n<p>A function such as <code>String.indexOfAny(String[]) -&gt; int[]{index, whichString}</code> would be useful. Here is an example (not the most efficient one):</p>\n\n<pre><code>private static String replaceEach(String str, String[] searchWords, String[] replaceWords) {\n    String ret = \"\";\n    while (str.length() &gt; 0) {\n        int i;\n        for (i = 0; i &lt; searchWords.length; i++) {\n            String search = searchWords[i];\n            String replace = replaceWords[i];\n            if (str.startsWith(search)) {\n                ret += replace;\n                str = str.substring(search.length());\n                break;\n            }\n        }\n        if (i == searchWords.length) {\n            ret += str.substring(0, 1);\n            str = str.substring(1);\n        }\n    }\n    return ret;\n}\n</code></pre>\n\n<p>Some tests:</p>\n\n<pre><code>System.out.println(replaceEach(\n    \"Once upon a time, there was a foo and a bar.\",\n    new String[]{\"foo\", \"bar\"},\n    new String[]{\"bar\", \"foo\"}\n));\n// Once upon a time, there was a bar and a foo.\n\nSystem.out.println(replaceEach(\n    \"a p\",\n    new String[]{\"a\", \"p\"},\n    new String[]{\"apple\", \"pear\"}\n));\n// apple pear\n\nSystem.out.println(replaceEach(\n    \"ABCDE\",\n    new String[]{\"A\", \"B\", \"C\", \"D\", \"E\"},\n    new String[]{\"B\", \"C\", \"E\", \"E\", \"F\"}\n));\n// BCEEF\n\nSystem.out.println(replaceEach(\n    \"ABCDEF\",\n    new String[]{\"ABCDEF\", \"ABC\", \"DEF\"},\n    new String[]{\"XXXXXX\", \"YYY\", \"ZZZ\"}\n));\n// XXXXXX\n// note the order of search strings, longer strings should be placed first \n// in order to make the replacement greedy\n</code></pre>\n\n<p><a href=\"http://ideone.com/0KlIeG\" rel=\"nofollow\"><strong>Demo on IDEONE</strong></a><br>\n<a href=\"http://ideone.com/BMTshJ\" rel=\"nofollow\"><strong>Demo on IDEONE, alternate code</strong></a></p>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26886202#26886202", "question_id": 26791441, "answer_id": 26886202}, {"body": "<p>Here's my version, which is word-based:</p>\n\n<pre><code>class TextReplace\n{\n\n    public static void replaceAll (String text, String [] lookup,\n                                   String [] replacement, String delimiter)\n    {\n\n        String [] words = text.split(delimiter);\n\n        for (int i = 0; i &lt; words.length; i++)\n        {\n\n            int j = find(lookup, words[i]);\n\n            if (j &gt;= 0) words[i] = replacement[j];\n\n        }\n\n        text = StringUtils.join(words, delimiter);\n\n    }\n\n    public static  int find (String [] array, String key)\n    {\n\n        for (int i = 0; i &lt; array.length; i++)\n            if (array[i].equals(key))\n                return i;\n\n        return (-1);\n\n    }\n\n}\n</code></pre>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26888875#26888875", "question_id": 26791441, "answer_id": 26888875}, {"body": "<pre><code>String word1 = \"bar\";\nString word2 = \"foo\";\nString story = \"Once upon a time, there was a foo and a bar.\"\n</code></pre>\n\n<p>Little tricky way but you need to do some more checks.</p>\n\n<p>1.convert string to character array</p>\n\n<pre><code>   String temp[] = story.split(\" \");//assume there is only spaces.\n</code></pre>\n\n<p>2.loop on temp and replace <code>foo</code> with <code>bar</code> and <code>bar</code> with <code>foo</code> as there are no chances of getting replaceable string again.</p>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26909273#26909273", "question_id": 26791441, "answer_id": 26909273}, {"body": "<p>This works and is simple:</p>\n\n<pre><code>public String replaceBoth(String text, String token1, String token2) {            \n    return text.replace(token1, \"\\ufdd0\").replace(token2, token1).replace(\"\\ufdd0\", token2);\n    }\n</code></pre>\n\n<p>You use it like this:</p>\n\n<pre><code>replaceBoth(\"Once upon a time, there was a foo and a bar.\", \"foo\", \"bar\");\n</code></pre>\n\n<p>Note: this counts on Strings not containing character <code>\\ufdd0</code>, which is a character <strong>permanently</strong> reserved for internal use by Unicode (See <a href=\"http://www.unicode.org/faq/private_use.html\" rel=\"nofollow\">http://www.unicode.org/faq/private_use.html</a>):</p>\n\n<p>I don't think it's necessary, but If you want to be absolutely safe you can use:</p>\n\n<pre><code>public String replaceBoth(String text, String token1, String token2) {\n    if (text.contains(\"\\ufdd0\") || token1.contains(\"\\ufdd0\") || token2.contains(\"\\ufdd0\")) throw new IllegalArgumentException(\"Invalid character.\");\n    return text.replace(token1, \"\\ufdd0\").replace(token2, token1).replace(\"\\ufdd0\", token2);\n    }\n</code></pre>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/26921745#26921745", "question_id": 26791441, "answer_id": 26921745}, {"body": "<p>Well, the shorter answer is...  </p>\n\n<pre><code>String word1 = \"bar\";\nString word2 = \"foo\";\nString story = \"Once upon a time, there was a foo and a bar.\";\nstory = story.replace(\"foo\", \"@\"+ word1).replace(\"bar\", word2).replace(\"@\" + word2, word1);\nSystem.out.println(story);\n</code></pre>\n", "title": "How can I replace two strings in a way that one does not end up replacing the other?", "tags": ["java", "string", "replace"], "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot/27044111#27044111", "question_id": 26791441, "answer_id": 27044111}], "creation_date": 1415316826, "score": 155, "link": "http://stackoverflow.com/questions/26791441/how-can-i-replace-two-strings-in-a-way-that-one-does-not-end-up-replacing-the-ot", "question_id": 26791441}, {"body": "<p>The limit of <code>int</code> is from -2147483648 to 2147483647.</p>\n\n<p>If I input </p>\n\n<pre><code>int i = 2147483648;\n</code></pre>\n\n<p>then Eclipse will prompt a red underline under \"2147483648\".</p>\n\n<p>But if I do this:</p>\n\n<pre><code>int i = 1024 * 1024 * 1024 * 1024;\n</code></pre>\n\n<p>it will compile fine.</p>\n\n<pre><code>public class Test {\n    public static void main(String[] args) {        \n\n        int i = 2147483648;                   // error\n        int j = 1024 * 1024 * 1024 * 1024;    // no error\n\n    }\n}\n</code></pre>\n\n<p>Maybe it's a basic question in Java, but I have no idea why the second variant produces no error.</p>\n", "tags": ["java", "int"], "title": "Why does int i = 1024 * 1024 * 1024 * 1024 compile without error?", "answers": [{"body": "<p>There's nothing wrong with that statement; you're just multiplying 4 numbers and assigning it to an int, there just happens to be an overflow. This is different than assigning a single <em>literal</em>, which would be bounds-checked at compile-time.</p>\n\n<p>It is the out-of-bounds <em>literal</em> that causes the error, not the <em>assignment</em>:</p>\n\n<pre><code>System.out.println(2147483648);        // error\nSystem.out.println(2147483647 + 1);    // no error\n</code></pre>\n\n<p>By contrast a <code>long</code> literal would compile fine:</p>\n\n<pre><code>System.out.println(2147483648L);       // no error\n</code></pre>\n\n<p>Note that, in fact, the result <em>is</em> still computed at compile-time because <code>1024 * 1024 * 1024 * 1024</code> is a <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.28\"><em>constant expression</em></a>:</p>\n\n<pre><code>int i = 1024 * 1024 * 1024 * 1024;\n</code></pre>\n\n<p>becomes:</p>\n\n<pre><code>   0: iconst_0      \n   1: istore_1      \n</code></pre>\n\n<p>Notice that the result (<code>0</code>) is simply loaded and stored, and no multiplication takes place.</p>\n\n<hr>\n\n<p>From <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-3.html#jls-3.10.1\">JLS \u00a73.10.1</a> (thanks to @ChrisK for bringing it up in the comments):</p>\n\n<blockquote>\n  <p><strong>It is a compile-time error if a decimal literal of type <code>int</code> is larger than <code>2147483648</code> (2<sup>31</sup>), or if the decimal literal <code>2147483648</code> appears anywhere other than as the operand of the unary minus operator (<a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.15.4\">\u00a715.15.4</a>).</strong></p>\n</blockquote>\n", "title": "Why does int i = 1024 * 1024 * 1024 * 1024 compile without error?", "tags": ["java", "int"], "link": "http://stackoverflow.com/questions/24676375/why-does-int-i-1024-1024-1024-1024-compile-without-error/24676520#24676520", "question_id": 24676375, "answer_id": 24676520}, {"body": "<blockquote>\n  <p>I have no idea why the second variant produces no error.</p>\n</blockquote>\n\n<p>The behaviour that you suggest -- that is, <em>the production of diagnostic message when a computation produces a value that is larger than the largest value that can be stored in an integer</em> -- is a <em>feature</em>. For you to use any feature, the feature must be thought of, considered to be a good idea, designed, specified, implemented, tested, documented and shipped to users.</p>\n\n<p>For Java, one or more of the things on that list did not happen, and therefore you don't have the feature. I don't know which one; you'd have to ask a Java designer.</p>\n\n<p>For C#, all of those things did happen -- about fourteen years ago now -- and so the corresponding program in C# has produced an error since C# 1.0.</p>\n", "title": "Why does int i = 1024 * 1024 * 1024 * 1024 compile without error?", "tags": ["java", "int"], "link": "http://stackoverflow.com/questions/24676375/why-does-int-i-1024-1024-1024-1024-compile-without-error/24681702#24681702", "question_id": 24676375, "answer_id": 24681702}, {"body": "<p>In addition to arshajii's answer I want to show one more thing:</p>\n\n<p>It is not the <em>assignment</em> that causes the error but simply the use of the <em>literal</em>.\nWhen you try</p>\n\n<pre><code>long i = 2147483648;\n</code></pre>\n\n<p>you'll notice it also causes a compile-error since the right hand side still is an <code>int</code>-literal and out of range.</p>\n\n<p>So operations with <code>int</code>-values (and that's including assignments) may overflow without a compile-error (and without a runtime-error as well), but the compiler just can't handle those too-large literals.</p>\n", "title": "Why does int i = 1024 * 1024 * 1024 * 1024 compile without error?", "tags": ["java", "int"], "link": "http://stackoverflow.com/questions/24676375/why-does-int-i-1024-1024-1024-1024-compile-without-error/24691448#24691448", "question_id": 24676375, "answer_id": 24691448}, {"body": "<p><code>1024 * 1024 * 1024 * 1024</code> and <code>2147483648</code> do not have the same value in Java. </p>\n\n<p>Actually, <code>2147483648</code> <strong>ISN'T EVEN A VALUE</strong>(although <code>2147483648L</code> is) in Java. The compiler literally does not know what it is, or how to use it. So it whines.</p>\n\n<p><code>1024</code> is a valid int in Java, and a valid <code>int</code> multiplied by another valid <code>int</code>, is always a valid <code>int</code>. Even if it's not the same value that you would intuitively expect because the calculation will overflow.</p>\n\n<h2>Example</h2>\n\n<p>Consider the following code sample:</p>\n\n<pre><code>public static void main(String[] args) {\n    int a = 1024;\n    int b = a * a * a * a;\n}\n</code></pre>\n\n<p>Would you expect this to generate a compile error? It becomes a little more slippery now.<br>\nWhat if we put a loop with 3 iterations and multiplied in the loop? </p>\n\n<p>The compiler is allowed to optimize, but it can't change the behaviour of the program while it's doing so. </p>\n\n<hr>\n\n<p><strong>Some info on how this case is actually handled:</strong></p>\n\n<p>In Java and many other languages, integers will consist of a fixed number of bits.   Calculations that don't fit in the given number of bits will <a href=\"http://en.wikipedia.org/wiki/Arithmetic_overflow\">overflow</a>; the calculation is basically performed <em>modulus</em> 2^32 in Java, after which the value is converted back into a <em>signed</em> integer. </p>\n\n<p>Other languages or API's use a dynamic number of bits (<code>BigInteger</code> in Java), raise an exception or set the value to a magic value such as not-a-number.</p>\n", "title": "Why does int i = 1024 * 1024 * 1024 * 1024 compile without error?", "tags": ["java", "int"], "link": "http://stackoverflow.com/questions/24676375/why-does-int-i-1024-1024-1024-1024-compile-without-error/24699217#24699217", "question_id": 24676375, "answer_id": 24699217}, {"body": "<p><strong>A:</strong> Because it is not an error. </p>\n\n<p><strong>Background:</strong> The multiplication <code>1024 * 1024 * 1024 * 1024</code> will lead to an overflow. An overflow is very often a bug. Different programming languages produce different behavior when overflows happen. For example, C and C++ call it \"undefined behavior\" for signed integers, and the behavior is defined unsigned integers (take the mathematical result, add <code>UINT_MAX + 1</code> as long as the result is negative, subtract <code>UINT_MAX + 1</code> as long as the result is greater than <code>UINT_MAX</code>). </p>\n\n<p>In the case of Java, if the result of an operation with <code>int</code> values is not in the allowed range, conceptually Java adds or subtracts 2^32 until the result is in the allowed range. So the statement is completely legal and not in error. It just doesn't produce the result that you may have hoped for.</p>\n\n<p>You can surely argue whether this behavior is helpful, and whether the compiler should give you a warning. I'd say personally that a warning would be very useful, but an error would be incorrect since it is legal Java.</p>\n", "title": "Why does int i = 1024 * 1024 * 1024 * 1024 compile without error?", "tags": ["java", "int"], "link": "http://stackoverflow.com/questions/24676375/why-does-int-i-1024-1024-1024-1024-compile-without-error/24702505#24702505", "question_id": 24676375, "answer_id": 24702505}], "creation_date": 1404994661, "score": 150, "link": "http://stackoverflow.com/questions/24676375/why-does-int-i-1024-1024-1024-1024-compile-without-error", "question_id": 24676375}, {"body": "<p>The last time I used Android Studio, it generated <code>.gradle</code> files with <code>mavencentral()</code> buildscript repositories whereas now there's <code>jcenter()</code>. </p>\n\n<p>Could anyone explain the issues connected with this. Are there any other repos? When should we switch them? What impact do they have on projects, modules, libs? Any other essentials for Android developers?</p>\n\n<p>Who's responsible for maintaining those repos?</p>\n", "tags": ["java", "android", "build", "gradle", "android-studio"], "title": "Android buildscript repositories. jcenter VS mavencentral", "answers": [{"body": "<p>I was wondering the same, and I don't have a definitive answer but figured it might be worth sharing what (little) I'd learned. I found mention of the move from Maven Central to JCenter <a href=\"https://code.google.com/p/android/issues/detail?id=72061&amp;can=1&amp;q=jcenter&amp;colspec=ID%20Type%20Status%20Owner%20Summary%20Stars\">within one issue  on Google Code</a>, but didn't spot details about exactly when this happened - couldn't find mention in the recent changes list for Android Studio. </p>\n\n<p>From reading up on JCenter, it is the repository behind Bintray, from the company JFrog (who I've come across before, and I guess that's where the 'J' comes from). According to the Bintray blog, <a href=\"http://blog.bintray.com/2014/02/11/bintray-as-pain-free-gateway-to-maven-central/\">Bintray is a superset of Maven Central</a>, so if that's true there shouldn't be issues with missing dependencies, but I guess it's going to depend on exactly what you're using in your projects - you could always directly check the repos as both have nice easily-searchable websites. So for who maintains these repos, as best I know, it's up to the producers of the dependencies to add their dependencies to each repo, and up to the repo owner just to maintain the service. </p>\n\n<p>In terms of when to switch it is difficult to work out. AOSP is still using Maven Central I think (from looking in Templates for New Android Application), but then that template is also still using a very old Gradle version (0.4) as well. There's a couple of issues about others having issues with dependencies from jcenter, but not really a lot reported, and it is possible that Google will switch again to some other repo before releasing AS final. If Maven Central is still working fine for you for now you could hold off switching until then especially if you're building large commercial solutions.</p>\n", "title": "Android buildscript repositories. jcenter VS mavencentral", "tags": ["java", "android", "build", "gradle", "android-studio"], "link": "http://stackoverflow.com/questions/24852219/android-buildscript-repositories-jcenter-vs-mavencentral/24910230#24910230", "question_id": 24852219, "answer_id": 24910230}, {"body": "<p>No matter what the default is in the build.gradle file - in a team based development effort you should really use a repository manager like Sonatype Nexus or JFrog Artifactory and not reference those upstream repositories directly.</p>\n\n<p>This will allow you to save a lot of bandwidth, combine both and many other repositories and manage it all in your own network.</p>\n\n<p>In terms of Maven Central vs JCenter. JCenter is effort from JFrog to embrace, extend (and exterminate?) Maven Central. Maven Central is the default repository in Maven, SBT and others, while Gradle has switched to JCenter. This is not surprising considering that JFrog and Gradleware work together as companies. Since the Android SDK uses Gradle as build system now, the move to JCenter was a logic next step.</p>\n\n<p>JCenter itself is a thin veneer on top of Maven Central. It proxies it (more or less successfully) and adds additional components. Both are hosted on CDN networks and highly performant. Maven Central itself is the target for all Eclipse, Apache and most other open source projects and without it JCenter would be mostly empty. </p>\n\n<p>Using either of them will work fine, but I would suggest to go straight to the source where you can and on top of that take control of it by using a repository manager. <a href=\"http://www.sonatype.org/nexus/go/\">Nexus Open Source</a> for example is free and has support for Maven repositories as used by Maven, Gradle, SBT, Ivy and others as well as NuGet, NPM and RubyGems support. </p>\n\n<p>Disclaimer: I am the author of Repository Management with Nexus and Nexus trainer for Sonatype, the sponsor of the free Central Repository, the project lead of the Android Maven Plugin and have pushed some Android libraries to Central by rebuilding from AOSP.</p>\n", "title": "Android buildscript repositories. jcenter VS mavencentral", "tags": ["java", "android", "build", "gradle", "android-studio"], "link": "http://stackoverflow.com/questions/24852219/android-buildscript-repositories-jcenter-vs-mavencentral/28416430#28416430", "question_id": 24852219, "answer_id": 28416430}, {"body": "<p>At Bintray I just rebloged <a href=\"http://blog.bintray.com/2015/02/09/android-studio-migration-from-maven-central-to-jcenter/\">a very detailed blog post</a> describing the reasons why Google made this change. Here are the most important points:</p>\n\n<ul>\n<li>JCenter is a <a href=\"https://bintray.com/bintray/jcenter\">Java repository in Bintray</a>, which is the largest repo in the world for Java and Android OSS libraries, packages and components.</li>\n<li>All the content in JCenter is served over a CDN, with a secure HTTPS connection. Back in the time of the migration (Android Studio 0.8) The central maven 2 repository was HTTP only and HTTPS wasn't supported. Reference: <a href=\"https://gradle.org/docs/current/userguide/dependency_management.html#sec:repositories\">51.6.2. Maven central repository</a>.</li>\n<li><code>jcenter()</code> is a superset of <code>mavenCentral()</code>, that encompasses many additional repositories and artifacts.</li>\n<li>In different scenarios and from different countries Bintray is faster than Maven Central (e.g. from Israel). In others it is very close. Since Maven Central and Bintray use different CDNs which adaptively favor regions, this might change to both ways.</li>\n<li>Bintray has a different approach to package identification than the legacy Maven Central. <a href=\"http://blog.bintray.com/2014/08/04/feel-secure-with-ssl-think-again/\">This is a big and serious security matter. It is important.</a></li>\n<li>If you really need to get your package to Maven Central (for supporting legacy tools) you can do it from Bintray as well, <a href=\"http://blog.bintray.com/2014/02/11/bintray-as-pain-free-gateway-to-maven-central/\">in a click of a button or even automatically</a>.</li>\n</ul>\n\n<p>Regarding performance improvements, couple of android developer advocates had faced/noticed the issue of huge indexing with maven central.</p>\n\n<p>In the words of <a href=\"https://plus.google.com/+TorNorbye/posts\">Tor Norbye</a>:</p>\n\n<blockquote>\n  <p>I ran AndroidStudio with a brand new settings directory, so it went and connected maven central and downloaded an index of the available artifacts.</p>\n  \n  <p>Then I happened to look at the size of my directory.</p>\n  \n  <p>My ~/Library/Cache/AndroidStudioPreview is 1.5G, and 1.2G of those are taken by the \u201cMaven\u201d subdirectory.</p>\n  \n  <p>That\u2019s ridiculous. We barely use the index at all. The primary use for it is the Dependency editor in the Project Structure Dialog, but we really don\u2019t need to have a precomputed index for it. MavenCentral has a fast online JSON search we can use on demand when somebody searches for artifacts. In <a href=\"https://android-review.googlesource.com/#/c/94843/\">https://android-review.googlesource.com/#/c/94843/</a> we added a lint check which checks whether the dependencies are up to date, and the search for a handful of artifacts is near instant.</p>\n  \n  <p>In short, we really don\u2019t need the cache; it may help with code completion in .gradle and maven .pom files, but that\u2019s not a super important usecase, and certainly not something <em>all</em> users should have to sacrifice 1.5G of download speed and diskspace to have the possibility of one day doing.\n  Read more on: <a href=\"https://code.google.com/p/android/issues/detail?id=72061\">The Maven index is <em>huge</em>!</a></p>\n</blockquote>\n\n<p>Also, you might find this <a href=\"https://news.ycombinator.com/item?id=8099840\">very short (1Q and 1A) discussion on Hacker News</a> interesting.</p>\n\n<hr>\n\n<p><sup>I am with <a href=\"http://jfrog.com\">JFrog</a>, the company behind <a href=\"/questions/tagged/bintray\" class=\"post-tag\" title=\"show questions tagged &#39;bintray&#39;\" rel=\"tag\">bintray</a> and <a href=\"/questions/tagged/artifactory\" class=\"post-tag\" title=\"show questions tagged &#39;artifactory&#39;\" rel=\"tag\">artifactory</a>, see <a href=\"https://stackoverflow.com/users/402053/jbaruch\">my profile</a> for details and links.</sup></p>\n", "title": "Android buildscript repositories. jcenter VS mavencentral", "tags": ["java", "android", "build", "gradle", "android-studio"], "link": "http://stackoverflow.com/questions/24852219/android-buildscript-repositories-jcenter-vs-mavencentral/28457914#28457914", "question_id": 24852219, "answer_id": 28457914}, {"body": "<p><a href=\"http://inthecheesefactory.com/blog/how-to-upload-library-to-jcenter-maven-central-as-dependency/en\" rel=\"nofollow\">http://inthecheesefactory.com/blog/how-to-upload-library-to-jcenter-maven-central-as-dependency/en</a></p>\n\n<p>this article can answer you question .</p>\n\n<blockquote>\n  <p>At first, Android Studio chose Maven Central as a default repository. Once you create a new project from old version of Android Studio, mavenCentral() would be automatically defined in build.gradle.</p>\n  \n  <p>But the big problem of Maven Central is it is not developer-friendly. It is surprisingly hard to upload the library to. To be able to do so, developer has to be at some level of geeky. And with some more reason for example a security concern and etc, Android Studio team decided to switch the default repository to jcenter instead as you can see that once you create a new project from latest version of Android Studio, jcenter() would be automatically defined instead of mavenCentral().</p>\n</blockquote>\n", "title": "Android buildscript repositories. jcenter VS mavencentral", "tags": ["java", "android", "build", "gradle", "android-studio"], "link": "http://stackoverflow.com/questions/24852219/android-buildscript-repositories-jcenter-vs-mavencentral/31958973#31958973", "question_id": 24852219, "answer_id": 31958973}], "creation_date": 1405871494, "score": 143, "link": "http://stackoverflow.com/questions/24852219/android-buildscript-repositories-jcenter-vs-mavencentral", "question_id": 24852219}, {"body": "<p>I'm looking for a way to enable authentication token-based in Jersey.  I was trying not to use the particular framework. Is that possible?</p>\n\n<p>My plan is: A user signs up for my web service, my web service generates a token, sends it to the client, and the client will retain it.  Then the client for each request will not send user or password, but this token.</p>\n\n<p>I was thinking of using custom filter for each request and the <code>@PreAuthorize(\"hasRole('ROLE')\")</code>\nbut I just thought that this causes a lot of requests to the database to see if the token is right.</p>\n\n<p>Or not create filter and in each request put a param token?  So that each API first checks the token and after executes something to retrieve resource.</p>\n", "tags": ["java", "rest", "authentication", "jax-rs", "jersey-2.0"], "title": "Best practice for REST token-based authentication with JAX-RS and Jersey", "answers": [{"body": "<h2>How token-based authentication works</h2>\n\n<p>A token is a piece of data generated by the server which identifies a user.</p>\n\n<p>At a first look, token-based authentication follow these steps:</p>\n\n<ol>\n<li>The client sends its credentials (username and password) to the server.</li>\n<li>The server authenticates them and generates a token with an expiration date.</li>\n<li>The server stores the previously generated token in some storage with user identifier, such as a database or a map in memory.</li>\n<li>The server sends the generated token to the client.</li>\n<li>In every request, the client sends the token to the server.</li>\n<li>The server, in each request, extracts the token from the incoming request, looks up the user identifier with the token to obtain the user information to do the authentication/authorization.</li>\n<li>If the token is expired, the server generates another token and send it back to the client.</li>\n</ol>\n\n<h2>What you can do with <a href=\"https://jcp.org/en/jsr/detail?id=339\">JAX-RS 2.0</a> (<a href=\"https://jersey.java.net/\">Jersey</a>, <a href=\"http://resteasy.jboss.org/\">RESTEasy</a> and <a href=\"https://cxf.apache.org/\">Apache CXF</a>)</h2>\n\n<p>This solution uses only the JAX-RS 2.0 API, <em>avoiding any vendor specific solution</em>. So, it should work with the most popular JAX-RS 2.0 implementations, such as <a href=\"https://jersey.java.net/\">Jersey</a>, <a href=\"http://resteasy.jboss.org/\">RESTEasy</a> and <a href=\"https://cxf.apache.org/\">Apache CXF</a>.</p>\n\n<p>It's important mention that if you are using a token-based authentication, you are not relying on the standard Java EE Web application security mechanisms offered by the Servlet container and configurable via application's <code>web.xml</code> descriptor.</p>\n\n<p><strong>Authenticate a user with their username and password and issue a token</strong></p>\n\n<p>Create a REST endpoint which receives and validates the credentials (username and password) and issue a token for the user:</p>\n\n<pre><code>@Path(\"/authentication\")\npublic class AuthenticationEndpoint {\n\n    @POST\n    @Produces(\"application/json\")\n    @Consumes(\"application/x-www-form-urlencoded\")\n    public Response authenticateUser(@FormParam(\"username\") String username, \n                                     @FormParam(\"password\") String password) {\n\n        try {\n\n            // Authenticate the user using the credentials provided\n            authenticate(username, password);\n\n            // Issue a token for the user\n            String token = issueToken(username);\n\n            // Return the token on the response\n            return Response.ok(token).build();\n\n        } catch (Exception e) {\n            return Response.status(Response.Status.UNAUTHORIZED).build();\n        }      \n    }\n\n    private void authenticate(String username, String password) throws Exception {\n        // Authenticate against a database, LDAP, file or whatever\n        // Throw an Exception if the credentials are invalid\n    }\n\n    private String issueToken(String username) {\n        // Issue a token (can be a random String persisted to a database or a JWT token)\n        // The issued token must be associated to a user\n        // Return the issued token\n    }\n}\n</code></pre>\n\n<p>If any exceptions happen when validating the credentials, a response with status <code>401 UNAUTHORIZED</code> will be returned.</p>\n\n<p>If the credentials are successfully validated, a response with status <code>200 OK</code> will be returned and the issued token is sent to the client on the response. The client must send that token to the server in every request.</p>\n\n<p>Using this approach, you expect your client will send the credentials in the following format in the body of the request:</p>\n\n<pre><code>username=admin&amp;password=123456\n</code></pre>\n\n<p>Instead of form params, you can wrap the username and the password into a class:</p>\n\n<pre><code>public class Credentials implements Serializable {\n\n    private String username;\n    private String password;\n\n    // Getters and setters omitted\n}\n</code></pre>\n\n<p>And consume it as JSON:</p>\n\n<pre><code>    @POST\n    @Produces(\"application/json\")\n    @Consumes(\"application/json\")\n    public Response authenticateUser(Credentials credentials) {\n\n        String username = credentials.getUsername();\n        String password = credentials.getPassword();\n\n        // Authenticate the user, issue a token and return a response\n    }\n</code></pre>\n\n<p>Using this approach, you expect your client will send the credentials in the following format in the body of the request:</p>\n\n<pre><code>{\n  \"username\": \"admin\",\n  \"password\": \"123456\"\n}\n</code></pre>\n\n<p><strong>Extract the token from the request and validate it</strong></p>\n\n<p>The client should send the token on the standard HTTP <code>Authorization</code> header of the request. For example:</p>\n\n<pre><code>Authorization: Bearer &lt;token-goes-here&gt;\n</code></pre>\n\n<p>Note that the name of the standard HTTP header is unfortunate because it carries <em>authentication</em> information, not <em>authorization</em>.</p>\n\n<p>JAX-RS provides <a href=\"http://docs.oracle.com/javaee/7/api/javax/ws/rs/NameBinding.html\"><code>@NameBinding</code></a>, a meta-annotation used to create name-binding annotations for filters and interceptors:</p>\n\n<pre><code>@NameBinding\n@Retention(RUNTIME)\n@Target({TYPE, METHOD})\npublic @interface Secured { }\n</code></pre>\n\n<p>The defined name-binding annotation <code>@Secured</code> will be used to decorate a filter class, which implements <a href=\"http://docs.oracle.com/javaee/7/api/javax/ws/rs/container/ContainerRequestFilter.html\"><code>ContainerRequestFilter</code></a>, allowing you to handle the request. The <a href=\"http://docs.oracle.com/javaee/7/api/javax/ws/rs/container/ContainerRequestContext.html\"><code>ContainerRequestContext</code></a> helps you to extract the token from the HTTP request:</p>\n\n<pre><code>@Secured\n@Provider\n@Priority(Priorities.AUTHENTICATION)\npublic class AuthenticationFilter implements ContainerRequestFilter {\n\n    @Override\n    public void filter(ContainerRequestContext requestContext) throws IOException {\n\n        // Get the HTTP Authorization header from the request\n        String authorizationHeader = \n            requestContext.getHeaderString(HttpHeaders.AUTHORIZATION);\n\n        // Check if the HTTP Authorization header is present and formatted correctly \n        if (authorizationHeader == null || !authorizationHeader.startsWith(\"Bearer \")) {\n            throw new NotAuthorizedException(\"Authorization header must be provided\");\n        }\n\n        // Extract the token from the HTTP Authorization header\n        String token = authorizationHeader.substring(\"Bearer\".length()).trim();\n\n        try {\n\n            // Validate the token\n            validateToken(token);\n\n        } catch (Exception e) {\n            requestContext.abortWith(\n                Response.status(Response.Status.UNAUTHORIZED).build());\n        }\n    }\n\n    private void validateToken(String token) throws Exception {\n        // Check if it was issued by the server and if it's not expired\n        // Throw an Exception if the token is invalid\n    }\n}\n</code></pre>\n\n<p>If any problems happen during the token validation, a response with status <code>401 UNAUTHORIZED</code> will be returned.</p>\n\n<p>Otherwise, the request will proceed to an endpoint.</p>\n\n<p><strong>Securing your REST endpoints</strong></p>\n\n<p>Bind the filter to your endpoints methods or classes by annotating them with the  <code>@Secured</code> annotation created above. For the methods and/or classes which are annotated, the filter will be executed. It means that these endpoints only will be reached if the request is performed with a valid token.</p>\n\n<p>If some methods or classes do not need authentication, simply do not annotate them.</p>\n\n<pre><code>@Path(\"/\")\npublic class MyEndpoint {\n\n    @GET\n    @Path(\"{id}\")\n    @Produces(\"application/json\")\n    public Response myUnsecuredMethod(@PathParam(\"id\") Long id) {\n        // This method is not annotated with @Secured\n        // The authentication filter won't be executed before invoking this method\n        ...\n    }\n\n    @DELETE\n    @Secured\n    @Path(\"{id}\")\n    @Produces(\"application/json\")\n    public Response mySecuredMethod(@PathParam(\"id\") Long id) {\n        // This method is annotated with @Secured\n        // The authentication filter will be executed before invoking this method\n        // The HTTP request must be performed with a valid token\n        ...\n    }\n}\n</code></pre>\n\n<p>In the example above, the filter will be executed only for <code>mySecuredMethod(Long)</code> because it's annotated with <code>@Secured</code>.</p>\n\n<h2>Identifying the current user</h2>\n\n<p>It's very likely you will need to know the user who is performing the request within your REST endpoints. The following approaches can be useful to do it:</p>\n\n<p><strong>Overriding the <a href=\"http://docs.oracle.com/javaee/7/api/javax/ws/rs/core/SecurityContext.html\"><code>SecurityContext</code></a></strong></p>\n\n<p>Within your <a href=\"http://docs.oracle.com/javaee/7/api/javax/ws/rs/container/ContainerRequestFilter.html#filter-javax.ws.rs.container.ContainerRequestContext-\"><code>ContainerRequestFilter.filter(ContainerRequestContext)</code></a> method, you can set a new security context information for the current request.</p>\n\n<p>Override the <a href=\"http://docs.oracle.com/javaee/7/api/javax/ws/rs/core/SecurityContext.html#getUserPrincipal--\"><code>SecurityContext.getUserPrincipal()</code></a>, returning a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/security/Principal.html\"><code>Principal</code></a> instance.  </p>\n\n<p>The <a href=\"http://docs.oracle.com/javase/7/docs/api/java/security/Principal.html\"><code>Principal</code></a>'s name is the username of the user you issued the token for. You will have to know it when validating the token.</p>\n\n<pre><code>    requestContext.setSecurityContext(new SecurityContext() {\n\n        @Override\n        public Principal getUserPrincipal() {\n\n            return new Principal() {\n\n                @Override\n                public String getName() {\n                    return username;\n                }\n            };\n        }\n\n        @Override\n        public boolean isUserInRole(String role) {\n            return true;\n        }\n\n        @Override\n        public boolean isSecure() {\n            return false;\n        }\n\n        @Override\n        public String getAuthenticationScheme() {\n            return null;\n        }\n    });\n</code></pre>\n\n<p>Inject a proxy of the <a href=\"http://docs.oracle.com/javaee/7/api/javax/ws/rs/core/SecurityContext.html\"><code>SecurityContext</code></a> in any REST endpoint class:</p>\n\n<pre><code>    @Context\n    SecurityContext securityContext;\n</code></pre>\n\n<p>The same can be done in a method:</p>\n\n<pre><code>    @GET\n    @Secured\n    @Path(\"{id}\")\n    @Produces(\"application/json\")\n    public Response myMethod(@PathParam(\"id\") Long id, \n                             @Context SecurityContext securityContext) {\n        ...\n    }\n</code></pre>\n\n<p>And get the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/security/Principal.html\"><code>Principal</code></a>:</p>\n\n<pre><code>    Principal principal = securityContext.getUserPrincipal();\n    String username = principal.getName();\n</code></pre>\n\n<p><strong>Using CDI (Context and Dependency Injection)</strong></p>\n\n<p>If, for some reason, you don't want overriding the <a href=\"http://docs.oracle.com/javaee/7/api/javax/ws/rs/core/SecurityContext.html\"><code>SecurityContext</code></a>, you can use CDI, which provides useful features such as events and producers.</p>\n\n<p>Create a CDI qualifier which will be used when handling the authentication event and when injecting the authenticated user in your beans:</p>\n\n<pre><code>@Qualifier\n@Retention(RUNTIME)\n@Target({ METHOD, FIELD, PARAMETER })\npublic @interface AuthenticatedUser { }\n</code></pre>\n\n<p>In your <code>AuthenticationFilter</code> created above, inject an <a href=\"https://docs.oracle.com/javaee/7/api/javax/enterprise/event/Event.html\"><code>Event</code></a>:</p>\n\n<pre><code>    @Inject\n    @AuthenticatedUser\n    Event&lt;String&gt; userAuthenticatedEvent;\n</code></pre>\n\n<p>When the user authenticates, fire the event passing the username as parameter (remember, your token must be associated to a user and you need to be able to retrieve the username from a token):</p>\n\n<pre><code>    userAuthenticatedEvent.fire(username);\n</code></pre>\n\n<p>Probably you have a class which represents a user in your application. Let's call this class <code>User</code>.  </p>\n\n<p>The piece of code below handles the authentication event, finds a <code>User</code> instance with the correspondent username and assigns it to the field <code>authenticatedUser</code>:</p>\n\n<pre><code>@RequestScoped\npublic class AuthenticatedUserProducer {\n\n    @Produces\n    @RequestScoped\n    @AuthenticatedUser\n    private User authenticatedUser;\n\n    public void handleAuthenticationEvent(@Observes @AuthenticatedUser String username) {\n        this.authenticatedUser = findUser(username);\n    }\n\n    private User findUser(String username) {\n        // Hit the the database or a service to find a user by its username and return it\n        // Return the User instance\n    }\n}\n</code></pre>\n\n<p>The <code>authenticatedUser</code> field produces a <code>User</code> instance which can be injected in your beans, such as JAX-RS services, CDI beans, servlets and EJBs:</p>\n\n<pre><code>    @Inject\n    @AuthenticatedUser\n    User authenticatedUser;\n</code></pre>\n\n<p>Note that the CDI <a href=\"http://docs.oracle.com/javaee/7/api/javax/enterprise/inject/Produces.html\"><code>@Produces</code></a> annotation is different from the JAX-RS <a href=\"http://docs.oracle.com/javaee/7/api/javax/ws/rs/Produces.html\"><code>@Produces</code></a> annotation:</p>\n\n<ul>\n<li>CDI: <a href=\"http://docs.oracle.com/javaee/7/api/javax/enterprise/inject/Produces.html\"><code>javax.enterprise.inject.Produces</code></a></li>\n<li>JAX-RS: <a href=\"http://docs.oracle.com/javaee/7/api/javax/ws/rs/Produces.html\"><code>javax.ws.rs.Produces</code></a></li>\n</ul>\n\n<h2>Supporting role-based authorization</h2>\n\n<p>Besides authentication you can also support role-based authorization in your REST endpoints.</p>\n\n<p>Create an enumeration and define the roles according to your needs:</p>\n\n<pre><code>public enum Role {\n    ROLE_1,\n    ROLE_2,\n    ROLE_3\n}\n</code></pre>\n\n<p>Change the <code>@Secured</code> name binding annotation created above to support roles:</p>\n\n<pre><code>@NameBinding\n@Retention(RUNTIME)\n@Target({TYPE, METHOD})\npublic @interface Secured {\n    Role[] value() default {};\n}\n</code></pre>\n\n<p>Annotate your endpoints to perform role-based authorization.</p>\n\n<p>Note that the <code>@Secured</code> annotation can the used in classes and/or methods. So let's make the method annotations override the class annotations:</p>\n\n<pre><code>@Path(\"/example\")\n@Secured({Role.ROLE_1})\npublic class MyEndpoint {\n\n    @GET\n    @Path(\"{id}\")\n    @Produces(\"application/json\")\n    public Response myMethod(@PathParam(\"id\") Long id) {\n        // This method is not annotated with @Secured\n        // But it's declared within a class annotated with @Secured({Role.ROLE_1})\n        // So it only can be executed by the users who have the ROLE_1 role\n        ...\n    }\n\n    @DELETE\n    @Path(\"{id}\")    \n    @Produces(\"application/json\")\n    @Secured({Role.ROLE_1, Role.ROLE_2})\n    public Response myOtherMethod(@PathParam(\"id\") Long id) {\n        // This method is annotated with @Secured({Role.ROLE_1, Role.ROLE_2})\n        // The method annotation overrides the class annotation\n        // So it only can be executed by the users who have the ROLE_1 or ROLE_2 roles\n        ...\n    }\n}\n</code></pre>\n\n<p>Create a filter with the <a href=\"http://docs.oracle.com/javaee/7/api/javax/ws/rs/Priorities.html#AUTHENTICATION\"><code>AUTHORIZATION</code></a> priority, which is executed after the <a href=\"http://docs.oracle.com/javaee/7/api/javax/ws/rs/Priorities.html#AUTHENTICATION\"><code>AUTHENTICATION</code></a> priority filter defined previously.  </p>\n\n<p>The <a href=\"http://docs.oracle.com/javaee/7/api/javax/ws/rs/container/ResourceInfo.html\"><code>ResourceInfo</code></a> can be used to get the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Method.html\"><code>Method</code></a> and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html\"><code>Class</code></a>  which match with the requested URL and extract the annotations from them:</p>\n\n<pre><code>@Secured\n@Provider\n@Priority(Priorities.AUTHORIZATION)\npublic class AuthorizationFilter implements ContainerRequestFilter {\n\n    @Context\n    private ResourceInfo resourceInfo;\n\n    @Override\n    public void filter(ContainerRequestContext requestContext) throws IOException {\n\n        // Get the resource class which matches with the requested URL\n        // Extract the roles declared by it\n        Class&lt;?&gt; resourceClass = resourceInfo.getResourceClass();\n        List&lt;Role&gt; classRoles = extractRoles(resourceClass);\n\n        // Get the resource method which matches with the requested URL\n        // Extract the roles declared by it\n        Method resourceMethod = resourceInfo.getResourceMethod();\n        List&lt;Role&gt; methodRoles = extractRoles(resourceMethod);\n\n        try {\n\n            // Check if the user is allowed to execute the method\n            // The method annotations override the class annotations\n            if (methodRoles.isEmpty()) {\n                checkPermissions(classRoles);\n            } else {\n                checkPermissions(methodRoles);\n            }\n\n        } catch (Exception e) {\n            requestContext.abortWith(\n                Response.status(Response.Status.FORBIDDEN).build());\n        }\n    }\n\n    // Extract the roles from the annotated element\n    private List&lt;Role&gt; extractRoles(AnnotatedElement annotatedElement) {\n        if (annotatedElement == null) {\n            return new ArrayList&lt;Role&gt;();\n        } else {\n            Secured secured = annotatedElement.getAnnotation(Secured.class);\n            if (secured == null) {\n                return new ArrayList&lt;Role&gt;();\n            } else {\n                Role[] allowedRoles = secured.value();\n                return Arrays.asList(allowedRoles);\n            }\n        }\n    }\n\n    private void checkPermissions(List&lt;Role&gt; allowedRoles) throws Exception {\n        // Check if the user contains one of the allowed roles\n        // Throw an Exception if the user has not permission to execute the method\n    }\n}\n</code></pre>\n\n<p>If the user has no permission to execute the method, the request is aborted with a <code>403 FORBIDDEN</code>.</p>\n\n<p>To know the user who is performing the request, see the section above. You can get it from the <a href=\"http://docs.oracle.com/javaee/7/api/javax/ws/rs/core/SecurityContext.html\"><code>SecurityContext</code></a> (which should be already set in the <a href=\"http://docs.oracle.com/javaee/7/api/javax/ws/rs/container/ContainerRequestFilter.html#filter-javax.ws.rs.container.ContainerRequestContext-\"><code>ContainerRequestContext</code></a>) or inject it using CDI, depending on the approach you are using.  </p>\n\n<p>If a <code>@Secured</code> annotation has no roles declared, you can assume all authenticated users can access that endpoint, independent the roles the users have.</p>\n\n<h2>How to issue a token</h2>\n\n<p>A token can be opaque which reveals no details other than the value itself (like a random string) or can be self-contained (like JSON Web Token).</p>\n\n<p><strong>Random string</strong></p>\n\n<p>A token can be issued by generating a random string and persisting it to a database with an expiration date and with a user identifier associated to it. A good example of how to generate a random string in Java can be seen <a href=\"http://stackoverflow.com/a/41156/1426227\">here</a>:</p>\n\n<pre><code>    Random random = new SecureRandom();\n    String token = new BigInteger(130, random).toString(32);\n</code></pre>\n\n<p><strong>JSON Web Token (JWT)</strong></p>\n\n<p>JSON Web Token (JWT) is a standard method for representing claims securely between two parties and is defined by the <a href=\"https://tools.ietf.org/html/rfc7519\">RFC 7519</a>. It's a self-contained token and enables you to store a user identifier, an expiration date and whatever you want (<em>but don't store passwords</em>) in a payload, which is a JSON encoded as <a href=\"https://en.wikipedia.org/wiki/Base64\">Base64</a>. </p>\n\n<p>The payload can be read by the client and the integrity of the token can be easily checked by verifying its signature on the server. </p>\n\n<p>You won't need to persist JWT tokens if you don't need to track them. Althought, by persisting the tokens, you will have the possibility of invalidating and revoking the access of them. To keep the track of JWT tokens, instead of persisting the whole token, you could persist the token identifier (the <a href=\"https://tools.ietf.org/html/rfc7519#section-4.1.7\"><code>jti</code></a> claim) and some metadata (the user you issued the token for, the expiration date, etc) if you need. </p>\n\n<p>There are a few Java libraries to issue and validate JWT tokens (have a look <a href=\"https://github.com/auth0/java-jwt\">here</a> and <a href=\"https://github.com/jwtk/jjwt\">here</a>). To find some other great resources to work with JWT, have a look at <a href=\"http://jwt.io/\">http://jwt.io</a>.</p>\n\n<p>Your application can provide some functionality to revoke the tokens, but it's recommended revoking the tokens when the users change their password.</p>\n\n<p>When persisting tokens, always consider removing the old ones in order to prevent your database from growing indefinitely.</p>\n\n<h2>Additional information</h2>\n\n<ul>\n<li>It doesn't matter which type of authentication you are using. <strong>Always use HTTPS</strong> to prevent the <a href=\"https://en.wikipedia.org/wiki/Man-in-the-middle_attack\">man-in-the-middle attack</a>.</li>\n<li>Take a look at <a href=\"http://security.stackexchange.com/q/19676\">this question</a> from Information Security for more information about tokens.</li>\n<li><a href=\"https://stormpath.com/blog/token-auth-spa/\">In this article</a> you will find some useful information about token-based authentication.</li>\n<li><a href=\"https://deltaspike.apache.org/index.html\">Apache DeltaSpike</a> provides portable CDI extensions such as a <a href=\"https://deltaspike.apache.org/documentation/security.html\">security module</a>, which can be used to secure REST applications.</li>\n<li>Interested in an OAuth 2.0 protocol implementation in Java? Check the <a href=\"https://oltu.apache.org/\">Apache Oltu project</a>.</li>\n</ul>\n", "title": "Best practice for REST token-based authentication with JAX-RS and Jersey", "tags": ["java", "rest", "authentication", "jax-rs", "jersey-2.0"], "link": "http://stackoverflow.com/questions/26777083/best-practice-for-rest-token-based-authentication-with-jax-rs-and-jersey/26778123#26778123", "question_id": 26777083, "answer_id": 26778123}], "creation_date": 1415269587, "score": 142, "link": "http://stackoverflow.com/questions/26777083/best-practice-for-rest-token-based-authentication-with-jax-rs-and-jersey", "question_id": 26777083}, {"body": "<p>I know there are questions relating to <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Date.html\">java.util.Date</a> and Joda-Time. But after some digging, I couldn't find a thread about the differences between the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\">java.time API</a> (new in <a href=\"http://en.wikipedia.org/wiki/Java_version_history#Java_SE_8_.28March_18.2C_2014.29\">Java 8</a>, defined by <a href=\"https://jcp.org/en/jsr/detail?id=310\">JSR 310</a>) and <a href=\"http://www.joda.org/joda-time/\">Joda-Time</a>.</p>\n\n<p>I have heard that Java 8\u2019s java.time API is much cleaner and can do much more than Joda-Time. But I cannot find examples comparing the two. </p>\n\n<ul>\n<li>What can java.time do that Joda-Time cannot? </li>\n<li>What can java.time do better than Joda-Time? </li>\n<li>Is the performance better with java.time?</li>\n</ul>\n", "tags": ["java", "datetime", "java-8", "jodatime", "java-time"], "title": "Differences between Java 8 Date Time API (java.time) and Joda-Time", "answers": [{"body": "<p><strong>Java 8 Date/Time :</strong></p>\n\n<ol>\n<li>Java 8 classes are built around the human time. It makes them fast for human datetime arithmetics/conversion.</li>\n<li>Date/time component getters like getDayOfMonth have O(1) complexity in Java 8 implementation.</li>\n<li>Parsing of OffsetDateTime/OffsetTime/ZonedDateTime is very slow in Java 8 ea b121 due to exceptions thrown and caught internally in the JDK. </li>\n<li>A set of packages: java.time.<em>, java.time.chrono.</em>, java.time.format., java.time.temporal.* java.time.zone.* </li>\n<li>Instants (timestamps) Date and Time Partial Date and Time Parser and Formatter Time zones Different chronologies (calendars). </li>\n<li>Existing classes have issues like Date has no support for I18N or L10N. They are mutable!.</li>\n<li>Simpler &amp; more robust.</li>\n<li>Clocks can be injected. </li>\n<li>Clocks can be created with various properties - Static clocks, Mocked clocks, Low-precision clocks (whole seconds, whole minutes, etc). </li>\n<li>Clocks can be created with specific time zones. Clock.system(Zone.of(\u201cAmerica/Los_Angeles\u201d)). </li>\n<li>Makes code handling date and time testable. </li>\n<li>Makes tests independent of timezone.</li>\n</ol>\n\n<p><strong>Joda-Time :</strong></p>\n\n<ol>\n<li>Joda-Time is using machine time inside. A manual implementation based on int/long values would be much faster.</li>\n<li>Joda-Time getters require the computer-to-human time calculation on every getter call, which makes Joda-Time a bottleneck in such scenarios. </li>\n<li>It is composed of immutable classes it handles Instants, Date &amp; Time, Partials, and Durations It is flexible It is well designed. </li>\n<li>Represents dates as instants. But a date&amp;time may correspond to more than one instant. Overlap hour when daylight savings end. As well as not have any instant that corresponds to it at all. Gap hour when daylight starts. Has to perform complex computations for simple operations. </li>\n<li>Accepts nulls as valid values on most of its methods. Leads to subtle bugs. </li>\n</ol>\n\n<p><strong>For more detailed comparision see :-</strong></p>\n\n<p><a href=\"http://java-performance.info/jsr-310-java-8-datetime-library-performance-well-joda-time-2-3-j-u-calendar/\">Java 8 Date/Time library performance (as well as Joda-Time 2.3 and j.u.Calendar)</a>. &amp;\n<a href=\"http://stackoverflow.com/questions/17527468/new-date-time-api-in-java-8\">New Date &amp; Time API in Java 8</a></p>\n", "title": "Differences between Java 8 Date Time API (java.time) and Joda-Time", "tags": ["java", "datetime", "java-8", "jodatime", "java-time"], "link": "http://stackoverflow.com/questions/24631909/differences-between-java-8-date-time-api-java-time-and-joda-time/24633272#24633272", "question_id": 24631909, "answer_id": 24633272}, {"body": "<p><strong>Common features</strong></p>\n\n<p>a) Both libraries use immutable types. Joda-Time also offers additional mutable types like <code>MutableDateTime</code>. </p>\n\n<p>b) Furthermore: Both libraries are inspired by the design study <a href=\"http://timeandmoney.sourceforge.net/\">\"TimeAndMoney\" from Eric Evans</a> or ideas from <a href=\"http://martinfowler.com/tags/domain%20driven%20design.html\">Martin Fowler about domain driven style</a> so they strive more or less for a <a href=\"http://en.wikipedia.org/wiki/Fluent_interface\">fluent programming style</a> (although not always perfect ;-)).</p>\n\n<p>c) With both libraries we get a real calendar date type (called <code>LocalDate</code>), a real wall time type (called <code>LocalTime</code>) and the composition (called <code>LocalDateTime</code>). That is a very big win compared with old <code>java.util.Calendar</code> and <code>java.util.Date</code>.</p>\n\n<p>d) Both libraries use a method-centric approach meaning they encourage the user to use <code>getDayOfYear()</code> instead of <code>get(DAY_OF_YEAR)</code>. This causes a lot of extra methods compared with <code>java.util.Calendar</code> (although latter is not type-safe at all due to excessive use of ints).</p>\n\n<p><strong>Performance</strong></p>\n\n<p>See the other answer by @OO7 pointing to the analysis of Mikhail Vorontsov although point 3 (exception catching) is probably obsolete - see <a href=\"https://bugs.openjdk.java.net/browse/JDK-8046707\">this JDK-bug</a>. The different performance (which is in general favour of <a href=\"https://jcp.org/en/jsr/detail?id=310\">JSR-310</a>) is mainly due to the fact that the internal implementation of <a href=\"http://www.joda.org/joda-time/\">Joda-Time</a> always use a machine-time-like long-primitive (in milliseconds).</p>\n\n<p><strong>Null</strong></p>\n\n<p>Joda-Time often use NULL as default for system timezone, default locale, current timestamp etc. while JSR-310 almost always rejects NULL values.</p>\n\n<p><strong>Precision</strong></p>\n\n<p>JSR-310 handles <a href=\"http://en.wikipedia.org/wiki/Nanosecond\">nanosecond</a> precision while Joda-Time is limited to <a href=\"http://en.wikipedia.org/wiki/Millisecond\">millisecond</a> precision. </p>\n\n<p><strong>Supported fields:</strong></p>\n\n<p>An overview about supported fields in Java-8 (JSR-310) is given by some classes in the temporal-package (for example <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/temporal/ChronoField.html\">ChronoField</a> and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/temporal/WeekFields.html\">WeekFields</a>) while Joda-Time is rather weak on this area - see <a href=\"http://www.joda.org/joda-time/apidocs/org/joda/time/DateTimeFieldType.html\">DateTimeFieldType</a>. The biggest lack of Joda-Time is here the absence of localized week-related fields. A common feature of both field implementation design is that both are based on values of type long (no other types, not even enums).</p>\n\n<p><strong>Enum</strong></p>\n\n<p>JSR-310 offers <a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\">enums</a> like <code>DayOfWeek</code> or <code>Month</code> while Joda-Time does not offer this because it was mainly developed in years 2002-2004 before <a href=\"http://en.wikipedia.org/wiki/Java_version_history#J2SE_5.0_.28September_30.2C_2004.29\">Java 5</a>.</p>\n\n<p><strong>Zone API</strong></p>\n\n<p>a) JSR-310 offers more timezone features than Joda-Time. Latter is not able to yield a programmatical access to the history of timezone offset transitions while JSR-310 is capable to do this.</p>\n\n<p>b) For your information: JSR-310 has moved its internal timezone repository to a new location and a different format. The old library folder lib/zi does not exist any more.</p>\n\n<p><strong>Adjuster vs. Property</strong></p>\n\n<p>JSR-310 has introduced the <code>TemporalAdjuster</code>-interface as a formalized way to externalize temporal calculations and manipulations, especially for library or framework-writers this is a nice and relative easy way to embed new extensions of JSR-310 (a kind of equivalent to static helper classes for former <code>java.util.Date</code>).</p>\n\n<p>For most users however, this feature has very limited value because the burden to write code is still with the user. Built-in solutions based on the new <code>TemporalAdjuster</code>-concept are not so many, there is currently only the helper class <code>TemporalAdjusters</code> with a limited set of manipulations (and the enums <code>Month</code> or other temporal types). </p>\n\n<p>Joda-Time offers a field-package but practice has shown evidence that new field implementations are very hard to code. On the other side Joda-Time offers so-called properties which make some manipulations much easier and more elegant than in JSR-310, for example <a href=\"http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.Property.html#withMaximumValue()\">property.withMaximumValue()</a>.</p>\n\n<p><strong>Calendar systems</strong></p>\n\n<p>JSR-310 offers 4 extra calendar systems. The most interesting one is <a href=\"http://en.wikipedia.org/wiki/Islamic_calendar#Saudi_Arabia.27s_Umm_al-Qura_calendar\">Umalqura</a> (used in Saudi Arabia). The other 3 are: <a href=\"http://en.wikipedia.org/wiki/Minguo_calendar\">Minguo</a> (Taiwan), Japanese (only the modern calendar since 1871!) and <a href=\"http://en.wikipedia.org/wiki/Buddhist_calendar\">ThaiBuddhist</a> (only correct after 1940).</p>\n\n<p>Joda-Time offers an <a href=\"http://joda-time.sourceforge.net/cal_islamic.html\">Islamic calendar</a> based on calculatory base - not a sighting-based calendar like Umalqura. Thai-Buddhist is also offered by Joda-Time in a similar form, Minguo and the japanese one not. Otherwise Joda-Time offers coptic and ethiopic calendar, too (but without any support for internationalization).</p>\n\n<p>More interesting for Europeans: Joda-Time also offers a <a href=\"http://en.wikipedia.org/wiki/Gregorian_calendar\">Gregorian</a>, <a href=\"http://en.wikipedia.org/wiki/Julian_calendar\">Julian</a> and mixed-gregorian-julian calendar. However, the practical value for real historical calculations is limited because important features like different year starts in date history are not supported at all (the same criticism is valid for old <code>java.util.GregorianCalendar</code>).</p>\n\n<p>Other calendars like <a href=\"http://en.wikipedia.org/wiki/Hebrew_calendar\">Hebrew</a> or <a href=\"http://en.wikipedia.org/wiki/Iranian_calendars\">Persian</a> or <a href=\"http://en.wikipedia.org/wiki/Hindu_calendar\">Hindu</a> are completely missing in both libraries.</p>\n\n<p><strong>Epoch days</strong></p>\n\n<p>JSR-310 has the class <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/temporal/JulianFields.html\">JulianFields</a> while Joda-Time (version 2.0) offers some helper methods in the class <a href=\"http://www.joda.org/joda-time/apidocs/org/joda/time/DateTimeUtils.html#fromJulianDay(double)\">DateTimeUtils</a>.</p>\n\n<p><strong>Clocks</strong></p>\n\n<p>JSR-310 has no interface (a design mistake) but an abstract class <code>java.time.Clock</code> which can be used for any clock dependency injection. Joda-Time offers the interface <a href=\"http://www.joda.org/joda-time/apidocs/org/joda/time/DateTimeUtils.MillisProvider.html\">MillisProvider</a> and some helper methods in <a href=\"http://www.joda.org/joda-time/apidocs/org/joda/time/DateTimeUtils.html#setCurrentMillisProvider(org.joda.time.DateTimeUtils.MillisProvider)\">DateTimeUtils</a> instead. So this way Joda-Time is also capable of supporting test-driven models with different clocks (mocking etc.).</p>\n\n<p><strong>Duration arithmetic</strong></p>\n\n<p>Both libraries support the calculation of time distances in one or more temporal units. However, when handling single-unit-durations the JSR-310-style is obviously nicer (and long-based instead of using int):</p>\n\n<p>JSR-310 =&gt; <code>long days = ChronoUnit.DAYS.between(date1, date2);</code></p>\n\n<p>Joda-Time =&gt; <code>int days = DAYS.daysBetween(date1, date2).getDays();</code></p>\n\n<p>Handling of multiple-unit-durations are also different. Even the calculation results can differ - see this closed <a href=\"https://github.com/JodaOrg/joda-time/issues/132\">Joda-Time issue</a>. While JSR-310 use a very simple and limited approach to use just the classes <code>Period</code> (duration based on years, months and days) and <code>Duration</code> (based on seconds and nanoseconds), Joda-Time uses a more sophisticated way using the class <code>PeriodType</code> in order to control in which units a duration (Joda-Time call it \"Period\") shall be expressed. While the <code>PeriodType</code>-API is somehow awkward to use a similar way is not offered by JSR-310 at all. Especially it is not yet possible in JSR-310 to define mixed date and time durations (based on days and hours for example). So be warned if it comes to migration from one library to another. The libraries in discussion are incompatible - despite of partially same class names.</p>\n\n<p><strong>Intervals</strong></p>\n\n<p>JSR-310 does not support this feature while Joda-Time has limited support. See also this <a href=\"https://stackoverflow.com/questions/22150722/is-there-a-class-in-java-time-comparable-to-the-joda-time-interval/22152890#22152890\">SO-answer</a>.</p>\n\n<p><strong>Formatting and Parsing</strong></p>\n\n<p>Best way to compare both libraries is to view the equal-named classes <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatterBuilder.html\">DateTimeFormatterBuilder</a> (JSR-310) and <a href=\"http://www.joda.org/joda-time/apidocs/org/joda/time/format/DateTimeFormatterBuilder.html\">DateTimeFormatterBuilder</a> (Joda-Time). The JSR-310-variant is a little bit more powerful (can also handle any kind of <code>TemporalField</code> provided the field implementor has managed to code some extension points like <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalField.html#resolve-java.util.Map-java.time.temporal.TemporalAccessor-java.time.format.ResolverStyle-\">resolve()</a>). Most important difference is however - in my opinion: </p>\n\n<p>JSR-310 can much better parse timezone names (format pattern symbol z) while Joda-Time could not do this at all in its earlier versions and now only in a very limited way.</p>\n\n<p>Another advantage of JSR-310 is support for standalone month names which is important in languages like Russian or Polish etc. Joda-Time has <a href=\"https://github.com/JodaOrg/joda-time/issues/273\">no access to such resources</a> - not even on Java-8 platforms.</p>\n\n<p>The pattern syntax in JSR-310 is also more flexible than in Joda-Time, allows for optional sections (using square brackets), is more orientated towards CLDR-standard and offers padding (letter symbol p) and more fields.</p>\n\n<p>Otherwise it should be noted that Joda-Time can format durations using <a href=\"http://www.joda.org/joda-time/apidocs/org/joda/time/format/PeriodFormatter.html\">PeriodFormatter</a>. JSR-310 cannot do this.</p>\n\n<hr>\n\n<p>Hope this overview helps. All the gathered information is mainly there due to my efforts and investigations how to design and implement a better date-and-time library (nothing is perfect).</p>\n\n<p><strong>Update from 2015-06-24:</strong></p>\n\n<p>Meanwhile I have found the time to write and <a href=\"http://time4j.net/tutorial/appendix.html\">publish a tabular overview</a> for different time libraries in Java. The tables also contain a comparison between Joda-Time v2.8.1 and Java-8 (JSR-310). It is more detailed than this post.</p>\n", "title": "Differences between Java 8 Date Time API (java.time) and Joda-Time", "tags": ["java", "datetime", "java-8", "jodatime", "java-time"], "link": "http://stackoverflow.com/questions/24631909/differences-between-java-8-date-time-api-java-time-and-joda-time/24635657#24635657", "question_id": 24631909, "answer_id": 24635657}], "creation_date": 1404822537, "score": 140, "link": "http://stackoverflow.com/questions/24631909/differences-between-java-8-date-time-api-java-time-and-joda-time", "question_id": 24631909}, {"body": "<p>I know the <code>0.1</code> decimal number cannot be represented exactly with a finite binary number (<a href=\"http://www.exploringbinary.com/why-0-point-1-does-not-exist-in-floating-point/\">explanation</a>), so <code>double n = 0.1</code> will lose some precision and will not be exactly <code>0.1</code>. On the other hand <code>0.5</code> can be represented exactly because it is <code>0.5 = 1/2 = 0.1b</code>.</p>\n\n<p>Having said that it is understandable that adding <code>0.1</code> <strong>three times</strong> will not give exactly <code>0.3</code> so the following code prints <code>false</code>:</p>\n\n<pre><code>double sum = 0, d = 0.1;\nfor (int i = 0; i &lt; 3; i++)\n    sum += d;\nSystem.out.println(sum == 0.3); // Prints false, OK\n</code></pre>\n\n<p>But then how is it that adding <code>0.1</code> <strong>five times</strong> will give exactly <code>0.5</code>? The following code prints <code>true</code>:</p>\n\n<pre><code>double sum = 0, d = 0.1;\nfor (int i = 0; i &lt; 5; i++)\n    sum += d;\nSystem.out.println(sum == 0.5); // Prints true, WHY?\n</code></pre>\n\n<p>If <code>0.1</code> cannot be represented exactly, how is it that adding it 5 times gives exactly <code>0.5</code> which can be represented precisely?</p>\n", "tags": ["java", "floating-point", "double", "precision"], "title": "Why does adding 0.1 multiple times remain lossless?", "answers": [{"body": "<p>The rounding error is not random and the way it is implemented it attempts to minimise the error.  This means that sometimes the error is not visible, or there is not error. </p>\n\n<p>For example <code>0.1</code> is not exactly <code>0.1</code> i.e. <code>new BigDecimal(\"0.1\") &lt; new BigDecimal(0.1)</code> but <code>0.5</code> is exactly <code>1.0/2</code></p>\n\n<p>This program shows you the true values involved.</p>\n\n<pre><code>BigDecimal _0_1 = new BigDecimal(0.1);\nBigDecimal x = _0_1;\nfor(int i = 1; i &lt;= 10; i ++) {\n    System.out.println(i+\" x 0.1 is \"+x+\", as double \"+x.doubleValue());\n    x = x.add(_0_1);\n}\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>0.1000000000000000055511151231257827021181583404541015625, as double 0.1\n0.2000000000000000111022302462515654042363166809082031250, as double 0.2\n0.3000000000000000166533453693773481063544750213623046875, as double 0.30000000000000004\n0.4000000000000000222044604925031308084726333618164062500, as double 0.4\n0.5000000000000000277555756156289135105907917022705078125, as double 0.5\n0.6000000000000000333066907387546962127089500427246093750, as double 0.6000000000000001\n0.7000000000000000388578058618804789148271083831787109375, as double 0.7000000000000001\n0.8000000000000000444089209850062616169452667236328125000, as double 0.8\n0.9000000000000000499600361081320443190634250640869140625, as double 0.9\n1.0000000000000000555111512312578270211815834045410156250, as double 1.0\n</code></pre>\n\n<p>Note: that <code>0.3</code> is slightly off, but when you get to <code>0.4</code> the bits have to shift down one to fit into the 53-bit limit and the error is discarded. Again, an error creeps back in for <code>0.6</code> and <code>0.7</code> but for <code>0.8</code> to <code>1.0</code> the error is discarded.</p>\n\n<blockquote>\n  <p>Adding it 5 times should cumulate the error, not cancel it.</p>\n</blockquote>\n\n<p>The reason there is an error is due to limited precision. i.e 53-bits.  This means that as the number uses more bits as it get larger, bits have to be dropped off the end. This causes rounding which in this case is in your favour.<br>\nYou can get the opposite effect when getting a smaller number e.g. <code>0.1-0.0999</code> => <code>1.0000000000000286E-4</code>\n and you see more error than before.</p>\n\n<p>An example of this is why in Java 6 <a href=\"http://stackoverflow.com/questions/9902968/why-does-math-round0-49999999999999994-return-1\">Why does Math.round(0.49999999999999994) return 1</a> In this case the loss of a bit in calculation results in a big difference to the answer.</p>\n", "title": "Why does adding 0.1 multiple times remain lossless?", "tags": ["java", "floating-point", "double", "precision"], "link": "http://stackoverflow.com/questions/26120311/why-does-adding-0-1-multiple-times-remain-lossless/26120449#26120449", "question_id": 26120311, "answer_id": 26120449}, {"body": "<p>Barring overflow, in floating-point, <code>x + x + x</code> is exactly the correctly rounded (i.e. nearest) floating-point number to the real 3*<code>x</code>, <code>x + x + x + x</code> is exactly 4*<code>x</code>, and <code>x + x + x + x + x</code> is again the correctly rounded floating-point approximation for 5*<code>x</code>.</p>\n\n<p>The first result, for <code>x + x + x</code>, derives from the fact that <code>x + x</code> is exact. <code>x + x + x</code> is thus the result of only one rounding.</p>\n\n<p>The second result is more difficult, one demonstration of it is discussed <a href=\"https://news.ycombinator.com/item?id=5649653\">here</a> (and Stephen Canon alludes to another proof by case analysis on the last 3 digits of <code>x</code>). To summarize, either 3*<code>x</code> is in the same <a href=\"http://en.wikipedia.org/wiki/Binade\">binade</a> as 2*<code>x</code> or it is in the same binade as 4*<code>x</code>, and in each case it is possible to deduce that the error on the third addition cancels the error on the second addition (the first addition being exact, as we already said).</p>\n\n<p>The third result, \u201c<code>x + x + x + x + x</code> is correctly rounded\u201d, derives from the second in the same way that the first derives from the exactness of <code>x + x</code>.</p>\n\n<hr>\n\n<p>The second result explains why <code>0.1 + 0.1 + 0.1 + 0.1</code> is exactly the floating-point number <code>0.4</code>: the rational numbers 1/10 and 4/10 get approximated the same way, with the same relative error, when converted to floating-point. These floating-point numbers have a ratio of exactly 4 between them. The first and third result show that <code>0.1 + 0.1 + 0.1</code> and <code>0.1 + 0.1 + 0.1 + 0.1 + 0.1</code> can be expected to have less error than might be inferred by naive error analysis, but, in themselves, they only relate the results to respectively <code>3 * 0.1</code> and <code>5 * 0.1</code>, which can be expected to be close but not necessarily identical to <code>0.3</code> and <code>0.5</code>.</p>\n\n<p>If you keep adding <code>0.1</code> after the fourth addition, you will finally observe rounding errors that make \u201c<code>0.1</code> added to itself n times\u201d diverge from <code>n * 0.1</code>, and diverge even more from n/10. If you were to plot the values of \u201c0.1 added to itself n times\u201d as a function of n, you would observe lines of constant slope by binades (as soon as the result of the nth addition is destined to fall into a particular binade, the properties of the addition can be expected to be similar to previous additions that produced a result in the same binade). Within a same binade, the error will either grow or shrink. If you were to look at the sequence of the slopes from binade to binade, you would recognize the repeating digits of <code>0.1</code> in binary for a while. After that, absorption would start to take place and the curve would go flat.</p>\n", "title": "Why does adding 0.1 multiple times remain lossless?", "tags": ["java", "floating-point", "double", "precision"], "link": "http://stackoverflow.com/questions/26120311/why-does-adding-0-1-multiple-times-remain-lossless/26120458#26120458", "question_id": 26120311, "answer_id": 26120458}, {"body": "<p>Floating point systems do various magic including having a few extra bits of precision for rounding.  Thus the very small error due to the inexact representation of 0.1 ends up getting rounded off to 0.5.</p>\n\n<p>Think of floating point as being a great but INEXACT way to represent numbers.  Not all possible numbers are easily represented in a computer.  Irrational numbers like PI.  Or like SQRT(2).  (Symbolic math systems can represent them, but I did say \"easily\".)</p>\n\n<p>The floating point value may be extremely close, but not exact.  It may be so close that you could navigate to Pluto and be off by millimeters.  But still not exact in a mathematical sense.</p>\n\n<p>Don't use floating point when you need to be exact rather than approximate.  For example, accounting applications want to keep exact track of a certain number of pennies in an account.  Integers are good for that because they are exact.  The primary issue you need to watch for with integers is overflow.</p>\n\n<p>Using BigDecimal for currency works well because the underlying representation is an integer, albeit a big one.</p>\n\n<p>Recognizing that floating point numbers are inexact, they still have a great many uses.  Coordinate systems for navigation or coordinates in graphics systems.  Astronomical values.  Scientific values.  (You probably cannot know the exact mass of a baseball to within a mass of an electron anyway, so inexactness doesn't really matter.)</p>\n\n<p>For counting applications (including accounting) use integer.  For counting the number of people that pass through a gate, use int or long.</p>\n", "title": "Why does adding 0.1 multiple times remain lossless?", "tags": ["java", "floating-point", "double", "precision"], "link": "http://stackoverflow.com/questions/26120311/why-does-adding-0-1-multiple-times-remain-lossless/26149668#26149668", "question_id": 26120311, "answer_id": 26149668}], "creation_date": 1412078388, "score": 139, "link": "http://stackoverflow.com/questions/26120311/why-does-adding-0-1-multiple-times-remain-lossless", "question_id": 26120311}, {"body": "<p><strong>Edit:</strong> So basically what I'm trying to write is a 1 bit hash for <code>double</code>.</p>\n\n<p>I want to map a <code>double</code> to <code>true</code> or <code>false</code> with a 50/50 chance. For that I wrote code that picks some random numbers <em>(just as an example, I want to use this on data with regularities and still get a 50/50 result)</em>, checks their last bit and increments <code>y</code> if it is 1, or <code>n</code> if it is 0. </p>\n\n<p>However, this code constantly results in 25% <code>y</code> and 75% <code>n</code>. Why is it not 50/50? And why such a weird, but straight-forward (1/3) distribution?</p>\n\n<pre><code>public class DoubleToBoolean {\n    @Test\n    public void test() {\n\n        int y = 0;\n        int n = 0;\n        Random r = new Random();\n        for (int i = 0; i &lt; 1000000; i++) {\n            double randomValue = r.nextDouble();\n            long lastBit = Double.doubleToLongBits(randomValue) &amp; 1;\n            if (lastBit == 1) {\n                y++;\n            } else {\n                n++;\n            }\n        }\n        System.out.println(y + \" \" + n);\n    }\n}\n</code></pre>\n\n<p>Example output:</p>\n\n<pre><code>250167 749833\n</code></pre>\n", "tags": ["java", "random", "double", "bit-manipulation", "probability"], "title": "Why does this random value have a 25/75 distribution instead of 50/50?", "answers": [{"body": "<p>Because nextDouble works like this: (<a href=\"http://developer.classpath.org/doc/java/util/Random-source.html\">source</a>)</p>\n\n<pre><code>public double nextDouble()\n{\n    return (((long) next(26) &lt;&lt; 27) + next(27)) / (double) (1L &lt;&lt; 53);\n}\n</code></pre>\n\n<p><code>next(x)</code> makes <code>x</code> random bits.</p>\n\n<p>Now why does this matter? Because about half the numbers generated by the first part (before the division) are less than <code>1L &lt;&lt; 52</code>, and therefore their significand doesn't entirely fill the 53 bits that it could fill, meaning the least significant bit of the significand is always zero for those.</p>\n\n<hr>\n\n<p>Because of the amount of attention this is receiving, here's some extra explanation of what a <code>double</code> in Java (and many other languages) really looks like and why it mattered in this question.</p>\n\n<p>Basically, a <code>double</code> looks like this: (<a href=\"http://en.wikipedia.org/wiki/File:IEEE_754_Double_Floating_Point_Format.svg\">source</a>)</p>\n\n<p><img src=\"http://i.stack.imgur.com/lQaeV.png\" alt=\"double layout\"></p>\n\n<p>A very important detail not visible in this picture is that numbers are \"normalized\"<sup>1</sup> such that the 53 bit fraction starts with a 1 (by choosing the exponent such that it is so), that 1 is then omitted. That is why the picture shows 52 bits for the fraction (significand) but there are effectively 53 bits in it.</p>\n\n<p>The normalization means that if in the code for <code>nextDouble</code> the 53rd bit is set, that bit is the implicit leading 1 and it goes away, and the other 52 bits are copied literally to the significand of the resulting <code>double</code>. If that bit is not set however, the remaining bits must be shifted left until it becomes set.</p>\n\n<p>On average, half the generated numbers fall into the case where the significand was <em>not</em> shifted left at all (and about half those have a 0 as their least significant bit), and the other half is shifted by at least 1 (or is just completely zero) so their least significant bit is always 0.</p>\n\n<p>1: not always, clearly it cannot be done for zero, which has no highest 1. These numbers are called denormal or subnormal numbers, see <a href=\"http://en.wikipedia.org/wiki/Denormal_number\">wikipedia:denormal number</a>.</p>\n", "title": "Why does this random value have a 25/75 distribution instead of 50/50?", "tags": ["java", "random", "double", "bit-manipulation", "probability"], "link": "http://stackoverflow.com/questions/27625611/why-does-this-random-value-have-a-25-75-distribution-instead-of-50-50/27625722#27625722", "question_id": 27625611, "answer_id": 27625722}, {"body": "<p>From the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#nextDouble()\">docs</a>:</p>\n\n<blockquote>\n  <p>The method nextDouble is implemented by class Random as if by:</p>\n\n<pre><code>public double nextDouble() {\n  return (((long)next(26) &lt;&lt; 27) + next(27))\n      / (double)(1L &lt;&lt; 53);\n}\n</code></pre>\n</blockquote>\n\n<p>But it also states the following (emphasis mine):</p>\n\n<blockquote>\n  <p>[In early versions of Java, the result was incorrectly calculated as:</p>\n\n<pre><code> return (((long)next(27) &lt;&lt; 27) + next(27))\n     / (double)(1L &lt;&lt; 54);\n</code></pre>\n  \n  <p>This might seem to be equivalent, if not better, but in fact it introduced a large nonuniformity because of the bias in the rounding of floating-point numbers: <strong>it was three times as likely that the low-order bit of the significand would be 0 than that it would be 1</strong>! This nonuniformity probably doesn't matter much in practice, but we strive for perfection.]</p>\n</blockquote>\n\n<p>This note has been there since Java 5 at least (docs for Java &lt;= 1.4 are behind a loginwall, too lazy to check). This is interesting, because the problem apparently still exists even in Java 8. Perhaps the \"fixed\" version was never tested?</p>\n", "title": "Why does this random value have a 25/75 distribution instead of 50/50?", "tags": ["java", "random", "double", "bit-manipulation", "probability"], "link": "http://stackoverflow.com/questions/27625611/why-does-this-random-value-have-a-25-75-distribution-instead-of-50-50/27625796#27625796", "question_id": 27625611, "answer_id": 27625796}, {"body": "<p>This result doesn't surprise me given how floating-point numbers are represented.  Let's suppose we had a very short floating-point type with only 4 bits of precision.  If we were to generate a random number between 0 and 1, distributed uniformly, there would be 16 possible values:</p>\n\n<pre><code>0.0000\n0.0001\n0.0010\n0.0011\n0.0100\n...\n0.1110\n0.1111\n</code></pre>\n\n<p>If that's how they looked in the machine, you could test the low-order bit to get a 50/50 distribution.  However, IEEE floats are represented as a power of 2 times a mantissa; one field in the float is the power of 2 (plus a fixed offset).  The power of 2 is selected so that the \"mantissa\" part is always a number >= 1.0 and &lt; 2.0.  This means that, in effect, the numbers other than <code>0.0000</code> would be represented like this:</p>\n\n<pre><code>0.0001 = 2^(-4) x 1.000\n0.0010 = 2^(-3) x 1.000\n0.0011 = 2^(-3) x 1.100\n0.0100 = 2^(-2) x 1.000\n... \n0.0111 = 2^(-2) x 1.110\n0.1000 = 2^(-1) x 1.000\n0.1001 = 2^(-1) x 1.001\n...\n0.1110 = 2^(-1) x 1.110\n0.1111 = 2^(-1) x 1.111\n</code></pre>\n\n<p>(The <code>1</code> before the binary point is an implied value; for 32- and 64-bit floats, no bit is actually allocated to hold this <code>1</code>.)</p>\n\n<p>But looking at the above should demonstrate why, if you convert the representation to bits and look at the low bit, you will get zero 75% of the time.  This is due to all values less than 0.5 (binary <code>0.1000</code>), which is half the possible values, having their mantissas shifted over, causing 0 to appear in the low bit.  The situation is essentially the same when the mantissa has 52 bits (not including the implied 1) as a <code>double</code> does. </p>\n\n<p>(Actually, as @sneftel suggested in a comment, we <em>could</em> include more than 16 possible values in the distribution, by generating:</p>\n\n<pre><code>0.0001000 with probability 1/128\n0.0001001 with probability 1/128\n...\n0.0001111 with probability 1/128\n0.001000  with probability 1/64\n0.001001  with probability 1/64\n...\n0.01111   with probability 1/32 \n0.1000    with probability 1/16\n0.1001    with probability 1/16\n...\n0.1110    with probability 1/16\n0.1111    with probability 1/16\n</code></pre>\n\n<p>But I'm not sure it's the kind of distribution most programmers would expect, so it probably isn't worthwhile.  Plus it doesn't gain you much when the values are used to generate integers, as random floating-point values often are.)</p>\n", "title": "Why does this random value have a 25/75 distribution instead of 50/50?", "tags": ["java", "random", "double", "bit-manipulation", "probability"], "link": "http://stackoverflow.com/questions/27625611/why-does-this-random-value-have-a-25-75-distribution-instead-of-50-50/27626033#27626033", "question_id": 27625611, "answer_id": 27626033}], "creation_date": 1419357461, "score": 136, "link": "http://stackoverflow.com/questions/27625611/why-does-this-random-value-have-a-25-75-distribution-instead-of-50-50", "question_id": 27625611}, {"body": "<p>The following block of codes gives the output as 0.</p>\n\n<pre><code>public class HelloWorld{\n\n    public static void main(String []args){\n        int product = 1;\n        for (int i = 10; i &lt;= 99; i++) {\n            product *= i;\n        }\n        System.out.println(product);\n    }\n}\n</code></pre>\n\n<p>Please can somebody explain why this happens?</p>\n", "tags": ["java", "integer", "integer-overflow"], "title": "Why does Java think that the product of all numbers from 10 to 99 is 0?", "answers": [{"body": "<p>It looks like an <a href=\"http://en.wikipedia.org/wiki/Integer_overflow\">integer overflow</a>.</p>\n\n<p>Take a look at this</p>\n\n<pre><code>BigDecimal product=new BigDecimal(1);\nfor(int i=10;i&lt;99;i++){\n    product=product.multiply(new BigDecimal(i));\n}\nSystem.out.println(product);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>25977982938941930515945176761070443325092850981258133993315252362474391176210383043658995147728530422794328291965962468114563072000000000000000000000\n</code></pre>\n\n<p>Output no longer be a <code>int</code> value. Then you will get wrong value because of the overflow. </p>\n\n<blockquote>\n  <p>If it overflows, it goes back to the minimum value and continues from\n  there. If it underflows, it goes back to the maximum value and\n  continues from there.</p>\n</blockquote>\n\n<p>More <a href=\"http://stackoverflow.com/questions/3001836/how-does-java-handle-integer-underflows-and-overflows-and-how-would-you-check-fo\">info</a></p>\n\n<p><strong>Edit</strong>. </p>\n\n<p>Let's change your code as follows</p>\n\n<pre><code>int product = 1;\nfor (int i = 10; i &lt; 99; i++) {\n   product *= i;\n   System.out.println(product);\n}\n</code></pre>\n\n<p>Out put:</p>\n\n<pre><code>10\n110\n1320\n17160\n240240\n3603600\n57657600\n980179200\n463356416\n213837312\n-18221056\n-382642176\n171806720\n-343412736\n348028928\n110788608\n-1414463488\n464191488\n112459776\n-1033633792\n-944242688\n793247744\n-385875968\n150994944\n838860800\n-704643072\n402653184\n2013265920\n-805306368\n-1342177280\n-2147483648\n-2147483648&gt;&gt;&gt;binary representation is 11111111111111111111111111101011 10000000000000000000000000000000 \n 0 &gt;&gt;&gt; here binary representation will become 11111111111111111111111111101011 00000000000000000000000000000000 \n ----\n 0\n</code></pre>\n", "title": "Why does Java think that the product of all numbers from 10 to 99 is 0?", "tags": ["java", "integer", "integer-overflow"], "link": "http://stackoverflow.com/questions/26375932/why-does-java-think-that-the-product-of-all-numbers-from-10-to-99-is-0/26375959#26375959", "question_id": 26375932, "answer_id": 26375959}, {"body": "<p>Somewhere in the middle you get <code>0</code> as the product. So, your entire product will be 0.</p>\n\n<p>In your case :</p>\n\n<pre><code>for (int i = 10; i &lt; 99; i++) {\n    if (product &lt; Integer.MAX_VALUE)\n        System.out.println(product);\n    product *= i;\n}\n// System.out.println(product);\n\nSystem.out.println(-2147483648 * EvenValueOfi); // --&gt; this is the culprit (Credits : Kocko's answer )\n\nO/P :\n1\n10\n110\n1320\n17160\n240240\n3603600\n57657600\n980179200\n463356416\n213837312\n-18221056\n-382642176\n171806720\n-343412736\n348028928\n110788608\n-1414463488\n464191488\n112459776\n-1033633792\n-944242688\n793247744\n-385875968\n150994944\n838860800\n-704643072\n402653184\n2013265920\n-805306368\n-1342177280  --&gt; Multiplying this and the current value of `i` will also give -2147483648 (INT overflow)\n-2147483648  --&gt; Multiplying this and the current value of `i` will also give -2147483648 (INT overflow)\n\n-2147483648  -&gt;  Multiplying this and the current value of 'i' will give 0 (INT overflow)\n0\n0\n0\n</code></pre>\n\n<p>Every time you multiply the current value of <code>i</code> with the number you get <code>0</code> as output.</p>\n", "title": "Why does Java think that the product of all numbers from 10 to 99 is 0?", "tags": ["java", "integer", "integer-overflow"], "link": "http://stackoverflow.com/questions/26375932/why-does-java-think-that-the-product-of-all-numbers-from-10-to-99-is-0/26375995#26375995", "question_id": 26375932, "answer_id": 26375995}, {"body": "<p>If I run this code What I get all -</p>\n\n<pre><code>          1 * 10 =          10\n         10 * 11 =         110\n        110 * 12 =        1320\n       1320 * 13 =       17160\n      17160 * 14 =      240240\n     240240 * 15 =     3603600\n    3603600 * 16 =    57657600\n   57657600 * 17 =   980179200\n  980179200 * 18 =   463356416 &lt;- Integer Overflow (17643225600)\n  463356416 * 19 =   213837312\n  213837312 * 20 =   -18221056\n  -18221056 * 21 =  -382642176\n -382642176 * 22 =   171806720\n  171806720 * 23 =  -343412736\n -343412736 * 24 =   348028928\n  348028928 * 25 =   110788608\n  110788608 * 26 = -1414463488\n-1414463488 * 27 =   464191488\n  464191488 * 28 =   112459776\n  112459776 * 29 = -1033633792\n-1033633792 * 30 =  -944242688\n -944242688 * 31 =   793247744\n  793247744 * 32 =  -385875968\n -385875968 * 33 =   150994944\n  150994944 * 34 =   838860800\n  838860800 * 35 =  -704643072\n -704643072 * 36 =   402653184\n  402653184 * 37 =  2013265920\n 2013265920 * 38 =  -805306368\n -805306368 * 39 = -1342177280\n-1342177280 * 40 = -2147483648\n-2147483648 * 41 = -2147483648\n-2147483648 * 42 =           0 &lt;- produce 0 \n          0 * 43 =           0\n</code></pre>\n\n<hr>\n\n<p>Integer Overflow cause -</p>\n\n<pre><code>980179200 * 18 =   463356416 (should be 17643225600)\n\n17643225600 : 10000011011100111100100001000000000 &lt;-Actual\nMAX_Integer :     1111111111111111111111111111111\n463356416   :     0011011100111100100001000000000 &lt;- 32 bit Integer\n</code></pre>\n\n<p>Produce 0 cause -</p>\n\n<pre><code>-2147483648 * 42 =           0 (should be -90194313216)\n\n-90194313216: 1010100000000000000000000000000000000 &lt;- Actual\nMAX_Integer :       1111111111111111111111111111111\n0           :      00000000000000000000000000000000 &lt;- 32 bit Integer\n</code></pre>\n", "title": "Why does Java think that the product of all numbers from 10 to 99 is 0?", "tags": ["java", "integer", "integer-overflow"], "link": "http://stackoverflow.com/questions/26375932/why-does-java-think-that-the-product-of-all-numbers-from-10-to-99-is-0/26375998#26375998", "question_id": 26375932, "answer_id": 26375998}, {"body": "<p>Here is what the program does at each step:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>          1 * 10 =          10\n         10 * 11 =         110\n        110 * 12 =        1320\n       1320 * 13 =       17160\n      17160 * 14 =      240240\n     240240 * 15 =     3603600\n    3603600 * 16 =    57657600\n   57657600 * 17 =   980179200\n  980179200 * 18 =   463356416\n  463356416 * 19 =   213837312\n  213837312 * 20 =   -18221056\n  -18221056 * 21 =  -382642176\n -382642176 * 22 =   171806720\n  171806720 * 23 =  -343412736\n -343412736 * 24 =   348028928\n  348028928 * 25 =   110788608\n  110788608 * 26 = -1414463488\n-1414463488 * 27 =   464191488\n  464191488 * 28 =   112459776\n  112459776 * 29 = -1033633792\n-1033633792 * 30 =  -944242688\n -944242688 * 31 =   793247744\n  793247744 * 32 =  -385875968\n -385875968 * 33 =   150994944\n  150994944 * 34 =   838860800\n  838860800 * 35 =  -704643072\n -704643072 * 36 =   402653184\n  402653184 * 37 =  2013265920\n 2013265920 * 38 =  -805306368\n -805306368 * 39 = -1342177280\n-1342177280 * 40 = -2147483648\n-2147483648 * 41 = -2147483648\n-2147483648 * 42 =           0\n          0 * 43 =           0\n          0 * 44 =           0\nvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv\nvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv\n          0 * 97 =           0\n          0 * 98 =           0\n</code></pre>\n\n<p>Notice that on some steps the multiplication results in a smaller number (980179200 * 18 = 463356416) or incorrect sign (213837312 * 20 = -18221056), indicating that there was an integer overflow. But where does the zero come from? Read on.</p>\n\n<p>Keeping in mind that <code>int</code> data type <a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\">is a 32-bit signed</a>, <a href=\"http://en.wikipedia.org/wiki/Two&#39;s_complement\">two's complement</a> integer, here is an explanation of each step:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Operation         Result(1)     Binary Representation(2)                                           Result(3)\n----------------  ------------  -----------------------------------------------------------------  ------------\n          1 * 10            10                                                               1010            10\n         10 * 11           110                                                            1101110           110\n        110 * 12          1320                                                        10100101000          1320\n       1320 * 13         17160                                                    100001100001000         17160\n      17160 * 14        240240                                                 111010101001110000        240240\n     240240 * 15       3603600                                             1101101111110010010000       3603600\n    3603600 * 16      57657600                                         11011011111100100100000000      57657600\n   57657600 * 17     980179200                                     111010011011000101100100000000     980179200\n  980179200 * 18   17643225600                               100 00011011100111100100001000000000     463356416\n  463356416 * 19    8803771904                                10 00001100101111101110011000000000     213837312\n  213837312 * 20    4276746240                                   11111110111010011111100000000000     -18221056\n  -18221056 * 21    -382642176  11111111111111111111111111111111 11101001001100010101100000000000    -382642176\n -382642176 * 22   -8418127872  11111111111111111111111111111110 00001010001111011001000000000000     171806720\n  171806720 * 23    3951554560                                   11101011100001111111000000000000    -343412736\n -343412736 * 24   -8241905664  11111111111111111111111111111110 00010100101111101000000000000000     348028928\n  348028928 * 25    8700723200                                10 00000110100110101000000000000000     110788608\n  110788608 * 26    2880503808                                   10101011101100010000000000000000   -1414463488\n-1414463488 * 27  -38190514176  11111111111111111111111111110111 00011011101010110000000000000000     464191488\n  464191488 * 28   12997361664                                11 00000110101101000000000000000000     112459776\n  112459776 * 29    3261333504                                   11000010011001000000000000000000   -1033633792\n-1033633792 * 30  -31009013760  11111111111111111111111111111000 11000111101110000000000000000000    -944242688\n -944242688 * 31  -29271523328  11111111111111111111111111111001 00101111010010000000000000000000     793247744\n  793247744 * 32   25383927808                               101 11101001000000000000000000000000    -385875968\n -385875968 * 33  -12733906944  11111111111111111111111111111101 00001001000000000000000000000000     150994944\n  150994944 * 34    5133828096                                 1 00110010000000000000000000000000     838860800\n  838860800 * 35   29360128000                               110 11010110000000000000000000000000    -704643072\n -704643072 * 36  -25367150592  11111111111111111111111111111010 00011000000000000000000000000000     402653184\n  402653184 * 37   14898167808                                11 01111000000000000000000000000000    2013265920\n 2013265920 * 38   76504104960                             10001 11010000000000000000000000000000    -805306368\n -805306368 * 39  -31406948352  11111111111111111111111111111000 10110000000000000000000000000000   -1342177280\n-1342177280 * 40  -53687091200  11111111111111111111111111110011 10000000000000000000000000000000   -2147483648\n-2147483648 * 41  -88046829568  11111111111111111111111111101011 10000000000000000000000000000000   -2147483648\n-2147483648 * 42  -90194313216  11111111111111111111111111101011 00000000000000000000000000000000             0\n          0 * 43             0                                                                  0             0\nvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv\nvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv\n          0 * 98             0                                                                  0             0\n</code></pre>\n\n<ol>\n<li>is the <em>correct</em> result</li>\n<li>is the internal representation of the result (64 bits are used for illustration)</li>\n<li>is the result represented by the two's complement of the lower 32 bits</li>\n</ol>\n\n<p>We know that multiplying a number by an even number:</p>\n\n<ul>\n<li>shifts the bits towards left and adds zero bits towards right</li>\n<li>results in an even number</li>\n</ul>\n\n<p>So basically your program multiplies an even number with another number repeatedly which zeroes out the result bits starting from right.</p>\n\n<p>PS: If the multiplications involved odd numbers only then the result will not become zero.</p>\n", "title": "Why does Java think that the product of all numbers from 10 to 99 is 0?", "tags": ["java", "integer", "integer-overflow"], "link": "http://stackoverflow.com/questions/26375932/why-does-java-think-that-the-product-of-all-numbers-from-10-to-99-is-0/26378663#26378663", "question_id": 26375932, "answer_id": 26378663}, {"body": "<p>Since many of the existing answer point to implementation details of Java and debug output, lets have a look at the math behind binary multiplication to really answer the why.</p>\n\n<p>The comment of @kasperd goes in the right direction. Suppose you do not multiply directly with the number but with the prime factors of that number instead. Than a lot of numbers will have 2 as a prime factor. In binary this is equal to a left shift. By commutativity we can multiply with prime factors of 2 first. That means we just do a left shift.</p>\n\n<p>When having a look at binary multiplication rules, the only case where a 1 will result in a specific digit position is when both operand values are one.</p>\n\n<p>So the effect of a left shift is that the lowest bit position of a 1 when further multiplying the result is increased.</p>\n\n<p>Since integer contains only the lowest order bits, they all will be set to 0 when the prime factor 2 is cotnained often enough in the result.</p>\n\n<p>Note that two's complement representation is not of interest for this analysis, since the sign of the multiplication result can be computed independently from the resulting number. That means if the value overflows and becomes negative, the lowest order bits are represented as 1, but during multiplication they are treated again as being 0.</p>\n", "title": "Why does Java think that the product of all numbers from 10 to 99 is 0?", "tags": ["java", "integer", "integer-overflow"], "link": "http://stackoverflow.com/questions/26375932/why-does-java-think-that-the-product-of-all-numbers-from-10-to-99-is-0/26382333#26382333", "question_id": 26375932, "answer_id": 26382333}, {"body": "<p>Eventually, the calculation overflows, and eventually that overflow leads to a product of zero; that happens when <code>product == -2147483648</code> and <code>i == 42</code>.  Try this code out to verify it for yourself (or run the code <a href=\"http://ideone.com/PGuFnc\">here</a>):</p>\n\n<pre><code>import java.math.BigInteger;\n\nclass Ideone {\n    public static void main (String[] args) throws java.lang.Exception {\n        System.out.println(\"Result: \" + (-2147483648 * 42));\n    }\n}\n</code></pre>\n\n<p>Once it's zero, it of course stays zero.  Here's some code that will produce a more accurate result (you can run the code <a href=\"http://ideone.com/n2t3Ni\">here</a>):</p>\n\n<pre><code>import java.math.BigInteger;\n\nclass Ideone {\n    public static void main (String[] args) throws java.lang.Exception {\n        BigInteger p = BigInteger.valueOf(1);\n        BigInteger start = BigInteger.valueOf(10);\n        BigInteger end = BigInteger.valueOf(99);\n        for(BigInteger i = start; i.compareTo(end) &lt; 0; i = i.add(BigInteger.ONE)){\n            p = p.multiply(i);\n            System.out.println(\"p: \" + p);\n        }\n        System.out.println(\"\\nProduct: \" + p);\n    }\n}\n</code></pre>\n", "title": "Why does Java think that the product of all numbers from 10 to 99 is 0?", "tags": ["java", "integer", "integer-overflow"], "link": "http://stackoverflow.com/questions/26375932/why-does-java-think-that-the-product-of-all-numbers-from-10-to-99-is-0/26387762#26387762", "question_id": 26375932, "answer_id": 26387762}, {"body": "<p>It's because of integer overflow. When you multiply many even numbers together, the binary number gets a lot of trailing zeroes. When you have over 32 trailing zeroes for an <code>int</code>, it rolls over to <code>0</code>.</p>\n\n<p>To help you visualize this, here are the multiplications in hex calculated on a number type that won't overflow. See how the trailing zeroes slowly grow, and note that an <code>int</code> is made up of the last 8 hex-digits. After multiplying by 42 (0x2A), all 32 bits of an <code>int</code> are zeroes!</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>                                     1 (int: 00000001) * 0A =\n                                     A (int: 0000000A) * 0B =\n                                    6E (int: 0000006E) * 0C =\n                                   528 (int: 00000528) * 0D =\n                                  4308 (int: 00004308) * 0E =\n                                 3AA70 (int: 0003AA70) * 0F =\n                                36FC90 (int: 0036FC90) * 10 =\n                               36FC900 (int: 036FC900) * 11 =\n                              3A6C5900 (int: 3A6C5900) * 12 =\n                             41B9E4200 (int: 1B9E4200) * 13 =\n                            4E0CBEE600 (int: 0CBEE600) * 14 =\n                           618FEE9F800 (int: FEE9F800) * 15 =\n                          800CE9315800 (int: E9315800) * 16 =\n                         B011C0A3D9000 (int: 0A3D9000) * 17 =\n                        FD1984EB87F000 (int: EB87F000) * 18 =\n                      17BA647614BE8000 (int: 14BE8000) * 19 =\n                     25133CF88069A8000 (int: 069A8000) * 1A =\n                    3C3F4313D0ABB10000 (int: ABB10000) * 1B =\n                   65AAC1317021BAB0000 (int: 1BAB0000) * 1C =\n                  B1EAD216843B06B40000 (int: 06B40000) * 1D =\n                142799CC8CFAAFC2640000 (int: C2640000) * 1E =\n               25CA405F8856098C7B80000 (int: C7B80000) * 1F =\n              4937DCB91826B2802F480000 (int: 2F480000) * 20 =\n             926FB972304D65005E9000000 (int: E9000000) * 21 =\n           12E066E7B839FA050C309000000 (int: 09000000) * 22 =\n          281CDAAC677B334AB9E732000000 (int: 32000000) * 23 =\n         57BF1E59225D803376A9BD6000000 (int: D6000000) * 24 =\n        C56E04488D526073CAFDEA18000000 (int: 18000000) * 25 =\n      1C88E69E7C6CE7F0BC56B2D578000000 (int: 78000000) * 26 =\n     43C523B86782A6DBBF4DE8BAFD0000000 (int: D0000000) * 27 =\n    A53087117C4E76B7A24DE747C8B0000000 (int: B0000000) * 28 =\n  19CF951ABB6C428CB15C2C23375B80000000 (int: 80000000) * 29 =\n 4223EE1480456A88867C311A3DDA780000000 (int: 80000000) * 2A =\nAD9E50F5D0B637A6610600E4E25D7B00000000 (int: 00000000)\n</code></pre>\n", "title": "Why does Java think that the product of all numbers from 10 to 99 is 0?", "tags": ["java", "integer", "integer-overflow"], "link": "http://stackoverflow.com/questions/26375932/why-does-java-think-that-the-product-of-all-numbers-from-10-to-99-is-0/26390876#26390876", "question_id": 26375932, "answer_id": 26390876}, {"body": "<p>Computer multiplication is really happening modulo 2^32. Once you have accumulated enough powers of two in the multiplicand, then all values will be 0.</p>\n\n<p>Here we have all the even numbers in the series, along with the maximum power of two that divides the number, and the cumulative power of two</p>\n\n<pre><code>num   max2  total\n10    2     1\n12    4     3\n14    2     4\n16    16    8\n18    2     9\n20    4    11\n22    2    12\n24    8    15\n26    2    16\n28    4    18\n30    2    19\n32    32   24\n34    2    25\n36    4    27\n38    2    28\n40    8    31\n42    2    32\n</code></pre>\n\n<p>The product up to 42 is equal to x * 2^32 = 0 (mod 2^32).  The sequence of the powers of two is related to Gray codes (among other things), and appears as <a href=\"https://oeis.org/A001511\">https://oeis.org/A001511</a>.</p>\n\n<p>EDIT: to see why other responses to this question are incomplete, consider the fact that the same program, restricted to odd integers only, would <em>not</em> converge to 0, despite all the overflowing.</p>\n", "title": "Why does Java think that the product of all numbers from 10 to 99 is 0?", "tags": ["java", "integer", "integer-overflow"], "link": "http://stackoverflow.com/questions/26375932/why-does-java-think-that-the-product-of-all-numbers-from-10-to-99-is-0/26392468#26392468", "question_id": 26375932, "answer_id": 26392468}, {"body": "<p>It is an integer overflow.</p>\n\n<p>The int data type is 4 bytes, or 32 bits.  Therefore, numbers larger than 2^(32 - 1) - 1 (2,147,483,647) cannot be stored in this data type.  Your numerical values will be incorrect.</p>\n\n<p>For very large numbers, you will want to import and use the class <code>java.math.BigInteger:</code></p>\n\n<pre><code>BigInteger product = BigInteger.ONE;\nfor (long i = 10; i &lt; 99; i++) \n    product = product.multiply(BigInteger.valueOf(i));\nSystem.out.println(product.toString());\n</code></pre>\n\n<p>NOTE: For numerical values that are still too large for the int data type, but small enough to fit within 8 bytes (absolute value less than or equal to 2^(64 - 1) - 1), you should probably use the <code>long</code> primitive.  </p>\n\n<p>HackerRank's practice problems (www.hackerrank.com), such as the Algorithms practice section, (<a href=\"https://www.hackerrank.com/domains/algorithms/warmup\" rel=\"nofollow\">https://www.hackerrank.com/domains/algorithms/warmup</a>) include some very good large-number questions that give good practice about how to think about the appropriate data type to use.</p>\n", "title": "Why does Java think that the product of all numbers from 10 to 99 is 0?", "tags": ["java", "integer", "integer-overflow"], "link": "http://stackoverflow.com/questions/26375932/why-does-java-think-that-the-product-of-all-numbers-from-10-to-99-is-0/26407637#26407637", "question_id": 26375932, "answer_id": 26407637}], "creation_date": 1413354841, "score": 130, "link": "http://stackoverflow.com/questions/26375932/why-does-java-think-that-the-product-of-all-numbers-from-10-to-99-is-0", "question_id": 26375932}, {"body": "<p>I am using Android Studio on OSX. I am getting this error message:</p>\n\n<blockquote>\n  <p>FAILURE: Build failed with an exception.</p>\n  \n  <ul>\n  <li><p>What went wrong:\n  Execution failed for task ':app:preDexDebug'.\n  com.android.ide.common.internal.LoggedErrorException: Failed to run command:\n  /Applications/Android Studio.app/sdk/build-tools/android-4.4W/dx --dex --output /Users/alex/AndroidStudioProjects/SilentSMS/app/build/intermediates/pre-dexed/debug/android-4.3_r2.1-f22bbff4d1017230e169a4844a9c2195f13060d2.jar /Users/alex/AndroidStudioProjects/SilentSMS/app/libs/android-4.3_r2.1.jar</p>\n  \n  <p>Error Code:\n  3\n  Output:</p></li>\n  </ul>\n</blockquote>\n\n<pre><code>UNEXPECTED TOP-LEVEL ERROR:\njava.lang.OutOfMemoryError: GC overhead limit exceeded\n    at com.android.dx.cf.code.RopperMachine.getSources(RopperMachine.java:665)\n    at com.android.dx.cf.code.RopperMachine.run(RopperMachine.java:288)\n    at com.android.dx.cf.code.Simulator$SimVisitor.visitLocal(Simulator.java:612)\n    at com.android.dx.cf.code.BytecodeArray.parseInstruction(BytecodeArray.java:412)\n    at com.android.dx.cf.code.Simulator.simulate(Simulator.java:94)\n    at com.android.dx.cf.code.Ropper.processBlock(Ropper.java:782)\n    at com.android.dx.cf.code.Ropper.doit(Ropper.java:737)\n    at com.android.dx.cf.code.Ropper.convert(Ropper.java:346)\n    at com.android.dx.dex.cf.CfTranslator.processMethods(CfTranslator.java:282)\n    at com.android.dx.dex.cf.CfTranslator.translate0(CfTranslator.java:139)\n    at com.android.dx.dex.cf.CfTranslator.translate(CfTranslator.java:94)\n    at com.android.dx.command.dexer.Main.processClass(Main.java:682)\n    at com.android.dx.command.dexer.Main.processFileBytes(Main.java:634)\n    at com.android.dx.command.dexer.Main.access$600(Main.java:78)\n    at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:572)\n    at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:284)\n    at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:166)\n    at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:144)\n    at com.android.dx.command.dexer.Main.processOne(Main.java:596)\n    at com.android.dx.command.dexer.Main.processAllFiles(Main.java:498)\n    at com.android.dx.command.dexer.Main.runMonoDex(Main.java:264)\n    at com.android.dx.command.dexer.Main.run(Main.java:230)\n    at com.android.dx.command.dexer.Main.main(Main.java:199)\n    at com.android.dx.command.Main.main(Main.java:103)\n</code></pre>\n\n<p>I am using this library:</p>\n\n<p><a href=\"http://grepcode.com/snapshot/repository.grepcode.com/java/ext/com.google.android/android/4.3_r2.1/\">http://grepcode.com/snapshot/repository.grepcode.com/java/ext/com.google.android/android/4.3_r2.1/</a></p>\n\n<p>I pulled the jar and added it to my project - the project I am trying to build is:</p>\n\n<p><a href=\"https://github.com/domi007/silentSMS/\">https://github.com/domi007/silentSMS/</a></p>\n\n<p>I understand it is because my xms and xmx values are too low. I increased them in:</p>\n\n<p>/Applications/Android Studio.app/bin/idea.vmoptions so that it now says:</p>\n\n<p>-Xms256m\n-Xmx1024m</p>\n\n<p>however i still get the error. Any idea why this would be caused. Apart from the silentSMS app being an Eclipse project and me porting the code over to Android Studio I have changed nothing. In terms of Android Studio spotting errors - it doesnt, everything else looks fine. Help would be greatly appreciated.\nThanks</p>\n", "tags": ["java", "android", "overhead"], "title": "Android Studio Google jar causing GC overhead limit exceeded error", "answers": [{"body": "<p>I think there's a separate way to raise the heap limit of the dexing operation. Add this to your <code>android</code> closure in your <code>build.gradle</code> file:</p>\n\n<pre><code>dexOptions {\n    javaMaxHeapSize \"4g\"\n}\n</code></pre>\n\n<p>and see if that helps.</p>\n\n<p>(idea courtesy of <a href=\"https://stackoverflow.com/questions/25006075/extremely-long-build-with-gradle-android-studio/25006428#25006428\">this answer from Scott Barta</a>)</p>\n", "title": "Android Studio Google jar causing GC overhead limit exceeded error", "tags": ["java", "android", "overhead"], "link": "http://stackoverflow.com/questions/25013638/android-studio-google-jar-causing-gc-overhead-limit-exceeded-error/25013822#25013822", "question_id": 25013638, "answer_id": 25013822}, {"body": "<p>In my case to increase <strong>Heap-size</strong> looks like this:</p>\n\n<p>Using Android Studio 1.1.0</p>\n\n<pre><code>android {\n        dexOptions {\n            incremental true\n            javaMaxHeapSize \"2048M\"\n        }\n    }\n</code></pre>\n\n<p>Above code put in your <strong><em>Build.gradle</em></strong> file</p>\n", "title": "Android Studio Google jar causing GC overhead limit exceeded error", "tags": ["java", "android", "overhead"], "link": "http://stackoverflow.com/questions/25013638/android-studio-google-jar-causing-gc-overhead-limit-exceeded-error/29212126#29212126", "question_id": 25013638, "answer_id": 29212126}, {"body": "<p>I disable my Instant Run by</p>\n\n<p><code>Preference -&gt; Build -&gt; Instant Run \"Enable Instant Run to hot swap code\"</code></p>\n\n<p>I guess it is the Instant Run that make build slow and create large size pidXXX.hprof file which cause AndroidStudio gc overhead limit exceeded</p>\n\n<p>(my device sdk is 19)</p>\n", "title": "Android Studio Google jar causing GC overhead limit exceeded error", "tags": ["java", "android", "overhead"], "link": "http://stackoverflow.com/questions/25013638/android-studio-google-jar-causing-gc-overhead-limit-exceeded-error/36637692#36637692", "question_id": 25013638, "answer_id": 36637692}, {"body": "<p>This new issue is caused by the latest version of android. </p>\n\n<p>Go to your project root folder, open <code>gradle.properties</code>, and add the following options:</p>\n\n<pre><code>org.gradle.daemon=true\n\norg.gradle.jvmargs=-Xmx2048m -XX:MaxPermSize=512m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8\n\norg.gradle.parallel=true\n\norg.gradle.configureondemand=true\n</code></pre>\n\n<p>Then add these changes in your <code>build.gradle</code> file:</p>\n\n<pre><code>dexOptions {\n        incremental = true\n        preDexLibraries = false\n        javaMaxHeapSize \"4g\" // 2g should be also OK\n}\n</code></pre>\n", "title": "Android Studio Google jar causing GC overhead limit exceeded error", "tags": ["java", "android", "overhead"], "link": "http://stackoverflow.com/questions/25013638/android-studio-google-jar-causing-gc-overhead-limit-exceeded-error/36695880#36695880", "question_id": 25013638, "answer_id": 36695880}], "creation_date": 1406631314, "score": 130, "link": "http://stackoverflow.com/questions/25013638/android-studio-google-jar-causing-gc-overhead-limit-exceeded-error", "question_id": 25013638}, {"body": "<p>It is commonly understood that <code>Cloneable</code> interface in Java is broken. There are many reasons for this, which I will not mention; <a href=\"http://howtodoinjava.com/2012/11/10/cloneable-interface-is-broken-in-java/\">others</a> already did it. It is also the position of <a href=\"http://www.artima.com/intv/bloch13.html\">Java architects</a> themselves.</p>\n\n<p>My question is therefore: why has is not been deprecated yet? If the core Java team have decided that it is broken, then they must also have considered deprecation. What are their reasons against doing so (in Java 8 it is <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Cloneable.html\">still not deprecated</a>)? </p>\n", "tags": ["java", "java-8", "deprecated", "cloneable"], "title": "Why is Cloneable not deprecated?", "answers": [{"body": "<blockquote>\n  <p>why it is not deprecated yet?</p>\n</blockquote>\n\n<p>Because the JCP hasn't seen fit to do so, and may never do so. Ask them. You're asking in the wrong place.</p>\n\n<blockquote>\n  <p>What are the reasons behind keeping this thing in Java API</p>\n</blockquote>\n\n<p>No-one will ever remove anything from the Java API, because of the backwards compatibility requirement. The last time that happened was the change in the AWT event model between 1.0 and 1.1 in 1996/7.</p>\n", "title": "Why is Cloneable not deprecated?", "tags": ["java", "java-8", "deprecated", "cloneable"], "link": "http://stackoverflow.com/questions/26398951/why-is-cloneable-not-deprecated/26400047#26400047", "question_id": 26398951, "answer_id": 26400047}, {"body": "<p>There is a <a href=\"http://bugs.java.com/bugdatabase/view_bug.do?bug_id=4098033\">bug</a> submitted in 1997 to <a href=\"http://bugs.java.com/bugdatabase/view_bug.do?bug_id=4098033\">Java Bug Database</a> about adding <code>clone()</code> method to <code>Cloneable</code>, so it would no longer be useless. It was closed with resolution \"won't fix\" and justification was as follows:</p>\n\n<blockquote>\n  <p>Sun's Technical Review Committee (TRC) considered this issue at length\n  and recommended against taking <strong>any action other than improving the\n  documentation of the current Cloneable interface</strong>.  Here is the full\n  text of the recommendation:</p>\n  \n  <p>The existing Java object cloning APIs are problematic.  There is a\n  protected \"clone\" method on java.lang.Object and there is an interface\n  java.lang.Cloneable.  The intention is that if a class wants to allow\n  other people to clone it, then it should support the Cloneable\n  interface and override the default protected clone method with a\n  public clone method.  Unfortunately, for reasons conveniently lost in\n  the mists of time, the Cloneable interface does not define a clone\n  method.</p>\n  \n  <p>This combination results in a fair amount of confusion.  Some classes\n  claim to support Cloneable, but accidentally forget to support the\n  clone method.  Developers are confused about how Cloneable is supposed\n  to work and what clone is supposed to do.</p>\n  \n  <p>Unfortunately, adding a \"clone\" method to Cloneable would be an\n  incompatible change.  It won't break binary compatibility, but it will\n  break source compatibility.  Anecdotal evidence suggests that in\n  practice there are a number of cases where classes support the\n  Cloneable interface but fail to provide a public clone method.  After\n  discussion, TRC unanimously recommended that we should NOT modify the\n  existing Cloneable interface, because of the compatibility impact.</p>\n  \n  <p>An alternative proposal was to add a new interface\n  java.lang.PubliclyCloneable to reflect the original intended purpose\n  of Cloneable.  By a 5 to 2 majority, TRC recommended against this. \n  The main concern was that this would add yet more confusion (including\n  spelling confusion!) to an already confused picture.</p>\n  \n  <p><strong>TRC unanimously recommended that we should add additional\n  documentation to the existing Cloneable interface</strong> to better describe\n  how it is intended to be used and to describe \"best practices\" for\n  implementors.</p>\n</blockquote>\n\n<p>So, although this is not directly about <em>deprecated</em>, the reason for not making Cloneable \"deprecated\" is that Technical Review Comitee decided that <strong>modifying existing documentation will be sufficient enough</strong> to make this interface useful. And so they did. Until Java 1.4, <code>Cloneable</code> was documented as follows:</p>\n\n<blockquote>\n  <p>A class implements the Cloneable interface to indicate to the\n  Object.clone() method that it is legal for that method to make a\n  field-for-field copy of instances of that class. </p>\n  \n  <p>Attempts to clone instances that do not implement the Cloneable\n  interface result in the exception CloneNotSupportedException being\n  thrown. </p>\n  \n  <p>The interface Cloneable declares no methods.</p>\n</blockquote>\n\n<p>Since Java 1.4 (which was released in February 2002) up to current edition (Java 8) it looks like this:</p>\n\n<blockquote>\n  <p>A class implements the Cloneable interface to indicate to the\n  Object.clone() method that it is legal for that method to make a\n  field-for-field copy of instances of that class.  Invoking Object's\n  clone method on an instance that does not implement the Cloneable\n  interface results in the exception CloneNotSupportedException being\n  thrown. </p>\n  \n  <p>By convention, classes that implement this interface should override\n  Object.clone (which is protected) with a public method. See\n  Object.clone() for details on overriding this method. </p>\n  \n  <p>Note that this interface does not contain the clone method. Therefore,\n  it is not possible to clone an object merely by virtue of the fact\n  that it implements this interface. Even if the clone method is invoked\n  reflectively, there is no guarantee that it will succeed.</p>\n</blockquote>\n", "title": "Why is Cloneable not deprecated?", "tags": ["java", "java-8", "deprecated", "cloneable"], "link": "http://stackoverflow.com/questions/26398951/why-is-cloneable-not-deprecated/26403314#26403314", "question_id": 26398951, "answer_id": 26403314}, {"body": "<p>The short answer to \"why isn't <code>Cloneable</code> deprecated?\" (or indeed, why isn't <code>X</code> deprecated, for any <code>X</code>) is that there hasn't been much attention paid to deprecating them.</p>\n\n<p>Most things that have been deprecated recently were deprecated because there is a specific plan to remove them. For example, the <code>addPropertyChangeListener</code> and <code>removePropertyChangeListener</code> methods of <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/logging/LogManager.html\">LogManager</a> were <a href=\"https://bugs.openjdk.java.net/browse/JDK-7192274\">deprecated in Java SE 8</a> with the intention of removing them in Java SE 9. (The reason is that they unnecessarily complicated module interdependencies.) Indeed, these APIs have already been <a href=\"https://bugs.openjdk.java.net/browse/jdk-8029805\">removed from early JDK 9</a> development builds. (Note that similar property change listener calls were also removed from <code>Pack200</code>; see <a href=\"https://bugs.openjdk.java.net/browse/JDK-8029806\">JDK-8029806</a>.)</p>\n\n<p>No such similar plan exists to for <code>Cloneable</code> and <code>Object.clone()</code>.</p>\n\n<p>A longer answer would involve discussing further questions, such as what one might expect to happen to these APIs, what costs or benefits would accrue the platform if they were deprecated, and what is being communicated to developers when an API is deprecated. I explored this topic in my recent JavaOne talk, <a href=\"https://oracleus.activeevents.com/2014/connect/sessionDetail.ww?SESSION_ID=6377\">Debt and Deprecation</a>. (Slides available at that link; <a href=\"https://www.parleys.com/talk/debt-deprecation\">video here</a>.) It turns out that the JDK itself hasn't been very consistent in its usage of deprecation. It's been used to mean several different things, including for example,</p>\n\n<ul>\n<li><p>This is dangerous and you should be aware of the risks of using it (example:<code>Thread.stop()</code>, <code>Thread.resume()</code>, and <code>Thread.suspend()</code>).</p></li>\n<li><p>This is going to be removed in a future release</p></li>\n<li>This is obsolete and it's a good idea for you to use something different (example: many of the methods in <code>java.util.Date</code>)</li>\n</ul>\n\n<p>All of these are distinct meanings, and different subsets of them apply to different things that are deprecated. And some subset of them apply to things that aren't deprecated (but that maybe should be deprecated).</p>\n\n<p><code>Cloneable</code> and <code>Object.clone()</code> are \"broken\" in the sense that they have design flaws and are difficult to use correctly. However, <code>clone()</code> is still the best way to copy arrays, and cloning has some limited usefulness to make copies of instances of classes that are carefully implemented. Removing cloning would be an incompatible change that would break a lot of things. A cloning operation could be reimplemented a different way, but it would probably be slower than <code>Object.clone()</code>.</p>\n\n<p>However, for most things a copy constructor is preferable to cloning. So perhaps marking <code>Cloneable</code> as \"obsolete\" or \"superseded\" or something similar would be appropriate. This would tell developers that they probably want to look elsewhere, but it would not signal that the cloning mechanism might be removed in a future release. Unfortunately, no such marker exists.</p>\n\n<p>As things stand, \"deprecation\" seems to imply eventual removal -- despite the fact that a vanishingly small number of deprecated features have ever been removed -- and so deprecation doesn't seem warranted for the cloning mechanism. Perhaps in the future an alternative marking can be applied that directs developers to use alternative mechanisms instead.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I've added some additional history to the <a href=\"https://bugs.openjdk.java.net/browse/JDK-4098033\">bug report</a>. Frank Yellin, an early JVM implementor and co-author of the JVM specification, made some comments in response to the \"lost in the mists of time\" comment in the TRC recommendation quoted in the <a href=\"http://stackoverflow.com/a/26403314/1441122\">other answer</a>. I've quoted the relevant portions here; the full message is in the bug report.</p>\n\n<blockquote>\n  <p>Cloneable has no methods for the same reason that Serializable doesn't. Cloneable indicates a property of the class, rather than specifically saying anything about the methods that the class supported.</p>\n  \n  <p>Prior to reflection, we needed a native method to make a shallow copy of an Object.  Hence Object.clone() was born.  It was also clear that many classes would want to override this method, and that not every class would want to be cloned.  Hence Cloneable was born to indicate the programmer's intention.</p>\n  \n  <p>So, in short.  The purpose of Cloneable was not to indicate that you had a public clone() method.  It was to indicate that you were willing to be cloned using Object.clone(), and it was up to the implementation to decide whether or not to make clone() public.</p>\n</blockquote>\n", "title": "Why is Cloneable not deprecated?", "tags": ["java", "java-8", "deprecated", "cloneable"], "link": "http://stackoverflow.com/questions/26398951/why-is-cloneable-not-deprecated/26415589#26415589", "question_id": 26398951, "answer_id": 26415589}], "creation_date": 1413445722, "score": 129, "link": "http://stackoverflow.com/questions/26398951/why-is-cloneable-not-deprecated", "question_id": 26398951}, {"body": "<p>Why does the Java API use <code>int</code> if <code>short</code> or even <code>byte</code> would be sufficient?</p>\n\n<p>Example: The <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Calendar.html#DAY_OF_WEEK\" rel=\"nofollow\"><code>DAY_OF_WEEK</code></a> field in class <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Calendar.html\" rel=\"nofollow\"><code>Calendar</code></a> uses <code>int</code>.</p>\n\n<p>If the difference is too minimal, then why do those datatypes (short, int) exist at all?</p>\n", "tags": ["java", "optimization", "types", "java-api"], "title": "Why does the Java API use int instead of short or byte?", "answers": [{"body": "<p>(Almost) All operations on <code>byte</code>, <code>short</code> will promote them to <code>int</code>, for example, you cannot write:</p>\n\n<pre><code>short x = 1;\nshort y = 2;\n\nshort z = x + y; //error\n</code></pre>\n\n<p>Arithmetics are easier and straightforward when using <code>int</code>, no need to cast. </p>\n\n<p>In terms of space, it makes a <em>very</em> little difference. <code>byte</code> and <code>short</code> would complicate things, I don't think  this micro optimization worth it since we are talking about a fixed amount of variables.</p>\n\n<p><code>byte</code> is relevant and useful when you program for embedded devices or dealing with files/networks. Also these primitives are limited, what if the calculations might exceed their limits in the future? Try to think about an extension for <code>Calendar</code> class that might evolve bigger numbers. </p>\n\n<p>Also note that in a 64-bit processors, locals will be saved in registers and won't use any resources, so using <code>int</code>, <code>short</code> and other primitives won't make any difference at all. Moreover, many Java implementations align variables<sup>*</sup> (and objects). </p>\n\n<hr>\n\n<p><sup>*</sup> <code>byte</code> and <code>short</code> occupy the same space as <code>int</code> if they are <em>local</em> variables, <em>class</em> variables or even <em>instance</em> variables. Why? Because in (most) computer systems, variables  addresses are <em>aligned</em>, so for example if you use a single byte, you'll actually end up with two bytes - one for the variable itself and another for the padding.</p>\n\n<p>On the other hand, in arrays, <code>byte</code> take 1 byte, <code>short</code> take 2 bytes and <code>int</code> take four bytes, because in arrays only the start and maybe the end of it has to be aligned. This will make a difference in case you want to use, for example, <code>System.arraycopy()</code>, then you'll really note a performance difference.</p>\n", "title": "Why does the Java API use int instead of short or byte?", "tags": ["java", "optimization", "types", "java-api"], "link": "http://stackoverflow.com/questions/27122610/why-does-the-java-api-use-int-instead-of-short-or-byte/27122853#27122853", "question_id": 27122610, "answer_id": 27122853}, {"body": "<p>Because arithmetic operations are easier when using integers compared to shorts. Assume that the constants were indeed modeled by <code>short</code> values. Then you would have to use the API in this manner:</p>\n\n<pre><code>short month = Calendar.JUNE;\nmonth = month + (short) 1; // is july\n</code></pre>\n\n<p>Notice the explicit casting. Short values are implicitly promoted to <code>int</code> values when they are used in arithmetic operations. (On the operand stack, shorts are even expressed as ints.) This would be quite cumbersome to use which is why <code>int</code> values are often preferred for constants.</p>\n\n<p>Compared to that, the gain in storage efficiency is minimal because there only exists a fixed number of such constants. We are talking about 40 constants. Changing their storage from <code>int</code> to <code>short</code> would safe you <code>40 * 16 bit = 80 byte</code>. See <a href=\"http://stackoverflow.com/questions/14531235/in-java-is-it-more-efficient-to-use-byte-or-short-instead-of-int-and-float-inst/14532302#14532302\">this answer</a> for further reference.</p>\n", "title": "Why does the Java API use int instead of short or byte?", "tags": ["java", "optimization", "types", "java-api"], "link": "http://stackoverflow.com/questions/27122610/why-does-the-java-api-use-int-instead-of-short-or-byte/27122896#27122896", "question_id": 27122610, "answer_id": 27122896}, {"body": "<p>Some of the reasons have already been pointed out. For example, the fact that <a href=\"http://stackoverflow.com/a/27122853/3182664\"><em>\"...(Almost) All operations on byte, short will promote these primitives to int\"</em></a>. However, the obvious next question would be: <strong>WHY</strong> are these types promoted to <code>int</code>?</p>\n\n<p>So to go one level deeper: The answer may simply be related to the Java Virtual Machine Instruction Set. As summarized in the <a href=\"https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.11.1\">Table in the Java Virtual Machine Specification</a>, <strong>all</strong> integral arithmetic operations, like adding, dividing and others, are only available for the type <code>int</code> and the type <code>long</code>, and <strong>not</strong> for the smaller types. </p>\n\n<p><sub>(An aside: The smaller types (<code>byte</code> and <code>short</code>) are basically only intended for <em>arrays</em>. An <em>array</em> like <code>new byte[1000]</code> will take 1000 bytes, and an array like <code>new int[1000]</code> will take 4000 bytes)</sub> </p>\n\n<p>Now, of course, one could say that <em>\"...the obvious next question would be: <strong>WHY</strong> are these instructions only offered for <code>int</code> (and <code>long</code>)?\"</em>. </p>\n\n<p>One reason is mentioned in the JVM Spec mentioned above:</p>\n\n<blockquote>\n  <p>If each typed instruction supported all of the Java Virtual Machine's run-time data types, there would be more instructions than could be represented in a byte</p>\n</blockquote>\n\n<p>Additionally, the Java Virtual Machine can be considered as an abstraction of a real processor. And introducing dedicated <a href=\"http://en.wikipedia.org/wiki/Arithmetic_logic_unit\">Arithmetic Logic Unit</a> for smaller types would not be worth the effort: It would need additional transistors, but it still could only execute one addition in one clock cycle. The dominant architecture when the JVM was designed was 32bits, just right for a 32bit <code>int</code>. (The operations that involve a 64bit <code>long</code> value are implemented as a special case).  </p>\n\n<p><sub>(Note: The last paragraph is a bit oversimplified, considering possible vectorization etc., but should give the basic idea without diving too deep into processor design topics)</sub></p>\n\n<hr>\n\n<p>EDIT: A short addendum, focussing on the example from the question, but in an more general sense: One could also ask whether it would not be beneficial to store <em>fields</em> using the smaller types. For example, one might think that memory could be saved by storing <code>Calendar.DAY_OF_WEEK</code> as a <code>byte</code>. But here, the Java Class File Format comes into play: All the <a href=\"https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.5\">Fields in a Class File</a> occupy at least one \"slot\", which has the size of one <code>int</code> (32 bits). (The \"wide\" fields, <code>double</code> and <code>long</code>, occupy two slots). So explicitly declaring a field as <code>short</code> or <code>byte</code> would not save any memory either. </p>\n", "title": "Why does the Java API use int instead of short or byte?", "tags": ["java", "optimization", "types", "java-api"], "link": "http://stackoverflow.com/questions/27122610/why-does-the-java-api-use-int-instead-of-short-or-byte/27123302#27123302", "question_id": 27122610, "answer_id": 27123302}, {"body": "<p>If you used the philosophy where integral constants are stored in the smallest type that they fit in, then Java would have a serious problem: whenever programmers write code using integral constants, they have to pay careful attention to their code to check if the type of the constants matter, and if so look up the type in the documentation and/or do whatever type conversions are needed.</p>\n\n<p>So now that we've outlined a serious problem, what benefits could you hope to achieve with that philosophy? I would be unsurprised if the <em>only</em> runtime-observable effect of that change would be what type you get when you look the constant up via reflection. (and, of course, whatever errors are introduced by lazy/unwitting programmers not correctly accounting for the types of the constants)</p>\n\n<p>Weighing the pros and the cons is very easy: it's a bad philosophy.</p>\n", "title": "Why does the Java API use int instead of short or byte?", "tags": ["java", "optimization", "types", "java-api"], "link": "http://stackoverflow.com/questions/27122610/why-does-the-java-api-use-int-instead-of-short-or-byte/27131850#27131850", "question_id": 27122610, "answer_id": 27131850}, {"body": "<p>The design complexity of a virtual machine is a function of how many kinds of operations it can perform.  It's easier to having four implementations of an instruction like \"multiply\"--one each for 32-bit integer, 64-bit integer, 32-bit floating-point, and 64-bit floating-point--than to have, in addition to the above, versions for the smaller numerical types as well.  A more interesting design question is why there should be four types, rather than fewer (performing all integer computations with 64-bit integers and/or doing all floating-point computations with 64-bit floating-point values).  The reason for using 32-bit integers is that Java was expected to run on many platforms where 32-bit types could be acted upon just as quickly as 16-bit or 8-bit types, but operations on 64-bit types would be noticeably slower.  Even on platforms where 16-bit types would be faster to work with, the extra cost of working with 32-bit quantities would be offset by the simplicity afforded by <em>only</em> having 32-bit types.</p>\n\n<p>As for performing floating-point computations on 32-bit values, the advantages are a bit less clear.  There are some platforms where a computation like <code>float a=b+c+d;</code> could be performed most quickly by converting all operands to a higher-precision type, adding them, and then converting the result back to a 32-bit floating-point number for storage.  There are other platforms where it would be more efficient to perform all computations using 32-bit floating-point values.  The creators of Java decided that all platforms should be required to do things the same way, and that they should favor the hardware platforms for which 32-bit floating-point computations are faster than longer ones, even though this severely degraded PC both the speed and precision of floating-point math on a typical PC, as well as on many machines without floating-point units.  Note, btw, that depending upon the values of b, c, and d, using higher-precision intermediate computations when computing expressions like the aforementioned <code>float a=b+c+d;</code> will sometimes yield results which are significantly more accurate than would be achieved of all intermediate operands were computed at <code>float</code> precision, but will sometimes yield a value which is a tiny bit less accurate.  In any case, Sun decided everything should be done the same way, and they opted for using minimal-precision <code>float</code> values.</p>\n\n<p>Note that the primary advantages of smaller data types become apparent when large numbers of them are stored together in an array; even if there were no advantage to having individual variables of types smaller than 64-bits, it's worthwhile to have arrays which can store smaller values more compactly; having a local variable be a <code>byte</code> rather than an <code>long</code> saves seven bytes; having an array of 1,000,000 numbers hold each number as a <code>byte</code> rather than a <code>long</code> waves 7,000,000 bytes.  Since each array type only needs to support a few operations (most notably read one item, store one item, copy a range of items within an array, or copy a range of items from one array to another), the added complexity of having more array types is not as severe as the complexity of having more types of directly-usable discrete numerical values.</p>\n", "title": "Why does the Java API use int instead of short or byte?", "tags": ["java", "optimization", "types", "java-api"], "link": "http://stackoverflow.com/questions/27122610/why-does-the-java-api-use-int-instead-of-short-or-byte/27134999#27134999", "question_id": 27122610, "answer_id": 27134999}, {"body": "<p>Actually, there'd be a small advantage. If you have a</p>\n\n<pre><code>class MyTimeAndDayOfWeek {\n    byte dayOfWeek;\n    byte hour;\n    byte minute;\n    byte second;\n}\n</code></pre>\n\n<p>then on a typical JVM it needs as much space as a class containing a single <code>int</code>. The memory consumption gets rounded to a next multiple of 8 or 16 bytes (IIRC, that's configurable), so the cases when there are real saving are rather rare.</p>\n\n<p>This class would be slightly easier to use if the corresponding <code>Calendar</code> methods returned a <code>byte</code>. But there are no such <code>Calendar</code> methods, only <code>get(int)</code> which must returns an <code>int</code> because of other fields. Each operation on smaller types promotes to <code>int</code>, so you need a lot of casting.</p>\n\n<p>Most probably, you'll either give up and switch to an <code>int</code> or write setters like</p>\n\n<pre><code>void setDayOfWeek(int dayOfWeek) {\n    this.dayOfWeek = checkedCastToByte(dayOfWeek);\n}\n</code></pre>\n\n<p>Then the type of <code>DAY_OF_WEEK</code> doesn't matter, anyway.</p>\n", "title": "Why does the Java API use int instead of short or byte?", "tags": ["java", "optimization", "types", "java-api"], "link": "http://stackoverflow.com/questions/27122610/why-does-the-java-api-use-int-instead-of-short-or-byte/27188004#27188004", "question_id": 27122610, "answer_id": 27188004}], "creation_date": 1416906701, "score": 121, "link": "http://stackoverflow.com/questions/27122610/why-does-the-java-api-use-int-instead-of-short-or-byte", "question_id": 27122610}, {"body": "<p>I am looking for a concise way to convert an <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html\"><code>Iterator</code></a> to a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html\"><code>Stream</code></a> or more specifically to \"view\" the iterator as a stream.</p>\n\n<p>For performance reason, I would like to avoid a copy of the iterator in a new list:</p>\n\n<pre><code>Iterator&lt;String&gt; sourceIterator = Arrays.asList(\"A\", \"B\", \"C\").iterator();\nCollection&lt;String&gt; copyList = new ArrayList&lt;String&gt;();\nsourceIterator.forEachRemaining(copyList::add);\nStream&lt;String&gt; targetStream = copyList.stream();\n</code></pre>\n\n<hr>\n\n<p>Based on the some suggestions in the comments, I have also tried to use <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#generate-java.util.function.Supplier-\"><code>Stream.generate</code></a>:</p>\n\n<pre><code>public static void main(String[] args) throws Exception {\n    Iterator&lt;String&gt; sourceIterator = Arrays.asList(\"A\", \"B\", \"C\").iterator();\n    Stream&lt;String&gt; targetStream = Stream.generate(sourceIterator::next);\n    targetStream.forEach(System.out::println);\n}\n</code></pre>\n\n<p>However, I get a <code>NoSuchElementException</code> (since there is no invocation of <code>hasNext</code>)</p>\n\n<pre><code>Exception in thread \"main\" java.util.NoSuchElementException\n    at java.util.AbstractList$Itr.next(AbstractList.java:364)\n    at Main$$Lambda$1/1175962212.get(Unknown Source)\n    at java.util.stream.StreamSpliterators$InfiniteSupplyingSpliterator$OfRef.tryAdvance(StreamSpliterators.java:1351)\n    at java.util.Spliterator.forEachRemaining(Spliterator.java:326)\n    at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:580)\n    at Main.main(Main.java:20)\n</code></pre>\n\n<p>I have looked at <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/StreamSupport.html\"><code>StreamSupport</code></a> and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Collections.html\"><code>Collections</code></a> but I didn't find anything.</p>\n", "tags": ["java", "iterator", "java-8"], "title": "How to convert an iterator to a stream?", "answers": [{"body": "<p>One way is to create a Spliterator from the Iterator and use that as a basis for your stream:</p>\n\n<pre><code>Iterator&lt;String&gt; sourceIterator = Arrays.asList(\"A\", \"B\", \"C\").iterator();\nStream&lt;String&gt; targetStream = StreamSupport.stream(\n          Spliterators.spliteratorUnknownSize(sourceIterator, Spliterator.ORDERED),\n          false);\n</code></pre>\n\n<p>An alternative which is maybe more readable is to use an Iterable - and creating an Iterable from an Iterator is very easy with lambdas because Iterable is a functional interface:</p>\n\n<pre><code>Iterator&lt;String&gt; sourceIterator = Arrays.asList(\"A\", \"B\", \"C\").iterator();\n\nIterable&lt;String&gt; iterable = () -&gt; sourceIterator;\nStream&lt;String&gt; targetStream = StreamSupport.stream(iterable.spliterator(), false);\n</code></pre>\n", "title": "How to convert an iterator to a stream?", "tags": ["java", "iterator", "java-8"], "link": "http://stackoverflow.com/questions/24511052/how-to-convert-an-iterator-to-a-stream/24511534#24511534", "question_id": 24511052, "answer_id": 24511534}, {"body": "<p>Great suggestion! \nHere's my reusable take on it:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class StreamUtils {\n\n    public static &lt;T&gt; Stream&lt;T&gt; asStream(Iterator&lt;T&gt; sourceIterator) {\n        return asStream(sourceIterator, false);\n    }\n\n    public static &lt;T&gt; Stream&lt;T&gt; asStream(Iterator&lt;T&gt; sourceIterator, boolean parallel) {\n        Iterable&lt;T&gt; iterable = () -&gt; sourceIterator;\n        return StreamSupport.stream(iterable.spliterator(), parallel);\n    }\n}\n</code></pre>\n\n<p>And usage (make sure to statically import asStream):</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; aPrefixedStrings = asStream(sourceIterator)\n                .filter(t -&gt; t.startsWith(\"A\"))\n                .collect(toList());\n</code></pre>\n", "title": "How to convert an iterator to a stream?", "tags": ["java", "iterator", "java-8"], "link": "http://stackoverflow.com/questions/24511052/how-to-convert-an-iterator-to-a-stream/28118885#28118885", "question_id": 24511052, "answer_id": 28118885}], "creation_date": 1404219915, "score": 118, "link": "http://stackoverflow.com/questions/24511052/how-to-convert-an-iterator-to-a-stream", "question_id": 24511052}, {"body": "<p><code>Optional</code> type introduced in Java 8 is a new thing for many developers.</p>\n\n<p>Is a getter method returning <code>Optional&lt;Foo&gt;</code> type in place of the classic <code>Foo</code> a good practice? Assume that the value can be <code>null</code>.</p>\n", "tags": ["java", "java-8", "nullable", "optional"], "title": "Should Java 8 getters return optional type?", "answers": [{"body": "<p>I'd say in general its a good idea to use the optional type for return values that can be nullable. However, w.r.t. to frameworks I assume that replacing classical getters with optional types will cause a lot of trouble when working with frameworks (e.g., Hibernate) that rely on coding conventions for getters and setters.</p>\n", "title": "Should Java 8 getters return optional type?", "tags": ["java", "java-8", "nullable", "optional"], "link": "http://stackoverflow.com/questions/26327957/should-java-8-getters-return-optional-type/26328100#26328100", "question_id": 26327957, "answer_id": 26328100}, {"body": "<p>After doing a bit of research of my own, I've come across a number of things that might suggest when this is appropriate. The most authoritative being the following quote from an Oracle article:</p>\n\n<blockquote>\n  <p><em>\"It is important to note that the intention of the Optional class is <strong>not to replace every single null reference</strong>. Instead, its purpose is to help design <strong>more-comprehensible APIs</strong> so that by just reading the signature of a method, you can tell whether you can expect an optional value. This forces you to actively unwrap an Optional to deal with the absence of a value.\"</em> - <a href=\"http://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html\">Tired of Null Pointer Exceptions? Consider Using Java SE 8's Optional!</a></p>\n</blockquote>\n\n<p>I also found this excerpt from <a href=\"http://blog.jhades.org/java-8-how-to-use-optional/\">Java 8 Optional: How to use it</a></p>\n\n<blockquote>\n  <p><em>\"Optional is not meant to be used in these contexts, as it won't buy us anything:</em></p>\n  \n  <ul>\n  <li><em>in the domain model layer (not serializable)</em></li>\n  <li><em>in DTOs (same reason)</em></li>\n  <li><em>in input parameters of methods</em></li>\n  <li><em>in constructor parameters\"</em></li>\n  </ul>\n</blockquote>\n\n<p>Which also seems to raise some valid points.</p>\n\n<p>I wasn't able to find any negative connotations or red flags to suggest that <code>Optional</code> should be avoided. I think the general idea is, if it's helpful or improves the usability of your API, use it.</p>\n", "title": "Should Java 8 getters return optional type?", "tags": ["java", "java-8", "nullable", "optional"], "link": "http://stackoverflow.com/questions/26327957/should-java-8-getters-return-optional-type/26328314#26328314", "question_id": 26327957, "answer_id": 26328314}, {"body": "<p>Of course, people will do what they want.  But we did have a clear intention when adding this feature, and it was <em>not</em> to be a general purpose Maybe or Some type, as much as many people would have liked us to do so.  Our intention was to provide a limited mechanism for library method return types where there needed to be a clear way to represent \"no result\", and using <code>null</code> for such was overwhelmingly likely to cause errors.  </p>\n\n<p>For example, you probably should never use it for something that returns an array of results, or a list of results; instead return an empty array or list.  You should almost never use it as a field of something or a method parameter.</p>\n\n<p>I think routinely using it as a return value for getters would definitely be over-use.  </p>\n\n<p>There's nothing <em>wrong</em> with Optional that it should be avoided, it's just not what many people wish it were, and accordingly we were fairly concerned about the risk of zealous over-use.</p>\n\n<p>(Public service announcement: <em>NEVER</em> call <code>Optional.get</code> unless you can prove it will never be null; instead use one of the safe methods like <code>orElse</code> or <code>ifPresent</code>.  In retrospect, we should have called <code>get</code> something like <code>getOrElseThrowNoSuchElementException</code> or something that made it far clearer that this was a highly dangerous method that undermined the whole purpose of <code>Optional</code> in the first place.  Lesson learned.)</p>\n", "title": "Should Java 8 getters return optional type?", "tags": ["java", "java-8", "nullable", "optional"], "link": "http://stackoverflow.com/questions/26327957/should-java-8-getters-return-optional-type/26328555#26328555", "question_id": 26327957, "answer_id": 26328555}], "creation_date": 1413135018, "score": 112, "link": "http://stackoverflow.com/questions/26327957/should-java-8-getters-return-optional-type", "question_id": 26327957}, {"body": "<p>Difference between spring <code>@Controller</code> and <code>@RestController</code> annotation.</p>\n\n<p>Can <code>@Controller</code> annotation be used for both Web MVC and REST applications?<br>\nIf yes, how can we differentiate if it is Web MVC or REST application.</p>\n", "tags": ["java", "spring", "spring-mvc"], "title": "Difference between spring @Controller and @RestController annotation", "answers": [{"body": "<p><code>@RestController</code> annotated classes are the same as <code>@Controller</code> but the <code>@ResponseBody</code> on the handler methods are implied.</p>\n", "title": "Difference between spring @Controller and @RestController annotation", "tags": ["java", "spring", "spring-mvc"], "link": "http://stackoverflow.com/questions/25242321/difference-between-spring-controller-and-restcontroller-annotation/25242450#25242450", "question_id": 25242321, "answer_id": 25242450}, {"body": "<ul>\n<li><code>@Controller</code> is used to mark classes as Spring MVC Controller.</li>\n<li><code>@RestController</code> is a convenience annotation that does nothing more than adding the <code>@Controller</code> and <code>@ResponseBody</code> annotations (see: <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/RestController.html\">Javadoc</a>)</li>\n</ul>\n\n<p>So the following two controller definitions should do the same</p>\n\n<pre><code>@Controller\n@ResponseBody\npublic class MyController { }\n\n@RestController\npublic class MyRestController { }\n</code></pre>\n", "title": "Difference between spring @Controller and @RestController annotation", "tags": ["java", "spring", "spring-mvc"], "link": "http://stackoverflow.com/questions/25242321/difference-between-spring-controller-and-restcontroller-annotation/25242458#25242458", "question_id": 25242321, "answer_id": 25242458}, {"body": "<p>As you can see in Spring documentation (<a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/RestController.html\">Spring RestController Documentation</a>) Rest Controller annotation is the same as Controller annotation, but assuming that @ResponseBody is active by default, so all the json are parsed to java objects.</p>\n", "title": "Difference between spring @Controller and @RestController annotation", "tags": ["java", "spring", "spring-mvc"], "link": "http://stackoverflow.com/questions/25242321/difference-between-spring-controller-and-restcontroller-annotation/25242462#25242462", "question_id": 25242321, "answer_id": 25242462}, {"body": "<p>@RestController is composition of @Controller and @ResponseBody, if we are not using the @ResponseBody in Method signature then we need to use the @Restcontroller.</p>\n", "title": "Difference between spring @Controller and @RestController annotation", "tags": ["java", "spring", "spring-mvc"], "link": "http://stackoverflow.com/questions/25242321/difference-between-spring-controller-and-restcontroller-annotation/28194393#28194393", "question_id": 25242321, "answer_id": 28194393}, {"body": "<p>Actually, be careful - they are not exactly the same.</p>\n\n<p>If you define any interceptors within your application, they will not apply to Controllers annotated as <code>@RestController</code>, however they do work with <code>@Controller</code> annotated controllers.</p>\n\n<p>ie. configuration for the interceptor:</p>\n\n<pre><code>@Configuration\npublic class WebMvcConfiguration extends WebMvcConfigurerAdapter {\n\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        registry.addInterceptor(new TemplateMappingInterceptor()).addPathPatterns(\"/**\", \"/admin-functions**\").excludePathPatterns(\"/login**\");\n    }\n\n}\n</code></pre>\n\n<p>and in the declaration of a Spring controller:</p>\n\n<pre><code>@Controller\npublic class AdminServiceController {...\n</code></pre>\n\n<p>Will work, however</p>\n\n<pre><code>@RestController\npublic class AdminServiceController {...\n</code></pre>\n\n<p>does not end up having the interceptor being associated with it.</p>\n", "title": "Difference between spring @Controller and @RestController annotation", "tags": ["java", "spring", "spring-mvc"], "link": "http://stackoverflow.com/questions/25242321/difference-between-spring-controller-and-restcontroller-annotation/28313647#28313647", "question_id": 25242321, "answer_id": 28313647}, {"body": "<p>in the code below I'll show you the difference\nwith  <code>@controller</code><br/></p>\n\n<pre><code>@Controller\npublic class restClassName{\n\n  @RequestMapping(value={\"/uri\"})\n  @ResponseBody\n  public ObjectResponse functionRestName(){\n      //...\n      return instance\n   }\n}\n</code></pre>\n\n<p>with <code>@RestController</code> <br/></p>\n\n<pre><code>@RestController\npublic class restClassName{\n\n  @RequestMapping(value={\"/uri\"})\n  public ObjectResponse functionRestName(){\n      //...\n      return instance\n   }\n}\n</code></pre>\n\n<p>the  @ResponseBody is activate by default you don't need to add it in the above of function signature</p>\n", "title": "Difference between spring @Controller and @RestController annotation", "tags": ["java", "spring", "spring-mvc"], "link": "http://stackoverflow.com/questions/25242321/difference-between-spring-controller-and-restcontroller-annotation/34412958#34412958", "question_id": 25242321, "answer_id": 34412958}, {"body": "<p><a href=\"http://i.stack.imgur.com/lY4rT.png\" rel=\"nofollow\">Spring MVC traditional workflow</a></p>\n\n<p>Spring\u2019s annotation based MVC framework simplifies the process of creating RESTful web services. The key difference between a traditional Spring MVC controller and the RESTful web service controller is the way the HTTP response body is created. While the traditional MVC controller relies on the View technology, the RESTful web service controller simply returns the object and the object data is written directly to the HTTP response as JSON/XML.  For a detailed description of creating RESTful web services using the Spring framework.</p>\n\n<p><strong>Using the @RestController Annotation</strong></p>\n\n<p>Spring 4.0 introduced @RestController, a specialized version of the controller which is a convenience annotation that does nothing more than add the @Controller and @ResponseBody annotations. By annotating the controller class with @RestController annotation, you no longer need to add @ResponseBody to all the request mapping methods. The @ResponseBody annotation is active by default.</p>\n\n<p><a href=\"http://i.stack.imgur.com/EkBfW.png\" rel=\"nofollow\">Spring 4.x MVC RESTful Web Services Workflow</a></p>\n", "title": "Difference between spring @Controller and @RestController annotation", "tags": ["java", "spring", "spring-mvc"], "link": "http://stackoverflow.com/questions/25242321/difference-between-spring-controller-and-restcontroller-annotation/38976444#38976444", "question_id": 25242321, "answer_id": 38976444}], "creation_date": 1407756850, "score": 109, "link": "http://stackoverflow.com/questions/25242321/difference-between-spring-controller-and-restcontroller-annotation", "question_id": 25242321}, {"body": "<p>I am trying to add a text field onto my Android app in Eclipse, but then I drag the <code>Plain text</code> option on to the graphical layout, a message at the bottom comes up. It reads\n<code>Exception raised during rendering: java.lang.System.arraycopy([CI[CII)V\nException details are logged in Window &gt; Show View &gt; Error Log</code>\nEven when I go to <code>Window &gt; Show View</code> there is no error log option. The whole designer is useless now, because I can not use it anymore until I delete the <code>EditText</code> directly from the xml. What is causing this error, and how do I fix it? I am running the latest version (as of today, 6-30-14), and Windows 8 Pro x64.</p>\n\n<p>Here is my full layout code:</p>\n\n<pre><code>&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\ntools:context=\"${relativePackage}.${activityClass}\" &gt;\n\n&lt;TextView\n    android:id=\"@+id/textView1\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_alignParentTop=\"true\"\n    android:layout_centerHorizontal=\"true\"\n    android:layout_marginTop=\"18dp\"\n    android:text=\"@string/welcome_text\" /&gt;\n\n&lt;EditText\n    android:id=\"@+id/editText1\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_centerHorizontal=\"true\"\n    android:layout_centerVertical=\"true\"\n    android:ems=\"10\"\n    android:inputType=\"text\"&gt;\n\n    &lt;requestFocus /&gt;\n&lt;/EditText&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n", "tags": ["java", "android", "eclipse", "text", "android-edittext"], "title": "Android app in Eclipse: Edit text not showing on Graphical layout", "answers": [{"body": "<p>Check the \"Android version to use when rendering layouts\" and make sure you're not using a version that ends in \"W\" for Android Wear (<em>e.g.</em> API 20: Android 4.4W). I don't believe Wear supports <code>EditText</code>.</p>\n\n<p>In both Android Studio and Eclipse, it's the dropdown with the green android in the layout preview's toolbar. You may want to set it explicitly and not allow the IDE to choose the Android version automatically.</p>\n", "title": "Android app in Eclipse: Edit text not showing on Graphical layout", "tags": ["java", "android", "eclipse", "text", "android-edittext"], "link": "http://stackoverflow.com/questions/24501042/android-app-in-eclipse-edit-text-not-showing-on-graphical-layout/24502370#24502370", "question_id": 24501042, "answer_id": 24502370}, {"body": "<p>I changed my Android version for Android 4.2, but it still not work for me. I tried different solutions found that it only work by deleting Android 4.4W package.</p>\n\n<p>Window > Android SDK Manager > check Android 4.4W(API 20) if it was installed > Delete package</p>\n", "title": "Android app in Eclipse: Edit text not showing on Graphical layout", "tags": ["java", "android", "eclipse", "text", "android-edittext"], "link": "http://stackoverflow.com/questions/24501042/android-app-in-eclipse-edit-text-not-showing-on-graphical-layout/24544231#24544231", "question_id": 24501042, "answer_id": 24544231}, {"body": "<p>From the Eclipse IDE, just change the API version to use for previewing, as shown in below screenshot.\nInstead of \"Automatically Pick Best\", manually select the one which works for you (API 17 worked for me).</p>\n\n<p><img src=\"http://i.stack.imgur.com/STgxB.png\" alt=\"enter image description here\"></p>\n", "title": "Android app in Eclipse: Edit text not showing on Graphical layout", "tags": ["java", "android", "eclipse", "text", "android-edittext"], "link": "http://stackoverflow.com/questions/24501042/android-app-in-eclipse-edit-text-not-showing-on-graphical-layout/24606569#24606569", "question_id": 24501042, "answer_id": 24606569}, {"body": "<p>I deleted 4.4w from my sdk install pile, which must have slipped past me last time I installed an sdk. Once I removed it it was no longer and option, and eclipse picked an sdk I did have that wasn't W and it worked.</p>\n", "title": "Android app in Eclipse: Edit text not showing on Graphical layout", "tags": ["java", "android", "eclipse", "text", "android-edittext"], "link": "http://stackoverflow.com/questions/24501042/android-app-in-eclipse-edit-text-not-showing-on-graphical-layout/25977509#25977509", "question_id": 24501042, "answer_id": 25977509}, {"body": "<p>If you are facing this on Android Studio, follow along</p>\n\n<p>1) Uninstall Android 4.4W(API 20) from the SDK Manager</p>\n\n<p>2) Make sure you have Android SDK Build Tools 19.1 installed from the SDK Manager.</p>\n\n<p>3) Edit build.gradle within your app folder. Set the following two values as below</p>\n\n<pre><code>compileSdkVersion 19\nbuildToolsVersion \"19.1\"\n</code></pre>\n\n<p>4) The IDE will prompt you to sync the Gradle file with your project, click Yes.</p>\n\n<p>5) Open your activity file and then change the 'Android version to use when rendering layouts in IDE' to 'API 19'. This is the green colored Android Bot towards the right on the preview window</p>\n", "title": "Android app in Eclipse: Edit text not showing on Graphical layout", "tags": ["java", "android", "eclipse", "text", "android-edittext"], "link": "http://stackoverflow.com/questions/24501042/android-app-in-eclipse-edit-text-not-showing-on-graphical-layout/26026704#26026704", "question_id": 24501042, "answer_id": 26026704}, {"body": "<p>The W in Android 4.4W suggest wearable devices.\nAndroid Wear is a wrist watch and you cannot type anything in it so you cannot use EditText on 4.4W. Change the API to 19 or less or change it to 4.4L</p>\n\n<p>Check it out @ <a href=\"https://developer.android.com/design/wear/index.html\" rel=\"nofollow\">https://developer.android.com/design/wear/index.html</a></p>\n\n<p>You can change your previewing API version as Jim suggested if u don't want to develop apps for wearable devices. </p>\n", "title": "Android app in Eclipse: Edit text not showing on Graphical layout", "tags": ["java", "android", "eclipse", "text", "android-edittext"], "link": "http://stackoverflow.com/questions/24501042/android-app-in-eclipse-edit-text-not-showing-on-graphical-layout/26696567#26696567", "question_id": 24501042, "answer_id": 26696567}], "creation_date": 1404176182, "score": 105, "link": "http://stackoverflow.com/questions/24501042/android-app-in-eclipse-edit-text-not-showing-on-graphical-layout", "question_id": 24501042}, {"body": "<p>Please explain the following about the \"Cannot find symbol\" error:</p>\n\n<ul>\n<li>What does this error mean?</li>\n<li>What things can cause this error?</li>\n<li>How does the programmer go about fixing this error?</li>\n</ul>\n\n<p><em>This question is designed to be a comprehensive question about \"cannot find symbol\" compilation errors in Java.</em></p>\n", "tags": ["java", "compiler-errors", "cannot-find-symbol"], "title": "What does a &quot;Cannot find symbol&quot; compilation error mean?", "answers": [{"body": "<h2>1. What does a \"Cannot find symbol\" error mean?</h2>\n\n<p>Firstly, it is a <em>compilation error</em><sup>1</sup>.  It means that <em>either</em> there is a problem in your Java source code, <em>or</em> there is a problem in the way that you are compiling it.</p>\n\n<p>Your Java source code consists of the following things:</p>\n\n<ul>\n<li>Keywords: like <code>true</code>, <code>false</code>, <code>class</code>, <code>while</code>, and so on.</li>\n<li>Literals: like <code>42</code> and <code>'X'</code> and <code>\"Hi mum!\"</code>.</li>\n<li>Operators and other non-alphanumeric tokens: like <code>+</code>, <code>=</code>, <code>{</code>, and so on.</li>\n<li>Identifiers: like <code>Reader</code>, <code>i</code>, <code>toString</code>, <code>processEquibalancedElephants</code>, and so on.</li>\n<li>Comments and whitespace.</li>\n</ul>\n\n<p>A \"Cannot find symbol\" error is about the identifiers.  When your code is compiled, the compiler needs to work out what each and every identifier in your code means.  </p>\n\n<p>A \"Cannot find symbol\" error means that the compiler cannot do this.  Your code appears to be referring to something that the compiler doesn't understand.</p>\n\n<h2>2. What can cause a \"Cannot find symbol\" error?</h2>\n\n<p>As a first order, there is only one cause.  The compiler looked in all of the places where the identifier <em>should</em> be defined, and it couldn't find the definition.  This could be caused by a number of things.  The common ones are as follows:</p>\n\n<ul>\n<li>For identifiers in general:\n\n<ul>\n<li>Perhaps you spelled the name incorrectly; i.e. <code>StringBiulder</code> instead of <code>StringBuilder</code>.  Java cannot and will not attempt to compensate for bad spelling or typing errors.</li>\n<li>Perhaps you got the case wrong; i.e. <code>stringBuilder</code> instead of <code>StringBuilder</code>.  All Java identifiers are case sensitive.</li>\n<li>Perhaps you used underscores inappropriately; i.e. <code>mystring</code> and <code>my_string</code> are different.  (If you stick to the Java style rules, you will be largely protected from this mistake ...)</li>\n</ul></li>\n<li>For identifiers that should refer to variables:\n\n<ul>\n<li>Perhaps you forgot to declare the variable.</li>\n<li>Perhaps the variable declaration is out of scope at the point you tried to use it.  (See example below)</li>\n</ul></li>\n<li>For identifiers that should be method names:\n\n<ul>\n<li>Perhaps you are trying to refer to an inherited method that wasn't declared in the parent / ancestor classes or interfaces.</li>\n</ul></li>\n<li><p>For identifiers that should be class names:</p>\n\n<ul>\n<li>Perhaps you forgot to import the class.</li>\n<li>Perhaps you used \"star\" imports, but the class isn't defined in any of the packages that you imported.</li>\n<li><p>Perhaps you forgot a <code>new</code> as in:</p>\n\n<pre><code>String s = String();  // should be 'new String()'\n</code></pre></li>\n</ul></li>\n</ul>\n\n<p>The problem is often a combination of the above.  For example, maybe you \"star\" imported <code>java.io.*</code> and then tried to use the <code>Files</code> class ... which is in <code>java.nio</code> not <code>java.io</code>.  Or maybe you meant to write <code>File</code> ... which <em>is</em> a class in <code>java.io</code>.</p>\n\n<hr>\n\n<p>Here is an example of how incorrect variable scoping can lead to a \"Cannot find symbol\" error:</p>\n\n<pre><code>for (int i = 0; i &lt; strings.size(); i++) {\n    if (strings.get(i).equalsIgnoreCase(\"fnoord\")) {\n        break;\n    }\n}\nif (i &lt; strings.size()) {\n    ...\n}\n</code></pre>\n\n<p>This will give a \"Cannot find symbol\" error for <code>i</code> in the <code>if</code> statement.  Though we previously declared <code>i</code>, that declaration is only <em>in scope</em> for the <code>for</code> statement and its body.  The reference to <code>i</code> in the <code>if</code> statement <em>cannot see</em> that declaration of <code>i</code>.  It is <em>out of scope</em>.</p>\n\n<p>(An appropriate correction here might be to move the <code>if</code> statement inside the loop, or to declare <code>i</code> before the start of the loop.)</p>\n\n<hr>\n\n<p>There is another reason why the compiler might not find a symbol if you are compiling from the command line.  You might simply have forgotten to compile or recompile some other class.  For example, if you have classes <code>Foo</code> and <code>Bar</code> where <code>Foo</code> uses <code>Bar</code>.  If you have never compiled <code>Bar</code> and you run <code>javac Foo.java</code>, you are liable to find that the compiler can't find the symbol <code>Bar</code>.  The simple answer is to <code>Foo</code> and <code>Bar</code> together; e.g. <code>javac Foo.java Bar.java</code> or <code>javac *.java</code>.  Or better still use a Java build tool; e.g. Ant, Maven, Gradle and so on.</p>\n\n<p>There are some other more obscure causes too ... which I will deal with below.</p>\n\n<h2>3. How do I fix these error ?</h2>\n\n<p>Generally speaking, you start out by figuring out what <em>caused</em> the problem.  Then you <em>think</em> about what your code is supposed to be saying.  Then finally you work out what correction you need to make to your source code to do what you want.</p>\n\n<p>Note that not every \"correction\" is correct. Consider this:</p>\n\n<pre><code>for (int i = 1; i &lt; 10; i++) {\n    for (j = 1; j &lt; 10; j++) {\n        ...\n    }\n}\n</code></pre>\n\n<p>Suppose that the compiler says \"Cannot find symbol\" for <code>j</code>.  There are many ways I could \"fix\" that:</p>\n\n<ul>\n<li>I could change the inner <code>for</code> to <code>for (int j = 1; j &lt; 10; j++)</code> - probably correct.</li>\n<li>I could add a declaration for <code>j</code> <em>before</em> the inner <code>for</code> loop, or the outer <code>for</code> loop - possibly correct.</li>\n<li>I could change <code>j</code> to <code>i</code> in the inner <code>for</code> loop - probably wrong!</li>\n<li>and so on.</li>\n</ul>\n\n<p>The point is that you <em>need</em> to understand what your code is trying to do in order to find the right fix.</p>\n\n<h2>4.  Obscure causes</h2>\n\n<p>Here are a couple of cases where the \"Cannot find symbol\" is seemingly inexplicable ... until you look closer.</p>\n\n<ol>\n<li><p><strong>You are looking at the wrong source code</strong>:  It often happens that a new Java programmers don't understand how the Java tool chain works, or haven't implemented a repeatable \"build process\"; e.g. using an IDE, Ant, Maven, Gradle and so on.  In such a situation, the programmer can end up chasing his tail looking for an illusory error that is <em>actually</em> caused by not recompiling the code properly, and the like ...</p></li>\n<li><p><strong>IDE issues</strong>: People have reported cases where their IDE gets confused and the compiler in the IDE cannot find a class that exists ... or the reverse situation.  </p>\n\n<ul>\n<li><p>This can happen if the IDE's caches get out of sync with the file system.  There are IDE specific ways to fix that.</p></li>\n<li><p>This could be an IDE bug.  For instance @Joel Costigliola describes a scenario where Eclipse does not handle a Maven \"test\" tree correctly; see <a href=\"http://stackoverflow.com/a/37207223/139985\">http://stackoverflow.com/a/37207223/139985</a>.</p></li>\n</ul></li>\n<li><p><strong>Redefining system classes</strong>: I've seen cases where the compiler complains that <code>substring</code> is an unknown symbol in something like the following</p>\n\n<pre><code>String s = ...\nString s1 = s.substring(1);\n</code></pre>\n\n<p>It turned out that the programmer had created their own version of <code>String</code> and that his version of the class didn't define a <code>substring</code> methods.</p>\n\n<p>Lesson: Don't define your own classes with the same names as common library classes!</p></li>\n<li><p><strong>Homoglyphs:</strong>  If you use UTF-8 encoding for your source files, it is possible to have identifiers that <em>look</em> the same, but are in fact different because they contain homoglyphs.   See <a href=\"http://en.wikipedia.org/wiki/Homoglyph\">this page</a> for more information.  </p>\n\n<p>You can avoid this by restricting yourself to ASCII or Latin-1 as the source file encoding, and using Java <code>\\uxxxx</code> escapes for other characters.</p></li>\n</ol>\n\n<hr>\n\n<p><sup>1 - If, perchance, you <em>do</em> see this in a runtime exception or error message, then either you have configured your IDE to run code with compilation errors, or your application is generating and compiling code .. at runtime.</sup></p>\n", "title": "What does a &quot;Cannot find symbol&quot; compilation error mean?", "tags": ["java", "compiler-errors", "cannot-find-symbol"], "link": "http://stackoverflow.com/questions/25706216/what-does-a-cannot-find-symbol-compilation-error-mean/25706217#25706217", "question_id": 25706216, "answer_id": 25706217}, {"body": "<p>You'll also get this error if you forget a <code>new</code>:</p>\n\n<pre><code>String s = String();\n</code></pre>\n\n<p>versus</p>\n\n<pre><code>String s = new String();\n</code></pre>\n", "title": "What does a &quot;Cannot find symbol&quot; compilation error mean?", "tags": ["java", "compiler-errors", "cannot-find-symbol"], "link": "http://stackoverflow.com/questions/25706216/what-does-a-cannot-find-symbol-compilation-error-mean/29694504#29694504", "question_id": 25706216, "answer_id": 29694504}, {"body": "<p><strong>One more example of 'Variable is out of scope'</strong></p>\n\n<p>As I've seen that kind of questions a few times already, maybe one more example to what's illegal even if it might <em>feel</em> okay.</p>\n\n<p>Consider this code:</p>\n\n<pre><code>if(somethingIsTrue()) {\n  String message = \"Everything is fine\";\n} else {\n  String message = \"We have an error\";\n}\nSystem.out.println(message);\n</code></pre>\n\n<p>That's invalid code. Because neither of the variables named <code>message</code> is visible outside of their respective scope - which would be the surrounding brackets <code>{}</code> in this case. </p>\n\n<p>You might say: \"But a variable named message is defined either way - so message <em>is</em> defined after the <code>if</code>\". </p>\n\n<p>But you'd be wrong. </p>\n\n<p>Java has no <code>free()</code> or <code>delete</code> operators, so it has to rely on tracking variable scope to find out when variables are no longer used (together with references to these variables of cause). </p>\n\n<p>It's especially bad if you thought you did something good. I've seen this kind of error after \"optimizing\" code like this:</p>\n\n<pre><code>if(somethingIsTrue()) {\n  String message = \"Everything is fine\";\n  System.out.println(message);\n} else {\n  String message = \"We have an error\";\n  System.out.println(message);\n}\n</code></pre>\n\n<p>\"Oh, there's duplicated code, let's pull that common line out\" -> and there it it.</p>\n\n<p>The  most common way to deal with this kind of scope-trouble would be to pre-assign the else-values to the variable names in the outside scope and then reassign in if:</p>\n\n<pre><code>String message = \"We have an error\";\nif(somethingIsTrue()) {\n  String message = \"Everything is fine\";\n} \nSystem.out.println(message);\n</code></pre>\n", "title": "What does a &quot;Cannot find symbol&quot; compilation error mean?", "tags": ["java", "compiler-errors", "cannot-find-symbol"], "link": "http://stackoverflow.com/questions/25706216/what-does-a-cannot-find-symbol-compilation-error-mean/34115842#34115842", "question_id": 25706216, "answer_id": 34115842}, {"body": "<p>If you're getting this error in the build somewhere else, while your IDE says everything is perfectly fine, then check that you are using the same Java versions in both places.</p>\n\n<p>For example, Java 7 and Java 8 have different APIs, so calling a non-existent API in an older Java version would cause this error.</p>\n", "title": "What does a &quot;Cannot find symbol&quot; compilation error mean?", "tags": ["java", "compiler-errors", "cannot-find-symbol"], "link": "http://stackoverflow.com/questions/25706216/what-does-a-cannot-find-symbol-compilation-error-mean/35860058#35860058", "question_id": 25706216, "answer_id": 35860058}, {"body": "<p>One way to get this error in Eclipse : </p>\n\n<ol>\n<li>Define a class <code>A</code> in <code>src/test/java</code>.</li>\n<li>Define another class <code>B</code> in <code>src/main/java</code> that uses class <code>A</code>.</li>\n</ol>\n\n<p>Result : Eclipse will compile the code, but maven will give \"Cannot find symbol\".</p>\n\n<p>Underlying cause : Eclipse is using a combined build path for the main and test trees.  Unfortunately, it does not support using different build paths for different parts of an Eclipse project, which is what Maven requires.</p>\n\n<p>Solution : </p>\n\n<ol>\n<li>Don't define your dependencies that way; i.e. don't make this mistake.</li>\n<li>Regularly build your codebase using Maven so that you pick up this mistake early.  One way to do that is to use a CI server.</li>\n</ol>\n", "title": "What does a &quot;Cannot find symbol&quot; compilation error mean?", "tags": ["java", "compiler-errors", "cannot-find-symbol"], "link": "http://stackoverflow.com/questions/25706216/what-does-a-cannot-find-symbol-compilation-error-mean/37207223#37207223", "question_id": 25706216, "answer_id": 37207223}], "creation_date": 1410052328, "score": 101, "link": "http://stackoverflow.com/questions/25706216/what-does-a-cannot-find-symbol-compilation-error-mean", "question_id": 25706216}, {"body": "<p>I'm working on a 3.8-e4 hybrid (i.e we have the Luna dependencies, but we <b>do not</b> use the <em>Application.e4xmi</em>, yet). So we're basically running the compact layer.</p>\n\n<p>With that being said, it would be nice to find an e4 programmatic way to stack these nasty views onto the editor folder.</p>\n\n<hr>\n\n<h2>1.) Problem</h2>\n\n<p>I want to place a generic view folder in the editor area, so that each view which is opened at runtime will be opened there. </p>\n\n<p><img src=\"http://i.stack.imgur.com/zHcn8.png\" alt=\"View in editor folder\"></p>\n\n<p><i>(pic stolen from <a href=\"http://stackoverflow.com/questions/2758642/eclipse-rcp-stacking-a-view-with-the-editor-area\">this question</a>)</i></p>\n\n<hr>\n\n<h2>2.1) Possible fix no.1: Using plugin.xml</h2>\n\n<p>Create a perspective extension, and add each possible view to that extension, with <b>relationship stack</b> over <b>relative org.eclipse.ui.editorss</b>. This is a bit inconvenient if you have too many views awating to be opened, and if the project scales quickly. I also noticed that wildcard view IDs do not work here.</p>\n\n<p><img src=\"http://i.stack.imgur.com/veJDE.png\" alt=\"SS of the plugin.xml with perspective extensions\"></p>\n\n<p>If you find yourself the time to add each possible view to the perspective extension, that would work. Although, IF you open a view which is not added here (ie: opens in a different folder), then each subsequent opened view will be opened in the previous folder, and NOT in the editor area (inquire further explanation if you don't get it).</p>\n\n<hr>\n\n<h2>2.2) Possible fix no.2: Using code in the perspective factory</h2>\n\n<p>In the <code>IPerspectiveFactory</code>, we do have access to the <code>IPageLayout</code>, which happens to be <code>org.eclipse.ui.internal.e4.compatibility.ModeledPageLayout</code> (e4 stuff). </p>\n\n<p>Now, this <code>ModeledPageLayout</code> implementation is reasonable, but also no documentation and weird public APIs. This one gives the possibility to stack a view over any other relative</p>\n\n<pre><code>modeledPageLayout.stackView(\"newView0\", IPageLayout.ID_EDITOR_AREA);\n</code></pre>\n\n<p>This would be the programmatic version of <b>2.1</b>. Also, the same problem appears here. If a view is opened somewhere else, the code above becomes useless.</p>\n\n<p>Interesting enough, the <code>stackView</code> API does not support wildcards (while others such as <code>addView</code> do).</p>\n\n<hr>\n\n<h2>2.3) Possible fix no.3: Workarounds yaaay!</h2>\n\n<p>I have a lot of perspectives, and a lot of different folders in each one. Everything is precisely placed. </p>\n\n<p>Since Eclipse offers the APIs to get all the view IDs from everywhere around the system, I want to do the following, per perspective: <b>each view ID which wasn't added to a specific folder will be appended to the editor area (ie editor folder, editor stack)</b>. </p>\n\n<p>This would be my last resort, unless someone offers a more convenient and timesaving solution.</p>\n\n<p>Remember, an e4 programmatic alternative is more flexible!</p>\n\n<hr>\n\n<h2>3.) Related questions</h2>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/21382848/eclipse-rcp-open-view-in-editor-folder\">Eclipse RCP -- Open View in Editor folder</a></li>\n<li><a href=\"http://stackoverflow.com/questions/2758642/eclipse-rcp-stacking-a-view-with-the-editor-area\">Eclipse  RCP - Stacking a view with the editor area? </a></li>\n<li><a href=\"http://stackoverflow.com/questions/22921306/custom-eclipse-perspective-with-initially-invisble-view-stacked-to-editor-area\">Custom Eclipse perspective, with initially invisble view stacked to editor area</a></li>\n<li><a href=\"https://groups.google.com/forum/#!topic/vogella/_2yEZMg8epk\">Google question, Lars answer</a></li>\n</ul>\n\n<p>These would be rendered deprecated for the e4 release.</p>\n\n<hr>\n\n<h2>4.) Related Bug on Eclipse's Bugzilla:</h2>\n\n<p><a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=450854\">This recent bug opened by myself</a> has an attachment with a small SSCCE. The steps to reproduce this are described in <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=450854#c2\">this comment</a>, so I'm not going to copy-paste them here.</p>\n", "tags": ["java", "eclipse-plugin", "eclipse-rcp", "eclipse-luna", "e4"], "title": "Eclipse RCP - Open a View in the Editor Area (3.8/e4 hybrid)", "answers": [{"body": "<p>I suggest you go with Possible fix no.3, since i think there isn't a faster method to do this. </p>\n", "title": "Eclipse RCP - Open a View in the Editor Area (3.8/e4 hybrid)", "tags": ["java", "eclipse-plugin", "eclipse-rcp", "eclipse-luna", "e4"], "link": "http://stackoverflow.com/questions/26776802/eclipse-rcp-open-a-view-in-the-editor-area-3-8-e4-hybrid/34676582#34676582", "question_id": 26776802, "answer_id": 34676582}], "creation_date": 1415268863, "score": 99, "link": "http://stackoverflow.com/questions/26776802/eclipse-rcp-open-a-view-in-the-editor-area-3-8-e4-hybrid", "question_id": 26776802}, {"body": "<p>I have a problem with name hiding that is extremely hard to solve. Here is a simplified version that explains the problem:</p>\n\n<p>There is a class: <code>org.A</code></p>\n\n<pre><code>package org;\npublic class A{\n     public class X{...}\n     ...\n     protected int net;\n}\n</code></pre>\n\n<p>Then there is a class <code>net.foo.X</code></p>\n\n<pre><code>package net.foo;\npublic class X{\n     public static void doSomething();\n}\n</code></pre>\n\n<p>And now, here is the problematic class which inherits from <code>A</code> and wants to call <code>net.foo.X.doSomething()</code></p>\n\n<pre><code>package com.bar;\nclass B extends A {\n\n    public void doSomething(){\n        net.foo.X.doSomething(); // doesn't work; package net is hidden by inherited field\n        X.doSomething(); // doesn't work; type net.foo.X is hidden by inherited X\n    }\n}\n</code></pre>\n\n<p>As you see, this is not possible. I cannot use the simple name <code>X</code> because it is hidden by an inherited type. I cannot use the fully qualified name <code>net.foo.X</code>, because <code>net</code> is hidden by an inherited field.</p>\n\n<p>Only the class <code>B</code> is in my code base; the classes <code>net.foo.X</code> and <code>org.A</code> are library classes, so I cannot alter them!</p>\n\n<p>My only solution looks like this:\nI could call another class that in turn calls <code>X.doSomething()</code>; but this class would only exist because of the name clash, which seems very messy! Is there no solution in which I can directly call <code>X.doSomething()</code> from <code>B.doSomething()</code>?</p>\n\n<p>In a language that allows specifying the global namespace, e.g., <code>global::</code> in C# or <code>::</code> in C++, I could simply prefix <code>net</code> with this global prefix, but Java does not allow that.</p>\n", "tags": ["java", "name-clash", "member-hiding"], "title": "Java Name Hiding: The Hard Way", "answers": [{"body": "<p>Not really THE answer but you could create an instance of X and call the static method on it.\nThat would be a way (dirty I admit) to call your method.</p>\n\n<pre><code>(new net.foo.X()).doSomething();\n</code></pre>\n", "title": "Java Name Hiding: The Hard Way", "tags": ["java", "name-clash", "member-hiding"], "link": "http://stackoverflow.com/questions/24572214/java-name-hiding-the-hard-way/24572520#24572520", "question_id": 24572214, "answer_id": 24572520}, {"body": "<p>You can use a static import:</p>\n\n<pre><code>import static net.foo.X.doSomething;\n\nclass B extends A {\n    void doX(){\n        doSomething();\n    }\n}\n</code></pre>\n\n<p>Watch out that <code>B</code> and <code>A</code> do not contain methods named <code>doSomething</code></p>\n", "title": "Java Name Hiding: The Hard Way", "tags": ["java", "name-clash", "member-hiding"], "link": "http://stackoverflow.com/questions/24572214/java-name-hiding-the-hard-way/24572523#24572523", "question_id": 24572214, "answer_id": 24572523}, {"body": "<p>The proper way of doing things would be the static import, but in the absolute worst case scenario, you COULD construct an instance of the class using reflection if you know its fully qualified name.</p>\n\n<p><a href=\"http://stackoverflow.com/questions/3671649/java-newinstance-of-class-that-has-no-default-constructor\">Java: newInstance of class that has no default constructor</a></p>\n\n<p>And then invoke the method on the instance.</p>\n\n<p>Or, just invoke the method itself with reflection:\n<a href=\"http://stackoverflow.com/questions/2467544/invoking-a-static-method-using-reflection\">invoking a static method using reflection</a></p>\n\n<pre><code>Class&lt;?&gt; clazz = Class.forName(\"net.foo.X\");\nMethod method = clazz.getMethod(\"doSomething\");\nObject o = method.invoke(null);\n</code></pre>\n\n<p>Of course, these are obviously last resorts.</p>\n", "title": "Java Name Hiding: The Hard Way", "tags": ["java", "name-clash", "member-hiding"], "link": "http://stackoverflow.com/questions/24572214/java-name-hiding-the-hard-way/24572793#24572793", "question_id": 24572214, "answer_id": 24572793}, {"body": "<p>Probably the simplest (not necessarily the easiest) way to manage this would be with a delegate class:</p>\n\n<pre><code>import net.foo.X;\nclass C {\n    static void doSomething() {\n         X.doSomething();\n    }\n}\n</code></pre>\n\n<p>and then ...</p>\n\n<pre><code>class B extends A {\n    void doX(){\n        C.doSomething();\n    }\n}\n</code></pre>\n\n<p>This is somewhat verbose, but very flexible - you can get it to behave any way you want; plus it works in much the same way both with <code>static</code> methods and instantiated objects</p>\n\n<p>More about delegate objects here: <a href=\"http://en.wikipedia.org/wiki/Delegation_pattern\">http://en.wikipedia.org/wiki/Delegation_pattern</a></p>\n", "title": "Java Name Hiding: The Hard Way", "tags": ["java", "name-clash", "member-hiding"], "link": "http://stackoverflow.com/questions/24572214/java-name-hiding-the-hard-way/24572966#24572966", "question_id": 24572214, "answer_id": 24572966}, {"body": "<p>You can cast a <code>null</code> to the type and then invoke the method on that (which will work, since the target object isn't involved in invocation of static methods).</p>\n\n<pre><code>((net.foo.X) null).doSomething();\n</code></pre>\n\n<p>This has the benefits of</p>\n\n<ul>\n<li>being side-effect free (a problem with instantiating <code>net.foo.X</code>),</li>\n<li>not requiring renaming of anything (so you can give the method in <code>B</code> the name you want it to have; that's why a <code>import static</code> won't work in your exact case),</li>\n<li>not requiring the introduction of delegate class (though that might be a good idea\u2026), and</li>\n<li>not requiring the overhead or complexity of working with the reflection API.</li>\n</ul>\n\n<p>The downside is that this code is really horrible! For me, it generates a warning, and that's a good thing in general. But since it's working around a problem that is otherwise thoroughly impractical, adding a </p>\n\n<pre><code>@SuppressWarnings(\"static-access\")\n</code></pre>\n\n<p>at an appropriate (minimal!) enclosing point will shut the compiler up.</p>\n", "title": "Java Name Hiding: The Hard Way", "tags": ["java", "name-clash", "member-hiding"], "link": "http://stackoverflow.com/questions/24572214/java-name-hiding-the-hard-way/24575207#24575207", "question_id": 24572214, "answer_id": 24575207}, {"body": "<p>This is one of the reasons that composition is preferable to inheritance.</p>\n\n<pre><code>package com.bar;\nimport java.util.concurrent.Callable;\npublic class C implements Callable&lt;org.A&gt;\n{\n    private class B extends org.A{\n    public void doSomething(){\n        C.this.doSomething();\n    }\n    }\n\n    private void doSomething(){\n    net.foo.X.doSomething();\n    }\n\n    public org.A call(){\n    return new B();\n    }\n}\n</code></pre>\n", "title": "Java Name Hiding: The Hard Way", "tags": ["java", "name-clash", "member-hiding"], "link": "http://stackoverflow.com/questions/24572214/java-name-hiding-the-hard-way/24578283#24578283", "question_id": 24572214, "answer_id": 24578283}, {"body": "<p>There's no need to do any cast or suppress any strange warnings or create any redundant instance. Just a trick using the fact that you can call parent class static methods via the sub-class. (Similar to my hackish solution <a href=\"http://stackoverflow.com/a/19456139/499922\">here</a>.)</p>\n\n<p>Just create a class like this</p>\n\n<pre><code>public final class XX extends X {\n    private XX(){\n    }\n}\n</code></pre>\n\n<p>(The private constructor in this final class makes sure no one can accidentally create an instance of this class.)</p>\n\n<p>Then you're free to call <code>X.doSomething()</code> via it:</p>\n\n<pre><code>    public class B extends A {\n\n        public void doSomething() {\n            XX.doSomething();\n        }\n</code></pre>\n", "title": "Java Name Hiding: The Hard Way", "tags": ["java", "name-clash", "member-hiding"], "link": "http://stackoverflow.com/questions/24572214/java-name-hiding-the-hard-way/24588863#24588863", "question_id": 24572214, "answer_id": 24588863}, {"body": "<p>What if you try getting the gobalnamespace given all the files are in the same folder. (<a href=\"http://www.beanshell.org/javadoc/bsh/class-use/NameSpace.html\" rel=\"nofollow\">http://www.beanshell.org/javadoc/bsh/class-use/NameSpace.html</a>)</p>\n\n<pre><code>    package com.bar;\n      class B extends A {\n\n       public void doSomething(){\n         com.bar.getGlobal().net.foo.X.doSomething(); // drill down from the top...\n\n         }\n     }\n</code></pre>\n", "title": "Java Name Hiding: The Hard Way", "tags": ["java", "name-clash", "member-hiding"], "link": "http://stackoverflow.com/questions/24572214/java-name-hiding-the-hard-way/24627139#24627139", "question_id": 24572214, "answer_id": 24627139}, {"body": "<p>I would use the Strategy pattern.</p>\n\n<pre><code>public interface SomethingStrategy {\n\n   void doSomething();\n}\n\npublic class XSomethingStrategy implements SomethingStrategy {\n\n    import net.foo.X;\n\n    @Override\n    void doSomething(){\n        X.doSomething();\n    }\n}\n\nclass B extends A {\n\n    private final SomethingStrategy strategy;\n\n    public B(final SomethingStrategy strategy){\n       this.strategy = strategy;\n    }\n\n    public void doSomething(){\n\n        strategy.doSomething();\n    }\n}\n</code></pre>\n\n<p>Now you have also decoupled your dependency, so your unit tests will be easier to write.</p>\n", "title": "Java Name Hiding: The Hard Way", "tags": ["java", "name-clash", "member-hiding"], "link": "http://stackoverflow.com/questions/24572214/java-name-hiding-the-hard-way/24756536#24756536", "question_id": 24572214, "answer_id": 24756536}], "creation_date": 1404469510, "score": 96, "link": "http://stackoverflow.com/questions/24572214/java-name-hiding-the-hard-way", "question_id": 24572214}, {"body": "<p>In Java 8, what's the difference between <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#map-java.util.function.Function-\"><code>Stream.map</code></a> and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#flatMap-java.util.function.Function-\"><code>Stream.flatMap</code></a> methods?</p>\n", "tags": ["java", "java-8"], "title": "What&#39;s the difference between map and flatMap methods in Java 8?", "answers": [{"body": "<p><code>Stream.flatMap</code>, as it can be guessed by its name, is the combination of a <code>map</code> and a <code>flat</code> operation. That means that you first apply a function to your elements, and then flatten it. <code>Stream.map</code> only applies a function to the stream without flattening the stream.</p>\n\n<p>To understand what <em>flattening</em> a stream consists in, consider a structure like <code>[ [1,2,3],[4,5,6],[7,8,9] ]</code> which has \"two levels\". Flattening this means transforming it in a \"one level\" structure : <code>[ 1,2,3,4,5,6,7,8,9 ]</code>.</p>\n", "title": "What&#39;s the difference between map and flatMap methods in Java 8?", "tags": ["java", "java-8"], "link": "http://stackoverflow.com/questions/26684562/whats-the-difference-between-map-and-flatmap-methods-in-java-8/26684582#26684582", "question_id": 26684562, "answer_id": 26684582}, {"body": "<p>The function you pass to <code>stream.map</code> has to return one object. That means each object in the input stream results in exactly one object in the output stream.</p>\n\n<p>The function you pass to <code>stream.flatMap</code> returns a stream for each object. That means the function can return any number of objects for each input object (including none). The resulting streams are then concatenated to one output stream.</p>\n", "title": "What&#39;s the difference between map and flatMap methods in Java 8?", "tags": ["java", "java-8"], "link": "http://stackoverflow.com/questions/26684562/whats-the-difference-between-map-and-flatmap-methods-in-java-8/26684611#26684611", "question_id": 26684562, "answer_id": 26684611}, {"body": "<p>Both <code>map</code> and <code>flatMap</code> can be applied to a <code>Stream&lt;T&gt;</code> and they both return a <code>Stream&lt;R&gt;</code>. The difference is that the <code>map</code> operation produces one output value for each input value, whereas the <code>flatMap</code> operation produces an arbitrary number (zero or more) values for each input value.</p>\n\n<p>This is reflected in the arguments to each operation.</p>\n\n<p>The <code>map</code> operation takes a <code>Function</code>, which is called for each value in the input stream and produces one result value, which is sent to the output stream.</p>\n\n<p>The <code>flatMap</code> operation takes a function that conceptually wants to consume one value and produce an arbitrary number of values. However, in Java, it's cumbersome for a method to return an arbitrary number of values, since methods can return only zero or one value. One could imagine an API where the mapper function for <code>flatMap</code> takes a value and returns an array or a <code>List</code> of values, which are then sent to the output. Given that this is the streams library, a particularly apt way to represent an arbitrary number of return values is for the mapper function itself to return a stream! The values from the stream returned by the mapper are drained from the stream and are passed to the output stream. The \"clumps\" of values returned by each call to the mapper function are not distinguished at all in the output stream, thus the output is said to have been \"flattened.\"</p>\n\n<p>Typical use is for the mapper function of <code>flatMap</code> to return <code>Stream.empty()</code> if it wants to send zero values, or something like <code>Stream.of(a, b, c)</code> if it wants to return several values. But of course any stream can be returned.</p>\n", "title": "What&#39;s the difference between map and flatMap methods in Java 8?", "tags": ["java", "java-8"], "link": "http://stackoverflow.com/questions/26684562/whats-the-difference-between-map-and-flatmap-methods-in-java-8/26684710#26684710", "question_id": 26684562, "answer_id": 26684710}, {"body": "<p>I would like to give 2 examples to get a <em>more</em> practical point of view:\n<BR>1st example making usage of map:</p>\n\n<pre><code>@Test\npublic void convertStringToUpperCaseStreams() {\n    List&lt;String&gt; collected = Stream.of(\"a\", \"b\", \"hello\") // Stream of String \n            .map(string -&gt; string.toUpperCase()) // Returns a stream consisting of the results of applying the given function to the elements of this stream.\n            .collect(Collectors.toList());\n    assertEquals(asList(\"A\", \"B\", \"HELLO\"), collected);\n}   \n</code></pre>\n\n<p>Nothing Special into the 1st example, a Function is applied to return the String in uppercase.</p>\n\n<p><BR>2nd example making usage of flatmap:</p>\n\n<pre><code>@Test\npublic void testflatMap() throws Exception {\n    List&lt;Integer&gt; together = Stream.of(asList(1, 2), asList(3, 4)) // Stream of List&lt;Integer&gt;\n            .flatMap(numbers -&gt; numbers.stream())\n            .map(integer -&gt; integer + 1)\n            .collect(Collectors.toList());\n    assertEquals(asList(2, 3, 4, 5), together);\n}\n</code></pre>\n\n<p>In the second example, a Stream of List is passed. <strong>It is NOT a Stream of Integer!</strong>\n<BR><em><strong>If a tranformation Function has to be used (through map), then first the Stream has to be flattened to something else (a Stream of Integer).</strong></em>\n<BR>If flatMap is removed then the following error is returned: <strong>The operator + is undefined for the argument type(s) List, int.</strong>\n<BR>It is NOT possible to apply + 1 on a List of Integers!</p>\n", "title": "What&#39;s the difference between map and flatMap methods in Java 8?", "tags": ["java", "java-8"], "link": "http://stackoverflow.com/questions/26684562/whats-the-difference-between-map-and-flatmap-methods-in-java-8/34332065#34332065", "question_id": 26684562, "answer_id": 34332065}, {"body": "<p><strong><em>Please go through the post fully to get clear idea,</em></strong>\n<strong>map vs flatMap:</strong>\nTo return a length  of each word from a list, we would do something like below..<br>\n<strong>For example:-</strong> <br>Consider a list <strong>[\u201cSTACK\u201d,\u201dOOOVVVER\u201d]</strong> and we are trying to return a list like <strong>[\u201cSTACKOVER\u201d]</strong>(returning only unique letters from that list)\nInitially we would do something like below to return a list  <strong>[\u201cSTACKOVER\u201d]</strong>  from  <strong>[\u201cSTACK\u201d,\u201dOOOVVVER\u201d]</strong></p>\n\n<p><a href=\"http://i.stack.imgur.com/vd1yV.png\"><img src=\"http://i.stack.imgur.com/vd1yV.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here the issue is , Lambda passed to the map method returns a String array for each word, So the stream returned by the map method is actually of type Stream, But what we need is Stream to represent a stream of characters, below image illustrates the problem.<br></p>\n\n<p><strong>Figure A:</strong></p>\n\n<p><a href=\"http://i.stack.imgur.com/0GRsT.png\"><img src=\"http://i.stack.imgur.com/0GRsT.png\" alt=\"enter image description here\"></a></p>\n\n<p>You might think that, We can resolve this problem using flatmap,<br> OK, let us see how to solve this by using <em>map</em> and <em>Arrays.stream</em>\nFirst of all you gonna need a stream of characters instead of a stream of arrays. There is a method called Arrays.stream() that would take an array and produces a stream, for example:\n<a href=\"http://i.stack.imgur.com/TYbGQ.png\"><img src=\"http://i.stack.imgur.com/TYbGQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>The above still does not work, because we now end up with a list of streams (more precisely, Stream>), Instead, we must first convert each word in to an array of individual letters and then make each array into a separate stream</p>\n\n<p><strong>By using flatMap we should be able to fix this problem as below:</strong></p>\n\n<p><a href=\"http://i.stack.imgur.com/BN4Le.png\"><img src=\"http://i.stack.imgur.com/BN4Le.png\" alt=\"enter image description here\"></a></p>\n\n<p>flatMap would perform mapping each array not with stream but with the contents of that stream.All of the individual streams that would get generated while using map(Arrays::stream) get merged in to a single stream. Figure B illustrates the effect of using the flatMap method. Compare it with what map does in figure A.\n<strong>Figure B</strong>\n<a href=\"http://i.stack.imgur.com/yf3vz.png\"><img src=\"http://i.stack.imgur.com/yf3vz.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>The flatMap method lets you replace each value of a stream with another stream and then joins all the generated streams into a single stream.</strong></p>\n", "title": "What&#39;s the difference between map and flatMap methods in Java 8?", "tags": ["java", "java-8"], "link": "http://stackoverflow.com/questions/26684562/whats-the-difference-between-map-and-flatmap-methods-in-java-8/37120688#37120688", "question_id": 26684562, "answer_id": 37120688}], "creation_date": 1414795995, "score": 95, "link": "http://stackoverflow.com/questions/26684562/whats-the-difference-between-map-and-flatmap-methods-in-java-8", "question_id": 26684562}, {"body": "<p>The float data type is a single-precision 32-bit IEEE 754 floating point and The double data type is a double-precision 64-bit IEEE 754 floating point.</p>\n\n<p>What does it mean? And when should I use float instead of double or vice-versa.</p>\n", "tags": ["java", "floating-point", "double"], "title": "Float and double datatype in java", "answers": [{"body": "<p>A float gives you approx. 6-7 decimal digits precision while a double gives you approx. 15-16. Also the range of numbers is larger for double.</p>\n\n<p>A double needs 8 bytes of storage space while a float needs just 4 bytes.</p>\n", "title": "Float and double datatype in java", "tags": ["java", "floating-point", "double"], "link": "http://stackoverflow.com/questions/27598078/float-and-double-datatype-in-java/27598145#27598145", "question_id": 27598078, "answer_id": 27598145}, {"body": "<p>The <a href=\"http://en.wikipedia.org/wiki/IEEE_floating_point\">Wikipedia page</a> on it is a good place to start.</p>\n\n<p>To sum up:</p>\n\n<ul>\n<li><p><code>float</code> is represented in 32 bits, with 1 sign bit, 8 bits of exponent, and 23 bits of the mantissa (or what follows from a scientific-notation number:  2.33728*10<sup>12</sup>; 33728 is the mantissa).</p></li>\n<li><p><code>double</code> is represented in 64 bits, with 1 sign bit, 11 bits of exponent, and 52 bits of mantissa.</p></li>\n</ul>\n\n<p>By default, Java uses <code>double</code> to represent its floating-point numerals (so a literal <code>3.14</code> is typed <code>double</code>).  It's also the data type that will give you a much larger number range, so I would strongly encourage its use over <code>float</code>.</p>\n\n<p>There may be certain libraries that actually force your usage of <code>float</code>, but in general - unless you can guarantee that your result will be small enough to fit in <code>float</code>'s <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Float.html\">prescribed range</a>, then it's best to opt with <code>double</code>.</p>\n\n<p>If you require accuracy - for instance, you can't have a decimal value that is inaccurate (like <code>1/10 + 2/10</code>), or you're doing <strong>anything</strong> with currency (for example, representing $10.33 in the system), then use a <code>BigDecimal</code>, which can support an arbitrary amount of precision and handle situations like that elegantly.</p>\n", "title": "Float and double datatype in java", "tags": ["java", "floating-point", "double"], "link": "http://stackoverflow.com/questions/27598078/float-and-double-datatype-in-java/27598164#27598164", "question_id": 27598078, "answer_id": 27598164}, {"body": "<p>Floating-point numbers, also known as real numbers, are used when evaluating expressions that require fractional precision. For example, calculations such as square root, or transcendentals such as sine and cosine, result in a value whose precision requires a floating-point type. Java implements the standard (IEEE\u2013754) set of floatingpoint types and operators. There are two kinds of floating-point types, float and double, which represent single- and double-precision numbers, respectively. Their width and ranges are shown here: </p>\n\n<p><br/></p>\n\n<pre><code>   Name     Width in Bits   Range \n    double  64              1 .7e\u2013308 to 1.7e+308\n    float   32              3 .4e\u2013038 to 3.4e+038\n</code></pre>\n\n<p><br/>\n <strong>float</strong></p>\n\n<p>The type float specifies a single-precision value that uses 32 bits of storage. Single precision is faster on some processors and takes half as much space as double precision, but will become imprecise when the values are either very large or very small. Variables of type float are useful when you need a fractional component, but don't require a large degree of precision. For example, float can be useful when representing dollars and cents.</p>\n\n<p>Here are some example float variable declarations:</p>\n\n<p>float hightemp, lowtemp; </p>\n\n<p><br/>\n <strong>double</strong></p>\n\n<p>Double precision, as denoted by the double keyword, uses 64 bits to store a value. Double precision is actually faster than single precision on some modern processors that have been optimized for high-speed mathematical calculations. All transcendental math functions, such as sin( ), cos( ), and sqrt( ), return double values. When you need to maintain accuracy over many iterative calculations, or are manipulating large-valued numbers, double is the best choice.</p>\n", "title": "Float and double datatype in java", "tags": ["java", "floating-point", "double"], "link": "http://stackoverflow.com/questions/27598078/float-and-double-datatype-in-java/27598167#27598167", "question_id": 27598078, "answer_id": 27598167}, {"body": "<p>According to the IEEE standards, float is a 32 bit representation of a real number while double is a 64 bit representation. In Java programs normally we mostly see the use of double data type. It's just to avoid overflows as the range of numbers that can be accommodated using the double data type is more that the range when float is used. Also when high precision is required, the use of double is encouraged. Few library methods that were implemented a long time ago still requires the use of float data type as a must (that is only coz. it was implemented using float, nothing else!). </p>\n\n<p>But if you are certain that your program requires small numbers and an overflow wont occur with your use of float, then the use of float will largely improve your space complexity as floats require half the memory as required by double. </p>\n", "title": "Float and double datatype in java", "tags": ["java", "floating-point", "double"], "link": "http://stackoverflow.com/questions/27598078/float-and-double-datatype-in-java/30835595#30835595", "question_id": 27598078, "answer_id": 30835595}, {"body": "<p>Java seems to have a bias towards using double for computations nonetheless: Case in point the program I wrote earlier today, the methods didn't work when I used float but now work great when I substituted float with double(on Net-beans IDE):</p>\n\n<pre><code>package palettedos;\nimport java.util.*;\nclass Palettedos{\n    private static Scanner Z = new Scanner(System.in);\n    public static final double pi = 3.142;\n    public static void main(String[]args){    \n        Palettedos A = new Palettedos();\n        System.out.println(\"Enter the base and height of the triangle respectively\");\n        int base = Z.nextInt();\n        int height = Z.nextInt();\n        System.out.println(\"Enter the radius of the circle\");\n        int radius = Z.nextInt();\n        System.out.println(\"Enter the length of the square\");\n        long length = Z.nextInt();\n        double tArea= A.calculateArea(base,height);\n        double cArea= A.calculateArea(radius);\n        long sqArea= A.calculateArea(length);\n        System.out.println(\"The area of the triangle is\\t\"+tArea);\n        System.out.println(\"The area of the circle is\\t\"+cArea);\n        System.out.println(\"The area of the square is\\t\"+sqArea);\n    }\n    double calculateArea(int base, int height){\n        double triArea=0.5*base*height;\n        return triArea;   \n    }\n    double calculateArea(int radius){\n        double circArea=pi*radius*radius;\n        return circArea;   \n    }\n    long calculateArea(long length){\n        long squaArea=length*length;\n        return squaArea;\n\n    }\n}\n</code></pre>\n", "title": "Float and double datatype in java", "tags": ["java", "floating-point", "double"], "link": "http://stackoverflow.com/questions/27598078/float-and-double-datatype-in-java/35538168#35538168", "question_id": 27598078, "answer_id": 35538168}], "creation_date": 1419232299, "score": 88, "link": "http://stackoverflow.com/questions/27598078/float-and-double-datatype-in-java", "question_id": 27598078}, {"body": "<p>I'm acquainted with the fact that <a href=\"http://stackoverflow.com/questions/14589346/is-c-context-free-or-context-sensitive\">the grammars of C and C++ are context-sensitive</a>, and in particular you need a \"lexer hack\" in C. On the other hand, I'm under the impression that you can parse Java with only 2 tokens of look-ahead, despite considerable similarity between the two languages.</p>\n\n<p><strong>What would you have to change about C to make it more tractable to parse?</strong></p>\n\n<p>I ask because all of the examples I've seen of C's context-sensitivity are technically allowable but awfully weird. For example,</p>\n\n<pre><code>foo (a);\n</code></pre>\n\n<p>could be calling the void function <code>foo</code> with argument <code>a</code>. Or, it could be declaring <code>a</code> to be an object of type <code>foo</code>, but you could just as easily get rid of the parantheses. In part, this weirdness occurs because the \"direct declarator\" production rule for the <a href=\"http://www.cs.man.ac.uk/~pjj/bnf/c_syntax.bnf\">C grammar</a> fulfills the dual purpose of declaring both functions and variables.</p>\n\n<p>On the other hand, the <a href=\"http://cui.unige.ch/isi/bnf/JAVA/BNFindex.html\">Java grammar</a> has separate production rules for variable declaration and function declaration. If you write</p>\n\n<pre><code>foo a;\n</code></pre>\n\n<p>then you know it's a variable declaration and <code>foo</code> can unambiguously be parsed as a typename. This might not be valid code if the class <code>foo</code> hasn't been defined somewhere in the current scope, but that's a job for semantic analysis that can be performed in a later compiler pass.</p>\n\n<p>I've seen it said that C is hard to parse because of typedef, but you can declare your own types in Java too. Which C grammar rules, besides <code>direct_declarator</code>, are at fault?</p>\n", "tags": ["java", "c", "parsing", "grammar"], "title": "What makes Java easier to parse than C?", "answers": [{"body": "<p><strong>Parsing C++ is getting hard.  Parsing Java is getting to be just as hard.</strong></p>\n\n<p>See this <a href=\"http://stackoverflow.com/questions/243383/why-cant-c-be-parsed-with-a-lr1-parser/1004737#1004737\">SO answer discussing why C (and C++) is \"hard\" to parse</a>.  The short summary is that C and C++ <em>grammars</em> are inherently ambiguous; they will give you multiple parses and you <em>must</em> use context to resolve the ambiguities. People then make the mistake of assuming you have to resolve ambiguities as you  parse; not so, see below.  If you insist on resolving ambiguities as you parse, your parser gets more complicated and that much harder to build; but that complexity is a self-inflicted wound.</p>\n\n<p>IIRC,  Java 1.4's \"obvious\" LALR(1) grammar was not ambiguous, so it was \"easy\" to parse.  I'm not so sure that modern Java hasn't got at least long distance local ambiguities; there's always the problem of deciding whether \"...>>\" closes off two templates or is a \"right shift operator\".  I suspect <a href=\"http://stackoverflow.com/a/8379898/120163\">modern Java does not parse with LALR(1) anymore</a>. </p>\n\n<p>But one can get past the parsing problem by using strong parsers (or weak parsers and context collection hacks as C and C++ front ends mostly do now), for both languages.\nC and C++ have the additional complication of having a preprocessor; these are more complicated in practice than they look.  One claim is that the C and C++ parsers are so hard they have to be be written by hand.   <a href=\"http://stackoverflow.com/a/6320330/120163\">It isn't true; you can build Java and C++ parsers just fine with GLR parser generators.</a></p>\n\n<p><strong>But parsing isn't really where the problem is.</strong> </p>\n\n<p>Once you parse, you will want to do something with the AST/parse tree.  In practice, you need to know, for every identifier, what its definition is and where it is used  (\"name and type resolution\", sloppily, building symbol tables).   This turns out to be a LOT more work than getting the parser right, compounded  by inheritance, interfaces, overloading and templates, and the confounded by the fact that the semantics for all this is written in informal natural language spread across tens to hundreds of pages of the language standard.  C++ is really bad here.  Java 7 and 8 are getting to be pretty awful from this point of view. (And symbol tables aren't all you need; see my bio for a longer essay on \"Life After Parsing\").</p>\n\n<p>Most folks struggle with the pure parsing part (often never finishing; check SO itself for the many, many questions about to how to build working parsers for real langauges), so they don't ever see life after parsing.  And then we get folk theorems about what is hard to parse and no signal about what happens after that stage.</p>\n\n<p><strong>Fixing C++ syntax won't get you anywhere.</strong></p>\n\n<p>Regarding changing the C++ syntax: you'll find you need to patch a lot of places to take care of the variety of local and real ambiguities in any C++ grammar.  If you insist, the <a href=\"http://stackoverflow.com/a/14852664/120163\">following list might be a good starting place</a>.   I contend there is no point in doing this if you are not the C++ standards committee; if you did so, and built a compiler using that, nobody sane would use it.   There's too much invested in existing C++ applications to switch for convenience of the guys building parsers; besides, their pain is over and existing parsers work fine.</p>\n\n<p>You may want to write your own parser.  OK, that's fine; just don't expect the rest of the community to let you change the language they must use to make it easier for you.  They all want it easier for them, and that's to use the language as documented and implemented.</p>\n", "title": "What makes Java easier to parse than C?", "tags": ["java", "c", "parsing", "grammar"], "link": "http://stackoverflow.com/questions/26330425/what-makes-java-easier-to-parse-than-c/26330744#26330744", "question_id": 26330425, "answer_id": 26330744}], "creation_date": 1413151133, "score": 87, "link": "http://stackoverflow.com/questions/26330425/what-makes-java-easier-to-parse-than-c", "question_id": 26330425}, {"body": "<p>I work in Intellij IDEA, but my computer freezes so I turn off my computer. (long click power button) When I turned on computer and start IntelliJ IDEA I had this error:</p>\n\n<pre><code>Cannot load settings from file 'C:\\Users\\user\\.IdeaIC13\\config\\options\\code.style.schemes.xml': java.lang.AssertionError: Unexpected content storage modification File content will be recreated\n</code></pre>\n\n<p>I close IDEA and start again, now I don't have the previous error, but when I open my project I have this error:</p>\n\n<pre><code>Error:Internal error: (org.jdom.input.JDOMParseException) Error on line 1: Content is not allowed in prolog.\norg.jdom.input.JDOMParseException: Error on line 1: Content is not allowed in prolog.\n    at org.jdom.input.SAXBuilder.build(SAXBuilder.java:533)\n    at org.jdom.input.SAXBuilder.build(SAXBuilder.java:946)\n    at com.intellij.openapi.util.JDOMUtil.loadDocument(JDOMUtil.java:364)\n    at com.intellij.openapi.util.JDOMUtil.loadDocument(JDOMUtil.java:342)\n    at org.jetbrains.jps.model.serialization.JpsLoaderBase.loadRootElement(JpsLoaderBase.java:69)\n    at org.jetbrains.jps.model.serialization.JpsLoaderBase.loadRootElement(JpsLoaderBase.java:40)\n    at org.jetbrains.jps.model.serialization.JpsLoaderBase.loadComponents(JpsLoaderBase.java:52)\n    at org.jetbrains.jps.model.serialization.JpsProjectLoader.loadFromDirectory(JpsProjectLoader.java:119)\n    at org.jetbrains.jps.model.serialization.JpsProjectLoader.loadProject(JpsProjectLoader.java:98)\n    at org.jetbrains.jps.model.serialization.impl.JpsSerializationManagerImpl.loadModel(JpsSerializationManagerImpl.java:41)\n    at org.jetbrains.jps.cmdline.JpsModelLoaderImpl.loadModel(JpsModelLoaderImpl.java:45)\n    at org.jetbrains.jps.cmdline.BuildRunner.load(BuildRunner.java:71)\n    at org.jetbrains.jps.cmdline.BuildSession.runBuild(BuildSession.java:198)\n    at org.jetbrains.jps.cmdline.BuildSession.run(BuildSession.java:113)\n    at org.jetbrains.jps.cmdline.BuildMain$MyMessageHandler$1.run(BuildMain.java:133)\n    at org.jetbrains.jps.service.impl.SharedThreadPoolImpl$1.run(SharedThreadPoolImpl.java:41)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Content is not allowed in prolog.\n    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:203)\n    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:177)\n    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:441)\n    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:368)\n    at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1436)\n    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:999)\n    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:606)\n    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:117)\n    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:510)\n    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:848)\n    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:777)\n    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)\n    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1213)\n    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:649)\n    at org.jdom.input.SAXBuilder.build(SAXBuilder.java:518)\n    ... 20 more\nCaused by: org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Content is not allowed in prolog.\n    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:203)\n    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:177)\n    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:441)\n    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:368)\n    at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1436)\n    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:999)\n    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:606)\n    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:117)\n    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:510)\n    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:848)\n    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:777)\n    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)\n    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1213)\n    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:649)\n    at org.jdom.input.SAXBuilder.build(SAXBuilder.java:518)\n    at org.jdom.input.SAXBuilder.build(SAXBuilder.java:946)\n    at com.intellij.openapi.util.JDOMUtil.loadDocument(JDOMUtil.java:364)\n    at com.intellij.openapi.util.JDOMUtil.loadDocument(JDOMUtil.java:342)\n    at org.jetbrains.jps.model.serialization.JpsLoaderBase.loadRootElement(JpsLoaderBase.java:69)\n    at org.jetbrains.jps.model.serialization.JpsLoaderBase.loadRootElement(JpsLoaderBase.java:40)\n    at org.jetbrains.jps.model.serialization.JpsLoaderBase.loadComponents(JpsLoaderBase.java:52)\n    at org.jetbrains.jps.model.serialization.JpsProjectLoader.loadFromDirectory(JpsProjectLoader.java:119)\n    at org.jetbrains.jps.model.serialization.JpsProjectLoader.loadProject(JpsProjectLoader.java:98)\n    at org.jetbrains.jps.model.serialization.impl.JpsSerializationManagerImpl.loadModel(JpsSerializationManagerImpl.java:41)\n    at org.jetbrains.jps.cmdline.JpsModelLoaderImpl.loadModel(JpsModelLoaderImpl.java:45)\n    at org.jetbrains.jps.cmdline.BuildRunner.load(BuildRunner.java:71)\n    at org.jetbrains.jps.cmdline.BuildSession.runBuild(BuildSession.java:198)\n    at org.jetbrains.jps.cmdline.BuildSession.run(BuildSession.java:113)\n    at org.jetbrains.jps.cmdline.BuildMain$MyMessageHandler$1.run(BuildMain.java:133)\n    at org.jetbrains.jps.service.impl.SharedThreadPoolImpl$1.run(SharedThreadPoolImpl.java:41)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>How can I fix this problem?</p>\n", "tags": ["java", "android", "intellij-idea"], "title": "Intellij IDEA crashed, and now throws an error", "answers": [{"body": "<p>Try <code>File</code> -> <code>Invalidate Caches / Restart ...</code></p>\n", "title": "Intellij IDEA crashed, and now throws an error", "tags": ["java", "android", "intellij-idea"], "link": "http://stackoverflow.com/questions/25507998/intellij-idea-crashed-and-now-throws-an-error/25508111#25508111", "question_id": 25507998, "answer_id": 25508111}, {"body": "<p>I had the same problem, I removed the .idea directory and *.iml files and created the project again.</p>\n", "title": "Intellij IDEA crashed, and now throws an error", "tags": ["java", "android", "intellij-idea"], "link": "http://stackoverflow.com/questions/25507998/intellij-idea-crashed-and-now-throws-an-error/26211635#26211635", "question_id": 25507998, "answer_id": 26211635}, {"body": "<p>This answer works for both IntelliJ &amp; AndroidStudio</p>\n\n<p>If you cannot even open your project in IntelliJ[AndroidStudio]:</p>\n\n<ul>\n<li>Close IntelliJ[AndroidStudio]</li>\n<li><p>Go to the directory <b>&lt;your_home&gt;/.IntelliJIdeaXX[.AndroidStudioXX]/system/cache</b></p>\n\n<p><strong>WHERE</strong></p>\n\n<ul>\n<li><p><em>&lt;your_home&gt; is</em></p>\n\n<ul>\n<li>Windows Users: <code>C:\\Users\\&lt;**Your User**&gt;\\</code> (or <code>%USERPROFILE%</code>)</li>\n<li>Linux Users(Ubuntu), Mac: <code>~/</code></li>\n</ul></li>\n<li><p>XX is your IntelliJ version  (This directory is \"caches\" in some versions.)</p></li>\n</ul></li>\n<li>Remove all the files in the cache directory.</li>\n<li>Then restart IntelliJ[AndroidStudio]</li>\n</ul>\n\n<p>This has worked for me in the past.</p>\n", "title": "Intellij IDEA crashed, and now throws an error", "tags": ["java", "android", "intellij-idea"], "link": "http://stackoverflow.com/questions/25507998/intellij-idea-crashed-and-now-throws-an-error/26739909#26739909", "question_id": 25507998, "answer_id": 26739909}, {"body": "<p>I had the same problem when Windows crashed while Android Studio was on. I followed the following steps :- <br>\n\n<li> Close Android Studio\n<li> Delete the <code>.idea</code> directory outside the project folder. <strong>Note :</strong> Do not delete the <code>.idea</code> directory inside the project folder. The <code>.idea</code> directory which you have to delete will contain some <code>.iml</code> files.\n<li>Restart Android Studio<br><li><em>tadaaa!!</em></p>\n", "title": "Intellij IDEA crashed, and now throws an error", "tags": ["java", "android", "intellij-idea"], "link": "http://stackoverflow.com/questions/25507998/intellij-idea-crashed-and-now-throws-an-error/27763571#27763571", "question_id": 25507998, "answer_id": 27763571}, {"body": "<p>I've found on several occasions that \"Content is not allowed in prolog\" presented when I had an XML file with leading spaces in front of the xml or doc type declarations at the start of the file. </p>\n\n<p>I had the same symptoms, and was able to solve by closing the project and going through each of the XML files in the project \".idea\" folder. In my case, I found that somehow a few hundred lines of leading whitespace had been added to the \"workspace.xml\" file. I removed the leading whitespace from the file, restarted IDEa and everything worked again.</p>\n", "title": "Intellij IDEA crashed, and now throws an error", "tags": ["java", "android", "intellij-idea"], "link": "http://stackoverflow.com/questions/25507998/intellij-idea-crashed-and-now-throws-an-error/27847553#27847553", "question_id": 25507998, "answer_id": 27847553}, {"body": "<p>If you are using a version control system like github, the easiest way is to erase your project folder, open IntelliJ and clone your repository again. Whatever file is corrupted is going to be gone and it should work fine again. </p>\n", "title": "Intellij IDEA crashed, and now throws an error", "tags": ["java", "android", "intellij-idea"], "link": "http://stackoverflow.com/questions/25507998/intellij-idea-crashed-and-now-throws-an-error/28084167#28084167", "question_id": 25507998, "answer_id": 28084167}, {"body": "<p>my solution</p>\n\n<p>In <code>project/.idea</code> I have broken <code>workspace.xml</code> file. I just close Android Studio (Intellij IDEA), remove this file and start Android Studio. </p>\n\n<p>All other approaches not work for me.</p>\n", "title": "Intellij IDEA crashed, and now throws an error", "tags": ["java", "android", "intellij-idea"], "link": "http://stackoverflow.com/questions/25507998/intellij-idea-crashed-and-now-throws-an-error/28438848#28438848", "question_id": 25507998, "answer_id": 28438848}, {"body": "<ol>\n<li><p>In .idea folder, many XML files are present.</p></li>\n<li><p>This error comes if some XML files are invalid.</p></li>\n<li><p>First check workspace.xml file is valid or not.</p></li>\n<li><p>If workspace.xml file is valid then check other file's.</p></li>\n</ol>\n", "title": "Intellij IDEA crashed, and now throws an error", "tags": ["java", "android", "intellij-idea"], "link": "http://stackoverflow.com/questions/25507998/intellij-idea-crashed-and-now-throws-an-error/30061384#30061384", "question_id": 25507998, "answer_id": 30061384}, {"body": "<p>In my case nothing of these worked.</p>\n\n<p>But the final solution was very easy:</p>\n\n<pre><code> rm -r ~/Library/Preferences/AndroidStudio[X.X]/codestyles/\n</code></pre>\n", "title": "Intellij IDEA crashed, and now throws an error", "tags": ["java", "android", "intellij-idea"], "link": "http://stackoverflow.com/questions/25507998/intellij-idea-crashed-and-now-throws-an-error/34140623#34140623", "question_id": 25507998, "answer_id": 34140623}, {"body": "<p>In my case, the project files under .idea got corrupted.  If you have the project files checked in SVN or saved somewhere just remove all the local changes and revert  to the previous working copy . Also rebuild the cache by File --> Invalidate Cache.</p>\n\n<p>After that it is fixed for me. The \"Error:Internal error: (org.jdom.input.JDOMParseException) \" went away.</p>\n", "title": "Intellij IDEA crashed, and now throws an error", "tags": ["java", "android", "intellij-idea"], "link": "http://stackoverflow.com/questions/25507998/intellij-idea-crashed-and-now-throws-an-error/37795137#37795137", "question_id": 25507998, "answer_id": 37795137}], "creation_date": 1409062404, "score": 84, "link": "http://stackoverflow.com/questions/25507998/intellij-idea-crashed-and-now-throws-an-error", "question_id": 25507998}, {"body": "<p>If I have a <code>List&lt;List&lt;Object&gt;&gt;</code> can I turn it into a <code>List&lt;Object&gt;</code> that contains all the objects using continuous (not breaking the invocation sequence) invocations of lambdas?</p>\n", "tags": ["java", "function", "collections", "lambda", "java-8"], "title": "Turn a List of Lists into a List Using Lambdas", "answers": [{"body": "<p>You can use <code>flatMap</code> to flatten the internal lists (after converting them to Streams) into a single Stream, and then collect the result into a list :</p>\n\n<pre><code>List&lt;List&lt;Object&gt;&gt; list = ...\nList&lt;Object&gt; flat = \n    list.stream()\n        .flatMap(List::stream)\n        .collect(Collectors.toList());\n</code></pre>\n", "title": "Turn a List of Lists into a List Using Lambdas", "tags": ["java", "function", "collections", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/25147094/turn-a-list-of-lists-into-a-list-using-lambdas/25147125#25147125", "question_id": 25147094, "answer_id": 25147125}, {"body": "<p>You can use the <code>flatCollect()</code> pattern from <a href=\"http://www.eclipse.org/collections/\" rel=\"nofollow\">Eclipse Collections</a>.</p>\n\n<pre><code>MutableList&lt;List&lt;Object&gt;&gt; list = Lists.mutable.empty();\nMutableList&lt;Object&gt; flat = list.flatCollect(each -&gt; each);\n</code></pre>\n\n<p>If you can't change list from <code>List</code>:</p>\n\n<pre><code>List&lt;List&lt;Object&gt;&gt; list = new ArrayList&lt;&gt;();\nList&lt;Object&gt; flat = ListAdapter.adapt(list).flatCollect(each -&gt; each);\n</code></pre>\n\n<p>Note: I am a contributor to Eclipse Collections.</p>\n", "title": "Turn a List of Lists into a List Using Lambdas", "tags": ["java", "function", "collections", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/25147094/turn-a-list-of-lists-into-a-list-using-lambdas/36242324#36242324", "question_id": 25147094, "answer_id": 36242324}], "creation_date": 1407268080, "score": 84, "link": "http://stackoverflow.com/questions/25147094/turn-a-list-of-lists-into-a-list-using-lambdas", "question_id": 25147094}, {"body": "<p>Im trying to compile some code in I'm using Intellij Ultimate 13.1.4, but I get the following error and I have no idea what it means:</p>\n\n<pre><code>Information:Using javac 1.7.0_55 to compile java sources\nInformation:java: Errors occurred while compiling module 'Example'\nInformation:Compilation completed with 1 error and 0 warnings in 3 sec\nInformation:1 error\nInformation:0 warnings\nError:java: invalid source release: 8\n</code></pre>\n\n<p>My guess is that its something related to Java 8 vs Java 7, but I have no idea what specifically. I've tried to Google around for this message, but they either talk about <code>javac</code> or <code>target release</code>, so it doesn't exactly seem to apply.</p>\n", "tags": ["java", "intellij-idea", "compilation", "javac", "intellij-13"], "title": "Error:java: invalid source release: 8 in Intellij. What does it mean?", "answers": [{"body": "<p>I had the same issue when \"downgrading\" a project from Java 8 to Java 6. The reason was that it was not changed at all places in IntelliJ.</p>\n\n<p>In IntelliJ 13.1.4 I had to change Java and SDK version on the following places not to get this error:</p>\n\n<ul>\n<li>File -> Project Structure -> Project Settings</li>\n<li>File -> Project\nStructure -> Module Settings -> Tab: Dependencies: Module SDK</li>\n<li>File ->\nProject Structure -> Module Settings -> Tab: Source: Language Level</li>\n<li>File -> Settings -> Compiler -> Java Compiler -> Target bytecode\nversion</li>\n</ul>\n\n<p>The last bullet was the one that was not updated in my case. Once I changed this, the error disappeared.</p>\n", "title": "Error:java: invalid source release: 8 in Intellij. What does it mean?", "tags": ["java", "intellij-idea", "compilation", "javac", "intellij-13"], "link": "http://stackoverflow.com/questions/25878045/errorjava-invalid-source-release-8-in-intellij-what-does-it-mean/26009627#26009627", "question_id": 25878045, "answer_id": 26009627}, {"body": "<p>Check your <code>pom.xml</code> first (if you have one)<br> \nCheck your module's <code>JDK</code> dependancy. Make sure that it is <strong><code>1.8</code></strong><br>\nTo do this,go to <strong>Project Structure -> SDK's</strong><br>\nAdd the path to where you have stored <strong>1.8</strong> (<code>jdk1.8.0_45.jdk</code> in my case)<br>\nApply the changes<br>\nNow, go to Project <strong>Structure ->Modules</strong><br>\nChange the Module SDK to <strong><code>1.8</code></strong><br>\nApply the changes<br></p>\n\n<p>Voila! You're done </p>\n", "title": "Error:java: invalid source release: 8 in Intellij. What does it mean?", "tags": ["java", "intellij-idea", "compilation", "javac", "intellij-13"], "link": "http://stackoverflow.com/questions/25878045/errorjava-invalid-source-release-8-in-intellij-what-does-it-mean/31245931#31245931", "question_id": 25878045, "answer_id": 31245931}, {"body": "<p>If you are using Gradle as a build tool and you get this error when executing a Gradle task i.e TomcatRun take a look to my other answer to the same question</p>\n\n<p><a href=\"http://stackoverflow.com/questions/24766591/javac-invalid-target-release-1-8/32190543#32190543\">javac: invalid target release: 1.8</a></p>\n", "title": "Error:java: invalid source release: 8 in Intellij. What does it mean?", "tags": ["java", "intellij-idea", "compilation", "javac", "intellij-13"], "link": "http://stackoverflow.com/questions/25878045/errorjava-invalid-source-release-8-in-intellij-what-does-it-mean/32191315#32191315", "question_id": 25878045, "answer_id": 32191315}, {"body": "<p>Andreas Lundgren's answer worked and I was able to compile and run my app.  </p>\n\n<p>However, when I tried to run the project's associated JUnit tests I received the same error.  Running </p>\n\n<pre><code>gradle -version\n</code></pre>\n\n<p>from Windows command prompt showed that gradle was still picking up the incorrect jdk.  To fix it I had to set the <code>JAVA_HOME</code> environment variable to point to the correct jdk and restart IntelliJ. </p>\n", "title": "Error:java: invalid source release: 8 in Intellij. What does it mean?", "tags": ["java", "intellij-idea", "compilation", "javac", "intellij-13"], "link": "http://stackoverflow.com/questions/25878045/errorjava-invalid-source-release-8-in-intellij-what-does-it-mean/32273854#32273854", "question_id": 25878045, "answer_id": 32273854}, {"body": "<p>Change in <code>pom.xml</code> <code>1.6</code> to <code>1.8</code></p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;source&gt;1.8&lt;/source&gt;\n        &lt;target&gt;1.8&lt;/target&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n", "title": "Error:java: invalid source release: 8 in Intellij. What does it mean?", "tags": ["java", "intellij-idea", "compilation", "javac", "intellij-13"], "link": "http://stackoverflow.com/questions/25878045/errorjava-invalid-source-release-8-in-intellij-what-does-it-mean/34677051#34677051", "question_id": 25878045, "answer_id": 34677051}, {"body": "<p>For Gradle users having this issues, if nothing above helps this is what solved my problem - apply this declarations in your build.gradle files:</p>\n\n<pre><code>targetCompatibility = 1.6 //or 1.7;1.8 and so on\nsourceCompatibility = 1.6 //or 1.7;1.8 and so on\n</code></pre>\n\n<p>Problem solved!</p>\n", "title": "Error:java: invalid source release: 8 in Intellij. What does it mean?", "tags": ["java", "intellij-idea", "compilation", "javac", "intellij-13"], "link": "http://stackoverflow.com/questions/25878045/errorjava-invalid-source-release-8-in-intellij-what-does-it-mean/36420204#36420204", "question_id": 25878045, "answer_id": 36420204}], "creation_date": 1410900043, "score": 82, "link": "http://stackoverflow.com/questions/25878045/errorjava-invalid-source-release-8-in-intellij-what-does-it-mean", "question_id": 25878045}, {"body": "<p>I'm trying to mess with the new RecyclerView and whenever I try to run it, my app immediately crashes. It gives me NullPointerException for trying to access methods from <code>android.support.v7.widget.RecyclerView</code>. I've looked at other posts and saw that most people didn't have <code>compile 'com.android.support:recyclerview-v7:+'</code> but I tried that and it hasn't helped at all. Not really sure what to do at this point, any help would be appreciated. Here the error log: (I would post a picture but I don't have 10 rep yet)</p>\n\n<pre><code>java.lang.NullPointerException: Attempt to invoke virtual method 'void android.support.v7.widget.RecyclerView$LayoutManager.onMeasure(android.support.v7.widget.RecyclerView$Recycler, android.support.v7.widget.RecyclerView$State, int, int)' on a null object reference\n        at android.support.v7.widget.RecyclerView.onMeasure(RecyclerView.java:1764)\n        at android.view.View.measure(View.java:17430)\n        at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:727)\n        at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:463)\n        at android.view.View.measure(View.java:17430)\n        at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5463)\n        at android.widget.FrameLayout.onMeasure(FrameLayout.java:430)\n        at android.view.View.measure(View.java:17430)\n        at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5463)\n        at android.widget.FrameLayout.onMeasure(FrameLayout.java:430)\n        at android.view.View.measure(View.java:17430)\n        at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5463)\n        at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1436)\n        at android.widget.LinearLayout.measureVertical(LinearLayout.java:722)\n        at android.widget.LinearLayout.onMeasure(LinearLayout.java:613)\n        at android.view.View.measure(View.java:17430)\n        at android.support.v4.widget.DrawerLayout.onMeasure(DrawerLayout.java:851)\n        at android.view.View.measure(View.java:17430)\n        at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5463)\n        at android.widget.FrameLayout.onMeasure(FrameLayout.java:430)\n        at android.view.View.measure(View.java:17430)\n        at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5463)\n        at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1436)\n        at android.widget.LinearLayout.measureVertical(LinearLayout.java:722)\n        at android.widget.LinearLayout.onMeasure(LinearLayout.java:613)\n        at android.view.View.measure(View.java:17430)\n        at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5463)\n        at android.widget.FrameLayout.onMeasure(FrameLayout.java:430)\n        at android.view.View.measure(View.java:17430)\n        at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5463)\n        at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1436)\n        at android.widget.LinearLayout.measureVertical(LinearLayout.java:722)\n        at android.widget.LinearLayout.onMeasure(LinearLayout.java:613)\n        at android.view.View.measure(View.java:17430)\n        at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5463)\n        at android.widget.FrameLayout.onMeasure(FrameLayout.java:430)\n        at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2560)\n        at android.view.View.measure(View.java:17430)\n        at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:2001)\n        at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1166)\n        at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1372)\n        at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1054)\n        at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:5786)\n        at android.view.Choreographer$CallbackRecord.run(Choreographer.java:767)\n        at android.view.Choreographer.doCallbacks(Choreographer.java:580)\n        at android.view.Choreographer.doFrame(Choreographer.java:550)\n        at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:753)\n        at android.os.Handler.handleCallback(Handler.java:739)\n        at android.os.Handler.dispatchMessage(Handler.java:95)\n        at android.os.Looper.loop(Looper.java:135)\n        at android.app.ActivityThread.main(ActivityThread.java:5221)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at java.lang.reflect.Method.invoke(Method.java:372)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:898)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:693)\n</code></pre>\n", "tags": ["java", "android", "android-5.0-lollipop", "recyclerview"], "title": "App crashing when trying to use RecyclerView on android 5.0", "answers": [{"body": "<p>This issue usually occurs when no <a href=\"https://developer.android.com/reference/android/support/v7/widget/RecyclerView.LayoutManager.html\"><code>LayoutManager</code></a> was provided for the <a href=\"https://developer.android.com/reference/android/support/v7/widget/RecyclerView.html\"><code>RecyclerView</code></a>. You can do it like so:  </p>\n\n<pre><code>final LinearLayoutManager layoutManager = new LinearLayoutManager(context);\nlayoutManager.setOrientation(LinearLayoutManager.VERTICAL);\nrecyclerView.setLayoutManager(layoutManager);\n</code></pre>\n", "title": "App crashing when trying to use RecyclerView on android 5.0", "tags": ["java", "android", "android-5.0-lollipop", "recyclerview"], "link": "http://stackoverflow.com/questions/27416834/app-crashing-when-trying-to-use-recyclerview-on-android-5-0/27419093#27419093", "question_id": 27416834, "answer_id": 27419093}, {"body": "<p>In my case it was not connected to 'final', but to the issue mentioned in @NemanjaKova\u010devi\u0107 comment to @aga answer.\nI was setting a layoutManager on data load and that was the cause of the same crash. \nAfter moving the layoutManager setup to onCreateView of my fragment the issue was fixed.</p>\n\n<p>Something like this:</p>\n\n<pre><code>@Override\npublic View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState)\n{\n...\nmRecyclerView = (RecyclerView) rootView.findViewById(R.id.recycler);\n\nmLayoutManager = new StaggeredGridLayoutManager(2,StaggeredGridLayoutManager.VERTICAL);\nmRecyclerView.setLayoutManager(mLayoutManager);\n</code></pre>\n", "title": "App crashing when trying to use RecyclerView on android 5.0", "tags": ["java", "android", "android-5.0-lollipop", "recyclerview"], "link": "http://stackoverflow.com/questions/27416834/app-crashing-when-trying-to-use-recyclerview-on-android-5-0/27749235#27749235", "question_id": 27416834, "answer_id": 27749235}, {"body": "<p>I experienced this crash even though I had the <code>RecyclerView.LayoutManager</code> properly set. I had to move the <code>RecyclerView</code>  initialization code into the <code>onViewCreated(...)</code> callback to fix this issue.</p>\n\n<pre><code>@Override\npublic View onCreateView(LayoutInflater inflater, ViewGroup container,\n                         Bundle savedInstanceState) {\n    View rootView = inflater.inflate(R.layout.fragment_listing, container, false);\n    rootView.setTag(TAG);\n    return inflater.inflate(R.layout.fragment_listing, container, false);\n}\n\n@Override\npublic void onViewCreated(View view, Bundle savedInstanceState) {\n    super.onViewCreated(view, savedInstanceState);\n\n    mLayoutManager = new LinearLayoutManager(getActivity());\n    mLayoutManager.setOrientation(LinearLayoutManager.VERTICAL);\n\n    mRecyclerView = (RecyclerView) view.findViewById(R.id.recyclerView);\n    mRecyclerView.setItemAnimator(new DefaultItemAnimator());\n    mRecyclerView.setLayoutManager(mLayoutManager);\n\n    mAdapter = new ListingAdapter(mListing);\n    mRecyclerView.setAdapter(mAdapter);\n}\n</code></pre>\n", "title": "App crashing when trying to use RecyclerView on android 5.0", "tags": ["java", "android", "android-5.0-lollipop", "recyclerview"], "link": "http://stackoverflow.com/questions/27416834/app-crashing-when-trying-to-use-recyclerview-on-android-5-0/28183156#28183156", "question_id": 27416834, "answer_id": 28183156}, {"body": "<p>Since LinearLayoutManager is vertical by default, an easier way to do this is:</p>\n\n<p><code>recyclerView.setLayoutManager(new LinearLayoutManager(context));</code></p>\n\n<p>If you want to change the orientation you could use this constructor:</p>\n\n<pre><code>public LinearLayoutManager(Context context, int orientation, boolean reverseLayout);\n</code></pre>\n", "title": "App crashing when trying to use RecyclerView on android 5.0", "tags": ["java", "android", "android-5.0-lollipop", "recyclerview"], "link": "http://stackoverflow.com/questions/27416834/app-crashing-when-trying-to-use-recyclerview-on-android-5-0/28708981#28708981", "question_id": 27416834, "answer_id": 28708981}, {"body": "<p>For me, I was having the same issue, the issue was that there was an unused RecyclerView in xml with view gone but I am not binding it to any adapter in Activity, hence the issue. It was solved as soon as I removed such unused recycler views in xml</p>\n\n<p>i.e - I removed this view as this was not called in code or any adapter has been set</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;android.support.v7.widget.RecyclerView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:id=\"@+id/rv_profileview_allactivities\"\n        android:visibility=\"gone\" /&gt;\n</code></pre>\n", "title": "App crashing when trying to use RecyclerView on android 5.0", "tags": ["java", "android", "android-5.0-lollipop", "recyclerview"], "link": "http://stackoverflow.com/questions/27416834/app-crashing-when-trying-to-use-recyclerview-on-android-5-0/30751643#30751643", "question_id": 27416834, "answer_id": 30751643}, {"body": "<p>You need to use <code>setLayoutManager</code> in the <code>RecyclerView#onCreate()</code> method. Before adding <code>recyclerView</code> to a view, it must have the <code>LayoutManager</code> set.</p>\n\n<pre><code> private RecyclerView menuAsList;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_home);\n\n    menuAsList = (RecyclerView) findViewById(R.id.recyclerView_mainMenu);\n    menuAsList.setLayoutManager(new LinearLayoutManager(Home.this));\n\n}\n</code></pre>\n", "title": "App crashing when trying to use RecyclerView on android 5.0", "tags": ["java", "android", "android-5.0-lollipop", "recyclerview"], "link": "http://stackoverflow.com/questions/27416834/app-crashing-when-trying-to-use-recyclerview-on-android-5-0/31829770#31829770", "question_id": 27416834, "answer_id": 31829770}], "creation_date": 1418280073, "score": 79, "link": "http://stackoverflow.com/questions/27416834/app-crashing-when-trying-to-use-recyclerview-on-android-5-0", "question_id": 27416834}, {"body": "<p><a href=\"http://docs.oracle.com/javase/8/docs/api/java/math/BigInteger.html#isProbablePrime-int-\">The method BigInteger.isProbablePrime()</a> is quite strange; from the documentation, this will tell whether a number is prime with a probability of <code>1 - 1 / 2^arg</code>, where <code>arg</code> is the integer argument.</p>\n\n<p>It has been present in the JDK for quite a long time, so it means it must have uses. My limited knowledge in computer science and algorithms (and maths) tells me that it does not really make sense to know whether a number is \"probably\" a prime but not exactly a prime.</p>\n\n<p>So, what is a possible scenario where one would want to use this method? Cryptography?</p>\n", "tags": ["java", "primes"], "title": "What is a possible use case of BigInteger&#39;s .isProbablePrime()?", "answers": [{"body": "<p>A possible use case is in testing primality of a given number (at test which in itself has many uses). The <code>isProbablePrime</code> algorithm will run much faster than an exact algorithm, so if the number fails <code>isProbablePrime</code>, then one need not go to the expense of running the more expensive algorithm.</p>\n", "title": "What is a possible use case of BigInteger&#39;s .isProbablePrime()?", "tags": ["java", "primes"], "link": "http://stackoverflow.com/questions/27430092/what-is-a-possible-use-case-of-bigintegers-isprobableprime/27430172#27430172", "question_id": 27430092, "answer_id": 27430172}, {"body": "<p>Yes, this method can be used in cryptography.  <a href=\"http://en.wikipedia.org/wiki/RSA_(cryptosystem)\">RSA encryption</a> involves the finding of huge prime numbers, sometimes on the order of 1024 bits (about 300 digits).  The security of RSA depends on the fact that factoring a number that consists of 2 of these prime numbers multiplied together is extremely difficult and time consuming.  But for it to work, they must be prime.</p>\n\n<p>It turns out that proving these numbers prime is difficult too.  But the <a href=\"http://en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test\">Miller-Rabin primality test</a>, one of the primality tests uses by <code>isProbablePrime</code>, either detects that a number is composite or gives no conclusion.  Running this test <code>n</code> times allows you to conclude that there is a 1 in 2<sup>n</sup> odds that this number is really composite.  Running it <code>100</code> times yields the acceptable risk of 1 in 2<sup>100</sup> that this number is composite.</p>\n", "title": "What is a possible use case of BigInteger&#39;s .isProbablePrime()?", "tags": ["java", "primes"], "link": "http://stackoverflow.com/questions/27430092/what-is-a-possible-use-case-of-bigintegers-isprobableprime/27430187#27430187", "question_id": 27430092, "answer_id": 27430187}, {"body": "<p><em>Finding</em> probable primes is an important problem in cryptography. It turns out that a reasonable strategy for finding a probable k-bit prime is to repeatedly select a random k-bit number, and test it for probable primality using a method like <code>isProbablePrime()</code>.</p>\n\n<p>For further discussion, see <a href=\"https://books.google.co.uk/books?id=nSzoG72E93MC&amp;pg=PA145&amp;lpg=PA145\">section 4.4.1 of the Handbook of Applied Cryptography</a>.</p>\n\n<p>Also see <a href=\"http://link.springer.com/chapter/10.1007/3-540-48071-4_26\">On generation of probable primes by incremental search</a> by Brandt and Damg\u00e5rd.</p>\n", "title": "What is a possible use case of BigInteger&#39;s .isProbablePrime()?", "tags": ["java", "primes"], "link": "http://stackoverflow.com/questions/27430092/what-is-a-possible-use-case-of-bigintegers-isprobableprime/27430283#27430283", "question_id": 27430092, "answer_id": 27430283}, {"body": "<p>If the test tells you an integer is <em>not prime</em>, you can certainly believe that 100%.</p>\n\n<p>It is only the other side of the question, if the test tells you an integer is \"a probable prime\", that you may entertain doubt.  Repeating the test with varying \"bases\" allows the probability of falsely succeeding at \"imitating\" a prime (being a strong pseudo-prime with respect to multiple bases) to be made as small as desired.</p>\n\n<p>The usefulness of the test lies in its speed and simplicity.  One would not necessarily be satisfied with the status of \"probable prime\" as a final answer, but one would definitely avoid wasting time on almost all composite numbers by <strong>using this routine before bringing in the big guns of primality testing</strong>.</p>\n\n<p>The comparison to the difficulty of factoring integers is something of a red herring.  It is known that the primality of an integer can be determined in polynomial time, and indeed there is a proof that an extension of Miller-Rabin test to sufficiently many bases is definitive (in detecting primes, as opposed to probable primes), but this assumes the Generalized Riemann Hypothesis, so it is not quite so certain as the (more expensive) <a href=\"http://en.wikipedia.org/wiki/AKS_primality_test\">AKS primality test</a>.</p>\n", "title": "What is a possible use case of BigInteger&#39;s .isProbablePrime()?", "tags": ["java", "primes"], "link": "http://stackoverflow.com/questions/27430092/what-is-a-possible-use-case-of-bigintegers-isprobableprime/27432885#27432885", "question_id": 27430092, "answer_id": 27432885}, {"body": "<p>Algorithms such as RSA key generation rely on being able to determine whether a number is prime or not.</p>\n\n<p>However, at the time that the <code>isProbablePrime</code> method was added to the JDK (February 1997), there was no proven way to deterministically decide whether a number was prime in a reasonable amount of time. The best known approach at that time was the <a href=\"http://en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test\">Miller-Rabin algorithm</a> - a probabilistic algorithm that would sometimes give false positives (i.e, would report non-primes as primes), but could be tuned to reduce the likelihood of false positives, at the expense of modest increases in runtime.</p>\n\n<p>Since then, algorithms have been discovered that can deterministically decide whether a number is prime reasonably quickly, such as the <a href=\"http://en.wikipedia.org/wiki/AKS_primality_test\">AKS algorithm</a> that was discovered in August 2002. However, it should be noted that these algorithms are still not as fast as Miller-Rabin.</p>\n\n<p>Perhaps a better question is why no <code>isPrime</code> method has been added to the JDK since 2002.</p>\n", "title": "What is a possible use case of BigInteger&#39;s .isProbablePrime()?", "tags": ["java", "primes"], "link": "http://stackoverflow.com/questions/27430092/what-is-a-possible-use-case-of-bigintegers-isprobableprime/27445642#27445642", "question_id": 27430092, "answer_id": 27445642}, {"body": "<p>The standard use case for <a href=\"http://docs.oracle.com/javase/8/docs/api/java/math/BigInteger.html#isProbablePrime-int-\"><code>BigInteger.isProbablePrime(int)</code></a> is in cryptography.  Specifically, certain cryptographic algorithms, such as <a href=\"//en.wikipedia.org/wiki/RSA_%28cryptosystem%29\">RSA</a>, require randomly chosen large primes.  Importantly, however, these algorithms don't really require these numbers to be <em>guaranteed</em> to be prime &mdash; they just need to be prime with a <em>very</em> high probability.</p>\n\n<p>How high is very high?  Well, in a crypto application, one would typically call <code>.isProbablePrime()</code> with an argument somewhere between 128 and 256.  Thus, the probability of a non-prime number passing such a test is less than one in 2<sup>128</sup> or 2<sup>256</sup>.</p>\n\n<p>Let's put that in perspective: if you had 10 billion computers, each generating 10 billion probable prime numbers per second (which would mean less than one clock cycle per number on any modern CPU), and the primality of those numbers was tested with <code>.isProbablePrime(128)</code>, you would, on average, expect one non-prime number to slip in <strong>once in every 100 billion years</strong>.</p>\n\n<p>That is, that would be the case, if those 10 billion computers could somehow all run for hundreds of billions of years without experiencing <em>any</em> hardware failures.  In practice, though, <strong>it's a lot more likely for a random cosmic ray to strike your computer at just the right time and place to flip the return value</strong> of <code>.isProbablePrime(128)</code> from false to true, without causing any other detectable effects, than it is for a non-prime number to actually pass the probabilistic primality test at that certainty level.</p>\n\n<p>Of course, the same risk of random cosmic rays and other hardware faults also applies to deterministic primality tests like <a href=\"//en.wikipedia.org/wiki/AKS_primality_test\">AKS</a>.  Thus, in practice, even these tests have a (very small) baseline false positive rate due to random hardware failures (not to mention all other possible sources of errors, such as implementation bugs).</p>\n\n<p>Since it's easy to push the intrinsic false positive rate of the <a href=\"//en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test\">Miller&ndash;Rabin primality test</a> used by <code>.isProbablePrime()</code> far below this baseline rate, simply by repeating the test sufficiently many times, and since, even repeated so many times, the Miller&ndash;Rabin test is still much faster in practice than the best known deterministic primality tests like AKS, it remains the standard primality test for cryptographic applications.</p>\n\n<p>(Besides, even if you happened to accidentally select a strong pseudoprime as one of the factors of your RSA modulus, it would not generally lead to a catastrophic failure.  Typically, such pseudoprimes would be products of two (or rarely more) primes of approximately half the length, which means that you'd end up with a <a href=\"http://crypto.stackexchange.com/questions/11287/rsa-with-modulus-product-of-many-primes\">multi-prime RSA key</a>.  As long as none of the factors were <em>too</em> small (and if they were, the primality test should've caught them), the RSA algorithm will still work just fine, and the key, although somewhat weaker against certain types of attacks than normal RSA keys of the same length, should still be reasonably secure if you didn't needlessly skimp on the key length.)</p>\n", "title": "What is a possible use case of BigInteger&#39;s .isProbablePrime()?", "tags": ["java", "primes"], "link": "http://stackoverflow.com/questions/27430092/what-is-a-possible-use-case-of-bigintegers-isprobableprime/27449187#27449187", "question_id": 27430092, "answer_id": 27449187}], "creation_date": 1418323197, "score": 77, "link": "http://stackoverflow.com/questions/27430092/what-is-a-possible-use-case-of-bigintegers-isprobableprime", "question_id": 27430092}, {"body": "<p>I'm having issues trying to boot-up <code>Android Studio</code></p>\n\n<p>When I try to launch it after installation I'm getting this error:</p>\n\n<p><code>No JVM Installation found. Please install a 64 bit JDK.</code></p>\n\n<hr>\n\n<p><strong>My current system specification:</strong>  </p>\n\n<p>Operating System: <code>Windows 8.0 64 bit version</code><br>\nJDK installed: <code>JDK 1.8.0</code>  </p>\n\n<hr>\n\n<p><strong>What I have tried:</strong>  </p>\n\n<p>I have tried what was reported in the error, and also in most of the solutions to set the <code>JDK_HOME</code> variable in environment variables to my JDK path (64 bit version) i.e. <code>C:\\Program Files\\Java\\jdk1.8.0_05</code>  </p>\n\n<p><em><code>*I also have tried rebooting system, just in case to test if the environment variable is not working without a restart</code></em></p>\n\n<hr>\n\n<p>I have seen these solutions and tried but none of them works, so don't mark it as a duplicate of any of these:<br>\n<a href=\"http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found\">Android Studio installation on Windows 7 fails, no JDK found</a><br>\n<a href=\"http://stackoverflow.com/questions/20033231/with-android-studio-no-jvm-found-java-home-has-been-set\">With android studio no jvm found, JAVA_HOME has been set</a><br>\n<a href=\"http://stackoverflow.com/questions/16596520/android-studio-start-fails-on-windows-8-64bit\">Android Studio start fails on Windows 8 64bit</a><br>\n<a href=\"http://stackoverflow.com/questions/16574544/android-studio-does-not-launch-after-installation\">Android Studio does not launch after installation</a></p>\n\n<hr>\n\n<p>Here is the cmd output for java version:</p>\n\n<p><img src=\"http://i.stack.imgur.com/peGJ9.jpg\" alt=\"enter image description here\"></p>\n", "tags": ["java", "android", "jvm", "android-studio"], "title": "Android Studio - No JVM Installation found", "answers": [{"body": "<p>According to Oracle's <a href=\"http://www.oracle.com/technetwork/java/javase/documentation/install-windows-142126.html\" rel=\"nofollow\">installation notes</a>, you should download/install <a href=\"http://download.oracle.com/otn-pub/java/jdk/8u11-b12/jdk-8u11-windows-x64.exe\" rel=\"nofollow\">JDK for the correct system</a>. For your convenience, I have linked to it from the sentence above. If you still encounter problems, leave a comment. I have written some quick code that will tell you if <a href=\"http://stackoverflow.com/questions/2062020/how-can-i-tell-if-im-running-in-64-bit-jvm-or-32-bit-jvm-from-within-a-program\">your JVM is 64 or 32-bit</a>, below. I'd suggest you run this class and leave a comment as to its output:</p>\n\n<pre><code>public class CheckMemoryMode {\n    public static void main(String[] args) {\n        System.err.println(System.getProperty(\"sun.arch.data.model\"));\n    }\n}\n</code></pre>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/24966609#24966609", "question_id": 24898684, "answer_id": 24966609}, {"body": "<p>Uninstall Java 8 and clean your JDK_HOME and your JAVA_HOME enviromental paths. Then install 64bit JAVA 6 or 7 JDK of your preference.</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/25007422#25007422", "question_id": 24898684, "answer_id": 25007422}, {"body": "<p>I reproduced your issue on my <strong>Windows 8.1</strong> system :</p>\n\n<ol>\n<li>Installed <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\">64-bit JDK 1.8.0_11</a>.</li>\n<li>Installed latest Android Studio Bundle.</li>\n<li>Went to <strong>Control Panel -> System -> Advanced system settings -> Environment Variables...</strong></li>\n<li>Added <strong>JDK_HOME</strong> pointing to my 64-bit JDK.</li>\n<li>Launched <strong>studio64.exe</strong></li>\n</ol>\n\n<p>I got the same message you did. Thinking that it might be the environment variable, I did the following :</p>\n\n<ol>\n<li>Went to <strong>Control Panel -> System -> Advanced system settings -> Environment Variables...</strong></li>\n<li>Changed the name of <strong>JDK_HOME</strong> to <strong>JAVA_HOME</strong>.</li>\n<li>Launched <strong>studio64.exe</strong></li>\n</ol>\n\n<p>It came up successfully !</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/25027037#25027037", "question_id": 24898684, "answer_id": 25027037}, {"body": "<p>I had the same problem. I tried setting all kind of paths but nothing worked. So I had to do some dirty fix. The only problem with this is that it opens a blank command line window.</p>\n\n<p>I did the following to make it work.</p>\n\n<ul>\n<li>goto the AndroidStudio installation folder.</li>\n<li>goto <code>bin</code> folder and open <code>studio.bat</code> in text editor</li>\n<li>add <code>set JAVA_HOME=C:\\Program Files\\Java2\\jdk1.8.0</code>//your java path after the ECHO line.</li>\n<li>goto <code>Start</code> -> <code>All Programmes</code> -> <code>Android Studio</code> -> </li>\n<li>right click on <code>Android Studio</code> and click on <code>properties</code>.</li>\n<li>You will see the <code>Target</code> something like <code>&lt;installation path&gt;android-studio\\bin\\studio64.exe</code></li>\n<li>change it to <code>&lt;installation path&gt;android-studio\\bin\\studio.bat</code></li>\n</ul>\n\n<p>Now you can access it by clicking it from the menu.</p>\n\n<p><strong>Note :</strong> I tried it with 8, It works.</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/25054118#25054118", "question_id": 24898684, "answer_id": 25054118}, {"body": "<p>I think Android does not support Java 8. Officially android need java 6 as mentioned at the below: </p>\n\n<p><a href=\"https://developer.android.com/sdk/installing/installing-adt.html\" rel=\"nofollow\">https://developer.android.com/sdk/installing/installing-adt.html</a></p>\n\n<p>Here I'm providing you a good link, hope those will clear this question :</p>\n\n<p><a href=\"http://stackoverflow.com/questions/23318109/is-it-possible-to-use-java-8-for-android-development\">Is it possible to use Java 8 for Android development?</a></p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/25072904#25072904", "question_id": 24898684, "answer_id": 25072904}, {"body": "<p>1-Right click on Android Studio and click on properties.</p>\n\n<p>2-Replace studio64.exe in link by studio.exe.</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/25386926#25386926", "question_id": 24898684, "answer_id": 25386926}, {"body": "<p>In my case</p>\n\n<p>In <code>Control Panel -&gt; System -&gt; Advanced system settings -&gt; Environment Variables</code> there is no <code>JDK_HOME</code> OR <code>JAVA_HOME</code></p>\n\n<p>SO</p>\n\n<p><strong>I added</strong> an entry named: <strong>JDK_HOME</strong>   pointing to: <strong>C:\\Program Files\\Java\\jdk1.8.0_25\\</strong> (you have to point this to your JDK instalation path)</p>\n\n<p>And all seems to work fine now</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/26472377#26472377", "question_id": 24898684, "answer_id": 26472377}, {"body": "<p>Android Studio Works Perfectly fine with <code>Java 1.8</code> or <code>Java 8</code>. I was also having invalid JVM error. The reason was including \";\" (semicolon) at the end of <code>JAVA_HOME</code> path value. The correct format for path value is:</p>\n\n<blockquote>\n  <p>C:\\Program Files\\Java\\jdk1.8.0_xx  (Replace xx with your current version)</p>\n</blockquote>\n\n<p>Do not include <code>;</code> (semicolon) at the end of <code>JAVA_HOME</code> value</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/26559477#26559477", "question_id": 24898684, "answer_id": 26559477}, {"body": "<p>Here comes the solution. </p>\n\n<p>Just start ANDROID STUDIO as <strong>administrator</strong> if you are using a non administrator windows profile!</p>\n\n<p>If your environment variables are correct that will do the trick. Enjoy!</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/26790440#26790440", "question_id": 24898684, "answer_id": 26790440}, {"body": "<ul>\n<li>For me this turns out to be Environment Variables not being inherited.</li>\n<li>Quick answer: reboot, than click on studio.bat, not studio.exe or studio64.exe</li>\n</ul>\n\n<p>================ Details =================</p>\n\n<ul>\n<li><p>\"Right Click\"-\"Run as Administrator\" works for me <strong>if</strong>:\n**  JDK_HOME or JAVA_HOME was set. (PATH didn't need to be changed for me)\n** I run studio.bat, not studio.exe\n** Note: By Default I am an administrator on a Microsoft Account (That Microsoft part may be affecting things), and I seldom reboot. I'm running Win8.1 64bit. I installed both JDKv1.8.0.0_25 32bit and 64 bit, and had JRE 32bit and 64 bit already installed (used by other software). </p></li>\n<li><p>I found there was a difference in clicking on studio.bat, studio.exe, and running studio.bat from a command prompt. There is also a difference if I rebooted or not.</p></li>\n<li><p>The difference: The System Environment Variables aren't all there depending on how I start the program.</p></li>\n<li><p>To test:</p></li>\n<li><p>In start menu drag a copy of \"command prompt\" to your desktop, then change properties so \"Start In\" is location of studio.bat</p></li>\n<li>copy studio.bat to studio_debug.bat (one we can mess with)</li>\n<li>drag a shortcut of studio_debug.bat to desktop for convenience.</li>\n<li>edit studio_debug.bat (right click --> edit) </li>\n</ul>\n\n<p>== Change:</p>\n\n<pre><code>@echo off\n</code></pre>\n\n<p>== to </p>\n\n<pre><code>@echo on         \necho Set===================\nset\necho ======================\npause\n</code></pre>\n\n<ul>\n<li>This may also help in debugging studio.bat:</li>\n</ul>\n\n<p>== change:</p>\n\n<pre><code>\"%JAVA_EXE%\" %ALL_JVM_ARGS% -cp \"%CLASS_PATH%\" %MAIN_CLASS_NAME% %*\n</code></pre>\n\n<p>== to</p>\n\n<pre><code>echo =================\necho Starting: \"%JAVA_EXE%\" %ALL_JVM_ARGS% -cp \"%CLASS_PATH%\" %MAIN_CLASS_NAME% %*\npause\n\"%JAVA_EXE%\" %ALL_JVM_ARGS% -cp \"%CLASS_PATH%\" %MAIN_CLASS_NAME% %*\necho =================\n</code></pre>\n\n<ul>\n<li><p>Now when you run studio.bat from command prompt versus double clicking you may see difference in environment variables including JAVA_HOME and PATH. If you do you have same problem as me. </p></li>\n<li><p>The problem seems to depend on: </p>\n\n<ol>\n<li>did you reboot since changing environment variables?</li>\n<li>didn't seem to matter if I was local or microsoft account</li>\n<li>may depend whether you are an administrator or other account type</li>\n<li>whether you start using studio.bat, studio.exe, or studio64.exe</li>\n</ol></li>\n<li><p>.</p></li>\n<li><p>FYI: The actual successful startup command executed by studio.bat on my system was as follows (includes studio64.exe):</p>\n\n<p>\"C:\\Program Files\\Java\\jdk1.8.0_25\\bin\\java.exe\" \"-Xms128m\" \"-Xmx750m\" \"-XX:MaxPermSize=350m\" \"-XX:ReservedCodeCacheSize=96m\" \"-ea\" \"-Dsun.io.useCanonCaches=false\" \"-Djava.net.preferIPv4Stack=true\" \"-Djsse.enableSNIExtension=false\" \"-XX:+UseCodeCacheFlushing\" \"-XX:+UseConcMarkSweepGC\" \"-XX:SoftRefLRUPolicyMSPerMB=50\" \"-XX:+HeapDumpOnOutOfMemoryError\" \"-Didea.platform.prefix=AndroidStudio\" \"-Didea.paths.selector=AndroidStudioBeta\" -Djb.vmOptionsFile=\"C:\\android-studio\\bin\\studio64.exe.vmoptions\" \"-Xbootclasspath/a:C:\\android-studio\\bin\\../lib/boot.jar\" -Didea.paths.selector=AndroidStudioBeta  -Didea.platform.prefix=AndroidStudio  -cp \"C:\\android-studio\\bin\\..\\lib\\bootstrap.jar;C:\\android-studio\\bin\\..\\lib\\extensions.jar;C:\\android-studio\\bin\\..\\lib\\util.jar;C:\\android-studio\\bin\\..\\lib\\jdom.jar;C:\\android-studio\\bin\\..\\lib\\log4j.jar;C:\\android-studio\\bin\\..\\lib\\trove4j.jar;C:\\android-studio\\bin\\..\\lib\\jna.jar;C:\\Program Files\\Java\\jdk1.8.0_25\\lib\\tools.jar\" com.intellij.idea.Main</p></li>\n<li><p>Hope that helps someone else.</p></li>\n</ul>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/27090318#27090318", "question_id": 24898684, "answer_id": 27090318}, {"body": "<p>For crying out loud this is so VERY EASY TO Fix!!</p>\n\n<ol>\n<li><p>Go to : \"Control Panel\\All Control Panel Items\\System\" once there click on \"Advanced system settings\" on the left hand side</p></li>\n<li><p>The window that pops shows a box that says says <code>Environment Variables</code>! Click it.</p></li>\n<li><p>Click \"add new\" to add new variable.</p></li>\n<li><p>Type <code>JAVA_HOME</code> in the first box and in the second box the address to, IE / in my case <code>C:\\Program Files\\Java\\jdk1.8.0_25</code> save it. exit everything. THATS IT!! </p></li>\n</ol>\n\n<p>Enjoy Android Studio! \nObviously for the above to work you have to install java first or how else can you use it or point to it on your pc and all that. The above instructions are amazingly mislead and complicated. For the record I am on widows 8.1, YES it works on latest windows and is ridiculously simple to fix.</p>\n\n<p>-OSG</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/27241404#27241404", "question_id": 24898684, "answer_id": 27241404}, {"body": "<p>Make sure you set the path in the <code>SYSTEM VARIABLES</code> not in the <code>USER VARIABLES</code> also.....name the variable name as <code>JAVA_HOME</code> and the address as <code>C:\\Program Files\\Java\\jdk1.8.0_25\\</code>    be sure that you didn't place any semicolon. </p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/27526867#27526867", "question_id": 24898684, "answer_id": 27526867}, {"body": "<p>Just make sure that the installed version of both, Android Studio and JDK, are of either 32-bit or 64-bit. If JDK is of 32-bit and Android Studio of 64-bit or vice-verse, then it won't work though you set up JAVA_HOME.</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/27576779#27576779", "question_id": 24898684, "answer_id": 27576779}, {"body": "<p>You must just install jdk1.8.0 and then right click on my computer icon and then select properties,then in left panel, select advanced system settings, then in dialog bog select Environment Variables, then in that's dialog box,in section user variables create new variable that's name must be <code>JAVA_HOME</code> and path is <code>C:\\Program Files\\Java\\jdk1.8.0</code>(in my pc) then sytem variable section, select <code>PATH</code> variable and append it's end this path <code>C:\\Program Files\\Java\\jdk1.8.0\\bin</code> and then select ok for all dialog box and after this steps run Android studio. And for test, run cmd in windows and run this command <code>java -version</code> if returned a java version and ... it is installed correctly.  </p>\n\n<p>Note: I get answer in windows 8.1 64 bit.</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/27602108#27602108", "question_id": 24898684, "answer_id": 27602108}, {"body": "<p>This is tested on my Windows 7 64Bit machine.</p>\n\n<p>Quite strange... I had the same issue - WHILE IntelliJ Idea (including the Android Plug-in) was working perfectly. </p>\n\n<p>However, here is what I did to get Android Studio 1.0 working (no step missing -> maybe it will help programming beginners).</p>\n\n<p>Just set up a <strong>new</strong> environment variable by...</p>\n\n<ol>\n<li>pressing Windows-Key and typing <strong><em>env</em></strong>... you'll see \"Edit the system environment variables\". Click! </li>\n<li>Now click \"Environment Variables...\"</li>\n<li>Under <strong>System variables</strong> (NOT \"User variables\") add a new entry named <code>JAVA_HOME</code> and set the value to your Java folder (like <code>C:\\Program Files\\Java\\jdk1.8.0_25</code>)</li>\n<li>apply and you are good to go. </li>\n</ol>\n\n<p>PS: I don't know why some people writing about nuclear science when they want to explain how to set the Java path..</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/27675089#27675089", "question_id": 24898684, "answer_id": 27675089}, {"body": "<p>My JAVA_HOME was pointing to c:/jre directly so I changed it to C:/java/jre because it was confused to pick up which one to use, so I changed it to the specific one and it works for me. Note: It is better to have only one JRE install on your machine</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/27846328#27846328", "question_id": 24898684, "answer_id": 27846328}, {"body": "<p>1 .Download 64 bit version of JDK from <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\">here</a></p>\n\n<p><img src=\"http://i.stack.imgur.com/d6atp.jpg\" alt=\"enter image description here\"></p>\n\n<ol start=\"2\">\n<li><p>As shown in next picture, go to <code>Control Panel</code> -> <code>System and Security</code> -> <code>Advanced system settings</code> -> <code>Environment Variables</code> -> <code>New</code> (System variables)</p></li>\n<li><p>Then add variable name: JAVA_HOME and variable value: C:\\Program Files\\Java\\jdk1.8.0_25 </p></li>\n</ol>\n\n<p>Please note that <code>jdk1.8.0_25</code> may be vary depending on JDK version. \n<img src=\"http://i.stack.imgur.com/fhIhz.jpg\" alt=\"enter image description here\"></p>\n\n<ol start=\"4\">\n<li>Click OK button on the rest of the windows left.</li>\n</ol>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/27914068#27914068", "question_id": 24898684, "answer_id": 27914068}, {"body": "<p>Ok, was having this issue as well and this is what fixed it for me. For the record I'm using Windows 8.1 and Java JDK 1.8.31, all 64-bit.</p>\n\n<p>The problem is with the space between \"Program\" and \"Files\" in the path set in <code>JAVA_HOME</code>. I've had this problem before but didn't really realize until I was checking the instructions <a href=\"https://confluence.atlassian.com/display/DOC/Setting+the+JAVA_HOME+Variable+in+Windows\">here</a> for setting <code>JAVA HOME</code>, then it all made sense.</p>\n\n<p>In a nutshell, change the <code>JAVA_HOME</code> path from:</p>\n\n<p><code>C:\\Program Files\\Java\\jdk1.8.0_31</code></p>\n\n<p>to</p>\n\n<p><code>C:\\Progra~1\\Java\\jdk1.8.0_31</code></p>\n\n<p>Make sure to set the correct JDK version number for your installation. Removing the space from the path fixed everything on my system.</p>\n\n<p>As noted on the page linked above,</p>\n\n<p>use <code>C:\\Progra~1\\</code> for <code>C:\\Program Files\\</code></p>\n\n<p>and <code>C:\\Progra~2\\</code> for <code>C:\\Program Files(x86)\\</code></p>\n\n<p>depending on where you have the JDK installed on your system.</p>\n\n<p>Note: Just to be clear, before making this change my system correctly echoed the value of <code>JAVA_HOME</code> to be <code>C:\\Program Files\\Java\\jdk1.8.0_31</code> in the command window, leading me to believe all was well. However, attempting to run <code>%JAVA_HOME%\\bin\\javac</code> reported that the path could not be found. After removing the space from the <code>JAVA_HOME</code> path the same command runs perfectly.</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/28076192#28076192", "question_id": 24898684, "answer_id": 28076192}, {"body": "<p>The solution is given in the error itself, Goto My computer(Right click)-->properties-->Advanced system settings-->Environment variables-->Create new variable.</p>\n\n<p>Give the following details to it:</p>\n\n<p>Variable name : JAVA_HOME.</p>\n\n<p>Variable value : (your path to java jdk installation folder).</p>\n\n<p>To find the path for java installation, go to program files in your window installation drive (normally C drive). Find folder named JAVA, in that navigate to JDK folder.</p>\n\n<p>Copy the link address from the top, and paste it in the Variable value .</p>\n\n<p>Now Press Ok and once environment variable gets created restart the android studio.</p>\n\n<p>Hope it helps.</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/28391391#28391391", "question_id": 24898684, "answer_id": 28391391}, {"body": "<p>Minor issue to check - I had to remove the quotation marks from around the path variable. This was probably simply me making a copy/paste error but I had \"C:\\Program Files\\Java\\jdk1.8.0_45\" when it should have been C:\\Program Files\\Java\\jdk1.8.0_45</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/30771068#30771068", "question_id": 24898684, "answer_id": 30771068}, {"body": "<p>My fix was to <strong>remove</strong> the double quotes that I had enclosed the JAVA_HOME path in.</p>\n\n<p>Instead of declaring JAVA_HOME as \"C\\Program Files...\"</p>\n\n<p>I removed the \" and declared JAVA_HOME as C\\Program Files...</p>\n\n<p>I am on Win 7, x64</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/30988392#30988392", "question_id": 24898684, "answer_id": 30988392}, {"body": "<p>I also faced the same issue. The solution which helped me was I downloaded and installed 64 bit JDK from this <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html\" rel=\"nofollow\">link</a> and set the \"<strong>java_home</strong>\" variable to the new JDK installed path like C:\\Program Files\\Java\\jdk1.7.0_45. Hope this helps.</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/31157815#31157815", "question_id": 24898684, "answer_id": 31157815}, {"body": "<p>if your \"enviornment variables\" set well, than try to update\n <strong>Start > All Programs > Android Studio > Android Studio</strong></p>\n\n<p>do right click, click <strong>Properties</strong> and set <strong>android studio sdk</strong> path</p>\n\n<p>in </p>\n\n<p><strong>shortcut > Target</strong></p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/32537511#32537511", "question_id": 24898684, "answer_id": 32537511}, {"body": "<p>If you are using <strong>windows 7</strong>, make sure you install jdk-xxxx-windows-x64.exe.\n<a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\" rel=\"nofollow\">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a>\nI had previously installed 32 bit instead of 64 bit version hence it was installed in program files x(86) folder. But if you install 64 bit sdk setup, its installed in program files folder.\nThen set the JAVA_HOME='C:\\Program Files\\Java\\jdk1.8.0_65'\nIt should work fine.</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/34647693#34647693", "question_id": 24898684, "answer_id": 34647693}, {"body": "<p>My variables pointed to other system variables so JDK_HOME was</p>\n\n<p><code>%programfiles%\\Java\\jdk1.8.0_45</code></p>\n\n<p>and i had to explicitly change it to</p>\n\n<p><code>C:\\Program Files\\Java\\jdk1.8.0_45</code></p>\n\n<p>Similar for JAVA_HOME</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/36911509#36911509", "question_id": 24898684, "answer_id": 36911509}, {"body": "<p><strong>Control Panel -> System -> Advanced system settings -> Environment Variables</strong></p>\n\n<p>I changed <strong>JAVA_HOME</strong> to <strong>JAVA</strong> and again changed <strong>JAVA</strong> to <strong>JAVA_HOME</strong>.</p>\n\n<p>and Its working fine.</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/37495307#37495307", "question_id": 24898684, "answer_id": 37495307}, {"body": "<p>Had the same problem after upgrading my machine from 7 to 10 had to reinstall the JDK all overgain and took me only a few seconds.\nHere are the steps I followed.</p>\n\n<p>Go to this link\n<a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\" rel=\"nofollow\">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></p>\n\n<p>Agree to oracle contact agreement.Then pick your windows version in my case is 64 bit after that its ..Next..Next,,once compete you can relaunch your Android studio without any problem. Hope this helps</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/37847245#37847245", "question_id": 24898684, "answer_id": 37847245}, {"body": "<p>sudo apt-get install oracle-java8-installer</p>\n", "title": "Android Studio - No JVM Installation found", "tags": ["java", "android", "jvm", "android-studio"], "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found/38601239#38601239", "question_id": 24898684, "answer_id": 38601239}], "creation_date": 1406066777, "score": 76, "link": "http://stackoverflow.com/questions/24898684/android-studio-no-jvm-installation-found", "question_id": 24898684}, {"body": "<p>I tried to import a project(projLib) as dependency for another project(projAPK).</p>\n\n<p>projAPK gradle has this :</p>\n\n<pre><code>dependencies {\n    compile project(':libs:NewsAPI')\n    compile project(':projLib')\n}\n</code></pre>\n\n<p>but when i sync the gradle it gives this error:</p>\n\n<blockquote>\n  <p>Error:Dependency Android_2015:projLib:unspecified on project projAPK resolves to an APK archive which is not supported as a compilation dependency. File: /Users/myname/Documents/Development/Android_2015/libs/projAPK/build/outputs/apk/projLib-release-unsigned.apk</p>\n</blockquote>\n\n<p>so I guess there are two solution to this:</p>\n\n<ol>\n<li>somehow make gradle think that projLib is a library that shouldn't be compiled to apk</li>\n<li>somehow make gradle NOT compile the projLib explicitly</li>\n</ol>\n\n<p>The problem is, I couldn't find how to do any of that.\nWould be awesome if you guys can help :)</p>\n", "tags": ["java", "android", "gradle", "android-studio", "build.gradle"], "title": "How to import android project as library and NOT compile it as apk (Android studio 1.0)", "answers": [{"body": "<p>In <strong>projLib</strong>'s build.gradle file, you'll see a statement like this:</p>\n\n<pre><code>apply plugin: 'com.android.application'\n</code></pre>\n\n<p>which tells Gradle to build it as an application, generating an APK.  If you change it to this:</p>\n\n<pre><code>apply plugin: 'com.android.library'\n</code></pre>\n\n<p>it will build as a library, generating an AAR, and it should work.</p>\n\n<p>If you also need <strong>projLib</strong> to generate a separate APK, then you'll have to do some refactoring to pull the common code that you need out into a third library module, and have both APKs depend on it.</p>\n\n<p>Libraries aren't allowed to set an <code>applicationId</code>, so if you see an error message to that effect, remove it from the library's build script.</p>\n", "title": "How to import android project as library and NOT compile it as apk (Android studio 1.0)", "tags": ["java", "android", "gradle", "android-studio", "build.gradle"], "link": "http://stackoverflow.com/questions/27536491/how-to-import-android-project-as-library-and-not-compile-it-as-apk-android-stud/27536527#27536527", "question_id": 27536491, "answer_id": 27536527}, {"body": "<p><strong>In  module gradle file</strong>-</p>\n\n<p><strong>Replace</strong>  <code>apply plugin: 'com.android.application'</code> with <code>apply plugin: 'com.android.library'</code></p>\n\n<p>Then <strong>remove</strong> <code>applicationId \"xxx.xxx.xxxx\"</code></p>\n\n<p><strong>Clean and Build</strong> </p>\n", "title": "How to import android project as library and NOT compile it as apk (Android studio 1.0)", "tags": ["java", "android", "gradle", "android-studio", "build.gradle"], "link": "http://stackoverflow.com/questions/27536491/how-to-import-android-project-as-library-and-not-compile-it-as-apk-android-stud/34736897#34736897", "question_id": 27536491, "answer_id": 34736897}, {"body": "<p>just add these lines to library <code>gradle</code> file and remove other sections</p>\n\n<pre><code>apply plugin: 'com.android.library'\n\nandroid {\n   compileSdkVersion 23\n   buildToolsVersion '23.0.2'\n}\n\ndependencies {\n   compile fileTree(dir: 'libs', include: ['*.jar'])\n   compile 'com.squareup.picasso:picasso:2.4.0'\n   compile 'com.google.code.gson:gson:2.2.4'\n   compile 'com.android.support:appcompat-v7:23.1.1'\n   compile 'com.android.support:gridlayout-v7:23.1.1'\n  ,...\n}\n</code></pre>\n", "title": "How to import android project as library and NOT compile it as apk (Android studio 1.0)", "tags": ["java", "android", "gradle", "android-studio", "build.gradle"], "link": "http://stackoverflow.com/questions/27536491/how-to-import-android-project-as-library-and-not-compile-it-as-apk-android-stud/36399437#36399437", "question_id": 27536491, "answer_id": 36399437}], "creation_date": 1418857552, "score": 73, "link": "http://stackoverflow.com/questions/27536491/how-to-import-android-project-as-library-and-not-compile-it-as-apk-android-stud", "question_id": 27536491}, {"body": "<p>From page 291 of OCP Java SE 6 Programmer Practice Exams, question 25:</p>\n\n<pre><code>public class Stone implements Runnable {\n    static int id = 1;\n\n    public void run() {\n        id = 1 - id;\n        if (id == 0) \n            pick(); \n        else \n            release();\n    }\n\n    private static synchronized void pick() {\n        System.out.print(\"P \");\n        System.out.print(\"Q \");\n    }\n\n    private synchronized void release() {\n        System.out.print(\"R \");\n        System.out.print(\"S \");\n    }\n\n    public static void main(String[] args) {\n        Stone st = new Stone();\n        new Thread(st).start();\n        new Thread(st).start();\n    }\n}\n</code></pre>\n\n<p>One of the answers is:</p>\n\n<blockquote>\n  <p>The output could be <code>P Q P Q</code></p>\n</blockquote>\n\n<p>I marked this answer as correct. My reasoning:</p>\n\n<ol>\n<li>We are starting two threads. </li>\n<li>First one enters <code>run()</code>.</li>\n<li>According to <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.26.1\">JLS 15.26.1</a>, it firstly evaluates <code>1 - id</code>. Result is <code>0</code>. It is stored on the thread's stack. We are just about to save that <code>0</code> to static <code>id</code>, but...</li>\n<li>Boom, scheduler chooses the second thread to run.</li>\n<li>So, the second thread enters <code>run()</code>. Static <code>id</code> is still <code>1</code>, so he executes method <code>pick()</code>. <code>P Q</code> is printed.</li>\n<li>Scheduler chooses first thread to run. It takes <code>0</code> from its stack and saves to static <code>id</code>. So, the first thread also executes <code>pick()</code> and prints <code>P Q</code>.</li>\n</ol>\n\n<p>However, in the book it's written that this answer is incorrect:</p>\n\n<blockquote>\n  <p>It is incorrect because the line <code>id = 1 - id</code> swaps the value of <code>id</code> between <code>0</code> and <code>1</code>. There is no chance for the same method to be executed twice.</p>\n</blockquote>\n\n<p>I don't agree. I think there is some chance for the scenario I presented above. Such swap is not atomic. Am I wrong?</p>\n", "tags": ["java", "multithreading", "atomic", "swap", "scjp"], "title": "Is id = 1 - id atomic?", "answers": [{"body": "<blockquote>\n  <p>Am I wrong?</p>\n</blockquote>\n\n<p>Nope, you're absolutely right - as is your example timeline.</p>\n\n<p>In addition to it not being atomic, it's not guaranteed that the write to <code>id</code> will be picked up by the other thread anyway, given that there's no synchronization and the field isn't volatile.</p>\n\n<p>It's somewhat disconcerting for reference material like this to be incorrect :(</p>\n", "title": "Is id = 1 - id atomic?", "tags": ["java", "multithreading", "atomic", "swap", "scjp"], "link": "http://stackoverflow.com/questions/27089196/is-id-1-id-atomic/27089242#27089242", "question_id": 27089196, "answer_id": 27089242}, {"body": "<p>In my opinion, the answer in the Practice Exams is correct. In this code, you are executing two threads which have access to the same static variable id. Static variables are stored on the heap in java, not on the stack. The execution order of runnables is unpredictable.</p>\n\n<p>However, in order to change the value of id each thread :</p>\n\n<ol>\n<li>makes local copy of the value stored in id's memory address to the CPU registry;</li>\n<li>performs the operation <code>1 - id</code>. Strictly speaking, two operations are performed here <code>(-id and +1)</code>;        </li>\n<li>moves the result back to memory space of <code>id</code> on the heap.</li>\n</ol>\n\n<p>This means that although the id value can be changed concurrently by any of the two threads, only the initial and final values are mutable. Intermediate values will not be modified by one another.</p>\n\n<p>Futhermore, analysis of the code can show that at any point in time, id can only be 0 or 1.</p>\n\n<p><strong>Proof:</strong></p>\n\n<ul>\n<li><p>Starting value id =  1;\nOne thread will change it to 0 ( <code>id = 1 - id</code> ). And the other thread will bring it back to 1.</p></li>\n<li><p>Starting value id =  0;\nOne thread will change it to 1 ( <code>id = 1 - id</code> ). And the other thread will bring it back to 0.</p></li>\n</ul>\n\n<p>Therefore, the value state of id is discrete either 0 or 1.</p>\n\n<p><strong>End of Proof.</strong></p>\n\n<p>There can be two possibilities for this code:</p>\n\n<ul>\n<li><p>Possibility 1. Thread one accesses the variable id first. Then the value of id (<code>id = 1 - id</code> changes to 0. Thereafter, only the method <code>pick ()</code> will be executed, printing <code>P Q</code>. Thread two, will evaluate id at that time <code>id = 0</code>; method <code>release()</code> will then be executed printing R S. As a result, <code>P Q R S</code> will be printed.</p></li>\n<li><p>Possibility 2. Thread two accesses the variable id first. Then the value of id (<code>id = 1 - id</code> changes to 0. Thereafter, only the method <code>pick ()</code> will be executed, printing <code>P Q</code>. Thread one, will evaluate id at that time <code>id = 0</code>; method <code>release()</code> will then be executed printing R S. As a result, <code>P Q R S</code> will be printed.</p></li>\n</ul>\n\n<p>There are no other possibilities. However, it should be noted that variants of <code>P Q R S</code> such as <code>P R Q S</code> or <code>R P Q S</code>, etc. may be printed due to <code>pick()</code> being a static method and is therefore shared between the two threads. This leads to the simultaneous execution of this method which could result in printing the letters in a different order depending on your platform.</p>\n\n<p>However in any case, never will either the method <code>pick()</code> or <code>release ()</code> be executed twice as they are <strong>mutually exclusive</strong>. Therefore <code>P Q P Q</code> will not be an output.</p>\n", "title": "Is id = 1 - id atomic?", "tags": ["java", "multithreading", "atomic", "swap", "scjp"], "link": "http://stackoverflow.com/questions/27089196/is-id-1-id-atomic/27179049#27179049", "question_id": 27089196, "answer_id": 27179049}], "creation_date": 1416747371, "score": 72, "link": "http://stackoverflow.com/questions/27089196/is-id-1-id-atomic", "question_id": 27089196}, {"body": "<p>As a fairly green Java coder I've set myself the hefty challenge of trying to write a simple text adventure. Unsurprisingly, I've encountered difficulties already! </p>\n\n<p>I'm trying to give my Location class a property to store which exits it contains. I've used a boolean array for this, to essentially hold true/false values representing each exit. I'm not entirely convinced that </p>\n\n<p><strong>a)</strong> this is the most efficient way to do this and </p>\n\n<p><strong>b)</strong> that I'm using the right code to populate the array.</p>\n\n<p>I would appreciate any and all feedback, even if it is for a complete code over-haul!</p>\n\n<p>At present, when instantiating a Location I generate a String which I send through to the setExits method:</p>\n\n<pre><code>    String e = \"N S U\";\n    secretRoom.setExits(e);\n</code></pre>\n\n<p>In the Location class, setExits looks like this:</p>\n\n<pre><code>public void setExits(String e) {\n    if (e.contains(\"N\"))\n        bexits[0] = true;\n    else if (e.contains(\"W\"))\n        bexits[1] = true;\n    else if (e.contains(\"S\"))\n        bexits[2] = true;\n    else if (e.contains(\"E\"))\n        bexits[3] = true;\n    else if (e.contains(\"U\"))\n        bexits[4] = true;\n    else if (e.contains(\"D\"))\n        bexits[5] = true;\n}\n</code></pre>\n\n<p>I'll be honest, I think this looks particularly clunky, but I couldn't think of another way to do it. I'm also not entirely sure now how to write the getExits method...</p>\n\n<p>Any help would be welcome!</p>\n", "tags": ["java", "arrays"], "title": "Populating a Boolean Array in Java", "answers": [{"body": "<p>Is there any reason why you are doing this with <code>String</code>s and aren't passing in <code>booleans</code>, i.e.</p>\n\n<pre><code>public void setExits(boolean N, boolean E, boolean S, boolean W, boolean U, boolean D) \n</code></pre>\n\n<p>Or having <a href=\"http://stackoverflow.com/questions/1568091/why-use-getters-and-setters\">setters</a>?</p>\n\n<pre><code>public void setNorthOpen(boolean open)\n{\n  bexits[4] = open;\n}\n</code></pre>\n\n<p>Secondly, why are you storing the exits as an array of booleans, it's a small finite set, why not just </p>\n\n<pre><code>boolean N,S,E,W,U,D;\n</code></pre>\n\n<p>As then you don't need to keep track of which number in the array each direction is.</p>\n\n<p><strong>Also</strong></p>\n\n<p>This is a correct answer (if not completely optimal like that of @gexicide) but I fully encourage anyone to look at the other answers here for an interesting look at how things can be done in Java in different ways.  </p>\n\n<p><strong>For future reference</strong></p>\n\n<p>Code which works belongs on <a href=\"http://codereview.stackexchange.com/\">Code Review</a>, not Stack Overflow.  Although as @kajacx pointed out, this code shouldn't -in fact- work.</p>\n", "title": "Populating a Boolean Array in Java", "tags": ["java", "arrays"], "link": "http://stackoverflow.com/questions/24651403/populating-a-boolean-array-in-java/24651493#24651493", "question_id": 24651403, "answer_id": 24651493}, {"body": "<p>If you want a generic solution you can use a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Map.html\" rel=\"nofollow\">map</a>, which maps from a key (in your case W, S, E.. ) to a corresponding value (in your case a boolean). </p>\n\n<p>When you do a <code>set</code>, you update the value the key is associated with. When you do a <code>get</code>, you can take an argument key and simply retrieve the value of the key. This functionality does already exist in map, called <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#put%28K,%20V%29\" rel=\"nofollow\">put</a> and <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#get%28java.lang.Object%29\" rel=\"nofollow\">get</a>.</p>\n", "title": "Populating a Boolean Array in Java", "tags": ["java", "arrays"], "link": "http://stackoverflow.com/questions/24651403/populating-a-boolean-array-in-java/24651513#24651513", "question_id": 24651403, "answer_id": 24651513}, {"body": "<p>I would create an Exit enum and on the location class just set a list of Exit objects.</p>\n\n<p>so it would be something like:</p>\n\n<pre><code>public enum Exit { N, S, E, W, U, D }\n\nList&lt;Exit&gt; exits = parseExits(String exitString);\nlocation.setExits(exits);\n</code></pre>\n", "title": "Populating a Boolean Array in Java", "tags": ["java", "arrays"], "link": "http://stackoverflow.com/questions/24651403/populating-a-boolean-array-in-java/24651533#24651533", "question_id": 24651403, "answer_id": 24651533}, {"body": "<p>If you're defining exits as a string, you should use it. I would do it like:</p>\n\n<pre><code>public class LocationWithExits {\n    public static final String NORTH_EXIT=\"[N]\";\n    public static final String SOUTH_EXIT=\"[S]\";\n    public static final String EAST_EXIT=\"[E]\";\n    public static final String WEST_EXIT=\"[W]\";\n\n    private final String exitLocations;\n\n    public LocationWithExits(String exitLocations) {\n        this.exitLocations = exitLocations;\n    }\n    public boolean hasNorthExit(){\n        return exitLocations.contains(NORTH_EXIT);\n    }\n    public static void main(String[] args) {\n        LocationWithExits testLocation=new LocationWithExits(NORTH_EXIT+SOUTH_EXIT);\n        System.out.println(\"Has exit on north?: \"+testLocation.hasNorthExit());\n    }\n\n\n}\n</code></pre>\n\n<p>using array of booleans might cause a lot of problems if you forget what exactly means bexits[0]. Os it for north or south? etc.</p>\n\n<p>or you can just use enums and list of exits available . Then in methid test if list contain a certain enum value</p>\n", "title": "Populating a Boolean Array in Java", "tags": ["java", "arrays"], "link": "http://stackoverflow.com/questions/24651403/populating-a-boolean-array-in-java/24651624#24651624", "question_id": 24651403, "answer_id": 24651624}, {"body": "<p>Given what your code looks like, this is the most readable implementation I could come up with:</p>\n\n<pre><code>public class Exits {\n    private static final char[] DIRECTIONS = \"NSEWUD\".toCharArray();\n\n    public static void main(String... args) {\n        String input = \"N S E\";\n        boolean[] exits = new boolean[DIRECTIONS.length];\n\n        for(int i = 0; i&lt; exits.length; i++) {\n            if (input.indexOf(DIRECTIONS[i]) &gt;= 0) {\n                exits[i] = true;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>That being said, there's a number of cleaner solutions possible. Personally I would go with enums and an <code>EnumSet</code>.</p>\n\n<p>By the way, your original code is incorrect, as it will set as most one value in the array to true.</p>\n", "title": "Populating a Boolean Array in Java", "tags": ["java", "arrays"], "link": "http://stackoverflow.com/questions/24651403/populating-a-boolean-array-in-java/24651629#24651629", "question_id": 24651403, "answer_id": 24651629}, {"body": "<p>Personally, I think you can hack it around a bit using an enum and turn the following:</p>\n\n<pre><code>public void setExits(String e) {\n    if (e.contains(\"N\"))\n        bexits[0] = true;\n    else if (e.contains(\"W\"))\n        bexits[1] = true;\n    else if (e.contains(\"S\"))\n        bexits[2] = true;\n    else if (e.contains(\"E\"))\n        bexits[3] = true;\n    else if (e.contains(\"U\"))\n        bexits[4] = true;\n    else if (e.contains(\"D\"))\n        bexits[5] = true;\n}\n</code></pre>\n\n<p>into</p>\n\n<pre><code>public enum Directions\n{\n    NORTH(\"N\"),\n    WEST(\"W\"),\n    SOUTH(\"S\"),\n    EAST(\"E\"),\n    UP(\"U\"),\n    DOWN(\"D\");\n\n    private String identifier;\n\n    private Directions(String identifier)\n    {\n        this.identifier = identifier;\n    }\n\n    public String getIdentifier()\n    {\n        return identifier;\n    }\n}\n</code></pre>\n\n<p>and then do:</p>\n\n<pre><code>public void setExits(String e) \n{\n  String[] exits = e.split(\" \");\n  for(String exit : exits)\n  {\n      for(Directions direction : Directions.values())\n      {\n          if(direction.getIdentifier().equals(exit))\n          {\n              bexits[direction.ordinal()] = true;\n              break;\n          }\n      }\n  }\n}\n</code></pre>\n\n<p>Although after having written it down, I can't really tell you if it's that much better. It's easier to add new directions, that's for sure.</p>\n", "title": "Populating a Boolean Array in Java", "tags": ["java", "arrays"], "link": "http://stackoverflow.com/questions/24651403/populating-a-boolean-array-in-java/24651698#24651698", "question_id": 24651403, "answer_id": 24651698}, {"body": "<p>The most efficient <em>and</em> expressive way is the following:</p>\n\n<p>Use <code>enum</code>s as Exits and use an <code>EnumSet</code> to store them. <code>EnumSet</code> is an efficient <code>Set</code> implementation that uses a bit field to represent the enum constants.</p>\n\n<p>Here is how you can do it:</p>\n\n<pre><code>public enum Exit { North, West, South, East, Up, Down; }\n\nEnumSet&lt;Exit&gt; set = EnumSet.noneOf(Exit.class); // An empty set.\n\n// Now you can simply add or remove exits, everything will be stored compactly\n\nset.add(Exit.North); // Add exit\nset.contains(Exit.West); // Test if an exit is present\nset.remove(Exit.South); //Remove an exit\n</code></pre>\n\n<p>Enum set will store all exits in a single <code>long</code> internally, so your code is expressive, fast, and saves a lot of memory.</p>\n", "title": "Populating a Boolean Array in Java", "tags": ["java", "arrays"], "link": "http://stackoverflow.com/questions/24651403/populating-a-boolean-array-in-java/24651741#24651741", "question_id": 24651403, "answer_id": 24651741}, {"body": "<p>OK, first of all, your <code>setExits()</code> method will not work as intended, chained if-elseif will maximally execute 1 branch of code, for example:</p>\n\n<pre><code>if (e.contains(\"N\"))\n    bexits[0] = true;\nelse if (e.contains(\"W\"))\n    bexits[1] = true;\n</code></pre>\n\n<p>Even if <code>e</code> contains both <code>N</code> and <code>W</code>, only <code>bexits[0]</code> will be set. Also this method will only add exits (for example calling <code>setExits(\"\")</code> will not delete any existing exits.</p>\n\n<p>I would change that method to:</p>\n\n<pre><code>bexits[0] = e.contains(\"N\");\nbexits[1] = e.contains(\"W\");\n...\n</code></pre>\n\n<p>Also, i definetly wouldn't remember that north is on index 0, west in on 1, ... so a common practice is to name your indexes using final static constants:</p>\n\n<pre><code>public static final int NORTH = 0;\npublic static final int WEST = 1;\n...\n</code></pre>\n\n<p>Then you can write in your <code>setExits</code> method:</p>\n\n<pre><code>bexits[NORTH] = e.contains(\"N\");\nbexits[WEST] = e.contains(\"W\");\n...\n</code></pre>\n\n<p>(much more readible)</p>\n\n<p>Finally, if you want your code even more well-arranged, you can make a <code>Exits</code> class representing avaliable exits, and backed by boolean array. Then on place where you create your String, you could create this class instead and save yourself work with generating and then parsing a string.</p>\n\n<p>EDIT:</p>\n\n<p>as @gexicide answers, there is a really handy class <code>EnumSet</code> which would be probably better for representing the exits than bollean array.</p>\n", "title": "Populating a Boolean Array in Java", "tags": ["java", "arrays"], "link": "http://stackoverflow.com/questions/24651403/populating-a-boolean-array-in-java/24651855#24651855", "question_id": 24651403, "answer_id": 24651855}, {"body": "<p>All the approaches listed in the answeres are good. But I think the approach you need to take depends on the way you are going to use the exit field. For example if you are going to handle exit as strings then Ross Drews approach would require a lot of if-else conditions and variables.</p>\n\n<pre><code>String exit = \"N E\";\nString[] exits = exit.split(\" \");\nboolean N = false, E = false, S = false, W = false, U = false, D = false;\nfor(String e : exits){\n    if(e.equalsIgnoreCase(\"N\")){\n        N = true;\n    } else if(e.equalsIgnoreCase(\"E\")){\n        E = true;\n    } else if(e.equalsIgnoreCase(\"W\")){\n        W= true;\n    } else if(e.equalsIgnoreCase(\"U\")){\n        U = true;\n    } else if(e.equalsIgnoreCase(\"D\")){\n        D = true;\n    } else if(e.equalsIgnoreCase(\"S\")){\n        S = true;\n    }\n}\nsetExits(N, E, S, W, U, D);\n</code></pre>\n\n<p>Also if you have an exit and you want to check whether a location has that particular exit then again you will have to do the same</p>\n\n<pre><code>public boolean hasExit(String exit){\n    if(e.equalsIgnoreCase(\"N\")){\n        return this.N; // Or the corresponding getter method\n    } else if(e.equalsIgnoreCase(\"E\")){\n        return this.E;\n    } else if(e.equalsIgnoreCase(\"W\")){\n        return this.W;\n    } else if(e.equalsIgnoreCase(\"U\")){\n        return this.U;\n    } else if(e.equalsIgnoreCase(\"D\")){\n        return this.D;\n    } else if(e.equalsIgnoreCase(\"S\")){\n        return this.S;\n    }\n}\n</code></pre>\n\n<p>So if you are going to manipulate it as a string, in my opinion the best approach would be to go for list and enum. By this way you could do methods like hasExit, hasAnyExit, hasAllExits, hasNorthExit, hasSouthExit, getAvailableExits etc etc.. very easily. And considering the number of exits (6) using a list (or set) wont be an overhead. For example</p>\n\n<p>Enum</p>\n\n<pre><code>public enum EXIT {\n        EAST(\"E\"),\n        WEST(\"W\"),\n        NORTH(\"N\"),\n        SOUTH(\"S\"),\n        UP(\"U\"),\n        DOWN(\"D\");\n\n        private String exitCode;\n\n        private EXIT(String exitCode) {\n        this.exitCode = exitCode;\n        }\n\n        public String getExitCode() {\n        return exitCode;\n        }\n\n        public static EXIT fromValue(String exitCode) {\n            for (EXIT exit : values()) {\n                if (exit.exitCode.equalsIgnoreCase(exitCode)) {\n                    return exit;\n                }\n            }\n            return null;\n        }\n\n        public static EXIT fromValue(char exitCode) {\n            for (EXIT exit : values()) {\n                if (exit.exitCode.equalsIgnoreCase(String.valueOf(exitCode))) {\n                    return exit;\n                }\n            }\n            return null;\n        }\n}\n</code></pre>\n\n<p>Location.java</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\n\npublic class Location {\n\n    private List&lt;EXIT&gt; exits;\n\n    public Location(){\n        exits = new ArrayList&lt;EXIT&gt;();\n    }\n\n    public void setExits(String exits) {\n        for(char exitCode :  exits.toCharArray()){\n            EXIT exit = EXIT.fromValue(exitCode);\n            if(exit != null){\n                this.exits.add(exit);\n            }\n        }\n    }\n\n    public boolean hasExit(String exitCode){\n        return exits.contains(EXIT.fromValue(exitCode));\n    }\n\n    public boolean hasAnyExit(String exits){\n        for(char exitCode :  exits.toCharArray()){\n            if(this.exits.contains(EXIT.fromValue(exitCode))){\n                return true;\n            }\n        }\n        return false;\n    }\n\n    public boolean hasAllExit(String exits){\n        for(char exitCode :  exits.toCharArray()){\n            EXIT exit = EXIT.fromValue(exitCode);\n            if(exit != null &amp;&amp; !this.exits.contains(exit)){\n                return false;\n            }\n        }\n        return true;\n    }\n\n    public boolean hasExit(char exitCode){\n        return exits.contains(EXIT.fromValue(exitCode));\n    }\n\n    public boolean hasNorthExit(){\n        return exits.contains(EXIT.NORTH);\n    }\n\n    public boolean hasSouthExit(){\n        return exits.contains(EXIT.SOUTH);\n    }\n\n    public List&lt;EXIT&gt; getExits() {\n        return exits;\n    }\n\n    public static void main(String args[]) {\n        String exits = \"N E W\";\n        Location location = new Location();\n        location.setExits(exits);\n        System.out.println(location.getExits());\n        System.out.println(location.hasExit('W'));\n        System.out.println(location.hasAllExit(\"N W\"));\n        System.out.println(location.hasAnyExit(\"U D\"));\n        System.out.println(location.hasNorthExit());\n    }\n}\n</code></pre>\n", "title": "Populating a Boolean Array in Java", "tags": ["java", "arrays"], "link": "http://stackoverflow.com/questions/24651403/populating-a-boolean-array-in-java/24653548#24653548", "question_id": 24651403, "answer_id": 24653548}, {"body": "<p>The <code>EnumSet</code> in the other answer is the best way to do this, I just wanted to add one more thing though for the future when you start looking not just at whether you can move but where you are moving to.</p>\n\n<p>As well as <code>EnumSet</code> you also have <code>EnumMap</code>.</p>\n\n<p>If you define a Room class/interface then inside the Room class you can have </p>\n\n<pre><code>Map&lt;Direction, Room&gt; exits = new EnumMap&lt;&gt;(Direction.class);\n</code></pre>\n\n<p>You can now add your links into the map as follows:</p>\n\n<pre><code>exits.put(Direction.NORTH, theRoomNorthOfMe);\n</code></pre>\n\n<p>Then your code to move between rooms can be very general purpose:</p>\n\n<pre><code>Room destination=currentRoom.getExit(directionMoved);\n\nif (destination == null) {\n    // Cannot move that way\n} else {\n    // Handle move to destination\n}\n</code></pre>\n", "title": "Populating a Boolean Array in Java", "tags": ["java", "arrays"], "link": "http://stackoverflow.com/questions/24651403/populating-a-boolean-array-in-java/24673984#24673984", "question_id": 24651403, "answer_id": 24673984}, {"body": "<p>I really like the idea of assigning the exits from a String, because it makes for brief and readable code. Once that's done, I don't see why you would want to create a boolean array. If you have a String, just use it, although you might want to add some validation to prevent accidental assignment of strings containing unwanted characters:</p>\n\n<pre><code>private String exits;\n\npublic void setExits(String e) {\n    if (!e.matches(\"[NSEWUD ]*\")) throw new IllegalArgumentException();\n    exits = e;\n}\n</code></pre>\n\n<p>The only other thing I would add is a method <code>canExit</code> that you can call with a direction parameter; e.g., <code>if (location.canExit('N')) ...</code>:</p>\n\n<pre><code>public boolean canExit(char direction) {\n    return exits.indexOf(direction) &gt;= 0;\n}\n</code></pre>\n\n<p>I like enums, but using them here seems like over-engineering to me, which will rapidly become annoying.</p>\n\n<hr>\n\n<p>**Edit**: Actually, don't do this. It answers the wrong question, and it does something which doesn't need to be done. I just noticed <a href=\"https://stackoverflow.com/questions/24651403/populating-a-boolean-array-in-java/24673984#24673984\">@TimB's answer</a> of using a map (an EnumMap) to associate directions with rooms. It makes sense.</p>\n\n<p>I still feel that if you only need to track exit <em>existence</em>, a String is simple and effective, and anything else is over-complicating it. However, only knowing which exits are available isn't useful. You will want to go through those exits, and unless your game has a very plain layout it won't be doable for the code to infer the correct room for each direction, so you'll need to explicitly associate each direction with another room. So there seems to be no actual use for <em>any</em> method \"setExits\" which accepts a list of directions (regardless of how it's implemented internally).</p>\n", "title": "Populating a Boolean Array in Java", "tags": ["java", "arrays"], "link": "http://stackoverflow.com/questions/24651403/populating-a-boolean-array-in-java/24678404#24678404", "question_id": 24651403, "answer_id": 24678404}, {"body": "<pre><code>public void setExits(String e)\n{\n    String directions=\"NwSEUD\";\n    for(int i=0;i&lt;directions.length();i++)\n    {\n        if(e.contains(\"\"+directions.charAt(i)))\n        {\n            bexits[i]=true;\n            break;\n        }\n    }\n}\n</code></pre>\n\n<p>the iterative way of doing the same thing..</p>\n", "title": "Populating a Boolean Array in Java", "tags": ["java", "arrays"], "link": "http://stackoverflow.com/questions/24651403/populating-a-boolean-array-in-java/24683772#24683772", "question_id": 24651403, "answer_id": 24683772}, {"body": "<p>Why not this if you want a shorter code:</p>\n\n<pre><code>String symbols = \"NWSEUD\";\npublic void setExits(String e) {\n  for (int i = 0; i &lt; 6; i++) {\n    bexits[i] = e.contains(symbols.charAt(i));\n  }\n}\n</code></pre>\n", "title": "Populating a Boolean Array in Java", "tags": ["java", "arrays"], "link": "http://stackoverflow.com/questions/24651403/populating-a-boolean-array-in-java/24695185#24695185", "question_id": 24651403, "answer_id": 24695185}, {"body": "<p>Long chains of <code>else if</code> statements should be replaced with <code>switch</code> statements. </p>\n\n<p><code>Enum</code>s are the most expressive way to store such values as long as the efficiency is not a concern. Keep in mind that <code>enum</code> is a class, so creation of a new enum is associated with corresponding overhead.</p>\n", "title": "Populating a Boolean Array in Java", "tags": ["java", "arrays"], "link": "http://stackoverflow.com/questions/24651403/populating-a-boolean-array-in-java/38726409#38726409", "question_id": 24651403, "answer_id": 38726409}], "creation_date": 1404902160, "score": 71, "link": "http://stackoverflow.com/questions/24651403/populating-a-boolean-array-in-java", "question_id": 24651403}, {"body": "<p>I recently came upon the following code:</p>\n\n<pre><code>IntPredicate neg = x -&gt; x &lt;- x;\n</code></pre>\n\n<p>What is this, some sort of reverse double lambda?</p>\n", "tags": ["java", "syntax", "lambda", "obfuscation", "java-8"], "title": "What does the -&gt; &lt;- operator do?", "answers": [{"body": "<p>There is no <code>-&gt; &lt;-</code> operator. That first <code>-&gt;</code> is just lambda syntax, as introduced in Java 8, and that second <code>&lt;-</code> is a misleading concatenation of 'smaller than' <code>&lt;</code> and 'unary minus' <code>-</code>.</p>\n\n<p>You can read it as <code>IntPredicate neg = (x) -&gt; (x &lt; (-x));</code>, i.e. it tests whether <code>x</code> is smaller than <code>-x</code>, which is the case for all (well, <a href=\"http://stackoverflow.com/questions/24938333/what-does-the-operator-do/24938462#comment38754811_24938462\">most</a>) negative numbers, hence the name <code>neg</code>.</p>\n\n<pre><code>IntPredicate neg = x -&gt; x &lt;- x;\nSystem.out.println(neg.test(4));   // false\nSystem.out.println(neg.test(0));   // false\nSystem.out.println(neg.test(-4));  // true\n</code></pre>\n\n<hr>\n\n<p>Just for completeness: This test is not only (intentionally?) hard to understand, but -- as pointed out in the comments -- it also fails for <code>Integer.MIN_VALUE</code> (which is <code>==-Integer.MIN_VALUE</code>). Instead, you should probably just use the much simpler <code>IntPredicate neg = x -&gt; (x &lt; 0);</code>.</p>\n", "title": "What does the -&gt; &lt;- operator do?", "tags": ["java", "syntax", "lambda", "obfuscation", "java-8"], "link": "http://stackoverflow.com/questions/24938333/what-does-the-operator-do/24938462#24938462", "question_id": 24938333, "answer_id": 24938462}], "creation_date": 1406216790, "score": 71, "link": "http://stackoverflow.com/questions/24938333/what-does-the-operator-do", "question_id": 24938333}, {"body": "<p>Apparently on my Windows 8 laptop with HotSpot JDK 1.7.0_45 (with all compiler/VM options set to default), the below loop</p>\n\n<pre><code>final int n = Integer.MAX_VALUE;\nint i = 0;\nwhile (++i &lt; n) {\n}\n</code></pre>\n\n<p>is at least 2 orders of magnitude faster (~10 ms vs. ~5000 ms) than:</p>\n\n<pre><code>final int n = Integer.MAX_VALUE;\nint i = 0;\nwhile (i++ &lt; n) {\n}\n</code></pre>\n\n<p>I happened to noticed this problem while writing a loop to evaluate another irrelevant performance issue. And the difference between <code>++i &lt; n</code> and <code>i++ &lt; n</code> was huge enough to significantly influence the result.</p>\n\n<p>If we look at the bytecode, the loop body of the faster version is:</p>\n\n<pre><code>iinc\niload\nldc\nif_icmplt\n</code></pre>\n\n<p>And for the slower version:</p>\n\n<pre><code>iload\niinc\nldc\nif_icmplt\n</code></pre>\n\n<p>So for <code>++i &lt; n</code>, it first increments local variable <code>i</code> by 1 and then push it onto the operand stack while <code>i++ &lt; n</code> does those 2 steps in reverse order. But that doesn't seem to explain why the former is much faster. Is there any temp copy involved in the latter case? Or is it something beyond the bytecode (VM implementation, hardware, etc.) that should be responsible for the performance difference?</p>\n\n<p>I've read some other discussion regarding <code>++i</code> and <code>i++</code> (not exhaustively though), but didn't find any answer that is Java-specific and directly related to the case where <code>++i</code> or <code>i++</code> is involved in a value comparison.</p>\n", "tags": ["java", "performance", "compiler-optimization", "post-increment", "pre-increment"], "title": "Why is &quot;while (i++ &lt; n) {}&quot; significantly slower than &quot;while (++i &lt; n) {}&quot;", "answers": [{"body": "<p>The difference between ++i and i++ is that ++i effectively increments the variable and 'returns' that new value. i++ on the other hand effectively creates a temp variable to hold the current value in i, then increments the variable 'returning' the temp variable's value. This is where the extra overhead is coming from.</p>\n\n<pre><code>// i++ evaluates to something like this\n// Imagine though that somehow i was passed by reference\nint temp = i;\ni = i + 1;\nreturn temp;\n\n// ++i evaluates to\ni = i + 1;\nreturn i;\n</code></pre>\n\n<p>In your case it appears that the increment won't be optimized by the JVM because you are using the result in an expression. The JVM can on the other hand optimize a loop like this.</p>\n\n<pre><code>for( int i = 0; i &lt; Integer.MAX_VALUE; i++ ) {}\n</code></pre>\n\n<p>This is because the result of i++ is never used. In a loop like this you should be able to use both ++i and i++ with the same performance as if you used ++i.</p>\n", "title": "Why is &quot;while (i++ &lt; n) {}&quot; significantly slower than &quot;while (++i &lt; n) {}&quot;", "tags": ["java", "performance", "compiler-optimization", "post-increment", "pre-increment"], "link": "http://stackoverflow.com/questions/25322679/why-is-while-i-n-significantly-slower-than-while-i-n/25322710#25322710", "question_id": 25322679, "answer_id": 25322710}, {"body": "<p>I suggest you should (whenever possible) <em>always</em> use <code>++c</code> rather than <code>c++</code> as the former will <em>never</em> be slower since, conceptually, a deep copy of <code>c</code> has to be taken in the latter case in order to return the previous value.</p>\n\n<p>Indeed many optimisers will optimise away an unnecessary deep copy but they can't easily do that if you're making use of the expression value. And you're doing just that in your case.</p>\n\n<p>Many folk disagree though: they see it as as a micro-optimisation.</p>\n", "title": "Why is &quot;while (i++ &lt; n) {}&quot; significantly slower than &quot;while (++i &lt; n) {}&quot;", "tags": ["java", "performance", "compiler-optimization", "post-increment", "pre-increment"], "link": "http://stackoverflow.com/questions/25322679/why-is-while-i-n-significantly-slower-than-while-i-n/25322782#25322782", "question_id": 25322679, "answer_id": 25322782}, {"body": "<p><strong>EDIT 2</strong></p>\n\n<p>You should really look here: </p>\n\n<p><a href=\"http://hg.openjdk.java.net/code-tools/jmh/file/f90aef7f1d2c/jmh-samples/src/main/java/org/openjdk/jmh/samples/JMHSample_11_Loops.java\" rel=\"nofollow\">http://hg.openjdk.java.net/code-tools/jmh/file/f90aef7f1d2c/jmh-samples/src/main/java/org/openjdk/jmh/samples/JMHSample_11_Loops.java</a></p>\n\n<p><strong>EDIT</strong>\nThe more I think about it, I realise that this test is somehow wrong, the loop will get seriously optimized by the JVM.</p>\n\n<p>I think that you should just drop the <code>@Param</code> and let <code>n=2</code>.</p>\n\n<p>This way you will test the performance of the <strong><code>while</code></strong> itself. The results I get in this case :</p>\n\n<pre><code>o.m.t.WhileTest.testFirst      avgt         5        0.787        0.086    ns/op\no.m.t.WhileTest.testSecond     avgt         5        0.782        0.087    ns/op\n</code></pre>\n\n<p><strong>The is almost no difference</strong></p>\n\n<p>The very first question you should ask yourself is <strong>how you test and measure this</strong>.\nThis is micro-benchmarking and in Java this is an art, and almost always a simple user (like me) will get the results wrong. You should rely on a benchmark test and very good tool for that. I used JMH to test this:</p>\n\n<pre><code>    @Measurement(iterations=5, time=1, timeUnit=TimeUnit.MILLISECONDS)\n@Fork(1)\n@Warmup(iterations=5, time=1, timeUnit=TimeUnit.SECONDS)\n@OutputTimeUnit(TimeUnit.NANOSECONDS)\n@BenchmarkMode(Mode.AverageTime)\n@State(Scope.Benchmark)\npublic class WhileTest {\n    public static void main(String[] args) throws Exception {\n        Options opt = new OptionsBuilder()\n            .include(\".*\" + WhileTest.class.getSimpleName() + \".*\")\n            .threads(1)\n            .build();\n\n        new Runner(opt).run();\n    }\n\n\n    @Param({\"100\", \"10000\", \"100000\", \"1000000\"})\n    private int n;\n\n    /*\n    @State(Scope.Benchmark)\n    public static class HOLDER_I {\n        int x;\n    }\n    */\n\n\n    @Benchmark\n    public int testFirst(){\n        int i = 0;\n        while (++i &lt; n) {\n        }\n        return i;\n    }\n\n    @Benchmark\n    public int testSecond(){\n        int i = 0;\n        while (i++ &lt; n) {\n        }\n        return i;\n    }\n}\n</code></pre>\n\n<p>Someone way more experienced in JMH might correct this results (I really hope so!, since I am not that versatile in JMH yet), but the results show that the difference is pretty darn small:</p>\n\n<pre><code>Benchmark                        (n)   Mode   Samples        Score  Score error    Units\no.m.t.WhileTest.testFirst        100   avgt         5        1.271        0.096    ns/op\no.m.t.WhileTest.testFirst      10000   avgt         5        1.319        0.125    ns/op\no.m.t.WhileTest.testFirst     100000   avgt         5        1.327        0.241    ns/op\no.m.t.WhileTest.testFirst    1000000   avgt         5        1.311        0.136    ns/op\no.m.t.WhileTest.testSecond       100   avgt         5        1.450        0.525    ns/op\no.m.t.WhileTest.testSecond     10000   avgt         5        1.563        0.479    ns/op\no.m.t.WhileTest.testSecond    100000   avgt         5        1.418        0.428    ns/op\no.m.t.WhileTest.testSecond   1000000   avgt         5        1.344        0.120    ns/op\n</code></pre>\n\n<p>The Score field is the one you are interested in.</p>\n", "title": "Why is &quot;while (i++ &lt; n) {}&quot; significantly slower than &quot;while (++i &lt; n) {}&quot;", "tags": ["java", "performance", "compiler-optimization", "post-increment", "pre-increment"], "link": "http://stackoverflow.com/questions/25322679/why-is-while-i-n-significantly-slower-than-while-i-n/25322887#25322887", "question_id": 25322679, "answer_id": 25322887}, {"body": "<p>As others have pointed out, the test is flawed in many ways. </p>\n\n<p>You did not tell us exactly <em>how</em> you did this test. However, I tried to implement a \"naive\" test (no offense) like this:</p>\n\n<pre><code>class PrePostIncrement\n{\n    public static void main(String args[])\n    {\n        for (int j=0; j&lt;3; j++)\n        {\n            for (int i=0; i&lt;5; i++)\n            {\n                long before = System.nanoTime();\n                runPreIncrement();\n                long after = System.nanoTime();\n                System.out.println(\"pre  : \"+(after-before)/1e6);\n            }\n            for (int i=0; i&lt;5; i++)\n            {\n                long before = System.nanoTime();\n                runPostIncrement();\n                long after = System.nanoTime();\n                System.out.println(\"post : \"+(after-before)/1e6);\n            }\n        }\n    }\n\n    private static void runPreIncrement()\n    {\n        final int n = Integer.MAX_VALUE;\n        int i = 0;\n        while (++i &lt; n) {}\n    }\n\n    private static void runPostIncrement()\n    {\n        final int n = Integer.MAX_VALUE;\n        int i = 0;\n        while (i++ &lt; n) {}\n    }\n}\n</code></pre>\n\n<p>When running this with default settings, there seems to be a small difference. But the <strong>real</strong> flaw of the benchmark becomes obvious when you run this with the <code>-server</code> flag. The results in my case then are along something like</p>\n\n<pre><code>...\npre  : 6.96E-4\npre  : 6.96E-4\npre  : 0.001044\npre  : 3.48E-4\npre  : 3.48E-4\npost : 1279.734543\npost : 1295.989086\npost : 1284.654267\npost : 1282.349093\npost : 1275.204583\n</code></pre>\n\n<p>Obviously, the pre-increment version has been <em>completely optimized away</em>. The reason is rather simple: The result is not used. It does not matter at all whether the loop is executed or not, so the JIT simply removes it. </p>\n\n<p>This is confirmed by a look at the hotspot disassembly: The pre-increment version results in this code:</p>\n\n<pre><code>[Entry Point]\n[Verified Entry Point]\n[Constants]\n  # {method} {0x0000000055060500} &amp;apos;runPreIncrement&amp;apos; &amp;apos;()V&amp;apos; in &amp;apos;PrePostIncrement&amp;apos;\n  #           [sp+0x20]  (sp of caller)\n  0x000000000286fd80: sub    $0x18,%rsp\n  0x000000000286fd87: mov    %rbp,0x10(%rsp)    ;*synchronization entry\n                                                ; - PrePostIncrement::runPreIncrement@-1 (line 28)\n\n  0x000000000286fd8c: add    $0x10,%rsp\n  0x000000000286fd90: pop    %rbp\n  0x000000000286fd91: test   %eax,-0x243fd97(%rip)        # 0x0000000000430000\n                                                ;   {poll_return}\n  0x000000000286fd97: retq   \n  0x000000000286fd98: hlt    \n  0x000000000286fd99: hlt    \n  0x000000000286fd9a: hlt    \n  0x000000000286fd9b: hlt    \n  0x000000000286fd9c: hlt    \n  0x000000000286fd9d: hlt    \n  0x000000000286fd9e: hlt    \n  0x000000000286fd9f: hlt    \n</code></pre>\n\n<p>The post-increment version results in this code:</p>\n\n<pre><code>[Entry Point]\n[Verified Entry Point]\n[Constants]\n  # {method} {0x00000000550605b8} &amp;apos;runPostIncrement&amp;apos; &amp;apos;()V&amp;apos; in &amp;apos;PrePostIncrement&amp;apos;\n  #           [sp+0x20]  (sp of caller)\n  0x000000000286d0c0: sub    $0x18,%rsp\n  0x000000000286d0c7: mov    %rbp,0x10(%rsp)    ;*synchronization entry\n                                                ; - PrePostIncrement::runPostIncrement@-1 (line 35)\n\n  0x000000000286d0cc: mov    $0x1,%r11d\n  0x000000000286d0d2: jmp    0x000000000286d0e3\n  0x000000000286d0d4: nopl   0x0(%rax,%rax,1)\n  0x000000000286d0dc: data32 data32 xchg %ax,%ax\n  0x000000000286d0e0: inc    %r11d              ; OopMap{off=35}\n                                                ;*goto\n                                                ; - PrePostIncrement::runPostIncrement@11 (line 36)\n\n  0x000000000286d0e3: test   %eax,-0x243d0e9(%rip)        # 0x0000000000430000\n                                                ;*goto\n                                                ; - PrePostIncrement::runPostIncrement@11 (line 36)\n                                                ;   {poll}\n  0x000000000286d0e9: cmp    $0x7fffffff,%r11d\n  0x000000000286d0f0: jl     0x000000000286d0e0  ;*if_icmpge\n                                                ; - PrePostIncrement::runPostIncrement@8 (line 36)\n\n  0x000000000286d0f2: add    $0x10,%rsp\n  0x000000000286d0f6: pop    %rbp\n  0x000000000286d0f7: test   %eax,-0x243d0fd(%rip)        # 0x0000000000430000\n                                                ;   {poll_return}\n  0x000000000286d0fd: retq   \n  0x000000000286d0fe: hlt    \n  0x000000000286d0ff: hlt    \n</code></pre>\n\n<p>It's not entirely clear for me why it seemingly does <em>not</em> remove the post-increment version. (In fact, I consider asking this as a separate question). But at least, this explains why you might see differences with an \"order of magnitude\"...</p>\n\n<hr>\n\n<p>EDIT: Interestingly, when changing the upper limit of the loop from <code>Integer.MAX_VALUE</code> to <code>Integer.MAX_VALUE-1</code>, then <strong>both</strong> versions are optimized away and require \"zero\" time. Somehow this limit (which still appears as <code>0x7fffffff</code> in the assembly) prevents the optimization. Presumably, this has something to do with the comparison being mapped to a (singed!) <code>cmp</code> instruction, but I can not give a profound reason beyond that. The JIT works in mysterious ways...</p>\n", "title": "Why is &quot;while (i++ &lt; n) {}&quot; significantly slower than &quot;while (++i &lt; n) {}&quot;", "tags": ["java", "performance", "compiler-optimization", "post-increment", "pre-increment"], "link": "http://stackoverflow.com/questions/25322679/why-is-while-i-n-significantly-slower-than-while-i-n/25323548#25323548", "question_id": 25322679, "answer_id": 25323548}, {"body": "<p>probably this test is not enough to take conclusions but I would say if this is the case, the JVM can optimize this expression by changing i++ to ++i since the stored value of i++ (pre value) is never used in this loop.</p>\n", "title": "Why is &quot;while (i++ &lt; n) {}&quot; significantly slower than &quot;while (++i &lt; n) {}&quot;", "tags": ["java", "performance", "compiler-optimization", "post-increment", "pre-increment"], "link": "http://stackoverflow.com/questions/25322679/why-is-while-i-n-significantly-slower-than-while-i-n/25358488#25358488", "question_id": 25322679, "answer_id": 25358488}], "creation_date": 1408087463, "score": 70, "link": "http://stackoverflow.com/questions/25322679/why-is-while-i-n-significantly-slower-than-while-i-n", "question_id": 25322679}, {"body": "<p>I have a program like this:</p>\n\n<pre><code>class Test {\n\n    final int x;\n\n    {\n        printX();\n    }\n\n    Test() {\n        System.out.println(\"const called\");\n    }\n\n    void printX() {\n        System.out.println(\"Here x is \" + x);\n    }\n\n    public static void main(String[] args) {\n        Test t = new Test();\n    }\n\n}\n</code></pre>\n\n<p>If I try to execute it, i am getting compiler error as : <code>variable x might not have been initialized</code> based on java default values i should get the below output right??</p>\n\n<pre><code>\"Here x is 0\".\n</code></pre>\n\n<p>Will final variables have dafault values?</p>\n\n<p>if I change my code like this,</p>\n\n<pre><code>class Test {\n\n    final int x;\n\n    {\n        printX();\n        x = 7;\n        printX();\n    }\n\n    Test() {\n        System.out.println(\"const called\");\n    }\n\n    void printX() {\n        System.out.println(\"Here x is \" + x);\n    }\n\n    public static void main(String[] args) {\n        Test t = new Test();\n    }\n\n}\n</code></pre>\n\n<p>I am getting output as:</p>\n\n<pre><code>Here x is 0                                                                                      \nHere x is 7                                                                                     \nconst called\n</code></pre>\n\n<p>Can anyone please explain this behavior..</p>\n", "tags": ["java", "final"], "title": "Will Java Final variables have default values?", "answers": [{"body": "\n\n<p><a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html\" rel=\"nofollow\">http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html</a>, chapter \"Initializing Instance Members\":</p>\n\n<blockquote>\n  <p>The Java compiler copies initializer blocks into every constructor.</p>\n</blockquote>\n\n<p>That is to say:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>{\n    printX();\n}\n\nTest() {\n    System.out.println(\"const called\");\n}\n</code></pre>\n\n<p>behaves exactly like:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Test() {\n    printX();\n    System.out.println(\"const called\");\n}\n</code></pre>\n\n<p>As you can thus see, once an instance has been created, the final field has not been <a href=\"http://en.wikipedia.org/wiki/Definite_assignment_analysis\" rel=\"nofollow\"><em>definitely assigned</em></a>, while (from <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.2\" rel=\"nofollow\">http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.2</a>):</p>\n\n<blockquote>\n  <p>A blank final instance variable must be definitely assigned at\n  the end of every constructor of the class in which it is\n  declared; otherwise a compile-time error occurs.</p>\n</blockquote>\n\n<p>While it does not seem to be stated explitely in the docs (at least I have not been able to find it), a final field must temporary take its default value before the end of the constructor, so that it has a <a href=\"http://en.wikipedia.org/wiki/Uninitialized_variable\" rel=\"nofollow\"><em>predictable value</em></a> if you read it before its assignment.</p>\n\n<p>Default values: <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5\" rel=\"nofollow\">http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5</a></p>\n\n<p>On your second snippet, x is initialized on instance creation, so the compiler does not complain:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Test() {\n    printX();\n    x = 7;\n    printX();\n    System.out.println(\"const called\");\n}\n</code></pre>\n\n<hr>\n\n<p>Also note that the following approach doesn't work. Using default value of final variable is only allowed through a method.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Test() {\n    System.out.println(\"Here x is \" + x); // Compile time error : variable 'x' might not be initialized\n    x = 7;\n    System.out.println(\"Here x is \" + x);\n    System.out.println(\"const called\");\n}\n</code></pre>\n", "title": "Will Java Final variables have default values?", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/24990691/will-java-final-variables-have-default-values/24990852#24990852", "question_id": 24990691, "answer_id": 24990852}, {"body": "<p>As far as I'm aware, the compiler will always initialize class variables to default values (even final variables). For example, if you were to initialize an int to itself, the int would be set to its default of 0. See below:</p>\n\n<pre><code>class Test {\n    final int x;\n\n    {\n        printX();\n        x = this.x;\n        printX();\n    }\n\n    Test() {\n        System.out.println(\"const called\");\n    }\n\n    void printX() {\n        System.out.println(\"Here x is \" + x);\n    }\n\n    public static void main(String[] args) {\n        Test t = new Test();\n    }\n}\n</code></pre>\n\n<p>The above would print the following:</p>\n\n<pre><code>Here x is 0\nHere x is 0\nconst called\n</code></pre>\n", "title": "Will Java Final variables have default values?", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/24990691/will-java-final-variables-have-default-values/24990885#24990885", "question_id": 24990691, "answer_id": 24990885}, {"body": "<p>If you don't initialize <code>x</code> you'll get a compile-time error since <code>x</code> is never initialized. </p>\n\n<p>Declaring <code>x</code> as final means that it can be initialized only in the constructor or in <a href=\"http://www.java-training-guide.com/initialization-block.html\" rel=\"nofollow\">initializer-block</a> (since this block will be copied by the compiler into every constructor). </p>\n\n<p>The reason that you get <code>0</code> printed out before the variable is initialized is due to the behavior  defined in the <a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"nofollow\"><em>manual</em></a> (see: \"Default Values\" section):</p>\n\n<h2>Default Values</h2>\n\n<blockquote>\n  <p>It's not always necessary to assign a value when a field is declared.\n  Fields that are declared but not initialized will be set to a\n  reasonable default by the compiler. Generally speaking, this default\n  will be zero or null, depending on the data type. Relying on such\n  default values, however, is generally considered bad programming\n  style.</p>\n  \n  <p>The following chart summarizes the default values for the above data\n  types.</p>\n</blockquote>\n\n<pre><code>Data Type   Default Value (for fields)\n--------------------------------------\nbyte        0\nshort       0\nint         0\nlong        0L\nfloat       0.0f\ndouble      0.0d\nchar        '\\u0000'\nString (or any object)      null\nboolean     false\n</code></pre>\n", "title": "Will Java Final variables have default values?", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/24990691/will-java-final-variables-have-default-values/24990890#24990890", "question_id": 24990691, "answer_id": 24990890}, {"body": "<p>All non-final fields of a class initialize to a default value (<code>0</code> for nummeric data types, <code>false</code> for boolean and <code>null</code> for reference types, sometimes called complex objects). These fields initialize before a constructor (or instance initialization block) executes independent of whether or not the fields was declared before or after the constructor.</p>\n\n<p><strong>Final</strong> fields of a class has <strong>no default value</strong> and must be explicitly initialized just once before a class constructor has finished his job.</p>\n\n<p>Local variables on the inside of an execution block (for example, a method) has no default value. These fields must be explicitly initialized before their first use and it doesn't matter whether or not the local variable is marked as final.</p>\n", "title": "Will Java Final variables have default values?", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/24990691/will-java-final-variables-have-default-values/24990901#24990901", "question_id": 24990691, "answer_id": 24990901}, {"body": "<p><strong>JLS</strong> is <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.2\">saying</a> that you <strong>must</strong> assign the default value to blank final instance variable in constructor (or in <em>initialization block</em> which is pretty the same). That is why you get the error in the first case. However it doesn't say that you can not access it in constructor before. Looks weird a little bit, but you can access it before assignment and see default value for int - 0.   </p>\n\n<p><strong>UPD.</strong> As mentioned by @I4mpi, <strong>JLS</strong> <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-16.html\">defines</a> the rule that each value should be <strong>definitely assigned</strong> before any access:</p>\n\n<p><code>Each local variable (\u00a714.4) and every blank final field (\u00a74.12.4, \u00a78.3.1.2) must have a definitely assigned value when any access of its value occurs.</code></p>\n\n<p>However, it also has an <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-16.html#jls-16.9\">interesting rule</a> in regards to constructors and fields:</p>\n\n<p><code>If C has at least one instance initializer or instance variable initializer then V is [un]assigned after an explicit or implicit superclass constructor invocation if V is [un]assigned after the rightmost instance initializer or instance variable initializer of C.</code></p>\n\n<p>So in second case the value <code>x</code> is <strong>definitely assigned</strong> at the beginning of the constructor, because it contains the assignment at the end of it. </p>\n", "title": "Will Java Final variables have default values?", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/24990691/will-java-final-variables-have-default-values/24990921#24990921", "question_id": 24990691, "answer_id": 24990921}, {"body": "<p>Let me put it in the simplest words I can.</p>\n\n<p><code>final</code> variables need to be initialized, this is mandated by the Language Specification.\nHaving said that, please note that it is not necessary to initialize it at the time of declaration. </p>\n\n<p>It is required to initialize that before the object is initialized.</p>\n\n<p>We can use initializer blocks to initialize the final variables. Now, initializer blocks are of two types\n<code>static</code> and <code>non-static</code></p>\n\n<p>The block you used is a non-static initializer block. So, when you create an object, Runtime will invoke constructor and which in turn will invoke the constructor of the parent class.</p>\n\n<p>After that, it will invoke all the initializers (in your case the non-static initializer). </p>\n\n<p>In your question, <strong>case 1</strong>: Even after the completion of initializer block the final variable remains un-initialized, which is an error compiler will detect.</p>\n\n<p>In <strong>case 2</strong>: The initializer will initialize the final variable, hence the compiler knows that before the object is initialized, the final is already initialized. Hence, it will not complain.</p>\n\n<p>Now the question is, why does <code>x</code> takes a zero. The reason here is that compiler already knows that there is no error and so upon invocation of init method all the finals will be initialized to defaults, and a flag set that they can change upon actual assignment statement similar to <code>x=7</code>.\nSee the init invocation below:</p>\n\n<p><img src=\"http://i.stack.imgur.com/ZaJju.png\" alt=\"enter image description here\"></p>\n", "title": "Will Java Final variables have default values?", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/24990691/will-java-final-variables-have-default-values/24990979#24990979", "question_id": 24990691, "answer_id": 24990979}, {"body": "<p>The first error is the compiler complaining that you have a final field, but no code to initialize it - simple enough.</p>\n\n<p>In the second example, you have code to assign it a value, but the sequence of execution means you reference the field both before and after assigning it.</p>\n\n<p>The pre-assigned value of any field is the default value.</p>\n", "title": "Will Java Final variables have default values?", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/24990691/will-java-final-variables-have-default-values/24991053#24991053", "question_id": 24990691, "answer_id": 24991053}, {"body": "<blockquote>\n  <p>If I try to execute it, i am getting compiler error as : variable x might not have been initialized based on java default values i should get the below output right??</p>\n  \n  <p>\"Here x is 0\".</p>\n</blockquote>\n\n<p>No. You are not seeing that output because you are getting a compile-time error in the first place. Final variables do get a default value, but the Java Language Specification (JLS) requires you to initialize them by the end of the constructor (LE: I'm including initialization blocks here), otherwise you'll get a compile-time error which will prevent your code to be compiled and executed. </p>\n\n<p>Your second example respects the requirement, that's why (1) your code compiles and (2) you get the expected behaviour. </p>\n\n<p>In the future try to familiarize yourself with the JLS. There's no better source of information about the Java language.</p>\n", "title": "Will Java Final variables have default values?", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/24990691/will-java-final-variables-have-default-values/25005176#25005176", "question_id": 24990691, "answer_id": 25005176}], "creation_date": 1406533773, "score": 68, "link": "http://stackoverflow.com/questions/24990691/will-java-final-variables-have-default-values", "question_id": 24990691}, {"body": "<p>When <code>x</code> is a <code>double</code>, is <code>(x - x)</code> guaranteed to be <code>+0.0</code>, or might it sometimes be <code>-0.0</code> (depending on the sign of <code>x</code>)?</p>\n", "tags": ["java", "floating-point"], "title": "Is (x - x) always positive zero for doubles, or sometimes negative zero?", "answers": [{"body": "<p><code>x - x</code> can be <code>+0.0</code> or <code>NaN</code>. There are no other values it can take in IEEE 754 arithmetics in round-to-nearest (and in Java, the rounding mode is <a href=\"http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.8.1\">always round-to-nearest</a>). The subtraction of two identical finite values is <em>defined</em> as producing <code>+0.0</code> in this rounding mode. <a href=\"http://stackoverflow.com/users/270986/mark-dickinson\">Mark Dickinson</a>, in comments below, cites the IEEE 754 standard as saying, section 6.3:</p>\n\n<blockquote>\n  <p>When the sum of two operands with opposite signs (or the difference of two operands with like signs) is exactly zero, the sign of that sum (or difference) shall be +0 in all rounding-direction attributes except roundTowardNegative [...].</p>\n</blockquote>\n\n<p>This <a href=\"http://en.wikipedia.org/wiki/Signed_zero\">page</a> shows that in particular <code>0.0 - 0.0</code> and <code>-0.0 - (-0.0)</code> are both <code>+0.0</code>.</p>\n\n<p>Infinities and NaN both produce NaN when subtracted from themselves.</p>\n", "title": "Is (x - x) always positive zero for doubles, or sometimes negative zero?", "tags": ["java", "floating-point"], "link": "http://stackoverflow.com/questions/24950928/is-x-x-always-positive-zero-for-doubles-or-sometimes-negative-zero/24950972#24950972", "question_id": 24950928, "answer_id": 24950972}, {"body": "<p>The SMT solver Z3 supports IEEE floating point arithmetic. Let's ask Z3 to find a case where <code>x - x != 0</code>. It immediately finds <code>NaN</code> as well as <code>+-infinity</code>. Excluding those, there is no <code>x</code> that satisfies that equation.</p>\n\n<pre><code>(set-logic QF_FPA)    \n\n(declare-const x (_ FP 11 53))\n(declare-const r (_ FP 11 53))\n\n(assert (and \n    (not (= x (as NaN (_ FP 11 53))))\n    (not (= x (as plusInfinity (_ FP 11 53))))\n    (not (= x (as minusInfinity (_ FP 11 53))))\n    (= r (- roundTowardZero x x))\n    (not (= r ((_ asFloat 11 53) roundTowardZero 0.0 0)))\n))\n\n(check-sat)\n(get-model)\n</code></pre>\n\n<p>Z3 implements IEEE floating point arithmetic by converting all operations to boolean circuits and using the standard SAT solver to find a model. Barring any bugs in that translation or the SAT solver the result is perfectly precise.</p>\n\n<p>Proof for...</p>\n\n<ul>\n<li>...<code>roundTowardZero</code>: <a href=\"http://rise4fun.com/Z3/7H4\" rel=\"nofollow\">http://rise4fun.com/Z3/7H4</a></li>\n<li>...<code>roundNearestTiesToEven</code>: <a href=\"http://rise4fun.com/Z3/Opl4W\" rel=\"nofollow\">http://rise4fun.com/Z3/Opl4W</a></li>\n</ul>\n\n<p>Note the counterexample for the rounding mode <code>roundTowardNegative</code>: <a href=\"http://rise4fun.com/Z3/T845\" rel=\"nofollow\">http://rise4fun.com/Z3/T845</a>. For a certain <code>x</code> the result of <code>x - x</code> is negative zero. Such a case can hardly be found by humans. Yet, with an SMT solver it is easy to find. We can change <code>=</code> to <code>==</code> so that Z3 uses IEEE equality comparison semantics instead of exact equality. After that change, there is again no counter-example because <code>-0 == +0</code> according to IEEE.</p>\n\n<p>I tried making the rounding mode a variable. That would work in theory but Z3 has a bug here. For now we have to manually specify a hard-coded rounding mode. If we could make it a variable we could ask Z3 to prove this statement for <em>all</em> rounding modes in one query.</p>\n", "title": "Is (x - x) always positive zero for doubles, or sometimes negative zero?", "tags": ["java", "floating-point"], "link": "http://stackoverflow.com/questions/24950928/is-x-x-always-positive-zero-for-doubles-or-sometimes-negative-zero/24962891#24962891", "question_id": 24950928, "answer_id": 24962891}], "creation_date": 1406275584, "score": 68, "link": "http://stackoverflow.com/questions/24950928/is-x-x-always-positive-zero-for-doubles-or-sometimes-negative-zero", "question_id": 24950928}, {"body": "<p>While browsing the code for the Java 8 version of ForkJoinPool(which has a few interesting changes from Java 7) I ran across this construct (<a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/concurrent/ForkJoinPool.java#l3207\">here</a>):</p>\n\n<pre><code>do {} while (!blocker.isReleasable() &amp;&amp;\n             !blocker.block());\n</code></pre>\n\n<p>I'm struggling with why you would write it like this instead of just</p>\n\n<pre><code>while (!blocker.isReleasable() &amp;&amp;\n       !blocker.block());\n</code></pre>\n\n<p>Is it just a semantics/readability choice, since you could read the first construct as <code>do \"nothing\" while \"conditions\"</code>? Or is there some additional benefit I'm missing?</p>\n", "tags": ["java", "while-loop", "do-while"], "title": "Do &quot;nothing&quot; while &quot;condition&quot;", "answers": [{"body": "<p>If you will read comment above the code, It is mentioned that...</p>\n\n<p>If the caller is not a <code>ForkJoinTask</code>, this method is behaviorally equivalent to</p>\n\n<pre><code>while (!blocker.isReleasable())\n   if (blocker.block())\n      return;\n}\n</code></pre>\n\n<p>So it is just another form to implement above code in else part...!!</p>\n\n<p>In <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/concurrent/ForkJoinPool.java#l520\" rel=\"nofollow\">Style notes</a> it is mentioned that, </p>\n\n<blockquote>\n  <p>There are several occurrences of the unusual \"do {} while\n   (!cas...)\"  which is the simplest way to force an update of a\n   CAS'ed variable.</p>\n</blockquote>\n\n<p>And if you will see implementation of <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ForkJoinPool.ManagedBlocker.html\" rel=\"nofollow\">ManagedLocker#isReleasable</a>, It is updating the lock and returns <code>true</code> if blocking is unnecessary.</p>\n\n<p><strong><em>Interpretation :</em></strong></p>\n\n<p>Blank while loops are used to provide an interrupt until some condition reset to true/false.</p>\n\n<p>Here, <code>do { } while(!...)</code> is a blocker/interrupt until <code>blocker.block()</code> will be <code>true</code> when <code>blocker.isReleasable()</code> is <code>false</code>. Loop will continue execution while <code>blocker</code> is not releasable (<code>!blocker.isReleasable()</code>) and <code>blocker</code> is not blocked !! Execution will be out of loop as soon as <code>blocker.block()</code> will set to true.</p>\n\n<p>Note that, <code>do{ } while(...)</code> does not update CAS variable, but it guarantee that program will wait until variable gets updated (force to wait until variable gets updated).  </p>\n", "title": "Do &quot;nothing&quot; while &quot;condition&quot;", "tags": ["java", "while-loop", "do-while"], "link": "http://stackoverflow.com/questions/24609564/do-nothing-while-condition/24609841#24609841", "question_id": 24609564, "answer_id": 24609841}, {"body": "<p>If you read the comments at top of the file, just below the class declaration, there is a section which explains the use of this construct:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Style notes\n\n===========\n\n[...]\n\nThere are several occurrences of the unusual \"do {} while\n(!cas...)\"  which is the simplest way to force an update of a\nCAS'ed variable. There are also other coding oddities (including\nseveral unnecessary-looking hoisted null checks) that help\nsome methods perform reasonably even when interpreted (not\ncompiled).\n</code></pre>\n", "title": "Do &quot;nothing&quot; while &quot;condition&quot;", "tags": ["java", "while-loop", "do-while"], "link": "http://stackoverflow.com/questions/24609564/do-nothing-while-condition/24609901#24609901", "question_id": 24609564, "answer_id": 24609901}, {"body": "<p><code>ForkJoinPool</code> makes extensive use of <code>compareAndSwap...</code> from <code>sun.misc.Unsafe</code> and most of the occurrences of <code>do {} while (...)</code> in <code>ForkJoinPool</code> can &mdash; as mentioned by other answers &mdash; be explained by this comment under the heading Style notes:</p>\n\n<blockquote>\n<pre><code>* There are several occurrences of the unusual \"do {} while\n* (!cas...)\"  which is the simplest way to force an update of a\n* CAS'ed variable. \n</code></pre>\n</blockquote>\n\n<p>The choice to use write a <code>while</code>-loop with an empty body as <code>do {} while (condition)</code> seems however to be a mostly stylistic choice. This is perhaps clearer in <code>HashMap</code>, which happened to be updated in Java 8.</p>\n\n<p>In the Java 7 <code>HashMap</code> you can find this:</p>\n\n<pre><code>while (index &lt; t.length &amp;&amp; (next = t[index++]) == null)\n    ;\n</code></pre>\n\n<p>While much of the code around it has also changed, it is clear that the replacement in Java 8 is this:</p>\n\n<pre><code>do {} while (index &lt; t.length &amp;&amp; (next = t[index++]) == null);\n</code></pre>\n\n<p>The first version has the weakness that if the lone semicolon happened to be deleted it would change the meaning of the program depending on the following line.</p>\n\n<p>As seen below, bytecode generated by <code>while (...) {}</code> and <code>do {} while (...);</code> is slightly different, but not in any way that should affect anything when run.</p>\n\n<p>Java code:</p>\n\n<pre><code>class WhileTest {\n    boolean condition;\n\n    void waitWhile() {\n        while(!condition);\n    }\n\n    void waitDoWhile() {\n        do {} while(!condition);\n    }\n}\n</code></pre>\n\n<p>Generated code:</p>\n\n<pre><code>class WhileTest {\n  boolean condition;\n\n  WhileTest();\n    Code:\n       0: aload_0       \n       1: invokespecial #1                  // Method java/lang/Object.\"&lt;init&gt;\":()V\n       4: return        \n\n  void waitWhile();\n    Code:\n       0: aload_0       \n       1: getfield      #2                  // Field condition:Z\n       4: ifne          10\n       7: goto          0\n      10: return        \n\n  void waitDoWhile();\n    Code:\n       0: aload_0       \n       1: getfield      #2                  // Field condition:Z\n       4: ifeq          0\n       7: return        \n}\n</code></pre>\n", "title": "Do &quot;nothing&quot; while &quot;condition&quot;", "tags": ["java", "while-loop", "do-while"], "link": "http://stackoverflow.com/questions/24609564/do-nothing-while-condition/24613352#24613352", "question_id": 24609564, "answer_id": 24613352}, {"body": "<p>Leaving aside any potential performance benefits, there is a clear readability benefit.</p>\n\n<p>With <code>while (X) ;</code> the trailing semicolon is not always obvious at first glance, you may be confused into thinking that the following statement or statements are inside the loop. For example:</p>\n\n<pre><code>while (x==process(y));\nif (z=x) {\n    // do stuff.\n}\n</code></pre>\n\n<p>It would be very easy to misread the above as having the if statement inside the loop, and even if you did read it correctly it would be easy to think that it was a programming mistake and the if should be inside the loop.</p>\n\n<p>With <code>do {} while(X);</code> though it is immediately at a glance clear that there is no body to the loop.</p>\n", "title": "Do &quot;nothing&quot; while &quot;condition&quot;", "tags": ["java", "while-loop", "do-while"], "link": "http://stackoverflow.com/questions/24609564/do-nothing-while-condition/24626896#24626896", "question_id": 24609564, "answer_id": 24626896}], "creation_date": 1404732621, "score": 67, "link": "http://stackoverflow.com/questions/24609564/do-nothing-while-condition", "question_id": 24609564}, {"body": "<p>When I iterate over a collection using the new syntactic sugar of Java 8, such as</p>\n\n<pre><code>myStream.forEach(item -&gt; {\n  // do something useful\n});\n</code></pre>\n\n<p>Isn't this equivalent to the 'old syntax' snippet below?</p>\n\n<pre><code>myStream.forEach(new Consumer&lt;Item&gt;() {\n  @Override\n  public void accept(Item item) {\n    // do something useful\n  }\n});\n</code></pre>\n\n<p>Does this mean a new anonymous <code>Consumer</code> object is created on the heap every time I iterate over a collection? How much heap space does this take? What performance implications does it have? Does it mean I should rather use the old style for loops when iterating over large multi-level data structures?</p>\n", "tags": ["java", "lambda", "java-8"], "title": "Does a lambda expression create an object on the heap every time it&#39;s executed?", "answers": [{"body": "<p>You are passing a new instance to the <code>forEach</code> method. Every time you do that you create a new object but not one for every loop iteration. Iteration is done inside <code>forEach</code> method using the same 'callback' object instance until it is done with the loop.</p>\n\n<p>So the memory used by the loop does not depend on the size of the collection.</p>\n\n<blockquote>\n  <p>Isn't this equivalent to the 'old syntax' snippet?</p>\n</blockquote>\n\n<p>Yes. It has slight differences at a very low level but I don't think you should care about them. Lamba expressions use the invokedynamic feature instead of anonymous classes.</p>\n", "title": "Does a lambda expression create an object on the heap every time it&#39;s executed?", "tags": ["java", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/27524445/does-a-lambda-expression-create-an-object-on-the-heap-every-time-its-executed/27524492#27524492", "question_id": 27524445, "answer_id": 27524492}, {"body": "<p>It is equivalent but not identical. Simply said, if a lambda expression does not captures values, it will be a singleton that is re-used on every invocation.</p>\n\n<p>The behavior is not exactly specified. The JVM is given a big freedom how to implement it. Currently, Oracle\u2019s JVM creates (at least) one instance per lambda expression (i.e. doesn\u2019t share instance between different identical expressions) but creates singleton for all expression which don\u2019t capture values.</p>\n\n<p>You may read <a href=\"http://stackoverflow.com/a/23991339/2711488\">this answer</a> for more details. There, I not only gave a more detailed description but also testing code to observe the current behavior.</p>\n\n<hr>\n\n<p>This is covered by the The Java\u00ae Language Specification, chapter \u201c<a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.27.4\">15.27.4. Run-time Evaluation of Lambda Expressions</a>\u201d</p>\n\n<p>Summarized:</p>\n\n<blockquote>\n  <p>These rules are meant to offer flexibility to implementations of the Java programming language, in that:</p>\n  \n  <ul>\n  <li><p>A new object need not be allocated on every evaluation.</p></li>\n  <li><p>Objects produced by different lambda expressions need not belong to different classes (if the bodies are identical, for example).</p></li>\n  <li><p>Every object produced by evaluation need not belong to the same class (captured local variables might be inlined, for example).</p></li>\n  <li><p>If an \"existing instance\" is available, it need not have been created at a previous lambda evaluation (it might have been allocated during the enclosing class's initialization, for example).</p></li>\n  </ul>\n</blockquote>\n", "title": "Does a lambda expression create an object on the heap every time it&#39;s executed?", "tags": ["java", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/27524445/does-a-lambda-expression-create-an-object-on-the-heap-every-time-its-executed/27524543#27524543", "question_id": 27524445, "answer_id": 27524543}, {"body": "<p>When an instance representing the lambda is created sensitively depends on the exact contents of your lambda's body. Namely, the key factor is what the lambda <em>captures</em> from the lexical environment. If it doesn't capture any state which is variable from creation to creation, then an instance will not be created each time the for-each loop is entered. Instead a synthetic method will be generated at compile time and the lambda use site will just receive a singleton object that delegates to that method.</p>\n\n<p>Further note that this aspect is implementation-dependent and you can expect future refinements and advancements on HotSpot towards greater efficiency. There are general plans to e.g. make a lightweight object without a full corresponding class, which has just enough information to forward to a single method.</p>\n\n<p>Here is a good, accessible in-depth article on the topic:</p>\n\n<p><a href=\"http://www.infoq.com/articles/Java-8-Lambdas-A-Peek-Under-the-Hood\">http://www.infoq.com/articles/Java-8-Lambdas-A-Peek-Under-the-Hood</a></p>\n", "title": "Does a lambda expression create an object on the heap every time it&#39;s executed?", "tags": ["java", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/27524445/does-a-lambda-expression-create-an-object-on-the-heap-every-time-its-executed/27524552#27524552", "question_id": 27524445, "answer_id": 27524552}], "creation_date": 1418815259, "score": 67, "link": "http://stackoverflow.com/questions/27524445/does-a-lambda-expression-create-an-object-on-the-heap-every-time-its-executed", "question_id": 27524445}, {"body": "<p>Here is some code for a DFA, implemented as an array of strings:</p>\n\n<pre><code>public class StringArray\n{\n    private static final String[] stringArray = {\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\0\\0\\0\\0\\30\\0\\31\\22\\23\\26\\24\\0\\25\\15\\27\\5\\4\\4\\4\\4\\4\\4\\4\\4\\4\\0\\0\\0\\0\\0\\0\\0\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\0\\0\\0\\0\\3\\0\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\0\\0\\0\\0\\0\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\1\\1\\1\\1\\1\\1\\1\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\1\\1\\1\\1\\3\\1\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\1\\1\\1\\1\\1\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\14\\1\\4\\4\\4\\4\\4\\4\\4\\4\\4\\4\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\17\\16\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\17\\16\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\14\\1\\12\\12\\12\\12\\12\\12\\12\\12\\13\\13\\1\\1\\1\\1\\1\\1\\1\\1\\10\\1\\1\\17\\16\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\6\\1\\1\\1\\1\\1\\1\\1\\1\\1\\10\\1\\1\\17\\16\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\6\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\7\\7\\7\\7\\7\\7\\7\\7\\7\\7\\0\\0\\0\\0\\0\\0\\0\\7\\7\\7\\7\\7\\7\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\7\\7\\7\\7\\7\\7\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\7\\7\\7\\7\\7\\7\\7\\7\\7\\7\\1\\1\\1\\1\\1\\1\\1\\7\\7\\7\\7\\7\\7\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\7\\7\\7\\7\\7\\7\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\11\\11\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\11\\11\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\14\\1\\12\\12\\12\\12\\12\\12\\12\\12\\13\\13\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\17\\16\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\17\\16\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\14\\0\\13\\13\\13\\13\\13\\13\\13\\13\\13\\13\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\17\\16\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\17\\16\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\14\\14\\14\\14\\14\\14\\14\\14\\14\\14\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\17\\16\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\17\\16\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\14\\14\\14\\14\\14\\14\\14\\14\\14\\14\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\20\\0\\20\\0\\0\\21\\21\\21\\21\\21\\21\\21\\21\\21\\21\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\21\\21\\21\\21\\21\\21\\21\\21\\21\\21\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\21\\21\\21\\21\\21\\21\\21\\21\\21\\21\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\16\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\16\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\34\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\33\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\32\\0\\0\\0\\0\\32\\0\\0\\0\\0\\0\\0\\0\\0\\47\\47\\47\\47\\52\\52\\52\\52\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\32\\0\\0\\0\\0\\0\\35\\0\\0\\0\\40\\0\\0\\0\\0\\0\\0\\0\\37\\0\\0\\0\\41\\0\\36\\57\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\42\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\43\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\44\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\45\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\46\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\54\\0\\0\\0\\0\\0\\0\\0\\0\\50\\50\\50\\50\\50\\50\\50\\50\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\55\\0\\0\\0\\0\\0\\0\\0\\0\\51\\51\\51\\51\\51\\51\\51\\51\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\56\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\54\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\53\\53\\53\\53\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\55\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\60\\60\\60\\60\\60\\60\\60\\60\\60\\60\\0\\0\\0\\0\\0\\0\\0\\60\\60\\60\\60\\60\\60\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\60\\60\\60\\60\\60\\60\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\61\\61\\61\\61\\61\\61\\61\\61\\61\\61\\0\\0\\0\\0\\0\\0\\0\\61\\61\\61\\61\\61\\61\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\61\\61\\61\\61\\61\\61\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\62\\62\\62\\62\\62\\62\\62\\62\\62\\62\\0\\0\\0\\0\\0\\0\\0\\62\\62\\62\\62\\62\\62\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\62\\62\\62\\62\\62\\62\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\63\\63\\63\\63\\63\\63\\63\\63\\63\\63\\0\\0\\0\\0\\0\\0\\0\\63\\63\\63\\63\\63\\63\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\63\\63\\63\\63\\63\\63\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\64\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\",\n    \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    };\n}\n</code></pre>\n\n<p>I thought I could save some space by using one long string instead of a string array:</p>\n\n<pre><code>public class LongString\n{\n    private static final String longString =\n      \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\2\\0\\0\\0\\0\\30\\0\\31\\22\\23\\26\\24\\0\\25\\15\\27\\5\\4\\4\\4\\4\\4\\4\\4\\4\\4\\0\\0\\0\\0\\0\\0\\0\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\0\\0\\0\\0\\3\\0\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\0\\0\\0\\0\\0\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\1\\1\\1\\1\\1\\1\\1\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\1\\1\\1\\1\\3\\1\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\3\\1\\1\\1\\1\\1\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\14\\1\\4\\4\\4\\4\\4\\4\\4\\4\\4\\4\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\17\\16\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\17\\16\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\14\\1\\12\\12\\12\\12\\12\\12\\12\\12\\13\\13\\1\\1\\1\\1\\1\\1\\1\\1\\10\\1\\1\\17\\16\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\6\\1\\1\\1\\1\\1\\1\\1\\1\\1\\10\\1\\1\\17\\16\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\6\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\7\\7\\7\\7\\7\\7\\7\\7\\7\\7\\0\\0\\0\\0\\0\\0\\0\\7\\7\\7\\7\\7\\7\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\7\\7\\7\\7\\7\\7\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\7\\7\\7\\7\\7\\7\\7\\7\\7\\7\\1\\1\\1\\1\\1\\1\\1\\7\\7\\7\\7\\7\\7\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\7\\7\\7\\7\\7\\7\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\11\\11\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\11\\11\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\14\\1\\12\\12\\12\\12\\12\\12\\12\\12\\13\\13\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\17\\16\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\17\\16\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\14\\0\\13\\13\\13\\13\\13\\13\\13\\13\\13\\13\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\17\\16\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\17\\16\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\14\\14\\14\\14\\14\\14\\14\\14\\14\\14\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\17\\16\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\17\\16\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\14\\14\\14\\14\\14\\14\\14\\14\\14\\14\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\20\\0\\20\\0\\0\\21\\21\\21\\21\\21\\21\\21\\21\\21\\21\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\21\\21\\21\\21\\21\\21\\21\\21\\21\\21\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\21\\21\\21\\21\\21\\21\\21\\21\\21\\21\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\16\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\16\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\34\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\\32\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\33\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\32\\0\\0\\0\\0\\32\\0\\0\\0\\0\\0\\0\\0\\0\\47\\47\\47\\47\\52\\52\\52\\52\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\32\\0\\0\\0\\0\\0\\35\\0\\0\\0\\40\\0\\0\\0\\0\\0\\0\\0\\37\\0\\0\\0\\41\\0\\36\\57\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\42\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\43\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\44\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\45\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\46\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\54\\0\\0\\0\\0\\0\\0\\0\\0\\50\\50\\50\\50\\50\\50\\50\\50\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\55\\0\\0\\0\\0\\0\\0\\0\\0\\51\\51\\51\\51\\51\\51\\51\\51\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\56\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\54\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\53\\53\\53\\53\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\55\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\60\\60\\60\\60\\60\\60\\60\\60\\60\\60\\0\\0\\0\\0\\0\\0\\0\\60\\60\\60\\60\\60\\60\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\60\\60\\60\\60\\60\\60\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\61\\61\\61\\61\\61\\61\\61\\61\\61\\61\\0\\0\\0\\0\\0\\0\\0\\61\\61\\61\\61\\61\\61\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\61\\61\\61\\61\\61\\61\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\62\\62\\62\\62\\62\\62\\62\\62\\62\\62\\0\\0\\0\\0\\0\\0\\0\\62\\62\\62\\62\\62\\62\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\62\\62\\62\\62\\62\\62\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\63\\63\\63\\63\\63\\63\\63\\63\\63\\63\\0\\0\\0\\0\\0\\0\\0\\63\\63\\63\\63\\63\\63\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\63\\63\\63\\63\\63\\63\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\64\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"\n    + \"\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\\1\";\n}\n</code></pre>\n\n<p>As it turns out, I was wrong. Eclipse Kepler generates the following class files:</p>\n\n<pre><code> 8516 Nov 28 22:42 StringArray.class\n10005 Nov 28 22:42 LongString.class\n</code></pre>\n\n<p>How come the second class is even bigger than the first class? Do very long strings incur some space penalty I am not aware of?</p>\n", "tags": ["java", "arrays", "eclipse", "string", "bytecode"], "title": "Why does one long string take MORE space than lots of small strings?", "answers": [{"body": "<p>You have <strong>18</strong> duplicate Strings in your array (<code>StringArray</code> class). Since each array entry is a separate String literal, there will only be constant pool entries for <strong>unique</strong> Strings. However, in your second example (<code>LongString</code> class), all the duplicates are kept and concatenated at compile-time.</p>\n\n<p>It's a bit hard to look at the class file you posted, because of the size of the Strings. I used a shorter version, but it still has the same concept:</p>\n\n<pre><code>public class LongString\n{\n    private static final String longString = \n        \"a\" + \"a\" + \"a\" + \"a\" + \"a\" + \"a\" + \"a\" + \"a\" + \"b\";\n}\n</code></pre>\n\n<hr>\n\n<pre><code>public class StringArray\n{\n    private static final String[] stringArray = {\n        \"a\", \"a\", \"a\", \"a\", \"a\", \"a\", \"a\", \"a\",\n        \"b\"\n    };\n}\n</code></pre>\n\n<p>If we open up the class file <code>LongString.class</code>, you can see the entire String:</p>\n\n<p><img src=\"http://i.stack.imgur.com/v174d.png\" alt=\"LongString.class\"></p>\n\n<p>But if you look at the class file <code>StringArray.class</code>, duplicates have been removed:</p>\n\n<p><img src=\"http://i.stack.imgur.com/FNKnm.png\" alt=\"enter image description here\"></p>\n\n<p><sub>The space between <code>a</code> and <code>b</code> is <code>01 00 01</code>, which marks a <a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.4.7\"><code>CONSTANT_Utf8_info</code></a> entry of length <code>1</code>.</sub></p>\n\n<p>In your case, reusing Strings would save 2,304 characters. </p>\n", "title": "Why does one long string take MORE space than lots of small strings?", "tags": ["java", "arrays", "eclipse", "string", "bytecode"], "link": "http://stackoverflow.com/questions/27196376/why-does-one-long-string-take-more-space-than-lots-of-small-strings/27196595#27196595", "question_id": 27196376, "answer_id": 27196595}, {"body": "<p>To expand on August's answer, I figured I should explain exactly how this is compiled and what takes up space at the binary level.</p>\n\n<p>To simplify, I'll use the following example with shorter strings. The important part is that there are some duplicate strings.</p>\n\n<pre><code>public class StringArray\n{\n    private static final String[] stringArray = {\n        \"AAA\",\n        \"AAB\",\n        \"AAA\",\n        \"AAC\",\n        \"AAA\"\n    };\n}\n\npublic class LongString\n{\n    private static final String longString =\n        \"AAA\"\n        + \"AAB\"\n        + \"AAA\"\n        + \"AAC\"\n        + \"AAA\"\n    ;       \n}\n</code></pre>\n\n<p>Now there are three important things to understand when compiling this code.</p>\n\n<ol>\n<li><strong>Constant string concatenation is done at compile time.</strong> In fact, this is a special case of compile time simplification of constant expressions. You can find the exact rules for what is considered a constant expression in the Java Language Specification.</li>\n<li><strong>Array brace initializers are syntactic sugar</strong>. The code is equivalent to creating an array and assigning the elements one by one. (Note that this is specific to Java bytecode. Dalvik (i.e. Android) does have special shorthand instructions for array initialization)</li>\n<li><strong>Inline initializers are syntactic sugar</strong>. The code is equivalent to manually initializing the fields in the static initializer method.</li>\n</ol>\n\n<p><strong>Edit</strong>: One minor detail is that in the special case of static final fields initialized to a constant expression inline, the field is initialized using the ConstantValue attribute instead of in the static initializer and all uses are inlined. So in the case of <code>LongString</code>, #3 will actually result in different bytecode, but since the constant pool entries for the string are the same, the filesize taken up by the strings won't change.</p>\n\n<p>Put them together, and the above code is equivalent to the following.</p>\n\n<pre><code>public class StringArray {\n    private static final String[] stringArray;\n\n    static {\n        String[] temp = new String[5];\n        temp[0] = \"AAA\";        \n        temp[1] = \"AAB\";        \n        temp[2] = \"AAA\";        \n        temp[3] = \"AAC\";        \n        temp[4] = \"AAA\";    \n        stringArray = temp;    \n    } \n}\n\npublic class LongString {\n    private static final String longString;\n\n    static {\n        longString = \"AAAAABAAAAACAAA\";\n    } \n}\n</code></pre>\n\n<p>Now this desugared code still shows the duplicate strings multiple times in the array example. To understand the classfile size behavior, you have to understand what it is compiled to.</p>\n\n<p>When you access a constant string, the bytecode contains a load constant instruction (<code>ldc</code> or <code>ldc_w</code>), which is a one byte opcode followed by an index into the class's constant pool. The constant pool is a seperate section of the classfile where a list of constants is stored. Obviously, the compiler will only store each constant once. </p>\n\n<p>So the bytecode for StringArray looks something like this (stripping away a few details that aren't relevant here). Note that there are only 3 unique strings stored in the constant pool. (Actually there are a lot more constant pool entries relating to other parts of the classfile, but they're not important here).</p>\n\n<pre><code>.class super StringArray\n\n.field static final private stringArray [Ljava/lang/String;\n\n.const [1] = String 'AAA'\n.const [2] = String 'AAB'\n.const [3] = String 'AAC'\n\n.method static &lt;clinit&gt; : ()V\n    iconst_5\n    anewarray java/lang/String\n    astore_0\n    aload_0\n    iconst_0\n    ldc [1]\n    aastore\n    aload_0\n    iconst_1\n    ldc [2]\n    aastore\n    aload_0\n    iconst_2\n    ldc [1]\n    aastore\n    aload_0\n    iconst_3\n    ldc [3]\n    aastore\n    aload_0\n    iconst_4\n    ldc [1]\n    aastore\n    aload_0\n    putstatic StringArray stringArray [Ljava/lang/String;\n    return\n.end method\n</code></pre>\n\n<p>Whereas LongString looks something like</p>\n\n<pre><code>.class super LongString\n\n.field static final private longString Ljava/lang/String;\n\n.const [1] = String 'AAAAABAAAAACAAA'\n\n.method static &lt;clinit&gt; : ()V\n    ldc [1]\n    putstatic LongString longString Ljava/lang/String;\n    return\n.end method\n</code></pre>\n\n<p>So with the first version, duplicate strings can be stored only once, whereas with the second version, the entire string has to be stored. So is the first version always better? Not so fast. It has the advantage of not storing duplicated strings, but as you may have noticed, there is a big per element overhead in the array initialization. Which one is better depends on how long your strings are and how many duplicates you have.</p>\n\n<p>P.S. At the binary level, constant strings are encoded with a modified UTF8 encoding. The upshot is that characters 1-127 are one byte each but null characters are two bytes. So you can save some space by offsetting everything 1.</p>\n", "title": "Why does one long string take MORE space than lots of small strings?", "tags": ["java", "arrays", "eclipse", "string", "bytecode"], "link": "http://stackoverflow.com/questions/27196376/why-does-one-long-string-take-more-space-than-lots-of-small-strings/27196950#27196950", "question_id": 27196376, "answer_id": 27196950}], "creation_date": 1417211674, "score": 66, "link": "http://stackoverflow.com/questions/27196376/why-does-one-long-string-take-more-space-than-lots-of-small-strings", "question_id": 27196376}, {"body": "<p>The Java language specification specifies that </p>\n\n<blockquote>\n  <p>In the Java programming language arrays are objects (\u00a74.3.1), are dynamically created, and may be assigned to variables of type Object (\u00a74.3.2). All methods of class <code>Object</code> may be invoked on an array.</p>\n</blockquote>\n\n<p>So, considering arrays are objects \u2014 why did the Java designers make the decision not to allow inherit and override from it, for example, <a href=\"http://stackoverflow.com/questions/10295600/is-it-possible-in-java-to-override-tostring-for-an-objects-array\"><code>toString()</code></a> or <code>equals()</code>?</p>\n\n<p>The current syntax wouldn't allow creating anonymous classes with an array as the base class, but I don't think <em>that</em> was the reason for their decision.</p>\n", "tags": ["java", "arrays", "inheritance", "compilation"], "title": "Why are arrays Objects, but can not be used as a base class?", "answers": [{"body": "<p>I came across <em><a href=\"http://www.javaworld.com/article/2077305/learn-java/objects-and-arrays.html\">UNDER THE HOOD - Objects and arrays</a></em> which explains almost anything you need to know about how JVM handles arrays. In JVM, arrays are handled with special <em>bytecodes</em>, not like other objects we are familiar with.</p>\n\n<blockquote>\n  <p>In the JVM instruction set, all objects are instantiated and accessed\n  with the same set of opcodes, <em>except</em> for arrays. In Java, <em>arrays are\n  full-fledged objects</em>, and, like any other object in a Java program,\n  are created dynamically. Array references can be used anywhere a\n  reference to type Object is called for, and any method of Object can\n  be invoked on an array. Yet, in the Java virtual machine, <em>arrays are\n  handled with special bytecodes</em>.</p>\n  \n  <p>As with any other object, arrays <em>cannot be declared as local\n  variables</em>; only array references can. Array objects themselves always\n  contain either an array of primitive types or an array of object\n  references. If you declare an array of objects, you get an array of\n  object references. The objects themselves must be explicitly created\n  with new and assigned to the elements of the array.</p>\n</blockquote>\n\n<p>Arrays are <em>dynamically</em> created objects, and they serve as a container that hold a (constant) number of objects of the same type. It looks like arrays are not like any other object, and that's why they are treated differently.</p>\n", "title": "Why are arrays Objects, but can not be used as a base class?", "tags": ["java", "arrays", "inheritance", "compilation"], "link": "http://stackoverflow.com/questions/27504925/why-are-arrays-objects-but-can-not-be-used-as-a-base-class/27505095#27505095", "question_id": 27504925, "answer_id": 27505095}, {"body": "<p>Java was a compromise between non-object languages and very slow languages of that time where everything was an object (think about <a href=\"http://en.wikipedia.org/wiki/Smalltalk\">Smalltalk</a>).</p>\n\n<p>Even in more recent languages, having a <strong>fast</strong> structure at the language level for arrays (and usually maps) is considered a strategic goal. Most people wouldn't like the weight of an inheritable object for arrays, and certainly nobody wanted this before JVM advances like JIT. </p>\n\n<p>That's why arrays, while being objects, weren't designed as class instances (<a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.3.1\">\"An object is a class instance or an array\"</a>). There would be little benefit in having the ability to override a method on an array, and certainly not a great-enough one to counterbalance the need to check for the right method to apply (and in my opinion not a great-one enough to counterbalance the increased difficulty in code reading, similar to what happens when you override operators).</p>\n", "title": "Why are arrays Objects, but can not be used as a base class?", "tags": ["java", "arrays", "inheritance", "compilation"], "link": "http://stackoverflow.com/questions/27504925/why-are-arrays-objects-but-can-not-be-used-as-a-base-class/27505116#27505116", "question_id": 27504925, "answer_id": 27505116}, {"body": "<p>I'd like to point out this <a href=\"http://www.artima.com/underthehood/objectsP.html\">article</a>. It seems as though arrays and objects follow different opcodes. I can't honestly summarize it more than that however it seems, arrays are simply not treated as <code>Objects</code> like we're normally used to so they don't inherit <code>Object</code> methods.</p>\n\n<p>Full credits to the author of that post as it's a very interesting read, both short &amp; detailed.</p>\n\n<hr>\n\n<p>Upon further digging into the topic via multiple sources I've decided to give a more elaborate version of my previous answer.</p>\n\n<p>The first thing to note that instantiation of <em>Objects</em> and <em>Arrays</em> are very different within the JVM, their follow their respective bytecode.</p>\n\n<h2><strong>Object:</strong></h2>\n\n<p><code>Object</code> instantiation follows a simple Opcode <code>new</code> which is a combination of two operands - <code>indexbyte1</code> &amp; <code>indexbyte2</code>. Once instantiated the JVM pushes the <em>reference</em> to this object onto the <code>stack</code>. This occurs for all objects irrespective of their types.</p>\n\n<hr>\n\n<h2><strong>Arrays:</strong></h2>\n\n<p><code>Array</code> Opcodes <em>(regarding instantiation of an array)</em> however are divided into three different codes.</p>\n\n<blockquote>\n  <p><code>newarray</code> - pops length, allocates new array of primitive types of type indicated by atype, pushes objectref of new array</p>\n</blockquote>\n\n<p><code>newarray</code> opcode is used when creating arrays that involve primitive datatypes (<code>byte</code> <code>short</code> <code>char</code> <code>int</code> <code>long</code> <code>float</code> <code>double</code> <code>boolean</code>) rather than object references.</p>\n\n<blockquote>\n  <p><code>anewarray</code> - pops length, allocates a new array of objects of class indicated by indexbyte1 and indexbyte2, pushes objectref of new array</p>\n</blockquote>\n\n<p><code>anewarray</code> opcode is used when creating arrays of object references</p>\n\n<blockquote>\n  <p><code>multianewarray</code> - pops dimensions number of array lengths, allocates a new multidimensional array of class indicated by indexbyte1 and indexbyte2, pushes objectref of new array</p>\n</blockquote>\n\n<p><code>multianewarray</code> instruction is used when allocating multi-dimensional arrays</p>\n\n<hr>\n\n<p>Object <em>can</em> be a class instance or an array. </p>\n\n<p>Take from <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.3.1\">Oracle Docs</a> </p>\n\n<blockquote>\n  <p>A class instance is explicitly created by a class instance creation expression </p>\n</blockquote>\n\n<p><em>BUT</em></p>\n\n<blockquote>\n  <p>An array is explicitly created by an array creation expression </p>\n</blockquote>\n\n<p>This goes hand in hand with the information regarding the opcodes. Arrays are simply not developed to be class interfaces but are instead <em>explicitly</em> created by array creation expression thus naturally wouldn't <em>implicitly</em> be able to inherit and/or override <code>Object</code>.</p>\n\n<p>As we have seen, it has nothing to do with the fact that arrays may hold primitive datatypes. After giving it some thought though, it isn't very common to come across situations where one might want to <code>toString()</code> or <code>equals()</code> however was still a very interesting question to try and answer.</p>\n\n<hr>\n\n<h2>Resources:</h2>\n\n<p><a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.3.1\">Oracle-Docs chapter 4.3.1</a></p>\n\n<p><a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.10.1\">Oracle-Docs chapter 15.10.1</a></p>\n\n<p><a href=\"http://www.artima.com/underthehood/objectsP.html\">Artima - UnderTheHood</a></p>\n", "title": "Why are arrays Objects, but can not be used as a base class?", "tags": ["java", "arrays", "inheritance", "compilation"], "link": "http://stackoverflow.com/questions/27504925/why-are-arrays-objects-but-can-not-be-used-as-a-base-class/27505121#27505121", "question_id": 27504925, "answer_id": 27505121}, {"body": "<p>There are many classes in standard java library that you cannot subclass, arrays aren't the only example. Consider <code>String</code>, or <code>StringBuffer</code>, or any of the \"primitive wrappers\", like <code>Integer</code>, or <code>Double</code>.\nThere are optimizations that JVM does based on knowing the exact structure of these objects when it deals with them (like unboxing the primitives, or manipulating array memory at byte level). If you could override anything, it would not be possible, and affect the performance of  the programs very badly. </p>\n", "title": "Why are arrays Objects, but can not be used as a base class?", "tags": ["java", "arrays", "inheritance", "compilation"], "link": "http://stackoverflow.com/questions/27504925/why-are-arrays-objects-but-can-not-be-used-as-a-base-class/27505130#27505130", "question_id": 27504925, "answer_id": 27505130}], "creation_date": 1418733723, "score": 66, "link": "http://stackoverflow.com/questions/27504925/why-are-arrays-objects-but-can-not-be-used-as-a-base-class", "question_id": 27504925}, {"body": "<hr>\n\n<h3>Important note: this has been accepted as a <a href=\"https://jira.spring.io/browse/SPR-12349\">Spring issue</a> with a target fix version of 4.1.2.</h3>\n\n<hr>\n\n<p>My goal is to achieve O(1) space complexity when generating an HTTP response from Hibernate's <code>ScrollableResults</code>. I want to keep the standard mechanism where a <code>MessageConverter</code> is dispatched to handle an object returned from a <code>@Controller</code>. I have set up the following:</p>\n\n<ol>\n<li><code>MappingJackson2HttpMessageConverter</code> enriched with a <code>JsonSerializer</code> which handles a Java 8 <code>Stream</code>;</li>\n<li>a custom <code>ScrollableResultSpliterator</code> needed to wrap <code>ScrollableResults</code> into a <code>Stream</code>;</li>\n<li><code>OpenSessionInViewInterceptor</code> needed to keep the Hibernate session open within the <code>MessageConverter</code>;</li>\n<li>set <code>hibernate.connection.release_mode</code> to <code>ON_CLOSE</code>;</li>\n<li>ensure that the JDBC connection has the necessary ResultSet holdability: <code>con.setHoldability(ResultSet.HOLD_CURSORS_OVER_COMMIT)</code>.</li>\n</ol>\n\n<p>Additionally, I need a database which supports that kind of holdability. PostgreSQL is such a database and I have no trouble with this.</p>\n\n<p>The final stumbling point I have encountered is the policy used by <code>HibernateTransactionManager</code> on transaction commit: unless the underlying session is \"Hibernate-managed\", it will <code>disconnect()</code> it, closing my cursor along with everything else. Such a policy is useful in some special scenarios, specifically \"conversation-scoped sessions\", which  are far removed from my requirements.</p>\n\n<p>I have managed to work around this with a bad hack: I had to override the offending method with a method which is effectively a copy-paste of the original except for the removed <code>disconnect()</code> call, but it must resort to reflection to access private API.</p>\n\n<pre><code>public class NoDisconnectHibernateTransactionManager extends HibernateTransactionManager\n{\n  private static final Logger logger = LoggerFactory.getLogger(NoDisconnectHibernateTransactionManager.class);\n\n  public NoDisconnectHibernateTransactionManager(SessionFactory sf) { super(sf); }\n\n  @Override\n  protected void doCleanupAfterCompletion(Object transaction) {\n    final JdbcTransactionObjectSupport txObject = (JdbcTransactionObjectSupport) transaction;\n    final Class&lt;?&gt; c = txObject.getClass();\n    try {\n      // Remove the session holder from the thread.\n      if ((Boolean)jailBreak(c.getMethod(\"isNewSessionHolder\")).invoke(txObject))\n        TransactionSynchronizationManager.unbindResource(getSessionFactory());\n\n      // Remove the JDBC connection holder from the thread, if exposed.\n      if (getDataSource() != null)\n        TransactionSynchronizationManager.unbindResource(getDataSource());\n\n      final SessionHolder sessionHolder = (SessionHolder)jailBreak(c.getMethod(\"getSessionHolder\")).invoke(txObject);\n      final Session session = sessionHolder.getSession();\n      if ((Boolean)jailBreak(HibernateTransactionManager.class.getDeclaredField(\"prepareConnection\")).get(this)\n          &amp;&amp; session.isConnected() &amp;&amp; isSameConnectionForEntireSession(session))\n      {\n        // We're running with connection release mode \"on_close\": We're able to reset\n        // the isolation level and/or read-only flag of the JDBC Connection here.\n        // Else, we need to rely on the connection pool to perform proper cleanup.\n        try {\n          final Connection con = ((SessionImplementor) session).connection();\n          DataSourceUtils.resetConnectionAfterTransaction(con, txObject.getPreviousIsolationLevel());\n        }\n        catch (HibernateException ex) {\n          logger.debug(\"Could not access JDBC Connection of Hibernate Session\", ex);\n        }\n      }\n      if ((Boolean)jailBreak(c.getMethod(\"isNewSession\")).invoke(txObject)) {\n        logger.debug(\"Closing Hibernate Session [{}] after transaction\",  session);\n        SessionFactoryUtils.closeSession(session);\n      }\n      else {\n        logger.debug(\"Not closing pre-bound Hibernate Session [{}] after transaction\", session);\n        if (sessionHolder.getPreviousFlushMode() != null)\n          session.setFlushMode(sessionHolder.getPreviousFlushMode());\n      }\n      sessionHolder.clear();\n    }\n    catch (ReflectiveOperationException e) { throw new RuntimeException(e); }\n  }\n\n  static &lt;T extends AccessibleObject&gt; T jailBreak(T o) { o.setAccessible(true); return o; }\n}\n</code></pre>\n\n<p>Since I regard my approach as the \"right way\" to generate ResultSet-backed responses, and since the Streams API makes this approach very convenient, I would like to solve this in a supported way.</p>\n\n<p>Is there a way to get the same behavior without my hack? If not, would this be a good thing to request via Spring's Jira?</p>\n", "tags": ["java", "hibernate", "java-8", "spring-orm", "open-session-in-view"], "title": "Trouble using ScrollableResults-backed Stream as return type in Spring MVC", "answers": [{"body": "<p>Cleaning up. As Marko Topolnik had said <a href=\"https://jira.spring.io/browse/SPR-12349\" rel=\"nofollow\">here</a> </p>\n\n<blockquote>\n  <p>Yes, I missed this part that the holdability setting is only applied when encountering a pre-existing session. This means that my \"idea\" how it could be done is already the way it is done. It also means that my comment about failures doesn't apply: you either want holdability and skipping the session disconnection \u2014 or you don't need either. So if you can't get holdability, there is no reason not to disconnect the session at commit, therefore there's no reason to activate the \"allowResultSetAccessAfterCompletion\" in that case.</p>\n</blockquote>\n", "title": "Trouble using ScrollableResults-backed Stream as return type in Spring MVC", "tags": ["java", "hibernate", "java-8", "spring-orm", "open-session-in-view"], "link": "http://stackoverflow.com/questions/26324112/trouble-using-scrollableresults-backed-stream-as-return-type-in-spring-mvc/30293535#30293535", "question_id": 26324112, "answer_id": 30293535}], "creation_date": 1413109387, "score": 66, "link": "http://stackoverflow.com/questions/26324112/trouble-using-scrollableresults-backed-stream-as-return-type-in-spring-mvc", "question_id": 26324112}, {"body": "<p>I have always heard that C++ was way more efficient than Java (and that is why most games are developed in C++).</p>\n\n<p>I wrote a small algorithm to solve the \"Eight queens puzzle\" in both Java and C++, using the exact same algorithm, and then started to raise the number or squares.\nWhen reaching checkboards of 20*20 or even 22*22, it appears Java is much more effective (3 seconds vs 66 seconds for C++).</p>\n\n<p>I have no idea why, but I am pretty beginning with C++, so it is possible I made some huge performance mistakes, so I will gladly accept any information that would help me understand what is happening.</p>\n\n<p>Below is the code I use in Java:</p>\n\n<pre><code>import java.awt.Point;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class HuitDames {\n\n    /**\n     * La liste des coordnn\u00e9es des dames.\n     */\n    private static List&lt;Point&gt; positions = new ArrayList&lt;&gt;();\n\n    /**\n     * Largeur de la grille.\n     */\n    private static final int LARGEUR_GRILLE = 22;\n\n\n    /**\n     * @param args the command line arguments\n     */\n    public static void main(String[] args) {\n        int i = 1;\n        placerDame(i);\n        for (Point point : positions) {\n            System.out.println(\"(\" + point.x + \"; \" + point.y + \")\");\n        }\n    }\n\n    /**\n     * Place une dame et return true si la position est bonne.\n     * @param i le num\u00e9ro de la dame.\n     * @return si la position est bonne.\n     */\n    private static boolean placerDame(int i) {\n\n        boolean bonnePosition = false;\n        for (int j = 1; j &lt;= LARGEUR_GRILLE &amp;&amp; bonnePosition == false; j++) {\n            Point emplacement = new Point(i, j);\n            positions.add(emplacement);\n            if (verifierPrise(emplacement) &amp;&amp; (i == LARGEUR_GRILLE || placerDame(i + 1))) {\n                bonnePosition = true;\n            }\n            else {\n                positions.remove(i - 1);\n            }\n        }\n\n        return bonnePosition;\n    }\n\n    /**\n     * V\u00e9rifie que la nouvelle position n'est pas en prise avec une position d\u00e9j\u00e0 pr\u00e9sente.\n     * @param position la position de la nouvelle dame.\n     * @return Si la position convient par rapport aux positions des autres dames.\n     */\n    private static boolean verifierPrise(Point position) {\n        boolean nonPrise = true;\n        for (Point point : positions) {\n            if (!point.equals(position)) {\n                // Cas o\u00f9 sur la m\u00eame colonne.\n                if (position.y == point.y) {\n                    nonPrise = false;\n                }\n                // Cas o\u00f9 sur m\u00eame diagonale.\n                if (Math.abs(position.y - point.y) == Math.abs(position.x - point.x)) {\n                    nonPrise = false;\n                }\n            }\n        }\n\n        return nonPrise;\n    }\n}\n</code></pre>\n\n<p>And below is the code in C++:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;list&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n\nusing namespace std;\n\n\n// Class to represent points.\nclass Point {\n\n    private:\n        double xval, yval;\n\n    public:\n        // Constructor uses default arguments to allow calling with zero, one,\n        // or two values.\n        Point(double x = 0.0, double y = 0.0) {\n                xval = x;\n                yval = y;\n        }\n\n        // Extractors.\n        double x() { return xval; }\n        double y() { return yval; }\n};\n\n#define LARGEUR_GRILLE 22\nlist&lt;Point&gt; positions;\n\n\nbool verifierNonPrise(Point emplacement) {\n    bool nonPrise = true;\n    for (list&lt;Point&gt;::iterator it = positions.begin(); it!= positions.end(); it++) {\n        if (it-&gt;x() != emplacement.x()) {\n            if (it-&gt;y() == emplacement.y()) {\n                nonPrise = false;\n            }\n            if (abs(it-&gt;y() - emplacement.y()) == abs(it-&gt;x() - emplacement.x())) {\n                nonPrise = false;\n            }\n        }\n    }\n\n    return nonPrise;\n}\n\nbool placerDame(int i) {\n    bool bonnePosition = false;\n    for (int j = 1; j &lt;= LARGEUR_GRILLE &amp;&amp; !bonnePosition; j++) {\n        Point emplacement(i,j);\n        positions.push_back(emplacement);\n        if (verifierNonPrise(emplacement) &amp;&amp; (i == LARGEUR_GRILLE || placerDame(i + 1))) {\n            bonnePosition = true;\n        }\n        else {\n            positions.pop_back();\n        }\n    }\n\n    return bonnePosition;\n}\n\nint main()\n{\n    int i = 1;\n    placerDame(i);\n    for (list&lt;Point&gt;::iterator it = positions.begin(); it!= positions.end(); it++) {\n        cout &lt;&lt; \"(\" &lt;&lt; it-&gt;x() &lt;&lt; \"; \" &lt;&lt; it-&gt;y() &lt;&lt; \")\" &lt;&lt; endl;\n    }\n    return 0;\n}\n</code></pre>\n", "tags": ["java", "c++", "performance", "algorithm"], "title": "Performance issue: Java vs C++", "answers": [{"body": "<p><code>std::list</code> in C++ is a linked list, whereas <code>java.util.ArrayList</code> is an array. Try replacing <code>std::list</code> by <code>std::vector</code>. Also, be sure to compile with optimization turned on.</p>\n", "title": "Performance issue: Java vs C++", "tags": ["java", "c++", "performance", "algorithm"], "link": "http://stackoverflow.com/questions/24914525/performance-issue-java-vs-c/24914586#24914586", "question_id": 24914525, "answer_id": 24914586}, {"body": "<p>Test this version, updated using C++11 features. Tested in GCC 4.9.0 with <code>-std=c++11</code>. Tested on Celeron 1.6&nbsp;GHz, 512&nbsp;MB RAM.</p>\n\n<p>Times in my PC:<br>\nOriginal: <strong>Duration (milliseconds): 12658</strong><br>\nFirst Version: <strong>Duration (milliseconds): 3616</strong><br>\nOptimized Version: <strong>Duration (milliseconds): 1745</strong><br></p>\n\n<p>Changes are:</p>\n\n<ul>\n<li>Using <code>vector</code> instead of <code>list</code> <a href=\"http://blog.davidecoppola.com/2014/05/20/cpp-benchmarks-vector-vs-list-vs-deque/\">Benchmark</a>, and <a href=\"https://isocpp.org/blog/2014/06/stroustrup-lists\">Words from Stroustrup</a>.</li>\n<li>Using const whatever we can, the compiler is able to optimize much more if it known that the value don't change.</li>\n<li>Using std::pair instead of Point.</li>\n<li>Using new for-loop with constant iterators.</li>\n</ul>\n\n<p>Source:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;chrono&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\ntypedef std::pair&lt;int, int&gt; Point;\n\n#define LARGEUR_GRILLE 22\nvector&lt;Point&gt; positions;\n\nbool verifierNonPrise(const Point&amp; emplacement) {\n    bool nonPrise = true;\n    for (const auto&amp; p : positions) {\n        if (p.first != emplacement.first) {\n            if (p.second == emplacement.second) {\n                nonPrise = false;\n            }\n            if (abs(p.second - emplacement.second) ==\n                abs(p.first - emplacement.first)) {\n                nonPrise = false;\n            }\n        }\n    }\n\n    return nonPrise;\n}\n\nbool placerDame(int i) {\n    bool bonnePosition = false;\n    for (int j = 1; j &lt;= LARGEUR_GRILLE &amp;&amp; !bonnePosition; j++) {\n        Point emplacement(i, j);\n        positions.emplace_back(emplacement);\n        if (verifierNonPrise(emplacement) &amp;&amp;\n            (i == LARGEUR_GRILLE || placerDame(i + 1))) {\n            bonnePosition = true;\n        } else {\n            positions.pop_back();\n        }\n    }\n\n    return bonnePosition;\n}\n\nint main(int argc, char* argv[]) {\n    std::chrono::system_clock::time_point begin_time =\n        std::chrono::system_clock::now();\n\n    positions.reserve(LARGEUR_GRILLE);\n\n    placerDame(1);\n    for (const auto&amp; p : positions) {\n        cout &lt;&lt; \"(\" &lt;&lt; p.first &lt;&lt; \"; \" &lt;&lt; p.second &lt;&lt; \")\" &lt;&lt; endl;\n    }\n\n    std::chrono::system_clock::time_point end_time =\n        std::chrono::system_clock::now();\n    long long elapsed_milliseconds =\n        std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(\n            end_time - begin_time).count();\n    std::cout &lt;&lt; \"Duration (milliseconds): \" &lt;&lt; elapsed_milliseconds\n              &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Some more deep changes.</p>\n\n<p>Changes include:</p>\n\n<ul>\n<li>Returning as early as possible. As soon as the queen can not be placed.</li>\n<li>Returning to a simpler Point class.</li>\n<li>Using find_if algorithm for searching queen placement.</li>\n</ul>\n\n<p>Source (some recommendation updated):</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;chrono&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\nstruct Point {\n    int x, y;\n};\n\n#define LARGEUR_GRILLE 22\nvector&lt;Point&gt; positions;\n\nbool verifierNonPrise(const Point&amp; emplacement) {\n    return find_if(positions.cbegin(), positions.cend(), [&amp;emplacement](const Point&amp; p) {\n               return (p.x != emplacement.x &amp;&amp;\n                       (p.y == emplacement.y ||\n                        abs(p.y - emplacement.y) == abs(p.x - emplacement.x)));\n           }) == positions.cend();\n}\n\nbool placerDame(int i) {\n    for (int j = 1; j &lt;= LARGEUR_GRILLE; j++) {\n        Point emplacement{i, j};\n        positions.push_back(emplacement);\n        if (verifierNonPrise(emplacement) &amp;&amp;\n            (i == LARGEUR_GRILLE || placerDame(i + 1))) {\n            return true;\n        } else {\n            positions.pop_back();\n        }\n    }\n    return false;\n}\n\nint main(int argc, char* argv[]) {\n    std::chrono::system_clock::time_point begin_time =\n        std::chrono::system_clock::now();\n\n    positions.reserve(LARGEUR_GRILLE);\n\n    placerDame(1);\n    for (const auto&amp; p : positions) {\n        cout &lt;&lt; \"(\" &lt;&lt; p.x &lt;&lt; \"; \" &lt;&lt; p.y &lt;&lt; \")\" &lt;&lt; endl;\n    }\n\n    std::chrono::system_clock::time_point end_time =\n        std::chrono::system_clock::now();\n    long long elapsed_milliseconds =\n        std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(\n            end_time - begin_time).count();\n    std::cout &lt;&lt; \"Duration (milliseconds): \" &lt;&lt; elapsed_milliseconds\n              &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n", "title": "Performance issue: Java vs C++", "tags": ["java", "c++", "performance", "algorithm"], "link": "http://stackoverflow.com/questions/24914525/performance-issue-java-vs-c/24914838#24914838", "question_id": 24914525, "answer_id": 24914838}, {"body": "<p>Comparing a managed, dynamically compiled language like Java to a statically compiled language like C++ is very difficult.</p>\n\n<p>You will always be comparing apples to oranges in a sense, because they are conceptually very different. It starts with the use of the standard libraries (ArrayList vs std::list/vector) that will have potentially wildly different performance characteristics, even your code looks similar in both languages.</p>\n\n<p>Then there is the inherent problem with microbenchmarks in Java (short test in Java are always slower because the <a href=\"http://en.wikipedia.org/wiki/Just-in-time_compilation\">JIT</a> will observe program flow before it decides what and how it is to be compiled). Same goes for compiler options for C++, even the <em>structure</em> of the source code (independently compiled and linked classes versus single file source) can make a significant difference (because it changes the amount of \"insight\" the C++ compiler has into the other classes).</p>\n\n<p>Next is the general difference in memory management, garbage collection vs manual memory management (smart pointers etc. are still considered manual memory management).</p>\n\n<p>Not to mention the general language differences like you need to explicitly declare a method virtual in C++, while in Java <em>every</em> member method is virtual by default (working out if it's really virtual at runtime is left to the VM).</p>\n\n<p>With all those differences there will always be cases where one langauge will have a massive advantage over the other. A simple test with very limited scope (like your test here) says very little about each language as a whole.</p>\n\n<p>Another point people often tend to ignore is: How productive can you be with a language - speed isn't everything (look a how sucessful script langages are in some domains, despite being hardly competive when looking <em>only</em> at excution speed). Lack of performance <em>can</em> be crippling, but so can be low productivity.</p>\n", "title": "Performance issue: Java vs C++", "tags": ["java", "c++", "performance", "algorithm"], "link": "http://stackoverflow.com/questions/24914525/performance-issue-java-vs-c/24915470#24915470", "question_id": 24914525, "answer_id": 24915470}, {"body": "<p>Also, there is no reason to use float/doouble types for the coordinates. </p>\n\n<p>You should gain performance if you do not force calling floating point abs library call in your C++</p>\n\n<p>Java stores the Point coordinates as integer. The get functions return double, however this is probably easier to optimize away in Java, then in c++.</p>\n", "title": "Performance issue: Java vs C++", "tags": ["java", "c++", "performance", "algorithm"], "link": "http://stackoverflow.com/questions/24914525/performance-issue-java-vs-c/24916557#24916557", "question_id": 24914525, "answer_id": 24916557}, {"body": "<h2>Updates:</h2>\n\n<h3>Changes to C++</h3>\n\n<ul>\n<li>As written:<br>\nCompilation Failure</li>\n<li>Replace math.h => cmath<br>\n27610 milliseconds</li>\n<li>Add -O3 flag<br>\n4416 milliseconds</li>\n<li>Replace std::list with std::vector<br>\n2294 milliseconds</li>\n<li>Replace Point with std::pair<br>\n2384 milliseconds  </li>\n<li>Made verifierNonPrise const correct<br>\n2351 milliseconds</li>\n<li>Replaced loop in verifierNonPrise with <code>std::find_if</code><br>\n929 milliseconds</li>\n<li>Replacing double with int (to make it equiv to Java)<br>\n549 milliseconds</li>\n</ul>\n\n<h3>Changes to Java</h3>\n\n<ul>\n<li>As written<br>\n3459 milliseconds</li>\n<li>Changes <code>verifierNonPrise</code> early return<br>\n368 milliseconds</li>\n</ul>\n\n<h2>Java Vs C++</h2>\n\n<pre><code>&gt; javac HuitDames.java\n&gt; time java HuitDames\nreal    0m0.368s\nuser    0m0.436s\nsys     0m0.042s    \n&gt; g++ -O3 -std=c++11 HuitDames.cpp\n&gt; time ./a.out\nreal    0m0.541s\nuser    0m0.539s\nsys     0m0.002s\n</code></pre>\n\n<h2>Final Code:</h2>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;cmath&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;chrono&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\ntypedef std::pair&lt;int, int&gt;   Point;\n\n#define LARGEUR_GRILLE 22\nvector&lt;Point&gt; positions;\n\n\nbool verifierNonPrise(Point const&amp; emplacement) {\n    return std::find_if(positions.begin(), positions.end(), [&amp;emplacement](Point const&amp; val){\n        if (val.first != emplacement.first) {\n            if ((val.second == emplacement.second) || (abs(val.second - emplacement.second) == abs(val.first - emplacement.first))) {\n                return true;\n            }\n        }\n        return false;\n    }) == positions.end();\n}\n\nbool placerDame(int i) {\n    bool bonnePosition = false;\n\n    for (int j = 1; j &lt;= LARGEUR_GRILLE &amp;&amp; !bonnePosition; j++) {\n        Point emplacement(i,j);\n        positions.push_back(emplacement);\n        if (verifierNonPrise(emplacement) &amp;&amp; (i == LARGEUR_GRILLE || placerDame(i + 1))) {\n            bonnePosition = true;\n        }\n        else {\n            positions.pop_back();\n        }\n    }\n\n    return bonnePosition;\n}\n\n\nint main()\n{\n    using std::chrono::system_clock;\n\n    system_clock::time_point begin_time = system_clock::now();\n\n    int i = 1;\n    placerDame(i);\n    for (vector&lt;Point&gt;::iterator it = positions.begin(); it!= positions.end(); it++) {\n        cout &lt;&lt; \"(\" &lt;&lt; it-&gt;first &lt;&lt; \"; \" &lt;&lt; it-&gt;second &lt;&lt; \")\" &lt;&lt; endl;\n    }\n\n    system_clock::time_point end_time = system_clock::now();\n\n    long long elapsed_milliseconds = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(end_time - begin_time).count();\n    cout &lt;&lt; \"Duration (milliseconds): \"\n         &lt;&lt; elapsed_milliseconds\n         &lt;&lt; std::endl;    \n}\n</code></pre>\n", "title": "Performance issue: Java vs C++", "tags": ["java", "c++", "performance", "algorithm"], "link": "http://stackoverflow.com/questions/24914525/performance-issue-java-vs-c/24920543#24920543", "question_id": 24914525, "answer_id": 24920543}, {"body": "<p>Java passes objects to methods as references and those references are passed by value, but C++ passes objects by value.</p>\n\n<p>You should change C++ code to make it same as Java (Pass pointers in C++ intstead of passing objects):</p>\n\n<pre><code>bool verifierNonPrise(Point* emplacement) // The correct way for passing arguments.\n</code></pre>\n", "title": "Performance issue: Java vs C++", "tags": ["java", "c++", "performance", "algorithm"], "link": "http://stackoverflow.com/questions/24914525/performance-issue-java-vs-c/25144680#25144680", "question_id": 24914525, "answer_id": 25144680}, {"body": "<p>C++ can do it in 21 ms (on a old core i7-860) if you use bit maps. For the timing run I commented out the showSoln() call since a graphic display of the chess board takes twice as long as finding the solution.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;fstream&gt;\n#include &lt;omp.h&gt;                        //omp_get_wtime() is my favorite time function\nusing namespace std;\n\nstatic const unsigned n(22);            //size of board\nstatic_assert(n&lt;32,\"use long unsigned for bit masks if n &gt; 32\");\nstatic const unsigned mask((1U&lt;&lt;n)-1);  //n wide bitmask with every bit set\n\nvoid showSoln(unsigned* selCol, unsigned numSoln) {     //show a solution\n    cout &lt;&lt; \"\\nsolution \" &lt;&lt; numSoln &lt;&lt; '\\n';\n    for (unsigned row=0; row&lt;n; ++row) {\n        for (unsigned col=0; col&lt;n; ++col)\n            cout &lt;&lt; (col==selCol[row]? \" Q\": \" .\");\n        cout &lt;&lt; '\\n';\n    }\n}\n\nvoid main() {\n    //for each row bitmasks that show what columns are attacked, 1 bit means attacked\n    unsigned ulAttack[n];           //cols attacked from upper left, shift right for next row\n    unsigned upAttack[n];           //cols attacked from straight up, same for next row\n    unsigned urAttack[n];           //cols attacked from upper right, shift left for next row\n    unsigned allAttack[n];          //OR of all attacks on given row\n    allAttack[0]= ulAttack[0]= upAttack[0]= urAttack[0]= 0; //no attacks on row 0\n    unsigned row= 0;                //the row where now placing a queen \n    unsigned selCol[n];             //for each row the selected column\n    unsigned numSoln= 0;            //count of soutions found\n    double wtime= omp_get_wtime();\n    for (;;) {                                          //loop until find 1st (or all) solutions\n        if (allAttack[row]!=mask) {                     //if 'row' has a column not attacked\n            unsigned long bit;\n            _BitScanForward(&amp;bit,~allAttack[row]);      //find lowest column not attacked\n            //note - your compiler may have a different intrinsic for find lowest set bit\n            selCol[row]= bit;                           //remember selected column for this row\n            unsigned move= 1U&lt;&lt;bit;                     //convert selected column to bitmask\n            allAttack[row]|= move;                      //mark column attacked to prevent re-use\n            if (row==n-1) {                             //if move in last row have a soln\n                ++numSoln;\n                showSoln(selCol,numSoln);\n                break;                                  //remove this break if want all solutions\n            } else {                                    //no solution yet, fill in rows below\n                unsigned nrow= row+1;                   //next row\n                //from attacks on this row plus 'move' decide attacks on row below\n                ulAttack[nrow]= (ulAttack[row] | move) &gt;&gt; 1;\n                upAttack[nrow]= (upAttack[row] | move);\n                urAttack[nrow]= ((urAttack[row] | move) &lt;&lt; 1) &amp; mask;\n                allAttack[nrow]= ulAttack[nrow] | upAttack[nrow] | urAttack[nrow];\n                row= nrow;                              //go to next row\n            }\n        } else {                //else move on 'row' is impossible so backtrack\n            if (!row)           //if backtrack from row 0 have found all solutions\n                break;\n            --row;              //try next move in prior row\n        }\n    }\n    wtime= omp_get_wtime() - wtime;\n    cout &lt;&lt; \"numSoln= \" &lt;&lt; numSoln &lt;&lt; '\\n';\n    cout &lt;&lt; \"time= \" &lt;&lt; wtime*1000 &lt;&lt; \" msec\\n\";\n}\n</code></pre>\n", "title": "Performance issue: Java vs C++", "tags": ["java", "c++", "performance", "algorithm"], "link": "http://stackoverflow.com/questions/24914525/performance-issue-java-vs-c/27163029#27163029", "question_id": 24914525, "answer_id": 27163029}, {"body": "<p>I may be beating a dead horse here, but simply doing a line by line translation of the Java to C++, not even using const reference parameters or any such thing, you can see the C++ is almost twice as fast as Java. \nAll the \"syntactic optimization\" emplacing etc. has little effect if any... </p>\n\n<pre><code>rep ~/Documents $ g++ -O3 Queen.cpp\nrep ~/Documents $ javac Queen.java \nrep ~/Documents $ time java Queen \n(1; 1)\n(2; 3)\n(3; 5)\n(4; 2)\n(5; 4)\n(6; 10)\n(7; 14)\n(8; 17)\n(9; 20)\n(10; 13)\n(11; 19)\n(12; 22)\n(13; 18)\n(14; 8)\n(15; 21)\n(16; 12)\n(17; 9)\n(18; 6)\n(19; 16)\n(20; 7)\n(21; 11)\n(22; 15)\n\nreal    0m4.806s\nuser    0m4.857s\nsys     0m0.067s\nrep ~/Documents $ time ./a.out\n(1; 1)\n(2; 3)\n(3; 5)\n(4; 2)\n(5; 4)\n(6; 10)\n(7; 14)\n(8; 17)\n(9; 20)\n(10; 13)\n(11; 19)\n(12; 22)\n(13; 18)\n(14; 8)\n(15; 21)\n(16; 12)\n(17; 9)\n(18; 6)\n(19; 16)\n(20; 7)\n(21; 11)\n(22; 15)\n\nreal    0m2.131s\nuser    0m2.113s\nsys     0m0.000s\nrep ~/Documents $\n</code></pre>\n\n<p>Queen.java (translated to english)</p>\n\n<pre><code>import java.awt.Point;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class Queen {\n\n    private static List&lt;Point&gt; positions = new ArrayList&lt;&gt;();\n    private static final int GRID_SIZE = 22;\n\n    public static void main(String[] args) \n    {\n        int i = 1;\n        placeQueen(i);\n        for (Point point : positions) \n        {\n            System.out.println(\"(\" + point.x + \"; \" + point.y + \")\");\n        }\n    }\n\n    private static boolean placeQueen(int i) \n    {\n        boolean bIsGoodPos = false;\n        for (int j = 1; j &lt;= GRID_SIZE &amp;&amp; bIsGoodPos == false; j++) \n        {\n            Point emplacement = new Point(i, j);\n            positions.add(emplacement);\n            if (verifyPos(emplacement) &amp;&amp; (i == GRID_SIZE || placeQueen(i + 1))) \n            {\n                bIsGoodPos = true;\n            }\n            else \n            {\n                positions.remove(i - 1);\n            }\n        }\n\n        return bIsGoodPos;\n    }\n\n    private static boolean verifyPos(Point position) \n    {\n        boolean bIsSafe = true;\n        for (Point point : positions) \n        {\n            if (!point.equals(position)) \n            {\n                if (position.y == point.y) \n                {\n                    bIsSafe = false;\n                }\n                if (Math.abs(position.y - point.y) == Math.abs(position.x - point.x)) \n                {\n                    bIsSafe = false;\n                }\n            }\n        }\n\n        return bIsSafe;\n    }\n}\n</code></pre>\n\n<p>Queen.cpp</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nstruct Point\n{\n    int x, y;\n    Point(int ii, int jj):x(ii), y(jj){}\n};\n\nvector&lt;Point&gt; positions;\nint GRID_SIZE = 22;\n\n\nbool verifyPos(Point position) \n{\n    bool bIsSafe = true;\n    for(int i = 0; i &lt; positions.size(); ++i) \n    {\n        Point point = positions[i];\n        if(point.x != position.x || point.y != position.y) \n        {\n            if(position.y == point.y) \n            {\n                bIsSafe = false;\n            }\n            if(abs(position.y - point.y) == abs(position.x - point.x)) \n            {\n                bIsSafe = false;\n            }\n        }\n    }\n\n    return bIsSafe;\n}\n\nbool placeQueen(int i) \n{\n    bool bIsGoodPos = false;\n    for(int j = 1; j &lt;= GRID_SIZE &amp;&amp; bIsGoodPos == false; j++) \n    {\n        Point p(i, j);\n        positions.push_back(p);\n        if(verifyPos(p) &amp;&amp; (i == GRID_SIZE || placeQueen(i + 1))) \n        {\n            bIsGoodPos = true;\n        }\n        else \n        {\n            positions.pop_back();\n        }\n    }\n    return bIsGoodPos;\n}\n\n\nint main(void) \n{\n    int i = 1;\n    placeQueen(i);\n    for(int i = 0; i &lt; positions.size(); ++i) \n    {\n        Point p = positions[i];\n        cout &lt;&lt; \"(\" &lt;&lt; p.x &lt;&lt; \"; \" &lt;&lt; p.y &lt;&lt; \")\" &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n", "title": "Performance issue: Java vs C++", "tags": ["java", "c++", "performance", "algorithm"], "link": "http://stackoverflow.com/questions/24914525/performance-issue-java-vs-c/27413359#27413359", "question_id": 24914525, "answer_id": 27413359}], "creation_date": 1406128890, "score": 65, "link": "http://stackoverflow.com/questions/24914525/performance-issue-java-vs-c", "question_id": 24914525}, {"body": "<p>I encountered this question in technical test for a job. Given the following code example:</p>\n\n<pre><code>public class Manager {\n    public static void main (String args[]) {\n        System.out.println((int) (char) (byte) -2);\n    }\n}\n</code></pre>\n\n<p>It gives the output as 65534.</p>\n\n<p>This behavior shows for negative values only; 0 and positive numbers yield the same value, meaning the one entered in SOP. The byte cast here is insignificant; I have tried without it.</p>\n\n<p>So my question is: what exactly is going on here?</p>\n", "tags": ["java", "casting"], "title": "Why does &#39;(int)(char)(byte)-2&#39; produce 65534 in Java?", "answers": [{"body": "<p>A <code>char</code> has a value between 0 and 65535, so when you cast a negative to char, the result is the same as subtracting that number from 65536, resulting in 65534.  If you printed it as a <code>char</code>, it would try to display whatever unicode character is represented by 65534, but then when you cast to <code>int</code>, you actually get 65534.  If you started with a number that was above 65536, you'd see similarly \"confusing\" results in which a big number (e.g. 65538) would end up small (2).</p>\n", "title": "Why does &#39;(int)(char)(byte)-2&#39; produce 65534 in Java?", "tags": ["java", "casting"], "link": "http://stackoverflow.com/questions/24635977/why-does-intcharbyte-2-produce-65534-in-java/24636071#24636071", "question_id": 24635977, "answer_id": 24636071}, {"body": "<p>There are two important things to note here,</p>\n\n<ol>\n<li>a char is unsigned, and cannot be negative</li>\n<li>casting a byte to a char first involves a hidden cast to an int as per the <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.4\">Java Language Spec</a>.</li>\n</ol>\n\n<p>Thus casting -2 to an int gives us 11111111111111111111111111111110.  Notice how the two's complement value has been sign extended with a one; that only happens for negative values.  When we then narrow it to a char, the int is truncated to</p>\n\n<pre><code>1111111111111110\n</code></pre>\n\n<p>Finally, casting 1111111111111110 to an int is bit extended with zero, rather than a one because the value is now considered to be positive (because chars can only be positive).  Thus widening the bits leaves the value unchanged, but unlike the negative value case unchanged in value.  And that binary value when printed in decimal is 65534.</p>\n", "title": "Why does &#39;(int)(char)(byte)-2&#39; produce 65534 in Java?", "tags": ["java", "casting"], "link": "http://stackoverflow.com/questions/24635977/why-does-intcharbyte-2-produce-65534-in-java/24636161#24636161", "question_id": 24635977, "answer_id": 24636161}, {"body": "<p>There are some prerequisites that we need to agree upon before you can understand what is happening here. With understanding the following bullet points, the rest is simple deduction:</p>\n\n<ol>\n<li><p>All primitive types within the JVM are represented as a sequence of bits. The <code>int</code> type is represented by 32 bits, the <code>char</code> and <code>short</code> types by 16 bits and the <code>byte</code> type is represented by 8 bits.</p></li>\n<li><p>All JVM numbers are signed, where the <code>char</code> type is the only unsigned \"number\". When a number is signed, the <em>highest</em> bit is used to represent the sign of this number. For this highest bit, <code>0</code> represents a non-negative number (positive or zero) and <code>1</code> represents a negative number. Also, with signed numbers, a negative value is <em><a href=\"http://en.wikipedia.org/wiki/Two%27s_complement\">inverted</a></em> to the incrementation order of positive numbers. For example, a positive <code>byte</code> value is represented in bits as follows:</p>\n\n<pre><code>00 00 00 00 =&gt; (byte) 0\n00 00 00 01 =&gt; (byte) 1\n00 00 00 10 =&gt; (byte) 2\n...\n01 11 11 11 =&gt; (byte) Byte.MAX_VALUE\n</code></pre>\n\n<p>while the bit order for negative numbers is inverted:</p>\n\n<pre><code>11 11 11 11 =&gt; (byte) -1\n11 11 11 10 =&gt; (byte) -2\n11 11 11 01 =&gt; (byte) -3\n...\n10 00 00 00 =&gt; (byte) Byte.MIN_VALUE\n</code></pre>\n\n<p>This inverted notation also explains why the negative range can host an additional number compared to the positive range where the latter includes the representation of the number <code>0</code>. Remember, all this is only a matter of <em>interpreting</em> a bit pattern. You can note negative numbers differently, but this inverted notation for negative numbers is quite handy because it allows for some rather fast transformations as we will be able to see in a small example later on.</p>\n\n<p>As mentioned, this does not apply for the <code>char</code> type. The <code>char</code> type represents a Unicode character with a non-negative \"numeric range\" of <code>0</code> to <code>65535</code>. Each of this number refers to a <a href=\"http://en.wikipedia.org/wiki/UTF-16\">16-bits Unicode</a> value.</p></li>\n<li><p>When converting between the <code>int</code>, <code>byte</code>, <code>short</code>, <code>char</code> and <code>boolean</code> types the JVM needs to either add or truncate bits. </p>\n\n<p>If the target type is represented by more bits than the type from which it is converted, then the JVM simply fills the additional slots with the value of the highest bit of the given value (which represents the signature):</p>\n\n<pre><code>|     short   |     byte    |\n|             | 00 00 00 01 | =&gt; (byte) 1\n| 00 00 00 00 | 00 00 00 01 | =&gt; (short) 1\n</code></pre>\n\n<p>Thanks to the inverted notation, this strategy also works for negative numbers:</p>\n\n<pre><code>|     short   |     byte    |\n|             | 11 11 11 11 | =&gt; (byte) -1\n| 11 11 11 11 | 11 11 11 11 | =&gt; (short) -1\n</code></pre>\n\n<p>This way, the value's sign is retained. Without going into details of implementing this for a JVM, note that this model allows for a casting being performed by a cheap <a href=\"http://en.wikipedia.org/wiki/Arithmetic_shift\">shift operation</a> what is obviously advantageous.</p>\n\n<p>An exception from this rule is <em>widening</em> a <code>char</code> type which is, as we said before, unsigned. A conversion <strong>from</strong> a <code>char</code> is always applied by filling the additional bits with <code>0</code> because we said there is no sign and thus no need for an inverted notation. A conversion of a <code>char</code> to an <code>int</code> is therefore performed as:</p>\n\n<pre><code>|            int            |    char     |     byte    |\n|                           | 11 11 11 11 | 11 11 11 11 | =&gt; (char) \\uFFFF\n| 00 00 00 00 | 00 00 00 00 | 11 11 11 11 | 11 11 11 11 | =&gt; (int) 65535\n</code></pre>\n\n<p>When the original type has more bits than the target type, the additional bits are merely cut off. As long as the original value would have fit into the target value, this works fine, as for example for the following conversion of a <code>short</code> to a <code>byte</code>:</p>\n\n<pre><code>|     short   |     byte    |\n| 00 00 00 00 | 00 00 00 01 | =&gt; (short) 1\n|             | 00 00 00 01 | =&gt; (byte) 1\n| 11 11 11 11 | 11 11 11 11 | =&gt; (short) -1\n|             | 11 11 11 11 | =&gt; (byte) -1\n</code></pre>\n\n<p>However, if the value is <em>too big</em> or <em>too small</em>, this does not longer work:</p>\n\n<pre><code>|     short   |     byte    |\n| 00 00 00 01 | 00 00 00 01 | =&gt; (short) 257\n|             | 00 00 00 01 | =&gt; (byte) 1\n| 11 11 11 11 | 00 00 00 00 | =&gt; (short) -32512\n|             | 00 00 00 00 | =&gt; (byte) 0\n</code></pre>\n\n<p>This is why narrowing castings sometimes lead to strange results. You might wonder why narrowing is implemented this way. You could argue that it would be more intuitive if the JVM checked a number's range and would rather cast an incompatible number to the biggest representable value of the same sign. However, this would require <a href=\"http://en.wikipedia.org/wiki/Branch_%28computer_science%29\">branching</a> what is a costly operation. This is specifically important, as <a href=\"http://en.wikipedia.org/wiki/Two%27s_complement\">this two's complement notation</a> allows for cheap arithmetic operations.</p></li>\n</ol>\n\n<p>With all this information, we can see what happens with the number <code>-2</code> in your example:</p>\n\n<pre><code>|           int           |    char     |     byte    |\n| 11 11 11 11 11 11 11 11 | 11 11 11 11 | 11 11 11 10 | =&gt; (int) -2\n|                         |             | 11 11 11 10 | =&gt; (byte) -2\n|                         | 11 11 11 11 | 11 11 11 10 | =&gt; (char) \\uFFFE\n| 00 00 00 00 00 00 00 00 | 11 11 11 11 | 11 11 11 10 | =&gt; (int) 65534\n</code></pre>\n\n<p>As you can see, the <code>byte</code> cast is redundant as the cast to the <code>char</code> would cut the same bits.</p>\n\n<p>All this is also <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html\">specified by the JVMS</a>, if you prefer a more formal definition of all these rules.</p>\n\n<p>One final remark: A type's bit size does not necessarily represent the amount of bits that are reserved by the JVM for representing this type in its memory. As a matter of fact, the JVM does not distinguish between <code>boolean</code>, <code>byte</code>, <code>short</code>, <code>char</code> and <code>int</code> types. All of them are represented by the same JVM-type where the virtual machine merely emulates these castings. On a method's operand stack (i.e. any variable within a method), all values  of the named types consumes 32 bits. This is however not true for arrays and object fields which any JVM implementer can handle at will.</p>\n", "title": "Why does &#39;(int)(char)(byte)-2&#39; produce 65534 in Java?", "tags": ["java", "casting"], "link": "http://stackoverflow.com/questions/24635977/why-does-intcharbyte-2-produce-65534-in-java/24637624#24637624", "question_id": 24635977, "answer_id": 24637624}, {"body": "<p>I think the simplest way to explain this would just be to break it down into the order of operations you are performing</p>\n\n<pre><code>Instance | #          int            |     char    | #   byte    |    result   |\nSource   | 11 11 11 11 | 11 11 11 11 | 11 11 11 11 | 11 11 11 10 | -2          |\nbyte     |(11 11 11 11)|(11 11 11 11)|(11 11 11 11)| 11 11 11 10 | -2          |\nint      | 11 11 11 11 | 11 11 11 11 | 11 11 11 11 | 11 11 11 10 | -2          |\nchar     |(00 00 00 00)|(00 00 00 00)| 11 11 11 11 | 11 11 11 10 | 65534       |\nint      | 00 00 00 00 | 00 00 00 00 | 11 11 11 11 | 11 11 11 10 | 65534       |\n</code></pre>\n\n<ol>\n<li>You are simply taking a 32bit signed value. </li>\n<li>You are then converting it to an 8bit signed value. </li>\n<li>When you attempt to convert it to a 16bit unsigned value, the compiler sneaks in a quick conversion to 32bit signed value,</li>\n<li>Then converting it to 16bit without maintaining sign.</li>\n<li>When the final conversion to 32bit occurs, there is no sign, so the value adds zero bits to maintain value.</li>\n</ol>\n\n<p>So, yes, when you look at it this way, the byte cast is significant (academically speaking), though the result is insignificant (joy to programming, a significant action can have an insignificant effect).  The effect of narrowing and widening while maintaining sign.  Where, the conversion to char narrows, but does not widen to sign.</p>\n\n<p>(Please note, I used a # to denote the Signed bit, and as noted, there is no signed bit for char, as it is an unsigned value).</p>\n\n<p>I used parens to represent what is actually happening internally.  The data types are actually trunked in their logical blocks, but if viewed as in int, their results would be what the parens symbolize.</p>\n\n<p>Signed values always widen with value of the signed bit.  Unsigned always widen with the bit off.</p>\n\n<p>*So, the trick (or gotchas) to this, is that the expansion to int from byte, maintains the signed value when widened.  Which is then narrowed the moment it touches the char.  This then turns off the signed bit.</p>\n\n<p>If the conversion to int did not occur, the value would have been 254. But, it does, so it isn't.</p>\n", "title": "Why does &#39;(int)(char)(byte)-2&#39; produce 65534 in Java?", "tags": ["java", "casting"], "link": "http://stackoverflow.com/questions/24635977/why-does-intcharbyte-2-produce-65534-in-java/24663475#24663475", "question_id": 24635977, "answer_id": 24663475}], "creation_date": 1404833732, "score": 65, "link": "http://stackoverflow.com/questions/24635977/why-does-intcharbyte-2-produce-65534-in-java", "question_id": 24635977}, {"body": "<p>I am wondering why is the following code allowed in Java, without getting compilation error?\nIn my opinion, this code breaks method signature by not returning any <code>String</code>.\nCould someone explain what I'm missing here?  </p>\n\n<pre><code>public class Loop {\n\n  private String withoutReturnStatement() {\n    while(true) {}\n  }\n\n  public static void main(String[] a) {\n    new Loop().withoutReturnStatement();\n  }\n}\n</code></pre>\n", "tags": ["java", "compilation", "infinite-loop"], "title": "Infinite loop breaks method signature without compilation error", "answers": [{"body": "<p>The final <code>}</code> of the method is unreachable - you only get a compilation error if it's possible to get to the end of the method without returning a value.</p>\n\n<p>This is more useful for cases where the end of the method is unreachable due to an exception, e.g.</p>\n\n<pre><code>private String find(int minLength) {\n    for (String string : strings) {\n        if (string.length() &gt;= minLength) {\n            return string;\n        }\n    }\n    throw new SomeExceptionIndicatingTheProblem(\"...\");\n}\n</code></pre>\n\n<p>The rule for this is in the <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.4.7\">JLS section 8.4.7</a>:</p>\n\n<blockquote>\n  <p>If a method is declared to have a return type (\u00a78.4.5), then a compile-time error occurs if the body of the method can complete normally (\u00a714.1).</p>\n</blockquote>\n\n<p>Your method can't complete normally, hence there's no error. Importantly, it's not just that it can't complete normally, but the specification <em>recognizes</em> that it can't complete normally. From <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.21\">JLS 14.21</a>:</p>\n\n<blockquote>\n  <p>A <code>while</code> statement can complete normally iff at least one of the following is true:</p>\n  \n  <ul>\n  <li>The <code>while</code> statement is reachable and the condition expression is not a constant expression (\u00a715.28) with value <code>true</code>.</li>\n  <li>There is a reachable <code>break</code> statement that exits the <code>while</code> statement.</li>\n  </ul>\n</blockquote>\n\n<p>In your case, the condition expression <em>is</em> a constant with value <code>true</code>, and there aren't any <code>break</code> statements (reachable or otherwise) so the <code>while</code> statement can't complete normally.</p>\n", "title": "Infinite loop breaks method signature without compilation error", "tags": ["java", "compilation", "infinite-loop"], "link": "http://stackoverflow.com/questions/25154495/infinite-loop-breaks-method-signature-without-compilation-error/25154535#25154535", "question_id": 25154495, "answer_id": 25154535}, {"body": "<pre><code> private String withoutReturnStatement() {\n    while(true) {\n        // you will never come out from this loop\n     } // so there will be no return value needed\n    // never reach here ===&gt; compiler not expecting a return value\n  }  \n</code></pre>\n\n<p>To more clarification try this</p>\n\n<pre><code>private String withoutReturnStatement() {\n    while(true) {}\n    return \"\"; // unreachable\n}\n</code></pre>\n\n<p>It says <code>unreachable</code> statement</p>\n", "title": "Infinite loop breaks method signature without compilation error", "tags": ["java", "compilation", "infinite-loop"], "link": "http://stackoverflow.com/questions/25154495/infinite-loop-breaks-method-signature-without-compilation-error/25154568#25154568", "question_id": 25154495, "answer_id": 25154568}], "creation_date": 1407309870, "score": 65, "link": "http://stackoverflow.com/questions/25154495/infinite-loop-breaks-method-signature-without-compilation-error", "question_id": 25154495}, {"body": "<p>I just studied about generic programming, the <code>List&lt;E&gt;</code> interface, and <code>ArrayList</code>, so I can understand the statement below.</p>\n\n<pre><code>ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\n</code></pre>\n\n<p>But I don't understand the next statement which I saw while surfing the web.</p>\n\n<pre><code>List&lt;String&gt; list2 = Collections.&lt;String&gt;emptyList();\n</code></pre>\n\n<ol>\n<li>What is <code>Collections</code>? Why isn't it <code>Collections&lt;E&gt;</code> or <code>Collections&lt;String&gt;</code>?</li>\n<li>Why is <code>&lt;String&gt;</code> placed before the method name <code>emptyList</code>?</li>\n</ol>\n\n<p>(Isn't <code>emptyList&lt;String&gt;()</code> correct for Generic?)</p>\n\n<ol start=\"3\">\n<li>What does the statement mean?</li>\n</ol>\n", "tags": ["java", "generics", "collections"], "title": "Explain the syntax of Collections.&lt;String&gt;emptyList()", "answers": [{"body": "<p>1.Collection is an interface and collections is a static class consists exclusively of static methods that operate on or return collections. Hence we cannot use <code>Collections&lt;E&gt;</code> or <code>Collections&lt;String&gt;</code>.</p>\n\n<p>2.<code>&lt;String&gt;</code> before emptyList(used to get the empty list that is immutable) denotes that only String values can be added to it. Like: </p>\n\n<pre><code>list2.add(\"A\");\nlist2.add(\"B\");\n</code></pre>\n\n<p>3.The statement means that it will create a immutable empty list of type List.</p>\n\n<p>You can check out this link: <a href=\"http://stackoverflow.com/questions/1796275/difference-between-java-collection-and-collections\">Difference between Java Collection and Collections</a></p>\n", "title": "Explain the syntax of Collections.&lt;String&gt;emptyList()", "tags": ["java", "generics", "collections"], "link": "http://stackoverflow.com/questions/27683759/explain-the-syntax-of-collections-stringemptylist/27684019#27684019", "question_id": 27683759, "answer_id": 27684019}, {"body": "<p>Firstly, <code>Collections</code> is a helper library of static methods that operate on various types of collections. If you've done any sort of C++ programming, it's very synonymous to the <code>&lt;algorithm&gt;</code> library of functions.</p>\n\n<p>In this case, you're invoking the static method <code>emptyList()</code>, which returns an empty list of a particular type. Since these methods still require a type, but <code>Collections</code>' methods can refer to many types, you have to specify the type upon invocation.</p>\n\n<p>In order to call a generic <em>method</em>, you must call it with the parameter list (i.e. <code>&lt;String&gt;</code>) <em>before</em> the method name, but <em>after</em> the dot.</p>\n\n<pre><code>List&lt;String&gt; someList = Collections.&lt;String&gt;emptyList();\n</code></pre>\n", "title": "Explain the syntax of Collections.&lt;String&gt;emptyList()", "tags": ["java", "generics", "collections"], "link": "http://stackoverflow.com/questions/27683759/explain-the-syntax-of-collections-stringemptylist/27684035#27684035", "question_id": 27683759, "answer_id": 27684035}, {"body": "<blockquote>\n  <p>What is <code>Collections</code>? Why isn't it <code>Collections&lt;E&gt;</code> or <code>Collections&lt;String&gt;</code>?</p>\n</blockquote>\n\n<p><a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Collections.html\"><code>Collections</code></a> is a JDK class.</p>\n\n<blockquote>\n  <p>This class consists exclusively of static methods that operate on or\n  return collections. It contains polymorphic algorithms that operate on\n  collections, \"wrappers\", which return a new collection backed by a\n  specified collection, and a few other odds and ends.</p>\n</blockquote>\n\n<p>It's not generic and cannot be instantiated.</p>\n\n<blockquote>\n  <p>Why is <code>&lt;String&gt;</code> placed before the method name <code>emptyList</code>?</p>\n</blockquote>\n\n<p><a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#emptyList--\"><code>Collections#emptyList</code></a> is a generic method. Here, we are explicitly specifying a type argument, <code>String</code>.</p>\n\n<blockquote>\n  <p>(Isn't <code>emptyList&lt;String&gt;()</code> correct for Generic?)</p>\n</blockquote>\n\n<p>No, in Java, generic type arguments for methods come before the method name.</p>\n\n<blockquote>\n  <p>What does the statement mean?</p>\n</blockquote>\n\n<p>We are invoking the static <code>emptyList</code> method and assigning its return value to a variable of type <code>List&lt;String&gt;</code>.</p>\n", "title": "Explain the syntax of Collections.&lt;String&gt;emptyList()", "tags": ["java", "generics", "collections"], "link": "http://stackoverflow.com/questions/27683759/explain-the-syntax-of-collections-stringemptylist/27684036#27684036", "question_id": 27683759, "answer_id": 27684036}, {"body": "<p>That line creates an empty list of strings by calling a static method with a generic type parameter.</p>\n\n<p>Inside the <code>Collections</code> class, there is a static method <code>emptyList</code> declared like:</p>\n\n<pre><code>public static final &lt;T&gt; List&lt;T&gt; emptyList() {\n    return (List&lt;T&gt;) EMPTY_LIST;\n}\n</code></pre>\n\n<p>This has a generic type parameter <code>T</code>. We call call this method by using:</p>\n\n<pre><code>List&lt;String&gt; list = Collections.emptyList();\n</code></pre>\n\n<p>and <code>T</code> is infered to be a <code>String</code> because of the type of <code>list</code>.</p>\n\n<p>We can also specify the type of <code>T</code> by putting it in angle brackets when calling <code>emptyList</code>. This may be needed if we want a more specific type than is inferred:</p>\n\n<pre><code>List&lt;? extends Object&gt; list = Collections.&lt;String&gt;emptyList();\n</code></pre>\n\n<p><code>emptyList&lt;String&gt;()</code> is not correct because that placement is only valid when creating\ninstances of generic classes, not calling methods. When using <code>new</code> there are two possible\ntype parameters, the ones before the class name are for the constructor only, and the ones after the class name are for the whole instance, so with the class:</p>\n\n<pre><code>class MyClass&lt;A&gt; {\n    public &lt;B&gt; MyClass(A a, B b) {\n        System.out.println(a + \", \" + b);\n    }\n}\n</code></pre>\n\n<p>We can call its constructor where <code>A</code> is <code>String</code> and <code>B</code> is <code>Integer</code> like:</p>\n\n<pre><code>MyClass&lt;String&gt; a = new &lt;Integer&gt;MyClass&lt;String&gt;(\"a\", 3);\n</code></pre>\n\n<p>or by using type inference:</p>\n\n<pre><code>MyClass&lt;String&gt; a = new MyClass&lt;&gt;(\"a\", 3);\n</code></pre>\n\n<p><strong>See also:</strong></p>\n\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/tutorial/java/generics/methods.html\">Generic Methods</a></li>\n<li><a href=\"http://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html\">Type Inference</a></li>\n</ul>\n", "title": "Explain the syntax of Collections.&lt;String&gt;emptyList()", "tags": ["java", "generics", "collections"], "link": "http://stackoverflow.com/questions/27683759/explain-the-syntax-of-collections-stringemptylist/27684040#27684040", "question_id": 27683759, "answer_id": 27684040}, {"body": "<p><strong>In a nutshell, this creates an empty, immutable list of strings.</strong></p>\n\n<p>Let's look at the expression bit by bit.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Collections.html\"><code>Collections</code></a> is the name of a class. From the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Collections.html\">Javadoc</a>:</p>\n\n<blockquote>\n  <p>This class consists exclusively of static methods that operate on or return collections. It contains polymorphic algorithms that operate on collections, \"wrappers\", which return a new collection backed by a specified collection, and a few other odds and ends.</p>\n</blockquote>\n\n<p><a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#emptyList--\"><code>emptyList()</code></a> is the name of a static method defined in the <code>Collections</code> class (<a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#emptyList--\">Javadoc</a>). It is a generic method, and the <code>&lt;String&gt;</code> in <code>Collections.&lt;String&gt;emptyList()</code> specifies the generic type argument.</p>\n\n<p>The method returns a <code>List&lt;T&gt;</code>, which in this case is <code>List&lt;String&gt;</code>: a list of strings. More specifically, it returns an <em>empty</em>, <em>immutable</em> list of strings.</p>\n", "title": "Explain the syntax of Collections.&lt;String&gt;emptyList()", "tags": ["java", "generics", "collections"], "link": "http://stackoverflow.com/questions/27683759/explain-the-syntax-of-collections-stringemptylist/27684042#27684042", "question_id": 27683759, "answer_id": 27684042}], "creation_date": 1419830300, "score": 65, "link": "http://stackoverflow.com/questions/27683759/explain-the-syntax-of-collections-stringemptylist", "question_id": 27683759}, {"body": "<p>Why is <code>i++</code> not atomic in Java?</p>\n\n<p>To get a bit deeper in Java I tried to count how often the loop in threads are executed.</p>\n\n<p>So I used a</p>\n\n<pre><code>private static int total = 0;\n</code></pre>\n\n<p>in the main class.</p>\n\n<p>I have two threads.</p>\n\n<ul>\n<li>Thread 1: Prints <code>System.out.println(\"Hello from Thread 1!\");</code></li>\n<li>Thread 2: Prints <code>System.out.println(\"Hello from Thread 2!\");</code></li>\n</ul>\n\n<p>And I count the lines printed by thread 1 and thread 2. But the lines of thread 1 + lines of thread 2 don't match the total number of lines printed out.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>import java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\n\npublic class Test {\n\n    private static int total = 0;\n    private static int countT1 = 0;\n    private static int countT2 = 0;\n    private boolean run = true;\n\n    public Test() {\n        ExecutorService newCachedThreadPool = Executors.newCachedThreadPool();\n        newCachedThreadPool.execute(t1);\n        newCachedThreadPool.execute(t2);\n        try {\n            Thread.sleep(1000);\n        }\n        catch (InterruptedException ex) {\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n        }\n        run = false;\n        try {\n            Thread.sleep(1000);\n        }\n        catch (InterruptedException ex) {\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n        }\n        System.out.println((countT1 + countT2 + \" == \" + total));\n    }\n\n    private Runnable t1 = new Runnable() {\n        @Override\n        public void run() {\n            while (run) {\n                total++;\n                countT1++;\n                System.out.println(\"Hello #\" + countT1 + \" from Thread 2! Total hello: \" + total);\n            }\n        }\n    };\n\n    private Runnable t2 = new Runnable() {\n        @Override\n        public void run() {\n            while (run) {\n                total++;\n                countT2++;\n                System.out.println(\"Hello #\" + countT2 + \" from Thread 2! Total hello: \" + total);\n            }\n        }\n    };\n\n    public static void main(String[] args) {\n        new Test();\n    }\n}\n</code></pre>\n", "tags": ["java", "multithreading", "concurrency"], "title": "Why is i++ not atomic?", "answers": [{"body": "<p>In the JVM, an increment involves a read and a write, so it's not atomic. </p>\n", "title": "Why is i++ not atomic?", "tags": ["java", "multithreading", "concurrency"], "link": "http://stackoverflow.com/questions/25168062/why-is-i-not-atomic/25168103#25168103", "question_id": 25168062, "answer_id": 25168103}, {"body": "<p><code>i++</code> involves two operations :</p>\n\n<ol>\n<li>read the current value of <code>i</code></li>\n<li>increment the value and assign it to <code>i</code></li>\n</ol>\n\n<p>When two threads perform <code>i++</code> on the same variable at the same time, they may both get the same current value of <code>i</code>, and then increment and set it to <code>i+1</code>, so you'll get a single incrementation instead of two.</p>\n\n<p>Example :</p>\n\n<pre><code>int i = 5;\nThread 1 : i++;\n           // reads value 5\nThread 2 : i++;\n           // reads value 5\nThread 1 : // increments i to 6\nThread 2 : // increments i to 6\n           // i == 6 instead of 7\n</code></pre>\n", "title": "Why is i++ not atomic?", "tags": ["java", "multithreading", "concurrency"], "link": "http://stackoverflow.com/questions/25168062/why-is-i-not-atomic/25168105#25168105", "question_id": 25168062, "answer_id": 25168105}, {"body": "<blockquote>\n  <p>Why is i++ not atomic in Java?</p>\n</blockquote>\n\n<p>Let's break the increment operation into multiple statements:</p>\n\n<p>Thread 1 &amp; 2 :</p>\n\n<ol>\n<li>Fetch value of total from memory</li>\n<li>Add 1 to the value</li>\n<li>Write back to the memory</li>\n</ol>\n\n<p>If there is no synchronization then let's say Thread one has read the value 3 and incremented it to 4, but has not written it back. At this point, the context switch happens. Thread two reads the value 3, increments it and the context switch happens. Though both threads have incremented the total value, it will still be 4 - race condition.</p>\n", "title": "Why is i++ not atomic?", "tags": ["java", "multithreading", "concurrency"], "link": "http://stackoverflow.com/questions/25168062/why-is-i-not-atomic/25168135#25168135", "question_id": 25168062, "answer_id": 25168135}, {"body": "<p>Concurrency (the <code>Thread</code> class and such) is an added feature in v1.0 of <a href=\"http://en.wikipedia.org/wiki/Java_%28programming_language%29\" rel=\"nofollow\">Java</a>. <code>i++</code> was added in the beta before that, and as such is it still more than likely in its (more or less) original implementation.</p>\n\n<p>It is up to the programmer to synchronize variables. Check out <a href=\"http://docs.oracle.com/javase/tutorial/essential/concurrency/\" rel=\"nofollow\">Oracle's tutorial on this</a>.</p>\n\n<p>Edit: To clarify, i++ is a well defined procedure that predates Java, and as such the designers of Java decided to keep the original functionality of that procedure.</p>\n\n<p>The ++ operator was defined in B (1969) which predates java and threading by just a tad.</p>\n", "title": "Why is i++ not atomic?", "tags": ["java", "multithreading", "concurrency"], "link": "http://stackoverflow.com/questions/25168062/why-is-i-not-atomic/25168153#25168153", "question_id": 25168062, "answer_id": 25168153}, {"body": "<p>The important thing is the JLS (Java Language Specification) rather than how various implementations of the JVM may or may not have implemented a certain feature of the language. The JLS defines the ++ postfix operator in clause 15.14.2 which says i.a. \"the value 1 is added to the value of the variable and the sum is stored back into the variable\". Nowhere does it mention or hint at multithreading or atomicity. For these the JLS provides <em>volatile</em> and <em>synchronized</em>. Additionally, there is the package <em>java.util.concurrent.atomic</em> (see <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/package-summary.html\">http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/package-summary.html</a>)</p>\n", "title": "Why is i++ not atomic?", "tags": ["java", "multithreading", "concurrency"], "link": "http://stackoverflow.com/questions/25168062/why-is-i-not-atomic/25168841#25168841", "question_id": 25168062, "answer_id": 25168841}, {"body": "<p><code>i++</code> is probably not atomic in Java because atomicity is a special requirement which is not present in the majority of the uses of <code>i++</code>. That requirement has a significant overhead: there is a large cost in making an increment operation atomic; it involves synchronization at both the software and hardware levels that need not be present in an ordinary increment.</p>\n\n<p>You could make the argument that <code>i++</code> should have been designed and documented as specifically performing an atomic increment, so that a non-atomic increment is performed using <code>i = i + 1</code>.  However, this would break the \"cultural compatibility\" between Java, and C and C++. As well, it would take away a convenient notation which programmers familiar with C-like languages take for granted, giving it a special meaning that applies only in limited circumstances.</p>\n\n<p>Basic C or C++ code like <code>for (i = 0; i &lt; LIMIT; i++)</code> would translate into Java as <code>for (i = 0; i &lt; LIMIT; i = i + 1)</code>; because it would be inappropriate to use the atomic <code>i++</code>. What's worse, programmers coming from C or other C-like languages to Java would use <code>i++</code> anyway, resulting in unnecessary use of atomic instructions.</p>\n\n<p>Even at the machine instruction set level, an increment type operation is usually not atomic for performance reasons. In x86, a special instruction \"lock prefix\" must be used to make the <code>inc</code> instruction atomic: for the same reasons as above.  If <code>inc</code> were always atomic, it would never be used when a non-atomic inc is required; programmers and compilers would generate code that loads, adds 1 and stores, because it would be way faster.</p>\n\n<p>In some instruction set architectures, there is no atomic <code>inc</code> or perhaps no <code>inc</code> at all; to do an atomic inc on MIPS, you have to write a software loop which uses the <code>ll</code> and <code>sc</code>: load-linked, and store-conditional. Load-linked reads the word, and store-conditional stores the new value if the word has not changed, or else it fails (which is detected and causes a re-try).</p>\n", "title": "Why is i++ not atomic?", "tags": ["java", "multithreading", "concurrency"], "link": "http://stackoverflow.com/questions/25168062/why-is-i-not-atomic/25171089#25171089", "question_id": 25168062, "answer_id": 25171089}, {"body": "<p>If the operation <code>i++</code> would be atomic you wouldn't have the chance to read the value from it. This is exactly what you want to do using <code>i++</code> (instead of using <code>++i</code>).</p>\n\n<p>For example look at the following code:</p>\n\n<pre><code>public static void main(final String[] args) {\n    int i = 0;\n    System.out.println(i++);\n}\n</code></pre>\n\n<p>In this case we expect the output to be: <code>0</code>\n(because we post increment, e.g. first read, then update)</p>\n\n<p>This is one of the reasons the operation can't be atomic, because you need to read the value (and do something with it) and <strong>then</strong> update the value.</p>\n\n<p>The other important reason is that doing something atomically <em>usually</em> takes more time because of locking. It would be silly to have all the operations on primitives take a little bit longer for the rare cases when people want to have atomic operations. That is why they've added <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicInteger.html\" rel=\"nofollow\"><code>AtomicInteger</code></a> and <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/package-summary.html\" rel=\"nofollow\">other</a> atomic classes to the language.</p>\n", "title": "Why is i++ not atomic?", "tags": ["java", "multithreading", "concurrency"], "link": "http://stackoverflow.com/questions/25168062/why-is-i-not-atomic/25178383#25178383", "question_id": 25168062, "answer_id": 25178383}, {"body": "<p><code>i++</code> is a statement which simply involves 3 operations:</p>\n\n<ol>\n<li>Read current value</li>\n<li>Write new value</li>\n<li>Store new value</li>\n</ol>\n\n<p>These three operations are not meant to be executed in one step, in other words <code>i++</code> is not a  <strong>compound</strong> operation. As a result all sorts of things can go wrong when more than one threads are involved in a single but non-compound operation.</p>\n\n<p>As an example imagine this scenario:</p>\n\n<p><strong>Time 1</strong>:</p>\n\n<pre><code>Thread A fetches i\nThread B fetches i\n</code></pre>\n\n<p><strong>Time 2</strong>:</p>\n\n<pre><code>Thread A overwrites i with a new value say -foo-\nThread B overwrites i with a new value say -bar-\nThread B stores -bar- in i\n\n// At this time thread B seems to be more 'active'. Not only does it overwrite \n// its local copy of i but also makes it in time to store -bar- back to \n// 'main' memory (i)\n</code></pre>\n\n<p><strong>Time 3</strong>:</p>\n\n<pre><code>Thread A attempts to store -foo- in memory effectively overwriting the -bar- \nvalue (in i) which was just stored by thread B in Time 2.\n\nThread B has nothing to do here. Its work was done by Time 2. However it was \nall for nothing as -bar- was eventually overwritten by another thread.\n</code></pre>\n\n<p>And there you have it. A race condition.</p>\n\n<hr>\n\n<p>That's why <code>i++</code> is not atomic. If it was, none of this would have happened and each <code>fetch-update-store</code> would happen atomically. That's exactly what <code>AtomicInteger</code> is for and in your case it would probably fit right in.</p>\n\n<p>P.S.</p>\n\n<p>An excellent book covering all of those issues and then some is this:\n<a href=\"http://rads.stackoverflow.com/amzn/click/0321349601\" rel=\"nofollow\">Java Concurrency in Practice</a></p>\n", "title": "Why is i++ not atomic?", "tags": ["java", "multithreading", "concurrency"], "link": "http://stackoverflow.com/questions/25168062/why-is-i-not-atomic/25181723#25181723", "question_id": 25168062, "answer_id": 25181723}, {"body": "<p>There are two steps:</p>\n\n<ol>\n<li>fetch i from memory</li>\n<li>set i+1 to i</li>\n</ol>\n\n<p>so it's not atomic operation.\nWhen thread1 executes i++, and thread2 executes i++, the final value of i may be i+1.</p>\n", "title": "Why is i++ not atomic?", "tags": ["java", "multithreading", "concurrency"], "link": "http://stackoverflow.com/questions/25168062/why-is-i-not-atomic/25276937#25276937", "question_id": 25168062, "answer_id": 25276937}], "creation_date": 1407351321, "score": 64, "link": "http://stackoverflow.com/questions/25168062/why-is-i-not-atomic", "question_id": 25168062}, {"body": "<p>I can't seem to be able to get Maven to use Java 1.8. Using 1.8 as the target turns up the following error:</p>\n\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile\n(default-compile) on project csaro: Fatal error compiling: invalid target\nrelease: 1.8 -&gt; [Help 1]\n</code></pre>\n\n<p>The cause of the error is obvious enough: Maven isn't using the right version of Java:</p>\n\n<pre><code>$ mvn -version\nApache Maven 3.2.2 (45f7c06d68e745d05611f7fd14efb6594181933e; 2014-06-17T07:51:42-06:00)\nMaven home: /usr/local/Cellar/maven/3.2.2/libexec\nJava version: 1.7.0_51, vendor: Oracle Corporation\nJava home: /Library/Java/JavaVirtualMachines/jdk1.7.0_51.jdk/Contents/Home/jre\nDefault locale: en_US, platform encoding: UTF-8\nOS name: \"mac os x\", version: \"10.9.2\", arch: \"x86_64\", family: \"mac\"\n</code></pre>\n\n<p>But the installed version of Java should be 1.8:</p>\n\n<pre><code>$ java -version\njava version \"1.8.0_20-ea\"\nJava(TM) SE Runtime Environment (build 1.8.0_20-ea-b22)\nJava HotSpot(TM) 64-Bit Server VM (build 25.20-b21, mixed mode)\n</code></pre>\n\n<p>And JAVA_HOME is set:</p>\n\n<pre><code>$ echo $JAVA_HOME\n/Library/Java/JavaVirtualMachines/jdk1.8.0_20.jdk/Contents/Home\n</code></pre>\n\n<p>I also tried the <a href=\"http://stackoverflow.com/questions/17824889/how-to-force-maven-3-1-to-use-right-version-of-java-on-mac-os-8-10\">command here</a> (which creates <code>mavenrc</code>). I've tried restarting the computer several times, and have verified that the env var is correctly set (it's set in <code>.bash_profile</code>).</p>\n\n<p>Maven was installed with Homebrew.</p>\n\n<p>Java 1.8 is working fine in Eclipse (which is using m2e). I just can't get Maven to work on the command line.</p>\n", "tags": ["java", "maven"], "title": "Can&#39;t get Maven to recognize Java 1.8", "answers": [{"body": "<p>You are using an early access release of 1.8.  Now that is has been released, you should install the released version.</p>\n\n<p>Check you maven installation to see if you have a configuration associated with it that specifies a particular JDK.  Occasionally there are wrapper scripts which reset JAVA_HOME prior to maven launch, or the maven executable is launched in a wrapper that refers to a config file that could bind you to a particular JVM.</p>\n", "title": "Can&#39;t get Maven to recognize Java 1.8", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/24705877/cant-get-maven-to-recognize-java-1-8/24706146#24706146", "question_id": 24705877, "answer_id": 24706146}, {"body": "<p>Your <code>JAVA_HOME</code> is being overridden from somewhere else. Try echoing in <code>mvn</code> right before java invocation.</p>\n", "title": "Can&#39;t get Maven to recognize Java 1.8", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/24705877/cant-get-maven-to-recognize-java-1-8/24706182#24706182", "question_id": 24705877, "answer_id": 24706182}, {"body": "<p>It turns out that I had a forgotten <code>~/.mavenrc</code> file that had set the value of <code>JAVA_HOME</code>.</p>\n\n<p>For future readers, check the following locations for places that may override <code>JAVA_HOME</code> (in ascending order of precedence):</p>\n\n<ul>\n<li><code>~/.bash_profile</code></li>\n<li><code>~/.bash_login</code></li>\n<li><code>~/.bashrc</code></li>\n<li><code>~/.profile</code></li>\n<li><code>/etc/mavenrc</code></li>\n<li><code>~/.mavenrc</code></li>\n</ul>\n", "title": "Can&#39;t get Maven to recognize Java 1.8", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/24705877/cant-get-maven-to-recognize-java-1-8/24706424#24706424", "question_id": 24705877, "answer_id": 24706424}, {"body": "<p>For me the issue was that when I installed from <code>jdk-8u25-macosx-x64.dmg</code> the installation did not update the <code>/System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK</code> directory link to the new 1.8 JDK. This may not have been the issue of the original question but it was the solution for me when I encountered the same error message.</p>\n\n<p>I don't know why the installer doesn't link it and to make matters more confusing, the path is different depending on whether you installed it from Oracle or Apple. See <a href=\"http://stackoverflow.com/questions/6141180/mac-os-x-10-6-7-java-path-current-jdk-confusing\">Mac OS X 10.6.7 Java Path Current JDK confusing</a></p>\n\n<p>I did the following to fix my environment</p>\n\n<pre><code>cd /System/Library/Frameworks/JavaVM.framework/Versions\nsudo rm CurrentJDK\nsudo ln -s /Library/Java/JavaVirtualMachines/&lt;installed_jdk_version&gt;.jdk/Contents CurrentJDK\n</code></pre>\n", "title": "Can&#39;t get Maven to recognize Java 1.8", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/24705877/cant-get-maven-to-recognize-java-1-8/26635872#26635872", "question_id": 24705877, "answer_id": 26635872}, {"body": "<p>The solution which worked for me:</p>\n\n<p>In Eclipse, I had a wrong run configuration in my Maven build. Go to </p>\n\n<blockquote>\n  <p>Run Configurations -> JRE [Tab]</p>\n</blockquote>\n\n<p>and set the runtime to Java 8.</p>\n", "title": "Can&#39;t get Maven to recognize Java 1.8", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/24705877/cant-get-maven-to-recognize-java-1-8/27079188#27079188", "question_id": 24705877, "answer_id": 27079188}, {"body": "<p>I ran into the same problem on my CentOS 6.5 system.</p>\n\n<p><code>java -version</code> returned a Java 8 version, but <code>javac -version</code> returned a Java 7 version.</p>\n\n<p>I had to run the following commands to get all kinds of Java-related symlinks point to my JDK 8 installation:</p>\n\n<pre><code>sudo alternatives --config java\nsudo alternatives --config javac\nsudo alternatives --config jre_openjdk\nsudo alternatives --config java_sdk_openjdk\n</code></pre>\n", "title": "Can&#39;t get Maven to recognize Java 1.8", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/24705877/cant-get-maven-to-recognize-java-1-8/29978693#29978693", "question_id": 24705877, "answer_id": 29978693}, {"body": "<p>If you are using Maven within a continuous integration server be sure to check it's settings as it may override the JDK used by Maven. For Jenkins, I had to add the new 1.8 JDK in the general settings and configure my project to use it.</p>\n", "title": "Can&#39;t get Maven to recognize Java 1.8", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/24705877/cant-get-maven-to-recognize-java-1-8/32011081#32011081", "question_id": 24705877, "answer_id": 32011081}, {"body": "<p>I had same problem, needed 2 steps to make correct:</p>\n\n<ol>\n<li>Ensure <code>JAVA_HOME</code> is set pointing correctly to JDK;</li>\n<li>JDK and JRE in eclipse should point the same version.  </li>\n</ol>\n\n<p>For me 1 step was right, 2nd step had problem. In eclipse \u00bb Project's properties \u00bb Build Path \u00bb Installed JRE \u00bb point to JDK.</p>\n", "title": "Can&#39;t get Maven to recognize Java 1.8", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/24705877/cant-get-maven-to-recognize-java-1-8/34993522#34993522", "question_id": 24705877, "answer_id": 34993522}], "creation_date": 1405109964, "score": 61, "link": "http://stackoverflow.com/questions/24705877/cant-get-maven-to-recognize-java-1-8", "question_id": 24705877}, {"body": "<p>When I try to run an Android emulator, I get the following error screen. The same occurs when I export the apk. When I go to the directory where the apk will be saved, the apk file is not there.</p>\n\n<p>Thank you,<br>\nchristophe</p>\n\n<p><img src=\"http://i.stack.imgur.com/dJ7rJ.png\" alt=\"enter image description here\"></p>\n", "tags": ["java", "android", "android-studio"], "title": "Android Studio: failed to complete gradle execution, cause is empty", "answers": [{"body": "<p>I had the same issue, this problem will be fixed by doing the below step.</p>\n\n<p>Go to </p>\n\n<blockquote>\n  <p>File->Setting->Gradle->Gradle Vm Option</p>\n</blockquote>\n\n<p>For Android Studio 1.2</p>\n\n<blockquote>\n  <p>File->Setting->Build, Deployment &amp;Execution->Build Tools->Gradle->Gradle Vm Option</p>\n</blockquote>\n\n<p>, Now put this value <code>-Xmx256m</code> in the box, and hit the Apply button.</p>\n", "title": "Android Studio: failed to complete gradle execution, cause is empty", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/27407855/android-studio-failed-to-complete-gradle-execution-cause-is-empty/27966767#27966767", "question_id": 27407855, "answer_id": 27966767}, {"body": "<p>I had this issue too. It caused by mistake in dimens.xml (git helps me found it).</p>\n\n<p>I used</p>\n\n<p><code>&lt;dimen name=\"map_search_view_top_margin\"&gt;100&lt;/dimen&gt;</code></p>\n\n<p>instead</p>\n\n<p><code>&lt;dimen name=\"map_search_view_top_margin\"&gt;100dp&lt;/dimen&gt;</code></p>\n\n<p>Hope it helps.</p>\n", "title": "Android Studio: failed to complete gradle execution, cause is empty", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/27407855/android-studio-failed-to-complete-gradle-execution-cause-is-empty/30847316#30847316", "question_id": 27407855, "answer_id": 30847316}, {"body": "<p>This dialog box with empty cause also comes when there is some error in your resource(res) directory. Check for any error in layout files etc.</p>\n", "title": "Android Studio: failed to complete gradle execution, cause is empty", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/27407855/android-studio-failed-to-complete-gradle-execution-cause-is-empty/30864068#30864068", "question_id": 27407855, "answer_id": 30864068}, {"body": "<p>In my case the root of the problem was, <strong>I deleted some resources that some xml files were refering to</strong>, and in that case neither of \"Clear Project\" \"Rebuild Project\" \"Gradle VM Option\" or \"deleting .gradle folder\" helped at all. </p>\n\n<p>What more to say is, none of the mentioned xml files were in use, and no error was displayed anywhere. I only detected the problem when (in desperate) <strong>sync'ed Gradle, and then opened the Gradle console and scrolled up and read the red error lines</strong>.</p>\n", "title": "Android Studio: failed to complete gradle execution, cause is empty", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/27407855/android-studio-failed-to-complete-gradle-execution-cause-is-empty/31028554#31028554", "question_id": 27407855, "answer_id": 31028554}, {"body": "<ol>\n<li>Click \"Gradle Console\" for the log from Gradle. </li>\n<li>Debug from the error messages\n\n<ul>\n<li>Mac: In Android Studio, go to:\n\n<ul>\n<li>\"Preference\"</li>\n<li>\"Build, Execution, Deployment\"</li>\n<li>\"Compiler\"</li>\n<li>Add \"--stacktrace\" to \"Command-line Options\"</li>\n</ul></li>\n</ul></li>\n</ol>\n\n<p>Note  the error will usually be listed as the first line (improperly formatted for Android Studio Gradle console such as:</p>\n\n<blockquote>\n  <p>AGPBI: {\"kind\":\"error\",\"text\":\"Float types not allowed (at \\u0027icon_alpha_active\\u0027 with value \\u00270.75\\u0027).\",\"sources\":[{\"file\":\"/Users/mingsheng/path/to/my/errenous/integers.xml\",\"position\":{\"startLine\":5,\"startColumn\":38,\"startOffset\":272,\"endColumn\":42,\"endOffset\":276}}],\"original\":\"\"}</p>\n</blockquote>\n\n<p>Where \"text\" = error message, \"sources: file\" = errenous filepath/name</p>\n\n<p>In this example, I have entered a Float value in the integers file.</p>\n", "title": "Android Studio: failed to complete gradle execution, cause is empty", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/27407855/android-studio-failed-to-complete-gradle-execution-cause-is-empty/31447763#31447763", "question_id": 27407855, "answer_id": 31447763}, {"body": "<p>Honestly speaking, to me none of the above solutions worked and i almost fought over this for 3 days. Finally ultimate solution was to backup my project, uninstall studio and its trace files completely, clear files from temp, %temp% and prefetch folders and then reinstall all over again and finally it worked.</p>\n\n<p>Pls discard my above answer which i taught was one of the solutions. I faced this problem repeatedly because 1 of my teammate forgot to include git.ignore file while pushing code to bitbucket and everytime i used to pull that code and then gradle used to pop the above problem. And after figuring out that, i have added proper git.ignore file and now there's no any problem on any1's pc :)</p>\n", "title": "Android Studio: failed to complete gradle execution, cause is empty", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/27407855/android-studio-failed-to-complete-gradle-execution-cause-is-empty/31542154#31542154", "question_id": 27407855, "answer_id": 31542154}, {"body": "<p>None of the solutions worked for me. So I found this solution <a href=\"https://code.google.com/p/android/issues/detail?id=130520\" rel=\"nofollow\">here</a>:</p>\n\n<p>My Android Studio was using JDK 1.8, so I switched back to JDK 1.7 and now it is working!</p>\n\n<p>Go to </p>\n\n<blockquote>\n  <p>File > Project Structure > SDK Location</p>\n</blockquote>\n\n<p>I had <strong>JDK Location</strong> set as jdk1.8.0_05. I just changed it to jdk1.7.0_79 and everything works fine now. </p>\n", "title": "Android Studio: failed to complete gradle execution, cause is empty", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/27407855/android-studio-failed-to-complete-gradle-execution-cause-is-empty/31731984#31731984", "question_id": 27407855, "answer_id": 31731984}, {"body": "<p>I am often getting that error when I have a typo in my xml. Open the gradle console and scroll up to the first red lines that appear. It will tell you the exact problem.</p>\n", "title": "Android Studio: failed to complete gradle execution, cause is empty", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/27407855/android-studio-failed-to-complete-gradle-execution-cause-is-empty/31739012#31739012", "question_id": 27407855, "answer_id": 31739012}, {"body": "<p>This is a mistake somewhere in your xml files.\nCheck</p>\n\n<pre><code>values.xml\ncolors.xml\nstrings.xml\ndimens.xml\n</code></pre>\n\n<p>Something wrong with opening closing bracket or something you missed in these files. </p>\n", "title": "Android Studio: failed to complete gradle execution, cause is empty", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/27407855/android-studio-failed-to-complete-gradle-execution-cause-is-empty/32372637#32372637", "question_id": 27407855, "answer_id": 32372637}, {"body": "<p>I have this problem, too. I used Gradle v.1.3.1 but Android Studio version is v1.2.2. Just update Android Studio to v.1.3.2 solved my problem.</p>\n", "title": "Android Studio: failed to complete gradle execution, cause is empty", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/27407855/android-studio-failed-to-complete-gradle-execution-cause-is-empty/32449654#32449654", "question_id": 27407855, "answer_id": 32449654}, {"body": "<p>I had the same issue. After an hour of struggle, it's finally fixed.</p>\n\n<p>First I updated Android Studio to 1.3.2. That did not fix the problem immediately, but at least it gave a proper error when trying to run the application.</p>\n\n<p>(for me, there was something wrong with JAR dependencies so I removed them and it's running now, but that's probably irrelevant)</p>\n", "title": "Android Studio: failed to complete gradle execution, cause is empty", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/27407855/android-studio-failed-to-complete-gradle-execution-cause-is-empty/32538382#32538382", "question_id": 27407855, "answer_id": 32538382}, {"body": "<p>When you have an error like this. Just move to your BOTTOM RIGHT corner of the screen there is something known as GRADLE CONSOLE open that and read what went wrong. That helped me.</p>\n", "title": "Android Studio: failed to complete gradle execution, cause is empty", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/27407855/android-studio-failed-to-complete-gradle-execution-cause-is-empty/33333655#33333655", "question_id": 27407855, "answer_id": 33333655}, {"body": "<p>Try to upgrade your android studio, and when you run your project again, it will tell you where the problem is.</p>\n\n<p>For me, I encountered this problem several times, the first time is something wrong with the style.xml, and the second time is string.xml file. Anyway, It seems Android studio could not find something wrong with .xml file.</p>\n\n<p>But anyway, try to \"refresh\" your Android studio and let it tell you where are the problems, even reinstall it.</p>\n\n<p>good luck!</p>\n", "title": "Android Studio: failed to complete gradle execution, cause is empty", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/27407855/android-studio-failed-to-complete-gradle-execution-cause-is-empty/34010614#34010614", "question_id": 27407855, "answer_id": 34010614}, {"body": "<p>I had the same problem, and the problem was gone after upgrading my Android Studio from 1.2.1 to 1.5.1. There was no error even after adding <code>--stacktrace --info</code> to VM options. Gradle tasks would finish successfully, but the application just wouldn't launch (and studio would gray out the run button forever, probably waiting for a response from emulator). I had tried everything else mentioned here.</p>\n", "title": "Android Studio: failed to complete gradle execution, cause is empty", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/27407855/android-studio-failed-to-complete-gradle-execution-cause-is-empty/34780780#34780780", "question_id": 27407855, "answer_id": 34780780}, {"body": "<p>On newer version of AS 2.0 \nFile->Setting->Build, Deployment &amp;Execution-Compilers->Android Compilers->Gradle->Gradle Vm Option</p>\n\n<p>put this as an option -Xmx256m</p>\n", "title": "Android Studio: failed to complete gradle execution, cause is empty", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/27407855/android-studio-failed-to-complete-gradle-execution-cause-is-empty/38326413#38326413", "question_id": 27407855, "answer_id": 38326413}], "creation_date": 1418234605, "score": 61, "link": "http://stackoverflow.com/questions/27407855/android-studio-failed-to-complete-gradle-execution-cause-is-empty", "question_id": 27407855}, {"body": "<p>In Java when we declare </p>\n\n<pre><code>short number=1024*1024*1024; \n</code></pre>\n\n<p>it will give compile time error but  </p>\n\n<pre><code>short number=1024 * 1024 * 1024 * 1024;\n</code></pre>\n\n<p>compiles fine. Why does this happen? </p>\n", "tags": ["java", "integer-arithmetic"], "title": "Java Primitives range calculation", "answers": [{"body": "<p>The compiler will, in this case, evaluate the calculation (because it contains only constants) and try to assign the result to the variable. This calculation is done with type <code>int</code> and only converted to <code>short</code> on assignment, if at all possible.</p>\n\n<p>In your case, the first calculation is too large to fit into a <code>short</code> (<code>1073741824</code>). The second one will overflow the <code>int</code> and end up in a range that <code>short</code> supports (<code>0</code>). So the assignment works in that case.</p>\n\n<p>Mind you, you probably don't ever want to rely on these things in code.</p>\n", "title": "Java Primitives range calculation", "tags": ["java", "integer-arithmetic"], "link": "http://stackoverflow.com/questions/24772953/java-primitives-range-calculation/24772991#24772991", "question_id": 24772953, "answer_id": 24772991}, {"body": "<p>You are facing the problem as your number is <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.8\" rel=\"nofollow\">wrapping around</a>.In the first case it does not wrap around and hence it overflows the range of short. But in the second case it wraps around after the calculationa and hence it comes in the range of short and so you dont have the compile time error.</p>\n\n<p>A loss of precision means that you are losing information of the given value.(<em>The short data type is a 16-bit signed two's complement integer. It has a minimum value of -32,768 and a maximum value of 32,767 (inclusive).</em>) In your first case the range of short is crossed(1073741824) and hence you are loosing the information.</p>\n\n<blockquote>\n  <p>A narrowing conversion of a signed integer to an integral type T\n  simply discards all but the n lowest order bits, where n is the number\n  of bits used to represent type T.</p>\n</blockquote>\n\n<p><strong>EDIT:-</strong></p>\n\n<p>From <strong><a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-3.html#jls-3.10.1\" rel=\"nofollow\">JLS \u00a73.10.1</a></strong>(very correctly mentioned in <a href=\"http://stackoverflow.com/questions/24676375/why-does-int-i-1024-1024-1024-1024-compile-without-error\">this</a> similar question)</p>\n\n<blockquote>\n  <p>It is a compile-time error if a decimal literal of type int is larger\n  than 2147483648 (2<sup>31</sup>), or if the decimal literal 2147483648 appears\n  anywhere other than as the operand of the unary minus operator\n  (<a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.15.4\" rel=\"nofollow\">\u00a715.15.4</a>).</p>\n</blockquote>\n", "title": "Java Primitives range calculation", "tags": ["java", "integer-arithmetic"], "link": "http://stackoverflow.com/questions/24772953/java-primitives-range-calculation/24773061#24773061", "question_id": 24772953, "answer_id": 24773061}], "creation_date": 1405489165, "score": 61, "link": "http://stackoverflow.com/questions/24772953/java-primitives-range-calculation", "question_id": 24772953}, {"body": "<p>Suppose I have a method that returns a read-only view into a member list:</p>\n\n<pre><code>class Team\n{\n    private List&lt;Player&gt; players = new ArrayList&lt;&gt;();\n\n    // ...\n\n    public List&lt;Player&gt; getPlayers()\n    {\n        return Collections.unmodifiableList(players);\n    }\n}\n</code></pre>\n\n<p>Further suppose that all the client does is iterate over the list once, immediately. Maybe to put the players into a JList or something. The client does <em>not</em> store a reference to the list for later inspection!</p>\n\n<p>Given this common scenario, should I return a stream instead?</p>\n\n<pre><code>    public Stream&lt;Player&gt; getPlayers()\n    {\n        return players.stream();\n    }\n</code></pre>\n\n<p>Or is returning a stream non-idiomatic in Java? Were streams designed to always be \"terminated\" inside the same expression they were created in?</p>\n", "tags": ["java", "collections", "java-8", "encapsulation", "java-stream"], "title": "Should I return a Collection or a Stream?", "answers": [{"body": "<blockquote>\n  <p>Were streams designed to always be \"terminated\" inside the same expression they were created in?</p>\n</blockquote>\n\n<p>That is how they are used in most examples.  </p>\n\n<p>Note: returning a Stream is not that different to returning a Iterator (admitted with much more expressive power)</p>\n\n<p>IMHO the best solution is to encapsulate why you are doing this, and not return the collection.</p>\n\n<p>e.g.</p>\n\n<pre><code>public int playerCount();\npublic Player player(int n);\n</code></pre>\n\n<p>or if you intend to count them</p>\n\n<pre><code>public int countPlayersWho(Predicate&lt;? super Player&gt; test);\n</code></pre>\n", "title": "Should I return a Collection or a Stream?", "tags": ["java", "collections", "java-8", "encapsulation", "java-stream"], "link": "http://stackoverflow.com/questions/24676877/should-i-return-a-collection-or-a-stream/24677512#24677512", "question_id": 24676877, "answer_id": 24677512}, {"body": "<p>I think it depends on your scenario. May be, if you make your <code>Team</code> implement <code>Iterable&lt;Player&gt;</code>, it is sufficient. </p>\n\n<pre><code>for (Player player : team) {\n    System.out.println(player);\n}\n</code></pre>\n\n<p>or in the a functional style:</p>\n\n<pre><code>team.forEach(System.out::println);\n</code></pre>\n\n<p>But if you want a more complete and fluent api, a stream could be a good solution. </p>\n", "title": "Should I return a Collection or a Stream?", "tags": ["java", "collections", "java-8", "encapsulation", "java-stream"], "link": "http://stackoverflow.com/questions/24676877/should-i-return-a-collection-or-a-stream/24678064#24678064", "question_id": 24676877, "answer_id": 24678064}, {"body": "<p>I would probably have 2 methods, one to return a <code>Collection</code> and one to return the collection as a <code>Stream</code>.</p>\n\n<pre><code>class Team\n{\n    private List&lt;Player&gt; players = new ArrayList&lt;&gt;();\n\n// ...\n\n    public List&lt;Player&gt; getPlayers()\n    {\n        return Collections.unmodifiableList(players);\n    }\n\n    public Stream&lt;Player&gt; getPlayerStream()\n    {\n        return players.stream();\n    }\n\n}\n</code></pre>\n\n<p>This is the best of both worlds.  The client can choose if they want the List or the Stream and they don't have to do the extra object creation of making an immutable copy of the list just to get a Stream.</p>\n\n<p>This also only adds 1 more method to your API so you don't have too many methods</p>\n", "title": "Should I return a Collection or a Stream?", "tags": ["java", "collections", "java-8", "encapsulation", "java-stream"], "link": "http://stackoverflow.com/questions/24676877/should-i-return-a-collection-or-a-stream/24679464#24679464", "question_id": 24676877, "answer_id": 24679464}, {"body": "<p>The answer is, as always, \"it depends\".  It depends on how big the returned collection will be.  It depends on whether the result changes over time, and how important consistency of the returned result is.  And it depends very much on how the user is likely to use the answer.  </p>\n\n<p>First, note that you can always get a Collection from a Stream, and vice versa:</p>\n\n<pre><code>// If API returns Collection, convert with stream()\ngetFoo().stream()...\n\n// If API returns Stream, use collect()\nCollection&lt;T&gt; c = getFooStream().collect(toList());\n</code></pre>\n\n<p>So the question is, which is more useful to your callers.  </p>\n\n<p>If your result might be infinite, there's only one choice: Stream.</p>\n\n<p>If your result might be very large, you probably prefer Stream, since there may not be any value in materializing it all at once, and doing so could create significant heap pressure.</p>\n\n<p>If all the caller is going to do is iterate through it (search, filter, aggregate), you should prefer Stream, since Stream has these built-in already and there's no need to materialize a collection (especially if the user might not process the whole result.)  This is a very common case.  </p>\n\n<p>Even if you know that the user will iterate it multiple times or otherwise keep it around, you still may want to return a Stream instead, for the simple fact that whatever Collection you choose to put it in (e.g., ArrayList) may not be the form they want, and then the caller has to copy it anyway.  if you return a stream, they can do <code>collect(toCollection(factory))</code> and get it in exactly the form they want.</p>\n\n<p>The above \"prefer Stream\" cases mostly derive from the fact that Stream is more flexible; you can late-bind to how you use it without incurring the costs and constraints of materializing it to a Collection.  </p>\n\n<p>The one case where you must return a Collection is when there are strong consistency requirements, and you have to produce a consistent snapshot of a moving target.  Then, you will want put the elements into a collection that will not change.</p>\n\n<p>So I would say that most of the time, Stream is the right answer -- it is more flexible, it doesn't impose usually-unnecessary materialization costs, and can be easily turned into the Collection of your choice if needed.  But sometimes, you may have to return a Collection (say, due to strong consistency requirements), or you may want to return Collection because you know how the user will be using it and know this is the most convenient thing for them.  </p>\n", "title": "Should I return a Collection or a Stream?", "tags": ["java", "collections", "java-8", "encapsulation", "java-stream"], "link": "http://stackoverflow.com/questions/24676877/should-i-return-a-collection-or-a-stream/24679745#24679745", "question_id": 24676877, "answer_id": 24679745}, {"body": "<p>I have a few points to add to <a href=\"http://stackoverflow.com/a/24679745/1441122\">Brian Goetz' excellent answer</a>.</p>\n\n<p>It's quite common to return a Stream from a \"getter\" style method call. See the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/class-use/Stream.html\">Stream usage page</a> in the Java 8 javadoc and look for \"methods... that return Stream\" for the packages other than <code>java.util.Stream</code>. These methods are usually on classes that represent or can contain multiple values or aggregations of something. In such cases, APIs typically have returned collections or arrays of them. For all the reasons that Brian noted in his answer, it's very flexible to add Stream-returning methods here. Many of these classes have collections- or array-returning methods already, because the classes predate the Streams API. If you're designing a new API, and it makes sense to provide Stream-returning methods, it might not be necessary to add collection-returning methods as well.</p>\n\n<p>Brian mentioned the cost of \"materializing\" the values into a collection. To amplify this point, there are actually two costs here: the cost of storing values in the collection (memory allocation and copying) and also the cost of creating the values in the first place. The latter cost can often be reduced or avoided by taking advantage of a Stream's laziness-seeking behavior. A good example of this are the APIs in <code>java.nio.file.Files</code>:</p>\n\n<pre><code>static Stream&lt;String&gt;  lines(path)\nstatic List&lt;String&gt;    readAllLines(path)\n</code></pre>\n\n<p>Not only does <code>readAllLines</code> have to hold the entire file contents in memory in order to store it into the result list, it also has to read the file to the very end before it returns the list. The <code>lines</code> method can return almost immediately after it has performed some setup, leaving file reading and line breaking until later when it's necessary -- or not at all. This is a huge benefit, if for example, the caller is interested only in the first ten lines:</p>\n\n<pre><code>List&lt;String&gt; firstTen = Files.lines(path).limit(10).collect(toList());\n</code></pre>\n\n<p>Of course considerable memory space can be saved if the caller filters the stream to return only lines matching a pattern, etc.</p>\n\n<p>An idiom that seems to be emerging is to name stream-returning methods after the plural of the name of the things that it represents or contains, without a <code>get</code> prefix. Also, while <code>stream()</code> is a reasonable name for a stream-returning method when there is only one possible set of values to be returned, sometimes there are classes that have aggregations of multiple types of values. For example, suppose you have some object that contains both attributes and elements. You might provide two stream-returning APIs:</p>\n\n<pre><code>Stream&lt;Attribute&gt;  attributes();\nStream&lt;Element&gt;    elements();\n</code></pre>\n", "title": "Should I return a Collection or a Stream?", "tags": ["java", "collections", "java-8", "encapsulation", "java-stream"], "link": "http://stackoverflow.com/questions/24676877/should-i-return-a-collection-or-a-stream/24681959#24681959", "question_id": 24676877, "answer_id": 24681959}], "creation_date": 1404996168, "score": 59, "link": "http://stackoverflow.com/questions/24676877/should-i-return-a-collection-or-a-stream", "question_id": 24676877}, {"body": "<p>We are planning to make a new application with spring 4.0.6 version. We use controller that can return \"XML\" or \"JSON\". \nIn the previous project we have successfully implemented Jersey with Spring for REST support using JAX-RS API, but after reading a few articles and suggestions from seniors they said spring is providing pretty good REST support. </p>\n\n<p>Some of the points that really confused me if I use Spring REST support without using JAX-RS and Jersey are:</p>\n\n<ol>\n<li><p>How marshaling and unmarshaling done in Spring MVC ?</p></li>\n<li><p>Is it necessary for marshaling or unmarshaling need to use jax-rs. </p></li>\n<li><p>If marshaling and unmarshaling are automatically handled by spring then how does it know about xmlRootElements.</p></li>\n</ol>\n\n<p>I am still confused if Spring proving very good support of REST then why do people still go with Jersey for REST?\nReally looking to know more in details.</p>\n\n<p>If I said anything wrong please ignore it.\nExplanation with example is really helpful.</p>\n\n<p>Thanks in advance!!</p>\n", "tags": ["java", "spring", "web-services", "rest", "spring-mvc"], "title": "Spring 4 vs Jersey for REST web services", "answers": [{"body": "<p>AFAIK Spring rest support is based on spring mvc and its not Jax-rs implementation while jersy has implemeted jax-rs specification. \nThose having spring (core, aop or mvc) in their project chooses spring rest support over jax-rs implementor.</p>\n\n<p>I recommend jersy as its mature , follows jax-rs and easy to use.</p>\n", "title": "Spring 4 vs Jersey for REST web services", "tags": ["java", "spring", "web-services", "rest", "spring-mvc"], "link": "http://stackoverflow.com/questions/26305363/spring-4-vs-jersey-for-rest-web-services/26305705#26305705", "question_id": 26305363, "answer_id": 26305705}, {"body": "<p>I'd say both Jersey and Spring MVC are great - each project has its own style and strengths. Anyway, StackOverflow is not the right place for asking subjective comparisons (your question would be closed quite quickly). If you're already using Spring for everything else and are not <em>required</em> to use JAX-RS, then Spring MVC makes total sense.</p>\n\n<p>Regarding features like (un)marshalling, JAX-RS is just a spec after all - other libraries can offer similar features without implementing the same API.</p>\n\n<ol>\n<li><p>Instead of <a href=\"https://jax-rs-spec.java.net/nonav/2.0/apidocs/javax/ws/rs/ext/MessageBodyReader.html\">MessageBodyReaders</a>/Writers, Spring MVC is using <a href=\"http://docs.spring.io/spring-framework/docs/4.0.6.RELEASE/javadoc-api/org/springframework/http/converter/HttpMessageConverter.html\">HttpMessageConverters</a> to handle (un)marshalling REST resources. Spring MVC handles content negotiation and chooses the best available converter for the job (you can annotate methods to hint at what media type they produce/consume).</p></li>\n<li><p>No, it's not necessary to use JAX-RS to (un)marshall resources. In fact, JAX-RS implementations and Spring MVC use third party serialization libraries to do the job; so it's not tied to a particular standard</p></li>\n<li><p>In its 4.0.6 version, Spring supports many <a href=\"http://docs.spring.io/spring-framework/docs/4.0.6.RELEASE/javadoc-api/org/springframework/http/converter/HttpMessageConverter.html\">HttpMessageConverters</a>, with Jackson for JSON, JAXB for XML and many others. Spring 4.1.0 added more <a href=\"http://docs.spring.io/spring-framework/docs/4.1.0.RELEASE/javadoc-api/org/springframework/http/converter/HttpMessageConverter.html\">HttpMessageConverters</a>:</p>\n\n<ul>\n<li>Jackson is now available for both JSON and XML</li>\n<li><a href=\"https://developers.google.com/protocol-buffers/\">Google Protobuf</a></li>\n<li><a href=\"https://code.google.com/p/google-gson/\">Gson for JSON</a>, as an alternative to Jackson</li>\n</ul></li>\n</ol>\n\n<p>To answer your last point, <code>@XmlRootElement</code> is a JAXB annotation and is not part of JAX-RS. <a href=\"http://docs.spring.io/spring-framework/docs/4.1.0.RELEASE/spring-framework-reference/html/oxm.html#oxm-jaxb\">Spring supports JAXB</a>.</p>\n\n<p>For a more complete example with REST in Spring, check out <a href=\"https://spring.io/guides/gs/rest-service/\">this getting started guide</a> (you'll get a complete example running in 10-15 minutes).</p>\n\n<p>Again the last part of your question is quite subjective - there are many popular solutions for building REST services in the JVM, not just Jersey and Spring (Dropwizard, Play! Framework, etc).</p>\n", "title": "Spring 4 vs Jersey for REST web services", "tags": ["java", "spring", "web-services", "rest", "spring-mvc"], "link": "http://stackoverflow.com/questions/26305363/spring-4-vs-jersey-for-rest-web-services/26317525#26317525", "question_id": 26305363, "answer_id": 26317525}], "creation_date": 1412963956, "score": 56, "link": "http://stackoverflow.com/questions/26305363/spring-4-vs-jersey-for-rest-web-services", "question_id": 26305363}, {"body": "<p>I know how to \"transform\" a simple Java <code>List</code> from <code>Y</code> -> <code>Z</code>, i.e.:</p>\n\n<pre><code>List&lt;String&gt; x;\nList&lt;Integer&gt; y = x.stream()\n        .map(s -&gt; Integer.parseInt(s))\n        .collect(Collectors.toList());\n</code></pre>\n\n<p>Now I'd like to do basically the same with a Map, i.e.:</p>\n\n<pre><code>INPUT:\n{\n  \"key1\" -&gt; \"41\",    // \"41\" and \"42\"\n  \"key2\" -&gt; \"42      // are Strings\n}\n\nOUTPUT:\n{\n  \"key1\" -&gt; 41,      // 41 and 42\n  \"key2\" -&gt; 42       // are Integers\n}\n</code></pre>\n\n<p>The solution should not be limited to <code>String</code> -> <code>Integer</code>. Just like in the <code>List</code> example above, I'd like to call any method (or constructor).</p>\n", "tags": ["java", "mapreduce", "java-8", "java-stream", "collectors"], "title": "Java8: HashMap&lt;X, Y&gt; to HashMap&lt;X, Z&gt; using Stream / Map-Reduce / Collector", "answers": [{"body": "<pre><code>Map&lt;String, String&gt; x;\nMap&lt;String, Integer&gt; y =\n    x.entrySet().stream()\n        .collect(Collectors.toMap(\n            e -&gt; e.getKey(),\n            e -&gt; Integer.parseInt(e.getValue())\n        ));\n</code></pre>\n\n<p>It's not quite as nice as the list code. You can't construct new <code>Map.Entry</code>s in a <code>map()</code> call so the work is mixed into the <code>collect()</code> call.</p>\n", "title": "Java8: HashMap&lt;X, Y&gt; to HashMap&lt;X, Z&gt; using Stream / Map-Reduce / Collector", "tags": ["java", "mapreduce", "java-8", "java-stream", "collectors"], "link": "http://stackoverflow.com/questions/25903137/java8-hashmapx-y-to-hashmapx-z-using-stream-map-reduce-collector/25903190#25903190", "question_id": 25903137, "answer_id": 25903190}, {"body": "<p>A generic solution like so</p>\n\n<pre><code>public static &lt;X, Y, Z&gt; Map&lt;X, Z&gt; transform(Map&lt;X, Y&gt; input,\n        Function&lt;Y, Z&gt; function) {\n    return input\n            .entrySet()\n            .stream()\n            .collect(\n                    Collectors.toMap((entry) -&gt; entry.getKey(),\n                            (entry) -&gt; function.apply(entry.getValue())));\n}\n</code></pre>\n\n<p>Example</p>\n\n<pre><code>Map&lt;String, String&gt; input = new HashMap&lt;String, String&gt;();\ninput.put(\"string1\", \"42\");\ninput.put(\"string2\", \"41\");\nMap&lt;String, Integer&gt; output = transform(input,\n            (val) -&gt; Integer.parseInt(val));\n</code></pre>\n", "title": "Java8: HashMap&lt;X, Y&gt; to HashMap&lt;X, Z&gt; using Stream / Map-Reduce / Collector", "tags": ["java", "mapreduce", "java-8", "java-stream", "collectors"], "link": "http://stackoverflow.com/questions/25903137/java8-hashmapx-y-to-hashmapx-z-using-stream-map-reduce-collector/25903212#25903212", "question_id": 25903137, "answer_id": 25903212}, {"body": "<p>Here are some variations on <a href=\"http://stackoverflow.com/a/25903212/1441122\">Sotirios Delimanolis' answer</a>, which was pretty good to begin with (+1). Consider the following:</p>\n\n<pre><code>static &lt;X, Y, Z&gt; Map&lt;X, Z&gt; transform(Map&lt;? extends X, ? extends Y&gt; input,\n                                     Function&lt;Y, Z&gt; function) {\n    return input.keySet().stream()\n        .collect(Collectors.toMap(Function.identity(),\n                                  key -&gt; function.apply(input.get(key))));\n}\n</code></pre>\n\n<p>A couple points here. First is the use of wildcards in the generics; this makes the function somewhat more flexible. A wildcard would be necessary if, for example, you wanted the output map to have a key that's a superclass of the input map's key:</p>\n\n<pre><code>Map&lt;String, String&gt; input = new HashMap&lt;String, String&gt;();\ninput.put(\"string1\", \"42\");\ninput.put(\"string2\", \"41\");\nMap&lt;CharSequence, Integer&gt; output = transform(input, Integer::parseInt);\n</code></pre>\n\n<p>(There is also an example for the map's values, but it's really contrived, and I admit that having the bounded wildcard for Y only helps in edge cases.)</p>\n\n<p>A second point is that instead of running the stream over the input map's <code>entrySet</code>, I ran it over the <code>keySet</code>. This makes the code a little cleaner, I think, at the cost of having to fetch values out of the map instead of from the map entry. Incidentally, I initially had <code>key -&gt; key</code> as the first argument to <code>toMap()</code> and this failed with a type inference error for some reason. Changing it to <code>(X key) -&gt; key</code> worked, as did <code>Function.identity()</code>.</p>\n\n<p>Still another variation is as follows:</p>\n\n<pre><code>static &lt;X, Y, Z&gt; Map&lt;X, Z&gt; transform1(Map&lt;? extends X, ? extends Y&gt; input,\n                                      Function&lt;Y, Z&gt; function) {\n    Map&lt;X, Z&gt; result = new HashMap&lt;&gt;();\n    input.forEach((k, v) -&gt; result.put(k, function.apply(v)));\n    return result;\n}\n</code></pre>\n\n<p>This uses <code>Map.forEach()</code> instead of streams. This is even simpler, I think, because it dispenses with the collectors, which are somewhat clumsy to use with maps. The reason is that <code>Map.forEach()</code> gives the key and value as separate parameters, whereas the stream has only one value -- and you have to choose whether to use the key or the map entry as that value. On the minus side, this lacks the rich, streamy goodness of the other approaches. :-)</p>\n", "title": "Java8: HashMap&lt;X, Y&gt; to HashMap&lt;X, Z&gt; using Stream / Map-Reduce / Collector", "tags": ["java", "mapreduce", "java-8", "java-stream", "collectors"], "link": "http://stackoverflow.com/questions/25903137/java8-hashmapx-y-to-hashmapx-z-using-stream-map-reduce-collector/25905196#25905196", "question_id": 25903137, "answer_id": 25905196}, {"body": "<p>Does it absolutely have to be 100% functional and fluent? If not, how about this, which is about as short as it gets:</p>\n\n<pre><code>Map&lt;String, Integer&gt; output = new HashMap&lt;&gt;();\ninput.forEach((k, v) -&gt; output.put(k, Integer.valueOf(v));\n</code></pre>\n\n<p>(<a href=\"https://youtu.be/HVID35J7h_I\" rel=\"nofollow\">if you can live with the shame and guilt of combining streams with side-effects</a>)</p>\n", "title": "Java8: HashMap&lt;X, Y&gt; to HashMap&lt;X, Z&gt; using Stream / Map-Reduce / Collector", "tags": ["java", "mapreduce", "java-8", "java-stream", "collectors"], "link": "http://stackoverflow.com/questions/25903137/java8-hashmapx-y-to-hashmapx-z-using-stream-map-reduce-collector/34643302#34643302", "question_id": 25903137, "answer_id": 34643302}, {"body": "<p>My <a href=\"https://github.com/amaembo/streamex\" rel=\"nofollow\">StreamEx</a> library which enhances standard stream API provides an <a href=\"http://amaembo.github.io/streamex/javadoc/one/util/streamex/EntryStream.html\" rel=\"nofollow\"><code>EntryStream</code></a> class which suits better for transforming maps:</p>\n\n<pre><code>Map&lt;String, Integer&gt; output = EntryStream.of(input).mapValues(Integer::valueOf).toMap();\n</code></pre>\n", "title": "Java8: HashMap&lt;X, Y&gt; to HashMap&lt;X, Z&gt; using Stream / Map-Reduce / Collector", "tags": ["java", "mapreduce", "java-8", "java-stream", "collectors"], "link": "http://stackoverflow.com/questions/25903137/java8-hashmapx-y-to-hashmapx-z-using-stream-map-reduce-collector/35077129#35077129", "question_id": 25903137, "answer_id": 35077129}, {"body": "<p>If you don't mind using 3rd party libraries, my <a href=\"https://github.com/aol/cyclops-react\" rel=\"nofollow\">cyclops-react</a> lib has extensions for all <a href=\"https://medium.com/@johnmcclean/extending-jdk-8-collections-8ae8d43dd75e#.j5lxtrqze\" rel=\"nofollow\">JDK Collection</a> types, including <a href=\"http://static.javadoc.io/com.aol.simplereact/cyclops-react/1.0.0-RC1/com/aol/cyclops/data/collections/extensions/standard/MapX.html\" rel=\"nofollow\">Map</a>. We can just transform the map directly using the 'map' operator (by default map acts on the values in the map).</p>\n\n<pre><code>   MapX&lt;String,Integer&gt; y = MapX.fromMap(HashMaps.of(\"hello\",\"1\"))\n                                .map(Integer::parseInt);\n</code></pre>\n\n<p>bimap can be used to transform the keys and values at the same time</p>\n\n<pre><code>  MapX&lt;String,Integer&gt; y = MapX.fromMap(HashMaps.of(\"hello\",\"1\"))\n                               .bimap(this::newKey,Integer::parseInt);\n</code></pre>\n", "title": "Java8: HashMap&lt;X, Y&gt; to HashMap&lt;X, Z&gt; using Stream / Map-Reduce / Collector", "tags": ["java", "mapreduce", "java-8", "java-stream", "collectors"], "link": "http://stackoverflow.com/questions/25903137/java8-hashmapx-y-to-hashmapx-z-using-stream-map-reduce-collector/35577034#35577034", "question_id": 25903137, "answer_id": 35577034}, {"body": "<p>An alternative that always exists for learning purpose is to build your custom collector through Collector.of() though toMap() JDK collector here is succinct (+1 <a href=\"http://stackoverflow.com/a/25903190/3299647\">here</a>) .</p>\n\n<pre><code>Map&lt;String,Integer&gt; newMap = givenMap.\n                entrySet().\n                stream().collect(Collector.of\n               ( ()-&gt; new HashMap&lt;String,Integer&gt;(),\n                       (mutableMap,entryItem)-&gt; mutableMap.put(entryItem.getKey(),Integer.parseInt(entryItem.getValue())),\n                       (map1,map2)-&gt;{ map1.putAll(map2); return map1;}\n               ));\n</code></pre>\n", "title": "Java8: HashMap&lt;X, Y&gt; to HashMap&lt;X, Z&gt; using Stream / Map-Reduce / Collector", "tags": ["java", "mapreduce", "java-8", "java-stream", "collectors"], "link": "http://stackoverflow.com/questions/25903137/java8-hashmapx-y-to-hashmapx-z-using-stream-map-reduce-collector/38034761#38034761", "question_id": 25903137, "answer_id": 38034761}], "creation_date": 1411006443, "score": 55, "link": "http://stackoverflow.com/questions/25903137/java8-hashmapx-y-to-hashmapx-z-using-stream-map-reduce-collector", "question_id": 25903137}, {"body": "<p>I have looked around quite a bit and haven't found the best solution to convert an existing IntelliJ project to Gradle. I work in a team environment and we currently share the .ipr file as we have a few build configurations that we track. We will be getting rid of those in favor of Gradle eventually but I can't screw things up too much until the Gradle conversion is done.</p>\n\n<p>Also, our Java source files are located in the root of the src directory instead of src/main/java as is standard.</p>\n\n<p>Is there a way I can add Gradle to my project that won't make me delete and recreate my IntelliJ project and won't screw everyone else up when they do a Git pull?</p>\n", "tags": ["java", "git", "intellij-idea", "gradle"], "title": "Best way to add Gradle support to IntelliJ Project", "answers": [{"body": "<p>I'm not able to add a comment due to reputation. I'm using Version 12</p>\n\n<p>I solved a similar problem by creating an entirely new project and \"Checking out from Version Control\"\nMerging the two projects later was fairly easy.</p>\n\n<p>Have you tried something similar ?</p>\n", "title": "Best way to add Gradle support to IntelliJ Project", "tags": ["java", "git", "intellij-idea", "gradle"], "link": "http://stackoverflow.com/questions/26745541/best-way-to-add-gradle-support-to-intellij-project/26790884#26790884", "question_id": 26745541, "answer_id": 26790884}, {"body": "<p>Why don't you just add:</p>\n\n<pre><code>build.gradle \n</code></pre>\n\n<p>in your root project folder, and use plugin for example:</p>\n\n<pre><code>apply plugin: 'idea'\n//and standard one\napply plugin: 'java'\n</code></pre>\n\n<p>and with this fire from command line:</p>\n\n<pre><code>gradle cleanIdea \n</code></pre>\n\n<p>and after that:</p>\n\n<pre><code>gradle idea\n</code></pre>\n\n<p>After that everything should work </p>\n", "title": "Best way to add Gradle support to IntelliJ Project", "tags": ["java", "git", "intellij-idea", "gradle"], "link": "http://stackoverflow.com/questions/26745541/best-way-to-add-gradle-support-to-intellij-project/26797735#26797735", "question_id": 26745541, "answer_id": 26797735}, {"body": "<p>Another way, simpler.</p>\n\n<p>Add your </p>\n\n<pre><code>build.gradle\n</code></pre>\n\n<p>file to the root of your project. Close the project. Manually remove *.iml file. Then choose \"Import Project...\", navigate to your project directory, select the <em>build.gradle</em> file and click OK.</p>\n", "title": "Best way to add Gradle support to IntelliJ Project", "tags": ["java", "git", "intellij-idea", "gradle"], "link": "http://stackoverflow.com/questions/26745541/best-way-to-add-gradle-support-to-intellij-project/36061609#36061609", "question_id": 26745541, "answer_id": 36061609}, {"body": "<p>Just as a future reference, if you already have a <code>Maven</code> project all you need to do is doing a <code>gradle init</code> in your project directory which will generates <code>build.gradle</code> and other dependencies, then do a <code>build gradle</code> in the same directory. </p>\n", "title": "Best way to add Gradle support to IntelliJ Project", "tags": ["java", "git", "intellij-idea", "gradle"], "link": "http://stackoverflow.com/questions/26745541/best-way-to-add-gradle-support-to-intellij-project/37885112#37885112", "question_id": 26745541, "answer_id": 37885112}], "creation_date": 1415137204, "score": 55, "link": "http://stackoverflow.com/questions/26745541/best-way-to-add-gradle-support-to-intellij-project", "question_id": 26745541}, {"body": "<p>I have read that it is possible to implement <code>Singleton</code> in Java using an <code>Enum</code> such as:</p>\n\n<pre><code>public enum MySingleton {\n     INSTANCE;   \n}\n</code></pre>\n\n<p>But, how does the above work? Specifically, an <code>Object</code> has to be instantiated. Here, how is <code>MySingleton</code> being instantiated? Who is doing <code>new MySingleton()</code>?</p>\n", "tags": ["java", "design-patterns", "enums", "singleton"], "title": "Implementing Singleton with an Enum (in Java)", "answers": [{"body": "<p>This,</p>\n\n<pre><code>public enum MySingleton {\n  INSTANCE;   \n}\n</code></pre>\n\n<p>has an implicit empty constructor. Let's be explicit instead,</p>\n\n<pre><code>public enum MySingleton {\n    INSTANCE;\n    private MySingleton() {\n        System.out.println(\"Here\");\n    }\n}\n</code></pre>\n\n<p>If you then added another class with a <code>main()</code> method like</p>\n\n<pre><code>public static void main(String[] args) {\n    System.out.println(MySingleton.INSTANCE);\n}\n</code></pre>\n\n<p>You would see</p>\n\n<pre><code>Here\nINSTANCE\n</code></pre>\n\n<p><code>enum</code> fields are compile time constants, but they are instances of their <code>enum</code> type. And, they're constructed when the enum type is referenced for the first time.</p>\n", "title": "Implementing Singleton with an Enum (in Java)", "tags": ["java", "design-patterns", "enums", "singleton"], "link": "http://stackoverflow.com/questions/26285520/implementing-singleton-with-an-enum-in-java/26285591#26285591", "question_id": 26285520, "answer_id": 26285591}, {"body": "<p>Since <em>Singleton Pattern</em> is about having a private constructor and calling some method to control the instantiations (like some <code>getInstance</code>), in Enums we already have an implicit private constructor.</p>\n\n<p>I don't exactly know how the <em>JVM</em> or some <em>container</em> controls the instances of our <code>Enums</code>, but it seems it already use an implicit <code>Singleton Pattern</code>, the difference is we don't call a <code>getInstance</code>, we just call the Enum.</p>\n", "title": "Implementing Singleton with an Enum (in Java)", "tags": ["java", "design-patterns", "enums", "singleton"], "link": "http://stackoverflow.com/questions/26285520/implementing-singleton-with-an-enum-in-java/26285651#26285651", "question_id": 26285520, "answer_id": 26285651}, {"body": "<p>Like all enum instances, Java instantiates each object when the class is loaded, with some guarantee that it's instantiated exactly once per <a href=\"https://en.wikipedia.org/wiki/Java_virtual_machine\" rel=\"nofollow\">JVM</a>. Think of the <code>INSTANCE</code> declaration as a public static final field: Java will instantiate the object the first time the class is referred to.</p>\n\n<p>The instances are created during static initialization, which is defined in the <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-12.html#jls-12.4\" rel=\"nofollow\">Java Language Specification, section 12.4</a>.</p>\n\n<p>For what it's worth, <a href=\"https://en.wikipedia.org/wiki/Joshua_Bloch\" rel=\"nofollow\">Joshua Bloch</a> describes this pattern in detail as item 3 of <a href=\"http://rads.stackoverflow.com/amzn/click/0321356683\" rel=\"nofollow\">Effective Java Second Edition</a>.</p>\n", "title": "Implementing Singleton with an Enum (in Java)", "tags": ["java", "design-patterns", "enums", "singleton"], "link": "http://stackoverflow.com/questions/26285520/implementing-singleton-with-an-enum-in-java/26285669#26285669", "question_id": 26285520, "answer_id": 26285669}, {"body": "<p>An <code>enum</code> type is a special type of <code>class</code> type.</p>\n\n<p>Your <code>enum</code> declaration actually compiles to something like</p>\n\n<pre><code>public final class MySingleton {\n    public final static MySingleton INSTANCE = new MySingleton(); \n}\n</code></pre>\n\n<p>When your code first accesses <code>INSTANCE</code>, the class <code>MySingleton</code> will be loaded and initialized by the JVM. This process initializes the <code>static</code> field above <strong>once</strong> (lazily).  </p>\n", "title": "Implementing Singleton with an Enum (in Java)", "tags": ["java", "design-patterns", "enums", "singleton"], "link": "http://stackoverflow.com/questions/26285520/implementing-singleton-with-an-enum-in-java/26285731#26285731", "question_id": 26285520, "answer_id": 26285731}, {"body": "<p>In this <a href=\"http://rads.stackoverflow.com/amzn/click/0321356683\">Java best practices book</a> by Joshua Bloch, you can find explained why you should enforce the Singleton property with a private constructor or an Enum type. The chapter is quite long, so keeping it summarized:</p>\n\n<p>Making a class a Singleton can make it difficult to test its clients, as it\u2019s impossible to substitute a mock implementation for a singleton unless it implements an interface that serves as its type.\nRecommended approach is implement Singletons by simply make an enum type with one element:</p>\n\n<pre><code>// Enum singleton - the preferred approach\npublic enum Elvis {\nINSTANCE;\npublic void leaveTheBuilding() { ... }\n}\n</code></pre>\n\n<p>This approach is functionally equivalent to the public field approach, except that it\nis more concise, provides the serialization machinery for free, and provides an\nironclad guarantee against multiple instantiation, even in the face of sophisticated\nserialization or reflection attacks. </p>\n\n<blockquote>\n  <p>While this approach has yet to be widely\n  adopted, a single-element enum type is the best way to implement a singleton.</p>\n</blockquote>\n", "title": "Implementing Singleton with an Enum (in Java)", "tags": ["java", "design-patterns", "enums", "singleton"], "link": "http://stackoverflow.com/questions/26285520/implementing-singleton-with-an-enum-in-java/26292956#26292956", "question_id": 26285520, "answer_id": 26292956}], "creation_date": 1412879239, "score": 53, "link": "http://stackoverflow.com/questions/26285520/implementing-singleton-with-an-enum-in-java", "question_id": 26285520}, {"body": "<p>I am trying to calculate the difference between two <code>LocalDateTime</code>. </p>\n\n<p>The output needs to be of the format <code>y years m months d days h hours m minutes s seconds</code>. Here is what I have written:</p>\n\n<pre><code>import java.time.Duration;\nimport java.time.Instant;\nimport java.time.LocalDateTime;\nimport java.time.Period;\nimport java.time.ZoneId;\n\npublic class Main {\n\n    static final int MINUTES_PER_HOUR = 60;\n    static final int SECONDS_PER_MINUTE = 60;\n    static final int SECONDS_PER_HOUR = SECONDS_PER_MINUTE * MINUTES_PER_HOUR;\n\n    public static void main(String[] args) {\n        LocalDateTime toDateTime = LocalDateTime.of(2014, 9, 9, 19, 46, 45);\n        LocalDateTime fromDateTime = LocalDateTime.of(1984, 12, 16, 7, 45, 55);\n\n        Period period = getPeriod(fromDateTime, toDateTime);\n        long time[] = getTime(fromDateTime, toDateTime);\n\n        System.out.println(period.getYears() + \" years \" + \n                period.getMonths() + \" months \" + \n                period.getDays() + \" days \" +\n                time[0] + \" hours \" +\n                time[1] + \" minutes \" +\n                time[2] + \" seconds.\");\n\n\n    }\n\n    private static Period getPeriod(LocalDateTime dob, LocalDateTime now) {\n        return Period.between(dob.toLocalDate(), now.toLocalDate());\n    }\n\n    private static long[] getTime(LocalDateTime dob, LocalDateTime now) {\n        LocalDateTime today = LocalDateTime.of(now.getYear(),\n                now.getMonthValue(), now.getDayOfMonth(), dob.getHour(), dob.getMinute(), dob.getSecond());\n        Duration duration = Duration.between(today, now);\n\n        long seconds = duration.getSeconds();\n\n        long hours = seconds / SECONDS_PER_HOUR;\n        long minutes = ((seconds % SECONDS_PER_HOUR) / SECONDS_PER_MINUTE);\n        long secs = (seconds % SECONDS_PER_MINUTE);\n\n        return new long[]{hours, minutes, secs};\n    }\n}\n</code></pre>\n\n<p>The output that I am getting is <code>29 years 8 months 24 days 12 hours 0 minutes 50 seconds</code>. I have checked my result from this <a href=\"http://www.epochconverter.com/epoch/date-difference.php\">website</a> (with values <code>12/16/1984 07:45:55</code> and <code>09/09/2014 19:46:45</code>). The following screenshot shows the output:</p>\n\n<p><img src=\"http://i.stack.imgur.com/SAJE4.png\" alt=\"Epoch Converter\"></p>\n\n<p>I am pretty sure that the fields after the month value is coming wrong from my code. Any suggestion would be very helpful.</p>\n\n<h2>Update</h2>\n\n<p>I have tested my result from another website and the result I got is different. Here it is: <a href=\"http://www.timeanddate.com/date/durationresult.html?d1=16&amp;m1=12&amp;y1=1984&amp;d2=9&amp;m2=9&amp;y2=2014&amp;h1=7&amp;i1=45&amp;s1=55&amp;h2=19&amp;i2=46&amp;s2=45\">Calculate duration between two dates</a> (result: 29 years, 8 months, 24 days, 12 hours, 0 minutes and 50 seconds).</p>\n\n<h2>Update</h2>\n\n<p>Since I got two different results from two different sites, I am wondering if the algorithm of my calculation is legitimate or not. If I use following two <code>LocalDateTime</code> objects:</p>\n\n<pre><code>LocalDateTime toDateTime = LocalDateTime.of(2014, 9, 10, 6, 40, 45);\nLocalDateTime fromDateTime = LocalDateTime.of(1984, 12, 16, 7, 45, 55);\n</code></pre>\n\n<p>Then the output is coming: <code>29 years 8 months 25 days -1 hours -5 minutes -10 seconds.</code></p>\n\n<p>From this <a href=\"http://www.timeanddate.com/date/durationresult.html?d1=16&amp;m1=12&amp;y1=1984&amp;d2=10&amp;m2=9&amp;y2=2014&amp;h1=7&amp;i1=45&amp;s1=55&amp;h2=6&amp;i2=40&amp;s2=45\">link</a> it should be <code>29 years 8 months 24 days 22 hours, 54 minutes and 50 seconds</code>. So the algorithm needs to handle the negative numbers too.</p>\n\n<p><strong>Note the question is not about which site gave me what result, I need to know the right algorithm and need to have right results.</strong></p>\n", "tags": ["java", "date", "datetime", "java-8", "difference"], "title": "Java 8: Calculate difference between two LocalDateTime", "answers": [{"body": "<p>Unfortunately there doesn't seem to be a period class that spans time as well, so you might have to do the calculations on your own.</p>\n\n<p>Forunately the date and time classes have a lot of utility methods that simplify that to some degree. Here's a way to calculate the difference although not necessarily the fastest:</p>\n\n<pre><code>LocalDateTime fromDateTime = LocalDateTime.of(1984, 12, 16, 7, 45, 55);\nLocalDateTime toDateTime = LocalDateTime.of(2014, 9, 10, 6, 40, 45);\n\nLocalDateTime tempDateTime = LocalDateTime.from( fromDateTime );\n\nlong years = tempDateTime.until( toDateTime, ChronoUnit.YEARS);\ntempDateTime = tempDateTime.plusYears( years );\n\nlong months = tempDateTime.until( toDateTime, ChronoUnit.MONTHS);\ntempDateTime = tempDateTime.plusMonths( months );\n\nlong days = tempDateTime.until( toDateTime, ChronoUnit.DAYS);\ntempDateTime = tempDateTime.plusDays( days );\n\n\nlong hours = tempDateTime.until( toDateTime, ChronoUnit.HOURS);\ntempDateTime = tempDateTime.plusHours( hours );\n\nlong minutes = tempDateTime.until( toDateTime, ChronoUnit.MINUTES);\ntempDateTime = tempDateTime.plusMinutes( minutes );\n\nlong seconds = tempDateTime.until( toDateTime, ChronoUnit.SECONDS);\n\nSystem.out.println( years + \" years \" + \n        months + \" months \" + \n        days + \" days \" +\n        hours + \" hours \" +\n        minutes + \" minutes \" +\n        seconds + \" seconds.\");\n\n//prints: 29 years 8 months 24 days 22 hours 54 minutes 50 seconds.\n</code></pre>\n\n<p>The basic idea is this: create a temporary start date and get the full years to the end. Then adjust that date by the number of years so that the start date is less then a year from the end. Repeat that for each time unit in descending order.</p>\n\n<p>Finally a disclaimer: I didn't take different timezones into account (both dates should be in the same timezone) and I also didn't test/check how daylight saving time or other changes in a calendar (like the timezone changes in Samoa) affect this calculation. So use with care.</p>\n", "title": "Java 8: Calculate difference between two LocalDateTime", "tags": ["java", "date", "datetime", "java-8", "difference"], "link": "http://stackoverflow.com/questions/25747499/java-8-calculate-difference-between-two-localdatetime/25760725#25760725", "question_id": 25747499, "answer_id": 25760725}, {"body": "<p>I have checked your calculation with my library Time4J (which makes this task much simpler compared with Java-8 - by the way) and get:</p>\n\n<pre><code>PlainTimestamp t1 = PlainTimestamp.of(1984, 12, 16, 7, 45, 55);\nPlainTimestamp t2 = PlainTimestamp.of(2014, 9, 9, 19, 46, 45);\nIsoUnit[] units =\n    {\n        CalendarUnit.YEARS, CalendarUnit.MONTHS, CalendarUnit.DAYS, ClockUnit.HOURS,\n        ClockUnit.MINUTES, ClockUnit.SECONDS\n    };\n// attention: in-method can also take a Timezone-arg\nDuration&lt;?&gt; duration = Duration.in(units).between(t1, t2); \nSystem.out.println(duration); // output: P29Y8M24DT12H50S\n\nString english = PrettyTime.of(Locale.ENGLISH).print(duration, TextWidth.WIDE);\nSystem.out.println(english); \n// output: 29 years, 8 months, 24 days, 12 hours, 50 seconds\n</code></pre>\n\n<p><strong>Explanation of the result:</strong></p>\n\n<p>STEP-1: 2014 - 1984 = 30 years, but the lower unit comparison reduces it to <strong>29 years</strong> because month(t1) > month(t2), after adding 29 years to t1 you get the intermediate result: <strong>2013-12-16T07:45:55</strong></p>\n\n<p>STEP-2: months.between(2013-12, 2014-09) = 9 months, but because of day(t1) > day(t2) it reduces to <strong>8 months</strong>, so you get the new intermediate result <strong>2014-08-16T07:45:55</strong></p>\n\n<p>STEP-3: days.between(2014-08-16, 2014-09-09) = 24 days, because of hours(t1) &lt; hours(t2) it remains <strong>24 days</strong>, and the adding of 24 hours yield the new intermediate result: <strong>2014-09-09T07:45:55</strong></p>\n\n<p>STEP-4: hours.between(07:45:55, 19:46:45) = <strong>12 hours</strong> (note here minute(t1) &lt; minute(t2)), so after adding 12 hours you get the new intermediate result <strong>2014-09-09T19:45:55</strong></p>\n\n<p>STEP-5: minutes.between(45, 46) = 1 minute, but it reduces to <strong>zero minutes</strong> because secs(t1) > secs(t2). The intermediate result remains unchanged here.</p>\n\n<p>STEP-6: seconds.between(45:55, 46:45) = <strong>50 seconds</strong>.</p>\n\n<p><strong>So the result must be as calculated by Time4J and your JSR-310-workaround.</strong></p>\n\n<p>The website \"epochconverter.com\" you used is wrong. And note that in my explanation of the algorithm there is not even any day-of-month-at-end-anomaly involved, just sane standard arithmetic. Also to note: The website \"timeanddate.com\" yields the same right result.</p>\n\n<p>About negative signs in calculating the difference, I urgently advise you to avoid such algorithms because near the end of a given month such calculations become unpredictable. If you follow the proposed algorithm then you will never get any minus sign in intermediate results.</p>\n\n<hr>\n\n<h2>UPDATE using version v4.x (compatible with java.time):</h2>\n\n<p>After having released my library I would even say, you should use Time4J if you can. If not due to licence issues or because you just want to avoid external dependencies then at least for quality assurements. Why?</p>\n\n<p>There are several aspects about your problem to consider.</p>\n\n<p>a) JSR-310 (alias java-time-package in Java 8) does not offer a complete solution, in best case to say only some few elements of a solution so you are forced to write a work-around.</p>\n\n<p>b) You were quite unsure about the quality and correctness of your work-around, so you asked this question. With a good external library you implicitly deploy the knowledge of people who have invested huge efforts to implement the right solution as ready-to-use. This is also a general advise of experts: Don't reinvent the wheel.</p>\n\n<p>c) The work-around as well as Thomas' answer yield the correct result as you wished, but for other people it might not be right - see the comment of Stuart Marks. There is no timezone correction of the result. With Time4J you can take into account this aspect, see <a href=\"http://time4j.net/javadoc-en/net/time4j/Duration.html#in(net.time4j.tz.Timezone,%20net.time4j.IsoUnit...)\" rel=\"nofollow\">this example code</a>. It is just a one-liner!</p>\n\n<p>d) The printing result is also not so nice. Imagine if you have one day or one hour difference then the singular form would be better. Or you might wish abbreviations? Time4J automatically cares about this.</p>\n\n<p>e) Maybe you even want to print the result in other languages like Arabic or Russian. The plural rules are considerably more complex, but Time4J manages this problem, too. Latest at this point any work-around is sure to become a short-coming.</p>\n\n<p><strong>So here another version INCLUSIVE zone correction (and in another language):</strong></p>\n\n<pre><code>public static void main(String[] args) {\n    print(EUROPE.BERLIN); // output: 29 Jahre, 8 Monate, 24 Tage, 11 Stunden und 50 Sekunden\n    print(ZonalOffset.UTC); // output: 29 Jahre, 8 Monate, 24 Tage, 12 Stunden und 50 Sekunden\n}\n\nprivate static void print(TZID tzid) {\n    Timezone tz = Timezone.of(tzid);\n    LocalDateTime ldt1 = LocalDateTime.of(1984, 12, 16, 7, 45, 55);\n    LocalDateTime ldt2 = LocalDateTime.of(2014, 9, 9, 19, 46, 45);\n\n    PlainTimestamp t1 = PlainTimestamp.from(ldt1);\n    PlainTimestamp t2 = PlainTimestamp.from(ldt2);\n    IsoUnit[] units = {\n        CalendarUnit.YEARS, CalendarUnit.MONTHS, CalendarUnit.DAYS, ClockUnit.HOURS,\n        ClockUnit.MINUTES, ClockUnit.SECONDS\n    };\n\n    Duration&lt;?&gt; duration = Duration.in(tz, units).between(t1, t2);\n    System.out.println(duration);\n\n    String s = PrettyTime.of(Locale.GERMANY).print(duration, TextWidth.WIDE);\n    System.out.println(s);\n}\n</code></pre>\n", "title": "Java 8: Calculate difference between two LocalDateTime", "tags": ["java", "date", "datetime", "java-8", "difference"], "link": "http://stackoverflow.com/questions/25747499/java-8-calculate-difference-between-two-localdatetime/25764518#25764518", "question_id": 25747499, "answer_id": 25764518}, {"body": "<p>I found the best way to do this is with <strong>ChronoUnit.</strong></p>\n\n<pre><code>long minutes = ChronoUnit.MINUTES.between(fromDate, toDate);\nlong hours = ChronoUnit.HOURS.between(fromDate, toDate);\n</code></pre>\n\n<p>Additional documentation is here: <a href=\"https://docs.oracle.com/javase/tutorial/datetime/iso/period.html\">https://docs.oracle.com/javase/tutorial/datetime/iso/period.html</a></p>\n", "title": "Java 8: Calculate difference between two LocalDateTime", "tags": ["java", "date", "datetime", "java-8", "difference"], "link": "http://stackoverflow.com/questions/25747499/java-8-calculate-difference-between-two-localdatetime/26954864#26954864", "question_id": 25747499, "answer_id": 26954864}, {"body": "<p>There is some problem for Tapas Bose code and Thomas code. If time differen\u0441e is negative, array gets the negative values. For example if </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>LocalDateTime toDateTime = LocalDateTime.of(2014, 9, 10, 6, 46, 45);\nLocalDateTime fromDateTime = LocalDateTime.of(2014, 9, 9, 7, 46, 45);\n</code></pre>\n\n<p>it returns 0 years 0 months 1 days -1 hours 0 minutes 0 seconds.</p>\n\n<p>I think the right output is: 0 years 0 months 0 days 23 hours 0 minutes 0 seconds.</p>\n\n<p>I propose to separate the LocalDateTime instances on LocalDate and LocalTime instances. After that we can obtain the Java 8 Period and Duration instances. The Duration instance is separated on the number of days and throughout-the-day time value (&lt; 24h) with subsequent correction of the period value. When the second LocalTime value is before the firstLocalTime value, it is necessary to reduce the period for one day.</p>\n\n<p>Here's my way to calculate the LocalDateTime difference:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>private void getChronoUnitForSecondAfterFirst(LocalDateTime firstLocalDateTime, LocalDateTime secondLocalDateTime, long[] chronoUnits) {\n    /*Separate LocaldateTime on LocalDate and LocalTime*/\n    LocalDate firstLocalDate = firstLocalDateTime.toLocalDate();\n    LocalTime firstLocalTime = firstLocalDateTime.toLocalTime();\n\n    LocalDate secondLocalDate = secondLocalDateTime.toLocalDate();\n    LocalTime secondLocalTime = secondLocalDateTime.toLocalTime();\n\n    /*Calculate the time difference*/\n    Duration duration = Duration.between(firstLocalDateTime, secondLocalDateTime);\n    long durationDays = duration.toDays();\n    Duration throughoutTheDayDuration = duration.minusDays(durationDays);\n    Logger.getLogger(PeriodDuration.class.getName()).log(Level.INFO,\n            \"Duration is: \" + duration + \" this is \" + durationDays\n            + \" days and \" + throughoutTheDayDuration + \" time.\");\n\n    Period period = Period.between(firstLocalDate, secondLocalDate);\n\n    /*Correct the date difference*/\n    if (secondLocalTime.isBefore(firstLocalTime)) {\n        period = period.minusDays(1);\n        Logger.getLogger(PeriodDuration.class.getName()).log(Level.INFO,\n                \"minus 1 day\");\n    }\n\n    Logger.getLogger(PeriodDuration.class.getName()).log(Level.INFO,\n            \"Period between \" + firstLocalDateTime + \" and \"\n            + secondLocalDateTime + \" is: \" + period + \" and duration is: \"\n            + throughoutTheDayDuration\n            + \"\\n-----------------------------------------------------------------\");\n\n    /*Calculate chrono unit values and  write it in array*/\n    chronoUnits[0] = period.getYears();\n    chronoUnits[1] = period.getMonths();\n    chronoUnits[2] = period.getDays();\n    chronoUnits[3] = throughoutTheDayDuration.toHours();\n    chronoUnits[4] = throughoutTheDayDuration.toMinutes() % 60;\n    chronoUnits[5] = throughoutTheDayDuration.getSeconds() % 60;\n}\n</code></pre>\n\n<p>The above method can be used to calculate the difference of any local date and time values, for example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public long[] getChronoUnits(String firstLocalDateTimeString, String secondLocalDateTimeString) {\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm:ss\");\n\n    LocalDateTime firstLocalDateTime = LocalDateTime.parse(firstLocalDateTimeString, formatter);\n    LocalDateTime secondLocalDateTime = LocalDateTime.parse(secondLocalDateTimeString, formatter);\n\n    long[] chronoUnits = new long[6];\n    if (secondLocalDateTime.isAfter(firstLocalDateTime)) {\n        getChronoUnitForSecondAfterFirst(firstLocalDateTime, secondLocalDateTime, chronoUnits);\n    } else {\n        getChronoUnitForSecondAfterFirst(secondLocalDateTime, firstLocalDateTime, chronoUnits);\n    }\n    return chronoUnits;\n}\n</code></pre>\n\n<p>It is convenient to write a unit test for the above method (both of them are PeriodDuration class members). Here's the code:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@RunWith(Parameterized.class)\npublic class PeriodDurationTest {\n\nprivate final String firstLocalDateTimeString;\nprivate final String secondLocalDateTimeString;\nprivate final long[] chronoUnits;\n\npublic PeriodDurationTest(String firstLocalDateTimeString, String secondLocalDateTimeString, long[] chronoUnits) {\n    this.firstLocalDateTimeString = firstLocalDateTimeString;\n    this.secondLocalDateTimeString = secondLocalDateTimeString;\n    this.chronoUnits = chronoUnits;\n}\n\n@Parameters\npublic static Collection&lt;Object[]&gt; periodValues() {\n    long[] chronoUnits0 = {0, 0, 0, 0, 0, 0};\n    long[] chronoUnits1 = {0, 0, 0, 1, 0, 0};\n    long[] chronoUnits2 = {0, 0, 0, 23, 0, 0};\n    long[] chronoUnits3 = {0, 0, 0, 1, 0, 0};\n    long[] chronoUnits4 = {0, 0, 0, 23, 0, 0};\n    long[] chronoUnits5 = {0, 0, 1, 23, 0, 0};\n    long[] chronoUnits6 = {29, 8, 24, 12, 0, 50};\n    long[] chronoUnits7 = {29, 8, 24, 12, 0, 50};\n    return Arrays.asList(new Object[][]{\n        {\"2015-09-09 21:46:44\", \"2015-09-09 21:46:44\", chronoUnits0},\n        {\"2015-09-09 21:46:44\", \"2015-09-09 22:46:44\", chronoUnits1},\n        {\"2015-09-09 21:46:44\", \"2015-09-10 20:46:44\", chronoUnits2},\n        {\"2015-09-09 21:46:44\", \"2015-09-09 20:46:44\", chronoUnits3},\n        {\"2015-09-10 20:46:44\", \"2015-09-09 21:46:44\", chronoUnits4},\n        {\"2015-09-11 20:46:44\", \"2015-09-09 21:46:44\", chronoUnits5},\n        {\"1984-12-16 07:45:55\", \"2014-09-09 19:46:45\", chronoUnits6},\n        {\"2014-09-09 19:46:45\", \"1984-12-16 07:45:55\", chronoUnits6}\n    });\n}\n\n@Test\npublic void testGetChronoUnits() {\n    PeriodDuration instance = new PeriodDuration();\n    long[] expResult = this.chronoUnits;\n    long[] result = instance.getChronoUnits(this.firstLocalDateTimeString, this.secondLocalDateTimeString);\n    assertArrayEquals(expResult, result);\n}\n</code></pre>\n\n<p>}</p>\n\n<p>All tests are successful whether or not the value of the first LocalDateTime is before and for any LocalTime values.</p>\n", "title": "Java 8: Calculate difference between two LocalDateTime", "tags": ["java", "date", "datetime", "java-8", "difference"], "link": "http://stackoverflow.com/questions/25747499/java-8-calculate-difference-between-two-localdatetime/30800672#30800672", "question_id": 25747499, "answer_id": 30800672}, {"body": "<p>And the version of @Thomas in <a href=\"http://www.groovy-lang.org/\" rel=\"nofollow\">Groovy</a> with takes the desired units in a list instead of hardcoding the values. This implementation (which can easily ported to Java - I made the function declaration explicit) makes Thomas approach more reuseable.</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>def fromDateTime = LocalDateTime.of(1968, 6, 14, 0, 13, 0)\ndef toDateTime = LocalDateTime.now()\ndef listOfUnits = [\n    ChronoUnit.YEARS, ChronoUnit.MONTHS, ChronoUnit.DAYS,\n    ChronoUnit.HOURS, ChronoUnit.MINUTES, ChronoUnit.SECONDS,\n    ChronoUnit.MILLIS]\n\nprintln calcDurationInTextualForm(listOfUnits, fromDateTime, toDateTime)    \n\nString calcDurationInTextualForm(List&lt;ChronoUnit&gt; listOfUnits, LocalDateTime ts, LocalDateTime to)\n{\n    def result = []\n\n    listOfUnits.each { chronoUnit -&gt;\n        long amount = ts.until(to, chronoUnit)\n        ts = ts.plus(amount, chronoUnit)\n\n        if (amount) {\n            result &lt;&lt; \"$amount ${chronoUnit.toString()}\"\n        }\n    }\n\n    result.join(', ')\n}\n</code></pre>\n\n<p>At the time of this writing,the code above returns <code>47 Years, 8 Months, 9 Days, 22 Hours, 52 Minutes, 7 Seconds, 140 Millis</code>. And, for @Gennady Kolomoets input, the code returns <code>23 Hours</code>.</p>\n\n<p>When you provide a list of units it must be sorted by size of the units (biggest first):</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>def listOfUnits = [ChronoUnit.WEEKS, ChronoUnit.DAYS, ChronoUnit.HOURS]\n// returns 2495 Weeks, 3 Days, 8 Hours\n</code></pre>\n", "title": "Java 8: Calculate difference between two LocalDateTime", "tags": ["java", "date", "datetime", "java-8", "difference"], "link": "http://stackoverflow.com/questions/25747499/java-8-calculate-difference-between-two-localdatetime/35588906#35588906", "question_id": 25747499, "answer_id": 35588906}], "creation_date": 1410273686, "score": 53, "link": "http://stackoverflow.com/questions/25747499/java-8-calculate-difference-between-two-localdatetime", "question_id": 25747499}, {"body": "<p>I just installed the latest Java SDK 7-67 from Oracle on the Mac 10.9.4. I then ran the command <code>java -v</code> in Terminal and I get this message:</p>\n\n<blockquote>\n  <p>Error: Could not create the Java Virtual Machine.<br>\n  Error: A fatal exception has occurred. Program will exit.</p>\n</blockquote>\n", "tags": ["java", "terminal"], "title": "Error: Could not create the Java Virtual Machine Mac OSX Mavericks", "answers": [{"body": "<p>Normally this error occurs when you invoke java by supplying the wrong arguments/options. In this case it should be the <code>version</code> option. </p>\n\n<pre><code>java -version\n</code></pre>\n\n<p>So to double check you can always do <code>java -help</code>, and see if the option exists. In this case, there is no option such as <code>v</code>.</p>\n", "title": "Error: Could not create the Java Virtual Machine Mac OSX Mavericks", "tags": ["java", "terminal"], "link": "http://stackoverflow.com/questions/25609405/error-could-not-create-the-java-virtual-machine-mac-osx-mavericks/25609477#25609477", "question_id": 25609405, "answer_id": 25609477}, {"body": "<p>There can be one more reason for such behavior - you delete current working directory. </p>\n\n<p>For example: </p>\n\n<pre><code># in terminal #1\ncd /home/user/myJavaApp\n\n# in terminal #2\nrm -rf /home/user/myJavaApp\n\n# in terminal #1\njava -jar myJar.jar\n\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\n</code></pre>\n", "title": "Error: Could not create the Java Virtual Machine Mac OSX Mavericks", "tags": ["java", "terminal"], "link": "http://stackoverflow.com/questions/25609405/error-could-not-create-the-java-virtual-machine-mac-osx-mavericks/28085757#28085757", "question_id": 25609405, "answer_id": 28085757}, {"body": "<p>if you done with <strong>java -version</strong> command,even though problem can not solved means ,u might installed many java versions like JDK 1.8 or Jdk 1.7. <strong>so uninstall all other versions other than u need.</strong>  and set path variable for that means ur done.</p>\n", "title": "Error: Could not create the Java Virtual Machine Mac OSX Mavericks", "tags": ["java", "terminal"], "link": "http://stackoverflow.com/questions/25609405/error-could-not-create-the-java-virtual-machine-mac-osx-mavericks/35287299#35287299", "question_id": 25609405, "answer_id": 35287299}], "creation_date": 1409586838, "score": 53, "link": "http://stackoverflow.com/questions/25609405/error-could-not-create-the-java-virtual-machine-mac-osx-mavericks", "question_id": 25609405}, {"body": "<p>I tried the following code in Java</p>\n\n<pre><code>t1 = 5;\nt2 = t1 + (++t1);\nSystem.out.println (t2);\n</code></pre>\n\n<p>My view is since ++ has a higher precedence than +, the above becomes</p>\n\n<pre><code>t2 = t1 + (++t1);\nt2 = t1 + 6;      // t1 becomes 6 here\nt2 = 6 + 6;\nt2 = 12;\n</code></pre>\n\n<p>However, I get the answer 11 for t2. Can someone explain?</p>\n", "tags": ["java", "operator-precedence"], "title": "In Java, which gets executed first, &quot;+&quot; or &quot;++&quot;?", "answers": [{"body": "<p>Your logic is close, but not quite right.  The order of evaluation is Left to Right for the + operator.  t1 comes before the binary op, LHS and then the increment is on the RHS of that binary op.  The LHS is executed first.</p>\n\n<pre><code>t2 = t1 + (++t1);\nt2 = 5 + 6;      // t1 becomes 6 here as a side effect before being read on the RHS\nt2 = 11;\n</code></pre>\n\n<p>Visualised as a tree you have,</p>\n\n<pre><code>    +\n  /   \\\n t1   ++t1\n</code></pre>\n\n<p><em>Precedence Order</em></p>\n\n<p>When two operators share an operand the operator with the higher precedence goes first. For example, 1 + 2 * 3 is treated as 1 + (2 * 3), whereas 1 * 2 + 3 is treated as (1 * 2) + 3 since multiplication has a higher precedence than addition.</p>\n\n<p><em>Associativity</em></p>\n\n<p>When two operators with the same precedence the expression is evaluated according to its associativity. For example x = y = z = 17 is treated as x = (y = (z = 17)), leaving all three variables with the value 17, since the = operator has right-to-left associativity (and an assignment statement evaluates to the value on the right hand side). On the other hand, 72 / 2 / 3 is treated as (72 / 2) / 3 since the / operator has left-to-right associativity. </p>\n", "title": "In Java, which gets executed first, &quot;+&quot; or &quot;++&quot;?", "tags": ["java", "operator-precedence"], "link": "http://stackoverflow.com/questions/25761337/in-java-which-gets-executed-first-or/25761401#25761401", "question_id": 25761337, "answer_id": 25761401}, {"body": "<p>The value of t1 in the second line is 5</p>\n\n<pre><code>t2 = t1 + (++t1)\nt2 = 5 + 6;      // t1 becomes 6 here\n</code></pre>\n\n<p>The <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.7\" rel=\"nofollow\">evaluation order is from left to right.</a></p>\n\n<p>So first t1 is evaluated to <code>5</code> then <code>++t1</code> to <code>6</code> and hence the result as <code>11</code></p>\n", "title": "In Java, which gets executed first, &quot;+&quot; or &quot;++&quot;?", "tags": ["java", "operator-precedence"], "link": "http://stackoverflow.com/questions/25761337/in-java-which-gets-executed-first-or/25761415#25761415", "question_id": 25761337, "answer_id": 25761415}, {"body": "<p>The <code>+</code> is evaluated from left to right, so</p>\n\n<pre><code>t1 + (++t1)     // Left side is evaluated to 5, right side evaluated to 6...\n5  + (6)        // ...and as a side effect t1 becomes 6\n</code></pre>\n\n<p>Results in <code>11</code>.</p>\n", "title": "In Java, which gets executed first, &quot;+&quot; or &quot;++&quot;?", "tags": ["java", "operator-precedence"], "link": "http://stackoverflow.com/questions/25761337/in-java-which-gets-executed-first-or/25761428#25761428", "question_id": 25761337, "answer_id": 25761428}, {"body": "<p>evaluation happen from left to right. So actually what happen is following</p>\n\n<pre><code>t2 = t1 + (++t1);\nt2 = 5 + 6;      \nt2 = 11;\n</code></pre>\n", "title": "In Java, which gets executed first, &quot;+&quot; or &quot;++&quot;?", "tags": ["java", "operator-precedence"], "link": "http://stackoverflow.com/questions/25761337/in-java-which-gets-executed-first-or/25761432#25761432", "question_id": 25761337, "answer_id": 25761432}, {"body": "<p>++x is executed before you use the variable x, and x++ increase x after you used it:</p>\n\n<pre><code>x=5;\ny=x++;\ny is 5;\nand x is 6\n\nx=5;\ny=++x;\ny is 6;\nand x is 6\n</code></pre>\n", "title": "In Java, which gets executed first, &quot;+&quot; or &quot;++&quot;?", "tags": ["java", "operator-precedence"], "link": "http://stackoverflow.com/questions/25761337/in-java-which-gets-executed-first-or/25761468#25761468", "question_id": 25761337, "answer_id": 25761468}, {"body": "<p>To add a point to Chris K, </p>\n\n<p><b> The associativity is from left to right</b></p>\n\n<p>So,</p>\n\n<pre><code>t2 = t1 + (++t1);\nt2 = 5 + 6;      // first t1 is replaced with 5 and then the next 6 \nt2 = 11;\n</code></pre>\n", "title": "In Java, which gets executed first, &quot;+&quot; or &quot;++&quot;?", "tags": ["java", "operator-precedence"], "link": "http://stackoverflow.com/questions/25761337/in-java-which-gets-executed-first-or/25761472#25761472", "question_id": 25761337, "answer_id": 25761472}, {"body": "<pre><code>t2 = t1 + (++t1);\n</code></pre>\n\n<p>This is equivalent to </p>\n\n<pre><code>temp = t1 + 1\nt2 =  t1 + temp;\nt1= temp;\n</code></pre>\n", "title": "In Java, which gets executed first, &quot;+&quot; or &quot;++&quot;?", "tags": ["java", "operator-precedence"], "link": "http://stackoverflow.com/questions/25761337/in-java-which-gets-executed-first-or/25761523#25761523", "question_id": 25761337, "answer_id": 25761523}, {"body": "<p>You are nearly correct but you are subtly misunderstanding how the precedence rules work.</p>\n\n<p>Compare these two cases:</p>\n\n<pre><code>int t1 = 5;\nint t2 = t1 + (++t1);\nSystem.out.println (t2);\n\nt1 = 5;\nt2 = (++t1) + t1;\nSystem.out.println (t2);\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>11\n12\n</code></pre>\n\n<p>The precedence does indeed say to evaluate the <code>++</code> before the <code>+</code>, but that doesn't apply until it reaches that part of the expression.</p>\n\n<p>Your expression is of the form <code>X + Y</code>\nWhere <code>X</code> is <code>t1</code> and <code>Y</code> is <code>(++t1)</code></p>\n\n<p>The left branch, i.e. <code>X</code>, is evaluated first.\nAfterwards the right branch, i.e. <code>Y</code>, is evaluated.\nOnly when it comes to evaluate <code>Y</code> the <code>++</code> operation is performed.</p>\n\n<p>The precedence rules only say that the <code>++</code> is \"inside\" the <code>Y</code> expression, they don't say anything about the order of operations.</p>\n", "title": "In Java, which gets executed first, &quot;+&quot; or &quot;++&quot;?", "tags": ["java", "operator-precedence"], "link": "http://stackoverflow.com/questions/25761337/in-java-which-gets-executed-first-or/25761568#25761568", "question_id": 25761337, "answer_id": 25761568}, {"body": "<p>Another way of thinking of it is to expand the ++ expression:</p>\n\n<p><code>++t1</code> is the same as putting <code>t1 = t1 + 1</code>.</p>\n\n<pre><code>1) t1 = 5;\n2) t2 = t1 + (++t1); \n3) t2 = t1 + (t1 = t1 + 1), \n4) t2 = 5 + (t1 = t1 + 1)\n5) t2 = 5 + (t1 = 6)\n6) t2 = 5 + 6 = 11\n</code></pre>\n\n<p>If you were to reverse the order to <code>t2 = (++t1) + t1;</code> Then the expression would expand to:</p>\n\n<pre><code>1) t2 = (t1 = t1 + 1) + t1     \n2) t2 = (t1 = 5 + 1) + t1\n3) t2 = (t1 = 6) + t1\n4) t2 = 6 + 6 = 12\n</code></pre>\n", "title": "In Java, which gets executed first, &quot;+&quot; or &quot;++&quot;?", "tags": ["java", "operator-precedence"], "link": "http://stackoverflow.com/questions/25761337/in-java-which-gets-executed-first-or/25772571#25772571", "question_id": 25761337, "answer_id": 25772571}, {"body": "<pre><code>enter code here\nt1 = 5;\nt2 = t1 + (++t1);\n// it takes 5 for t1 and as it moves further to (++t1), it increments t1 to 6, so it takes 6 for  (++t1)\nt2 = 5 + 6;\n// (++t1) this increments t1 by 1 then return new value. So (++t1)=6\n// (t1++) this returns old value n then increments t1 by 1. So (t1++)=5\n</code></pre>\n", "title": "In Java, which gets executed first, &quot;+&quot; or &quot;++&quot;?", "tags": ["java", "operator-precedence"], "link": "http://stackoverflow.com/questions/25761337/in-java-which-gets-executed-first-or/25909832#25909832", "question_id": 25761337, "answer_id": 25909832}], "creation_date": 1410339720, "score": 52, "link": "http://stackoverflow.com/questions/25761337/in-java-which-gets-executed-first-or", "question_id": 25761337}, {"body": "<p>How can I install an additional java on MacOS?  I installed jdk8 and that works fine. but now I need a jdk7 installation for development purposes. When trying to install the old version via DMG file, i get a warning, that there is already a newer version of java installed and the installer quits.  </p>\n\n<pre><code>/usr/libexec/java_home -verbose\nMatching Java Virtual Machines (1):\n    1.8.0_20, x86_64:   \"Java SE 8\" /Library/Java/JavaVirtualMachines/jdk1.8.0_20.jdk/Contents/Home\n\n   /Library/Java/JavaVirtualMachines/jdk1.8.0_20.jdk/Contents/Home\n</code></pre>\n\n<p>How to install jdk7 in addition to this one?</p>\n\n<p>Thanks<br>\nDakky</p>\n", "tags": ["java", "osx", "install"], "title": "Mac OS X and multiple Java versions", "answers": [{"body": "<p>Uninstall jdk8, install jdk7, then reinstall jdk8.</p>\n\n<p>My approach to switching between them (in .profile) :</p>\n\n<pre><code>export JAVA_8_HOME=$(/usr/libexec/java_home -v1.8)\nexport JAVA_7_HOME=$(/usr/libexec/java_home -v1.7)\n\nalias java7='export JAVA_HOME=$JAVA_7_HOME'\nalias java8='export JAVA_HOME=$JAVA_8_HOME'\n\n#default java8\nexport JAVA_HOME=$JAVA_8_HOME\n</code></pre>\n\n<p>Then you can simply type <code>java7</code> or <code>java8</code> in a terminal to switch versions.</p>\n", "title": "Mac OS X and multiple Java versions", "tags": ["java", "osx", "install"], "link": "http://stackoverflow.com/questions/26252591/mac-os-x-and-multiple-java-versions/26252993#26252993", "question_id": 26252591, "answer_id": 26252993}, {"body": "<p>The cleanest way to manage multiple java versions on Mac is to use <a href=\"http://brew.sh\"><code>Homebrew</code></a>.</p>\n\n<p>And within <code>Homebrew</code>, use:</p>\n\n<ul>\n<li><code>homebrew-cask</code> to install the versions of java</li>\n<li><code>jenv</code> to manage the installed versions of java</li>\n</ul>\n\n<hr>\n\n<p>As seen on <a href=\"http://hanxue-it.blogspot.ch/2014/05/installing-java-8-managing-multiple.html\">http://hanxue-it.blogspot.ch/2014/05/installing-java-8-managing-multiple.html</a> , these are the steps to follow.</p>\n\n<ol>\n<li>install homebrew</li>\n<li>install homebrew jenv</li>\n<li>install homebrew-cask</li>\n<li>install a specific java version using cask (see \"homebrew-cask versions\" paragraph below)</li>\n<li>add this version for jenv to manage it</li>\n<li>check the version is correctly managed by jenv</li>\n<li>repeat steps 4 to 6 for each version of java you need</li>\n</ol>\n\n<hr>\n\n<h3>homebrew-cask versions</h3>\n\n<p>Add the \"caskroom/versions\" tap to homebrew using:</p>\n\n<pre><code>brew tap caskroom/versions\n</code></pre>\n\n<p>Then you can look at all the versions available:</p>\n\n<pre><code>brew cask search java\n</code></pre>\n\n<p>Then you can install the version(s) you like:</p>\n\n<pre><code>brew cask install java7\nbrew cask install java6\n</code></pre>\n\n<p>And add them to be managed by jenv as usual.</p>\n\n<pre><code>jenv add &lt;javaVersionPathHere&gt;\n</code></pre>\n\n<p>I think this is the cleanest &amp; simplest way to go about it.</p>\n\n<hr>\n\n<p>Another important thing to note, as mentioned in <a href=\"http://stackoverflow.com/questions/6141180/mac-os-x-10-6-7-java-path-current-jdk-confusing/24792251#24792251\">Mac OS X 10.6.7 Java Path Current JDK confusing</a> :</p>\n\n<blockquote>\n  <p>For different types of JDKs or installations, you will have different\n  paths</p>\n  \n  <p>On Mac OS X Mavericks, I found as following:</p>\n  \n  <p>1) Built-in JRE default: <code>/Library/Internet\\\n  Plug-Ins/JavaAppletPlugin.plugin/Contents/Home</code></p>\n  \n  <p>2) JDKs downloaded from Apple: <code>/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/</code></p>\n  \n  <p>3) JDKs downloaded from Oracle: <code>/Library/Java/JavaVirtualMachines/jdk1.8.0_11.jdk/Contents/Home</code></p>\n</blockquote>\n\n<hr>\n\n<h3>Resources</h3>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/19039752/removing-java-8-jdk-from-mac\">Removing Java 8 JDK from Mac</a></li>\n<li><a href=\"http://hanxue-it.blogspot.ch/2014/05/installing-java-8-managing-multiple.html\">http://hanxue-it.blogspot.ch/2014/05/installing-java-8-managing-multiple.html</a></li>\n<li><a href=\"http://sourabhbajaj.com/mac-setup/index.html\">http://sourabhbajaj.com/mac-setup/index.html</a></li>\n<li><a href=\"http://brew.sh\">http://brew.sh</a></li>\n<li><a href=\"https://github.com/Homebrew/homebrew/tree/master/share/doc/homebrew#readme\">https://github.com/Homebrew/homebrew/tree/master/share/doc/homebrew#readme</a></li>\n<li><a href=\"http://sourabhbajaj.com/mac-setup/Homebrew/README.html\">http://sourabhbajaj.com/mac-setup/Homebrew/README.html</a></li>\n<li>\"brew tap\u201d explained <a href=\"https://github.com/Homebrew/homebrew/blob/master/share/doc/homebrew/brew-tap.md\">https://github.com/Homebrew/homebrew/blob/master/share/doc/homebrew/brew-tap.md</a></li>\n<li>\u201cbrew versions\u201d explained <a href=\"http://stackoverflow.com/questions/3987683/homebrew-install-specific-version-of-formula\">Homebrew install specific version of formula?</a> and also <a href=\"https://github.com/Homebrew/homebrew-versions\">https://github.com/Homebrew/homebrew-versions</a></li>\n<li><a href=\"http://caskroom.io\">http://caskroom.io</a></li>\n<li><a href=\"https://github.com/caskroom/homebrew-cask\">https://github.com/caskroom/homebrew-cask</a></li>\n<li>\u201ccask versions\u201d, similar to \u201cbrew versions\u201d, see <a href=\"https://github.com/caskroom/homebrew-versions\">https://github.com/caskroom/homebrew-versions</a> and also <a href=\"https://github.com/caskroom/homebrew-cask/issues/9447\">https://github.com/caskroom/homebrew-cask/issues/9447</a></li>\n<li><a href=\"http://www.jenv.be\">http://www.jenv.be</a></li>\n<li><a href=\"https://github.com/gcuisinier/jenv\">https://github.com/gcuisinier/jenv</a></li>\n</ul>\n", "title": "Mac OS X and multiple Java versions", "tags": ["java", "osx", "install"], "link": "http://stackoverflow.com/questions/26252591/mac-os-x-and-multiple-java-versions/29195815#29195815", "question_id": 26252591, "answer_id": 29195815}, {"body": "<p>I am using Mac OS X 10.9.5. This is how I manage multiple JDK/JRE on my machine when I need one version to run application A and use another version for application B.</p>\n\n<p>I created the following script after getting some help online.</p>\n\n<pre><code>#!bin/sh\nfunction setjdk() {\n  if [ $# -ne 0 ]; then\n   removeFromPath '/Library/Java/JavaVirtualMachines/'\n   if [ -n \"${JAVA_HOME+x}\" ]; then\n    removeFromPath $JAVA_HOME\n   fi\n   export JAVA_HOME=/Library/Java/JavaVirtualMachines/$1/Contents/Home\n   export PATH=$JAVA_HOME/bin:$PATH\n  fi\n }\n function removeFromPath() {\n  export PATH=$(echo $PATH | sed -E -e \"s;:$1;;\" -e \"s;$1:?;;\")\n }\n#setjdk jdk1.8.0_60.jdk\nsetjdk jdk1.7.0_15.jdk\n</code></pre>\n\n<p>I put the above script in .profile file. Just open terminal, type vi .profile, append the script with the above snippet and save it. Once your out type <code>source .profile</code>, this will run your profile script without you having to restart the terminal. Now type <code>java -version</code> it should show 1.7 as your current version. If you intend to change it to 1.8 then comment the line <code>setjdk jdk1.7.0_15.jdk</code> and uncomment the line <code>setjdk jdk1.8.0_60.jdk</code>. Save the script and run it again with source command. I use this mechanism to manage multiple versions of JDK/JRE when I have to compile 2 different Maven projects which need different java versions.</p>\n", "title": "Mac OS X and multiple Java versions", "tags": ["java", "osx", "install"], "link": "http://stackoverflow.com/questions/26252591/mac-os-x-and-multiple-java-versions/32662139#32662139", "question_id": 26252591, "answer_id": 32662139}, {"body": "<p>As found on this <a href=\"http://www.javahabit.com/2015/03/30/install-or-manage-multiple-versions-of-java-on-os-x/\" rel=\"nofollow\">website</a>\nSo Let\u2019s begin by installing jEnv</p>\n\n<ol>\n<li><p>Run this in the terminal</p>\n\n<pre><code>brew install https://raw.github.com/gcuisinier/jenv/homebrew/jenv.rb\n</code></pre></li>\n<li><p>Add jEnv to the bash profile</p>\n\n<pre><code>if which jenv &gt; /dev/null; then eval \"$(jenv init -)\"; fi\n</code></pre></li>\n<li><p>When you first install jEnv will not have any JDK associated with it.</p>\n\n<p>For example, I just installed JDK 8 but jEnv does not know about it. To check Java versions on jEnv</p>\n\n<p>At the moment it only found Java version(jre) on the system. The <code>*</code> shows the version currently selected. Unlike rvm and rbenv, jEnv cannot install JDK for you. You need to install JDK manually from Oracle website.</p></li>\n<li><p>Install JDK 6 from Apple website. This will install Java in <code>/System/Library/Java/JavaVirtualMachines/</code>. The reason we are installing Java 6 from Apple website is that SUN did not come up with JDK 6 for MAC, so Apple created/modified its own deployment version.</p></li>\n<li><p>Similarly install JDK7 and JDK8.</p></li>\n<li><p>Add JDKs to jEnv.</p>\n\n<p>JDK 6:</p>\n\n<p>JDK 7:\n<a href=\"http://i.stack.imgur.com/wOedB.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/wOedB.png\" alt=\"http://javahabi@javahabit.com/wp-content/uploads/2015/03/img_5518ab9bc47d4.png\"></a></p>\n\n<p>JDK 8:\n<a href=\"http://i.stack.imgur.com/wOedB.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/wOedB.png\" alt=\"http://javahabi@javahabit.com/wp-content/uploads/2015/03/img_5518abb2c1217.png\"></a></p></li>\n<li><p>Check the java versions installed using jenv</p>\n\n<p><a href=\"http://i.stack.imgur.com/wOedB.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/wOedB.png\" alt=\"http://javahabi@javahabit.com/wp-content/uploads/2015/03/img_5518abceb0deb.png\"></a></p></li>\n<li><p>So now we have 3 versions of Java on our system. To set a default version use the command</p>\n\n<pre><code>jenv local &lt;jenv version&gt;\n</code></pre>\n\n<p>Ex \u2013 I wanted Jdk 1.6 to start IntelliJ</p>\n\n<pre><code>jenv local oracle64-1.6.0.65\n</code></pre></li>\n<li><p>check the java version</p>\n\n<p>java -version\n<a href=\"http://i.stack.imgur.com/wOedB.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/wOedB.png\" alt=\"http://javahabi@javahabit.com/wp-content/uploads/2015/03/img_5518abe376dd0.png\"></a></p></li>\n</ol>\n\n<p>That\u2019s it. We now have multiple versions of java and we can switch between them easily. jEnv also has some other features, such as wrappers for Gradle, Ant, Maven, etc, and the ability to set JVM options globally or locally. Check out the documentation for more information.</p>\n", "title": "Mac OS X and multiple Java versions", "tags": ["java", "osx", "install"], "link": "http://stackoverflow.com/questions/26252591/mac-os-x-and-multiple-java-versions/38471619#38471619", "question_id": 26252591, "answer_id": 38471619}], "creation_date": 1412757711, "score": 51, "link": "http://stackoverflow.com/questions/26252591/mac-os-x-and-multiple-java-versions", "question_id": 26252591}, {"body": "<p>I was reading about floating-point NaN values in the Java Language Specification (I'm boring). A 32-bit <code>float</code> has this bit format:</p>\n\n<pre><code>seee eeee emmm mmmm mmmm mmmm mmmm mmmm\n</code></pre>\n\n<p><code>s</code> is the sign bit, <code>e</code> are the exponent bits, and <code>m</code> are the mantissa bits. A NaN value is encoded as an exponent of all 1s, and the mantissa bits are not all 0 (which would be +/- infinity). This means that there are lots of different possible NaN values (having different <code>s</code> and <code>m</code> bit values).</p>\n\n<p>On this, <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.2.3\" rel=\"nofollow\">JLS \u00a74.2.3</a> says:</p>\n\n<blockquote>\n  <p>IEEE 754 allows multiple distinct NaN values for each of its single and double floating-point formats. While each hardware architecture returns a particular bit pattern for NaN when a new NaN is generated, a programmer can also create NaNs with different bit patterns to encode, for example, retrospective diagnostic information.</p>\n</blockquote>\n\n<p>The text in the JLS seems to imply that the result of, for example, <code>0.0/0.0</code>, has a hardware-dependent bit pattern, and depending on whether that expression was computed as a compile time constant, the hardware it is dependent on might be the hardware the Java program was compiled on or the hardware the program was run on. This all seems <em>very</em> flaky if true.</p>\n\n<p>I ran the following test:</p>\n\n<pre><code>System.out.println(Integer.toHexString(Float.floatToRawIntBits(0.0f/0.0f)));\nSystem.out.println(Integer.toHexString(Float.floatToRawIntBits(Float.NaN)));\nSystem.out.println(Long.toHexString(Double.doubleToRawLongBits(0.0d/0.0d)));\nSystem.out.println(Long.toHexString(Double.doubleToRawLongBits(Double.NaN)));\n</code></pre>\n\n<p>The output on my machine is:</p>\n\n<pre><code>7fc00000\n7fc00000\n7ff8000000000000\n7ff8000000000000\n</code></pre>\n\n<p>The output shows nothing out of the expected. The exponent bits are all 1. The upper bit of the mantissa is also 1, which for NaNs apparently indicates a \"quiet NaN\" as opposed to a \"signalling NaN\" (<a href=\"https://en.wikipedia.org/wiki/NaN#Floating_point\" rel=\"nofollow\">https://en.wikipedia.org/wiki/NaN#Floating_point</a>). The sign bit and the rest of the mantissa bits are 0. The output also shows that there was no difference between the NaNs generated on my machine and the constant NaNs from the Float and Double classes.</p>\n\n<p>My question is, <strong>is that output guaranteed in Java, regardless of the CPU of the compiler or VM</strong>, or is it all genuinely unpredictable? The JLS is mysterious about this.</p>\n\n<p>If that output is guaranteed for <code>0.0/0.0</code>, are there any arithmetic ways of producing NaNs that do have other (possibly hardware-dependent?) bit patterns? (I know <code>intBitsToFloat</code>/<code>longBitsToDouble</code> can encode other NaNs, but I'd like to know if other values can occur from normal arithmetic.)</p>\n\n<hr>\n\n<p>A followup point: I've noticed that <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Float.html#NaN\" rel=\"nofollow\">Float.NaN</a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Double.html#NaN\" rel=\"nofollow\">Double.NaN</a> specify their exact bit pattern, but in the source (<a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/java/lang/Float.java\" rel=\"nofollow\">Float</a>, <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/java/lang/Double.java\" rel=\"nofollow\">Double</a>) they are generated by <code>0.0/0.0</code>. If the result of that division is really dependent on the hardware of the compiler, it seems like there is a flaw there in either the spec or the implementation.</p>\n", "tags": ["java", "floating-point", "nan", "ieee-754"], "title": "Are the bit patterns of NaNs really hardware-dependent?", "answers": [{"body": "<p>The way I read the JLS here the exact bit value of a NaN is dependent on who/what made it and since the JVM didn't make it, don't ask them.  You might as well ask them what an \"Error code 4\" string means.   </p>\n\n<p>The hardware produces different bit patterns meant to represent different kinds of NaN's.  Unfortunately the different kinds hardware produce different bit patterns for the same kinds of NaN's.  Fortunately there is a standard pattern that Java can use to at least tell that it is some kind of NaN.  </p>\n\n<p>It's like Java looked at the \"Error code 4\" string and said, \"We don't know what 'code 4' means on your hardware, but there was the word 'error' in that string, so we think it's an error.\"</p>\n\n<p>The JLS tries to give you a chance to figure it out on your own though:</p>\n\n<p>\"However, version 1.3 of the Java SE platform introduced methods enabling the programmer to distinguish between NaN values: the <code>Float.floatToRawIntBits</code> and <code>Double.doubleToRawLongBits</code> methods. The interested reader is referred to the specifications for the <code>Float</code> and <code>Double</code> classes for more information.\"</p>\n\n<p>Which looks to me like a C++ <code>reinterpret_cast</code>.  It's Java giving you a chance to analyze the NaN yourself in case you happen to know how its signal was encoded.  If you want to track down the hardware specs so you can predict what different events should produce which NaN bit patterns you are free to do so but you are outside the uniformity the JVM was meant to give us.  So expect it might change from hardware to hardware.</p>\n\n<p>When testing if a number is NaN we check if it's equal to itself since it's the only number that isn't.  This isn't to say that the bits are different.  Before comparing the bits the JVM tests for the many bit patterns that say it's a NaN.  If it's any of those patterns then it reports that it's not equal, even if the bits of the two operands really are the same (and even if they're different).  </p>\n\n<p>Back in 1964, when pressed to give an exact definition for pornography, U.S. Supreme Court Justice Stewart famously said, \u201cI Know It When I See It\u201d.  I think of Java as doing the same thing with NaN's.  Java can't tell you anything that a \"signaling\" NaN might be signaling cause it doesn't know how that signal was encoded.  But it can look at the bits and tell it's a NaN of some kind since that pattern follows one standard.  </p>\n\n<p>If you happen to be on hardware that encodes all NaN's with uniform bits you'll never prove that Java is doing anything to make NaN's have uniform bits.  Again, the way I read the JLS, they are outright saying you are on your own here.</p>\n\n<p>I can see why this feels flaky.  It is flaky.  It's just not Java's fault.  I'll lay odds that some where out there some enterprising hardware manufactures came up with wonderfully expressive signaling NaN bit patterns but they failed to get it adopted as a standard widely enough that Java can count on it.  That's what's flaky.  We have all these bits reserved for signalling what kind of NaN we have and can't use them because we don't agree what they mean.  Having Java beat NaN's into a uniform value after the hardware makes them would only destroy that information, harm performance, and the only payoff is to not seem flaky.  Given the situation, I'm glad they realized they could cheat their way out of the problem and define NaN as not being equal to anything.</p>\n", "title": "Are the bit patterns of NaNs really hardware-dependent?", "tags": ["java", "floating-point", "nan", "ieee-754"], "link": "http://stackoverflow.com/questions/25050133/are-the-bit-patterns-of-nans-really-hardware-dependent/25050550#25050550", "question_id": 25050133, "answer_id": 25050550}, {"body": "<p>Here is a program demonstrating different NaN bit patterns:</p>\n\n<pre><code>public class Test {\n  public static void main(String[] arg) {\n    double myNaN = Double.longBitsToDouble(0x7ff1234512345678L);\n    System.out.println(Double.isNaN(myNaN));\n    System.out.println(Long.toHexString(Double.doubleToRawLongBits(myNaN)));\n    final double zeroDivNaN = 0.0 / 0.0;\n    System.out.println(Double.isNaN(zeroDivNaN));\n    System.out\n        .println(Long.toHexString(Double.doubleToRawLongBits(zeroDivNaN)));\n  }\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>true\n7ff1234512345678\ntrue\n7ff8000000000000\n</code></pre>\n\n<p>Regardless of what the hardware does, the program can itself create NaNs that may not be the same as e.g. <code>0.0/0.0</code>, and may have some meaning in the program.</p>\n", "title": "Are the bit patterns of NaNs really hardware-dependent?", "tags": ["java", "floating-point", "nan", "ieee-754"], "link": "http://stackoverflow.com/questions/25050133/are-the-bit-patterns-of-nans-really-hardware-dependent/25051572#25051572", "question_id": 25050133, "answer_id": 25051572}, {"body": "<p>This is what <a href=\"http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.3.2\">\u00a72.3.2 of the JVM 7 spec</a> has to say about it:</p>\n\n<blockquote>\n  <p>The elements of the double value set are exactly the values that can be represented\n  using the double floating-point format defined in the IEEE 754 standard, except\n  that there is only one NaN value (IEEE 754 specifies 2<sup>53</sup>-2 distinct NaN values).</p>\n</blockquote>\n\n<p>and <a href=\"http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.8.1\">\u00a72.8.1</a>:</p>\n\n<blockquote>\n  <p>The Java Virtual Machine has no signaling NaN value.</p>\n</blockquote>\n\n<p>So technically there is only one NaN. But <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.2.3\">\u00a74.2.3 of the JLS</a> also says (right after your quote):</p>\n\n<blockquote>\n  <p>For the most part, the Java SE platform treats NaN values of a given type as though collapsed into a single canonical value, and hence this specification normally refers to an arbitrary NaN as though to a canonical value.</p>\n  \n  <p>However, version 1.3 of the Java SE platform introduced methods enabling the programmer to distinguish between NaN values: the Float.floatToRawIntBits and Double.doubleToRawLongBits methods. The interested reader is referred to the specifications for the Float and Double classes for more information.</p>\n</blockquote>\n\n<p>Which I take to mean exactly what you and <a href=\"http://stackoverflow.com/a/25050550/202504\">CandiedOrange</a> propose: It is dependent on the underlying processor, but Java treats them all the same.</p>\n\n<p>But it gets better: Apparently, it is entirely possible that your NaN values are silently converted to different NaNs, as described in <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#longBitsToDouble%28long%29\"><code>Double.longBitsToDouble()</code></a>:</p>\n\n<blockquote>\n  <p>Note that this method may not be able to return a double NaN with exactly same bit pattern as the long argument. IEEE 754 distinguishes between two kinds of NaNs, quiet NaNs and signaling NaNs. The differences between the two kinds of NaN are generally not visible in Java. Arithmetic operations on signaling NaNs turn them into quiet NaNs with a different, but often similar, bit pattern. However, on some processors merely copying a signaling NaN also performs that conversion. In particular, copying a signaling NaN to return it to the calling method may perform this conversion. So longBitsToDouble may not be able to return a double with a signaling NaN bit pattern. Consequently, for some long values, doubleToRawLongBits(longBitsToDouble(start)) may not equal start. Moreover, which particular bit patterns represent signaling NaNs is platform dependent; although all NaN bit patterns, quiet or signaling, must be in the NaN range identified above.</p>\n</blockquote>\n\n<p>For reference, there is a table of the hardware-dependant NaNs <a href=\"http://wiki.apache.org/stdcxx/FloatingPoint\">here</a>. In summary:</p>\n\n<pre><code>- x86:     \n   quiet:      Sign=0  Exp=0x7ff  Frac=0x80000\n   signalling: Sign=0  Exp=0x7ff  Frac=0x40000\n- PA-RISC:               \n   quiet:      Sign=0  Exp=0x7ff  Frac=0x40000\n   signalling: Sign=0  Exp=0x7ff  Frac=0x80000\n- Power:\n   quiet:      Sign=0  Exp=0x7ff  Frac=0x80000\n   signalling: Sign=0  Exp=0x7ff  Frac=0x5555555500055555\n- Alpha:\n   quiet:      Sign=0  Exp=0      Frac=0xfff8000000000000\n   signalling: Sign=1  Exp=0x2aa  Frac=0x7ff5555500055555\n</code></pre>\n\n<p>So, to verify this you would really need one of these processors and go try it out. Also any insights on how to interpret the longer values for the Power and Alpha architectures are welcome.</p>\n", "title": "Are the bit patterns of NaNs really hardware-dependent?", "tags": ["java", "floating-point", "nan", "ieee-754"], "link": "http://stackoverflow.com/questions/25050133/are-the-bit-patterns-of-nans-really-hardware-dependent/25051746#25051746", "question_id": 25050133, "answer_id": 25051746}, {"body": "<p>The only other <code>NaN</code> value that I could generate with normal arithmetic operations so far is the same but with the sign changed:</p>\n\n<pre><code>public static void main(String []args) {\n    Double tentative1 = 0d/0d;\n    Double tentative2 = Math.sqrt(-1d);\n\n    System.out.println(tentative1);\n    System.out.println(tentative2);\n\n    System.out.println(Long.toHexString(Double.doubleToRawLongBits(tentative1)));\n    System.out.println(Long.toHexString(Double.doubleToRawLongBits(tentative2)));\n\n    System.out.println(tentative1 == tentative2);\n    System.out.println(tentative1.equals(tentative2));\n}\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>NaN</p>\n  \n  <p>NaN</p>\n  \n  <p>7ff8000000000000</p>\n  \n  <p>fff8000000000000</p>\n  \n  <p>false</p>\n  \n  <p>true</p>\n</blockquote>\n", "title": "Are the bit patterns of NaNs really hardware-dependent?", "tags": ["java", "floating-point", "nan", "ieee-754"], "link": "http://stackoverflow.com/questions/25050133/are-the-bit-patterns-of-nans-really-hardware-dependent/25150520#25150520", "question_id": 25050133, "answer_id": 25150520}], "creation_date": 1406775373, "score": 51, "link": "http://stackoverflow.com/questions/25050133/are-the-bit-patterns-of-nans-really-hardware-dependent", "question_id": 25050133}, {"body": "<p>I am creating an app with the new Material Design used in Android Lollipop (5.0).</p>\n\n<p>I am using the following guides:</p>\n\n<ul>\n<li><a href=\"http://android-developers.blogspot.it/2014/10/appcompat-v21-material-design-for-pre.html\">http://android-developers.blogspot.it/2014/10/appcompat-v21-material-design-for-pre.html</a></li>\n<li><a href=\"http://antonioleiva.com/material-design-everywhere/\">http://antonioleiva.com/material-design-everywhere/</a></li>\n</ul>\n\n<p>After I create my toolbar, I receive this error: \"The following classes could not be instantiated:\n-\u00a0android.support.v7.widget.Toolbar\"</p>\n\n<p>The app works well in the phone or emulator, but the layout designer of Android Studio doesn't show the layout correctly.</p>\n\n<p>Here there are some images:</p>\n\n<p>Error in my_awesome_toolbar.xml layout preview\n<img src=\"http://i.stack.imgur.com/WhY1o.png\" alt=\"error in my_awesome_toolbar.xml\"></p>\n\n<p>Error in activity_my.xml layout preview\n<img src=\"http://i.stack.imgur.com/LV5Oq.png\" alt=\"error in activity_my.xml\"></p>\n\n<p>The xml code of the files:</p>\n\n<p>my_awesome_toolbar.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n\n&lt;android.support.v7.widget.Toolbar\nxmlns:android=\"http://schemas.android.com/apk/res/android\"\nandroid:id=\"@+id/my_awesome_toolbar\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_width=\"match_parent\"\nandroid:minHeight=\"?attr/actionBarSize\"\nandroid:background=\"?attr/colorPrimary\" /&gt;\n</code></pre>\n\n<p>activity_my.xml:</p>\n\n<pre><code>&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n            xmlns:tools=\"http://schemas.android.com/tools\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:id=\"@+id/root\"\n            tools:context=\"com.myapp.test.MyActivity\"\n            android:orientation=\"horizontal\"&gt;\n\n    &lt;include\n        android:id=\"@+id/toolbar\"\n        layout=\"@layout/my_awesome_toolbar\"\n        /&gt;\n    &lt;!-- Rest of layout --&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>MyActivity.java:</p>\n\n<pre><code>package com.myapp.test;\n\nimport android.os.Bundle;\nimport android.support.v7.app.ActionBarActivity;\nimport android.support.v7.widget.Toolbar;\nimport android.view.Menu;\nimport android.view.MenuItem;\n\n\npublic class MyActivity extends ActionBarActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_my);\n\n        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);\n        setSupportActionBar(toolbar);\n    }\n\n\n    @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        // Inflate the menu; this adds items to the action bar if it is present.\n        getMenuInflater().inflate(R.menu.my, menu);\n        return true;\n    }\n\n    @Override\n    public boolean onOptionsItemSelected(MenuItem item) {\n        // Handle action bar item clicks here. The action bar will\n        // automatically handle clicks on the Home/Up button, so long\n        // as you specify a parent activity in AndroidManifest.xml.\n        int id = item.getItemId();\n        if (id == R.id.action_settings) {\n            return true;\n        }\n        return super.onOptionsItemSelected(item);\n    }\n}\n</code></pre>\n\n<p>xml code of the styles (values/styles.xml):</p>\n\n<pre><code>&lt;resources&gt;\n\n    &lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.NoActionBar\"&gt;\n        &lt;item name=\"colorPrimary\"&gt;@color/blue&lt;/item&gt;\n        &lt;item name=\"colorPrimaryDark\"&gt;@color/dark_blue&lt;/item&gt;\n        &lt;item name=\"actionOverflowButtonStyle\"&gt;@style/AppTheme.OverflowButtonStyle&lt;/item&gt;\n    &lt;/style&gt;\n\n    &lt;!-- Style Title --&gt;\n    &lt;style name=\"Title\"&gt;\n        &lt;item name=\"android:textColor\"&gt;@color/white&lt;/item&gt;\n        &lt;item name=\"android:textStyle\"&gt;bold&lt;/item&gt;\n        &lt;item name=\"android:textSize\"&gt;16sp&lt;/item&gt;\n    &lt;/style&gt;\n\n    &lt;style name=\"AppTheme.OverflowButtonStyle\" parent=\"Widget.AppCompat.ActionButton.Overflow\"&gt;\n        &lt;item name=\"android:src\"&gt;@drawable/overflow_icon&lt;/item&gt;\n    &lt;/style&gt;\n&lt;/resources&gt;\n</code></pre>\n\n<p>At the moment I use Android Studio Beta 0.8.9</p>\n", "tags": ["java", "android", "xml"], "title": "The following classes could not be instantiated: -&#160;android.support.v7.widget.Toolbar", "answers": [{"body": "<p>Sorry if I answer myself, but, at the finally, the solution of my problem was update Android Studio to the new version 0.8.14 by Canary Channel: <a href=\"http://tools.android.com/recent/\">http://tools.android.com/recent/</a></p>\n\n<p>After the update, the problem is gone:</p>\n\n<p><img src=\"http://i.stack.imgur.com/fr1jR.png\" alt=\"After the update, the problem is gone\"></p>\n\n<p>I leave this question here for those who have this problem in the future.</p>\n", "title": "The following classes could not be instantiated: -&#160;android.support.v7.widget.Toolbar", "tags": ["java", "android", "xml"], "link": "http://stackoverflow.com/questions/26575815/the-following-classes-could-not-be-instantiated-android-support-v7-widget-too/26577495#26577495", "question_id": 26575815, "answer_id": 26577495}, {"body": "<p>For Android Studio (or IntelliJ IDEA), </p>\n\n<p>If everything looks OK in your project and that you're still receiving the error in all your layouts, try to 'Invalidate caches &amp; restart'.</p>\n\n<p>Wait until Android Studio has finished to create all the caches &amp; indexes.</p>\n\n<p><img src=\"http://i.stack.imgur.com/TuDuo.png\" alt=\"how to invalidate cache &amp; restart\"></p>\n", "title": "The following classes could not be instantiated: -&#160;android.support.v7.widget.Toolbar", "tags": ["java", "android", "xml"], "link": "http://stackoverflow.com/questions/26575815/the-following-classes-could-not-be-instantiated-android-support-v7-widget-too/29921076#29921076", "question_id": 26575815, "answer_id": 29921076}, {"body": "<p>I did what @gbero said, and I changed the Android version number that Studio uses from 22 to 17 and it works.</p>\n\n<p>I am using the backwards compatibility to build for Android ver 22 but to target 17 (idk if that's correctly said, I am still trying to figure this app stuff out) so that triggered the backwards compatibility, which afaik is what the <code>android.support.v7.*</code> is. This is probably a bug with their rendering code. Not sure if clearing the cache as suggested above was needed as rendering didn't work just after invalidating the cache, it started working after I changed the version to render. If I change back to version 22, the rendering breaks, if I switch back to 17, it works again.</p>\n\n<p><img src=\"http://i.imgur.com/aTMmT0o.png\" alt=\"my fix\"></p>\n", "title": "The following classes could not be instantiated: -&#160;android.support.v7.widget.Toolbar", "tags": ["java", "android", "xml"], "link": "http://stackoverflow.com/questions/26575815/the-following-classes-could-not-be-instantiated-android-support-v7-widget-too/30129970#30129970", "question_id": 26575815, "answer_id": 30129970}, {"body": "<p>I changed the res/values/styles.xml file from this:</p>\n\n<pre><code>&lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.DarkActionBar\"&gt;\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>&lt;style name=\"AppTheme\" parent=\"Base.Theme.AppCompat.Light.DarkActionBar\"&gt;\n</code></pre>\n\n<p>and that solved the problem.</p>\n", "title": "The following classes could not be instantiated: -&#160;android.support.v7.widget.Toolbar", "tags": ["java", "android", "xml"], "link": "http://stackoverflow.com/questions/26575815/the-following-classes-could-not-be-instantiated-android-support-v7-widget-too/30749068#30749068", "question_id": 26575815, "answer_id": 30749068}, {"body": "<p>I had the same error on my Android Studio screen when i wanted to prevew my project. I fix the problem by this ways:</p>\n\n<p>1- I chang the version from 22 to 21. But if I change back to version 22, the rendering breaks, if I switch back to 21, it works again. Thank you @Overloaded_Operator</p>\n\n<p>I updated my Android Studio but not working. Thank you @Salvuccio96</p>\n", "title": "The following classes could not be instantiated: -&#160;android.support.v7.widget.Toolbar", "tags": ["java", "android", "xml"], "link": "http://stackoverflow.com/questions/26575815/the-following-classes-could-not-be-instantiated-android-support-v7-widget-too/30765707#30765707", "question_id": 26575815, "answer_id": 30765707}, {"body": "<p>From: <a href=\"http://stackoverflow.com/a/29989542/4123403\">http://stackoverflow.com/a/29989542/4123403</a></p>\n\n<ol>\n<li>Clean project</li>\n<li>Rebuild project</li>\n<li>Sync Gradle</li>\n</ol>\n\n<p>This did the trick for me.</p>\n", "title": "The following classes could not be instantiated: -&#160;android.support.v7.widget.Toolbar", "tags": ["java", "android", "xml"], "link": "http://stackoverflow.com/questions/26575815/the-following-classes-could-not-be-instantiated-android-support-v7-widget-too/30767913#30767913", "question_id": 26575815, "answer_id": 30767913}, {"body": "<p>I had the same error.  Eventually I got this notice that a plugin was out of date:</p>\n\n<p><a href=\"http://i.stack.imgur.com/lbl1R.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/lbl1R.png\" alt=\"error dialog\"></a></p>\n\n<p>After I updated, the problem went away.</p>\n", "title": "The following classes could not be instantiated: -&#160;android.support.v7.widget.Toolbar", "tags": ["java", "android", "xml"], "link": "http://stackoverflow.com/questions/26575815/the-following-classes-could-not-be-instantiated-android-support-v7-widget-too/34999432#34999432", "question_id": 26575815, "answer_id": 34999432}, {"body": "<p>The solutions above didn't help me. I've tried 2 first steps from \n<a href=\"https://github.com/makovkastar/FloatingActionButton\" rel=\"nofollow\">this link</a>.\nWorked fine for me. \nBut don't forget to </p>\n\n<pre><code>import com.melnykov.fab.FloatingActionButton; \n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>import android.support.design.widget.FloatingActionButton;\n</code></pre>\n\n<p>in your MainActivity.java</p>\n", "title": "The following classes could not be instantiated: -&#160;android.support.v7.widget.Toolbar", "tags": ["java", "android", "xml"], "link": "http://stackoverflow.com/questions/26575815/the-following-classes-could-not-be-instantiated-android-support-v7-widget-too/35833403#35833403", "question_id": 26575815, "answer_id": 35833403}, {"body": "<p>Another mistake that can have the same effect can be the wrong theme in the preview.\nFor some reason I had selected some other theme here. After choosing my AppTheme it worked fine again:</p>\n\n<p><a href=\"http://i.stack.imgur.com/dJp08.jpg\"><img src=\"http://i.stack.imgur.com/dJp08.jpg\" alt=\"layout options\"></a></p>\n", "title": "The following classes could not be instantiated: -&#160;android.support.v7.widget.Toolbar", "tags": ["java", "android", "xml"], "link": "http://stackoverflow.com/questions/26575815/the-following-classes-could-not-be-instantiated-android-support-v7-widget-too/37808892#37808892", "question_id": 26575815, "answer_id": 37808892}, {"body": "<ol>\n<li>Clean project</li>\n<li>Rebuild project</li>\n<li>Sync Gradle</li>\n</ol>\n\n<p>it work for me</p>\n", "title": "The following classes could not be instantiated: -&#160;android.support.v7.widget.Toolbar", "tags": ["java", "android", "xml"], "link": "http://stackoverflow.com/questions/26575815/the-following-classes-could-not-be-instantiated-android-support-v7-widget-too/38552537#38552537", "question_id": 26575815, "answer_id": 38552537}], "creation_date": 1414344382, "score": 50, "link": "http://stackoverflow.com/questions/26575815/the-following-classes-could-not-be-instantiated-android-support-v7-widget-too", "question_id": 26575815}, {"body": "<p>I do not understand the output of this code:</p>\n\n<pre><code>public class StringDemo{              \n    public static void main(String args[]) {\n        String blank = \"\";                    \n        String comma = \",\";                   \n        System.out.println(\"Output1: \"+blank.split(\",\").length);  \n        System.out.println(\"Output2: \"+comma.split(\",\").length);  \n    }\n}\n</code></pre>\n\n<p>And got the following output:</p>\n\n<pre><code>Output1: 1 \nOutput2: 0\n</code></pre>\n", "tags": ["java", "regex", "string", "class", "core"], "title": "Confusing output from String.split", "answers": [{"body": "<pre><code>String blank = \"\";                    \nString comma = \",\";                   \nSystem.out.println(\"Output1: \"+blank.split(\",\").length);  // case 1\nSystem.out.println(\"Output2: \"+comma.split(\",\").length);  // case 2\n</code></pre>\n\n<p>case 1 - Here <code>blank.split(\",\")</code> will return <code>\"\"</code> since there is no <code>,</code> in <code>blank</code> you get the same, So length will be <code>1</code></p>\n\n<p>case 2- Here <code>comma.split(\",\")</code> will return empty array, you have to scape <code>,</code> if you want to count <code>comma</code> with length <code>1</code> else length will be <code>0</code></p>\n\n<p>Again <code>comma.split(\",\")</code> split() expecting a <code>regex</code> as argument it will return result array to matching with that <code>regex</code>.</p>\n\n<blockquote>\n  <p>The array returned by this method contains each substring of this\n  string that is terminated by another substring that matches the given\n  expression or is terminated by the end of the string.</p>\n</blockquote>\n\n<p>Else</p>\n\n<blockquote>\n  <p>If the expression does not match any part of the input then the\n  resulting array has just one element, namely this string.</p>\n</blockquote>\n", "title": "Confusing output from String.split", "tags": ["java", "regex", "string", "class", "core"], "link": "http://stackoverflow.com/questions/25056607/confusing-output-from-string-split/25056731#25056731", "question_id": 25056607, "answer_id": 25056731}, {"body": "<p>From the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29\" rel=\"nofollow\">Java 1.7 Documentation</a></p>\n\n<blockquote>\n  <p>Splits the string around matches of the given regular expression.</p>\n  \n  <p>split() method works as if by invoking the two-argument split method with the given expression and a limit argument of zero. <strong>Trailing empty strings are therefore not included in the resulting array.</strong> </p>\n</blockquote>\n\n<p>In the Case 1 <code>blank.split(\",\") does not match any part of the input then the resulting array has just one element, namely this String.</code> </p>\n\n<p><code>It will return entire String.</code> So, the length will be <code>1</code>.</p>\n\n<p>In the Case 2 <code>comma.split(\",\") will return empty.</code></p>\n\n<p><code>split()</code> expecting a regex as argument, return result array to matching with that regex.</p>\n\n<p>So, the length is <code>0</code></p>\n\n<p><strong>For Example</strong>(<a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29\" rel=\"nofollow\">Documentation</a>)</p>\n\n<blockquote>\n  <p>The string <strong>\"boo:and:foo\"</strong>, yields the following results with these expressions:</p>\n</blockquote>\n\n<pre><code>Regex     Result\n  :     { \"boo\", \"and\", \"foo\" }\n  o     { \"b\", \"\", \":and:f\" }\n</code></pre>\n\n<blockquote>\n  <p><strong>Parameters:</strong>\n     regex - the delimiting regular expression</p>\n  \n  <p><strong>Returns:</strong>\n     the array of strings computed by splitting this string around matches of the given regular expression</p>\n  \n  <p><strong>Throws:</strong>\n     PatternSyntaxException - if the regular expression's syntax is invalid</p>\n</blockquote>\n", "title": "Confusing output from String.split", "tags": ["java", "regex", "string", "class", "core"], "link": "http://stackoverflow.com/questions/25056607/confusing-output-from-string-split/25056757#25056757", "question_id": 25056607, "answer_id": 25056757}, {"body": "<p>Documentation:</p>\n\n<p>For: <code>System.out.println(\"Output1: \"+blank.split(\",\").length);</code></p>\n\n<blockquote>\n  <p>The array returned by this method contains each substring of this string that is terminated by another substring that matches the given expression or is terminated by the end of the string. The substrings in the array are in the order in which they occur in this string. <strong>If the expression does not match any part of the input then the resulting array has just one element, namely this string</strong>.</p>\n</blockquote>\n\n<p>It will simply return the entire string that's why it returns 1.</p>\n\n<hr>\n\n<p>For the second case, <code>String.split</code> will discard the <code>,</code> so the result will be empty.</p>\n\n<pre><code>String.split silently discards trailing separators\n</code></pre>\n\n<p>see <a href=\"https://code.google.com/p/guava-libraries/wiki/StringsExplained#Splitter\">guava StringsExplained</a> too</p>\n", "title": "Confusing output from String.split", "tags": ["java", "regex", "string", "class", "core"], "link": "http://stackoverflow.com/questions/25056607/confusing-output-from-string-split/25056821#25056821", "question_id": 25056607, "answer_id": 25056821}, {"body": "<p>We can take a look into <a href=\"http://hg.openjdk.java.net/jdk7u/jdk7u/jdk/file/677a0ad1e733/src/share/classes/java/util/regex/Pattern.java\" rel=\"nofollow\">the source code of <code>java.util.regex.Pattern</code></a> which is behind <code>String.split</code>. Way down the rabbit hole the method</p>\n\n<pre><code>public String[] split(CharSequence input, int limit)\n</code></pre>\n\n<p>is invoked.</p>\n\n<h2>Input <code>\"\"</code></h2>\n\n<p>For input <code>\"\"</code> this method is called as</p>\n\n<pre><code>String[] parts = split(\"\", 0);\n</code></pre>\n\n<p><a href=\"http://hg.openjdk.java.net/jdk7u/jdk7u/jdk/file/677a0ad1e733/src/share/classes/java/util/regex/Pattern.java#l1193\" rel=\"nofollow\">The intersting part of this method is</a>:</p>\n\n<pre><code>  int index = 0;\n  boolean matchLimited = limit &gt; 0;\n  ArrayList&lt;String&gt; matchList = new ArrayList&lt;&gt;();\n  Matcher m = matcher(input);\n\n  while(m.find()) {\n    // Tichodroma: this will not happen for our input\n  }\n\n  // If no match was found, return this\n  if (index == 0)\n    return new String[] {input.toString()};\n</code></pre>\n\n<p>And that is what happens: <a href=\"http://hg.openjdk.java.net/jdk7u/jdk7u/jdk/file/677a0ad1e733/src/share/classes/java/util/regex/Pattern.java#l1213\" rel=\"nofollow\"><code>new String[] {input.toString()}</code> is returned</a>.</p>\n\n<h2>Input <code>\",\"</code></h2>\n\n<p>For input <code>\",\"</code><a href=\"http://hg.openjdk.java.net/jdk7u/jdk7u/jdk/file/677a0ad1e733/src/share/classes/java/util/regex/Pattern.java#l1221\" rel=\"nofollow\">the intersting part is</a></p>\n\n<pre><code>    // Construct result\n    int resultSize = matchList.size();\n    if (limit == 0)\n        while (resultSize &gt; 0 &amp;&amp; matchList.get(resultSize-1).equals(\"\"))\n            resultSize--;\n    String[] result = new String[resultSize];\n    return matchList.subList(0, resultSize).toArray(result);\n</code></pre>\n\n<p>Here <code>resultSize == 0</code> and <code>limit == 0</code> so <a href=\"http://hg.openjdk.java.net/jdk7u/jdk7u/jdk/file/677a0ad1e733/src/share/classes/java/util/regex/Pattern.java#l1226\" rel=\"nofollow\"><code>new String[0]</code> is returned</a>.</p>\n", "title": "Confusing output from String.split", "tags": ["java", "regex", "string", "class", "core"], "link": "http://stackoverflow.com/questions/25056607/confusing-output-from-string-split/25056878#25056878", "question_id": 25056607, "answer_id": 25056878}, {"body": "<p>From String class <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String)\" rel=\"nofollow\">javadoc</a> for the <code>public String[] <b>split</b>(String regex)</code> method:</p>\n\n<blockquote>\n  <p>Splits this string around matches of the given regular expression.  </p>\n  \n  <p>This method works as if by invoking the two-argument split method with the given expression and a limit argument of zero. Trailing empty strings are therefore not included in the resulting array.</p>\n</blockquote>\n\n<p>In the first case, the expression does not match any part of the input so we got an array with only one element - the input.</p>\n\n<p>In the second case, the expression matches input and split should return two empty strings; but, according to javadoc, they are discarded (because they are trailing and empty).</p>\n", "title": "Confusing output from String.split", "tags": ["java", "regex", "string", "class", "core"], "link": "http://stackoverflow.com/questions/25056607/confusing-output-from-string-split/25056912#25056912", "question_id": 25056607, "answer_id": 25056912}, {"body": "<p>The API for the split method states that \"If the expression does not match any part of the input then the resulting array has just one element, namely this string.\"</p>\n\n<p>So, as the String blank doesn't contain a \",\", a String[] with one element (i.e. blank itself) is returned.</p>\n\n<p>For the String comma, \"nothing\" is left of the original string thus an empty array is returned.</p>\n\n<p>This seems to be the best solution if you want to process the returned result, e. g.</p>\n\n<pre><code>String[] splits = aString.split(\",\");\nfor(String split: splits) {\n   // do something\n}\n</code></pre>\n", "title": "Confusing output from String.split", "tags": ["java", "regex", "string", "class", "core"], "link": "http://stackoverflow.com/questions/25056607/confusing-output-from-string-split/25057070#25057070", "question_id": 25056607, "answer_id": 25057070}, {"body": "<p>From JDK 1.7</p>\n\n<pre><code> public String[] split(String regex, int limit) {\n        /* fastpath if the regex is a\n           (1)one-char String and this character is not one of the\n              RegEx's meta characters \".$|()[{^?*+\\\\\", or\n           (2)two-char String and the first char is the backslash and\n              the second is not the ascii digit or ascii letter.\n        */\n        char ch = 0;\n        if (((regex.count == 1 &amp;&amp;\n             \".$|()[{^?*+\\\\\".indexOf(ch = regex.charAt(0)) == -1) ||\n             (regex.length() == 2 &amp;&amp;\n              regex.charAt(0) == '\\\\' &amp;&amp;\n              (((ch = regex.charAt(1))-'0')|('9'-ch)) &lt; 0 &amp;&amp;\n              ((ch-'a')|('z'-ch)) &lt; 0 &amp;&amp;\n              ((ch-'A')|('Z'-ch)) &lt; 0)) &amp;&amp;\n            (ch &lt; Character.MIN_HIGH_SURROGATE ||\n             ch &gt; Character.MAX_LOW_SURROGATE))\n        {\n            int off = 0;\n            int next = 0;\n            boolean limited = limit &gt; 0;\n            ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();\n            while ((next = indexOf(ch, off)) != -1) {\n                if (!limited || list.size() &lt; limit - 1) {\n                    list.add(substring(off, next));\n                    off = next + 1;\n                } else {    // last one\n                    //assert (list.size() == limit - 1);\n                    list.add(substring(off, count));\n                    off = count;\n                    break;\n                }\n            }\n            // If no match was found, return this\n            if (off == 0)\n                return new String[] { this };\n\n            // Add remaining segment\n            if (!limited || list.size() &lt; limit)\n                list.add(substring(off, count));\n\n            // Construct result\n            int resultSize = list.size();\n            if (limit == 0)\n                while (resultSize &gt; 0 &amp;&amp; list.get(resultSize-1).length() == 0)\n                    resultSize--;\n            String[] result = new String[resultSize];\n            return list.subList(0, resultSize).toArray(result);\n        }\n        return Pattern.compile(regex).split(this, limit);\n    }\n</code></pre>\n\n<p>So for this case, the regex will be handled by the first <code>if</code>.</p>\n\n<p>For the first case <code>blank.split(\",\")</code></p>\n\n<pre><code>// If no match was found, return this\nif (off == 0)\n   return new String[] { this };\n</code></pre>\n\n<p>So, this function will return an array which contains one element if there is no matched.</p>\n\n<p>For the second case <code>comma.split(\",\")</code></p>\n\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;&gt;();\n//...\nint resultSize = list.size();\nif (limit == 0)\n    while (resultSize &gt; 0 &amp;&amp; list.get(resultSize-1).length() == 0)\n           resultSize--;\nString[] result = new String[resultSize];\nreturn list.subList(0, resultSize).toArray(result);\n</code></pre>\n\n<p>As you notice, the last while loop has removed all empty element in the end of the list, so the resultSize is <code>0</code>.</p>\n", "title": "Confusing output from String.split", "tags": ["java", "regex", "string", "class", "core"], "link": "http://stackoverflow.com/questions/25056607/confusing-output-from-string-split/25057109#25057109", "question_id": 25056607, "answer_id": 25057109}, {"body": "<p>Everything happens according to plan, but let's do it step by step (I hope you have some time). </p>\n\n<p>According to <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-\" rel=\"nofollow\">documentation</a> (and <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2408\" rel=\"nofollow\">source code</a>) of <code>split(String regex)</code> method:</p>\n\n<blockquote>\n  <p>This method works as if by invoking the two-argument split method with the given expression and a limit argument of zero.</p>\n</blockquote>\n\n<p>So when you invoke </p>\n\n<pre><code>split(String regex)\n</code></pre>\n\n<p>you are actually getting result from the <code>split(String regex, int limit)</code> method which is invoked in a way:</p>\n\n<pre><code>split(regex, 0)\n</code></pre>\n\n<p>So here <code>limit</code> is set to <code>0</code>. </p>\n\n<p>You need to know a few things about this parameter:</p>\n\n<ul>\n<li>If <code>limit</code> is positive you are limiting length of result array to a positive number you specified, so <code>\"axaxaxaxa\".split(\"x\",2)</code> will return an array, <code>[\"a\", \"axaxaxa\"]</code>, not <code>[\"a\",\"a\",\"a\",\"a\",\"a\"]</code>.</li>\n<li><p>If <code>limit</code> is <code>0</code> then you are not limiting the length of the result array. But it also means that any trailing empty strings will be removed. For example: </p>\n\n<pre><code>\"fooXbarX\".split(\"X\")\n</code></pre>\n\n<p>will at start generate an array which will look like:</p>\n\n<pre><code>[\"foo\", \"bar\", \"\"]\n</code></pre>\n\n<p>(<code>\"barX\"</code> split on <code>\"X\"</code> generates <code>\"bar\"</code> and <code>\"\"</code>), but since <code>split</code> removes all trailing empty string, it will return </p>\n\n<pre><code>[\"foo\", \"bar\"]\n</code></pre></li>\n<li><p>Behaviour of negative value of <code>limit</code> is similar to behaviour where limit is set to <code>0</code> (it will not limit length of result array). The only difference is that it will not remove empty strings from the end of the result array. In other words </p>\n\n<pre><code>\"fooXbarX\".split(\"X\",-1)\n</code></pre></li>\n</ul>\n\n<p>will return <code>[\"foo\", \"bar\", \"\"]</code></p>\n\n<hr>\n\n<p>Lets take a look at the case,</p>\n\n<pre><code>\",\".split(\",\").length\n</code></pre>\n\n<p>which (as explained earlier) is same as </p>\n\n<pre><code>\",\".split(\",\", 0).length\n</code></pre>\n\n<p>This means that we are using a version of split which will not limit the length of the result array, but <strong><em>will remove all trailing empty strings</em></strong>, <code>\"\"</code>. You need to understand that when we split <em>one</em> thing we are always getting <em>two</em> things.</p>\n\n<p>In other words, if we split <code>\"abc\"</code> in place of <code>b</code>, we will get <code>\"a\"</code> and <code>\"c\"</code>.<br>\nThe tricky part is to understand that if we split <code>\"abc\"</code> in <code>c</code> we will get <code>\"ab\" and</code>\"\"` (empty string).</p>\n\n<p>Using this logic, if we split <code>\",\"</code> on <code>,</code> we will get <code>\"\"</code> and <code>\"\"</code> (two empty strings).</p>\n\n<p>You can check it easily using </p>\n\n<pre><code>for (String s: \",\".split(\",\", -1))\n    System.out.println(\"\\\"\"+s+\"\\\"\");\n</code></pre>\n\n<p>which will produce </p>\n\n<pre><code>\"\"\n\"\"\n</code></pre>\n\n<p>So our result array contains <code>[\"\", \"\"]</code>.</p>\n\n<p>But we set <code>limit</code> to <code>0</code>, so we decided that all trailing empty strings will be removed. In this case, the result array contains <em>only trailing empty strings</em>, so <strong>all of them will be removed</strong>, leaving you with empty array <code>[]</code> which length is <code>0</code>.</p>\n\n<hr>\n\n<p>To answer the case with</p>\n\n<pre><code>\"\".split(\",\").length\n</code></pre>\n\n<p>you need to understand that <strong>removing trailing empty strings makes sense only if such trailing empty strings ware result of splitting (and most probably are unwanted)</strong>. So if there were not any places on which we could split there is no point in running this \"cleaning\" process. That is why in case where the original string was not split (it didn't contain part which matched a regex from <code>split</code>'s argument) Java creators decided to return this string as it is.</p>\n\n<p>This information is mentioned in <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-int-\" rel=\"nofollow\">documentation of <code>split(String regex, int limit)</code></a> method where you can read:</p>\n\n<blockquote>\n  <p>If the expression <strong>does not match any part of the input</strong> then the <strong>resulting array has just one element, namely this string</strong>.</p>\n</blockquote>\n\n<p>You can also see this behaviour in <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2316\" rel=\"nofollow\">source code of this method</a> (from Java 8):</p>\n\n<pre><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2316\" rel=\"nofollow\">2316</a>      <b>public</b> <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#String%5B%5D\" rel=\"nofollow\" title=\"java.lang.String[]\">String</a>[] split(<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#String\" rel=\"nofollow\" title=\"java.lang.String\">String</a> regex, <b>int</b> limit) {<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2317\" rel=\"nofollow\">2317</a>          /* fastpath if the regex is a<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2318\" rel=\"nofollow\">2318</a>           (1)one-char String and this character is not one of the<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2319\" rel=\"nofollow\">2319</a>              RegEx's meta characters \".$|()[{^?*+\\\\\", or<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2320\" rel=\"nofollow\">2320</a>           (2)two-char String and the first char is the backslash and<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2321\" rel=\"nofollow\">2321</a>              the second is not the ascii digit or ascii letter.<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2322\" rel=\"nofollow\">2322</a>           */<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2323\" rel=\"nofollow\">2323</a>          <b>char</b> ch = 0;<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2324\" rel=\"nofollow\">2324</a>          <b>if</b> (((regex.value.length == 1 &amp;&amp;<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2325\" rel=\"nofollow\">2325</a>               \".$|()[{^?*+\\\\\".<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#String.indexOf%28int%29\" rel=\"nofollow\" title=\"java.lang.String.indexOf(int) : int\">indexOf</a>(ch = regex.<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#String.charAt%28int%29\" rel=\"nofollow\" title=\"java.lang.String.charAt(int) : char\">charAt</a>(0)) == -1) ||<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2326\" rel=\"nofollow\">2326</a>               (regex.<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#String.length%28%29\" rel=\"nofollow\" title=\"java.lang.String.length() : int\">length</a>() == 2 &amp;&amp;<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2327\" rel=\"nofollow\">2327</a>                regex.<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#String.charAt%28int%29\" rel=\"nofollow\" title=\"java.lang.String.charAt(int) : char\">charAt</a>(0) == '\\\\' &amp;&amp;<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2328\" rel=\"nofollow\">2328</a>                (((ch = regex.<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#String.charAt%28int%29\" rel=\"nofollow\" title=\"java.lang.String.charAt(int) : char\">charAt</a>(1))-'0')|('9'-ch)) &lt; 0 &amp;&amp;<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2329\" rel=\"nofollow\">2329</a>                ((ch-'a')|('z'-ch)) &lt; 0 &amp;&amp;<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2330\" rel=\"nofollow\">2330</a>                ((ch-'A')|('Z'-ch)) &lt; 0)) &amp;&amp;<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2331\" rel=\"nofollow\">2331</a>              (ch &lt; Character.MIN_HIGH_SURROGATE ||<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2332\" rel=\"nofollow\">2332</a>               ch > Character.MAX_LOW_SURROGATE))<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2333\" rel=\"nofollow\">2333</a>          {<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2334\" rel=\"nofollow\">2334</a>              <b>int</b> off = 0;<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2335\" rel=\"nofollow\">2335</a>              <b>int</b> next = 0;<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2336\" rel=\"nofollow\">2336</a>              <b>boolean</b> limited = limit > 0;<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2337\" rel=\"nofollow\">2337</a>              <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/util/ArrayList.java#ArrayList\" rel=\"nofollow\" title=\"java.util.ArrayList\">ArrayList</a>&lt;<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#String\" rel=\"nofollow\" title=\"java.lang.String\">String</a>> list = <b>new</b> <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/util/ArrayList.java#ArrayList\" rel=\"nofollow\" title=\"java.util.ArrayList\">ArrayList</a>&lt;>();<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2338\" rel=\"nofollow\">2338</a>              <b>while</b> ((next = <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#String.indexOf%28int%2Cint%29\" rel=\"nofollow\" title=\"java.lang.String.indexOf(int,int) : int\">indexOf</a>(ch, off)) != -1) {<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2339\" rel=\"nofollow\">2339</a>                  <b>if</b> (!limited || list.<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/util/ArrayList.java#ArrayList.size%28%29\" rel=\"nofollow\" title=\"java.util.ArrayList.size() : int\">size</a>() &lt; limit - 1) {<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2340\" rel=\"nofollow\">2340</a>                      list.<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/util/ArrayList.java#ArrayList.add%28java.lang.String%29\" rel=\"nofollow\" title=\"java.util.ArrayList.add(java.lang.String) : boolean\">add</a>(<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#String.substring%28int%2Cint%29\" rel=\"nofollow\" title=\"java.lang.String.substring(int,int) : String\">substring</a>(off, next));<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2341\" rel=\"nofollow\">2341</a>                      off = next + 1;<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2342\" rel=\"nofollow\">2342</a>                  } <b>else</b> {    // last one<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2343\" rel=\"nofollow\">2343</a>                      //assert (list.size() == limit - 1);<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2344\" rel=\"nofollow\">2344</a>                      list.<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/util/ArrayList.java#ArrayList.add%28java.lang.String%29\" rel=\"nofollow\" title=\"java.util.ArrayList.add(java.lang.String) : boolean\">add</a>(<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#String.substring%28int%2Cint%29\" rel=\"nofollow\" title=\"java.lang.String.substring(int,int) : String\">substring</a>(off, value.length));<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2345\" rel=\"nofollow\">2345</a>                      off = value.length;<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2346\" rel=\"nofollow\">2346</a>                      <b>break</b>;<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2347\" rel=\"nofollow\">2347</a>                  }<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2348\" rel=\"nofollow\">2348</a>              }<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2349\" rel=\"nofollow\">2349</a>              // If no match was found, return this<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2350\" rel=\"nofollow\">2350</a>              <b>if</b> (off == 0)<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2351\" rel=\"nofollow\">2351</a>                  <b>return</b> <b>new</b> <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#String\" rel=\"nofollow\" title=\"java.lang.String\">String</a>[]{<b>this</b>};<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2353\" rel=\"nofollow\">2353</a>              // Add remaining segment<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2354\" rel=\"nofollow\">2354</a>              <b>if</b> (!limited || list.<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/util/ArrayList.java#ArrayList.size%28%29\" rel=\"nofollow\" title=\"java.util.ArrayList.size() : int\">size</a>() &lt; limit)<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2355\" rel=\"nofollow\">2355</a>                  list.<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/util/ArrayList.java#ArrayList.add%28java.lang.String%29\" rel=\"nofollow\" title=\"java.util.ArrayList.add(java.lang.String) : boolean\">add</a>(<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#String.substring%28int%2Cint%29\" rel=\"nofollow\" title=\"java.lang.String.substring(int,int) : String\">substring</a>(off, value.length));<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2357\" rel=\"nofollow\">2357</a>              // Construct result<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2358\" rel=\"nofollow\">2358</a>              <b>int</b> resultSize = list.<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/util/ArrayList.java#ArrayList.size%28%29\" rel=\"nofollow\" title=\"java.util.ArrayList.size() : int\">size</a>();<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2359\" rel=\"nofollow\">2359</a>              <b>if</b> (limit == 0) {<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2360\" rel=\"nofollow\">2360</a>                  <b>while</b> (resultSize > 0 &amp;&amp; list.<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/util/ArrayList.java#ArrayList.get%28int%29\" rel=\"nofollow\" title=\"java.util.ArrayList.get(int) : String\">get</a>(resultSize - 1).<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#String.length%28%29\" rel=\"nofollow\" title=\"java.lang.String.length() : int\">length</a>() == 0) {<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2361\" rel=\"nofollow\">2361</a>                      resultSize--;<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2362\" rel=\"nofollow\">2362</a>                  }<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2363\" rel=\"nofollow\">2363</a>              }<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2364\" rel=\"nofollow\">2364</a>              <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#String%5B%5D\" rel=\"nofollow\" title=\"java.lang.String[]\">String</a>[] result = <b>new</b> <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#String\" rel=\"nofollow\" title=\"java.lang.String\">String</a>[resultSize];<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2365\" rel=\"nofollow\">2365</a>              <b>return</b> list.<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/util/ArrayList.java#ArrayList.subList%28int%2Cint%29\" rel=\"nofollow\" title=\"java.util.ArrayList.subList(int,int) : List\">subList</a>(0, resultSize).<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/util/List.java#List.toArray%28java.lang.String%5B%5D%29\" rel=\"nofollow\" title=\"java.util.List.toArray(java.lang.String[]) : String[]\">toArray</a>(result);<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2366\" rel=\"nofollow\">2366</a>          }<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2367\" rel=\"nofollow\">2367</a>          <b>return</b> Pattern.<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/util/regex/Pattern.java#Pattern.compile%28java.lang.String%29\" rel=\"nofollow\" title=\"java.util.regex.Pattern.compile(java.lang.String) : Pattern\">compile</a>(regex).<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/util/regex/Pattern.java#Pattern.split%28java.lang.CharSequence%2Cint%29\" rel=\"nofollow\" title=\"java.util.regex.Pattern.split(java.lang.CharSequence,int) : String[]\">split</a>(<b>this</b>, limit);<br/><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#2368\" rel=\"nofollow\">2368</a>      }<br/><br/></pre>\n\n<p>where you can find </p>\n\n<pre><code>if (off == 0)\n    return new String[]{this};\n</code></pre>\n\n<p>fragment which means </p>\n\n<ul>\n<li><code>if (off == 0)</code> - if <code>off</code> (position from which method should start search next possible match for regex passed as <code>split</code> argument) is <em>still</em> <code>0</code> after iterating over entire string, this means method didn't find any match, so the string was not split</li>\n<li><code>return new String[]{this};</code> in that case let's just return an array with the origina/current (<code>this</code>) string.</li>\n</ul>\n\n<p>Since <code>\",\"</code> couldn't be found in <code>\"\"</code> even once, <code>\"\".split(\",\")</code> must return an array with one element (empty string on which you invoked <code>split</code>). This means that the length of this array is <code>1</code>.</p>\n", "title": "Confusing output from String.split", "tags": ["java", "regex", "string", "class", "core"], "link": "http://stackoverflow.com/questions/25056607/confusing-output-from-string-split/25058091#25058091", "question_id": 25056607, "answer_id": 25058091}], "creation_date": 1406802495, "score": 49, "link": "http://stackoverflow.com/questions/25056607/confusing-output-from-string-split", "question_id": 25056607}, {"body": "<p>I was being taught that Marker interface in Java is an empty interface and is used to signal to compiler or JVM that the objects of the class implementing this interface must be treated in a special way, like serializing, cloning, etc.</p>\n\n<p>But lately I have learned that it actually has nothing to do with the compiler or the JVM. For example, in case of <code>Serializable</code> interface the method <code>writeObject(Object)</code> of <code>ObjectOutputStream</code> does something like <code>instanceOf Serializable</code> to detect whether the class implements <code>Serializable</code> &amp; throws <code>NotSerializableException</code> accordingly.\nEverything is handled in the code and this seems to be a design-pattern so I think we can define our own marker interfaces.</p>\n\n<p>Now my doubts:</p>\n\n<ol>\n<li><p>Is the definition of a marker interface mentioned above in 1st point wrong? How can we define a Marker interface then?</p></li>\n<li><p>And instead of using the <code>instanceOf</code> operator why can't the method be something like <code>writeObject(Serializable)</code> so that there is a compile-time type checking rather than runtime?</p></li>\n<li><p>How are Annotations better than Marker Interfaces?</p></li>\n</ol>\n", "tags": ["java", "design-patterns", "marker-interfaces"], "title": "Marker Interfaces in Java?", "answers": [{"body": "<p>It is not possible to enforce <code>Serializable</code> on <code>writeObject</code> because children of non-serializable class can be serializable, but they instances may be upcasted back to the parent class. As a result, holding a reference to something non-serializable (like <code>Object</code>) does not mean that the referred instance really cannot be serialized. For instance in</p>\n\n<pre><code>   Object x = \"abc\";\n   if (x instanceof Serializable) {\n   }\n</code></pre>\n\n<p>the parent class (<code>Object</code>) is not serializable and would be initialized using its parameter-less constructor. The value referenced by <code>x</code>, <code>String</code>, is serializable and the conditional statement would run.</p>\n", "title": "Marker Interfaces in Java?", "tags": ["java", "design-patterns", "marker-interfaces"], "link": "http://stackoverflow.com/questions/25850328/marker-interfaces-in-java/25850492#25850492", "question_id": 25850328, "answer_id": 25850492}, {"body": "<ol>\n<li><p>It has nothing to do (necessarily) with the JVM and the compilers,\nit has something to do with any code which is interested in and is\ntesting for a given marker interface.</p></li>\n<li><p>It's a design decision and it's done for a good reason. See the\nanswer from Audrius Me\u0161kauskas.</p></li>\n<li><p>With respect to this particular topic, I don't think it's a matter\nof being better or worse. The marker interface is doing what it's\nsupposed to do just fine.</p></li>\n</ol>\n", "title": "Marker Interfaces in Java?", "tags": ["java", "design-patterns", "marker-interfaces"], "link": "http://stackoverflow.com/questions/25850328/marker-interfaces-in-java/25850497#25850497", "question_id": 25850328, "answer_id": 25850497}, {"body": "<ol>\n<li><strong>Is the definition of a marker interface mentioned above in 1st point wrong?</strong> - It is correct in the parts that (1) a marker interface must be empty, and (2) implementing it is meant to imply some special treatment of the implementing class. The part that is incorrect is that it implies that JVM or the compiler would treat the objects of that class differently: you are correct in observing that it is the code of Java class library that treats these objects as cloneable, serializable, etc. It has nothing to do with the compiler or the JVM.</li>\n<li><strong>instead of using the instanceOf operator why can't the method be something like <code>writeObject(Serializable)</code> so that there is a compile-time type checking</strong> - This lets you avoid polluting your code with the name of the marker interface when a \"plain <code>Object</code>\" is needed. For example, if you make a class that needs to be serializable, and has object members, you would be forced to either do casting or make your objects <code>Serializable</code> at compile time. This is inconvenient, because the interface is devoid of any functionality.</li>\n<li><strong>How Annotations are better than Marker Interfaces?</strong> - They let you achieve the same purpose of conveying metadata about the class to its consumers without creating a separate type for it. Annotations are more powerful, too, letting programmers pass more sophisticated information to classes that \"consume\" it.</li>\n</ol>\n", "title": "Marker Interfaces in Java?", "tags": ["java", "design-patterns", "marker-interfaces"], "link": "http://stackoverflow.com/questions/25850328/marker-interfaces-in-java/25850576#25850576", "question_id": 25850328, "answer_id": 25850576}, {"body": "<p>a. \nI have always seen them as a design pattern and nothing JVM-Special I have used that pattern in several situations.</p>\n\n<p>c. \nI beleive that using Annotations to mark something is a better solution then using marker interfaces. Simply because Interfaces are in the first place aimed to define common interfaces of Types / Classes. They are part of the class-hierachy.</p>\n\n<p>Annotations are aimed to provide Meta-Informations to Code, and I think that marker are meta-informations. So they are exactly for that use-case.</p>\n", "title": "Marker Interfaces in Java?", "tags": ["java", "design-patterns", "marker-interfaces"], "link": "http://stackoverflow.com/questions/25850328/marker-interfaces-in-java/25850622#25850622", "question_id": 25850328, "answer_id": 25850622}, {"body": "<p>a/ A marker interface as its name suggest exists only to notify <em>anything that knows about it</em> that a class declares something. The anything can be the JDK classes for the <code>Serializable</code> interface, or any class you write yoursel for a custom one.</p>\n\n<p>b/ If it is a marker interface, it should not imply the existence of any method - it would be better to include the implied method in the interface. But you can decide to design it as you want if you know <em>why</em> <strong>you</strong> need it</p>\n\n<p>c/ There is little difference between an empty interface and an annotation that uses no value or parameter. But the difference is there : an annotation can declare a list of keys/values that will be accessible at run time.</p>\n", "title": "Marker Interfaces in Java?", "tags": ["java", "design-patterns", "marker-interfaces"], "link": "http://stackoverflow.com/questions/25850328/marker-interfaces-in-java/25850713#25850713", "question_id": 25850328, "answer_id": 25850713}, {"body": "<p>I would argue first-off that Serializable and Cloneable are bad examples of marker interfaces. Sure, they're interfaces with methods, but they <em>imply</em> methods, such as <code>writeObject(ObjectOutputStream)</code>. (The compiler will create a <code>writeObject(ObjectOutputStream)</code> method for you if you don't override it, and all objects already have <code>clone()</code>, but the compiler will again create a real <code>clone()</code> method for you but with caveats. Both of these are weird edge cases that really aren't good design examples.)</p>\n\n<p>Marker interfaces are generally used for one of two purposes:</p>\n\n<p>1) As a shortcut to avoid an excessively long type, which can happen with lots of generics. For instance, say you have this method signature:</p>\n\n<pre><code>public void doSomething(Foobar&lt;String, Map&lt;String, SomethingElse&lt;Integer, Long&gt;&gt;&gt;) { ... }\n</code></pre>\n\n<p>That's messy and annoying to type, and more importantly, difficult to understand. Consider this instead:</p>\n\n<pre><code>public interface Widget extends Foobar&lt;String, Map&lt;String, SomethingElse&lt;Integer, Long&gt;&gt;&gt; { }\n</code></pre>\n\n<p>Then your method looks like this:</p>\n\n<pre><code>public void doSomething(Widget widget) { ... }\n</code></pre>\n\n<p>Not only is it clearer, but you can now Javadoc the Widget interface, and it's also easier to search for all occurrences in your code of Widget.</p>\n\n<p>2) Marker interfaces can also be used as a way around Java's lack of intersection types. With a marker interface, you can require something to be of two different types, such as in a method signature. Say you have some interface Widget in your application, like we described above. If you have a method that requires a Widget that also happens to let you iterate over it (it's contrived, but work with me here), your only good solution is to create a marker interface that extends both interfaces:</p>\n\n<pre><code>public interface IterableWidget extends Iterable&lt;String&gt;, Widget { }\n</code></pre>\n\n<p>And in your code:</p>\n\n<pre><code>public void doSomething(IterableWidget widget) {\n    for (String s : widget) { ... }\n}\n</code></pre>\n", "title": "Marker Interfaces in Java?", "tags": ["java", "design-patterns", "marker-interfaces"], "link": "http://stackoverflow.com/questions/25850328/marker-interfaces-in-java/25853827#25853827", "question_id": 25850328, "answer_id": 25853827}, {"body": "<p>Marker interface in Java is interfaces with no field or methods or in simple word empty interface in java is called marker interface. Example of market interface is Serializable, Clonnable and Remote interface.These are used to indicate something to compiler or JVM. So if JVM sees a Class is Serializable it done some special operation on it, similar way if JVM sees one Class is implement Clonnable it performs some operation to support cloning. Same is true for RMI and Remote interface. So in short Marker interface indicate, signal or a command to Compiler or JVM.</p>\n", "title": "Marker Interfaces in Java?", "tags": ["java", "design-patterns", "marker-interfaces"], "link": "http://stackoverflow.com/questions/25850328/marker-interfaces-in-java/27497401#27497401", "question_id": 25850328, "answer_id": 27497401}, {"body": "<p>The main purpose of marker interfaces is to create special types where types themselves have no behavior of their own. </p>\n\n<pre><code>public interface MarkerEntity {\n\n}\n\npublic boolean save(Object object) throws InvalidEntityFoundException {\n   if(!(object instanceof MarkerEntity)) {\n       throw new InvalidEntityFoundException(\"Invalid Entity Found, can't be  saved);\n   } \n   return db.save(object);\n}\n</code></pre>\n\n<p>Here save method makes sure that only the objects of classes that implement the MarkerEntity interface are saved, for other types InvalidEntityFoundException is thrown. So here MarkerEntity marker interface is defining a type that adds special behavior to the classes implementing it.</p>\n\n<p>Though annotations can also used now to mark classes for some special treatments but marker annotations are replacement for naming pattern not for Marker interfaces. </p>\n\n<p>But marker annotations can't fully replace the marker interfaces because; marker interfaces are used to define type (as already explained above) where as marker annotations do not.</p>\n\n<p><a href=\"http://netjs.blogspot.com/2015/05/marker-interface-in-java.html\" rel=\"nofollow\">Source for marker interface comment</a></p>\n", "title": "Marker Interfaces in Java?", "tags": ["java", "design-patterns", "marker-interfaces"], "link": "http://stackoverflow.com/questions/25850328/marker-interfaces-in-java/31838310#31838310", "question_id": 25850328, "answer_id": 31838310}, {"body": "<p>If a interface does not contain any method and by implimenting that interface if our object will get some ability such type of interfaces are called marker itarfaces.</p>\n", "title": "Marker Interfaces in Java?", "tags": ["java", "design-patterns", "marker-interfaces"], "link": "http://stackoverflow.com/questions/25850328/marker-interfaces-in-java/37532535#37532535", "question_id": 25850328, "answer_id": 37532535}], "creation_date": 1410791045, "score": 49, "link": "http://stackoverflow.com/questions/25850328/marker-interfaces-in-java", "question_id": 25850328}, {"body": "<p>Why does</p>\n\n<pre><code>char ch = '4';\nch = '4' + 2;\n</code></pre>\n\n<p>work, but</p>\n\n<pre><code>char ch = '4';\nch = ch  + 2;\n</code></pre>\n\n<p>doesn't?</p>\n", "tags": ["java"], "title": "Why can&#39;t you add an int and a char in some cases?", "answers": [{"body": "<p>To understand this, lets consider what the compiler does at each step for both possibilities.  Lets start with:</p>\n\n<pre><code>ch = '4' + 2;\n</code></pre>\n\n<p>The compiler converts '4' to an int.  So it becomes</p>\n\n<pre><code>ch = 52 + 2;\n</code></pre>\n\n<p>Which the compiler then turns into</p>\n\n<pre><code>ch = 54;\n</code></pre>\n\n<p>ch is a char, and the compiler is allowed to convert 54 to a char as it can prove that there is no loss in the conversion. </p>\n\n<p>Now lets consider the second version:</p>\n\n<pre><code>ch = ch  + 2;\n</code></pre>\n\n<p>ch has no known value at compile time.  Thus this becomes</p>\n\n<pre><code>ch = ((int) ch) + 2;\n</code></pre>\n\n<p>Now the compiler cannot prove that the result of this (an int) is storable within the range of a char.  So it will <strong>not</strong> automatically narrow it, and reports it as an error.</p>\n\n<p>EDIT1:</p>\n\n<p>If the compiler can prove that the variable will never change, and is inlineable.  Then the second form can be turned into the first.   Subir pointed out that adding 'final' makes this possible.  Although if a compiler was to perform change analysis then it is technically capable of figuring this out without the final keyword, but final does make it easier for the compiler and readers of the code.</p>\n\n<p>EDIT2: </p>\n\n<p>Narrowing of int to char is covered in the <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-5.html#jls-5.2\">Java Language Spec</a>, the link was kindly provided by Jon Skeet.</p>\n", "title": "Why can&#39;t you add an int and a char in some cases?", "tags": ["java"], "link": "http://stackoverflow.com/questions/24608241/why-cant-you-add-an-int-and-a-char-in-some-cases/24608407#24608407", "question_id": 24608241, "answer_id": 24608407}], "creation_date": 1404728210, "score": 49, "link": "http://stackoverflow.com/questions/24608241/why-cant-you-add-an-int-and-a-char-in-some-cases", "question_id": 24608241}, {"body": "<h1>Question</h1>\n\n<p>Suppose you have a large ASCII text file, with a random non-negative integer on each line, each in the range from 0 to 1,000,000,000. There are 100,000,000 lines in the file. What's the fastest way to read through the file and calculate the sum of all the integers?</p>\n\n<p>Constraint: we've got 10MB of RAM to work with. The file is 1GB in size, so we don't want to read the whole thing in and then process it.</p>\n\n<p>Here are various solutions I've tried. I found the results rather surprising.</p>\n\n<p>Is there anything faster that I've missed?</p>\n\n<p><strong>Please note:</strong> all timings given below are for running the algorithm <strong>10 times</strong> in total (run once and discard; start timer; run 10 times; stop timer). The machine is a fairly slow Core 2 Duo.</p>\n\n<h1>Method 1: the natural approach</h1>\n\n<p>The first thing to try is the obvious approach:</p>\n\n<pre><code>private long sumLineByLine() throws NumberFormatException, IOException {\n    BufferedReader br = new BufferedReader(new FileReader(file));\n    String line;\n    long total = 0;\n    while ((line = br.readLine()) != null) {\n        int k = Integer.parseInt(line);\n        total += k;\n    }\n    br.close();\n    return total;\n}\n</code></pre>\n\n<p>Note that the maximum possible return value is 10^17, which still easily fits in a <code>long</code>, so we don't have to worry about overflows.</p>\n\n<p>On my machine, running this 11 times and discounting the first run takes around <strong>92.9 seconds</strong>.</p>\n\n<h1>Method 2: a minor tweak</h1>\n\n<p>Inspired by a comment on <a href=\"http://stackoverflow.com/questions/25595844/optimal-solution-for-reading-from-file\">this question</a>, I tried not creating a new <code>int k</code> to store the result of parsing the line, and instead just to add the parsed value directly to <code>total</code>. So this:</p>\n\n<pre><code>    while ((line = br.readLine()) != null) {\n        int k = Integer.parseInt(line);\n        total += k;\n    }\n</code></pre>\n\n<p>becomes this:</p>\n\n<pre><code>    while ((line = br.readLine()) != null)\n        total += Integer.parseInt(line);\n</code></pre>\n\n<p>I was certain that this wouldn't make any difference, and thought it highly likely that the compiler would generate the same bytecode for the two versions. But, to my surprise, it did shave a little time off: we're down to <strong>92.1 seconds</strong>.</p>\n\n<h1>Method 3: manually parsing the integer</h1>\n\n<p>One thing that bothers me about the code so far is that we turn the <code>String</code> into an <code>int</code>, and then add it on at the end. Might it not be quicker to add on as we go? What happens if we parse the <code>String</code> ourselves? Something like this...</p>\n\n<pre><code>private long sumLineByLineManualParse() throws NumberFormatException,\n        IOException {\n    BufferedReader br = new BufferedReader(new FileReader(file));\n    String line;\n    long total = 0;\n    while ((line = br.readLine()) != null) {\n        char chs[] = line.toCharArray();\n        int mul = 1;\n        for (int i = chs.length - 1; i &gt;= 0; i--) {\n            char c = chs[i];\n            switch (c) {\n            case '0':\n                break;\n            case '1':\n                total += mul;\n                break;\n            case '2':\n                total += (mul &lt;&lt; 1);\n                break;\n            case '4':\n                total += (mul &lt;&lt; 2);\n                break;\n            case '8':\n                total += (mul &lt;&lt; 3);\n                break;\n            default:\n                total += (mul*((byte) c - (byte) ('0')));   \n            }\n            mul*=10;\n        }\n    }\n    br.close();\n    return total;\n}\n</code></pre>\n\n<p>This, I thought, might save a little time, especially with some bitshift optimisations for doing the multiplication. But the overheads of converting to a character array must swamp any gains: this now takes <strong>148.2 seconds</strong>.</p>\n\n<h1>Method 4: processing in binary</h1>\n\n<p>One last thing we can try is to process the file as binary data.</p>\n\n<p>Parsing an integer from the front is awkward if you don't know the length of it. Parsing it backwards is much easier: the first digit you encounter is units, the next one is tens, and so on. So the easiest way to approach the whole thing is to read the file backwards.</p>\n\n<p>If we allocate a <code>byte[]</code> buffer of (say) 8MB, we can fill it up with the last 8MB of the file, process it, then read the preceding 8MB, and so on. We need to be a little careful that we don't screw up a number that we're in the middle of parsing when we move to the next block, but that's the only problem.</p>\n\n<p>When we encounter a digit, we add it (suitably multiplied according to its position in the numeral) to the total, and then multiply the coefficient by 10 so we're ready for the next digit. If we encounter anything that isn't a digit (a CR or LF), we just reset the coefficient.</p>\n\n<pre><code>private long sumBinary() throws IOException {\n    RandomAccessFile raf = new RandomAccessFile(file, \"r\");\n    int lastRead = (int) raf.length();\n    byte buf[] = new byte[8*1024*1024];\n    int mul = 1;\n    long total = 0;\n    while (lastRead&gt;0) {\n        int len = Math.min(buf.length, lastRead);\n        raf.seek(lastRead-len);\n        raf.readFully(buf, 0, len);\n        lastRead-=len;\n        for (int i=len-1; i&gt;=0; i--) {\n            //48 is '0' and 57 is '9'\n            if ((buf[i]&gt;=48) &amp;&amp; (buf[i]&lt;=57)) {\n                total+=mul*(buf[i]-48);\n                mul*=10;\n            } else\n                mul=1;\n        }\n    }\n    raf.close();\n    return total;\n}\n</code></pre>\n\n<p>This runs in <strong>30.8 seconds</strong>! That's a <strong>speed increase by a factor of 3</strong> over the previous best.</p>\n\n<h1>Follow-up questions</h1>\n\n<ol>\n<li><strong>Why is this so much faster?</strong> I was expecting it to win, but not quite so impressively. Is it mainly the overheads of converting to a <code>String</code>? And all the worrying behind the scenes about character sets and the like?</li>\n<li>Can we do any better than this by using a <code>MappedByteBuffer</code> to help? I have a feeling that the overheads of invoking methods to read from the buffer would slow things down, especially when reading backwards from the buffer.</li>\n<li>Would it be better to read the file forwards rather than backwards, but still scan the buffer backwards? The idea would be that you read the first chunk of the file, and then scan backwards, but discarding the half-number at the end. Then when you read the next chunk, you set the offset so that you read from the beginning of the number you discarded.</li>\n<li>Is there anything I haven't thought of that could make a significant difference?</li>\n</ol>\n\n<h1>Update: more surprising results</h1>\n\n<p>First, an observation. It should have occurred to me before, but I think the reason for the inefficiency of the <code>String</code>-based reading is not so much the time taken to create all the <code>String</code> objects but the fact that they are so short-lived: we've got 100,000,000 of them for the garbage collector to deal with. That is bound to upset it.</p>\n\n<p>Now some experiments based on answers/comments people have posted.</p>\n\n<h2>Am I cheating with the size of the buffer?</h2>\n\n<p>One suggestion was that since a <code>BufferedReader</code> uses a default buffer of 16KB, and I've used a buffer of 8MB, I'm not comparing like with like. It's bound to be faster if you use a bigger buffer.</p>\n\n<p>Here's the shock. The <code>sumBinary()</code> method (Method 4) ran in 30.8 seconds yesterday with an 8MB buffer. Today, code unchanged, the wind direction has changed and we're at 30.4 seconds. If I drop the buffer size down to 16KB to see how much slower it gets, <strong>it gets faster!</strong> It now runs in <strong>23.7 seconds</strong>. Crazy. Who saw that one coming?!</p>\n\n<p>A bit of experimentation suggests that 16KB is about optimal. Perhaps the Java guys did the same experiments, and that's why they went with 16KB!</p>\n\n<h2>Is the problem I/O-bound?</h2>\n\n<p>I wondered about this too. How much time is spent on disk access, and how much on number crunching? If it's almost all disk access, as suggested by a well-supported comment on one of the proposed answers, then we won't be able to make much improvement whatever we do.</p>\n\n<p>This is easy to test by running the code with all the parsing and number crunching commented out, but with the reading still intact:</p>\n\n<pre><code>private long sumBinary() throws IOException {\n    RandomAccessFile raf = new RandomAccessFile(file, \"r\");\n    int lastRead = (int) raf.length();\n    byte buf[] = new byte[16 * 1024];\n    int mul = 1;\n    long total = 0;\n    while (lastRead &gt; 0) {\n        int len = Math.min(buf.length, lastRead);\n        raf.seek(lastRead - len);\n        raf.readFully(buf, 0, len);\n        lastRead -= len;\n        /*for (int i = len - 1; i &gt;= 0; i--) {\n            if ((buf[i] &gt;= 48) &amp;&amp; (buf[i] &lt;= 57)) {\n                total += mul * (buf[i] - 48);\n                mul *= 10;\n            } else\n                mul = 1;\n        }*/\n    }\n    raf.close();\n    return total;\n}\n</code></pre>\n\n<p>This now runs in <strong>3.7 seconds</strong>! This doesn't look I/O-bound to me.</p>\n\n<p>Of course, some of the I/O speed will come from disk cache hits. But that isn't really the point here: we're still taking 20 seconds of CPU time (also confirmed using Linux's <code>time</code> command), which is plenty big enough to try to reduce it.</p>\n\n<h2>Scanning forwards instead of backwards</h2>\n\n<p>I'd maintained in my original post that there was good reason to scan the file backwards rather than forwards. I didn't explain that very well. The idea was that if you scan a number forwards, you have to accumulate the total value of the scanned number, and then add it on. If you scan backwards, you can add it to the cumulative total as you go. My subconscious was making some sort of sense to itself (on which more later), but I'd missed one key point, which was pointed out in one of the answers: to scan backwards, I was doing two multiplications per iteration, but with scanning forwards you need only one. So I coded up a forward-scanning version:</p>\n\n<pre><code>private long sumBinaryForward() throws IOException {\n    RandomAccessFile raf = new RandomAccessFile(file, \"r\");\n    int fileLength = (int) raf.length();\n    byte buf[] = new byte[16 * 1024];\n    int acc = 0;\n    long total = 0;\n    int read = 0;\n    while (read &lt; fileLength) {\n        int len = Math.min(buf.length, fileLength - read);\n        raf.readFully(buf, 0, len);\n        read += len;\n        for (int i = 0; i &lt; len; i++) {\n            if ((buf[i] &gt;= 48) &amp;&amp; (buf[i] &lt;= 57))\n                acc = acc * 10 + buf[i] - 48;\n            else {\n                total += acc;\n                acc = 0;\n            }\n        }\n    }\n    raf.close();\n    return total;\n}\n</code></pre>\n\n<p>This runs in <strong>20.0 seconds</strong>, beating the backward-scanning version by a distance. Nice.</p>\n\n<h2>Multiplication cache</h2>\n\n<p>What I realised during the night, though, was that although I was performing two multiplications per iteration, there was the possibility of using a cache to store these multiplications, so that I could avoid having to perform them during backwards iteration. I was pleased to see when I woke up that someone had had the same idea!</p>\n\n<p>The point is that there are at most 10 digits in the numbers we're scanning, and only 10 possible digits, so only 100 possibilities for the value of a digit to the cumulative total. We can precompute these, and then use them in the backward-scanning code. That ought to beat the forward-scanning version, because we've now got rid of the multiplications entirely. (Note that we can't do this with forward scanning, because the multiplication is of the accumulator, which could take any value up to 10^9. It's only in the backward case that both operands are limited to a few possibilities.)</p>\n\n<pre><code>private long sumBinaryCached() throws IOException {\n    int mulCache[][] = new int[10][10];\n    int coeff = 1;\n    for (int i = 0; i &lt; 10; i++) {\n        for (int j = 0; j &lt; 10; j++)\n            mulCache[i][j] = coeff * j;\n        coeff *= 10;\n    }\n\n    RandomAccessFile raf = new RandomAccessFile(file, \"r\");\n    int lastRead = (int) raf.length();\n    byte buf[] = new byte[16 * 1024];\n    int mul = 0;\n    long total = 0;\n    while (lastRead &gt; 0) {\n        int len = Math.min(buf.length, lastRead);\n        raf.seek(lastRead - len);\n        raf.readFully(buf, 0, len);\n        lastRead -= len;\n        for (int i = len - 1; i &gt;= 0; i--) {\n            if ((buf[i] &gt;= 48) &amp;&amp; (buf[i] &lt;= 57))\n                total += mulCache[mul++][buf[i] - 48];\n            else\n                mul = 0;\n        }\n    }\n    raf.close();\n    return total;\n}\n</code></pre>\n\n<p>This runs in <strong>26.1 seconds</strong>. Disappointing, to say the least. Reading backwards is less efficient in terms of I/O, but we've seen that I/O is not the major headache here. I had expected this to make a big positive difference. Perhaps the array lookup is just as expensive as the multiplications we've replaced. (I did try making the array 16x16, and using bitshifts to index, but it didn't help.)</p>\n\n<p>Looks like forward scanning is where it's at.</p>\n\n<h2>Using a MappedByteBuffer</h2>\n\n<p>Next thing to add in is a <code>MappedByteBuffer</code>, to see if that's more efficient than using a raw <code>RandomAccessFile</code>. It doesn't need much change to the code.</p>\n\n<pre><code>private long sumBinaryForwardMap() throws IOException {\n    RandomAccessFile raf = new RandomAccessFile(file, \"r\");\n    byte buf[] = new byte[16 * 1024];\n    final FileChannel ch = raf.getChannel();\n    int fileLength = (int) ch.size();\n    final MappedByteBuffer mb = ch.map(FileChannel.MapMode.READ_ONLY, 0,\n            fileLength);\n    int acc = 0;\n    long total = 0;\n    while (mb.hasRemaining()) {\n        int len = Math.min(mb.remaining(), buf.length);\n        mb.get(buf, 0, len);\n        for (int i = 0; i &lt; len; i++)\n            if ((buf[i] &gt;= 48) &amp;&amp; (buf[i] &lt;= 57))\n                acc = acc * 10 + buf[i] - 48;\n            else {\n                total += acc;\n                acc = 0;\n            }\n    }\n    ch.close();\n    raf.close();\n    return total;\n}\n</code></pre>\n\n<p>This does seem to improve things a little: we're now at <strong>19.0 seconds</strong>. We've taken another second off our personal best!</p>\n\n<h2>What about multi-threading?</h2>\n\n<p>One of the proposed answers involves using multiple cores. I'm a little ashamed that that hadn't occurred to me!</p>\n\n<p>The answer came in for some stick, because of the assumption that it's an I/O-bound problem. This seems a little harsh, in light of the results about I/O! Certainly worth a try, in any case.</p>\n\n<p>We'll do this using fork/join. Here's a class to represent the result of a computation on part of the file, bearing in mind that there might be a partial result to the left (if we started half way through a number), and a partial result to the right (if the buffer finished half way through a number). The class also has a method for allowing us to glue two such results together, into a combined result for two adjacent sub-tasks.</p>\n\n<pre><code>private class SumTaskResult {\n    long subtotal;\n    int leftPartial;\n    int leftMulCount;\n    int rightPartial;\n\n    public void append(SumTaskResult rightward) {\n        subtotal += rightward.subtotal + rightPartial\n                * rightward.leftMulCount + rightward.leftPartial;\n        rightPartial = rightward.rightPartial;\n    }\n}\n</code></pre>\n\n<p>Now the key bit: the <code>RecursiveTask</code> that computes the result. For small problems (less than 64 characters), it calls <code>computeDirectly()</code> to calculate the result in a single thread; for larger problems, it splits into two, solves the two sub-problems in separate threads, and then combines the results.</p>\n\n<pre><code>private class SumForkTask extends RecursiveTask&lt;SumTaskResult&gt; {\n\n    private byte buf[];\n    // startPos inclusive, endPos exclusive\n    private int startPos;\n    private int endPos;\n\n    public SumForkTask(byte buf[], int startPos, int endPos) {\n        this.buf = buf;\n        this.startPos = startPos;\n        this.endPos = endPos;\n    }\n\n    private SumTaskResult computeDirectly() {\n        SumTaskResult result = new SumTaskResult();\n        int pos = startPos;\n\n        result.leftMulCount = 1;\n\n        while ((buf[pos] &gt;= 48) &amp;&amp; (buf[pos] &lt;= 57)) {\n            result.leftPartial = result.leftPartial * 10 + buf[pos] - 48;\n            result.leftMulCount *= 10;\n            pos++;\n        }\n\n        int acc = 0;\n        for (int i = pos; i &lt; endPos; i++)\n            if ((buf[i] &gt;= 48) &amp;&amp; (buf[i] &lt;= 57))\n                acc = acc * 10 + buf[i] - 48;\n            else {\n                result.subtotal += acc;\n                acc = 0;\n            }\n\n        result.rightPartial = acc;\n        return result;\n    }\n\n    @Override\n    protected SumTaskResult compute() {\n        if (endPos - startPos &lt; 64)\n            return computeDirectly();\n        int mid = (endPos + startPos) / 2;\n        SumForkTask left = new SumForkTask(buf, startPos, mid);\n        left.fork();\n        SumForkTask right = new SumForkTask(buf, mid, endPos);\n        SumTaskResult rRes = right.compute();\n        SumTaskResult lRes = left.join();\n        lRes.append(rRes);\n        return lRes;\n    }\n\n}\n</code></pre>\n\n<p>Note that this is operating on a <code>byte[]</code>, rather than the whole <code>MappedByteBuffer</code>. The reason for that is that we want to keep the disk access sequential. We'll take quite large chunks, fork/join, and then move to the next chunk.</p>\n\n<p>Here's the method that does that. Note that we've pushed the buffer size up to 1MB (sub-optimal earlier, but more sensible here, it seems).</p>\n\n<pre><code>private long sumBinaryForwardMapForked() throws IOException {\n    RandomAccessFile raf = new RandomAccessFile(file, \"r\");\n    ForkJoinPool pool = new ForkJoinPool();\n\n    byte buf[] = new byte[1 * 1024 * 1024];\n    final FileChannel ch = raf.getChannel();\n    int fileLength = (int) ch.size();\n    final MappedByteBuffer mb = ch.map(FileChannel.MapMode.READ_ONLY, 0,\n            fileLength);\n    SumTaskResult result = new SumTaskResult();\n    while (mb.hasRemaining()) {\n        int len = Math.min(mb.remaining(), buf.length);\n        mb.get(buf, 0, len);\n        SumForkTask task = new SumForkTask(buf, 0, len);\n        result.append(pool.invoke(task));\n    }\n    ch.close();\n    raf.close();\n    pool.shutdown();\n    return result.subtotal;\n}\n</code></pre>\n\n<p>Now here's the soul-destroying disappointment: this nicely multi-threaded code now takes <strong>32.2 seconds</strong>. Why so slow? I spent quite a while debugging this, assuming I'd done something terribly wrong.</p>\n\n<p>Turns out there was just one small tweak needed. I'd thought the threshold of 64 between small problem and big problem was a reasonable one; turns out that was totally ridiculous.</p>\n\n<p>Think about it like this. The sub-problems are exactly the same size, so they should complete in pretty much the same time. So there's really no point splitting into more pieces than there are processors available. On the machine I'm using, with only two cores, going down to a threshold of 64 is ridiculous: it just adds more overhead.</p>\n\n<p>Now you don't want to limit things so that it only uses two cores even when there are more available. Perhaps the right thing to do would be to find out the number of processors at runtime, and split into that many pieces.</p>\n\n<p>In any case, if I change the threshold to 512KB (half the buffer size), it now completes in <strong>13.3 seconds</strong>. Going down to 128KB or 64KB would allow more cores to be used (up to 8 or 16 respectively), and doesn't significantly affect the runtime.</p>\n\n<p>So multi-threading <strong>does</strong> make a big difference.</p>\n\n<p>It's been quite a long journey, but we started out with something that took 92.9 seconds and we're now down to 13.3 seconds... that's <strong>seven times the speed</strong> of the original code. And that's not by improving the asymptotic (big-Oh) time complexity, which was linear (optimal) right from the start... this has all been about improving the constant factor.</p>\n\n<p>A good day's work.</p>\n\n<p>I suppose I should probably try using the GPU next...</p>\n\n<h2>Postscript: generating the file of random numbers</h2>\n\n<p>I generated the random numbers with the following code, which I ran and redirected to a file. Obviously I can't guarantee that you'll end up with exactly the same random numbers that I had :)</p>\n\n<pre><code>public static void genRandoms() {\n    Random r = new Random();\n    for (int i = 0; i &lt; 100000000; i++)\n        System.out.println(r.nextInt(1000000000));\n}\n</code></pre>\n", "tags": ["java", "performance", "file-io"], "title": "Fastest way to sum integers in text file", "answers": [{"body": "<blockquote>\n  <p>Why is this so much faster?</p>\n</blockquote>\n\n<p>Creating a String is much more expensive than a little maths.</p>\n\n<blockquote>\n  <p>Can we do any better than this by using a MappedByteBuffer help?</p>\n</blockquote>\n\n<p>A little, yes.  Its what I use.  It save a memory to memory copy. i.e. no byte[] is needed.</p>\n\n<blockquote>\n  <p>I have a feeling that the overheads of invoking methods to read from the buffer would slow things down, </p>\n</blockquote>\n\n<p>The methods get inlined if they are simple.</p>\n\n<blockquote>\n  <p>especially when reading backwards from the buffer.</p>\n</blockquote>\n\n<p>It won't be any slower, in fact parsing forwards is simpler/faster because you use one <code>*</code> instead of two.</p>\n\n<blockquote>\n  <p>Would it be better to read the file forwards rather than backwards, but still scan the buffer backwards? </p>\n</blockquote>\n\n<p>I don't understand why you would need to read backward at all.</p>\n\n<blockquote>\n  <p>The idea would be that you read the first chunk of the file, and then scan backwards, but discarding the half-number at the end. Then when you read the next chunk, you set the offset so that you read from the beginning of the number you discarded.</p>\n</blockquote>\n\n<p>sounds unnecessarily complicated. I would read in a single pass, memory mapping in the entire file in one go.  No need to use chunks unless the file is 2+ GB in size. and even then I would read in one pass.</p>\n\n<blockquote>\n  <p>Is there anything I haven't thought of that could make a significant difference?</p>\n</blockquote>\n\n<p>If the data is in disk cache it will make more difference than anything else.</p>\n", "title": "Fastest way to sum integers in text file", "tags": ["java", "performance", "file-io"], "link": "http://stackoverflow.com/questions/25606833/fastest-way-to-sum-integers-in-text-file/25607002#25607002", "question_id": 25606833, "answer_id": 25607002}, {"body": "<p>I think there is another way of doing this.</p>\n\n<p>This is classical multiple process programming problem. In C language there is library MPI that solves this kinds of problems.</p>\n\n<p>The idea of it is to chunk the list of integers for example in 4 parts and every part is summed by different process. After finishing, processes are summed together.</p>\n\n<p>In java this could be done  with threads (pseudo parallel) and java concurrency.</p>\n\n<p>E.g 4 different threads summing 4 different parts of the list. At the end they are summed together.</p>\n\n<p>Telephone companies uses Grid Computers that do this kind of parallel programming technic to sum their transactions.</p>\n\n<p>The only problem here (bottleneck) is the IO operation. Reading the file will take much time. If somehow you can make multiple threads read <strong>different</strong> parts of the file... \nThis is very complicated approach and I think that this will not do much good because the disk won't spin faster just because it's used by many threads, but there are other technics of doing similar stuff. You can read more about this here: <a href=\"http://stackoverflow.com/questions/17637176/access-file-through-multiple-threads\">Access File through multiple threads</a> and here <a href=\"http://stackoverflow.com/questions/8809894/reading-a-single-file-with-multiple-thread-should-speed-up\">Reading a single file with Multiple Thread: should speed up?</a></p>\n", "title": "Fastest way to sum integers in text file", "tags": ["java", "performance", "file-io"], "link": "http://stackoverflow.com/questions/25606833/fastest-way-to-sum-integers-in-text-file/25607155#25607155", "question_id": 25606833, "answer_id": 25607155}, {"body": "<p>Source: <a href=\"http://nadeausoftware.com/articles/2008/02/java_tip_how_read_files_quickly\" rel=\"nofollow\">http://nadeausoftware.com/articles/2008/02/java_tip_how_read_files_quickly</a></p>\n\n<blockquote>\n  <p>For the best Java read performance, there are four things to remember:</p>\n  \n  <ul>\n  <li>Minimize I/O operations by reading an array at a time, not a byte at a time. An 8Kbyte array is a good size.</li>\n  <li>Minimize method calls by getting data an array at a time, not a byte at a time. Use array indexing to get at bytes in the array.</li>\n  <li>Minimize thread synchronization locks if you don't need thread safety. Either make fewer method calls to a thread-safe class, or use\n  a non-thread-safe class like FileChannel and MappedByteBuffer.</li>\n  <li>Minimize data copying between the JVM/OS, internal buffers, and application arrays. Use FileChannel with memory mapping, or a direct\n  or wrapped array ByteBuffer.</li>\n  </ul>\n</blockquote>\n", "title": "Fastest way to sum integers in text file", "tags": ["java", "performance", "file-io"], "link": "http://stackoverflow.com/questions/25606833/fastest-way-to-sum-integers-in-text-file/25607283#25607283", "question_id": 25606833, "answer_id": 25607283}, {"body": "<p>You can go for a larger buffer size, and a faster coding to String (to Unicode).</p>\n\n<pre><code>BufferedReader br = new BufferedReader(new InputStreamReader(\n        new FileInputStream(file), StandardCharsets.US_ASCII),\n        1_024_000_000);\n</code></pre>\n\n<p>Your method of eliminating String usage, by using a binary InputStream/RandomAccessFile is worthwile.</p>\n\n<p>Then it might also be nice if the source files were <strong>compressed</strong>. Under Unix one would pick the gzip format, where <code>xxx.txt.gz</code> uncompresses to <code>xxx.txt</code>. That would be readable with a <code>GZipInputStream</code>.\nIt has the advantage of overall speed up of file transfer to and from the server's directory.</p>\n", "title": "Fastest way to sum integers in text file", "tags": ["java", "performance", "file-io"], "link": "http://stackoverflow.com/questions/25606833/fastest-way-to-sum-integers-in-text-file/25607380#25607380", "question_id": 25606833, "answer_id": 25607380}, {"body": "<p>Your main bottleneck will be file IO. Parsing and adding up the numbers should not contribute to the algorithm as that can be done in a separate thread while the File I/O is waiting for the disk.</p>\n\n<p>Some years ago I researched how to read from files in the fastest possible way and came across some excellent advice - which I implemented as a Scan routine as below:</p>\n\n<pre><code>// 4k buffer size.\nstatic final int SIZE = 4 * 1024;\nstatic byte[] buffer = new byte[SIZE];\n\n// Fastest because a FileInputStream has an associated channel.\nprivate static void ScanDataFile(Hunter p, FileInputStream f) throws FileNotFoundException, IOException {\n    // Use a mapped and buffered stream for best speed.\n    // See: http://nadeausoftware.com/articles/2008/02/java_tip_how_read_files_quickly\n    final FileChannel ch = f.getChannel();\n    long red = 0L;\n    do {\n        final long read = Math.min(Integer.MAX_VALUE, ch.size() - red);\n        final MappedByteBuffer mb = ch.map(FileChannel.MapMode.READ_ONLY, red, read);\n        int nGet;\n        while (mb.hasRemaining() &amp;&amp; p.ok()) {\n            nGet = Math.min(mb.remaining(), SIZE);\n            mb.get(buffer, 0, nGet);\n            for (int i = 0; i &lt; nGet &amp;&amp; p.ok(); i++) {\n                p.check(buffer[i]);\n                //size += 1;\n            }\n        }\n        red += read;\n    } while (red &lt; ch.size() &amp;&amp; p.ok());\n    // Finish off.\n    p.close();\n    ch.close();\n    f.close();\n}\n</code></pre>\n\n<p>You may wish to adjust this technique before testing it for speed as it is making use of an interfaced object called a <code>Hunter</code> to hunt for the data.</p>\n\n<p>As you can see the advice was derived in 2008 and there have been many enhancements to Java since then so this may not provide an improvement.</p>\n\n<h2>Added</h2>\n\n<p>I have not tested this but this should fit into your tests and use the same technique:</p>\n\n<pre><code>class Summer {\n\n    long sum = 0;\n    long val = 0;\n\n    public void add(byte b) {\n        if (b &gt;= '0' &amp;&amp; b &lt;= '9') {\n            val = (val * 10) + (b - '0');\n        } else {\n            sum += val;\n            val = 0;\n        }\n    }\n\n    public long getSum() {\n        return sum + val;\n    }\n}\n\nprivate long sumMapped() throws IOException {\n    Summer sum = new Summer();\n    FileInputStream f = new FileInputStream(file);\n    final FileChannel ch = f.getChannel();\n    long red = 0L;\n    do {\n        final long read = Math.min(Integer.MAX_VALUE, ch.size() - red);\n        final MappedByteBuffer mb = ch.map(FileChannel.MapMode.READ_ONLY, red, read);\n        int nGet;\n        while (mb.hasRemaining()) {\n            nGet = Math.min(mb.remaining(), SIZE);\n            mb.get(buffer, 0, nGet);\n            for (int i = 0; i &lt; nGet; i++) {\n                sum.add(buffer[i]);\n            }\n        }\n        red += read;\n    } while (red &lt; ch.size());\n    // Finish off.\n    ch.close();\n    f.close();\n    return sum.getSum();\n}\n</code></pre>\n", "title": "Fastest way to sum integers in text file", "tags": ["java", "performance", "file-io"], "link": "http://stackoverflow.com/questions/25606833/fastest-way-to-sum-integers-in-text-file/25608015#25608015", "question_id": 25606833, "answer_id": 25608015}, {"body": "<p>Based on <a href=\"http://stackoverflow.com/questions/25606833/fastest-way-to-sum-integers-in-text-file#comment40047823_25607155\">this comment</a>: \"Simply summing up all the bytes is faster\", I propose a variation of the accepted answer.</p>\n\n<p>The accepted answer proposes breaking the problem into chunks, calculating a sum for each chuck using multithreading, and adding them together at the end.</p>\n\n<p>This idea can be used to reduce the number of multiplications to O(1) in the backward scan, without any table lookups and without threading (or combine it with threading).  Simply <strong>take advantage of the way multiplication distributes over addition and add all the ones digits into one accumulator, the tens into a separate one</strong>, hundreds and thousands into their own accumulators.  This requires no multiplication whatsoever.</p>\n\n<p>The reduce step combining results from multiple threads can also be done using the per-place accumulators.  The final step of calculating the totals will require multiplication (or take advantage of the fact that 10 has only two bits set and use bit shifts and add), but only 9 multiplications are sufficient.</p>\n", "title": "Fastest way to sum integers in text file", "tags": ["java", "performance", "file-io"], "link": "http://stackoverflow.com/questions/25606833/fastest-way-to-sum-integers-in-text-file/25689416#25689416", "question_id": 25606833, "answer_id": 25689416}, {"body": "<p>There are several issues here.</p>\n\n<ol>\n<li>Any solution based on reading lines is going to process each character twice. Compilers for example don't do this, they read one character at a time and despatch on it directly.</li>\n<li>Any solution based on <code>readLine()</code> is going to create Strings.</li>\n<li>You are using different buffer sizes.</li>\n<li>You are using different I/O technologies.</li>\n<li>In some cases you are using character conversion, while in others you aren't.</li>\n<li>You're over-analyzing the file. You don't really care where the white space is, or how much of it there is, as long as it separates the numbers from each other.</li>\n</ol>\n\n<p>My solution:</p>\n\n<pre><code>    BufferedInputStream bis = new BufferedInputStream(new FileInputStream(file), 8*1024*1024/2);\n    long    total = 0;\n    int i;\n    while ((i = bis.read()) != -1)\n    {\n        byte    b = (byte)i;\n        long    number = 0;\n        while (b &gt;= '0' &amp;&amp; b &lt;= '9')\n        {\n            number = number*10+b-'0';\n            if ((i = bis.read()) == -1)\n                break;\n            b = (byte)i;\n        }\n        total += number;\n    }\n</code></pre>\n", "title": "Fastest way to sum integers in text file", "tags": ["java", "performance", "file-io"], "link": "http://stackoverflow.com/questions/25606833/fastest-way-to-sum-integers-in-text-file/25757572#25757572", "question_id": 25606833, "answer_id": 25757572}, {"body": "<p>Separating the task on multiple thread can improve performance, this is known as Map-Reduce (<a href=\"http://en.wikipedia.org/wiki/MapReduce\" rel=\"nofollow\">http://en.wikipedia.org/wiki/MapReduce</a>).\nEvery thread has a pool of number to sum. When every thread is finished summing the numbers, they share their results and come up with the answer.</p>\n", "title": "Fastest way to sum integers in text file", "tags": ["java", "performance", "file-io"], "link": "http://stackoverflow.com/questions/25606833/fastest-way-to-sum-integers-in-text-file/27154578#27154578", "question_id": 25606833, "answer_id": 27154578}], "creation_date": 1409577680, "score": 49, "link": "http://stackoverflow.com/questions/25606833/fastest-way-to-sum-integers-in-text-file", "question_id": 25606833}, {"body": "<p>The moment I added the android support annotations to my dependencies</p>\n\n<p><code>compile 'com.android.support:support-annotations:20.0.0'</code></p>\n\n<p>I got this error:</p>\n\n<blockquote>\n  <p>Error Code:\n      2   Output:\n      UNEXPECTED TOP-LEVEL EXCEPTION:\n      com.android.dex.DexException: Multiple dex files define Landroid/support/annotation/AnimRes;\n          at com.android.dx.merge.DexMerger.readSortableTypes(DexMerger.java:594)\n          at com.android.dx.merge.DexMerger.getSortedTypes(DexMerger.java:552)\n          at com.android.dx.merge.DexMerger.mergeClassDefs(DexMerger.java:533)\n          at com.android.dx.merge.DexMerger.mergeDexes(DexMerger.java:170)\n          at com.android.dx.merge.DexMerger.merge(DexMerger.java:188)\n          at com.android.dx.command.dexer.Main.mergeLibraryDexBuffers(Main.java:439)\n          at com.android.dx.command.dexer.Main.runMonoDex(Main.java:287)\n          at com.android.dx.command.dexer.Main.run(Main.java:230)\n          at com.android.dx.command.dexer.Main.main(Main.java:199)\n          at com.android.dx.command.Main.main(Main.java:103)</p>\n</blockquote>\n\n<p><strong>build.gradle</strong></p>\n\n<pre><code>android {\n    compileSdkVersion 19\n    buildToolsVersion '20.0.0'\n\n    defaultConfig {\n        minSdkVersion 10\n        targetSdkVersion 19\n    }\n}\n\ndependencies {\n    compile 'com.android.support:support-v4:19.0.0'\n    compile 'com.crashlytics.android:crashlytics:1.+'\n    compile 'com.android.support:support-annotations:20.0.0'\n}\n</code></pre>\n\n<p>Anybody else experienced this issue? I have tried the solutions from <a href=\"http://stackoverflow.com/questions/8059719/unable-to-execute-dex-multiple-dex-files-define\">here</a>.</p>\n", "tags": ["java", "android"], "title": "multiple dex files define landroid/support/annotation/AnimRes", "answers": [{"body": "<p>I managed to fix this issue. The reason was that I included the android support library 19.0.0 as a dependency, but 19.1.0 is required. <a href=\"http://tools.android.com/tech-docs/support-annotations\" rel=\"nofollow\">See here for more information</a></p>\n\n<p>So it has to be </p>\n\n<pre><code>dependencies {\n    compile 'com.android.support:support-v4:19.1.0'\n    compile 'com.crashlytics.android:crashlytics:1.+'\n    compile 'com.android.support:support-annotations:20.0.0'\n}\n</code></pre>\n", "title": "multiple dex files define landroid/support/annotation/AnimRes", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/26342444/multiple-dex-files-define-landroid-support-annotation-animres/26483423#26483423", "question_id": 26342444, "answer_id": 26483423}, {"body": "<p>The problem is that <code>android-support-annotations.jar</code> used to be a separate library containing the android annotations, but for some reason these annotations are already included in recent versions of the <code>android-support-v4.jar</code> file.</p>\n\n<p>Deleting the annotations jar solved the issue.</p>\n", "title": "multiple dex files define landroid/support/annotation/AnimRes", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/26342444/multiple-dex-files-define-landroid-support-annotation-animres/26713987#26713987", "question_id": 26342444, "answer_id": 26713987}, {"body": "<p>I deleted the android-support-v4.jar and it worked.</p>\n", "title": "multiple dex files define landroid/support/annotation/AnimRes", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/26342444/multiple-dex-files-define-landroid-support-annotation-animres/27436387#27436387", "question_id": 26342444, "answer_id": 27436387}, {"body": "<p>If you import <code>AppCompat</code> as a library project and you also have <code>android-support-annotations.jar</code> in libs elsewhere, make sure to import everywhere <code>AppCompat</code> library only (it already includes this annotations lib). Then delete all <code>android-support-annotations.jar</code> to avoid merging multiple versions of this library.</p>\n", "title": "multiple dex files define landroid/support/annotation/AnimRes", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/26342444/multiple-dex-files-define-landroid-support-annotation-animres/27809512#27809512", "question_id": 26342444, "answer_id": 27809512}, {"body": "<p>Build->clean Project ,and it worked</p>\n", "title": "multiple dex files define landroid/support/annotation/AnimRes", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/26342444/multiple-dex-files-define-landroid-support-annotation-animres/29227287#29227287", "question_id": 26342444, "answer_id": 29227287}, {"body": "<p>Updating Android SDK Tools fixed it for me, now it just sees the copy in <code>android-support-v4.jar</code>.</p>\n\n<p>I had the same problem when using ant, and the annotations library was being included automatically by an outdated <code>sdk.dir/tools/ant/build.xml</code>.  </p>\n", "title": "multiple dex files define landroid/support/annotation/AnimRes", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/26342444/multiple-dex-files-define-landroid-support-annotation-animres/30552070#30552070", "question_id": 26342444, "answer_id": 30552070}, {"body": "<p>Clean project works as a temporary fix, but the issue will reappear on next compilation error.</p>\n\n<p>To fix more reliably, I had to update the dependency to android <code>support-v4</code> to <code>com.android.support:support-v4:22.2.0</code>.</p>\n", "title": "multiple dex files define landroid/support/annotation/AnimRes", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/26342444/multiple-dex-files-define-landroid-support-annotation-animres/31430824#31430824", "question_id": 26342444, "answer_id": 31430824}, {"body": "<p>In my case I had a file called <code>cache.xml</code> under <code>/build/intermediates/dex-cache/cache.xml</code> in the root project folder. I deleted this file, rebuild the project and it worked for me.</p>\n", "title": "multiple dex files define landroid/support/annotation/AnimRes", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/26342444/multiple-dex-files-define-landroid-support-annotation-animres/31924537#31924537", "question_id": 26342444, "answer_id": 31924537}, {"body": "<p>If you are sure that there are no dependencies problems you can try this:</p>\n\n<ul>\n<li>Open your <strong>Build.gradle (app)</strong>  file</li>\n<li>Search for the task <strong>dexOptions</strong></li>\n<li><p>Change it to:</p>\n\n<pre><code>dexOptions {\n      incremental false \n }\n</code></pre></li>\n</ul>\n\n<p>If you don't find the task in your file you can add it</p>\n", "title": "multiple dex files define landroid/support/annotation/AnimRes", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/26342444/multiple-dex-files-define-landroid-support-annotation-animres/32059386#32059386", "question_id": 26342444, "answer_id": 32059386}, {"body": "<p>Solved this exact issue in a Cordova project that used the facebook plugin.  I was able to successfully build by commenting out this line from <code>platforms\\android\\project.properties</code>, as shown:</p>\n\n<pre><code># cordova.system.library.1=com.android.support:support-v4:+\n</code></pre>\n\n<p>And by commenting out this line from <code>platforms\\android\\build.gradle</code>, as shown:</p>\n\n<pre><code>// compile \"com.android.support:support-v4:+\"\n</code></pre>\n\n<p>Then doing the build.  The problem started when I installed (katzer/cordova-plugin-local-notifications) which added these lines, but it created a conflict since the library it was adding to the build was already part of the facebook plugin build.</p>\n", "title": "multiple dex files define landroid/support/annotation/AnimRes", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/26342444/multiple-dex-files-define-landroid-support-annotation-animres/33087603#33087603", "question_id": 26342444, "answer_id": 33087603}, {"body": "<p>For me the reason was the new data-binding lib</p>\n\n<pre><code>com.android.databinding:dataBinder:1.0-rc2\n</code></pre>\n\n<p>it somehow used a conflicting version of the annotations lib, which I could not force with </p>\n\n<pre><code>configurations.all {\n    resolutionStrategy {\n        force group: 'com.android.support', name: 'support-v4', version: '23.1.0'\n        force group: 'com.android.support', name: 'appcompat-v7', version: '23.1.0'\n        force group: 'com.android.support', name: 'support-annotations', version: '23.1.0'\n    }\n}\n</code></pre>\n\n<p>but the new <code>rc3</code> and <code>rc4</code> versions seem to have fixed it, so just use those versions</p>\n", "title": "multiple dex files define landroid/support/annotation/AnimRes", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/26342444/multiple-dex-files-define-landroid-support-annotation-animres/33486175#33486175", "question_id": 26342444, "answer_id": 33486175}, {"body": "<p>I had the same problem , but i deleted build files from the build folder</p>\n\n<p>projectname/app/build</p>\n\n<p>and it removed all the related error. \"can't clean the project\" and also \"dex errow with $anim\"</p>\n", "title": "multiple dex files define landroid/support/annotation/AnimRes", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/26342444/multiple-dex-files-define-landroid-support-annotation-animres/34563328#34563328", "question_id": 26342444, "answer_id": 34563328}, {"body": "<p>If this is cordova / ionic project this worked for me</p>\n\n<p>add these line to build.gradle under platforms/android after line number 22 i.e after <strong>apply plugin: 'android'</strong></p>\n\n<pre><code>configurations {\n   all*.exclude group: 'com.android.support', module: 'support-v4'\n}\n</code></pre>\n", "title": "multiple dex files define landroid/support/annotation/AnimRes", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/26342444/multiple-dex-files-define-landroid-support-annotation-animres/35146779#35146779", "question_id": 26342444, "answer_id": 35146779}, {"body": "<p>I deleted the android-support-v4.jar and it worked.</p>\n\n<p>Explain - android-support-v4.jar is conflicting with my other .jar files of project\\libs files ** specially when you are running with java 8 on AS.</p>\n", "title": "multiple dex files define landroid/support/annotation/AnimRes", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/26342444/multiple-dex-files-define-landroid-support-annotation-animres/35673142#35673142", "question_id": 26342444, "answer_id": 35673142}, {"body": "<p>Put android-support-v4.jar in your libs folder in eclipse. Clean and build the project. It will resolve the issue.</p>\n", "title": "multiple dex files define landroid/support/annotation/AnimRes", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/26342444/multiple-dex-files-define-landroid-support-annotation-animres/36444654#36444654", "question_id": 26342444, "answer_id": 36444654}], "creation_date": 1413210638, "score": 48, "link": "http://stackoverflow.com/questions/26342444/multiple-dex-files-define-landroid-support-annotation-animres", "question_id": 26342444}, {"body": "<p>I am developing app using OkHttp library and my trouble is I cannot find how to set connection timeout and socket timeout.</p>\n\n<pre><code>OkHttpClient client = new OkHttpClient();\n\nRequest request = new Request.Builder().url(url).build();\n\nResponse response = client.newCall(request).execute();\n</code></pre>\n\n<p>Thanks.</p>\n", "tags": ["java", "timeout", "okhttp"], "title": "How to set connection timeout with OkHttp", "answers": [{"body": "<p>You simply have to do this</p>\n\n<pre><code>OkHttpClient client = new OkHttpClient();\nclient.setConnectTimeout(15, TimeUnit.SECONDS); // connect timeout\nclient.setReadTimeout(15, TimeUnit.SECONDS);    // socket timeout\n\nRequest request = new Request.Builder().url(url).build();\nResponse response = client.newCall(request).execute();\n</code></pre>\n\n<p>Be aware that value set in <code>setReadTimeout</code> is the one used in <code>setSoTimeout</code> on the <code>Socket</code> internally in the <code>OkHttp</code> <a href=\"https://github.com/square/okhttp/blob/parent-2.4.0/okhttp/src/main/java/com/squareup/okhttp/Connection.java#L300\" rel=\"nofollow\"><code>Connection</code></a> class.</p>\n\n<p>Not setting any timeout on the <code>OkHttpClient</code> is the equivalent of setting a value of <code>0</code> on <code>setConnectTimeout</code> or <code>setReadTimeout</code> and will result in no timeout at all.  Description can be found <a href=\"https://github.com/square/okhttp/blob/parent-2.4.0/okhttp/src/main/java/com/squareup/okhttp/OkHttpClient.java#L247\" rel=\"nofollow\">here</a>.</p>\n\n<p>As mentioned by @marceloquinta in the comments <code>setWriteTimeout</code> can also be set.</p>\n\n<p>As of version 2.5.0 read / write / connect timeout values are set to 10 seconds by default as mentioned by @ChristerNordvik.  This can be seen <a href=\"https://github.com/square/okhttp/blob/okhttp_25/okhttp/src/main/java/com/squareup/okhttp/OkHttpClient.java#L190\" rel=\"nofollow\">here</a>.</p>\n\n<p>As of OkHttp3 can now do this through the <a href=\"https://github.com/square/okhttp/blob/okhttp_30/okhttp/src/main/java/okhttp3/OkHttpClient.java#L386\" rel=\"nofollow\">Builder</a> like so</p>\n\n<pre><code>client = new OkHttpClient.Builder()\n        .connectTimeout(10, TimeUnit.SECONDS)\n        .writeTimeout(10, TimeUnit.SECONDS)\n        .readTimeout(30, TimeUnit.SECONDS)\n        .build();\n</code></pre>\n\n<p>You can also view the recipe <a href=\"https://github.com/square/okhttp/blob/master/samples/guide/src/main/java/okhttp3/recipes/ConfigureTimeouts.java\" rel=\"nofollow\">here</a></p>\n", "title": "How to set connection timeout with OkHttp", "tags": ["java", "timeout", "okhttp"], "link": "http://stackoverflow.com/questions/25953819/how-to-set-connection-timeout-with-okhttp/25973778#25973778", "question_id": 25953819, "answer_id": 25973778}, {"body": "<p>For Retrofit 2.0.0-beta1 or beta2, the code goes as follows</p>\n\n<pre><code>    OkHttpClient client = new OkHttpClient();\n\n    client.setConnectTimeout(30, TimeUnit.SECONDS);\n    client.setReadTimeout(30, TimeUnit.SECONDS);\n    client.setWriteTimeout(30, TimeUnit.SECONDS);\n\n    Retrofit retrofit = new Retrofit.Builder()\n            .baseUrl(\"http://api.yourapp.com/\")\n            .addConverterFactory(GsonConverterFactory.create())\n            .client(client)\n            .build();\n</code></pre>\n", "title": "How to set connection timeout with OkHttp", "tags": ["java", "timeout", "okhttp"], "link": "http://stackoverflow.com/questions/25953819/how-to-set-connection-timeout-with-okhttp/33388631#33388631", "question_id": 25953819, "answer_id": 33388631}, {"body": "<p>For OkHttp version 3.0.0-RC1 this has changed a bit.</p>\n\n<p>Now you set up the times using the builder, and not setters, like this:</p>\n\n<pre><code>   OkHttpClient client = new OkHttpClient.Builder()\n        .connectTimeout(10, TimeUnit.SECONDS)\n        .writeTimeout(10, TimeUnit.SECONDS)\n        .readTimeout(30, TimeUnit.SECONDS)\n        .build();\n</code></pre>\n\n<p>More info can be found in their wiki:\n<a href=\"https://github.com/square/okhttp/wiki/Recipes#timeouts\">https://github.com/square/okhttp/wiki/Recipes#timeouts</a></p>\n", "title": "How to set connection timeout with OkHttp", "tags": ["java", "timeout", "okhttp"], "link": "http://stackoverflow.com/questions/25953819/how-to-set-connection-timeout-with-okhttp/34762061#34762061", "question_id": 25953819, "answer_id": 34762061}, {"body": "<p>For Retrofit retrofit:2.0.0-beta4  the code goes as follows</p>\n\n<pre><code>OkHttpClient client = new OkHttpClient.Builder()\n        .addInterceptor(logging)\n        .connectTimeout(30, TimeUnit.SECONDS)\n        .readTimeout(30, TimeUnit.SECONDS)\n        .writeTimeout(30, TimeUnit.SECONDS)\n        .build();\n\nRetrofit retrofit = new Retrofit.Builder()\n        .baseUrl(\"http://api.yourapp.com/\")\n        .addConverterFactory(GsonConverterFactory.create())\n        .client(client)\n        .build();\n</code></pre>\n", "title": "How to set connection timeout with OkHttp", "tags": ["java", "timeout", "okhttp"], "link": "http://stackoverflow.com/questions/25953819/how-to-set-connection-timeout-with-okhttp/35620730#35620730", "question_id": 25953819, "answer_id": 35620730}, {"body": "<p>like so:</p>\n\n<pre><code>//New Request\n        HttpLoggingInterceptor logging = new HttpLoggingInterceptor();\n        logging.setLevel(HttpLoggingInterceptor.Level.BASIC);\n        final OkHttpClient client = new OkHttpClient.Builder()\n                .addInterceptor(logging)\n                .connectTimeout(30, TimeUnit.SECONDS)\n                .readTimeout(30, TimeUnit.SECONDS)\n                .writeTimeout(30, TimeUnit.SECONDS)\n                .build();\n</code></pre>\n", "title": "How to set connection timeout with OkHttp", "tags": ["java", "timeout", "okhttp"], "link": "http://stackoverflow.com/questions/25953819/how-to-set-connection-timeout-with-okhttp/37653458#37653458", "question_id": 25953819, "answer_id": 37653458}, {"body": "<pre><code>//add in gradle and sync\ncompile 'com.squareup.okhttp3:okhttp:3.2.0'\ncompile 'com.google.code.gson:gson:2.6.2'\n\nimport okhttp3.OkHttpClient;\nimport okhttp3.OkHttpClient.Builder;\n\n\nBuilder b = new Builder();\nb.readTimeout(200, TimeUnit.MILLISECONDS);\nb.writeTimeout(600, TimeUnit.MILLISECONDS);\n// set other properties\n\nOkHttpClient client = b.build();\n</code></pre>\n", "title": "How to set connection timeout with OkHttp", "tags": ["java", "timeout", "okhttp"], "link": "http://stackoverflow.com/questions/25953819/how-to-set-connection-timeout-with-okhttp/39383456#39383456", "question_id": 25953819, "answer_id": 39383456}], "creation_date": 1411251366, "score": 47, "link": "http://stackoverflow.com/questions/25953819/how-to-set-connection-timeout-with-okhttp", "question_id": 25953819}, {"body": "<p>The Enum class is Serializable so there is no problem to serialize object with enums. The other case is where class has fields of java.util.Optional class. In this case the following exception is thrown: java.io.NotSerializableException: java.util.Optional</p>\n\n<p>How to deal with such classes, how to serialize them? Is it possible to send such objects to Remote EJB or through RMI?</p>\n\n<p>This is the example:</p>\n\n<pre><code>import java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.io.ObjectOutputStream;\nimport java.io.Serializable;\nimport java.util.Optional;\n\nimport org.junit.Test;\n\npublic class SerializationTest {\n\n    static class My implements Serializable {\n\n        private static final long serialVersionUID = 1L;\n        Optional&lt;Integer&gt; value = Optional.empty();\n\n        public void setValue(Integer i) {\n            this.i = Optional.of(i);\n        }\n\n        public Optional&lt;Integer&gt; getValue() {\n            return value;\n        }\n    }\n\n    //java.io.NotSerializableException is thrown\n\n    @Test\n    public void serialize() {\n        My my = new My();\n        byte[] bytes = toBytes(my);\n    }\n\n    public static &lt;T extends Serializable&gt; byte[] toBytes(T reportInfo) {\n        try (ByteArrayOutputStream bstream = new ByteArrayOutputStream()) {\n            try (ObjectOutputStream ostream = new ObjectOutputStream(bstream)) {\n                ostream.writeObject(reportInfo);\n            }\n            return bstream.toByteArray();\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n", "tags": ["java", "serialization", "java-8", "optional"], "title": "Why java.util.Optional is not Serializable, how to serialize the object with such fields", "answers": [{"body": "<p>It's a curious omission.</p>\n\n<p>You would have to mark the field as <code>transient</code> and provide your own custom <code>writeObject()</code> method that wrote the <code>get()</code> result itself, and a <code>readObject()</code> method that restored the <code>Optional</code> by reading that result from the stream. Not forgetting to call <code>defaultWriteObject()</code> and <code>defaultReadObject()</code> respectively.</p>\n", "title": "Why java.util.Optional is not Serializable, how to serialize the object with such fields", "tags": ["java", "serialization", "java-8", "optional"], "link": "http://stackoverflow.com/questions/24547673/why-java-util-optional-is-not-serializable-how-to-serialize-the-object-with-suc/24547831#24547831", "question_id": 24547673, "answer_id": 24547831}, {"body": "<p>A lot of <code>Serialization</code> related problems can be solved by decoupling the persistent serialized form from the actual runtime implementation you operate on.</p>\n\n<pre><code>/** The class you work with in your runtime */\npublic class My implements Serializable {\n    private static final long serialVersionUID = 1L;\n\n    Optional&lt;Integer&gt; value = Optional.empty();\n\n    public void setValue(Integer i) {\n        this.value = Optional.ofNullable(i);\n    }\n\n    public Optional&lt;Integer&gt; getValue() {\n        return value;\n    }\n    private Object writeReplace() throws ObjectStreamException\n    {\n        return new MySerialized(this);\n    }\n}\n/** The persistent representation which exists in bytestreams only */\nfinal class MySerialized implements Serializable {\n    private final Integer value;\n\n    MySerialized(My my) {\n        value=my.getValue().orElse(null);\n    }\n    private Object readResolve() throws ObjectStreamException {\n        My my=new My();\n        my.setValue(value);\n        return my;\n    }\n}\n</code></pre>\n\n<p>The class <code>Optional</code> implements <em>behavior</em> which allows to write good code when dealing with possibly absent values (compared to the use of <code>null</code>). But it does not add any benefit to a persistent representation of your data. It would just make your serialized data bigger\u2026</p>\n\n<p>The sketch above might look complicated but that\u2019s because it demonstrates the pattern with one property only. The more properties your class has the more its simplicity should be revealed.</p>\n\n<p>And not to forget, the possibility to change the implementation of <code>My</code> completely without any need to adapt the persistent form\u2026</p>\n", "title": "Why java.util.Optional is not Serializable, how to serialize the object with such fields", "tags": ["java", "serialization", "java-8", "optional"], "link": "http://stackoverflow.com/questions/24547673/why-java-util-optional-is-not-serializable-how-to-serialize-the-object-with-suc/24559389#24559389", "question_id": 24547673, "answer_id": 24559389}, {"body": "<p>This answer is in response to the question in the title, \"Shouldn't Optional be Serializable?\" The short answer is that the Java Lambda (JSR-335) expert group <a href=\"http://mail.openjdk.java.net/pipermail/jdk8-dev/2013-September/003274.html\">considered and rejected it</a>. That note, and <a href=\"http://mail.openjdk.java.net/pipermail/lambda-libs-spec-experts/2013-May/001814.html\">this one</a> and <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2012-September/005952.html\">this one</a> indicate that the primary design goal for <code>Optional</code> is to be used as the return value of functions when a return value might be absent. The intent is that the caller immediately check the <code>Optional</code> and extract the actual value if it's present. If the value is absent, the caller can substitute a default value, throw an exception, or apply some other policy. This is typically done by chaining fluent method calls off the end of a stream pipeline (or other methods) that return <code>Optional</code> values.</p>\n\n<p>It was never intended for <code>Optional</code> to be used other ways, such as for <a href=\"http://stackoverflow.com/a/23464794/1441122\">optional method arguments</a> or to be <a href=\"http://mail.openjdk.java.net/pipermail/jdk8-dev/2013-September/003273.html\">stored as a field in an object</a>. And by extension, making <code>Optional</code> serializable would enable it to be stored persistently or transmitted across a network, both of which encourage uses far beyond its original design goal.</p>\n\n<p>Usually there are better ways to organize the data than to store an <code>Optional</code> in a field. If a getter (such as the <code>getValue</code> method in the question) returns the actual <code>Optional</code> from the field, it forces every caller to implement some policy for dealing with an empty value. This will likely lead to inconsisent behavior across callers. It's often better to have whatever code sets that field apply some policy at the time it's set.</p>\n\n<p>Sometimes people want to put <code>Optional</code> into collections, like <code>List&lt;Optional&lt;X&gt;&gt;</code> or <code>Map&lt;Key,Optional&lt;Value&gt;&gt;</code>. This too is usually a bad idea. It's often better to replace these usages of <code>Optional</code> with <a href=\"http://en.wikipedia.org/wiki/Null_Object_pattern\">Null-Object</a> values (not actual <code>null</code> references), or simply to omit these entries from the collection entirely.</p>\n", "title": "Why java.util.Optional is not Serializable, how to serialize the object with such fields", "tags": ["java", "serialization", "java-8", "optional"], "link": "http://stackoverflow.com/questions/24547673/why-java-util-optional-is-not-serializable-how-to-serialize-the-object-with-suc/24564612#24564612", "question_id": 24547673, "answer_id": 24564612}], "creation_date": 1404372840, "score": 47, "link": "http://stackoverflow.com/questions/24547673/why-java-util-optional-is-not-serializable-how-to-serialize-the-object-with-suc", "question_id": 24547673}, {"body": "<p>I'm trying out Android Studio. Upon creating a new project and adding a default <code>onSaveInstanceState</code> method to the create MyActivity class, when I try to commit the code to Git, I get a strange error I don't understand. The code is this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/bxyek.png\" alt=\"\"></p>\n\n<p>The error I get is this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/qJYSE.png\" alt=\"enter image description here\"></p>\n\n<p>If I try to change the method signature to <code>protected void onSaveInstanceState(@NotNull Bundle outState)</code>, then the IDE tells me it can't resolve the symbol <code>NotNull</code>.</p>\n\n<p>What do I need to do to get rid of the warning?</p>\n", "tags": ["java", "android", "compiler-construction", "android-studio"], "title": "Meaning of Android Studio error: Not annotated parameter overrides @NonNull parameter", "answers": [{"body": "<p>It's an annotation, but the correct name is <code>NonNull</code>:</p>\n\n<pre><code>protected void onSaveInstanceState(@NonNull Bundle outState)\n</code></pre>\n\n<p>(And also)</p>\n\n<pre><code>import android.support.annotation.NonNull;\n</code></pre>\n\n<p>The purpose is to allow the <strong>compiler</strong> to warn when certain assumptions are being violated (such as a parameter of a method that should always have a value, as in this particular case, although there are others). From the <a href=\"http://tools.android.com/tech-docs/support-annotations\">Support Annotations</a> documentation:</p>\n\n<blockquote>\n  <p>The <code>@NonNull</code> annotation can be used to indicate that a given parameter\n  can not be null.</p>\n  \n  <p>If a local variable is known to be null (for example because some\n  earlier code checked whether it was null), and you pass that as a\n  parameter to a method where that parameter is marked as @NonNull, the\n  IDE will warn you that you have a potential crash.</p>\n</blockquote>\n\n<p>They are tools for static analysis. Runtime behavior is not altered at all.</p>\n\n<hr>\n\n<p>In this case, the particular warning is that the original method you're overriding (in <code>Activity</code>) has a <code>@NonNull</code> annotation on the <code>outState</code> parameter, but you did not include it in the overriding method. Just adding it should fix the issue, i.e.</p>\n\n<pre><code>@Override\nprotected void onSaveInstanceState(@NonNull Bundle outState) {\n    super.onSaveInstanceState(outState);\n}\n</code></pre>\n", "title": "Meaning of Android Studio error: Not annotated parameter overrides @NonNull parameter", "tags": ["java", "android", "compiler-construction", "android-studio"], "link": "http://stackoverflow.com/questions/24728627/meaning-of-android-studio-error-not-annotated-parameter-overrides-nonnull-para/24729081#24729081", "question_id": 24728627, "answer_id": 24729081}, {"body": "<p>A number of useful <a href=\"http://tools.android.com/tech-docs/support-annotations\">support annotations</a> were recently added in the Android support library. Their primary role is to annotate properties of various methods and parameters to help catch bugs. For example, if you pass <code>null</code> value to a parameter that is marked with the <code>NotNull</code> annotation you will get a warning.</p>\n\n<p>The annotations can be added to your project with Gradle by adding the following dependency:</p>\n\n<pre><code>dependencies {\n    compile 'com.android.support:support-annotations:20.0.0'\n}\n</code></pre>\n\n<p>You are getting the warning because the <code>Bundle</code> parameter is marked with the <code>@NotNull</code> annotation and by overriding the method the annotation gets hidden. The right thing to do is to add the annotation to the overriden method's parameter as well.</p>\n\n<pre><code>@Override\nprotected void onSaveInstanceState(@NonNull Bundle outState) {\n    super.onSaveInstanceState(outState);\n}\n</code></pre>\n", "title": "Meaning of Android Studio error: Not annotated parameter overrides @NonNull parameter", "tags": ["java", "android", "compiler-construction", "android-studio"], "link": "http://stackoverflow.com/questions/24728627/meaning-of-android-studio-error-not-annotated-parameter-overrides-nonnull-para/26391819#26391819", "question_id": 24728627, "answer_id": 26391819}, {"body": "<p>In addition to the other answers, the <code>@NonNull</code> (and it's opponent, <code>@Nullable</code>) annotation annotates a field, parameter or method return type. IntelliJ and thus Android Studio can warn you for possible <code>NullPointerException</code>s at compile time.</p>\n\n<p>An example is best here:</p>\n\n<pre><code>@NonNull private String myString = \"Hello\";\n\n@Nullable private String myOtherString = null;\n\n@NonNull \npublic Object doStuff() {\n    System.out.println(myString.length); // No warning\n    System.out.println(doSomething(myString).length); // Warning, the result might be null.\n\n    doSomething(myOtherString); // Warning, myOtherString might be null.\n\n    return myOtherString; // Warning, myOtherString might be null.\n}\n\n@Nullable\nprivate String doSomething(@NonNull String a) {\n    return a.length &gt; 1 ? null : a; // No warning\n}\n</code></pre>\n\n<hr>\n\n<p>These annotations do not alter runtime behavior (although I have <a href=\"https://github.com/nhaarman/FailFast\" rel=\"nofollow\">experimented</a> with this), but serve as a tool for preventing bugs. </p>\n\n<p>Note that the message you received was not an error, but just a warning, which is safe to ignore, if you choose to. The alternative is to annotate the parameter yourself as well, as Android Studio suggests:</p>\n\n<pre><code>@Override\nprotected void onSaveInstanceState(@NonNull Bundle outState) {\n    super.onSaveInstanceState(outState);\n}\n</code></pre>\n", "title": "Meaning of Android Studio error: Not annotated parameter overrides @NonNull parameter", "tags": ["java", "android", "compiler-construction", "android-studio"], "link": "http://stackoverflow.com/questions/24728627/meaning-of-android-studio-error-not-annotated-parameter-overrides-nonnull-para/26392002#26392002", "question_id": 24728627, "answer_id": 26392002}], "creation_date": 1405303138, "score": 47, "link": "http://stackoverflow.com/questions/24728627/meaning-of-android-studio-error-not-annotated-parameter-overrides-nonnull-para", "question_id": 24728627}, {"body": "<p>The Java 8 <code>Collectors.toMap</code> throws a <code>NullPointerException</code> if one of the values is 'null'. I don't understand this behaviour, maps can contain null pointers as value without any problems. Is there a good reason why values cannot be null for <code>Collectors.toMap</code>?</p>\n\n<p>Also, is there a nice Java 8 way of fixing this, or should I revert to plain old for loop?</p>\n\n<p>An example of my problem:</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Collectors;\n\n\nclass Answer {\n    private int id;\n\n    private Boolean answer;\n\n    Answer() {\n    }\n\n    Answer(int id, Boolean answer) {\n        this.id = id;\n        this.answer = answer;\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public Boolean getAnswer() {\n        return answer;\n    }\n\n    public void setAnswer(Boolean answer) {\n        this.answer = answer;\n    }\n}\n\npublic class Main {\n    public static void main(String[] args) {\n        List&lt;Answer&gt; answerList = new ArrayList&lt;&gt;();\n\n        answerList.add(new Answer(1, true));\n        answerList.add(new Answer(2, true));\n        answerList.add(new Answer(3, null));\n\n        Map&lt;Integer, Boolean&gt; answerMap =\n        answerList\n                .stream()\n                .collect(Collectors.toMap(Answer::getId, Answer::getAnswer));\n    }\n}\n</code></pre>\n\n<p>Stacktrace:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NullPointerException\n    at java.util.HashMap.merge(HashMap.java:1216)\n    at java.util.stream.Collectors.lambda$toMap$168(Collectors.java:1320)\n    at java.util.stream.Collectors$$Lambda$5/1528902577.accept(Unknown Source)\n    at java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)\n    at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1359)\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:512)\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:502)\n    at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\n    at Main.main(Main.java:48)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:134)\n</code></pre>\n", "tags": ["java", "nullpointerexception", "java-8", "java-stream", "collectors"], "title": "Java 8 NullPointerException in Collectors.toMap", "answers": [{"body": "<p>A bool value should never be <code>null</code> since boolean is supposed to have 2 values, not 3. Maybe you should consider using another approach. In your case, I think you should not use the Boolean class, use the primitive type boolean instead. <a href=\"http://stackoverflow.com/questions/3728616/boolean-vs-boolean-in-java\">(Learn more about the difference)</a>.<br>\nSince <code>boolean</code> is cheaper, your program might even be a little bit faster (especially when working with lists). The compile will also warn you if you try to set the answer to <code>null</code> (<code>&lt;null&gt; cannot be converted to boolean</code>). If you need <code>Boolean</code>'s methods, you should either covert the simple type to a class in <code>setAnswer</code> (<code>this.answer = new Boolean(answer)</code>, your throw a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html\" rel=\"nofollow\"><code>IllegalArgumentException</code></a> if <code>Boolean</code> is null).\nIf you really need to use <a href=\"http://en.wikipedia.org/wiki/Three-valued_logic\" rel=\"nofollow\">three-valued logic</a>, you can either ask google how to implement it best, or simple add a third method (e.g. <code>hasAnswer</code>). If you provide more information what answer is supposed to do, and what <code>setAnswer(null)</code> means, I might be able to provide a better way to help you.  </p>\n\n<p>As @Jasper noted, the <code>answer</code> can be unanswered and if so it will be 0. Since the answer will be converted into a JSON response, it might be read by other languages and some have troubles to distinguish between <code>false</code> and <code>null</code> (especially because you often use code like this: <code>if not boolValue then do...</code> instead of <code>if boolValue == false</code>). Now, you have 2 approaches to fix your issue:  </p>\n\n<p>1:<br>\nAdd a third method, <code>isAnswered</code>, which returns true if the question was answered or false if it wasn't. </p>\n\n<p>2:<br>\nDon't make <code>answer</code> a bool, make it a <code>String</code> instead. I think this is a better approach because strings can often be <code>null</code> (also, don't forget it to wrap the string in Optional!) and I kind of expect the answer to be a String containing his answer.  </p>\n\n<pre><code>class Answer {\n    private int id;\n    private Optional&lt;String&gt; answer;\n\n    Answer(int id, String answer) {\n        setId(id);\n        setAnswer(answer);\n    }\n    // setter/getter for id\n\n    public Optional&lt;String&gt; getAnswer() {\n        return answer;\n    }\n\n    public void setAnswer(String answer) {\n        setAnswer(Optional.ofNullable(answer));\n    }\n\n    public void setAnswer(Optional&lt;String&gt; answer) {\n        this.answer = answer;\n    }\n}\n</code></pre>\n\n<p>Make sure your JSON API behaves correctly with Java's Optional class. </p>\n\n<p>3:<br>\nIf the JSON response should only know  if it was correct, invalid, or not given, use an enum:  </p>\n\n<pre><code>enum AnswerType {\n    CORRECT, INCORRECT, NOT_GIVEN\n}\n</code></pre>\n\n<p>This way requires more work but will work best eventually (at least according to my experiences).  </p>\n\n<ol>\n<li>Use a for look.</li>\n</ol>\n\n<p>You can also use a for loop and create the map manually. Java8's List also provides a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html#forEach-java.util.function.Consumer-\" rel=\"nofollow\">forEach</a> method, which is really awesome (I've seen it in many other languages and they're really neat).</p>\n\n<p>--</p>\n\n<p>You can also do step 2 with a <code>Boolean</code> wrapped into <code>Optional</code> but this has often lured me into nasty bugs. Especially when the JSON response is read by other, dynamic languages. Other developer occasionally just take a glimpse at the documents and don't notice 3-valued logic and simply check if boolean is true (or even worse if it is false). This often creates nasty bugs. If the value is an enum (or at least a string with 3 given constants), you developer needs to cover all 3 cases in a proper switch/case because he will be taking a closer look to the result of the constants.</p>\n", "title": "Java 8 NullPointerException in Collectors.toMap", "tags": ["java", "nullpointerexception", "java-8", "java-stream", "collectors"], "link": "http://stackoverflow.com/questions/24630963/java-8-nullpointerexception-in-collectors-tomap/24631488#24631488", "question_id": 24630963, "answer_id": 24631488}, {"body": "<p>It is not possible with the static methods of <code>Collectors</code>. The javadoc of <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-\"><code>toMap</code></a> explains that <code>toMap</code> is based on <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Map.html#merge-K-V-java.util.function.BiFunction-\"><code>Map.merge</code></a>:</p>\n\n<blockquote>\n  <p>@param mergeFunction a merge function, used to resolve collisions between values associated with the same key, as supplied to <code>Map#merge(Object, Object, BiFunction)}</code></p>\n</blockquote>\n\n<p>and the javadoc of <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Map.html#merge-K-V-java.util.function.BiFunction-\"><code>Map.merge</code></a> says: </p>\n\n<blockquote>\n  <p>@throws NullPointerException if the specified key is null and this map\n  does not support null keys or <strong>the value</strong> or remappingFunction <strong>is</strong>\n  <strong>null</strong></p>\n</blockquote>\n\n<p>You can avoid the for loop by using the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html#forEach-java.util.function.Consumer-\"><code>forEach</code></a> method of your list.</p>\n\n<pre><code>Map&lt;Integer,  Boolean&gt; answerMap = new HashMap&lt;&gt;();\nanswerList.forEach((answer) -&gt; answerMap.put(answer.getId(), answer.getAnswer()));\n</code></pre>\n\n<p>but it is not really simple than the old way:</p>\n\n<pre><code>Map&lt;Integer, Boolean&gt; answerMap = new HashMap&lt;&gt;();\nfor (Answer answer : answerList) {\n    answerMap.put(answer.getId(), answer.getAnswer());\n}\n</code></pre>\n", "title": "Java 8 NullPointerException in Collectors.toMap", "tags": ["java", "nullpointerexception", "java-8", "java-stream", "collectors"], "link": "http://stackoverflow.com/questions/24630963/java-8-nullpointerexception-in-collectors-tomap/24632080#24632080", "question_id": 24630963, "answer_id": 24632080}, {"body": "<p>According to the <code>Stacktrace</code></p>\n\n<pre><code>Exception in thread \"main\" java.lang.NullPointerException\nat java.util.HashMap.merge(HashMap.java:1216)\nat java.util.stream.Collectors.lambda$toMap$148(Collectors.java:1320)\nat java.util.stream.Collectors$$Lambda$5/391359742.accept(Unknown Source)\nat java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)\nat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1359)\nat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:512)\nat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:502)\nat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\nat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\nat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\nat com.guice.Main.main(Main.java:28)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:483)\nat com.intellij.rt.execution.application.AppMain.main(AppMain.java:134)\n</code></pre>\n\n<p>When is called the <code>map.merge</code></p>\n\n<pre><code>        BiConsumer&lt;M, T&gt; accumulator\n            = (map, element) -&gt; map.merge(keyMapper.apply(element),\n                                          valueMapper.apply(element), mergeFunction);\n</code></pre>\n\n<p>It will do a <code>null</code> check as first thing</p>\n\n<pre><code>if (value == null)\n    throw new NullPointerException();\n</code></pre>\n\n<p>I don't use Java 8 so often so i don't know if there are a better way to fix it, but fix it is a bit hard.</p>\n\n<p>You could do:</p>\n\n<p>Use filter to filter all NULL values, and in the Javascript code check if the server didn't send any answer for this id means that he didn't reply to it.</p>\n\n<p>Something like this:</p>\n\n<pre><code>Map&lt;Integer, Boolean&gt; answerMap =\n        answerList\n                .stream()\n                .filter((a) -&gt; a.getAnswer() != null)\n                .collect(Collectors.toMap(Answer::getId, Answer::getAnswer));\n</code></pre>\n\n<p>Or use peek, which is used to alter the stream element for element. Using peek you could change the answer to something more acceptable for map but it means edit your logic a bit.</p>\n\n<p>Sounds like if you want to keep the current design you should avoid <code>Collectors.toMap</code></p>\n", "title": "Java 8 NullPointerException in Collectors.toMap", "tags": ["java", "nullpointerexception", "java-8", "java-stream", "collectors"], "link": "http://stackoverflow.com/questions/24630963/java-8-nullpointerexception-in-collectors-tomap/24632102#24632102", "question_id": 24630963, "answer_id": 24632102}, {"body": "<p>You can do this:</p>\n\n<pre><code>Map&lt;Integer, Boolean&gt; collect = list.stream()\n        .collect(HashMap::new, (m,v)-&gt;m.put(v.getId(), v.getAnswer()), HashMap::putAll);\n</code></pre>\n\n<p>It is not that much pretty, but it works. Result:</p>\n\n<pre><code>1: true\n2: true\n3: null\n</code></pre>\n\n<p>(<a href=\"http://docs.oracle.com/javase/tutorial/collections/streams/reduction.html#collect\">this</a> tutorial helped me the most.)</p>\n", "title": "Java 8 NullPointerException in Collectors.toMap", "tags": ["java", "nullpointerexception", "java-8", "java-stream", "collectors"], "link": "http://stackoverflow.com/questions/24630963/java-8-nullpointerexception-in-collectors-tomap/24634007#24634007", "question_id": 24630963, "answer_id": 24634007}, {"body": "<p>I wrote a <code>Collector</code> which, unlike the default java one, does not crash when you have <code>null</code> values:</p>\n\n<pre><code>public static &lt;T, K, U&gt;\n        Collector&lt;T, ?, Map&lt;K, U&gt;&gt; toMap(Function&lt;? super T, ? extends K&gt; keyMapper,\n                Function&lt;? super T, ? extends U&gt; valueMapper) {\n    return Collectors.collectingAndThen(\n            Collectors.toList(),\n            list -&gt; {\n                Map&lt;K, U&gt; result = new HashMap&lt;&gt;();\n                for (T item : list) {\n                    K key = keyMapper.apply(item);\n                    if (result.putIfAbsent(key, valueMapper.apply(item)) != null) {\n                        throw new IllegalStateException(String.format(\"Duplicate key %s\", key));\n                    }\n                }\n                return result;\n            });\n}\n</code></pre>\n\n<p>Just replace your <code>Collectors.toMap()</code> call to a call to this function and it'll fix the problem.</p>\n", "title": "Java 8 NullPointerException in Collectors.toMap", "tags": ["java", "nullpointerexception", "java-8", "java-stream", "collectors"], "link": "http://stackoverflow.com/questions/24630963/java-8-nullpointerexception-in-collectors-tomap/32648397#32648397", "question_id": 24630963, "answer_id": 32648397}, {"body": "<p>Here's somewhat simpler collector than proposed by @EmmanuelTouzery. Use it if you like:</p>\n\n<pre><code>public static &lt;T, K, U&gt; Collector&lt;T, ?, Map&lt;K, U&gt;&gt; toMapNullFriendly(\n        Function&lt;? super T, ? extends K&gt; keyMapper,\n        Function&lt;? super T, ? extends U&gt; valueMapper) {\n    @SuppressWarnings(\"unchecked\")\n    U none = (U) new Object();\n    return Collectors.collectingAndThen(\n            Collectors.&lt;T, K, U&gt; toMap(keyMapper,\n                    valueMapper.andThen(v -&gt; v == null ? none : v)), map -&gt; {\n                map.replaceAll((k, v) -&gt; v == none ? null : v);\n                return map;\n            });\n}\n</code></pre>\n\n<p>We just replace <code>null</code> with some custom object <code>none</code> and do the reverse operation in the finisher.</p>\n", "title": "Java 8 NullPointerException in Collectors.toMap", "tags": ["java", "nullpointerexception", "java-8", "java-stream", "collectors"], "link": "http://stackoverflow.com/questions/24630963/java-8-nullpointerexception-in-collectors-tomap/32649053#32649053", "question_id": 24630963, "answer_id": 32649053}, {"body": "<p>NullPointerException is by far the most frequently encountered exception (at least in my case). To avoid this I go defensive and add bunch of null checks and I end up having bloated and ugly code. Java 8 introduces Optional to handle null references so you can define nullable and non-nullable values. </p>\n\n<p>That said, I would wrap all the nullable references in Optional container. We should also not break backward compatibility as well. Here is the code.</p>\n\n<pre><code>class Answer {\n    private int id;\n    private Optional&lt;Boolean&gt; answer;\n\n    Answer() {\n    }\n\n    Answer(int id, Boolean answer) {\n        this.id = id;\n        this.answer = Optional.ofNullable(answer);\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    /**\n     * Gets the answer which can be a null value. Use {@link #getAnswerAsOptional()} instead.\n     *\n     * @return the answer which can be a null value\n     */\n    public Boolean getAnswer() {\n        // What should be the default value? If we return null the callers will be at higher risk of having NPE\n        return answer.orElse(null);\n    }\n\n    /**\n     * Gets the optional answer.\n     *\n     * @return the answer which is contained in {@code Optional}.\n     */\n    public Optional&lt;Boolean&gt; getAnswerAsOptional() {\n        return answer;\n    }\n\n    /**\n     * Gets the answer or the supplied default value.\n     *\n     * @return the answer or the supplied default value.\n     */\n    public boolean getAnswerOrDefault(boolean defaultValue) {\n        return answer.orElse(defaultValue);\n    }\n\n    public void setAnswer(Boolean answer) {\n        this.answer = Optional.ofNullable(answer);\n    }\n}\n\npublic class Main {\n    public static void main(String[] args) {\n        List&lt;Answer&gt; answerList = new ArrayList&lt;&gt;();\n\n        answerList.add(new Answer(1, true));\n        answerList.add(new Answer(2, true));\n        answerList.add(new Answer(3, null));\n\n        // map with optional answers (i.e. with null)\n        Map&lt;Integer, Optional&lt;Boolean&gt;&gt; answerMapWithOptionals = answerList.stream()\n                .collect(Collectors.toMap(Answer::getId, Answer::getAnswerAsOptional));\n\n        // map in which null values are removed\n        Map&lt;Integer, Boolean&gt; answerMapWithoutNulls = answerList.stream()\n                .filter(a -&gt; a.getAnswerAsOptional().isPresent())\n                .collect(Collectors.toMap(Answer::getId, Answer::getAnswer));\n\n        // map in which null values are treated as false by default\n        Map&lt;Integer, Boolean&gt; answerMapWithDefaults = answerList.stream()\n                .collect(Collectors.toMap(a -&gt; a.getId(), a -&gt; a.getAnswerOrDefault(false)));\n\n        System.out.println(\"With Optional: \" + answerMapWithOptionals);\n        System.out.println(\"Without Nulls: \" + answerMapWithoutNulls);\n        System.out.println(\"Wit Defaults: \" + answerMapWithDefaults);\n    }\n}\n</code></pre>\n", "title": "Java 8 NullPointerException in Collectors.toMap", "tags": ["java", "nullpointerexception", "java-8", "java-stream", "collectors"], "link": "http://stackoverflow.com/questions/24630963/java-8-nullpointerexception-in-collectors-tomap/34552155#34552155", "question_id": 24630963, "answer_id": 34552155}, {"body": "<p>If the value is a String, then this might work:\n<code>\nmap.entrySet().stream().collect(Collectors.toMap(e -&gt; e.getKey(), e -&gt;  Optional.ofNullable(e.getValue()).orElse(\"\")))\n</code></p>\n", "title": "Java 8 NullPointerException in Collectors.toMap", "tags": ["java", "nullpointerexception", "java-8", "java-stream", "collectors"], "link": "http://stackoverflow.com/questions/24630963/java-8-nullpointerexception-in-collectors-tomap/36900375#36900375", "question_id": 24630963, "answer_id": 36900375}], "creation_date": 1404819842, "score": 46, "link": "http://stackoverflow.com/questions/24630963/java-8-nullpointerexception-in-collectors-tomap", "question_id": 24630963}, {"body": "<p>I have multiple view resolvers in Spring configuration and I wanted to use different view resolvers for different requests</p>\n\n<p>Example for urls started with <code>report_*</code> use Birt view resolver and for ajax calls use Tiles resolver and so on.</p>\n\n<p>Tried setting order property but all views are resolved by tilesViewResolver</p>\n\n<pre><code>&lt;beans:bean id=\"tilesViewResolver\" class=\"org.springframework.js.ajax.AjaxUrlBasedViewResolver\"&gt;\n    &lt;beans:property name=\"viewClass\" value=\"com.example.example.util.AjaxTiles21View\"/&gt;\n&lt;/beans:bean&gt;\n\n&lt;beans:bean id=\"birtViewResolver\" class=\"org.eclipse.birt.spring.core.BirtViewResolver\"&gt;\n    ...\n    &lt;beans:property name=\"order\" value=\"2\" /&gt;\n&lt;/beans:bean&gt;\n\n&lt;beans:bean id=\"beanNameResolver\" class=\"org.springframework.web.servlet.view.BeanNameViewResolver\"&gt;\n    &lt;beans:property name=\"order\" value=\"1\" /&gt;\n&lt;/beans:bean&gt;\n</code></pre>\n", "tags": ["java", "spring-mvc", "birt"], "title": "Spring: is it possible to use different view resolvers?", "answers": [{"body": "<p>You absolutely can. <code>ViewResolver</code> has a single method, <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/ViewResolver.html#resolveViewName-java.lang.String-java.util.Locale-\"><code>resolveViewName(String)</code></a> which returns</p>\n\n<blockquote>\n  <p>the View object, or <strong>null if not found</strong> (optional, to allow for ViewResolver chaining)</p>\n</blockquote>\n\n<p>Your <code>ViewResolver</code> beans are registered. When a view name is returned by a handler, Spring will iterate through each <code>ViewResolver</code>, invoking their <code>resolveViewName</code> method with the given name. If the method returns non<code>-null</code>, that <code>View</code> is used. If <code>null</code> is returned, then it continues iterating.</p>\n\n<p>So the implementation has to return <code>null</code> if Spring is to skip it.</p>\n\n<p>There are some implementations that never return <code>null</code>. This seems to be the case with your custom <code>ViewResolver</code> classes. If the <code>ViewResolver</code> returns a <code>View</code>, even if that <code>View</code> will eventually fail to be rendered, Spring will use it.</p>\n\n<p>You either need to fix that or order your <code>ViewResolver</code> beans. For example, you can order them with the <code>Ordered</code> interface. Have your classes implement that interface and return an appropriate value.</p>\n", "title": "Spring: is it possible to use different view resolvers?", "tags": ["java", "spring-mvc", "birt"], "link": "http://stackoverflow.com/questions/25091791/spring-is-it-possible-to-use-different-view-resolvers/25091839#25091839", "question_id": 25091791, "answer_id": 25091839}], "creation_date": 1406955186, "score": 46, "link": "http://stackoverflow.com/questions/25091791/spring-is-it-possible-to-use-different-view-resolvers", "question_id": 25091791}, {"body": "<p>While writing an answer to <a href=\"http://stackoverflow.com/questions/25322679/why-is-while-i-n-significantly-slower-than-while-i-n-in-ja\">another question</a>, I noticed a strange border case for JIT optimization. </p>\n\n<p>The following program is <em>not</em> a \"Microbenchmark\" and <em>not</em> intended to reliably measure an execution time (as pointed out in the answers to the other question). It is solely intended as an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> to reproduce the issue:</p>\n\n<pre><code>class MissedLoopOptimization\n{\n    public static void main(String args[])\n    {\n        for (int j=0; j&lt;3; j++)\n        {\n            for (int i=0; i&lt;5; i++)\n            {\n                long before = System.nanoTime();\n                runWithMaxValue();\n                long after = System.nanoTime();\n                System.out.println(\"With MAX_VALUE   : \"+(after-before)/1e6);\n            }\n            for (int i=0; i&lt;5; i++)\n            {\n                long before = System.nanoTime();\n                runWithMaxValueMinusOne();\n                long after = System.nanoTime();\n                System.out.println(\"With MAX_VALUE-1 : \"+(after-before)/1e6);\n            }\n        }\n    }\n\n    private static void runWithMaxValue()\n    {\n        final int n = Integer.MAX_VALUE;\n        int i = 0;\n        while (i++ &lt; n) {}\n    }\n\n    private static void runWithMaxValueMinusOne()\n    {\n        final int n = Integer.MAX_VALUE-1;\n        int i = 0;\n        while (i++ &lt; n) {}\n    }\n}\n</code></pre>\n\n<p>It basically runs the same loop, <code>while (i++ &lt; n){}</code>, where the limit <code>n</code> is once set to <code>Integer.MAX_VALUE</code>, and once to <code>Integer.MAX_VALUE-1</code>. </p>\n\n<p>When executing this on Win7/64 with JDK 1.7.0_21 and </p>\n\n<pre><code>java -server MissedLoopOptimization\n</code></pre>\n\n<p>the timing results are as follows:</p>\n\n<pre><code>...\nWith MAX_VALUE   : 1285.227081\nWith MAX_VALUE   : 1274.36311\nWith MAX_VALUE   : 1282.992203\nWith MAX_VALUE   : 1292.88246\nWith MAX_VALUE   : 1280.788994\nWith MAX_VALUE-1 : 6.96E-4\nWith MAX_VALUE-1 : 3.48E-4\nWith MAX_VALUE-1 : 0.0\nWith MAX_VALUE-1 : 0.0\nWith MAX_VALUE-1 : 3.48E-4\n</code></pre>\n\n<p>Obviously, for the case of <code>MAX_VALUE-1</code>, the JIT does what one could expect: It detects that the loop is useless, and completely eliminates it. However, it does <strong>not</strong> remove the loop when it is running up to <code>MAX_VALUE</code>. </p>\n\n<p>This observation is confirmed by a look at the JIT assembly output when starting with </p>\n\n<pre><code>java -server -XX:+UnlockDiagnosticVMOptions -XX:+TraceClassLoading -XX:+LogCompilation -XX:+PrintAssembly MissedLoopOptimization\n</code></pre>\n\n<p>The log contains the following assembly for the method that runs up to <code>MAX_VALUE</code>:</p>\n\n<pre><code>Decoding compiled method 0x000000000254fa10:\nCode:\n[Entry Point]\n[Verified Entry Point]\n[Constants]\n  # {method} &amp;apos;runWithMaxValue&amp;apos; &amp;apos;()V&amp;apos; in &amp;apos;MissedLoopOptimization&amp;apos;\n  #           [sp+0x20]  (sp of caller)\n  0x000000000254fb40: sub    $0x18,%rsp\n  0x000000000254fb47: mov    %rbp,0x10(%rsp)    ;*synchronization entry\n                                                ; - MissedLoopOptimization::runWithMaxValue@-1 (line 29)\n  0x000000000254fb4c: mov    $0x1,%r11d\n  0x000000000254fb52: jmp    0x000000000254fb63\n  0x000000000254fb54: nopl   0x0(%rax,%rax,1)\n  0x000000000254fb5c: data32 data32 xchg %ax,%ax\n  0x000000000254fb60: inc    %r11d              ; OopMap{off=35}\n                                                ;*goto\n                                                ; - MissedLoopOptimization::runWithMaxValue@11 (line 30)\n  0x000000000254fb63: test   %eax,-0x241fb69(%rip)        # 0x0000000000130000\n                                                ;*goto\n                                                ; - MissedLoopOptimization::runWithMaxValue@11 (line 30)\n                                                ;   {poll}\n  0x000000000254fb69: cmp    $0x7fffffff,%r11d\n  0x000000000254fb70: jl     0x000000000254fb60  ;*if_icmpge\n                                                ; - MissedLoopOptimization::runWithMaxValue@8 (line 30)\n  0x000000000254fb72: add    $0x10,%rsp\n  0x000000000254fb76: pop    %rbp\n  0x000000000254fb77: test   %eax,-0x241fb7d(%rip)        # 0x0000000000130000\n                                                ;   {poll_return}\n  0x000000000254fb7d: retq   \n  0x000000000254fb7e: hlt    \n  0x000000000254fb7f: hlt    \n[Exception Handler]\n[Stub Code]\n  0x000000000254fb80: jmpq   0x000000000254e820  ;   {no_reloc}\n[Deopt Handler Code]\n  0x000000000254fb85: callq  0x000000000254fb8a\n  0x000000000254fb8a: subq   $0x5,(%rsp)\n  0x000000000254fb8f: jmpq   0x0000000002528d00  ;   {runtime_call}\n  0x000000000254fb94: hlt    \n  0x000000000254fb95: hlt    \n  0x000000000254fb96: hlt    \n  0x000000000254fb97: hlt    \n</code></pre>\n\n<p>One can clearly see the loop, with the comparison to <code>0x7fffffff</code> and the jump back to <code>inc</code>. In contrast to that, the assembly for the case where it is running up to <code>MAX_VALUE-1</code>:</p>\n\n<pre><code>Decoding compiled method 0x000000000254f650:\nCode:\n[Entry Point]\n[Verified Entry Point]\n[Constants]\n  # {method} &amp;apos;runWithMaxValueMinusOne&amp;apos; &amp;apos;()V&amp;apos; in &amp;apos;MissedLoopOptimization&amp;apos;\n  #           [sp+0x20]  (sp of caller)\n  0x000000000254f780: sub    $0x18,%rsp\n  0x000000000254f787: mov    %rbp,0x10(%rsp)    ;*synchronization entry\n                                                ; - MissedLoopOptimization::runWithMaxValueMinusOne@-1 (line 36)\n  0x000000000254f78c: add    $0x10,%rsp\n  0x000000000254f790: pop    %rbp\n  0x000000000254f791: test   %eax,-0x241f797(%rip)        # 0x0000000000130000\n                                                ;   {poll_return}\n  0x000000000254f797: retq   \n  0x000000000254f798: hlt    \n  0x000000000254f799: hlt    \n  0x000000000254f79a: hlt    \n  0x000000000254f79b: hlt    \n  0x000000000254f79c: hlt    \n  0x000000000254f79d: hlt    \n  0x000000000254f79e: hlt    \n  0x000000000254f79f: hlt    \n[Exception Handler]\n[Stub Code]\n  0x000000000254f7a0: jmpq   0x000000000254e820  ;   {no_reloc}\n[Deopt Handler Code]\n  0x000000000254f7a5: callq  0x000000000254f7aa\n  0x000000000254f7aa: subq   $0x5,(%rsp)\n  0x000000000254f7af: jmpq   0x0000000002528d00  ;   {runtime_call}\n  0x000000000254f7b4: hlt    \n  0x000000000254f7b5: hlt    \n  0x000000000254f7b6: hlt    \n  0x000000000254f7b7: hlt    \n</code></pre>\n\n<p>So my question is: What is so special about the <code>Integer.MAX_VALUE</code> that prevents the JIT from optimizing it in the same way as it does for <code>Integer.MAX_VALUE-1</code>? My guess would be that has to do with the <code>cmp</code> instruction, which is intended for <em>signed</em> arithmetic, but that alone is not really a convincing reason. Can anybody explain this, and maybe even give a pointer to the OpenJDK HotSpot code where this case is treated?</p>\n\n<p>(An aside: I hope that the answer will also explain the different behavior between <code>i++</code> and <code>++i</code> that was asked for in the other question, assuming that the reason for the missing optimization is (obviously) <em>actually</em> caused by the <code>Integer.MAX_VALUE</code> loop limit)</p>\n", "tags": ["java", "compiler-optimization", "jit", "jvm-hotspot"], "title": "JIT not optimizing loop that involves Integer.MAX_VALUE", "answers": [{"body": "<p>I have not dug up the Java Language Specification, but I'd guess that it has to do with this difference:</p>\n\n<ul>\n<li><p><code>i++ &lt; (Integer.MAX_VALUE - 1)</code> never overflows. Once <code>i</code> reaches <code>Integer.MAX_VALUE - 1</code> it is incremented to <code>Integer.MAX_VALUE</code> and then the loop terminates.</p></li>\n<li><p><code>i++ &lt; Integer.MAX_VALUE</code> contains an integer overflow. Once <code>i</code> reaches <code>Integer.MAX_VALUE</code>, it is incremented by one causing an overflow and <em>then</em> the loop terminates.</p></li>\n</ul>\n\n<p>I assume that the JIT compiler is \"reluctant\" to optimize-out loops with such corner conditions - there was a <a href=\"http://bugs.java.com/bugdatabase/view_bug.do?bug_id=5091921\">whole bunch of bugs</a> w.r.t. loop optimization in integer overflow conditions, so that reluctance is probably quite warranted.</p>\n\n<p>There may also be some hard requirement that does not allow integer overflows to be optimized-out, although I somehow doubt that since integer overflows are not directly detectable or otherwise handled in Java.</p>\n", "title": "JIT not optimizing loop that involves Integer.MAX_VALUE", "tags": ["java", "compiler-optimization", "jit", "jvm-hotspot"], "link": "http://stackoverflow.com/questions/25326377/jit-not-optimizing-loop-that-involves-integer-max-value/25326461#25326461", "question_id": 25326377, "answer_id": 25326461}], "creation_date": 1408105616, "score": 46, "link": "http://stackoverflow.com/questions/25326377/jit-not-optimizing-loop-that-involves-integer-max-value", "question_id": 25326377}, {"body": "<p>To avoid warnings regarding special characters when building my Java source code, I put this line in my <code>gradle.build</code> which worked fine before upgrading to Gradle 2.0:</p>\n\n<pre><code>tasks.withType(Compile) { options.encoding = \"UTF-8\" }\n</code></pre>\n\n<p>After upgrading, this fails with the following error:</p>\n\n<pre><code>Could not find property 'Compile' on root project\n</code></pre>\n\n<p>How can I fix that?</p>\n", "tags": ["java", "gradle"], "title": "After upgrading to Gradle 2.0: Could not find property &#39;Compile&#39; on root project", "answers": [{"body": "<p>Changing the line to</p>\n\n<pre><code>tasks.withType(JavaCompile) { options.encoding = \"UTF-8\" }\n</code></pre>\n\n<p>fixed the issue.</p>\n", "title": "After upgrading to Gradle 2.0: Could not find property &#39;Compile&#39; on root project", "tags": ["java", "gradle"], "link": "http://stackoverflow.com/questions/24668746/after-upgrading-to-gradle-2-0-could-not-find-property-compile-on-root-project/24668747#24668747", "question_id": 24668746, "answer_id": 24668747}, {"body": "<p>For Groovy based projects. It'd be:</p>\n\n<pre><code>tasks.withType(GroovyCompile) {\n    options.debug = true\n}\n</code></pre>\n", "title": "After upgrading to Gradle 2.0: Could not find property &#39;Compile&#39; on root project", "tags": ["java", "gradle"], "link": "http://stackoverflow.com/questions/24668746/after-upgrading-to-gradle-2-0-could-not-find-property-compile-on-root-project/31734830#31734830", "question_id": 24668746, "answer_id": 31734830}, {"body": "<p><strong>use \u2018task.withType(JavaComplie)\u2019</strong></p>\n\n<p>----------------------mine-------------------------</p>\n\n<pre><code>buildscript {\n    repositories {\n        jcenter()\n    }\n\n    dependencies {\n        classpath 'com.bmuschko:gradle-tomcat-plugin:2.2.3'\n    }\n\n  tasks.withType(JavaCompile) {\n      options.debug = true\n      options.debugOptions.debugLevel = \"source,lines,vars\"\n      options.encoding = \"UTF-8\"\n  }\n}\n</code></pre>\n", "title": "After upgrading to Gradle 2.0: Could not find property &#39;Compile&#39; on root project", "tags": ["java", "gradle"], "link": "http://stackoverflow.com/questions/24668746/after-upgrading-to-gradle-2-0-could-not-find-property-compile-on-root-project/33340885#33340885", "question_id": 24668746, "answer_id": 33340885}], "creation_date": 1404968087, "score": 45, "link": "http://stackoverflow.com/questions/24668746/after-upgrading-to-gradle-2-0-could-not-find-property-compile-on-root-project", "question_id": 24668746}, {"body": "<p>I recently downloaded JDK 1.8.0.0_06 that comes bundled with NetBeans. I then got to find out that my JavaFx project, that I have been developing in Java 1.7 won't compile in Java 1.8, and so I stepped down my jdk to 1.7. Still I can't get it to work/ compile. I get this error:</p>\n\n<pre><code>javac: invalid target release: 1.8\nUsage: javac &lt;options&gt; &lt;source files&gt;\n</code></pre>\n\n<p>I'm really stuck and would greately appreciate any help. Thank you.</p>\n", "tags": ["java", "netbeans", "javafx", "runtime-error"], "title": "javac: invalid target release: 1.8", "answers": [{"body": "<p>if you are going to step down, then change your project's source to 1.7 as well, </p>\n\n<pre><code>right click on your Project -&gt; Properties -&gt; Sources window \n</code></pre>\n\n<p>and set <code>1.7</code> here</p>\n\n<p><sub>note: however I would suggest you to figure out why it doesn't work on 1.8</sub></p>\n", "title": "javac: invalid target release: 1.8", "tags": ["java", "netbeans", "javafx", "runtime-error"], "link": "http://stackoverflow.com/questions/24766591/javac-invalid-target-release-1-8/24767013#24767013", "question_id": 24766591, "answer_id": 24767013}, {"body": "<p>Your javac is not pointing to correct java.</p>\n\n<p>Check where your javac is pointing using following command -</p>\n\n<pre><code>update-alternatives --config javac\n</code></pre>\n\n<p>If it is not pointed to the javac you want to compile with, point it to \"/JAVA8_HOME/bin/javac\", or which ever java you want to compile with.</p>\n", "title": "javac: invalid target release: 1.8", "tags": ["java", "netbeans", "javafx", "runtime-error"], "link": "http://stackoverflow.com/questions/24766591/javac-invalid-target-release-1-8/27834080#27834080", "question_id": 24766591, "answer_id": 27834080}, {"body": "<ol>\n<li>Download <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\">JDK 8</a>.</li>\n<li><p>Edit your env var for <code>JAVA_HOME</code> to point to the new installed JDK 1.8:\nR-click on My Computer -> Properties -> Advanced System Settings -> Environment Variables\nfind <code>JAVA_HOME</code> on the list and set it's value to something like that:</p>\n\n<pre><code>C:\\Program Files\\Java\\jdk1.8.0_31\n</code></pre></li>\n<li><p>Find the old version and edit it in <code>PATH</code> variable aswell.</p></li>\n<li>Probably you will need to restart the system.</li>\n</ol>\n\n<p>Should be done.</p>\n", "title": "javac: invalid target release: 1.8", "tags": ["java", "netbeans", "javafx", "runtime-error"], "link": "http://stackoverflow.com/questions/24766591/javac-invalid-target-release-1-8/28340789#28340789", "question_id": 24766591, "answer_id": 28340789}, {"body": "<p>For IntelliJ14 you may have to change the bytecode version w.r.t. the JDK you are using (in the global settings):</p>\n\n<p><img src=\"http://i.stack.imgur.com/1P4Uo.png\" alt=\"enter image description here\"></p>\n", "title": "javac: invalid target release: 1.8", "tags": ["java", "netbeans", "javafx", "runtime-error"], "link": "http://stackoverflow.com/questions/24766591/javac-invalid-target-release-1-8/29811355#29811355", "question_id": 24766591, "answer_id": 29811355}, {"body": "<p>Maven setting:</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n</code></pre>\n", "title": "javac: invalid target release: 1.8", "tags": ["java", "netbeans", "javafx", "runtime-error"], "link": "http://stackoverflow.com/questions/24766591/javac-invalid-target-release-1-8/30329717#30329717", "question_id": 24766591, "answer_id": 30329717}, {"body": "<p>If this error occurs when running a Gradle (or Maven) task, you need to modify that build tool configuration to point to your installation of Java JDK 1.8 following this route:</p>\n\n<p>File -> Settings -> Build, Execution, Deployment -> Build Tools -> Gradle</p>\n\n<p>There you check the Linked Gradle project is the one you are working on and select the Gradle JVM (You missed this when you imported the gradle project into IntelliJ)</p>\n\n<p><a href=\"http://i.stack.imgur.com/ACLCw.png\"><img src=\"http://i.stack.imgur.com/ACLCw.png\" alt=\"enter image description here\"></a></p>\n\n<p>Remember when importing a Gradle (or Maven) project to set the target JVM correctly here:\n<a href=\"http://i.stack.imgur.com/cqL3B.png\"><img src=\"http://i.stack.imgur.com/cqL3B.png\" alt=\"enter image description here\"></a></p>\n", "title": "javac: invalid target release: 1.8", "tags": ["java", "netbeans", "javafx", "runtime-error"], "link": "http://stackoverflow.com/questions/24766591/javac-invalid-target-release-1-8/32190543#32190543", "question_id": 24766591, "answer_id": 32190543}, {"body": "<blockquote>\n  <p>if you are going to step down, then change your project's source to\n  1.7 as well,</p>\n  \n  <p>right click on your Project -> Properties -> Sources window  and set\n  1.7 here\" Jigar Joshi</p>\n</blockquote>\n\n<p>Also go to the <code>build-impl.xml</code> and look for the property <code>excludeFromCopy=\"${copylibs.excludes}\"</code> and delete this property on my code was at line 827 but I`ve seen it on other lines</p>\n\n<p>for me was taking a code from MAC OS java 1.8 to WIN XP java 1.7</p>\n", "title": "javac: invalid target release: 1.8", "tags": ["java", "netbeans", "javafx", "runtime-error"], "link": "http://stackoverflow.com/questions/24766591/javac-invalid-target-release-1-8/32597398#32597398", "question_id": 24766591, "answer_id": 32597398}, {"body": "<p>Alternatively,\nI checked the pom.xml and \nchanged </p>\n\n<pre><code>&lt;java.version&gt;1.8&lt;/java.version&gt;\n</code></pre>\n\n<p>to </p>\n\n<pre><code>&lt;java.version&gt;1.7&lt;/java.version&gt;\n</code></pre>\n", "title": "javac: invalid target release: 1.8", "tags": ["java", "netbeans", "javafx", "runtime-error"], "link": "http://stackoverflow.com/questions/24766591/javac-invalid-target-release-1-8/35341651#35341651", "question_id": 24766591, "answer_id": 35341651}, {"body": "<p>Most of the time, these type of issues happen due to incorrect java version. Make sure your PATH and JAVA_HOME variables are pointing to the correct version.</p>\n", "title": "javac: invalid target release: 1.8", "tags": ["java", "netbeans", "javafx", "runtime-error"], "link": "http://stackoverflow.com/questions/24766591/javac-invalid-target-release-1-8/37424885#37424885", "question_id": 24766591, "answer_id": 37424885}, {"body": "<p>None of the previous solutions worked for me.</p>\n\n<p>I solved it by editing .idea/compiler.xml\nThere were \"extra\" (1) and (2) copies of the bad module with different targets.  I deleted the extraneous entried and changed the targets in the  section to 1.8 and it worked.</p>\n", "title": "javac: invalid target release: 1.8", "tags": ["java", "netbeans", "javafx", "runtime-error"], "link": "http://stackoverflow.com/questions/24766591/javac-invalid-target-release-1-8/38459120#38459120", "question_id": 24766591, "answer_id": 38459120}], "creation_date": 1405452563, "score": 44, "link": "http://stackoverflow.com/questions/24766591/javac-invalid-target-release-1-8", "question_id": 24766591}, {"body": "<p>I try to find a simple way in Java8 stream API to do the grouping, I come out with this complex way!</p>\n\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;&gt;();\n\nlist.add(\"Hello\");\nlist.add(\"Hello\");\nlist.add(\"World\");\n\nMap&lt;String, List&lt;String&gt;&gt; collect = list.stream().collect(\n        Collectors.groupingBy(o -&gt; o));\nSystem.out.println(collect);\n\nList&lt;String[]&gt; collect2 = collect\n        .entrySet()\n        .stream()\n        .map(e -&gt; new String[] { e.getKey(),\n                String.valueOf(e.getValue().size()) })\n        .collect(Collectors.toList());\n\ncollect2.forEach(o -&gt; System.out.println(o[0] + \" &gt;&gt; \" + o[1]));\n</code></pre>\n\n<p>I appreciate your input.</p>\n", "tags": ["java", "functional-programming", "java-8"], "title": "Group by counting in Java8 stream API", "answers": [{"body": "<p>I think you're just looking for the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#groupingBy-java.util.function.Function-java.util.stream.Collector-\">overload</a> which takes another <code>Collector</code> to specify what to do with each group... and then <code>Collectors.counting()</code> to do the counting:</p>\n\n<pre><code>import java.util.*;\nimport java.util.stream.*;\n\nclass Test {\n    public static void main(String[] args) {\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\n\n        list.add(\"Hello\");\n        list.add(\"Hello\");\n        list.add(\"World\");\n\n        Map&lt;String, Long&gt; counted = list.stream()\n            .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()));\n\n        System.out.println(counted);\n    }\n}\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>{Hello=2, World=1}\n</code></pre>\n\n<p>(There's also the possibility of using <code>groupingByConcurrent</code> for more efficiency. Something to bear in mind for your real code, if it would be safe in your context.)</p>\n", "title": "Group by counting in Java8 stream API", "tags": ["java", "functional-programming", "java-8"], "link": "http://stackoverflow.com/questions/25441088/group-by-counting-in-java8-stream-api/25441208#25441208", "question_id": 25441088, "answer_id": 25441208}], "creation_date": 1408689981, "score": 44, "link": "http://stackoverflow.com/questions/25441088/group-by-counting-in-java8-stream-api", "question_id": 25441088}, {"body": "<p>Just created a Nexus 10 emulator but when I start it, the wrong resolution is displayed. It keeps appearing as 800 x 1280 when it should be appearing as 2560 x 1600. Does anyone know what on earth is going on and how this can be fixed?</p>\n\n<p><img src=\"http://i.stack.imgur.com/vasAv.png\" alt=\"wrong res\">\n<img src=\"http://i.stack.imgur.com/BK7SY.png\" alt=\"Correct res\">\n<img src=\"http://i.stack.imgur.com/qTfY5.png\" alt=\"wrong res in Nexus 10 emulator\"></p>\n", "tags": ["java", "android", "android-studio", "adt", "nexus-10"], "title": "Android Studio - Tablet emulator not showing correct resolution", "answers": [{"body": "<p>As requested by OP,</p>\n\n<p>In the last step while creating your AVD, go to <strong>Advance Settings</strong> and select appropriate <strong>skin</strong> (or preferably select '<strong>No Skin</strong>' option) to make sure your it comes with the resolution that you want.</p>\n\n<p><img src=\"http://i.stack.imgur.com/Ss74i.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/8oiMP.png\" alt=\"enter image description here\"></p>\n", "title": "Android Studio - Tablet emulator not showing correct resolution", "tags": ["java", "android", "android-studio", "adt", "nexus-10"], "link": "http://stackoverflow.com/questions/27581839/android-studio-tablet-emulator-not-showing-correct-resolution/27581959#27581959", "question_id": 27581839, "answer_id": 27581959}], "creation_date": 1419090709, "score": 44, "link": "http://stackoverflow.com/questions/27581839/android-studio-tablet-emulator-not-showing-correct-resolution", "question_id": 27581839}, {"body": "<p>Why am I getting a \"401 Unauthorized\" error in Maven?</p>\n\n<p>Here's the error I'm getting when calling <code>mvn deploy</code> (full logs at the bottom):</p>\n\n<p><code>[INFO] BUILD FAILURE</code><br>\n<code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy (default-deploy) on project xbnjava: Failed to deploy artifacts: Could not transfer artifact com.github.aliteralmind:xbnjava:pom:0.1.2 from/to sonatype-nexus-staging (https://oss.sonatype.org/service/local/staging/deploy/maven2/): Failed to transfer file: https://oss.sonatype.org/service/local/staging/deploy/maven2/com/github/aliteralmind/xbnjava/0.1.2/xbnjava-0.1.2.pom. Return code is: 401, ReasonPhrase: Unauthorized. -&gt; [Help 1]</code></p>\n\n<p>According to this <a href=\"https://issues.sonatype.org/browse/NEXUS-5073\">sonatype support page</a>:</p>\n\n<blockquote>\n  <p>\"If you are receiving a 401 it is because maven is sending the wrong login credentials, or no credentials at all.\"</p>\n</blockquote>\n\n<p>Below are the steps I've taken, below that are my full <code>settings.xml</code> and <code>pom.xml</code> files, and below that are the full logs from <code>mvn deploy</code> and <code>mvn deploy -e</code>.</p>\n\n<p>Any ideas would be appreciated. I am just hitting wall after wall with Maven.</p>\n\n<hr>\n\n<p>I followed <a href=\"http://blog.sonatype.com/2010/11/what-to-do-when-nexus-returns-401/\">sonatype's checklist</a> when receiving a 401 error:</p>\n\n<blockquote>\n  <p><strong>Checklist item 1</strong>. <em>Make sure your username/password is correct by logging into the Nexus UI. If curl is installed on your machine, you can try deploying an artifact with...</em></p>\n</blockquote>\n\n<ul>\n<li>I successfully logged in and out of the sonatype.org website, using the user/pass in <code>settings.xml</code>.</li>\n<li>I <em>attempted</em> to use <code>curl</code> to manually deploy an artifact, with the command</li>\n</ul>\n\n<p><code>[C:\\]curl -u MY_SONATYPE_DOT_COM_USERNAME:MY_SONATYPE_DOT_COM_PASSWORD https://oss.sonatype.org/content/repositories/snapshots/com/github/aliteralmind/xbnjava/0.1.2-SNAPSHOT/xbnjava-0.1.2-20140716.224928-1.pom --request PUT --data @pom.xml</code></p>\n\n<p>but got this error:</p>\n\n<pre><code>Warning: Couldn't read data from file \"pom.xml\", this makes an empty POST.\ncurl: (60) SSL certificate problem, verify that the CA cert is OK. Details:\nerror:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed\nMore details here: http://curl.haxx.se/docs/sslcerts.html\n\ncurl performs SSL certificate verification by default, using a \"bundle\"\n of Certificate Authority (CA) public keys (CA certs). If the default\n bundle file isn't adequate, you can specify an alternate file\n using the --cacert option.\nIf this HTTPS server uses a certificate signed by a CA represented in\n the bundle, the certificate verification probably failed due to a\n problem with the certificate (it might be expired, or the name might\n not match the domain name in the URL).\nIf you'd like to turn off curl's verification of the certificate, use\n the -k (or --insecure) option.\n</code></pre>\n\n<p>I ran it again with the <code>-k</code> option, and this time got only this:</p>\n\n<pre><code>Couldn't read data from file \"pom.xml\", this makes an empty POST.\n</code></pre>\n\n<p>I've never used curl before, so I'm at a loss on what to do with this information.</p>\n\n<blockquote>\n  <p><strong>Checklist item 2</strong>. <em>If there is no error output, ensure your user privileges are correctly configured on the server.  Make sure to drop the repo you just created.</em></p>\n</blockquote>\n\n<p>I don't know what \"drop\" means. I believe my privileges are properly installed, as I received this message from sonatype:</p>\n\n<ul>\n<li>Configuration has been prepared, now you can:</li>\n<li>Deploy snapshot artifacts into repository <a href=\"https://oss.sonatype.org/content/repositories/snapshots\">https://oss.sonatype.org/content/repositories/snapshots</a></li>\n<li>Deploy release artifacts into the staging repository <a href=\"https://oss.sonatype.org/service/local/staging/deploy/maven2\">https://oss.sonatype.org/service/local/staging/deploy/maven2</a></li>\n<li>Promote staged artifacts into repository 'Releases'</li>\n<li>Download snapshot and release artifacts from group <a href=\"https://oss.sonatype.org/content/groups/public\">https://oss.sonatype.org/content/groups/public</a></li>\n<li>Download snapshot, release and staged artifacts from staging group <a href=\"https://oss.sonatype.org/content/groups/staging\">https://oss.sonatype.org/content/groups/staging</a></li>\n</ul>\n\n<p>and I <em>have</em> successfully put <a href=\"https://oss.sonatype.org/content/repositories/snapshots/com/github/aliteralmind/xbnjava/0.1.2-SNAPSHOT/\">these items</a> onto the server via <code>mvn deploy</code> in the past couple days.</p>\n\n<p>The project's settings:</p>\n\n<p><img src=\"http://i.stack.imgur.com/O4Gz7.jpg\" alt=\"project settings\"></p>\n\n<blockquote>\n  <p><strong>Checklist item 3</strong>. <em>Make sure you have configured a server in <code>settings.xml</code> and that the server id is identical to the distribution repository id in pom.xml.</em></p>\n</blockquote>\n\n<ul>\n<li>In <code>settings.xml</code>, settings/servers/server/id equals <code>ossrh</code></li>\n<li>In <code>pom.xml</code>, distributionManagement/snapshotRepository/id equals <code>ossrh</code></li>\n</ul>\n\n<p>(full files are at the bottom)</p>\n\n<blockquote>\n  <p><strong>Checklist item 4</strong>. <em>Make sure your settings.xml is in the correct place (normally it\u2019s _~/.m2/settings.xml).  You can check this by running mvn help:effective-settings.</em></p>\n</blockquote>\n\n<p>According to Maven's <a href=\"http://maven.apache.org/settings.html#Quick_Overview\">settings reference</a>, settings.xml must be in one of two locations:</p>\n\n<ul>\n<li>The Maven install: <code>$M2_HOME/conf/settings.xml</code></li>\n<li>A user\u2019s install: <code>${user.home}/.m2/settings.xml</code></li>\n</ul>\n\n<p>Here's my setup:</p>\n\n<ul>\n<li><code>settings.xml</code>: <code>C:\\applications\\programming\\apache-maven-3.2.2\\conf\\settings.xml</code></li>\n<li><code>M2_HOME</code> is <code>C:\\applications\\programming\\apache-maven-3.2.2</code></li>\n</ul>\n\n<p>Output for <code>mvn help:effective-settings</code>:</p>\n\n<pre><code>[C:\\applications\\utilities\\curl]\n[INFO] Scanning for projects...\n[INFO]\n[INFO] ------------------------------------------------------------------------\n[INFO] Building Maven Stub Project (No POM) 1\n[INFO] ------------------------------------------------------------------------\n[INFO]\n[INFO] --- maven-help-plugin:2.2:effective-settings (default-cli) @ standalone-pom ---\n[INFO]\nEffective user-specific configuration settings:\n\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!-- ====================================================================== --&gt;\n&lt;!--                                                                        --&gt;\n&lt;!-- Generated by Maven Help Plugin on 2014-07-18T12:48:19                  --&gt;\n&lt;!-- See: http://maven.apache.org/plugins/maven-help-plugin/                --&gt;\n&lt;!--                                                                        --&gt;\n&lt;!-- ====================================================================== --&gt;\n\n&lt;!-- ====================================================================== --&gt;\n&lt;!--                                                                        --&gt;\n&lt;!-- Effective Settings for 'jeffy' on 'kermit-the-frog'                    --&gt;\n&lt;!--                                                                        --&gt;\n&lt;!-- ====================================================================== --&gt;\n\n&lt;settings xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:sc\nhemaLocation=\"http://maven.apache.org/SETTINGS/1.1.0 http://maven.apache.org/xsd/settings-1.1.0.xsd\"&gt;\n  &lt;localRepository xmlns=\"http://maven.apache.org/SETTINGS/1.1.0\"&gt;C:\\Users\\jeffy\\.m2\\repository&lt;/localRepository\n&gt;\n  &lt;servers xmlns=\"http://maven.apache.org/SETTINGS/1.1.0\"&gt;\n    &lt;server&gt;\n      &lt;username&gt;MY_SONATYPE_DOT_COM_USERNAME&lt;/username&gt;\n      &lt;password&gt;***&lt;/password&gt;\n      &lt;id&gt;ossrh&lt;/id&gt;\n    &lt;/server&gt;\n  &lt;/servers&gt;\n  &lt;pluginGroups xmlns=\"http://maven.apache.org/SETTINGS/1.1.0\"&gt;\n    &lt;pluginGroup&gt;org.apache.maven.plugins&lt;/pluginGroup&gt;\n    &lt;pluginGroup&gt;org.codehaus.mojo&lt;/pluginGroup&gt;\n  &lt;/pluginGroups&gt;\n&lt;/settings&gt;\n\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 2.310 s\n[INFO] Finished at: 2014-07-18T12:48:19-04:00\n[INFO] Final Memory: 7M/17M\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n\n<blockquote>\n  <p><strong>Checklist item 5</strong>. <em>If the server is using https but the URL in your POM is http, you might get 401 as well.</em></p>\n</blockquote>\n\n<p>I don't understand which url it's referring to.</p>\n\n<blockquote>\n  <p><strong>Checklist item 6</strong>. <em>Use the latest version of Maven, as there is a known issue regarding 401: MNG-4469</em></p>\n</blockquote>\n\n<p>I am using the latest version:</p>\n\n<pre><code>[C:\\]mvn -version\nApache Maven 3.2.2 (45f7c06d68e745d05611f7fd14efb6594181933e; 2014-06-17T09:51:42-04:00)\nMaven home: C:\\applications\\programming\\apache-maven-3.2.2\nJava version: 1.7.0_51, vendor: Oracle Corporation\nJava home: C:\\applications\\programming\\jdk_7_51\\jre\nDefault locale: en_US, platform encoding: Cp1252\nOS name: \"windows 7\", version: \"6.1\", arch: \"x86\", family: \"windows\"\n</code></pre>\n\n<h2>------------------</h2>\n\n<h2>Full <code>settings.xml</code> and <code>pom.xml</code> files</h2>\n\n<p>(Full logs for <code>mvn deploy</code> and <code>mvn deploy -e</code> below)</p>\n\n<p><code>settings.xml</code>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;settings xmlns=\"http://maven.apache.org/SETTINGS/1.0.0\"\n     xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n     xsi:schemaLocation=\"http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd\"&gt;\n   &lt;servers&gt;\n     &lt;server&gt;\n       &lt;id&gt;ossrh&lt;/id&gt;\n       &lt;username&gt;MY_SONATYPE_DOT_COM_USERNAME&lt;/username&gt;\n       &lt;password&gt;MY_SONATYPE_DOT_COM_PASSWORD&lt;/password&gt;\n     &lt;/server&gt;\n   &lt;/servers&gt;\n\n   &lt;pluginGroups&gt;&lt;/pluginGroups&gt;\n   &lt;proxies&gt;&lt;/proxies&gt;\n   &lt;mirrors&gt;&lt;/mirrors&gt;\n   &lt;profiles&gt;&lt;/profiles&gt;\n&lt;/settings&gt;\n</code></pre>\n\n<p>pom.xml:</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n   &lt;groupId&gt;com.github.aliteralmind&lt;/groupId&gt;\n   &lt;artifactId&gt;xbnjava&lt;/artifactId&gt;\n   &lt;packaging&gt;pom&lt;/packaging&gt;\n   &lt;version&gt;0.1.2&lt;/version&gt;\n   &lt;name&gt;XBN-Java&lt;/name&gt;\n   &lt;url&gt;https://github.com/aliteralmind/xbnjava&lt;/url&gt;\n   &lt;inceptionYear&gt;2014&lt;/inceptionYear&gt;\n   &lt;organization&gt;\n      &lt;name&gt;Jeff Epstein&lt;/name&gt;\n   &lt;/organization&gt;\n   &lt;description&gt;XBN-Java is a collection of generically-useful backend (server side, non-GUI) programming utilities, featuring RegexReplacer and FilteredLineIterator. XBN-Java is the foundation of Codelet (http://codelet.aliteralmind.com).&lt;/description&gt;\n\n   &lt;parent&gt;\n      &lt;groupId&gt;org.sonatype.oss&lt;/groupId&gt;\n      &lt;artifactId&gt;oss-parent&lt;/artifactId&gt;\n      &lt;version&gt;7&lt;/version&gt;\n   &lt;/parent&gt;\n\n   &lt;licenses&gt;\n      &lt;license&gt;\n         &lt;name&gt;Lesser General Public License (LGPL) version 3.0&lt;/name&gt;\n         &lt;url&gt;https://www.gnu.org/licenses/lgpl-3.0.txt&lt;/url&gt;\n      &lt;/license&gt;\n      &lt;license&gt;\n         &lt;name&gt;Apache Software License (ASL) version 2.0&lt;/name&gt;\n         &lt;url&gt;http://www.apache.org/licenses/LICENSE-2.0.txt&lt;/url&gt;\n      &lt;/license&gt;\n   &lt;/licenses&gt;\n\n   &lt;developers&gt;\n      &lt;developer&gt;\n         &lt;name&gt;Jeff Epstein&lt;/name&gt;\n         &lt;email&gt;aliteralmind-github@yahoo.com&lt;/email&gt;\n         &lt;roles&gt;\n            &lt;role&gt;Lead Developer&lt;/role&gt;\n         &lt;/roles&gt;\n      &lt;/developer&gt;\n   &lt;/developers&gt;\n\n   &lt;issueManagement&gt;\n      &lt;system&gt;GitHub Issue Tracker&lt;/system&gt;\n      &lt;url&gt;https://github.com/aliteralmind/xbnjava/issues&lt;/url&gt;\n   &lt;/issueManagement&gt;\n\n   &lt;distributionManagement&gt;\n      &lt;snapshotRepository&gt;\n         &lt;id&gt;ossrh&lt;/id&gt;\n         &lt;url&gt;https://oss.sonatype.org/content/repositories/snapshots&lt;/url&gt;\n      &lt;/snapshotRepository&gt;\n   &lt;/distributionManagement&gt;\n\n   &lt;scm&gt;\n      &lt;connection&gt;scm:git:git@github.com:aliteralmind/xbnjava.git&lt;/connection&gt;\n      &lt;url&gt;scm:git:git@github.com:aliteralmind/xbnjava.git&lt;/url&gt;\n      &lt;developerConnection&gt;scm:git:git@github.com:aliteralmind/xbnjava.git&lt;/developerConnection&gt;\n   &lt;/scm&gt;\n\n   &lt;properties&gt;\n      &lt;java.version&gt;1.7&lt;/java.version&gt;\n      &lt;jarprefix&gt;R:\\jeffy\\programming\\build\\/${project.artifactId}-${project.version}/download/${project.artifactId}-${project.version}&lt;/jarprefix&gt;\n   &lt;/properties&gt;\n&lt;!--\n  &lt;profiles&gt;\n    &lt;profile&gt;\n      &lt;id&gt;default-tools.jar&lt;/id&gt;\n      &lt;activation&gt;\n        &lt;property&gt;\n          &lt;name&gt;java.vendor&lt;/name&gt;\n          &lt;value&gt;Sun Microsystems Inc.&lt;/value&gt;\n        &lt;/property&gt;\n      &lt;/activation&gt;\n      &lt;dependencies&gt;\n        &lt;dependency&gt;\n          &lt;groupId&gt;com.sun&lt;/groupId&gt;\n          &lt;artifactId&gt;tools&lt;/artifactId&gt;\n          &lt;version&gt;1.4.2&lt;/version&gt;\n          &lt;scope&gt;system&lt;/scope&gt;\n          &lt;systemPath&gt;${java.home}/../lib/tools.jar&lt;/systemPath&gt;\n        &lt;/dependency&gt;\n      &lt;/dependencies&gt;\n    &lt;/profile&gt;\n  &lt;/profiles&gt;\n --&gt;\n   &lt;build&gt;\n      &lt;plugins&gt;\n         &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.8&lt;/version&gt;\n            &lt;executions&gt;\n               &lt;execution&gt;\n                  &lt;id&gt;attach-artifacts&lt;/id&gt;\n                  &lt;phase&gt;package&lt;/phase&gt;\n                  &lt;goals&gt;\n                     &lt;goal&gt;attach-artifact&lt;/goal&gt;\n                  &lt;/goals&gt;\n                  &lt;configuration&gt;\n                     &lt;artifacts&gt;\n                        &lt;artifact&gt;\n                           &lt;file&gt;${jarprefix}-all.jar&lt;/file&gt;\n                           &lt;type&gt;jar&lt;/type&gt;\n                        &lt;/artifact&gt;\n                     &lt;/artifacts&gt;\n                  &lt;/configuration&gt;\n               &lt;/execution&gt;\n            &lt;/executions&gt;\n         &lt;/plugin&gt;\n      &lt;/plugins&gt;\n   &lt;/build&gt;\n\n   &lt;profiles&gt;\n      &lt;!--\n      This profile will sign the JAR file, sources file, and javadocs file using the GPG key on the local machine.\n      See: https://docs.sonatype.org/display/Repository/How+To+Generate+PGP+Signatures+With+Maven\n      --&gt;\n      &lt;profile&gt;\n         &lt;id&gt;release-sign-artifacts&lt;/id&gt;\n         &lt;activation&gt;\n            &lt;property&gt;\n               &lt;name&gt;release&lt;/name&gt;\n               &lt;value&gt;true&lt;/value&gt;\n            &lt;/property&gt;\n         &lt;/activation&gt;\n      &lt;/profile&gt;\n   &lt;/profiles&gt;\n&lt;/project&gt;\n</code></pre>\n\n<h2>------------------</h2>\n\n<h2>Full logs for <code>mvn deploy</code> and <code>mvn deploy -e</code></h2>\n\n<p><code>mvn deploy</code> output:</p>\n\n<pre><code>[INFO] Scanning for projects...\n[INFO] ------------------------------------------------------------------------\n[INFO] Building XBN-Java 0.1.2\n[INFO] ------------------------------------------------------------------------\n[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ xbnjava ---\n[INFO] --- build-helper-maven-plugin:1.8:attach-artifact (attach-artifacts) @ xbnjava ---\n[INFO] --- maven-install-plugin:2.4:install (default-install) @ xbnjava ---\n[INFO] Installing R:\\jeffy\\programming\\sandbox\\z__for_git_commit_only\\xbnjava\\pom.xml to C:\\Users\\jeffy\\.m2\\repository\\com\\github\\aliteralmind\\xbnjava\\0.1.2\\xbnjava-0.1.2.pom\n[INFO] Installing R:\\jeffy\\programming\\build\\xbnjava-0.1.2\\download\\xbnjava-0.1.2-all.jar to C:\\Users\\jeffy\\.m2\\repository\\com\\github\\aliteralmind\\xbnjava\\0.1.2\\xbnjava-0.1.2.jar\n[INFO] --- maven-deploy-plugin:2.7:deploy (default-deploy) @ xbnjava ---\nUploading: https://oss.sonatype.org/service/local/staging/deploy/maven2/com/github/aliteralmind/xbnjava/0.1.2/xbnjava-0.1.2.pom\n2/6 KB\n4/6 KB\n6/6 KB\n</code></pre>\n\n<p>(Failure section:)</p>\n\n<pre><code>[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 3.204 s\n[INFO] Finished at: 2014-07-18T11:25:17-04:00\n[INFO] Final Memory: 7M/17M\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy (default-deploy) on project xbnjava: Failed to deploy artifacts: Could not transfer artifact com.github.aliteralmind:xbnjava:pom:0.1.2 from/to sonatype-nexus-staging (https://oss.sonatype.org/service/local/staging/deploy/maven2/): Failed to transfer file: https://oss.sonatype.org/service/local/staging/deploy/maven2/com/github/aliteralmind/xbnjava/0.1.2/xbnjava-0.1.2.pom. Return code is: 401, ReasonPhrase: Unauthorized. -&gt; [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n</code></pre>\n\n<p><code>mvn deploy -e</code> output:</p>\n\n<pre><code>[INFO] Error stacktraces are turned on.\n[INFO] Scanning for projects...\n[INFO] ------------------------------------------------------------------------\n[INFO] Building XBN-Java 0.1.2\n[INFO] ------------------------------------------------------------------------\n[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ xbnjava ---\n[INFO] --- build-helper-maven-plugin:1.8:attach-artifact (attach-artifacts) @ xbnjava ---\n[INFO] --- maven-install-plugin:2.4:install (default-install) @ xbnjava ---\n[INFO] Installing R:\\jeffy\\programming\\sandbox\\z__for_git_commit_only\\xbnjava\\pom.xml to C:\\Users\\jeffy\\.m2\\repository\\com\\github\\aliteralmind\\xbnjava\\0.1.2\\xbnjava-0.1.2.pom\n[INFO] Installing R:\\jeffy\\programming\\build\\xbnjava-0.1.2\\download\\xbnjava-0.1.2-all.jar to C:\\Users\\jeffy\\.m2\\repository\\com\\github\\aliteralmind\\xbnjava\\0.1.2\\xbnjava-0.1.2.jar\n[INFO] --- maven-deploy-plugin:2.7:deploy (default-deploy) @ xbnjava ---\nUploading: https://oss.sonatype.org/service/local/staging/deploy/maven2/com/github/aliteralmind/xbnjava/0.1.2/xbnjava-0.1.2.pom\n2/6 KB\n4/6 KB\n6/6 KB\n</code></pre>\n\n<p>(Failure section:)</p>\n\n<pre><code>[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 3.492 s\n[INFO] Finished at: 2014-07-18T11:25:37-04:00\n[INFO] Final Memory: 7M/17M\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy (default-deploy) on project xbnjava: Failed to deploy artifacts: Could not transfer artifact com.github.aliteralmind:xbnjava:pom:0.1.2 from/to sonatype-nexus-staging (https://oss.sonatype.org/service/local/staging/deploy/maven2/): Failed to transfer file: https://oss.sonatype.org/service/local/staging/deploy/maven2/com/github/aliteralmind/xbnjava/0.1.2/xbnjava-0.1.2.pom. Return code is: 401, ReasonPhrase: Unauthorized. -&gt; [Help 1]\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy (default-deploy) on project xbnjava: Failed to deploy artifacts: Could not transfer artifact com.github.aliteralmind:xbnjava:pom:0.1.2 from/to sonatype-nexus-staging (https://oss.sonatype.org/service/local/staging/deploy/maven2/): Failed to transfer file: https://oss.sonatype.org/service/local/staging/deploy/maven2/com/github/aliteralmind/xbnjava/0.1.2/xbnjava-0.1.2.pom. Return code is: 401, ReasonPhrase: Unauthorized.\n   at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:216)\n   at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)\n   at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)\n   at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:116)\n   at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:80)\n   at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:51)\n   at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:120)\n   at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:347)\n   at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:154)\n   at org.apache.maven.cli.MavenCli.execute(MavenCli.java:584)\n   at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:213)\n   at org.apache.maven.cli.MavenCli.main(MavenCli.java:157)\n   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n   at java.lang.reflect.Method.invoke(Method.java:606)\n   at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)\n   at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)\n   at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415)\n   at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)\nCaused by: org.apache.maven.plugin.MojoExecutionException: Failed to deploy artifacts: Could not transfer artifact com.github.aliteralmind:xbnjava:pom:0.1.2 from/to sonatype-nexus-staging (https://oss.sonatype.org/service/local/staging/deploy/maven2/): Failed to transfer file: https://oss.sonatype.org/service/local/staging/deploy/maven2/com/github/aliteralmind/xbnjava/0.1.2/xbnjava-0.1.2.pom. Return code is: 401, ReasonPhrase: Unauthorized.\n   at org.apache.maven.plugin.deploy.DeployMojo.execute(DeployMojo.java:193)\n   at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:132)\n   at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:208)\n   ... 19 more\nCaused by: org.apache.maven.artifact.deployer.ArtifactDeploymentException: Failed to deploy artifacts: Could not transfer artifact com.github.aliteralmind:xbnjava:pom:0.1.2 from/to sonatype-nexus-staging (https://oss.sonatype.org/service/local/staging/deploy/maven2/): Failed to transfer file: https://oss.sonatype.org/service/local/staging/deploy/maven2/com/github/aliteralmind/xbnjava/0.1.2/xbnjava-0.1.2.pom. Return code is: 401, ReasonPhrase: Unauthorized.\n   at org.apache.maven.artifact.deployer.DefaultArtifactDeployer.deploy(DefaultArtifactDeployer.java:143)\n   at org.apache.maven.plugin.deploy.AbstractDeployMojo.deploy(AbstractDeployMojo.java:167)\n   at org.apache.maven.plugin.deploy.DeployMojo.execute(DeployMojo.java:149)\n   ... 21 more\nCaused by: org.eclipse.aether.deployment.DeploymentException: Failed to deploy artifacts: Could not transfer artifact com.github.aliteralmind:xbnjava:pom:0.1.2 from/to sonatype-nexus-staging (https://oss.sonatype.org/service/local/staging/deploy/maven2/): Failed to transfer file: https://oss.sonatype.org/service/local/staging/deploy/maven2/com/github/aliteralmind/xbnjava/0.1.2/xbnjava-0.1.2.pom. Return code is: 401, ReasonPhrase: Unauthorized.\n   at org.eclipse.aether.internal.impl.DefaultDeployer.deploy(DefaultDeployer.java:337)\n   at org.eclipse.aether.internal.impl.DefaultDeployer.deploy(DefaultDeployer.java:268)\n   at org.eclipse.aether.internal.impl.DefaultRepositorySystem.deploy(DefaultRepositorySystem.java:413)\n   at org.apache.maven.artifact.deployer.DefaultArtifactDeployer.deploy(DefaultArtifactDeployer.java:139)\n   ... 23 more\nCaused by: org.eclipse.aether.transfer.ArtifactTransferException: Could not transfer artifact com.github.aliteralmind:xbnjava:pom:0.1.2 from/to sonatype-nexus-staging (https://oss.sonatype.org/service/local/staging/deploy/maven2/): Failed to transfer file: https://oss.sonatype.org/service/local/staging/deploy/maven2/com/github/aliteralmind/xbnjava/0.1.2/xbnjava-0.1.2.pom. Return code is: 401, ReasonPhrase: Unauthorized.\n   at org.eclipse.aether.connector.wagon.WagonRepositoryConnector$6.wrap(WagonRepositoryConnector.java:1016)\n   at org.eclipse.aether.connector.wagon.WagonRepositoryConnector$6.wrap(WagonRepositoryConnector.java:1004)\n   at org.eclipse.aether.connector.wagon.WagonRepositoryConnector$PutTask.run(WagonRepositoryConnector.java:895)\n   at org.eclipse.aether.connector.wagon.WagonRepositoryConnector.put(WagonRepositoryConnector.java:522)\n   at org.eclipse.aether.internal.impl.DefaultDeployer.deploy(DefaultDeployer.java:331)\n   ... 26 more\nCaused by: org.apache.maven.wagon.TransferFailedException: Failed to transfer file: https://oss.sonatype.org/service/local/staging/deploy/maven2/com/github/aliteralmind/xbnjava/0.1.2/xbnjava-0.1.2.pom. Return code is: 401, ReasonPhrase: Unauthorized.\n   at org.apache.maven.wagon.providers.http.AbstractHttpClientWagon.put(AbstractHttpClientWagon.java:573)\n   at org.apache.maven.wagon.providers.http.AbstractHttpClientWagon.put(AbstractHttpClientWagon.java:493)\n   at org.apache.maven.wagon.providers.http.AbstractHttpClientWagon.put(AbstractHttpClientWagon.java:474)\n   at org.apache.maven.wagon.providers.http.AbstractHttpClientWagon.put(AbstractHttpClientWagon.java:454)\n   at org.eclipse.aether.connector.wagon.WagonRepositoryConnector$PutTask.run(WagonRepositoryConnector.java:871)\n   ... 28 more\n[ERROR]\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n</code></pre>\n", "tags": ["java", "maven"], "title": "Why am I getting a &quot;401 Unauthorized&quot; error in Maven?", "answers": [{"body": "<p>just change in settings.xml these as aliteralmind says:  </p>\n\n<pre><code>   &lt;username&gt;MY_SONATYPE_DOT_COM_USERNAME&lt;/username&gt;\n   &lt;password&gt;MY_SONATYPE_DOT_COM_PASSWORD&lt;/password&gt;\n</code></pre>\n\n<p>you probably need to get the username / password from sonatype dot com.  </p>\n", "title": "Why am I getting a &quot;401 Unauthorized&quot; error in Maven?", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/24830610/why-am-i-getting-a-401-unauthorized-error-in-maven/24831055#24831055", "question_id": 24830610, "answer_id": 24831055}, {"body": "<p>I've had similar errors when trying to deploy a Gradle artefact to a Nexus Sonatype repository.  You will get a 401 Unauthorized error if you supply the wrong credentials (password etc).  You also get an error (and off the top of my head is also a 401) if you try to publish something to a releases repository <strong>and that version already exists in the repository.</strong>  So you might find that by publishing from the command line it works, but then when you do it from a script it fails (because it didn't exist in the repository the first time around).  Either publish using a different version number, or delete the old artefact on the server and republish.</p>\n\n<p>The SNAPSHOTS repository (as opposed to the releases repository) allows you to overwrite a similarly numbered version, but your version number should have \"-SNAPSHOT\" at the end of it.</p>\n", "title": "Why am I getting a &quot;401 Unauthorized&quot; error in Maven?", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/24830610/why-am-i-getting-a-401-unauthorized-error-in-maven/24831550#24831550", "question_id": 24830610, "answer_id": 24831550}, {"body": "<p>As stated in @John's answer, the fact that there is already a <code>0.1.2-SNAPSHOT</code>, interfered with my new non-SNAPSHOT version <code>0.1.2</code>. Since the <code>401 Unauthorized</code> error is nebulous and unhelpful--and is normally associated to user/pass problems--it's no surprise that I was unable to figure this out on my own.</p>\n\n<p>Changing the version to <code>0.1.3</code> brings me back to my original error:</p>\n\n<p><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-install-plugin:2.4:install (default-install) on project xbnjava: Failed to install artifact com.github.aliteralmind:xbnjava:jar:0.1.3: R:\\jeffy\\programming\\build\\xbnjava-0.1.3\\download\\xbnjava-0.1.3-all.jar (The system cannot find the path specified) -&gt; [Help 1].</code></p>\n\n<p>A sonatype support person also recommended that I remove the <code>&lt;parent&gt;</code> block from my POM (it's only there because it's in <a href=\"https://code.google.com/p/ez-vcard/source/browse/trunk/pom.xml\" rel=\"nofollow\">the one from ez-vcard</a>, which is what I started with) and replace my <code>&lt;distributionManagement&gt;</code> block with</p>\n\n<pre><code>&lt;distributionManagement&gt;\n  &lt;snapshotRepository&gt;\n    &lt;id&gt;ossrh&lt;/id&gt;\n    &lt;url&gt;https://oss.sonatype.org/content/repositories/snapshots&lt;/url&gt;\n  &lt;/snapshotRepository&gt;\n  &lt;repository&gt;\n    &lt;id&gt;ossrh&lt;/id&gt;\n    &lt;url&gt;https://oss.sonatype.org/service/local/staging/deploy/maven2/&lt;/url&gt;\n  &lt;/repository&gt;\n&lt;/distributionManagement&gt;\nand then make sure that lines up with what's in your settings.xml:\n&lt;settings&gt;\n  &lt;servers&gt;\n    &lt;server&gt;\n      &lt;id&gt;ossrh&lt;/id&gt;\n      &lt;username&gt;your-jira-id&lt;/username&gt;\n      &lt;password&gt;your-jira-pwd&lt;/password&gt;\n    &lt;/server&gt;\n  &lt;/servers&gt;\n&lt;/settings&gt;\n</code></pre>\n\n<p>After doing this, running <code>mvn deploy</code> actually uploaded one of my jars for the very first time!!!</p>\n\n<p>Output:</p>\n\n<pre><code>[INFO] Scanning for projects...\n[INFO]\n[INFO] ------------------------------------------------------------------------\n[INFO] Building XBN-Java 0.1.3\n[INFO] ------------------------------------------------------------------------\n[INFO]\n[INFO] --- build-helper-maven-plugin:1.8:attach-artifact (attach-artifacts) @ xbnjava ---\n[INFO]\n[INFO] --- maven-install-plugin:2.4:install (default-install) @ xbnjava ---\n[INFO] Installing R:\\jeffy\\programming\\sandbox\\z__for_git_commit_only\\xbnjava\\pom.xml to C:\\Users\\jeffy\\.m2\\repository\\com\\github\\aliteralmind\\xbnjava\\0.1.3\\xbnjava-0.1.3.pom\n[INFO] Installing R:\\jeffy\\programming\\build\\xbnjava-0.1.3\\download\\xbnjava-0.1.3.jar to C:\\Users\\jeffy\\.m2\\repository\\com\\github\\aliteralmind\\xbnjava\\0.1.3\\xbnjava-0.1.3.jar\n[INFO]\n[INFO] --- maven-deploy-plugin:2.7:deploy (default-deploy) @ xbnjava ---\nUploading: https://oss.sonatype.org/service/local/staging/deploy/maven2/com/github/aliteralmind/xbnjava/0.1.3/xbnjava-0.1.3.pom\n2/6 KB\n4/6 KB\n6/6 KB\n\nUploaded: https://oss.sonatype.org/service/local/staging/deploy/maven2/com/github/aliteralmind/xbnjava/0.1.3/xbnjava-0.1.3.pom (6 KB at 4.6 KB/sec)\nDownloading: https://oss.sonatype.org/service/local/staging/deploy/maven2/com/github/aliteralmind/xbnjava/maven-metadata.xml\n310/310 B\n\nDownloaded: https://oss.sonatype.org/service/local/staging/deploy/maven2/com/github/aliteralmind/xbnjava/maven-metadata.xml (310 B at 1.6 KB/sec)\nUploading: https://oss.sonatype.org/service/local/staging/deploy/maven2/com/github/aliteralmind/xbnjava/maven-metadata.xml\n310/310 B\n\nUploaded: https://oss.sonatype.org/service/local/staging/deploy/maven2/com/github/aliteralmind/xbnjava/maven-metadata.xml (310 B at 1.4 KB/sec)\nUploading: https://oss.sonatype.org/service/local/staging/deploy/maven2/com/github/aliteralmind/xbnjava/0.1.3/xbnjava-0.1.3.jar\n2/630 KB\n4/630 KB\n6/630 KB\n8/630 KB\n10/630 KB\n12/630 KB\n14/630 KB\n...\n618/630 KB\n620/630 KB\n622/630 KB\n624/630 KB\n626/630 KB\n628/630 KB\n630/630 KB\n</code></pre>\n\n<p><em>(Success portion:)</em></p>\n\n<pre><code>Uploaded: https://oss.sonatype.org/service/local/staging/deploy/maven2/com/github/aliteralmind/xbnjava/0.1.3/xbnjava-0.1.3.jar (630 KB at 474.7 KB/sec)\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 4.632 s\n[INFO] Finished at: 2014-07-18T15:09:25-04:00\n[INFO] Final Memory: 6M/19M\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n\n<p>Here's the full updated POM:</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.github.aliteralmind&lt;/groupId&gt;\n  &lt;artifactId&gt;xbnjava&lt;/artifactId&gt;\n  &lt;packaging&gt;pom&lt;/packaging&gt;\n  &lt;version&gt;0.1.3&lt;/version&gt;\n  &lt;name&gt;XBN-Java&lt;/name&gt;\n  &lt;url&gt;https://github.com/aliteralmind/xbnjava&lt;/url&gt;\n  &lt;inceptionYear&gt;2014&lt;/inceptionYear&gt;\n  &lt;organization&gt;\n     &lt;name&gt;Jeff Epstein&lt;/name&gt;\n  &lt;/organization&gt;\n  &lt;description&gt;XBN-Java is a collection of generically-useful backend (server side, non-GUI) programming utilities, featuring RegexReplacer and FilteredLineIterator. XBN-Java is the foundation of Codelet (http://codelet.aliteralmind.com).&lt;/description&gt;\n\n  &lt;licenses&gt;\n     &lt;license&gt;\n        &lt;name&gt;Lesser General Public License (LGPL) version 3.0&lt;/name&gt;\n        &lt;url&gt;https://www.gnu.org/licenses/lgpl-3.0.txt&lt;/url&gt;\n     &lt;/license&gt;\n     &lt;license&gt;\n        &lt;name&gt;Apache Software License (ASL) version 2.0&lt;/name&gt;\n        &lt;url&gt;http://www.apache.org/licenses/LICENSE-2.0.txt&lt;/url&gt;\n     &lt;/license&gt;\n  &lt;/licenses&gt;\n\n  &lt;developers&gt;\n     &lt;developer&gt;\n        &lt;name&gt;Jeff Epstein&lt;/name&gt;\n        &lt;email&gt;aliteralmind-github@yahoo.com&lt;/email&gt;\n        &lt;roles&gt;\n           &lt;role&gt;Lead Developer&lt;/role&gt;\n        &lt;/roles&gt;\n     &lt;/developer&gt;\n  &lt;/developers&gt;\n\n  &lt;issueManagement&gt;\n     &lt;system&gt;GitHub Issue Tracker&lt;/system&gt;\n     &lt;url&gt;https://github.com/aliteralmind/xbnjava/issues&lt;/url&gt;\n  &lt;/issueManagement&gt;\n\n  &lt;distributionManagement&gt;\n    &lt;snapshotRepository&gt;\n      &lt;id&gt;ossrh&lt;/id&gt;\n      &lt;url&gt;https://oss.sonatype.org/content/repositories/snapshots&lt;/url&gt;\n    &lt;/snapshotRepository&gt;\n    &lt;repository&gt;\n      &lt;id&gt;ossrh&lt;/id&gt;\n      &lt;url&gt;https://oss.sonatype.org/service/local/staging/deploy/maven2/&lt;/url&gt;\n    &lt;/repository&gt;\n  &lt;/distributionManagement&gt;\n\n  &lt;scm&gt;\n     &lt;connection&gt;scm:git:git@github.com:aliteralmind/xbnjava.git&lt;/connection&gt;\n     &lt;url&gt;scm:git:git@github.com:aliteralmind/xbnjava.git&lt;/url&gt;\n     &lt;developerConnection&gt;scm:git:git@github.com:aliteralmind/xbnjava.git&lt;/developerConnection&gt;\n  &lt;/scm&gt;\n\n  &lt;properties&gt;\n     &lt;java.version&gt;1.7&lt;/java.version&gt;\n     &lt;jarprefix&gt;R:\\jeffy\\programming\\build\\/${project.artifactId}-${project.version}/download/${project.artifactId}-${project.version}&lt;/jarprefix&gt;\n  &lt;/properties&gt;\n  &lt;build&gt;\n     &lt;plugins&gt;\n        &lt;plugin&gt;\n           &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n           &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\n           &lt;version&gt;1.8&lt;/version&gt;\n           &lt;executions&gt;\n              &lt;execution&gt;\n                 &lt;id&gt;attach-artifacts&lt;/id&gt;\n                 &lt;phase&gt;package&lt;/phase&gt;\n                 &lt;goals&gt;\n                    &lt;goal&gt;attach-artifact&lt;/goal&gt;\n                 &lt;/goals&gt;\n                 &lt;configuration&gt;\n                    &lt;artifacts&gt;\n                       &lt;artifact&gt;\n                          &lt;file&gt;${jarprefix}.jar&lt;/file&gt;\n                          &lt;type&gt;jar&lt;/type&gt;\n                       &lt;/artifact&gt;\n                    &lt;/artifacts&gt;\n                 &lt;/configuration&gt;\n              &lt;/execution&gt;\n           &lt;/executions&gt;\n        &lt;/plugin&gt;\n     &lt;/plugins&gt;\n  &lt;/build&gt;\n\n  &lt;profiles&gt;\n     &lt;!--\n     This profile will sign the JAR file, sources file, and javadocs file using the GPG key on the local machine.\n     See: https://docs.sonatype.org/display/Repository/How+To+Generate+PGP+Signatures+With+Maven\n     --&gt;\n     &lt;profile&gt;\n        &lt;id&gt;release-sign-artifacts&lt;/id&gt;\n        &lt;activation&gt;\n           &lt;property&gt;\n              &lt;name&gt;release&lt;/name&gt;\n              &lt;value&gt;true&lt;/value&gt;\n           &lt;/property&gt;\n        &lt;/activation&gt;\n     &lt;/profile&gt;\n  &lt;/profiles&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>That's one big Maven problem out of the way. Only 627 more to go.</p>\n", "title": "Why am I getting a &quot;401 Unauthorized&quot; error in Maven?", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/24830610/why-am-i-getting-a-401-unauthorized-error-in-maven/24832494#24832494", "question_id": 24830610, "answer_id": 24832494}, {"body": "<p>I had the same error. I tried and rechecked everything. I was so focused in the Stack trace that I didn't read the last lines of the build before the Reactor summary and the stack trace: </p>\n\n<pre><code>[DEBUG] Using connector AetherRepositoryConnector with priority 3.4028235E38 for http://www:8081/nexus/content/repositories/snapshots/\n[INFO] Downloading: http://www:8081/nexus/content/repositories/snapshots/com/wdsuite/com.wdsuite.server.product/1.0.0-SNAPSHOT/maven-metadata.xml\n[DEBUG] Could not find metadata com.group:artifact.product:version-SNAPSHOT/maven-metadata.xml in nexus (http://www:8081/nexus/content/repositories/snapshots/)\n[DEBUG] Writing tracking file /home/me/.m2/repository/com/group/project/version-SNAPSHOT/resolver-status.properties\n[INFO] Uploading: http://www:8081/nexus/content/repositories/snapshots/com/...-1.0.0-20141118.124526-1.zip\n[INFO] Uploading: http://www:8081/nexus/content/repositories/snapshots/com/...-1.0.0-20141118.124526-1.pom\n[INFO] ------------------------------------------------------------------------\n[INFO] Reactor Summary:\n</code></pre>\n\n<p>This was the key : <strong>\"Could not find metadata\"</strong>. Although it said that it was an authentication error actually it got fixed doing a \"rebuild metadata\" in the nexus repository.</p>\n\n<p>Hope it helps.</p>\n", "title": "Why am I getting a &quot;401 Unauthorized&quot; error in Maven?", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/24830610/why-am-i-getting-a-401-unauthorized-error-in-maven/26995640#26995640", "question_id": 24830610, "answer_id": 26995640}, {"body": "<p>We have had this issue quite recently and found out it was to do with the version of Maven we were using.  We were using 3.1.0 and could not upload to nexus, we kept getting 401's, we reverted back to 3.0.3 and the issue went away.</p>\n\n<p>Easiest way to confirm is to work through the maven versions and run \"mvn deploy\" on your project.</p>\n\n<p>Further details can be found here: <a href=\"https://issues.apache.org/jira/browse/WAGON-421\" rel=\"nofollow\">https://issues.apache.org/jira/browse/WAGON-421</a></p>\n", "title": "Why am I getting a &quot;401 Unauthorized&quot; error in Maven?", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/24830610/why-am-i-getting-a-401-unauthorized-error-in-maven/27262962#27262962", "question_id": 24830610, "answer_id": 27262962}, {"body": "<p>Some users may have entered the email address instead of the user name by mistake. This may happen unconsciously when the name in the email address is the same as the user name.</p>\n", "title": "Why am I getting a &quot;401 Unauthorized&quot; error in Maven?", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/24830610/why-am-i-getting-a-401-unauthorized-error-in-maven/27842727#27842727", "question_id": 24830610, "answer_id": 27842727}, {"body": "<p>I had put a not encrypted password in the settings.xml .</p>\n\n<p>I tested the call with curl</p>\n\n<pre><code>curl -u username:password http://url/artifactory/libs-snapshot-local/com/myproject/api/1.0-SNAPSHOT/api-1.0-20160128.114425-1.jar --request PUT --data target/api-1.0-SNAPSHOT.jar \n</code></pre>\n\n<p>and I got the error:</p>\n\n<pre><code>{\n  \"errors\" : [ {\n    \"status\" : 401,\n    \"message\" : \"Artifactory configured to accept only encrypted passwords but received a clear text password.\"\n  } ]\n}\n</code></pre>\n\n<p>I retrieved my encrypted password clicking on my artifactory profile and unlocking it.</p>\n", "title": "Why am I getting a &quot;401 Unauthorized&quot; error in Maven?", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/24830610/why-am-i-getting-a-401-unauthorized-error-in-maven/35062881#35062881", "question_id": 24830610, "answer_id": 35062881}, {"body": "<p>This is the official explanation from sonatype nexus team about <strong>401 - Unauthorized</strong></p>\n\n<p>I recommend you to read <a href=\"https://support.sonatype.com/hc/en-us/articles/213464668-Troubleshooting-Artifact-Deployment-Failures\" rel=\"nofollow\">Troubleshooting Artifact Deployment Failures</a> for more information.</p>\n\n<blockquote>\n  <p>Code 401 - Unauthorized</p>\n  \n  <p>Either no login credentials were sent with the request, or login\n  credentials which are invalid were sent.   Checking the \"authorization\n  and authentication\" system feed in the Nexus UI can help narrow this\n  down. If credentials were sent there will be an entry in the feed.</p>\n  \n  <p>If no credentials were sent this is likely due to a mis-match between\n  the id in your pom's distributionManagement section and your\n  settings.xml's server section that holds the login credentials.</p>\n</blockquote>\n", "title": "Why am I getting a &quot;401 Unauthorized&quot; error in Maven?", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/24830610/why-am-i-getting-a-401-unauthorized-error-in-maven/36466903#36466903", "question_id": 24830610, "answer_id": 36466903}, {"body": "<p>Also had 401's from Nexus. Having tried all the suggestions above and more without success I eventually found that it was a Jenkins setting that was in error.</p>\n\n<p>In the Jenkins configuration for the failing project, we have a section in the 'Post Build' actions entitled 'Deploy Artifacts To Maven Repository'. This has a 'Repository ID' field which was set to the wrong value. It has to be the same as the repository ID in settings.xml for Jenkins to read the user and password fields:</p>\n\n<p><a href=\"http://i.stack.imgur.com/oaiH2.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/oaiH2.png\" alt=\"Jenkins Project Configuration\"></a></p>\n\n<pre><code> &lt;servers&gt;\n    &lt;server&gt;\n      &lt;id&gt;snapshot-repository&lt;/id&gt;  &lt;!-- must match this --&gt;\n      &lt;username&gt;deployment&lt;/username&gt;\n      &lt;password&gt;password&lt;/password&gt;\n    &lt;/server&gt;\n  &lt;/servers&gt;\n</code></pre>\n", "title": "Why am I getting a &quot;401 Unauthorized&quot; error in Maven?", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/24830610/why-am-i-getting-a-401-unauthorized-error-in-maven/38608026#38608026", "question_id": 24830610, "answer_id": 38608026}], "creation_date": 1405704260, "score": 44, "link": "http://stackoverflow.com/questions/24830610/why-am-i-getting-a-401-unauthorized-error-in-maven", "question_id": 24830610}, {"body": "<p>Here is the code:</p>\n\n<pre><code>package mscontroller;\n\nimport javax.swing.*;\nimport com.apple.eawt.Application;\n\npublic class Main {\npublic static void main(String[] args)\n{\n    Application app = new Application();\n    app.setEnabledAboutMenu(true);\n\n    AMEListener listener = new AMEListener();\n    app.addApplicationListener(listener);\n    JFrame mainFrame = new JFrame(\"Application Menu Example\");\n    mainFrame.setSize(500, 500);\n    mainFrame.setVisible(true);\n\n}\n}\n</code></pre>\n\n<p>here is the error:</p>\n\n<blockquote>\n  <p>Exception in thread \"main\" java.lang.Error: Unresolved compilation\n  problems:     Access restriction: The type 'Application' is not API\n  (restriction on required library\n  '/Library/Java/JavaVirtualMachines/jdk1.8.0_11.jdk/Contents/Home/jre/lib/rt.jar')\n    Access restriction: The constructor 'Application()' is not API\n  (restriction on required library\n  '/Library/Java/JavaVirtualMachines/jdk1.8.0_11.jdk/Contents/Home/jre/lib/rt.jar')\n    Access restriction: The type 'Application' is not API (restriction on\n  required library\n  '/Library/Java/JavaVirtualMachines/jdk1.8.0_11.jdk/Contents/Home/jre/lib/rt.jar')\n    Access restriction: The method\n  'Application.setEnabledAboutMenu(boolean)' is not API (restriction on\n  required library\n  '/Library/Java/JavaVirtualMachines/jdk1.8.0_11.jdk/Contents/Home/jre/lib/rt.jar')\n    AMEListener cannot be resolved to a type    AMEListener cannot be\n  resolved to a type</p>\n  \n  <p>at mscontroller.Main.main(Main.java:9)</p>\n</blockquote>\n\n<p>eclipse says this:</p>\n\n<blockquote>\n  <p>Access restriction: The type 'Application' is not API (restriction on\n  required library<br>\n  '/Library/Java/JavaVirtualMachines/jdk1.8.0_11.jdk/Contents/Home/jre/lib/\n  rt.jar')</p>\n</blockquote>\n", "tags": ["java", "eclipse", "osx", "jar"], "title": "Access restriction: The type &#39;Application&#39; is not API (restriction on required library rt.jar)", "answers": [{"body": "<p>To begin with (<em>and unrelated</em>), instantiating the <code>Application</code> class by yourself does not seem to be its intended use. From what one can read from its <a href=\"http://cr.openjdk.java.net/~michaelm/7113349/7u4/2/jdk7u-osx/new/src/macosx/classes/com/apple/eawt/Application.java.html\">source</a>, you are rather expected to use the static instance returned by <code>getApplication()</code>.</p>\n\n<p>Now let's get to the error Eclipse reports. I've ran into a similar issue recently: <code>Access restriction: The method ... is not API (restriction on required project)</code>. I called the method in question as a method of an object which inherited that method from a super class. All I had to do was to add the package the super class was in to the packages imported by my plugin.</p>\n\n<p>However, there is a lot of different causes for errors based on <em>\"restriction on required project/library</em>\". Similar to the problem described above, the type you are using might have dependencies to packages that are not exported by the library or might not be exported itself. In that case you can try to track down the missing packages and export them my yourself, as suggested <a href=\"http://stackoverflow.com/a/22475570/1933494\">here</a>, or try Access Rules. Other possible scenarios include:</p>\n\n<ul>\n<li>Eclipse wants to keep you from using available packages that are not part of the public Java API (solution <a href=\"http://stackoverflow.com/a/10642163/1933494\">1</a>, <a href=\"http://stackoverflow.com/a/14646810/1933494\">2</a>)</li>\n<li>Dependencies are satisfied by multiple sources, versions are conflicting etc. (solution <a href=\"http://stackoverflow.com/a/2174607/1933494\">1</a>, <a href=\"http://stackoverflow.com/a/1090024/1933494\">2</a>, <a href=\"http://stackoverflow.com/a/15746118/1933494\">3</a>)</li>\n<li>Eclipse is using a JRE where a JDK is necessary (which might be the case here, from what your errors say; <a href=\"http://stackoverflow.com/a/20197999/1933494\">solution</a>) or JRE/JDK version in project build path is not the right one </li>\n</ul>\n\n<p>This ended up as more like a medley of restriction-related issues than an actual answer. But since <em>restriction on required projects</em> is such a versatile error to be reported, the perfect recipe is probably still to be found.</p>\n", "title": "Access restriction: The type &#39;Application&#39; is not API (restriction on required library rt.jar)", "tags": ["java", "eclipse", "osx", "jar"], "link": "http://stackoverflow.com/questions/25222811/access-restriction-the-type-application-is-not-api-restriction-on-required-l/26676046#26676046", "question_id": 25222811, "answer_id": 26676046}, {"body": "<p>I was having the same problem.  When I initially created the java project in Eclipse I specified JRE 8.  When I went into the project's build path and edited the JRE System Library, the Java 8 execution environment was selected.  When I chose to use an \"Alernate JRE\" (still java 8) it fixed the error for me.</p>\n", "title": "Access restriction: The type &#39;Application&#39; is not API (restriction on required library rt.jar)", "tags": ["java", "eclipse", "osx", "jar"], "link": "http://stackoverflow.com/questions/25222811/access-restriction-the-type-application-is-not-api-restriction-on-required-l/28331980#28331980", "question_id": 25222811, "answer_id": 28331980}, {"body": "<p>This happened to me as well, and the answers given here already were not satisfying, so I did my own research.</p>\n\n<h1>Background: Eclipse <em>access restrictions</em></h1>\n\n<p>Eclipse has a mechanism called <em>access restrictions</em> to prevent you from accidentally using classes which Eclipse thinks are not part of the public API. Usually, Eclipse is right about that, in both senses: We usually do not want to use something which is not part of the public API. And Eclipse is usually right about what is and what isn't part of the public API.</p>\n\n<h1>Problem</h1>\n\n<p>Now, there can be situations, where you want to use non-public API. And there can be situations, where Eclipse is not really right (that's what happened to me, I just wanted to use <code>javax.smartcardio</code>). In that case, we get this error in Eclipse.</p>\n\n<h1>Solution</h1>\n\n<p>The solution is to change the access restrictions. Go to the properties of your Java project, i.e. by selecting \"Properties\" from the context menu of the project in the \"Package Explorer\". There, go to \"Java Build Path\", tab \"Libraries\". There, expand the library entry, select \"Access rules\", \"Edit...\" and \"Add...\" a \"Resolution: Accessible\" with a corresponding rule pattern. For me that was \"<code>javax/smartcardio/**</code>\", for you it might instead be \"<code>com/apple/eawt/**</code>\".</p>\n", "title": "Access restriction: The type &#39;Application&#39; is not API (restriction on required library rt.jar)", "tags": ["java", "eclipse", "osx", "jar"], "link": "http://stackoverflow.com/questions/25222811/access-restriction-the-type-application-is-not-api-restriction-on-required-l/29329228#29329228", "question_id": 25222811, "answer_id": 29329228}, {"body": "<p>I had this problem because the project facet associated with my project was the wrong java version.</p>\n\n<p>To fix this is I did the following:</p>\n\n<ol>\n<li>Right click on the project and select Properties</li>\n<li>Select 'Project Facets' and change version of java to something greater than 1.4.</li>\n<li>Click [Apply] </li>\n</ol>\n\n<p>This will rebuild your project and hopefully the error will be resolved.</p>\n", "title": "Access restriction: The type &#39;Application&#39; is not API (restriction on required library rt.jar)", "tags": ["java", "eclipse", "osx", "jar"], "link": "http://stackoverflow.com/questions/25222811/access-restriction-the-type-application-is-not-api-restriction-on-required-l/29551851#29551851", "question_id": 25222811, "answer_id": 29551851}, {"body": "<p><strong>If you're having this same issue using Spring Tool Suite:</strong></p>\n\n<p>The Spring Tool Suite's underlying IDE is, in fact, Eclipse. I've gotten this error just now trying to use some <code>com.sun.net</code> classes. To remove these errors and prevent them from popping up in the Eclipse Luna SR1 (4.4.2) platform of STS: </p>\n\n<ul>\n<li>Navigate to Project > Properties  </li>\n<li>Expand the Java Compiler heading</li>\n<li>Click on Errors/Warnings </li>\n<li>Expand deprecated and restricted API</li>\n<li>Next to \"Forbidden reference (access rules)\" select \"ignore\" </li>\n<li>Next to \"Discouraged reference (access rules)\" select \"ignore\" </li>\n</ul>\n\n<p>You're good to go.</p>\n", "title": "Access restriction: The type &#39;Application&#39; is not API (restriction on required library rt.jar)", "tags": ["java", "eclipse", "osx", "jar"], "link": "http://stackoverflow.com/questions/25222811/access-restriction-the-type-application-is-not-api-restriction-on-required-l/30732564#30732564", "question_id": 25222811, "answer_id": 30732564}, {"body": "<p>It worked: Project Properties -> ProjectFacets -> Runtimes -> jdk1.8.0_45 -> Apply</p>\n", "title": "Access restriction: The type &#39;Application&#39; is not API (restriction on required library rt.jar)", "tags": ["java", "eclipse", "osx", "jar"], "link": "http://stackoverflow.com/questions/25222811/access-restriction-the-type-application-is-not-api-restriction-on-required-l/37169990#37169990", "question_id": 25222811, "answer_id": 37169990}], "creation_date": 1407616554, "score": 43, "link": "http://stackoverflow.com/questions/25222811/access-restriction-the-type-application-is-not-api-restriction-on-required-l", "question_id": 25222811}, {"body": "<p>Using IntelliJ 12, I have a java project and I use maven with a pom.xml.\nMy project is using java8, but it seems the default project language level has been set to 6 while importing the project.</p>\n\n<p>I can change the language level to 8.0 (F4 -> Modules -> Language level) however everytime I edit my pom.xml the project level is switched back to \"use project language level\", and I have to edit this settings again and again.</p>\n\n<p>Is there something I need to add to the pom.xml to set the default language level to 8.0 ?</p>\n", "tags": ["java", "maven", "intellij-idea", "pom.xml"], "title": "stop IntelliJ IDEA to switch java language level everytime the pom is reloaded (or change the default project language level)", "answers": [{"body": "<p>As per Mark's comment, here is how to do it:</p>\n\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.3.2&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n", "title": "stop IntelliJ IDEA to switch java language level everytime the pom is reloaded (or change the default project language level)", "tags": ["java", "maven", "intellij-idea", "pom.xml"], "link": "http://stackoverflow.com/questions/27037657/stop-intellij-idea-to-switch-java-language-level-everytime-the-pom-is-reloaded/27037879#27037879", "question_id": 27037657, "answer_id": 27037879}, {"body": "<p>I think this has to do with a conceptual conflict between the Maven compiler plugin and IntelliJ idea. Apparently the newer versions of the compiler plugin have a default level of 1.5 (see <a href=\"http://maven.apache.org/plugins/maven-compiler-plugin/\">http://maven.apache.org/plugins/maven-compiler-plugin/</a>). So if the compiler plugin is used at all in a project, and the compiler level is not explicitly set in the pom.xml, whenever the POM is re-processed the level will revert to the default. </p>\n\n<p>So there is a conceptual conflict which is ignored by Intellij IDEA. The IDE still allows one to set the project and module settings, but provides no warning or feedback that this setting is controlled by pom.xml. Solutions would either be to explicitly allow overriding the POM compiler plugin setting (perhaps not wise because what then happens when you use maven on the command line), or to deactivate the controls in the IDE when this setting from the POM is in effect. </p>\n\n<p>The solution at the present time is to set the desired compiler level in the compiler plugin in the pom, the re-import, rather than trying to set it in module settings.</p>\n", "title": "stop IntelliJ IDEA to switch java language level everytime the pom is reloaded (or change the default project language level)", "tags": ["java", "maven", "intellij-idea", "pom.xml"], "link": "http://stackoverflow.com/questions/27037657/stop-intellij-idea-to-switch-java-language-level-everytime-the-pom-is-reloaded/31077884#31077884", "question_id": 27037657, "answer_id": 31077884}, {"body": "<p>A shorter version of vikingsteve's answer is:</p>\n\n<pre><code>&lt;properties&gt;\n  &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n  &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n</code></pre>\n", "title": "stop IntelliJ IDEA to switch java language level everytime the pom is reloaded (or change the default project language level)", "tags": ["java", "maven", "intellij-idea", "pom.xml"], "link": "http://stackoverflow.com/questions/27037657/stop-intellij-idea-to-switch-java-language-level-everytime-the-pom-is-reloaded/36116666#36116666", "question_id": 27037657, "answer_id": 36116666}], "creation_date": 1416480490, "score": 43, "link": "http://stackoverflow.com/questions/27037657/stop-intellij-idea-to-switch-java-language-level-everytime-the-pom-is-reloaded", "question_id": 27037657}, {"body": "<p>When I type <code>scala</code> on the terminal to start the repl, it throws this error</p>\n\n<pre><code>scala&gt; [init] error: error while loading AnnotatedElement, \nclass file '/usr/lib/jvm/java-8-oracle/jre/lib/rt.jar\n(java/lang/reflect/AnnotatedElement.class)' \nis broken (bad constant pool tag 15 at byte 2713)\n</code></pre>\n\n<p>When I hit <kbd>enter</kbd> and type <code>println(\"hello, world\")</code>, it again throws this</p>\n\n<pre><code>error: error while loading CharSequence, \nclass file '/usr/lib/jvm/java-8-oracle/jre/lib/rt.jar\n(java/lang/CharSequence.class)' is broken\n(bad constant pool tag 15 at byte 1501)\n</code></pre>\n\n<p>I am using <code>Ubuntu 14.04</code> and <code>java -version</code> gives</p>\n\n<pre><code>java version \"1.8.0_05\"\nJava(TM) SE Runtime Environment (build 1.8.0_05-b13)\nJava HotSpot(TM) 64-Bit Server VM (build 25.5-b02, mixed mode)\n</code></pre>\n", "tags": ["java", "scala", "read-eval-print-loop"], "title": "Scala repl throws error", "answers": [{"body": "<p>You might have to run it with JDK 7 or 6</p>\n", "title": "Scala repl throws error", "tags": ["java", "scala", "read-eval-print-loop"], "link": "http://stackoverflow.com/questions/24517761/scala-repl-throws-error/24517892#24517892", "question_id": 24517761, "answer_id": 24517892}, {"body": "<p>Either update to a newer scala version (2.10.3+) or downgrade java to java 6/7. As you have seen in the output, 2.9.2 was here long before java 8 was introduced (<code>Copyright 2002-2011, LAMP/EPFL</code>), so they don't work well together.</p>\n\n<p><a href=\"http://stackoverflow.com/q/18842985/298389\">This duplicate question</a> contains exact instructions on ubuntu's java downgrade.</p>\n", "title": "Scala repl throws error", "tags": ["java", "scala", "read-eval-print-loop"], "link": "http://stackoverflow.com/questions/24517761/scala-repl-throws-error/24518487#24518487", "question_id": 24517761, "answer_id": 24518487}, {"body": "<p>remove the scala 2.9.2 using terminal </p>\n\n<pre><code> sudo apt-get remove scala \n</code></pre>\n\n<p>download the latest scala from <a href=\"http://www.scala-lang.org/download/\">scala website</a></p>\n\n<p>Installation instruction are giving on this <a href=\"http://www.scala-lang.org/download/install.html\">link</a></p>\n", "title": "Scala repl throws error", "tags": ["java", "scala", "read-eval-print-loop"], "link": "http://stackoverflow.com/questions/24517761/scala-repl-throws-error/30061155#30061155", "question_id": 24517761, "answer_id": 30061155}], "creation_date": 1404242438, "score": 43, "link": "http://stackoverflow.com/questions/24517761/scala-repl-throws-error", "question_id": 24517761}, {"body": "<p>In our project we are migrating to java 8 and we are testing the new features of it.</p>\n\n<p>On my project I'm using Guava predicates and functions to filter and transform some collections using <code>Collections2.transform</code> and <code>Collections2.filter</code>. </p>\n\n<p>On this migration I need to change for example guava code to java 8 changes. So, the changes I'm doing are the kind of:</p>\n\n<pre><code>List&lt;Integer&gt; naturals = Lists.newArrayList(1,2,3,4,5,6,7,8,9,10,11,12,13);\n\nFunction &lt;Integer, Integer&gt; duplicate = new Function&lt;Integer, Integer&gt;(){\n    @Override\n    public Integer apply(Integer n)\n    {\n        return n * 2;\n    }\n};\n\nCollection result = Collections2.transform(naturals, duplicate);\n</code></pre>\n\n<p>To...</p>\n\n<pre><code>List&lt;Integer&gt; result2 = naturals.stream()\n    .map(n -&gt; n * 2)\n    .collect(Collectors.toList());\n</code></pre>\n\n<p>Using guava I was very confortable debugging the code since I could debug each transformation process but my concern is how to debug for example <code>.map(n -&gt; n*2)</code>.</p>\n\n<p>Using the debugger I can see some code like:</p>\n\n<pre><code>@Hidden\n@DontInline\n/** Interpretively invoke this form on the given arguments. */\nObject interpretWithArguments(Object... argumentValues) throws Throwable {\n    if (TRACE_INTERPRETER)\n        return interpretWithArgumentsTracing(argumentValues);\n    checkInvocationCounter();\n    assert(arityCheck(argumentValues));\n    Object[] values = Arrays.copyOf(argumentValues, names.length);\n    for (int i = argumentValues.length; i &lt; values.length; i++) {\n        values[i] = interpretName(names[i], values);\n    }\n    return (result &lt; 0) ? null : values[result];\n}\n</code></pre>\n\n<p>But it isn't as straighforward as Guava to debug the code, actually I couldn't find the <code>n * 2</code> transformation.</p>\n\n<p>Is there a way to see this transformation or a way to easy debug this code?</p>\n\n<p><strong>EDIT: I've added answer from different comments and posted answers</strong></p>\n\n<p>Thanks to <code>Holger</code> comment that answered my question, the approach of having lambda block allowed me to see the transformation process and debug what happened inside lambda body:</p>\n\n<pre><code>.map(\n    n -&gt; {\n        Integer nr = n * 2;\n        return nr;\n    }\n)\n</code></pre>\n\n<p>Thanks to <code>Stuart Marks</code> the approach of having method references also allowed me to debug the transformation process:</p>\n\n<pre><code>static int timesTwo(int n) {\n    Integer result = n * 2;\n    return result;\n}\n...\nList&lt;Integer&gt; result2 = naturals.stream()\n    .map(Java8Test::timesTwo)\n    .collect(Collectors.toList());\n...\n</code></pre>\n\n<p>Thanks to <code>Marlon Bernardes</code> answer I noticed that my Eclipse doesn't show what it should and the usage of peek() helped to display results. </p>\n", "tags": ["java", "debugging", "lambda", "java-8"], "title": "How to debug stream().map(...) with lambda expressions?", "answers": [{"body": "<p>I usually have no problem debugging lambda expressions while using Eclipse Kepler or Intellij IDEA (using JDK8u5). Just set a breakpoint and be sure not to inspect the whole lambda expression (inspect only the lambda body). </p>\n\n<p><img src=\"http://i.stack.imgur.com/GdDMO.png\" alt=\"Debugging Lambdas\"></p>\n\n<p>Another approach is to use <code>peek</code> to inspect the elements of the stream:</p>\n\n<pre><code>List&lt;Integer&gt; naturals = Arrays.asList(1,2,3,4,5,6,7,8,9,10,11,12,13);\nnaturals.stream()\n    .map(n -&gt; n * 2)\n    .peek(System.out::println)\n    .collect(Collectors.toList());\n</code></pre>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>I think you're getting confused because <code>map</code> is an <code>intermediate operation</code> - in other words: it is a lazy operation which will be executed only after a <code>terminal operation</code> was executed. So when you call <code>stream.map(n -&gt; n * 2)</code> the lambda body isn't being executed at the moment. You need to set a breakpoint and inspect it after a terminal operation was called (<code>collect</code>, in this case).</p>\n\n<p>Check <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#StreamOps\">Stream Operations</a> for further explanations.</p>\n\n<p><strong>UPDATE 2:</strong></p>\n\n<p>Quoting <a href=\"http://stackoverflow.com/users/2711488/holger\">Holger's</a> comment: </p>\n\n<blockquote>\n  <p>What makes it tricky here is that the call to map and the lambda\n  expression are in one line so a line breakpoint will stop on two\n  completely unrelated actions. </p>\n  \n  <p>Inserting a line break right after <code>map(</code>\n  would allow you to set a break point for the lambda expression only.\n  And it\u2019s not unusual that debuggers don\u2019t show intermediate values of\n  a <code>return</code> statement. Changing the lambda to <code>n -&gt; { int result=n * 2; return result; }</code>\n  would allow you to inspect result. Again, insert line\n  breaks appropriately when stepping line by line\u2026</p>\n</blockquote>\n", "title": "How to debug stream().map(...) with lambda expressions?", "tags": ["java", "debugging", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/24541786/how-to-debug-stream-map-with-lambda-expressions/24542150#24542150", "question_id": 24541786, "answer_id": 24542150}, {"body": "<p>Debugging lambdas also works well with NetBeans. I'm using NetBeans 8 and JDK 8u5.</p>\n\n<p>If you set a breakpoint on a line where there's a lambda, you actually will hit once when the pipeline is set up, and then once for each stream element. Using your example, the first time you hit the breakpoint will be the <code>map()</code> call that's setting up the stream pipeline:</p>\n\n<p><img src=\"http://i.stack.imgur.com/fPdmi.png\" alt=\"first breakpoint\"></p>\n\n<p>You can see the call stack and the local variables and parameter values for <code>main</code> as you'd expect. If you continue stepping, the \"same\" breakpoint is hit again, except this time it's within the call to the lambda:</p>\n\n<p><img src=\"http://i.stack.imgur.com/GNcDT.png\" alt=\"enter image description here\"></p>\n\n<p>Note that this time the call stack is deep within the streams machinery, and the local variables are the locals of the lambda itself, not the enclosing <code>main</code> method. (I've changed the values in the <code>naturals</code> list to make this clear.)</p>\n\n<p>As <a href=\"http://stackoverflow.com/a/24542150/1441122\">Marlon Bernardes</a> pointed out (+1), you can use <code>peek</code> to inspect values as they go by in the pipeline. Be careful though if you're using this from a parallel stream. The values can be printed in an unpredictable order across different threads. If you're storing values in a debugging data structure from <code>peek</code>, that data structure will of course have to be thread-safe.</p>\n\n<p>Finally, if you're doing a lot of debugging of lambdas (especially multi-line statement lambdas), it might be preferable to extract the lambda into a named method and then refer to it using a method reference. For example,</p>\n\n<pre><code>static int timesTwo(int n) {\n    return n * 2;\n}\n\npublic static void main(String[] args) {\n    List&lt;Integer&gt; naturals = Arrays.asList(3247,92837,123);\n    List&lt;Integer&gt; result =\n        naturals.stream()\n            .map(DebugLambda::timesTwo)\n            .collect(toList());\n}\n</code></pre>\n\n<p>This might make it easier to see what's going on while you're debugging. In addition, extracting methods this way makes it easier to unit test. If your lambda is so complicated that you need to be single-stepping through it, you probably want to have a bunch of unit tests for it anyway.</p>\n", "title": "How to debug stream().map(...) with lambda expressions?", "tags": ["java", "debugging", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/24541786/how-to-debug-stream-map-with-lambda-expressions/24544648#24544648", "question_id": 24541786, "answer_id": 24544648}, {"body": "<p>Intellij IDEA 15 seems to make it even easier, it allows to stop in a part of the line where lambda is, see the first feature: <a href=\"http://blog.jetbrains.com/idea/2015/06/intellij-idea-15-eap-is-open/\" rel=\"nofollow\">http://blog.jetbrains.com/idea/2015/06/intellij-idea-15-eap-is-open/</a></p>\n", "title": "How to debug stream().map(...) with lambda expressions?", "tags": ["java", "debugging", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/24541786/how-to-debug-stream-map-with-lambda-expressions/32266112#32266112", "question_id": 24541786, "answer_id": 32266112}], "creation_date": 1404338579, "score": 42, "link": "http://stackoverflow.com/questions/24541786/how-to-debug-stream-map-with-lambda-expressions", "question_id": 24541786}, {"body": "<p>I'm trying to install a plugin in Eclipse Luna. I installed Papyrus and am trying to install SWT designer, but before the download/installation is completed I get an error:</p>\n\n<blockquote>\n<pre><code>An error occurred during the\norg.eclipse.equinox.internal.p2.engine.phases.CheckTrust phase.\nsession context was:(profile=epp.package.standard,\nphase=org.eclipse.equinox.internal.p2.engine.phases.CheckTrust,\noperand=, action=). Error reading signed content. error in opening zip\nfile\n</code></pre>\n</blockquote>\n\n<p>After this error I can't install anything and the install manager does not work anymore and shows me the same error all the time only one way I delete the current Eclipse directory and extract it again.</p>\n\n<p>This time I install Papyrus, SWT designer and some other, but I get the error between install another plugin again. This is wrong if I get an error on install any of plugin reinstalling Eclipse and the other plugin again.</p>\n\n<p>Is this a bug or a problem?</p>\n", "tags": ["java", "eclipse", "eclipse-plugin"], "title": "Error when try install plugin", "answers": [{"body": "<p>It's a failure in Eclipse.</p>\n\n<p>Try to uninstall it then download it from: <a href=\"https://www.eclipse.org/downloads/\" rel=\"nofollow\">https://www.eclipse.org/downloads/</a> </p>\n\n<p>and install it.</p>\n", "title": "Error when try install plugin", "tags": ["java", "eclipse", "eclipse-plugin"], "link": "http://stackoverflow.com/questions/25094583/error-when-try-install-plugin/25094656#25094656", "question_id": 25094583, "answer_id": 25094656}, {"body": "<p>Ok finally i find the solution for solve this problem i don't know why Eclipse showing me this error and i don't know is this a best solution but anyway i solve my problem with delete the <strong>artifacts.xml</strong> file in Eclipse root directory\nAfter delete this file try to install that plugin again but this time after few second everything done and work perfectly</p>\n\n<p><strong>UPDATE:</strong>\nIf you get that's error again just go to Eclipse root directory and search for \"artifacts.xml\" and delete all the files is in the result ;)</p>\n", "title": "Error when try install plugin", "tags": ["java", "eclipse", "eclipse-plugin"], "link": "http://stackoverflow.com/questions/25094583/error-when-try-install-plugin/25095673#25095673", "question_id": 25094583, "answer_id": 25095673}, {"body": "<p>Run Eclipse as an administrator, then try to install the plugin again via help->Install New Software. it worked for me</p>\n", "title": "Error when try install plugin", "tags": ["java", "eclipse", "eclipse-plugin"], "link": "http://stackoverflow.com/questions/25094583/error-when-try-install-plugin/27105045#27105045", "question_id": 25094583, "answer_id": 27105045}, {"body": "<p>I installed E4 RCP Patch(bugzillas 445122)(Install new software -> Eclipse 4.4.1 Patches for bug 445122) and this helped me.</p>\n", "title": "Error when try install plugin", "tags": ["java", "eclipse", "eclipse-plugin"], "link": "http://stackoverflow.com/questions/25094583/error-when-try-install-plugin/27146371#27146371", "question_id": 25094583, "answer_id": 27146371}, {"body": "<p>Try this from the Eclipse marketplace\n1. Click Help>Eclipse marketPlace (Eclipse marketPlace dialog box will open)\n2. Type the name of your plugin (ex: type SWT Designer) in the find edit box, make sure to keep default values for All markets and all categories, and click go button.\n3. The page will refresh and display all plugins that have swt designer in their name.\n4. Click intsall or update button on the one that fits your needs.\n5. The installation or update will be done successfully.\n6. Restart your eclipse\n7. The installation will be fine.</p>\n", "title": "Error when try install plugin", "tags": ["java", "eclipse", "eclipse-plugin"], "link": "http://stackoverflow.com/questions/25094583/error-when-try-install-plugin/27497473#27497473", "question_id": 25094583, "answer_id": 27497473}, {"body": "<ol>\n<li><p>Remove the <code>artifacts.xml</code> from the folder.</p></li>\n<li><p>Keep a copy of  it in some other location (preferably external devices such as pendrive or hard disks etc).</p></li>\n<li><p>Restart Eclipse. </p></li>\n<li><p>Install the software plugin you want to install (it will ask for permission again).</p></li>\n<li><p>After installation paste the <code>artifacts.xml</code> file back into the eclipse folder.</p></li>\n<li><p>Restart eclipse and set the SDK location.</p></li>\n<li><p>Code to death!!! ;p</p></li>\n</ol>\n", "title": "Error when try install plugin", "tags": ["java", "eclipse", "eclipse-plugin"], "link": "http://stackoverflow.com/questions/25094583/error-when-try-install-plugin/27782220#27782220", "question_id": 25094583, "answer_id": 27782220}], "creation_date": 1406979476, "score": 41, "link": "http://stackoverflow.com/questions/25094583/error-when-try-install-plugin", "question_id": 25094583}, {"body": "<p>I need some simple JSON parsing in my application and the <a href=\"http://mvnrepository.com/artifact/org.json/json\">Douglas Crockford library</a> seems exactly what I need.</p>\n\n<p>However, I seem to be running into a problem. I'm getting the following error:</p>\n\n<p><code>Exception in thread \"main\" java.lang.UnsupportedClassVersionError: org/json/JSONObject : Unsupported major.minor version 52.0</code></p>\n\n<p>I Googled around a bit and I get the impression that this is due to some version incompatibility. I've tried changing Java versions but it doesn't seem to help. I'm using Java 7 and Java 7 features in my program and ultimately I want to use Java 7.</p>\n\n<p>How can I resolve this issue?</p>\n\n<p>PS: I looked at Jackson and GSON and definitely don't want to use either so please don't suggest as an alternative.</p>\n", "tags": ["java", "json", "org.json"], "title": "How to use the org.json Java library with Java 7", "answers": [{"body": "<p>Have you tried using an older version of the package?</p>\n\n<p>Try: <a href=\"http://mvnrepository.com/artifact/org.json/json/20140107\">http://mvnrepository.com/artifact/org.json/json/20140107</a></p>\n", "title": "How to use the org.json Java library with Java 7", "tags": ["java", "json", "org.json"], "link": "http://stackoverflow.com/questions/27352672/how-to-use-the-org-json-java-library-with-java-7/27353987#27353987", "question_id": 27352672, "answer_id": 27353987}, {"body": "<p>Since your are using JDK1.7, change to the older version will work!</p>\n\n<pre><code>&lt;groupId&gt;org.json&lt;/groupId&gt;\n    &lt;artifactId&gt;json&lt;/artifactId&gt;\n    &lt;version&gt;20140107&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n", "title": "How to use the org.json Java library with Java 7", "tags": ["java", "json", "org.json"], "link": "http://stackoverflow.com/questions/27352672/how-to-use-the-org-json-java-library-with-java-7/34449648#34449648", "question_id": 27352672, "answer_id": 34449648}], "creation_date": 1418020911, "score": 41, "link": "http://stackoverflow.com/questions/27352672/how-to-use-the-org-json-java-library-with-java-7", "question_id": 27352672}, {"body": "<p>Currently I have a Spring Boot application using Spring Data REST. I have a domain entity <code>Post</code> which has the <code>@OneToMany</code> relationship to another domain entity, <code>Comment</code>. These classes are structured as follows:</p>\n\n<p>Post.java:</p>\n\n<pre><code>@Entity\npublic class Post {\n\n    @Id\n    @GeneratedValue\n    private long id;\n    private String author;\n    private String content;\n    private String title;\n\n    @OneToMany\n    private List&lt;Comment&gt; comments;\n\n    // Standard getters and setters...\n}\n</code></pre>\n\n<p>Comment.java:</p>\n\n<pre><code>@Entity\npublic class Comment {\n\n    @Id\n    @GeneratedValue\n    private long id;\n    private String author;\n    private String content;\n\n    @ManyToOne\n    private Post post;\n\n    // Standard getters and setters...\n}\n</code></pre>\n\n<p>Their Spring Data REST JPA repositories are basic implementations of <code>CrudRepository</code>:</p>\n\n<p>PostRepository.java:</p>\n\n<pre><code>public interface PostRepository extends CrudRepository&lt;Post, Long&gt; { }\n</code></pre>\n\n<p>CommentRepository.java:</p>\n\n<pre><code>public interface CommentRepository extends CrudRepository&lt;Comment, Long&gt; { }\n</code></pre>\n\n<p>The application entry point is a standard, simple Spring Boot application. Everything is configured stock.</p>\n\n<p>Application.java</p>\n\n<pre><code>@Configuration\n@EnableJpaRepositories\n@Import(RepositoryRestMvcConfiguration.class)\n@EnableAutoConfiguration\npublic class Application {\n\n    public static void main(final String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n\n<p>Everything appears to work correctly. When I run the application, everything appears to work correctly. I can POST a new Post object to <code>http://localhost:8080/posts</code> like so:</p>\n\n<p>Body: \n<code>{\"author\":\"testAuthor\", \"title\":\"test\", \"content\":\"hello world\"}</code></p>\n\n<p>Result at <code>http://localhost:8080/posts/1</code>:</p>\n\n<pre><code>{\n    \"author\": \"testAuthor\",\n    \"content\": \"hello world\",\n    \"title\": \"test\",\n    \"_links\": {\n        \"self\": {\n            \"href\": \"http://localhost:8080/posts/1\"\n        },\n        \"comments\": {\n            \"href\": \"http://localhost:8080/posts/1/comments\"\n        }\n    }\n}\n</code></pre>\n\n<p>However, when I perform a GET at <code>http://localhost:8080/posts/1/comments</code> I get an empty object <code>{}</code> returned,  and if I try to POST a comment to the same URI, I get an HTTP 405 Method Not Allowed.</p>\n\n<p>What is the correct way to create a <code>Comment</code> resource and associate it with this <code>Post</code>? I'd like to avoid POSTing directly to <code>http://localhost:8080/comments</code> if possible.</p>\n", "tags": ["java", "spring", "spring-boot", "spring-data-jpa", "spring-data-rest"], "title": "POSTing a @OneToMany sub-resource association in Spring Data REST", "answers": [{"body": "<p>Assuming you already have discovered the post URI and thus the URI of the association resource (considered to be <code>$association_uri</code> in the following), it generally takes these steps:</p>\n\n<ol>\n<li><p>Discover the collection resource managing comments:</p>\n\n<pre><code>curl -X GET http://localhost:8080\n\n200 OK\n{ _links : {\n    comments : { href : \"\u2026\" },\n    posts :  { href : \"\u2026\" }\n  }\n}\n</code></pre></li>\n<li><p>Follow the <code>comments</code> link and <code>POST</code> your data to the resource:</p>\n\n<pre><code>curl -X POST -H \"ContentType: application/json\" $url \n{ \u2026 // your payload // \u2026 }\n\n201 Created\nLocation: $comment_url\n</code></pre></li>\n<li><p>Assign the comment to the post by issuing a <code>PUT</code> to the association URI.</p>\n\n<pre><code>curl -X PUT -H \"ContentType: text/uri-list\" $association_url\n$comment_url\n\n204 No Content\n</code></pre></li>\n</ol>\n\n<p>Note, that in the last step, according to the specification of <a href=\"http://tools.ietf.org/html/rfc2483#section-5\"><code>text/uri-list</code></a>, you can submit multiple URIs identifying comments separated by a line break to assign multiple comments at once.</p>\n\n<p>A few more notes on the general design decisions. A post/comments example is usually a great example for an aggregate, which means I'd avoid the back-reference from the <code>Comment</code> to the <code>Post</code> and also avoid the <code>CommentRepository</code> completely. If the comments don't have a lifecycle on their own (which they usually don't in an composition-style relationship) you rather get the comments rendered inline directly and the entire process of adding and removing comments can rather be dealt with by using <a href=\"http://tools.ietf.org/html/rfc6902\">JSON Patch</a>. Spring Data REST has added <a href=\"https://github.com/spring-projects/spring-data-rest/commit/ef3720be11f117bb691edbbf63e38ff72e0eb3dd\">support for that</a> in the latest release candidate for the upcoming version 2.2.</p>\n", "title": "POSTing a @OneToMany sub-resource association in Spring Data REST", "tags": ["java", "spring", "spring-boot", "spring-data-jpa", "spring-data-rest"], "link": "http://stackoverflow.com/questions/25311978/posting-a-onetomany-sub-resource-association-in-spring-data-rest/25451662#25451662", "question_id": 25311978, "answer_id": 25451662}, {"body": "<p>You have to post the comment first and while posting the comment you can create an association posts entity.</p>\n\n<p>It should look something like below :</p>\n\n<pre><code>http://{server:port}/comment METHOD:POST\n\n{\"author\":\"abc\",\"content\":\"PQROHSFHFSHOFSHOSF\", \"post\":\"http://{server:port}/post/1\"}\n</code></pre>\n\n<p>and it will work perfectly fine.</p>\n", "title": "POSTing a @OneToMany sub-resource association in Spring Data REST", "tags": ["java", "spring", "spring-boot", "spring-data-jpa", "spring-data-rest"], "link": "http://stackoverflow.com/questions/25311978/posting-a-onetomany-sub-resource-association-in-spring-data-rest/26426909#26426909", "question_id": 25311978, "answer_id": 26426909}, {"body": "<p>I faced the same scenario and I had to remove the repository class for the sub entity as I have used one to many mapping and pull data thru the main entity itself. Now I am getting the entire response with data.</p>\n", "title": "POSTing a @OneToMany sub-resource association in Spring Data REST", "tags": ["java", "spring", "spring-boot", "spring-data-jpa", "spring-data-rest"], "link": "http://stackoverflow.com/questions/25311978/posting-a-onetomany-sub-resource-association-in-spring-data-rest/37821891#37821891", "question_id": 25311978, "answer_id": 37821891}], "creation_date": 1408030335, "score": 41, "link": "http://stackoverflow.com/questions/25311978/posting-a-onetomany-sub-resource-association-in-spring-data-rest", "question_id": 25311978}, {"body": "<p>Is there a way to listen for events from Picasso when using the builder like:</p>\n\n<p><code>Picasso.with(getContext()).load(url).into(imageView);</code></p>\n\n<p>I'm trying to call <code>requestLayout()</code> and <code>invalidate()</code> on the parent <code>GridView</code> so it'll resize properly but I don't know how to set a listener or callback. </p>\n\n<p>I see that Picasso has error event reporting, but is there a success event?</p>\n", "tags": ["java", "android", "picasso"], "title": "How to listen for Picasso (Android) load complete events?", "answers": [{"body": "<p>You can use a <code>Callback</code> to get onSuccess and onError events. Just add a new Callback to your request like so:</p>\n\n<pre><code>Picasso.with(getContext())\n    .load(url)\n    .into(imageView, new com.squareup.picasso.Callback() {\n                        @Override\n                        public void onSuccess() {\n\n                        }\n\n                        @Override\n                        public void onError() {\n\n                        }\n                    });\n</code></pre>\n\n<p>Then you can perform any alterations and modifications in the onSuccess callback.</p>\n", "title": "How to listen for Picasso (Android) load complete events?", "tags": ["java", "android", "picasso"], "link": "http://stackoverflow.com/questions/26548660/how-to-listen-for-picasso-android-load-complete-events/26548894#26548894", "question_id": 26548660, "answer_id": 26548894}, {"body": "<p>If you need to access the bitmap before it is loaded to the view, try using :</p>\n\n<pre><code>private Target target = new Target() {\n      @Override\n      public void onBitmapLoaded(Bitmap bitmap, Picasso.LoadedFrom from) {       \n      }\n      @Override\n      public void onBitmapFailed() {\n      }\n}\n</code></pre>\n\n<p>In the calling method:</p>\n\n<pre><code>Picasso.with(this).load(\"url\").into(target);\n</code></pre>\n\n<p>Ideally you'd implement Target on a view or view holder object directly.</p>\n\n<p>Hope this helps</p>\n", "title": "How to listen for Picasso (Android) load complete events?", "tags": ["java", "android", "picasso"], "link": "http://stackoverflow.com/questions/26548660/how-to-listen-for-picasso-android-load-complete-events/26549375#26549375", "question_id": 26548660, "answer_id": 26549375}, {"body": "<p>Square lately has updated Target class, and now, there are more methods to override (was added onPrepareLoad and was changed onBitmapFailed):</p>\n\n<pre><code>Target target = new Target() {\n    @Override\n    public void onBitmapLoaded(Bitmap bitmap, Picasso.LoadedFrom from) {\n    }\n\n    @Override\n    public void onBitmapFailed(Drawable errorDrawable) {\n\n    }\n\n    @Override\n    public void onPrepareLoad(Drawable placeHolderDrawable) {\n\n    }\n};\n</code></pre>\n\n<p>And you still has to use:</p>\n\n<pre><code>Picasso.with(context).load(url).into(target);\n</code></pre>\n", "title": "How to listen for Picasso (Android) load complete events?", "tags": ["java", "android", "picasso"], "link": "http://stackoverflow.com/questions/26548660/how-to-listen-for-picasso-android-load-complete-events/32839518#32839518", "question_id": 26548660, "answer_id": 32839518}, {"body": "<p>Answering @Jas follow up question as a comment to MrEngineer13's answer (since I don't have enough reputation to comment in any answer), you should use the <code>error()</code> method prior to registering the <code>Callback</code> at the <code>into()</code> method, for example:</p>\n\n<pre><code>Picasso.with(getContext())\n    .load(url)\n    .error(R.drawable.error_placeholder_image)\n    .into(imageView, new com.squareup.picasso.Callback() {\n        @Override\n        public void onSuccess() {\n            //Success image already loaded into the view\n        }\n\n        @Override\n        public void onError() {\n            //Error placeholder image already loaded into the view, do further handling of this situation here\n        }\n    }\n);\n</code></pre>\n", "title": "How to listen for Picasso (Android) load complete events?", "tags": ["java", "android", "picasso"], "link": "http://stackoverflow.com/questions/26548660/how-to-listen-for-picasso-android-load-complete-events/33938243#33938243", "question_id": 26548660, "answer_id": 33938243}, {"body": "<pre><code> private final Callback mImageCallback = new Callback() {\n        @Override\n        public void onSuccess() {\n            startPostponedEnterTransition();\n        }\n\n        @Override\n        public void onError() {\n            startPostponedEnterTransition();\n        }\n    };\n\nRequestCreator creator = Picasso.with(getActivity()).load(list.get(position).getId());\ncreator.into(imageView, mImageCallback);\n</code></pre>\n", "title": "How to listen for Picasso (Android) load complete events?", "tags": ["java", "android", "picasso"], "link": "http://stackoverflow.com/questions/26548660/how-to-listen-for-picasso-android-load-complete-events/37544047#37544047", "question_id": 26548660, "answer_id": 37544047}], "creation_date": 1414156567, "score": 40, "link": "http://stackoverflow.com/questions/26548660/how-to-listen-for-picasso-android-load-complete-events", "question_id": 26548660}, {"body": "<p>How is the compiler not complaining when I write the following code?</p>\n\n<pre><code>public class MyClass \n{\n    private int count;\n\n    public MyClass(int x){\n        this.count=x;\n    }\n\n    public void testPrivate(MyClass o){\n        System.out.println(o.count);\n    }   \n}\n</code></pre>\n\n<p>Even though it is an instance of the same class in which <code>testPrivate</code> is written, shouldn't it give a compilation error at <code>System.out.println(o.count)</code>? After all, I am trying to access a private variable directly.<br>\nThe code even runs fine.</p>\n", "tags": ["java", "private"], "title": "How is this private variable accessible?", "answers": [{"body": "<p>A private member is accessible from any method within the class in which it is declared, regardless of whether that method accesses its own (<code>this</code>) instance's private member or some other instance's private member.</p>\n\n<p>This is stated in <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6.1\">JLS 6.6.1</a>:</p>\n\n<blockquote>\n  <p>...Otherwise, if the member or constructor is declared private, then access is permitted if and only if it occurs within the body of the top level class (\u00a77.6) that encloses the declaration of the member or constructor. </p>\n</blockquote>\n\n<p>This feature of Java allows you to write methods that accept an instance of the class as an argument (for example - <code>clone(Object other)</code>, <code>compareTo(Object other)</code>) without relying on the class having non private getters for all the private properties that need to be accessed.</p>\n", "title": "How is this private variable accessible?", "tags": ["java", "private"], "link": "http://stackoverflow.com/questions/27482579/how-is-this-private-variable-accessible/27482607#27482607", "question_id": 27482579, "answer_id": 27482607}, {"body": "<p>Private fields are private to the class as a whole, not just to the object.</p>\n\n<p>Other classes do not know that MyClass has a field called count; however, A MyClass object knows that another MyClass object has the count field.</p>\n", "title": "How is this private variable accessible?", "tags": ["java", "private"], "link": "http://stackoverflow.com/questions/27482579/how-is-this-private-variable-accessible/27482617#27482617", "question_id": 27482579, "answer_id": 27482617}, {"body": "<p>Methods, Variables and Constructors that are declared private can only be accessed within the declared class itself. Check the <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html\" rel=\"nofollow\">official documentation</a></p>\n", "title": "How is this private variable accessible?", "tags": ["java", "private"], "link": "http://stackoverflow.com/questions/27482579/how-is-this-private-variable-accessible/27482654#27482654", "question_id": 27482579, "answer_id": 27482654}, {"body": "<blockquote>\n  <p>Though it is the instance of the same class in which testPrivate is\n  written, but shouldn't it through a compiler error at\n  System.out.println(o.count);</p>\n</blockquote>\n\n<p><strong>No</strong>. It will never throw a compilation error.</p>\n\n<p>This is much similar to what a simple getter and setter does or a copy constructor does. Remember we can access <code>private</code> members using <code>this.</code></p>\n\n<pre><code>public MyClass {\n  private String propertyOne;\n  private String propertyTwo;\n\n  // cannot access otherObject private members directly\n  // so we use getters\n  // But MyClass private members are accessible using this.\n  public MyClass(OtherClass otherObject) {\n      this.propertyOne = otherObject.getPropertyOne();\n      this.propertyTwo = otherObject.calculatePropertyTwo();\n  }\n\n  public void setPropertyOne(String propertyOne) {\n      this.propertyOne = propertyOne;\n  }\n\n  public String getPropertyOne() {\n      return this.propertyOne;\n  }\n}\n</code></pre>\n\n<p>Your <code>testPrivate</code> method accepts an instance of MyClass. Since <code>testPrivate</code> is a method inside <code>MyClass</code>, it will have access to <code>private</code> properties.</p>\n\n<pre><code>  public void testPrivate(MyClass o) {\n      this.propertyOne = o.propertOne;\n  }\n</code></pre>\n\n<p>Methods defined inside the class will always have access to it's <code>private</code> members, through <code>this.</code> and instance variable.</p>\n\n<p>But if you define <code>testPrivate</code> outside of <code>MyClass</code> then, you won't have access to <code>private</code> members. There you will have to use a method or a setter or a getter.</p>\n", "title": "How is this private variable accessible?", "tags": ["java", "private"], "link": "http://stackoverflow.com/questions/27482579/how-is-this-private-variable-accessible/27483288#27483288", "question_id": 27482579, "answer_id": 27483288}, {"body": "<p>Accessors are not security!  They are encapsulation, to keep others from having to know about the code.</p>\n\n<p>Consider if someone wrote a <a href=\"http://c2.com/cgi/wiki?QuantumBogoSort\" rel=\"nofollow\">Quantum Bogo Sort</a>, but disappeared once he quashed the last bug -- understanding the code causes one to be either deleted from the universe or to go mad.</p>\n\n<p>Despite this minor drawback, if properly encapsulated, this should become your prefered sorting algorithm, as all fields and methods except Sort should be private.</p>\n\n<p>You don't know how it works, and you don't want to know how it works, but it works and that's enough.  If on the other hand, everything is public, and you have to understand how it does what it does to use it correctly -- that's just to much bother, I'll stick with quicksort.</p>\n", "title": "How is this private variable accessible?", "tags": ["java", "private"], "link": "http://stackoverflow.com/questions/27482579/how-is-this-private-variable-accessible/27489073#27489073", "question_id": 27482579, "answer_id": 27489073}], "creation_date": 1418641345, "score": 40, "link": "http://stackoverflow.com/questions/27482579/how-is-this-private-variable-accessible", "question_id": 27482579}, {"body": "<p>In Java, does it cost memory to declare a class level instance variable without initializing it?<br>\nFor example: Does <code>int i;</code> use any memory if I don't initialize it with <code>i = 5;</code>?</p>\n\n<p><em>Details:</em></p>\n\n<p>I have a huge super-class that many different (not different enough to have their own super classes) sub-classes extend. Some sub-classes don't use every single primitive declared by the super-class. Can I simply keep such primitives as uninitialized and only initialize them in necessary sub-classes to save memory? </p>\n", "tags": ["java", "memory-management", "initialization", "primitive"], "title": "Do uninitialized primitive instance variables use memory?", "answers": [{"body": "<p>All members defined in your classes have default values, even if you don't initialize them explicitly, so they do use memory. </p>\n\n<p>For example, every <code>int</code> will be initialized by default to <code>0</code>, and will occupy <code>4</code> bytes.</p>\n\n<p>For class members :</p>\n\n<pre><code>int i;\n</code></pre>\n\n<p>is the same as :</p>\n\n<pre><code>int i = 0;\n</code></pre>\n\n<p>Here's what the <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.3\">JLS</a> says about instance variables :</p>\n\n<blockquote>\n  <p>If a class T has a field a that is an instance variable, then a new instance variable a is created and initialized to a <strong>default value</strong> <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5\">(\u00a74.12.5)</a> as part of each newly created object of class T or of any class that is a subclass of T (\u00a78.1.4). The instance variable effectively ceases to exist when the object of which it is a field is no longer referenced, after any necessary finalization of the object (\u00a712.6) has been completed.</p>\n</blockquote>\n", "title": "Do uninitialized primitive instance variables use memory?", "tags": ["java", "memory-management", "initialization", "primitive"], "link": "http://stackoverflow.com/questions/26585220/do-uninitialized-primitive-instance-variables-use-memory/26585250#26585250", "question_id": 26585220, "answer_id": 26585250}, {"body": "<p>Yes, memory allocates though you are not assigning any value to it.</p>\n\n<pre><code>int i;\n</code></pre>\n\n<p>That takes <code>32 bit</code> memory (allocation). No matter you are using it or not.</p>\n\n<blockquote>\n  <p>Some sub-classes don't use every single primitive declared by the super-Class. Can I simply keep such primitives as uninitialized and only initialize them in necessary sub-classes to save memory?</p>\n</blockquote>\n\n<p>Again, no matter where you initialized, the memory allocates. </p>\n\n<p>Only thing you need to take care is, just find the unused primitives and remove them.</p>\n\n<p><strong>Edit:</strong>\nAdding one more point that unlike primitive's references by default value is <code>null</code>, which carries a a memory of</p>\n\n<pre><code> 4 bytes(32-bit) \n 8 bytes on (64-bit)\n</code></pre>\n", "title": "Do uninitialized primitive instance variables use memory?", "tags": ["java", "memory-management", "initialization", "primitive"], "link": "http://stackoverflow.com/questions/26585220/do-uninitialized-primitive-instance-variables-use-memory/26585258#26585258", "question_id": 26585220, "answer_id": 26585258}, {"body": "<p>Yes. In your class level variables will assign to its default value even if you don't initialize them.</p>\n\n<p>In this case you <code>int</code> variables will assign to <code>0</code> and will occupied <code>4 bytes</code> per each.</p>\n", "title": "Do uninitialized primitive instance variables use memory?", "tags": ["java", "memory-management", "initialization", "primitive"], "link": "http://stackoverflow.com/questions/26585220/do-uninitialized-primitive-instance-variables-use-memory/26585265#26585265", "question_id": 26585220, "answer_id": 26585265}, {"body": "<p>In Java, when you declare a class attribute such as <code>String str;</code>, you are declaring a reference to an object, but it is not pointing yet to any object unless you affect a value to it <code>str=value;</code>. But as you may guess, the reference, even without pointing to a memory place, consumes itself some memory.</p>\n", "title": "Do uninitialized primitive instance variables use memory?", "tags": ["java", "memory-management", "initialization", "primitive"], "link": "http://stackoverflow.com/questions/26585220/do-uninitialized-primitive-instance-variables-use-memory/26585341#26585341", "question_id": 26585220, "answer_id": 26585341}, {"body": "<p>The original question talks about class level variables and the answer is that they do use space, but it's interesting to look at method scoped ones too.</p>\n\n<p>Let's take a small example:</p>\n\n<pre><code>public class MemTest {\n    public void doSomething() {\n        long i = 0;  // Line 3\n        if(System.currentTimeMillis() &gt; 0) {\n            i = System.currentTimeMillis();\n            System.out.println(i);\n        }\n        System.out.println(i);\n    }\n}\n</code></pre>\n\n<p>If we look at the bytecode generated:</p>\n\n<pre><code>  L0\n    LINENUMBER 3 L0\n    LCONST_0\n    LSTORE 1\n</code></pre>\n\n<p>Ok, as expected we assign a value at line 3 in the code, now if we change line 3 to (and remove the second println due to a compiler error):</p>\n\n<pre><code>long i; // Line 3\n</code></pre>\n\n<p>... and check the bytecode then nothing is generated for line 3. So, the answer is that no memory is used at this point. In fact, the LSTORE occurs only on line 5 when we assign to the variable. So, declaring an unassigned method variable does not use any memory and, in fact, doesn't generate any bytecode. It's equivalent to making the declaration where you first assign to it.</p>\n", "title": "Do uninitialized primitive instance variables use memory?", "tags": ["java", "memory-management", "initialization", "primitive"], "link": "http://stackoverflow.com/questions/26585220/do-uninitialized-primitive-instance-variables-use-memory/26585945#26585945", "question_id": 26585220, "answer_id": 26585945}, {"body": "<p>Neither the Java Language Specification nor the Java Virtual Machine Specification specifies the answer to this because it's an implementation detail. In fact, <a href=\"http://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.7\" rel=\"nofollow\">JVMS \u00a72.7 specifically says</a>:</p>\n\n<blockquote>\n  <h3>Representation of Objects</h3>\n  \n  <p>The Java Virtual Machine does not mandate any particular internal structure for objects.</p>\n</blockquote>\n\n<p>In theory, a conformant virtual machine could implement objects which have a lot of fields using set of bit flags to mark which fields have been set to non-default values. Initially no fields would be allocated, the flag bits would be all 0, and the object would be small. When a field is first set, the corresponding flag bit would be set to 1 and the object would be resized to make space for it. [The garbage collector already provides the necessary machinery for momentarily pausing running code in order to relocate live objects around the heap, which would be necessary for resizing them.]</p>\n\n<p>In practice, this is not a good idea because even if it saves memory it is complicated and slow. Access to fields would require temporarily locking the object to prevent corruption due to multithreading; then reading the current flag bits; and if the field exists then counting the set bits to calculate the current offset of the wanted field relative to the base of the object; then reading the field; and finally unlocking the object.</p>\n\n<p>So, no general-purpose Java virtual machine does anything like this. Some objects with an exorbitant number of fields might benefit from it, but even they couldn't rely on it, because they might need to run on the common virtual machines which don't do that.</p>\n\n<p>A flat layout which allocates space for all fields when an object is first instantiated is simple and fast, so that is the standard. Programmers assume that objects are allocated that way and thus design their programs accordingly to best take advantage of it. Likewise, virtual machine designers optimize to make that usage fast.</p>\n\n<p>Ultimately the flat layout of fields is a convention, not a rule, although you can rely on it anyway.</p>\n", "title": "Do uninitialized primitive instance variables use memory?", "tags": ["java", "memory-management", "initialization", "primitive"], "link": "http://stackoverflow.com/questions/26585220/do-uninitialized-primitive-instance-variables-use-memory/26609142#26609142", "question_id": 26585220, "answer_id": 26609142}], "creation_date": 1414404784, "score": 39, "link": "http://stackoverflow.com/questions/26585220/do-uninitialized-primitive-instance-variables-use-memory", "question_id": 26585220}, {"body": "<p>I installed Android Studio but it was giving me error that I need to install JDK but JDK was already installed. Then I realized it is asking to install 64bit version of JDK.  </p>\n\n<p>Anyway I just downloaded latest JDK 64bit version and set the following in Environment Variable but still Android Studio is giving error:</p>\n\n<p><strong>Error</strong></p>\n\n<pre><code>'tools.jar' seems to be not in Android Studio classpath.  \nPlease ensure JAVA_HOME points to JDK rather than JRE.\n</code></pre>\n\n<p><strong>Following paths are set in my Windows 8.</strong></p>\n\n<pre><code>Path in User Variables  \nE:\\Program Files\\Java\\jdk1.8.0_25\\bin\n\nJAVA_HOME in System Variables  \nE:\\Program Files\\Java\\jdk1.8.0_25\n\nPath in System Variables  \nE:\\Program Files\\Java\\jdk1.8.0_25\\bin\n</code></pre>\n\n<p>32bit JDK is installed on C drive while 64bit JDK is installed on E drive (as shown above). 32 bit JDK is not being used in any User or System Variables.  </p>\n\n<p>I have also restarted the PC.</p>\n\n<p>How do I fix this issue?</p>\n", "tags": ["java", "android", "windows-8", "android-studio"], "title": "tools.jar seems to be not in Android Studio classpath on Windows 8", "answers": [{"body": "<p>I tried everything I could but it didn't help. So I reinstalled Windows and installed Android Studio and now everything works.  </p>\n\n<p>And the irony is, there is no JAVA_HOME or JDK_HOME variable defined but it still works.</p>\n", "title": "tools.jar seems to be not in Android Studio classpath on Windows 8", "tags": ["java", "android", "windows-8", "android-studio"], "link": "http://stackoverflow.com/questions/27528652/tools-jar-seems-to-be-not-in-android-studio-classpath-on-windows-8/27666759#27666759", "question_id": 27528652, "answer_id": 27666759}, {"body": "<p>for me, simply removing and reinstalling JRE and JDK did the trick</p>\n", "title": "tools.jar seems to be not in Android Studio classpath on Windows 8", "tags": ["java", "android", "windows-8", "android-studio"], "link": "http://stackoverflow.com/questions/27528652/tools-jar-seems-to-be-not-in-android-studio-classpath-on-windows-8/27707352#27707352", "question_id": 27528652, "answer_id": 27707352}, {"body": "<p>In my case I've installed newest Java version without uninstalling older version first. After I've uninstalled the older Java version this error was gone. </p>\n\n<p>Also make sure your JAVA_HOME system variable is set properly, e.g.:\nVariable Name: JAVA_HOME\nVariable Value: C:\\Program Files\\Java\\jdk1.8.0_31\\</p>\n\n<p>And finally, that you've installed proper version for your OS, x86 or x64.</p>\n", "title": "tools.jar seems to be not in Android Studio classpath on Windows 8", "tags": ["java", "android", "windows-8", "android-studio"], "link": "http://stackoverflow.com/questions/27528652/tools-jar-seems-to-be-not-in-android-studio-classpath-on-windows-8/28381131#28381131", "question_id": 27528652, "answer_id": 28381131}, {"body": "<p>I had exactly the same problem.\nIn my case I finally installed JRE to \"C:\\Program Files...\" and the JDK to my default destination , which is \"E:\\Program Files...\"\nIt seems that the JDK and JRE cannot point to the same place for Android Studio .</p>\n", "title": "tools.jar seems to be not in Android Studio classpath on Windows 8", "tags": ["java", "android", "windows-8", "android-studio"], "link": "http://stackoverflow.com/questions/27528652/tools-jar-seems-to-be-not-in-android-studio-classpath-on-windows-8/28647444#28647444", "question_id": 27528652, "answer_id": 28647444}, {"body": "<p>I had this same problem and was able to fix it after wasting about 3 hours:</p>\n\n<p>Just copy tools.jar from <code>%JAVA_HOME%\\lib</code> to <code>(Android Studio Root)\\lib</code></p>\n", "title": "tools.jar seems to be not in Android Studio classpath on Windows 8", "tags": ["java", "android", "windows-8", "android-studio"], "link": "http://stackoverflow.com/questions/27528652/tools-jar-seems-to-be-not-in-android-studio-classpath-on-windows-8/28718588#28718588", "question_id": 27528652, "answer_id": 28718588}, {"body": "<p>check your JAVA_HOME value!</p>\n\n<p>it should be like this </p>\n\n<blockquote>\n  <p>E:\\Program Files\\Java\\jdk1.8.0_25\\jre</p>\n</blockquote>\n", "title": "tools.jar seems to be not in Android Studio classpath on Windows 8", "tags": ["java", "android", "windows-8", "android-studio"], "link": "http://stackoverflow.com/questions/27528652/tools-jar-seems-to-be-not-in-android-studio-classpath-on-windows-8/30224636#30224636", "question_id": 27528652, "answer_id": 30224636}, {"body": "<p>I had the same issue on windows 7 when I installed Android Studio. I had Jdk 8 on my system. So for me, copying the tools.jar from jdk\\lib to androidstudio\\lib worked. I found the tools.jar was missing from androidstudio's lib directory. I had set JAVA_HOME in user variable and JDK in system variable.</p>\n", "title": "tools.jar seems to be not in Android Studio classpath on Windows 8", "tags": ["java", "android", "windows-8", "android-studio"], "link": "http://stackoverflow.com/questions/27528652/tools-jar-seems-to-be-not-in-android-studio-classpath-on-windows-8/30591874#30591874", "question_id": 27528652, "answer_id": 30591874}, {"body": "<p>First locate in your PC the route of your JDK (for instance: <code>C:\\Program Files\\Java\\jdk1.7.0_45</code>)</p>\n\n<p>then change the <code>JAVA_HOME</code> variable as follows:</p>\n\n<ol>\n<li>Right-click the My Computer icon on your desktop and select Properties</li>\n<li>Click the Advanced tab</li>\n<li>Click the Environment Variables button</li>\n<li>Under System Variables, click New</li>\n<li>Enter the variable name as <code>JAVA_HOME</code></li>\n<li>Enter the variable value as the installation path for the Java Development Kit</li>\n</ol>\n", "title": "tools.jar seems to be not in Android Studio classpath on Windows 8", "tags": ["java", "android", "windows-8", "android-studio"], "link": "http://stackoverflow.com/questions/27528652/tools-jar-seems-to-be-not-in-android-studio-classpath-on-windows-8/30601543#30601543", "question_id": 27528652, "answer_id": 30601543}, {"body": "<p>I've uninstalled jre and reinstall jdk and android studio.Win 8.1 </p>\n", "title": "tools.jar seems to be not in Android Studio classpath on Windows 8", "tags": ["java", "android", "windows-8", "android-studio"], "link": "http://stackoverflow.com/questions/27528652/tools-jar-seems-to-be-not-in-android-studio-classpath-on-windows-8/30992396#30992396", "question_id": 27528652, "answer_id": 30992396}, {"body": "<p>I had the same error -- <em>tools.jar seems to be not in Studio classpath.  Please ensure JAVA_HOME points to JDK rather than JRE.</em></p>\n\n<p>I have a few Java JDKs downloaded.  JAVA_HOME was pointing to C:\\java\\jdk1.7.0_45.  When I switched to C:\\java\\jdk1.7.0_75, it worked.  It makes no sense - both have lib/tools.jar.   I did a jar tvf on each of the tools.jar files and they were fine.  I ran java -version on each java &amp; it ran ok.  Dunno - makes no sense.</p>\n\n<p>Platform:  Windows 7 Professional - 64-bit v1.10.00.AG B11    Service Pack 1</p>\n", "title": "tools.jar seems to be not in Android Studio classpath on Windows 8", "tags": ["java", "android", "windows-8", "android-studio"], "link": "http://stackoverflow.com/questions/27528652/tools-jar-seems-to-be-not-in-android-studio-classpath-on-windows-8/31481644#31481644", "question_id": 27528652, "answer_id": 31481644}, {"body": "<p>I installed jdk 1.8.0_51 64bit on Windows7.\nAfter that, no JAVA_HOME was defined, so I had to define it myself as described above, but it did not work unless I added a trailing backslash:\n<code>D:\\Programs\\Java\\jdk1.8.0_51\\</code>.</p>\n\n<p>Without the backslash at the end it did not work.</p>\n", "title": "tools.jar seems to be not in Android Studio classpath on Windows 8", "tags": ["java", "android", "windows-8", "android-studio"], "link": "http://stackoverflow.com/questions/27528652/tools-jar-seems-to-be-not-in-android-studio-classpath-on-windows-8/32405953#32405953", "question_id": 27528652, "answer_id": 32405953}, {"body": "<p>Just Copy the tools.jar from your jdk to Android lib directory.</p>\n", "title": "tools.jar seems to be not in Android Studio classpath on Windows 8", "tags": ["java", "android", "windows-8", "android-studio"], "link": "http://stackoverflow.com/questions/27528652/tools-jar-seems-to-be-not-in-android-studio-classpath-on-windows-8/32431512#32431512", "question_id": 27528652, "answer_id": 32431512}, {"body": "<p>Known issue - my solution was to install JDK 7u80 - worked after that.</p>\n\n<p><a href=\"https://code.google.com/p/android/issues/detail?id=187048\" rel=\"nofollow\">https://code.google.com/p/android/issues/detail?id=187048</a></p>\n", "title": "tools.jar seems to be not in Android Studio classpath on Windows 8", "tags": ["java", "android", "windows-8", "android-studio"], "link": "http://stackoverflow.com/questions/27528652/tools-jar-seems-to-be-not-in-android-studio-classpath-on-windows-8/33045074#33045074", "question_id": 27528652, "answer_id": 33045074}, {"body": "<p>Installing it to the default installation path instead of a custom one did solve the issue for me.</p>\n\n<p>Source: <a href=\"https://code.google.com/p/android/issues/detail?id=187048#c9\" rel=\"nofollow\">https://code.google.com/p/android/issues/detail?id=187048#c9</a></p>\n", "title": "tools.jar seems to be not in Android Studio classpath on Windows 8", "tags": ["java", "android", "windows-8", "android-studio"], "link": "http://stackoverflow.com/questions/27528652/tools-jar-seems-to-be-not-in-android-studio-classpath-on-windows-8/33186345#33186345", "question_id": 27528652, "answer_id": 33186345}, {"body": "<p>First locate in your PC the route of your JDK (for instance: First locate in your PC the route of your JDK (for instance: C:\\Program Files\\Java\\jdk1.8.0_11)</p>\n\n<p>then change the JAVA_HOME variable as follows:</p>\n\n<p>Right-click the My Computer icon on your desktop and select Properties\nClick the Advanced tab\nClick the Environment Variables button\nUnder System Variables, click New or edit it if there already a path for it ( you should make sure that the path is jdk)\nEnter the variable name as JAVA_HOME\nEnter the variable value as the installation path for the Java Development Kit)</p>\n", "title": "tools.jar seems to be not in Android Studio classpath on Windows 8", "tags": ["java", "android", "windows-8", "android-studio"], "link": "http://stackoverflow.com/questions/27528652/tools-jar-seems-to-be-not-in-android-studio-classpath-on-windows-8/35062102#35062102", "question_id": 27528652, "answer_id": 35062102}], "creation_date": 1418829012, "score": 39, "link": "http://stackoverflow.com/questions/27528652/tools-jar-seems-to-be-not-in-android-studio-classpath-on-windows-8", "question_id": 27528652}, {"body": "<p>When running the Scala interpreter in Ubuntu 14.04, I get the following message printed as the first line:</p>\n\n<pre><code>Picked up JAVA_TOOL_OPTIONS: -javaagent:/usr/share/java/jayatanaag.jar \n</code></pre>\n\n<p>Followed by the familiar \"Welcome to Scala\" message.</p>\n\n<p>I'm worried because I haven't seen that when running Scala before - what does it mean, is it dangerous, etc?</p>\n\n<p>Apparently the environment variable <code>$JAVA_TOOL_OPTIONS</code> is set to <code>-javaagent:/usr/share/java/jayatanaag.jar</code> - I didn't set that, but what did and why? Can I safely unset it?</p>\n\n<p>Additional info:</p>\n\n<ul>\n<li>recently installed Android Studio</li>\n<li>The word \"ayatana\" in the JAR's name might point to Ubuntu's project <a href=\"https://wiki.ubuntu.com/Ayatana\">Ayatana</a></li>\n</ul>\n", "tags": ["java", "scala", "ubuntu"], "title": "&quot;Picked up JAVA_TOOL_OPTIONS: -javaagent:/usr/share/java/jayatanaag.jar&quot; when starting the Scala interpreter", "answers": [{"body": "<p>This occurs if you have installed jayatana which allows the hidden global menu in eclipse to work with Unity:</p>\n\n<pre><code>sudo add-apt-repository ppa:danjaredg/jayatana\nsudo apt-get update\nsudo apt-get install jayatana\n</code></pre>\n\n<p>that puts JARs in the <code>/usr/share/java/</code> folder which is echoed by the JVM when starting up.  </p>\n\n<p>If you remove that software, you will not see the message:</p>\n\n<pre><code>sudo apt-get remove jayatana\n</code></pre>\n\n<p>You may have to delete:</p>\n\n<pre><code>/usr/share/upstart/sessions/jayatana.conf \n</code></pre>\n\n<p>and restart your session so that the environment variable <code>JAVA_TOOL_OPTIONS</code> is not set.</p>\n", "title": "&quot;Picked up JAVA_TOOL_OPTIONS: -javaagent:/usr/share/java/jayatanaag.jar&quot; when starting the Scala interpreter", "tags": ["java", "scala", "ubuntu"], "link": "http://stackoverflow.com/questions/26074446/picked-up-java-tool-options-javaagent-usr-share-java-jayatanaag-jar-when-st/26249744#26249744", "question_id": 26074446, "answer_id": 26249744}, {"body": "<p>You can disable jayatana just for the current shell session by unsetting <code>JAVA_TOOL_OPTIONS</code> like so:</p>\n\n<pre><code>unset JAVA_TOOL_OPTIONS\n</code></pre>\n\n<p>That way it will still be enabled for applications needing it.</p>\n", "title": "&quot;Picked up JAVA_TOOL_OPTIONS: -javaagent:/usr/share/java/jayatanaag.jar&quot; when starting the Scala interpreter", "tags": ["java", "scala", "ubuntu"], "link": "http://stackoverflow.com/questions/26074446/picked-up-java-tool-options-javaagent-usr-share-java-jayatanaag-jar-when-st/30201976#30201976", "question_id": 26074446, "answer_id": 30201976}, {"body": "<p>On Windows,\nset JAVA_TOOL_OPTIONS=</p>\n\n<p>Setting to null will remove it from the environment. </p>\n", "title": "&quot;Picked up JAVA_TOOL_OPTIONS: -javaagent:/usr/share/java/jayatanaag.jar&quot; when starting the Scala interpreter", "tags": ["java", "scala", "ubuntu"], "link": "http://stackoverflow.com/questions/26074446/picked-up-java-tool-options-javaagent-usr-share-java-jayatanaag-jar-when-st/30762716#30762716", "question_id": 26074446, "answer_id": 30762716}, {"body": "<p>This is because of Jayatana, which is added to Ubuntu 15.04 in order to enable global menu for Java Swing applications. You can safely remove this message by entering the following command in a terminal. This command will remove the auto-start configuration of Jayatana.</p>\n\n<pre><code>sudo rm /usr/share/upstart/sessions/jayatana.conf\n</code></pre>\n\n<p>However, removing this option will disable the global menu support of Java Swing applications like Netbeans, IntelliJ IDEA. I have shared my workaround to suppress the message without losing the global menu in this article: <a href=\"http://www.javahelps.com/2015/06/global-menu-support-for-java.html\">Global Menu Support for Java Applications</a></p>\n", "title": "&quot;Picked up JAVA_TOOL_OPTIONS: -javaagent:/usr/share/java/jayatanaag.jar&quot; when starting the Scala interpreter", "tags": ["java", "scala", "ubuntu"], "link": "http://stackoverflow.com/questions/26074446/picked-up-java-tool-options-javaagent-usr-share-java-jayatanaag-jar-when-st/31781318#31781318", "question_id": 26074446, "answer_id": 31781318}, {"body": "<p>If you don't want to uninstall anything you can create a key store from a terminal:</p>\n\n<pre><code>keytool -keystore clientkeystore -genkey -alias anyalias\n</code></pre>\n\n<p>(you should create it at project's forlder)</p>\n\n<p>And then in Android Studio click Build->Generate Signed APK and choose created keystore.</p>\n", "title": "&quot;Picked up JAVA_TOOL_OPTIONS: -javaagent:/usr/share/java/jayatanaag.jar&quot; when starting the Scala interpreter", "tags": ["java", "scala", "ubuntu"], "link": "http://stackoverflow.com/questions/26074446/picked-up-java-tool-options-javaagent-usr-share-java-jayatanaag-jar-when-st/32546783#32546783", "question_id": 26074446, "answer_id": 32546783}, {"body": "<p>If you are using Windows OS, goto environment variables and delete or set to null the varible JAVA_TOOL_OPTIONS. </p>\n", "title": "&quot;Picked up JAVA_TOOL_OPTIONS: -javaagent:/usr/share/java/jayatanaag.jar&quot; when starting the Scala interpreter", "tags": ["java", "scala", "ubuntu"], "link": "http://stackoverflow.com/questions/26074446/picked-up-java-tool-options-javaagent-usr-share-java-jayatanaag-jar-when-st/35378136#35378136", "question_id": 26074446, "answer_id": 35378136}], "creation_date": 1411819243, "score": 39, "link": "http://stackoverflow.com/questions/26074446/picked-up-java-tool-options-javaagent-usr-share-java-jayatanaag-jar-when-st", "question_id": 26074446}, {"body": "<p>There has been <a href=\"https://www.google.co.uk/search?q=site:mail.openjdk.java.net+sjavac\">some buzz</a> about a tool called <code>sjavac</code> on the OpenJDK mailing lists. Also, there are two related JEPs: <a href=\"http://openjdk.java.net/jeps/139\">JEP 139: Enhance javac to Improve Build Speed</a> and <a href=\"http://openjdk.java.net/jeps/199\">JEP 199: Smart Java Compilation, Phase Two</a>.</p>\n\n<p>My questions are:</p>\n\n<ul>\n<li>What exactly is the <code>sjavac</code> tool?</li>\n<li>Who is it intended for?</li>\n<li>How do I use it?</li>\n</ul>\n\n<p><sup><sub><em>Disclaimer: Self answered question. Just wanted to bring the knowledge of this tool to the StackOverflow community and to create a reference to future sjavac FAQ.</em></sub></sup></p>\n", "tags": ["java", "javac"], "title": "What is sjavac, who is it for and how do I use it?", "answers": [{"body": "<blockquote>\n  <p><strong>What exactly is the sjavac tool?</strong></p>\n</blockquote>\n\n<p>The <code>sjavac</code> tool is an (allegedly <em>smart</em>) wrapper around <code>javac</code>, developed at Oracle and intended to provide the following features:</p>\n\n<ul>\n<li><strong>incremental compiles</strong> - recompile only what's necessary </li>\n<li><strong>parallel compilation</strong> - utilize more than one core during compilation</li>\n<li><strong>keep compiler in a hot VM</strong> - reuse a JIT'ed javac instance for consecutive invocations</li>\n</ul>\n\n<p>When recompiling a set of source files, javac looks at the timestamps of the .java and .class files to determine what to keep and what to recompile. This is incredibly crude and can be devastating for large code bases. In addition to the timestamps sjavac inspects the public API of the dependencies to judge which files need to be recompiled.</p>\n\n<p>Sjavac also attempts to split up the compilation into multiple invocations of javac. In other words, it brings a high level of parallelism to the build process.</p>\n\n<p>Finally, the sjavac tool is split in a client part and a server part which allows you to leave sjavac running in the background, JIT'ed and ready for use in consecutive calls.</p>\n\n<blockquote>\n  <p><strong>Who is it intended for?</strong></p>\n</blockquote>\n\n<p>People who are working on large projects and frequently recompiles the code base during development are encouraged to try out <code>sjavac</code>. (Be aware however that the tool is currently under development and there are still open issues.)</p>\n\n<blockquote>\n  <p><strong>How do I use it?</strong></p>\n</blockquote>\n\n<p>The tool is not yet shipped with the OpenJDK, so you'll have to get it from the <a href=\"http://hg.openjdk.java.net/jdk9/dev/langtools\">OpenJDK jdk9/dev repository</a>. Also, there is no launcher in place yet, so you invoke it with <code>java com.sun.tools.sjavac.Main</code>.</p>\n", "title": "What is sjavac, who is it for and how do I use it?", "tags": ["java", "javac"], "link": "http://stackoverflow.com/questions/26424759/what-is-sjavac-who-is-it-for-and-how-do-i-use-it/26424760#26424760", "question_id": 26424759, "answer_id": 26424760}, {"body": "<p>You can try the jdk8 backport of sjavac here: <a href=\"http://sjavac.s3-website-eu-west-1.amazonaws.com/\" rel=\"nofollow\">http://sjavac.s3-website-eu-west-1.amazonaws.com/</a></p>\n", "title": "What is sjavac, who is it for and how do I use it?", "tags": ["java", "javac"], "link": "http://stackoverflow.com/questions/26424759/what-is-sjavac-who-is-it-for-and-how-do-i-use-it/26642266#26642266", "question_id": 26424759, "answer_id": 26642266}], "creation_date": 1413547874, "score": 39, "link": "http://stackoverflow.com/questions/26424759/what-is-sjavac-who-is-it-for-and-how-do-i-use-it", "question_id": 26424759}, {"body": "<p>Google Guava has a predicate that <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Predicates.html#alwaysTrue%28%29\">always returns <code>true</code></a>. Does Java 8 have something similar for its <code>Predicate</code>? I know I could use <code>(foo)-&gt;{return true;}</code>, but I want something pre-made, analogous to <code>Collections.emptySet()</code>.</p>\n", "tags": ["java", "lambda", "java-8", "predicate"], "title": "Built-in Java 8 predicate that always returns true?", "answers": [{"body": "<p>There are no built-in always-true and always-false predicates in Java 8. The most concise way to write these is</p>\n\n<pre><code>x -&gt; true\n</code></pre>\n\n<p>and</p>\n\n<pre><code>x -&gt; false\n</code></pre>\n\n<p>Compare these to</p>\n\n<pre><code>Predicate.alwaysTrue() // Guava\n</code></pre>\n\n<p>and finally to an anonymous inner class:</p>\n\n<pre><code>new Predicate&lt;Object&gt;() {\n    public boolean test(Object x) {\n        return true;\n    }\n}\n</code></pre>\n\n<p>Probably the reason that Guava has these built-in predicates is that there is a huge syntactic advantage of a static method call over an anonymous inner class. In Java 8, the lambda syntax is so concise that there is a syntactic <em>disadvantage</em> to writing out a static method call.</p>\n\n<p>That's just a syntactic comparison, though. There is probably a small space advantage if there were a single global always-true predicate, compared to <code>x -&gt; true</code> occurrences spread across multiple classes, each of which would create its own predicate instance. Is this what you're concerned about? The savings didn't seem compelling, which is probably why they weren't added in the first place. But it could be reconsidered for a future release.</p>\n\n<p><strong>UPDATE 2015-04-24</strong></p>\n\n<p>We've considered the addition of a variety of static, named functions such as <code>Predicate.alwaysTrue</code>, <code>Runnable.noop</code>, etc., and we have decided not to add any more in future versions of Java SE.</p>\n\n<p>Certainly there is some value in something that has a name vs. a written-out lambda, but this value is quite small. We expect that people will learn how to read and write <code>x -&gt; true</code> and <code>() -&gt; { }</code> and that their usage will become idiomatic. Even the value of <code>Function.identity()</code> over <code>x -&gt; x</code> is questionable.</p>\n\n<p>There is a tiny performance advantage to reusing an existing function instead of evaluating a written-out lambda, but we expect the usage of these kinds of functions to be so small that such an advantage would be negligible, certainly not worth the API bloat.</p>\n\n<p>Holger also mentioned in comments the possibility of optimizing composed functions such as <code>Predicate.or</code> and such. This was also considered (<a href=\"https://bugs.openjdk.java.net/browse/JDK-8067971\">JDK-8067971</a>) but was deemed somewhat fragile and error-prone, and occurring infrequently enough that it wasn't worth the effort to implement.</p>\n", "title": "Built-in Java 8 predicate that always returns true?", "tags": ["java", "lambda", "java-8", "predicate"], "link": "http://stackoverflow.com/questions/26549659/built-in-java-8-predicate-that-always-returns-true/26553481#26553481", "question_id": 26549659, "answer_id": 26553481}], "creation_date": 1414159909, "score": 39, "link": "http://stackoverflow.com/questions/26549659/built-in-java-8-predicate-that-always-returns-true", "question_id": 26549659}, {"body": "<p>What I would like to achieve with lambda indentation is the following:</p>\n\n<p>Multi-line statement:</p>\n\n<pre><code>String[] ppl = new String[] { \"Karen (F)\", \"Kevin (M)\", \"Lee (M)\", \"Joan (F)\", \"Des (M)\", \"Rick (M)\" };\nList&lt;String&gt; strings = Arrays.stream(ppl)\n                         .filter(\n                             (x) -&gt; \n                             {\n                                 return x.contains(\"(M)\");\n                             }\n                         ).collect(Collectors.toList());\nstrings.stream().forEach(System.out::println);\n</code></pre>\n\n<p>Single-line statement:</p>\n\n<pre><code>List&lt;String&gt; strings = Arrays.stream(ppl)\n                         .map((x) -&gt; x.toUpperCase())\n                         .filter((x) -&gt; x.contains(\"(M)\"))\n                         .collect(Collectors.toList());\n</code></pre>\n\n<p><br><br>\nCurrently, Eclipse is auto-formatting to the following:</p>\n\n<p>Multi-line statement:</p>\n\n<pre><code>String[] ppl = new String[] { \"Karen (F)\", \"Kevin (M)\", \"Lee (M)\", \"Joan (F)\", \"Des (M)\", \"Rick (M)\" };\nList&lt;String&gt; strings = Arrays.stream(ppl).filter((x) -&gt;\n{\n    return x.contains(\"(M)\");\n}).collect(Collectors.toList());\nstrings.stream().forEach(System.out::println);\n</code></pre>\n\n<p>Single-line statement:</p>\n\n<pre><code>String[] ppl = new String[] { \"Karen (F)\", \"Kevin (M)\", \"Lee (M)\", \"Joan (F)\", \"Des(M)\", \"Rick (M)\" };\nList&lt;String&gt; strings = Arrays.stream(ppl).map((x) -&gt; x.toUpperCase())\n        .filter((x) -&gt; x.contains(\"(M)\")).collect(Collectors.toList());\nstrings.stream().forEach(System.out::println);\n</code></pre>\n\n<p>And I find this really messy, because of how the <code>collect</code> call is directly underneath the <code>return</code> and there's no space inbetween at all. I would prefer it if I could start the lambda in a new line indented, and so that the <code>.filter(</code> call would be right above the <code>.collect(</code> call. However, the only thing that can be customized with standard Java-8 Eclipse Formatter is the brace at the start of the lambda body, but nothing for the <code>()</code> brackets beforehand, nor the indentation. </p>\n\n<p>And in the case of single-line calls, it just uses the basic line-wrap and makes it be a chained mess. I don't think I need to explain why this is hard to decrypt afterwards.</p>\n\n<p>Is there any way to somehow customize the formatting more and achieve the first formatting type in Eclipse? (Or, optionally, in another IDE like IntelliJ IDEA.)</p>\n\n<p><br><br>\nEDIT: The closest I could get was with IntelliJ IDEA 13 Community Edition (read: free edition :P) which was the following (defined by continuous indentation which in this case is 8):</p>\n\n<pre><code>public static void main(String[] args)\n{\n    int[] x = new int[] {1, 2, 3, 4, 5, 6, 7};\n    int sum = Arrays.stream(x)\n            .map((n) -&gt; n * 5)\n            .filter((n) -&gt; {\n                System.out.println(\"Filtering: \" + n);\n                return n % 3 != 0;\n            })\n            .reduce(0, Integer::sum);\n\n    List&lt;Integer&gt; list = Arrays.stream(x)\n            .filter((n) -&gt; n % 2 == 0)\n            .map((n) -&gt; n * 4)\n            .boxed()\n            .collect(Collectors.toList());\n    list.forEach(System.out::println);\n    System.out.println(sum);    \n</code></pre>\n\n<p>It also allows to \"align\" the chained method invocation like this:</p>\n\n<pre><code>    int sum = Arrays.stream(x)\n                    .map((n) -&gt; n * 5)\n                    .filter((n) -&gt; {\n                        System.out.println(\"Filtering: \" + n);\n                        return n % 3 != 0;\n                    })\n                    .reduce(0, Integer::sum);\n\n\n    List&lt;Integer&gt; list = Arrays.stream(x)\n                               .filter((n) -&gt; n % 2 == 0)\n                               .map((n) -&gt; n * 4)\n                               .boxed()\n                               .collect(Collectors.toList());\n    list.forEach(System.out::println);\n    System.out.println(sum);\n}\n</code></pre>\n\n<p>I personally find that while it makes more sense, the second version pushes it far too away, so I prefer the first one.</p>\n\n<p>The setup responsible for the first setup is the following:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;code_scheme name=\"Zhuinden\"&gt;\n  &lt;option name=\"JD_ALIGN_PARAM_COMMENTS\" value=\"false\" /&gt;\n  &lt;option name=\"JD_ALIGN_EXCEPTION_COMMENTS\" value=\"false\" /&gt;\n  &lt;option name=\"JD_ADD_BLANK_AFTER_PARM_COMMENTS\" value=\"true\" /&gt;\n  &lt;option name=\"JD_ADD_BLANK_AFTER_RETURN\" value=\"true\" /&gt;\n  &lt;option name=\"JD_P_AT_EMPTY_LINES\" value=\"false\" /&gt;\n  &lt;option name=\"JD_PARAM_DESCRIPTION_ON_NEW_LINE\" value=\"true\" /&gt;\n  &lt;option name=\"WRAP_COMMENTS\" value=\"true\" /&gt;\n  &lt;codeStyleSettings language=\"JAVA\"&gt;\n    &lt;option name=\"KEEP_FIRST_COLUMN_COMMENT\" value=\"false\" /&gt;\n    &lt;option name=\"BRACE_STYLE\" value=\"2\" /&gt;\n    &lt;option name=\"CLASS_BRACE_STYLE\" value=\"2\" /&gt;\n    &lt;option name=\"METHOD_BRACE_STYLE\" value=\"2\" /&gt;\n    &lt;option name=\"ELSE_ON_NEW_LINE\" value=\"true\" /&gt;\n    &lt;option name=\"WHILE_ON_NEW_LINE\" value=\"true\" /&gt;\n    &lt;option name=\"CATCH_ON_NEW_LINE\" value=\"true\" /&gt;\n    &lt;option name=\"FINALLY_ON_NEW_LINE\" value=\"true\" /&gt;\n    &lt;option name=\"ALIGN_MULTILINE_PARAMETERS\" value=\"false\" /&gt;\n    &lt;option name=\"SPACE_WITHIN_BRACES\" value=\"true\" /&gt;\n    &lt;option name=\"SPACE_BEFORE_IF_PARENTHESES\" value=\"false\" /&gt;\n    &lt;option name=\"SPACE_BEFORE_WHILE_PARENTHESES\" value=\"false\" /&gt;\n    &lt;option name=\"SPACE_BEFORE_FOR_PARENTHESES\" value=\"false\" /&gt;\n    &lt;option name=\"SPACE_BEFORE_TRY_PARENTHESES\" value=\"false\" /&gt;\n    &lt;option name=\"SPACE_BEFORE_CATCH_PARENTHESES\" value=\"false\" /&gt;\n    &lt;option name=\"SPACE_BEFORE_SWITCH_PARENTHESES\" value=\"false\" /&gt;\n    &lt;option name=\"SPACE_BEFORE_SYNCHRONIZED_PARENTHESES\" value=\"false\" /&gt;\n    &lt;option name=\"SPACE_BEFORE_ARRAY_INITIALIZER_LBRACE\" value=\"true\" /&gt;\n    &lt;option name=\"METHOD_PARAMETERS_WRAP\" value=\"1\" /&gt;\n    &lt;option name=\"EXTENDS_LIST_WRAP\" value=\"1\" /&gt;\n    &lt;option name=\"THROWS_LIST_WRAP\" value=\"1\" /&gt;\n    &lt;option name=\"EXTENDS_KEYWORD_WRAP\" value=\"1\" /&gt;\n    &lt;option name=\"THROWS_KEYWORD_WRAP\" value=\"1\" /&gt;\n    &lt;option name=\"METHOD_CALL_CHAIN_WRAP\" value=\"2\" /&gt;\n    &lt;option name=\"BINARY_OPERATION_WRAP\" value=\"1\" /&gt;\n    &lt;option name=\"BINARY_OPERATION_SIGN_ON_NEXT_LINE\" value=\"true\" /&gt;\n    &lt;option name=\"ASSIGNMENT_WRAP\" value=\"1\" /&gt;\n    &lt;option name=\"IF_BRACE_FORCE\" value=\"3\" /&gt;\n    &lt;option name=\"DOWHILE_BRACE_FORCE\" value=\"3\" /&gt;\n    &lt;option name=\"WHILE_BRACE_FORCE\" value=\"3\" /&gt;\n    &lt;option name=\"FOR_BRACE_FORCE\" value=\"3\" /&gt;\n    &lt;option name=\"PARAMETER_ANNOTATION_WRAP\" value=\"1\" /&gt;\n    &lt;option name=\"VARIABLE_ANNOTATION_WRAP\" value=\"1\" /&gt;\n    &lt;option name=\"ENUM_CONSTANTS_WRAP\" value=\"2\" /&gt;\n  &lt;/codeStyleSettings&gt;\n&lt;/code_scheme&gt;\n</code></pre>\n\n<p>I tried to make sure everything is reasonable, but I might have messed something up, so it might need minor adjustments.</p>\n\n<p>If you're Hungarian like me and you're using a Hungarian layout, then this keymap might be of use to you, so that you don't end up not being able to use AltGR+F, AltGR+G, AltGR+B, AltGR+N and AltGR+M (which correspond to Ctrl+Alt).</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;keymap version=\"1\" name=\"Default copy\" parent=\"$default\"&gt;\n  &lt;action id=\"ExtractMethod\"&gt;\n    &lt;keyboard-shortcut first-keystroke=\"shift control M\" /&gt;\n  &lt;/action&gt;\n  &lt;action id=\"GotoImplementation\"&gt;\n    &lt;mouse-shortcut keystroke=\"control alt button1\" /&gt;\n  &lt;/action&gt;\n  &lt;action id=\"GotoLine\"&gt;\n    &lt;keyboard-shortcut first-keystroke=\"shift control G\" /&gt;\n  &lt;/action&gt;\n  &lt;action id=\"Inline\"&gt;\n    &lt;keyboard-shortcut first-keystroke=\"shift control O\" /&gt;\n  &lt;/action&gt;\n  &lt;action id=\"IntroduceField\"&gt;\n    &lt;keyboard-shortcut first-keystroke=\"shift control D\" /&gt;\n  &lt;/action&gt;\n  &lt;action id=\"Mvc.RunTarget\"&gt;\n    &lt;keyboard-shortcut first-keystroke=\"shift control P\" /&gt;\n  &lt;/action&gt;\n  &lt;action id=\"StructuralSearchPlugin.StructuralReplaceAction\" /&gt;\n  &lt;action id=\"Synchronize\"&gt;\n    &lt;keyboard-shortcut first-keystroke=\"shift control Y\" /&gt;\n  &lt;/action&gt;\n&lt;/keymap&gt;\n</code></pre>\n\n<p>While IntelliJ doesn't seem to provide a way to put the opening brace of the lambda in a new line, otherwise it's a fairly reasonable way of formatting, so I'll mark this as accepted.</p>\n", "tags": ["java", "eclipse", "lambda", "java-8", "java-stream"], "title": "Java 8: Formatting lambda with newlines and indentation", "answers": [{"body": "<p>Out of the box IntelliJ 13 will probably work for you.</p>\n\n<p>If I write it this way:</p>\n\n<pre><code>// Mulit-Line Statement\nString[] ppl = new String[] { \"Karen (F)\", \"Kevin (M)\", \"Lee (M)\", \"Joan (F)\", \"Des (M)\", \"Rick (M)\" };\nList&lt;String&gt; strings = Arrays.stream(ppl)\n        .filter(\n                (x) -&gt;\n                {\n                    return x.contains(\"(M)\");\n                }\n        ).collect(Collectors.toList());\nstrings.stream().forEach(System.out::println);\n</code></pre>\n\n<p>And then apply the auto formatter (no changes):</p>\n\n<pre><code>// Mulit-Line Statement\nString[] ppl = new String[]{\"Karen (F)\", \"Kevin (M)\", \"Lee (M)\", \"Joan (F)\", \"Des (M)\", \"Rick (M)\"};\nList&lt;String&gt; strings = Arrays.stream(ppl)\n        .filter(\n                (x) -&gt;\n                {\n                    return x.contains(\"(M)\");\n                }\n        ).collect(Collectors.toList());\nstrings.stream().forEach(System.out::println);\n</code></pre>\n\n<p>The same is true for your single line statement. It has been my experience that IntelliJ is more flexible in how its auto formatting is applied. IntelliJ is less likely to remove or add line returns, if you put it there then it assumes you meant to put it there. IntelliJ will happily adjust your tab-space for you.</p>\n\n<hr>\n\n<p>IntelliJ can also be configured to do some of this for you. Under \"settings\" -> \"code style\" -> \"java\", in the \"Wrapping and Braces\" tab you can set \"chain method calls\" to \"wrap always\".</p>\n\n<p>Before Auto-Formatting </p>\n\n<pre><code>// Mulit-Line Statement\nList&lt;String&gt; strings = Arrays.stream(ppl).filter((x) -&gt; { return x.contains(\"(M)\"); }).collect(Collectors.toList());\n\n// Single-Line Statement\nList&lt;String&gt; strings = Arrays.stream(ppl).map((x) -&gt; x.toUpperCase()).filter((x) -&gt; x.contains(\"(M)\")).collect(Collectors.toList());\n</code></pre>\n\n<p>After Auto-Formatting </p>\n\n<pre><code>// Mulit-Line Statement\nList&lt;String&gt; strings = Arrays.stream(ppl)\n        .filter((x) -&gt; {\n            return x.contains(\"(M)\");\n        })\n        .collect(Collectors.toList());\n\n// Single-Line Statement\nList&lt;String&gt; strings = Arrays.stream(ppl)\n        .map((x) -&gt; x.toUpperCase())\n        .filter((x) -&gt; x.contains(\"(M)\"))\n        .collect(Collectors.toList());\n</code></pre>\n", "title": "Java 8: Formatting lambda with newlines and indentation", "tags": ["java", "eclipse", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/24649971/java-8-formatting-lambda-with-newlines-and-indentation/24844337#24844337", "question_id": 24649971, "answer_id": 24844337}, {"body": "<p>Not ideal, but you could turn the formatter off for just those sections that are a little dense.  For example</p>\n\n<pre><code>  //@formatter:off\n  int sum = Arrays.stream(x)\n        .map((n) -&gt; n * 5)\n        .filter((n) -&gt; {\n            System.out.println(\"Filtering: \" + n);\n            return n % 3 != 0;\n        })\n        .reduce(0, Integer::sum);\n  //@formatter:on\n</code></pre>\n\n<p>Go to \"Window > Preferences > Java > Code Style > Formatter\". Click the \"Edit...\" button, go to the \"Off/On Tags\" tab and enable the tags.</p>\n", "title": "Java 8: Formatting lambda with newlines and indentation", "tags": ["java", "eclipse", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/24649971/java-8-formatting-lambda-with-newlines-and-indentation/27279423#27279423", "question_id": 24649971, "answer_id": 27279423}, {"body": "<p>Eclipse (Mars) has an option for lambda expressions formatter. </p>\n\n<p>Go to <code>Window &gt; Preferences &gt; Java &gt; Code Style &gt; Formatter</code></p>\n\n<p><a href=\"http://i.stack.imgur.com/lppfv.png\"><img src=\"http://i.stack.imgur.com/lppfv.png\" alt=\"enter image description here\"></a></p>\n\n<p>Click the <code>Edit</code> button, go to the <code>Braces</code> Tag and set the <code>Lambda Body</code> to <code>Next Line Indented</code></p>\n\n<p><a href=\"http://i.stack.imgur.com/84vFY.png\"><img src=\"http://i.stack.imgur.com/84vFY.png\" alt=\"enter image description here\"></a></p>\n\n<p>Another option is update these properties into your project settings. (<code>yourWorkspace &gt; yourProject &gt; .settings &gt; org.eclipse.jdt.core.prefs</code>)</p>\n\n<pre><code>org.eclipse.jdt.core.formatter.insert_space_before_lambda_arrow=insert\norg.eclipse.jdt.core.formatter.brace_position_for_lambda_body=next_line_shifted\n</code></pre>\n", "title": "Java 8: Formatting lambda with newlines and indentation", "tags": ["java", "eclipse", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/24649971/java-8-formatting-lambda-with-newlines-and-indentation/33239777#33239777", "question_id": 24649971, "answer_id": 33239777}, {"body": "<p>In Eclipse, for the single-line statements:</p>\n\n<p>In your project or global preferences, go to <code>Java -&gt; Code Style -&gt; Formatter -&gt; Edit -&gt; Line Wrapping -&gt; Function Calls -&gt; Qualified Invocations</code>, set <code>Wrap all elements, except first if not necessary</code> and tick <code>Force split, even if line shorter than maximum line width</code>.</p>\n", "title": "Java 8: Formatting lambda with newlines and indentation", "tags": ["java", "eclipse", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/24649971/java-8-formatting-lambda-with-newlines-and-indentation/34492247#34492247", "question_id": 24649971, "answer_id": 34492247}], "creation_date": 1404898102, "score": 39, "link": "http://stackoverflow.com/questions/24649971/java-8-formatting-lambda-with-newlines-and-indentation", "question_id": 24649971}, {"body": "<p>I am getting following exception while running the tests. I am using Mockito for mocking. The hints mentioned by Mockito library are not helping.</p>\n\n<pre><code>org.mockito.exceptions.misusing.UnfinishedStubbingException: \nUnfinished stubbing detected here:\n    -&gt; at com.a.b.DomainTestFactory.myTest(DomainTestFactory.java:355)\n\n    E.g. thenReturn() may be missing.\n    Examples of correct stubbing:\n        when(mock.isOk()).thenReturn(true);\n        when(mock.isOk()).thenThrow(exception);\n        doThrow(exception).when(mock).someVoidMethod();\n    Hints:\n     1. missing thenReturn()\n     2. you are trying to stub a final method, you naughty developer!\n\n        at a.b.DomainTestFactory.myTest(DomainTestFactory.java:276)\n        ..........\n</code></pre>\n\n<p>Test Code from DomainTestFactory. When I run the following test, I see the exception</p>\n\n<pre><code>@Test\npublic myTest(){\n    MyMainModel mainModel =  Mockito.mock(MyMainModel.class);\n    Mockito.when(mainModel.getList()).thenReturn(getSomeList()); --&gt; Line 355\n}\n\nprivate List&lt;SomeModel&gt; getSomeList() {\n    SomeModel model = Mockito.mock(SomeModel.class);\n    Mockito.when(model.getName()).thenReturn(\"SomeName\"); --&gt; Line 276\n    Mockito.when(model.getAddress()).thenReturn(\"Address\");\n    return Arrays.asList(model);\n}\n\npublic class SomeModel extends SomeInputModel{\n    protected String address;\n    protected List&lt;SomeClass&gt; properties;\n\n    public SomeModel() {\n        this.Properties = new java.util.ArrayList&lt;SomeClass&gt;(); \n    }\n\n    public String getAddress() {\n        return this.address;\n    }\n\n}\n\npublic class SomeInputModel{\n\n    public NetworkInputModel() {\n        this.Properties = new java.util.ArrayList&lt;SomeClass&gt;(); \n    }\n\n    protected String Name;\n    protected List&lt;SomeClass&gt; properties;\n\n    public String getName() {\n        return this.Name;\n    }\n\n    public void setName(String value) {\n        this.Name = value;\n    }\n}\n</code></pre>\n", "tags": ["java", "mocking", "mockito"], "title": "Unfinished Stubbing Detected in Mockito", "answers": [{"body": "<p>You're nesting mocking inside of mocking.  You're calling <code>getSomeList()</code>, which does some mocking, before you've finished the mocking for <code>MyMainModel</code>.  Mockito doesn't like it when you do this.</p>\n\n<p>Replace</p>\n\n<pre><code>@Test\npublic myTest(){\n    MyMainModel mainModel =  Mockito.mock(MyMainModel.class);\n    Mockito.when(mainModel.getList()).thenReturn(getSomeList()); --&gt; Line 355\n}\n</code></pre>\n\n<p>with</p>\n\n<pre><code>@Test\npublic myTest(){\n    MyMainModel mainModel =  Mockito.mock(MyMainModel.class);\n    List&lt;SomeModel&gt; someModelList = getSomeList();\n    Mockito.when(mainModel.getList()).thenReturn(someModelList);\n}\n</code></pre>\n\n<p>To understand why this causes a problem, you need to know a little about how Mockito works, and also be aware in what order expressions and statements are evaluated in Java.</p>\n\n<p>Mockito can't read your source code, so in order to figure out what you are asking it to do, it relies a lot on static state.  When you call a method on a mock object, Mockito records the details of the call in an internal list of invocations.  The <code>when</code> method reads the last of these invocations off the list and records this invocation in the <code>OngoingStubbing</code> object it returns.</p>\n\n<p>The line</p>\n\n<pre><code>Mockito.when(mainModel.getList()).thenReturn(someModelList);\n</code></pre>\n\n<p>causes the following interactions with Mockito:</p>\n\n<ul>\n<li>Mock method <code>mainModel.getList()</code> is called,</li>\n<li>Static method <code>when</code> is called,</li>\n<li>Method <code>thenReturn</code> is called on the <code>OngoingStubbing</code> object returned by the <code>when</code> method.</li>\n</ul>\n\n<p>The <code>thenReturn</code> method can then instruct the mock it received via the <code>OngoingStubbing</code> method to handle any suitable call to the <code>getList</code> method to return <code>someModelList</code>.</p>\n\n<p>In fact, as Mockito can't see your code, you can also write your mocking as follows:</p>\n\n<pre><code>mainModel.getList();\nMockito.when((List&lt;SomeModel&gt;)null).thenReturn(someModelList);\n</code></pre>\n\n<p>This style is somewhat less clear to read, especially since in this case the <code>null</code> has to be casted, but it generates the same sequence of interactions with Mockito and will achieve the same result as the line above.</p>\n\n<p>However, the line </p>\n\n<pre><code>Mockito.when(mainModel.getList()).thenReturn(getSomeList());\n</code></pre>\n\n<p>causes the following interactions with Mockito:</p>\n\n<ol>\n<li>Mock method <code>mainModel.getList()</code> is called,</li>\n<li>Static method <code>when</code> is called,</li>\n<li>A new <code>mock</code> of <code>SomeModel</code> is created (inside <code>getSomeList()</code>),</li>\n<li>Mock method <code>model.getName()</code> is called,</li>\n</ol>\n\n<p>At this point Mockito gets confused.  It thought you were mocking <code>mainModel.getList()</code>, but now you're telling it you want to mock the <code>model.getName()</code> method.  To Mockito, it looks like you're doing the following:</p>\n\n<pre><code>when(mainModel.getList());\n// ...\nwhen(model.getName()).thenReturn(...);\n</code></pre>\n\n<p>This looks silly to <code>Mockito</code> as it can't be sure what you're doing with <code>mainModel.getList()</code>.</p>\n\n<p>Note that we did not get to the <code>thenReturn</code> method call, as the JVM needs to evaluate the parameters to this method before it can call the method.  In this case, this means calling the <code>getSomeList()</code> method.</p>\n\n<p>Generally it is a bad design decision to rely on static state, as Mockito does, because it can lead to cases where the Principle of Least Astonishment is violated.  However, Mockito's design does make for clear and expressive mocking, even if it leads to astonishment sometimes.</p>\n\n<p>Finally, recent versions of Mockito add an extra line to the error message above.  This extra line indicates you may be in the same situation as this question:</p>\n\n<blockquote>\n  <p>3: you are stubbing the behaviour of another mock inside before 'thenReturn' instruction if completed</p>\n</blockquote>\n", "title": "Unfinished Stubbing Detected in Mockito", "tags": ["java", "mocking", "mockito"], "link": "http://stackoverflow.com/questions/26318569/unfinished-stubbing-detected-in-mockito/26319364#26319364", "question_id": 26318569, "answer_id": 26319364}], "creation_date": 1413056539, "score": 38, "link": "http://stackoverflow.com/questions/26318569/unfinished-stubbing-detected-in-mockito", "question_id": 26318569}, {"body": "<p>Is there any way to trigger the <code>SwipeRefreshLayout</code> programmatically? The animation should start and the <code>onRefresh</code> method from the <code>OnRefreshListener</code> interface should get called.</p>\n", "tags": ["java", "android", "swiperefreshlayout"], "title": "SwipeRefreshLayout trigger programmatically", "answers": [{"body": "<p>if you are using the new swipeRefreshLayout intoduced in 5.0 <img src=\"http://i.stack.imgur.com/ox1OM.png\" alt=\"enter image description here\"></p>\n\n<p>As the image shown above you just need to add the following line to trigger the swipe refresh layout programmatically </p>\n\n<pre><code> mSwipeRefreshLayout.post(new Runnable() {\n        @Override\n        public void run() {\n            mSwipeRefreshLayout.setRefreshing(true);\n        }\n    });\n</code></pre>\n\n<p>if you simply call </p>\n\n<pre><code> mSwipeRefreshLayout.setRefreshing(true);\n</code></pre>\n\n<p>it won't trigger the circle to animate, so by adding the above line u just make a delay in the UI thread so that it shows the circle animation inside the ui thread. </p>\n\n<p>By calling <code>mSwipeRefreshLayout.setRefreshing(true)</code> the <code>OnRefreshListener</code> will <strong>NOT get executed</strong></p>\n\n<p>In order to stop the circular loading animation call <code>mSwipeRefreshLayout.setRefreshing(false)</code></p>\n", "title": "SwipeRefreshLayout trigger programmatically", "tags": ["java", "android", "swiperefreshlayout"], "link": "http://stackoverflow.com/questions/24587925/swiperefreshlayout-trigger-programmatically/28002305#28002305", "question_id": 24587925, "answer_id": 28002305}, {"body": "<p>In order to <strong>trigger SwipeRefreshLayout</strong> I tried this solution:</p>\n\n<pre><code>SwipeRefreshLayout.OnRefreshListener swipeRefreshListner = new SwipeRefreshLayout.OnRefreshListener() {\n        @Override\n        public void onRefresh() {\n            Log.i(TAG, \"onRefresh called from SwipeRefreshLayout\");\n            // This method performs the actual data-refresh operation.\n            // The method calls setRefreshing(false) when it's finished.\n            loadData();\n        }\n    };\n</code></pre>\n\n<p><strong>Now</strong> key part:</p>\n\n<pre><code>swipeLayout.post(new Runnable() {\n@Override public void run() {\n     swipeLayout.setRefreshing(true);\n     // directly call onRefresh() method \n     swipeRefreshListner.onRefresh();\n   }\n});\n</code></pre>\n", "title": "SwipeRefreshLayout trigger programmatically", "tags": ["java", "android", "swiperefreshlayout"], "link": "http://stackoverflow.com/questions/24587925/swiperefreshlayout-trigger-programmatically/35621309#35621309", "question_id": 24587925, "answer_id": 35621309}, {"body": "<p>Just to force in add this two to ennable swipe gesture   </p>\n\n<pre><code> swipeRefreshLayout.setOnRefreshListener(\n                    new SwipeRefreshLayout.OnRefreshListener() {\n                        @Override\n                        public void onRefresh() {\n                            Log.i(TAG, \"onRefresh called from SwipeRefreshLayout\");\n\n                            // This method performs the actual data-refresh operation.\n                            // The method calls setRefreshing(false) when it's finished.\n                            FetchData();\n                        }\n                    }\n            );\n</code></pre>\n", "title": "SwipeRefreshLayout trigger programmatically", "tags": ["java", "android", "swiperefreshlayout"], "link": "http://stackoverflow.com/questions/24587925/swiperefreshlayout-trigger-programmatically/39366050#39366050", "question_id": 24587925, "answer_id": 39366050}], "creation_date": 1404574344, "score": 38, "link": "http://stackoverflow.com/questions/24587925/swiperefreshlayout-trigger-programmatically", "question_id": 24587925}, {"body": "<p>In the oracle \"Primitive data types\" page, it mentions that java 8 adds support for unsinged ints and longs: </p>\n\n<blockquote>\n  <p>int: By default, the int data type is a 32-bit signed two's complement integer, which has a minimum value of -2^31 and a maximum value of 2^31-1. <strong>In Java SE 8 and later, you can use the int data type to represent an unsigned 32-bit integer, which has a minimum value of 0 and a maximum value of 2^32-1.</strong> Use the Integer class to use int data type as an unsigned integer. See the section The Number Classes for more information. Static methods like compareUnsigned, divideUnsigned etc have been added to the Integer class to support the arithmetic operations for unsigned integers.</p>\n  \n  <p>long: The long data type is a 64-bit two's complement integer. The signed long has a minimum value of -2^63 and a maximum value of 2^63-1. <strong>In Java SE 8 and later, you can use the long data type to represent an unsigned 64-bit long, which has a minimum value of 0 and a maximum value of 2^64-1.</strong> Use this data type when you need a range of values wider than those provided by int. The Long class also contains methods like compareUnsigned, divideUnsigned etc to support arithmetic operations for unsigned long.</p>\n</blockquote>\n\n<p>However, I find no way to declare an unsigned long or integer. The following code, for example, gives an \"the literal is out of range\" error (I'm using java 8, of course), when it should be in range (the value assigned is precisely 2^64-1):</p>\n\n<pre><code>public class Foo {\n    static long values = 18446744073709551615L;\n\n    public static void main(String[] args){\n        System.out.println(values);\n    }  \n}\n</code></pre>\n\n<p>So, is there any way to declare an unsigned int or long?</p>\n", "tags": ["java", "java-8", "unsigned"], "title": "How to use the unsigned integer in java 8?", "answers": [{"body": "<p>Per the documentation you posted, and <a href=\"https://blogs.oracle.com/darcy/entry/unsigned_api\">this blog post</a> - there's no difference when declaring the primitive between an unsigned int/long and a signed one.  The \"new support\" is the addition of the static methods in the Integer and Long classes, e.g. <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#divideUnsigned-int-int-\">Integer.divideUnsigned</a>.  If you're not using those methods, your \"unsigned\" long above 2^63-1 is just a plain old long with a negative value.</p>\n\n<p>From a quick skim, it doesn't look like there's a way to declare integer constants in the range outside of +/- 2^31-1, or +/- 2^63-1 for longs.  You would have to manually compute the negative value corresponding to your out-of-range positive value.</p>\n", "title": "How to use the unsigned integer in java 8?", "tags": ["java", "java-8", "unsigned"], "link": "http://stackoverflow.com/questions/25556017/how-to-use-the-unsigned-integer-in-java-8/25556214#25556214", "question_id": 25556017, "answer_id": 25556214}, {"body": "<p>Well, even in Java 8, <code>long</code> and <code>int</code> are still signed, only some methods <em>treat them as if they were unsigned</em>. If you want to write unsigned <code>long</code> literal like that, you can do</p>\n\n<pre><code>static long values = Long.parseUnsignedLong(\"18446744073709551615\");\n\npublic static void main(String[] args) {\n    System.out.println(values); // -1\n    System.out.println(Long.toUnsignedString(values)); // 18446744073709551615\n}\n</code></pre>\n", "title": "How to use the unsigned integer in java 8?", "tags": ["java", "java-8", "unsigned"], "link": "http://stackoverflow.com/questions/25556017/how-to-use-the-unsigned-integer-in-java-8/25556323#25556323", "question_id": 25556017, "answer_id": 25556323}, {"body": "<p>There is no way how <strong><em>to declare</em></strong> an unsigned <code>long</code> or <code>int</code> in Java 8.</p>\n", "title": "How to use the unsigned integer in java 8?", "tags": ["java", "java-8", "unsigned"], "link": "http://stackoverflow.com/questions/25556017/how-to-use-the-unsigned-integer-in-java-8/25556330#25556330", "question_id": 25556017, "answer_id": 25556330}, {"body": "<pre><code>    // Java 8\n    int vInt = Integer.parseUnsignedInt(\"4294967295\");\n    System.out.println(vInt); // -1\n    String sInt = Integer.toUnsignedString(vInt);\n    System.out.println(sInt); // 4294967295\n\n    long vLong = Long.parseUnsignedLong(\"18446744073709551615\");\n    System.out.println(vLong); // -1\n    String sLong = Long.toUnsignedString(vLong);\n    System.out.println(sLong); // 18446744073709551615\n\n    // Guava 18.0\n    int vIntGu = UnsignedInts.parseUnsignedInt(UnsignedInteger.MAX_VALUE.toString());\n    System.out.println(vIntGu); // -1\n    String sIntGu = UnsignedInts.toString(vIntGu);\n    System.out.println(sIntGu); // 4294967295\n\n    long vLongGu = UnsignedLongs.parseUnsignedLong(\"18446744073709551615\");\n    System.out.println(vLongGu); // -1\n    String sLongGu = UnsignedLongs.toString(vLongGu);\n    System.out.println(sLongGu); // 18446744073709551615\n\n    /**\n     Integer - Max range\n     Signed: From \u22122,147,483,648 to 2,147,483,647, from \u2212(2^31) to 2^31 \u2013 1\n     Unsigned: From 0 to 4,294,967,295 which equals 2^32 \u2212 1\n\n     Long - Max range\n     Signed: From \u22129,223,372,036,854,775,808 to 9,223,372,036,854,775,807, from \u2212(2^63) to 2^63 \u2212 1\n     Unsigned: From 0 to 18,446,744,073,709,551,615 which equals 2^64 \u2013 1\n     */\n</code></pre>\n", "title": "How to use the unsigned integer in java 8?", "tags": ["java", "java-8", "unsigned"], "link": "http://stackoverflow.com/questions/25556017/how-to-use-the-unsigned-integer-in-java-8/32837775#32837775", "question_id": 25556017, "answer_id": 32837775}], "creation_date": 1409252013, "score": 38, "link": "http://stackoverflow.com/questions/25556017/how-to-use-the-unsigned-integer-in-java-8", "question_id": 25556017}, {"body": "<p>Can someone please provide me very simple example of websocket client using <code>javax.websocket</code>?</p>\n\n<p>I want to connect to websocket (ws://socket.example.com:1234), send message (add channel) and listen to messages. All messages (sent &amp; listened) are in JSON format.</p>\n\n<p>And btw is this library the best for simple websocket communication?</p>\n\n<p><em>(sorry for dumb question, I'm learning Java, thanks)</em></p>\n", "tags": ["java", "websocket"], "title": "javax.websocket client simple example", "answers": [{"body": "<p><a href=\"https://blog.idrsolutions.com/2013/12/websockets-an-introduction/\" rel=\"nofollow\">https://blog.idrsolutions.com/2013/12/websockets-an-introduction/</a> this is a simple example thats has a client which will send a message to the server and the server will send it back</p>\n\n<p>A few more:\n<a href=\"https://www.youtube.com/watch?v=BikL52HYaZg\" rel=\"nofollow\">https://www.youtube.com/watch?v=BikL52HYaZg</a>\n<a href=\"http://www.hascode.com/2013/08/creating-a-chat-application-using-java-ee-7-websockets-and-glassfish-4/\" rel=\"nofollow\">http://www.hascode.com/2013/08/creating-a-chat-application-using-java-ee-7-websockets-and-glassfish-4/</a></p>\n\n<p>With 'Java' client as OP asked\n<a href=\"http://stackoverflow.com/questions/1982530/websocket-and-java-swing-front-end\">Websocket and Java Swing front end</a></p>\n", "title": "javax.websocket client simple example", "tags": ["java", "websocket"], "link": "http://stackoverflow.com/questions/26452903/javax-websocket-client-simple-example/26452966#26452966", "question_id": 26452903, "answer_id": 26452966}, {"body": "<p>I've found a great example using <code>javax.websocket</code> here:</p>\n\n<p><a href=\"http://www.programmingforliving.com/2013/08/jsr-356-java-api-for-websocket-client-api.html\">http://www.programmingforliving.com/2013/08/jsr-356-java-api-for-websocket-client-api.html</a></p>\n\n<p>Here the code based on the example linked above:</p>\n\n<p><strong><code>TestApp.java</code></strong>:</p>\n\n<pre><code>package testapp;\n\nimport java.net.URI;\nimport java.net.URISyntaxException;\n\npublic class TestApp {\n\n    public static void main(String[] args) {\n        try {\n            // open websocket\n            final WebsocketClientEndpoint clientEndPoint = new WebsocketClientEndpoint(new URI(\"wss://real.okcoin.cn:10440/websocket/okcoinapi\"));\n\n            // add listener\n            clientEndPoint.addMessageHandler(new WebsocketClientEndpoint.MessageHandler() {\n                public void handleMessage(String message) {\n                    System.out.println(message);\n                }\n            });\n\n            // send message to websocket\n            clientEndPoint.sendMessage(\"{'event':'addChannel','channel':'ok_btccny_ticker'}\");\n\n            // wait 5 seconds for messages from websocket\n            Thread.sleep(5000);\n\n        } catch (InterruptedException ex) {\n            System.err.println(\"InterruptedException exception: \" + ex.getMessage());\n        } catch (URISyntaxException ex) {\n            System.err.println(\"URISyntaxException exception: \" + ex.getMessage());\n        }\n    }\n}\n</code></pre>\n\n<p><strong><code>WebsocketClientEndpoint.java</code></strong>:</p>\n\n<pre><code>package testapp;\n\nimport java.net.URI;\nimport javax.websocket.ClientEndpoint;\nimport javax.websocket.CloseReason;\nimport javax.websocket.ContainerProvider;\nimport javax.websocket.OnClose;\nimport javax.websocket.OnMessage;\nimport javax.websocket.OnOpen;\nimport javax.websocket.Session;\nimport javax.websocket.WebSocketContainer;\n\n/**\n * ChatServer Client\n *\n * @author Jiji_Sasidharan\n */\n@ClientEndpoint\npublic class WebsocketClientEndpoint {\n\n    Session userSession = null;\n    private MessageHandler messageHandler;\n\n    public WebsocketClientEndpoint(URI endpointURI) {\n        try {\n            WebSocketContainer container = ContainerProvider.getWebSocketContainer();\n            container.connectToServer(this, endpointURI);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    /**\n     * Callback hook for Connection open events.\n     *\n     * @param userSession the userSession which is opened.\n     */\n    @OnOpen\n    public void onOpen(Session userSession) {\n        System.out.println(\"opening websocket\");\n        this.userSession = userSession;\n    }\n\n    /**\n     * Callback hook for Connection close events.\n     *\n     * @param userSession the userSession which is getting closed.\n     * @param reason the reason for connection close\n     */\n    @OnClose\n    public void onClose(Session userSession, CloseReason reason) {\n        System.out.println(\"closing websocket\");\n        this.userSession = null;\n    }\n\n    /**\n     * Callback hook for Message Events. This method will be invoked when a client send a message.\n     *\n     * @param message The text message\n     */\n    @OnMessage\n    public void onMessage(String message) {\n        if (this.messageHandler != null) {\n            this.messageHandler.handleMessage(message);\n        }\n    }\n\n    /**\n     * register message handler\n     *\n     * @param msgHandler\n     */\n    public void addMessageHandler(MessageHandler msgHandler) {\n        this.messageHandler = msgHandler;\n    }\n\n    /**\n     * Send a message.\n     *\n     * @param message\n     */\n    public void sendMessage(String message) {\n        this.userSession.getAsyncRemote().sendText(message);\n    }\n\n    /**\n     * Message handler.\n     *\n     * @author Jiji_Sasidharan\n     */\n    public static interface MessageHandler {\n\n        public void handleMessage(String message);\n    }\n}\n</code></pre>\n", "title": "javax.websocket client simple example", "tags": ["java", "websocket"], "link": "http://stackoverflow.com/questions/26452903/javax-websocket-client-simple-example/26454417#26454417", "question_id": 26452903, "answer_id": 26454417}, {"body": "<p>TooTallNate has a simple client side <a href=\"https://github.com/TooTallNate/Java-WebSocket\">https://github.com/TooTallNate/Java-WebSocket</a></p>\n\n<p>Just add the java_websocket.jar in the dist folder into your project.</p>\n\n<pre><code> import org.java_websocket.client.WebSocketClient;\n import org.java_websocket.drafts.Draft_10;\n import org.java_websocket.handshake.ServerHandshake;\n import org.json.JSONException;\n import org.json.JSONObject;\n\n  WebSocketClient mWs = new WebSocketClient( new URI( \"ws://socket.example.com:1234\" ), new Draft_10() )\n{\n                    @Override\n                    public void onMessage( String message ) {\n                     JSONObject obj = new JSONObject(message);\n                     String channel = obj.getString(\"channel\");\n                    }\n\n                    @Override\n                    public void onOpen( ServerHandshake handshake ) {\n                        System.out.println( \"opened connection\" );\n                    }\n\n                    @Override\n                    public void onClose( int code, String reason, boolean remote ) {\n                        System.out.println( \"closed connection\" );\n                    }\n\n                    @Override\n                    public void onError( Exception ex ) {\n                        ex.printStackTrace();\n                    }\n\n                };\n //open websocket\n mWs.connect();\n JSONObject obj = new JSONObject();\n obj.put(\"event\", \"addChannel\");\n obj.put(\"channel\", \"ok_btccny_ticker\");\n String message = obj.toString();\n //send message\n mWs.send(message);\n</code></pre>\n\n<p>// and to close websocket</p>\n\n<pre><code> mWs.close\n</code></pre>\n", "title": "javax.websocket client simple example", "tags": ["java", "websocket"], "link": "http://stackoverflow.com/questions/26452903/javax-websocket-client-simple-example/26467775#26467775", "question_id": 26452903, "answer_id": 26467775}, {"body": "<p>Here is one simple example.. you can download and test it\n<a href=\"http://www.pretechsol.com/2014/12/java-ee-websocket-simple-example.html\" rel=\"nofollow\">http://www.pretechsol.com/2014/12/java-ee-websocket-simple-example.html</a></p>\n", "title": "javax.websocket client simple example", "tags": ["java", "websocket"], "link": "http://stackoverflow.com/questions/26452903/javax-websocket-client-simple-example/27531025#27531025", "question_id": 26452903, "answer_id": 27531025}, {"body": "<p>Have a look at this Java EE 7 examples from Arun Gupta.</p>\n\n<p>I forked it <a href=\"https://github.com/koekiebox/javaee7-samples/tree/master/websocket/javase-client/src/main/java/org/javaee7/websocket/javase/client\" rel=\"nofollow\">on github</a>.</p>\n\n<p><strong>Main</strong></p>\n\n<pre><code>/**\n * @author Arun Gupta\n */\npublic class Client {\n\n    final static CountDownLatch messageLatch = new CountDownLatch(1);\n\n    public static void main(String[] args) {\n        try {\n            WebSocketContainer container = ContainerProvider.getWebSocketContainer();\n            String uri = \"ws://echo.websocket.org:80/\";\n            System.out.println(\"Connecting to \" + uri);\n            container.connectToServer(MyClientEndpoint.class, URI.create(uri));\n            messageLatch.await(100, TimeUnit.SECONDS);\n        } catch (DeploymentException | InterruptedException | IOException ex) {\n            Logger.getLogger(Client.class.getName()).log(Level.SEVERE, null, ex);\n        }\n    }\n}\n</code></pre>\n\n<p><strong>ClientEndpoint</strong></p>\n\n<pre><code>/**\n * @author Arun Gupta\n */\n@ClientEndpoint\npublic class MyClientEndpoint {\n    @OnOpen\n    public void onOpen(Session session) {\n        System.out.println(\"Connected to endpoint: \" + session.getBasicRemote());\n        try {\n            String name = \"Duke\";\n            System.out.println(\"Sending message to endpoint: \" + name);\n            session.getBasicRemote().sendText(name);\n        } catch (IOException ex) {\n            Logger.getLogger(MyClientEndpoint.class.getName()).log(Level.SEVERE, null, ex);\n        }\n    }\n\n    @OnMessage\n    public void processMessage(String message) {\n        System.out.println(\"Received message in client: \" + message);\n        Client.messageLatch.countDown();\n    }\n\n    @OnError\n    public void processError(Throwable t) {\n        t.printStackTrace();\n    }\n}\n</code></pre>\n", "title": "javax.websocket client simple example", "tags": ["java", "websocket"], "link": "http://stackoverflow.com/questions/26452903/javax-websocket-client-simple-example/35934800#35934800", "question_id": 26452903, "answer_id": 35934800}], "creation_date": 1413737353, "score": 38, "link": "http://stackoverflow.com/questions/26452903/javax-websocket-client-simple-example", "question_id": 26452903}, {"body": "<p>In Java 8, the Collection interface was extended with two methods that return <code>Stream&lt;E&gt;</code>: <code>stream()</code>, which returns a sequential stream, and <code>parallelStream()</code>, which returns a possibly-parallel stream.  Stream itself also has a <code>parallel()</code> method that returns an equivalent parallel stream (either mutating the current stream to be parallel or creating a new stream).</p>\n\n<p>The duplication has obvious disadvantages:</p>\n\n<ul>\n<li><p>It's confusing.  A question asks <a href=\"https://stackoverflow.com/questions/22576855/obtaining-a-parallel-stream-from-a-collection\">whether calling both parallelStream().parallel() is necessary to be sure the stream is parallel</a>, given that parallelStream() may return a sequential stream.  Why does parallelStream() exist if it can't make a guarantee?  The other way around is also confusing -- if parallelStream() returns a sequential stream, there's probably a reason (e.g., an inherently sequential data structure for which parallel streams are a performance trap); what should Stream.parallel() do for such a stream?  (UnsupportedOperationException is not allowed by parallel()'s specification.)</p></li>\n<li><p>Adding methods to an interface risks conflicts if an existing implementation has a similarly-named method with an incompatible return type.  Adding parallelStream() in addition to stream() doubles the risk for little gain.  (Note that parallelStream() was at one point just named parallel(), though I don't know if it was renamed to avoid name clashes or for another reason.)</p></li>\n</ul>\n\n<p>Why does Collection.parallelStream() exist when calling Collection.stream().parallel() does the same thing?</p>\n", "tags": ["java", "java-8", "java-stream"], "title": "Why does Collection.parallelStream() exist when .stream().parallel() does the same thing?", "answers": [{"body": "<p>The Javadocs for <code>Collection.(parallelS|s)tream()</code> and <code>Stream</code> itself don't answer the question, so it's off to the mailing lists for the rationale.  I went through the lambda-libs-spec-observers archives and found <a href=\"http://mail.openjdk.java.net/pipermail/lambda-libs-spec-observers/2013-February/thread.html#1341\">one thread specifically about Collection.parallelStream()</a> and another thread that touched on whether <a href=\"http://mail.openjdk.java.net/pipermail/lambda-libs-spec-observers/2013-April/thread.html#1799\">java.util.Arrays should provide parallelStream()</a> to match (or actually, whether it should be removed).  There was no once-and-for-all conclusion, so perhaps I've missed something from another list or the matter was settled in private discussion.  (Perhaps <a href=\"https://stackoverflow.com/users/3553087/brian-goetz\">Brian Goetz</a>, one of the principals of this discussion, can fill in anything missing.)</p>\n\n<p>The participants made their points well, so this answer is mostly just an organization of the relevant quotes, with a few clarifications in <em>[brackets]</em>, presented in order of importance (as I interpret it).</p>\n\n<h2>parallelStream() covers a very common case</h2>\n\n<p><a href=\"http://mail.openjdk.java.net/pipermail/lambda-libs-spec-observers/2013-February/001362.html\">Brian Goetz</a> in the first thread, explaining why <code>Collections.parallelStream()</code> is valuable enough to keep even after other parallel stream factory methods have been removed:</p>\n\n<blockquote>\n  <p>We do <em>not</em> have explicit parallel versions of each of these <em>[stream factories]</em>; we did \n  originally, and to prune down the API surface area, we cut them on the \n  theory that dropping 20+ methods from the API was worth the tradeoff of \n  the surface yuckiness and performance cost of <code>.intRange(...).parallel()</code>. \n    But we did not make that choice with Collection.</p>\n  \n  <p>We could either remove the <code>Collection.parallelStream()</code>, or we could add \n  the parallel versions of all the generators, or we could do nothing and \n  leave it as is.  I think all are justifiable on API design grounds.</p>\n  \n  <p>I kind of like the status quo, despite its inconsistency.  Instead of \n  having 2N stream construction methods, we have N+1 -- but that extra 1 \n  covers a huge number of cases, because it is inherited by every \n  Collection.  So I can justify to myself why having that extra 1 method \n  is worth it, and why accepting the inconsistency of going no further is \n  acceptable.</p>\n  \n  <p>Do others disagree?  Is N+1 <em>[Collections.parallelStream() only]</em> the practical choice here?  Or should we go \n  for the purity of N <em>[rely on Stream.parallel()]</em>?  Or the convenience and consistency of 2N <em>[parallel versions of all factories]</em>?  Or is \n  there some even better N+3 <em>[Collections.parallelStream() plus other special cases]</em>, for some other specially chosen cases we \n  want to give special support to?</p>\n</blockquote>\n\n<p><a href=\"http://mail.openjdk.java.net/pipermail/lambda-libs-spec-observers/2013-April/001799.html\">Brian Goetz</a> stands by this position in the later discussion about <code>Arrays.parallelStream()</code>:</p>\n\n<blockquote>\n  <p>I still really like Collection.parallelStream; it has huge \n  discoverability advantages, and offers a pretty big return on API \n  surface area -- one more method, but provides value in a lot of places, \n  since Collection will be a really common case of a stream source.</p>\n</blockquote>\n\n<h2>parallelStream() is more performant</h2>\n\n<p><a href=\"http://mail.openjdk.java.net/pipermail/lambda-libs-spec-observers/2013-April/001799.html\">Brian Goetz</a>:</p>\n\n<blockquote>\n  <p>Direct version <em>[parallelStream()]</em> is more performant, in that it requires less wrapping (to \n  turn a stream into a parallel stream, you have to first create the \n  sequential stream, then transfer ownership of its state into a new \n  Stream.)</p>\n</blockquote>\n\n<p>In response to Kevin Bourrillion's skepticism about whether the effect is significant, <a href=\"http://mail.openjdk.java.net/pipermail/lambda-libs-spec-observers/2013-February/001346.html\">Brian again</a>:</p>\n\n<blockquote>\n  <p>Depends how seriously you are counting.  Doug counts individual object \n  creations and virtual invocations on the way to a parallel operation, \n  because until you start forking, you're on the wrong side of Amdahl's \n  law -- this is all \"serial fraction\" that happens before you can fork \n  any work, which pushes your breakeven threshold further out.  So getting \n  the setup path for parallel ops fast is valuable.</p>\n</blockquote>\n\n<p><a href=\"http://mail.openjdk.java.net/pipermail/lambda-libs-spec-observers/2013-February/001354.html\">Doug Lea follows up</a>, but hedges his position:</p>\n\n<blockquote>\n  <p>People dealing with parallel library support need some attitude\n  adjustment about such things. On a soon-to-be-typical machine,\n  every cycle you waste setting up parallelism costs you say 64 cycles.\n  You would probably have had a different reaction if it required 64\n  object creations to start a parallel computation.</p>\n  \n  <p>That said, I'm always completely supportive of forcing implementors\n  to work harder for the sake of better APIs, so long as the\n  APIs do not rule out efficient implementation. So if killing\n  <code>parallelStream</code> is really important, we'll find some way to\n  turn <code>stream().parallel()</code> into a bit-flip or somesuch.</p>\n</blockquote>\n\n<p>Indeed, the later discussion about <code>Arrays.parallelStream()</code> <a href=\"http://mail.openjdk.java.net/pipermail/lambda-libs-spec-observers/2013-April/001799.html\">takes notice of lower Stream.parallel() cost</a>.</p>\n\n<h2>stream().parallel() statefulness complicates the future</h2>\n\n<p>At the time of the discussion, switching a stream from sequential to parallel and back could be interleaved with other stream operations.  <a href=\"http://mail.openjdk.java.net/pipermail/lambda-libs-spec-observers/2013-February/001363.html\">Brian Goetz, on behalf of Doug Lea</a>, explains why sequential/parallel mode switching may complicate future development of the Java platform:</p>\n\n<blockquote>\n  <p>I'll take my best stab at explaining why: because it (like the stateful \n  methods (sort, distinct, limit)) which you also don't like, move us \n  incrementally farther from being able to express stream pipelines in \n  terms of traditional data-parallel constructs, which further constrains \n  our ability to to map them directly to tomorrow's computing substrate, \n  whether that be vector processors, FPGAs, GPUs, or whatever we cook up.</p>\n  \n  <p>Filter-map-reduce map[s] very cleanly to all sorts of parallel computing \n  substrates; filter-parallel-map-sequential-sorted-limit-parallel-map-uniq-reduce \n  does not.</p>\n  \n  <p>So the whole API design here embodies many tensions between making it \n  easy to express things the user is likely to want to express, and doing \n  is in a manner that we can predictably make fast with transparent cost \n  models.</p>\n</blockquote>\n\n<p>This mode switching was <a href=\"http://mail.openjdk.java.net/pipermail/lambda-libs-spec-experts/2013-March/001504.html\">removed after further discussion</a>.  In the current version of the library, a stream pipeline is either sequential or parallel; last call to <code>sequential()</code>/<code>parallel()</code> wins.  Besides side-stepping the statefulness problem, this change also improved the performance of using <code>parallel()</code> to set up a parallel pipeline from a sequential stream factory.</p>\n\n<h2>exposing parallelStream() as a first-class citizen improves programmer perception of the library, leading them to write better code</h2>\n\n<p><a href=\"http://mail.openjdk.java.net/pipermail/lambda-libs-spec-observers/2013-February/001352.html\">Brian Goetz again</a>, in response to <a href=\"http://mail.openjdk.java.net/pipermail/lambda-libs-spec-observers/2013-April/001801.html\">Tim Peierls's argument</a> that <code>Stream.parallel()</code> allows programmers to understand streams sequentially before going parallel:</p>\n\n<blockquote>\n  <p>I have a slightly different viewpoint about the value of this sequential \n  intuition -- I view the pervasive \"sequential expectation\" as one if the \n  biggest challenges of this entire effort; people are <em>constantly</em> \n  bringing their incorrect sequential bias, which leads them to do stupid \n  things like using a one-element array as a way to \"trick\" the \"stupid\" \n  compiler into letting them capture a mutable local, or using lambdas as \n  arguments to map that mutate state that will be used during the \n  computation (in a non-thread-safe way), and then, when its pointed out \n  that what they're doing, shrug it off and say \"yeah, but I'm not doing \n  it in parallel.\"</p>\n  \n  <p>We've made a lot of design tradeoffs to merge sequential and parallel \n  streams.  The result, I believe, is a clean one and will add to the \n  library's chances of still being useful in 10+ years, but I don't \n  particularly like the idea of encouraging people to think this is a \n  sequential library with some parallel bags nailed on the side.</p>\n</blockquote>\n", "title": "Why does Collection.parallelStream() exist when .stream().parallel() does the same thing?", "tags": ["java", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/24603186/why-does-collection-parallelstream-exist-when-stream-parallel-does-the-sa/24603187#24603187", "question_id": 24603186, "answer_id": 24603187}], "creation_date": 1404708260, "score": 38, "link": "http://stackoverflow.com/questions/24603186/why-does-collection-parallelstream-exist-when-stream-parallel-does-the-sa", "question_id": 24603186}, {"body": "<p>What are the best workarounds when running javadoc using JDK 8 and one receives this error.</p>\n\n<p>It seems that for JDK 8 it has been decided that tags like <code>&lt;br /&gt;</code> and <code>&lt;p /&gt;</code> should generate errors, because they are invalid (strict) HTML 4. <a href=\"http://mail.openjdk.java.net/pipermail/core-libs-dev/2013-July/019261.html\">see discussion JDK mailing list here</a> </p>\n\n<p>I wonder, because I just wanted to compile some java project using maven and tripped over this issue. Of course, I can file a ticket with the project (and I guess I will), but it would be great if there is a way how to disable this behaviour (for a machine). Otherwise, I expect that a lot of projects need to be fixed before they can be built on JDK 8 without issues.</p>\n", "tags": ["java", "maven", "javadoc"], "title": "Javadoc in JDK 8 : Invalid &quot;self-closing element not allowed&quot;", "answers": [{"body": "<p>Taken from \"<a href=\"http://www.oracle.com/technetwork/java/javase/8-whats-new-2157071.html\">What's New in JDK 8</a>\" from oracle.com:</p>\n\n<blockquote>\n  <p>The javac tool now has support for checking the content of javadoc comments for issues that could lead to various problems, such as invalid HTML or accessibility issues, in the files that are generated when javadoc is run. The feature is enabled by the new -Xdoclint option. For more details, see the output from running \"javac -X\". This feature is also available in the javadoc tool, and is enabled there by default.</p>\n</blockquote>\n\n<p>Now I did what it told me to do. On JDK 7, the output of \"javac -X\" does not mention the -Xdoclint option. However, on JDK 8, it gives:</p>\n\n<pre><code> -Xdoclint:(all|none|[-]&lt;group&gt;)[/&lt;access&gt;]\n    Enable or disable specific checks for problems in javadoc comments,\n    where &lt;group&gt; is one of accessibility, html, missing, reference, or syntax,\n    and &lt;access&gt; is one of public, protected, package, or private.\n</code></pre>\n\n<p>So, run the Javadoc utility as follows:</p>\n\n<pre><code>javadoc.exe -Xdoclint:none &lt;other options...&gt;\n</code></pre>\n\n<p>In my script, the error you mentioned disappeared by using this option.</p>\n", "title": "Javadoc in JDK 8 : Invalid &quot;self-closing element not allowed&quot;", "tags": ["java", "maven", "javadoc"], "link": "http://stackoverflow.com/questions/26049329/javadoc-in-jdk-8-invalid-self-closing-element-not-allowed/28069357#28069357", "question_id": 26049329, "answer_id": 28069357}, {"body": "<p>For those two particular cases, I think the recommended action is to substitute them with <code>&lt;p&gt;</code>. <a href=\"http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html#format\">This</a> is the link to the Oracle documentation.</p>\n", "title": "Javadoc in JDK 8 : Invalid &quot;self-closing element not allowed&quot;", "tags": ["java", "maven", "javadoc"], "link": "http://stackoverflow.com/questions/26049329/javadoc-in-jdk-8-invalid-self-closing-element-not-allowed/28587761#28587761", "question_id": 26049329, "answer_id": 28587761}, {"body": "<p>To remove the errors in the <strong>javaDocs</strong> just replace:</p>\n\n<ul>\n<li><code>&lt;p/&gt;</code> with just <code>&lt;p&gt;</code></li>\n<li><code>&lt;br/&gt;</code> with just <code>&lt;br&gt;</code></li>\n</ul>\n\n<p>Everything works fine after the correction in a excepted way. </p>\n", "title": "Javadoc in JDK 8 : Invalid &quot;self-closing element not allowed&quot;", "tags": ["java", "maven", "javadoc"], "link": "http://stackoverflow.com/questions/26049329/javadoc-in-jdk-8-invalid-self-closing-element-not-allowed/35223691#35223691", "question_id": 26049329, "answer_id": 35223691}], "creation_date": 1411684946, "score": 38, "link": "http://stackoverflow.com/questions/26049329/javadoc-in-jdk-8-invalid-self-closing-element-not-allowed", "question_id": 26049329}, {"body": "<p>What's the main difference between <code>scheduleAtFixedRate</code> and <code>scheduleWithFixedDelay</code> methods of <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html\">ScheduledExecutorService</a>?</p>\n\n<pre><code>scheduler.scheduleAtFixedRate(new Runnable() {\n    @Override\n    public void run() {\n        System.out.println(\"scheduleAtFixedRate:    \" + new Date());\n    }\n}, 1, 3L , SECONDS);\n\nscheduler.scheduleWithFixedDelay(new Runnable() {\n    @Override\n    public void run() {\n        System.out.println(\"scheduleWithFixedDelay: \" + new Date());\n    }\n}, 1, 3L , SECONDS);\n</code></pre>\n\n<p>they print exact the same time, seems they are executed at exact the same interval.</p>\n", "tags": ["java", "scheduled-tasks", "scheduledexecutorservice"], "title": "scheduleAtFixedRate vs scheduleWithFixedDelay", "answers": [{"body": "<p>Try adding a <code>Thread.sleep(1000);</code> call within your <code>run()</code> method... Basically it's the difference between scheduling something based on when the previous execution <em>ends</em> and when it (logically) <em>starts</em>.</p>\n\n<p>For example, suppose I schedule an alarm to go off with a fixed <em>rate</em> of once an hour, and every time it goes off, I have a cup of coffee, which takes 10 minutes. Suppose that starts at midnight, I'd have:</p>\n\n<pre><code>00:00: Start making coffee\n00:10: Finish making coffee\n01:00: Start making coffee\n01:10: Finish making coffee\n02:00: Start making coffee\n02:10: Finish making coffee\n</code></pre>\n\n<p>If I schedule with a fixed <em>delay</em> of one hour, I'd have:</p>\n\n<pre><code>00:00: Start making coffee\n00:10: Finish making coffee\n01:10: Start making coffee\n01:20: Finish making coffee\n02:20: Start making coffee\n02:30: Finish making coffee\n</code></pre>\n\n<p>Which one you want depends on your task.</p>\n", "title": "scheduleAtFixedRate vs scheduleWithFixedDelay", "tags": ["java", "scheduled-tasks", "scheduledexecutorservice"], "link": "http://stackoverflow.com/questions/24649842/scheduleatfixedrate-vs-schedulewithfixeddelay/24649939#24649939", "question_id": 24649842, "answer_id": 24649939}, {"body": "<p>If you read the Java Doc it will be clearer</p>\n\n<p><strong>ScheduledFuture    scheduleAtFixedRate(Runnable command, long initialDelay, long period, TimeUnit unit)</strong>\nCreates and executes a periodic action that becomes enabled first after the given initial delay, and subsequently with the given period; that is executions will commence after initialDelay then initialDelay+period, then initialDelay + 2 * period, and so on.</p>\n\n<p><strong>ScheduledFuture    scheduleWithFixedDelay(Runnable command, long initialDelay, long delay, TimeUnit unit)</strong>\nCreates and executes a periodic action that becomes enabled first after the given initial delay, and subsequently with the given delay between the termination of one execution and the commencement of the next.</p>\n", "title": "scheduleAtFixedRate vs scheduleWithFixedDelay", "tags": ["java", "scheduled-tasks", "scheduledexecutorservice"], "link": "http://stackoverflow.com/questions/24649842/scheduleatfixedrate-vs-schedulewithfixeddelay/24649947#24649947", "question_id": 24649842, "answer_id": 24649947}, {"body": "<p>There is one catch in scheduleAtFixedRate if first thread is taking too long and not ended in given duration then second conscutive thread will not start once the first task will get finsished and will not imediately get started while the first thread has comepleted their task and gievn duration has been elapsed.  JVM Will decide when the next task will get executed .</p>\n\n<p>I think that will help you to choose method Becuase due to this i got big problem</p>\n", "title": "scheduleAtFixedRate vs scheduleWithFixedDelay", "tags": ["java", "scheduled-tasks", "scheduledexecutorservice"], "link": "http://stackoverflow.com/questions/24649842/scheduleatfixedrate-vs-schedulewithfixeddelay/24650750#24650750", "question_id": 24649842, "answer_id": 24650750}, {"body": "<p>Visualize time series of invocation scheduleAtFixedRate method. Next executions will start immediately if the last one takes longer than period. Otherwise, it will start after period time.</p>\n\n<p><img src=\"http://i.stack.imgur.com/3b9CT.png\" alt=\"time series of invocation scheduleAtFixedRate method\"></p>\n\n<p>Time series of invocation scheduleWithFixedDelay method. Next execution will start after delay time between termination of one execution and the commencement of the next, regardless of its execution time</p>\n\n<p><img src=\"http://i.stack.imgur.com/LAaZf.png\" alt=\"time series of invocation scheduleWithFixedDelay method\"></p>\n\n<p>Hope can help you</p>\n", "title": "scheduleAtFixedRate vs scheduleWithFixedDelay", "tags": ["java", "scheduled-tasks", "scheduledexecutorservice"], "link": "http://stackoverflow.com/questions/24649842/scheduleatfixedrate-vs-schedulewithfixeddelay/25717087#25717087", "question_id": 24649842, "answer_id": 25717087}], "creation_date": 1404897733, "score": 37, "link": "http://stackoverflow.com/questions/24649842/scheduleatfixedrate-vs-schedulewithfixeddelay", "question_id": 24649842}], "quota_max": 300, "page_size": 100, "quota_remaining": 103, "page": 1}