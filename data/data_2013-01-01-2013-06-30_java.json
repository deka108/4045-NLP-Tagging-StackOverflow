{"has_more": true, "items": [{"body": "<p>The following print statement would print \"hello world\".\nCould anyone explain this?</p>\n\n<pre><code>System.out.println(randomString(-229985452) + \" \" + randomString(-147909649));\n</code></pre>\n\n<p>And <code>randomString()</code> looks like this:</p>\n\n<pre><code>public static String randomString(int i)\n{\n    Random ran = new Random(i);\n    StringBuilder sb = new StringBuilder();\n    while (true)\n    {\n        int k = ran.nextInt(27);\n        if (k == 0)\n            break;\n\n        sb.append((char)('`' + k));\n    }\n\n    return sb.toString();\n}\n</code></pre>\n", "tags": ["java", "string", "random"], "title": "Why does this code using random strings print &quot;hello world&quot;?", "answers": [{"body": "<p>When an instance of <code>java.util.Random</code> is constructed with a specific seed parameter (in this case <code>-229985452</code> or <code>-147909649</code>), it follows the random number generation algorithm <em>beginning</em> with that seed value.</p>\n\n<p>Every <code>Random</code> constructed with the same seed will generate the same pattern of numbers every time.</p>\n", "title": "Why does this code using random strings print &quot;hello world&quot;?", "tags": ["java", "string", "random"], "link": "http://stackoverflow.com/questions/15182496/why-does-this-code-using-random-strings-print-hello-world/15182511#15182511", "question_id": 15182496, "answer_id": 15182511}, {"body": "<p>Random always return the same sequence. It's used for shuffling arrays and other operations as permutations.</p>\n\n<p>To get different sequences, it's necessary initialize the sequence in some position, called \"seed\".</p>\n\n<p>The randomSting get the random number in the i position (seed = -229985452) of the \"random\" sequence. Then uses the <a href=\"http://en.wikipedia.org/wiki/ASCII\">ASCII</a> code for the next 27 character in the sequence after the seed position until this value are equal to 0. This return the \"hello\". The same operation is done for \"world\". </p>\n\n<p>I think that the code did not work for any other words. The guy that programmed that knows the random sequence very well.</p>\n\n<p>It's very great geek code!</p>\n", "title": "Why does this code using random strings print &quot;hello world&quot;?", "tags": ["java", "string", "random"], "link": "http://stackoverflow.com/questions/15182496/why-does-this-code-using-random-strings-print-hello-world/15182574#15182574", "question_id": 15182496, "answer_id": 15182574}, {"body": "<p>The other answers explain why, but here is how:</p>\n\n<pre><code>new Random(-229985452).nextInt(27)\n</code></pre>\n\n<p>The first 6 numbers that the above random generates are:</p>\n\n<pre><code>8\n5\n12\n12\n15\n0\n</code></pre>\n\n<p>and the first 6 numbers that <code>new Random(-147909649).nextInt(27)</code> generates are:</p>\n\n<pre><code>23\n15\n18\n12\n4\n0\n</code></pre>\n\n<p>Then just add those numbers to the integer representation of the character <code>`</code> (which is 96):</p>\n\n<pre><code>8  + 96 = 104 --&gt; h\n5  + 96 = 101 --&gt; e\n12 + 96 = 108 --&gt; l\n12 + 96 = 108 --&gt; l\n15 + 96 = 111 --&gt; o\n\n23 + 96 = 119 --&gt; w\n15 + 96 = 111 --&gt; o\n18 + 96 = 114 --&gt; r\n12 + 96 = 108 --&gt; l\n4  + 96 = 100 --&gt; d\n</code></pre>\n", "title": "Why does this code using random strings print &quot;hello world&quot;?", "tags": ["java", "string", "random"], "link": "http://stackoverflow.com/questions/15182496/why-does-this-code-using-random-strings-print-hello-world/15182578#15182578", "question_id": 15182496, "answer_id": 15182578}, {"body": "<p>I'll just leave it here. Whoever has a lot of (CPU) time to spare, feel free to experiment :) Also, if you have mastered some fork-join-fu to make this thing burn all CPU cores (just threads are boring, right?), please share your code. I would greatly appreciate it.</p>\n\n<pre><code>public static void main(String[] args) {\n    long time = System.currentTimeMillis();\n    generate(\"stack\");\n    generate(\"over\");\n    generate(\"flow\");\n    generate(\"rulez\");\n\n    System.out.println(\"Took \" + (System.currentTimeMillis() - time) + \" ms\");\n}\n\nprivate static void generate(String goal) {\n    long[] seed = generateSeed(goal, Long.MIN_VALUE, Long.MAX_VALUE);\n    System.out.println(seed[0]);\n    System.out.println(randomString(seed[0], (char) seed[1]));\n}\n\npublic static long[] generateSeed(String goal, long start, long finish) {\n    char[] input = goal.toCharArray();\n    char[] pool = new char[input.length];\n    label:\n    for (long seed = start; seed &lt; finish; seed++) {\n        Random random = new Random(seed);\n\n        for (int i = 0; i &lt; input.length; i++)\n            pool[i] = (char) random.nextInt(27);\n\n        if (random.nextInt(27) == 0) {\n            int base = input[0] - pool[0];\n            for (int i = 1; i &lt; input.length; i++) {\n                if (input[i] - pool[i] != base)\n                    continue label;\n            }\n            return new long[]{seed, base};\n        }\n\n    }\n\n    throw new NoSuchElementException(\"Sorry :/\");\n}\n\npublic static String randomString(long i, char base) {\n    System.out.println(\"Using base: '\" + base + \"'\");\n    Random ran = new Random(i);\n    StringBuilder sb = new StringBuilder();\n    for (int n = 0; ; n++) {\n        int k = ran.nextInt(27);\n        if (k == 0)\n            break;\n\n        sb.append((char) (base + k));\n    }\n\n    return sb.toString();\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>-9223372036808280701\nUsing base: 'Z'\nstack\n-9223372036853943469\nUsing base: 'b'\nover\n-9223372036852834412\nUsing base: 'e'\nflow\n-9223372036838149518\nUsing base: 'd'\nrulez\nTook 7087 ms\n</code></pre>\n", "title": "Why does this code using random strings print &quot;hello world&quot;?", "tags": ["java", "string", "random"], "link": "http://stackoverflow.com/questions/15182496/why-does-this-code-using-random-strings-print-hello-world/15187009#15187009", "question_id": 15182496, "answer_id": 15187009}, {"body": "<p>I wrote a quick program to find these seeds:</p>\n\n<pre><code>import java.lang.*;\nimport java.util.*;\nimport java.io.*;\n\npublic class RandomWords {\n    public static void main (String[] args) {\n        Set&lt;String&gt; wordSet = new HashSet&lt;String&gt;();\n        String fileName = (args.length &gt; 0 ? args[0] : \"/usr/share/dict/words\");\n        readWordMap(wordSet, fileName);\n        System.err.println(wordSet.size() + \" words read.\");\n        findRandomWords(wordSet);\n    }\n\n    private static void readWordMap (Set&lt;String&gt; wordSet, String fileName) {\n        try {\n            BufferedReader reader = new BufferedReader(new FileReader(fileName));\n            String line;\n            while ((line = reader.readLine()) != null) {\n                line = line.trim().toLowerCase();\n                if (isLowerAlpha(line)) wordSet.add(line);\n            }\n        }\n        catch (IOException e) {\n            System.err.println(\"Error reading from \" + fileName + \": \" + e);\n        }\n    }\n\n    private static boolean isLowerAlpha (String word) {\n        char[] c = word.toCharArray();\n        for (int i = 0; i &lt; c.length; i++) {\n            if (c[i] &lt; 'a' || c[i] &gt; 'z') return false;\n        }\n        return true;\n    }\n\n    private static void findRandomWords (Set&lt;String&gt; wordSet) {\n        char[] c = new char[256];\n        Random r = new Random();\n        for (long seed0 = 0; seed0 &gt;= 0; seed0++) {\n            for (int sign = -1; sign &lt;= 1; sign += 2) {\n                long seed = seed0 * sign;\n                r.setSeed(seed);\n                int i;\n                for (i = 0; i &lt; c.length; i++) {\n                    int n = r.nextInt(27);\n                    if (n == 0) break;\n                    c[i] = (char)((int)'a' + n - 1);\n                }\n                String s = new String(c, 0, i);\n                if (wordSet.contains(s)) {\n                    System.out.println(s + \": \" + seed);\n                    wordSet.remove(s);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>I have it running in the background now, but it's already found enough words for a classic pangram:</p>\n\n<pre><code>import java.lang.*;\nimport java.util.*;\n\npublic class RandomWordsTest {\n    public static void main (String[] args) {\n        long[] a = {-73, -157512326, -112386651, 71425, -104434815,\n                    -128911, -88019, -7691161, 1115727};\n        for (int i = 0; i &lt; a.length; i++) {\n            Random r = new Random(a[i]);\n            StringBuilder sb = new StringBuilder();\n            int n;\n            while ((n = r.nextInt(27)) &gt; 0) sb.append((char)('`' + n));\n            System.out.println(sb);\n        }\n    }\n}\n</code></pre>\n\n<p>(<a href=\"http://ideone.com/RnDYd2\">Demo on ideone.</a>)</p>\n\n<p>Ps. <code>-727295876, -128911, -1611659, -235516779</code>.</p>\n", "title": "Why does this code using random strings print &quot;hello world&quot;?", "tags": ["java", "string", "random"], "link": "http://stackoverflow.com/questions/15182496/why-does-this-code-using-random-strings-print-hello-world/15189232#15189232", "question_id": 15182496, "answer_id": 15189232}, {"body": "<p>Everyone here did a great job of explaining how the code works and showing how you can construct your own examples, but here's an information theoretical answer showing why we can reasonably expect a solution to exist that the brute force search will eventually find.</p>\n\n<p>The 26 different lower-case letters form our alphabet <code>\u03a3</code>. To allow generating words of different lengths, we further add a terminator symbol <code>\u22a5</code> to yield an extended alphabet <code>\u03a3' := \u03a3 \u222a {\u22a5}</code>.</p>\n\n<p>Let <code>\u03b1</code> be a symbol and X a uniformly distributed random variable over <code>\u03a3'</code>. The probability of obtaining that symbol, <code>P(X = \u03b1)</code>, and its information content, <code>I(\u03b1)</code>, are given by:</p>\n\n<blockquote>\n  <p>P(X = \u03b1) = 1/|\u03a3'| = 1/27</p>\n  \n  <p>I(\u03b1) = -log\u2082[P(X = \u03b1)] = -log\u2082(1/27) = log\u2082(27)</p>\n</blockquote>\n\n<p>For a word <code>\u03c9 \u2208 \u03a3*</code> and its <code>\u22a5-</code>terminated counterpart <code>\u03c9' := \u03c9 \u00b7 \u22a5 \u2208 (\u03a3')*</code>, we have</p>\n\n<blockquote>\n  <p>I(\u03c9) := I(\u03c9') = |\u03c9'| * log\u2082(27) = (|\u03c9| + 1) * log\u2082(27)</p>\n</blockquote>\n\n<p>Since the Pseudorandom Number Generator (PRNG) is initialized with a 32-bit seed, we can expect most words of length up to</p>\n\n<blockquote>\n  <p>\u03bb = floor[32/log\u2082(27)] - 1 = 5</p>\n</blockquote>\n\n<p>to be generated by at least one seed. Even if we were to search for a 6-character word, we would still be successful about 41.06% of the time. Not too shabby.</p>\n\n<p>For 7 letters we're looking at closer to 1.52%, but I hadn't realized that before giving it a try:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;random&gt;\n\nint main()\n{\n    std::mt19937 rng(631647094);\n    std::uniform_int_distribution&lt;char&gt; dist('a', 'z' + 1);\n\n    char alpha;\n    while ((alpha = dist(rng)) != 'z' + 1)\n    {\n        std::cout &lt;&lt; alpha;\n    }\n}\n</code></pre>\n\n<p>See the output: <a href=\"http://ideone.com/JRGb3l\">http://ideone.com/JRGb3l</a></p>\n", "title": "Why does this code using random strings print &quot;hello world&quot;?", "tags": ["java", "string", "random"], "link": "http://stackoverflow.com/questions/15182496/why-does-this-code-using-random-strings-print-hello-world/15198628#15198628", "question_id": 15182496, "answer_id": 15198628}, {"body": "<p>Most random number generators are, in fact, \"pseudo random.\" They are Linear Congruential Generators, or LCGs (<a href=\"http://en.wikipedia.org/wiki/Linear_congruential_generator\">http://en.wikipedia.org/wiki/Linear_congruential_generator</a>)</p>\n\n<p>LCGs are quite predictable given a fixed seed. Basically, use a seed that gives you your first letter, then write an app that continues to generate the next int (char) until you hit the next letter in your target string and write down how many times you had to invoke the LCG. Continue until you've generated each and every letter.</p>\n", "title": "Why does this code using random strings print &quot;hello world&quot;?", "tags": ["java", "string", "random"], "link": "http://stackoverflow.com/questions/15182496/why-does-this-code-using-random-strings-print-hello-world/15199966#15199966", "question_id": 15182496, "answer_id": 15199966}, {"body": "<p>From the Java docs, this is an intentional feature when specifying a seed value for the Random class.</p>\n\n<blockquote>\n  <p>If two instances of Random are created with the same seed, and the\n  same sequence of method calls is made for each, they will generate and\n  return identical sequences of numbers. In order to guarantee this\n  property, particular algorithms are specified for the class Random.\n  Java implementations must use all the algorithms shown here for the\n  class Random, for the sake of absolute portability of Java code.</p>\n</blockquote>\n\n<p><a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html\">http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html</a></p>\n\n<p>Odd though, you would think there are implicit security issues in having predictable 'random' numbers.</p>\n", "title": "Why does this code using random strings print &quot;hello world&quot;?", "tags": ["java", "string", "random"], "link": "http://stackoverflow.com/questions/15182496/why-does-this-code-using-random-strings-print-hello-world/15244146#15244146", "question_id": 15182496, "answer_id": 15244146}, {"body": "<p>Derived from <a href=\"http://stackoverflow.com/a/15187009/1208581\">Denis Tulskiy</a>'s answer, this method generates the seed.</p>\n\n<pre><code>public static long generateSeed(String goal, long start, long finish) {\n    char[] input = goal.toCharArray();\n    char[] pool = new char[input.length];\n    label:\n        for (long seed = start; seed &lt; finish; seed++) {\n            Random random = new Random(seed);\n\n            for (int i = 0; i &lt; input.length; i++)\n                pool[i] = (char) (random.nextInt(27)+'`');\n\n            if (random.nextInt(27) == 0) {\n                for (int i = 0; i &lt; input.length; i++) {\n                    if (input[i] != pool[i])\n                        continue label;\n                }\n                return seed;\n            }\n\n        }\n\n    throw new NoSuchElementException(\"Sorry :/\");\n}\n</code></pre>\n", "title": "Why does this code using random strings print &quot;hello world&quot;?", "tags": ["java", "string", "random"], "link": "http://stackoverflow.com/questions/15182496/why-does-this-code-using-random-strings-print-hello-world/15272435#15272435", "question_id": 15182496, "answer_id": 15272435}, {"body": "<p>The principal is the Random Class constructed with the same seed will generate the same pattern of numbers every time.</p>\n", "title": "Why does this code using random strings print &quot;hello world&quot;?", "tags": ["java", "string", "random"], "link": "http://stackoverflow.com/questions/15182496/why-does-this-code-using-random-strings-print-hello-world/17096574#17096574", "question_id": 15182496, "answer_id": 17096574}, {"body": "<p>It is about \"seed\". Same seeds give the same result.</p>\n", "title": "Why does this code using random strings print &quot;hello world&quot;?", "tags": ["java", "string", "random"], "link": "http://stackoverflow.com/questions/15182496/why-does-this-code-using-random-strings-print-hello-world/17959954#17959954", "question_id": 15182496, "answer_id": 17959954}, {"body": "<p>As multi-threading is very easy with Java, here is a variant that searches for a seed using all cores available: <a href=\"http://ideone.com/ROhmTA\">http://ideone.com/ROhmTA</a></p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Random;\nimport java.util.concurrent.Callable;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.ThreadFactory;\n\npublic class SeedFinder {\n\n  static class SearchTask implements Callable&lt;Long&gt; {\n\n    private final char[] goal;\n    private final long start, step;\n\n    public SearchTask(final String goal, final long offset, final long step) {\n      final char[] goalAsArray = goal.toCharArray();\n      this.goal = new char[goalAsArray.length + 1];\n      System.arraycopy(goalAsArray, 0, this.goal, 0, goalAsArray.length);\n      this.start = Long.MIN_VALUE + offset;\n      this.step = step;\n    }\n\n    @Override\n    public Long call() throws Exception {\n      final long LIMIT = Long.MAX_VALUE - this.step;\n      final Random random = new Random();\n      int position, rnd;\n      long seed = this.start;\n\n      while ((Thread.interrupted() == false) &amp;&amp; (seed &lt; LIMIT)) {\n        random.setSeed(seed);\n        position = 0;\n        rnd = random.nextInt(27);\n        while (((rnd == 0) &amp;&amp; (this.goal[position] == 0))\n                || ((char) ('`' + rnd) == this.goal[position])) {\n          ++position;\n          if (position == this.goal.length) {\n            return seed;\n          }\n          rnd = random.nextInt(27);\n        }\n        seed += this.step;\n      }\n\n      throw new Exception(\"No match found\");\n    }\n  }\n\n  public static void main(String[] args) {\n    final String GOAL = \"hello\".toLowerCase();\n    final int NUM_CORES = Runtime.getRuntime().availableProcessors();\n\n    final ArrayList&lt;SearchTask&gt; tasks = new ArrayList&lt;&gt;(NUM_CORES);\n    for (int i = 0; i &lt; NUM_CORES; ++i) {\n      tasks.add(new SearchTask(GOAL, i, NUM_CORES));\n    }\n\n    final ExecutorService executor = Executors.newFixedThreadPool(NUM_CORES, new ThreadFactory() {\n\n      @Override\n      public Thread newThread(Runnable r) {\n        final Thread result = new Thread(r);\n        result.setPriority(Thread.MIN_PRIORITY); // make sure we do not block more important tasks\n        result.setDaemon(false);\n        return result;\n      }\n    });\n    try {\n      final Long result = executor.invokeAny(tasks);\n      System.out.println(\"Seed for \\\"\" + GOAL + \"\\\" found: \" + result);\n    } catch (Exception ex) {\n      System.err.println(\"Calculation failed: \" + ex);\n    } finally {\n      executor.shutdownNow();\n    }\n  }\n}\n</code></pre>\n", "title": "Why does this code using random strings print &quot;hello world&quot;?", "tags": ["java", "string", "random"], "link": "http://stackoverflow.com/questions/15182496/why-does-this-code-using-random-strings-print-hello-world/19192143#19192143", "question_id": 15182496, "answer_id": 19192143}, {"body": "<p>I was intrigued by this, I ran this random  word generator on a dictionary word list.\nRange: Integer.MIN_VALUE to Integer.MAX_VALUE</p>\n\n<p>I got 15131 hits.</p>\n\n<pre><code>int[] arrInt = {-2146926310, -1885533740, -274140519, \n                -2145247212, -1845077092, -2143584283,\n                -2147483454, -2138225126, -2147375969};\n\nfor(int seed : arrInt){\n    System.out.print(randomString(seed) + \" \");\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>the quick browny fox jumps over a lazy dog \n</code></pre>\n", "title": "Why does this code using random strings print &quot;hello world&quot;?", "tags": ["java", "string", "random"], "link": "http://stackoverflow.com/questions/15182496/why-does-this-code-using-random-strings-print-hello-world/23049403#23049403", "question_id": 15182496, "answer_id": 23049403}], "creation_date": 1362285486, "score": 1302, "link": "http://stackoverflow.com/questions/15182496/why-does-this-code-using-random-strings-print-hello-world", "question_id": 15182496}, {"body": "<p>In Java: What is the difference between:</p>\n\n<pre><code>Object o1= ....\no1.getClass().getSimpleName();\no1.getClass().getName();\no1.getClass().getCanonicalName();\n</code></pre>\n\n<p>?</p>\n\n<h1>UPDATE</h1>\n\n<p>I have already checked the Javadoc multiple times and yet this never explains it well.\nI also run a test and that didn't reflect any real meaning behind the way these methods are called.</p>\n\n<p>So please, instead of blaming me for asking this question and directing me to javadoc, try to give some efforts to explain the real meaning behind them. Thanks for your support.</p>\n", "tags": ["java"], "title": "What is the difference between canonical name, simple name and class name in Java Class?", "answers": [{"body": "<p>If you're unsure about something, try writing a test first.</p>\n\n<p>I did this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>//primitive\nSystem.out.println(int.class.getName());\nSystem.out.println(int.class.getCanonicalName());\nSystem.out.println(int.class.getSimpleName());\n\nSystem.out.println();\n\n//class\nSystem.out.println(String.class.getName());\nSystem.out.println(String.class.getCanonicalName());\nSystem.out.println(String.class.getSimpleName());\n\nSystem.out.println();\n\n//inner class\nSystem.out.println(HashMap.SimpleEntry.class.getName());\nSystem.out.println(HashMap.SimpleEntry.class.getCanonicalName());\nSystem.out.println(HashMap.SimpleEntry.class.getSimpleName());        \n\nSystem.out.println();\n\n//anonymous inner class\nSystem.out.println(new Serializable(){}.getClass().getName());\nSystem.out.println(new Serializable(){}.getClass().getCanonicalName());\nSystem.out.println(new Serializable(){}.getClass().getSimpleName());\n</code></pre>\n\n<p>Prints:</p>\n\n<pre>\nint\nint\nint\n\njava.lang.String\njava.lang.String\nString\n\njava.util.AbstractMap$SimpleEntry\njava.util.AbstractMap.SimpleEntry\nSimpleEntry\n\nClassnameTest$1\nnull\n\n</pre>\n\n<p>There's an empty line in the last block where <code>getSimpleName</code> returns an empty string.</p>\n\n<p>The upshot looking at this is:</p>\n\n<ul>\n<li>the <strong>name</strong> is the name that you'd use to dynamically load the class with, for example, a call to <code>Class.forName</code> with the default <code>ClassLoader</code>.</li>\n<li>the <strong>canonical name</strong> is the name that would be used in an import statement and uniquely identifies the class.  Might be useful during <code>toString</code> or logging operations.</li>\n<li>the <strong>simple name</strong> loosely identifies the class, again might be useful during <code>toString</code> or logging operations but is not guaranteed to be unique.</li>\n</ul>\n", "title": "What is the difference between canonical name, simple name and class name in Java Class?", "tags": ["java"], "link": "http://stackoverflow.com/questions/15202997/what-is-the-difference-between-canonical-name-simple-name-and-class-name-in-jav/15203417#15203417", "question_id": 15202997, "answer_id": 15203417}, {"body": "<p>Adding arrays:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    //primitive\n    System.out.println(int.class.getName());\n    System.out.println(int.class.getCanonicalName());\n    System.out.println(int.class.getSimpleName());\n\n    System.out.println();\n\n    //class\n    System.out.println(String.class.getName());\n    System.out.println(String.class.getCanonicalName());\n    System.out.println(String.class.getSimpleName());\n\n    System.out.println();\n\n    //inner class\n    System.out.println(HashMap.SimpleEntry.class.getName());\n    System.out.println(HashMap.SimpleEntry.class.getCanonicalName());\n    System.out.println(HashMap.SimpleEntry.class.getSimpleName());        \n\n    System.out.println();\n\n    //anonymous inner class\n    System.out.println(new Serializable(){}.getClass().getName());\n    System.out.println(new Serializable(){}.getClass().getCanonicalName());\n    System.out.println(new Serializable(){}.getClass().getSimpleName());\n\n    System.out.println();\n\n    {\n    //primitive Array\n    int demo[] = new int[5];\n    Class&lt;? extends int[]&gt; clzz = demo.getClass();\n    System.out.println(clzz.getName());\n    System.out.println(clzz.getCanonicalName());\n    System.out.println(clzz.getSimpleName());\n    }\n\n    System.out.println();\n\n    {\n    //Object Array\n    Integer demo[] = new Integer[5]; \n    Class&lt;? extends Integer[]&gt; clzz = demo.getClass();\n    System.out.println(clzz.getName());\n    System.out.println(clzz.getCanonicalName());\n    System.out.println(clzz.getSimpleName());\n    }\n</code></pre>\n\n<p>Adds to Nick Holt's answer:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[I\nint[]\nint[]\n\n[Ljava.lang.Integer;\njava.lang.Integer[]\nInteger[]\n</code></pre>\n", "title": "What is the difference between canonical name, simple name and class name in Java Class?", "tags": ["java"], "link": "http://stackoverflow.com/questions/15202997/what-is-the-difference-between-canonical-name-simple-name-and-class-name-in-jav/23545622#23545622", "question_id": 15202997, "answer_id": 23545622}, {"body": "<p>Adding local classes, lambdas and the <code>toString()</code> method to complete the previous two answers. Further, I add arrays of lambdas and arrays of anonymous classes (which do not make any sense in practice though):</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\n\npublic final class TestClassNames {\n    private static void showClass(Class&lt;?&gt; c) {\n        System.out.println(\"getName(): \" + c.getName());\n        System.out.println(\"getCanonicalName(): \" + c.getCanonicalName());\n        System.out.println(\"getSimpleName(): \" + c.getSimpleName());\n        System.out.println(\"toString(): \" + c.toString());\n        System.out.println();\n    }\n\n    private static void x(Runnable r) {\n        showClass(r.getClass());\n        showClass(java.lang.reflect.Array.newInstance(r.getClass(), 1).getClass()); // Obtains an array class of a lambda base type.\n    }\n\n    public static class NestedClass {}\n\n    public class InnerClass {}\n\n    public static void main(String[] args) {\n        class LocalClass {}\n        showClass(void.class);\n        showClass(int.class);\n        showClass(String.class);\n        showClass(Runnable.class);\n        showClass(SomeEnum.class);\n        showClass(SomeAnnotation.class);\n        showClass(int[].class);\n        showClass(String[].class);\n        showClass(NestedClass.class);\n        showClass(InnerClass.class);\n        showClass(LocalClass.class);\n        showClass(LocalClass[].class);\n        Object anonymous = new java.io.Serializable() {};\n        showClass(anonymous.getClass());\n        showClass(java.lang.reflect.Array.newInstance(anonymous.getClass(), 1).getClass()); // Obtains an array class of an anonymous base type.\n        x(() -&gt; {});\n    }\n}\n\nenum SomeEnum {\n   BLUE, YELLOW, RED;\n}\n\n@interface SomeAnnotation {}\n</code></pre>\n\n<p>This is the full output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>getName(): void\ngetCanonicalName(): void\ngetSimpleName(): void\ntoString(): void\n\ngetName(): int\ngetCanonicalName(): int\ngetSimpleName(): int\ntoString(): int\n\ngetName(): java.lang.String\ngetCanonicalName(): java.lang.String\ngetSimpleName(): String\ntoString(): class java.lang.String\n\ngetName(): java.lang.Runnable\ngetCanonicalName(): java.lang.Runnable\ngetSimpleName(): Runnable\ntoString(): interface java.lang.Runnable\n\ngetName(): com.example.SomeEnum\ngetCanonicalName(): com.example.SomeEnum\ngetSimpleName(): SomeEnum\ntoString(): class com.example.SomeEnum\n\ngetName(): com.example.SomeAnnotation\ngetCanonicalName(): com.example.SomeAnnotation\ngetSimpleName(): SomeAnnotation\ntoString(): interface com.example.SomeAnnotation\n\ngetName(): [I\ngetCanonicalName(): int[]\ngetSimpleName(): int[]\ntoString(): class [I\n\ngetName(): [Ljava.lang.String;\ngetCanonicalName(): java.lang.String[]\ngetSimpleName(): String[]\ntoString(): class [Ljava.lang.String;\n\ngetName(): com.example.TestClassNames$NestedClass\ngetCanonicalName(): com.example.TestClassNames.NestedClass\ngetSimpleName(): NestedClass\ntoString(): class com.example.TestClassNames$NestedClass\n\ngetName(): com.example.TestClassNames$InnerClass\ngetCanonicalName(): com.example.TestClassNames.InnerClass\ngetSimpleName(): InnerClass\ntoString(): class com.example.TestClassNames$InnerClass\n\ngetName(): com.example.TestClassNames$1LocalClass\ngetCanonicalName(): null\ngetSimpleName(): LocalClass\ntoString(): class com.example.TestClassNames$1LocalClass\n\ngetName(): [Lcom.example.TestClassNames$1LocalClass;\ngetCanonicalName(): null\ngetSimpleName(): LocalClass[]\ntoString(): class [Lcom.example.TestClassNames$1LocalClass;\n\ngetName(): com.example.TestClassNames$1\ngetCanonicalName(): null\ngetSimpleName(): \ntoString(): class com.example.TestClassNames$1\n\ngetName(): [Lcom.example.TestClassNames$1;\ngetCanonicalName(): null\ngetSimpleName(): []\ntoString(): class [Lcom.example.TestClassNames$1;\n\ngetName(): com.example.TestClassNames$$Lambda$1/1175962212\ngetCanonicalName(): com.example.TestClassNames$$Lambda$1/1175962212\ngetSimpleName(): TestClassNames$$Lambda$1/1175962212\ntoString(): class com.example.TestClassNames$$Lambda$1/1175962212\n\ngetName(): [Lcom.example.TestClassNames$$Lambda$1;\ngetCanonicalName(): com.example.TestClassNames$$Lambda$1/1175962212[]\ngetSimpleName(): TestClassNames$$Lambda$1/1175962212[]\ntoString(): class [Lcom.example.TestClassNames$$Lambda$1;\n</code></pre>\n\n<p>So, here are the rules. First, lets start with primitive types and <code>void</code>:</p>\n\n<ol>\n<li>If the class object represents a primitive type or <code>void</code>, all the four methods simply returns its name.</li>\n</ol>\n\n<p>Now the rules for the <code>getName()</code> method:</p>\n\n<ol start=\"2\">\n<li>Every non-lambda and non-array class or interface (i.e, top-level, nested, inner, local and anonymous) has a name (which is returned by <code>getName()</code>) that is the package name followed by a dot (if there is a package), followed by the name of its class-file as generated by the compiler (whithout the suffix <code>.class</code>). If there is no package, it is simply the name of the class-file. If the class is an inner, nested, local or anonymous class, the compiler should generate at least one <code>$</code> in its class-file name. Note that for anonymous classes, the class name would end with a dollar-sign followed by a number.</li>\n<li>Lambda class names are generally unpredictable, and you shouldn't care about they anyway. Exactly, their name is the name of the enclosing class, followed by <code>$$Lambda$</code>, followed by a number, followed by a slash, followed by another number.</li>\n<li>The class descriptor of the primitives are <code>Z</code> for <code>boolean</code>, <code>B</code> for <code>byte</code>, <code>S</code> for <code>short</code>, <code>C</code> for <code>char</code>, <code>I</code> for <code>int</code>, <code>J</code> for <code>long</code>, <code>F</code> for <code>float</code> and <code>D</code> for <code>double</code>. For non-array classes and interfaces the class descriptor is <code>L</code> followed by what is given by <code>getName()</code> followed by <code>;</code>. For array classes, the class descriptor is <code>[</code> followed by the class descriptor of the component type (which may be itself another array class).</li>\n<li>For array classes, the <code>getName()</code> method returns its class descriptor. This rule seems to fail only for array classes whose the component type is a lambda (which possibly is a bug), but hopefully this should not matter anyway because there is no point even on the existence of array classes whose component type is a lambda.</li>\n</ol>\n\n<p>Now, the <code>toString()</code> method:</p>\n\n<ol start=\"6\">\n<li>If the class instance represents an interface (or an annotation, which is a special type of interface), the <code>toString()</code> returns <code>\"interface \" + getName()</code>. If it is a primitive, it returns simply <code>getName()</code>. If it is something else (a class type, even if it is a pretty weird one), it returns <code>\"class \" + getName()</code>.</li>\n</ol>\n\n<p>The <code>getCanonicalName()</code> method:</p>\n\n<ol start=\"7\">\n<li>For top-level classes and interfaces, the <code>getCanonicalName()</code> method returns just what the <code>getName()</code> method returns.</li>\n<li>The <code>getCanonicalName()</code> method returns <code>null</code> for anonymous or local classes and for array classes of those.</li>\n<li>For inner and nested classes and interfaces, the <code>getCanonicalName()</code> method returns what the <code>getName()</code> method would replacing the compiler-introduced dollar-signs by dots.</li>\n<li>For array classes, the <code>getCanonicalName()</code> method returns <code>null</code> if the canonical name of the component type is <code>null</code>. Otherwise, it returns the canonical name of the component type followed by <code>[]</code>.</li>\n</ol>\n\n<p>The <code>getSimpleName()</code> method:</p>\n\n<ol start=\"11\">\n<li>For top-level, nested, inner and local classes, the <code>getSimpleName()</code> returns the name of the class as written in the source file.</li>\n<li>For anonymous classes the <code>getSimpleName()</code> returns an empty <code>String</code>.</li>\n<li>For lambda classes the <code>getSimpleName()</code> just returns what the <code>getName()</code> would return without the package name. This do not makes much sense and looks like a bug for me, but there is no point in calling <code>getSimpleName()</code> on a lambda class to start with.</li>\n<li>For array classes the <code>getSimpleName()</code> method returns the simple name of the component class followed by <code>[]</code>. This have the funny/weird side-effect that array classes whose component type is an anonymous class have just <code>[]</code> as their simple names.</li>\n</ol>\n", "title": "What is the difference between canonical name, simple name and class name in Java Class?", "tags": ["java"], "link": "http://stackoverflow.com/questions/15202997/what-is-the-difference-between-canonical-name-simple-name-and-class-name-in-jav/29527145#29527145", "question_id": 15202997, "answer_id": 29527145}, {"body": "<p>I've been confused by the wide range of different naming schemes as well, and was just about to ask and answer my own question on this when I found this question here. I think my findings fit it well enough, and complement what's already here. My focus is looking for <em>documentation</em> on the various terms, and adding some more related terms that might crop up in other places.</p>\n\n<p>Consider the following example:</p>\n\n<pre><code>package a.b;\nclass C {\n  static class D extends C {\n  }\n  D d;\n  D[] ds;\n}\n</code></pre>\n\n<ul>\n<li><p>The <strong>simple name</strong> of <code>D</code> is <code>D</code>. That's just the part you wrote when declaring the class. <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.9\" rel=\"nofollow\">Anonymous classes</a> have no simple name. <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getSimpleName--\" rel=\"nofollow\"><code>Class.getSimpleName()</code></a> returns this name or the empty string. It is possible for the simple name to contain a <code>$</code> if you write it like this, since <code>$</code> is a valid part of an identifier.</p></li>\n<li><p>According to <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-6.html#jls-6.7\" rel=\"nofollow\">the JLS section 6.7</a>, both <code>a.b.C.D</code> and <code>a.b.C.D.D.D</code> would be <strong>fully qualified names</strong>, but only <code>a.b.C.D</code> would be the <strong>canonical name</strong> of <code>D</code>. So every canonical name is a fully qualified name, but the converes is not always true. <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getCanonicalName--\" rel=\"nofollow\"><code>Class.getCanonicalName()</code></a> will return the canonical name or <code>null</code>.</p></li>\n<li><p><a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getName--\" rel=\"nofollow\"><code>Class.getName()</code></a> is documented to return the <strong>binary name</strong>, as specified in <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-13.html#jls-13.1\" rel=\"nofollow\">JLS section 13.1</a>. In this case it returns <code>a.b.C$D</code> for <code>D</code> and <code>[La.b.C$D;</code> for <code>D[]</code>.</p></li>\n<li><p><a href=\"http://stackoverflow.com/a/13343540/1468366\">This answer</a> demonstrates that it is possible for two classes loaded by the same class loader to have the same <strong>canonical name</strong> but distinct <strong>binary names</strong>. Neither name is sufficient to reliably deduce the other: if you have the canonical name, you don't know which parts of the name are packages and which are containing classes. If you have the binary name, you don't know which <code>$</code> were introduced as separators and which were part of some simple name.</p></li>\n<li><p><a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.9\" rel=\"nofollow\">Anonymous classes</a> and <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.3\" rel=\"nofollow\">local classes</a> have no <strong>fully qualified names</strong> but still have a <strong>binary name</strong>. The same holds for classes nested inside such classes. <em>Every</em> class has a binary name.</p></li>\n<li><p>Running <code>javap -v -private</code> on <code>a/b/C.class</code> shows that the bytecode refers to the type of <code>d</code> as <code>La/b/C$D;</code> and that of the array <code>ds</code> as <code>[La/b/C$D;</code>. These are called <strong>descriptors</strong>, and they are specified in <a href=\"http://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.3\" rel=\"nofollow\">JVMS section 4.3</a>.</p></li>\n<li><p>The class name <code>a/b/C$D</code> used in both of these descriptors is what you get by replacing <code>.</code> by <code>/</code> in the binary name. The JVM spec apparently calls this the <strong>internal form of the binary name</strong>. <a href=\"http://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.2.1\" rel=\"nofollow\">JVMS section 4.2.1</a> describes it, and states that the difference from the binary name were for historical reasons.</p></li>\n<li><p>The <strong>file name</strong> of a class in one of the typical filename-based class loaders is what you get if you interpret the <code>/</code> in the internal form of the binary name as a directory separator, and append the file name extension <code>.class</code> to it. It's resolved relative to the class path used by the class loader in question.</p></li>\n</ul>\n", "title": "What is the difference between canonical name, simple name and class name in Java Class?", "tags": ["java"], "link": "http://stackoverflow.com/questions/15202997/what-is-the-difference-between-canonical-name-simple-name-and-class-name-in-jav/36978943#36978943", "question_id": 15202997, "answer_id": 36978943}, {"body": "<p>this is best document I found describing getName(), getSimpleName(), getCanonicalName()</p>\n\n<p><a href=\"https://javahowtodoit.wordpress.com/2014/09/09/java-lang-class-what-is-the-difference-between-class-getname-class-getcanonicalname-and-class-getsimplename/\" rel=\"nofollow\">https://javahowtodoit.wordpress.com/2014/09/09/java-lang-class-what-is-the-difference-between-class-getname-class-getcanonicalname-and-class-getsimplename/</a></p>\n\n<pre><code>// Primitive type\nint.class.getName();          // -&gt; int\nint.class.getCanonicalName(); // -&gt; int\nint.class.getSimpleName();    // -&gt; int\n\n// Standard class\nInteger.class.getName();          // -&gt; java.lang.Integer\nInteger.class.getCanonicalName(); // -&gt; java.lang.Integer\nInteger.class.getSimpleName();    // -&gt; Integer\n\n// Inner class\nMap.Entry.class.getName();          // -&gt; java.util.Map$Entry\nMap.Entry.class.getCanonicalName(); // -&gt; java.util.Map.Entry\nMap.Entry.class.getSimpleName();    // -&gt; Entry     \n\n// Anonymous inner class\nClass&lt;?&gt; anonymousInnerClass = new Cloneable() {}.getClass();\nanonymousInnerClass.getName();          // -&gt; somepackage.SomeClass$1\nanonymousInnerClass.getCanonicalName(); // -&gt; null\nanonymousInnerClass.getSimpleName();    // -&gt; // An empty string\n\n// Array of primitives\nClass&lt;?&gt; primitiveArrayClass = new int[0].getClass();\nprimitiveArrayClass.getName();          // -&gt; [I\nprimitiveArrayClass.getCanonicalName(); // -&gt; int[]\nprimitiveArrayClass.getSimpleName();    // -&gt; int[]\n\n// Array of objects\nClass&lt;?&gt; objectArrayClass = new Integer[0].getClass();\nobjectArrayClass.getName();          // -&gt; [Ljava.lang.Integer;\nobjectArrayClass.getCanonicalName(); // -&gt; java.lang.Integer[]\nobjectArrayClass.getSimpleName();    // -&gt; Integer[]\n</code></pre>\n", "title": "What is the difference between canonical name, simple name and class name in Java Class?", "tags": ["java"], "link": "http://stackoverflow.com/questions/15202997/what-is-the-difference-between-canonical-name-simple-name-and-class-name-in-jav/37603567#37603567", "question_id": 15202997, "answer_id": 37603567}], "creation_date": 1362404728, "score": 459, "link": "http://stackoverflow.com/questions/15202997/what-is-the-difference-between-canonical-name-simple-name-and-class-name-in-jav", "question_id": 15202997}, {"body": "<p>Please explain the use of <code>Xms</code> and <code>Xmx</code> parameters in JVMs. What are the default values for them?</p>\n", "tags": ["java", "parameters", "jvm"], "title": "What are the Xms and Xmx parameters when starting JVMs?", "answers": [{"body": "<p>The flag <code>Xmx</code> specifies the maximum memory allocation pool for a Java Virtual Machine (JVM), while <code>Xms</code> specifies the initial memory allocation pool.</p>\n\n<p>This means that your JVM will be started with <code>Xms</code> amount of memory and will be able to use a maximum of <code>Xmx</code> amount of memory. For example, starting a JVM like below will start it with 256MB of memory, and will allow the process to use up to 2048MB of memory:</p>\n\n<pre><code>java -Xmx2048m -Xms256m\n</code></pre>\n\n<p>The memory flag can also be specified in multiple sizes, such as kilobytes, megabytes, and so on.</p>\n\n<pre><code>-Xmx1024k\n-Xmx512m\n-Xmx8g\n</code></pre>\n\n<p>The <code>Xms</code> flag has no default value, and <code>Xmx</code> typically has a default value of 256MB. A common use for these flags is when you encounter a <code>java.lang.OutOfMemoryError</code>.</p>\n\n<p>When using these settings, keep in mind that these settings are for the JVM's <em>heap</em>, and that the JVM can/will use more memory than just the size allocated to the heap. From <a href=\"http://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/garbage_collect.html\">Oracle's Documentation</a>:</p>\n\n<blockquote>\n  <p>Note that the JVM uses more memory than just the heap. For example Java methods, thread stacks and native handles are allocated in memory separate from the heap, as well as JVM internal data structures.</p>\n</blockquote>\n", "title": "What are the Xms and Xmx parameters when starting JVMs?", "tags": ["java", "parameters", "jvm"], "link": "http://stackoverflow.com/questions/14763079/what-are-the-xms-and-xmx-parameters-when-starting-jvms/14763095#14763095", "question_id": 14763079, "answer_id": 14763095}, {"body": "<p>Just run the command <code>java -X</code> and you will get a list of all <code>-X</code> options:</p>\n\n<pre><code>C:\\Users\\Admin&gt;java -X\n-Xmixed           mixed mode execution (default)\n-Xint             interpreted mode execution only\n-Xbootclasspath:&lt;directories and zip/jar files separated by ;&gt;\n                      set search path for bootstrap classes and resources\n-Xbootclasspath/a:&lt;directories and zip/jar files separated by ;&gt;\n                      append to end of bootstrap class path\n-Xbootclasspath/p:&lt;directories and zip/jar files separated by ;&gt;\n                      prepend in front of bootstrap class path\n-Xdiag            show additional diagnostic messages\n-Xnoclassgc       disable class garbage collection\n-Xincgc           enable incremental garbage collection\n-Xloggc:&lt;file&gt;    log GC status to a file with time stamps\n-Xbatch           disable background compilation\n-Xms&lt;size&gt;        set initial Java heap size.........................\n-Xmx&lt;size&gt;        set maximum Java heap size.........................\n-Xss&lt;size&gt;        set java thread stack size\n-Xprof            output cpu profiling data\n-Xfuture          enable strictest checks, anticipating future default\n-Xrs              reduce use of OS signals by Java/VM (see documentation)\n-Xcheck:jni       perform additional checks for JNI functions\n-Xshare:off       do not attempt to use shared class data\n-Xshare:auto      use shared class data if possible (default)\n-Xshare:on        require using shared class data, otherwise fail.\n-XshowSettings    show all settings and continue\n-XshowSettings:all         show all settings and continue\n-XshowSettings:vm          show all vm related settings and continue\n-XshowSettings:properties  show all property settings and continue\n-XshowSettings:locale      show all locale related settings and continue\n</code></pre>\n\n<p><strong>The -X options are non-standard and subject to change without notice.</strong></p>\n\n<p>I hope this will help you understand Xms, Xmx as well as many more other things that matters the most. :)</p>\n", "title": "What are the Xms and Xmx parameters when starting JVMs?", "tags": ["java", "parameters", "jvm"], "link": "http://stackoverflow.com/questions/14763079/what-are-the-xms-and-xmx-parameters-when-starting-jvms/20264362#20264362", "question_id": 14763079, "answer_id": 20264362}, {"body": "<p>The main part of the question has already been addressed above. \nJust adding part of the default values.</p>\n\n<p>As per <a href=\"http://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/jrdocs/refman/optionX.html\" rel=\"nofollow\">http://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/jrdocs/refman/optionX.html</a></p>\n\n<p>The default value of Xmx will depend on platform and amount of memory available in the system.</p>\n", "title": "What are the Xms and Xmx parameters when starting JVMs?", "tags": ["java", "parameters", "jvm"], "link": "http://stackoverflow.com/questions/14763079/what-are-the-xms-and-xmx-parameters-when-starting-jvms/21629315#21629315", "question_id": 14763079, "answer_id": 21629315}, {"body": "<p>You can specify in your IDE . eg for eclipse in Run Configuration> Vm Arguments\nyou enter -Xmx800m -Xms500m</p>\n\n<p><img src=\"http://i.stack.imgur.com/lJHpH.png\" alt=\"enter image description here\"></p>\n", "title": "What are the Xms and Xmx parameters when starting JVMs?", "tags": ["java", "parameters", "jvm"], "link": "http://stackoverflow.com/questions/14763079/what-are-the-xms-and-xmx-parameters-when-starting-jvms/28559044#28559044", "question_id": 14763079, "answer_id": 28559044}], "creation_date": 1360279700, "score": 408, "link": "http://stackoverflow.com/questions/14763079/what-are-the-xms-and-xmx-parameters-when-starting-jvms", "question_id": 14763079}, {"body": "<p>I just downloaded Java 7u17 on Mac OS 10.7.5 from <a href=\"http://www.java.com/en/download/mac_download.jsp?locale=en\">here</a> and then successfully installed it. In order to do some JNI programming, I need to know where Java installed on my Mac. </p>\n\n<p>I thought that inside the <code>/Library/Java/JavaVirtualMachines/</code> folder, there would be a folder called <code>1.7.0.jdk</code> or something, but then I found that the folder is empty. This was confirmed by running <code>ls /Library/Java/JavaVirtualMachines/</code> in the Terminal. I've tried searching for it to find out if it was installed somewhere else, but that doesn't seem to be turning anything up.</p>\n\n<p>Could someone please tell me where Java is installed on my Mac?</p>\n", "tags": ["java", "osx"], "title": "Where is Java Installed on Mac OS X?", "answers": [{"body": "<p>Turns out that I actually had the Java 7 JRE installed, not the JDK. The correct download link is <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html\">here</a>. After installing it, <code>jdk1.7.0jdk</code> appears in the JavaVirtualMachines directory.</p>\n", "title": "Where is Java Installed on Mac OS X?", "tags": ["java", "osx"], "link": "http://stackoverflow.com/questions/15826202/where-is-java-installed-on-mac-os-x/15826203#15826203", "question_id": 15826202, "answer_id": 15826203}, {"body": "<p>Edited: Alias to current java version is <code>/Library/Java/Home</code></p>\n\n<p>For more information: <a href=\"http://developer.apple.com/library/mac/#qa/qa1170/_index.html\" rel=\"nofollow\">a link</a></p>\n", "title": "Where is Java Installed on Mac OS X?", "tags": ["java", "osx"], "link": "http://stackoverflow.com/questions/15826202/where-is-java-installed-on-mac-os-x/15826346#15826346", "question_id": 15826202, "answer_id": 15826346}, {"body": "<p>Use unix find function to find javas installed...</p>\n\n<pre><code>sudo find / -name java\n</code></pre>\n", "title": "Where is Java Installed on Mac OS X?", "tags": ["java", "osx"], "link": "http://stackoverflow.com/questions/15826202/where-is-java-installed-on-mac-os-x/15826672#15826672", "question_id": 15826202, "answer_id": 15826672}, {"body": "<p>Use <code>/usr/libexec/java_home -v 1.7</code> command on a terminal shell to figure out where is your java 1.7 home directory</p>\n", "title": "Where is Java Installed on Mac OS X?", "tags": ["java", "osx"], "link": "http://stackoverflow.com/questions/15826202/where-is-java-installed-on-mac-os-x/15826712#15826712", "question_id": 15826202, "answer_id": 15826712}, {"body": "<p>I have just installed the JDK for version 21 of Java SE 7 and found that it is installed in a different directory from Apple's Java 6. It is in /Library/Java... rather then in /System/Library/Java.... Running /usr/libexec/java_home -v 1.7 versus -v 1.6 will confirm this.</p>\n", "title": "Where is Java Installed on Mac OS X?", "tags": ["java", "osx"], "link": "http://stackoverflow.com/questions/15826202/where-is-java-installed-on-mac-os-x/16262707#16262707", "question_id": 15826202, "answer_id": 16262707}, {"body": "<p>If you install just the JRE, it seems to be put at:</p>\n\n<pre><code>/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home\n</code></pre>\n", "title": "Where is Java Installed on Mac OS X?", "tags": ["java", "osx"], "link": "http://stackoverflow.com/questions/15826202/where-is-java-installed-on-mac-os-x/18771311#18771311", "question_id": 15826202, "answer_id": 18771311}, {"body": "<p>I tried serkan's solution, it found java 7's location on OS X Mavericks.\nit is resided in <code>\"/Library/Java/JavaVirtualMachines/jdk1.7.0_51.jdk/\"</code>\nbut to make it the default JDK I had to set JAVA_HOME system variable in .bash_profile in home directory to <code>\"/Library/Java/JavaVirtualMachines/jdk1.7.0_51.jdk/Contents/Home/\"</code>\nso its up and running now thanks to serkan's idea</p>\n", "title": "Where is Java Installed on Mac OS X?", "tags": ["java", "osx"], "link": "http://stackoverflow.com/questions/15826202/where-is-java-installed-on-mac-os-x/21463054#21463054", "question_id": 15826202, "answer_id": 21463054}, {"body": "<p>Java package structure of Mac OS is bit different from Windows. Don't be upset for this as developer just needs to set <code>PATH</code> and <code>JAVA_HOME</code>.</p>\n\n<p>So in <code>.bash_profile</code> set <code>JAVA_HOME</code> and <code>PATH</code> as below. This example is for Java 6 as I have Java 6 in my Mac.</p>\n\n<pre><code>export JAVA_HOME=/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home\nexport PATH=/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin\n</code></pre>\n", "title": "Where is Java Installed on Mac OS X?", "tags": ["java", "osx"], "link": "http://stackoverflow.com/questions/15826202/where-is-java-installed-on-mac-os-x/21957723#21957723", "question_id": 15826202, "answer_id": 21957723}, {"body": "<p>You can find its settings and location details under System Preferences. Also the sudo find command via terminal as suggested by @abimaran will help you as well.</p>\n", "title": "Where is Java Installed on Mac OS X?", "tags": ["java", "osx"], "link": "http://stackoverflow.com/questions/15826202/where-is-java-installed-on-mac-os-x/28673023#28673023", "question_id": 15826202, "answer_id": 28673023}, {"body": "<p>The System Preferences then Java control panel then Java then View will show the exact location of the currently installed default JRE.</p>\n", "title": "Where is Java Installed on Mac OS X?", "tags": ["java", "osx"], "link": "http://stackoverflow.com/questions/15826202/where-is-java-installed-on-mac-os-x/30074478#30074478", "question_id": 15826202, "answer_id": 30074478}, {"body": "<p>You could use <code>echo $(/usr/libexec/java_home)</code> command in your terminal to know the path where Java being installed. </p>\n", "title": "Where is Java Installed on Mac OS X?", "tags": ["java", "osx"], "link": "http://stackoverflow.com/questions/15826202/where-is-java-installed-on-mac-os-x/31667558#31667558", "question_id": 15826202, "answer_id": 31667558}, {"body": "<p>just write <code>/Library/Java/JavaVirtualMachines/</code><br>\nin Go to Folder --> Go in Finder </p>\n", "title": "Where is Java Installed on Mac OS X?", "tags": ["java", "osx"], "link": "http://stackoverflow.com/questions/15826202/where-is-java-installed-on-mac-os-x/37939848#37939848", "question_id": 15826202, "answer_id": 37939848}], "creation_date": 1365137909, "score": 380, "link": "http://stackoverflow.com/questions/15826202/where-is-java-installed-on-mac-os-x", "question_id": 15826202}, {"body": "<p>I came across Xamarin claims that their Mono implementation on Android and their C# compiled apps are faster than Java code. Did anyone perform actual benchmarks on very similar Java and C# code on different Android platforms to verify such claims, could post the code and results?</p>\n\n<h3>Added June 18, 2013</h3>\n\n<p>Since there was no answer and could not find such benchmarks done by others, decided to do my own tests. Unfortunately, my question remains \"locked\" so I cannot post this as answer, only edit the question. Please vote to re-open this question. For C#, I used Xamarin.Android ver. 4.7.09001 (beta). The source code, all the data I used for testing, and compiled APK packages are on GitHub:</p>\n\n<p>Java: <a href=\"https://github.com/gregko/TtsSetup_Java\">https://github.com/gregko/TtsSetup_Java</a></p>\n\n<p>C#: <a href=\"https://github.com/gregko/TtsSetup_C_sharp\">https://github.com/gregko/TtsSetup_C_sharp</a></p>\n\n<p>If someone would like to repeat my tests on other devices or emulators, I'd be interested to learn the results as well.</p>\n\n<h1>Results from my testing</h1>\n\n<p>I ported my sentence extractor class to C# (from my @Voice Aloud Reader app) and run some tests on 10 html files in English, Russian, French, Polish and Czech languages. Each run was performed 5 times on all 10 files, and the total time for 3 different devices and one emulator are posted below. I tested \"Release\" builds only, without debugging enabled.</p>\n\n<h3>HTC Nexus One Android 2.3.7 (API 10) - CyanogenMod ROM</h3>\n\n<p>Java: Grand total time (5 runs): 12361 ms, with file reading total: 13304 ms</p>\n\n<p>C#: Grand total time (5 runs): 17504 ms, with file reading total: 17956 ms</p>\n\n<h3>Samsung Galaxy S2 SGH-I777 (Android 4.0.4, API 15) - CyanogenMod ROM</h3>\n\n<p>Java: Grand total time (5 runs): 8947 ms, with file reading total: 9186 ms</p>\n\n<p>C#: Grand total time (5 runs): 9884 ms, with file reading total: 10247 ms</p>\n\n<h3>Samsung GT-N7100 (Android 4.1.1 JellyBean, API 16) - Samsung ROM</h3>\n\n<p>Java: Grand total time (5 runs): 9742 ms, with file reading total: 10111 ms</p>\n\n<p>C#: Grand total time (5 runs): 10459 ms, with file reading total: 10696 ms</p>\n\n<h3>Emulator - Intel (Android 4.2, API 17)</h3>\n\n<p>Java: Grand total time (5 runs): 2699 ms, with file reading total: 3127 ms</p>\n\n<p>C#: Grand total time (5 runs): 2049 ms, with file reading total: 2182 ms</p>\n\n<h3>Emulator - Intel (Android 2.3.7, API 10)</h3>\n\n<p>Java: Grand total time (5 runs): 2992 ms, with file reading total: 3591 ms</p>\n\n<p>C#: Grand total time (5 runs): 2049 ms, with file reading total: 2257 ms</p>\n\n<h3>Emulator - Arm (Android 4.0.4, API 15)</h3>\n\n<p>Java: Grand total time (5 runs): 41751 ms, with file reading total: 43866 ms</p>\n\n<p>C#: Grand total time (5 runs): 44136 ms, with file reading total: 45109 ms</p>\n\n<h1>Brief discussion</h1>\n\n<p>My test code contains mainly text parsing, replacing and Regex searches, perhaps for other code (e.g. more numeric operations) the results would be different. On all devices with ARM processors, Java performed better than Xamarin C# code. The largest difference was under Android 2.3, where C# code run at approx. 70% of Java speed.</p>\n\n<p>On Intel emulator (with Intel HAX technology, emulator runs in fast virt mode), Xamarin C# code runs my sample code much faster than Java - about 1.35 time faster. Maybe Mono virtual machine code and libraries are much better optimized on Intel than on ARM?</p>\n\n<h1>Edit July 8, 2013</h1>\n\n<p>I just installed Genymotion Android emulator, which runs in Oracle VirtualBox, and again this one uses native Intel processor, not emulating ARM processor. As with Intel HAX emulator, again C# runs here much faster. Here are my results:</p>\n\n<h3>Genymotion emulator - Intel (Android 4.1.1, API 16)</h3>\n\n<blockquote>\n  <p>Java:\n  Grand total time (5 runs): 2069 ms, with file reading total: 2248 ms</p>\n  \n  <p>C#:\n  Grand total time (5 runs): 1543 ms, with file reading total: 1642 ms</p>\n</blockquote>\n\n<p>I then noticed that there was an update to Xamarin.Android beta, version 4.7.11, with release notes mentioning some changes in Mono runtime as well. Decided to quickly test some ARM devices, and big surprise - C# numbers improved:</p>\n\n<h3>BN Nook XD+, ARM (Android 4.0)</h3>\n\n<blockquote>\n  <p>Java: Grand total time (5 runs): 8103 ms, with file reading total: 8569 ms</p>\n  \n  <p>C#: Grand total time (5 runs): 7951 ms, with file reading total: 8161 ms</p>\n</blockquote>\n\n<p>Wow! C# is now better than Java? Decided to repeat the test on my Galaxy Note 2:</p>\n\n<h3>Samsung Galaxy Note 2 - ARM (Android 4.1.1)</h3>\n\n<blockquote>\n  <p>Java: Grand total time (5 runs): 9675 ms, with file reading total: 10028 ms</p>\n  \n  <p>C#: Grand total time (5 runs): 9911 ms, with file reading total: 10104 ms</p>\n</blockquote>\n\n<p>Here C# seems to be only slightly slower, but these numbers gave me a pause: Why the time is longer than on Nook HD+, even though Note 2 has a faster processor? The answer: power saving mode. On Nook, it was disabled, on Note 2 - enabled. Decided to test with power saving mode disabled (as with enabled, it also limits the processor speed):</p>\n\n<h3>Samsung Galaxy Note 2 - ARM (Android 4.1.1), power saving disabled</h3>\n\n<blockquote>\n  <p>Java: Grand total time (5 runs): 7153 ms, with file reading total: 7459 ms</p>\n  \n  <p>C#: Grand total time (5 runs): 6906 ms, with file reading total: 7070 ms</p>\n</blockquote>\n\n<p>Now, surprisingly, C# is slightly faster than Java on ARM processor as well. Big improvement!</p>\n\n<h1>Edit July 12, 2013</h1>\n\n<p>We all know, that nothing beats native code for speed, and I was not satisfied with the performance of my sentence splitter in Java or C#, particularly that I need to improve it (and thus make it even slower). Decided to re-write it in C++. Here is a small (i.e. a smaller set of files than previous tests, for other reasons) comparison of the speed of native vs. Java on my Galaxy Note 2, with power saving mode disabled:</p>\n\n<p>Java:\nGrand total time (5 runs): 3292 ms, with file reading total: 3454 ms</p>\n\n<p>Native thumb:\nGrand total time (5 runs): 537 ms, with file reading total: 657 ms</p>\n\n<p>Native arm:\nGrand total time (5 runs): 458 ms, with file reading total: 587 ms</p>\n\n<p>Looks like for my particular test, the native code is 6 to 7 times faster than Java. Caveat: could not use std::regex class on Android, so had to write my own specialized routines searching for paragraphs breaks or html tags. My initial tests of the same code on a PC using regex, were about 4 to 5 times faster than Java.</p>\n\n<p>Phew! Waking raw memory with char* or wchar* pointers again, I instantly felt 20 years younger! :)</p>\n\n<h1>Edit July 15, 2013</h1>\n\n<p><em><strong>(Please see below, with edits of 7/30/2013, for much better results with Dot42)</em></strong></p>\n\n<p>With some difficulty I manged to port my C# tests to Dot42 (version 1.0.1.71 beta), another C# platform for Android. Preliminary results show that Dot42 code is about 3x (3 times) slower than Xamarin C# (v. 4.7.11), on an Intel Android emulator. One problem is, that System.Text.RegularExpressions class in Dot42 does not have the Split() function that I used in Xamarin tests, so I used Java.Util.Regex class instead, and Java.Util.Regex.Pattern.Split(), so in this particular place in the code there is this small difference. Should not be a big problem though. Dot42 compiles to Dalvik (DEX) code, so it cooperates with Java on Android natively, does not need expensive interop from C# to Java like Xamarin.</p>\n\n<p>Just for comparison, I also run the test on ARM devices - here Dot42 code is \"only\" 2x slower than Xamarin C#. Here are my results:</p>\n\n<h3>HTC Nexus One Android 2.3.7 (ARM)</h3>\n\n<blockquote>\n  <p>Java: Grand total time (5 runs): 12187 ms, with file reading total: 13200 ms</p>\n  \n  <p>Xamarin C#: Grand total time (5 runs): 13935 ms, with file reading total: 14465 ms</p>\n  \n  <p>Dot42 C#: Grand total time (5 runs): 26000 ms, with file reading total: 27168 ms</p>\n</blockquote>\n\n<h3>Samsung Galaxy Note 2, Android 4.1.1 (ARM)</h3>\n\n<blockquote>\n  <p>Java: Grand total time (5 runs): 6895 ms, with file reading total: 7275 ms</p>\n  \n  <p>Xamarin C#: Grand total time (5 runs): 6466 ms, with file reading total: 6720 ms</p>\n  \n  <p>Dot42 C#: Grand total time (5 runs): 11185 ms, with file reading total: 11843 ms</p>\n</blockquote>\n\n<h3>Intel emulator, Android 4.2 (x86)</h3>\n\n<blockquote>\n  <p>Java: Grand total time (5 runs): 2389 ms, with file reading total: 2770 ms</p>\n  \n  <p>Xamarin C#: Grand total time (5 runs): 1748 ms, with file reading total: 1933 ms</p>\n  \n  <p>Dot42 C#: Grand total time (5 runs): 5150 ms, with file reading total: 5459 ms</p>\n</blockquote>\n\n<p>To me it was also interesting to note that Xamarin C# is slightly faster than Java on a newer ARM device, and slightly slower on the old Nexus One. If anyone would like to run these tests as well, please let me know and I'll update the sources on GitHub. It would be particularly interesting to see results from a real Android device with Intel processor.</p>\n\n<h2>Update 7/26/2013</h2>\n\n<p>Just a quick update, re-compiled by benchmark apps with the latest Xamarin.Android 4.8, and also with dot42 1.0.1.72 update released today - no significant changes from the results reported before.</p>\n\n<h2>Update 7/30/2013 - better results for dot42</h2>\n\n<p>Re-tested Dot42 with Robert's (from dot42 makers) port of my Java code to C#. In my C# port done initially for Xamarin, I replaced some native Java classes, like ListArray, with List class native to C#, etc. Robert did not have my Dot42 source code, so he ported it again from Java and used original Java classes in such places, which benefits Dot42, I guess because it runs in Dalvik VM, like Java, and not in Mono, like Xamarin. Now Dot42 results are much better. Here is a log from my testing:</p>\n\n<blockquote>\n  <h2>7/30/2013 - Dot42 tests with more Java classes in Dot42 C#</h2>\n  \n  <h2>Intel emulator, Android 4.2</h2>\n  \n  <p>Dot42, Greg's Code using StringBuilder.Replace() (as in Xamarin):<br>\n  Grand total time (5 runs): 3646 ms, with file reading total: 3830 ms </p>\n  \n  <p>Dot42, Greg's Code using String.Replace() (as in Java and Robert's code):<br>\n  Grand total time (5 runs): 3027 ms, with file reading total: 3206 ms</p>\n  \n  <p>Dot42, Robert's Code:<br>\n  Grand total time (5 runs): 1781 ms, with file reading total: 1999 ms</p>\n  \n  <p>Xamarin:<br>\n  Grand total time (5 runs): 1373 ms, with file reading total: 1505 ms</p>\n  \n  <p>Java:<br>\n  Grand total time (5 runs): 1841 ms, with file reading total: 2044 ms</p>\n  \n  <h2>ARM, Samsung Galaxy Note 2, power saving off, Android 4.1.1</h2>\n  \n  <p>Dot42, Greg's Code using StringBuilder.Replace() (as in Xamarin):<br>\n  Grand total time (5 runs): 10875 ms, with file reading total: 11280 ms</p>\n  \n  <p>Dot42, Greg's Code using String.Replace() (as in Java and Robert's code):<br>\n  Grand total time (5 runs): 9710 ms, with file reading total: 10097 ms</p>\n  \n  <p>Dot42, Robert's Code:<br>\n  Grand total time (5 runs): 6279 ms, with file reading total: 6622 ms</p>\n  \n  <p>Xamarin:<br>\n  Grand total time (5 runs): 6201 ms, with file reading total: 6476 ms</p>\n  \n  <p>Java:<br>\n  Grand total time (5 runs): 7141 ms, with file reading total: 7479 ms</p>\n</blockquote>\n\n<p>I still think that Dot42 has a long way to go. Having Java-like classes (e.g. ArrayList) and a good performance with them, would make porting code from Java to C# slightly easier. However, this is something I would not be likely to do a lot. I would rather want to use existing C# code (libraries etc.), which will use native C# classes (e.g. List), and that would perform slowly with the current dot42 code, and very well with Xamarin.</p>\n\n<p>Greg</p>\n", "tags": ["c#", "java", "android", "xamarin", "dot42"], "title": "Does anyone have benchmarks (code &amp; results) comparing performance of Android apps written in Xamarin C# and Java?", "answers": [{"body": "<p>Yeah, Xamarin's Mono virtual machine is more impressive than Google's Dalvik used in Android. I have tested it with HTC Flyer  and Acer Iconia Tab tablets to benchmark the C# port of Android through Mono against Java Dalvik, with the C# implementation of Android well and truly trouncing the Java-based Dalvik.</p>\n", "title": "Does anyone have benchmarks (code &amp; results) comparing performance of Android apps written in Xamarin C# and Java?", "tags": ["c#", "java", "android", "xamarin", "dot42"], "link": "http://stackoverflow.com/questions/17134522/does-anyone-have-benchmarks-code-results-comparing-performance-of-android-ap/17135026#17135026", "question_id": 17134522, "answer_id": 17135026}, {"body": "<p>We recently investigated using Xamarin for an app. We utilized the C# code we had already written for the Windows RT version of our app. Some specific details had to be rewritten for the Android version.</p>\n\n<p>What we discovered is that I/O in Xamarin C# is approximately 2x slower than Java. Our app is heavily I/O bound. We have not discovered the cause of this yet, but at the moment we are assuming that it is due to marshaling. While we do try to stay inside the Mono VM most of the time, we do not know how Mono actually accesses the disk.</p>\n\n<p>It is also telling that our C# code uses SQLite.NET (<a href=\"https://github.com/praeclarum/sqlite-net\">https://github.com/praeclarum/sqlite-net</a>). Identical fetches using the SQLite.NET code are also 2x slower than using Android's Java SQLite wrapper. After looking at the source code, it appears to bind directly to the C .dll, so I do not know why it's so much slower. One possibility is that marshaling strings from native to Java may be faster on Android than native to C# is on Xamarin.</p>\n", "title": "Does anyone have benchmarks (code &amp; results) comparing performance of Android apps written in Xamarin C# and Java?", "tags": ["c#", "java", "android", "xamarin", "dot42"], "link": "http://stackoverflow.com/questions/17134522/does-anyone-have-benchmarks-code-results-comparing-performance-of-android-ap/24064285#24064285", "question_id": 17134522, "answer_id": 24064285}, {"body": "<p><a href=\"http://magenic.com/Blog/PostId/67/mobile-development-platform-performance\">This is another more updated blog post I would like to share with you</a>. He compares Xamarin to native code and Cordova on both IOs and Android.</p>\n\n<p>In a nutshell, Xamarin performs sometimes better than native code. He tested the app size, load times, loading a list from Azure service and prime number computation.</p>\n\n<p>Enjoy!</p>\n", "title": "Does anyone have benchmarks (code &amp; results) comparing performance of Android apps written in Xamarin C# and Java?", "tags": ["c#", "java", "android", "xamarin", "dot42"], "link": "http://stackoverflow.com/questions/17134522/does-anyone-have-benchmarks-code-results-comparing-performance-of-android-ap/28715175#28715175", "question_id": 17134522, "answer_id": 28715175}, {"body": "<pre><code>I came across this interesting post\n</code></pre>\n\n<p><a href=\"https://medium.com/@harrycheung/mobile-app-performance-redux-e512be94f976#.kfbauchtz\">https://medium.com/@harrycheung/mobile-app-performance-redux-e512be94f976#.kfbauchtz</a></p>\n\n<p><a href=\"http://i.stack.imgur.com/pqyIt.png\"><img src=\"http://i.stack.imgur.com/pqyIt.png\" alt=\"Android App Performance\"></a></p>\n\n<p><a href=\"http://i.stack.imgur.com/7fk35.png\"><img src=\"http://i.stack.imgur.com/7fk35.png\" alt=\"iOS App Performance\"></a></p>\n\n<p>Hope this information helps.</p>\n", "title": "Does anyone have benchmarks (code &amp; results) comparing performance of Android apps written in Xamarin C# and Java?", "tags": ["c#", "java", "android", "xamarin", "dot42"], "link": "http://stackoverflow.com/questions/17134522/does-anyone-have-benchmarks-code-results-comparing-performance-of-android-ap/36789405#36789405", "question_id": 17134522, "answer_id": 36789405}], "creation_date": 1371394356, "score": 331, "link": "http://stackoverflow.com/questions/17134522/does-anyone-have-benchmarks-code-results-comparing-performance-of-android-ap", "question_id": 17134522}, {"body": "<p>I downloaded Android Studio and attempted to launch the program.</p>\n\n<p>This is running on Windows 7 64-bit with Java 1.7. During the installation my Java 1.7 is detected, and the rest of the installation goes through just fine. However, when attempting to launch the application from the desktop icon, nothing happens. Looking at the task manager, a new process from the CMD is loaded. This is because it's attempting to run the batch file <code>studio.bat</code>.</p>\n\n<p>When I execute via CMD, I get the following error:</p>\n\n<blockquote>\n  <p>ERROR: cannot start Android Studio. No JDK found. Please validate\n  either ANDROID_STUDIO_JDK, or JDK_HOME or JAVA_HOME points to valid\n  JDK installation. ECHO is off. Press any key to continue . . .</p>\n</blockquote>\n\n<p>I've attempted to open the <code>idea</code> properties file to see if there was something I could configure for this <code>ANDROID_STUDIO_JDK</code> or something like that. However, I found nothing. I hope some of you can let me know if you were able to install this or if you are having problems as well.</p>\n", "tags": ["android", "installation", "java", "android-studio"], "title": "Android Studio installation on Windows 7 fails, no JDK found", "answers": [{"body": "<p>Adding a system variable <code>JDK_HOME</code> with value <code>c:\\Program Files\\Java\\jdk1.7.0_21\\</code> worked for me. The latest Java release can be downloaded <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html\">here</a>.</p>\n\n<p>Additionally, make sure the variable <code>JAVA_HOME</code> is also set with the above location. <a href=\"http://hints.steptoinstall.com/how-to-set-java_home-environment-variable-in-windows-7-8-for-java.html\">Steps are here</a>. <a href=\"https://www.youtube.com/watch?v=GR1mUi5HSBU\">For Video</a></p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/16574523#16574523", "question_id": 16574189, "answer_id": 16574523}, {"body": "<p>OK, I figured out how fix this nasty bug.</p>\n\n<h2>Before you start</h2>\n\n<p>Go to your Android Studio installation folder and locate the bin folder. Inside the bin folder, you will find <strong>studio.bat</strong>. Execute the file, and it'll show the error. If it is about the Java path then follow the tip 1.</p>\n\n<h2>Tip 1</h2>\n\n<p>When you set the path \"JAVA_HOME\", etc., make sure not to include \"bin\" at the end of the path. This solved the issue for me.</p>\n\n<p><code>JAVA_HOME</code> => <code>C:\\Program Files\\Java\\jdk1.7.0_21</code></p>\n\n<p><code>path</code> => <code>C:\\Program Files\\Java\\jdk1.7.0_21\\bin</code></p>\n\n<p>It works fine with JDK 1.7 (I tried with 32 bit).</p>\n\n<p>If you do so, you can see the initial screen as below.</p>\n\n<p><img src=\"http://i.stack.imgur.com/pAuaV.png\" alt=\"Enter image description here\"></p>\n\n<h2>Tip 2</h2>\n\n<p>Are you getting the below error message?</p>\n\n<blockquote>\n  <p>Your Android SDK is out of date or is missing templates. Please ensure\n  you are using SDK version 22 or later.</p>\n</blockquote>\n\n<p>This error probably occurs, because you have reference to your older SDK (that you downloaded with <a href=\"http://en.wikipedia.org/wiki/Eclipse_%28software%29\">Eclipse</a>) in your path variable. Go to Environment variables and remove any reference to the old SDK folder and point it to new SDK folder that is found inside the Android Studio installation folder.</p>\n\n<p>Save and restart Studio, things should work as expected now. </p>\n\n<h2>Tip 3</h2>\n\n<p>If you hate messing around with the path variable as given above by removing old references, simply follow the following steps to refer to new SDK path that comes with Studio.</p>\n\n<p><em>Project Defaults</em> -> <em>Project Structure</em> -> Click \"New\" -> Select \"Android SDK\" -> Select the SDK folder inside the studio installation.</p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/16574700#16574700", "question_id": 16574189, "answer_id": 16574700}, {"body": "<p>If you are getting message \"Your Android SDK is out of date\u2026\" \u2014 click \"<strong>Configure</strong>\" \u2014> \"<strong>Project Defaults</strong>\" \u2014> \"<strong>Project Structure</strong>\", pick \"<strong>SDKs</strong>\" \u2014> \"<strong>Android SDK</strong>\" and in a \"<strong>Build Target</strong>\" choose \"<strong>Android 4.2.2</strong>\". Click \"OK\". Now it should work fine.</p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/16576215#16576215", "question_id": 16574189, "answer_id": 16576215}, {"body": "<p>I had the same issue. I got resolved setting up correctly the environment variables in windows, for instance:</p>\n\n<pre><code>JAVA_HOME -&gt; C:\\Program Files\\Java\\jdk1.6.0_45\npath -&gt; C:\\Program Files\\Java\\jdk1.6.0_45\\bin\n</code></pre>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/16578403#16578403", "question_id": 16574189, "answer_id": 16578403}, {"body": "<p>My issue was caused because I have an <code>&amp;</code> character in my Windows user name, so when installed in the default path I was getting the following error after running <code>bin/studio.bat</code></p>\n\n<pre><code>                                               |\n                                               v notice broken path\nThe system cannot find the file C:\\Users\\Daniel \\studio64.exe.vmoptions.\nException in thread \"main\" java.lang.NoClassDefFoundError: com/intellij/idea/Main\nCaused by: java.lang.ClassNotFoundException: com.intellij.idea.Main\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)\nCould not find the main class: com.intellij.idea.Main.  Program will exit.\n</code></pre>\n\n<p>So I uninstalled and reinstalled it to program files and it launches fine now.</p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/16582714#16582714", "question_id": 16574189, "answer_id": 16582714}, {"body": "<p>Install the latest <a href=\"http://en.wikipedia.org/wiki/Java_Development_Kit\" rel=\"nofollow\">JDK</a> in your system from <em><a href=\"http://docs.oracle.com/javase/7/docs/webnotes/install/\" rel=\"nofollow\">JDK 7 and JRE 7 Installation Guide</a></em>. </p>\n\n<pre><code>JAVA_HOME -&gt; C:\\Program Files\\Java\\jdk1.7.0_4\npath -&gt; C:\\Program Files\\Java\\jdk1.7.0_4\\bin\n</code></pre>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/16584291#16584291", "question_id": 16574189, "answer_id": 16584291}, {"body": "<p>I got the problem that the installation stopped by \"<strong>$(^name) has stopped working</strong>\" error. I have installed Java SE Development kit already, also set both SDK_HOME and JAVA_HOME that point to \"C:\\Program Files\\Java\\jdk1.7.0_21\\\" </p>\n\n<p>My laptop installed with Windows 7 64 bits</p>\n\n<p>So I tried to install the 32 bit version of Java SE Developement kit, set my JAVA_HOME to \"C:\\Program Files (x86)\\Java\\jdk1.7.0_21\", restart and the installation worked OK.</p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/16589246#16589246", "question_id": 16574189, "answer_id": 16589246}, {"body": "<p>In my experience, I was unable (even after adding JDK_HOME) to launch Studio via either the shortcut or studio.exe itself.  I had to first run bin/studio.bat (mentioned in the original question).  After the first successful launch, I'm able to start it by the shortcut.</p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/16591024#16591024", "question_id": 16574189, "answer_id": 16591024}, {"body": "<p>If you have a 64 bit windows OS, pointing the JAVA_HOME system variable to</p>\n\n<pre><code>C:\\Program Files (x86)\\Java\\jdk1.7.0_21\n</code></pre>\n\n<p>Will work when </p>\n\n<pre><code>C:\\Program Files\\Java\\jdk1.7.0_21\n</code></pre>\n\n<p>fails to work. </p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/16613950#16613950", "question_id": 16574189, "answer_id": 16613950}, {"body": "<p>I couldn't get this to work no matter which environment variables I set. So I simply put a copy of the JDK into my Android Studio installation folder.</p>\n\n<ol>\n<li><p>Copy the contents of the JDK installation (for example, <code>C:\\Program Files (x86)\\Java\\jdk1.7.0_21</code>)</p></li>\n<li><p>Paste them into the installation directory of the Android Studio (for example, <code>C:\\Program Files (x86)\\Android\\android-studio</code>)</p></li>\n</ol>\n\n<p>I somewhat assumed that the issue was caused by having the x64 version of the JDK installed. But what was especially confusing was the fact that I could start Android Studio just fine when I started the <code>studio.bat</code> as an Administrator (even though the environment variables were set for my personal user account).</p>\n\n<p><code>studio.bat</code> will look for several valid options when determining which JDK to use.</p>\n\n<blockquote>\n  <p><code>:: Locate a JDK installation directory which will be used to run the IDE.</code>\n  <code>:: Try (in order): ANDROID_STUDIO_JDK, ..\\jre, JDK_HOME, JAVA_HOME.</code></p>\n</blockquote>\n\n<p>As explained above, I picked the <code>..\\jre</code> option.</p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/16618899#16618899", "question_id": 16574189, "answer_id": 16618899}, {"body": "<p>Sometimes you can resolve this type of issue by setting environment variables <strong>so the process looks for the JDK in the right spot</strong>.</p>\n\n<p>Another approach is to <strong>figure out where the process is looking, then put your JDK there.</strong></p>\n\n<p>I've had lots of success using <a href=\"http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx\" rel=\"nofollow\" title=\"Download Process Monitor from Microsoft TechNet\">Process Monitor</a> from Sysinternals:</p>\n\n<ol>\n<li>Start -> Run -> <code>procmon</code></li>\n<li>Go to the <code>Filter</code> menu, then select <code>Filter...</code></li>\n<li>Set <code>Event Class</code> <code>is</code> <code>File System</code> then <code>Include</code></li>\n<li><code>Add</code>, then <code>OK</code></li>\n</ol>\n\n<p>This will filter down to all the file system operations taking place on your machine.</p>\n\n<p>You could try filtering based on the result of the File System operation:</p>\n\n<ul>\n<li>Right click on the <code>Result</code> column, then <code>Exclude 'SUCCESS'</code></li>\n</ul>\n\n<p>You can also quite easily filter based on the process name, either from the <code>Filter...</code> menu option or by right clicking on the <code>Process Name</code> column and selecting <code>Include 'process.exe'</code>.</p>\n\n<p>Once you find the file system operation that's failing, the <code>Path</code> column will tell you where to put your JDK.</p>\n\n<p>I've found this to be very empowering. Especially compared to the frustrating process of changing environment variables by trial and error.</p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/16678978#16678978", "question_id": 16574189, "answer_id": 16678978}, {"body": "<p>Today I found another situation when this problem occures - when you have several JDK, defined in JAVA_PATH. I have:</p>\n\n<pre><code>JAVA_HOME = C:\\JAVA\\JDK\\jdk1.6.0_38;C:\\JAVA\\JDK\\jdk1.7.0_10\n</code></pre>\n\n<p>So I received this problem with Android Studio setup</p>\n\n<p>But when I've removed one of JDK - problem has been solved:</p>\n\n<pre><code>JAVA_HOME = C:\\JAVA\\JDK\\jdk1.7.0_10\n</code></pre>\n\n<p>Installation wisard found my jdk and i had a nice night to study studio. </p>\n\n<p>But unfortunatelly even installed studio doesn't work with several jdk.\nDoes anybody know how to fix it?</p>\n\n<p>I hope I've helped someone</p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/16730764#16730764", "question_id": 16574189, "answer_id": 16730764}, {"body": "<p>You need 1.7 JDK installed on your system. Add a system variable with:</p>\n\n<ul>\n<li><p>name: ANDROID_STUDIO_JDK</p></li>\n<li><p>path: your <a href=\"http://en.wikipedia.org/wiki/Java_Development_Kit\" rel=\"nofollow\">JDK</a> path (for example, <code>C:\\Program Files\\Java\\jdk1.7.0_21</code>)</p>\n\n<ul>\n<li>See more at <em><a href=\"http://www.codecows.com/2013/05/fix-android-studio-installation-issues.html#.dpuf\" rel=\"nofollow\">FIX: Android Studio - Installation Issues on Windows 7 | ERROR: cannot start Android Studio. No JDK found.</a></em></li>\n</ul></li>\n</ul>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/16731830#16731830", "question_id": 16574189, "answer_id": 16731830}, {"body": "<p>This problem has been fixed in Android Studio v0.1.1, so just update Android Studio and it should work.</p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/16802834#16802834", "question_id": 16574189, "answer_id": 16802834}, {"body": "<p>TRY TO INSTALL 32BIT JDK</p>\n\n<p>if you have jdk installed and had set up the System Varibles such as JAVA_HOME or JDK_HOME\nand tried click back and then next ,you might have installed the 64bit JDK,just download the 32bit jdk and install it.</p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/17632047#17632047", "question_id": 16574189, "answer_id": 17632047}, {"body": "<p>With the last update of Androd Studio I have two versions of the IDE's launcher</p>\n\n<p>One is called <strong>studio.exe</strong> and the other <strong>studio64.exe</strong> they are both on:</p>\n\n<pre><code>C:\\Users\\myUserName\\AppData\\Local\\Android\\android-studio\\bin\n</code></pre>\n\n<p>You have to launch the one that matches your Java version 64 or 32 bit</p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/18912136#18912136", "question_id": 16574189, "answer_id": 18912136}, {"body": "<p>I downloaded the latest jdk version</p>\n\n<p>JAVA_HOME to C:\\Program Files\\Java\\jdk1.8.0_11\\bin\nSet the PATH to C:\\Program Files\\Java\\jdk1.8.0_11\\bin</p>\n\n<p>I restarted the STUDIO and it worked.</p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/24916849#24916849", "question_id": 16574189, "answer_id": 24916849}, {"body": "<p>The path for latest JDK. It worked very well.</p>\n\n<p><img src=\"http://i.stack.imgur.com/ZMnp8.png\" alt=\"enter image description here\"></p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/25704470#25704470", "question_id": 16574189, "answer_id": 25704470}, {"body": "<p>I had the same issue. I am having 64 bit windows 8. I downloaded the android studio which worked on 32 bit machine but not on my 64 bit.</p>\n\n<p>The solution for me was pretty simple. I navigated to </p>\n\n<blockquote>\n  <p>C:\\Program Files (x86)\\Android\\android-studio\\bin</p>\n</blockquote>\n\n<p>there I saw 2 exe files <strong>studio.exe</strong> and <strong>studio64.exe</strong>. Normally in my start menu was pointing to studio64.exe which alwasys kept on giving me \"The enviournmental variable JDK_HOME does not point to valid JVM\". So then I clicked <strong>studio.exe</strong> and it worked :)</p>\n\n<p>I hope this may help someone facing same problem like me</p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/25947863#25947863", "question_id": 16574189, "answer_id": 25947863}, {"body": "<p>On Windows 10, restarting the installer and running as admin worked for me.</p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/28079278#28079278", "question_id": 16574189, "answer_id": 28079278}, {"body": "<p><strong>MAKE SURE YOU RESTART ANDROID STUDIO</strong></p>\n\n<p>Even though i should know better and swear i did, make sure you restart studio after making these changes as it clearly does not check them on every build (which to me makes sense that system/user variables should only be read once on startup)</p>\n\n<p>Anyway, yea... Make sure you restart after you make these changes..</p>\n\n<p><strong>Path</strong> = to the bin folder in the jdk folder (path already exists)</p>\n\n<p><strong>JAVA_HOME</strong> = to the jdk folder</p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/28429899#28429899", "question_id": 16574189, "answer_id": 28429899}, {"body": "<p>I've <code>tried</code> so many of the answers here but <code>none of them works</code>, so I decided to <code>mix some of the answers</code> here and I am <strong>successful</strong>!</p>\n\n<p><img src=\"http://i.stack.imgur.com/nT4xSm.png\" alt=\"Successtully running android\"></p>\n\n<p><strong>Step 1:</strong> Go to the system properties by right-clicking on <strong>My Computer</strong> or by pressing windows button on typing <strong><code>This PC</code></strong> and right clicking on it and selecting <strong><code>Properties</code></strong>.</p>\n\n<p><img src=\"http://i.stack.imgur.com/GhIwIm.png\" alt=\"enter image description here\"></p>\n\n<p><strong>Step 2:</strong> Click the <code>advanced system settings</code> or <strong><code>Environment Variables</code></strong></p>\n\n<p><strong>Step 3:</strong> Take note that there are 2 different variable. What you need to create is <code>system variables not user variables</code>, when you clicked new type the following</p>\n\n<p>Variable name: <code>JAVA_HOME</code></p>\n\n<p>Variable value: <code>C:\\Program Files\\Java\\jdk1.8.0_25\\</code> (Note: Please check if the path is right, sometimes it is <code>C:\\Program Files (x86)\\Java\\jdk1.8.0_25</code>)</p>\n\n<p><strong>Step 4:</strong> Run the android studio, no need to restart.</p>\n\n<p><strong>Note:</strong></p>\n\n<p>*<code>C:\\Program Files\\Java\\jdk1.8.0_25\\</code> depends entirely on the installation path of your <code>JDK</code> not <code>JRE</code> so don't be confused if you see something like the picture below. Just enter the location of your <code>jdk</code>, in my case it is <code>C:\\Program Files\\Java\\jdk1.8.0_25\\</code>.</p>\n\n<p>*<code>Do not include the bin folder</code> when you enter the Variable value.</p>\n\n<p><img src=\"http://i.stack.imgur.com/mOszcm.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/rGJQ2m.png\" alt=\"enter image description here\"></p>\n\n<p><strong>Edit:</strong> <strong>For Windows 8 and 10 Users:</strong>  Try to run <code>C:\\Program Files\\Android\\Android Studio\\bin\\studio.exe</code> instead of <code>C:\\Program Files\\Android\\Android Studio\\binstudio64.exe</code></p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/28512126#28512126", "question_id": 16574189, "answer_id": 28512126}, {"body": "<p>To complete this stack of possible solutions: For me the problem was, that I did not execute the Android-Studio-Setup as administrator. Running it as administrator then made me able to install Android-Studio.</p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/32671465#32671465", "question_id": 16574189, "answer_id": 32671465}, {"body": "<p><strong>Windows 64 bit, JDK 64 bit (Solution that worked for me)</strong>\nTried all the above solutions, None of them worked, I have been trying to solve it from past few days and now i done it successfully.For me the problem was, when i first installed Android Studio my JDK version was 1.7, then after installing i updated the JDK to 1.8,then i removed old JDK folder and everything was messed up, even uninstalling and reinstalling android studio randomly didn't solved the issue.</p>\n\n<p><strong>Below is the solution that worked for me</strong></p>\n\n<p>1) Uninstall Android Studio.</p>\n\n<p>2) clean temp files and android studio C:\\Users\\Username.AndroidStudio1.5</p>\n\n<p>3) Uninstall JDK.</p>\n\n<p>4) Now without JDK try to install Android Studio and now it will show \nmessage that it cant find any JDK. Stop installation</p>\n\n<p>5) Install JDK 1.7 or 1.8 (Set JAVA_HOME,JDK_HOME,path Environment variables as explained by everybody above)</p>\n\n<p>6) Install Android Studio.</p>\n\n<p>7) Done. Enjoy and happy coding. </p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/34096717#34096717", "question_id": 16574189, "answer_id": 34096717}, {"body": "<ol>\n<li>Add JAVA_HOME and JDK_HOME system environment variables. </li>\n<li>Right-click\nandroid studio (the 64 version if that's your OS and JDK) and go to\ncompatibility tab and set \"Run as administrator\" to true. </li>\n<li>Run android studio and high-five me virtually when it works.</li>\n<li>If that fails, try \"where java\" in cmd.exe. If it lists c:\\system32\\java.exe first, then rename the file and try again.</li>\n</ol>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/34802963#34802963", "question_id": 16574189, "answer_id": 34802963}, {"body": "<p>For me, the problem was that I had changed the GC vm arg to <code>-XX:+UseParallelGC</code> in the <code>C:\\Users\\&lt;username&gt;\\.AndroidStudio2.1\\studio64.exe.vmoptions</code> file.  That's what I use in Eclipse and I was trying various things to get AndroidStudio half way as efficent as Eclipse.  I restored the GC to <code>-XX:+UseConcMarkSweepGC</code>.</p>\n", "title": "Android Studio installation on Windows 7 fails, no JDK found", "tags": ["android", "installation", "java", "android-studio"], "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found/36963394#36963394", "question_id": 16574189, "answer_id": 36963394}], "creation_date": 1368649024, "score": 306, "link": "http://stackoverflow.com/questions/16574189/android-studio-installation-on-windows-7-fails-no-jdk-found", "question_id": 16574189}, {"body": "<p>I am trying to install the <a href=\"http://en.wikipedia.org/wiki/Java_Development_Kit\">JDK</a> on <a href=\"http://en.wikipedia.org/wiki/Ubuntu_%28operating_system%29\">Ubuntu</a> and Linux, but I am unable to install it.</p>\n\n<p>What are the steps to install it on Ubuntu?</p>\n", "tags": ["java", "ubuntu"], "title": "How to install JDK on Ubuntu (Linux)?", "answers": [{"body": "<p>Have a look at <a href=\"https://en.wikipedia.org/wiki/OpenJDK\" rel=\"nofollow\">OpenJDK</a>. It is the standard <a href=\"http://en.wikipedia.org/wiki/Java_virtual_machine\" rel=\"nofollow\">JVM</a> implementation on Linux.</p>\n", "title": "How to install JDK on Ubuntu (Linux)?", "tags": ["java", "ubuntu"], "link": "http://stackoverflow.com/questions/14788345/how-to-install-jdk-on-ubuntu-linux/14788372#14788372", "question_id": 14788345, "answer_id": 14788372}, {"body": "<p><a href=\"https://wiki.ubuntu.com/LucidLynx/ReleaseNotes#Sun%20Java%20moved%20to%20the%20Partner%20repository\" rel=\"nofollow\">Wiki from Ubuntu website:</a></p>\n\n<p>For <strong>Ubuntu 10.04 LTS</strong>, the sun-java6 packages have been dropped from the Multiverse section of the Ubuntu archive. It is recommended that you use openjdk-6 instead.</p>\n\n<p><em>If you can not switch from the proprietary Sun JDK/JRE to OpenJDK, you can install sun-java6 packages from the Canonical Partner Repository. You can configure your system to use this repository via command-line:</em></p>\n\n<pre><code> sudo add-apt-repository \"deb http://archive.canonical.com/ lucid partner\"\n sudo apt-get update   \n sudo apt-get install sun-java6-jre sun-java6-plugin\n sudo update-alternatives --config java\n</code></pre>\n\n<p>For <strong>Ubuntu 10.10</strong>, the sun-java6 packages have been dropped from the Multiverse section of the Ubuntu archive. It is recommended that you use openjdk-6 instead.</p>\n\n<p><em>If you can not switch from the proprietary Sun JDK/JRE to OpenJDK, you can install sun-java6 packages from the Canonical Partner Repository. You can configure your system to use this repository via command-line:</em></p>\n\n<pre><code> sudo add-apt-repository \"deb http://archive.canonical.com/ maverick partner\"\n sudo apt-get update   \n sudo apt-get install sun-java6-jre sun-java6-plugin\n sudo update-alternatives --config java\n</code></pre>\n", "title": "How to install JDK on Ubuntu (Linux)?", "tags": ["java", "ubuntu"], "link": "http://stackoverflow.com/questions/14788345/how-to-install-jdk-on-ubuntu-linux/14788374#14788374", "question_id": 14788345, "answer_id": 14788374}, {"body": "<p>Referring to <em><a href=\"http://askubuntu.com/tour\">Ask Ubuntu</a></em> question <em><a href=\"http://askubuntu.com/questions/175514/how-to-set-java-home-for-openjdk\">How to set JAVA_HOME for OpenJDK?</a></em>,</p>\n\n<p>How to install \"Open JDK\" (Java developement kit) in Ubuntu (Linux)?</p>\n\n<ol>\n<li><p>Open Applicaction -> Accessories -> Terminal</p></li>\n<li><p>Type commandline as below...</p>\n\n<pre><code>sudo apt-get install openjdk-7-jdk\n</code></pre></li>\n<li><p>Type commandline as below...</p>\n\n<pre><code>apt-cache search jdk\n</code></pre>\n\n<p>(Note: openjdk-7-jdk is symbolically used here. You can choose the JDK version as per your requirement.)</p></li>\n<li><p>For \"JAVA_HOME\" (Environment Variable) type command as shown below, in \"Terminal\" using your installation path...</p>\n\n<pre><code>export JAVA_HOME=/usr/lib/jvm/java-7-openjdk\n</code></pre>\n\n<p>(Note: \"/usr/lib/jvm/java-7-openjdk\" is symbolically used here just for demostration. You should use your path as per your installation.)</p></li>\n<li><p>For \"PATH\" (Environment Variable) type command as shown below, in \"Terminal\" using your installation path...</p>\n\n<pre><code>export PATH=$PATH:/usr/lib/jvm/java-7-openjdk/bin\n</code></pre>\n\n<p>(Note: \"/usr/lib/jvm/java-7-openjdk\" is symbolically used here just for demostration. You should use your path as per your installation.)</p></li>\n<li><p>Check for \"open jdk\" installation, just type command in \"Terminal\" as shown below<br /></p>\n\n<pre><code>javac -version\n</code></pre></li>\n</ol>\n", "title": "How to install JDK on Ubuntu (Linux)?", "tags": ["java", "ubuntu"], "link": "http://stackoverflow.com/questions/14788345/how-to-install-jdk-on-ubuntu-linux/14788468#14788468", "question_id": 14788345, "answer_id": 14788468}, {"body": "<p>You can install Oracle's JDK 1.7 fairly easily too; as an example this is how to install JDK 1.7.0_13;</p>\n\n<ul>\n<li>Download the JDK <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html\">from Oracle's site</a>. The download to the newest version is always linked from <a href=\"http://java.oracle.com\">http://java.oracle.com</a>.</li>\n</ul>\n\n<p>As root, do;</p>\n\n<pre><code>&gt; cd /usr/local\n&gt; tar xzf &lt;the file you just downloaded&gt;\n</code></pre>\n\n<p>As your normal user, add or change these two lines in your ~/.profile to point to the installation;</p>\n\n<pre><code>export JAVA_HOME=/usr/local/jdk1.7.0_13\nexport PATH=$PATH:$JAVA_HOME/bin\n</code></pre>\n\n<p>If it's an update, you may also want to remove the old java installation directory in <code>/usr/local</code>.</p>\n\n<p>Log out and in again (or do <code>. ~/.profile</code>), and everything should just work.</p>\n\n<p>The downside with Oracle's JDK is that it won't update with the rest of your system like OpenJDK will, so I'd mostly consider it if you're running programs that require it.</p>\n", "title": "How to install JDK on Ubuntu (Linux)?", "tags": ["java", "ubuntu"], "link": "http://stackoverflow.com/questions/14788345/how-to-install-jdk-on-ubuntu-linux/14788889#14788889", "question_id": 14788345, "answer_id": 14788889}, {"body": "<p>sun-java6-jdk is a virtual package provided by oracle-java8-installer or oracle-java7-installer or oracle-java7-installer.</p>\n\n<pre><code>sudo apt-get install oracle-java8-installer  \n</code></pre>\n\n<p>will give you sun-java6-jdk.</p>\n", "title": "How to install JDK on Ubuntu (Linux)?", "tags": ["java", "ubuntu"], "link": "http://stackoverflow.com/questions/14788345/how-to-install-jdk-on-ubuntu-linux/18783977#18783977", "question_id": 14788345, "answer_id": 18783977}, {"body": "<p>In case you have already downloaded the ZIP file follow these steps.</p>\n\n<p>Run the following command to unzip your file.</p>\n\n<pre><code>tar -xvf ~/Downloads/jdk-7u3-linux-i586.tar.gz\nsudo mkdir -p /usr/lib/jvm/jdk1.7.0\nsudo mv jdk1.7.0_03/* /usr/lib/jvm/jdk1.7.0/\nsudo update-alternatives --install \"/usr/bin/java\" \"java\" \"/usr/lib/jvm/jdk1.7.0/bin/java\" 1\nsudo update-alternatives --install \"/usr/bin/javac\" \"javac\" \"/usr/lib/jvm/jdk1.7.0/bin/javac\" 1\nsudo update-alternatives --install \"/usr/bin/javaws\" \"javaws\" \"/usr/lib/jvm/jdk1.7.0/bin/javaws\" 1\n</code></pre>\n\n<p>After installation is complete, set environment variables as follows.</p>\n\n<p>Edit the system path in file <code>/etc/profile</code>:</p>\n\n<pre><code>sudo gedit /etc/profile\n</code></pre>\n\n<p>Add the following lines at the end.</p>\n\n<pre><code>JAVA_HOME=/usr/lib/jvm/jdk1.7.0\nPATH=$PATH:$HOME/bin:$JAVA_HOME/bin\nexport JAVA_HOME\nexport JRE_HOME\nexport PATH\n</code></pre>\n\n<p>Source: <a href=\"http://javaandme.com/\">http://javaandme.com/</a></p>\n", "title": "How to install JDK on Ubuntu (Linux)?", "tags": ["java", "ubuntu"], "link": "http://stackoverflow.com/questions/14788345/how-to-install-jdk-on-ubuntu-linux/18972614#18972614", "question_id": 14788345, "answer_id": 18972614}, {"body": "<p>I recommend JavaPackage:</p>\n\n<p><a href=\"https://wiki.debian.org/JavaPackage\" rel=\"nofollow\">https://wiki.debian.org/JavaPackage</a></p>\n\n<p>It's very simple, you just need to follow the instructions to create a .deb package from the oracle tar.gz file.</p>\n", "title": "How to install JDK on Ubuntu (Linux)?", "tags": ["java", "ubuntu"], "link": "http://stackoverflow.com/questions/14788345/how-to-install-jdk-on-ubuntu-linux/19140818#19140818", "question_id": 14788345, "answer_id": 19140818}, {"body": "<pre><code>sudo add-apt-repository ppa:webupd8team/java\nsudo apt-get update\nsudo apt-get install oracle-java7-installer\n</code></pre>\n", "title": "How to install JDK on Ubuntu (Linux)?", "tags": ["java", "ubuntu"], "link": "http://stackoverflow.com/questions/14788345/how-to-install-jdk-on-ubuntu-linux/20883967#20883967", "question_id": 14788345, "answer_id": 20883967}, {"body": "<p>Simply run:</p>\n\n<pre><code>sudo apt-get install default-jdk\n</code></pre>\n", "title": "How to install JDK on Ubuntu (Linux)?", "tags": ["java", "ubuntu"], "link": "http://stackoverflow.com/questions/14788345/how-to-install-jdk-on-ubuntu-linux/27606263#27606263", "question_id": 14788345, "answer_id": 27606263}, {"body": "<p>OpenJDK is OK for the most cases, but Oracle JDK can be required for some bank client applications (my case) - I can't use OpenJDK.  </p>\n\n<p>I'm surprised that I don't see any answer with default method (repository without external PPAs) in <strong>Ubuntu 12.10+</strong> for Oracle's JDK - will try to describe it.  </p>\n\n<ul>\n<li>install <a href=\"https://wiki.debian.org/JavaPackage\">JavaPackage</a>:<br>\n<code>sudo apt-get install java-package</code></li>\n<li>download Oracle JDK from <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html\">Oracle downloads page</a></li>\n<li>make debian package from downloaded <code>.tar.gz</code> archive:<br>\n<code>make-jpkg jdk-YOUR_VERSION-linux-PLATFORM.tar.gz</code><br>\nthis command will produce <code>.deb</code> package</li>\n<li>install package with your favourite way (for example, <code>sudo dpkg -i oracle-java8-jdk_8u40_amd64.deb</code>)  </li>\n</ul>\n\n<p>It's officially supported way from debian developers for installing Oracle JDK, and I suppose it's very simple.</p>\n", "title": "How to install JDK on Ubuntu (Linux)?", "tags": ["java", "ubuntu"], "link": "http://stackoverflow.com/questions/14788345/how-to-install-jdk-on-ubuntu-linux/28863828#28863828", "question_id": 14788345, "answer_id": 28863828}, {"body": "<p>If you want to install the latest JDK 1.8, use the webupd8team PPA.\nAdd the repository in your system:</p>\n\n<pre><code>sudo add-apt-repository ppa:webupd8team/java\nsudo apt-get update\n</code></pre>\n\n<p>You can now install Oracle Java 8 using the following command:</p>\n\n<pre><code>sudo apt-get install oracle-java8-installer\n</code></pre>\n\n<p>This ppa repository also provides a package to set environment variables automatically. Just type :</p>\n\n<pre><code>sudo apt-get install oracle-java8-set-default\n</code></pre>\n\n<p>Hope this will help!</p>\n", "title": "How to install JDK on Ubuntu (Linux)?", "tags": ["java", "ubuntu"], "link": "http://stackoverflow.com/questions/14788345/how-to-install-jdk-on-ubuntu-linux/29106006#29106006", "question_id": 14788345, "answer_id": 29106006}, {"body": "<p>you can install via apt-get:</p>\n\n<pre><code>sudo add-apt-repository ppa:webupd8team/java\nsudo apt-get update\nsudo apt-get install oracle-java9-installer\n</code></pre>\n\n<p>also via manually</p>\n\n<pre><code>su -\necho \"deb http://ppa.launchpad.net/webupd8team/java/ubuntu trusty main\" | tee /etc/apt/sources.list.d/webupd8team-java.list\necho \"deb-src http://ppa.launchpad.net/webupd8team/java/ubuntu trusty main\" | tee -a /etc/apt/sources.list.d/webupd8team-java.list\napt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys EEA14886\napt-get update\napt-get install oracle-java9-installer\nexit\n</code></pre>\n\n<p>after do not forget check version</p>\n\n<pre><code>java -version\n</code></pre>\n", "title": "How to install JDK on Ubuntu (Linux)?", "tags": ["java", "ubuntu"], "link": "http://stackoverflow.com/questions/14788345/how-to-install-jdk-on-ubuntu-linux/33798592#33798592", "question_id": 14788345, "answer_id": 33798592}, {"body": "<p><strong>Using a PPA</strong></p>\n\n<p>You can use <a href=\"https://launchpad.net/~webupd8team/+archive/ubuntu/java\">WebUpd8 PPA</a> (this will download the required files from Oracle and install JDK 8):</p>\n\n<pre><code>sudo apt-add-repository ppa:webupd8team/java\nsudo apt-get update\nsudo apt-get install oracle-java8-installer\n</code></pre>\n\n<p><a href=\"http://askubuntu.com/questions/35629/are-ppas-safe-to-add-to-my-system-and-what-are-some-red-flags-to-watch-out-fo\">Are PPA's safe to add to my system and what are some \u201cred flags\u201d to watch out for?</a></p>\n\n<p>Also ensure your JAVA_HOME variable has been set to:</p>\n\n<pre><code>/usr/lib/jvm/java-8-oracle\n</code></pre>\n\n<p><strong>Manual install</strong></p>\n\n<p>The tar.gz provided by Oracle don't have an actual installation process. You just extract those files to a location you want and add them to your path. So the process is the following:</p>\n\n<p>Download a <code>.tar.gz</code> from <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\">Oracle</a> (here I will be using jdk-8u20-linux-x64.tar.gz);\nExtract it to somewhere;</p>\n\n<p>Move the extracted folder to <code>/usr/lib/jvm</code>. This is not required but it is the place where Java runtime software is installed</p>\n\n<pre><code>sudo mv /path/to/jdk1.8.0_20 /usr/lib/jvm/oracle_jdk8\n</code></pre>\n\n<p>Create a file <code>/etc/profile.d/oraclejdk.sh</code> with the following content (adapt the paths to reflect the path where you stored your JDK):</p>\n\n<pre><code>    export J2SDKDIR=/usr/lib/jvm/oracle_jdk8\n    export J2REDIR=/usr/lib/jvm/oracle_jdk8/jre\n    export PATH=$PATH:/usr/lib/jvm/oracle_jdk8/bin:/usr/lib/jvm/oracle_jdk8/db/bin:/usr/lib/jvm/oracle_jdk8/jre/bin\n    export JAVA_HOME=/usr/lib/jvm/oracle_jdk8\n    export DERBY_HOME=/usr/lib/jvm/oracle_jdk8/db\n</code></pre>\n\n<p>Done! Those paths will only be recognized after you logout or restart, so if you want to use them right away run <code>source /etc/profile.d/oraclejdk.sh</code>.</p>\n", "title": "How to install JDK on Ubuntu (Linux)?", "tags": ["java", "ubuntu"], "link": "http://stackoverflow.com/questions/14788345/how-to-install-jdk-on-ubuntu-linux/34072322#34072322", "question_id": 14788345, "answer_id": 34072322}, {"body": "<p>If you want to install Oracle JDK, you can <a href=\"https://github.com/AdamScheller/UbuntuJavaInstaller\" rel=\"nofollow\">use this automated script</a> that does all the work for you.</p>\n\n<p>There are detailed instructions how to use it <a href=\"http://adamscheller.com/linux/how-to-install-java-on-ubuntu/\" rel=\"nofollow\">on the author's blog</a>.</p>\n", "title": "How to install JDK on Ubuntu (Linux)?", "tags": ["java", "ubuntu"], "link": "http://stackoverflow.com/questions/14788345/how-to-install-jdk-on-ubuntu-linux/35230493#35230493", "question_id": 14788345, "answer_id": 35230493}, {"body": "<p><strong>Installing Java 8 on Ubuntu</strong></p>\n\n<p>First you need to add webupd8team Java PPA repository in your system and install Oracle Java 8 using following set of commands.</p>\n\n<pre><code>$ sudo add-apt-repository ppa:webupd8team/java\n$ sudo apt-get update\n$ sudo apt-get install oracle-java8-installer\n</code></pre>\n\n<p><strong>Verify Installed Java Version</strong></p>\n\n<p>After successfully installing oracle Java using above step verify installed version using following command.</p>\n\n<pre><code>$ java -version\n\n\njava version \"1.8.0_77\"\nJava(TM) SE Runtime Environment (build 1.8.0_77-b03)\nJava HotSpot(TM) 64-Bit Server VM (build 25.77-b03, mixed mode)\n</code></pre>\n\n<p><strong>Configuring Java Environment</strong></p>\n\n<p>In Webupd8 ppa repository also providing a package to set environment variables, Install this package using following command.</p>\n\n<pre><code>$ sudo apt-get install oracle-java8-set-default\n</code></pre>\n\n<p><a href=\"http://tecadmin.net/install-oracle-java-8-jdk-8-ubuntu-via-ppa/\">reference</a></p>\n", "title": "How to install JDK on Ubuntu (Linux)?", "tags": ["java", "ubuntu"], "link": "http://stackoverflow.com/questions/14788345/how-to-install-jdk-on-ubuntu-linux/36805159#36805159", "question_id": 14788345, "answer_id": 36805159}, {"body": "<p>You can use <a href=\"https://github.com/neurobin/oraji\" rel=\"nofollow\">oraji</a>. It can install/uninstall both JDK or JRE from oracle java (.tar.gz).</p>\n\n<ol>\n<li>To install run <code>sudo oraji '/path/to/the/jdk_or_jre_archive'</code></li>\n<li>To uninstall run <code>oraji -u</code> and confirm the version number.</li>\n</ol>\n", "title": "How to install JDK on Ubuntu (Linux)?", "tags": ["java", "ubuntu"], "link": "http://stackoverflow.com/questions/14788345/how-to-install-jdk-on-ubuntu-linux/36978761#36978761", "question_id": 14788345, "answer_id": 36978761}, {"body": "<p>I had the same problem and none of the comments worked for me. Finally, I noticed that I disabled my updates. When I reactivate it, so  sudo apt-get update worked correctly and the issue was solved.\n(update in system settings> software and updates>updates tab \nhere I ticked two first option of important update and recommended updates).</p>\n", "title": "How to install JDK on Ubuntu (Linux)?", "tags": ["java", "ubuntu"], "link": "http://stackoverflow.com/questions/14788345/how-to-install-jdk-on-ubuntu-linux/37361616#37361616", "question_id": 14788345, "answer_id": 37361616}, {"body": "<p>Installing Oracle's Java JDK requires you to accept the Oracle license before the installation begins. This is only required once. If for some reason you need the installation to be automated, you can run the following commands to install without user interaction, useful for an automatic script for example.</p>\n\n<p><code>\nsudo add-apt-repository -y ppa:webupd8team/java\nsudo apt-get update\necho debconf shared/accepted-oracle-license-v1-1 select true | sudo debconf-set-selections\necho debconf shared/accepted-oracle-license-v1-1 seen true | sudo debconf-set-selections\nsudo apt-get -y install oracle-java8-installer\njava -version\n</code></p>\n", "title": "How to install JDK on Ubuntu (Linux)?", "tags": ["java", "ubuntu"], "link": "http://stackoverflow.com/questions/14788345/how-to-install-jdk-on-ubuntu-linux/37800285#37800285", "question_id": 14788345, "answer_id": 37800285}, {"body": "<p>Execute these series of commands (Insert/Update/Install)and you are all set to go.</p>\n\n<ol>\n<li><p>First add the repository:\n<code>sudo add-apt-repository ppa:webupd8team/java</code></p></li>\n<li><p>Update:\n<code>sudo apt-get update</code></p></li>\n<li><p>Install:\n<code>sudo apt-get install oracle-java7-installer</code></p></li>\n</ol>\n", "title": "How to install JDK on Ubuntu (Linux)?", "tags": ["java", "ubuntu"], "link": "http://stackoverflow.com/questions/14788345/how-to-install-jdk-on-ubuntu-linux/39072942#39072942", "question_id": 14788345, "answer_id": 39072942}], "creation_date": 1360414302, "score": 248, "link": "http://stackoverflow.com/questions/14788345/how-to-install-jdk-on-ubuntu-linux", "question_id": 14788345}, {"body": "<p>I am working on some Java code which needs to be highly optimized as it will run in hot functions that are invoked at many points in my main program logic. Part of this code involves multiplying <code>double</code> variables by <code>10</code> raised to arbitrary non-negative <code>int</code> <code>exponent</code>s. One fast way (edit: but not the fastest possible, see Update 2 below) to get the multiplied value is to <code>switch</code> on the <code>exponent</code>:</p>\n\n<pre><code>double multiplyByPowerOfTen(final double d, final int exponent) {\n   switch (exponent) {\n      case 0:\n         return d;\n      case 1:\n         return d*10;\n      case 2:\n         return d*100;\n      // ... same pattern\n      case 9:\n         return d*1000000000;\n      case 10:\n         return d*10000000000L;\n      // ... same pattern with long literals\n      case 18:\n         return d*1000000000000000000L;\n      default:\n         throw new ParseException(\"Unhandled power of ten \" + power, 0);\n   }\n}\n</code></pre>\n\n<p>The commented ellipses above indicate that the <code>case</code> <code>int</code> constants continue incrementing by 1, so there are really 19 <code>case</code>s in the above code snippet. Since I wasn't sure whether I would actually need all the powers of 10 in <code>case</code> statements <code>10</code> thru <code>18</code>, I ran some microbenchmarks comparing the time to complete 10 million operations with this <code>switch</code> statement versus a <code>switch</code> with only <code>case</code>s <code>0</code> thru <code>9</code> (with the <code>exponent</code> limited to 9 or less to avoid breaking the pared-down <code>switch</code>). I got the rather surprising (to me, at least!) result that the longer <code>switch</code> with more <code>case</code> statements actually ran faster.</p>\n\n<p>On a lark, I tried adding even more <code>case</code>s which just returned dummy values, and found that  I could get the switch to run even faster with around 22-27 declared <code>case</code>s (even though those dummy cases are never actually hit while the code is running). (Again, <code>case</code>s were added in a contiguous fashion by incrementing the prior <code>case</code> constant by <code>1</code>.) These execution time differences are not very significant: for a random <code>exponent</code> between <code>0</code> and <code>10</code>, the dummy padded <code>switch</code> statement finishes 10 million executions in 1.49 secs versus 1.54 secs for the unpadded version, for a grand total savings of 5ns per execution. So, not the kind of thing that makes obsessing over padding out a <code>switch</code> statement worth the effort from an optimization standpoint. But I still just find it curious and counter-intuitive that a <code>switch</code> doesn't become slower (or perhaps at best maintain constant <em>O(1)</em> time) to execute as more <code>case</code>s are added to it.  </p>\n\n<p><img src=\"http://i.stack.imgur.com/kbnan.png\" alt=\"switch benchmarking results\"></p>\n\n<p>These are the results I obtained from running with various limits on the randomly-generated <code>exponent</code> values. I didn't include the results all the way down to <code>1</code> for the <code>exponent</code> limit, but the general shape of the curve remains the same, with a ridge around the 12-17 case mark, and a valley between 18-28. All tests were run in JUnitBenchmarks using shared containers for the random values to ensure identical testing inputs. I also ran the tests both in order from longest <code>switch</code> statement to shortest, and vice-versa, to try and eliminate the possibility of ordering-related test problems.  I've put my testing code up on a github repo if anyone wants to try to reproduce these results.</p>\n\n<p>So, what's going on here? Some vagaries of my architecture or micro-benchmark construction? Or is the Java <code>switch</code> really a little faster to execute in the <code>18</code> to <code>28</code> <code>case</code> range than it is from <code>11</code> up to <code>17</code>?</p>\n\n<p><a href=\"https://github.com/abissell/switch-experiment\">github test repo \"switch-experiment\"</a></p>\n\n<p><strong>UPDATE:</strong> I cleaned up the benchmarking library quite a bit and added a text file in /results with some output across a wider range of possible <code>exponent</code> values. I also added an option in the testing code not to throw an <code>Exception</code> from <code>default</code>, but this doesn't appear to affect the results.</p>\n\n<p><strong>UPDATE 2:</strong> Found some pretty good discussion of this issue from back in 2009 on the xkcd forum here: <a href=\"http://forums.xkcd.com/viewtopic.php?f=11&amp;t=33524\">http://forums.xkcd.com/viewtopic.php?f=11&amp;t=33524</a>. The OP's discussion of using <code>Array.binarySearch()</code> gave me the idea for a simple array-based implementation of the exponentiation pattern above. There's no need for the binary search since I know what the entries in the <code>array</code> are. It appears to run about 3 times faster than using <code>switch</code>, obviously at the expense of some of the control flow that <code>switch</code> affords. That code has been added to the github repo also.</p>\n", "tags": ["java", "performance", "assembly", "compiler-construction", "switch-statement"], "title": "Why does Java switch on contiguous ints appear to run faster with added cases?", "answers": [{"body": "<p>Switch - case is faster if the case values are placed in a narrow range Eg. </p>\n\n<pre><code>case 1:\ncase 2:\ncase 3:\n..\n..\ncase n:\n</code></pre>\n\n<p>Because, in this case the compiler can avoid performing a comparison for every case leg in the switch statement. The compiler make a jump table which contains addresses of the actions to be taken on different legs. The value on which the switch is being performed is manipulated to convert it into an index in to the <a href=\"http://en.wikipedia.org/wiki/Branch_table\"><code>jump table</code></a>. In this implementation , the time taken in the switch statement is much less than the time taken in an equivalent  if-else-if statement cascade. Also the time taken in the switch statement is independent of the number of case legs in the switch statement.</p>\n\n<p>As stated in wikipedia about <a href=\"http://en.wikipedia.org/wiki/Switch_statement\">switch statement</a> in Compilation section.<br></p>\n\n<blockquote>\n  <p>If the range of input values is identifiably 'small' and has only a\n  few gaps, some compilers that incorporate an optimizer may actually\n  implement the switch statement as a branch table or an array of\n  indexed function pointers instead of a lengthy series of conditional\n  instructions. This allows the switch statement to determine instantly\n  what branch to execute without having to go through a list of\n  comparisons.</p>\n</blockquote>\n", "title": "Why does Java switch on contiguous ints appear to run faster with added cases?", "tags": ["java", "performance", "assembly", "compiler-construction", "switch-statement"], "link": "http://stackoverflow.com/questions/15621083/why-does-java-switch-on-contiguous-ints-appear-to-run-faster-with-added-cases/15621169#15621169", "question_id": 15621083, "answer_id": 15621169}, {"body": "<p>As pointed out <a href=\"http://stackoverflow.com/a/15621857/632951\">by the other answer</a>, because the case values are contiguous (as opposed to sparse), the generated bytecode for your various tests uses a switch table (bytecode instruction <code>tableswitch</code>).</p>\n\n<p>However, once the JIT starts its job and compiles the bytecode into assembly, the <code>tableswitch</code> instruction does not always result in an array of pointers: sometimes the switch table is transformed into what looks like a <code>lookupswitch</code> (similar to an <code>if</code>/<code>else if</code> structure).</p>\n\n<p>Decompiling the assembly generated by the JIT (hotspot JDK 1.7) shows that it uses a succession of if/else if when there are 17 cases or less, an array of pointers when there are more than 18 (more efficient).</p>\n\n<p>The reason why this magic number of 18 is used seems to come down to the default value of the <a href=\"http://hg.openjdk.java.net/jdk7/jdk7/hotspot/file/357d4e2eb4dd/src/share/vm/opto/c2_globals.hpp\"><code>MinJumpTableSize</code></a> JVM flag (around line 352 in the code).</p>\n\n<p>I have raised the issue on the hotspot compiler list and <a href=\"http://mail.openjdk.java.net/pipermail/hotspot-compiler-dev/2013-March/009998.html\">it seems to be a legacy of past testing</a>. Note that this default value <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/hotspot/rev/34bd5e86aadb\">has been removed in JDK 8</a> after <a href=\"http://mail.openjdk.java.net/pipermail/hotspot-compiler-dev/2013-May/010670.html\">more benchmarking was performed</a>.</p>\n\n<p>Finally, when the method becomes too long (> 25 cases in my tests), it is in not inlined any longer with the default JVM settings - that is the likeliest cause for the drop in performance at that point.</p>\n\n<hr>\n\n<p>With 5 cases, the decompiled code looks like this (notice the cmp/je/jg/jmp instructions, the assembly for if/goto):</p>\n\n<pre><code>[Verified Entry Point]\n  # {method} 'multiplyByPowerOfTen' '(DI)D' in 'javaapplication4/Test1'\n  # parm0:    xmm0:xmm0   = double\n  # parm1:    rdx       = int\n  #           [sp+0x20]  (sp of caller)\n  0x00000000024f0160: mov    DWORD PTR [rsp-0x6000],eax\n                                                ;   {no_reloc}\n  0x00000000024f0167: push   rbp\n  0x00000000024f0168: sub    rsp,0x10           ;*synchronization entry\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@-1 (line 56)\n  0x00000000024f016c: cmp    edx,0x3\n  0x00000000024f016f: je     0x00000000024f01c3\n  0x00000000024f0171: cmp    edx,0x3\n  0x00000000024f0174: jg     0x00000000024f01a5\n  0x00000000024f0176: cmp    edx,0x1\n  0x00000000024f0179: je     0x00000000024f019b\n  0x00000000024f017b: cmp    edx,0x1\n  0x00000000024f017e: jg     0x00000000024f0191\n  0x00000000024f0180: test   edx,edx\n  0x00000000024f0182: je     0x00000000024f01cb\n  0x00000000024f0184: mov    ebp,edx\n  0x00000000024f0186: mov    edx,0x17\n  0x00000000024f018b: call   0x00000000024c90a0  ; OopMap{off=48}\n                                                ;*new  ; - javaapplication4.Test1::multiplyByPowerOfTen@72 (line 83)\n                                                ;   {runtime_call}\n  0x00000000024f0190: int3                      ;*new  ; - javaapplication4.Test1::multiplyByPowerOfTen@72 (line 83)\n  0x00000000024f0191: mulsd  xmm0,QWORD PTR [rip+0xffffffffffffffa7]        # 0x00000000024f0140\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@52 (line 62)\n                                                ;   {section_word}\n  0x00000000024f0199: jmp    0x00000000024f01cb\n  0x00000000024f019b: mulsd  xmm0,QWORD PTR [rip+0xffffffffffffff8d]        # 0x00000000024f0130\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@46 (line 60)\n                                                ;   {section_word}\n  0x00000000024f01a3: jmp    0x00000000024f01cb\n  0x00000000024f01a5: cmp    edx,0x5\n  0x00000000024f01a8: je     0x00000000024f01b9\n  0x00000000024f01aa: cmp    edx,0x5\n  0x00000000024f01ad: jg     0x00000000024f0184  ;*tableswitch\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@1 (line 56)\n  0x00000000024f01af: mulsd  xmm0,QWORD PTR [rip+0xffffffffffffff81]        # 0x00000000024f0138\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@64 (line 66)\n                                                ;   {section_word}\n  0x00000000024f01b7: jmp    0x00000000024f01cb\n  0x00000000024f01b9: mulsd  xmm0,QWORD PTR [rip+0xffffffffffffff67]        # 0x00000000024f0128\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@70 (line 68)\n                                                ;   {section_word}\n  0x00000000024f01c1: jmp    0x00000000024f01cb\n  0x00000000024f01c3: mulsd  xmm0,QWORD PTR [rip+0xffffffffffffff55]        # 0x00000000024f0120\n                                                ;*tableswitch\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@1 (line 56)\n                                                ;   {section_word}\n  0x00000000024f01cb: add    rsp,0x10\n  0x00000000024f01cf: pop    rbp\n  0x00000000024f01d0: test   DWORD PTR [rip+0xfffffffffdf3fe2a],eax        # 0x0000000000430000\n                                                ;   {poll_return}\n  0x00000000024f01d6: ret    \n</code></pre>\n\n<p>With 18 cases, the assembly looks like this (notice the array of pointers which is used and suppresses the need for all the comparisons: <code>jmp    QWORD PTR [r8+r10*1]</code> jumps directly to the right multiplication) - that is the likely reason for the performance improvement:</p>\n\n<pre><code>[Verified Entry Point]\n  # {method} 'multiplyByPowerOfTen' '(DI)D' in 'javaapplication4/Test1'\n  # parm0:    xmm0:xmm0   = double\n  # parm1:    rdx       = int\n  #           [sp+0x20]  (sp of caller)\n  0x000000000287fe20: mov    DWORD PTR [rsp-0x6000],eax\n                                                ;   {no_reloc}\n  0x000000000287fe27: push   rbp\n  0x000000000287fe28: sub    rsp,0x10           ;*synchronization entry\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@-1 (line 56)\n  0x000000000287fe2c: cmp    edx,0x13\n  0x000000000287fe2f: jae    0x000000000287fe46\n  0x000000000287fe31: movsxd r10,edx\n  0x000000000287fe34: shl    r10,0x3\n  0x000000000287fe38: movabs r8,0x287fd70       ;   {section_word}\n  0x000000000287fe42: jmp    QWORD PTR [r8+r10*1]  ;*tableswitch\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@1 (line 56)\n  0x000000000287fe46: mov    ebp,edx\n  0x000000000287fe48: mov    edx,0x31\n  0x000000000287fe4d: xchg   ax,ax\n  0x000000000287fe4f: call   0x00000000028590a0  ; OopMap{off=52}\n                                                ;*new  ; - javaapplication4.Test1::multiplyByPowerOfTen@202 (line 96)\n                                                ;   {runtime_call}\n  0x000000000287fe54: int3                      ;*new  ; - javaapplication4.Test1::multiplyByPowerOfTen@202 (line 96)\n  0x000000000287fe55: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe8b]        # 0x000000000287fce8\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@194 (line 92)\n                                                ;   {section_word}\n  0x000000000287fe5d: jmp    0x000000000287ff16\n  0x000000000287fe62: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe86]        # 0x000000000287fcf0\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@188 (line 90)\n                                                ;   {section_word}\n  0x000000000287fe6a: jmp    0x000000000287ff16\n  0x000000000287fe6f: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe81]        # 0x000000000287fcf8\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@182 (line 88)\n                                                ;   {section_word}\n  0x000000000287fe77: jmp    0x000000000287ff16\n  0x000000000287fe7c: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe7c]        # 0x000000000287fd00\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@176 (line 86)\n                                                ;   {section_word}\n  0x000000000287fe84: jmp    0x000000000287ff16\n  0x000000000287fe89: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe77]        # 0x000000000287fd08\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@170 (line 84)\n                                                ;   {section_word}\n  0x000000000287fe91: jmp    0x000000000287ff16\n  0x000000000287fe96: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe72]        # 0x000000000287fd10\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@164 (line 82)\n                                                ;   {section_word}\n  0x000000000287fe9e: jmp    0x000000000287ff16\n  0x000000000287fea0: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe70]        # 0x000000000287fd18\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@158 (line 80)\n                                                ;   {section_word}\n  0x000000000287fea8: jmp    0x000000000287ff16\n  0x000000000287feaa: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe6e]        # 0x000000000287fd20\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@152 (line 78)\n                                                ;   {section_word}\n  0x000000000287feb2: jmp    0x000000000287ff16\n  0x000000000287feb4: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe24]        # 0x000000000287fce0\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@146 (line 76)\n                                                ;   {section_word}\n  0x000000000287febc: jmp    0x000000000287ff16\n  0x000000000287febe: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe6a]        # 0x000000000287fd30\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@140 (line 74)\n                                                ;   {section_word}\n  0x000000000287fec6: jmp    0x000000000287ff16\n  0x000000000287fec8: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe68]        # 0x000000000287fd38\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@134 (line 72)\n                                                ;   {section_word}\n  0x000000000287fed0: jmp    0x000000000287ff16\n  0x000000000287fed2: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe66]        # 0x000000000287fd40\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@128 (line 70)\n                                                ;   {section_word}\n  0x000000000287feda: jmp    0x000000000287ff16\n  0x000000000287fedc: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe64]        # 0x000000000287fd48\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@122 (line 68)\n                                                ;   {section_word}\n  0x000000000287fee4: jmp    0x000000000287ff16\n  0x000000000287fee6: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe62]        # 0x000000000287fd50\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@116 (line 66)\n                                                ;   {section_word}\n  0x000000000287feee: jmp    0x000000000287ff16\n  0x000000000287fef0: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe60]        # 0x000000000287fd58\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@110 (line 64)\n                                                ;   {section_word}\n  0x000000000287fef8: jmp    0x000000000287ff16\n  0x000000000287fefa: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe5e]        # 0x000000000287fd60\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@104 (line 62)\n                                                ;   {section_word}\n  0x000000000287ff02: jmp    0x000000000287ff16\n  0x000000000287ff04: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe5c]        # 0x000000000287fd68\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@98 (line 60)\n                                                ;   {section_word}\n  0x000000000287ff0c: jmp    0x000000000287ff16\n  0x000000000287ff0e: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe12]        # 0x000000000287fd28\n                                                ;*tableswitch\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@1 (line 56)\n                                                ;   {section_word}\n  0x000000000287ff16: add    rsp,0x10\n  0x000000000287ff1a: pop    rbp\n  0x000000000287ff1b: test   DWORD PTR [rip+0xfffffffffd9b00df],eax        # 0x0000000000230000\n                                                ;   {poll_return}\n  0x000000000287ff21: ret    \n</code></pre>\n\n<p>And finally the assembly with 30 cases (below) looks similar to 18 cases, except for the additional <code>movapd xmm0,xmm1</code> that appears towards the middle of the code, <a href=\"http://stackoverflow.com/q/15621083/632951#comment-22166408\">as spotted by @cHao</a> - however the likeliest reason for the drop in performance is that the method is too long to be inlined with the default JVM settings:</p>\n\n<pre><code>[Verified Entry Point]\n  # {method} 'multiplyByPowerOfTen' '(DI)D' in 'javaapplication4/Test1'\n  # parm0:    xmm0:xmm0   = double\n  # parm1:    rdx       = int\n  #           [sp+0x20]  (sp of caller)\n  0x0000000002524560: mov    DWORD PTR [rsp-0x6000],eax\n                                                ;   {no_reloc}\n  0x0000000002524567: push   rbp\n  0x0000000002524568: sub    rsp,0x10           ;*synchronization entry\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@-1 (line 56)\n  0x000000000252456c: movapd xmm1,xmm0\n  0x0000000002524570: cmp    edx,0x1f\n  0x0000000002524573: jae    0x0000000002524592  ;*tableswitch\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@1 (line 56)\n  0x0000000002524575: movsxd r10,edx\n  0x0000000002524578: shl    r10,0x3\n  0x000000000252457c: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe3c]        # 0x00000000025243c0\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@364 (line 118)\n                                                ;   {section_word}\n  0x0000000002524584: movabs r8,0x2524450       ;   {section_word}\n  0x000000000252458e: jmp    QWORD PTR [r8+r10*1]  ;*tableswitch\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@1 (line 56)\n  0x0000000002524592: mov    ebp,edx\n  0x0000000002524594: mov    edx,0x31\n  0x0000000002524599: xchg   ax,ax\n  0x000000000252459b: call   0x00000000024f90a0  ; OopMap{off=64}\n                                                ;*new  ; - javaapplication4.Test1::multiplyByPowerOfTen@370 (line 120)\n                                                ;   {runtime_call}\n  0x00000000025245a0: int3                      ;*new  ; - javaapplication4.Test1::multiplyByPowerOfTen@370 (line 120)\n  0x00000000025245a1: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe27]        # 0x00000000025243d0\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@358 (line 116)\n                                                ;   {section_word}\n  0x00000000025245a9: jmp    0x0000000002524744\n  0x00000000025245ae: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe22]        # 0x00000000025243d8\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@348 (line 114)\n                                                ;   {section_word}\n  0x00000000025245b6: jmp    0x0000000002524744\n  0x00000000025245bb: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe1d]        # 0x00000000025243e0\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@338 (line 112)\n                                                ;   {section_word}\n  0x00000000025245c3: jmp    0x0000000002524744\n  0x00000000025245c8: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe18]        # 0x00000000025243e8\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@328 (line 110)\n                                                ;   {section_word}\n  0x00000000025245d0: jmp    0x0000000002524744\n  0x00000000025245d5: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe13]        # 0x00000000025243f0\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@318 (line 108)\n                                                ;   {section_word}\n  0x00000000025245dd: jmp    0x0000000002524744\n  0x00000000025245e2: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe0e]        # 0x00000000025243f8\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@308 (line 106)\n                                                ;   {section_word}\n  0x00000000025245ea: jmp    0x0000000002524744\n  0x00000000025245ef: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe09]        # 0x0000000002524400\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@298 (line 104)\n                                                ;   {section_word}\n  0x00000000025245f7: jmp    0x0000000002524744\n  0x00000000025245fc: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe04]        # 0x0000000002524408\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@288 (line 102)\n                                                ;   {section_word}\n  0x0000000002524604: jmp    0x0000000002524744\n  0x0000000002524609: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffdff]        # 0x0000000002524410\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@278 (line 100)\n                                                ;   {section_word}\n  0x0000000002524611: jmp    0x0000000002524744\n  0x0000000002524616: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffdfa]        # 0x0000000002524418\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@268 (line 98)\n                                                ;   {section_word}\n  0x000000000252461e: jmp    0x0000000002524744\n  0x0000000002524623: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffd9d]        # 0x00000000025243c8\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@258 (line 96)\n                                                ;   {section_word}\n  0x000000000252462b: jmp    0x0000000002524744\n  0x0000000002524630: movapd xmm0,xmm1\n  0x0000000002524634: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffe0c]        # 0x0000000002524448\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@242 (line 92)\n                                                ;   {section_word}\n  0x000000000252463c: jmp    0x0000000002524744\n  0x0000000002524641: movapd xmm0,xmm1\n  0x0000000002524645: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffddb]        # 0x0000000002524428\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@236 (line 90)\n                                                ;   {section_word}\n  0x000000000252464d: jmp    0x0000000002524744\n  0x0000000002524652: movapd xmm0,xmm1\n  0x0000000002524656: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffdd2]        # 0x0000000002524430\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@230 (line 88)\n                                                ;   {section_word}\n  0x000000000252465e: jmp    0x0000000002524744\n  0x0000000002524663: movapd xmm0,xmm1\n  0x0000000002524667: mulsd  xmm0,QWORD PTR [rip+0xfffffffffffffdc9]        # 0x0000000002524438\n                                                ;*dmul\n                                                ; - javaapplication4.Test1::multiplyByPowerOfTen@224 (line 86)\n                                                ;   {section_word}\n\n[etc.]\n\n  0x0000000002524744: add    rsp,0x10\n  0x0000000002524748: pop    rbp\n  0x0000000002524749: test   DWORD PTR [rip+0xfffffffffde1b8b1],eax        # 0x0000000000340000\n                                                ;   {poll_return}\n  0x000000000252474f: ret    \n</code></pre>\n", "title": "Why does Java switch on contiguous ints appear to run faster with added cases?", "tags": ["java", "performance", "assembly", "compiler-construction", "switch-statement"], "link": "http://stackoverflow.com/questions/15621083/why-does-java-switch-on-contiguous-ints-appear-to-run-faster-with-added-cases/15621602#15621602", "question_id": 15621083, "answer_id": 15621602}, {"body": "<p>The answer lies in the bytecode:</p>\n\n<p><strong>SwitchTest10.java</strong></p>\n\n<pre><code>public class SwitchTest10 {\n\n    public static void main(String[] args) {\n        int n = 0;\n\n        switcher(n);\n    }\n\n    public static void switcher(int n) {\n        switch(n) {\n            case 0: System.out.println(0);\n                    break;\n\n            case 1: System.out.println(1);\n                    break;\n\n            case 2: System.out.println(2);\n                    break;\n\n            case 3: System.out.println(3);\n                    break;\n\n            case 4: System.out.println(4);\n                    break;\n\n            case 5: System.out.println(5);\n                    break;\n\n            case 6: System.out.println(6);\n                    break;\n\n            case 7: System.out.println(7);\n                    break;\n\n            case 8: System.out.println(8);\n                    break;\n\n            case 9: System.out.println(9);\n                    break;\n\n            case 10: System.out.println(10);\n                    break;\n\n            default: System.out.println(\"test\");\n        }\n    }       \n}\n</code></pre>\n\n<p><strong>Corresponding bytecode; only relevant parts shown:</strong></p>\n\n<pre><code>public static void switcher(int);\n  Code:\n   0:   iload_0\n   1:   tableswitch{ //0 to 10\n        0: 60;\n        1: 70;\n        2: 80;\n        3: 90;\n        4: 100;\n        5: 110;\n        6: 120;\n        7: 131;\n        8: 142;\n        9: 153;\n        10: 164;\n        default: 175 }\n</code></pre>\n\n<p><strong>SwitchTest22.java:</strong></p>\n\n<pre><code>public class SwitchTest22 {\n\n    public static void main(String[] args) {\n        int n = 0;\n\n        switcher(n);\n    }\n\n    public static void switcher(int n) {\n        switch(n) {\n            case 0: System.out.println(0);\n                    break;\n\n            case 1: System.out.println(1);\n                    break;\n\n            case 2: System.out.println(2);\n                    break;\n\n            case 3: System.out.println(3);\n                    break;\n\n            case 4: System.out.println(4);\n                    break;\n\n            case 5: System.out.println(5);\n                    break;\n\n            case 6: System.out.println(6);\n                    break;\n\n            case 7: System.out.println(7);\n                    break;\n\n            case 8: System.out.println(8);\n                    break;\n\n            case 9: System.out.println(9);\n                    break;\n\n            case 100: System.out.println(10);\n                    break;\n\n            case 110: System.out.println(10);\n                    break;\n            case 120: System.out.println(10);\n                    break;\n            case 130: System.out.println(10);\n                    break;\n            case 140: System.out.println(10);\n                    break;\n            case 150: System.out.println(10);\n                    break;\n            case 160: System.out.println(10);\n                    break;\n            case 170: System.out.println(10);\n                    break;\n            case 180: System.out.println(10);\n                    break;\n            case 190: System.out.println(10);\n                    break;\n            case 200: System.out.println(10);\n                    break;\n            case 210: System.out.println(10);\n                    break;\n\n            case 220: System.out.println(10);\n                    break;\n\n            default: System.out.println(\"test\");\n        }\n    }       \n}\n</code></pre>\n\n<p><strong>Corresponding bytecode; again, only relevant parts shown:</strong></p>\n\n<pre><code>public static void switcher(int);\n  Code:\n   0:   iload_0\n   1:   lookupswitch{ //23\n        0: 196;\n        1: 206;\n        2: 216;\n        3: 226;\n        4: 236;\n        5: 246;\n        6: 256;\n        7: 267;\n        8: 278;\n        9: 289;\n        100: 300;\n        110: 311;\n        120: 322;\n        130: 333;\n        140: 344;\n        150: 355;\n        160: 366;\n        170: 377;\n        180: 388;\n        190: 399;\n        200: 410;\n        210: 421;\n        220: 432;\n        default: 443 }\n</code></pre>\n\n<p>In the first case, with narrow ranges, the compiled bytecode uses a <code>tableswitch</code>. In the second case, the compiled bytecode uses a <code>lookupswitch</code>. </p>\n\n<p>In <code>tableswitch</code>, the integer value on the top of the stack is used to index into the table, to find the branch/jump target. This jump/branch is then performed immediately. Hence, this is an <code>O(1)</code> operation.</p>\n\n<p>A <code>lookupswitch</code> is more complicated. In this case, the integer value needs to be compared against all the keys in the table until the correct key is found. After the key is found, the branch/jump target (that this key is mapped to) is used for the jump. The table that is used in <code>lookupswitch</code> is sorted and a binary-search algorithm can be used to find the correct key. Performance for a binary search is <code>O(log n)</code>, and the entire process is also <code>O(log n)</code>, because the jump is still <code>O(1)</code>. So the reason the performance is lower in the case of sparse ranges is that the correct key must first be looked up because you cannot index into the table directly.</p>\n\n<p>If there are sparse values and you only had a <code>tableswitch</code> to use, table would essentially contain dummy entries that point to the <code>default</code> option. For example, assuming that the last entry in <code>SwitchTest10.java</code> was <code>21</code> instead of <code>10</code>, you get:</p>\n\n<pre><code>public static void switcher(int);\n\u00a0 Code:\n\u00a0 \u00a00:   iload_0\n\u00a0 \u00a01:   tableswitch{ //0 to 21\n        0: 104;\n        1: 114;\n        2: 124;\n        3: 134;\n        4: 144;\n        5: 154;\n        6: 164;\n        7: 175;\n        8: 186;\n        9: 197;\n        10: 219;\n        11: 219;\n        12: 219;\n        13: 219;\n        14: 219;\n        15: 219;\n        16: 219;\n        17: 219;\n        18: 219;\n        19: 219;\n        20: 219;\n        21: 208;\n        default: 219 }\n</code></pre>\n\n<p>So the compiler basically creates this huge table containing dummy entries between the gaps, pointing to the branch target of the <code>default</code> instruction. Even if there isn't a <code>default</code>, it will contain entries pointing to the instruction <em>after</em> the switch block. I did some basic tests, and I found that if the gap between the last index and the previous one (<code>9</code>) is greater than <code>35</code>, it uses a <code>lookupswitch</code> instead of a <code>tableswitch</code>. </p>\n\n<p>The behavior of the <code>switch</code> statement is defined in <a href=\"http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-3.html\">Java Virtual Machine Specification (\u00a73.10)</a>:</p>\n\n<blockquote>\n  <p>Where the cases of the switch are sparse, the table representation of the tableswitch instruction becomes inefficient in terms of space. The lookupswitch instruction may be used instead. The lookupswitch instruction pairs int keys (the values of the case labels) with target offsets in a table. When a lookupswitch instruction is executed, the value of the expression of the switch is compared against the keys in the table. If one of the keys matches the value of the expression, execution continues at the associated target offset. If no key matches, execution continues at the default target. [...]</p>\n</blockquote>\n", "title": "Why does Java switch on contiguous ints appear to run faster with added cases?", "tags": ["java", "performance", "assembly", "compiler-construction", "switch-statement"], "link": "http://stackoverflow.com/questions/15621083/why-does-java-switch-on-contiguous-ints-appear-to-run-faster-with-added-cases/15621857#15621857", "question_id": 15621083, "answer_id": 15621857}, {"body": "<p>Since the question is already answered (more or less), here is some tip. \nUse </p>\n\n<pre><code>private static final double[] mul={1d, 10d...};\nstatic double multiplyByPowerOfTen(final double d, final int exponent) {\n      if (exponent&lt;0 || exponent&gt;=mul.length) throw new ParseException();//or just leave the IOOBE be\n      return mul[exponent]*d;\n}\n</code></pre>\n\n<p>That code uses significantly less IC (instruction cache) and will be always inlined. The array will be in L1 data cache if the code is hot. The lookup table is almost always a win. (esp. on microbenchmarks :D )</p>\n\n<p>Edit: if you wish the method to be hot-inlined, consider the non-fast paths like <code>throw new ParseException()</code> to be as short as minimum or move them to separate static method (hence making them short as minimum). That is <code>throw new ParseException(\"Unhandled power of ten \" + power, 0);</code> is a weak idea b/c it eats a lot of the inlining budget for code that can be just interpreted - string concatenation is quite verbose in bytecode . More info and a <a href=\"http://bugs.sun.com/view_bug.do?bug_id=5103956\">real case w/ ArrayList</a></p>\n", "title": "Why does Java switch on contiguous ints appear to run faster with added cases?", "tags": ["java", "performance", "assembly", "compiler-construction", "switch-statement"], "link": "http://stackoverflow.com/questions/15621083/why-does-java-switch-on-contiguous-ints-appear-to-run-faster-with-added-cases/15670320#15670320", "question_id": 15621083, "answer_id": 15670320}], "creation_date": 1364232525, "score": 241, "link": "http://stackoverflow.com/questions/15621083/why-does-java-switch-on-contiguous-ints-appear-to-run-faster-with-added-cases", "question_id": 15621083}, {"body": "<p>Try:</p>\n\n<pre><code>sudo apt-get install maven\n</code></pre>\n\n<p>If it works for you ignore the rest of this post.</p>\n\n<h2>Intro</h2>\n\n<p>I started setting up my Ubuntu 12.10 on April 2013 and the normal  <code>sudo apt-get install maven</code> was not working for maven 3 back then. </p>\n\n<p>The <strong>manual installation</strong> in this post is useful if you like to dig in deeper to your ubuntu kernel in regards with apt-get and where it finds the list of applications that are available for installation on Ubuntu\n. It can also be potentially useful for more recent releases of Ubuntu like <strong>Ubuntu 15.04</strong>, etc. if you face the same problem as I did back then with Ubuntu 12.10. </p>\n\n<h2>Automatic Installation via apt-get:</h2>\n\n<p>Checkout the <strong>manual installation</strong> if your current ubuntu can not install maven via common 'apt-get install maven'.</p>\n\n<pre><code>sudo apt-get update\nsudo apt-get install maven\n</code></pre>\n\n<p>Make sure to remove maven 2 if your ubuntu is not fresh or if you were using maven 2 before:</p>\n\n<pre><code>sudo apt-get remove maven2\n</code></pre>\n\n<h2>Manual Installation via apt-get by adding maven 3 repository (Ubuntu 14.04 check out update 1):</h2>\n\n<p>This can be useful if your ubuntu apt-get repositories list is not up to date.</p>\n\n<p>Maven 3 was required to set up the system and as it turns out most of the documents out there are referring to how to install Maven to Ubuntu version 12.04 or before. Best document I found was:</p>\n\n<p><a href=\"http://killertilapia.blogspot.com.au/2012/10/installing-maven-3-in-ubuntu-1204.html\">killertilapia's blog</a></p>\n\n<p>The whole process I came up with is as follows:</p>\n\n<ol>\n<li><code>sudo -H gedit /etc/apt/sources.list</code></li>\n<li><p>Add the following line the <code>sources.list</code> file:</p>\n\n<blockquote>\n  <p>deb <a href=\"http://ppa.launchpad.net/natecarlson/maven3/ubuntu\">http://ppa.launchpad.net/natecarlson/maven3/ubuntu</a> precise main </p>\n  \n  <p>deb-src <a href=\"http://ppa.launchpad.net/natecarlson/maven3/ubuntu\">http://ppa.launchpad.net/natecarlson/maven3/ubuntu</a> precise main</p>\n</blockquote></li>\n<li><p><code>sudo apt-get update &amp;&amp; sudo apt-get install maven3</code></p></li>\n<li><code>sudo ln -s /usr/share/maven3/bin/mvn /usr/bin/mvn</code></li>\n</ol>\n\n<blockquote>\n  <p>Caution 1: command \"sudo apt-add-repository ppa:natecarlson/maven3\" did not work on my  Ubuntu and had to run <code>sudo apt-add-repository -rm ppa:natecarlson/maven3</code> to get my apt-get to work again.</p>\n  \n  <p>Caution 2: thanks to David, you need to remove your existing symbolic link to previous versions of maven before running step 4.</p>\n</blockquote>\n\n<h2>OS X Installation</h2>\n\n<p>I decided to add OS X installation in case you use multiple environments for your dev: <a href=\"http://stackoverflow.com/questions/8826881/maven-install-on-mac-os-x\">See the source stackoverflow thread for more details</a>.</p>\n\n<p>Install <a href=\"http://brew.sh/\">Homebrew</a> that is the equavalent of <code>apt-get</code>, then install Maven using:</p>\n\n<pre><code>brew install maven\n</code></pre>\n\n<h2><strong>Update 1</strong>: <strong>Installation for Ubunutu 14.04</strong></h2>\n\n<p>Haven't tried this myself but I am confident this should work without security warnings:</p>\n\n<pre><code>sudo apt-get purge maven maven2 maven3\nsudo apt-add-repository ppa:andrei-pozolotin/maven3\nsudo apt-get update\nsudo apt-get install maven3\n</code></pre>\n\n<p><strong>Note</strong>: source <a href=\"https://launchpad.net/~andrei-pozolotin/+archive/ubuntu/maven3\">here</a>, many thanks and +1s to @rendybjunior, @Dominic_Bartl, and @FunThomas424242 </p>\n", "tags": ["java", "maven-3", "apt-get", "ubuntu-15.04", "ubuntu-15.10"], "title": "How to install Maven 3 on Ubuntu 15.10/15.04/14.10/14.04 LTS/13.10/13.04/12.10/12.04 by using apt-get?", "answers": [{"body": "<p>Here's an easier way:</p>\n\n<pre><code>sudo apt-get install maven\n</code></pre>\n\n<p>More details are <a href=\"http://www.mkyong.com/maven/how-to-install-maven-in-ubuntu/\">here</a>.</p>\n", "title": "How to install Maven 3 on Ubuntu 15.10/15.04/14.10/14.04 LTS/13.10/13.04/12.10/12.04 by using apt-get?", "tags": ["java", "maven-3", "apt-get", "ubuntu-15.04", "ubuntu-15.10"], "link": "http://stackoverflow.com/questions/15630055/how-to-install-maven-3-on-ubuntu-15-10-15-04-14-10-14-04-lts-13-10-13-04-12-10-1/16566273#16566273", "question_id": 15630055, "answer_id": 16566273}, {"body": "<p>It's best to use <a href=\"/a/16566273/463897\">miske's answer</a>.</p>\n\n<h1>Properly installing natecarlson's repository</h1>\n\n<p>If you really want to use natecarlson's repository, the instructions just below can do any of the following:</p>\n\n<ol>\n<li>set it up from scratch</li>\n<li>repair it if <code>apt-get update</code> gives a <code>404</code> error after <code>add-apt-repository</code></li>\n<li>repair it if <code>apt-get update</code> gives a <code>NO_PUBKEY</code> error after manually adding it to <code>/etc/apt/sources.list</code></li>\n</ol>\n\n<p>Open a terminal and run the following:</p>\n\n<pre><code>sudo -i\n</code></pre>\n\n<p>Enter your password if necessary, then paste the following into the terminal:</p>\n\n<pre><code>export GOOD_RELEASE='precise'\nexport BAD_RELEASE=\"`lsb_release -cs`\"\ncd /etc/apt\nsed -i '/natecarlson\\/maven3/d' sources.list\ncd sources.list.d\nrm -f natecarlson-maven3-*.list*\napt-add-repository -y ppa:natecarlson/maven3\nmv natecarlson-maven3-${BAD_RELEASE}.list natecarlson-maven3-${GOOD_RELEASE}.list\nsed -i \"s/${BAD_RELEASE}/${GOOD_RELEASE}/\" natecarlson-maven3-${GOOD_RELEASE}.list\napt-get update\nexit\necho Done!\n</code></pre>\n\n<h1>Removing natecarlson's repository</h1>\n\n<p>If you installed natecarlson's repository (either using <code>add-apt-repository</code> or manually added to <code>/etc/apt/sources.list</code>) and you don't want it anymore, open a terminal and run the following:</p>\n\n<pre><code>sudo -i\n</code></pre>\n\n<p>Enter your password if necessary, then paste the following into the terminal:</p>\n\n<pre><code>cd /etc/apt\nsed -i '/natecarlson\\/maven3/d' sources.list\ncd sources.list.d\nrm -f natecarlson-maven3-*.list*\napt-get update\nexit\necho Done!\n</code></pre>\n", "title": "How to install Maven 3 on Ubuntu 15.10/15.04/14.10/14.04 LTS/13.10/13.04/12.10/12.04 by using apt-get?", "tags": ["java", "maven-3", "apt-get", "ubuntu-15.04", "ubuntu-15.10"], "link": "http://stackoverflow.com/questions/15630055/how-to-install-maven-3-on-ubuntu-15-10-15-04-14-10-14-04-lts-13-10-13-04-12-10-1/16868526#16868526", "question_id": 15630055, "answer_id": 16868526}], "creation_date": 1364276011, "score": 228, "link": "http://stackoverflow.com/questions/15630055/how-to-install-maven-3-on-ubuntu-15-10-15-04-14-10-14-04-lts-13-10-13-04-12-10-1", "question_id": 15630055}, {"body": "<p>Which of the following is better practice in Java 8?</p>\n\n<p>Java 8:</p>\n\n<pre><code>joins.forEach(join -&gt; mIrc.join(mSession, join));\n</code></pre>\n\n<p>Java 7:</p>\n\n<pre><code>for (String join : joins) {\n    mIrc.join(mSession, join);\n}\n</code></pre>\n\n<p>I have lots of for loops that could be \"simplified\" with lambdas, but is there really any advantage of using them including performance and readability?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I'll also extend this question to longer methods - I know that you cant return or break the parent function from a lambda and this should be mentioned to if they are compared, but is there anything else to be considered?</p>\n", "tags": ["java", "for-loop", "java-8"], "title": "Java 8 Iterable.forEach() vs foreach loop", "answers": [{"body": "<p>The advantage comes into account when the operations can be executed in parallel. (See <a href=\"http://java.dzone.com/articles/devoxx-2012-java-8-lambda-and\">http://java.dzone.com/articles/devoxx-2012-java-8-lambda-and</a> - the section about internal and external iteration)</p>\n\n<ul>\n<li><p>The main advantage from my point of view is that the implementation of what is to be done within the loop can be defined without having to decide if it will be executed in parallel or sequential</p></li>\n<li><p>If you want your loop to be executed in parallel you could simply write</p>\n\n<pre><code> joins.parallelStream().forEach((join) -&gt; mIrc.join(mSession, join));\n</code></pre>\n\n<p>You will have to write some extra code for thread handling etc.</p></li>\n</ul>\n\n<p><strong>Note :</strong>\nfor my answer I assumed joins implementing the <code>java.util.Stream</code> interface. If joins implements only the <code>java.util.Iterable</code> interface this is no longer true. </p>\n", "title": "Java 8 Iterable.forEach() vs foreach loop", "tags": ["java", "for-loop", "java-8"], "link": "http://stackoverflow.com/questions/16635398/java-8-iterable-foreach-vs-foreach-loop/16635489#16635489", "question_id": 16635398, "answer_id": 16635489}, {"body": "<p>I feel that I need to extend my comment a bit...</p>\n\n<p><em>About paradigm\\style</em></p>\n\n<p>That's probably the most notable aspect. FP became popular due to what you can get avoiding side-effects. I won't delve deep into what pros\\cons you can get from this, since this is not related to the question.</p>\n\n<p>However, I will say that the iteration using Iterable.forEach is inspired by FP and rather result of bringing more FP to Java (ironically, I'd say that there is no much use for forEach in pure FP, since it does nothing except introducing side-effects).</p>\n\n<p>In the end I would say that it is rather a matter of taste\\style\\paradigm you are currently writing in.</p>\n\n<p><em>About parallelism.</em></p>\n\n<p>From performance point of view there is no promised notable benefits from using Iterable.forEach over foreach(...).</p>\n\n<p>According to official <a href=\"http://download.java.net/jdk8/docs/api/java/lang/Iterable.html#forEach%28java.util.function.Consumer%29\" rel=\"nofollow\">docs on Iterable.forEach</a> :</p>\n\n<blockquote>\n  <p>Performs the given action on the contents of the Iterable, <strong>in the\n  order elements occur</strong> when iterating, until all elements have been\n  processed or the action throws an exception.</p>\n</blockquote>\n\n<p>... i.e. docs pretty much clear that there will be no implicit parallelism. Adding one would be LSP violation.</p>\n\n<p>Now, there are \"parallell collections\" that are promised in Java 8, but to work with those you need to me more explicit and put some extra care to use them (see mschenk74's answer for example).</p>\n\n<p>BTW: in this case <a href=\"http://download.java.net/jdk8/docs/api/java/util/stream/Stream.html#forEach%28java.util.function.Consumer%29\" rel=\"nofollow\">Stream.forEach</a> will be used, and it doesn't guarantee that actual work will be done in parallell (depends on underlying collection).</p>\n\n<p><strong>UPDATE:</strong> might be not that obvious and a little stretched at a glance but there is another facet of style and readability perspective.</p>\n\n<p>First of all - plain old forloops are plain and old. Everybody already knows them.</p>\n\n<p>Second, and more important - you probably want to use Iterable.forEach only with one-liner lambdas. If \"body\" gets heavier - they tend to be not-that readable.\nYou have 2 options from here - use inner classes (yuck) or use plain old forloop.\nPeople often gets annoyed when they see the same things (iteratins over collections) being done various vays/styles in the same codebase, and this seems to be the case.</p>\n\n<p>Again, this might or might not be an issue. Depends on people working on code.</p>\n", "title": "Java 8 Iterable.forEach() vs foreach loop", "tags": ["java", "for-loop", "java-8"], "link": "http://stackoverflow.com/questions/16635398/java-8-iterable-foreach-vs-foreach-loop/16636899#16636899", "question_id": 16635398, "answer_id": 16636899}, {"body": "<p><code>forEach()</code> can be implemented to be faster than for-each loop, because the iterable knows the best way to iterate its elements, as opposed to the standard iterator way. So the difference is loop internally or loop externally. </p>\n\n<p>For example <code>ArrayList.forEach(action)</code> may be simply implemented as </p>\n\n<pre><code>for(int i=0; i&lt;size; i++)\n    action.accept(elements[i])\n</code></pre>\n\n<p>as opposed to the for-each loop which requires a lot of scaffolding </p>\n\n<pre><code>Iterator iter = list.iterator();\nwhile(iter.hasNext())\n    Object next = iter.next();\n    do something with `next`\n</code></pre>\n\n<p>However, we also need to account for two overhead costs by using <code>forEach()</code>, one is making the lambda object, the other is invoking the lambda method. They are probably not significant.</p>\n\n<p>see also <a href=\"http://journal.stuffwithstuff.com/2013/01/13/iteration-inside-and-out/\" rel=\"nofollow\">http://journal.stuffwithstuff.com/2013/01/13/iteration-inside-and-out/</a> for comparing internal/external iterations for different use cases.</p>\n", "title": "Java 8 Iterable.forEach() vs foreach loop", "tags": ["java", "for-loop", "java-8"], "link": "http://stackoverflow.com/questions/16635398/java-8-iterable-foreach-vs-foreach-loop/16637740#16637740", "question_id": 16635398, "answer_id": 16637740}, {"body": "<p>The better practice is to use <code>for-each</code>. Besides violating the <em>Keep It Simple, Stupid</em> principle, the new-fangled <code>forEach()</code> has at least the following deficiencies:</p>\n\n<ul>\n<li><p><strong>Can't use non-final variables</strong>. So, code like the following can't be turned into a forEach lambda:</p>\n\n<blockquote>\n<pre><code>Object prev = null;\nfor(Object curr : list)\n{\n    if( prev != null )\n        foo(prev, curr);\n    prev = curr;\n}\n</code></pre>\n</blockquote></li>\n<li><p><strong>Can't handle checked exceptions</strong>. Lambdas aren't actually forbidden from throwing checked exceptions, but common functional interfaces like <code>Consumer</code> don't declare any. Therefore, any code that throws checked exceptions must wrap them in <code>try-catch</code> or <code>Throwables.propagate()</code>. But even if you do that, it's not always clear what happens to the thrown exception. It could get swallowed somewhere in the guts of <code>forEach()</code></p></li>\n<li><p><strong>Limited flow-control</strong>. A <code>return</code> in a lambda equals a <code>continue</code> in a for-each, but there is no equivalent to a <code>break</code>. It's also difficult to do things like return values,  short circuit, or <em>set flags</em> (which would have alleviated things a bit, if it wasn't a violation of the <em>no non-final variables</em> rule). <a href=\"http://journal.stuffwithstuff.com/2013/01/13/iteration-inside-and-out/\">\"This is not just an optimization, but critical when you consider that some sequences (like reading the lines in a file) may have side-effects, or you may have an infinite sequence.\"</a></p></li>\n<li><p><strong>Might execute in parallel</strong>, which is a horrible, horrible thing for all but the 0.1% of your code that needs to be optimized. Any parallel code has to be thought through (even if it doesn't use locks, volatiles, and other particularly nasty aspects of traditional multi-threaded execution). Any bug will be tough to find.</p></li>\n<li><p><strong>Might hurt performance</strong>, because the JIT can't optimize forEach()+lambda to the same extent as plain loops, especially now that lambdas are new. By \"optimization\" I do not mean the overhead of calling lambdas (which is small), but to the sophisticated analysis and transformation that the modern JIT compiler performs on running code.</p></li>\n<li><p><strong>If you do need parallelism,  it is probably much faster and not much more difficult to use an ExecutorService</strong>. Streams are both automagical (read: don't know much about your problem) <em>and</em> use a specialized (read: inefficient for the general case) parallelization strategy (<a href=\"https://programmers.stackexchange.com/questions/250169/is-the-fork-join-framework-a-bad-match-for-the-java-8-streams-api\">fork-join recursive decomposition</a>).</p></li>\n<li><p><strong>Makes debugging more confusing</strong>, because of the nested call hierarchy and, god forbid, parallel execution. The debugger may have issues displaying variables from the surrounding code, and things like step-through may not work as expected.</p></li>\n<li><p><strong>Streams in general are more difficult to code, read, and debug</strong>. Actually, this is true of complex \"<a href=\"https://en.wikipedia.org/wiki/Fluent_interface\">fluent</a>\" APIs in general. The combination of complex single statements, heavy use of generics, and lack of intermediate variables conspire to produce confusing error messages and frustrate debugging. Instead of \"this method doesn't have an overload for type X\" you get an error message closer to \"somewhere you messed up the types, but we don't know where or how.\" Similarly, you can't step through and examine things in a debugger as easily as when the code is broken into multiple statements, and intermediate values are saved to variables. Finally, reading the code and understanding the types and behavior at each stage of execution may be non-trivial.</p></li>\n<li><p><strong>Sticks out like a sore thumb</strong>. The Java language already has the for-each statement. Why replace it with a function call? Why encourage hiding side-effects somewhere in expressions? Why encourage unwieldy one-liners? Mixing regular for-each and new forEach willy-nilly is bad style. Code should speak in idioms (patterns that are quick to comprehend due to their repetition), and the fewer idioms are used the clearer the code is and less time is spent deciding which idiom to use (a big time-drain for perfectionists like myself!).</p></li>\n</ul>\n\n<p>As you can see, I'm not a big fan of the forEach() except in cases when it makes sense.</p>\n\n<p>Particularly offensive to me is the fact that <code>Stream</code> does not implement <code>Iterable</code> (despite actually having method <code>iterator</code>) and cannot be used in a for-each, only with a forEach(). I recommend casting Streams into Iterables with <code>(Iterable&lt;T&gt;)stream::iterator</code>. A better alternative is to use <a href=\"https://github.com/amaembo/streamex\">StreamEx</a> which fixes a number of Stream API problems, including implementing <code>Iterable</code>.</p>\n\n<p>That said, <code>forEach()</code> is useful for the following:</p>\n\n<ul>\n<li><p><strong>Atomically iterating over a synchronized list</strong>. Prior to this, a list generated with <code>Collections.synchronizedList()</code> was atomic with respect to things like get or set, but was not thread-safe when iterating.</p></li>\n<li><p><strong>Parallel execution (using an appropriate parallel stream)</strong>. This saves you a few lines of code vs using an ExecutorService, if your problem matches the performance assumptions built into Streams and Spliterators.</p></li>\n<li><p><strong>Specific containers which</strong>, like the synchronized list, benefit from being in control of iteration (although this is largely theoretical unless people can bring up more examples)</p></li>\n<li><p><strong>Calling a single function more cleanly</strong> by using <code>forEach()</code> and a method reference argument (ie, <code>list.forEach (obj::someMethod)</code>). However, keep in mind the points on checked exceptions, more difficult debugging, and reducing the number of idioms you use when writing code.</p></li>\n</ul>\n\n<p>Articles I used for reference:</p>\n\n<ul>\n<li><a href=\"http://www.techempower.com/blog/2013/03/26/everything-about-java-8/\">Everything about Java 8</a></li>\n<li><a href=\"http://journal.stuffwithstuff.com/2013/01/13/iteration-inside-and-out/\">Iteration Inside and Out</a> (as pointed out by another poster)</li>\n</ul>\n\n<p><strong>EDIT:</strong> Looks like some of the original proposals for lambdas (such as <a href=\"http://www.javac.info/closures-v06a.html\">http://www.javac.info/closures-v06a.html</a>) solved some of the issues I mentioned (while adding their own complications, of course).</p>\n", "title": "Java 8 Iterable.forEach() vs foreach loop", "tags": ["java", "for-loop", "java-8"], "link": "http://stackoverflow.com/questions/16635398/java-8-iterable-foreach-vs-foreach-loop/20177092#20177092", "question_id": 16635398, "answer_id": 20177092}, {"body": "<p>When reading this question one can get the impression, that <code>Iterable#forEach</code> in combination with lambda expressions is a shortcut/replacement for writing a traditional for-each loop. This is simply not true. This code from the OP:</p>\n\n<pre><code>joins.forEach(join -&gt; mIrc.join(mSession, join));\n</code></pre>\n\n<p>is <strong>not</strong> intended as a shortcut for writing</p>\n\n<pre><code>for (String join : joins) {\n    mIrc.join(mSession, join);\n}\n</code></pre>\n\n<p>and should certainly not be used in this way. Instead it is intended as a shortcut (although it is <em>not</em> exactly the same) for writing</p>\n\n<pre><code>joins.forEach(new Consumer&lt;T&gt;() {\n    @Override\n    public void accept(T join) {\n        mIrc.join(mSession, join);\n    }\n});\n</code></pre>\n\n<p>And it is as a replacement for the following Java 7 code:</p>\n\n<pre><code>final Consumer&lt;T&gt; c = new Consumer&lt;T&gt;() {\n    @Override\n    public void accept(T join) {\n        mIrc.join(mSession, join);\n    }\n};\nfor (T t : joins) {\n    c.accept(t);\n}\n</code></pre>\n\n<p>Replacing the body of a loop with a functional interface, as in the examples above, makes your code more explicit: You are saying that (1) the body of the loop does not affect the surrounding code and control flow, and (2) the body of the loop may be replaced with a different implementation of the function, without affecting the surrounding code. Not being able to access non final variables of the outer scope is not a deficit of functions/lambdas, it is a <strong>feature</strong> that distinguishes the semantics of <code>Iterable#forEach</code> from the semantics of a traditional for-each loop. Once one gets used to the syntax of <code>Iterable#forEach</code>, it makes the code more readable, because you immediately get this additional information about the code.</p>\n\n<p>Traditional for-each loops will certainly stay <em>good practice</em> (to avoid the overused term \"<a href=\"http://en.wikipedia.org/wiki/Best_practice\">best practice</a>\") in Java. But this doesn't mean, that <code>Iterable#forEach</code> should be considered bad practice or bad style. It is always good practice, to use the right tool for doing the job, and this includes mixing traditional for-each loops with <code>Iterable#forEach</code>, where it makes sense.</p>\n\n<p>Since the downsides of <code>Iterable#forEach</code> have already been discussed in this thread, here are some reasons, why you might probably want to use <code>Iterable#forEach</code>:</p>\n\n<ul>\n<li><p><strong>To make your code more explicit:</strong> As described above, <code>Iterable#forEach</code> <em>can</em> make your code more explicit and readable in some situations.</p></li>\n<li><p><strong>To make your code more extensible and maintainable:</strong> Using a function as the body of a loop allows you to replace this function with different implementations (see <a href=\"http://en.wikipedia.org/wiki/Strategy_pattern\">Strategy Pattern</a>). You could e.g. easily replace the lambda expression with a method call, that may be overwritten by sub-classes:</p>\n\n<pre><code>joins.forEach(getJoinStrategy());\n</code></pre>\n\n<p>Then you could provide default strategies using an enum, that implements the functional interface. This not only makes your code more extensible, it also increases maintainability because it decouples the loop implementation from the loop declaration. </p></li>\n<li><p><strong>To make your code more debuggable:</strong> Seperating the loop implementation from the declaration can also make debugging more easy, because you could have a specialized debug implementation, that prints out debug messages, without the need to clutter your main code with <code>if(DEBUG)System.out.println()</code>. The debug implementation could e.g. be a <a href=\"http://en.wikipedia.org/wiki/Delegation_pattern\">delegate</a>, that <a href=\"http://en.wikipedia.org/wiki/Decorator_pattern\">decorates</a> the actual function implementation. </p></li>\n<li><p><strong>To optimize performance-critical code:</strong> Contrary to some of the assertions in this thread, <code>Iterable#forEach</code> <em>does</em> already provide better performance than a traditional for-each loop, at least when using ArrayList and running Hotspot in \"-client\" mode. While this performance boost is small and negligible for most use cases, there are situations, where this extra performance can make a difference. E.g. library maintainers will certainly want to evaluate, if some of their existing loop implementations should be replaced with <code>Iterable#forEach</code>.</p>\n\n<p>To back this statement up with facts, I have done some micro-benchmarks with <a href=\"https://code.google.com/p/caliper/\">Caliper</a>. Here is the test code (latest Caliper from git is needed):</p>\n\n<pre><code>@VmOptions(\"-server\")\npublic class Java8IterationBenchmarks {\n\n    public static class TestObject {\n        public int result;\n    }\n\n    public @Param({\"100\", \"10000\"}) int elementCount;\n\n    ArrayList&lt;TestObject&gt; list;\n    TestObject[] array;\n\n    @BeforeExperiment\n    public void setup(){\n        list = new ArrayList&lt;&gt;(elementCount);\n        for (int i = 0; i &lt; elementCount; i++) {\n            list.add(new TestObject());\n        }\n        array = list.toArray(new TestObject[list.size()]);\n    }\n\n    @Benchmark\n    public void timeTraditionalForEach(int reps){\n        for (int i = 0; i &lt; reps; i++) {\n            for (TestObject t : list) {\n                t.result++;\n            }\n        }\n        return;\n    }\n\n    @Benchmark\n    public void timeForEachAnonymousClass(int reps){\n        for (int i = 0; i &lt; reps; i++) {\n            list.forEach(new Consumer&lt;TestObject&gt;() {\n                @Override\n                public void accept(TestObject t) {\n                    t.result++;\n                }\n            });\n        }\n        return;\n    }\n\n    @Benchmark\n    public void timeForEachLambda(int reps){\n        for (int i = 0; i &lt; reps; i++) {\n            list.forEach(t -&gt; t.result++);\n        }\n        return;\n    }\n\n    @Benchmark\n    public void timeForEachOverArray(int reps){\n        for (int i = 0; i &lt; reps; i++) {\n            for (TestObject t : array) {\n                t.result++;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>And here are the results:</p>\n\n<ul>\n<li><a href=\"https://microbenchmarks.appspot.com/runs/75b4e5a3-e94b-41e2-85cc-c3211baa8b6f#r:scenario.benchmarkSpec.methodName&amp;c:scenario.benchmarkSpec.parameters.elementCount\">Results for -client</a></li>\n<li><a href=\"https://microbenchmarks.appspot.com/runs/1c1f2842-b0b3-4b59-9bf3-404741d6b4ea#r:scenario.benchmarkSpec.methodName&amp;c:scenario.benchmarkSpec.parameters.elementCount\">Results for -server</a></li>\n</ul>\n\n<p>When running with \"-client\", <code>Iterable#forEach</code> outperforms the traditional for loop over an ArrayList, but is still slower than directly iterating over an array. When running with \"-server\", the performance of all approaches is about the same.</p></li>\n<li><p><strong>To provide optional support for parallel execution:</strong> It has already been said here, that the possibility to execute the functional interface of <code>Iterable#forEach</code> in parallel using <a href=\"http://download.java.net/lambda/b86/docs/api/java/util/stream/package-summary.html\">streams</a>, is certainly an important aspect. Since <code>Collection#parallelStream()</code> does not guarantee, that the loop is actually executed in parallel, one must consider this an <em>optional</em> feature. By iterating over your list with <code>list.parallelStream().forEach(...);</code>, you explicitly say: This loop <em>supports</em> parallel execution, but it does not depend on it. Again, this is a feature and not a deficit!</p>\n\n<p>By moving the decision for parallel execution away from your actual loop implementation, you allow optional optimization of your code, without affecting the code itself, which is a good thing. Also, if the default parallel stream implementation does not fit your needs, no one is preventing you from providing your own implementation. You could e.g. provide an optimized collection depending on the underlying operating system, on the size of the collection, on the number of cores, and on some preference settings: </p>\n\n<pre><code>public abstract class MyOptimizedCollection&lt;E&gt; implements Collection&lt;E&gt;{\n    private enum OperatingSystem{\n        LINUX, WINDOWS, ANDROID\n    }\n    private OperatingSystem operatingSystem = OperatingSystem.WINDOWS;\n    private int numberOfCores = Runtime.getRuntime().availableProcessors();\n    private Collection&lt;E&gt; delegate;\n\n    @Override\n    public Stream&lt;E&gt; parallelStream() {\n        if (!System.getProperty(\"parallelSupport\").equals(\"true\")) {\n            return this.delegate.stream();\n        }\n        switch (operatingSystem) {\n            case WINDOWS:\n                if (numberOfCores &gt; 3 &amp;&amp; delegate.size() &gt; 10000) {\n                    return this.delegate.parallelStream();\n                }else{\n                    return this.delegate.stream();\n                }\n            case LINUX:\n                return SomeVerySpecialStreamImplementation.stream(this.delegate.spliterator());\n            case ANDROID:\n            default:\n                return this.delegate.stream();\n        }\n    }\n}\n</code></pre>\n\n<p>The nice thing here is, that your loop implementation doesn't need to know or care about these details.</p></li>\n</ul>\n", "title": "Java 8 Iterable.forEach() vs foreach loop", "tags": ["java", "for-loop", "java-8"], "link": "http://stackoverflow.com/questions/16635398/java-8-iterable-foreach-vs-foreach-loop/22502206#22502206", "question_id": 16635398, "answer_id": 22502206}, {"body": "<p><em>TL;DR</em>: <code>List.stream().forEach()</code> was the fastest.</p>\n\n<p>I felt I should add my results from benchmarking iteration.\nI took a very simple approach (no benchmarking frameworks) and benchmarked 5 different methods:</p>\n\n<ol>\n<li>classic <code>for</code></li>\n<li>classic foreach</li>\n<li><code>List.forEach()</code></li>\n<li><code>List.stream().forEach()</code></li>\n<li><code>List.parallelStream().forEach</code></li>\n</ol>\n\n<h2>the testing procedure and parameters</h2>\n\n<pre><code>private List&lt;Integer&gt; list;\nprivate final int size = 1_000_000;\n\npublic MyClass(){\n    list = new ArrayList&lt;&gt;();\n    Random rand = new Random();\n    for (int i = 0; i &lt; size; ++i) {\n        list.add(rand.nextInt(size * 50));\n    }    \n}\nprivate void doIt(Integer i) {\n    i *= 2; //so it won't get JITed out\n}\n</code></pre>\n\n<p>The list in this class shall be iterated over and have some <code>doIt(Integer i)</code> applied to all it's members, each time via a different method.\nin the Main class I run the tested method three times to warm up the JVM. I then run the test method 1000 times summing the time it takes for each iteration method (using <code>System.nanoTime()</code>). After that's done i divide that sum by 1000 and that's the result, average time.\nexample:</p>\n\n<pre><code>myClass.fored();\nmyClass.fored();\nmyClass.fored();\nfor (int i = 0; i &lt; reps; ++i) {\n    begin = System.nanoTime();\n    myClass.fored();\n    end = System.nanoTime();\n    nanoSum += end - begin;\n}\nSystem.out.println(nanoSum / reps);\n</code></pre>\n\n<p>I ran this on a i5 4 core CPU, with java version 1.8.0_05</p>\n\n<h2>classic <code>for</code></h2>\n\n<pre><code>for(int i = 0, l = list.size(); i &lt; l; ++i) {\n    doIt(list.get(i));\n}\n</code></pre>\n\n<p>execution time: 4.21 ms</p>\n\n<h2>classic foreach</h2>\n\n<pre><code>for(Integer i : list) {\n    doIt(i);\n}\n</code></pre>\n\n<p>execution time: 5.95 ms</p>\n\n<h2><code>List.forEach()</code></h2>\n\n<pre><code>list.forEach((i) -&gt; doIt(i));\n</code></pre>\n\n<p>execution time: 3.11 ms</p>\n\n<h2><code>List.stream().forEach()</code></h2>\n\n<pre><code>list.stream().forEach((i) -&gt; doIt(i));\n</code></pre>\n\n<p>execution time: 2.79 ms</p>\n\n<h2><code>List.parallelStream().forEach</code></h2>\n\n<pre><code>list.parallelStream().forEach((i) -&gt; doIt(i));\n</code></pre>\n\n<p>execution time: 3.6 ms</p>\n", "title": "Java 8 Iterable.forEach() vs foreach loop", "tags": ["java", "for-loop", "java-8"], "link": "http://stackoverflow.com/questions/16635398/java-8-iterable-foreach-vs-foreach-loop/25855691#25855691", "question_id": 16635398, "answer_id": 25855691}, {"body": "<p>One of most upleasing functional <code>forEach</code>'s limitations is lack of checked exceptions support.</p>\n\n<p>One <a href=\"http://stackoverflow.com/questions/31702989/how-to-iterate-with-foreach-loop-over-java-8-stream\">possible workaround</a> is to replace terminal <code>forEach</code> with plain old foreach loop:</p>\n\n<pre><code>    Stream&lt;String&gt; stream = Stream.of(\"\", \"1\", \"2\", \"3\").filter(s -&gt; !s.isEmpty());\n    Iterable&lt;String&gt; iterable = stream::iterator;\n    for (String s : iterable) {\n        fileWriter.append(s);\n    }\n</code></pre>\n\n<p>Here is list of most popular questions with other workarounds on checked exception handling within lambdas and streams:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/18198176/java-8-lambda-function-that-throws-exception\">Java 8 Lambda function that throws exception?</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/19757300/java-8-lambda-streams-filter-by-method-with-exception\">Java 8: Lambda-Streams, Filter by Method with Exception</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/27644361/how-can-i-throw-checked-exceptions-from-inside-java-8-streams\">How can I throw CHECKED exceptions from inside Java 8 streams?</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/14039995/java-8-mandatory-checked-exceptions-handling-in-lambda-expressions-why-mandato\">Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?</a></p>\n", "title": "Java 8 Iterable.forEach() vs foreach loop", "tags": ["java", "for-loop", "java-8"], "link": "http://stackoverflow.com/questions/16635398/java-8-iterable-foreach-vs-foreach-loop/31707746#31707746", "question_id": 16635398, "answer_id": 31707746}], "creation_date": 1368971842, "score": 221, "link": "http://stackoverflow.com/questions/16635398/java-8-iterable-foreach-vs-foreach-loop", "question_id": 16635398}, {"body": "<p>In Java we use <code>final</code> keyword to variables to make its values not to be changed.\nBut I see that you can change the value in the constructor / methods of the class. Again, if the variable is <code>static</code> then it is a compilation error.</p>\n\n<p>Here is the code: </p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\nclass Test {\n  private final List foo;\n\n  public Test()\n  {\n      foo = new ArrayList();\n      foo.add(\"foo\"); // Modification-1\n  }\n  public static void main(String[] args) \n  {\n      Test t = new Test();\n      t.foo.add(\"bar\"); // Modification-2\n      System.out.println(\"print - \" + t.foo);\n  }\n}\n</code></pre>\n\n<p>Above code works fine and no errors.</p>\n\n<p>Now change the variable as <code>static</code>:</p>\n\n<pre><code>private static final List foo;\n</code></pre>\n\n<p>Now it is a compilation error. How does this <code>final</code> really work?</p>\n", "tags": ["java", "final"], "title": "How final keyword works", "answers": [{"body": "<p>You are always allowed to <em>initialize</em> a <code>final</code> variable.  The compiler makes sure that you can do it only once. </p>\n\n<p>Note that calling methods on an object stored in a <code>final</code> variable has nothing to do with the semantics of <code>final</code>. In other words: <code>final</code> is only about the reference itself, and not about the contents of the referenced object.</p>\n\n<p>Java has no concept of object immutability; this is achieved by carefully designing the object, and is a far-from-trivial endeavor.</p>\n", "title": "How final keyword works", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/15655012/how-final-keyword-works/15655032#15655032", "question_id": 15655012, "answer_id": 15655032}, {"body": "<ol>\n<li>Since the final variable is non-static, it can be initialized in constructor. But if you make it static it can not be initialized by constructor (because constructors are not static).</li>\n<li>Addition to list is not expected to stop by making list final. <code>final</code> just binds the reference to particular object. You are free to change the 'state' of that object, but not the object itself.</li>\n</ol>\n", "title": "How final keyword works", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/15655012/how-final-keyword-works/15655036#15655036", "question_id": 15655012, "answer_id": 15655036}, {"body": "<p>If you make <code>foo</code> static, you must initialize it in the class constructor (or inline where you define it) like the following examples.</p>\n\n<p><strong>Class constructor (not instance):</strong></p>\n\n<pre><code>private static final List foo;\n\nstatic\n{\n   foo = new ArrayList();\n}\n</code></pre>\n\n<p><strong>Inline:</strong></p>\n\n<pre><code>private static final List foo = new ArrayList();\n</code></pre>\n\n<p>The problem here is not how the <code>final</code> modifier works, but rather how the <code>static</code> modifier works. </p>\n\n<p>The <code>final</code> modifier enforces an initialization of your reference by the time the call to your constructor completes (i.e. you must initialize it in the constructor).</p>\n\n<p>When you initialize an attribute in-line, it gets initialized before the code you have defined for the constructor is run, so you get the following outcomes:</p>\n\n<ul>\n<li>if <code>foo</code> is <code>static</code>, <code>foo = new ArrayList()</code> will be executed before the <code>static{}</code> constructor you have defined for your class is executed</li>\n<li>if <code>foo</code> is not <code>static</code>, <code>foo = new ArrayList()</code> will be executed before your constructor is run</li>\n</ul>\n\n<p>When you do not initilize an attribute in-line, the <code>final</code> modifier enforces that you initialize it and that you must do so in the constructor. If you also have a <code>static</code> modifier, the constructor you will have to initialize the attribute in is the class' initialization block : <code>static{}</code>.</p>\n\n<p>The error you get in your code is from the fact that <code>static{}</code> is run when the class is loaded, before the time you instantiate an object of that class. Thus, you will have not initialized <code>foo</code> when the class is created. </p>\n\n<p>Think of the <code>static{}</code> block as a constructor for an object of type <code>Class</code>. This is where you must do the initialization of your <code>static final</code> class attributes (if not done inline).</p>\n\n<p><strong>Side note:</strong></p>\n\n<p>The <code>final</code> modifier assures const-ness only for primitive types and references. </p>\n\n<p>When you declare a <code>final</code> object, what you get is a <code>final</code> <strong>reference</strong> to that object, but the object itself is not constant. </p>\n\n<p>What you are really achieving when declaring a <code>final</code> attribute is that, once you declare an object for your specific purpose (like the <code>final List</code> that you have declared), that and only that object will be used for that purpose: you will not be able to change <code>List foo</code> to another <code>List</code>, but you can still alter your <code>List</code> by adding/removing items (the <code>List</code> you are using will be the same, only with its contents altered).</p>\n", "title": "How final keyword works", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/15655012/how-final-keyword-works/15655071#15655071", "question_id": 15655012, "answer_id": 15655071}, {"body": "<p>When you make it static final it should be initialized in a static initialization block</p>\n\n<pre><code>    private static final List foo;\n\n    static {\n        foo = new ArrayList();\n    }\n\n    public Test()\n    {\n//      foo = new ArrayList();\n        foo.add(\"foo\"); // Modification-1\n    }\n</code></pre>\n", "title": "How final keyword works", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/15655012/how-final-keyword-works/15655112#15655112", "question_id": 15655012, "answer_id": 15655112}, {"body": "<p>The <code>final</code> keyword indicates that a variable may only be initialized once.  In your code you are only performing one initialization of final so the terms are satisfied.  This statement performs the lone initialization of <code>foo</code>.  Note that <code>final</code> != immutable, it only means that the reference cannot change.</p>\n\n<pre><code>foo = new ArrayList();\n</code></pre>\n\n<p>When you declare <code>foo</code> as <code>static final</code> the variable must be initialized when the class is loaded and cannot rely on instantiation (aka call to constructor) to initialize <code>foo</code> since static fields must be available without an instance of a class.  There is no guarantee that the constructor will have been called prior to using the static field.</p>\n\n<p>When you execute your method under the <code>static final</code> scenario the <code>Test</code> class is loaded prior to instantiating <code>t</code> at this time there is no instantiation of <code>foo</code> meaning it has not been initialized so <code>foo</code> is set to the default for all objects which is <code>null</code>.  At this point I assume your code throws a <code>NullPointerException</code> when you attempt to add an item to the list.</p>\n", "title": "How final keyword works", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/15655012/how-final-keyword-works/15655134#15655134", "question_id": 15655012, "answer_id": 15655134}, {"body": "<p><em>Final</em> keyword has a numerous way to use:</p>\n\n<ul>\n<li>A final <strong>class</strong> cannot be subclassed.</li>\n<li>A final <strong>method</strong> cannot be overridden by subclasses</li>\n<li>A final <strong>variable</strong> can only be initialized once</li>\n</ul>\n\n<p>Other usage:</p>\n\n<ul>\n<li><em>When an anonymous inner class is defined within the body of a method,\nall variables declared final in the scope of that method are\naccessible from within the inner class</em></li>\n</ul>\n\n<p>A static class variable will exist from the start of the JVM, and should be initialized in the class. The  error message won't appear if you do this.</p>\n", "title": "How final keyword works", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/15655012/how-final-keyword-works/15655140#15655140", "question_id": 15655012, "answer_id": 15655140}, {"body": "<p>The <code>final</code> keyword can be interpreted in two different ways depending on what it's used on:</p>\n\n<p><strong>Data types:</strong> For <code>int</code>s, <code>double</code>s etc, it will ensure that the value cannot change,</p>\n\n<p><strong>Reference types:</strong> For references to objects, <code>final</code> ensures that the <strong>reference</strong> will never change, meaning that it will always refer to the same object. It makes no guarantees whatsoever about the values inside the object being referred to staying the same.</p>\n\n<p>As such, <code>final List foo;</code> ensures that <code>foo</code> always refers to <em>the same</em> list, but <em>the contents</em> of said list may change over time.</p>\n", "title": "How final keyword works", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/15655012/how-final-keyword-works/15655179#15655179", "question_id": 15655012, "answer_id": 15655179}, {"body": "<p>This is <strong>favorite interview question</strong>. Interviewer tries to find out here, how much you understand about behavior of objects with respect to constructors, methods, class variables(static variables), instance variables.<br></p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\nclass Test {\n    private final List foo;\n\n    public Test() {\n        foo = new ArrayList();\n        foo.add(\"foo\"); // Modification-1\n    }\n\n    public void setFoo(List foo) {\n//      this.foo = foo;  //compile time error.\n    }\n}\n</code></pre>\n\n<p>In above case we have defined <code>Test</code> constructor and <code>setFoo</code> method. <br>\n<strong>About constructor:</strong>  Constructor can be invoked only <strong>one</strong> time per object creation by using <code>new</code> keyword. Programmer cannot invoke constructor many times because constructor are designed so. <br>\n<strong>About method:</strong> Method can be invoked as many time as programmer wants and compiler knows it programmer may invoke method zero or multiple time. <br></p>\n\n<p><strong>Scenario 1</strong><br></p>\n\n<pre><code>private final List foo;  // 1\n</code></pre>\n\n<p><code>foo</code> is an <strong>instance</strong> variable. When we create <code>Test</code> class' object then instance variable <code>foo</code> will be copied inside object of Test class. If we assign <code>foo</code> inside constructor then compiler know that Constructor will be invoked only one time. so there is no problem to assign it inside constructor.\n<br><br>\nIf we assign <code>foo</code> inside method then compiler knows that method may be invoked multiple time. So value will have to be changed multiple time which is not allowed for <code>final</code> variable. You can assign value to the final variable only one time. So compiler decides constructor is good choice!</p>\n\n<p><strong>Scenario 2</strong></p>\n\n<pre><code>private static final List foo = new ArrayList();\n</code></pre>\n\n<p><code>foo</code> is now <strong>static</strong> variable. When we create object of <code>Test</code> class then <code>foo</code> will not be copied to the object of <code>Test</code> class because <code>foo</code> is static. Now <code>foo</code> is not the property of each object. This is the property of Test class. But <code>foo</code> can be seen by many objects and if every object which is created by using new keyword which ultimately invoke <code>Test</code> constructor then value will be changed at the time of multiple object creation (Remember <code>static foo</code> is not copied in every object now but is shared between multiple objects.) <br></p>\n\n<p><strong>Scenario 3</strong> <br></p>\n\n<pre><code>t.foo.add(\"bar\"); // Modification-2\n</code></pre>\n\n<p>Above <code>Modification-2</code> is from your question. In above case you are not changing first referenced object but you are adding contents inside <code>foo</code> which is allowed. Compiler complains if you try to assign <code>new ArrayList()</code> object to the <code>foo</code> reference variable.<br>\n<strong>Rule</strong> is that if you have initialized object to <code>final</code> reference variable then you cannot change it to refer different <code>ArrayList</code> object. (in this case ArrayList)</p>\n\n<p><strong>final</strong> class cannot be subclassed<br>\n<strong>final</strong> methods cannot be overridden. (This method is in superclass)<br>\n<strong>final</strong> methods can override. (Read this in grammatical way. This method is in subclass)</p>\n", "title": "How final keyword works", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/15655012/how-final-keyword-works/15656208#15656208", "question_id": 15655012, "answer_id": 15656208}, {"body": "<p>Above all are correct. Further if you do not want others to create sub classes from your class, then declare your class as final. Then it becomes the leaf level of your class tree hierarchy that no one can extend it further. It is a good practice to avoid huge hierarchy of classes.</p>\n", "title": "How final keyword works", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/15655012/how-final-keyword-works/20736138#20736138", "question_id": 15655012, "answer_id": 20736138}, {"body": "<p><em><code>final</code></em> is a reserved keyword in Java to restrict the user and it can be applied to member variables, methods, class and local variables. Final variables are often declared with the <em><code>static</code></em> keyword in Java and are treated as constants. For example:</p>\n\n<pre><code>public static final String hello = \"Hello\";\n</code></pre>\n\n<p>When we use the <em><code>final</code></em> keyword with a variable declaration, the value stored inside that variable cannot be changed latter. </p>\n\n<p>For example:</p>\n\n<pre><code>public class ClassDemo {\n  private final int var1 = 3;\n  public ClassDemo() {\n    ...\n  }\n}\n</code></pre>\n\n<p><strong>Note</strong>: A class declared as final cannot be extended or inherited (i.e, there cannot be a subclass of the super class). It is also good to note that methods declared as final cannot be overridden by subclasses. </p>\n\n<p><strong>Benefits of using the final keyword are addressed in</strong> <a href=\"http://stackoverflow.com/questions/4279420/does-use-of-final-keyword-in-java-improve-the-performance\">this thread</a>.</p>\n", "title": "How final keyword works", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/15655012/how-final-keyword-works/21819558#21819558", "question_id": 15655012, "answer_id": 21819558}, {"body": "<p>First of all, the place in your code where you are initializing (i.e. assigning for the first time) foo is here:</p>\n\n<pre><code>foo = new ArrayList();\n</code></pre>\n\n<p>foo is an object (with type List) so it is a <em>reference</em> type, not a <em>value</em> type (like int). As such, it holds a reference to a memory location (e.g. 0xA7D2A834) where your List elements are stored. Lines like this</p>\n\n<pre><code>foo.add(\"foo\"); // Modification-1\n</code></pre>\n\n<p>do not change the value of foo (which, again, is just a reference to a memory location). Instead, they just add elements into that referenced memory location. To violate the <em>final</em> keyword, you would have to try to re-assign foo as follows again:</p>\n\n<pre><code>foo = new ArrayList();\n</code></pre>\n\n<p>That <em>would</em> give you a compilation error.</p>\n\n<hr>\n\n<p>Now, with that out of the way, think about what happens when you add the <em>static</em> keyword. </p>\n\n<p>When you do NOT have the static keyword, each object that instantiates the class has its own copy of foo. Therefore, the constructor assigns a value to a blank, fresh copy of the foo variable, which is perfectly fine.</p>\n\n<p>However, when you DO have the static keyword, only one foo exists in memory that is associated with the class. If you were to create two or more objects, the constructor would be attempting to re-assign that one foo each time, violating the <em>final</em> keyword.</p>\n", "title": "How final keyword works", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/15655012/how-final-keyword-works/24895623#24895623", "question_id": 15655012, "answer_id": 24895623}, {"body": "<p>This is a very good interview question. Sometimes they might even ask you what is the difference between a final object and immutable object.</p>\n\n<p>1) When someone mentions a final object, it means that the reference cannot be changed, but its state(instance variables) can be changed.  </p>\n\n<p>2) An immutable object is one whose state can <em>not</em> be changed, but its reference can be changed. \nEx:</p>\n\n<pre><code>    String x = new String(\"abc\"); \n    x = \"BCG\";\n</code></pre>\n\n<p>ref variable x can be changed to point a different string, but value of \"abc\" cannot be changed. </p>\n\n<p>3) Instance variables(non static fields) are initialized when a constructor is called. So you can initialize values to you variables inside a constructor.</p>\n\n<p>4) \"But i see that you can change the value in the constructor/methods of the class\". -- You cannot change it inside a method.</p>\n\n<p>5) A static variable is initialized during class loading. So you cannot initialize inside a constructor, it has to be done even before it. So you need to assign values to a static variable <em>during</em> declaration itself.</p>\n", "title": "How final keyword works", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/15655012/how-final-keyword-works/26025991#26025991", "question_id": 15655012, "answer_id": 26025991}, {"body": "<p>Suppose you have two moneyboxes, red and white. You assign these moneyboxes only two children and they are not allowed interchange their boxes. So You have red or white moneyboxes(final) you cannot modify the box but you can put money on your box.Nobody cares (Modification-2).</p>\n", "title": "How final keyword works", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/15655012/how-final-keyword-works/35046994#35046994", "question_id": 15655012, "answer_id": 35046994}, {"body": "<p>It is worth to mention some straightforward definitions:</p>\n\n<p><strong>Classes/Methods</strong></p>\n\n<blockquote>\n  <p>You can declare some or all of a class's methods final. You use the final keyword in a method declaration to indicate that the method cannot be overridden by subclasses.</p>\n</blockquote>\n\n<p><strong>Variables</strong></p>\n\n<blockquote>\n  <p>Once a final variable has been assigned, it always contains the same value. </p>\n</blockquote>\n\n<p>FINAL basically avoid overwrite/superscribe by anything (subclasses, variable \"reasign\", depending on the case.</p>\n", "title": "How final keyword works", "tags": ["java", "final"], "link": "http://stackoverflow.com/questions/15655012/how-final-keyword-works/38104833#38104833", "question_id": 15655012, "answer_id": 38104833}], "creation_date": 1364374938, "score": 201, "link": "http://stackoverflow.com/questions/15655012/how-final-keyword-works", "question_id": 15655012}, {"body": "<p>I saw the following code in <a href=\"https://github.com/mongodb/mongo-java-driver/blob/1d2e6faa80aeb5287a26d0348f18f4b51d566759/src/main/com/mongodb/ConnectionStatus.java#L213\">this commit</a> for <a href=\"https://github.com/mongodb/mongo-java-driver\">MongoDB's Java Connection driver</a>, and it appears at first to be a joke of some sort. What does the following code do?</p>\n\n<pre><code>if (!((_ok) ? true : (Math.random() &gt; 0.1))) {\n    return res;\n}\n</code></pre>\n\n<p>(EDIT: the code <a href=\"https://github.com/mongodb/mongo-java-driver/commit/8e02cd006d79acd1d0ae6604c2ee7537b250c044#diff-08d4a794472cb22d6bf2c4bb0615aa49L212\">has been updated since</a> posting this question)</p>\n", "tags": ["java", "mongodb", "obfuscation"], "title": "Why does the MongoDB Java driver use a random number generator in a conditional?", "answers": [{"body": "<p><a href=\"https://github.com/mongodb/mongo-java-driver/commit/d51b3648a8e1bf1a7b7886b7ceb343064c9e2225#commitcomment-3315694\">https://github.com/mongodb/mongo-java-driver/commit/d51b3648a8e1bf1a7b7886b7ceb343064c9e2225#commitcomment-3315694</a></p>\n\n<p>11 hours ago by gareth-rees:</p>\n\n<p>Presumably the idea is to log only about 1/10 of the server failures (and so avoid massively spamming the log), without incurring the cost of maintaining a counter or timer. (But surely maintaining a timer would be affordable?)</p>\n", "title": "Why does the MongoDB Java driver use a random number generator in a conditional?", "tags": ["java", "mongodb", "obfuscation"], "link": "http://stackoverflow.com/questions/16833100/why-does-the-mongodb-java-driver-use-a-random-number-generator-in-a-conditional/16833276#16833276", "question_id": 16833100, "answer_id": 16833276}, {"body": "<p>After inspecting the history of that line, my main conclusion is that there has been some incompetent programming at work.</p>\n\n<ol>\n<li><p>That line is gratuitously convoluted. The general form</p>\n\n<pre><code>a? true : b\n</code></pre>\n\n<p>for <code>boolean a, b</code> is equivalent to the simple</p>\n\n<pre><code>a || b\n</code></pre></li>\n<li><p>The surrounding negation and excessive parentheses convolute things further. Keeping in mind <a href=\"http://en.wikipedia.org/wiki/De_Morgan%27s_laws\">De Morgan's laws</a> it is a trivial observation that this piece of code amounts to</p>\n\n<pre><code>if (!_ok &amp;&amp; Math.random() &lt;= 0.1)\n  return res;\n</code></pre></li>\n<li><p>The commit that <a href=\"https://github.com/mongodb/mongo-java-driver/commit/ee7543a4f7cc26618cf78eab2a18bd33b3e101cc\">originally introduced this logic</a> had</p>\n\n<pre><code>if (_ok == true) {\n  _logger.log( Level.WARNING , \"Server seen down: \" + _addr, e );\n} else if (Math.random() &lt; 0.1) {\n  _logger.log( Level.WARNING , \"Server seen down: \" + _addr );\n}\n</code></pre>\n\n<p>&mdash;another example of incompetent coding, but notice the <em>reversed logic</em>: here the event is logged if either <code>_ok</code> or in 10% of other cases, whereas the code in 2. <em>returns</em> 10% of the times and logs 90% of the times. So the later commit ruined not only clarity, but correctness itself. </p>\n\n<p>I think in the code you have posted we can actually see how the author intended to transform the original <code>if-then</code> somehow literally into its negation required for the early <code>return</code> condition. But then he messed up and inserted an effective \"double negative\" by reversing the inequality sign.</p></li>\n<li><p>Coding style issues aside, stochastic logging is quite a dubious practice all by itself, especially since the log entry does not document its own peculiar behavior. The intention is, obviously, reducing restatements of the same fact: that the server is currently down. The appropriate solution is to log only <em>changes</em> of the server state, and not each its observation, let alone a random selection of 10% such observations. Yes, that takes just a little bit more effort, so let's see some.</p></li>\n</ol>\n\n<p>I can only hope that all this evidence of incompetence, accumulated from inspecting <em>just three lines of code</em>, does not speak fairly of the project as a whole, and that this piece of work will be cleaned up ASAP.</p>\n", "title": "Why does the MongoDB Java driver use a random number generator in a conditional?", "tags": ["java", "mongodb", "obfuscation"], "link": "http://stackoverflow.com/questions/16833100/why-does-the-mongodb-java-driver-use-a-random-number-generator-in-a-conditional/16833798#16833798", "question_id": 16833100, "answer_id": 16833798}, {"body": "<p>Add a class member initialized to negative 1:</p>\n\n<pre><code>  private int logit = -1;\n</code></pre>\n\n<p>In the try block, make the test:</p>\n\n<pre><code> if( !ok &amp;&amp; (logit = (logit + 1 ) % 10)  == 0 ) { //log error\n</code></pre>\n\n<p>This always logs the first error, then every tenth subsequent error. Logical operators \"short-circuit\", so logit only gets incremented on an actual error.</p>\n\n<p>If you want the first and tenth of <em>all</em> errors, regardless of the connection, make logit class static instead of a a member.</p>\n\n<p>As had been noted this should be thread safe:</p>\n\n<pre><code>private synchronized int getLogit() {\n   return (logit = (logit + 1 ) % 10);\n}\n</code></pre>\n\n<p>In the try block, make the test:</p>\n\n<pre><code> if( !ok &amp;&amp; getLogit() == 0 ) { //log error\n</code></pre>\n\n<p>Note: I don't think throwing out 90% of the errors is a good idea.</p>\n", "title": "Why does the MongoDB Java driver use a random number generator in a conditional?", "tags": ["java", "mongodb", "obfuscation"], "link": "http://stackoverflow.com/questions/16833100/why-does-the-mongodb-java-driver-use-a-random-number-generator-in-a-conditional/16861296#16861296", "question_id": 16833100, "answer_id": 16861296}, {"body": "<p>I have seen this kind of thing before.</p>\n\n<p>There was a piece of code that could answer certain 'questions' that came from another 'black box' piece of code. In the case it could not answer them, it would forward them to another piece of 'black box' code that was really slow.</p>\n\n<p>So sometimes previously unseen new 'questions' would show up, and they would show up in a batch, like 100 of them in a row.</p>\n\n<p>The programmer was happy with how the program was working, but he wanted some way of maybe improving the software in the future, if possible new questions were discovered.</p>\n\n<p>So, the solution was to log unknown questions, but as it turned out, there were 1000's of different ones. The logs got too big, and there was no benefit of speeding these up, since they had no obvious answers. But every once in a while, a batch of questions would show up that could be answered.</p>\n\n<p>Since the logs were getting too big, and the logging was getting in the way of logging the real important things he got to this solution:</p>\n\n<p>Only log a random 5%, this will clean up the logs, whilst in the long run still showing what questions/answers could be added.</p>\n\n<p>So, if an unknown event occurred, in a random amount of these cases, it would be logged.</p>\n\n<p>I think this is similar to what you are seeing here.</p>\n\n<p>I did not like this way of working, so I removed this piece of code, and just <strong>logged these\nmessages to a different file</strong>, so they were all present, but not clobbering the general logfile.</p>\n", "title": "Why does the MongoDB Java driver use a random number generator in a conditional?", "tags": ["java", "mongodb", "obfuscation"], "link": "http://stackoverflow.com/questions/16833100/why-does-the-mongodb-java-driver-use-a-random-number-generator-in-a-conditional/16937200#16937200", "question_id": 16833100, "answer_id": 16937200}], "creation_date": 1369907789, "score": 187, "link": "http://stackoverflow.com/questions/16833100/why-does-the-mongodb-java-driver-use-a-random-number-generator-in-a-conditional", "question_id": 16833100}, {"body": "<p>A sensitive operation in my lab today went completely wrong. An actuator on an electron microscope went over its boundary, and after a chain of events I lost $12 million of equipment. I've narrowed down over 40K lines in the faulty module to this:</p>\n\n<pre><code>import java.util.*;\n\nclass A {\n    static Point currentPos = new Point(1,2);\n    static class Point {\n        int x;\n        int y;\n        Point(int x, int y) {\n            this.x = x;\n            this.y = y;\n        }\n    }\n    public static void main(String[] args) {\n        new Thread() {\n            void f(Point p) {\n                synchronized(this) {}\n                if (p.x+1 != p.y) {\n                    System.out.println(p.x+\" \"+p.y);\n                    System.exit(1);\n                }\n            }\n            @Override\n            public void run() {\n                while (currentPos == null);\n                while (true)\n                    f(currentPos);\n            }\n        }.start();\n        while (true)\n            currentPos = new Point(currentPos.x+1, currentPos.y+1);\n    }\n}\n</code></pre>\n\n<p>Some samples of the output I'm getting:</p>\n\n<pre><code>$ java A\n145281 145282\n$ java A\n141373 141374\n$ java A\n49251 49252\n$ java A\n47007 47008\n$ java A\n47427 47428\n$ java A\n154800 154801\n$ java A\n34822 34823\n$ java A\n127271 127272\n$ java A\n63650 63651\n</code></pre>\n\n<p>Since there isn't any floating point arithmetic here, and we all know signed integers behave well on overflow in Java, I'd think there's nothing wrong with this code. However, despite the output indicating that the program didn't reach the exit condition, it reached the exit condition (it was both reached <strong>and</strong> not reached?). Why?</p>\n\n<hr>\n\n<p>I've noticed this doesn't happen in some environments. I'm on <a href=\"http://en.wikipedia.org/wiki/OpenJDK\">OpenJDK</a> 6 on 64-bit Linux.</p>\n", "tags": ["java", "concurrency", "order", "java-memory-model", "memory-visibility"], "title": "Why does this Java program terminate despite that apparently it shouldn&#39;t (and didn&#39;t)?", "answers": [{"body": "<p>Since <code>currentPos</code> is being changed outside of the thread it should be marked as <code>volatile</code>:</p>\n\n<pre><code>static volatile Point currentPos = new Point(1,2);\n</code></pre>\n\n<p>Without volatile the thread is not guaranteed to read in updates to currentPos that are being made in the main thread. So new values continue to be written for currentPos but thread is continuing to use the previous cached versions for performance reasons. Since only one thread modifies currentPos you can get away without locks which will improve performance.</p>\n\n<p>The results look much different if you read the values only a single time within the thread for use in the comparison and subsequent displaying of them.  When I do the following <code>x</code> always displays as <code>1</code> and <code>y</code> varies between <code>0</code> and some large integer.  I think the behavior of it at this point is somewhat undefined without the <code>volatile</code> keyword and it's possible that the JIT compilation of the code is contributing to it acting like this.  Also if I comment out the empty <code>synchronized(this) {}</code> block then the code works as well and I suspect it is because the locking causes sufficient delay that <code>currentPos</code> and its fields are reread rather than used from the cache.</p>\n\n<pre><code>int x = p.x + 1;\nint y = p.y;\n\nif (x != y) {\n    System.out.println(x+\" \"+y);\n    System.exit(1);\n}\n</code></pre>\n", "title": "Why does this Java program terminate despite that apparently it shouldn&#39;t (and didn&#39;t)?", "tags": ["java", "concurrency", "order", "java-memory-model", "memory-visibility"], "link": "http://stackoverflow.com/questions/16159203/why-does-this-java-program-terminate-despite-that-apparently-it-shouldnt-and-d/16159696#16159696", "question_id": 16159203, "answer_id": 16159696}, {"body": "<blockquote>\n  <p>Obviously the write to currentPos doesn't happen-before the read of it, but I don't see how that can be the issue.</p>\n</blockquote>\n\n<p><code>currentPos = new Point(currentPos.x+1, currentPos.y+1);</code> does a few things, including writing default values to <code>x</code> and <code>y</code> (0) and then writing their initial values in the constructor. Since your object is not safely published those 4 write operations can be freely reordered by the compiler / JVM.</p>\n\n<p>So from the perspective of the reading thread, it is a legal execution to read <code>x</code> with its new value but <code>y</code> with its default value of 0 for example. By the time you reach the <code>println</code> statement (which by the way is synchronized and therefore does influence the read operations), the variables have their initial values and the program prints the expected values.</p>\n\n<p>Marking <code>currentPos</code> as <code>volatile</code> will ensure safe publication since your object is effectively immutable - if in your real use case the object is mutated after construction, <code>volatile</code> guarantees won't be enough and you could see an inconsistent object again.</p>\n\n<p>Alternatively, you can make the <code>Point</code> immutable which will also ensure safe publication, even without using <code>volatile</code>. To achieve immutability, you simply need to mark <code>x</code> and <code>y</code> final.</p>\n\n<p>As a side note and as already mentioned, <code>synchronized(this) {}</code> can be treated as a no-op by the JVM (I understand you included it to reproduce the behaviour).</p>\n", "title": "Why does this Java program terminate despite that apparently it shouldn&#39;t (and didn&#39;t)?", "tags": ["java", "concurrency", "order", "java-memory-model", "memory-visibility"], "link": "http://stackoverflow.com/questions/16159203/why-does-this-java-program-terminate-despite-that-apparently-it-shouldnt-and-d/16323196#16323196", "question_id": 16159203, "answer_id": 16323196}, {"body": "<p>You have ordinary memory, the 'currentpos' reference and the Point object and its fields behind it, shared between 2 threads, without synchronisation. Thus, there is no defined ordering between the writes that happen to this memory in the main thread and the reads in the created thread (call it T).</p>\n\n<p>Main thread is doing the following writes (ignoring the initial setup of point, will result in p.x and p.y having default values):</p>\n\n<ul>\n<li>to p.x</li>\n<li>to p.y </li>\n<li>to currentpos</li>\n</ul>\n\n<p>Because there is nothing special about these writes in terms of synchronisation/barriers, the runtime is free to allow the T thread see them occur in any order (the main thread of course always sees writes and reads ordered according to programme order), and occur at any point between the reads in T.</p>\n\n<p>So T is doing:</p>\n\n<ol>\n<li>reads currentpos to p</li>\n<li>read p.x and p.y (in either order)</li>\n<li>compare, and take the branch</li>\n<li>read p.x and p.y (either order) and call System.out.println</li>\n</ol>\n\n<p>Given there's no ordering relationships between the writes in main, and the reads in T, there are clearly several ways this can produce your result, as T may see main's write to currentpos <em>before</em> the writes to currentpos.y or currentpos.x:</p>\n\n<ol>\n<li>It reads currentpos.x first, before the x write has occurred - gets 0, then reads currentpos.y before the y write has occurred - gets 0. Compare evals to true. The writes\nbecome visible to T. System.out.println is called.</li>\n<li>It reads currentpos.x first, after the x write has occurred, then reads currentpos.y before the y write has occurred - gets 0. Compare evals to true. Writes become visible to T... etc.</li>\n<li>It reads currentpos.y first, before the y write has occurred (0), then reads currentpos.x after the x write, evals to true. etc.</li>\n</ol>\n\n<p>and so on... There are a number of data races here.</p>\n\n<p>I suspect the flawed assumption here is thinking that the writes that result from this line are made visible across all the threads in the programme order of the thread executing it:</p>\n\n<pre><code>currentPos = new Point(currentPos.x+1, currentPos.y+1);\n</code></pre>\n\n<p>Java makes no such guarantee (it'd be terrible for performance). Something more must be added if your programme needs a guaranteed ordering of the writes relative to reads in other threads. Others have suggested making the x,y fields final, or alternatively making currentpos volatile.</p>\n\n<ul>\n<li>If you make the x,y fields final, then Java guarantees that the writes of their values will be seen to occur before the constructor returns, in all threads. Thus, as the assignment to currentpos is after the constructor, the T thread is guaranteed to see the writes in the correct order.</li>\n<li>If you make currentpos volatile, then Java guarantees that that this is a synchronisation point which will be total-ordered wrt other synchronisation points. As in main the writes to x and y must happen before the write to currentpos, then any read of currentpos in another thread must see also the writes of x, y that happened before.</li>\n</ul>\n\n<p>Using final has the advantage that it makes the fields immutable, and thus allows the values to be cached. Using volatile leads to synchronisation on every write and read of currentpos, which might hurt performance.</p>\n\n<p>See chapter 17 of the Java Language Spec for the gory details:<a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html\">http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html</a> </p>\n\n<p>(Initial answer assumed a weaker memory model, as I was not sure the JLS guaranteed volatile was sufficient. Answer edited to reflect comment from assylias, pointing out the Java model is stronger - happens-before is transitive - and so volatile on currentpos also suffices).</p>\n", "title": "Why does this Java program terminate despite that apparently it shouldn&#39;t (and didn&#39;t)?", "tags": ["java", "concurrency", "order", "java-memory-model", "memory-visibility"], "link": "http://stackoverflow.com/questions/16159203/why-does-this-java-program-terminate-despite-that-apparently-it-shouldnt-and-d/18258659#18258659", "question_id": 16159203, "answer_id": 18258659}, {"body": "<p>You are accessing currentPos twice, and providing no guarantee that it is not updated in between those two accesses.</p>\n\n<p>For example:</p>\n\n<ol>\n<li>x = 10, y = 11</li>\n<li>worker thread evaluates p.x as 10</li>\n<li>main thread executes the update, now x = 11 and y = 12</li>\n<li>worker thread evaluates p.y as 12</li>\n<li>worker thread notices that 10+1 != 12, so prints and exits.</li>\n</ol>\n\n<p>You are essentially comparing <em>two different</em> Points.</p>\n\n<p>Note that even making currentPos volatile won't protect you from this, since it's two separate reads by the worker thread.</p>\n\n<p>Add an</p>\n\n<pre><code>boolean IsValid() { return x+1 == y; }\n</code></pre>\n\n<p>method to your points class.  This will ensure that only one value of currentPos is used when checking x+1 == y.</p>\n", "title": "Why does this Java program terminate despite that apparently it shouldn&#39;t (and didn&#39;t)?", "tags": ["java", "concurrency", "order", "java-memory-model", "memory-visibility"], "link": "http://stackoverflow.com/questions/16159203/why-does-this-java-program-terminate-despite-that-apparently-it-shouldnt-and-d/18258935#18258935", "question_id": 16159203, "answer_id": 18258935}, {"body": "<p>You could use an object to synchronize the writes and reads. Otherwise, as others said before, a write to currentPos will occur in the middle of the two reads p.x+1 and p.y.</p>\n\n<pre><code>new Thread() {\n    void f(Point p) {\n        if (p.x+1 != p.y) {\n            System.out.println(p.x+\" \"+p.y);\n            System.exit(1);\n        }\n    }\n    @Override\n    public void run() {\n        while (currentPos == null);\n        while (true)\n            f(currentPos);\n    }\n}.start();\nObject sem = new Object();\nwhile (true) {\n    synchronized(sem) {\n        currentPos = new Point(currentPos.x+1, currentPos.y+1);\n    }\n}\n</code></pre>\n", "title": "Why does this Java program terminate despite that apparently it shouldn&#39;t (and didn&#39;t)?", "tags": ["java", "concurrency", "order", "java-memory-model", "memory-visibility"], "link": "http://stackoverflow.com/questions/16159203/why-does-this-java-program-terminate-despite-that-apparently-it-shouldnt-and-d/18262058#18262058", "question_id": 16159203, "answer_id": 18262058}], "creation_date": 1366679038, "score": 187, "link": "http://stackoverflow.com/questions/16159203/why-does-this-java-program-terminate-despite-that-apparently-it-shouldnt-and-d", "question_id": 16159203}, {"body": "<p>Is it possible to declare a variable in Gradle usable in Java ?\nBasically I would like to declare some vars in the build.gradle and then getting it (obviously) at build time. Just like a pre-processor macros in C/C++...</p>\n\n<p>An example of declaration would be something like that ... :</p>\n\n<pre><code>android {\n    debug {\n        A_VAR_RETRIEVABLE_IN_JAVA = 42\n    }\n    release {\n        A_VAR_RETRIEVABLE_IN_JAVA = 42+52\n    }\n}\n</code></pre>\n\n<p>Is there a way to do something like that ?</p>\n", "tags": ["java", "android", "android-studio", "android-gradle"], "title": "Is it possible to declare a variable in Gradle usable in Java?", "answers": [{"body": "<p>You could write a file during the build and read that file during runtime and have the code behave accordingly.</p>\n\n<p>Another possibility is you could generate source for a java class at build time that contains a constant that is referenced by your code.</p>\n\n<p>The first way is more flexible as it allows you to reconfigure without recompiling.</p>\n", "title": "Is it possible to declare a variable in Gradle usable in Java?", "tags": ["java", "android", "android-studio", "android-gradle"], "link": "http://stackoverflow.com/questions/17197636/is-it-possible-to-declare-a-variable-in-gradle-usable-in-java/17198776#17198776", "question_id": 17197636, "answer_id": 17198776}, {"body": "<h2>Generate Java Constants</h2>\n\n<p><strong>Plugin version greater than 0.7.x</strong></p>\n\n<pre><code>android {\n    buildTypes {\n        debug {\n            buildConfigField \"int\", \"FOO\", \"42\"\n            buildConfigField \"String\", \"FOO_STRING\", \"\\\"foo\\\"\"\n            buildConfigField \"boolean\", \"LOG\", \"true\"\n        }\n\n        release {\n            buildConfigField \"int\", \"FOO\", \"52\"\n            buildConfigField \"String\", \"FOO_STRING\", \"\\\"bar\\\"\"\n            buildConfigField \"boolean\", \"LOG\", \"false\"\n        }\n    }\n}\n</code></pre>\n\n<p>You can access them with <code>BuildConfig.FOO</code></p>\n\n<h2>Generate Android resources (since plugin 0.8.3)</h2>\n\n<pre><code>android {\n    buildTypes {\n        debug{\n            resValue \"string\", \"app_name\", \"My App Name Debug\"\n        }\n        release {\n            resValue \"string\", \"app_name\", \"My App Name\"\n        }\n    }\n}\n</code></pre>\n\n<p>You can access them in the usual way with <code>@string/app_name</code> or <code>R.string.app_name</code></p>\n", "title": "Is it possible to declare a variable in Gradle usable in Java?", "tags": ["java", "android", "android-studio", "android-gradle"], "link": "http://stackoverflow.com/questions/17197636/is-it-possible-to-declare-a-variable-in-gradle-usable-in-java/17201265#17201265", "question_id": 17197636, "answer_id": 17201265}, {"body": "<p>Example using system properties, set in build.gradle, read from Java application (following up from question in comments):</p>\n\n<p>Basically, using the <code>test</code> task in <code>build.gradle</code>, with test task method <code>systemProperty</code> setting a system property that's passed at runtime:</p>\n\n<pre><code>apply plugin: 'java'\ngroup = 'example'\nversion = '0.0.1-SNAPSHOT'\n\nrepositories {\n    mavenCentral()\n    // mavenLocal()\n    // maven { url 'http://localhost/nexus/content/groups/public'; }\n}\n\ndependencies {\n    testCompile 'junit:junit:4.8.2'\n    compile 'ch.qos.logback:logback-classic:1.1.2'\n}\n\ntest {\n  logger.info '==test=='\n  systemProperty 'MY-VAR1', 'VALUE-TEST'\n}\n</code></pre>\n\n<p>And here's the rest of the sample code (which you could probably infer, but is included here anyway):  it gets a system property <code>MY-VAR1</code>, expected at run-time to be set to <code>VALUE-TEST</code>:</p>\n\n<pre><code>package example;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class HelloWorld {\n  static final Logger log=LoggerFactory.getLogger(HelloWorld.class);\n  public static void main(String args[]) {\n    log.info(\"entering main...\");\n    final String val = System.getProperty(\"MY-VAR1\", \"UNSET (MAIN)\");\n    System.out.println(\"(main.out) hello, world: \" + val);\n    log.info(\"main.log) MY-VAR1=\" + val);\n  }\n}\n</code></pre>\n\n<p>Testcase: if <code>MY-VAR</code> is unset, the test should fail:</p>\n\n<pre><code>package example;\n...\npublic class HelloWorldTest {\n    static final Logger log=LoggerFactory.getLogger(HelloWorldTest.class);\n    @Test public void testEnv() {\n        HelloWorld.main(new String[]{});\n        final String val = System.getProperty(\"MY-VAR1\", \"UNSET (TEST)\");\n        System.out.println(\"(test.out) var1=\" + val);\n        log.info(\"(test.log) MY-VAR1=\" + val);\n        assertEquals(\"env MY-VAR1 set.\", \"VALUE-TEST\", val);\n    }\n}\n</code></pre>\n\n<p>Run (note: test is passing):</p>\n\n<pre><code>$ gradle cleanTest test\n:cleanTest\n:compileJava UP-TO-DATE\n:processResources UP-TO-DATE\n:classes UP-TO-DATE\n:compileTestJava UP-TO-DATE\n:processTestResources UP-TO-DATE\n:testClasses UP-TO-DATE\n:test\n\nBUILD SUCCESSFUL\n</code></pre>\n\n<p>I've found that the tricky part is actually getting the output from gradle... So, logging is configured here (slf4j+logback), and the log file shows the results (alternatively, run <code>gradle --info cleanTest test</code>; there are also properties that get stdout to the console, but, you know, why):</p>\n\n<pre><code>$ cat app.log\nINFO Test worker example.HelloWorld - entering main...\nINFO Test worker example.HelloWorld - main.log) MY-VAR1=VALUE-TEST\nINFO Test worker example.HelloWorldTest - (test.log) MY-VAR1=VALUE-TEST\n</code></pre>\n\n<p>If you comment out \"<code>systemProperty...</code>\" (which, btw, only works in a <code>test</code> task), then:</p>\n\n<pre><code>example.HelloWorldTest &gt; testEnv FAILED\n    org.junit.ComparisonFailure at HelloWorldTest.java:14\n</code></pre>\n\n<p>For completeness, here is the logback config (<code>src/test/resources/logback-test.xml</code>):</p>\n\n<pre><code>&lt;configuration&gt;\n    &lt;appender name=\"FILE\" class=\"ch.qos.logback.core.FileAppender\"&gt;\n        &lt;file&gt;app.log&lt;/file&gt;\n        &lt;layout class=\"ch.qos.logback.classic.PatternLayout\"&gt;\n            &lt;pattern&gt;%d %p %t %c - %m%n&lt;/pattern&gt;\n        &lt;/layout&gt;\n &lt;/appender&gt;\n &lt;root level=\"info\"&gt;\n     &lt;appender-ref ref=\"FILE\"/&gt;\n&lt;/root&gt;\n&lt;/configuration&gt; \n</code></pre>\n\n<p>Files:</p>\n\n<ul>\n<li><code>build.gradle</code></li>\n<li><code>src/main/java/example/HelloWorld.java</code></li>\n<li><code>src/test/java/example/HelloWorldTest.java</code></li>\n<li><code>src/test/resources/logback-test.xml</code></li>\n</ul>\n", "title": "Is it possible to declare a variable in Gradle usable in Java?", "tags": ["java", "android", "android-studio", "android-gradle"], "link": "http://stackoverflow.com/questions/17197636/is-it-possible-to-declare-a-variable-in-gradle-usable-in-java/25714617#25714617", "question_id": 17197636, "answer_id": 25714617}, {"body": "<h3>An example of usage an Api App Key in an Android application (Java and XML)</h3>\n\n<p><em>gradle.properties</em></p>\n\n<pre><code>AppKey=\"XXXX-XXXX\"\n</code></pre>\n\n<p><em>build.gradle</em></p>\n\n<pre><code>buildTypes {\n//...\n    buildTypes.each {\n        it.buildConfigField 'String', 'APP_KEY_1', AppKey\n        it.resValue 'string', 'APP_KEY_2', AppKey\n    }\n}\n</code></pre>\n\n<p><em>Usage in java code</em></p>\n\n<pre><code>Log.d(\"UserActivity\", \"onCreate, APP_KEY: \" + getString(R.string.APP_KEY_2));\n\nBuildConfig.APP_KEY_1\n</code></pre>\n\n<p><em>Usage in xml code</em></p>\n\n<pre><code>&lt;data android:scheme=\"@string/APP_KEY_2\" /&gt;\n</code></pre>\n\n<ul>\n<li><a href=\"https://gist.github.com/VDenis/46c222b16683447bab33\">Link to an example of Api App Key usage in an Android application</a></li>\n<li><a href=\"http://michiganlabs.com/string-constants-generated-gradle-build-configurations/#.VtB0-px96Um\">Using String Constants Generated by Gradle Build Configurations</a></li>\n</ul>\n", "title": "Is it possible to declare a variable in Gradle usable in Java?", "tags": ["java", "android", "android-studio", "android-gradle"], "link": "http://stackoverflow.com/questions/17197636/is-it-possible-to-declare-a-variable-in-gradle-usable-in-java/35650390#35650390", "question_id": 17197636, "answer_id": 35650390}], "creation_date": 1371663151, "score": 185, "link": "http://stackoverflow.com/questions/17197636/is-it-possible-to-declare-a-variable-in-gradle-usable-in-java", "question_id": 17197636}, {"body": "<p>Since I use Maven I have been able to build and install in my local repository projects that have incomplete java doc tags (for example, a missing parameter). </p>\n\n<p>However, since I migrated to Java 8 (1.8.0-ea-b90) Maven is absolutely strict about missing documentation tags and show me lots of JavaDoc errors related to JavaDoc problems when I try to build or install a project where the JavaDoc is not \"perfect\". Some of the projects I am trying to compile and install in my local repository are third party projects from which I do not have control. So the workaround of just fixing all the javadocs in all these projects does not seem to be feasable in my scenario.</p>\n\n<p>This is a small part of the output I see when I execute <code>mvn clean package install</code> in my project:</p>\n\n<pre><code>[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 9.026s\n[INFO] Finished at: Mon Apr 08 21:06:17 CEST 2013\n[INFO] Final Memory: 27M/437M\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-javadoc-plugin:2.9:jar (attach-javadocs) on project jpc: MavenReportException: Error while creating archive:\n[ERROR] Exit code: 1 - /Users/sergioc/Documents/workspaces/heal/jpc/src/main/java/org/jpc/engine/prolog/PrologDatabase.java:10: error: @param name not found\n[ERROR] * @param terms the terms to assert\n[ERROR] ^\n[ERROR] /Users/sergioc/Documents/workspaces/heal/jpc/src/main/java/org/jpc/engine/prolog/PrologDatabase.java:11: warning: no description for @return\n[ERROR] * @return\n[ERROR] ^\n</code></pre>\n\n<p>The JavaDoc plugin is configured like this in my POM:</p>\n\n<pre><code>    &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.9&lt;/version&gt;\n        &lt;executions&gt;\n            &lt;execution&gt;\n                &lt;id&gt;attach-javadocs&lt;/id&gt;\n                &lt;goals&gt;\n                    &lt;goal&gt;jar&lt;/goal&gt;\n                &lt;/goals&gt;\n            &lt;/execution&gt;\n        &lt;/executions&gt;\n    &lt;/plugin&gt;\n</code></pre>\n\n<p>As I said before, everything is working fine if I go back to Java 7. \nMaybe is this a bug related to Maven running in Java 8 ?\nHow could I make it work (i.e., being able to build the Javadoc of the project and install its code in my local repository) with Java 8 ?\nI have tested with both Maven 3.0.3 and 3.0.5 in OSX.</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>If I change my JavaDoc plugin configuration with <code>&lt;failOnError&gt;false&lt;/failOnError&gt;</code> (thanks Martin):</p>\n\n<pre><code>    &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.9&lt;/version&gt;\n        &lt;executions&gt;\n            &lt;execution&gt;\n                &lt;id&gt;attach-javadocs&lt;/id&gt;\n                &lt;goals&gt;\n                    &lt;goal&gt;jar&lt;/goal&gt;\n                &lt;/goals&gt;\n            &lt;/execution&gt;\n        &lt;/executions&gt;\n    &lt;/plugin&gt;\n</code></pre>\n\n<p>Then the project is installed in my local repository. However, the javadoc jar is still not generated:</p>\n\n<p>A fragment of the output I see in the console with this new configuration is:</p>\n\n<blockquote>\n  <p>[ERROR] MavenReportException: Error while creating archive:  Exit\n  code: 1 - /Users/....java:18: warning: no @param  ... Command line\n  was: /Library/Java/Home/bin/javadoc @options @packages</p>\n  \n  <p>Refer to the generated Javadoc files in\n  '/Users/sergioc/Documents/workspaces/heal/minitoolbox/target/apidocs'\n  dir.</p>\n  \n  <p>at\n  org.apache.maven.plugin.javadoc.AbstractJavadocMojo.executeJavadocCommandLine(AbstractJavadocMojo.java:5043)\n    at\n  org.apache.maven.plugin.javadoc.AbstractJavadocMojo.executeReport(AbstractJavadocMojo.java:1990)\n    at\n  org.apache.maven.plugin.javadoc.JavadocJar.execute(JavadocJar.java:181)\n    at\n  org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)\n    at\n  org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)\n    at\n  org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)\n    at\n  org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)\n    at\n  org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)\n    at\n  org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)\n    at\n  org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)\n    at\n  org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)\n    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)   at\n  org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)  at\n  org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)  at\n  org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)   at\n  org.apache.maven.cli.MavenCli.main(MavenCli.java:141)     at\n  sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)   at\n  sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at\n  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:491)     at\n  org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)\n    at\n  org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)\n    at\n  org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)\n    at\n  org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)</p>\n</blockquote>\n\n<p>Any workaround about how to build the sources, install the project and generate the Java doc jar in one step as it was working with Java 7 ?</p>\n", "tags": ["java", "maven", "migration", "java-8", "javadoc"], "title": "Maven is not working in Java 8 when JavaDoc tags are incomplete", "answers": [{"body": "<p>You could try setting the <code>failOnError</code> property (see <a href=\"http://maven.apache.org/plugins/maven-javadoc-plugin/javadoc-mojo.html#failOnError\">plugin documentation</a>) to <code>false</code>:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.9&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;attach-javadocs&lt;/id&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;jar&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n              &lt;failOnError&gt;false&lt;/failOnError&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>As you can see from the docs, the default value is <code>true</code>.</p>\n", "title": "Maven is not working in Java 8 when JavaDoc tags are incomplete", "tags": ["java", "maven", "migration", "java-8", "javadoc"], "link": "http://stackoverflow.com/questions/15886209/maven-is-not-working-in-java-8-when-javadoc-tags-are-incomplete/16700705#16700705", "question_id": 15886209, "answer_id": 16700705}, {"body": "<p><a href=\"http://openjdk.java.net/jeps/172\">DocLint is a new feature in Java 8</a>, which is summarized as:</p>\n\n<blockquote>\n  <p>Provide a means to detect errors in Javadoc comments early in the\n  development cycle and in a way that is easily linked back to the\n  source code.</p>\n</blockquote>\n\n<p>This is enabled by default, and will run a whole lot of checks before generating Javadocs. You need to turn this off for Java 8 as specified <a href=\"http://mail.openjdk.java.net/pipermail/build-infra-dev/2013-January/002899.html\">in this thread</a>. You'll have to add this to your maven configuration:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.9&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;attach-javadocs&lt;/id&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;jar&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;additionalparam&gt;-Xdoclint:none&lt;/additionalparam&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>Edit: Forgot to close <code>&lt;configuration&gt;</code> tag</p>\n", "title": "Maven is not working in Java 8 when JavaDoc tags are incomplete", "tags": ["java", "maven", "migration", "java-8", "javadoc"], "link": "http://stackoverflow.com/questions/15886209/maven-is-not-working-in-java-8-when-javadoc-tags-are-incomplete/16743137#16743137", "question_id": 15886209, "answer_id": 16743137}, {"body": "<p>The easiest approach to get things working with both java 8 and java 7 is to use a profile in the build:</p>\n\n<pre><code>&lt;profiles&gt;\n  &lt;profile&gt;\n    &lt;id&gt;doclint-java8-disable&lt;/id&gt;\n    &lt;activation&gt;\n      &lt;jdk&gt;[1.8,)&lt;/jdk&gt;\n    &lt;/activation&gt;\n\n    &lt;build&gt;\n      &lt;plugins&gt;\n        &lt;plugin&gt;\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n          &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\n          &lt;configuration&gt;\n            &lt;additionalparam&gt;-Xdoclint:none&lt;/additionalparam&gt;\n          &lt;/configuration&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/build&gt;\n  &lt;/profile&gt;\n&lt;/profiles&gt;\n</code></pre>\n", "title": "Maven is not working in Java 8 when JavaDoc tags are incomplete", "tags": ["java", "maven", "migration", "java-8", "javadoc"], "link": "http://stackoverflow.com/questions/15886209/maven-is-not-working-in-java-8-when-javadoc-tags-are-incomplete/22296107#22296107", "question_id": 15886209, "answer_id": 22296107}, {"body": "<p>Overriding <code>maven-javadoc-plugin</code> configuration only, does not fix the problem with <code>mvn site</code> (used e.g during the release stage). Here's what I had to do:</p>\n\n<pre><code>&lt;profile&gt;\n  &lt;id&gt;doclint-java8-disable&lt;/id&gt;\n  &lt;activation&gt;\n    &lt;jdk&gt;[1.8,)&lt;/jdk&gt;\n  &lt;/activation&gt;\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;additionalparam&gt;-Xdoclint:none&lt;/additionalparam&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.3&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;reportPlugins&gt;\n            &lt;plugin&gt;\n              &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n              &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\n              &lt;configuration&gt;\n                &lt;additionalparam&gt;-Xdoclint:none&lt;/additionalparam&gt;\n              &lt;/configuration&gt;\n            &lt;/plugin&gt;\n          &lt;/reportPlugins&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/profile&gt;\n</code></pre>\n", "title": "Maven is not working in Java 8 when JavaDoc tags are incomplete", "tags": ["java", "maven", "migration", "java-8", "javadoc"], "link": "http://stackoverflow.com/questions/15886209/maven-is-not-working-in-java-8-when-javadoc-tags-are-incomplete/22981151#22981151", "question_id": 15886209, "answer_id": 22981151}, {"body": "<p>Here is the most concise way I am aware of to ignore doclint warnings regardless of java version used:</p>\n\n<pre><code>&lt;profiles&gt;\n  &lt;profile&gt;\n    &lt;id&gt;doclint-java8-disable&lt;/id&gt;\n    &lt;activation&gt;\n      &lt;jdk&gt;[1.8,)&lt;/jdk&gt;\n    &lt;/activation&gt;\n    &lt;properties&gt;\n      &lt;javadoc.opts&gt;-Xdoclint:none&lt;/javadoc.opts&gt;\n    &lt;/properties&gt;\n  &lt;/profile&gt;\n&lt;/profiles&gt;\n\n&lt;build&gt;\n  &lt;plugins&gt;\n    &lt;plugin&gt;\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n      &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\n      &lt;version&gt;2.9.1&lt;/version&gt;\n      &lt;executions&gt;\n        &lt;execution&gt;\n          &lt;id&gt;attach-javadocs&lt;/id&gt;\n          &lt;configuration&gt;\n            &lt;additionalparam&gt;${javadoc.opts}&lt;/additionalparam&gt;\n          &lt;/configuration&gt;\n        &lt;/execution&gt;\n      &lt;/executions&gt;\n    &lt;/plugin&gt;\n    ...\n  &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>Tested on oracle/open jdk 6, 7 and 8.</p>\n", "title": "Maven is not working in Java 8 when JavaDoc tags are incomplete", "tags": ["java", "maven", "migration", "java-8", "javadoc"], "link": "http://stackoverflow.com/questions/15886209/maven-is-not-working-in-java-8-when-javadoc-tags-are-incomplete/26806103#26806103", "question_id": 15886209, "answer_id": 26806103}, {"body": "<p>Add into the global properties section in the pom file:</p>\n\n<pre><code>&lt;project&gt;\n    ...\n    &lt;properties&gt;\n        &lt;additionalparam&gt;-Xdoclint:none&lt;/additionalparam&gt;\n    &lt;/properties&gt;\n</code></pre>\n\n<p>The common solution provided here in the other answers (adding that property in the plugins section) did not work for some reason. Only by setting it globally I could build the javadoc jar successfully.</p>\n", "title": "Maven is not working in Java 8 when JavaDoc tags are incomplete", "tags": ["java", "maven", "migration", "java-8", "javadoc"], "link": "http://stackoverflow.com/questions/15886209/maven-is-not-working-in-java-8-when-javadoc-tags-are-incomplete/30274114#30274114", "question_id": 15886209, "answer_id": 30274114}, {"body": "<h1>The shortest solution that will work with any Java version:</h1>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;profiles&gt;\n    &lt;profile&gt;\n        &lt;id&gt;disable-java8-doclint&lt;/id&gt;\n        &lt;activation&gt;\n            &lt;jdk&gt;[1.8,)&lt;/jdk&gt;\n        &lt;/activation&gt;\n        &lt;properties&gt;\n            &lt;additionalparam&gt;-Xdoclint:none&lt;/additionalparam&gt;\n        &lt;/properties&gt;\n    &lt;/profile&gt;\n&lt;/profiles&gt;\n</code></pre>\n\n<p>Just add that to your POM and you're good to go.</p>\n\n<p>This is basically <a href=\"http://stackoverflow.com/a/22296107/2352699\">@ankon's answer</a> plus <a href=\"http://stackoverflow.com/a/30274114/2352699\">@zapp's answer</a>.</p>\n", "title": "Maven is not working in Java 8 when JavaDoc tags are incomplete", "tags": ["java", "maven", "migration", "java-8", "javadoc"], "link": "http://stackoverflow.com/questions/15886209/maven-is-not-working-in-java-8-when-javadoc-tags-are-incomplete/34591533#34591533", "question_id": 15886209, "answer_id": 34591533}, {"body": "<p>I don't think just turning off DocLint is a good solution, at least not long term. It is good that Javadoc has become a bit more strict so the right way to fix the build problem is to <strong>fix the underlying problem</strong>. Yes, you'll ultimately need to fix those source code files.</p>\n\n<p>Here are the things to look out for that you could previously get away with:</p>\n\n<ul>\n<li>Malformed HTML (for example a missing end-tag, un-escaped brackets, etc)</li>\n<li>Invalid <code>{@link }</code>s. (same goes for similar tags such as <code>@see</code>)</li>\n<li>Invalid <code>@author</code> values. This used to be accepted : <code>@author John &lt;john.doe@mine.com&gt;</code> but not so anymore because of the un-escaped brackets.</li>\n<li>HTML tables in Javadoc now require a summary or caption. See <a href=\"http://stackoverflow.com/q/22528767/1504556\">this question</a> for explanation.</li>\n</ul>\n\n<p>You'll simply have to fix your source code files and keep building your Javadoc until it can build without a failure. Cumbersome yes, but personally I like when I have brought my projects up to DocLint level because it means I can be more confident that the Javadoc I produce is actually what I intend.</p>\n\n<p>There's of course the problem if you are generating Javadoc on some source code you've not produced yourself, for example because it comes from some code generator, e.g. <a href=\"http://docs.oracle.com/javase/8/docs/technotes/tools/index.html#webservices\" rel=\"nofollow\">wsimport</a>. Strange that Oracle didn't prepare their own tools for JDK8 compliance before actually releasing JDK8. It seems <a href=\"http://openjdk.java.net/jeps/212\" rel=\"nofollow\">it won't be fixed until Java 9</a>. Only in this particular case I suggest to turn off DocLint as documented elsewhere on this page.</p>\n", "title": "Maven is not working in Java 8 when JavaDoc tags are incomplete", "tags": ["java", "maven", "migration", "java-8", "javadoc"], "link": "http://stackoverflow.com/questions/15886209/maven-is-not-working-in-java-8-when-javadoc-tags-are-incomplete/34809831#34809831", "question_id": 15886209, "answer_id": 34809831}, {"body": "<p>I'm not sure if this is going to help, but even i faced the exact same problem very recently with <strong>oozie-4.2.0</strong> version.  After reading through the above answers i have just added the maven option through command line and it worked for me.  So, just sharing here.</p>\n\n<p>I'm using java <strong>1.8.0_77</strong>, haven't tried with java 1.7  </p>\n\n<p>bin/mkdistro.sh -DskipTests <strong>-Dmaven.javadoc.opts='-Xdoclint:-html'</strong>  </p>\n", "title": "Maven is not working in Java 8 when JavaDoc tags are incomplete", "tags": ["java", "maven", "migration", "java-8", "javadoc"], "link": "http://stackoverflow.com/questions/15886209/maven-is-not-working-in-java-8-when-javadoc-tags-are-incomplete/36381155#36381155", "question_id": 15886209, "answer_id": 36381155}, {"body": "<p>Since it depends on the version of your JRE which is used to run the maven command you propably dont want to disable <code>DocLint</code> per default in your pom.xml</p>\n\n<p>Hence, from command line you can use the switch <code>-Dadditionalparam=-Xdoclint:none</code>.</p>\n\n<p>Example: <code>mvn clean install -Dadditionalparam=-Xdoclint:none</code></p>\n", "title": "Maven is not working in Java 8 when JavaDoc tags are incomplete", "tags": ["java", "maven", "migration", "java-8", "javadoc"], "link": "http://stackoverflow.com/questions/15886209/maven-is-not-working-in-java-8-when-javadoc-tags-are-incomplete/37008481#37008481", "question_id": 15886209, "answer_id": 37008481}], "creation_date": 1365445416, "score": 178, "link": "http://stackoverflow.com/questions/15886209/maven-is-not-working-in-java-8-when-javadoc-tags-are-incomplete", "question_id": 15886209}, {"body": "<p>I encountered a situation where a <strong>non-void method</strong> is missing a <strong>return</strong> statement and the code still compiles.\nI know that the statements after the while loop are <strong>unreachable</strong>(dead code) and would never be executed. But why doesn't the compiler even warn about returning something? Or why would a language allow us to have a non-void method having an infinite loop and not returning anything?</p>\n\n<pre><code>public int doNotReturnAnything() {\n    while(true) {\n        //do something\n    }\n    //no return statement\n}\n</code></pre>\n\n<p>If I add a break statement(even a conditional one) in the while loop, the compiler complains of the infamous errors: 'Method does not return a value'(Eclipse) and 'Not all code paths return a value'(Visual Studio)</p>\n\n<pre><code>public int doNotReturnAnything() {\n    while(true) {\n        if(mustReturn) break;\n        //do something\n    }\n    //no return statement\n}\n</code></pre>\n\n<p>This is true of both Java and C#</p>\n", "tags": ["c#", "java", "oop", "design"], "title": "Missing return statement in a non-void method compiles", "answers": [{"body": "<p>The compiler knows that the <code>while</code> loop will never stop executing, hence the method will never finish, hence a <code>return</code> statement is not necessary.</p>\n", "title": "Missing return statement in a non-void method compiles", "tags": ["c#", "java", "oop", "design"], "link": "http://stackoverflow.com/questions/16789832/missing-return-statement-in-a-non-void-method-compiles/16789896#16789896", "question_id": 16789832, "answer_id": 16789896}, {"body": "<p>The Java compiler is smart enough to find the unreachable code ( the code after <code>while</code> loop)</p>\n\n<p>and since its <em>unreachable</em>, <em>there is no point</em> in adding a <code>return</code> statement there (after <code>while</code> ends)</p>\n\n<p>same goes with conditional <code>if</code></p>\n\n<pre><code>public int get() {\n   if(someBoolean) {   \n     return 10;\n   }\n   else {\n     return 5;\n   }\n   // there is no need of say, return 11 here;\n}\n</code></pre>\n\n<p>since the boolean condition <code>someBoolean</code> can only evaluate to either <code>true</code> or <code>false</code>, there is no need to provide a <code>return</code> <strong>explicitly</strong> after <code>if-else</code>, because that code is <em>unreachable</em>, and Java does not complain about it.</p>\n", "title": "Missing return statement in a non-void method compiles", "tags": ["c#", "java", "oop", "design"], "link": "http://stackoverflow.com/questions/16789832/missing-return-statement-in-a-non-void-method-compiles/16789915#16789915", "question_id": 16789832, "answer_id": 16789915}, {"body": "<p>Given your loop is executing on a constant - the compiler knows that it's an infinite loop - meaning the method could never return, anyway.</p>\n\n<p>If you use a variable - the compiler will enforce the rule:</p>\n\n<p>This won't compile:</p>\n\n<pre><code>// Define other methods and classes here\npublic int doNotReturnAnything() {\n    var x = true;\n\n    while(x == true) {\n        //do something\n    }\n    //no return statement - won't compile\n}\n</code></pre>\n", "title": "Missing return statement in a non-void method compiles", "tags": ["c#", "java", "oop", "design"], "link": "http://stackoverflow.com/questions/16789832/missing-return-statement-in-a-non-void-method-compiles/16789943#16789943", "question_id": 16789832, "answer_id": 16789943}, {"body": "<p>The Java specification defines a concept called <code>Unreachable statements</code>. You are not allowed to have an unreachable statement in your code (it's a compile time error). You are not even allowed to have a return statement after the while(true); statement in Java. A <code>while(true);</code> statement makes the following statements unreachable by definition, therefore you don't need a <code>return</code> statement.</p>\n\n<p>Note that while <a href=\"http://en.wikipedia.org/wiki/Halting_problem\" rel=\"nofollow\">Halting problem</a> is undecidable in generic case, the definition of Unreachable Statement is more strict than just halting. It's deciding very specific cases where a program definitely does not halt. The compiler is theoretically not able to detect all infinite loops and unreachable statements but it has to detect specific cases defined in the specification (for example, the <code>while(true)</code> case)</p>\n", "title": "Missing return statement in a non-void method compiles", "tags": ["c#", "java", "oop", "design"], "link": "http://stackoverflow.com/questions/16789832/missing-return-statement-in-a-non-void-method-compiles/16789968#16789968", "question_id": 16789832, "answer_id": 16789968}, {"body": "<p>The compiler is smart enough to find out that your <code>while</code> loop is infinite.</p>\n\n<p>So the compiler cannot think for you. It cannot guess <strong>why</strong> you wrote that code. Same stands for the return values of methods. Java won't complain if you don't do anything with method's return values.</p>\n\n<p>So, to answer your question:</p>\n\n<p>The compiler analyzes your code and after finding out that no execution path leads to falling off the end of the function it finishes with OK.</p>\n\n<p>There may be legitimate reasons for an infinite loop. For example a lot of apps use an infinite main loop. Another example is a web server which may indefinitely wait for requests.</p>\n", "title": "Missing return statement in a non-void method compiles", "tags": ["c#", "java", "oop", "design"], "link": "http://stackoverflow.com/questions/16789832/missing-return-statement-in-a-non-void-method-compiles/16790005#16790005", "question_id": 16789832, "answer_id": 16790005}, {"body": "<p>Visual studio has the smart engine to detect if you have typed a return type then it should have a return statement with in the function/method.</p>\n\n<p>As in PHP Your return type is true if you have not returned anything. compiler get 1 if nothing has returned.</p>\n\n<p>As of this </p>\n\n<pre><code>public int doNotReturnAnything() {\n    while(true) {\n        //do something\n    }\n    //no return statement\n}\n</code></pre>\n\n<p>Compiler know that while statement itself has a infinte nature so not to consider it. and php compiler will automatically get true if you write a condition in expression of while.</p>\n\n<p>But not in the case of VS it will return you a error in the stack .</p>\n", "title": "Missing return statement in a non-void method compiles", "tags": ["c#", "java", "oop", "design"], "link": "http://stackoverflow.com/questions/16789832/missing-return-statement-in-a-non-void-method-compiles/16790023#16790023", "question_id": 16789832, "answer_id": 16790023}, {"body": "<p>Your while loop will run forever and hence won't come outside while; it will continue to execute. Hence, the outside part of while{} is unreachable and there is not point in writing return or not. The compiler is intelligent enough to figure out what part is reachable and what part isn't.</p>\n\n<p>Example: </p>\n\n<pre><code>public int xyz(){\n    boolean x=true;\n\n    while(x==true){\n        // do something  \n    }\n\n    // no return statement\n}\n</code></pre>\n\n<p>The above code won't compile, because there can be a case that the value of variable x is modified inside the body of while loop. So this makes the outside part of while loop reachable! And hence compiler will throw an error 'no return statement found'. </p>\n\n<p>The compiler is not intelligent enough (or rather lazy ;) ) to figure out that whether the value of x will be modified or not. Hope this clears everything.</p>\n", "title": "Missing return statement in a non-void method compiles", "tags": ["c#", "java", "oop", "design"], "link": "http://stackoverflow.com/questions/16789832/missing-return-statement-in-a-non-void-method-compiles/16790247#16790247", "question_id": 16789832, "answer_id": 16790247}, {"body": "<p>\"Why doesn't the compiler even warn about returning something? Or why would a language allow us to have a non-void method having an infinite loop and not returning anything?\".</p>\n\n<p>This code is valid in all other languages too (probably except Haskell!). Because the first assumption is we are \"intentionally\" writing some code.</p>\n\n<p>And there are situations that this code can be totally valid like if you are going to use it as a thread; or if it was returning a <code>Task&lt;int&gt;</code>, you could do some error checking based on the returned int value - which should not be returned.</p>\n", "title": "Missing return statement in a non-void method compiles", "tags": ["c#", "java", "oop", "design"], "link": "http://stackoverflow.com/questions/16789832/missing-return-statement-in-a-non-void-method-compiles/16790535#16790535", "question_id": 16789832, "answer_id": 16790535}, {"body": "<p>There is no situation in which the function can reach its end without returning an appropriate value. Therefore, there is nothing for the compiler to complain about.</p>\n", "title": "Missing return statement in a non-void method compiles", "tags": ["c#", "java", "oop", "design"], "link": "http://stackoverflow.com/questions/16789832/missing-return-statement-in-a-non-void-method-compiles/16790539#16790539", "question_id": 16789832, "answer_id": 16790539}, {"body": "<blockquote>\n  <p>Why would a language allow us to have a non-void method having an infinite loop and not returning anything?</p>\n</blockquote>\n\n<p>The rule for non-void methods is <em>every code path that returns must return a value</em>, and that rule is satisfied in your program: zero out of zero code paths that return do return a value.  The rule is not \"every non-void method must have a code path that returns\". </p>\n\n<p>This enables you to write stub-methods like:</p>\n\n<pre><code>IEnumerator IEnumerable.GetEnumerator() \n{ \n    throw new NotImplementedException(); \n}\n</code></pre>\n\n<p>That's a non-void method. It <em>has</em> to be a non-void method in order to satisfy the interface. But it seems silly to make this implementation illegal because it does not return anything. </p>\n\n<p>That your method has an unreachable end point because of a <code>goto</code> (remember, a <code>while(true)</code> is just a more pleasant way to write <code>goto</code>) instead of a <code>throw</code> (which is another form of <code>goto</code>) is not relevant.</p>\n\n<blockquote>\n  <p>Why doesn't the compiler even warn about returning something? </p>\n</blockquote>\n\n<p>Because the compiler has no good evidence that the code is wrong. Someone wrote <code>while(true)</code> and it seems likely that the person who did that knew what they were doing. </p>\n\n<blockquote>\n  <p>Where can I read more about reachability analysis in C#?</p>\n</blockquote>\n\n<p>See my articles on the subject, here:</p>\n\n<p><a href=\"http://ericlippert.com/category/reachability/\">ATBG: de facto and de jure reachability</a></p>\n\n<p>And you might also consider reading the C# specification.</p>\n", "title": "Missing return statement in a non-void method compiles", "tags": ["c#", "java", "oop", "design"], "link": "http://stackoverflow.com/questions/16789832/missing-return-statement-in-a-non-void-method-compiles/16795317#16795317", "question_id": 16789832, "answer_id": 16795317}, {"body": "<p>In type theory, there is something called the <em>bottom type</em> which is a subclass of every other type (!) and is used to indicate non-termination among other things.  (Exceptions can count as a type of non-termination--you don't terminate via the normal path.)</p>\n\n<p>So from a theoretical perspective, these statements that are non-terminating can be considered to return something of Bottom type, which is a subtype of int, so you do (kind of) get your return value after all from a type perspective.  And it's perfectly okay that it doesn't make any sense that one type can be a subclass of everything else including int because you never actually return one.</p>\n\n<p>In any case, via explicit type theory or not, compilers (compiler writers) recognize that asking for a return value after a non-terminating statement is silly: there is no possible case in which you could need that value.  (It can be nice to have your compiler warn you when it knows something won't terminate but it looks like you want it to return something.  But that's better left for style-checkers a la lint, since maybe you need the type signature that way for some other reason (e.g. subclassing) but you really want non-termination.)</p>\n", "title": "Missing return statement in a non-void method compiles", "tags": ["c#", "java", "oop", "design"], "link": "http://stackoverflow.com/questions/16789832/missing-return-statement-in-a-non-void-method-compiles/16802818#16802818", "question_id": 16789832, "answer_id": 16802818}, {"body": "<p>I may be wrong but some debuggers allow modification of variables. Here while x is not modified by code and it will be optimized out by JIT one might modify x to false and method should return something (if such thing is allowed by C# debugger). </p>\n", "title": "Missing return statement in a non-void method compiles", "tags": ["c#", "java", "oop", "design"], "link": "http://stackoverflow.com/questions/16789832/missing-return-statement-in-a-non-void-method-compiles/17162012#17162012", "question_id": 16789832, "answer_id": 17162012}, {"body": "<p>The specifics of the Java case for this (which are probably very similar to the C# case) are to do with how the Java compiler determines if a method is able to return.</p>\n\n<p>Specifically, the rules are that a method with a return type must not be able to <em>complete normally</em> and must instead always complete <em>abruptly</em> (abruptly here indicating via a return statement or an exception) per <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.7\" rel=\"nofollow\">JLS 8.4.7</a>.</p>\n\n<blockquote>\n  <p>If a method is declared to have a return type, then a compile-time\n  error occurs if the body of the method can complete normally.\n  In other words, a method with a return type must return only by using\n  a return statement that provides a value return; <strong>it is not allowed to\n  \"drop off the end of its body\"</strong>.</p>\n</blockquote>\n\n<p>The compiler looks to see whether <em>normal termination</em> is possible based on the rules defined in <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.21\" rel=\"nofollow\">JLS 14.21 Unreachable Statements</a> as it also defines the rules for normal completion.</p>\n\n<p>Notably, the rules for unreachable statements make a special case just for loops that have a defined <code>true</code> constant expression:</p>\n\n<blockquote>\n  <p>A while statement can complete normally iff at least one of the\n  following is true:</p>\n  \n  <ul>\n  <li><p>The while statement is reachable and the condition expression is not a\n  constant expression (\u00a715.28) with value true.</p></li>\n  <li><p>There is a reachable break statement that exits the while statement.</p></li>\n  </ul>\n</blockquote>\n\n<p>So if the <code>while</code> statement can <em>complete normally</em>, then a return statement below it is necessary since the code is deemed reachable, and any <code>while</code> loop without a reachable break statement or constant <code>true</code> expression is considered able to complete normally.</p>\n\n<p>These rules mean that your <code>while</code> statement with a constant true expression and  without a <code>break</code> is <strong>never considered to complete normally</strong>, and so any code below it is <strong>never considered to be reachable</strong>.  The end of the method is below the loop, and since everything below the loop is unreachable, so is the end of the method, and thus the method cannot possibly <em>complete normally</em> (which is what the complier looks for).</p>\n\n<p><code>if</code> statements, on the other hand, do not have the special exemption regarding constant expressions that are afforded to loops.</p>\n\n<p>Compare:</p>\n\n<pre><code>// I have a compiler error!\npublic boolean testReturn()\n{\n    final boolean condition = true;\n\n    if (condition) return true;\n}\n</code></pre>\n\n<p>With:</p>\n\n<pre><code>// I compile just fine!\npublic boolean testReturn()\n{\n    final boolean condition = true;\n\n    while (condition)\n    {\n        return true;\n    }\n}\n</code></pre>\n\n<p>The reason for the distinction is quite interesting, and is due to the desire to allow for conditional compilation flags that do not cause compiler errors (from the JLS):</p>\n\n<blockquote>\n  <p>One might expect the if statement to be handled in the following\n  manner:</p>\n  \n  <ul>\n  <li><p>An if-then statement can complete normally iff at least one of the\n  following is true:</p>\n  \n  <ul>\n  <li><p>The if-then statement is reachable and the condition expression is not\n  a constant expression whose value is true.</p></li>\n  <li><p>The then-statement can complete normally.</p></li>\n  </ul>\n  \n  <p>The then-statement is reachable iff the if-then statement is reachable\n  and the condition expression is not a constant expression whose value\n  is false.</p></li>\n  <li><p>An if-then-else statement can complete normally iff the then-statement\n  can complete normally or the else-statement can complete normally.</p>\n  \n  <ul>\n  <li><p>The then-statement is reachable iff the if-then-else statement is\n  reachable and the condition expression is not a constant expression\n  whose value is false.</p></li>\n  <li><p>The else-statement is reachable iff the if-then-else statement is\n  reachable and the condition expression is not a constant expression\n  whose value is true.</p></li>\n  </ul></li>\n  </ul>\n  \n  <p>This approach would be consistent with the treatment of other control\n  structures. However, in order to allow the if statement to be used\n  conveniently for \"conditional compilation\" purposes, the actual rules\n  differ.</p>\n  \n  <p>As an example, the following statement results in a compile-time\n  error:</p>\n  \n  <p><code>while (false) { x=3; }</code> because the statement <code>x=3;</code> is not reachable;\n  but the superficially similar case:</p>\n  \n  <p><code>if (false) { x=3; }</code> does not result in a compile-time error. An\n  optimizing compiler may realize that the statement <code>x=3;</code> will never be\n  executed and may choose to omit the code for that statement from the\n  generated class file, but the statement <code>x=3;</code> is not regarded as\n  \"unreachable\" in the technical sense specified here.</p>\n  \n  <p>The rationale for this differing treatment is to allow programmers to\n  define \"flag variables\" such as:</p>\n  \n  <p><code>static final boolean DEBUG = false;</code> and then write code such as:</p>\n  \n  <p><code>if (DEBUG) { x=3; }</code> The idea is that it should be possible to change\n  the value of DEBUG from false to true or from true to false and then\n  compile the code correctly with no other changes to the program text.</p>\n</blockquote>\n\n<p><strong>Why does the conditional break statement result in a compiler error?</strong> </p>\n\n<p>As quoted in the loop reachability rules, a while loop can also complete normally if it contains a reachable break statement.  Since the rules for the reachability of an <code>if</code> statement's <em>then</em> clause do not take the condition of the <code>if</code> into consideration at all, such a conditional <code>if</code> statement's <em>then</em> clause is always considered reachable.</p>\n\n<p>If the <code>break</code> is reachable, then the code after the loop is once again also considered reachable.  Since there is no reachable code that results in <em>abrupt</em> termination after the loop, the method is then considered able to complete normally, and so the compiler flags it as an error.</p>\n", "title": "Missing return statement in a non-void method compiles", "tags": ["c#", "java", "oop", "design"], "link": "http://stackoverflow.com/questions/16789832/missing-return-statement-in-a-non-void-method-compiles/18796951#18796951", "question_id": 16789832, "answer_id": 18796951}], "creation_date": 1369737168, "score": 178, "link": "http://stackoverflow.com/questions/16789832/missing-return-statement-in-a-non-void-method-compiles", "question_id": 16789832}, {"body": "<p>to install java I have always used the classic way from the terminal.\nI would like to install java manually.\nI placed the folder of the JDK on the desk and I set environment variables (PATH, CLASSPATH and JAVA_HOME).\nFrom the terminal, if I type <code>java -version</code> I get printed</p>\n\n<pre><code>foralobo@ubuntu-vincy:~$ java -version\njava version \"1.7.0_21\"\nJava(TM) SE Runtime Environment (build 1.7.0_21-b11)\nJava HotSpot(TM) 64-Bit Server VM (build 23.21-b01, mixed mode)\n</code></pre>\n\n<p>But when I try to install eclipse or netbeans, the system warns by saying that there is no java installed on the machine.</p>\n\n<p>What is missing to compleatare manual installation?\n(Ubuntu 13.04)</p>\n", "tags": ["java", "ubuntu", "installation"], "title": "Installing Java 7 on Ubuntu", "answers": [{"body": "<p>Using Oracle Java 7 is not formally supported by Ubuntu. There's plenty solutions for installing it, listed on <a href=\"https://help.ubuntu.com/community/Java\">https://help.ubuntu.com/community/Java</a> .</p>\n\n<p>The <a href=\"http://www.webupd8.org/2012/01/install-oracle-java-jdk-7-in-ubuntu-via.html\">simplest one listed</a> is this one:</p>\n\n<pre><code>sudo add-apt-repository ppa:webupd8team/java\nsudo apt-get update\nsudo apt-get install oracle-java7-installer\n</code></pre>\n\n<p>It'll keep your java 7 installation up to date.</p>\n\n<p>To automatically set up the Java 7 environment variables JAVA_HOME and PATH:</p>\n\n<pre><code>sudo apt-get install oracle-java7-set-default\n</code></pre>\n", "title": "Installing Java 7 on Ubuntu", "tags": ["java", "ubuntu", "installation"], "link": "http://stackoverflow.com/questions/16263556/installing-java-7-on-ubuntu/16263651#16263651", "question_id": 16263556, "answer_id": 16263651}, {"body": "<p>In addition to flup's answer you might also want to run the following to set JAVA_HOME and PATH:</p>\n\n<pre><code>sudo apt-get install oracle-java7-set-default\n</code></pre>\n\n<p>More information at:\n<a href=\"http://www.ubuntuupdates.org/package/webupd8_java/precise/main/base/oracle-java7-set-default\">http://www.ubuntuupdates.org/package/webupd8_java/precise/main/base/oracle-java7-set-default</a></p>\n", "title": "Installing Java 7 on Ubuntu", "tags": ["java", "ubuntu", "installation"], "link": "http://stackoverflow.com/questions/16263556/installing-java-7-on-ubuntu/20565550#20565550", "question_id": 16263556, "answer_id": 20565550}, {"body": "<pre><code>sudo apt-get update\nsudo apt-get install openjdk-7-jdk\n</code></pre>\n\n<p>and if you already have other JDK versions installed</p>\n\n<pre><code>sudo update-alternatives --config java\n</code></pre>\n\n<p>then select the Java 7 version.</p>\n", "title": "Installing Java 7 on Ubuntu", "tags": ["java", "ubuntu", "installation"], "link": "http://stackoverflow.com/questions/16263556/installing-java-7-on-ubuntu/20965711#20965711", "question_id": 16263556, "answer_id": 20965711}, {"body": "<h1>Oracle Java 1.7.0 from .deb packages</h1>\n\n<pre><code>wget https://raw.github.com/flexiondotorg/oab-java6/master/oab-java.sh\nchmod +x oab-java.sh\nsudo ./oab-java.sh -7\nsudo apt-get update\nsudo sudo apt-get install oracle-java7-jdk oracle-java7-fonts oracle-java7-source \nsudo apt-get dist-upgrade\n</code></pre>\n\n<h2>Workaround for 1.7.0_51</h2>\n\n<p>There is an <a href=\"https://github.com/flexiondotorg/oab-java6/issues/123\" rel=\"nofollow\">Issue 123</a> currently in OAB and a <a href=\"https://github.com/flexiondotorg/oab-java6/pull/125\" rel=\"nofollow\">pull request</a></p>\n\n<p>Here is the patched vesion:</p>\n\n<pre><code>wget https://raw.github.com/ladios/oab-java6/master/oab-java.sh\nchmod +x oab-java.sh\nsudo ./oab-java.sh -7\nsudo apt-get update\nsudo sudo apt-get install oracle-java7-jdk oracle-java7-fonts oracle-java7-source \nsudo apt-get dist-upgrade\n</code></pre>\n", "title": "Installing Java 7 on Ubuntu", "tags": ["java", "ubuntu", "installation"], "link": "http://stackoverflow.com/questions/16263556/installing-java-7-on-ubuntu/21334126#21334126", "question_id": 16263556, "answer_id": 21334126}, {"body": "<p><a href=\"http://stackoverflow.com/questions/16263556/installing-java-7-on-ubuntu?answertab=active#tab-top\">flup's answer</a> is the best but it did not work for me completely. I had to do the following as well to get it working:</p>\n\n<ol>\n<li><code>export JAVA_HOME=/usr/lib/jvm/java-7-oracle/jre/</code></li>\n<li><code>chmod 777</code> on the folder</li>\n<li><code>./gradlew build</code> - Building Hibernate</li>\n</ol>\n", "title": "Installing Java 7 on Ubuntu", "tags": ["java", "ubuntu", "installation"], "link": "http://stackoverflow.com/questions/16263556/installing-java-7-on-ubuntu/25782153#25782153", "question_id": 16263556, "answer_id": 25782153}, {"body": "<p>I think you should consider Java installation procedure carefully. Following is the detailed process which covers almost all possible failures.</p>\n\n<p>Installing Java with <strong>apt-get</strong> is easy. First, update the package index:</p>\n\n<pre><code>sudo apt-get update\n</code></pre>\n\n<p>Then, check if Java is not already installed:</p>\n\n<pre><code>java -version\n</code></pre>\n\n<p>If it returns \"The program java can be found in the following packages\", Java hasn't been installed yet, so execute the following command:</p>\n\n<pre><code>sudo apt-get install default-jre\n</code></pre>\n\n<p><strong>You are fine till now as I assume.</strong></p>\n\n<p>This will install the Java Runtime Environment (JRE). If you instead need the Java Development Kit (JDK), which is usually needed to compile Java applications (for example Apache Ant, Apache Maven, Eclipse and IntelliJ IDEA execute the following command:</p>\n\n<pre><code>sudo apt-get install default-jdk\n</code></pre>\n\n<p><strong>That is everything that is needed to install Java.</strong> </p>\n\n<p><strong>Installing OpenJDK 7:</strong></p>\n\n<p>To install OpenJDK 7, execute the following command:</p>\n\n<pre><code>sudo apt-get install openjdk-7-jre \n</code></pre>\n\n<p>This will install the Java Runtime Environment (JRE). If you instead need the Java Development Kit (JDK), execute the following command:</p>\n\n<pre><code>sudo apt-get install openjdk-7-jdk\n</code></pre>\n\n<p><strong>Installing Oracle JDK:</strong></p>\n\n<p>The Oracle JDK is the official JDK; however, it is no longer provided by Oracle as a default installation for Ubuntu. </p>\n\n<p>You can still install it using apt-get. To install any version, first execute the following commands:</p>\n\n<pre><code>sudo apt-get install python-software-properties\nsudo add-apt-repository ppa:webupd8team/java\nsudo apt-get update\n</code></pre>\n\n<p>Then, depending on the version you want to install, execute one of the following commands:</p>\n\n<p><strong>Oracle JDK 7:</strong></p>\n\n<pre><code>sudo apt-get install oracle-java7-installer\n</code></pre>\n\n<p><strong>Oracle JDK 8:</strong></p>\n\n<pre><code>sudo apt-get install oracle-java8-installer\n</code></pre>\n", "title": "Installing Java 7 on Ubuntu", "tags": ["java", "ubuntu", "installation"], "link": "http://stackoverflow.com/questions/16263556/installing-java-7-on-ubuntu/28009846#28009846", "question_id": 16263556, "answer_id": 28009846}, {"body": "<p>Download the 32-bit or 64-bit Linux  from \"<a href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html\" rel=\"nofollow\">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a>\" \"compressed binary file\" - it has a \".tar.gz\" file extension.</p>\n\n<p>Uncompress it</p>\n\n<pre><code>tar -xvf jdk-7u75-linux-x64.tar.gz (32-bit)\n\ntar -xvf jdk-7u75-linux-x64.tar.gz (64-bit)\n</code></pre>\n\n<p>The JDK 7 package is extracted into <code>./jdk1.7.0_75</code> directory. </p>\n\n<p>Now move the JDK 7 directory to <code>/usr/lib</code></p>\n\n<pre><code>sudo mkdir -p /usr/lib/jvm\nsudo mv ./jdk1.7.0_75 /usr/lib/jvm/\n</code></pre>\n\n<p>Now run</p>\n\n<pre><code>sudo update-alternatives --install \"/usr/bin/java\" \"java\" \"/usr/lib/jvm/jdk1.7.0_75/bin/java\" 1\nsudo update-alternatives --install \"/usr/bin/javac\" \"javac\" \"/usr/lib/jvm/jdk1.7.0_75/bin/javac\" 1\nsudo update-alternatives --install \"/usr/bin/javaws\" \"javaws\" \"/usr/lib/jvm/jdk1.7.0_75/bin/javaws\" 1\n</code></pre>\n\n<p>This will assign Oracle JDK a priority of 1, which means that installing other JDKs will replace it as the default. Be sure to use a higher priority if you want Oracle JDK to remain the default.</p>\n\n<p>Correct the file ownership and the permissions of the executables:</p>\n\n<pre><code>sudo chmod a+x /usr/bin/java\nsudo chmod a+x /usr/bin/javac\nsudo chmod a+x /usr/bin/javaws\nsudo chown -R root:root /usr/lib/jvm/jdk1.7.0_75\n</code></pre>\n\n<p>Run</p>\n\n<pre><code>sudo update-alternatives --config java\n</code></pre>\n\n<p>You will see output similar to the one below - choose the number of <code>jdk1.7.0_75</code> - for example 3 in this list (unless you have have never installed Java installed in your computer in which case a sentence saying \"There is nothing to configure\" will appear):</p>\n\n<pre><code>$ sudo update-alternatives --config java\n</code></pre>\n\n<p>There are 3 choices for the alternative java (providing <code>/usr/bin/java</code>).</p>\n\n<pre><code>  Selection    Path                                  Priority   Status\n------------------------------------------------------------\n* 0            /usr/lib/jvm/java-6-oracle1/bin/java   1047      auto mode\n  1            /usr/bin/gij-4.6                       1046      manual mode\n  2            /usr/lib/jvm/java-6-oracle1/bin/java   1047      manual mode\n  3            /usr/lib/jvm/jdk1.7.0_75/bin/java      1         manual mode\n</code></pre>\n\n<p>Press enter to keep the current choice [<code>*</code>], or type selection number: 3</p>\n\n<pre><code>update-alternatives: using /usr/lib/jvm/jdk1.7.0_75/bin/java to provide /usr/bin/java (java) in manual mode\n</code></pre>\n\n<p>Repeat the above for:</p>\n\n<pre><code>sudo update-alternatives --config javac\nsudo update-alternatives --config javaws\n</code></pre>\n", "title": "Installing Java 7 on Ubuntu", "tags": ["java", "ubuntu", "installation"], "link": "http://stackoverflow.com/questions/16263556/installing-java-7-on-ubuntu/28874505#28874505", "question_id": 16263556, "answer_id": 28874505}], "creation_date": 1367157191, "score": 174, "link": "http://stackoverflow.com/questions/16263556/installing-java-7-on-ubuntu", "question_id": 16263556}, {"body": "<p>I am trying to use the <code>org.springframework.orm.jdo.TransactionAwarePersistenceManagerFactoryProxy</code> in my Spring project, but I am not sure how to use it or whether it's exactly what I am looking for. I realize it can help make my DAOs work with a plain JDO <code>PersistenceManagerFactory</code>. Another question is: what happens if the proxy doesn't get made properly? Can I still use it to access my factory to create a transaction aware persistence manager? If the object managed by the factory is a singleton, does this change things? Why not just access the PersistenceManagerFactory directly? Perhaps <code>PersistenceManagerFactoryUtils.getPersistenceManager</code> would be more suited to my needs? Can <code>getObject</code> return null?</p>\n", "tags": ["java", "spring", "persistence", "dao", "jdo"], "title": "Unsure if I understand TransactionAwarePersistenceManagerFactoryProxy", "answers": [{"body": "<p>Answers are directly available on <a href=\"http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/orm/jdo/TransactionAwarePersistenceManagerFactoryProxy.html\">documentation</a></p>\n\n<blockquote>\n  <p>I realize it can help make my DAOs work with a plain JDO PersistenceManagerFactory. </p>\n</blockquote>\n\n<p>Yes.\nTransactionAwarePersistenceManagerFactoryProxy proxy allows DAOs to work with a plain JDO PersistenceManagerFactory reference, while still participating in Spring's (or a J2EE server's) resource and transaction management.\nYou can surely use it in your app. But without knowing your exact needs, we can't confirm any further.</p>\n\n<blockquote>\n  <p>Can I still use it to access my factory to create a transaction aware persistence manager</p>\n</blockquote>\n\n<p>DAOs could seamlessly switch between a JNDI PersistenceManagerFactory and this proxy for a local PersistenceManagerFactory.</p>\n\n<blockquote>\n  <p>If the object managed by the factory is a singleton, does this change things? Why not just access the PersistenceManagerFactory directly? </p>\n</blockquote>\n\n<p>It is usually preferable to write your JDO-based DAOs with Spring's JdoTemplate, offering benefits such as consistent data access exceptions instead of JDOExceptions at the DAO layer. However, Spring's resource and transaction management (and Dependency Injection) will work for DAOs written against the plain JDO API as well.</p>\n", "title": "Unsure if I understand TransactionAwarePersistenceManagerFactoryProxy", "tags": ["java", "spring", "persistence", "dao", "jdo"], "link": "http://stackoverflow.com/questions/14636178/unsure-if-i-understand-transactionawarepersistencemanagerfactoryproxy/17376839#17376839", "question_id": 14636178, "answer_id": 17376839}], "creation_date": 1359670687, "score": 170, "link": "http://stackoverflow.com/questions/14636178/unsure-if-i-understand-transactionawarepersistencemanagerfactoryproxy", "question_id": 14636178}, {"body": "<p>I made a class called <code>QuickRandom</code>, and its job is to produce random numbers quickly. It's really simple: just take the old value, multiply by a <code>double</code>, and take the decimal part.</p>\n\n<p>Here is my <code>QuickRandom</code> class in its entirety:</p>\n\n<pre><code>public class QuickRandom {\n    private double prevNum;\n    private double magicNumber;\n\n    public QuickRandom(double seed1, double seed2) {\n        if (seed1 &gt;= 1 || seed1 &lt; 0) throw new IllegalArgumentException(\"Seed 1 must be &gt;= 0 and &lt; 1, not \" + seed1);\n        prevNum = seed1;\n        if (seed2 &lt;= 1 || seed2 &gt; 10) throw new IllegalArgumentException(\"Seed 2 must be &gt; 1 and &lt;= 10, not \" + seed2);\n        magicNumber = seed2;\n    }\n\n    public QuickRandom() {\n        this(Math.random(), Math.random() * 10);\n    }\n\n    public double random() {\n        return prevNum = (prevNum*magicNumber)%1;\n    }\n\n}\n</code></pre>\n\n<p>And here is the code I wrote to test it:</p>\n\n<pre><code>public static void main(String[] args) {\n        QuickRandom qr = new QuickRandom();\n\n        /*for (int i = 0; i &lt; 20; i ++) {\n            System.out.println(qr.random());\n        }*/\n\n        //Warm up\n        for (int i = 0; i &lt; 10000000; i ++) {\n            Math.random();\n            qr.random();\n            System.nanoTime();\n        }\n\n        long oldTime;\n\n        oldTime = System.nanoTime();\n        for (int i = 0; i &lt; 100000000; i ++) {\n            Math.random();\n        }\n        System.out.println(System.nanoTime() - oldTime);\n\n        oldTime = System.nanoTime();\n        for (int i = 0; i &lt; 100000000; i ++) {\n            qr.random();\n        }\n        System.out.println(System.nanoTime() - oldTime);\n}\n</code></pre>\n\n<p>It is a very simple algorithm that simply multiplies the previous double by a \"magic number\" double. I threw it together pretty quickly, so I could probably make it better, but strangely, it seems to be working fine.</p>\n\n<p>This is sample output of the commented-out lines in the <code>main</code> method:</p>\n\n<pre><code>0.612201846732229\n0.5823974655091941\n0.31062451498865684\n0.8324473610354004\n0.5907187526770246\n0.38650264675748947\n0.5243464344127049\n0.7812828761272188\n0.12417247811074805\n0.1322738256858378\n0.20614642573072284\n0.8797579436677381\n0.022122999476108518\n0.2017298328387873\n0.8394849894162446\n0.6548917685640614\n0.971667953190428\n0.8602096647696964\n0.8438709031160894\n0.694884972852229\n</code></pre>\n\n<p>Hm. Pretty random. In fact, that would work for a random number generator in a game.</p>\n\n<p>Here is sample output of the non-commented out part:</p>\n\n<pre><code>5456313909\n1427223941\n</code></pre>\n\n<p>Wow! It performs almost 4 times faster than <code>Math.random</code>.</p>\n\n<p>I remember reading somewhere that <code>Math.random</code> used <code>System.nanoTime()</code> and tons of crazy modulus and division stuff. Is that really necessary? My algorithm performs a lot faster and it seems pretty random.</p>\n\n<p>I have two questions:</p>\n\n<ul>\n<li>Is my algorithm \"good enough\" (for, say, a game, where <strong>really</strong> random numbers aren't too important)?</li>\n<li>Why does <code>Math.random</code> do so much when it seems just simple multiplication and cutting out the decimal will suffice?</li>\n</ul>\n", "tags": ["java", "performance", "algorithm", "random"], "title": "Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?", "answers": [{"body": "<p>'Random' is more than just about getting numbers.... what you have is <a href=\"http://en.wikipedia.org/wiki/Pseudorandomness\" rel=\"nofollow\">pseudo-random</a></p>\n\n<p>If pseudo-random is good enough for your purposes, then sure, it's way faster (and XOR+Bitshift will be faster than what you have)</p>\n\n<p>Rolf</p>\n\n<p>Edit:</p>\n\n<p>OK, after being too hasty in this answer, let me answer the real reason why your code is faster:</p>\n\n<p>From the JavaDoc for Math.Random() </p>\n\n<blockquote>\n  <p>This method is properly synchronized to allow correct use by more than one thread. However, if many threads need to generate pseudorandom numbers at a great rate, it may reduce contention for each thread to have its own pseudorandom-number generator.</p>\n</blockquote>\n\n<p>This is likely why your code is faster.</p>\n", "title": "Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?", "tags": ["java", "performance", "algorithm", "random"], "link": "http://stackoverflow.com/questions/14491966/is-this-a-good-enough-random-algorithm-why-isnt-it-used-if-its-faster/14492043#14492043", "question_id": 14491966, "answer_id": 14492043}, {"body": "<p>What you are describing is a type of random generator called a <a href=\"http://en.wikipedia.org/wiki/Linear_congruential_generator\">linear congruential generator</a>.  The generator works as follows:</p>\n\n<ul>\n<li>Start with a seed value and multiplier.</li>\n<li>To generate a random number:\n\n<ul>\n<li>Multiply the seed by the multiplier.</li>\n<li>Set the seed equal to this value.</li>\n<li>Return this value.</li>\n</ul></li>\n</ul>\n\n<p>This generator has many nice properties, but has significant problems as a good random source.  The Wikipedia article linked above describes some of the strengths and weaknesses.  In short, if you need good random values, this is probably not a very good approach.</p>\n\n<p>Hope this helps!</p>\n", "title": "Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?", "tags": ["java", "performance", "algorithm", "random"], "link": "http://stackoverflow.com/questions/14491966/is-this-a-good-enough-random-algorithm-why-isnt-it-used-if-its-faster/14492105#14492105", "question_id": 14491966, "answer_id": 14492105}, {"body": "<p>Your random number function is poor, as it has too little internal state -- the number output by the function at any given step is entirely dependent on the previous number. For instance, if we assume that <code>magicNumber</code> is 2 (by way of example), then the sequence:</p>\n\n<pre><code>0.10 -&gt; 0.20\n</code></pre>\n\n<p>is strongly mirrored by similar sequences:</p>\n\n<pre><code>0.09 -&gt; 0.18\n0.11 -&gt; 0.22\n</code></pre>\n\n<p>In many cases, this will generate noticeable correlations in your game -- for instance, if you make successive calls to your function to generate X and Y coordinates for objects, the objects will form clear diagonal patterns.</p>\n\n<p>Unless you have good reason to believe that the random number generator is slowing your application down (and this is VERY unlikely), there is no good reason to try and write your own.</p>\n", "title": "Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?", "tags": ["java", "performance", "algorithm", "random"], "link": "http://stackoverflow.com/questions/14491966/is-this-a-good-enough-random-algorithm-why-isnt-it-used-if-its-faster/14492114#14492114", "question_id": 14491966, "answer_id": 14492114}, {"body": "<p>One problem with your random number generator is that there is no 'hidden state' - if I know what random number you returned on the last call, I know every single random number you will send until the end of time, since there is only one possible next result, and so on and so on.</p>\n\n<p>Another thing to consider is the 'period' of your random number generator. Obviously with a finite state size, equal to the mantissa portion of a double, it will only be able to return at most 2^52 values before looping. But that's in the best case - can you prove that there are no loops of period 1, 2, 3, 4...? If there are, your RNG will have awful, degenerate behavior in those cases.</p>\n\n<p>In addition, will your random number generation have a uniform distribution for all starting points? If it does not, then your RNG will be biased - or worse, biased in different ways depending on the starting seed.</p>\n\n<p>If you can answer all of these questions, awesome. If you can't, then you know why most people do not re-invent the wheel and use a proven random number generator ;)</p>\n\n<p><em>(By the way, a good adage is: The fastest code is code that does not run. You could make the fastest random() in the world, but it's no good if it is not very random)</em></p>\n", "title": "Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?", "tags": ["java", "performance", "algorithm", "random"], "link": "http://stackoverflow.com/questions/14491966/is-this-a-good-enough-random-algorithm-why-isnt-it-used-if-its-faster/14492128#14492128", "question_id": 14491966, "answer_id": 14492128}, {"body": "<p>I put together <a href=\"http://jsfiddle.net/Dhtzh/\">a quick mock-up of your algorithm</a> in JavaScript to evaluate the results.  It generates 100,000 random integers from 0 - 99 and tracks the instance of each integer.</p>\n\n<p>The first thing I notice is that you are more likely to get a low number than a high number.  You see this the most when <code>seed1</code> is high and <code>seed2</code> is low.  In a couple of instances, I got only 3 numbers.</p>\n\n<p>At best, your algorithm needs some refining.</p>\n", "title": "Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?", "tags": ["java", "performance", "algorithm", "random"], "link": "http://stackoverflow.com/questions/14491966/is-this-a-good-enough-random-algorithm-why-isnt-it-used-if-its-faster/14492309#14492309", "question_id": 14491966, "answer_id": 14492309}, {"body": "<p>Your <code>QuickRandom</code> implementation hasn't really an uniform distribution. The frequencies are generally higher at the lower values while <code>Math.random()</code> has a more uniform distribution. Here's a <a href=\"http://sscce.org\">SSCCE</a> which shows that:</p>\n\n<pre><code>package com.stackoverflow.q14491966;\n\nimport java.util.Arrays;\n\npublic class Test {\n\n    public static void main(String[] args) throws Exception {\n        QuickRandom qr = new QuickRandom();\n        int[] frequencies = new int[10];\n        for (int i = 0; i &lt; 100000; i++) {\n            frequencies[(int) (qr.random() * 10)]++;\n        }\n        printDistribution(\"QR\", frequencies);\n\n        frequencies = new int[10];\n        for (int i = 0; i &lt; 100000; i++) {\n            frequencies[(int) (Math.random() * 10)]++;\n        }\n        printDistribution(\"MR\", frequencies);\n    }\n\n    public static void printDistribution(String name, int[] frequencies) {\n        System.out.printf(\"%n%s distribution |8000     |9000     |10000    |11000    |12000%n\", name);\n        for (int i = 0; i &lt; 10; i++) {\n            char[] bar = \"                                                  \".toCharArray(); // 50 chars.\n            Arrays.fill(bar, 0, Math.max(0, Math.min(50, frequencies[i] / 100 - 80)), '#');\n            System.out.printf(\"0.%dxxx: %6d  :%s%n\", i, frequencies[i], new String(bar));\n        }\n    }\n\n}\n</code></pre>\n\n<p>The average result looks like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>QR distribution |8000     |9000     |10000    |11000    |12000\n0.0xxx:  11376  :#################################                 \n0.1xxx:  11178  :###############################                   \n0.2xxx:  11312  :#################################                 \n0.3xxx:  10809  :############################                      \n0.4xxx:  10242  :######################                            \n0.5xxx:   8860  :########                                          \n0.6xxx:   9004  :##########                                        \n0.7xxx:   8987  :#########                                         \n0.8xxx:   9075  :##########                                        \n0.9xxx:   9157  :###########                                       \n\nMR distribution |8000     |9000     |10000    |11000    |12000\n0.0xxx:  10097  :####################                              \n0.1xxx:   9901  :###################                               \n0.2xxx:  10018  :####################                              \n0.3xxx:   9956  :###################                               \n0.4xxx:   9974  :###################                               \n0.5xxx:  10007  :####################                              \n0.6xxx:  10136  :#####################                             \n0.7xxx:   9937  :###################                               \n0.8xxx:  10029  :####################                              \n0.9xxx:   9945  :###################    \n</code></pre>\n\n<p>If you repeat the test, you'll see that the QR distribution varies heavily, depending on the initial seeds, while the MR distribution is stable. Sometimes it reaches the desired uniform distribution, but more than often it doesn't. Here's one of the more extreme examples, it's even beyond the borders of the graph:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>QR distribution |8000     |9000     |10000    |11000    |12000\n0.0xxx:  41788  :##################################################\n0.1xxx:  17495  :##################################################\n0.2xxx:  10285  :######################                            \n0.3xxx:   7273  :                                                  \n0.4xxx:   5643  :                                                  \n0.5xxx:   4608  :                                                  \n0.6xxx:   3907  :                                                  \n0.7xxx:   3350  :                                                  \n0.8xxx:   2999  :                                                  \n0.9xxx:   2652  :                                                  \n</code></pre>\n", "title": "Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?", "tags": ["java", "performance", "algorithm", "random"], "link": "http://stackoverflow.com/questions/14491966/is-this-a-good-enough-random-algorithm-why-isnt-it-used-if-its-faster/14492320#14492320", "question_id": 14491966, "answer_id": 14492320}, {"body": "<p>If the <code>Math.Random()</code> function calls the operating system to get the time of day, then you cannot compare it to your function. Your function is a PRNG, whereas that function is striving for real random numbers. Apples and oranges.</p>\n\n<p>Your PRNG may be fast, but it does not have enough state information to achieve a long period before it repeats (and its logic is not sophisticated enough to even achieve the periods that are possible with that much state information).</p>\n\n<p>Period is the length of the sequence before your PRNG begins to repeat itself.  This happens as soon as the PRNG machine makes a state transition to a state which is identical to some past state. From there, it will repeat the transitions which began in that state. Another problem with PRNG's can be a low number of unique sequences, as well as degenerate convergence on a particular sequence which repeats. There can also be undesirable patterns. For instance, suppose that a PRNG looks fairly random when the numbers are printed in decimal, but an inspection of the values in binary shows that bit 4 is simply toggling between 0 and 1 on each call. Oops!</p>\n\n<p>Take a look at the Mersenne Twister and other algorithms. There are ways to strike a balance between the period length and CPU cycles. One basic approach (used in the Mersenne Twister) is to cycle around in the state vector. That is to say, when a number is being generated, it is not based on the entire state, just on a few words from the state array subject to a few bit operations. But at each step, the algorithm also moves around in the array, scrambling the contents a little bit at a time.</p>\n", "title": "Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?", "tags": ["java", "performance", "algorithm", "random"], "link": "http://stackoverflow.com/questions/14491966/is-this-a-good-enough-random-algorithm-why-isnt-it-used-if-its-faster/14495128#14495128", "question_id": 14491966, "answer_id": 14495128}, {"body": "<p>There are many, many pseudo random number generators out there. For example Knuth's <a href=\"http://www-cs-faculty.stanford.edu/~uno/programs.html\">ranarray</a>, the <a href=\"http://saluc.engr.uconn.edu/refs/crypto/rng/matsumoto98mersenne.pdf\">Mersenne twister</a>, or look for LFSR generators. Knuth's monumental \"Seminumerical algorithms\" analizes the area, and proposes some linear congruential generators (simple to implement, fast). </p>\n\n<p>But I'd suggest you just stick to <code>java.util.Random</code> or <code>Math.random</code>, they fast and at least OK for occasional use (i.e., games and such). If you are just paranoid on the distribution (some Monte Carlo program, or a genetic algorithm), check out their implementation (source is available somewhere), and seed them with some truly random number, either from your operating system or from <a href=\"http://random.org\">random.org</a>. If this is required for some application where security is critical, you'll have to dig yourself. And as in that case you shouldn't believe what some colored square with missing bits spouts here, I'll shut up now.</p>\n", "title": "Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?", "tags": ["java", "performance", "algorithm", "random"], "link": "http://stackoverflow.com/questions/14491966/is-this-a-good-enough-random-algorithm-why-isnt-it-used-if-its-faster/14502259#14502259", "question_id": 14491966, "answer_id": 14502259}, {"body": "<p>One common test I always did when developing PRNGs was to :</p>\n\n<ol>\n<li>Convert output to char values</li>\n<li>Write chars value to a file</li>\n<li>Compress file</li>\n</ol>\n\n<p>This let me quickly iterate on ideas that were \"good enough\" PRNGs for sequences of around 1 to 20 megabytes. It also gave a better top down picture than just inspecting it by eye, as any \"good enough\" PRNG with half-a-word of state could quickly exceed your eyes ability to see the cycle point. </p>\n\n<p>If I was really picky, I might take the good algorithms and run the DIEHARD/NIST tests on them, to get more of an insight, and then go back and tweak some more.</p>\n\n<p>The advantage of the compression test, as opposed to a frequency analysis is that, trivially it is easy to construct a good distribution : simply output a 256 length block containing all chars of values 0 - 255, and do this 100,000 times. But this sequence has a cycle of length 256. </p>\n\n<p>A skewed distribution, even by a small margin, should be picked up by a compression algorithm, particularly if you give it enough (say 1 megabyte) of the sequence to work with. If some characters, or bigrams, or n-grams occur more frequently, a compression algorithm can encode this distribution skew to codes that favor the frequent occurrences with shorter code words, and you get a delta of compression.</p>\n\n<p>Since most compression algorithms are fast, and they require no implementation (as OSs have them just lying around), the compression test is a very useful one for quickly rating pass/fail for an PRNG you might be developing.</p>\n\n<p>Good luck with your experiments!</p>\n\n<p>Oh, I performed this test on the rng you have above, using the following small mod of your code :</p>\n\n<pre><code>import java.io.*;\n\npublic class QuickRandom {\n    private double prevNum;\n    private double magicNumber;\n\n    public QuickRandom(double seed1, double seed2) {\n        if (seed1 &gt;= 1 || seed1 &lt; 0) throw new IllegalArgumentException(\"Seed 1 must be &gt;= 0 and &lt; 1, not \" + seed1);\n        prevNum = seed1;\n        if (seed2 &lt;= 1 || seed2 &gt; 10) throw new IllegalArgumentException(\"Seed 2 must be &gt; 1 and &lt;= 10, not \" + seed2);\n        magicNumber = seed2;\n    }\n\n    public QuickRandom() {\n        this(Math.random(), Math.random() * 10);\n    }\n\n    public double random() {\n        return prevNum = (prevNum*magicNumber)%1;\n    }\n\n    public static void main(String[] args) throws Exception {\n        QuickRandom qr = new QuickRandom();\n        FileOutputStream fout = new FileOutputStream(\"qr20M.bin\");\n\n        for (int i = 0; i &lt; 20000000; i ++) {\n            fout.write((char)(qr.random()*256));\n        }\n    }\n}\n</code></pre>\n\n<p>The results were :</p>\n\n<pre><code>Cris-Mac-Book-2:rt cris$ zip -9 qr20M.zip qr20M.bin2\nadding: qr20M.bin2 (deflated 16%)\nCris-Mac-Book-2:rt cris$ ls -al\ntotal 104400\ndrwxr-xr-x   8 cris  staff       272 Jan 25 05:09 .\ndrwxr-xr-x+ 48 cris  staff      1632 Jan 25 05:04 ..\n-rw-r--r--   1 cris  staff      1243 Jan 25 04:54 QuickRandom.class\n-rw-r--r--   1 cris  staff       883 Jan 25 05:04 QuickRandom.java\n-rw-r--r--   1 cris  staff  16717260 Jan 25 04:55 qr20M.bin.gz\n-rw-r--r--   1 cris  staff  20000000 Jan 25 05:07 qr20M.bin2\n-rw-r--r--   1 cris  staff  16717402 Jan 25 05:09 qr20M.zip\n</code></pre>\n\n<p>I would consider an PRNG good if the output file could not be compressed at all.\nTo be honest, I did not think your PRNG would do so well, only 16% on ~20 Megs is pretty impressive for such a simple construction. But I still consider it a fail.</p>\n", "title": "Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?", "tags": ["java", "performance", "algorithm", "random"], "link": "http://stackoverflow.com/questions/14491966/is-this-a-good-enough-random-algorithm-why-isnt-it-used-if-its-faster/14510880#14510880", "question_id": 14491966, "answer_id": 14510880}, {"body": "<p>java.util.Random is not much different, a basic LCG described by Knuth. However it has main 2 main advantages/differences:</p>\n\n<ul>\n<li>thread safe - each update is a CAS which is more expensive than a simple write and needs a branch (even if perfectly predicted single threaded). Depending on the CPU it could be significant difference.</li>\n<li>undisclosed internal state - this is very important for anything non-trivial. You wish the random numbers not to be predictable.</li>\n</ul>\n\n<p>Below it's the main routine generating 'random' integers in java.util.Random.</p>\n\n<pre><code>\n  protected int next(int bits) {\n        long oldseed, nextseed;\n        AtomicLong seed = this.seed;\n        do {\n          oldseed = seed.get();\n          nextseed = (oldseed * multiplier + addend) & mask;\n        } while (!seed.compareAndSet(oldseed, nextseed));\n        return (int)(nextseed >>> (48 - bits));\n    }\n\n</code></pre>\n\n<p>If you remove the AtomicLong and the undisclosed sate (i.e. using all bits of the <code>long</code>), you'd get more performance than the double multiplication/modulo. </p>\n\n<p>Last note: <code>Math.random</code> should not be used for anything but simple tests, it's prone to contention and if you have even a couple of threads calling it concurrently the performance degrades. One little known historical feature of it is the introduction of CAS in java - to beat an infamous benchmark (first by IBM via intrinsics and then Sun made \"CAS from Java\") </p>\n", "title": "Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?", "tags": ["java", "performance", "algorithm", "random"], "link": "http://stackoverflow.com/questions/14491966/is-this-a-good-enough-random-algorithm-why-isnt-it-used-if-its-faster/14513598#14513598", "question_id": 14491966, "answer_id": 14513598}, {"body": "<p>The real problem with this is that it's output histogram is dependent on the initial seed far to much - much of the time it will end up with a near uniform output but a lot of the time will have distinctly un-uniform output.</p>\n\n<p>Inspired by <a href=\"http://boallen.com/random-numbers.html\">this article about how bad php's <code>rand()</code> function is</a>, I made some random matrix images using <code>QuickRandom</code> and <code>System.Random</code>. This run shows how sometimes the seed can have a bad effect (in this case favouring lower numbers) where as <code>System.Random</code> is pretty uniform.</p>\n\n<h1><code>QuickRandom</code></h1>\n\n<p><img src=\"http://i.stack.imgur.com/6LaLK.png\" alt=\"\"></p>\n\n<h1><code>System.Random</code></h1>\n\n<p><img src=\"http://i.stack.imgur.com/CBwTp.png\" alt=\"\"></p>\n\n<h1>Even Worse</h1>\n\n<p>If we initialise <code>QuickRandom</code> as <code>new QuickRandom(0.01, 1.03)</code> we get this image:</p>\n\n<p><img src=\"http://i.imgur.com/Q1Yunbe.png\" alt=\"\"></p>\n\n<h1>The Code</h1>\n\n<pre><code>using System;\nusing System.Drawing;\nusing System.Drawing.Imaging;\n\nnamespace QuickRandomTest\n{\n    public class QuickRandom\n    {\n        private double prevNum;\n        private readonly double magicNumber;\n\n        private static readonly Random rand = new Random();\n\n        public QuickRandom(double seed1, double seed2)\n        {\n            if (seed1 &gt;= 1 || seed1 &lt; 0) throw new ArgumentException(\"Seed 1 must be &gt;= 0 and &lt; 1, not \" + seed1);\n            prevNum = seed1;\n            if (seed2 &lt;= 1 || seed2 &gt; 10) throw new ArgumentException(\"Seed 2 must be &gt; 1 and &lt;= 10, not \" + seed2);\n            magicNumber = seed2;\n        }\n\n        public QuickRandom()\n            : this(rand.NextDouble(), rand.NextDouble() * 10)\n        {\n        }\n\n        public double Random()\n        {\n            return prevNum = (prevNum * magicNumber) % 1;\n        }\n    }\n\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            var rand = new Random();\n            var qrand = new QuickRandom();\n            int w = 600;\n            int h = 600;\n            CreateMatrix(w, h, rand.NextDouble).Save(\"System.Random.png\", ImageFormat.Png);\n            CreateMatrix(w, h, qrand.Random).Save(\"QuickRandom.png\", ImageFormat.Png);\n        }\n\n        private static Image CreateMatrix(int width, int height, Func&lt;double&gt; f)\n        {\n            var bitmap = new Bitmap(width, height);\n            for (int y = 0; y &lt; height; y++) {\n                for (int x = 0; x &lt; width; x++) {\n                    var c = (int) (f()*255);\n                    bitmap.SetPixel(x, y, Color.FromArgb(c,c,c));\n                }\n            }\n\n            return bitmap;\n        }\n    }\n}\n</code></pre>\n", "title": "Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?", "tags": ["java", "performance", "algorithm", "random"], "link": "http://stackoverflow.com/questions/14491966/is-this-a-good-enough-random-algorithm-why-isnt-it-used-if-its-faster/14526729#14526729", "question_id": 14491966, "answer_id": 14526729}, {"body": "<p>It is very unlikely that random number generation performance would be an issue for any use-case you came up with unless accessing a single <code>Random</code> instance from multiple threads (because <code>Random</code> is <code>synchronized</code>).</p>\n\n<p>However, if that <em>really</em> is the case and you need lots of random numbers fast, your solution is far too unreliable. Sometimes it gives good results, sometimes it gives <em>horrible</em> results (based on the initial settings).</p>\n\n<p>If you want the same numbers that the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Random.html\" rel=\"nofollow\"><code>Random</code></a> class gives you, only faster, you could get rid of the synchronization in there:</p>\n\n<pre><code>public class QuickRandom {\n\n    private long seed;\n\n    private static final long MULTIPLIER = 0x5DEECE66DL;\n    private static final long ADDEND = 0xBL;\n    private static final long MASK = (1L &lt;&lt; 48) - 1;\n\n    public QuickRandom() {\n        this((8682522807148012L * 181783497276652981L) ^ System.nanoTime());\n    }\n\n    public QuickRandom(long seed) {\n        this.seed = (seed ^ MULTIPLIER) &amp; MASK;\n    }\n\n    public double nextDouble() {\n        return (((long)(next(26)) &lt;&lt; 27) + next(27)) / (double)(1L &lt;&lt; 53);\n    }\n\n    private int next(int bits) {\n        seed = (seed * MULTIPLIER + ADDEND) &amp; MASK;\n        return (int)(seed &gt;&gt;&gt; (48 - bits));\n    }\n\n}\n</code></pre>\n\n<p>I simply took the <a href=\"http://hg.openjdk.java.net/jdk7u/jdk7u-gate/jdk/file/791e94e7b64f/src/share/classes/java/util/Random.java\" rel=\"nofollow\"><code>java.util.Random</code></a> code and removed the synchronization which results in <em>twice</em> the performance compared to the original on my Oracle HotSpot JVM 7u9. It is still slower than your <code>QuickRandom</code>, but it gives much more consistent results. To be precise, for the same <code>seed</code> values and single threaded applications, it gives <em>the same</em> pseudo-random numbers as the original <code>Random</code> class would.</p>\n\n<hr>\n\n<p><sub>This code is based on the current <a href=\"http://hg.openjdk.java.net/jdk7u/jdk7u-gate/jdk/file/791e94e7b64f/src/share/classes/java/util/Random.java\" rel=\"nofollow\"><code>java.util.Random</code> in OpenJDK 7u</a> which is licensed under <a href=\"http://www.gnu.org/licenses/gpl-2.0.html\" rel=\"nofollow\">GNU GPL v2</a>.</sub></p>\n\n<hr>\n\n<p><strong>EDIT</strong> 10 months later:</p>\n\n<p>I just discovered that you don't even have to use my code above to get an unsynchronized <code>Random</code> instance. There's one in the JDK, too!</p>\n\n<p>Look at Java 7's <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadLocalRandom.html\" rel=\"nofollow\"><code>ThreadLocalRandom</code></a> class. The code inside it is almost identical to my code above. The class is simply a local-thread-isolated <code>Random</code> version suitable for generating random numbers quickly. The only downside I can think of is that you can't set its <code>seed</code> manually.</p>\n\n<p>Example usage:</p>\n\n<pre><code>Random random = ThreadLocalRandom.current();\n</code></pre>\n", "title": "Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?", "tags": ["java", "performance", "algorithm", "random"], "link": "http://stackoverflow.com/questions/14491966/is-this-a-good-enough-random-algorithm-why-isnt-it-used-if-its-faster/14563808#14563808", "question_id": 14491966, "answer_id": 14563808}, {"body": "<p>The fastest random generator you could implement is this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/DeAn9.png\" alt=\"enter image description here\"></p>\n\n<p>XD, jokes apart, besides everything said here, I'd like to contribute citing \nthat testing random sequences \"is a hard task\" [ 1 ], and there are several test \nthat check certain properties of pseudo-random numbers, you can find a lot of them\nhere: <a href=\"http://www.random.org/analysis/#2005\">http://www.random.org/analysis/#2005</a></p>\n\n<p>One simple way to evaluate random generator \"quality\" is the old Chi Square test.</p>\n\n<pre><code>static double chisquare(int numberCount, int maxRandomNumber) {\n    long[] f = new long[maxRandomNumber];\n    for (long i = 0; i &lt; numberCount; i++) {\n        f[randomint(maxRandomNumber)]++;\n    }\n\n    long t = 0;\n    for (int i = 0; i &lt; maxRandomNumber; i++) {\n        t += f[i] * f[i];\n    }\n    return (((double) maxRandomNumber * t) / numberCount) - (double) (numberCount);\n}\n</code></pre>\n\n<p>Citing [ 1 ]</p>\n\n<blockquote>\n  <p>The idea of the \u03c7\u00b2 test is to check whether or not the numbers produced are \n  spread out reasonably. If we generate <em>N</em> positive numbers less than <em>r</em>, then we'd\n  expect to get about <em>N</em> / <em>r</em> numbers of each value. But---and this is the essence of\n  the matter---the frequencies of ocurrence of all the values should not be exactly\n  the same: that wouldn't be random! </p>\n  \n  <p>We simply calculate the sum of the squares of the frecuencies of occurrence of \n  each value, scaled by the expected frequency, and then substract off the size of the\n  sequence. This number, the \"\u03c7\u00b2 statistic,\" may be expressed mathematically as</p>\n</blockquote>\n\n<p><img src=\"http://i.stack.imgur.com/GzPyq.png\" alt=\"chi squared formula\">  </p>\n\n<blockquote>\n  <p>If the \u03c7\u00b2 statistic is close to <em>r</em>, then the numbers are random; if it is too far away,\n  then they are not. The notions of \"close\" and \"far away\" can be more precisely \n  defined: tables exist that tell exactly how relate the statistic to properties of \n  random sequences. For the simple test that we're performing, the statistic should\n  be within 2\u221ar</p>\n</blockquote>\n\n<p>Using this theory and the following code:</p>\n\n<pre><code>abstract class RandomFunction {\n    public abstract int randomint(int range); \n}\n\npublic class test {\n    static QuickRandom qr = new QuickRandom();\n\n    static double chisquare(int numberCount, int maxRandomNumber, RandomFunction function) {\n        long[] f = new long[maxRandomNumber];\n        for (long i = 0; i &lt; numberCount; i++) {\n            f[function.randomint(maxRandomNumber)]++;\n        }\n\n        long t = 0;\n        for (int i = 0; i &lt; maxRandomNumber; i++) {\n            t += f[i] * f[i];\n        }\n        return (((double) maxRandomNumber * t) / numberCount) - (double) (numberCount);\n    }\n\n    public static void main(String[] args) {\n        final int ITERATION_COUNT = 1000;\n        final int N = 5000000;\n        final int R = 100000;\n\n        double total = 0.0;\n        RandomFunction qrRandomInt = new RandomFunction() {\n            @Override\n            public int randomint(int range) {\n                return (int) (qr.random() * range);\n            }\n        }; \n        for (int i = 0; i &lt; ITERATION_COUNT; i++) {\n            total += chisquare(N, R, qrRandomInt);\n        }\n        System.out.printf(\"Ave Chi2 for QR: %f \\n\", total / ITERATION_COUNT);        \n\n        total = 0.0;\n        RandomFunction mathRandomInt = new RandomFunction() {\n            @Override\n            public int randomint(int range) {\n                return (int) (Math.random() * range);\n            }\n        };         \n        for (int i = 0; i &lt; ITERATION_COUNT; i++) {\n            total += chisquare(N, R, mathRandomInt);\n        }\n        System.out.printf(\"Ave Chi2 for Math.random: %f \\n\", total / ITERATION_COUNT);\n    }\n}\n</code></pre>\n\n<p>I got the following result:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Ave Chi2 for QR: 108965,078640\nAve Chi2 for Math.random: 99988,629040\n</code></pre>\n\n<p>Which, for QuickRandom, is far away from <em>r</em>  (outside of  <code>r \u00b1 2 * sqrt(r)</code>)</p>\n\n<p>That been said, QuickRandom could be fast but (as stated in another answers) is not good as a random number generator</p>\n\n<hr>\n\n<p>[ 1 ] SEDGEWICK ROBERT, <a href=\"http://www.goodreads.com/book/show/2398048.Algorithims_in_C\"><em>Algorithms in C</em></a>, Addinson Wesley Publishing Company, 1990, pages 516 to 518</p>\n", "title": "Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?", "tags": ["java", "performance", "algorithm", "random"], "link": "http://stackoverflow.com/questions/14491966/is-this-a-good-enough-random-algorithm-why-isnt-it-used-if-its-faster/14574674#14574674", "question_id": 14491966, "answer_id": 14574674}, {"body": "<p>This is the random function I use for my games. It's pretty fast, and has good (enough) distribution.</p>\n\n<pre><code>public class FastRandom {\n\n    public static int randSeed;\n\n      public static final int random()\n      {\n        // this makes a 'nod' to being potentially called from multiple threads\n        int seed = randSeed;\n\n        seed    *= 1103515245;\n        seed    += 12345;\n        randSeed = seed;\n        return seed;\n      }\n\n      public static final int random(int range)\n      {\n        return ((random()&gt;&gt;&gt;15) * range) &gt;&gt;&gt; 17;\n      }\n\n      public static final boolean randomBoolean()\n      {\n         return random() &gt; 0;\n      }\n\n       public static final float randomFloat()\n       {\n         return (random()&gt;&gt;&gt;8) * (1.f/(1&lt;&lt;24));\n       }\n\n       public static final double randomDouble() {\n           return (random()&gt;&gt;&gt;8) * (1.0/(1&lt;&lt;24));\n       }\n}\n</code></pre>\n", "title": "Is this a &quot;good enough&quot; random algorithm; why isn&#39;t it used if it&#39;s faster?", "tags": ["java", "performance", "algorithm", "random"], "link": "http://stackoverflow.com/questions/14491966/is-this-a-good-enough-random-algorithm-why-isnt-it-used-if-its-faster/24061450#24061450", "question_id": 14491966, "answer_id": 24061450}], "creation_date": 1358987742, "score": 166, "link": "http://stackoverflow.com/questions/14491966/is-this-a-good-enough-random-algorithm-why-isnt-it-used-if-its-faster", "question_id": 14491966}, {"body": "<p>Imagine that I have this class:</p>\n\n<pre><code>public class Test\n{\n  private String[] arr = new String[]{\"1\",\"2\"};    \n\n  public String[] getArr() \n  {\n    return arr;\n  }\n}\n</code></pre>\n\n<p>Now, I have another class that uses the above class:</p>\n\n<pre><code>Test test = new Test();\ntest.getArr()[0] =\"some value!\"; //!!!\n</code></pre>\n\n<p>So this is the problem: I have accessed a private field of a class from outside!\nHow can I prevent this? I mean how can I make this array immutable? Does this mean that with every getter method you can work your way up to access the private field? (I don't want any libraries such as Guava. I just need to know the right way to do this).</p>\n", "tags": ["java", "arrays", "oop", "class"], "title": "How do I prevent the modification of a private field in a class?", "answers": [{"body": "<p>You must return a <strong>copy</strong> of your array.</p>\n\n<pre><code>public String[] getArr() {\n  return arr == null ? null : Arrays.copyOf(arr, arr.length);\n}\n</code></pre>\n", "title": "How do I prevent the modification of a private field in a class?", "tags": ["java", "arrays", "oop", "class"], "link": "http://stackoverflow.com/questions/14809293/how-do-i-prevent-the-modification-of-a-private-field-in-a-class/14809315#14809315", "question_id": 14809293, "answer_id": 14809315}, {"body": "<p>Modifier <code>private</code> protects only field itself from being accessed from other classes, but not the object references by this field.  If you need to protect referenced object, just do not give it out.  Change</p>\n\n<pre><code>public String [] getArr ()\n{\n    return arr;\n}\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>public String [] getArr ()\n{\n    return arr.clone ();\n}\n</code></pre>\n\n<p>or to</p>\n\n<pre><code>public int getArrLength ()\n{\n    return arr.length;\n}\n\npublic String getArrElementAt (int index)\n{\n    return arr [index];\n}\n</code></pre>\n", "title": "How do I prevent the modification of a private field in a class?", "tags": ["java", "arrays", "oop", "class"], "link": "http://stackoverflow.com/questions/14809293/how-do-i-prevent-the-modification-of-a-private-field-in-a-class/14809325#14809325", "question_id": 14809293, "answer_id": 14809325}, {"body": "<p>Yes, you should return a a copy of the array:</p>\n\n<pre><code> public String[] getArr()\n {\n    return Arrays.copyOf(arr);\n }\n</code></pre>\n", "title": "How do I prevent the modification of a private field in a class?", "tags": ["java", "arrays", "oop", "class"], "link": "http://stackoverflow.com/questions/14809293/how-do-i-prevent-the-modification-of-a-private-field-in-a-class/14809330#14809330", "question_id": 14809293, "answer_id": 14809330}, {"body": "<p>If you can use a List instead of an array, <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#unmodifiableList%28java.util.List%29\">Collections provides an unmodifiable list</a>:</p>\n\n<pre><code>public List&lt;String&gt; getList() {\n    return Collections.unmodifiableList(list);\n}\n</code></pre>\n", "title": "How do I prevent the modification of a private field in a class?", "tags": ["java", "arrays", "oop", "class"], "link": "http://stackoverflow.com/questions/14809293/how-do-i-prevent-the-modification-of-a-private-field-in-a-class/14809392#14809392", "question_id": 14809293, "answer_id": 14809392}, {"body": "<p>You could return a copy of the data. The caller who chooses to change the data will only be changing the copy</p>\n\n<pre><code>public class Test {\n    private static String[] arr = new String[] { \"1\", \"2\" };\n\n    public String[] getArr() {\n\n        String[] b = new String[arr.length];\n\n        System.arraycopy(arr, 0, b, 0, arr.length);\n\n        return b;\n    }\n}\n</code></pre>\n", "title": "How do I prevent the modification of a private field in a class?", "tags": ["java", "arrays", "oop", "class"], "link": "http://stackoverflow.com/questions/14809293/how-do-i-prevent-the-modification-of-a-private-field-in-a-class/14809438#14809438", "question_id": 14809293, "answer_id": 14809438}, {"body": "<p>The <code>Collections.unmodifiableList</code> has already been mentioned - the <code>Arrays.asList()</code> strangely not! My solution would also be to use the list from the outside and wrap the array as follows:</p>\n\n<pre><code>String[] arr = new String[]{\"1\", \"2\"}; \npublic List&lt;String&gt; getList() {\n    Collections.unmodifiableList(Arrays.asList(arr));\n}\n</code></pre>\n\n<p>The problem with copying the array is: if you're doing it every time you access the code and the array is big, you'll create a lot of work for the garbage collector for sure. So the copy is a simple but really bad approach - I'd say \"cheap\", but memory-expensive! Especially when you're having more than just 2 elements.</p>\n\n<p>If you look at the source code of <code>Arrays.asList</code> and <code>Collections.unmodifiableList</code> there is actually not much created. The first just wraps the array without copying it, the second just wraps the list, making changes to it unavailable.</p>\n", "title": "How do I prevent the modification of a private field in a class?", "tags": ["java", "arrays", "oop", "class"], "link": "http://stackoverflow.com/questions/14809293/how-do-i-prevent-the-modification-of-a-private-field-in-a-class/14821488#14821488", "question_id": 14809293, "answer_id": 14821488}, {"body": "<p>The nub of the problem is that you are returning a pointer to a mutable object. Oops.  Either you render the object immutable (the unmodifiable list solution) or you return a copy of the object.  </p>\n\n<p>As a general matter, finality of objects does not protect objects from being changed if they are mutable.  These two problems are \"kissing cousins.\"</p>\n", "title": "How do I prevent the modification of a private field in a class?", "tags": ["java", "arrays", "oop", "class"], "link": "http://stackoverflow.com/questions/14809293/how-do-i-prevent-the-modification-of-a-private-field-in-a-class/14824136#14824136", "question_id": 14809293, "answer_id": 14824136}, {"body": "<p>at this point of view you should use system array copy:</p>\n\n<pre><code>public String[] getArr() {\n   if (arr != null) {\n      String[] arrcpy = new String[arr.length];\n      System.arraycopy(arr, 0, arrcpy, 0, arr.length);\n      return arrcpy;\n   } else\n      return null;\n   }\n}\n</code></pre>\n", "title": "How do I prevent the modification of a private field in a class?", "tags": ["java", "arrays", "oop", "class"], "link": "http://stackoverflow.com/questions/14809293/how-do-i-prevent-the-modification-of-a-private-field-in-a-class/14825686#14825686", "question_id": 14809293, "answer_id": 14825686}, {"body": "<p>You can also use <a href=\"http://guava-libraries.googlecode.com/svn/tags/release09/javadoc/com/google/common/collect/ImmutableList.html\"><code>ImmutableList</code></a> which should be better than the standard <code>unmodifiableList</code>. The class is part of <a href=\"http://code.google.com/p/guava-libraries/\">Guava</a> libraries that was create by Google.</p>\n\n<p>Here is the description:</p>\n\n<blockquote>\n  <p>Unlike Collections.unmodifiableList(java.util.List), which is a view of a separate collection that can still change, an instance of ImmutableList contains its own private data and will never change</p>\n</blockquote>\n\n<p>Here is a simple example of how to use it:</p>\n\n<pre><code>public class Test\n{\n  private String[] arr = new String[]{\"1\",\"2\"};    \n\n  public ImmutableList&lt;String&gt; getArr() \n  {\n    return ImmutableList.copyOf(arr);\n  }\n}\n</code></pre>\n", "title": "How do I prevent the modification of a private field in a class?", "tags": ["java", "arrays", "oop", "class"], "link": "http://stackoverflow.com/questions/14809293/how-do-i-prevent-the-modification-of-a-private-field-in-a-class/14828207#14828207", "question_id": 14809293, "answer_id": 14828207}, {"body": "<p>Returning an unmodifiable list is a good idea. But a list that is made unmodifiable during the call to the getter method can still be changed by the class, or classes that are derived from the class.</p>\n\n<p>Instead you should make it clear to anybody that extends the class that the list should not be modified.</p>\n\n<p>So in your example it could lead to the following code:</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.Collections;\nimport java.util.List;\n\npublic class Test {\n    public static final List&lt;String&gt; STRINGS =\n        Collections.unmodifiableList(\n            Arrays.asList(\"1\", \"2\"));\n\n    public final List&lt;String&gt; getStrings() {\n        return STRINGS;\n    }\n}\n</code></pre>\n\n<p>In the above example I've made the <code>STRINGS</code> field public, in principle you could do away with the method call, as the values are already known.</p>\n\n<p>You could also assign the strings to a <code>private final List&lt;String&gt;</code> field made unmodifiable during construction of the class instance. Using a constant or instantiation arguments (of the constructor) depends on the design of the class.</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.Collections;\nimport java.util.List;\n\npublic class Test {\n    private final List&lt;String&gt; strings;\n\n    public Test(final String ... strings) {\n        this.strings = Collections.unmodifiableList(Arrays\n                .asList(strings));\n    }\n\n    public final List&lt;String&gt; getStrings() {\n        return strings;\n    }\n}\n</code></pre>\n", "title": "How do I prevent the modification of a private field in a class?", "tags": ["java", "arrays", "oop", "class"], "link": "http://stackoverflow.com/questions/14809293/how-do-i-prevent-the-modification-of-a-private-field-in-a-class/25007019#25007019", "question_id": 14809293, "answer_id": 25007019}], "creation_date": 1360575147, "score": 161, "link": "http://stackoverflow.com/questions/14809293/how-do-i-prevent-the-modification-of-a-private-field-in-a-class", "question_id": 14809293}, {"body": "<p>For those times when you want to isolate the Java and give it a quick test..</p>\n\n<p>Can you run non-Android Java projects in Android studio as in Eclipse?</p>\n", "tags": ["java", "android", "ide", "android-studio"], "title": "Can Android Studio be used to run standard Java projects?", "answers": [{"body": "<p>No, but it's based on Intellij IDEA.</p>\n\n<p>The community version of that is free for download but it doesn't support most things requiring an external database or application server.</p>\n\n<p>If you want that you either need the Ultimate version, which isn't free, or the EAP of the next version which is usually good for a month until they release another.</p>\n\n<p>Basically it works like this</p>\n\n<p>Android Studio is just Android the Android Stuff from IDEA 13 Community... </p>\n\n<p>...which will be free, and is anything from IDEA 13 Ultimate... </p>\n\n<p>...that doesn't require a database or app server.</p>\n\n<p><a href=\"http://www.jetbrains.com/idea/\">http://www.jetbrains.com/idea/</a></p>\n\n<p>IDEA 12 Community doesn't have the ability to import the gradilized project and it won't, so while you can do Android development in it now (I do), don't expect it to have the same features as Android Studio. There's a lot of good new Android stuff in it, that's going into 13. </p>\n", "title": "Can Android Studio be used to run standard Java projects?", "tags": ["java", "android", "ide", "android-studio"], "link": "http://stackoverflow.com/questions/16626810/can-android-studio-be-used-to-run-standard-java-projects/16631120#16631120", "question_id": 16626810, "answer_id": 16631120}, {"body": "<p>I found a somewhat hacky, annoying and not-completely-sure-it-always-works solution to this. I wanted to share in case someone else finds it useful.</p>\n\n<p>In Android Studio, you can right-click a class with a main method and select \"Run .main()\". This will create a new Run configuration for YourClass, although it won't quite work: it will be missing some classpath entries.</p>\n\n<p>In order to fix the missing classpath entries, go into the Project Structure and manually add the output folder location for your module and any other module dependencies that you need, like so:</p>\n\n<ul>\n<li>File -> Project Structure ...</li>\n<li>Select \"Modules\" in the Project Settings panel on the left-column panel</li>\n<li>Select your module on the list of modules in the middle-column panel</li>\n<li>Select the \"Dependencies\" tab on the right-column panel</li>\n</ul>\n\n<p>And then for the module where you have your Java application as well as for each of the module dependencies you need:\n - Click \"+\" -> \"Jars or directories\" on the far right of the right-column panel\n - Navigate to the output folder of the module (e.g.: my_module/build/classes/main/java) and click \"OK\"\n - On the new entry to the Dependencies list, on the far right, change the select box from \"Compile\" to \"Runtime\"</p>\n\n<p>After this, you should be able to execute the Run configuration you just created to run the simple Java application.</p>\n\n<p>One thing to note is that, for my particular [quite involved] Android Studio project set-up, I have to manually build the project with gradle, from outside Android Studio in order to get my simple Java Application classes to build, before I run the application - I think this is because the Run configuration of type \"Application\" is not triggering the corresponding Gradle build.</p>\n\n<p>Finally, this was done on Android Studio 0.4.0.</p>\n\n<p>I hope others find it useful. I also hope Google comes around to supporting this functionality soon.</p>\n", "title": "Can Android Studio be used to run standard Java projects?", "tags": ["java", "android", "ide", "android-studio"], "link": "http://stackoverflow.com/questions/16626810/can-android-studio-be-used-to-run-standard-java-projects/21023991#21023991", "question_id": 16626810, "answer_id": 21023991}, {"body": "<p>With Android Studio 0.6.1+ (and possibly earlier) you can easily develop standard Java (non-Android) apps.</p>\n\n<p><strong>This method has been tested on 0.8.2:</strong></p>\n\n<p>Start by creating a vanilla Android Phone app, using File > New Project.  Then add a Java Library module to hold your Java Application code.  (Choose 'Java Library' even if you're building an application).  You'll find you can build and run Java apps with <code>main()</code> methods, Swing apps etc.</p>\n\n<p>You'll want to delete the auto-generated Android \"app\" module, which you're not using.  Go to File -> Project Structure, and delete it (select the \"app\" module in the box on the left, and click the 'minus' icon above the box).   Now when you reopen File -> Project Structure -> Project, you'll see options for selecting the project SDK and language level, plus a bunch of other options that were previously hidden.  You can go ahead and delete the \"app\" module from the disk.</p>\n\n<p><strong>In 0.6.1 you could avoid creating the android module in the first place:</strong> </p>\n\n<p>Go to File > New Project.   Fill in your application name.  On the \"form factors\" selection page, where you state your minimum Android SDK, <strong>deselect</strong> the Mobile checkbox, and proceed with creating your project.</p>\n\n<p>Once the project is created, go to File -> Project Structure -> Project, and set your JDK as the \"Project SDK\".  Add a Java Library module to hold your application code as above.</p>\n", "title": "Can Android Studio be used to run standard Java projects?", "tags": ["java", "android", "ide", "android-studio"], "link": "http://stackoverflow.com/questions/16626810/can-android-studio-be-used-to-run-standard-java-projects/24274693#24274693", "question_id": 16626810, "answer_id": 24274693}, {"body": "<p>I installed IntelliJ IDEA community version from <a href=\"http://www.jetbrains.com/idea/download/\" rel=\"nofollow\">http://www.jetbrains.com/idea/download/</a></p>\n\n<p>I tried opening my project that I started in Android studio but it failed when at gradle build.  I instead opened both android studio and intellij at same time and placed one screen next to the other and simply drag and dropped my java files, xml layouts, drawables, and manifest into the project hiearchy of a new project started in IntelliJ.  It worked around the gradle build issues and now I can start a new project in IntelliJ and design either an android app or a basic Java app.   Thankfully this worked because I hated having so many IDEs on my pc. </p>\n", "title": "Can Android Studio be used to run standard Java projects?", "tags": ["java", "android", "ide", "android-studio"], "link": "http://stackoverflow.com/questions/16626810/can-android-studio-be-used-to-run-standard-java-projects/24857045#24857045", "question_id": 16626810, "answer_id": 24857045}, {"body": "<p><strong>Tested on Android Studio 0.8.6 - 2.1</strong></p>\n\n<p>Using this method you can have Java modules and Android modules in the same project and also have the ability to compile and run Java modules as stand alone Java projects.</p>\n\n<ol>\n<li>Open your Android project in Android Studio. If you do not have one, create one.</li>\n<li>Click <strong>File > New Module</strong>. Select <strong>Java Library</strong> and click <strong>Next</strong>.</li>\n<li>Fill in the package name, etc and click <strong>Finish</strong>. You should now see a Java module inside your Android project.</li>\n<li>Add your code to the Java module you've just created.</li>\n<li>Click on the drop down to the left of the run button. Click <strong>Edit Configurations...</strong></li>\n<li>In the new window, click on the plus sign at the top left of the window and select <strong>Application</strong></li>\n<li>A new application configuration should appear, enter in the details such as your main class and classpath of your module.</li>\n<li>Click <strong>OK</strong>.</li>\n</ol>\n\n<p>Now if you click run, this should compile and run your Java module.</p>\n\n<p>My usage case:\nMy Android app relies on some precomputed files to function. These precomputed files are generated by some Java code. Since these two things go hand in hand, it makes the most sense to have both of these modules in the same project.</p>\n", "title": "Can Android Studio be used to run standard Java projects?", "tags": ["java", "android", "ide", "android-studio"], "link": "http://stackoverflow.com/questions/16626810/can-android-studio-be-used-to-run-standard-java-projects/26196451#26196451", "question_id": 16626810, "answer_id": 26196451}, {"body": "<p><b>Tested in Android Studio 0.8.14:</b><br>\nI was able to get a standard project running with minimal steps in this way:\n\n<li>In an open Android Studio project, click File > New Module.\n<li>Click More Modules > Java Library > Next, then fill in whatever you prefer for the names.\n<li>A new module will appear as a folder on the same level as your \"app\" folder in the Project Structure.  Open it and open the new Java class file.\n</p>\n\n<p>You can then add your code, and choose Build > Run 'YourClassName'.  Presto, your code is running with no Android device!</p>\n", "title": "Can Android Studio be used to run standard Java projects?", "tags": ["java", "android", "ide", "android-studio"], "link": "http://stackoverflow.com/questions/16626810/can-android-studio-be-used-to-run-standard-java-projects/26817553#26817553", "question_id": 16626810, "answer_id": 26817553}, {"body": "<p>It works perfect if you do File>Open... and then select pom.xml file.  Be sure to change the dropdown at the top-left of the sidebar that says \"Android\" to \"Project\" to see all your files.  Also I think it helps if the folder your pom.xml file is in a folder called \"app/\".</p>\n\n<p>Disclaimer: My java project was generated by Google App Engine.</p>\n", "title": "Can Android Studio be used to run standard Java projects?", "tags": ["java", "android", "ide", "android-studio"], "link": "http://stackoverflow.com/questions/16626810/can-android-studio-be-used-to-run-standard-java-projects/26950001#26950001", "question_id": 16626810, "answer_id": 26950001}, {"body": "<p>Here's exactly what the setup looks like.</p>\n\n<p><a href=\"http://i.stack.imgur.com/iyGeS.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/iyGeS.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Edit Configurations > '+' > Application:</strong>\n<a href=\"http://i.stack.imgur.com/XDBuI.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/XDBuI.png\" alt=\"enter image description here\"></a></p>\n", "title": "Can Android Studio be used to run standard Java projects?", "tags": ["java", "android", "ide", "android-studio"], "link": "http://stackoverflow.com/questions/16626810/can-android-studio-be-used-to-run-standard-java-projects/35498176#35498176", "question_id": 16626810, "answer_id": 35498176}, {"body": "<p>Easy way to run a java program in Android Studio would be,</p>\n\n<p>1) Create a java Class say <code>\"Test.java\"</code> in Android Studio.</p>\n\n<p>2) Write your code eg, a <code>Hello World</code> program to test.</p>\n\n<p>3) Right click on the Java class and select the option \"Run 'Test.main()'\" or press Cntrl+Shift+F10.</p>\n\n<p>There you have your Java code running below.</p>\n", "title": "Can Android Studio be used to run standard Java projects?", "tags": ["java", "android", "ide", "android-studio"], "link": "http://stackoverflow.com/questions/16626810/can-android-studio-be-used-to-run-standard-java-projects/36127746#36127746", "question_id": 16626810, "answer_id": 36127746}, {"body": "<p>I have been able to do it using following steps:  </p>\n\n<ol>\n<li><p>Open Android Studio and select 'Import Project'.<br>\n<img src=\"http://i.stack.imgur.com/hmv8z.jpg\" alt=\"Android Studio import a project\"></p></li>\n<li><p>Browse to your project folder in the browse window and select it.</p></li>\n</ol>\n", "title": "Can Android Studio be used to run standard Java projects?", "tags": ["java", "android", "ide", "android-studio"], "link": "http://stackoverflow.com/questions/16626810/can-android-studio-be-used-to-run-standard-java-projects/37334537#37334537", "question_id": 16626810, "answer_id": 37334537}, {"body": "<p>Spent a day on finding the easiest way to do this. The purpose was to find the fastest way to achieve this goal. I couldn't make it as fast as running javac command from terminal or compiling from netbeans or sublime text 3. But still got a good speed with android studio. </p>\n\n<p>This looks ruff and tuff way but since we don't initiate projects on daily bases that is why I am okay to do this.</p>\n\n<p>I downloaded IntelliJ IDEA community version and created a simply java project. I added a main class and tested a run. Then simply closed IntelliJ IDEA and opened Android Studio and opened the same project there. Then I had to simply attach JDK where IDE helped me by showing a list of available JDKs and I selected 1.8 and then it compiled well. I can now open any main file and press Control+Shift+R to run that main file.</p>\n\n<p>Then I copied all my Java files into src folder by Mac OS Finder. And I am able to compile anything I want to. </p>\n\n<p>There is nothing related to Gradle or Android and compile speed is pretty good.</p>\n\n<p>Thanks buddies </p>\n", "title": "Can Android Studio be used to run standard Java projects?", "tags": ["java", "android", "ide", "android-studio"], "link": "http://stackoverflow.com/questions/16626810/can-android-studio-be-used-to-run-standard-java-projects/38644505#38644505", "question_id": 16626810, "answer_id": 38644505}], "creation_date": 1368896330, "score": 158, "link": "http://stackoverflow.com/questions/16626810/can-android-studio-be-used-to-run-standard-java-projects", "question_id": 16626810}, {"body": "<p>I'm using Spring MVC for a simple JSON API, with <code>@ResponseBody</code> based approach like the following. (I already have a service layer producing JSON directly.)</p>\n\n<pre><code>@RequestMapping(value = \"/matches/{matchId}\", produces = \"application/json\")\n@ResponseBody\npublic String match(@PathVariable String matchId) {\n    String json = matchService.getMatchJson(matchId);\n    if (json == null) {\n        // TODO: how to respond with e.g. 400 \"bad request\"?\n    }\n    return json;\n}\n</code></pre>\n\n<p>Question is, in the given scenario, <strong>what is the simplest, cleanest way to respond with a HTTP 400 error</strong>?</p>\n\n<p>I did come across approaches like:</p>\n\n<pre><code>return new ResponseEntity(HttpStatus.BAD_REQUEST);\n</code></pre>\n\n<p>...but I can't use it here since my method's return type is String, not ResponseEntity.</p>\n", "tags": ["java", "spring", "spring-mvc", "http-error"], "title": "How to respond with HTTP 400 error in a Spring MVC @ResponseBody method returning String?", "answers": [{"body": "<p>Not necessarily the most compact way of doing this, but quite clean IMO</p>\n\n<pre><code>if(json == null) {\n    throw new BadThingException();\n}\n...\n\n@ExceptionHandler(BadThingException.class)\n@ResponseStatus(value = HttpStatus.BAD_REQUEST)\npublic @ResponseBody MyError handleException(BadThingException e) {\n    return new MyError(\"That doesnt work\");\n}\n</code></pre>\n\n<p>Edit you can use @ResponseBody in the exception handler method if using Spring 3.1+, otherwise use a <code>ModelAndView</code> or something.</p>\n\n<p><a href=\"https://jira.springsource.org/browse/SPR-6902\">https://jira.springsource.org/browse/SPR-6902</a></p>\n", "title": "How to respond with HTTP 400 error in a Spring MVC @ResponseBody method returning String?", "tags": ["java", "spring", "spring-mvc", "http-error"], "link": "http://stackoverflow.com/questions/16232833/how-to-respond-with-http-400-error-in-a-spring-mvc-responsebody-method-returnin/16232897#16232897", "question_id": 16232833, "answer_id": 16232897}, {"body": "<p>Something like this should work, I'm not sure whether or not there is a simpler way:</p>\n\n<pre><code>@RequestMapping(value = \"/matches/{matchId}\", produces = \"application/json\")\n@ResponseBody\npublic String match(@PathVariable String matchId, @RequestBody String body,\n            HttpServletRequest request, HttpServletResponse response) {\n    String json = matchService.getMatchJson(matchId);\n    if (json == null) {\n        response.setStatus( HttpServletResponse.SC_BAD_REQUEST  );\n    }\n    return json;\n}\n</code></pre>\n", "title": "How to respond with HTTP 400 error in a Spring MVC @ResponseBody method returning String?", "tags": ["java", "spring", "spring-mvc", "http-error"], "link": "http://stackoverflow.com/questions/16232833/how-to-respond-with-http-400-error-in-a-spring-mvc-responsebody-method-returnin/16233227#16233227", "question_id": 16232833, "answer_id": 16233227}, {"body": "<p>change your return type to <code>ResponseEntity&lt;String&gt;</code>, then you can use below for 400</p>\n\n<pre><code>return new ResponseEntity&lt;String&gt;(HttpStatus.BAD_REQUEST);\n</code></pre>\n\n<p>and for correct request</p>\n\n<pre><code>return new ResponseEntity&lt;String&gt;(json,HttpStatus.OK);\n</code></pre>\n\n<p><strong>UPDATE 1</strong></p>\n\n<p>after spring 4.1 there are helper methods in ResponseEntity could be used as</p>\n\n<pre><code>return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(null);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>return ResponseEntity.ok(json);\n</code></pre>\n", "title": "How to respond with HTTP 400 error in a Spring MVC @ResponseBody method returning String?", "tags": ["java", "spring", "spring-mvc", "http-error"], "link": "http://stackoverflow.com/questions/16232833/how-to-respond-with-http-400-error-in-a-spring-mvc-responsebody-method-returnin/16250729#16250729", "question_id": 16232833, "answer_id": 16250729}, {"body": "<p>I would change the implementation slightly:</p>\n\n<p>First, I create a <code>UnknownMatchException</code>: </p>\n\n<pre><code>@ResponseStatus(HttpStatus.NOT_FOUND)\npublic class UnknownMatchException extends RuntimeException {\n    public UnknownMatchException(String matchId) {\n        super(\"Unknown match: \" + matchId);\n    }\n}\n</code></pre>\n\n<p>Note the use of <a href=\"http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-annotated-exceptions\">@ResponseStatus</a>, which will be recognized by Spring's <code>ResponseStatusExceptionResolver</code>. If the exception is thrown, it will create a response with the corresponding response status. (I also took the liberty of changing the status code to <code>404 - Not Found</code> which I find more appropriate for this use case, but you can stick to <code>HttpStatus.BAD_REQUEST</code> if you like.)</p>\n\n<hr>\n\n<p>Next, I would change the <code>MatchService</code> to have the following signature:</p>\n\n<pre><code>interface MatchService {\n    public Match findMatch(String matchId);\n}\n</code></pre>\n\n<hr>\n\n<p>Finally, I would update the controller and delegate to Spring's <code>MappingJackson2HttpMessageConverter</code> to handle the JSON serialization automatically (it is added by default if you add Jackson to the classpath and add either <code>@EnableWebMvc</code> or <code>&lt;mvc:annotation-driven /&gt;</code> to your config, see the <a href=\"http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-config-enable\">reference docs</a>):</p>\n\n<pre><code>@RequestMapping(value = \"/matches/{matchId}\", produces = MediaType.APPLICATION_JSON_VALUE)\n@ResponseBody\npublic Match match(@PathVariable String matchId) {\n    // throws an UnknownMatchException if the matchId is not known \n    return matchService.findMatch(matchId);\n}\n</code></pre>\n\n<hr>\n\n<p>Note, it is very common to separate the domain objects from the view objects or DTO objects. This can easily be achieved by adding a small DTO factory that returns the serializable JSON object:</p>\n\n<pre><code>@RequestMapping(value = \"/matches/{matchId}\", produces = MediaType.APPLICATION_JSON_VALUE)\n@ResponseBody\npublic MatchDTO match(@PathVariable String matchId) {\n    Match match = matchService.findMatch(matchId);\n    return MatchDtoFactory.createDTO(match);\n}\n</code></pre>\n", "title": "How to respond with HTTP 400 error in a Spring MVC @ResponseBody method returning String?", "tags": ["java", "spring", "spring-mvc", "http-error"], "link": "http://stackoverflow.com/questions/16232833/how-to-respond-with-http-400-error-in-a-spring-mvc-responsebody-method-returnin/16250817#16250817", "question_id": 16232833, "answer_id": 16250817}, {"body": "<p>I think this thread actually has the easiest, cleanest solution, that does not sacrifice the JSON martialing tools that Spring provides:</p>\n\n<p><a href=\"http://stackoverflow.com/a/16986372/1278921\">http://stackoverflow.com/a/16986372/1278921</a></p>\n", "title": "How to respond with HTTP 400 error in a Spring MVC @ResponseBody method returning String?", "tags": ["java", "spring", "spring-mvc", "http-error"], "link": "http://stackoverflow.com/questions/16232833/how-to-respond-with-http-400-error-in-a-spring-mvc-responsebody-method-returnin/23881181#23881181", "question_id": 16232833, "answer_id": 23881181}, {"body": "<p>I m using this in my spring boot application </p>\n\n<pre><code>@RequestMapping(value = \"/matches/{matchId}\", produces = \"application/json\")\n@ResponseBody\npublic @ResponseBody ResponseEntity&lt;?&gt; match(@PathVariable String matchId, @RequestBody String body,\n            HttpServletRequest request, HttpServletResponse response) {\n\n    Product p ;\n    try {\n      Product p = service.getproduct(request.getProductId());\n    } catch(Exception ex) {\n       return new ResponseEntity&lt;String&gt;(HttpStatus.BAD_REQUEST);\n    }\n\n    return new ResponseEntity(product,HttpStatus.OK);\n}\n</code></pre>\n", "title": "How to respond with HTTP 400 error in a Spring MVC @ResponseBody method returning String?", "tags": ["java", "spring", "spring-mvc", "http-error"], "link": "http://stackoverflow.com/questions/16232833/how-to-respond-with-http-400-error-in-a-spring-mvc-responsebody-method-returnin/33103086#33103086", "question_id": 16232833, "answer_id": 33103086}, {"body": "<p>Here's a different approach. Create a custom <code>Exception</code> annotated with <code>@ResponseStatus</code>, like the following one.</p>\n\n<pre><code>@ResponseStatus(code = HttpStatus.NOT_FOUND, reason = \"Not Found\")\npublic class NotFoundException extends Exception {\n\n    public NotFoundException() {\n    }\n}\n</code></pre>\n\n<p>And throw it when needed.</p>\n\n<pre><code>@RequestMapping(value = \"/matches/{matchId}\", produces = \"application/json\")\n@ResponseBody\npublic String match(@PathVariable String matchId) {\n    String json = matchService.getMatchJson(matchId);\n    if (json == null) {\n        throw new NotFoundException();\n    }\n    return json;\n}\n</code></pre>\n\n<p>Check out the Spring documentation here: <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#mvc-ann-annotated-exceptions\" rel=\"nofollow\">http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#mvc-ann-annotated-exceptions</a>.</p>\n", "title": "How to respond with HTTP 400 error in a Spring MVC @ResponseBody method returning String?", "tags": ["java", "spring", "spring-mvc", "http-error"], "link": "http://stackoverflow.com/questions/16232833/how-to-respond-with-http-400-error-in-a-spring-mvc-responsebody-method-returnin/38793791#38793791", "question_id": 16232833, "answer_id": 38793791}], "creation_date": 1366967776, "score": 151, "link": "http://stackoverflow.com/questions/16232833/how-to-respond-with-http-400-error-in-a-spring-mvc-responsebody-method-returnin", "question_id": 16232833}, {"body": "<p>Why second line of this code in Java throws <code>ArrayIndexOutOfBoundsException</code>?</p>\n\n<pre><code>String filename = \"D:/some folder/001.docx\";\nString extensionRemoved = filename.split(\".\")[0];\n</code></pre>\n\n<p>While below works:</p>\n\n<pre><code>String driveLetter = filename.split(\"/\")[0];\n</code></pre>\n\n<p>I use Java 7.</p>\n", "tags": ["java", "regex", "string", "split", "indexoutofboundsexception"], "title": "Java string split with &quot;.&quot; (dot)", "answers": [{"body": "<p>You need to escape the dot if you want to split on a <em>literal</em> dot:</p>\n\n<pre><code>String extensionRemoved = filename.split(\"\\\\.\")[0];\n</code></pre>\n\n<p>Otherwise you are splitting on the regex <code>.</code>, which means \"any character\".<br>\nNote the double backslash needed to create a single backslash in the regex.</p>\n\n<hr>\n\n<p>You're getting an <code>ArrayIndexOutOfBoundsException</code> because your input string is just a dot, ie <code>\".\"</code>, which is an edge case that produces an empty array when split on dot; <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-\"><code>split(regex)</code></a> removes all trailing blanks from the result, but since splitting a dot on a dot leaves only two blanks, after trailing blanks are removed you're left with an empty array.</p>\n\n<p>To avoid getting an <code>ArrayIndexOutOfBoundsException</code> for this edge case, use the overloaded version of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-int-\"><code>split(regex, limit)</code></a>, which has a second parameter that is the size limit for the resulting array. When <code>limit</code> is <em>negative</em>, the behaviour of removing trailing blanks from the resulting array is disabled:</p>\n\n<pre><code>\".\".split(\"\\\\.\", -1) // returns an array of two blanks, ie [\"\", \"\"]\n</code></pre>\n\n<p>ie, when <code>filename</code> is just a dot <code>\".\"</code>, calling <code>filename.split(\"\\\\.\", -1)[0]</code> will return a blank, but calling <code>filename.split(\"\\\\.\")[0]</code> will throw an <code>ArrayIndexOutOfBoundsException</code>.</p>\n", "title": "Java string split with &quot;.&quot; (dot)", "tags": ["java", "regex", "string", "split", "indexoutofboundsexception"], "link": "http://stackoverflow.com/questions/14833008/java-string-split-with-dot/14833048#14833048", "question_id": 14833008, "answer_id": 14833048}, {"body": "<p>This is because <code>.</code> is a reserved character in regular expression, representing any character.\nInstead, we should use the following statement:</p>\n\n<pre><code>String extensionRemoved = filename.split(\"\\\\.\")[0];\n</code></pre>\n", "title": "Java string split with &quot;.&quot; (dot)", "tags": ["java", "regex", "string", "split", "indexoutofboundsexception"], "link": "http://stackoverflow.com/questions/14833008/java-string-split-with-dot/14833053#14833053", "question_id": 14833008, "answer_id": 14833053}, {"body": "<p>I believe you should escape the dot. Try:</p>\n\n<pre><code>String filename = \"D:/some folder/001.docx\";\nString extensionRemoved = filename.split(\"\\\\.\")[0];\n</code></pre>\n\n<p>Otherwise dot is interpreted as any character in regular expressions.</p>\n", "title": "Java string split with &quot;.&quot; (dot)", "tags": ["java", "regex", "string", "split", "indexoutofboundsexception"], "link": "http://stackoverflow.com/questions/14833008/java-string-split-with-dot/14833055#14833055", "question_id": 14833008, "answer_id": 14833055}, {"body": "<p>\".\" is a special character in java. You have to use \"\\.\" to escape this character :</p>\n\n<pre><code>final String extensionRemoved = filename.split(\"\\\\.\")[0];\n</code></pre>\n\n<p>I hope this helps</p>\n", "title": "Java string split with &quot;.&quot; (dot)", "tags": ["java", "regex", "string", "split", "indexoutofboundsexception"], "link": "http://stackoverflow.com/questions/14833008/java-string-split-with-dot/14833098#14833098", "question_id": 14833008, "answer_id": 14833098}], "creation_date": 1360673495, "score": 150, "link": "http://stackoverflow.com/questions/14833008/java-string-split-with-dot", "question_id": 14833008}, {"body": "<p>I have a method with a <code>void</code> return type. It can also throw a number of exceptions so I'd like to test those exceptions being thrown. All attempts have failed with the same reason:</p>\n\n<blockquote>\n  <p>The method when(T) in the type Stubber is not applicable for the arguments (void)</p>\n</blockquote>\n\n<p>Any ideas how I can get the method to throw a specified exception?</p>\n\n<pre><code>doThrow(new Exception()).when(mockedObject.methodReturningVoid(...));\n</code></pre>\n", "tags": ["java", "exception", "mocking", "mockito"], "title": "Mockito test a void method throws an exception", "answers": [{"body": "<p>You must use</p>\n\n<pre><code>doThrow(new Exception()).when(mockedObject).methodReturningVoid(...);\n</code></pre>\n\n<p>and not</p>\n\n<pre><code>doThrow(new Exception()).when(mockedObject.methodReturningVoid(...));\n</code></pre>\n\n<p>This is explained in <a href=\"http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#5\">the documentation</a></p>\n", "title": "Mockito test a void method throws an exception", "tags": ["java", "exception", "mocking", "mockito"], "link": "http://stackoverflow.com/questions/15156857/mockito-test-a-void-method-throws-an-exception/15157021#15157021", "question_id": 15156857, "answer_id": 15157021}], "creation_date": 1362138033, "score": 150, "link": "http://stackoverflow.com/questions/15156857/mockito-test-a-void-method-throws-an-exception", "question_id": 15156857}, {"body": "<p>I have created a simple program in java:</p>\n\n<pre><code>public static void main(String[] args) throws InterruptedException {\n    while (true) \n        ;\n}\n</code></pre>\n\n<p>If I run this on a Linux machine, it shows 100% CPU usage, but doesn't cause the OS to appear slow.  However, if I run the exact same code on Windows, it only shows about 20% CPU usage.</p>\n\n<p>I am using Oracle JRE on Windows and OpenJDK 6 on Linux.</p>\n\n<p>I'm wondering if Windows' scheduler preempt threads randomly and Linux's doesn't?</p>\n", "tags": ["java", "linux", "windows", "multithreading", "cpu-usage"], "title": "Why does \u201cwhile(true)\u201d without \u201cThread.sleep\u201d cause 100% CPU usage on Linux but not on Windows?", "answers": [{"body": "<p>By default, <code>top</code> on Linux runs in so-called IRIX mode, while the Windows Task Manager does not. Let's say you have 4 cores:</p>\n\n<ul>\n<li><p>With IRIX mode on, 1 fully utilized core is 100% and 4 cores are 400%. </p></li>\n<li><p>With IRIX mode off, 1 fully utilized core is 25% and 4 cores are 100%. </p></li>\n</ul>\n\n<p>This means that by default, <code>top</code> on Linux will show an infinite loop as ~100% and Windows will show it as ~25%, and it means exactly the same thing.</p>\n\n<p>You can toggle IRIX mode while <code>top</code> is running with <kbd>Shift</kbd>+<kbd>i</kbd>. This will make the numbers match up. </p>\n", "title": "Why does \u201cwhile(true)\u201d without \u201cThread.sleep\u201d cause 100% CPU usage on Linux but not on Windows?", "tags": ["java", "linux", "windows", "multithreading", "cpu-usage"], "link": "http://stackoverflow.com/questions/14579124/why-does-whiletrue-without-thread-sleep-cause-100-cpu-usage-on-linux-but/14579234#14579234", "question_id": 14579124, "answer_id": 14579234}], "creation_date": 1359450276, "score": 147, "link": "http://stackoverflow.com/questions/14579124/why-does-whiletrue-without-thread-sleep-cause-100-cpu-usage-on-linux-but", "question_id": 14579124}, {"body": "<p>I have a simple Java class as shown below:</p>\n\n<pre><code>public class Test {\n\n    private String s;\n\n    public String foo() {\n        try {\n            s = \"dev\";\n            return s;\n        } \n        finally {\n            s = \"override variable s\";\n            System.out.println(\"Entry in finally Block\");  \n        }\n    }\n\n    public static void main(String[] xyz) {\n        Test obj = new Test();\n        System.out.println(obj.foo());\n    }\n}\n</code></pre>\n\n<p>And the output of this code is this:</p>\n\n<pre><code>Entry in finally Block\ndev  \n</code></pre>\n\n<p>Why is <code>s</code> not overridden in the <code>finally</code> block, yet control printed output?     </p>\n", "tags": ["java", "try-finally"], "title": "Why does changing the returned variable in a finally block not change the return value?", "answers": [{"body": "<p>Because the return value is put on the stack before the call to finally.</p>\n", "title": "Why does changing the returned variable in a finally block not change the return value?", "tags": ["java", "try-finally"], "link": "http://stackoverflow.com/questions/16030858/why-does-changing-the-returned-variable-in-a-finally-block-not-change-the-return/16030903#16030903", "question_id": 16030858, "answer_id": 16030903}, {"body": "<p>The <code>try</code> block completes with the execution of the <code>return</code> statement and the value of <code>s</code> at the time the <code>return</code> statement executes is the value returned by the method. The fact that the <code>finally</code> clause later changes the value of <code>s</code> (after the <code>return</code> statement completes) does not (at that point) change the return value.</p>\n\n<p>Note that the above deals with changes to the value of <code>s</code> itself in the <code>finally</code> block, not to the object that <code>s</code> references. If <code>s</code> was a reference to a mutable object (which <code>String</code> is not) and the <em>contents</em> of the object were changed in the <code>finally</code> block, then those changes would be seen in the returned value.</p>\n\n<p>The detailed rules for how all this operates can be found in <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.20.2\">Section 14.20.2 of the Java Language Specification</a>. Note that execution of a <code>return</code> statement counts as an abrupt termination of the <code>try</code> block (the section starting \"<em>If execution of the try block completes abruptly for any other reason R....</em>\" applies). See <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.17\">Section 14.17 of the JLS</a> for why a <code>return</code> statement is an abrupt termination of a block.</p>\n", "title": "Why does changing the returned variable in a finally block not change the return value?", "tags": ["java", "try-finally"], "link": "http://stackoverflow.com/questions/16030858/why-does-changing-the-returned-variable-in-a-finally-block-not-change-the-return/16030912#16030912", "question_id": 16030858, "answer_id": 16030912}, {"body": "<p>Try this: If you want to print the override value of s.</p>\n\n<pre><code>finally {\n    s = \"override variable s\";    \n    System.out.println(\"Entry in finally Block\");\n    return s;\n}\n</code></pre>\n", "title": "Why does changing the returned variable in a finally block not change the return value?", "tags": ["java", "try-finally"], "link": "http://stackoverflow.com/questions/16030858/why-does-changing-the-returned-variable-in-a-finally-block-not-change-the-return/16030944#16030944", "question_id": 16030858, "answer_id": 16030944}, {"body": "<p>There are 2 things noteworthy here:</p>\n\n<ul>\n<li>Strings are immutable. When you set s to \"override variable s\", you set s to refer to the inlined String, not altering the inherent char buffer of the s object to change to \"override variable s\".</li>\n<li>You put a reference to the s on the stack to return to the calling code. Afterwards (when the finally block runs), altering the reference should not do anything for the return value already on the stack.</li>\n</ul>\n", "title": "Why does changing the returned variable in a finally block not change the return value?", "tags": ["java", "try-finally"], "link": "http://stackoverflow.com/questions/16030858/why-does-changing-the-returned-variable-in-a-finally-block-not-change-the-return/16030957#16030957", "question_id": 16030858, "answer_id": 16030957}, {"body": "<p>I change your code a bit to prove the point of Ted.</p>\n\n<p>As you can see in the output <code>s</code> is indeed changed but after the return.</p>\n\n<pre><code>public class Test {\n\npublic String s;\n\npublic String foo() {\n\n    try {\n        s = \"dev\";\n        return s;\n    } finally {\n        s = \"override variable s\";\n        System.out.println(\"Entry in finally Block\");\n\n    }\n}\n\npublic static void main(String[] xyz) {\n    Test obj = new Test();\n    System.out.println(obj.foo());\n    System.out.println(obj.s);\n}\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Entry in finally Block \ndev \noverride variable s\n</code></pre>\n", "title": "Why does changing the returned variable in a finally block not change the return value?", "tags": ["java", "try-finally"], "link": "http://stackoverflow.com/questions/16030858/why-does-changing-the-returned-variable-in-a-finally-block-not-change-the-return/16031065#16031065", "question_id": 16030858, "answer_id": 16031065}, {"body": "<p>Technically speaking, the <code>return</code> in the try block won't be ignored if a <code>finally</code> block is defined, only if that finally block also includes a <code>return</code>.</p>\n\n<p>It's a dubious design decision that was probably a mistake in retrospect (much like references being nullable/mutable by default, and, according to some, checked exceptions). In many ways this behaviour is exactly consistent with the colloquial understanding of what <code>finally</code> means - \"no matter what happens beforehand in the <code>try</code> block, always run this code.\" Hence if you return true from a <code>finally</code> block, the overall effect must always to be to <code>return s</code>, no?</p>\n\n<p>In general, this is seldom a good idiom, and you should use <code>finally</code> blocks liberally for cleaning up/closing resources but rarely if ever return a value from them.</p>\n", "title": "Why does changing the returned variable in a finally block not change the return value?", "tags": ["java", "try-finally"], "link": "http://stackoverflow.com/questions/16030858/why-does-changing-the-returned-variable-in-a-finally-block-not-change-the-return/16031083#16031083", "question_id": 16030858, "answer_id": 16031083}, {"body": "<p>If we look inside bytecode, we'll notice that JDK has made a significant optimization, and <strong>foo()</strong> method looks like:</p>\n\n<pre><code>String tmp = null;\ntry {\n    s = \"dev\"\n    tmp = s;\n    s = \"override variable s\";\n    return tmp;\n} catch (RuntimeException e){\n    s = \"override variable s\";\n    throw e;\n}\n</code></pre>\n\n<p>And bytecode:</p>\n\n<pre><code>0:  ldc #7;         //loading String \"dev\"\n2:  putstatic   #8; //storing it to a static variable\n5:  getstatic   #8; //loading \"dev\" from a static variable\n8:  astore_0        //storing \"dev\" to a temp variable\n9:  ldc #9;         //loading String \"override variable s\"\n11: putstatic   #8; //setting a static variable\n14: aload_0         //loading a temp avariable\n15: areturn         //returning it\n16: astore_1\n17: ldc #9;         //loading String \"override variable s\"\n19: putstatic   #8; //setting a static variable\n22: aload_1\n23: athrow\n</code></pre>\n\n<p>java preserved \"dev\" string from being changed before returning. In fact here is no finally block at all.</p>\n", "title": "Why does changing the returned variable in a finally block not change the return value?", "tags": ["java", "try-finally"], "link": "http://stackoverflow.com/questions/16030858/why-does-changing-the-returned-variable-in-a-finally-block-not-change-the-return/16034261#16034261", "question_id": 16030858, "answer_id": 16034261}], "creation_date": 1366096211, "score": 135, "link": "http://stackoverflow.com/questions/16030858/why-does-changing-the-returned-variable-in-a-finally-block-not-change-the-return", "question_id": 16030858}, {"body": "<p>When I used Eclipse to add unimplemented methods to a Java class to fix an error, methods were auto-generated and include <code>// TODO Auto-generated method stub</code></p>\n\n<p>Is there an easy way to view all methods which contain this comment? Some sort of menu option?</p>\n", "tags": ["java", "eclipse"], "title": "Find TODO tags in Eclipse", "answers": [{"body": "<blockquote>\n  <p>Is there an easy way to view all methods which contain this comment? Some sort of menu option?</p>\n</blockquote>\n\n<p>Yes, choose one of the following:</p>\n\n<p>1)  Go to <code>Window \u2192 Show View \u2192 Tasks</code>. The new view will show up where the \"Console\" and \"Problems\" tabs are by default. </p>\n\n<p>2)  As mentioned elsewhere, you can see them next to the scroll bar as little blue rectangles if you have the source file in question open.</p>\n\n<p>3)  If you just want the <code>// TODO Auto-generated method stub</code> messages (rather than all <code>// TODO</code> messages) you should use the search function (Ctrl-F for ones in this file  <code>Search--&gt;java--&gt;search string</code> for the ability to specify this workspace, that file, this project, etc.)</p>\n", "title": "Find TODO tags in Eclipse", "tags": ["java", "eclipse"], "link": "http://stackoverflow.com/questions/16903046/find-todo-tags-in-eclipse/16903075#16903075", "question_id": 16903046, "answer_id": 16903075}, {"body": "<p><em>Tasks</em> view, under Window -> Show View -> Tasks</p>\n", "title": "Find TODO tags in Eclipse", "tags": ["java", "eclipse"], "link": "http://stackoverflow.com/questions/16903046/find-todo-tags-in-eclipse/16903079#16903079", "question_id": 16903046, "answer_id": 16903079}, {"body": "<ol>\n<li>Push Ctrl+H</li>\n<li>Got to File Search tab</li>\n<li>Enter \"// TODO Auto-generated method stub\" in Containing Text field</li>\n<li>Enter \"*.java\" in Filename patterns field</li>\n<li>Select proper scope</li>\n</ol>\n", "title": "Find TODO tags in Eclipse", "tags": ["java", "eclipse"], "link": "http://stackoverflow.com/questions/16903046/find-todo-tags-in-eclipse/16903093#16903093", "question_id": 16903046, "answer_id": 16903093}, {"body": "<p>Go TO Window>Show View >Markers </p>\n\n<p>than you will get java task .</p>\n\n<p>java task have all TODOs of your project</p>\n", "title": "Find TODO tags in Eclipse", "tags": ["java", "eclipse"], "link": "http://stackoverflow.com/questions/16903046/find-todo-tags-in-eclipse/16903284#16903284", "question_id": 16903046, "answer_id": 16903284}, {"body": "<p>Sometimes Window \u2192 Show View  does not show the Tasks. Just go to Window \u2192 Show View -> Others and type Tasks in the dialog box. </p>\n", "title": "Find TODO tags in Eclipse", "tags": ["java", "eclipse"], "link": "http://stackoverflow.com/questions/16903046/find-todo-tags-in-eclipse/27815983#27815983", "question_id": 16903046, "answer_id": 27815983}], "creation_date": 1370282906, "score": 127, "link": "http://stackoverflow.com/questions/16903046/find-todo-tags-in-eclipse", "question_id": 16903046}, {"body": "<p>I am yet to find a high-level definition of Spring beans that I can understand. I see them referenced often in Grails documentation and books, but I think that understanding what they are would be beneficial. So what are Spring beans? How can they be used? Do they have something to do with Dependency Injection?</p>\n", "tags": ["java", "spring", "grails"], "title": "What in the world are Spring beans?", "answers": [{"body": "<blockquote>\n  <p>The objects that form the backbone of your application and that are\n  managed by the Spring IoC container are called beans. A bean is an\n  object that is instantiated, assembled, and otherwise managed by a\n  Spring IoC container. These beans are created with the configuration\n  metadata that you supply to the container, for example, in the form of\n  XML  definitions.</p>\n</blockquote>\n\n<p>More to learn about beans and scope from <a href=\"http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s04.html\">SpringSource</a>:</p>\n\n<blockquote>\n  <p>When you create a bean definition what you are actually creating is a\n  recipe for creating actual instances of the class defined by that bean\n  definition. The idea that a bean definition is a recipe is important,\n  because it means that, just like a class, you can potentially have\n  many object instances created from a single recipe.</p>\n  \n  <p>You can control not only the various dependencies and configuration\n  values that are to be plugged into an object that is created from a\n  particular bean definition, but also the scope of the objects created\n  from a particular bean definition. This approach is very powerful and\n  gives you the flexibility to choose the scope of the objects you\n  create through configuration instead of having to 'bake in' the scope\n  of an object at the Java class level. Beans can be defined to be\n  deployed in one of a number of scopes</p>\n</blockquote>\n", "title": "What in the world are Spring beans?", "tags": ["java", "spring", "grails"], "link": "http://stackoverflow.com/questions/17193365/what-in-the-world-are-spring-beans/17193458#17193458", "question_id": 17193365, "answer_id": 17193458}, {"body": "<p>Spring beans are just object instances that are managed by the Spring container, namely, they are created and wired by the framework and put into a \"bag of objects\" (the container) from where you can get them later.</p>\n\n<p>The \"wiring\" part there is what dependency injection is all about, what it means is that you can just say \"I will need this thing\" and the framework will follow some rules to get you the proper instance.</p>\n\n<p>For someone who isn't much used to Spring, I think <a href=\"http://en.wikipedia.org/wiki/Spring_Framework#Inversion_of_control_container_.28dependency_injection.29\">Wikipedia Spring's article has a nice description</a>:</p>\n\n<blockquote>\n  <p>Central to the Spring Framework is its inversion of control container,\n  which provides a consistent means of configuring and managing Java\n  objects using reflection. The container is responsible for managing\n  object lifecycles of specific objects: creating these objects, calling\n  their initialization methods, and configuring these objects by wiring\n  them together.</p>\n  \n  <p>Objects created by the container are also called <strong>managed objects</strong> or\n  <strong>beans</strong>. The container can be configured by loading XML files or\n  detecting specific Java annotations on configuration classes. These\n  data sources contain the bean definitions which provide the\n  information required to create the beans.</p>\n  \n  <p>Objects can be obtained by means of either <em>dependency lookup</em> or\n  <em>dependency injection</em>. <em>Dependency lookup</em> is a pattern where a caller\n  asks the container object for an object with a specific name or of a\n  specific type. <em>Dependency injection</em> is a pattern where the container\n  passes objects by name to other objects, via either constructors,\n  properties, or factory methods.</p>\n</blockquote>\n", "title": "What in the world are Spring beans?", "tags": ["java", "spring", "grails"], "link": "http://stackoverflow.com/questions/17193365/what-in-the-world-are-spring-beans/17193586#17193586", "question_id": 17193365, "answer_id": 17193586}, {"body": "<p>Well you understood it partially. You have to tailor the beans according to your need and inform Spring container to manage it when required, by using a methodology populalrly known as IoC (<a href=\"http://www.martinfowler.com/articles/injection.html\">Inversion of Control</a>) coined by <a href=\"http://www.martinfowler.com/articles/injection.html\">Martin Fowler</a>, also known as <a href=\"http://www.martinfowler.com/articles/injection.html\">Dependency Injection</a> (DI). </p>\n\n<p>You wire the beans in a way, so that you do not have to take care of the instantiating or evaluate any dependency on the bean. This is popularly known as <a href=\"http://en.wikipedia.org/wiki/Hollywood_principle\">Hollywood Principle</a>.</p>\n\n<p>Google is the best tool to explore more on this in addition to the links you would get flooded with here in this question. :)</p>\n", "title": "What in the world are Spring beans?", "tags": ["java", "spring", "grails"], "link": "http://stackoverflow.com/questions/17193365/what-in-the-world-are-spring-beans/17193754#17193754", "question_id": 17193365, "answer_id": 17193754}, {"body": "<p>In Spring, those objects that form the backbone of your application and that are managed by the Spring IoC\ncontainer are referred to as beans. A bean is simply an object that is instantiated, assembled and otherwise\nmanaged by a Spring IoC container; </p>\n", "title": "What in the world are Spring beans?", "tags": ["java", "spring", "grails"], "link": "http://stackoverflow.com/questions/17193365/what-in-the-world-are-spring-beans/24731338#24731338", "question_id": 17193365, "answer_id": 24731338}, {"body": "<p>Spring have the IoC container  which carry the Bag of Bean ; creation maintain and deletion are the responsibilities of Spring Container.\nWe can put the bean in to Spring by Wiring and Auto Wiring.\nWiring mean we manually configure it into the XML file and \"Auto Wiring\" mean we put the annotations in the Java file then Spring  automatically scan the root-context where java configuration file, make it and put into the bag of Spring.</p>\n\n<p><a href=\"http://www.tutorialspoint.com/spring/spring_bean_definition.htm\" rel=\"nofollow\">Here is the detail URI where you got more information about Beans</a></p>\n", "title": "What in the world are Spring beans?", "tags": ["java", "spring", "grails"], "link": "http://stackoverflow.com/questions/17193365/what-in-the-world-are-spring-beans/27420223#27420223", "question_id": 17193365, "answer_id": 27420223}, {"body": "<p><strong>Beans</strong> are at the core of Spring. They are standard Java objects instantiated and managed by Spring.</p>\n\n<p>Beans are mostly used to:</p>\n\n<ul>\n<li>Configure Spring in some way (database connection parameters, security, and so on)</li>\n<li>Avoid hardcoding dependencies using <strong>dependency injection</strong>, so that our classes remain self-contained and unit testable</li>\n</ul>\n", "title": "What in the world are Spring beans?", "tags": ["java", "spring", "grails"], "link": "http://stackoverflow.com/questions/17193365/what-in-the-world-are-spring-beans/33891058#33891058", "question_id": 17193365, "answer_id": 33891058}], "creation_date": 1371650706, "score": 125, "link": "http://stackoverflow.com/questions/17193365/what-in-the-world-are-spring-beans", "question_id": 17193365}, {"body": "<p>The usual constructor of <code>ArrayList</code> is:</p>\n\n<pre><code>ArrayList&lt;?&gt; list = new ArrayList&lt;&gt;();\n</code></pre>\n\n<p>But there is also an overloaded constructor with a parameter for its initial capacity:</p>\n\n<pre><code>ArrayList&lt;?&gt; list = new ArrayList&lt;&gt;(20);\n</code></pre>\n\n<p>Why is it useful to create an <code>ArrayList</code> with an initial capacity when we can append to it as we please?</p>\n", "tags": ["java", "data-structures", "arraylist", "capacity"], "title": "Why start an ArrayList with an initial capacity?", "answers": [{"body": "<p>If you know in advance what the size of the <code>ArrayList</code> is going to be, it is more efficient to specify the initial capacity. If you don't do this, the internal array will have to be repeatedly reallocated as the list grows.</p>\n\n<p>The larger the final list, the more time you save by avoiding the reallocations.</p>\n\n<p>That said, even without pre-allocation, inserting <code>n</code> elements at the back of an <code>ArrayList</code> is guaranteed to take total <code>O(n)</code> time. In other words, appending an element is an amortized constant-time operation. This is achieved by having each reallocation increase the size of the array exponentially, typically by a factor of <code>1.5</code>. With this approach, the total number of operations <a href=\"http://www.wolframalpha.com/input/?i=sum%281.5%2a%2ak%29%20for%20k=1,log%281.5,n%29\">can be shown to be <code>O(n)</code></a>.</p>\n", "title": "Why start an ArrayList with an initial capacity?", "tags": ["java", "data-structures", "arraylist", "capacity"], "link": "http://stackoverflow.com/questions/15430247/why-start-an-arraylist-with-an-initial-capacity/15430259#15430259", "question_id": 15430247, "answer_id": 15430259}, {"body": "<p>Setting the initial size of an ArrayList, e.g. to <code>ArrayList&lt;&gt;(100)</code>, reduces the number of times the re-allocation of internal memory has to occur. </p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>ArrayList example = new ArrayList&lt;Integer&gt;(3);\nexample.add(1); // size() == 1\nexample.add(2); // size() == 2, \nexample.add(2); // size() == 3, example has been 'filled'\nexample.add(3); // size() == 4, example has been 'expanded' so that the fourth element can be added. \n</code></pre>\n\n<p>As you see in the above example - an <code>ArrayList</code> can be expanded if needed to be. What this doesn't show you is that the size of the Arraylist usually doubles (although note that the new size depends on your implementation). The following is quoted from <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html\" rel=\"nofollow\">Oracle</a>:</p>\n\n<blockquote>\n  <p>\"Each ArrayList instance has a capacity. The capacity is the size of\n  the array used to store the elements in the list. It is always at\n  least as large as the list size. As elements are added to an\n  ArrayList, its capacity grows automatically. The details of the growth\n  policy are not specified beyond the fact that adding an element has\n  constant amortized time cost.\"</p>\n</blockquote>\n\n<p>Obviously, if you have no idea as to what kind of range you will be holding, setting the size probably won't be a good idea - however, if you do have a specific range in mind, setting an initial capacity will increase memory efficiency. </p>\n", "title": "Why start an ArrayList with an initial capacity?", "tags": ["java", "data-structures", "arraylist", "capacity"], "link": "http://stackoverflow.com/questions/15430247/why-start-an-arraylist-with-an-initial-capacity/15430271#15430271", "question_id": 15430247, "answer_id": 15430271}, {"body": "<p>Default size of Arraylist is <strong>10</strong>.    </p>\n\n<pre><code>    /**\n     * Constructs an empty list with an initial capacity of ten.\n     */\n    public ArrayList() {\n    this(10);\n    } \n</code></pre>\n\n<p>So if you are going to add 100 or more records, you can see the overhead of memory reallocation.  </p>\n\n<pre><code>ArrayList&lt;?&gt; list = new ArrayList&lt;&gt;();    \n// same as  new ArrayList&lt;&gt;(10);      \n</code></pre>\n\n<p>So if you have any idea about the number of elements which will be stored in Arraylist its better to create Arraylist with that size instead of starting with 10 and then going on increasing it.  </p>\n", "title": "Why start an ArrayList with an initial capacity?", "tags": ["java", "data-structures", "arraylist", "capacity"], "link": "http://stackoverflow.com/questions/15430247/why-start-an-arraylist-with-an-initial-capacity/15430302#15430302", "question_id": 15430247, "answer_id": 15430302}, {"body": "<p>I think each ArrayList is created with an init capacity value of \"10\". So anyway, if you create an ArrayList without setting capacity within constructor it will be created with a default value.</p>\n", "title": "Why start an ArrayList with an initial capacity?", "tags": ["java", "data-structures", "arraylist", "capacity"], "link": "http://stackoverflow.com/questions/15430247/why-start-an-arraylist-with-an-initial-capacity/15430304#15430304", "question_id": 15430247, "answer_id": 15430304}, {"body": "<p>ArrayList can contain many values and when doing large initial insertions you can tell ArrayList to allocate a larger storage to begin with as to not waste CPU cycles when it tries to allocate more space for the next item. Thus to allocate some space at the beginning is more effiecient.</p>\n", "title": "Why start an ArrayList with an initial capacity?", "tags": ["java", "data-structures", "arraylist", "capacity"], "link": "http://stackoverflow.com/questions/15430247/why-start-an-arraylist-with-an-initial-capacity/15430340#15430340", "question_id": 15430247, "answer_id": 15430340}, {"body": "<p>I'd say its an optimization.  ArrayList without initial capacity will have ~10 empty rows and will expand when you are doing an add.</p>\n\n<p>To have a list with exactly the number of items you need to call <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ArrayList.html#trimToSize%28%29\" rel=\"nofollow\">trimToSize()</a></p>\n", "title": "Why start an ArrayList with an initial capacity?", "tags": ["java", "data-structures", "arraylist", "capacity"], "link": "http://stackoverflow.com/questions/15430247/why-start-an-arraylist-with-an-initial-capacity/15430356#15430356", "question_id": 15430247, "answer_id": 15430356}, {"body": "<p>Because <code>ArrayList</code> is a <a href=\"http://en.wikipedia.org/wiki/Dynamic_array\" rel=\"nofollow\">dynamically resizing array</a> data structure, which means it is implemented as an array with an initial (default) fixed size. When this is filled up, the array will be extended to a double sized one. This operation is costly, so you want as few as possible.</p>\n\n<p>So, if you know your upper bound is 20 items, then creating the array with initial length of 20 is better than using a default of, say, 15 and then resize it to <code>15*2 = 30</code> and use only 20 while wasting the cycles for the expansion.</p>\n\n<p>P.S. - As AmitG says, the expansion factor is implementation specific (in this case <code>(oldCapacity * 3)/2 + 1</code>)</p>\n", "title": "Why start an ArrayList with an initial capacity?", "tags": ["java", "data-structures", "arraylist", "capacity"], "link": "http://stackoverflow.com/questions/15430247/why-start-an-arraylist-with-an-initial-capacity/15430375#15430375", "question_id": 15430247, "answer_id": 15430375}, {"body": "<p>This is to avoid possible efforts for reallocation for every single object. </p>\n\n<pre><code>int newCapacity = (oldCapacity * 3)/2 + 1;\n</code></pre>\n\n<p>internally <code>new Object[]</code> is created.<br> JVM needs effort to create  <code>new Object[]</code> when you add element in the arraylist. If you don't have above code(any algo you think) for reallocation then every time when you invoke <code>arraylist.add()</code> then <code>new Object[]</code> has to be created which is pointless and we are loosing time for increasing size by 1 for each and every objects to be added. So it is better to increase size of <code>Object[]</code> with following formula.<br>\n(JSL has used forcasting formula given below for dynamically growing arraylist instead of growing by 1 every time. Because to grow it takes effort by JVM)</p>\n\n<pre><code>int newCapacity = (oldCapacity * 3)/2 + 1;\n</code></pre>\n", "title": "Why start an ArrayList with an initial capacity?", "tags": ["java", "data-structures", "arraylist", "capacity"], "link": "http://stackoverflow.com/questions/15430247/why-start-an-arraylist-with-an-initial-capacity/15432106#15432106", "question_id": 15430247, "answer_id": 15432106}, {"body": "<p>I actually wrote a <a href=\"http://www.growingwiththeweb.com/2013/01/manipulating-size-of-list.html\">blog post</a> on the topic 2 months ago. The article is for C#'s <code>List&lt;T&gt;</code> but Java's <code>ArrayList</code> has a very similar implementation. Since <code>ArrayList</code> is implemented using a dynamic array, it increases in size on demand. So the reason for the capacity constructor is for optimisation purposes.</p>\n\n<p>When one of these resizings operation occurs, the ArrayList copies the contents of the array into a new array that is twice the capacity of the old one. This operation runs in <em>O(n)</em> time.</p>\n\n<h2>Example</h2>\n\n<p>Here is an example of how the <code>ArrayList</code> would increase in size:</p>\n\n<pre><code>10\n16\n25\n38\n58\n... 17 resizes ...\n198578\n297868\n446803\n670205\n1005308\n</code></pre>\n\n<p>So the list starts with a capacity of <code>10</code>, when the 11th item is added it is increase by <code>50% + 1</code> to <code>16</code>. On the 17th item the <code>ArrayList</code> is increased again to <code>25</code> and so on. Now consider the example where we're creating a list where the desired capacity is already known as <code>1000000</code>. Creating the <code>ArrayList</code> without the size constructor will call <code>ArrayList.add</code> <code>1000000</code> times which takes <em>O(1)</em> normally or <em>O(n)</em> on resize.</p>\n\n<blockquote>\n  <p>1000000 + 16 + 25 + ... + 670205 + 1005308 = <strong>4015851 operations</strong></p>\n</blockquote>\n\n<p>Compare this using the constructor and then calling <code>ArrayList.add</code> which is guaranteed to run in <em>O(1)</em>.</p>\n\n<blockquote>\n  <p>1000000 + 1000000 = <strong>2000000 operations</strong></p>\n</blockquote>\n\n<h2>Java vs C#</h2>\n\n<p>Java is as above, starting at <code>10</code> and increasing each resize at <code>50% + 1</code>. C# starts at <code>4</code> and increases much more aggressively, doubling at each resize. The <code>1000000</code> adds example from above for C# uses <code>3097084</code> operations.</p>\n\n<h2>References</h2>\n\n<ul>\n<li><a href=\"http://www.growingwiththeweb.com/2013/01/manipulating-size-of-list.html\">My blog post on C#'s List&lt;T&gt;</a></li>\n<li><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java\">Java's ArrayList source code</a></li>\n</ul>\n", "title": "Why start an ArrayList with an initial capacity?", "tags": ["java", "data-structures", "arraylist", "capacity"], "link": "http://stackoverflow.com/questions/15430247/why-start-an-arraylist-with-an-initial-capacity/15446006#15446006", "question_id": 15430247, "answer_id": 15446006}, {"body": "<p>As per my experience with <code>ArrayList</code>, giving an initial capacity is a nice way to avoid reallocation costs. But it bears a caveat. All suggestions mentioned above say that one should provide initial capacity only when a rough estimate of the number of elements is known. But when we try to give an initial capacity without any idea, the amount of memory reserved and unused will be a waste as it may never be required once the list is filled to required number of elements. What i am saying is, we can be pragmatic at the beginning while allocating capacity, and then find a smart way of knowing required minimal capacity at runtime. ArrayList provides a method called <code>ensureCapacity(int minCapacity)</code>. But then, one has find a smart way...</p>\n", "title": "Why start an ArrayList with an initial capacity?", "tags": ["java", "data-structures", "arraylist", "capacity"], "link": "http://stackoverflow.com/questions/15430247/why-start-an-arraylist-with-an-initial-capacity/15985416#15985416", "question_id": 15430247, "answer_id": 15985416}, {"body": "<p>ArrayList shrinks or expands dynamically.</p>\n\n<p>This is a effective but costly operation, if you know size of your array will be fixed then its better to mention the size of the array,If you don't, new array will be created at each insertion and reallocation will be done for each element.</p>\n\n<p>this will cost you.</p>\n\n<pre><code>ensureCapacity(int cap) \n</code></pre>\n\n<p>this method help to avoid reallocations and helps increase size of arraylist.</p>\n\n<pre><code>trimToSize()\n</code></pre>\n\n<p>this is reverse used to shrink size</p>\n\n<p><strong>Arraylist has 3 constructors:</strong></p>\n\n<ul>\n<li>ArrayList()   -builds empty ArrayList</li>\n<li>ArrayList(Collection c)  - builds a ArrayList initialized with elements of collection c.</li>\n<li><strong>ArrayList(int capacity)</strong>  -builds an ArrayList with specified initial capacity.</li>\n</ul>\n", "title": "Why start an ArrayList with an initial capacity?", "tags": ["java", "data-structures", "arraylist", "capacity"], "link": "http://stackoverflow.com/questions/15430247/why-start-an-arraylist-with-an-initial-capacity/25757711#25757711", "question_id": 15430247, "answer_id": 25757711}, {"body": "<p>I have tested ArrayList with and without initialCapacity and I got suprising result \n<br/> \nWhen I set LOOP_NUMBER to 100,000 or less the result is that setting initialCapacity is efficient.\n<br></p>\n\n<pre><code>list1Sttop-list1Start = 14\nlist2Sttop-list2Start = 10\n</code></pre>\n\n<p><br/> \nBut when I set LOOP_NUMBER to 1,000,000 the result changes to:\n<br/> </p>\n\n<pre><code>list1Stop-list1Start = 40\nlist2Stop-list2Start = 66\n</code></pre>\n\n<p><br/> \nFinally, I couldn't figure out how does it works?!\n<br/> \nSample code:</p>\n\n<pre><code> public static final int LOOP_NUMBER = 100000;\n\npublic static void main(String[] args) {\n\n    long list1Start = System.currentTimeMillis();\n    List&lt;Integer&gt; list1 = new ArrayList();\n    for (int i = 0; i &lt; LOOP_NUMBER; i++) {\n        list1.add(i);\n    }\n    long list1Stop = System.currentTimeMillis();\n    System.out.println(\"list1Stop-list1Start = \" + String.valueOf(list1Stop - list1Start));\n\n    long list2Start = System.currentTimeMillis();\n    List&lt;Integer&gt; list2 = new ArrayList(LOOP_NUMBER);\n    for (int i = 0; i &lt; LOOP_NUMBER; i++) {\n        list2.add(i);\n    }\n    long list2Stop = System.currentTimeMillis();\n    System.out.println(\"list2Stop-list2Start = \" + String.valueOf(list2Stop - list2Start));\n}\n</code></pre>\n\n<p>I have tested on windows8.1 and jdk1.7.0_80</p>\n", "title": "Why start an ArrayList with an initial capacity?", "tags": ["java", "data-structures", "arraylist", "capacity"], "link": "http://stackoverflow.com/questions/15430247/why-start-an-arraylist-with-an-initial-capacity/37631067#37631067", "question_id": 15430247, "answer_id": 37631067}], "creation_date": 1363344066, "score": 119, "link": "http://stackoverflow.com/questions/15430247/why-start-an-arraylist-with-an-initial-capacity", "question_id": 15430247}, {"body": "<p>I have a very big program that is currently using SWT. The program can be run on both Windows, Mac and Linux, and it is a big desktop application with many elements.\nNow SWT being somewhat old I would like to switch to either Swing or JavaFX. And I would like to hear your thoughts on three things.</p>\n\n<p>My main concern is what will be better for a desktop GUI application? (I looked online and a lot of people suggest that JavaFX is just as good as Swing, but I didn't see many valid arguments except simple opinion flame wars). It has to work on both Windows, Mac and some popular Linux distributions.</p>\n\n<ul>\n<li><p>What will be cleaner and easier to maintain?</p></li>\n<li><p>and what will be faster to build from scratch?</p></li>\n</ul>\n\n<p>I am using MVC methology in my application, if that is of any help.</p>\n", "tags": ["java", "swing", "user-interface", "javafx", "swingx"], "title": "Swing vs JavaFx for desktop applications", "answers": [{"body": "<p>I don't think there's any one right answer to this question, but my advice would be to stick with SWT unless you are encountering severe limitations that require such a massive overhaul. </p>\n\n<p>Also, SWT is actually newer and more actively maintained than Swing. (It was <a href=\"http://en.wikipedia.org/wiki/Standard_Widget_Toolkit#History\">originally developed</a> as a replacement for Swing using native components).</p>\n", "title": "Swing vs JavaFx for desktop applications", "tags": ["java", "swing", "user-interface", "javafx", "swingx"], "link": "http://stackoverflow.com/questions/16694948/swing-vs-javafx-for-desktop-applications/16695135#16695135", "question_id": 16694948, "answer_id": 16695135}, {"body": "<p>I'd look around to find some (3rd party?) components that do what you want. I've had to create custom Swing components for an agenda view where you can book multiple resources, as well as an Excel-like grid that works well with keyboard navigation and so on. I had a terrible time getting them to work nicely because I needed to delve into many of Swing's many intricacies whenever I came upon a problem. Mouse and focus behaviour and a lot of other things can be very difficult to get right, especially for a casual Swing user. I would hope that JavaFX is a bit more future-orientated and smooth out of the box.</p>\n", "title": "Swing vs JavaFx for desktop applications", "tags": ["java", "swing", "user-interface", "javafx", "swingx"], "link": "http://stackoverflow.com/questions/16694948/swing-vs-javafx-for-desktop-applications/16695153#16695153", "question_id": 16694948, "answer_id": 16695153}, {"body": "<blockquote>\n  <p>What will be cleaner and easier to maintain?</p>\n</blockquote>\n\n<p>All things being equal, probably JavaFX - the API is much more consistent across components. However, this depends much more on <em>how the code is written</em> rather than <em>what library is used to write it</em>.</p>\n\n<blockquote>\n  <p>And what will be faster to build from scratch?</p>\n</blockquote>\n\n<p>Highly dependent on what you're building. Swing has more components around for it (3rd party as well as built in) and not all of them have made their way to the newer JavaFX platform yet, so there may be a certain amount of re-inventing the wheel if you need something a bit custom. On the other hand, if you want to do transitions / animations / video stuff then this is orders of magnitude easier in FX.</p>\n\n<p>One other thing to bear in mind is (perhaps) look and feel. If you absolutely must have the default system look and feel, then JavaFX (at present) can't provide this. Not a big must have for me (I prefer the default FX look anyway) but I'm aware some policies mandate a restriction to system styles.</p>\n\n<p>Personally, I see JavaFX as the \"up and coming\" UI library that's not <em>quite</em> there yet (but more than usable), and Swing as the borderline-legacy UI library that's fully featured and supported for the moment, but probably won't be so much in the years to come (and therefore chances are FX will overtake it at some point.)</p>\n", "title": "Swing vs JavaFx for desktop applications", "tags": ["java", "swing", "user-interface", "javafx", "swingx"], "link": "http://stackoverflow.com/questions/16694948/swing-vs-javafx-for-desktop-applications/16695225#16695225", "question_id": 16694948, "answer_id": 16695225}, {"body": "<p>I am using javafx for the first time in a non-production recreational app, and there it is fine. It has not production quality IMHO.</p>\n\n<p>Example: one needs tricks, work-arounds in some cases, like right-alignment of a column in a TableView may take an extra effort. The usage of callbacks using callbacks is a bit overdone.</p>\n\n<p>On the other hand, there are nice effects and extras like HTMLEditor. Switching the application language is easier (simply rebuild the scene). In Java 8 javafx should be more pallatable (callbacks), and ripened.</p>\n\n<p>If you cannot wait, go for swing. It is rock-solid.\nYou could opt for the NetBeans Platform RCP, but that takes learning or commercial support. There is effort to port part of the NetBeans Platform to javafx, also in a hybrid version.</p>\n\n<p>Last but not least, one may combine both, running javafx inside a swing app.</p>\n", "title": "Swing vs JavaFx for desktop applications", "tags": ["java", "swing", "user-interface", "javafx", "swingx"], "link": "http://stackoverflow.com/questions/16694948/swing-vs-javafx-for-desktop-applications/16695343#16695343", "question_id": 16694948, "answer_id": 16695343}, {"body": "<p>As stated by Oracle, JavaFX is the next step in their Java based rich client strategy.\nAccordingly, this is what I recommend for your situation:</p>\n\n<blockquote>\n  <p><strong>What would be easier and cleaner to maintain</strong></p>\n</blockquote>\n\n<ul>\n<li>JavaFX has introduced several improvements over Swing, such as, possibility to markup UIs with FXML, and theming with CSS. It has great potential to write a modular, clean &amp; maintainable code.</li>\n</ul>\n\n<blockquote>\n  <p><strong>What would be faster to build from scratch</strong></p>\n</blockquote>\n\n<ul>\n<li>This is highly dependent on your skills and the tools you use.\n\n<ul>\n<li>For swing, various IDEs offer tools for rapid development. The best I personally found is the GUI builder in <a href=\"https://netbeans.org/features/java/swing.html\" rel=\"nofollow\">NetBeans</a>.</li>\n<li>JavaFX has support from various IDEs as well, though not as mature as the support Swing has at the moment. However, its support for markup in FXML &amp; CSS make GUI development on JavaFX faster and intuitive.</li>\n</ul></li>\n</ul>\n\n<blockquote>\n  <p><strong>MVC Pattern Support</strong></p>\n</blockquote>\n\n<ul>\n<li>JavaFX is very friendly with MVC pattern, and you can cleanly separate your work as: presentation (FXML, CSS), models(Java, domain objects) and logic(Java).</li>\n<li>IMHO, the MVC support in Swing isn't very appealing. The flow you'll see across various components lacks consistency.</li>\n</ul>\n\n<p>For more info, please take a look these FAQ post by Oracle regarding JavaFX here.</p>\n\n<ul>\n<li><a href=\"http://www.oracle.com/technetwork/java/javafx/overview/faq-1446554.html#6\" rel=\"nofollow\">JavaFX Frequently Asked Questions</a></li>\n</ul>\n", "title": "Swing vs JavaFx for desktop applications", "tags": ["java", "swing", "user-interface", "javafx", "swingx"], "link": "http://stackoverflow.com/questions/16694948/swing-vs-javafx-for-desktop-applications/21838439#21838439", "question_id": 16694948, "answer_id": 21838439}, {"body": "<p>No one has mentioned it, but JavaFX does not compile or run on certain architectures deemed \"servers\" by Oracle (e.g. Solaris), because of the missing \"jfxrt.jar\" support. Stick with SWT, until further notice.</p>\n", "title": "Swing vs JavaFx for desktop applications", "tags": ["java", "swing", "user-interface", "javafx", "swingx"], "link": "http://stackoverflow.com/questions/16694948/swing-vs-javafx-for-desktop-applications/22852040#22852040", "question_id": 16694948, "answer_id": 22852040}, {"body": "<p>On older notebooks with integrated video Swing app starts and works much faster than JavaFX app. As for development, I'd recommend switch to Scala - comparable Scala Swing app contains 2..3 times less code than Java.\nAs for Swing vs SWT: Netbeans GUI considerably faster than Eclipse...</p>\n", "title": "Swing vs JavaFx for desktop applications", "tags": ["java", "swing", "user-interface", "javafx", "swingx"], "link": "http://stackoverflow.com/questions/16694948/swing-vs-javafx-for-desktop-applications/25732794#25732794", "question_id": 16694948, "answer_id": 25732794}], "creation_date": 1369234161, "score": 118, "link": "http://stackoverflow.com/questions/16694948/swing-vs-javafx-for-desktop-applications", "question_id": 16694948}, {"body": "<p>I wrote a maven code on netbeans that has approximately more than 2000 lines. When I compile it on netbeans, everything is fine, but if I want to run it on command line, I will get these errors:</p>\n\n<pre><code>generics are not supported in -source 1.3\n(use -source 5 or higher to enable generics)\n        ArrayList&lt;ArrayList&lt;Integer&gt;&gt; list = new ArrayList&lt;ArrayList&lt;Integer&gt;&gt;();\n\ngenerics are not supported in -source 1.3\n(use -source 5 or higher to enable generics)\n        HashSet&lt;Double&gt; resid_List = new HashSet&lt;Double&gt;(Arrays.asList(resid_val));\n\ngenerics are not supported in -source 1.3\n(use -source 5 or higher to enable generics)\n        List&lt;Integer&gt; ind_ovlpList = new ArrayList&lt;Integer&gt;(Arrays.asList(ind_ovlp));\n\ngenerics are not supported in -source 1.3\n(use -source 5 or higher to enable generics)\npublic class ColumnComparator implements Comparator&lt;double[]&gt; {\n\nannotations are not supported in -source 1.3\n(use -source 5 or higher to enable annotations)\n@Override\n</code></pre>\n\n<p>I tried to use <a href=\"http://stackoverflow.com/questions/3365473/java-1-3-1-compiler-errors\">Java 1.3.1, compiler errors</a> ,but I got more errors. I found from other posts that I should modify pom.xml, but I do not know how. Here is my pom.xml</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.mycompany&lt;/groupId&gt;\n  &lt;artifactId&gt;mavenmain&lt;/artifactId&gt;\n   &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n   &lt;packaging&gt;jar&lt;/packaging&gt;\n\n   &lt;name&gt;mavenmain&lt;/name&gt;\n    &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n   &lt;properties&gt;\n     &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n   &lt;dependencies&gt;\n     &lt;dependency&gt;\n       &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n       &lt;version&gt;3.8.1&lt;/version&gt;\n       &lt;scope&gt;test&lt;/scope&gt;\n     &lt;/dependency&gt;\n     &lt;dependency&gt;\n        &lt;groupId&gt;gov.nist.math&lt;/groupId&gt;\n        &lt;artifactId&gt;jama&lt;/artifactId&gt;\n        &lt;version&gt;1.0.2&lt;/version&gt;\n     &lt;/dependency&gt;\n   &lt;/dependencies&gt;\n &lt;/project&gt;\n</code></pre>\n\n<p>It would be great if you can help me. </p>\n", "tags": ["java", "maven", "pom.xml"], "title": "How do you specify the Java compiler version in a pom.xml file?", "answers": [{"body": "<pre class=\"lang-xml prettyprint-override\"><code>&lt;project&gt;\n  [...]\n  &lt;build&gt;\n    [...]\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;(whatever version is current)&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;!-- or whatever version you use --&gt;\n          &lt;source&gt;1.7&lt;/source&gt;\n          &lt;target&gt;1.7&lt;/target&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n    [...]\n  &lt;/build&gt;\n  [...]\n&lt;/project&gt;\n</code></pre>\n\n<p>See the config page for the maven compiler plugin:</p>\n\n<p><a href=\"http://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html\">http://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html</a></p>\n\n<p>Oh, and: don't use Java 1.3.x, current versions are Java 1.7.x or 1.8.x</p>\n", "title": "How do you specify the Java compiler version in a pom.xml file?", "tags": ["java", "maven", "pom.xml"], "link": "http://stackoverflow.com/questions/16723533/how-do-you-specify-the-java-compiler-version-in-a-pom-xml-file/16723563#16723563", "question_id": 16723533, "answer_id": 16723563}, {"body": "<p>You are most likely compiling with OpenJDK where the javac default for some reason is Java 1.3 (where Oracle Java defaults to 1.5). </p>\n\n<p>Unfortunately the maven-compiler-plugin documents that the default is 1.5 (without saying why) so people typically do not explicitly set the source and target versions in their pom.xml until they need to compile under other JVMs.</p>\n\n<p>Also note that if you want to be independent of the JDK you can tell the maven-compler-plugin to use the eclipse compiler instead.  This allows you to run Maven on a JRE.</p>\n", "title": "How do you specify the Java compiler version in a pom.xml file?", "tags": ["java", "maven", "pom.xml"], "link": "http://stackoverflow.com/questions/16723533/how-do-you-specify-the-java-compiler-version-in-a-pom-xml-file/16723927#16723927", "question_id": 16723533, "answer_id": 16723927}, {"body": "<p><strong>maven-compiler-plugin</strong> it's already present in plugins hierarchy dependency in pom.xml. Check in Eclipse Effective POM.</p>\n\n<p>For short you can use properties like this:</p>\n\n<pre><code>&lt;properties&gt;\n   &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n   &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n</code></pre>\n\n<p>I'm using maven 3.2.5</p>\n", "title": "How do you specify the Java compiler version in a pom.xml file?", "tags": ["java", "maven", "pom.xml"], "link": "http://stackoverflow.com/questions/16723533/how-do-you-specify-the-java-compiler-version-in-a-pom-xml-file/31675559#31675559", "question_id": 16723533, "answer_id": 31675559}], "creation_date": 1369341726, "score": 117, "link": "http://stackoverflow.com/questions/16723533/how-do-you-specify-the-java-compiler-version-in-a-pom-xml-file", "question_id": 16723533}, {"body": "<p>In the Effective Java book, it states: </p>\n\n<blockquote>\n  <p>The language specification guarantees that reading or writing a\n  variable is atomic unless the variable is of type <code>long</code> or <code>double</code> [JLS,\n  17.4.7].</p>\n</blockquote>\n\n<p>What does \"atomic\" mean in the context of Java programming, or programming in general?</p>\n", "tags": ["java", "atomic"], "title": "What does &quot;atomic&quot; mean in programming?", "answers": [{"body": "<p>It's something that \"appears to the rest of the system to occur instantaneously\", and falls under categorisation of <a href=\"http://en.wikipedia.org/wiki/Linearizability\">Linearizability</a> in computing processes. To quote that linked article further:</p>\n\n<blockquote>\n  <p>Atomicity is a guarantee of isolation from concurrent processes.\n  Additionally, atomic operations commonly have a succeed-or-fail\n  definition \u2014 they either successfully change the state of the system,\n  or have no apparent effect.</p>\n</blockquote>\n\n<p>So, for instance, in the context of a database system, one can have 'atomic commits', meaning that you can push a changeset of updates to a relational database and those changes will either all be submitted, or none of them at all in the event of failure, in this way data does not become corrupt, and consequential of locks and/or queues, the next operation will be a different write or a read, but only <em>after</em> the fact. In the context of variables and threading this is much the same, applied to memory.</p>\n\n<p>Your quote highlights that this need <em>not</em> be expected behaviour in all instances.</p>\n", "title": "What does &quot;atomic&quot; mean in programming?", "tags": ["java", "atomic"], "link": "http://stackoverflow.com/questions/15054086/what-does-atomic-mean-in-programming/15054107#15054107", "question_id": 15054086, "answer_id": 15054107}, {"body": "<p>Here's an example, because an example is often clearer than a long explanation. Suppose <code>foo</code> is a variable of type <code>long</code>. The following operation is not an atomic operation:</p>\n\n<pre><code>foo = 65465498L;\n</code></pre>\n\n<p>Indeed, the variable is written using two separate operations: one that writes the first 32 bits, and a second one which writes the last 32 bits. That means that another thread might read the value of <code>foo</code>, and see the intermediate state. Making the operation atomic consists in using synchronization mechanisms in order to make sure that the operation is seen, from any other thread, as a single, atomic (i.e. not splittable in parts), operation. That means that any other thread, once the operation is made atomic, will either see the value of <code>foo</code> before the assignment, or after the assignment. But never the intermediate value.</p>\n\n<p>A simple way of doing this is to make the variable volatile:</p>\n\n<pre><code>private volatile long foo;\n</code></pre>\n\n<p>Or to synchronize every access to the variable:</p>\n\n<pre><code>public synchronized void setFoo(long value) {\n    this.foo = value;\n}\n\npublic synchronized long getFoo() {\n    return this.foo;\n}\n// no other use of foo outside of these two methods, unless also synchronized\n</code></pre>\n\n<p>Or to replace it with an AtomicLong:</p>\n\n<pre><code>private AtomicLong foo;\n</code></pre>\n", "title": "What does &quot;atomic&quot; mean in programming?", "tags": ["java", "atomic"], "link": "http://stackoverflow.com/questions/15054086/what-does-atomic-mean-in-programming/15054186#15054186", "question_id": 15054086, "answer_id": 15054186}, {"body": "<p>If you have several threads executing the methods m1 and m2 in the code below:</p>\n\n<pre><code>class SomeClass {\n    private int i = 0;\n\n    public void m1() { i = 5; }\n    public int m2() { return i; }\n}\n</code></pre>\n\n<p>you have the guarantee that any thread calling <code>m2</code> will either read 0 or 5.</p>\n\n<p>On the other hand, with this code (where <code>i</code> is a long):</p>\n\n<pre><code>class SomeClass {\n    private long i = 0;\n\n    public void m1() { i = 1234567890L; }\n    public long m2() { return i; }\n}\n</code></pre>\n\n<p>a thread calling <code>m2</code> could read 0, 1234567890L, or some other random value because the statement <code>i = 1234567890L</code> is not guaranteed to be atomic for a <code>long</code> (a JVM could write the first 32 bits and the last 32 bits in two operations and a thread might observe <code>i</code> in between).</p>\n", "title": "What does &quot;atomic&quot; mean in programming?", "tags": ["java", "atomic"], "link": "http://stackoverflow.com/questions/15054086/what-does-atomic-mean-in-programming/15054211#15054211", "question_id": 15054086, "answer_id": 15054211}, {"body": "<p>In ancient philosophy, an atom was the ultimate unit of matter on which more complex views of material reality were based. In computer programming, atomic describes a unitary action or object that is essentially indivisible, unchangeable, whole, and irreducible. Here are some usages:</p>\n\n<p>1) In Structured Query Language , an atomic function is one that will either complete or return to its original state if a power interruption or an abnormal end occurs.</p>\n\n<p>2) In some Unix -base operating systems, an atomic operation is one in which no change can take place in the time between the setting of a mask and the receiving of a signal to change the mask.</p>\n\n<p>3) In some programming languages, including Lisp , an atom is the basic unit of executable code or data.</p>\n\n<p>An operation during which a processor can simultaneously read a location and write it in the same bus operation. This prevents any other processor or I/O device from writing or reading memory until the operation is complete.</p>\n\n<p>Atomic implies indivisibility and irreducibility, so an atomic operation must be performed entirely or not performed at all.</p>\n", "title": "What does &quot;atomic&quot; mean in programming?", "tags": ["java", "atomic"], "link": "http://stackoverflow.com/questions/15054086/what-does-atomic-mean-in-programming/24400999#24400999", "question_id": 15054086, "answer_id": 24400999}, {"body": "<p>\"Atomic operation\" means an operation that appears to be instantaneous from the perspective of all other threads. You don't need to worry about a partly complete operation when the guarantee applies.</p>\n", "title": "What does &quot;atomic&quot; mean in programming?", "tags": ["java", "atomic"], "link": "http://stackoverflow.com/questions/15054086/what-does-atomic-mean-in-programming/24410004#24410004", "question_id": 15054086, "answer_id": 24410004}, {"body": "<p>Just found a post <a href=\"http://preshing.com/20130618/atomic-vs-non-atomic-operations/\">Atomic vs. Non-Atomic Operations</a> to be very helpful to me.</p>\n\n<blockquote>\n  <p>\"An operation acting on shared memory is atomic if it completes in a single step relative to other threads. </p>\n  \n  <p>When an atomic store is performed on a shared memory, no other thread can observe the modification half-complete. </p>\n  \n  <p>When an atomic load is performed on a shared variable, it reads the entire value as it appeared at a single moment in time.\"</p>\n</blockquote>\n", "title": "What does &quot;atomic&quot; mean in programming?", "tags": ["java", "atomic"], "link": "http://stackoverflow.com/questions/15054086/what-does-atomic-mean-in-programming/26093164#26093164", "question_id": 15054086, "answer_id": 26093164}], "creation_date": 1361725057, "score": 117, "link": "http://stackoverflow.com/questions/15054086/what-does-atomic-mean-in-programming", "question_id": 15054086}, {"body": "<p>What are some of the situations where I can use <code>Collections.emptyMap()</code> ? The Documentation says I can use this method if I want my collection to be immutable. </p>\n\n<p><strong>Why would I want an immutable empty collection? What is the point?</strong></p>\n", "tags": ["java", "collections"], "title": "Collections.emptyMap() vs new HashMap()", "answers": [{"body": "<p>It is, in my personal experience admittedly, very useful in cases where an API requires a collection of parameters, but you have nothing to provide.  For example you may have an API that looks something like this, and does not allow null references:</p>\n\n<pre><code>public ResultSet executeQuery(String query, Map&lt;String, Object&gt; queryParameters);\n</code></pre>\n\n<p>If you have a query that doesn't take any parameters, it's certainly a bit wasteful to create a HashMap, which involves allocating an array, when you could just pass in the 'Empty Map' which is effectively a constant, the way it's implemented in <code>java.util.Collections</code>.</p>\n", "title": "Collections.emptyMap() vs new HashMap()", "tags": ["java", "collections"], "link": "http://stackoverflow.com/questions/14846920/collections-emptymap-vs-new-hashmap/14846943#14846943", "question_id": 14846920, "answer_id": 14846943}, {"body": "<p>From <strong>Effective Java</strong>,  <strong>Item #43</strong> - <code>\"Return empty arrays or collections, not null\"</code> demonstrates returning an empty collection and perhaps even demonstrates using these <code>emptyList()</code>, <code>emptySet()</code>, and <code>emptyMap()</code> methods on the Collections class to get an empty collection that also has the additional benefit of being immutable. From  <strong>Item #15</strong>  <code>\"Minimize Mutability\"</code>.</p>\n\n<p>From <a href=\"http://www.coderanch.com/t/536728/java/java/Collections-emptySet-Collections-emptyList-Collections\">Collections-emptySet-Collections-emptyList-Collections</a>  </p>\n\n<blockquote>\n  <p>Its a type of programming idiom. This is for people that do not want null variables. So before the set gets initialized, they can use the empty set. </p>\n</blockquote>\n\n<p><strong>Note:</strong> Below code is just an example (change it according to your use case):  </p>\n\n<pre><code>private Set myset = Collections.emptySet();\n\nvoid initSet() {\n   myset = new HashSet();\n}\nvoid deleteSet() {\n   myset = Collections.emptySet();\n}\n</code></pre>\n\n<p>These methods offer a couple of advantages:</p>\n\n<ol>\n<li><p>They're more concise because you don't need to explicitly type out the generic type of the collection - it's generally just inferred from the context of the method call.   </p></li>\n<li><p>They're more efficient because they don't bother creating new objects; they just re-use an existing empty and immutable object. This effect is generally very minor, but it's occasionally (well, rarely) important.</p></li>\n</ol>\n", "title": "Collections.emptyMap() vs new HashMap()", "tags": ["java", "collections"], "link": "http://stackoverflow.com/questions/14846920/collections-emptymap-vs-new-hashmap/14846960#14846960", "question_id": 14846920, "answer_id": 14846960}, {"body": "<blockquote>\n  <p>Why would I want an immutable empty collection? What is the point?</p>\n</blockquote>\n\n<p>For the same reason you'd use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#unmodifiableMap%28java.util.Map%29\" rel=\"nofollow\"><code>Collections.unmodifiableMap()</code></a> at some point. You want to return a Map instance that throws an exception if the user attempts to modify it. It's just a special case: the empty Map.</p>\n", "title": "Collections.emptyMap() vs new HashMap()", "tags": ["java", "collections"], "link": "http://stackoverflow.com/questions/14846920/collections-emptymap-vs-new-hashmap/14846963#14846963", "question_id": 14846920, "answer_id": 14846963}, {"body": "<p>For one, you can get away with reference sharing. A <code>new HashMap()</code> etc will require an allocated object, and possibly some extra elements to hold the data, but you only need one copy of an immutable empty collection (list, set, map, or any other such). This makes it an obvious choice when a method you're calling needs to accept a Map but does not need to edit it.</p>\n\n<p>I suggest checking out Josh Bloch's <em>Effective Java</em>, which lists some very nice attributes of immutable objects (including thread safety).</p>\n", "title": "Collections.emptyMap() vs new HashMap()", "tags": ["java", "collections"], "link": "http://stackoverflow.com/questions/14846920/collections-emptymap-vs-new-hashmap/14846964#14846964", "question_id": 14846920, "answer_id": 14846964}, {"body": "<p>It can be useful when you have a function that returns an <code>immutable collection</code> and in some situation there is no data to return so instead of returning <code>null</code> you can return <code>emptyMap()</code></p>\n\n<p>It make your code easier and prevent <code>NullPointerException</code></p>\n", "title": "Collections.emptyMap() vs new HashMap()", "tags": ["java", "collections"], "link": "http://stackoverflow.com/questions/14846920/collections-emptymap-vs-new-hashmap/14846999#14846999", "question_id": 14846920, "answer_id": 14846999}, {"body": "<p>Most of the time we use a <code>constructor</code> to create a new <code>empty map</code>. But the <code>Collections</code> <code>methods</code> offer a couple of advantages to create an <code>empty map</code> using <code>static</code> <code>method</code> <code>java.util.Collections.emptyMap()</code></p>\n\n<blockquote>\n  <ol>\n  <li><p>They're more concise because you don't need to explicitly type out the generic type of the collection - it's generally just inferred from\n  the context of the method call.</p></li>\n  <li><p>They're more efficient because they don't bother creating new objects; they just re-use an existing empty and immutable object. This\n  effect is generally very minor, but it's occasionally (well, rarely)\n  important.</p></li>\n  </ol>\n</blockquote>\n", "title": "Collections.emptyMap() vs new HashMap()", "tags": ["java", "collections"], "link": "http://stackoverflow.com/questions/14846920/collections-emptymap-vs-new-hashmap/14847046#14847046", "question_id": 14846920, "answer_id": 14847046}, {"body": "<blockquote>\n  <p>Why would I want an immutable empty collection? What is the point?</p>\n</blockquote>\n\n<p>For the same reasons why you might want immutable objects. Primarily because you can sleep safe at night in the knowledge that multiple threads can access the same instance of an object and that they will all be seeing the same values. Having no items in a collection is still a valid value, which you would want to maintain.</p>\n", "title": "Collections.emptyMap() vs new HashMap()", "tags": ["java", "collections"], "link": "http://stackoverflow.com/questions/14846920/collections-emptymap-vs-new-hashmap/14850299#14850299", "question_id": 14846920, "answer_id": 14850299}, {"body": "<p>There are couple of cases where you would prefer using immutable maps, lists, sets or other types of collections.</p>\n\n<p><strong>First</strong> and arguably most important use case is whenever you return a result of a query or a computation that would return a set (or list or map) of results, you should prefer to use immutable data structures. </p>\n\n<p>In this case, I much prefer to return immutable versions of these as this reflects the factual immutability of a resultset of a computation much more clearly - no matter what you do with the data later, the set of results you received from your query should not change.</p>\n\n<p><strong>Second</strong> common use case is when you need to provide an argument as an input to a method or service. Unless you <em>expect</em> the input collection to be modified by the service or method (which is usually a really bad design idea), passing in an immutable collection instead of the mutable one might be the reasonable and safe choice in many cases. </p>\n\n<p>I think of it as <em>\"pass by value\"</em> convention.</p>\n\n<p><strong>More generally</strong> - it is a sensible practice to use an immutable data structures whenever data crosses module or service boundaries. This makes it much easier to reason about differences between (immutable) input/output and mutable internal state. </p>\n\n<p>As a very beneficial side effect of this is increased security and thread safety of your modules/services and ensures cleaner separation of concerns.</p>\n\n<p><strong>Another good reason</strong> to use <code>Collections.empty*()</code> methods is their noticeable lack of verboseness. In pre-Java7 era, if you had a generic collection, you had to sprinkle generic type annotations all over the place.</p>\n\n<p>Just compare these two declarations:</p>\n\n<pre><code>Map&lt;Foo, Comparable&lt;? extends Bar&gt;&gt; fooBarMap = new HashMap&lt;Foo, Comparable&lt;? extends Bar&gt;&gt;();\n</code></pre>\n\n<p>versus:</p>\n\n<pre><code>Map&lt;Foo, Comparable&lt;? extends Bar&gt;&gt; fooBarMap = Collections.emptyMap();\n</code></pre>\n\n<p>The latter clearly wins hands-down on readability in two important ways:</p>\n\n<ol>\n<li>In the first declaration, the whole instantiation of an empty map is buried in the noise of generic type declarations, making an essentially trivial declaration much more cryptic than it needs to be.</li>\n<li>In addition to notable lack of generic type annotation on the right side, the second version clearly states that the map is initialized to an empty map. \nIn addition - knowing that this method returns an immutable map, it is now easier for me to find where <code>fooBarMap</code> is being assigned another <em>nonempty</em> value just by searching for <code>/fooBarMap =/</code>.</li>\n</ol>\n", "title": "Collections.emptyMap() vs new HashMap()", "tags": ["java", "collections"], "link": "http://stackoverflow.com/questions/14846920/collections-emptymap-vs-new-hashmap/14850483#14850483", "question_id": 14846920, "answer_id": 14850483}, {"body": "<blockquote>\n  <p>Why would I want an immutable empty collection? What is the point?</p>\n</blockquote>\n\n<p>There are two different concepts here that appear strange when viewed together. It makes more sense when you treat the two concepts separately.</p>\n\n<ul>\n<li><p>Firstly, you should prefer to use an immutable collection rather than a mutable one wherever possible. The benefits of immuablity are well <a href=\"http://stackoverflow.com/questions/214714/mutable-vs-immutable-objects/214718#214718\">documented elsewhere</a>.</p></li>\n<li><p>Secondly, you should prefer to use an empty collection rather than to use null as a sentinel. This is <a href=\"http://stackoverflow.com/a/1970001/249879\">well described here</a>. It means that you will have much cleaner, easier to understand code, with fewer places for bugs to hide.</p></li>\n</ul>\n\n<p>So when you have code that requires a map, it is better to pass an empty map rather than a null to indicate the absence of a map. And most of the time when you are using a map, it is better to use an immutable map. So this is why there is a convenience function to make an immutable empty map.</p>\n", "title": "Collections.emptyMap() vs new HashMap()", "tags": ["java", "collections"], "link": "http://stackoverflow.com/questions/14846920/collections-emptymap-vs-new-hashmap/14852027#14852027", "question_id": 14846920, "answer_id": 14852027}], "creation_date": 1360733039, "score": 114, "link": "http://stackoverflow.com/questions/14846920/collections-emptymap-vs-new-hashmap", "question_id": 14846920}, {"body": "<p>We know that it is expensive to catch exceptions. But, is it also expensive to use a try-catch block in Java even if an exception is never thrown? </p>\n\n<p>I found the Stack Overflow question/answer <em><a href=\"http://stackoverflow.com/questions/164613/why-are-try-blocks-expensive\">Why are try blocks expensive?</a></em>, but it is for <a href=\"http://en.wikipedia.org/wiki/.NET_Framework\">.NET</a>.</p>\n", "tags": ["java", "performance", "try-catch"], "title": "Is it expensive to use try-catch blocks even if an exception is never thrown?", "answers": [{"body": "<p><code>try</code>/<code>catch</code> may have some impact on performance. This is because it prevents JVM from doing some optimizations. Joshua Bloch, in \"Effective Java,\" said the following: </p>\n\n<blockquote>\n  <p>\u2022 Placing code inside a try-catch block inhibits certain optimizations that modern JVM implementations might otherwise perform.</p>\n</blockquote>\n", "title": "Is it expensive to use try-catch blocks even if an exception is never thrown?", "tags": ["java", "performance", "try-catch"], "link": "http://stackoverflow.com/questions/16451777/is-it-expensive-to-use-try-catch-blocks-even-if-an-exception-is-never-thrown/16451805#16451805", "question_id": 16451777, "answer_id": 16451805}, {"body": "<p><code>try</code> has almost no expense at all. Instead of doing the work of setting up the <code>try</code> at runtime, the code's metadata is structured at compile time such that when an exception is thrown, it now does a relatively expensive operation of walking up the stack and seeing if any <code>try</code> blocks exist that would catch this exception. From a layman's perspective, <code>try</code> may as well be free. It's actually throwing the exception that costs you - but unless you're throwing hundreds or thousands of exceptions, you still won't notice the cost.</p>\n\n<hr>\n\n<p><code>try</code> has some minor costs associated with it. Java cannot do some optimizations on code in a <code>try</code> block that it would otherwise do. For example, Java will often re-arrange instructions in a method to make it run faster - but Java also needs to guarantee that if an exception is thrown, the method's execution is observed as though its statements, as written in the source code, executed in order up to some line.</p>\n\n<p>Because in a <code>try</code> block an exception can be thrown (at any line in the try block! Some exceptions are thrown asynchronously, such as by calling <code>stop</code> on a Thread (which is deprecated), and even besides that OutOfMemoryError can happen almost anywhere) and yet it can be caught and code continue to execute afterwards in the same method, it is more difficult to reason about optimizations that can be made, so they are less likely to happen. (Someone would have to program the compiler to do them, reason about and guarantee correctness, etc. It'd be a big pain for something meant to be 'exceptional') But again, in practice you won't notice things like this.</p>\n", "title": "Is it expensive to use try-catch blocks even if an exception is never thrown?", "tags": ["java", "performance", "try-catch"], "link": "http://stackoverflow.com/questions/16451777/is-it-expensive-to-use-try-catch-blocks-even-if-an-exception-is-never-thrown/16451908#16451908", "question_id": 16451777, "answer_id": 16451908}, {"body": "<p>Yep, as the others have said, a <code>try</code> block inhibits some optimizations across the <code>{}</code> characters surrounding it.  In particular, the optimizer must assume that an exception could occur at any point within the block, so there's no assurance that statements get executed.</p>\n\n<p>For example:</p>\n\n<pre><code>    try {\n        int x = a + b * c * d;\n        other stuff;\n    }\n    catch (something) {\n        ....\n    }\n    int y = a + b * c * d;\n    use y somehow;\n</code></pre>\n\n<p>Without the <code>try</code>, the value calculated to assign to <code>x</code> could be saved as a \"common subexpression\" and reused to assign to <code>y</code>.  But because of the <code>try</code> there is no assurance that the first expression was ever evaluated, so the expression must be recomputed.  This isn't usually a big deal in \"straight-line\" code, but can be significant in a loop.</p>\n\n<p>It should be noted, however, that this applies ONLY to JITCed code.  javac does only a piddling amount of optimization, and there is zero cost to the bytecode interpreter to enter/leave a <code>try</code> block.  (There are no bytecodes generated to mark the block boundaries.)</p>\n\n<p>And for bestsss:</p>\n\n<pre><code>public class TryFinally {\n    public static void main(String[] argv) throws Throwable {\n        try {\n            throw new Throwable();\n        }\n        finally {\n            System.out.println(\"Finally!\");\n        }\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>C:\\JavaTools&gt;java TryFinally\nFinally!\nException in thread \"main\" java.lang.Throwable\n        at TryFinally.main(TryFinally.java:4)\n</code></pre>\n\n<p>javap output:</p>\n\n<pre><code>C:\\JavaTools&gt;javap -c TryFinally.class\nCompiled from \"TryFinally.java\"\npublic class TryFinally {\n  public TryFinally();\n    Code:\n       0: aload_0\n       1: invokespecial #1                  // Method java/lang/Object.\"&lt;init&gt;\":()V\n       4: return\n\n  public static void main(java.lang.String[]) throws java.lang.Throwable;\n    Code:\n       0: new           #2                  // class java/lang/Throwable\n       3: dup\n       4: invokespecial #3                  // Method java/lang/Throwable.\"&lt;init&gt;\":()V\n       7: athrow\n       8: astore_1\n       9: getstatic     #4                  // Field java/lang/System.out:Ljava/io/PrintStream;\n      12: ldc           #5                  // String Finally!\n      14: invokevirtual #6                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V\n      17: aload_1\n      18: athrow\n    Exception table:\n       from    to  target type\n           0     9     8   any\n}\n</code></pre>\n\n<p>No \"GOTO\".</p>\n", "title": "Is it expensive to use try-catch blocks even if an exception is never thrown?", "tags": ["java", "performance", "try-catch"], "link": "http://stackoverflow.com/questions/16451777/is-it-expensive-to-use-try-catch-blocks-even-if-an-exception-is-never-thrown/16452100#16452100", "question_id": 16451777, "answer_id": 16452100}, {"body": "<p>Let's measure it, shall we?</p>\n\n<pre><code>public abstract class Benchmark {\n\n    final String name;\n\n    public Benchmark(String name) {\n        this.name = name;\n    }\n\n    abstract int run(int iterations) throws Throwable;\n\n    private BigDecimal time() {\n        try {\n            int nextI = 1;\n            int i;\n            long duration;\n            do {\n                i = nextI;\n                long start = System.nanoTime();\n                run(i);\n                duration = System.nanoTime() - start;\n                nextI = (i &lt;&lt; 1) | 1;\n            } while (duration &lt; 100000000 &amp;&amp; nextI &gt; 0);\n            return new BigDecimal((duration) * 1000 / i).movePointLeft(3);\n        } catch (Throwable e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    @Override\n    public String toString() {\n        return name + \"\\t\" + time() + \" ns\";\n    }\n\n    public static void main(String[] args) throws Exception {\n        Benchmark[] benchmarks = {\n            new Benchmark(\"try\") {\n                @Override int run(int iterations) throws Throwable {\n                    int x = 0;\n                    for (int i = 0; i &lt; iterations; i++) {\n                        try {\n                            x += i;\n                        } catch (Exception e) {\n                            e.printStackTrace();\n                        }\n                    }\n                    return x;\n                }\n            }, new Benchmark(\"no try\") {\n                @Override int run(int iterations) throws Throwable {\n                    int x = 0;\n                    for (int i = 0; i &lt; iterations; i++) {\n                        x += i;\n                    }\n                    return x;\n                }\n            }\n        };\n        for (Benchmark bm : benchmarks) {\n            System.out.println(bm);\n        }\n    }\n}\n</code></pre>\n\n<p>On my computer, this prints something like:</p>\n\n<pre><code>try     0.598 ns\nno try  0.601 ns\n</code></pre>\n\n<p>At least in this trivial example, the try statement had no measurable impact on performance. Feel free to measure more complex ones.</p>\n\n<p>Generally speaking, I recommend not to worry about the performance cost of language constructs until you have evidence of an actual performance problem in your code. Or as Donald Knuth <a href=\"http://en.wikipedia.org/wiki/Program_optimization#When_to_optimize\">put</a> it: \"premature optimization is the root of all evil\".</p>\n", "title": "Is it expensive to use try-catch blocks even if an exception is never thrown?", "tags": ["java", "performance", "try-catch"], "link": "http://stackoverflow.com/questions/16451777/is-it-expensive-to-use-try-catch-blocks-even-if-an-exception-is-never-thrown/16452181#16452181", "question_id": 16451777, "answer_id": 16452181}, {"body": "<p>To understand why the optimizations cannot be performed, It is useful to understand the underlying mechanisms.  The most succinct example I could find was implemented in C macros at: <a href=\"http://www.di.unipi.it/~nids/docs/longjump_try_trow_catch.html\">http://www.di.unipi.it/~nids/docs/longjump_try_trow_catch.html</a> </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;setjmp.h&gt;\n#define TRY do{ jmp_buf ex_buf__; switch( setjmp(ex_buf__) ){ case 0: while(1){\n#define CATCH(x) break; case x:\n#define FINALLY break; } default:\n#define ETRY } }while(0)\n#define THROW(x) longjmp(ex_buf__, x)\n</code></pre>\n\n<p>Compilers often have difficulty determining if a jump can be localized to X, Y and Z so they skip optimizations that they can't guarantee to be safe, but the implementation itself is rather light.</p>\n", "title": "Is it expensive to use try-catch blocks even if an exception is never thrown?", "tags": ["java", "performance", "try-catch"], "link": "http://stackoverflow.com/questions/16451777/is-it-expensive-to-use-try-catch-blocks-even-if-an-exception-is-never-thrown/16454055#16454055", "question_id": 16451777, "answer_id": 16454055}, {"body": "<p>Yet another microbenchmark (<a href=\"https://github.com/chaschev/experiments-with-microbes/blob/master/src/main/java/stackoverflow/q8621762/TryCatchMicrobe.java\" rel=\"nofollow\">source</a>).</p>\n\n<p>I created a test in which I measure try-catch and no-try-catch code version based on an exception percentage. 10% percentage means that 10% of the test cases had division by zero cases. In one situation it is handled by a try-catch block, in the other by a conditional operator. Here is my results table:</p>\n\n<pre><code>OS: Windows 8 6.2 x64\nJVM: Oracle Corporation Java HotSpot(TM) 64-Bit Server VM 23.25-b01\n</code></pre>\n\n<pre>\nPercentage | Result (try/if, ns)   \n    0%     |      88/90   \n    1%     |      89/87    \n    10%    |      86/97    \n    90%    |      85/83   \n</pre>\n\n<p>Which says that there is no significant difference between any of these cases.</p>\n", "title": "Is it expensive to use try-catch blocks even if an exception is never thrown?", "tags": ["java", "performance", "try-catch"], "link": "http://stackoverflow.com/questions/16451777/is-it-expensive-to-use-try-catch-blocks-even-if-an-exception-is-never-thrown/18938171#18938171", "question_id": 16451777, "answer_id": 18938171}], "creation_date": 1368055000, "score": 113, "link": "http://stackoverflow.com/questions/16451777/is-it-expensive-to-use-try-catch-blocks-even-if-an-exception-is-never-thrown", "question_id": 16451777}, {"body": "<p>I have a List of doubles in java and i want a result list with sorted in descending order</p>\n\n<p>Input ArrayList is like-       </p>\n\n<pre><code>  List&lt;Double&gt; testList=new ArrayList();\n\n    testList.add(0.5);\n    testList.add(0.2);\n    testList.add(0.9);\n    testList.add(0.1);\n    testList.add(0.1);\n    testList.add(0.1);\n    testList.add(0.54);\n    testList.add(0.71);\n    testList.add(0.71);\n    testList.add(0.71);\n    testList.add(0.92);\n    testList.add(0.12);\n    testList.add(0.65);\n    testList.add(0.34);\n    testList.add(0.62);\n</code></pre>\n\n<p>The out put should be</p>\n\n<pre><code>0.92\n0.9\n0.71\n0.71\n0.71\n0.65\n0.62\n0.54\n0.5\n0.34\n0.2\n0.12\n0.1\n0.1\n0.1  \n</code></pre>\n", "tags": ["java"], "title": "How to sort a List/ArrayList in Java", "answers": [{"body": "<pre><code>Collections.sort(testList);\nCollections.reverse(testList);\n</code></pre>\n\n<p>That will do what you want. Remember to import <code>Collections</code> though!</p>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html\">Here is the documentation for <code>Collections</code></a>.</p>\n", "title": "How to sort a List/ArrayList in Java", "tags": ["java"], "link": "http://stackoverflow.com/questions/16252269/how-to-sort-a-list-arraylist-in-java/16252290#16252290", "question_id": 16252269, "answer_id": 16252290}, {"body": "<p>Use util method of <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html\">java.util.Collections</a> class, i.e</p>\n\n<pre><code>Collections.sort(list)\n</code></pre>\n\n<p>In fact, if you want to sort custom object you can use</p>\n\n<pre><code>Collections.sort(List&lt;T&gt; list, Comparator&lt;? super T&gt; c) \n</code></pre>\n\n<p>see collections api</p>\n", "title": "How to sort a List/ArrayList in Java", "tags": ["java"], "link": "http://stackoverflow.com/questions/16252269/how-to-sort-a-list-arraylist-in-java/16252296#16252296", "question_id": 16252269, "answer_id": 16252296}, {"body": "<pre><code>//Here is sorted List alphabetically with syncronized\npackage com.mnas.technology.automation.utility;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.Comparator;\nimport java.util.Iterator;\nimport java.util.List;\n\nimport org.apache.log4j.Logger;\n/**\n* \n* @author manoj.kumar\n*/\npublic class SynchronizedArrayList {\nstatic Logger log = Logger.getLogger(SynchronizedArrayList.class.getName());\n@SuppressWarnings(\"unchecked\")\npublic static void main(String[] args) {\n\nList&lt;Employee&gt; synchronizedList = Collections.synchronizedList(new ArrayList&lt;Employee&gt;());\nsynchronizedList.add(new Employee(\"Aditya\"));\nsynchronizedList.add(new Employee(\"Siddharth\"));\nsynchronizedList.add(new Employee(\"Manoj\"));\nCollections.sort(synchronizedList, new Comparator() {\npublic int compare(Object synchronizedListOne, Object synchronizedListTwo) {\n//use instanceof to verify the references are indeed of the type in question\nreturn ((Employee)synchronizedListOne).name\n.compareTo(((Employee)synchronizedListTwo).name);\n}\n}); \n/*for( Employee sd : synchronizedList) {\nlog.info(\"Sorted Synchronized Array List...\"+sd.name);\n}*/\n\n// when iterating over a synchronized list, we need to synchronize access to the synchronized list\nsynchronized (synchronizedList) {\nIterator&lt;Employee&gt; iterator = synchronizedList.iterator();\nwhile (iterator.hasNext()) {\nlog.info(\"Sorted Synchronized Array List Items: \" + iterator.next().name);\n}\n}\n\n}\n}\nclass Employee {\nString name;\nEmployee (String name) {\nthis.name = name;\n\n}\n}\n</code></pre>\n", "title": "How to sort a List/ArrayList in Java", "tags": ["java"], "link": "http://stackoverflow.com/questions/16252269/how-to-sort-a-list-arraylist-in-java/27816773#27816773", "question_id": 16252269, "answer_id": 27816773}, {"body": "<p>You can use <code>Collections.sort(list)</code> to sort <code>list</code> if your <code>list</code> contains <code>Comparable</code> elements. Otherwise I would recommend you to implement that interface like here:</p>\n\n<pre><code>public class Circle implements Comparable&lt;Circle&gt; {}\n</code></pre>\n\n<p>and of course provide your own realization of <code>compareTo</code> method like here:</p>\n\n<pre><code>@Override\n    public int compareTo(Circle another) {\n        if (this.getD()&lt;another.getD()){\n            return -1;\n        }else{\n            return 1;\n        }\n    }\n</code></pre>\n\n<p>And then you can again use <code>Colection.sort(list)</code> as now list contains objects of Comparable type and can be sorted. Order depends on <code>compareTo</code> method. Check this <a href=\"https://docs.oracle.com/javase/tutorial/collections/interfaces/order.html\">https://docs.oracle.com/javase/tutorial/collections/interfaces/order.html</a> for more detailed information.</p>\n", "title": "How to sort a List/ArrayList in Java", "tags": ["java"], "link": "http://stackoverflow.com/questions/16252269/how-to-sort-a-list-arraylist-in-java/29652714#29652714", "question_id": 16252269, "answer_id": 29652714}, {"body": "<p>if you are using Java SE 8, then this might be of help.</p>\n\n<pre><code>//create a comparator object using a Lambda expression\nComparator&lt;Double&gt; compareDouble = (d1, d2) -&gt; d1.compareTo(d2);\n\n//Sort the Collection in this case 'testList' in reverse order\nCollections.sort(testList, Collections.reverseOrder(compareDouble));\n\n//print the sorted list using method reference only applicable in SE 8\ntestList.forEach(System.out::println);\n</code></pre>\n", "title": "How to sort a List/ArrayList in Java", "tags": ["java"], "link": "http://stackoverflow.com/questions/16252269/how-to-sort-a-list-arraylist-in-java/30210090#30210090", "question_id": 16252269, "answer_id": 30210090}, {"body": "<p><code>Collections.sort</code> allows you to pass an instance of a <code>Comparator</code> which defines the sorting logic. So instead of sorting the list in natural order and then reversing it, one can simply pass <code>Collections.reverseOrder()</code> to <code>sort</code> in order to sort the list in reverse order:</p>\n\n<pre><code>// import java.util.Collections;\nCollections.sort(testList, Collections.reverseOrder());\n</code></pre>\n\n<p>As mentioned by @Marco13, apart from being more idiomatic (and possibly more efficient), using the reverse order comparator makes sure that the sort is stable (meaning that the order of elements will not be changed when they are equal according to the comparator, whereas reversing will change the order)</p>\n", "title": "How to sort a List/ArrayList in Java", "tags": ["java"], "link": "http://stackoverflow.com/questions/16252269/how-to-sort-a-list-arraylist-in-java/30210459#30210459", "question_id": 16252269, "answer_id": 30210459}, {"body": "<p>You can use like that </p>\n\n<pre><code>              ArrayList&lt;Group&gt; groupList = new ArrayList&lt;&gt;();\n              Collections.sort(groupList, Collections.reverseOrder());\n              Collections.reverse(groupList);\n</code></pre>\n", "title": "How to sort a List/ArrayList in Java", "tags": ["java"], "link": "http://stackoverflow.com/questions/16252269/how-to-sort-a-list-arraylist-in-java/34523438#34523438", "question_id": 16252269, "answer_id": 34523438}, {"body": "<p>Descending</p>\n\n<pre><code> Collections.sort(mArrayList, new Comparator&lt;CustomData&gt;() {\n                @Override\n                public int compare(CustomData lhs, CustomData rhs) {\n                    return lhs.customInt &gt; rhs.customInt ? -1 : (lhs.customInt &gt; rhs.customInt ) ? 1 : 0;\n                }\n            });\n</code></pre>\n", "title": "How to sort a List/ArrayList in Java", "tags": ["java"], "link": "http://stackoverflow.com/questions/16252269/how-to-sort-a-list-arraylist-in-java/34646172#34646172", "question_id": 16252269, "answer_id": 34646172}, {"body": "<p>Using lambdas (Java8), and stripping it down to the barest of syntax (the JVM will infer <em>plenty</em> in this case), you get:</p>\n\n<pre><code>Collections.sort(testList, (a, b) -&gt; b.compareTo(a));\n</code></pre>\n\n<p>A more verbose version:\n</p>\n\n<pre><code>// Implement a reverse-order Comparator by lambda function\nComparator&lt;Double&gt; comp = (Double a, Double b) -&gt; {\n    return b.compareTo(a);\n};\n\nCollections.sort(testList, comp);\n</code></pre>\n\n<p>The use of a lambda is possible because the Comparator interface has only a single method to implement, so the VM can infer which method is implementing. Since the types of the params can be inferred, they don't need to be stated (i.e. <code>(a, b)</code> instead of <code>(Double a, Double b)</code>. And since the lambda body has only a single line, and the method is expected to return a value, the <code>return</code> is inferred and the braces aren't necessary.</p>\n", "title": "How to sort a List/ArrayList in Java", "tags": ["java"], "link": "http://stackoverflow.com/questions/16252269/how-to-sort-a-list-arraylist-in-java/35075891#35075891", "question_id": 16252269, "answer_id": 35075891}, {"body": "<p>With Java8 there is a default sort method on the List interface that will allow you to sort the collection if you provide a Comparator.  You can easily sort the example in the question as follows:</p>\n\n<pre><code>testList.sort((a, b) -&gt; Double.compare(b, a));\n</code></pre>\n\n<p>Note: the args in the lambda are swapped when passed in to Double.compare to ensure the sort is descending</p>\n", "title": "How to sort a List/ArrayList in Java", "tags": ["java"], "link": "http://stackoverflow.com/questions/16252269/how-to-sort-a-list-arraylist-in-java/36407734#36407734", "question_id": 16252269, "answer_id": 36407734}, {"body": "<p>you can do like this:</p>\n\n<pre><code>    List&lt;String&gt; yourList = new ArrayList&lt;String&gt;();\n    Collections.sort(yourList, Collections.reverseOrder());\n</code></pre>\n\n<p>Collection has a default Comparator that can help you with that.</p>\n\n<p>Also, if you want to use some Java 8 new features, you can do like that:</p>\n\n<pre><code>List&lt;String&gt; yourList = new ArrayList&lt;String&gt;();\nyourList = yourList.stream().sorted(Collections.reverseOrder()).collect(Collectors.toList());\n</code></pre>\n", "title": "How to sort a List/ArrayList in Java", "tags": ["java"], "link": "http://stackoverflow.com/questions/16252269/how-to-sort-a-list-arraylist-in-java/36425977#36425977", "question_id": 16252269, "answer_id": 36425977}, {"body": "<p>For your example, this wil do the magic</p>\n\n<pre><code>testList.sort();\n</code></pre>\n\n<p>But if you want to sort by some of the field of the object you are sorting, you can do it easily and smoothly by:</p>\n\n<pre><code>testList.sort(comparing(ClassName::getFieldName));\n</code></pre>\n\n<p>or </p>\n\n<pre><code> testList.sort(comparing(ClassName::getFieldName).reversed());\n</code></pre>\n", "title": "How to sort a List/ArrayList in Java", "tags": ["java"], "link": "http://stackoverflow.com/questions/16252269/how-to-sort-a-list-arraylist-in-java/38207945#38207945", "question_id": 16252269, "answer_id": 38207945}], "creation_date": 1367066896, "score": 111, "link": "http://stackoverflow.com/questions/16252269/how-to-sort-a-list-arraylist-in-java", "question_id": 16252269}, {"body": "<p>I have a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html\"><code>StringBuilder</code></a> object,</p>\n\n<pre><code>StringBuilder result = new StringBuilder();\nresult.append(someChar);\n</code></pre>\n\n<p>Now I want to append a newline character to the <code>StringBuilder</code>. How can I do it?</p>\n\n<pre><code>result.append(\"/n\"); \n</code></pre>\n\n<p>Does not work. So, I was thinking about writing a newline using Unicode. Will this help? If so, how can I add one?</p>\n", "tags": ["java", "stringbuilder"], "title": "How to append a newline to StringBuilder", "answers": [{"body": "<p>Escape should be done with <code>\\</code>, not <code>/</code>.</p>\n\n<p>So <code>r.append('\\n');</code> or <code>r.append(\"\\n\");</code> will work (<code>StringBuilder</code> has overloaded methods for <code>char</code> and <code>String</code> type).</p>\n", "title": "How to append a newline to StringBuilder", "tags": ["java", "stringbuilder"], "link": "http://stackoverflow.com/questions/14534767/how-to-append-a-newline-to-stringbuilder/14534791#14534791", "question_id": 14534767, "answer_id": 14534791}, {"body": "<p>It should be </p>\n\n<pre><code>r.append(\"\\n\");\n</code></pre>\n\n<p>But I recommend you to do as below,</p>\n\n<pre><code>r.append(System.getProperty(\"line.separator\"));\n</code></pre>\n\n<p><code>System.getProperty(\"line.separator\")</code> gives you system-dependent newline in java. Also from Java 7 there's a method that returns the value directly: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#lineSeparator%28%29\"><code>System.lineSeparator()</code></a> </p>\n", "title": "How to append a newline to StringBuilder", "tags": ["java", "stringbuilder"], "link": "http://stackoverflow.com/questions/14534767/how-to-append-a-newline-to-stringbuilder/14534798#14534798", "question_id": 14534767, "answer_id": 14534798}, {"body": "<p>For HTML response  below code can be used </p>\n\n<pre><code>bufString.append(\"&lt;/br&gt;\");\n</code></pre>\n", "title": "How to append a newline to StringBuilder", "tags": ["java", "stringbuilder"], "link": "http://stackoverflow.com/questions/14534767/how-to-append-a-newline-to-stringbuilder/33687544#33687544", "question_id": 14534767, "answer_id": 33687544}, {"body": "<p>Another option is to use Apache Commons StrBuilder, which has the functionality that's lacking in StringBuilder.</p>\n\n<p><a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/text/StrBuilder.html#appendln(org.apache.commons.lang3.text.StrBuilder)\">StrBuilder.appendLn()</a></p>\n", "title": "How to append a newline to StringBuilder", "tags": ["java", "stringbuilder"], "link": "http://stackoverflow.com/questions/14534767/how-to-append-a-newline-to-stringbuilder/34073047#34073047", "question_id": 14534767, "answer_id": 34073047}], "creation_date": 1359184415, "score": 109, "link": "http://stackoverflow.com/questions/14534767/how-to-append-a-newline-to-stringbuilder", "question_id": 14534767}, {"body": "<p>Hello I am developing an android broadcast receiver for checking internet connection.</p>\n\n<p>But the problem is that my broadcast receiver for two times. </p>\n\n<p>Secondly, I want to get it called only when network is available. If it is unavailable, I will not want to get notified.</p>\n\n<p>This is the broadcast receiver</p>\n\n<pre><code>public class NetworkChangeReceiver extends BroadcastReceiver {\n\n    @Override\n    public void onReceive(final Context context, final Intent intent) {\n        final ConnectivityManager connMgr = (ConnectivityManager) context\n                .getSystemService(Context.CONNECTIVITY_SERVICE);\n\n        final android.net.NetworkInfo wifi = connMgr\n                .getNetworkInfo(ConnectivityManager.TYPE_WIFI);\n\n        final android.net.NetworkInfo mobile = connMgr\n                .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);\n\n        if (wifi.isAvailable() || mobile.isAvailable()) {\n            // Do something\n\n            Log.d(\"Network Available \", \"Flag No 1\");\n        }\n    }\n}\n</code></pre>\n\n<p>This is the manifest.xml</p>\n\n<pre><code>&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"com.example.broadcastreceiverforinternetconnection\"\n    android:versionCode=\"1\"\n    android:versionName=\"1.0\" &gt;\n\n    &lt;uses-sdk\n        android:minSdkVersion=\"8\"\n        android:targetSdkVersion=\"17\" /&gt;\n    &lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\"/&gt;\n\n    &lt;application\n        android:allowBackup=\"true\"\n        android:icon=\"@drawable/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:theme=\"@style/AppTheme\" &gt;\n        &lt;receiver android:name=\".NetworkChangeReceiver\" &gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.net.conn.CONNECTIVITY_CHANGE\" /&gt;\n                &lt;action android:name=\"android.net.wifi.WIFI_STATE_CHANGED\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n", "tags": ["java", "android", "broadcastreceiver", "android-wifi", "android-networking"], "title": "Broadcast receiver for checking internet connection in android app", "answers": [{"body": "<p><strong>Your first answer</strong>: your broadcast receiver called two times because </p>\n\n<p>You have added two <code>&lt;intent-filter&gt;</code> for listening to change in network connection </p>\n\n<p><code>&lt;action android:name=\"android.net.conn.CONNECTIVITY_CHANGE\" /&gt;</code></p>\n\n<p>Also for wifi state, change \n\"<code>&lt;action android:name=\"android.net.wifi.WIFI_STATE_CHANGED\" /&gt;</code>\"</p>\n\n<p>so just use one\n <code>&lt;action android:name=\"android.net.conn.CONNECTIVITY_CHANGE\" /&gt;</code> your first problem will be solved. (instead of call receiver two times it called one time when connection change). For more detail see: <a href=\"http://stackoverflow.com/a/15546897/1168654\">http://stackoverflow.com/a/15546897/1168654</a></p>\n\n<p><strong>Your second answer</strong>: (you want receiver to call only one time if internet connection available.)</p>\n\n<p>Reference from <a href=\"http://stackoverflow.com/a/15546897/1168654\">http://stackoverflow.com/a/15546897/1168654</a> your code is perfect. you notify only when internet is available </p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>You can use this method to check your connectivity if you want just to check whether mobile is connected with the internet or not.</p>\n\n<pre><code>public boolean isOnline(Context context) {\n\n    ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n    NetworkInfo netInfo = cm.getActiveNetworkInfo();\n    //should check null because in airplane mode it will be null\n    return (netInfo != null &amp;&amp; netInfo.isConnected());\n\n}\n</code></pre>\n", "title": "Broadcast receiver for checking internet connection in android app", "tags": ["java", "android", "broadcastreceiver", "android-wifi", "android-networking"], "link": "http://stackoverflow.com/questions/15698790/broadcast-receiver-for-checking-internet-connection-in-android-app/15700728#15700728", "question_id": 15698790, "answer_id": 15700728}, {"body": "<pre><code>public static boolean isNetworkAvailable(Context context) {\n        boolean isMobile = false, isWifi = false;\n\n        NetworkInfo[] infoAvailableNetworks = getConnectivityManagerInstance(\n                context).getAllNetworkInfo();\n\n        if (infoAvailableNetworks != null) {\n            for (NetworkInfo network : infoAvailableNetworks) {\n\n                if (network.getType() == ConnectivityManager.TYPE_WIFI) {\n                    if (network.isConnected() &amp;&amp; network.isAvailable())\n                        isWifi = true;\n                }\n                if (network.getType() == ConnectivityManager.TYPE_MOBILE) {\n                    if (network.isConnected() &amp;&amp; network.isAvailable())\n                        isMobile = true;\n                }\n            }\n        }\n\n        return isMobile || isWifi;\n    }\n\n/* You can write such method somewhere in utility class and call it NetworkChangeReceiver like below */\npublic class NetworkChangedReceiver extends BroadcastReceiver \n{\n@Override\n    public void onReceive(Context context, Intent intent) {\n\n        if (isNetworkAvailable(context)) \n                {\n             Toast.makeText(context, \"Network Available Do operations\",Toast.LENGTH_LONG).show(); \n\n\n    }\n    }\n}\n</code></pre>\n\n<p>This above broadcast receiver will be called only when Network state change to connected and not on disconnected.</p>\n", "title": "Broadcast receiver for checking internet connection in android app", "tags": ["java", "android", "broadcastreceiver", "android-wifi", "android-networking"], "link": "http://stackoverflow.com/questions/15698790/broadcast-receiver-for-checking-internet-connection-in-android-app/20236314#20236314", "question_id": 15698790, "answer_id": 20236314}, {"body": "<p>Try with this </p>\n\n<pre><code>public class ConnectionBroadcastReceiver extends BroadcastReceiver {\n@Override\npublic void onReceive(Context context, Intent intent) {\n\n\n    if (&lt;Check internet connection available &gt;) { \n        Toast.makeText(context, \"connect to the internet\", Toast.LENGTH_LONG).show();\n\n        /*upload background upload service*/\n        Intent serviceIntent = new Intent(context,&lt;your service class&gt;);\n        context.startService(serviceIntent);\n\n\n    }else{\n        Toast.makeText(context, \"Connection faild\", Toast.LENGTH_LONG).show();\n\n    }\n\n\n\n\n}\n}\n</code></pre>\n\n<p>This is the broadcast Receiver. soon as internet connection trigger  this will loaded</p>\n", "title": "Broadcast receiver for checking internet connection in android app", "tags": ["java", "android", "broadcastreceiver", "android-wifi", "android-networking"], "link": "http://stackoverflow.com/questions/15698790/broadcast-receiver-for-checking-internet-connection-in-android-app/26036628#26036628", "question_id": 15698790, "answer_id": 26036628}, {"body": "<pre><code>public class NetworkChangeReceiver extends BroadcastReceiver {\n\n@Override\npublic void onReceive(final Context context, final Intent intent) {\n\n if(checkInternet(context))\n {\n   Toast.makeText(context, \"Network Available Do operations\",Toast.LENGTH_LONG).show(); \n }\n\n}\n\n\nboolean checkInternet(Context context) {\n        ServiceManager serviceManager = new ServiceManager(context);\n        if (serviceManager.isNetworkAvailable()) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n}\n</code></pre>\n\n<p>ServiceManager.java</p>\n\n<pre><code>public class ServiceManager extends ContextWrapper {\n\npublic ServiceManager(Context base) {\n    super(base);\n}\n\npublic boolean isNetworkAvailable() {\n    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\n    NetworkInfo networkInfo = cm.getActiveNetworkInfo();\n    if (networkInfo != null &amp;&amp; networkInfo.isConnected()) {\n        return true;\n    }\n    return false;\n}\n\n}\n</code></pre>\n\n<p>permissions :</p>\n\n<pre><code> &lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n &lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n</code></pre>\n", "title": "Broadcast receiver for checking internet connection in android app", "tags": ["java", "android", "broadcastreceiver", "android-wifi", "android-networking"], "link": "http://stackoverflow.com/questions/15698790/broadcast-receiver-for-checking-internet-connection-in-android-app/26114247#26114247", "question_id": 15698790, "answer_id": 26114247}, {"body": "<p>Use this method to check the network state:</p>\n\n<pre><code>private void checkInternetConnection() {\n\n    if (br == null) {\n\n        br = new BroadcastReceiver() {\n\n            @Override\n            public void onReceive(Context context, Intent intent) {\n\n                Bundle extras = intent.getExtras();\n\n                NetworkInfo info = (NetworkInfo) extras\n                        .getParcelable(\"networkInfo\");\n\n                State state = info.getState();\n                Log.d(\"TEST Internet\", info.toString() + \" \"\n                        + state.toString());\n\n                if (state == State.CONNECTED) {\n                      Toast.makeText(getApplicationContext(), \"Internet connection is on\", Toast.LENGTH_LONG).show();\n\n                } else {\n                       Toast.makeText(getApplicationContext(), \"Internet connection is Off\", Toast.LENGTH_LONG).show();\n                }\n\n            }\n        };\n\n        final IntentFilter intentFilter = new IntentFilter();\n        intentFilter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);\n        registerReceiver((BroadcastReceiver) br, intentFilter);\n    }\n}\n</code></pre>\n\n<p>remember to unregister service in onDestroy.</p>\n\n<p>Cheers!!</p>\n", "title": "Broadcast receiver for checking internet connection in android app", "tags": ["java", "android", "broadcastreceiver", "android-wifi", "android-networking"], "link": "http://stackoverflow.com/questions/15698790/broadcast-receiver-for-checking-internet-connection-in-android-app/32390749#32390749", "question_id": 15698790, "answer_id": 32390749}, {"body": "<pre><code>public class AsyncCheckInternet extends AsyncTask&lt;String, Void, Boolean&gt; {\n\npublic static final int TIME_OUT = 10 * 1000;\n\nprivate OnCallBack listener;\n\npublic interface OnCallBack {\n\n    public void onBack(Boolean value);\n}\n\npublic AsyncCheckInternet(OnCallBack listener) {\n    this.listener = listener;\n}\n\n@Override\nprotected void onPreExecute() {\n}\n\n@Override\nprotected Boolean doInBackground(String... params) {\n\n    ConnectivityManager connectivityManager = (ConnectivityManager) General.context\n            .getSystemService(Context.CONNECTIVITY_SERVICE);\n\n    NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\n\n    if ((networkInfo != null &amp;&amp; networkInfo.isConnected())\n            &amp;&amp; ((networkInfo.getType() == ConnectivityManager.TYPE_WIFI) || (networkInfo\n                    .getType() == ConnectivityManager.TYPE_MOBILE))) {\n        HttpURLConnection urlc;\n        try {\n            urlc = (HttpURLConnection) (new URL(\"http://www.google.com\")\n                    .openConnection());\n            urlc.setConnectTimeout(TIME_OUT);\n            urlc.connect();\n            if (urlc.getResponseCode() == HttpURLConnection.HTTP_OK) {\n                return true;\n            } else {\n                return false;\n            }\n        } catch (MalformedURLException e) {\n            e.printStackTrace();\n            return false;\n\n        } catch (IOException e) {\n            e.printStackTrace();\n            return false;\n\n        }\n    } else {\n        return false;\n    }\n}\n\n@Override\nprotected void onPostExecute(Boolean result) {\n    if (listener != null) {\n        listener.onBack(result);\n    }\n}\n</code></pre>\n\n<p>}</p>\n", "title": "Broadcast receiver for checking internet connection in android app", "tags": ["java", "android", "broadcastreceiver", "android-wifi", "android-networking"], "link": "http://stackoverflow.com/questions/15698790/broadcast-receiver-for-checking-internet-connection-in-android-app/34450770#34450770", "question_id": 15698790, "answer_id": 34450770}, {"body": "<p>I know this thread is old and fully answered but I feel that the following might help some people.</p>\n\n<p>The code in the body of the question contains a bug which no one here addressed.\n@Nikhil is checking whether the wifi/mobile is available and not if it's connected.</p>\n\n<p>The fix is here:</p>\n\n<pre><code>@Override\npublic void onReceive(final Context context, final Intent intent) {\n    final ConnectivityManager connMgr = (ConnectivityManager) context\n            .getSystemService(Context.CONNECTIVITY_SERVICE);\n\n    final android.net.NetworkInfo wifi = connMgr\n            .getNetworkInfo(ConnectivityManager.TYPE_WIFI);\n\n    final android.net.NetworkInfo mobile = connMgr\n            .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);\n\n    if (wifi.isConnected() || mobile.isConnected()) {\n      // do stuff\n    }\n}\n</code></pre>\n", "title": "Broadcast receiver for checking internet connection in android app", "tags": ["java", "android", "broadcastreceiver", "android-wifi", "android-networking"], "link": "http://stackoverflow.com/questions/15698790/broadcast-receiver-for-checking-internet-connection-in-android-app/37654006#37654006", "question_id": 15698790, "answer_id": 37654006}, {"body": "<p>manifest:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;receiver android:name=\".your.namepackage.here.ConnectivityReceiver\"&gt;\n    &lt;intent-filter&gt;\n        &lt;action android:name=\"android.net.conn.CONNECTIVITY_CHANGE\"/&gt;\n    &lt;/intent-filter&gt;\n&lt;/receiver&gt;\n</code></pre>\n\n<p>class for receiver:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class ConnectivityReceiver extends BroadcastReceiver{\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        final String action = intent.getAction();\n        switch (action) {\n            case ConnectivityManager.CONNECTIVITY_ACTION:\n                DebugUtils.logDebug(\"BROADCAST\", \"network change\");\n                if(NetworkUtils.isConnect()){\n                    //do action here\n                }\n            break;\n        }\n    }\n}\n</code></pre>\n\n<p>and classs utils like example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class NetworkUtils {\n\n    public static boolean isConnect() {\n        ConnectivityManager connectivityManager = (ConnectivityManager) Application.getInstance().getSystemService(Context.CONNECTIVITY_SERVICE);\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n            Network[] netArray = connectivityManager.getAllNetworks();\n            NetworkInfo netInfo;\n            for (Network net : netArray) {\n                netInfo = connectivityManager.getNetworkInfo(net);\n                if ((netInfo.getTypeName().equalsIgnoreCase(\"WIFI\") || netInfo.getTypeName().equalsIgnoreCase(\"MOBILE\")) &amp;&amp; netInfo.isConnected() &amp;&amp; netInfo.isAvailable()) {\n                    //if (netInfo.getState().equals(NetworkInfo.State.CONNECTED)) {\n                    Log.d(\"Network\", \"NETWORKNAME: \" + netInfo.getTypeName());\n                    return true;\n                }\n            }\n        } else {\n            if (connectivityManager != null) {\n                @SuppressWarnings(\"deprecation\")\n                NetworkInfo[] netInfoArray = connectivityManager.getAllNetworkInfo();\n                if (netInfoArray != null) {\n                    for (NetworkInfo netInfo : netInfoArray) {\n                        if ((netInfo.getTypeName().equalsIgnoreCase(\"WIFI\") || netInfo.getTypeName().equalsIgnoreCase(\"MOBILE\")) &amp;&amp; netInfo.isConnected() &amp;&amp; netInfo.isAvailable()) {\n                            //if (netInfo.getState() == NetworkInfo.State.CONNECTED) {\n                            Log.d(\"Network\", \"NETWORKNAME: \" + netInfo.getTypeName());\n                            return true;\n                        }\n                    }\n                }\n            }\n        }\n        return false;\n    }\n}\n</code></pre>\n", "title": "Broadcast receiver for checking internet connection in android app", "tags": ["java", "android", "broadcastreceiver", "android-wifi", "android-networking"], "link": "http://stackoverflow.com/questions/15698790/broadcast-receiver-for-checking-internet-connection-in-android-app/38907643#38907643", "question_id": 15698790, "answer_id": 38907643}], "creation_date": 1364540075, "score": 109, "link": "http://stackoverflow.com/questions/15698790/broadcast-receiver-for-checking-internet-connection-in-android-app", "question_id": 15698790}, {"body": "<p>Java 8 introduces important new language features such as lambda expressions.</p>\n\n<p>Are these changes in the language accompanied by such significant changes in the compiled bytecode that would prevent it from being run on a Java 7 virtual machine without using some retrotranslator?</p>\n", "tags": ["java", "jvm", "compatibility", "java-7", "java-8"], "title": "Can Java 8 code be compiled to run on Java 7 jvm?", "answers": [{"body": "<p>As far as I know none of these changes in JDK 8 required the addition of new bytecodes. Part of the lambda instrumentation is being done using invokeDynamic (which already existe in JDK 7). So, from the JVM instruction set standpoint, nothing should make the codebase incompatible. There are, though, a lot of API associated and compiler improvements that would could make the code from JDK 8 difficult to compile/run under previous JDKs (but I have not tried this).</p>\n\n<p>Maybe the following reference material can help somehow to enrich the understanding of how the changes related to lambda are being instrumented.</p>\n\n<ul>\n<li><a href=\"http://medianetwork.oracle.com/video/player/1113272510001\">From Lambdas to Bytecode</a> </li>\n<li><a href=\"http://cr.openjdk.java.net/~briangoetz/lambda/lambda-translation.html\">Translations of Lambda Expressions</a></li>\n</ul>\n\n<p>These explain in detail how things are instrumented under hood. Perhaps you can find the answer to your questions there.</p>\n", "title": "Can Java 8 code be compiled to run on Java 7 jvm?", "tags": ["java", "jvm", "compatibility", "java-7", "java-8"], "link": "http://stackoverflow.com/questions/16143684/can-java-8-code-be-compiled-to-run-on-java-7-jvm/16281995#16281995", "question_id": 16143684, "answer_id": 16281995}, {"body": "<p>No, using 1.8 features in your source code requires you to target a 1.8 VM. I just tried the new Java 8 release and tried compiling with <code>-target 1.7 -source 1.8</code>, and the compiler refuses:</p>\n\n<pre><code>$ javac Test -source 1.8 -target 1.7\njavac: source release 1.8 requires target release 1.8\n</code></pre>\n", "title": "Can Java 8 code be compiled to run on Java 7 jvm?", "tags": ["java", "jvm", "compatibility", "java-7", "java-8"], "link": "http://stackoverflow.com/questions/16143684/can-java-8-code-be-compiled-to-run-on-java-7-jvm/22492421#22492421", "question_id": 16143684, "answer_id": 22492421}, {"body": "<p>If you are willing to use a \"retrotranslator\" try Esko Luontola's excellent Retrolambda: <a href=\"https://github.com/orfjackal/retrolambda\">https://github.com/orfjackal/retrolambda</a></p>\n", "title": "Can Java 8 code be compiled to run on Java 7 jvm?", "tags": ["java", "jvm", "compatibility", "java-7", "java-8"], "link": "http://stackoverflow.com/questions/16143684/can-java-8-code-be-compiled-to-run-on-java-7-jvm/23709813#23709813", "question_id": 16143684, "answer_id": 23709813}, {"body": "<p>Default methods require such changes to the bytecode and the JVM that they would have been impossible to do on Java 7. The bytecode verifier of Java 7 and below will reject interfaces with method bodies (except for the static initializer method). Trying to emulate default methods with static methods on the caller side would not produce the same results, because default methods can be overridden in subclasses. <a href=\"https://github.com/orfjackal/retrolambda\">Retrolambda</a> has limited support for backporting default methods, but it can never be fully backported because it truly requires new JVM features.</p>\n\n<p>Lambdas could run on Java 7 as-is, if the necessary API classes just would exist there. The invokedynamic instruction exists on Java 7, but it would have been possible to implement lambdas so that it generates the lambda classes at compile time (early JDK 8 builds did it that way) in which case it would work on any Java version. (Oracle decided to use invokedynamic for lambdas for future proofing; maybe one day JVM will have first-class functions, so then invokedynamic can be changed to use them instead of generating a class for every lambda, thus improving performance.) What Retrolambda does is that it processes all those invokedynamic instructions and replaces them with anonymous classes; the same as what Java 8 does at runtime when a lamdba invokedynamic is called the first time.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/tutorial/java/annotations/repeating.html\">Repeating Annotations</a> is just syntactic sugar. They are bytecode compatible with previous versions. In Java 7 you would just need to implement yourself the helper methods (e.g. <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/AnnotatedElement.html#getAnnotationsByType-java.lang.Class-\">getAnnotationsByType</a>) which hide the implementation detail of a container annotation which contains the repeated annotations.</p>\n\n<p>AFAIK, <a href=\"http://docs.oracle.com/javase/tutorial/java/annotations/type_annotations.html\">Type Annotations</a> only exist at compile time, so they should not require bytecode changes, so just changing the bytecode version number of the Java 8-compiled classes should be enough to make them work on Java 7.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/tutorial/reflect/member/methodparameterreflection.html\">Method parameter names</a> exist in the bytecode with Java 7, so that's also compatible. You can get access to them by reading the bytecode of the method and looking at the local variable names in the method's debug information. For example the Spring Framework does exactly that to implement <a href=\"http://docs.spring.io/spring-framework/docs/4.2.2.RELEASE/spring-framework-reference/html/mvc.html#mvc-ann-requestmapping-uri-templates\">@PathVariable</a>, so there is probably a library method which you could call. Because abstract interface methods don't have a method body, that debug information doesn't exist for interface methods in Java 7, and AFAIK neither on Java 8.</p>\n\n<p><a href=\"http://www.oracle.com/technetwork/java/javase/8-whats-new-2157071.html\">The other new features</a> are mostly new APIs, improvements to HotSpot and tooling. Some of the new APIs are available as 3rd party libraries (e.g. <a href=\"http://www.threeten.org/threetenbp/\">ThreeTen-Backport</a> and <a href=\"http://sourceforge.net/projects/streamsupport/\">streamsupport</a>).</p>\n\n<p>Summa summarum, default methods require new JVM features but the other language features don't. If you want to use them, you'll need to compile the code in Java 8 and then transform the bytecode with <a href=\"https://github.com/orfjackal/retrolambda\">Retrolambda</a> to Java 5/6/7 format. At minimum the bytecode version needs to be changed, and javac disallows <code>-source 1.8 -target 1.7</code> so a retrotranslator is required.</p>\n", "title": "Can Java 8 code be compiled to run on Java 7 jvm?", "tags": ["java", "jvm", "compatibility", "java-7", "java-8"], "link": "http://stackoverflow.com/questions/16143684/can-java-8-code-be-compiled-to-run-on-java-7-jvm/23757061#23757061", "question_id": 16143684, "answer_id": 23757061}, {"body": "<p>You can do <code>-source 1.7 -target 1.7</code> then it will compile. But it won't compile if you have java 8 specific features like lambdas</p>\n", "title": "Can Java 8 code be compiled to run on Java 7 jvm?", "tags": ["java", "jvm", "compatibility", "java-7", "java-8"], "link": "http://stackoverflow.com/questions/16143684/can-java-8-code-be-compiled-to-run-on-java-7-jvm/27581676#27581676", "question_id": 16143684, "answer_id": 27581676}], "creation_date": 1366622964, "score": 109, "link": "http://stackoverflow.com/questions/16143684/can-java-8-code-be-compiled-to-run-on-java-7-jvm", "question_id": 16143684}, {"body": "<p>It seems that there are two methods for templating with JSP. Including files with one of these statements </p>\n\n<pre><code>&lt;%@ include file=\"foo.html\" %&gt;\n&lt;jsp:include page=\"foo.html\" /&gt;\n</code></pre>\n\n<p>or using JSP tag files </p>\n\n<pre><code>// Save this as mytag.tag\n&lt;%@ tag description=\"Description\" pageEncoding=\"UTF-8\"%&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;jsp:doBody/&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>And in another JSP page call it with</p>\n\n<pre><code>&lt;%@ taglib prefix=\"t\" tagdir=\"/WEB-INF/tags\" %&gt;\n\n&lt;t:mytag&gt;\n    &lt;h1&gt;Hello World&lt;/h1&gt;\n&lt;/t:mytag&gt;\n</code></pre>\n\n<p>So which method should I use? Is one now considered deprecated or are they both valid and cover different use cases?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Isn't using this tag file the same as using an include?</p>\n\n<pre><code>// Save this as product.tag\n&lt;%@ tag description=\"Product templage\" pageEncoding=\"UTF-8\"%&gt;\n&lt;%@ tag import=\"com.myapp.Product\" %&gt;\n&lt;%@ attribute name=\"product\" required=\"true\" type=\"com.myapp.Product\"%&gt;\n\nProduct name: ${product.name} &lt;br/&gt;\nQuantity: ${product.quantity} &lt;br/&gt;\n</code></pre>\n\n<p>And call it on another JSP with</p>\n\n<pre><code>&lt;%@ taglib prefix=\"t\" tagdir=\"/WEB-INF/tags\" %&gt;\n\n&lt;t:product&gt;\n    &lt;c:forEach items=\"${cart.products}\" var=\"product\"&gt;\n        &lt;t:product product=\"${product}\"/&gt;\n    &lt;/c:forEach&gt;\n&lt;/t:product&gt;\n</code></pre>\n\n<p>That seems to me to be the very same as using an include and passing parameters to it. So are Tag Files the same as includes?</p>\n", "tags": ["java", "jsp", "include", "jsp-tags", "tagfile"], "title": "What&#39;s the difference between including files with JSP include directive, JSP include action and using JSP Tag Files?", "answers": [{"body": "<p><a href=\"http://stackoverflow.com/questions/7879906/what-is-the-difference-between-jspinclude-page-and-include-file\">Possible Duplicate Question</a></p>\n\n<p><code>&lt;@include&gt;</code> - The directive tag instructs the JSP compiler to merge contents of the included file into the JSP before creating the generated servlet code. It is the equivalent to cutting and pasting the text from your include page right into your JSP.</p>\n\n<ul>\n<li>Only one servlet is executed at run time.</li>\n<li>Scriptlet variables declared in the parent page can be accessed in the included page (remember, they are the same page).</li>\n<li>The included page does not need to able to be compiled as a standalone JSP. It can be a code fragment or plain text. The included page will never be compiled as a standalone. The included page can also have any extension, though .jspf has become a conventionally used extension.</li>\n<li>One drawback on older containers is that changes to the include pages may not take effect until the parent page is updated. Recent versions of Tomcat will check the include pages for updates and force a recompile of the parent if they're updated.</li>\n<li>A further drawback is that since the code is inlined directly into the service method of the generated servlet, the method can grow very large. If it exceeds 64 KB, your JSP compilation will likely fail.</li>\n</ul>\n\n<p><code>&lt;jsp:include&gt;</code> - The JSP Action tag on the other hand instructs the container to pause the execution of this page, go run the included page, and merge the output from that page into the output from this page.</p>\n\n<ul>\n<li>Each included page is executed as a separate servlet at run time.</li>\n<li>Pages can conditionally be included at run time. This is often useful for templating frameworks that build pages out of includes. The parent page can determine which page, if any, to include according to some run-time condition.</li>\n<li>The values of scriptlet variables need to be explicitly passed to the include page.</li>\n<li>The included page must be able to be run on its own.</li>\n<li>You are less likely to run into compilation errors due to the maximum method size being exceeded in the generated servlet class.</li>\n</ul>\n\n<blockquote>\n  <p>Depending on your needs, you may either use <code>&lt;@include&gt;</code> or\n  <code>&lt;jsp:include&gt;</code></p>\n</blockquote>\n", "title": "What&#39;s the difference between including files with JSP include directive, JSP include action and using JSP Tag Files?", "tags": ["java", "jsp", "include", "jsp-tags", "tagfile"], "link": "http://stackoverflow.com/questions/14580120/whats-the-difference-between-including-files-with-jsp-include-directive-jsp-in/14580718#14580718", "question_id": 14580120, "answer_id": 14580718}, {"body": "<p>Main advantage of <code>&lt;jsp:include /&gt;</code> over <code>&lt;%@ include &gt;</code> is:</p>\n\n<p><code>&lt;jsp:include /&gt;</code> allows to pass parameters</p>\n\n<pre><code>&lt;jsp:include page=\"inclusion.jsp\"&gt;\n    &lt;jsp:param name=\"menu\" value=\"objectValue\"/&gt;\n&lt;/jsp:include&gt;\n</code></pre>\n\n<p>which is not possible in <code>&lt;%@include file=\"somefile.jsp\" %&gt;</code></p>\n", "title": "What&#39;s the difference between including files with JSP include directive, JSP include action and using JSP Tag Files?", "tags": ["java", "jsp", "include", "jsp-tags", "tagfile"], "link": "http://stackoverflow.com/questions/14580120/whats-the-difference-between-including-files-with-jsp-include-directive-jsp-in/14760220#14760220", "question_id": 14580120, "answer_id": 14760220}, {"body": "<p>There are several mechanisms for reusing content in a JSP page.</p>\n\n<p>The following <strong>4 mechanisms to include content in JSP</strong> can be categorized as <strong>direct reuse</strong>:<br>\n(for the first 3 mechanisms quoting from <a href=\"http://rads.stackoverflow.com/amzn/click/0596516681\">\"Head First Servlets and JSP\"</a>)</p>\n\n<blockquote>\n  <h2>1) The include directive:</h2> \n\n<pre><code>&lt;%@ include file=\"header.html\" %&gt;\n</code></pre>\n  \n  <p><strong>Static</strong>: adds the content from the value of the file  attribute to the current page <strong>at translation time</strong>.   The directive was\n  originally intended for static layout templates, like HTML  headers.</p>\n  \n  <h2>2) The <code>&lt;jsp:include&gt;</code> standard action:</h2>\n\n<pre><code>&lt;jsp:include page=\"header.jsp\" /&gt;\n</code></pre>\n  \n  <p><strong>Dynamic</strong>: adds the content from the value of the  page attribute to the current page <strong>at request time</strong>. Was intended more for dynamic\n  content  coming from JSPs. <h2>3) The <code>&lt;c:import&gt;</code>\n  JSTL tag:</h2></p>\n\n<pre><code>&lt;c:import url=\u201dhttp://www.example.com/foo/bar.html\u201d /&gt;\n</code></pre>\n  \n  <p><strong>Dynamic</strong>: adds the content from the value of the  URL attribute to the current page, <strong>at request time</strong>.  It works a lot like\n  <code>&lt;jsp:include&gt;</code>, but it\u2019s more  powerful and flexible: unlike the\n  other two includes,  the <code>&lt;c:import&gt;</code> <strong>url can be from  outside the\n  web Container</strong>!</p>\n  \n  <h2>4) Preludes and codas:</h2>\n  \n  <p><strong>Static</strong>: preludes and codas <strong>can be applied only to the beginnings and ends of pages</strong>.<br>\n  You can implicitly include <em>preludes</em> (also called headers) and <em>codas</em>\n  (also called footers) for a group of JSP pages by adding\n  <code>&lt;include-prelude&gt;</code> and <code>&lt;include-coda&gt;</code> elements respectively within\n  a <code>&lt;jsp-property-group&gt;</code> element in the Web application <em>web.xml</em> deployment descriptor. Read more here:<br>\n  \u2022 <a href=\"https://docs.oracle.com/cd/E24329_01/web.1211/e21049/configurejsp.htm#WBAPP188\">Configuring Implicit Includes at the Beginning and End of JSPs</a><br>\n  \u2022 <a href=\"http://docs.oracle.com/javaee/5/tutorial/doc/bnajg.html#bnajl\">Defining implicit includes</a>  </p>\n</blockquote>\n\n<hr>\n\n<p><strong>Tag File</strong> is an <strong>indirect method</strong> of content reuse, the way of <strong>encapsulating reusable content</strong>. \nA <em>Tag File</em> is a source file that contains a fragment of JSP code that is reusable as a <strong>custom tag</strong>.  </p>\n\n<p>The PURPOSE of includes and Tag Files is different.</p>\n\n<p><a href=\"http://www.softwaresummit.com/2005/speakers/BergmanJSP2.0TagFiles.pdf\"><strong>Tag file</strong></a> (a concept introduced with JSP 2.0) is one of the options <strong>for creating custom tags</strong>.  It's a faster and easier way to build <em>custom tags</em>. \n<a href=\"http://docs.oracle.com/javaee/5/tutorial/doc/bnalj.html\"><strong>Custom tags</strong></a>, also known as tag extensions, are JSP elements that allow custom logic and output provided by other Java components to be inserted into JSP pages. The logic provided through a custom tag is implemented by a Java object known as a <em>tag handler</em>.   </p>\n\n<p>Some examples of tasks that can be performed by custom tags include operating on implicit objects, processing forms, accessing databases and other enterprise services such as email and directories, and implementing flow control. </p>\n\n<hr>\n\n<h3>Regarding your Edit</h3>\n\n<p>Maybe in your example (in your <em>Edit</em>), there is no difference between using direct include and a Tag File. But <strong>custom tags have a rich set of features</strong>. They can</p>\n\n<ul>\n<li><p>Be customized by means of attributes passed from the calling page.</p></li>\n<li><p>Pass variables back to the calling page.</p></li>\n<li><p>Access all the objects available to JSP pages.</p></li>\n<li><p>Communicate with each other. You can create and initialize a JavaBeans component, create a public EL variable that refers to that bean in one tag, and then use the bean in another tag.</p></li>\n<li><p>Be nested within one another and communicate by means of private variables.</p></li>\n</ul>\n\n<p>Also read this from \"Pro JSP 2\": <a href=\"http://books.google.ee/books?id=A3FuJXgx0RAC&amp;lpg=PA256&amp;ots=hqQMmIx_cH&amp;dq=usage%20of%20jsp%20tag%20files&amp;pg=PA252#v=onepage&amp;q=usage%20of%20jsp%20tag%20files&amp;f=false\">Understanding JSP Custom Tags</a>.</p>\n\n<hr>\n\n<h2>Useful reading.</h2>\n\n<ul>\n<li><p><a href=\"http://javarevisited.blogspot.com/2012/01/difference-between-page-include-and.html\"><strong>Difference between include directive and include action in\nJSP</strong></a></p></li>\n<li><p><a href=\"http://stackoverflow.com/a/3257426/814702\"><strong>JSP tricks to make templating\neasier</strong></a></p></li>\n<li><p>Very informative and easy to understand tutorial from <em>coreservlet.com</em> with beautiful\nexplanations that include <code>&lt;jsp:include&gt; VS. &lt;%@ include %&gt;</code>\ncomparison table:<br>\n<a href=\"http://www.java-programming.info/tutorial/pdf/csajsp2/12-File-Inclusion.pdf\"><strong>Including Files and Applets in JSP\nPages</strong></a></p></li>\n<li><p>Another nice tutorial from <em>coreservlets.com</em> related to tag libraries and\ntag files:<br>\n<a href=\"http://courses.coreservlets.com/Course-Materials/pdf/msajsp/07-Basic-Custom-Tags.pdf\"><strong>Creating Custom JSP Tag Libraries: The\nBasics</strong></a></p></li>\n<li><p>The official Java EE 5 Tutorial with examples:<br>\n<a href=\"http://docs.oracle.com/javaee/5/tutorial/doc/bnama.html\"><strong>Encapsulating Reusable Content\nUsing Tag\nFiles</strong></a>. </p></li>\n<li><p>This page from the official Java EE 5 tutorial should give you even\nmore understanding:<br>\n<a href=\"http://docs.oracle.com/javaee/5/tutorial/doc/bnajb.html\"><strong>Reusing Content in JSP\nPages</strong></a>.</p></li>\n<li><p>This excerpt from the book \"Pro JSP 2\" also discuses <strong>why do you need\na Tag File instead of using static include</strong>:<br>\n<a href=\"http://books.google.ee/books?id=A3FuJXgx0RAC&amp;lpg=PA256&amp;ots=hqQMmIx_cH&amp;dq=usage%20of%20jsp%20tag%20files&amp;pg=PA257#v=onepage&amp;q&amp;f=false\"><strong>Reusing Content with Tag\nFiles</strong></a></p></li>\n</ul>\n\n<hr>\n\n<h2>Conclusion</h2>\n\n<p><em>Use the right instruments for the concrete task.</em></p>\n\n<p><strong>Use <em>Tag Files</em></strong> as a quick and easy way of creating <em>custom tags</em>.  </p>\n\n<p>As for the including content in JSP (quote from <a href=\"http://sharat.wordpress.com/2006/08/28/10-what-is-the-difference-between-pagedirective-include-action-tag-include/\">here</a>):</p>\n\n<blockquote>\n  <ul>\n  <li><p><strong>Use the include directive</strong> if the file changes rarely. It\u2019s the fastest mechanism. If your container doesn\u2019t automatically detect\n  changes, you can force the changes to take effect by deleting the main\n  page class file.</p></li>\n  <li><p><strong>Use the include action</strong> only for content that changes often, and if which page to include cannot be decided until the main page is\n  requested.</p></li>\n  </ul>\n</blockquote>\n", "title": "What&#39;s the difference between including files with JSP include directive, JSP include action and using JSP Tag Files?", "tags": ["java", "jsp", "include", "jsp-tags", "tagfile"], "link": "http://stackoverflow.com/questions/14580120/whats-the-difference-between-including-files-with-jsp-include-directive-jsp-in/14763794#14763794", "question_id": 14580120, "answer_id": 14763794}, {"body": "<p>All three template options - <code>&lt;%@include&gt;</code>, <code>&lt;jsp:include&gt;</code> and <code>&lt;%@tag&gt;</code> are valid, and all three cover different use cases.</p>\n\n<p>With <code>&lt;@include&gt;</code>, the JSP parser in-lines the content of the included file into the JSP before compilation (similar to a C <code>#include</code>). You'd use this option with simple, static content: for example, if you wanted to include header, footer, or navigation elements into every page in your web-app. The included content becomes part of the compiled JSP and there's no extra cost at runtime.</p>\n\n<p><code>&lt;jsp:include&gt;</code> (and JSTL's <code>&lt;c:import&gt;</code>, which is similar and even more powerful) are best suited to dynamic content. Use these when you need to include content from another URL, local or remote; when the resource you're including is itself dynamic; or when the included content uses variables or bean definitions that conflict with the including page. <code>&lt;c:import&gt;</code> also allows you to store the included text in a variable, which you can further manipulate or reuse. Both these incur an additional runtime cost for the dispatch: this is minimal, but you need to be aware that the dynamic include is not \"free\".</p>\n\n<p>Use tag files when you want to create reusable user interface components. If you have a List of Widgets, say, and you want to iterate over the Widgets and display properties of each (in a table, or in a form), you'd create a tag. Tags can take arguments, using <code>&lt;%@tag attribute&gt;</code> and these arguments can be either mandatory or optional - somewhat like method parameters. </p>\n\n<p>Tag files are a simpler, JSP-based mechanism of writing tag libraries, which (pre JSP 2.0) you had to write using Java code. It's a lot cleaner to write JSP tag files when there's a lot of rendering to do in the tag: you don't need to mix Java and HTML code as you'd have to do if you wrote your tags in Java.</p>\n", "title": "What&#39;s the difference between including files with JSP include directive, JSP include action and using JSP Tag Files?", "tags": ["java", "jsp", "include", "jsp-tags", "tagfile"], "link": "http://stackoverflow.com/questions/14580120/whats-the-difference-between-including-files-with-jsp-include-directive-jsp-in/14767241#14767241", "question_id": 14580120, "answer_id": 14767241}, {"body": "<p><a href=\"http://javarevisited.blogspot.in/2012/01/difference-between-page-include-and.html\" rel=\"nofollow\">Java Revisited</a></p>\n\n<ol>\n<li>Resource included by include directive is loaded during jsp translation time, while resource included by include action is loaded during request time.</li>\n<li>Any change on included resource will not be visible in case of include directive until jsp file compiles again. While in case of include action, any change in included resource will be visible in next request.</li>\n<li>Include directive is static import, while include action is dynamic import</li>\n<li>Include directive uses file attribute to specify resource to be included while include action use page attribute for same purpose.</li>\n</ol>\n", "title": "What&#39;s the difference between including files with JSP include directive, JSP include action and using JSP Tag Files?", "tags": ["java", "jsp", "include", "jsp-tags", "tagfile"], "link": "http://stackoverflow.com/questions/14580120/whats-the-difference-between-including-files-with-jsp-include-directive-jsp-in/19443081#19443081", "question_id": 14580120, "answer_id": 19443081}], "creation_date": 1359453512, "score": 108, "link": "http://stackoverflow.com/questions/14580120/whats-the-difference-between-including-files-with-jsp-include-directive-jsp-in", "question_id": 14580120}, {"body": "<p>My code here detects if the <code>mimeType</code> is equals to some <a href=\"http://en.wikipedia.org/wiki/MIME\">MIME</a> type, if it is, it will do a certain conversion</p>\n\n<pre><code>public void convertToMp3(File src, File target,String mimeType){\n    if(mimeType.equals(\"audio/mpeg\")){\n        ...\n    }else if(mimeType.equals(\"audio/wav\")){\n        mp3ToWav();\n    }else if(mimeType.equals(\"audio/ogg\")){\n        ...\n    }else if(...){\n    ... //More if and else here\n}\n</code></pre>\n\n<p>I have shortened my code, because it has a lot of <em>else if</em> statements, What design pattern is suitable for removing many <em>if</em> and <em>else</em> or <em>else if</em> statements?</p>\n", "tags": ["java", "design-patterns", "design"], "title": "Converting many &#39;if else&#39; statements to a cleaner approach", "answers": [{"body": "<p>If you are using <code>JDK 7</code>, you can use <code>switch-case</code> construct:</p>\n\n<p>See: <a href=\"http://stackoverflow.com/questions/338206/switch-statement-with-strings-in-java\">Switch Statement with Strings in Java</a></p>\n\n<p>For prior versions, <code>if-else</code> is the only choice.</p>\n", "title": "Converting many &#39;if else&#39; statements to a cleaner approach", "tags": ["java", "design-patterns", "design"], "link": "http://stackoverflow.com/questions/14136721/converting-many-if-else-statements-to-a-cleaner-approach/14136783#14136783", "question_id": 14136721, "answer_id": 14136783}, {"body": "<p>If you run the <strong>same methods for each case</strong> you should check <a href=\"http://sourcemaking.com/design_patterns/state\">State pattern</a></p>\n", "title": "Converting many &#39;if else&#39; statements to a cleaner approach", "tags": ["java", "design-patterns", "design"], "link": "http://stackoverflow.com/questions/14136721/converting-many-if-else-statements-to-a-cleaner-approach/14136792#14136792", "question_id": 14136721, "answer_id": 14136792}, {"body": "<p>You could have a <code>Converter</code> interface. Then you could create a class for each Mimetype like:</p>\n\n<pre><code>public interface Converter {\n\n    public void convertToMp3();\n    public void convertToOgg();\n\n}\n\npublic class MpegConverter implements Converter {\n\n    public void convertToMp3() {\n        //Code here\n    }\n\n    public void convertToOgg() {\n        //Code here\n    }\n\n}\n</code></pre>\n\n<p>You would need a class like this for each converter. Then you could set up a map like this:</p>\n\n<pre><code>Map&lt;String, Converter&gt; mimeTypeMap = new HashMap&lt;String, Converter&gt;();\n\nmimeTypeMap.put(\"audio/mpeg\", new MpegConverter());\n</code></pre>\n\n<p>Then your <code>convertToMp3</code> method becomes like this:</p>\n\n<pre><code>Converter converter = mimeTypeMap.get(mimeType);\nconverter.convertToMp3();\n</code></pre>\n\n<p>Using this approach you could easily add different converters in the future.</p>\n\n<p>All untested, probably doesn't compile, but you get the idea</p>\n", "title": "Converting many &#39;if else&#39; statements to a cleaner approach", "tags": ["java", "design-patterns", "design"], "link": "http://stackoverflow.com/questions/14136721/converting-many-if-else-statements-to-a-cleaner-approach/14136840#14136840", "question_id": 14136721, "answer_id": 14136840}, {"body": "<p>If you use pre-JDK7, you may add an enum for all <a href=\"http://en.wikipedia.org/wiki/MIME\" rel=\"nofollow\">MIME</a> types:</p>\n\n<pre><code>  public static enum MimeTypes {\n      MP3, WAV, OGG\n  }\n\n  public class Stuff {\n      ...\n      switch (MimeTypes.valueOf(mimeType)) {\n          case MP3: handleMP3(); break;\n          case WAV: handleWAV(); break;\n          case OGG: handleOGG(); break;\n      }\n  }\n</code></pre>\n\n<p>And have a look at the Stack Overflow question <em><a href=\"http://stackoverflow.com/questions/604424/java-convert-string-to-enum\">Java - Convert String to enum</a></em> on how to convert Strings to enums.</p>\n", "title": "Converting many &#39;if else&#39; statements to a cleaner approach", "tags": ["java", "design-patterns", "design"], "link": "http://stackoverflow.com/questions/14136721/converting-many-if-else-statements-to-a-cleaner-approach/14137017#14137017", "question_id": 14136721, "answer_id": 14137017}, {"body": "<p>If you are not using Java 7 you could create an <code>enum</code> and use that value with a <code>switch</code> case. You then only need to pass the enum value (rather than a file, I don't why you are doing that). It would look neater too.</p>\n\n<p>These should help with what you want to do:</p>\n\n<pre><code> [Java Enum Examples][1] - \n [Java Switch Case examples][2]\n</code></pre>\n", "title": "Converting many &#39;if else&#39; statements to a cleaner approach", "tags": ["java", "design-patterns", "design"], "link": "http://stackoverflow.com/questions/14136721/converting-many-if-else-statements-to-a-cleaner-approach/14137024#14137024", "question_id": 14136721, "answer_id": 14137024}, {"body": "<p>Consider using the Strategy design pattern and a <code>Map</code> to dispatch to the appropriate strategy. Particularly useful if you you will need additional functionality, in addition to a conversion for a particular <code>mimeType</code>, or the convertors are large and complicated code and you would want to place each convertor in its own <code>.java</code> file.</p>\n\n<pre><code> interface Convertor {\n    void convert(File src, File target);\n }\n\n private static void convertWav(File src, File target) {\n    ...\n }\n\n ...\n\n private static final Map&lt; String, Convertor &gt; convertors = new ...;\n static {\n    convertors.put(\"audio/wav\", new Convertor {\n       void convert(File src, File target) {\n          convertWav(src, target);\n       }\n    });\n    convertors.put(\"audio/ogg\", new Convertor {\n       void convert(File src, File target) {\n          convertOgg(src, target);\n       }\n    });\n    ...\n }\n\n public void convertToMp3(File src, File target, String mimeType){\n     final Convertor convertor = convertors.get(mimeType);\n     if (convertor == null ) {\n        ...\n     } else {\n        convertor.convert(src, target);\n     }\n }\n</code></pre>\n", "title": "Converting many &#39;if else&#39; statements to a cleaner approach", "tags": ["java", "design-patterns", "design"], "link": "http://stackoverflow.com/questions/14136721/converting-many-if-else-statements-to-a-cleaner-approach/14216559#14216559", "question_id": 14136721, "answer_id": 14216559}, {"body": "<p>It's definitely a Strategy design pattern. But you have a big problem in your general design. It's not a good programming habit to use String to identify a type. Simply because it's easily editable and you can make a grammar mistake and spend all the afternoon looking for a programming mistake. You can avoid using map&lt;>.</p>\n\n<p>I suggest the following:</p>\n\n<ol>\n<li>Extend class File. The new class adds a new attribute FileType and a new method convertTo(FileType) to class File. This attribute holds its type: \u201caudio\u201d , \u201cwav\u201d... and again don't use String, Use Enum. In this case I called it FileType. Extend File as much as you want: WavFile, AudioFile...</li>\n<li>Use a Strategy dp to create your converters.</li>\n<li>Use a Factory dp to initialize the converters.</li>\n<li>Since every File knows its own type and the target type (use convertTo() method to specify the target type) it will call the factory to get the correct Converter automatically!!!</li>\n</ol>\n\n<p>This design is scalable and you can add as much as you need FileType and converters.\nThe answer you vote for is misleading!!!!\nThere is a big difference between coding and hacking.</p>\n", "title": "Converting many &#39;if else&#39; statements to a cleaner approach", "tags": ["java", "design-patterns", "design"], "link": "http://stackoverflow.com/questions/14136721/converting-many-if-else-statements-to-a-cleaner-approach/14247851#14247851", "question_id": 14136721, "answer_id": 14247851}], "creation_date": 1357207807, "score": 104, "link": "http://stackoverflow.com/questions/14136721/converting-many-if-else-statements-to-a-cleaner-approach", "question_id": 14136721}, {"body": "<p>Hi I have noted a difference in auto unboxing behavior between Java SE 6 and Java SE 7. I'm wondering why that is, because I can't find any documentation of changes in this behavior between these two versions. </p>\n\n<p>Here's a simple example:</p>\n\n<pre><code>Object[] objs = new Object[2];\nobjs[0] = new Integer(5);\nint myInt = (int)objs[0];\n</code></pre>\n\n<p>This compiles fine with javac from Java SE 7. However, if I give the compiler the \"-source 1.6\" argument I get an error on the last line:</p>\n\n<pre><code>inconvertible types\nfound   : java.lang.Object\nrequired: int\n</code></pre>\n\n<p>I tried downloading the Java SE 6 to compile with the native version 6 compiler (without any -source option). It agrees and gives the same error as above.</p>\n\n<p>So what gives? From some more experimentation it seems that the unboxing in Java 6 can only unbox values that clearly (at compile time) is of the boxed type. For instance, this works in both versions:</p>\n\n<pre><code>Integer[] objs = new Integer[2];\nobjs[0] = new Integer(5);\nint myInt = (int)objs[0];\n</code></pre>\n\n<p>So it seems that between Java 6 and 7, the unboxing feature was enhanced so that it could cast and unbox object types in one swoop, without knowing (at compile time) that the value is of the proper boxed type. However, reading through the Java Language Specification or blog postings that were written at the time Java 7 came out, I can't see any change of this thing, so I'm wondering what the change is and what this \"feature\" is called?</p>\n\n<p>Just a curiosity: Due the change, it is possible to trigger \"wrong\" unboxings:</p>\n\n<pre><code>Object[] objs = new Float[2];\nobjs[0] = new Float(5);\nint myInt = (int)objs[0];\n</code></pre>\n\n<p>This compiles fine but gives a ClassCastException at runtime.</p>\n\n<p>Hope someone can help me with a reference on this. Thank you in advance.</p>\n", "tags": ["java", "casting", "java-7", "unboxing"], "title": "Differences in auto-unboxing between Java 6 vs Java 7", "answers": [{"body": "<p>You are right; to put it more simply:</p>\n\n<pre><code>Object o = new Integer(1234);\nint x = (int) o;\n</code></pre>\n\n<p>This works in Java 7, but gives a compilation error in Java 6 and below. Strangely, this feature is not prominently documented; for example, it's not mentioned <a href=\"http://www.oracle.com/technetwork/java/javase/jdk7-relnotes-418459.html\" rel=\"nofollow\">here</a>. It's debatable if it's a new feature or a bug fix (or a new bug?), see some <a href=\"http://bugs.sun.com/view_bug.do?bug_id=6526446\" rel=\"nofollow\">related info and discussion</a>. The consensus seems to point to an <a href=\"http://mail.openjdk.java.net/pipermail/compiler-dev/2010-September/002330.html\" rel=\"nofollow\">ambiguity</a> in the original spec, which led to a slightly incorrect/inconsistent implementation on Java 5/6, which  was fixed in 7, because it was critical for implementation of JSR 292 (Dynamically Typed Languages).</p>\n\n<p>Java autoboxing has now some more traps and surprises. For example</p>\n\n<pre><code>Object obj = new Integer(1234);\nlong x = (long)obj;\n</code></pre>\n\n<p>will compile, but fail (with <code>ClassCastException</code>) at runtime. This, instead, will work:</p>\n\n<p><code>long x = (long)(int)obj;</code> </p>\n", "title": "Differences in auto-unboxing between Java 6 vs Java 7", "tags": ["java", "casting", "java-7", "unboxing"], "link": "http://stackoverflow.com/questions/16119638/differences-in-auto-unboxing-between-java-6-vs-java-7/16120495#16120495", "question_id": 16119638, "answer_id": 16120495}, {"body": "<p>It looks like the language in <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.5\">section 5.5 Casting Conversion of Java 7 JLS</a> was updated in comparison to <a href=\"http://docs.oracle.com/javase/specs/jls/se5.0/html/conversions.html#5.5\">the same section in the Java 5/6 JLS</a>, probably to clarify the allowed conversions.</p>\n\n<p>Java 7 JLS says</p>\n\n<blockquote>\n  <p>An expression of a reference type may undergo casting conversion to a primitive type without error, by unboxing conversion. </p>\n</blockquote>\n\n<p>Java 5/6:</p>\n\n<blockquote>\n  <p>A value of a reference type can be cast to a primitive type by unboxing conversion (\u00a75.1.8).</p>\n</blockquote>\n\n<p>The Java 7 JLS also contains a table (table 5.1) of allowed conversions (this table is not included in the Java 5/6 JLS) from reference types to primitives. This explicitly lists casts from Object to primitives as a narrowing reference conversion with unboxing.</p>\n\n<p>The reason is explained in <a href=\"http://mail.openjdk.java.net/pipermail/compiler-dev/2010-September/002330.html\">this email</a>:</p>\n\n<blockquote>\n  <p>Bottom line:  If the spec. allows (Object)(int) it must also be allowing (int)(Object).</p>\n</blockquote>\n", "title": "Differences in auto-unboxing between Java 6 vs Java 7", "tags": ["java", "casting", "java-7", "unboxing"], "link": "http://stackoverflow.com/questions/16119638/differences-in-auto-unboxing-between-java-6-vs-java-7/16120933#16120933", "question_id": 16119638, "answer_id": 16120933}], "creation_date": 1366456204, "score": 103, "link": "http://stackoverflow.com/questions/16119638/differences-in-auto-unboxing-between-java-6-vs-java-7", "question_id": 16119638}, {"body": "<p>I am trying to split the Value using a separator.\nBut I am finding the surprising results</p>\n\n<pre><code>String data = \"5|6|7||8|9||\";\nString[] split = data.split(\"\\\\|\");\nSystem.out.println(split.length);\n</code></pre>\n\n<p>I am expecting to get 8 values. <strong>[5,6,7,EMPTY,8,9,EMPTY,EMPTY]</strong>\nBut I am getting only 6 values.</p>\n\n<p>Any idea and how to fix. No matter EMPTY value comes at anyplace, it should be in array.</p>\n", "tags": ["java", "string", "split"], "title": "Java String split removed empty values", "answers": [{"body": "<p><code>split(delimiter)</code> by default removes trailing empty strings from result array. To turn this mechanism off we need to use overloaded version of <code>split(delimiter, limit)</code> with <code>limit</code> set to negative value like</p>\n\n<pre><code>String[] split = data.split(\"\\\\|\", -1);\n</code></pre>\n\n<p>Little more details:<br>\n<code>split(regex)</code> internally returns result of <code>split(regex, 0)</code> and in <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-int-\">documentation</a> of this method you can find (emphasis mine)</p>\n\n<blockquote>\n  <p>The <code>limit</code> parameter controls the number of times the pattern is applied and therefore affects the length of the resulting array. </p>\n  \n  <p>If the limit <code>n</code> is <em>greater than zero</em> then the pattern will be applied at most n - 1 times, the array's length will be no greater than n, and the array's last entry will contain all input beyond the last matched delimiter. </p>\n  \n  <p>If <code>n</code> is <strong>non-positive</strong> then the pattern will be applied as many times as possible and the array can have any length. </p>\n  \n  <p>If <code>n</code> is <strong>zero</strong> then the pattern will be applied as many times as possible, the array can have any length, and <strong>trailing empty strings will be discarded</strong>.</p>\n</blockquote>\n", "title": "Java String split removed empty values", "tags": ["java", "string", "split"], "link": "http://stackoverflow.com/questions/14602062/java-string-split-removed-empty-values/14602089#14602089", "question_id": 14602062, "answer_id": 14602089}, {"body": "<p>From <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29\" rel=\"nofollow\"><strong>String.split() API Doc</strong></a>:</p>\n\n<blockquote>\n  <p>Splits this string around matches of the given regular expression.\n  This method works as if by invoking the two-argument split method with\n  the given expression and a limit argument of zero. Trailing empty\n  strings are therefore not included in the resulting array.</p>\n</blockquote>\n\n<p>Overloaded <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29\" rel=\"nofollow\"><strong>String.split(regex, int)</strong></a> is more appropriate for your case.</p>\n", "title": "Java String split removed empty values", "tags": ["java", "string", "split"], "link": "http://stackoverflow.com/questions/14602062/java-string-split-removed-empty-values/14602092#14602092", "question_id": 14602062, "answer_id": 14602092}, {"body": "<p>From the documentation of <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29\"><code>String.split(String regex)</code></a>:</p>\n\n<blockquote>\n  <p>This method works as if by invoking the two-argument split method with the given expression and a limit argument of zero. <strong>Trailing empty strings are therefore not included in the resulting array.</strong> </p>\n</blockquote>\n\n<p>So you will have to use the two argument version <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29\"><code>String.split(String regex, int limit)</code></a> with a negative value:</p>\n\n<pre><code>String[] split = data.split(\"\\\\|\",-1);\n</code></pre>\n\n<p>Doc:</p>\n\n<blockquote>\n  <p>If the limit n is greater than zero then the pattern will be applied at most n - 1 times, the array's length will be no greater than n, and the array's last entry will contain all input beyond the last matched delimiter. <strong>If n is non-positive then the pattern will be applied as many times as possible and the array can have any length. If n is zero then the pattern will be applied as many times as possible, the array can have any length, and trailing empty strings will be discarded.</strong></p>\n</blockquote>\n\n<p>This will not leave out any empty elements, including the trailing ones.</p>\n", "title": "Java String split removed empty values", "tags": ["java", "string", "split"], "link": "http://stackoverflow.com/questions/14602062/java-string-split-removed-empty-values/14602155#14602155", "question_id": 14602062, "answer_id": 14602155}], "creation_date": 1359542591, "score": 101, "link": "http://stackoverflow.com/questions/14602062/java-string-split-removed-empty-values", "question_id": 14602062}, {"body": "<p>Is there any non-painful way to upgrade an Eclipse installation? I have tried browsing the eclipse site but I cannot find an useful description. </p>\n", "tags": ["java", "eclipse", "upgrade"], "title": "How to upgrade Eclipse for Java EE Developers?", "answers": [{"body": "<p>Add the update URL to your available sites:</p>\n\n<p><strong>Window > Preferences > Install/Update > Available Software Sites > Add...</strong></p>\n\n<blockquote>\n  <p><code>KEPLER = http://download.eclipse.org/releases/kepler/</code><br>\n  <code>LUNA   = http://download.eclipse.org/releases/luna/</code></p>\n</blockquote>\n\n<p>Then tell Eclipse to look for updates: <strong>Help > Check for updates</strong>. </p>\n\n<p>After the installation, Eclipse will restart and show the old splash screen. Next time you manually stop/start Eclipse it will correctly show the correct splash screen.</p>\n", "title": "How to upgrade Eclipse for Java EE Developers?", "tags": ["java", "eclipse", "upgrade"], "link": "http://stackoverflow.com/questions/17337526/how-to-upgrade-eclipse-for-java-ee-developers/17337667#17337667", "question_id": 17337526, "answer_id": 17337667}, {"body": "<p>If previous releases are anything to go by, then the answer is No.  It is best to download the new release, install it, install the latest versions your favourite plugins and point Eclipse at your workspace.</p>\n\n<p>(Common sense says that you should take a backup of your workspace(s) and your original Eclipse installation.)</p>\n\n<hr>\n\n<p>I've previously tried the \"upgrade\" path and found that it was slow and didn't give good results.</p>\n", "title": "How to upgrade Eclipse for Java EE Developers?", "tags": ["java", "eclipse", "upgrade"], "link": "http://stackoverflow.com/questions/17337526/how-to-upgrade-eclipse-for-java-ee-developers/17337692#17337692", "question_id": 17337526, "answer_id": 17337692}, {"body": "<p>You can simply download the newer version, then use \"File -> Import -> Install -> From Existing Installation\" to add all the plugins you had in your previous installation.</p>\n\n<p>Here's a link describing the whole process in details (it says \"on Mac Os X\", however it should work for other systems as well):</p>\n\n<p><a href=\"http://www.corephp.com/blog/how-to-upgrade-eclipse-juno-4-2-to-eclipse-kepler-4-3-on-mac-os-x/#.UfJsoI1_McY\">http://www.corephp.com/blog/how-to-upgrade-eclipse-juno-4-2-to-eclipse-kepler-4-3-on-mac-os-x/#.UfJsoI1_McY</a></p>\n", "title": "How to upgrade Eclipse for Java EE Developers?", "tags": ["java", "eclipse", "upgrade"], "link": "http://stackoverflow.com/questions/17337526/how-to-upgrade-eclipse-for-java-ee-developers/17881727#17881727", "question_id": 17337526, "answer_id": 17881727}], "creation_date": 1372319212, "score": 101, "link": "http://stackoverflow.com/questions/17337526/how-to-upgrade-eclipse-for-java-ee-developers", "question_id": 17337526}, {"body": "<p>In C, the integer(for 32 bit machine) is 32 bit and it ranges from -32768 to +32767.\nIn Java, the integer is also 32 bits but range is from -2,147,483,648 to 2,147,483,647</p>\n\n<p>I do not understand how the range is different in Java,even though the number of bits is the same. Can someone explain me?</p>\n", "tags": ["java", "c", "integer", "max"], "title": "max value of integer", "answers": [{"body": "<p>The strict equivalent of the java <code>int</code> is <code>long int</code> in C.</p>\n\n<p>Edit:\nIf <code>int32_t</code> is defined, then it is the equivalent in terms of precision. <code>long int</code> guarantee the precision of the java <code>int</code>, because it is guarantee to be at least 32 bits in size.</p>\n", "title": "max value of integer", "tags": ["java", "c", "integer", "max"], "link": "http://stackoverflow.com/questions/15004944/max-value-of-integer/15005018#15005018", "question_id": 15004944, "answer_id": 15005018}, {"body": "<p>That's because in C - integer on 32 bit machine doesn't mean that 32 bits are used for storing it, it may be 16 bits as well. It depends on the machine (implementation-dependent).</p>\n", "title": "max value of integer", "tags": ["java", "c", "integer", "max"], "link": "http://stackoverflow.com/questions/15004944/max-value-of-integer/15005043#15005043", "question_id": 15004944, "answer_id": 15005043}, {"body": "<p>In C range for __int32 is \u20132147483648 to 2147483647. <a href=\"http://msdn.microsoft.com/en-us/library/s3f49ktz.aspx\" rel=\"nofollow\">See here for full ranges.</a></p>\n\n<pre><code>unsigned short 0 to 65535\nsigned short \u201332768 to 32767\nunsigned long 0 to 4294967295\nsigned long \u20132147483648 to 2147483647\n</code></pre>\n\n<p>There are no guarantees that an 'int' will be 32 bits, if you want to use variables of a specific size, particularly when writing code that involves bit manipulations, you should use the 'Standard Integer Types'.</p>\n\n<p>In Java</p>\n\n<p>The int data type is a 32-bit signed two's complement integer. It has a minimum value of -2,147,483,648 and a maximum value of 2,147,483,647 (inclusive).</p>\n", "title": "max value of integer", "tags": ["java", "c", "integer", "max"], "link": "http://stackoverflow.com/questions/15004944/max-value-of-integer/15005054#15005054", "question_id": 15004944, "answer_id": 15005054}, {"body": "<p>A 32 bit integer ranges from -2,147,483,648 to 2,147,483,647. However the fact that you are on a 32-bit machine does not mean your <code>C</code> compiler uses 32-bit integers. </p>\n", "title": "max value of integer", "tags": ["java", "c", "integer", "max"], "link": "http://stackoverflow.com/questions/15004944/max-value-of-integer/15005073#15005073", "question_id": 15004944, "answer_id": 15005073}, {"body": "<blockquote>\n  <p>In C, the integer(for 32 bit machine) is 32 bit and it ranges from -32768 to +32767.</p>\n</blockquote>\n\n<p>Wrong. 32-bit signed integer in 2's complement representation has the range -2<sup>31</sup> to 2<sup>31</sup>-1 which is equal to  -2,147,483,648 to 2,147,483,647.</p>\n", "title": "max value of integer", "tags": ["java", "c", "integer", "max"], "link": "http://stackoverflow.com/questions/15004944/max-value-of-integer/15005086#15005086", "question_id": 15004944, "answer_id": 15005086}, {"body": "<p><strong>In <em>C</em>,</strong> the language itself does not determine the representation of certain datatypes. It can vary from machine to machine, on embedded systems the <code>int</code> can be 16 bit wide, though usually it is 32 bit. </p>\n\n<p>The only requirement is that <code>short int</code> &lt;= <code>int</code> &lt;= <code>long int</code> by size. Also, there is a recommendation that <strong><code>int</code> should represent the native capacity of the processor</strong>.</p>\n\n<p>All types are signed. The <code>unsigned</code> modifier allows you to use the highest bit as part of the value (otherwise it is reserved for the sign bit).</p>\n\n<p>Here's a short table of the possible values for the possible data types:</p>\n\n<pre><code>          width                     minimum                         maximum\nsigned    8 bit                        -128                            +127\nsigned   16 bit                     -32\u00a0768                         +32\u00a0767\nsigned   32 bit              -2\u00a0147\u00a0483\u00a0648                  +2\u00a0147\u00a0483\u00a0647\nsigned   64 bit  -9\u00a0223\u00a0372\u00a0036\u00a0854\u00a0775\u00a0808      +9\u00a0223\u00a0372\u00a0036\u00a0854\u00a0775\u00a0807\nunsigned  8 bit                           0                            +255\nunsigned 16 bit                           0                         +65 535\nunsigned 32 bit                           0                  +4 294 967 295\nunsigned 64 bit                           0     +18 446 744 073 709 551 615\n</code></pre>\n\n<p><strong>In <em>Java</em>,</strong> the <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2\">Java Language Specification</a> determines the representation of the certain data types.</p>\n\n<p>The order is: <code>byte</code> 8 bits, <code>short</code> 16 bits, <code>int</code> 32 bits, <code>long</code> 64 bits.</p>\n\n<pre><code>        width                     minimum                         maximum\nbyte:   8 bit                        -128                            +127\nshort: 16 bit                     -32\u00a0768                         +32\u00a0767\nint:   32 bit              -2\u00a0147\u00a0483\u00a0648                  +2\u00a0147\u00a0483\u00a0647\nlong:  64 bit  -9\u00a0223\u00a0372\u00a0036\u00a0854\u00a0775\u00a0808      +9\u00a0223\u00a0372\u00a0036\u00a0854\u00a0775\u00a0807\n</code></pre>\n\n<p>In Java, all types are <em>signed</em>, there are no unsigned versions. However, bit manipulations treat the numbers as they were unsigned (that is, handling all bits correctly).</p>\n", "title": "max value of integer", "tags": ["java", "c", "integer", "max"], "link": "http://stackoverflow.com/questions/15004944/max-value-of-integer/15005226#15005226", "question_id": 15004944, "answer_id": 15005226}, {"body": "<p>Actually the size in bits of the <code>int</code>, <code>short</code>, <code>long</code>  depends on the compiler implementation.</p>\n\n<p>E.g. on my Ubuntu 64 bit I have <code>short</code> in <code>32</code> bits, when on another one 32bit Ubuntu version it is <code>16</code> bit.</p>\n", "title": "max value of integer", "tags": ["java", "c", "integer", "max"], "link": "http://stackoverflow.com/questions/15004944/max-value-of-integer/15005254#15005254", "question_id": 15004944, "answer_id": 15005254}, {"body": "<p>The C language definition specifies <em>minimum</em> ranges for various data types.  For <code>int</code>, this minimum range is -32767 to 32767, meaning an <code>int</code> must be <em>at least</em> 16 bits wide.  An implementation is free to provide a wider <code>int</code> type with a correspondingly wider range.  For example, on the SLES 10 development server I work on, the range is -2147483647 to 2137483647.</p>\n\n<p>There are still some systems out there that use 16-bit <code>int</code> types (All The World Is <em>Not</em> A <strike>VAX</strike> x86), but there are plenty that use 32-bit <code>int</code> types, and maybe a few that use 64-bit.  </p>\n\n<p>The C language was designed to run on different architectures.  Java was designed to run in a virtual machine that hides those architectural differences.  </p>\n", "title": "max value of integer", "tags": ["java", "c", "integer", "max"], "link": "http://stackoverflow.com/questions/15004944/max-value-of-integer/15005534#15005534", "question_id": 15004944, "answer_id": 15005534}, {"body": "<p>The poster has their java types mixed up.\nin java, his C in is a short:\nshort (16 bit) = -32768 to 32767\nint (32 bit) = -2,147,483,648 to 2,147,483,647</p>\n\n<p><a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\">http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html</a></p>\n", "title": "max value of integer", "tags": ["java", "c", "integer", "max"], "link": "http://stackoverflow.com/questions/15004944/max-value-of-integer/18305427#18305427", "question_id": 15004944, "answer_id": 18305427}, {"body": "<p>in standard C, you can use INT_MAX as the maximum 'int' value, this constant must be defined in \"limits.h\". Similar constants are defined for other types (<a href=\"http://www.acm.uiuc.edu/webmonkeys/book/c_guide/2.5.html\" rel=\"nofollow\">http://www.acm.uiuc.edu/webmonkeys/book/c_guide/2.5.html</a>), as stated, these constant are implementation-dependent but have a minimum value according to the minimum bits for each type, as specified in the standard.</p>\n", "title": "max value of integer", "tags": ["java", "c", "integer", "max"], "link": "http://stackoverflow.com/questions/15004944/max-value-of-integer/21876306#21876306", "question_id": 15004944, "answer_id": 21876306}], "creation_date": 1361457461, "score": 100, "link": "http://stackoverflow.com/questions/15004944/max-value-of-integer", "question_id": 15004944}, {"body": "<p>In Java, I have just found out that the following code is legal:</p>\n\n<pre><code>KnockKnockServer newServer = new KnockKnockServer();                    \nKnockKnockServer.receiver receive = newServer.new receiver(clientSocket);\n</code></pre>\n\n<p>FYI, receiver is just a helper class with the following signature:</p>\n\n<pre><code>public class receiver extends Thread {  /* code_inside */  }\n</code></pre>\n\n<p>I've never seen the <code>XYZ.new</code> notation before. How does that work?  Is there any way to code that more conventionally?</p>\n", "tags": ["java"], "title": "What does `someObject.new` do in Java?", "answers": [{"body": "<p>It's the way to instantiate a non-static inner class from outside the containing class body, as described in the <a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html\">Oracle docs</a>. </p>\n\n<p>Every inner class instance is associated with an instance of its containing class. When you <code>new</code> an inner class from <em>within</em> its containing class it uses the <code>this</code> instance of the container by default:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Foo {\n  int val;\n  public Foo(int v) { val = v; }\n\n  class Bar {\n    public void printVal() {\n      // this is the val belonging to our containing instance\n      System.out.println(val);\n    }\n  }\n\n  public Bar createBar() {\n    return new Bar(); // equivalent of this.new Bar()\n  }\n}\n</code></pre>\n\n<p>But if you want to create an instance of Bar outside Foo, or associate a new instance with a containing instance other than <code>this</code> then you have to use the prefix notation.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Foo f = new Foo(5);\nFoo.Bar b = f.new Bar();\nb.printVal(); // prints 5\n</code></pre>\n", "title": "What does `someObject.new` do in Java?", "tags": ["java"], "link": "http://stackoverflow.com/questions/15724676/what-does-someobject-new-do-in-java/15724685#15724685", "question_id": 15724676, "answer_id": 15724685}, {"body": "<p>Think of <code>new receiver</code> as a single token. Kind of like a function name with a space in it.</p>\n\n<p>Of course, the class <code>KnockKnockServer</code> does not literally have a function named <code>new receiver</code>, but I'm guessing the syntax is meant to suggest that. It's meant to look like you're calling a function that creates a new instance of <code>KnockKnockServer.receiver</code> using a particular instance of <code>KnockKnockServer</code> for any accesses to the enclosing class.</p>\n", "title": "What does `someObject.new` do in Java?", "tags": ["java"], "link": "http://stackoverflow.com/questions/15724676/what-does-someobject-new-do-in-java/15724848#15724848", "question_id": 15724676, "answer_id": 15724848}, {"body": "<p>Have a look at this example:</p>\n\n<pre><code>public class Test {\n\n    class TestInner{\n\n    }\n\n    public TestInner method(){\n        return new TestInner();\n    }\n\n    public static void main(String[] args) throws Exception{\n        Test t = new Test();\n        Test.TestInner ti = t.new TestInner();\n    }\n}\n</code></pre>\n\n<p>Using javap we can view instructions generated for this code</p>\n\n<p>Main method:</p>\n\n<pre><code>public static void main(java.lang.String[])   throws java.lang.Exception;\n  Code:\n   0:   new     #2; //class Test\n   3:   dup\n   4:   invokespecial   #3; //Method \"&lt;init&gt;\":()V\n   7:   astore_1\n   8:   new     #4; //class Test$TestInner\n   11:  dup\n   12:  aload_1\n   13:  dup\n   14:  invokevirtual   #5; //Method java/lang/Object.getClass:()Ljava/lang/Class;\n   17:  pop\n   18:  invokespecial   #6; //Method Test$TestInner.\"&lt;init&gt;\":(LTest;)V\n   21:  astore_2\n   22:  return\n}\n</code></pre>\n\n<p>Inner class constructor:</p>\n\n<pre><code>Test$TestInner(Test);\n  Code:\n   0:   aload_0\n   1:   aload_1\n   2:   putfield        #1; //Field this$0:LTest;\n   5:   aload_0\n   6:   invokespecial   #2; //Method java/lang/Object.\"&lt;init&gt;\":()V\n   9:   return\n\n}\n</code></pre>\n\n<p>Everything is simple - when invoking TestInner constructor, java passes Test instance as a first argument <strong>main:12</strong>. Not looking at that TestInner should have a no argument constructor. TestInner in its turn just saves reference to parent object, <strong>Test$TestInner:2</strong>. When you are invoking inner class constructor from an instance method, reference to parent object  is passes automatically, so you do not have to specify it. Actually its passes every time, but when invoking from outside it should be passed explicitly.</p>\n\n<p><code>t.new TestInner();</code> - is just a way to specify the first hidden argument to TestInner constructor, not a type</p>\n\n<p><em>method()</em> is equal to:</p>\n\n<pre><code>public TestInner method(){\n    return this.new TestInner();\n}\n</code></pre>\n\n<p><em>TestInner</em> is equal to:</p>\n\n<pre><code>class TestInner{\n    private Test this$0;\n\n    TestInner(Test parent){\n        this.this$0 = parent;\n    }\n}\n</code></pre>\n", "title": "What does `someObject.new` do in Java?", "tags": ["java"], "link": "http://stackoverflow.com/questions/15724676/what-does-someobject-new-do-in-java/15759892#15759892", "question_id": 15724676, "answer_id": 15759892}, {"body": "<p>When inner classes were added to Java in version 1.1 of the language they were originally defined as a transformation to 1.0 compatible code. If you look at an example of this transformation, I think it will make it a lot clearer how an inner class actually works.</p>\n\n<p>Consider the code from Ian Roberts' answer:</p>\n\n<pre><code>public class Foo {\n  int val;\n  public Foo(int v) { val = v; }\n\n  class Bar {\n    public void printVal() {\n      System.out.println(val);\n    }\n  }\n\n  public Bar createBar() {\n    return new Bar();\n  }\n}\n</code></pre>\n\n<p>When transformed to 1.0 compatible code, that inner class <code>Bar</code> would become something like this:</p>\n\n<pre><code>class Foo$Bar {\n  private Foo this$0;\n\n  Foo$Bar(Foo outerThis) {\n    this.this$0 = outerThis;\n  }\n\n  public void printVal() {\n    System.out.println(this$0.val);\n  }\n}\n</code></pre>\n\n<p>The inner class name is prefixed with the outer class name so as to make it unique. A hidden private <code>this$0</code> member is added that holds a copy of the outer <code>this</code>. And a hidden constructor is created to initialise that member.</p>\n\n<p>And if you look at the <code>createBar</code> method, it would be transformed into something like this:</p>\n\n<pre><code>public Foo$Bar createBar() {\n  return new Foo$Bar(this);\n}\n</code></pre>\n\n<p>So let's see what happens when you execute the following code.</p>\n\n<pre><code>Foo f = new Foo(5);\nFoo.Bar b = f.createBar();                               \nb.printVal();\n</code></pre>\n\n<p>First we instantiate an instance of <code>Foo</code> and intialise the <code>val</code> member to 5 (i.e. <code>f.val = 5</code>).</p>\n\n<p>Next we call <code>f.createBar()</code>, which instantiates an instance of <code>Foo$Bar</code> and initialises the <code>this$0</code> member to the value of <code>this</code> passed in from <code>createBar</code> (i.e. <code>b.this$0 = f</code>).</p>\n\n<p>Finally we call <code>b.printVal()</code> which tries to print <code>b.this$0.val</code> which is <code>f.val</code> which is 5.</p>\n\n<p>Now that was a regular instantiation of an inner class. Let's look at what happens when instantiating <code>Bar</code> from outside <code>Foo</code>.</p>\n\n<pre><code>Foo f = new Foo(5);\nFoo.Bar b = f.new Bar();\nb.printVal();\n</code></pre>\n\n<p>Applying our 1.0 transformation again, that second line would become something like this:</p>\n\n<pre><code>Foo$Bar b = new Foo$Bar(f);\n</code></pre>\n\n<p>This is almost identical to the <code>f.createBar()</code> call. Again we're instantiating an instance of <code>Foo$Bar</code> and initialising the <code>this$0</code> member to f. So again, <code>b.this$0 = f</code>.</p>\n\n<p>And again when you call <code>b.printVal()</code>, you are printing <code>b.thi$0.val</code> which is <code>f.val</code> which is 5.</p>\n\n<p>The key thing to remember is that the inner class has a hidden member holding a copy of <code>this</code> from the outer class. When you instantiate an inner class from within the outer class, it it implicitly initialised with the current value of <code>this</code>. When you instantiate the inner class from outside the outer class, you explicitly specify which instance of the outer class to use, via the prefix on the <code>new</code> keyword.</p>\n", "title": "What does `someObject.new` do in Java?", "tags": ["java"], "link": "http://stackoverflow.com/questions/15724676/what-does-someobject-new-do-in-java/17583201#17583201", "question_id": 15724676, "answer_id": 17583201}, {"body": "<p><strong>Shadowing</strong></p>\n\n<p>If a declaration of a type (such as a member variable or a parameter name) in a particular scope (such as an inner class or a method definition) has the same name as another declaration in the enclosing scope, then the declaration shadows the declaration of the enclosing scope. You cannot refer to a shadowed declaration by its name alone. The following example, ShadowTest, demonstrates this:</p>\n\n<pre><code>public class ShadowTest {\n\n    public int x = 0;\n\n    class FirstLevel {\n\n        public int x = 1;\n\n        void methodInFirstLevel(int x) {\n            System.out.println(\"x = \" + x);\n            System.out.println(\"this.x = \" + this.x);\n            System.out.println(\"ShadowTest.this.x = \" + ShadowTest.this.x);\n        }\n    }\n\n    public static void main(String... args) {\n        ShadowTest st = new ShadowTest();\n        ShadowTest.FirstLevel fl = st.new FirstLevel();\n        fl.methodInFirstLevel(23);\n    }\n}\n</code></pre>\n\n<p><strong>The following is the output of this example:</strong></p>\n\n<pre><code>x = 23\nthis.x = 1\nShadowTest.this.x = 0\n</code></pre>\n\n<p>This example defines three variables named x: The member variable of the class ShadowTest, the member variable of the inner class FirstLevel, and the parameter in the method methodInFirstLevel. The variable x defined as a parameter of the method methodInFirstLevel shadows the variable of the inner class FirstLevel. Consequently, when you use the variable x in the method methodInFirstLevel, it refers to the method parameter. To refer to the member variable of the inner class FirstLevel, use the keyword this to represent the enclosing scope:</p>\n\n<pre><code>System.out.println(\"this.x = \" + this.x);\n</code></pre>\n\n<p>Refer to member variables that enclose larger scopes by the class name to which they belong. For example, the following statement accesses the member variable of the class ShadowTest from the method methodInFirstLevel:</p>\n\n<pre><code>System.out.println(\"ShadowTest.this.x = \" + ShadowTest.this.x);\n</code></pre>\n\n<p><a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html\" rel=\"nofollow\">Refer to the docs</a></p>\n", "title": "What does `someObject.new` do in Java?", "tags": ["java"], "link": "http://stackoverflow.com/questions/15724676/what-does-someobject-new-do-in-java/17674675#17674675", "question_id": 15724676, "answer_id": 17674675}], "creation_date": 1364686290, "score": 100, "link": "http://stackoverflow.com/questions/15724676/what-does-someobject-new-do-in-java", "question_id": 15724676}, {"body": "<p>All I'm trying to do is download some JSON and deserialize it into an object. I haven't got as far as downloading the JSON yet.</p>\n\n<p>Almost every single HttpClient example I can find, including those on the apache site looks something like...</p>\n\n<pre><code>import org.apache.http.client.HttpClient;\nimport org.apache.http.impl.client.DefaultHttpClient;\n\npublic void blah() {\n    HttpClient client = new DefaultHttpClient();\n    ...\n}\n</code></pre>\n\n<p>However, Netbeans tells me that <code>DefaultHttpClient</code> is deprecated. I've tried googling for <code>DefaultHttpClient deprecated</code> and as many other variations as I can think of and can't find any useful results, so I'm obviously missing something.</p>\n\n<p>What is the correct Java7 way to download the contents of a webpage? Is there really no decent Http Client as part of the language? I find that hard to believe.</p>\n\n<p>My Maven dependency for this is...</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n    &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n    &lt;version&gt;LATEST&lt;/version&gt;\n    &lt;type&gt;jar&lt;/type&gt;\n&lt;/dependency&gt;\n</code></pre>\n", "tags": ["java", "migration", "apache-httpclient-4.x", "apache-commons-httpclient"], "title": "Deprecated Java HttpClient - How hard can it be?", "answers": [{"body": "<p>It got deprecated in version <code>4.3-alpha1</code> which you use because of the <code>LATEST</code> version specification. If you take a look at the javadoc of the class, it tells you what to use instead: <code>HttpClientBuilder</code>.</p>\n\n<p>In the latest stable version (<code>4.2.3</code>) the <code>DefaultHttpClient</code> is not deprecated yet.</p>\n", "title": "Deprecated Java HttpClient - How hard can it be?", "tags": ["java", "migration", "apache-httpclient-4.x", "apache-commons-httpclient"], "link": "http://stackoverflow.com/questions/15336477/deprecated-java-httpclient-how-hard-can-it-be/15336606#15336606", "question_id": 15336477, "answer_id": 15336606}, {"body": "<p>Use <a href=\"http://hc.apache.org/httpcomponents-client-dev/httpclient/apidocs/org/apache/http/impl/client/HttpClientBuilder.html\" rel=\"nofollow\">HttpClientBuilder</a> to build the <a href=\"http://hc.apache.org/httpcomponents-client-dev/httpclient/apidocs/org/apache/http/client/HttpClient.html\" rel=\"nofollow\">HttpClient</a> instead of using DefaultHttpClient</p>\n\n<p>ex:</p>\n\n<pre><code>MinimalHttpClient httpclient = new HttpClientBuilder().build();\n\n // Prepare a request object\n HttpGet httpget = new HttpGet(\"http://www.apache.org/\");\n</code></pre>\n", "title": "Deprecated Java HttpClient - How hard can it be?", "tags": ["java", "migration", "apache-httpclient-4.x", "apache-commons-httpclient"], "link": "http://stackoverflow.com/questions/15336477/deprecated-java-httpclient-how-hard-can-it-be/15336663#15336663", "question_id": 15336477, "answer_id": 15336663}, {"body": "<p>I would suggest using the below methodd if you are trying to read the json data only.</p>\n\n<pre><code>URL requestUrl=new URL(url);\nURLConnection con = requestUrl.openConnection();\nBufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));\nStringBuilder sb=new StringBuilder();\nint cp;\ntry {\n    while((cp=rd.read())!=-1){\n    sb.append((char)cp);\n  }\n catch(Exception e){\n }\n String json=sb.toString();\n</code></pre>\n", "title": "Deprecated Java HttpClient - How hard can it be?", "tags": ["java", "migration", "apache-httpclient-4.x", "apache-commons-httpclient"], "link": "http://stackoverflow.com/questions/15336477/deprecated-java-httpclient-how-hard-can-it-be/15336793#15336793", "question_id": 15336477, "answer_id": 15336793}, {"body": "<p>Relevant imports:</p>\n\n<pre><code>import org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClientBuilder;\nimport java.io.IOException;\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>HttpClient httpClient = HttpClientBuilder.create().build();\n</code></pre>\n\n<p>EDIT (after Jules' suggestion):</p>\n\n<p>As the <code>build()</code> method returns a <code>CloseableHttpClient</code> which <em>is-a</em> <code>AutoClosable</code>, you can place the declaration in a try-with-resources  statement (Java 7+):</p>\n\n<pre><code>try (CloseableHttpClient httpClient = HttpClientBuilder.create().build()) {\n\n    // use httpClient (no need to close it explicitly)\n\n} catch (IOException e) {\n\n    // handle\n\n}\n</code></pre>\n", "title": "Deprecated Java HttpClient - How hard can it be?", "tags": ["java", "migration", "apache-httpclient-4.x", "apache-commons-httpclient"], "link": "http://stackoverflow.com/questions/15336477/deprecated-java-httpclient-how-hard-can-it-be/15336796#15336796", "question_id": 15336477, "answer_id": 15336796}, {"body": "<p>For the original issue, I would request you to apply below logic:</p>\n\n<pre><code> CloseableHttpClient httpClient = HttpClientBuilder.create().build();\n HttpPost httpPostRequest = new HttpPost();\n</code></pre>\n", "title": "Deprecated Java HttpClient - How hard can it be?", "tags": ["java", "migration", "apache-httpclient-4.x", "apache-commons-httpclient"], "link": "http://stackoverflow.com/questions/15336477/deprecated-java-httpclient-how-hard-can-it-be/23219857#23219857", "question_id": 15336477, "answer_id": 23219857}, {"body": "<p>Try <a href=\"http://http.jcabi.com\" rel=\"nofollow\"><code>jcabi-http</code></a>, which is a fluent Java HTTP client, for example:</p>\n\n<pre><code>String html = new JdkRequest(\"https://www.google.com\")\n  .header(HttpHeaders.ACCEPT, MediaType.TEXT_HTML)\n  .fetch()\n  .as(HttpResponse.class)\n  .assertStatus(HttpURLConnection.HTTP_OK)\n  .body();\n</code></pre>\n\n<p>Check also this blog post: <a href=\"http://www.yegor256.com/2014/04/11/jcabi-http-intro.html\" rel=\"nofollow\">http://www.yegor256.com/2014/04/11/jcabi-http-intro.html</a></p>\n", "title": "Deprecated Java HttpClient - How hard can it be?", "tags": ["java", "migration", "apache-httpclient-4.x", "apache-commons-httpclient"], "link": "http://stackoverflow.com/questions/15336477/deprecated-java-httpclient-how-hard-can-it-be/23398707#23398707", "question_id": 15336477, "answer_id": 23398707}, {"body": "<p>IMHO the accepted answer is correct but misses some 'teaching' as it does not explain how to come up with the answer.\nFor all deprecated classes look at the <a href=\"http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/client/DefaultHttpClient.html\"><strong>JavaDoc</strong></a> (if you do not have it either download it or <a href=\"http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/client/DefaultHttpClient.html\">go online</a>), it will hint at which class to use to replace the old code. Of course it will not tell you everything, but this is a start. Example:</p>\n\n<pre><code>...\n *\n * @deprecated (4.3) use {@link HttpClientBuilder}.  &lt;----- THE HINT IS HERE !\n */\n@ThreadSafe\n@Deprecated\npublic class DefaultHttpClient extends AbstractHttpClient {\n</code></pre>\n\n<p>Now you have the class to use, <code>HttpClientBuilder</code>, as there is no constructor to get a <strong>builder</strong> instance you may guess that there must be a static method instead. Once you have the builder you can also guess that as for most builders there is a <strong>build method</strong>, thus:</p>\n\n<pre><code>org.apache.http.impl.client.HttpClientBuilder.create().build();\n</code></pre>\n\n<p>As Jules hinted in the comments, the returned class implements <code>java.io.Closable</code>, so if you use Java 7 or above you can now do:</p>\n\n<pre><code>    try (CloseableHttpClient httpClient = HttpClientBuilder.create().build()) {...}\n</code></pre>\n", "title": "Deprecated Java HttpClient - How hard can it be?", "tags": ["java", "migration", "apache-httpclient-4.x", "apache-commons-httpclient"], "link": "http://stackoverflow.com/questions/15336477/deprecated-java-httpclient-how-hard-can-it-be/27017861#27017861", "question_id": 15336477, "answer_id": 27017861}, {"body": "<p>This is the solution that I have applied to the problem that httpclient deprecated in this version of android 22</p>\n\n<pre><code> public static String getContenxtWeb(String urlS) {\n    String pagina = \"\", devuelve = \"\";\n    URL url;\n    try {\n        url = new URL(urlS);\n        HttpURLConnection conexion = (HttpURLConnection) url\n                .openConnection();\n        conexion.setRequestProperty(\"User-Agent\",\n                \"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)\");\n        if (conexion.getResponseCode() == HttpURLConnection.HTTP_OK) {\n            BufferedReader reader = new BufferedReader(\n                    new InputStreamReader(conexion.getInputStream()));\n            String linea = reader.readLine();\n            while (linea != null) {\n                pagina += linea;\n                linea = reader.readLine();\n            }\n            reader.close();\n\n            devuelve = pagina;\n        } else {\n            conexion.disconnect();\n            return null;\n        }\n        conexion.disconnect();\n        return devuelve;\n    } catch (Exception ex) {\n        return devuelve;\n    }\n}\n</code></pre>\n", "title": "Deprecated Java HttpClient - How hard can it be?", "tags": ["java", "migration", "apache-httpclient-4.x", "apache-commons-httpclient"], "link": "http://stackoverflow.com/questions/15336477/deprecated-java-httpclient-how-hard-can-it-be/32326524#32326524", "question_id": 15336477, "answer_id": 32326524}, {"body": "<p><strong>Examples from Apache</strong> (<a href=\"https://hc.apache.org/httpcomponents-client-4.5.x/examples.html\" rel=\"nofollow\">link</a>) use this:</p>\n\n<pre><code>HttpClient httpclient = HttpClients.createDefault();\n</code></pre>\n\n<p>The class <code>org.apache.http.impl.client.HttpClients</code> is there since version 4.3. The code for <code>HttpClients.createDefault()</code> is the same as the accepted answer in here.</p>\n", "title": "Deprecated Java HttpClient - How hard can it be?", "tags": ["java", "migration", "apache-httpclient-4.x", "apache-commons-httpclient"], "link": "http://stackoverflow.com/questions/15336477/deprecated-java-httpclient-how-hard-can-it-be/32364785#32364785", "question_id": 15336477, "answer_id": 32364785}], "creation_date": 1362998335, "score": 99, "link": "http://stackoverflow.com/questions/15336477/deprecated-java-httpclient-how-hard-can-it-be", "question_id": 15336477}, {"body": "<p>Is there any way, using Mockito, to mock some methods in a class, but not others?</p>\n\n<p>For example, in this (admittedly contrived) Stock class I want to mock the getPrice() and getQuantity() return values (as shown in the test snippet below) but I want the getValue() to perform the multiplication as coded in the Stock class</p>\n\n<pre><code>public class Stock {\n  private final double price;\n  private final int quantity;\n\n  Stock(double price, int quantity) {\n    this.price = price;\n    this.quantity = quantity;\n  }\n\n  public double getPrice() {\n    return price;\n  }\n\n  public int getQuantity() {\n    return quantity;\n  }\n  public double getValue() {\n    return getPrice() * getQuantity();\n  }\n\n  @Test\n  public void getValueTest() {\n    Stock stock = mock(Stock.class);\n    when(stock.getPrice()).thenReturn(100.00);\n    when(stock.getQuantity()).thenReturn(200);\n    double value = stock.getValue();\n    // Unfortunately the following assert fails, because the mock Stock getValue() method does not perform the Stock.getValue() calculation code.\n    assertEquals(\"Stock value not correct\", 100.00*200, value, .00001);\n}\n</code></pre>\n", "tags": ["java", "mocking", "mockito"], "title": "Use Mockito to mock some methods but not others", "answers": [{"body": "<p>To directly answer your question, yes, you can mock some methods without mocking others. This is called a <strong>partial mock</strong>. See <a href=\"http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#16\" rel=\"nofollow\">the Mockito documentation on partial mocks</a> for more information.</p>\n\n<p>For you example, you can do something like the following, in your test:</p>\n\n<pre><code>Stock stock = mock(Stock.class);\nwhen(stock.getPrice()).thenReturn(100.00);    // Mock implementation\nwhen(stock.getQuantity()).thenReturn(200);    // Mock implementation\nwhen(stock.getValue()).thenCallRealMethod();  // Real implementation\n</code></pre>\n\n<p>In that case, each method implementation is mocked, unless specify <code>thenCallRealMethod()</code> in the <code>when(..)</code> clause.</p>\n\n<p>There is also a possibility the other way arround with <strong>spy</strong> instead of <strong>mock</strong>:</p>\n\n<pre><code>Stock stock = spy(Stock.class);\nwhen(stock.getPrice()).thenReturn(100.00);    // Mock implementation\nwhen(stock.getQuantity()).thenReturn(200);    // Mock implementation\n// All other method call will use the real implementations\n</code></pre>\n\n<p>In that case, all method implementation are the real one, except if you have defined a mocked behaviour with <code>when(..)</code>.</p>\n\n<p>There is one important pitfall when you use <code>when(Object)</code> with spy like in the previous example. The real method will be called (because <code>stock.getPrice()</code> is evaluated before <code>when(..)</code> at runtime). This can be a problem if your method contains logic that should not be called. You can write the previous example like this:</p>\n\n<pre><code>Stock stock = spy(Stock.class);\ndoReturn(100.00).when(stock).getPrice();    // Mock implementation\ndoReturn(200).when(stock).getQuantity();    // Mock implementation\n// All other method call will use the real implementations\n</code></pre>\n\n<hr>\n\n<p>However, with your example, I believe it will still fail, since the implementation of <code>getValue()</code> relies on <code>quantity</code> and <code>price</code>, rather than <code>getQuantity()</code> and <code>getPrice()</code>, which is what you've mocked.</p>\n\n<p>What it really seems like you want is just:</p>\n\n<pre><code>@Test\npublic void getValueTest() {\n    Stock stock = new Stock(100.00, 200);\n    double value = stock.getValue();\n    assertEquals(\"Stock value not correct\", 100.00*200, value, .00001);\n}\n</code></pre>\n", "title": "Use Mockito to mock some methods but not others", "tags": ["java", "mocking", "mockito"], "link": "http://stackoverflow.com/questions/14970516/use-mockito-to-mock-some-methods-but-not-others/14970545#14970545", "question_id": 14970516, "answer_id": 14970545}, {"body": "<p>Partial mocking of a class is also supported via <strong>Spy</strong> in mockito</p>\n\n<pre><code>List list = new LinkedList();\nList spy = spy(list);\n\n//optionally, you can stub out some methods:\nwhen(spy.size()).thenReturn(100);\n\n//using the spy calls real methods\nspy.add(\"one\");\nspy.add(\"two\");\n\n//size() method was stubbed - 100 is printed\nSystem.out.println(spy.size());\n</code></pre>\n\n<p>Check the docs available <a href=\"http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#16\">here</a> for detailed explanation</p>\n", "title": "Use Mockito to mock some methods but not others", "tags": ["java", "mocking", "mockito"], "link": "http://stackoverflow.com/questions/14970516/use-mockito-to-mock-some-methods-but-not-others/16729205#16729205", "question_id": 14970516, "answer_id": 16729205}, {"body": "<p>According to <a href=\"http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#16\">docs</a> :</p>\n\n<pre><code>Foo mock = mock(Foo.class, CALLS_REAL_METHODS);\n\n// this calls the real implementation of Foo.getSomething()\nvalue = mock.getSomething();\n\nwhen(mock.getSomething()).thenReturn(fakeValue);\n\n// now fakeValue is returned\nvalue = mock.getSomething();\n</code></pre>\n", "title": "Use Mockito to mock some methods but not others", "tags": ["java", "mocking", "mockito"], "link": "http://stackoverflow.com/questions/14970516/use-mockito-to-mock-some-methods-but-not-others/32332987#32332987", "question_id": 14970516, "answer_id": 32332987}, {"body": "<p>The accepted answer is not corret according to the question.</p>\n\n<p>The call to <code>Stock stock = mock(Stock.class);</code> calls <code>org.mockito.Mockito.mock(Class&lt;T&gt;)</code> which looks like this:</p>\n\n<pre><code> public static &lt;T&gt; T mock(Class&lt;T&gt; classToMock) {\n    return mock(classToMock, withSettings().defaultAnswer(RETURNS_DEFAULTS));\n}\n</code></pre>\n\n<p>The docs of the value <code>RETURNS_DEFAULTS</code> tell:</p>\n\n<pre><code>/**\n * The default &lt;code&gt;Answer&lt;/code&gt; of every mock &lt;b&gt;if&lt;/b&gt; the mock was not stubbed.\n * Typically it just returns some empty value. \n * &lt;p&gt;\n * {@link Answer} can be used to define the return values of unstubbed invocations. \n * &lt;p&gt;\n * This implementation first tries the global configuration. \n * If there is no global configuration then it uses {@link ReturnsEmptyValues} (returns zeros, empty collections, nulls, etc.)\n */\n</code></pre>\n\n<p>What you want is <code>org.mockito.Mockito.CALLS_REAL_METHODS</code> according to the docs:</p>\n\n<pre><code>/**\n * Optional &lt;code&gt;Answer&lt;/code&gt; to be used with {@link Mockito#mock(Class, Answer)}\n * &lt;p&gt;\n * {@link Answer} can be used to define the return values of unstubbed invocations.\n * &lt;p&gt;\n * This implementation can be helpful when working with legacy code.\n * When this implementation is used, unstubbed methods will delegate to the real implementation.\n * This is a way to create a partial mock object that calls real methods by default.\n * &lt;p&gt;\n * As usual you are going to read &lt;b&gt;the partial mock warning&lt;/b&gt;:\n * Object oriented programming is more less tackling complexity by dividing the complexity into separate, specific, SRPy objects.\n * How does partial mock fit into this paradigm? Well, it just doesn't... \n * Partial mock usually means that the complexity has been moved to a different method on the same object.\n * In most cases, this is not the way you want to design your application.\n * &lt;p&gt;\n * However, there are rare cases when partial mocks come handy: \n * dealing with code you cannot change easily (3rd party interfaces, interim refactoring of legacy code etc.)\n * However, I wouldn't use partial mocks for new, test-driven &amp; well-designed code.\n * &lt;p&gt;\n * Example:\n * &lt;pre class=\"code\"&gt;&lt;code class=\"java\"&gt;\n * Foo mock = mock(Foo.class, CALLS_REAL_METHODS);\n *\n * // this calls the real implementation of Foo.getSomething()\n * value = mock.getSomething();\n *\n * when(mock.getSomething()).thenReturn(fakeValue);\n *\n * // now fakeValue is returned\n * value = mock.getSomething();\n * &lt;/code&gt;&lt;/pre&gt;\n */\n</code></pre>\n\n<p>Thus your code should look like:</p>\n\n<pre><code>import org.junit.Test;\nimport static org.mockito.Mockito.*;\nimport static org.junit.Assert.*;\n\npublic class StockTest {\n\n    public class Stock {\n        private final double price;\n        private final int quantity;\n\n        Stock(double price, int quantity) {\n            this.price = price;\n            this.quantity = quantity;\n        }\n\n        public double getPrice() {\n            return price;\n        }\n\n        public int getQuantity() {\n            return quantity;\n        }\n\n        public double getValue() {\n            return getPrice() * getQuantity();\n        }\n    }\n\n    @Test\n    public void getValueTest() {\n        Stock stock = mock(Stock.class, withSettings().defaultAnswer(CALLS_REAL_METHODS));\n        when(stock.getPrice()).thenReturn(100.00);\n        when(stock.getQuantity()).thenReturn(200);\n        double value = stock.getValue();\n\n        assertEquals(\"Stock value not correct\", 100.00 * 200, value, .00001);\n    }\n}\n</code></pre>\n", "title": "Use Mockito to mock some methods but not others", "tags": ["java", "mocking", "mockito"], "link": "http://stackoverflow.com/questions/14970516/use-mockito-to-mock-some-methods-but-not-others/35504565#35504565", "question_id": 14970516, "answer_id": 35504565}], "creation_date": 1361321948, "score": 99, "link": "http://stackoverflow.com/questions/14970516/use-mockito-to-mock-some-methods-but-not-others", "question_id": 14970516}, {"body": "<p>What are the \"best practices\" for creating (and releasing) millions of small objects?</p>\n\n<p>I am writing a chess program in Java and the search algorithm generates a single \"Move\" object for each possible move, and a nominal search can easily generate over a million move objects per second. The JVM GC has been able to handle the load on my development system, but I'm interested in exploring alternative approaches that would:</p>\n\n<ol>\n<li>Minimize the overhead of garbage collection, and </li>\n<li>reduce the peak memory footprint for lower-end systems.  </li>\n</ol>\n\n<p>A vast majority of the objects are very short-lived, but about 1% of the moves generated are persisted and returned as the persisted value, so any pooling or caching technique would have to provide the ability to exclude specific objects from being re-used. </p>\n\n<p>I don't expect fully-fleshed out example code, but I would appreciate suggestions for further reading/research, or open source examples of a similar nature.</p>\n", "tags": ["java", "garbage-collection"], "title": "Best practice for creating millions of small temporary objects", "answers": [{"body": "<p>Run the application with verbose garbage collection:</p>\n\n<pre><code>java -verbose:gc\n</code></pre>\n\n<p>And it will tell you when it collects. There would be two types of sweeps, a fast and a full sweep.</p>\n\n<pre><code>[GC 325407K-&gt;83000K(776768K), 0.2300771 secs]\n[GC 325816K-&gt;83372K(776768K), 0.2454258 secs]\n[Full GC 267628K-&gt;83769K(776768K), 1.8479984 secs]\n</code></pre>\n\n<p>The arrow is before and after size.</p>\n\n<p>As long as it is just doing GC and not a full GC you are home safe. The regular GC is a copy collector in the 'young generation', so objects that are no longer referenced are simply just forgotten about, which is exactly what you would want.</p>\n\n<p>Reading <em><a href=\"http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html\">Java SE 6 HotSpot Virtual Machine Garbage Collection Tuning</a></em> is probably helpful. </p>\n", "title": "Best practice for creating millions of small temporary objects", "tags": ["java", "garbage-collection"], "link": "http://stackoverflow.com/questions/16419233/best-practice-for-creating-millions-of-small-temporary-objects/16419804#16419804", "question_id": 16419233, "answer_id": 16419804}, {"body": "<p>Since version 6, the server mode of JVM employs an <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html#escapeAnalysis\">escape analysis</a> technique. Using it you can avoid GC all together.</p>\n", "title": "Best practice for creating millions of small temporary objects", "tags": ["java", "garbage-collection"], "link": "http://stackoverflow.com/questions/16419233/best-practice-for-creating-millions-of-small-temporary-objects/16420253#16420253", "question_id": 16419233, "answer_id": 16420253}, {"body": "<p>I've met a similar problem. First of all, try to reduce the size of the small objects. We introduced some default field values referencing them in each object instance.</p>\n\n<p>For example, MouseEvent has a reference to Point class. We cached Points and referenced them instead of creating new instances. The same for, for example, empty strings.</p>\n\n<p>Another source was multiple booleans which were replaced with one int and for each boolean we use just one byte of the int.</p>\n", "title": "Best practice for creating millions of small temporary objects", "tags": ["java", "garbage-collection"], "link": "http://stackoverflow.com/questions/16419233/best-practice-for-creating-millions-of-small-temporary-objects/16420980#16420980", "question_id": 16419233, "answer_id": 16420980}, {"body": "<p>Assuming you find GC is an issue (as others point out it might not be) you will be implementing your own memory management for you special case i.e. a class which suffers massive churn. Give object pooling a go, I've seen cases where it works quite well. Implementing object pools is a well trodden path so no need to re-visit here, look out for:</p>\n\n<ul>\n<li>multi-threading: using thread local pools might work for your case</li>\n<li>backing data structure: consider using ArrayDeque as it performs well on remove and has no allocation overhead</li>\n<li>limit the size of your pool :)</li>\n</ul>\n\n<p>Measure before/after etc,etc</p>\n", "title": "Best practice for creating millions of small temporary objects", "tags": ["java", "garbage-collection"], "link": "http://stackoverflow.com/questions/16419233/best-practice-for-creating-millions-of-small-temporary-objects/16428818#16428818", "question_id": 16419233, "answer_id": 16428818}, {"body": "<p>I dealt with this scenario with some XML processing code some time ago. I found myself creating millions of XML tag objects which were very small (usually just a string) and extremely short-lived (failure of an <a href=\"http://en.wikipedia.org/wiki/XPath\" rel=\"nofollow\">XPath</a> check meant no-match so discard).</p>\n\n<p>I did some serious testing and came to the conclusion that I could only achieve about a 7% improvement on speed using a list of discarded tags instead of making new ones. However, once implemented I found that the free queue needed a mechanism added to prune it if it got too big - this completely nullified my optimisation so I switched it to an option.</p>\n\n<p>In summary - probably not worth it - but I'm glad to see you are thinking about it, it shows you care.</p>\n", "title": "Best practice for creating millions of small temporary objects", "tags": ["java", "garbage-collection"], "link": "http://stackoverflow.com/questions/16419233/best-practice-for-creating-millions-of-small-temporary-objects/16429775#16429775", "question_id": 16419233, "answer_id": 16429775}, {"body": "<p>If you have just value objects (that is, no references to other objects) and really but I mean really tons and tons of them, you can use direct <code>ByteBuffers</code> with native byte ordering [the latter is important] and you need some few hundred lines of code to allocate/reuse + getter/setters. Getters look similar to <code>long getQuantity(int tupleIndex){return buffer.getLong(tupleInex+QUANTITY_OFFSSET);}</code> </p>\n\n<p>That would solve the GC problem almost entirely as long as you do allocate once only, that is, a huge chunk and then manage the objects yourself. Instead of references you'd have only index (that is, <code>int</code>) into the <code>ByteBuffer</code> that has to be passed along. You may need to do the memory align yourself as well.</p>\n\n<p>The technique would feel like using <code>C and void*</code>, but with some wrapping it's bearable. A performance downside could be bounds checking if the compiler fails to eliminate it. A major upside is the locality if you process the tuples like vectors, the lack of the object header reduces the memory footprint as well.</p>\n\n<p>Other than that, it's likely you'd not need such an approach as the young generation of virtually all JVM dies trivially and the allocation cost is just a pointer bump. Allocation cost can be a bit higher if you use <code>final</code> fields as they require memory fence on some platforms (namely ARM/Power), on x86 it is free, though.</p>\n", "title": "Best practice for creating millions of small temporary objects", "tags": ["java", "garbage-collection"], "link": "http://stackoverflow.com/questions/16419233/best-practice-for-creating-millions-of-small-temporary-objects/16435451#16435451", "question_id": 16419233, "answer_id": 16435451}, {"body": "<p>Just create your millions of objects and write your code in the proper way: don't keep unnecessary references to these objects. GC will do the dirty job for you. You can play around with verbose GC as mentioned to see if they are really GC'd. Java IS about creating and releasing objects. :)</p>\n", "title": "Best practice for creating millions of small temporary objects", "tags": ["java", "garbage-collection"], "link": "http://stackoverflow.com/questions/16419233/best-practice-for-creating-millions-of-small-temporary-objects/16458859#16458859", "question_id": 16419233, "answer_id": 16458859}, {"body": "<p>One solution I've used for such search algorithms is to create just one Move object, mutate it with new move, and then undo the move before leaving the scope. You are probably analyzing just one move at a time, and then just storing the best move somewhere. </p>\n\n<p>If that's not feasible for some reason, and you want to decrease peak memory usage, a good article about memory efficiency is here: <a href=\"http://www.cs.virginia.edu/kim/publicity/pldi09tutorials/memory-efficient-java-tutorial.pdf\" rel=\"nofollow\">http://www.cs.virginia.edu/kim/publicity/pldi09tutorials/memory-efficient-java-tutorial.pdf</a></p>\n", "title": "Best practice for creating millions of small temporary objects", "tags": ["java", "garbage-collection"], "link": "http://stackoverflow.com/questions/16419233/best-practice-for-creating-millions-of-small-temporary-objects/16492437#16492437", "question_id": 16419233, "answer_id": 16492437}, {"body": "<p>I am not a big fan of GC, so I always try finding ways around it. In this case I would suggest using <a href=\"https://en.wikipedia.org/wiki/Object_pool_pattern\" rel=\"nofollow\">Object Pool pattern</a>:</p>\n\n<p>The idea is to avoid creating new objects by store them in a stack so you can reuse it later.</p>\n\n<pre><code>Class MyPool\n{\n   LinkedList&lt;Objects&gt; stack;\n\n   Object getObject(); // takes from stack, if it's empty creates new one\n   Object returnObject(); // adds to stack\n}\n</code></pre>\n", "title": "Best practice for creating millions of small temporary objects", "tags": ["java", "garbage-collection"], "link": "http://stackoverflow.com/questions/16419233/best-practice-for-creating-millions-of-small-temporary-objects/16508403#16508403", "question_id": 16419233, "answer_id": 16508403}, {"body": "<p>Well, there are several questions in one here !</p>\n\n<p><strong>1 - How are short-lived objects managed ?</strong></p>\n\n<p>As previously stated, the JVM can perfectly deal with a huge amount of short lived object, since it follows the <a href=\"http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#generations\">Weak Generational Hypothesis</a>.</p>\n\n<p>Note that we are speaking of objects that reached the main memory (heap). This is not always the case. A lot of objects you create does not even leave a CPU register. For instance, consider this for-loop</p>\n\n<pre><code>for(int i=0, i&lt;max, i++) {\n  // stuff that implies i\n}\n</code></pre>\n\n<p>Let's not think about loop unrolling (an optimisations that the JVM heavily performs on your code). If <code>max</code> is equal to <code>Integer.MAX_VALUE</code>, you loop might take some time to execute. However, the <code>i</code> variable will never escape the loop-block. Therefore the JVM will put that variable in a CPU register, regularly increment it but will never send it back to the main memory.</p>\n\n<p>So, creating millions of objects are not a big deal if they are used only locally. They will be dead before being stored in Eden, so the GC won't even notice them.</p>\n\n<p><strong>2 - Is it useful to reduce the overhead of the GC ?</strong></p>\n\n<p>As usual, it depends.</p>\n\n<p>First, you should enable GC logging to have a clear view about what is going on. You can enable it with <code>-Xloggc:gc.log -XX:+PrintGCDetails</code>.</p>\n\n<p>If your application is spending a lot of time in a GC cycle, then, yes, tune the GC, otherwise, it might not be really worth it.</p>\n\n<p>For instance, if you have a young GC every 100ms that takes 10ms, you spend 10% of your time in the GC, and you have 10 collections per second (which is huuuuuge). In such a case, I would not spend any time in GC tuning, since those 10 GC/s would still be there.</p>\n\n<p><strong>3 - Some experience</strong></p>\n\n<p>I had a similar problem on an application that was creating a huge amount of a given class. In the GC logs, I noticed that the creation rate of the application was around 3 GB/s, which is way too much (come on... 3 gigabytes of data every second ?!).</p>\n\n<p>The problem : Too many frequent GC caused by too many objects being created.</p>\n\n<p>In my case, I attached a memory profiler and noticed that a class represented a huge percentage of all my objects. I tracked down the instantiations to find out that this class was basically a pair of booleans wrapped in an object. In that case, two solutions were available :</p>\n\n<ul>\n<li><p>Rework the algorithm so that I do not return a pair of booleans but instead I have two methods that return each boolean separately</p></li>\n<li><p>Cache the objects, knowing that there were only 4 different instances</p></li>\n</ul>\n\n<p>I chose the second one, as it had the least impact on the application and was easy to introduce. It took me minutes to put a factory with a not-thread-safe cache (I did not need thread safety since I would eventually have only 4 different instances).</p>\n\n<p>The allocation rate went down to 1 GB/s, and so did the frequency of young GC (divided by 3).</p>\n\n<p>Hope that helps !</p>\n", "title": "Best practice for creating millions of small temporary objects", "tags": ["java", "garbage-collection"], "link": "http://stackoverflow.com/questions/16419233/best-practice-for-creating-millions-of-small-temporary-objects/16512439#16512439", "question_id": 16419233, "answer_id": 16512439}, {"body": "<p>Given that you are writing a chess program there are some special techniques you can use for decent performance. One simple approach is to create a large array of longs (or bytes) and treat it as a stack. Each time your move generator creates moves it pushes a couple of numbers onto the stack, e.g. move from square and move to square. As you evaluate the search tree you will be popping off moves and updating a board representation.</p>\n\n<p>If you want expressive power use objects. If you want speed (in this case) go native.</p>\n", "title": "Best practice for creating millions of small temporary objects", "tags": ["java", "garbage-collection"], "link": "http://stackoverflow.com/questions/16419233/best-practice-for-creating-millions-of-small-temporary-objects/16517708#16517708", "question_id": 16419233, "answer_id": 16517708}, {"body": "<p>I think you should read about stack allocation in Java and escape analysis. </p>\n\n<p>Because if you go deeper into this topic you may find that your objects are not even allocated on the heap, and they are not collected by GC the way that objects on the heap are. </p>\n\n<p>There is a wikipedia explanation of escape analysis, with example of how this works in Java:</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Escape_analysis\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Escape_analysis</a></p>\n", "title": "Best practice for creating millions of small temporary objects", "tags": ["java", "garbage-collection"], "link": "http://stackoverflow.com/questions/16419233/best-practice-for-creating-millions-of-small-temporary-objects/21489349#21489349", "question_id": 16419233, "answer_id": 21489349}], "creation_date": 1367930191, "score": 98, "link": "http://stackoverflow.com/questions/16419233/best-practice-for-creating-millions-of-small-temporary-objects", "question_id": 16419233}, {"body": "<p>In method or class scope, the line below compiles (with warning):</p>\n\n<pre><code>int x = x = 1;\n</code></pre>\n\n<p>In class scope, <strong>where variables get their default values</strong>, the following gives 'undefined reference' error:</p>\n\n<pre><code>int x = x + 1;\n</code></pre>\n\n<p>Isn't it the first <code>x = x = 1</code> should end up with same 'undefined reference' error? Or maybe the second line <code>int x = x + 1</code> should compile? Or there is something I am missing?</p>\n", "tags": ["java", "compiler-construction"], "title": "Why does this Java code compile?", "answers": [{"body": "<p>Your first piece of code contains a second <code>=</code> instead of a plus. This will compile anywhere while the second piece of code will not compile in either place.</p>\n", "title": "Why does this Java code compile?", "tags": ["java", "compiler-construction"], "link": "http://stackoverflow.com/questions/15807163/why-does-this-java-code-compile/15807227#15807227", "question_id": 15807163, "answer_id": 15807227}, {"body": "<p>In <code>int x = x + 1;</code> you add 1 to x , so what is the value of <code>x</code>, it's not created yet.</p>\n\n<p>But in <code>int x=x=1;</code> will compile with no error because you assign 1 to <code>x</code>.</p>\n", "title": "Why does this Java code compile?", "tags": ["java", "compiler-construction"], "link": "http://stackoverflow.com/questions/15807163/why-does-this-java-code-compile/15807259#15807259", "question_id": 15807163, "answer_id": 15807259}, {"body": "<p>In the second piece of code, x is used before its declaration, while in the the first piece of code it is just assigned twice which doesn't make sense but is valid.</p>\n", "title": "Why does this Java code compile?", "tags": ["java", "compiler-construction"], "link": "http://stackoverflow.com/questions/15807163/why-does-this-java-code-compile/15807271#15807271", "question_id": 15807163, "answer_id": 15807271}, {"body": "<p>It's roughly equivalent to:</p>\n\n<pre><code>int x;\nx = 1;\nx = 1;\n</code></pre>\n\n<p>Firstly, <code>int &lt;var&gt; = &lt;expression&gt;;</code> is always equivalent to</p>\n\n<pre><code>int &lt;var&gt;;\n&lt;var&gt; = &lt;expression&gt;;\n</code></pre>\n\n<p>In this case, your expression is <code>x = 1</code>, which is also a statement. <code>x = 1</code> is a valid statement, since the var <code>x</code> has already been declared. It is also an expression with the value 1, which is then assigned to <code>x</code> again.</p>\n", "title": "Why does this Java code compile?", "tags": ["java", "compiler-construction"], "link": "http://stackoverflow.com/questions/15807163/why-does-this-java-code-compile/15807288#15807288", "question_id": 15807163, "answer_id": 15807288}, {"body": "<p>The second one <code>int x=x=1</code> is compile because you are assigning the value to the x but in other case <code>int x=x+1</code> here the variable x is not initialized , Remember in java local variable are not initialized to default value.\nNote If it's (<code>int x=x+1</code>) in class scope also then also it will give compilation error as the variable is not created. </p>\n", "title": "Why does this Java code compile?", "tags": ["java", "compiler-construction"], "link": "http://stackoverflow.com/questions/15807163/why-does-this-java-code-compile/15807300#15807300", "question_id": 15807163, "answer_id": 15807300}, {"body": "<pre><code>int x = x + 1;\n</code></pre>\n\n<p>compiles successfully in Visual Studio 2008 with warning</p>\n\n<pre><code>warning C4700: uninitialized local variable 'x' used`\n</code></pre>\n", "title": "Why does this Java code compile?", "tags": ["java", "compiler-construction"], "link": "http://stackoverflow.com/questions/15807163/why-does-this-java-code-compile/15807340#15807340", "question_id": 15807163, "answer_id": 15807340}, {"body": "<pre><code>int x = x = 1;\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>int x = 1;\nx = x; //warning here\n</code></pre>\n\n<p>while in</p>\n\n<pre><code>int x = x + 1; \n</code></pre>\n\n<p>first we need to compute <code>x+1</code> but the value of x is not known so you get an error (the compiler knows that the value of x is not known)</p>\n", "title": "Why does this Java code compile?", "tags": ["java", "compiler-construction"], "link": "http://stackoverflow.com/questions/15807163/why-does-this-java-code-compile/15807401#15807401", "question_id": 15807163, "answer_id": 15807401}, {"body": "<p>x is not initialised in <code>x = x + 1</code>;. </p>\n\n<p><strong>The Java programming language is statically-typed, which means that all variables must first be declared before they can be used.</strong> </p>\n\n<p>See <a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"nofollow\">primitive data types</a></p>\n", "title": "Why does this Java code compile?", "tags": ["java", "compiler-construction"], "link": "http://stackoverflow.com/questions/15807163/why-does-this-java-code-compile/15807467#15807467", "question_id": 15807163, "answer_id": 15807467}, {"body": "<p>In java or in any modern language, assignment comes from the right.</p>\n\n<p>Suppose if you are having two variables x and y,</p>\n\n<pre><code>int z = x = y = 5;\n</code></pre>\n\n<p>This statement is valid and this is how the compiler splits them.</p>\n\n<pre><code>y = 5;\nx = y;\nz = x; // which will be 5\n</code></pre>\n\n<p>But in your case</p>\n\n<pre><code>int x = x + 1;\n</code></pre>\n\n<p>The compiler gave an exception because, it splits like this.</p>\n\n<pre><code>x = 1; // oops, it isn't declared because assignment comes from the right.\n</code></pre>\n", "title": "Why does this Java code compile?", "tags": ["java", "compiler-construction"], "link": "http://stackoverflow.com/questions/15807163/why-does-this-java-code-compile/15807632#15807632", "question_id": 15807163, "answer_id": 15807632}, {"body": "<p>Let's break it down step by step, right associative</p>\n\n<pre><code>int x = x = 1\n</code></pre>\n\n<p><code>x = 1</code>, assign 1 to a variable x </p>\n\n<p><code>int x = x</code>, assign what x is to itself, as an int. Since x was previously assigned as 1, it retains 1, albeit in a redundant fashion.</p>\n\n<p>That compiles fine.</p>\n\n<pre><code>int x = x + 1\n</code></pre>\n\n<p><code>x + 1</code>, add one to a variable x. However, x being undefined this will cause a compile error. </p>\n\n<p><code>int x = x + 1</code>, thus this line compile errors as the right portion of the equals will not compile adding one to an unassigned variable</p>\n", "title": "Why does this Java code compile?", "tags": ["java", "compiler-construction"], "link": "http://stackoverflow.com/questions/15807163/why-does-this-java-code-compile/15815632#15815632", "question_id": 15807163, "answer_id": 15815632}, {"body": "<p><code>int x = x = 1;</code> is not equal to:</p>\n\n<pre><code>int x;\nx = 1;\nx = x;\n</code></pre>\n\n<p>javap helps us again, these are JVM instruction generated for this code:</p>\n\n<pre><code>0: iconst_1    //load constant to stack\n1: dup         //duplicate it\n2: istore_1    //set x to constant\n3: istore_1    //set x to constant\n</code></pre>\n\n<p>more like:</p>\n\n<pre><code>int x = 1;\nx = 1;\n</code></pre>\n\n<p>Here is no reason to throw undefined reference error. There is now usage of variable prior to it's initialization, so this code fully comply with specification. <strong>In fact there is no usage of variable at all</strong>, just assignments. And JIT compiler will go even further, it will eliminate such constructions. Saying honestly, I don't understand how this code is connected to JLS's specification of variable initialization and usage. No usage no problems. ;) </p>\n\n<p>Please correct if I'am wrong. I cant figure out why other answers, which refer to many JLS paragraphs collect so many pluses. These paragraphs has nothing in common with this case. Just two serial assignments and no more.</p>\n\n<p>If we write:</p>\n\n<pre><code>int b, c, d, e, f;\nint a = b = c = d = e = f = 5;\n</code></pre>\n\n<p>is equal to:</p>\n\n<pre><code>f = 5\ne = 5\nd = 5\nc = 5\nb = 5\na = 5\n</code></pre>\n\n<p>Right most expression is just assigned to variables one by one, without any recursion. We can mess variables any way we like :</p>\n\n<pre><code>a = b = c = f = e = d = a = a = a = a = a = e = f = 5;\n</code></pre>\n", "title": "Why does this Java code compile?", "tags": ["java", "compiler-construction"], "link": "http://stackoverflow.com/questions/15807163/why-does-this-java-code-compile/15817454#15817454", "question_id": 15807163, "answer_id": 15817454}, {"body": "<h2>tl;dr</h2>\n\n<p>For <em>fields</em>, <code>int b = b + 1</code> is illegal because <code>b</code> is an illegal forward reference to <code>b</code>. You can actually fix this by writing <code>int b = this.b + 1</code>, which compiles without complaints.</p>\n\n<p>For <em>local variables</em>, <code>int d = d + 1</code> is illegal because <code>d</code> is not initialized before use. This is <strong>not</strong> the case for fields, which are always default-initialized.</p>\n\n<p>You can see the difference by attempting to compile </p>\n\n<p><code>int x = (x = 1) + x;</code></p>\n\n<p>as a field declaration and as a local variable declaration. The former will fail, but the latter will succeed, because of the difference in semantics.</p>\n\n<h2>Introduction</h2>\n\n<p>First off, the rules for field and local variable initializers are very different. So this answer will tackle the rules in two parts.</p>\n\n<p>We'll use this test program throughout:</p>\n\n<pre><code>public class test {\n    int a = a = 1;\n    int b = b + 1;\n    public static void Main(String[] args) {\n        int c = c = 1;\n        int d = d + 1;\n    }\n}\n</code></pre>\n\n<p>The declaration of <code>b</code> is invalid and fails with an <code>illegal forward reference</code> error.<br>\nThe declaration of <code>d</code> is invalid and fails with an <code>variable d might not have been initialized</code> error.</p>\n\n<p>The fact that these errors are different should hint that the reasons for the errors are also different.</p>\n\n<h2>Fields</h2>\n\n<p>Field initializers in Java are governed by <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.2\">JLS \u00a78.3.2</a>, Initialization of Fields.</p>\n\n<p>The <em>scope</em> of a field is defined in <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.3\">JLS \u00a76.3</a>, Scope of a Declaration.</p>\n\n<p>Relevant rules are:</p>\n\n<ul>\n<li>The scope of a declaration of a member <code>m</code> declared in or inherited by a class type C (\u00a78.1.6) is the entire body of C, including any nested type declarations.</li>\n<li>Initialization expressions for instance variables may use the simple name of any static variable declared in or inherited by the class, even one whose declaration occurs textually later. </li>\n<li>Use of instance variables whose declarations appear textually after the use is sometimes restricted, even though these instance variables are in scope. See \u00a78.3.2.3 for the precise rules governing forward reference to instance variables. </li>\n</ul>\n\n<p>\u00a78.3.2.3 says:</p>\n\n<blockquote>\n  <p>The declaration of a member needs to appear textually before it is\n  used only if the member is an instance (respectively static) field of\n  a class or interface C and all of the following conditions hold:</p>\n  \n  <ul>\n  <li>The usage occurs in an instance (respectively static) variable initializer of C or in an instance (respectively static) initializer of C.</li>\n  <li>The usage is not on the left hand side of an assignment.</li>\n  <li>The usage is via a simple name.</li>\n  <li>C is the innermost class or interface enclosing the usage.</li>\n  </ul>\n</blockquote>\n\n<p>You can actually refer to fields before they have been declared, except in certain cases. These restrictions are intended to prevent code like</p>\n\n<pre><code>int j = i;\nint i = j;\n</code></pre>\n\n<p>from compiling. The Java spec says \"the restrictions above are designed to catch, at compile time, circular or otherwise malformed initializations.\"</p>\n\n<p>What do these rules actually boil down to?</p>\n\n<p>In short, the rules basically say that you <em>must</em> declare a field in advance of a reference to that field if (a) the reference is in an initializer, (b) the reference is not being assigned to, (c) the reference is a <em>simple name</em> (no qualifiers like <code>this.</code>) and (d) it is not being accessed from within an inner class. So, a forward reference that satisfies all four conditions is illegal, but a forward reference that fails on at least one condition is OK.</p>\n\n<p><code>int a = a = 1;</code> compiles because it violates (b): the reference <code>a</code> <em>is</em> being assigned to, so it's legal to refer to <code>a</code> in advance of <code>a</code>'s complete declaration.</p>\n\n<p><code>int b = this.b + 1</code> also compiles because it violates (c): the reference <code>this.b</code> is not a simple name (it's qualified with <code>this.</code>). This odd construct is still perfectly well-defined, because <code>this.b</code> has the value zero.</p>\n\n<p>So, basically, the restrictions on field references within initializers prevent <code>int a = a + 1</code> from being successfully compiled.</p>\n\n<p>Observe that the field declaration <code>int b = (b = 1) + b</code> will <em>fail</em> to compile, because the final <code>b</code> is still an illegal forward reference.</p>\n\n<h2>Local variables</h2>\n\n<p>Local variable declarations are governed by <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.4\">JLS \u00a714.4</a>, Local Variable Declaration Statements.</p>\n\n<p>The <em>scope</em> of a local variable is defined in <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.3\">JLS \u00a76.3</a>, Scope of a Declaration:</p>\n\n<ul>\n<li>The scope of a local variable declaration in a block (\u00a714.4) is the rest of the block in which the declaration appears, starting with its own initializer and including any further declarators to the right in the local variable declaration statement. </li>\n</ul>\n\n<p>Note that initializers are within the scope of the variable being declared. So why doesn't <code>int d = d + 1;</code> compile?</p>\n\n<p>The reason is due to Java's rule on <strong>definite assignment</strong> (<a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-16.html\">JLS \u00a716</a>). Definite assignment basically says that every access to a local variable must have a preceding assignment to that variable, and the Java compiler checks loops and branches to ensure that assignment <em>always</em> occurs prior to any use (this is why definite assignment has an entire specification section dedicated to it). The basic rule is:</p>\n\n<ul>\n<li>For every access of a local variable or blank final field <code>x</code>, <code>x</code> must be definitely assigned before the access, or a compile-time error occurs. </li>\n</ul>\n\n<p>In <code>int d = d + 1;</code>, the access to <code>d</code> is resolved to the local variable fine, but since <code>d</code> has not been assigned before <code>d</code> is accessed, the compiler issues an error. In <code>int c = c = 1</code>, <code>c = 1</code> happens first, which assigns <code>c</code>, and then <code>c</code> is initialized to the result of that assignment (which is 1).</p>\n\n<p>Note that because of definite assignment rules, the local variable declaration <code>int d = (d = 1) + d;</code> <em>will</em> compile successfully (<em>unlike</em> the field declaration <code>int b = (b = 1) + b</code>), because <code>d</code> is definitely assigned by the time the final <code>d</code> is reached.</p>\n", "title": "Why does this Java code compile?", "tags": ["java", "compiler-construction"], "link": "http://stackoverflow.com/questions/15807163/why-does-this-java-code-compile/15820005#15820005", "question_id": 15807163, "answer_id": 15820005}, {"body": "<p>The line of code does not compile with a warning because of how the code actually works.\nWhen you run the code <code>int x = x = 1</code>, Java first creates the variable <code>x</code>, as defined. <strong>Then</strong> it runs the assignment code (<code>x = 1</code>). Since <code>x</code> is already defined, the system has no errors setting <code>x</code> to 1. This returns the value 1, because that is now the value of <code>x</code>. Therefor, <code>x</code> is now finally set as 1.<br>\nJava basically executes the code as if it was this:</p>\n\n<pre><code>int x;\nx = (x = 1); // (x = 1) returns 1 so there is no error\n</code></pre>\n\n<p>However, in your second piece of code, <code>int x = x + 1</code>, the <code>+ 1</code> statement requires <code>x</code> to be defined, which by then it is not. Since assignment statements always mean the code to the right of the <code>=</code> is run first, the code will fail because <code>x</code> is undefined. Java would run the code like this:</p>\n\n<pre><code>int x;\nx = x + 1; // this line causes the error because `x` is undefined\n</code></pre>\n", "title": "Why does this Java code compile?", "tags": ["java", "compiler-construction"], "link": "http://stackoverflow.com/questions/15807163/why-does-this-java-code-compile/15849452#15849452", "question_id": 15807163, "answer_id": 15849452}, {"body": "<p>Complier read statements from right to left and we designed to do the opposite. That's why it annoyed at first. Make this a habbit to read statements (code) from right to left you won't have such problem. </p>\n", "title": "Why does this Java code compile?", "tags": ["java", "compiler-construction"], "link": "http://stackoverflow.com/questions/15807163/why-does-this-java-code-compile/16363893#16363893", "question_id": 15807163, "answer_id": 16363893}], "creation_date": 1365067156, "score": 97, "link": "http://stackoverflow.com/questions/15807163/why-does-this-java-code-compile", "question_id": 15807163}, {"body": "<p>I know that Lucene and Solr are 2 differents <a href=\"http://lucene.apache.org/\">Apache projects</a> that are made to work together, but I don't understand what is the aim of each project.</p>\n\n<p>For what I understood untill now is that Lucene is used to create a search index and Solr use this index to perform searches.\nAm I right or is this a totally different approach?</p>\n", "tags": ["java", "solr", "lucene"], "title": "Difference between solr and lucene", "answers": [{"body": "<p>Lucene is a low level Java library (with ports to .NET, etc.) which implements indexing, analyzing, searching, etc.</p>\n\n<p>Solr is a standalone pre-configured product/webapp which uses Lucene. If you prefer dealing with HTTP API instead of Java API, Solr is for you. Solr has also got some extra features on top (e.g. <a href=\"http://wiki.apache.org/solr/FieldCollapsing\">grouping</a>).</p>\n", "title": "Difference between solr and lucene", "tags": ["java", "solr", "lucene"], "link": "http://stackoverflow.com/questions/15704644/difference-between-solr-and-lucene/15706440#15706440", "question_id": 15704644, "answer_id": 15706440}, {"body": "<p><strong><em>@darkheir: Lucene and Solr are 2 differents Apache projects that are made to work together, I don't understand what is the aim of each project.</em></strong></p>\n\n<p>1) Solr uses Lucene under the hood. Lucene has no clue about the Solr API.</p>\n\n<p>2) Lucene is a powerful search engine framework that lets us add search capability to our application. It exposes an easy-to-use API while hiding all the search-related complex operations. Any application can use this library, not just Solr.</p>\n\n<p>3) Solr is built around Lucene. It is not just an http-wrapper around Lucene but <a href=\"http://heliosearch.org/lucene-solr-history/\" rel=\"nofollow\">has been known to <strong>add more arsenal to Lucene</strong></a>. Solr is ready-to-use out of box. It is a web application that offers related infrastructure and a lot more features in addition to what Lucene offers.</p>\n\n<p><strong><em>@darkheir: Lucene is used to create a search index and Solr use this index to perform searches. Am I right or is this a totally different approach?</em></strong></p>\n\n<p>4) <strong>Lucene doesn't just create the Index for the consumption by Solr</strong>. Lucene handles all the search related operations. Any application can use the Lucene framework. </p>\n\n<p>Examples are Solr, Elastic Search, LinkedIn (yes, under the hood), etc..</p>\n\n<p>Check out this article: <a href=\"http://www.lucenetutorial.com/lucene-vs-solr.html\" rel=\"nofollow\">Lucene vs Solr</a></p>\n\n<p><strong>UPDATE (6/18/14)</strong></p>\n\n<p><strong>When to use Lucene?</strong></p>\n\n<ul>\n<li>You are a search engineer AND</li>\n<li>You are a programmer AND</li>\n<li>You want full control over almost all the internals of Lucene AND</li>\n<li>Your requirements demand you to do all sorts of geeky customization to Lucene AND</li>\n<li>You are willing to take care of infrastructure elements of your search like scaling, distribution, etc.</li>\n</ul>\n\n<p><strong>When to use Solr?</strong></p>\n\n<ul>\n<li>At least one of the above didn't make sense. OR</li>\n<li>You want something that is ready to use out-of-the-box (even without knowledge of Java) OR</li>\n<li>Your infrastructure requirements outweigh search customization requirements. </li>\n</ul>\n\n<p><strong>NOTE</strong>: \nI don't mean that Solr is hard to customize. Solr is very flexible and provides a lot of pluggable API points, allowing you to throw-in your code. </p>\n\n<p>There are people, falling under '<em>have to use Lucene</em>' camp, but still prefer Solr to plain Lucene as it's easy to use. However, they never restrain themselves from customizing Solr to the maximum extent. </p>\n\n<p>BTW, I see that there are more resources on Solr (4.x) than Lucene (4.x).</p>\n", "title": "Difference between solr and lucene", "tags": ["java", "solr", "lucene"], "link": "http://stackoverflow.com/questions/15704644/difference-between-solr-and-lucene/15706624#15706624", "question_id": 15704644, "answer_id": 15706624}, {"body": "<blockquote>\n  <p>A simple way to conceptualize the relationship between Solr and Lucene\n  is that of a car and its engine. You can't drive an engine, but you\n  can drive a car. Similarly, Lucene is a programmatic library which you\n  can't use as-is, whereas Solr is a complete application which you can\n  use out-of-box.</p>\n</blockquote>\n\n<p>Source: <a href=\"http://www.lucenetutorial.com/lucene-vs-solr.html\" rel=\"nofollow\">Lucene-vs-solr - Lucene Tutorial</a> </p>\n", "title": "Difference between solr and lucene", "tags": ["java", "solr", "lucene"], "link": "http://stackoverflow.com/questions/15704644/difference-between-solr-and-lucene/24286290#24286290", "question_id": 15704644, "answer_id": 24286290}, {"body": "<p>SOLR is a <strong>wrapper</strong> over Lucene index.</p>\n\n<p>It is simple to understand: \nSOLR is <strong>car</strong> and Lucene is its <strong>engine</strong>. You just need to know how to drive car (SOLR) and also need to know few things of engine (Lucene) in case if there will be any issue in your car engine.</p>\n\n<p>Have a safe drive :)</p>\n", "title": "Difference between solr and lucene", "tags": ["java", "solr", "lucene"], "link": "http://stackoverflow.com/questions/15704644/difference-between-solr-and-lucene/39144741#39144741", "question_id": 15704644, "answer_id": 39144741}], "creation_date": 1364565060, "score": 97, "link": "http://stackoverflow.com/questions/15704644/difference-between-solr-and-lucene", "question_id": 15704644}, {"body": "<p>I'm completely lost regarding the differences between the <code>initLoader</code> and the <code>restartLoader</code> functions of the <code>LoaderManager</code>:</p>\n\n<ul>\n<li>They both have the same signature. </li>\n<li><code>restartLoader</code> also creates a loader, if it does not exist (\"Starts a new or restarts an existing Loader in this manager\"). </li>\n</ul>\n\n<p>Is there some relation between the two methods? Does calling <code>restartLoader</code> always call <code>initLoader</code>? Can I call <code>restartLoader</code> without having to call <code>initLoader</code>? Is it save to call <code>initLoader</code> twice to refresh the data? When should I use one of the two and (important!) why?</p>\n", "tags": ["java", "android", "android-loadermanager"], "title": "Difference between `initLoader` and `restartLoader` in `LoaderManager`", "answers": [{"body": "<p>If the loader already exists, restartLoader will stop/cancel/destroy the old one, while initLoader will just initialize it with the given callback. I cannot find out what the old callbacks do in these cases, but I guess they will just be abandoned.</p>\n\n<p>I scanned through <a href=\"http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/app/LoaderManager.java\" rel=\"nofollow\">http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/app/LoaderManager.java</a> but I cannot find out what the exact difference is, apart from that the methods do different things. So I would say, use initLoader the first time and restart for the following times, though I cannot say with certainty what each of them will do exactly. </p>\n", "title": "Difference between `initLoader` and `restartLoader` in `LoaderManager`", "tags": ["java", "android", "android-loadermanager"], "link": "http://stackoverflow.com/questions/14445070/difference-between-initloader-and-restartloader-in-loadermanager/14445167#14445167", "question_id": 14445070, "answer_id": 14445167}, {"body": "<p>Init loader on first start uses loadInBackground() method, on second start it will be omitted. So, my opinion, the better solution is:</p>\n\n<pre><code>Loader&lt;?&gt; loa; \ntry {\n    loa = getLoaderManager().getLoader(0);\n} catch (Exception e) {\n    loa = null;\n}\nif (loa == null) {\n    getLoaderManager().initLoader(0, null, this);\n} else {\n    loa.forceLoad();\n}\n</code></pre>\n\n<p>///////////////////////////////////////////////////////////////////////////</p>\n\n<pre><code>protected SimpleCursorAdapter mAdapter;\n\nprivate abstract class SimpleCursorAdapterLoader \n    extends AsyncTaskLoader &lt;Cursor&gt; {\n\n    public SimpleCursorAdapterLoader(Context context) {\n        super(context);\n    }\n\n    @Override\n    protected void onStartLoading() {\n        if (takeContentChanged() || mAdapter.isEmpty()) {\n            forceLoad();\n        }\n    }\n\n    @Override\n    protected void onStopLoading() {\n        cancelLoad();\n    }\n\n    @Override\n    protected void onReset() {\n        super.onReset();\n        onStopLoading();\n    }\n}\n</code></pre>\n\n<p>I spent many time to find this solution -- restartLoader(...) didn't work properly in my case.\nThe only forceLoad() lets to finish previous loading thread without callback (so you will have all db transactions finished properly) and starts again new thread. Yes, it demands some extra time, but is more stable. Only the last started thread will take callback. Thus, if you want to make tests with interrupting your db transactions -- your welcome, try to restartLoader(...), otherwise forceLoad(). The only convenience of restartLoader(...) is to deliver new initial data, I mean parameters.\nAnd please don't forget to destroy loader in onDetach() method of the suitable Fragment in this case. Also keep in mind, that some times, when you have an activity and, let them say, 2 fragments with Loader each one inclusive activity -- you will reach only 2 Loader Managers, so Activity shares its LoaderManager with Fragment (s), that's shown on the screen first during loading. Try LoaderManager.enableDebugLogging(true); to see the details in each certain case.</p>\n", "title": "Difference between `initLoader` and `restartLoader` in `LoaderManager`", "tags": ["java", "android", "android-loadermanager"], "link": "http://stackoverflow.com/questions/14445070/difference-between-initloader-and-restartloader-in-loadermanager/15502072#15502072", "question_id": 14445070, "answer_id": 15502072}, {"body": "<p>I recently hit a problem with multiple loader managers and screen orientation changes and would like to say that after a lot of trial-and-error, the following pattern works for me in both Activities and Fragments:</p>\n\n<pre><code>onCreate: call initLoader(s)\n          set a one-shot flag\nonResume: call restartLoader (or later, as applicable) if the one-shot is not set.\n          unset the one-shot in either case.\n</code></pre>\n\n<p>(in other words, set some flag so that <em>initLoader</em> is <strong>always</strong> run once &amp; that restartLoader is run on the <strong>2nd &amp; subsequent</strong> passes through <em>onResume</em>)</p>\n\n<p>Also, remember to assign different ids for each of your loaders within an Activity\n(which can be a bit of an issue with fragments within that activity if you're not careful with your numbering)</p>\n\n<hr>\n\n<p>I tried using <em>initLoader</em> only .... didn't seem to work effectively.</p>\n\n<p>Tried <em>initLoader</em> on <em>onCreate</em> with null args (docs say this is ok) &amp; <em>restartLoader</em> (with valid args) in <em>onResume</em> ....docs are wrong &amp; <em>initLoader</em> throws a nullpointer exception.</p>\n\n<p>Tried <em>restartLoader</em> only ... works for a while but blows on 5th or 6th screen re-orientation.</p>\n\n<p>Tried <em>initLoader</em> in <em>onResume</em>; again works for a while &amp; then blows. (specifically the \"Called doRetain when not started:\"... error)</p>\n\n<p>Tried the following : (excerpt from a cover class that has the loader id passed into the constructor)</p>\n\n<pre><code>/**\n * start or restart the loader (why bother with 2 separate functions ?) (now I know why)\n * \n * @param manager\n * @param args\n * @deprecated use {@link #restart(LoaderManager, Bundle)} in onResume (as appropriate) and {@link #initialise(LoaderManager, Bundle)} in onCreate \n */\n@Deprecated \npublic void start(LoaderManager manager, Bundle args) {\n    if (manager.getLoader(this.id) == null) {\n        manager.initLoader(this.id, args, this);\n    } else {\n        manager.restartLoader(this.id, args, this);\n    }\n}\n</code></pre>\n\n<p>(which I found somewhere in Stack-Overflow) </p>\n\n<p>Again, this worked for a while but still threw the occasional glitch.</p>\n\n<hr>\n\n<h2>From what I can figure out while debugging, I think that there is something to do with save/restore instance state that requires that <em>initLoader</em>(/s) are run in the <em>onCreate</em> part of the lifecycle if they are to survive a spin of the cycle. ( I may be wrong.)</h2>\n\n<p>in the case of Managers that cannot be started until the results come back from another manager or task (ie. cannot be initialised in <em>onCreate</em>), I only use <em>initLoader</em>. (I may not be correct in this but it seems to work. These secondary loaders are not part of the immediate instance-state so using <em>initLoader</em> may actually be correct in this case)</p>\n\n<p><img src=\"http://i.stack.imgur.com/xsYIx.png\" alt=\"lifecycle\"></p>\n\n<hr>\n\n<p>Looking at the diagrams and docs, \nI would have thought that initLoader should go in onCreate &amp; restartLoader in onRestart for Activities but that leaves Fragments using some different pattern and I've not had time to investigate if this is actually stable. Can anyone else comment on if they have success with this pattern for activities?</p>\n", "title": "Difference between `initLoader` and `restartLoader` in `LoaderManager`", "tags": ["java", "android", "android-loadermanager"], "link": "http://stackoverflow.com/questions/14445070/difference-between-initloader-and-restartloader-in-loadermanager/16703452#16703452", "question_id": 14445070, "answer_id": 16703452}, {"body": "<p>Calling <code>initLoader</code> when the Loader has already been created (this typically happens after configuration changes, for example) tells the LoaderManager to deliver the Loader's most recent data to <code>onLoadFinished</code> immediately. If the Loader has not already been created (when the activity/fragment first launches, for example) the call to <code>initLoader</code> tells the LoaderManager to call <code>onCreateLoader</code> to create the new Loader.</p>\n\n<p>Calling <code>restartLoader</code> destroys an already existing Loader (as well as any existing data associated with it) and tells the LoaderManager to call <code>onCreateLoader</code> to create the new Loader and to initiate a new load.</p>\n\n<hr>\n\n<p>The documentation is pretty clear about this too:</p>\n\n<ul>\n<li><p><code>initLoader</code> ensures a Loader is initialized and active. If the loader doesn't already exist, one is created and (if the activity/fragment is currently started) starts the loader. Otherwise the last created loader is re-used.</p></li>\n<li><p><code>restartLoader</code> starts a new or restarts an existing Loader in this manager, registers the callbacks to it, and (if the activity/fragment is currently started) starts loading it. If a loader with the same id has previously been started it will automatically be destroyed when the new loader completes its work. The callback will be delivered before the old loader is destroyed.</p></li>\n</ul>\n", "title": "Difference between `initLoader` and `restartLoader` in `LoaderManager`", "tags": ["java", "android", "android-loadermanager"], "link": "http://stackoverflow.com/questions/14445070/difference-between-initloader-and-restartloader-in-loadermanager/16705846#16705846", "question_id": 14445070, "answer_id": 16705846}, {"body": "<p>To answer this question you need to dig into the LoaderManager code.\nWhile the documentation for LoaderManager itself isn't clear enough (or there wouldn't be this question), the documentation for LoaderManagerImpl, a subclass of the abstract LoaderManager, is much more enlightening. </p>\n\n<p><strong>initLoader</strong></p>\n\n<blockquote>\n  <p>Call to initialize a particular ID with a Loader.  If this ID already\n  has a Loader associated with it, it is left unchanged and any previous\n  callbacks replaced with the newly provided ones.  If there is not\n  currently a Loader for the ID, a new one is created and started.</p>\n  \n  <p>This function should generally be used when a component is\n  initializing, to ensure that a Loader it relies on is created.  This\n  allows it to re-use an existing Loader's data if there already is one,\n  so that for example when an Activity is re-created after a\n  configuration change it does not need to re-create its loaders.</p>\n</blockquote>\n\n<p><strong>restartLoader</strong></p>\n\n<blockquote>\n  <p>Call to re-create the Loader associated with a particular ID.  If\n  there is currently a Loader associated with this ID, it will be\n  canceled/stopped/destroyed as appropriate.  A new Loader with the\n  given arguments will be created and its data delivered to you once\n  available.</p>\n  \n  <p>[...] After calling this function, any previous Loaders associated with this ID\n  will be considered invalid, and you will receive no further data\n  updates from them.</p>\n</blockquote>\n\n<p>There are basically two cases:</p>\n\n<ol>\n<li>The loader with the id doesn't exist: both methods will create a new loader so there's no difference there</li>\n<li>The loader with the id already exists: initLoader will only replace the callbacks passed as parameter but won't cancel or stop the loader. For a CursorLoader that means the cursor stays open and active (if that was the case before the initLoader call). restartLoader on the other hand will cancel, stop and destroy the loader (and close the underlying data source like a cursor) and create a new loader (which would also create a new cursor and re-run the query if the loader is a CursorLoader).</li>\n</ol>\n\n<p>Here's the simplified code for both methods:</p>\n\n<p><strong>initLoader</strong></p>\n\n<pre><code>LoaderInfo info = mLoaders.get(id);\nif (info == null) {\n    // Loader doesn't already exist -&gt; create new one\n    info = createAndInstallLoader(id, args, LoaderManager.LoaderCallbacks&lt;Object&gt;)callback);\n} else {\n   // Loader exists -&gt; only replace callbacks   \n   info.mCallbacks = (LoaderManager.LoaderCallbacks&lt;Object&gt;)callback;\n}\n</code></pre>\n\n<p><strong>restartLoader</strong></p>\n\n<pre><code>LoaderInfo info = mLoaders.get(id);\nif (info != null) {\n    LoaderInfo inactive = mInactiveLoaders.get(id);\n    if (inactive != null) {\n        // does a lot of stuff to deal with already inactive loaders\n    } else {\n        // Keep track of the previous instance of this loader so we can destroy\n        // it when the new one completes.\n        info.mLoader.abandon();\n        mInactiveLoaders.put(id, info);\n    }\n}\ninfo = createAndInstallLoader(id, args,  (LoaderManager.LoaderCallbacks&lt;Object&gt;)callback);\n</code></pre>\n\n<p>As we can see in case the loader doesn't exist (info == null) both methods will create a new loader (info = createAndInstallLoader(...)).\nIn case the loader already exists initLoader only replaces the callbacks (info.mCallbacks = ...) while restartLoader inactivates the old loader (it will be destroyed when the new loader completes its work) and then creates a new one.</p>\n\n<p>Thus said it's now clear when to use initLoader and when to use restartLoader and why it makes sense to have the two methods.\ninitLoader is used to ensure there's an initialized loader. If none exists a new one is created, if one already exists it's re-used. We always use this method UNLESS we need a new loader because the query to run has changed (not the underlying data but the actual query  like in SQL statement for a CursorLoader), in which case we will call restartLoader.</p>\n\n<p>The Activity/Fragment life cycle has nothing to do with the decision to use one or the other method (and there's no need to keep track of the calls using a one-shot flag as Simon suggested)! This decision is made solely based on the \"need\" for a new loader. If we want to run the same query we use initLoader, if we want to run a different query we use restartLoader.\nWe could always use restartLoader but that would be inefficient. After a screen rotation or if the user navigates away from the app and returns later to the same Activity we usually want to show the same query result and so the restartLoader would unnecessarily re-create the loader and dismiss the underlying (potentially expensive) query result.</p>\n\n<p>It's very important to understand the difference between the data that is loaded and the \"query\" to load that data. Let's assume we use a CursorLoader querying a table for orders. If a new order is added to that table the CursorLoader uses onContentChanged() to inform the ui to update and show the new order (no need to use restartLoader in this case). If we want to display only open orders we need a new query and we would use restartLoader to return a new CursorLoader reflecting the new query.</p>\n\n<blockquote>\n  <p>Is there some relation between the two methods?</p>\n</blockquote>\n\n<p>They share the code to create a new Loader but they do different things when a loader already exists.</p>\n\n<blockquote>\n  <p>Does calling restartLoader always call initLoader?</p>\n</blockquote>\n\n<p>No it never does.</p>\n\n<blockquote>\n  <p>Can I call restartLoader without having to call initLoader?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <p>Is it safe to call initLoader twice to refresh the data?</p>\n</blockquote>\n\n<p>It's safe to call initLoader twice but no data will be refreshed.</p>\n\n<blockquote>\n  <p>When should I use one of the two and (important!) why?</p>\n</blockquote>\n\n<p>That should (hopefully) be clear after my explanations above.</p>\n\n<p><strong>Configuration changes</strong></p>\n\n<p>A LoaderManager retains its state across configuration changes (including orientation changes) so you would think there's nothing left for us to do. Think again...</p>\n\n<p>First of all a LoaderManager doesn't retain the callbacks, so if you do nothing you won't receive calls to your callback methods like onLoadFinished() and the like and that will very likely break your app.\nTherefore we HAVE to call at least initLoader to restore the callback methods (a restartLoader is of course possible too). The <a href=\"http://developer.android.com/reference/android/app/LoaderManager.html#initLoader%28int,%20android.os.Bundle,%20android.app.LoaderManager.LoaderCallbacks%3CD%3E%29\">documentation</a> states:</p>\n\n<blockquote>\n  <p>If at the point of call the caller is in its started state, and the\n  requested loader already exists and has generated its data, then\n  callback onLoadFinished(Loader, D) will be called immediately (inside\n  of this function) [...].</p>\n</blockquote>\n\n<p>That means if we call initLoader after an orientation change, we will get an onLoadFinished call right away because the data is already loaded (assuming that was the case before the change).\nWhile that sounds straight forward it can be tricky (don't we all love Android...).</p>\n\n<p>We have to distinguish between two cases:</p>\n\n<ol>\n<li>Handles configuration changes itself: this is the case for Fragments\nthat use setRetainInstance(true) or for an Activity with the\naccording android:configChanges tag in the manifest. These\ncomponents won't receive an onCreate call after e.g. a\nscreen rotation, so keep in mind to call\ninitLoader/restartLoader in another callback method (e.g. in\nonActivityCreated(Bundle)). To be able to initialize the Loader(s),\nthe loader ids need to be stored (e.g. in a List). Because\nthe component is retained across configuration changes we can\njust loop over the existing loader ids and call initLoader(loaderid,\n...).</li>\n<li>Doesn't handle configuration changes itself: In this case the\nLoaders can be initialized in onCreate but we need to manually\nretain the loader ids or we won't be able to make the needed\ninitLoader/restartLoader calls. If the ids are stored in an\nArrayList, we would do an<br>\noutState.putIntegerArrayList(loaderIdsKey, loaderIdsArray) in\nonSaveInstanceState and restore the ids in onCreate:\nloaderIdsArray =\nsavedInstanceState.getIntegerArrayList(loaderIdsKey) before we make\nthe initLoader call(s).</li>\n</ol>\n", "title": "Difference between `initLoader` and `restartLoader` in `LoaderManager`", "tags": ["java", "android", "android-loadermanager"], "link": "http://stackoverflow.com/questions/14445070/difference-between-initloader-and-restartloader-in-loadermanager/20916507#20916507", "question_id": 14445070, "answer_id": 20916507}, {"body": "<p><code>initLoader</code> will reuse the the same parameters if the loader already exists. It returns immediately if old data is already loaded, even if you call it with new parameters. The loader should ideally automatically notify the activity of new data. If the screen rotated, <code>initLoader</code> would be called again and the old data would be immediately displayed.</p>\n\n<p><code>restartLoader</code> is for when you want to force a reload and change the parameters as well. If you were to make a login screen using loaders, you would call only <code>restartLoader</code> each time the button was clicked. (The button may be clicked multiple times due to incorrect credentials etc.). You would only ever call <code>initLoader</code> when restoring the activity's saved instance state in the event the screen was rotated while a login was in progress.</p>\n", "title": "Difference between `initLoader` and `restartLoader` in `LoaderManager`", "tags": ["java", "android", "android-loadermanager"], "link": "http://stackoverflow.com/questions/14445070/difference-between-initloader-and-restartloader-in-loadermanager/21260723#21260723", "question_id": 14445070, "answer_id": 21260723}], "creation_date": 1358793408, "score": 95, "link": "http://stackoverflow.com/questions/14445070/difference-between-initloader-and-restartloader-in-loadermanager", "question_id": 14445070}, {"body": "<p>I'm trying to round BigDecimal values up, to two decimal places.</p>\n\n<p>I'm using</p>\n\n<pre><code>BigDecimal rounded = value.round(new MathContext(2, RoundingMode.CEILING));\nlogger.trace(\"rounded {} to {}\", value, rounded);\n</code></pre>\n\n<p>but it doesn't do what I want consistently:</p>\n\n<pre><code>rounded 0.819 to 0.82\nrounded 1.092 to 1.1\nrounded 1.365 to 1.4 // should be 1.37\nrounded 2.730 to 2.8 // should be 2.74\nrounded 0.819 to 0.82\n</code></pre>\n\n<p>I don't care about significant digits, I just want two decimal places. How do I do this with BigDecimal? Or is there another class/library better suited to this?</p>\n", "tags": ["java", "math", "bigdecimal", "rounding"], "title": "Rounding BigDecimal to *always* have two decimal places", "answers": [{"body": "<pre><code>value = value.setScale(2, RoundingMode.CEILING)\n</code></pre>\n", "title": "Rounding BigDecimal to *always* have two decimal places", "tags": ["java", "math", "bigdecimal", "rounding"], "link": "http://stackoverflow.com/questions/15643280/rounding-bigdecimal-to-always-have-two-decimal-places/15643364#15643364", "question_id": 15643280, "answer_id": 15643364}], "creation_date": 1364317798, "score": 95, "link": "http://stackoverflow.com/questions/15643280/rounding-bigdecimal-to-always-have-two-decimal-places", "question_id": 15643280}, {"body": "<p>Is there an \"official\" recommendation of how to name Java enums?</p>\n\n<pre><code>enum Protocol { HTTP, HTTPS, FTP }\n</code></pre>\n\n<p>or</p>\n\n<pre><code>enum Protocols { HTTP, HTTPS, FTP }\n</code></pre>\n\n<p>I know in the .Net world the recommendation is to use singular except for enums that represent bit flags. Just curious if there is something similar in Java.</p>\n\n<p>A related question that seems to be .Net specific: <a href=\"http://stackoverflow.com/questions/1335959/singular-or-plural-for-enumerations\">Singular or plural for enumerations?</a></p>\n", "tags": ["java", "enums", "naming-conventions"], "title": "Naming of enums in Java: Singular or Plural?", "answers": [{"body": "<p>Enums in Java (and probably enums in general) should be singular. The thinking is that you're not selecting multiple Protocols, but rather one Protocol of the possible choices in the list of values. </p>\n\n<p>Note the absence of plurals: <a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\">http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html</a></p>\n", "title": "Naming of enums in Java: Singular or Plural?", "tags": ["java", "enums", "naming-conventions"], "link": "http://stackoverflow.com/questions/15755955/naming-of-enums-in-java-singular-or-plural/15756009#15756009", "question_id": 15755955, "answer_id": 15756009}, {"body": "<p>In the same way that when you are defining a table name in a database or a class in Java you use singular for enums it's also the best option. Just see how you are going to use it.</p>\n\n<p>Let's write an example:</p>\n\n<pre><code>public enum Day {\nSUNDAY, MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY\n}\n\nclass Appointment {\nprivate Day day;\n\npublic void setDay(Day day) {\n    this.day = day;\n}\n}\n</code></pre>\n\n<p>In singular form you see clearly the intention of the day attribute. \"day\" its the day of the week this appointment is going to be held. Otherwise the signature of the method would have been setDay(Days day) and for sure a lot of people will be wondering if the appointment could happen in more than one day.</p>\n\n<p>If you work in a company the has 48 hour shifts you could try to define something like:</p>\n\n<pre><code>public enum Days {\nMONDAY_TUESDAY, WEDNESDAY_THURSDAY, FRIDAY_SATURDAY\n}\n</code></pre>\n\n<p>That way you could set the days you are going to work. But still it will look weird and there is a better option and is to use the singular form:</p>\n\n<pre><code>public enum Shift {\nMONDAY_TUESDAY, WEDNESDAY_THURSDAY, FRIDAY_SATURDAY\n}\n</code></pre>\n\n<p>Now you really are showing the meaning of the enum. Usually in any domain you are going to find that using singular for an enum is the best option as each constant in the enum is just one element. </p>\n\n<p>You also mention .NET. A \"flags\" enum in .NET just means that when you are expecting that enum as a parameter what you really get is a list of elements of that enum (stored as a integer).</p>\n\n<pre><code>// Define an Enum with FlagsAttribute.\n[FlagsAttribute] \nenum MultiHue : short\n{\n    Black = 0,\n    Red = 1,\n    Green = 2,\n    Blue = 4\n};\n\npublic void setMultiHue(MultiHue hues);\n</code></pre>\n\n<p>You could do the same in Java, but the enum still will be singular:</p>\n\n<pre><code>public enum Hue {\nBLACK, RED, GREEN, BLUE;\nprivate final Integer hue;\n\nHue() {\n    this.hue = 1 &lt;&lt; this.ordinal();\n}\n\npublic Integer toFlag() {\n    return this.hue;\n}\n}\n\npublic class MultiHue {\nprivate Integer hues = 0;\n\npublic void addHue(Hue hue) {\n    this.hues |= hue.toFlag();\n}\n\npublic boolean hasHue(Hue hue) {\n    return (this.hues &amp; hue.toFlag()) != 0;\n}\n}\n</code></pre>\n\n<p>An easier and clearer (although it uses a more memory) to do this with Java is just to use a List.</p>\n", "title": "Naming of enums in Java: Singular or Plural?", "tags": ["java", "enums", "naming-conventions"], "link": "http://stackoverflow.com/questions/15755955/naming-of-enums-in-java-singular-or-plural/18120247#18120247", "question_id": 15755955, "answer_id": 18120247}], "creation_date": 1364876089, "score": 94, "link": "http://stackoverflow.com/questions/15755955/naming-of-enums-in-java-singular-or-plural", "question_id": 15755955}, {"body": "<p>I am involved in the development of Android application which is a rather \"thick\" mobile client for a Web service. It heavily communicates with the server but also has a lot of inner logic too. So, I decided to use some features of <code>Google Guava</code> library to simplify development process. Here is a list of features I'm very interested in: immutable collections, base utils, collection extensions, functional programming sugar and idioms (<code>common.collect</code> and <code>common.base</code>), primitives utilities (<code>common.primitives</code>), hashing utilities (<code>common.hash</code>), concurrent utils (futures and <code>AsyncFunction</code>). Things I <strong>don't want</strong> to use in Android: <code>common.cache</code> (see question below), <code>common.eventbus</code> (we have better Android specific libs for this, such as <a href=\"https://github.com/square/otto\">Otto</a>), <code>common.io</code> (we can use <a href=\"https://github.com/square/okio\">okio</a> for Android now).\n<p> I read that using Guava for Android can significantly slow down compilation process and also decrease the whole runtime performance:\n<a href=\"http://stackoverflow.com/questions/9283070/bad-performance-with-guava-cache\">Bad performance with Guava Cache</a>  (in this case it is reasonable and there is no need to use Guava's cache for Android) and\n<a href=\"http://stackoverflow.com/questions/7548038/adding-google-guava-to-android-project-significantly-slows-down-the-build\">Adding Google Guava to Android project - significantly slows down the build</a>\n <p>So, is it efficient to use Guava library in Android project or this library is designed to be used <b>only</b> for the server-side development, and I should go with standard solutions? Any explanations will be very appreciated.</p>\n", "tags": ["java", "android", "guava"], "title": "Is it a good idea to use Google Guava library for Android development?", "answers": [{"body": "<p>(Too big for comment, so I post an answer.) Personally I use whole Guava library in every Java project and when I don't have <em>significant and properly profiled</em> performance problems. If you do have, for example, memory concerns like in Android environment, you can use <a href=\"https://code.google.com/p/guava-libraries/wiki/UsingProGuardWithGuava\">ProGuard</a> to get only these parts of Guava you really need.</p>\n\n<p>Moreover, <a href=\"http://www.appbrain.com/stats/libraries/details/guava/google-guava\">there are many Android apps using Guava</a> - not only small ones, i.e. Google Search and Youtube, which come from directly from Google.</p>\n\n<p>(You should also see <a href=\"https://code.google.com/p/guava-libraries/wiki/Compatibility#Android\">compatibility note</a>.)</p>\n", "title": "Is it a good idea to use Google Guava library for Android development?", "tags": ["java", "android", "guava"], "link": "http://stackoverflow.com/questions/14978699/is-it-a-good-idea-to-use-google-guava-library-for-android-development/14979043#14979043", "question_id": 14978699, "answer_id": 14979043}], "creation_date": 1361359683, "score": 94, "link": "http://stackoverflow.com/questions/14978699/is-it-a-good-idea-to-use-google-guava-library-for-android-development", "question_id": 14978699}, {"body": "<p>I haven't updated anything for at least a month.  I was just working normally and suddenly the menus were all blank, so I decided to restart eclipse. I clicked \"close\" and \"ok\" to save everything, but nothing happened, so I clicked close again and eclipse closed. I clicked on eclipse and the loading screen only flashes and disappears followed by a message telling me to check the <code>.log</code> file. I've since restarted the pc multiple times, tried running it in safe mode and ran <code>eclipse.exe -clean</code> and nothing works.</p>\n\n<p>Any ideas?</p>\n\n<pre><code>!SESSION 2013-03-12 13:46:10.078 -----------------------------------------------\neclipse.buildId=I20120608-1400\njava.version=1.7.0_07\njava.vendor=Oracle Corporation\nBootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_US\nFramework arguments:  -product org.eclipse.epp.package.jee.product\nCommand-line arguments:  -os win32 -ws win32 -arch x86_64 -product org.eclipse.epp.package.jee.product -clean\n\n!ENTRY org.eclipse.ui 4 4 2013-03-12 13:46:55.800\n!MESSAGE An internal error has occurred.\n!STACK 0\njava.lang.NullPointerException\n    at org.eclipse.ui.internal.Workbench.createWorkbenchWindow(Workbench.java:1228)\n    ...\n    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)\n\n!ENTRY org.eclipse.ui.workbench 4 0 2013-03-12 13:46:55.803\n!MESSAGE An unexpected exception was thrown.\n!STACK 0\njava.lang.NullPointerException\n    at org.eclipse.ui.internal.Workbench.createWorkbenchWindow(Workbench.java:1228)\n    ...\n    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)\n\n!ENTRY org.eclipse.ui 4 4 2013-03-12 13:46:55.811\n!MESSAGE An internal error has occurred.\n!STACK 0\njava.lang.NullPointerException\n    at org.eclipse.ui.internal.Workbench.createWorkbenchWindow(Workbench.java:1228)\n    ...\n    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)\n\n!ENTRY org.eclipse.osgi 2 0 2013-03-12 13:47:01.331\n!MESSAGE While loading class \"org.eclipse.team.svn.ui.SVNTeamUIPlugin\", thread \"Thread[main,6,main]\" timed out waiting (5003ms) for thread \"Thread[Worker-1,5,main]\" to finish starting bundle \"org.eclipse.team.svn.ui_1.0.0.I20120803-1700 [691]\". To avoid deadlock, thread \"Thread[main,6,main]\" is proceeding but \"org.eclipse.team.svn.ui.SVNTeamUIPlugin\" may not be fully initialized.\n!STACK 0\norg.osgi.framework.BundleException: State change in progress for bundle \"reference:file:plugins/org.eclipse.team.svn.ui_1.0.0.I20120803-1700.jar\" by thread \"Worker-1\".\n    at org.eclipse.osgi.framework.internal.core.AbstractBundle.beginStateChange(AbstractBundle.java:1088)\n    ...\n    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)\nCaused by: org.eclipse.osgi.framework.internal.core.AbstractBundle$BundleStatusException\n    ... 38 more\nRoot exception:\norg.eclipse.osgi.framework.internal.core.AbstractBundle$BundleStatusException\n    at org.eclipse.osgi.framework.internal.core.AbstractBundle.beginStateChange(AbstractBundle.java:1088)\n    ...\n    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)\n\n!ENTRY org.eclipse.osgi 4 0 2013-03-12 13:47:02.259\n!MESSAGE Application error\n!STACK 1\norg.eclipse.swt.SWTException: Failed to execute runnable (java.lang.NullPointerException)\n    at org.eclipse.swt.SWT.error(SWT.java:4361)\n    at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)\n    ... 18 more\n\n!ENTRY org.eclipse.ui.workbench 4 2 2013-03-12 13:47:02.519\n!MESSAGE Problems occurred when invoking code from plug-in: \"org.eclipse.ui.workbench\".\n!STACK 0\njava.lang.NullPointerException\n    at org.springframework.ide.eclipse.maven.internal.legacyconversion.LegacyProjectChecker.earlyStartup(LegacyProjectChecker.java:36)\n    ...\n    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)\n\n!ENTRY org.eclipse.ui 4 4 2013-03-12 13:47:02.521\n!MESSAGE Unhandled Exception\n\n!ENTRY org.springframework.ide.eclipse.maven 4 0 2013-03-12 13:47:02.523\n!MESSAGE Unable to execute early startup code for an extension\n!STACK 0\njava.lang.NullPointerException\n    at org.springframework.ide.eclipse.maven.internal.legacyconversion.LegacyProjectChecker.earlyStartup(LegacyProjectChecker.java:36)\n    ...\n    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)\n\n!ENTRY org.eclipse.ui.workbench 4 2 2013-03-12 13:47:02.529\n!MESSAGE Problems occurred when invoking code from plug-in: \"org.eclipse.ui.workbench\".\n!STACK 0\njava.lang.NullPointerException\n    at org.springframework.ide.eclipse.osgi.targetdefinition.TargetStartup.earlyStartup(TargetStartup.java:58)\n    ...\n    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)\n\n!ENTRY org.eclipse.ui 4 4 2013-03-12 13:47:02.531\n!MESSAGE Unhandled Exception\n\n!ENTRY org.springframework.ide.eclipse.osgi.targetdefinition 4 0 2013-03-12 13:47:02.534\n!MESSAGE Unable to execute early startup code for an extension\n!STACK 0\njava.lang.NullPointerException\n    at org.springframework.ide.eclipse.osgi.targetdefinition.TargetStartup.earlyStartup(TargetStartup.java:58)\n    ...\n    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)\n\n!ENTRY org.eclipse.ui.workbench 4 2 2013-03-12 13:47:02.550\n!MESSAGE Problems occurred when invoking code from plug-in: \"org.eclipse.ui.workbench\".\n!STACK 1\norg.eclipse.core.runtime.CoreException: Plug-in \"org.springsource.ide.eclipse.commons.frameworks.ui\" was unable to instantiate class \"org.springsource.ide.eclipse.commons.frameworks.ui.internal.legacyconversion.LegacySTSChecker\".\n    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.throwException(RegistryStrategyOSGI.java:194)\n    ...\n    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:184)\n    ... 11 more\nCaused by: java.lang.NullPointerException\n    at org.springsource.ide.eclipse.commons.frameworks.ui.internal.legacyconversion.LegacySTSChecker.&lt;clinit&gt;(LegacySTSChecker.java:44)\n    ... 18 more\n!SUBENTRY 1 org.eclipse.equinox.registry 4 1 2013-03-12 13:47:02.551\n!MESSAGE Plug-in \"org.springsource.ide.eclipse.commons.frameworks.ui\" was unable to instantiate class \"org.springsource.ide.eclipse.commons.frameworks.ui.internal.legacyconversion.LegacySTSChecker\".\n!STACK 0\njava.lang.ExceptionInInitializerError\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    ...\n    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)\nCaused by: java.lang.NullPointerException\n    at org.springsource.ide.eclipse.commons.frameworks.ui.internal.legacyconversion.LegacySTSChecker.&lt;clinit&gt;(LegacySTSChecker.java:44)\n    ... 18 more\n!SUBENTRY 1 org.eclipse.equinox.registry 4 1 2013-03-12 13:47:02.551\n!MESSAGE Plug-in \"org.springsource.ide.eclipse.commons.frameworks.ui\" was unable to instantiate class \"org.springsource.ide.eclipse.commons.frameworks.ui.internal.legacyconversion.LegacySTSChecker\".\n!STACK 0\njava.lang.ExceptionInInitializerError\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    ...\n    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)\nCaused by: java.lang.NullPointerException\n    at org.springsource.ide.eclipse.commons.frameworks.ui.internal.legacyconversion.LegacySTSChecker.&lt;clinit&gt;(LegacySTSChecker.java:44)\n    ... 18 more\n\n!ENTRY org.eclipse.mylyn.monitor.ui 4 0 2013-03-12 13:47:02.552\n!MESSAGE Monitor UI stop failed\n!STACK 0\njava.lang.NullPointerException\n    at org.eclipse.mylyn.internal.monitor.ui.ActivityContextManager.stop(ActivityContextManager.java:150)\n    ...\n    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)\n\n!ENTRY org.eclipse.ui 4 4 2013-03-12 13:47:02.553\n!MESSAGE Unhandled Exception\n\n!ENTRY org.springsource.ide.eclipse.commons.frameworks.ui 4 0 2013-03-12 13:47:02.555\n!MESSAGE Unable to execute early startup code for an extension\n!STACK 1\norg.eclipse.core.runtime.CoreException: Plug-in \"org.springsource.ide.eclipse.commons.frameworks.ui\" was unable to instantiate class \"org.springsource.ide.eclipse.commons.frameworks.ui.internal.legacyconversion.LegacySTSChecker\".\n    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.throwException(RegistryStrategyOSGI.java:194)\n    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:188)\n    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)\n    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)\n    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)\n    at org.eclipse.ui.internal.WorkbenchPlugin$1.run(WorkbenchPlugin.java:273)\n    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:52)\n    at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:269)\n    at org.eclipse.ui.internal.EarlyStartupRunnable.getExecutableExtension(EarlyStartupRunnable.java:117)\n    at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)\n    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)\n    at org.eclipse.ui.internal.Workbench$52.run(Workbench.java:2357)\n    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)\nCaused by: java.lang.ExceptionInInitializerError\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\n    at java.lang.reflect.Constructor.newInstance(Unknown Source)\n    at java.lang.Class.newInstance0(Unknown Source)\n    at java.lang.Class.newInstance(Unknown Source)\n    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:184)\n    ... 11 more\nCaused by: java.lang.NullPointerException\n    at org.springsource.ide.eclipse.commons.frameworks.ui.internal.legacyconversion.LegacySTSChecker.&lt;clinit&gt;(LegacySTSChecker.java:44)\n    ... 18 more\n!SUBENTRY 1 org.eclipse.equinox.registry 4 1 2013-03-12 13:47:02.555\n!MESSAGE Plug-in \"org.springsource.ide.eclipse.commons.frameworks.ui\" was unable to instantiate class \"org.springsource.ide.eclipse.commons.frameworks.ui.internal.legacyconversion.LegacySTSChecker\".\n!STACK 0\njava.lang.ExceptionInInitializerError\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\n    at java.lang.reflect.Constructor.newInstance(Unknown Source)\n    at java.lang.Class.newInstance0(Unknown Source)\n    at java.lang.Class.newInstance(Unknown Source)\n    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:184)\n    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)\n    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)\n    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)\n    at org.eclipse.ui.internal.WorkbenchPlugin$1.run(WorkbenchPlugin.java:273)\n    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:52)\n    at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:269)\n    at org.eclipse.ui.internal.EarlyStartupRunnable.getExecutableExtension(EarlyStartupRunnable.java:117)\n    at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)\n    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)\n    at org.eclipse.ui.internal.Workbench$52.run(Workbench.java:2357)\n    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)\nCaused by: java.lang.NullPointerException\n    at org.springsource.ide.eclipse.commons.frameworks.ui.internal.legacyconversion.LegacySTSChecker.&lt;clinit&gt;(LegacySTSChecker.java:44)\n    ... 18 more\n\n!ENTRY org.eclipse.ui.workbench 4 2 2013-03-12 13:47:02.562\n!MESSAGE Problems occurred when invoking code from plug-in: \"org.eclipse.ui.workbench\".\n!STACK 0\njava.lang.NullPointerException\n    at org.springsource.ide.eclipse.commons.internal.configurator.ConfiguratorImporter.lazyStartup(ConfiguratorImporter.java:369)\n    at org.springsource.ide.eclipse.commons.internal.ui.StartupExtensionPointReader.runStartupExtension(StartupExtensionPointReader.java:64)\n    at org.springsource.ide.eclipse.commons.internal.ui.StartupExtensionPointReader.runStartupExtensions(StartupExtensionPointReader.java:47)\n    at org.springsource.ide.eclipse.commons.internal.ui.StartupExtensionPointReader.earlyStartup(StartupExtensionPointReader.java:73)\n    at org.eclipse.ui.internal.EarlyStartupRunnable.runEarlyStartup(EarlyStartupRunnable.java:87)\n    at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)\n    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)\n    at org.eclipse.ui.internal.Workbench$52.run(Workbench.java:2357)\n    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)\n\n!ENTRY org.eclipse.ui 4 4 2013-03-12 13:47:02.563\n!MESSAGE Unhandled Exception\n\n!ENTRY org.springsource.ide.eclipse.commons.ui 4 0 2013-03-12 13:47:02.565\n!MESSAGE Unable to execute early startup code for an extension\n!STACK 0\njava.lang.NullPointerException\n    at org.springsource.ide.eclipse.commons.internal.configurator.ConfiguratorImporter.lazyStartup(ConfiguratorImporter.java:369)\n    at org.springsource.ide.eclipse.commons.internal.ui.StartupExtensionPointReader.runStartupExtension(StartupExtensionPointReader.java:64)\n    at org.springsource.ide.eclipse.commons.internal.ui.StartupExtensionPointReader.runStartupExtensions(StartupExtensionPointReader.java:47)\n    at org.springsource.ide.eclipse.commons.internal.ui.StartupExtensionPointReader.earlyStartup(StartupExtensionPointReader.java:73)\n    at org.eclipse.ui.internal.EarlyStartupRunnable.runEarlyStartup(EarlyStartupRunnable.java:87)\n    at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)\n    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)\n    at org.eclipse.ui.internal.Workbench$52.run(Workbench.java:2357)\n    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)\n\n!ENTRY org.eclipse.osgi 4 0 2013-03-12 13:47:02.671\n!MESSAGE An unexpected runtime error has occurred.\n!STACK 0\njava.lang.NullPointerException\n    at org.eclipse.ui.internal.progress.BlockedJobsDialog.createBlockedDialog(BlockedJobsDialog.java:218)\n    at org.eclipse.ui.internal.dialogs.WorkbenchDialogBlockedHandler.showBlocked(WorkbenchDialogBlockedHandler.java:73)\n    at org.eclipse.ui.internal.dialogs.WorkbenchDialogBlockedHandler.showBlocked(WorkbenchDialogBlockedHandler.java:87)\n    at org.eclipse.ui.internal.dialogs.EventLoopProgressMonitor.setBlocked(EventLoopProgressMonitor.java:144)\n    at org.eclipse.core.internal.jobs.JobManager.reportBlocked(JobManager.java:1032)\n    at org.eclipse.core.internal.jobs.JobManager.join(JobManager.java:907)\n    at org.eclipse.equinox.internal.p2.engine.SimpleProfileRegistry.stop(SimpleProfileRegistry.java:870)\n    at org.eclipse.equinox.internal.p2.core.ProvisioningAgent.unregisterService(ProvisioningAgent.java:122)\n    at org.eclipse.equinox.internal.p2.core.ProvisioningAgent.removedService(ProvisioningAgent.java:183)\n    at org.osgi.util.tracker.ServiceTracker$Tracked.customizerRemoved(ServiceTracker.java:956)\n    at org.osgi.util.tracker.ServiceTracker$Tracked.customizerRemoved(ServiceTracker.java:1)\n    at org.osgi.util.tracker.AbstractTracked.untrack(AbstractTracked.java:341)\n    at org.osgi.util.tracker.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:902)\n    at org.eclipse.osgi.internal.serviceregistry.FilteredServiceListener.serviceChanged(FilteredServiceListener.java:107)\n    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:861)\n    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)\n    at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)\n    at org.eclipse.osgi.internal.serviceregistry.ServiceRegistry.publishServiceEventPrivileged(ServiceRegistry.java:819)\n    at org.eclipse.osgi.internal.serviceregistry.ServiceRegistry.publishServiceEvent(ServiceRegistry.java:771)\n    at org.eclipse.osgi.internal.serviceregistry.ServiceRegistrationImpl.unregister(ServiceRegistrationImpl.java:225)\n    at org.eclipse.equinox.internal.ds.InstanceProcess.disposeInstances(InstanceProcess.java:356)\n    at org.eclipse.equinox.internal.ds.InstanceProcess.disposeInstances(InstanceProcess.java:306)\n    at org.eclipse.equinox.internal.ds.Resolver.disposeComponentConfigs(Resolver.java:717)\n    at org.eclipse.equinox.internal.ds.Resolver.disableComponents(Resolver.java:693)\n    at org.eclipse.equinox.internal.ds.SCRManager.stoppingBundle(SCRManager.java:554)\n    at org.eclipse.equinox.internal.ds.SCRManager.bundleChanged(SCRManager.java:233)\n    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:847)\n    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)\n    at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)\n    at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEventPrivileged(Framework.java:1569)\n    at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEvent(Framework.java:1505)\n    at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEvent(Framework.java:1500)\n    at org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker(BundleHost.java:506)\n    at org.eclipse.osgi.framework.internal.core.AbstractBundle.suspend(AbstractBundle.java:566)\n    at org.eclipse.osgi.framework.internal.core.Framework.suspendBundle(Framework.java:1207)\n    at org.eclipse.osgi.framework.internal.core.StartLevelManager.decFWSL(StartLevelManager.java:592)\n    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:257)\n    at org.eclipse.osgi.framework.internal.core.StartLevelManager.shutdown(StartLevelManager.java:215)\n    at org.eclipse.osgi.framework.internal.core.InternalSystemBundle.suspend(InternalSystemBundle.java:284)\n    at org.eclipse.osgi.framework.internal.core.Framework.shutdown(Framework.java:693)\n    at org.eclipse.osgi.framework.internal.core.Framework.close(Framework.java:600)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.shutdown(EclipseStarter.java:399)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:199)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)\n    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)\n    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)\n    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)\n\n!ENTRY org.eclipse.equinox.p2.core 4 0 2013-03-12 13:47:02.673\n!MESSAGE FrameworkEvent ERROR\n!STACK 0\njava.lang.NullPointerException\n    at org.eclipse.ui.internal.progress.BlockedJobsDialog.createBlockedDialog(BlockedJobsDialog.java:218)\n    at org.eclipse.ui.internal.dialogs.WorkbenchDialogBlockedHandler.showBlocked(WorkbenchDialogBlockedHandler.java:73)\n    at org.eclipse.ui.internal.dialogs.WorkbenchDialogBlockedHandler.showBlocked(WorkbenchDialogBlockedHandler.java:87)\n    at org.eclipse.ui.internal.dialogs.EventLoopProgressMonitor.setBlocked(EventLoopProgressMonitor.java:144)\n    at org.eclipse.core.internal.jobs.JobManager.reportBlocked(JobManager.java:1032)\n    at org.eclipse.core.internal.jobs.JobManager.join(JobManager.java:907)\n    at org.eclipse.equinox.internal.p2.engine.SimpleProfileRegistry.stop(SimpleProfileRegistry.java:870)\n    at org.eclipse.equinox.internal.p2.core.ProvisioningAgent.unregisterService(ProvisioningAgent.java:122)\n    at org.eclipse.equinox.internal.p2.core.ProvisioningAgent.removedService(ProvisioningAgent.java:183)\n    at org.osgi.util.tracker.ServiceTracker$Tracked.customizerRemoved(ServiceTracker.java:956)\n    at org.osgi.util.tracker.ServiceTracker$Tracked.customizerRemoved(ServiceTracker.java:1)\n    at org.osgi.util.tracker.AbstractTracked.untrack(AbstractTracked.java:341)\n    at org.osgi.util.tracker.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:902)\n    at org.eclipse.osgi.internal.serviceregistry.FilteredServiceListener.serviceChanged(FilteredServiceListener.java:107)\n    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:861)\n    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)\n    at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)\n    at org.eclipse.osgi.internal.serviceregistry.ServiceRegistry.publishServiceEventPrivileged(ServiceRegistry.java:819)\n    at org.eclipse.osgi.internal.serviceregistry.ServiceRegistry.publishServiceEvent(ServiceRegistry.java:771)\n    at org.eclipse.osgi.internal.serviceregistry.ServiceRegistrationImpl.unregister(ServiceRegistrationImpl.java:225)\n    at org.eclipse.equinox.internal.ds.InstanceProcess.disposeInstances(InstanceProcess.java:356)\n    at org.eclipse.equinox.internal.ds.InstanceProcess.disposeInstances(InstanceProcess.java:306)\n    at org.eclipse.equinox.internal.ds.Resolver.disposeComponentConfigs(Resolver.java:717)\n    at org.eclipse.equinox.internal.ds.Resolver.disableComponents(Resolver.java:693)\n    at org.eclipse.equinox.internal.ds.SCRManager.stoppingBundle(SCRManager.java:554)\n    at org.eclipse.equinox.internal.ds.SCRManager.bundleChanged(SCRManager.java:233)\n    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:847)\n    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)\n    at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)\n    at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEventPrivileged(Framework.java:1569)\n    at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEvent(Framework.java:1505)\n    at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEvent(Framework.java:1500)\n    at org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker(BundleHost.java:506)\n    at org.eclipse.osgi.framework.internal.core.AbstractBundle.suspend(AbstractBundle.java:566)\n    at org.eclipse.osgi.framework.internal.core.Framework.suspendBundle(Framework.java:1207)\n    at org.eclipse.osgi.framework.internal.core.StartLevelManager.decFWSL(StartLevelManager.java:592)\n    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:257)\n    at org.eclipse.osgi.framework.internal.core.StartLevelManager.shutdown(StartLevelManager.java:215)\n    at org.eclipse.osgi.framework.internal.core.InternalSystemBundle.suspend(InternalSystemBundle.java:284)\n    at org.eclipse.osgi.framework.internal.core.Framework.shutdown(Framework.java:693)\n    at org.eclipse.osgi.framework.internal.core.Framework.close(Framework.java:600)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.shutdown(EclipseStarter.java:399)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:199)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)\n    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)\n    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)\n    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)\n\n!ENTRY org.eclipse.core.jobs 2 2 2013-03-12 13:47:04.270\n!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.ui.internal.AbstractWorkingSetManager$9\n\n!ENTRY org.eclipse.core.jobs 2 2 2013-03-12 13:47:04.273\n!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.ui.internal.AbstractWorkingSetManager$9\n\n!ENTRY org.eclipse.core.jobs 2 2 2013-03-12 13:47:04.274\n!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.ui.internal.AbstractWorkingSetManager$9\n\n!ENTRY org.eclipse.core.jobs 2 2 2013-03-12 13:47:04.276\n!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.ui.internal.AbstractWorkingSetManager$9\n\n!ENTRY org.eclipse.core.jobs 2 2 2013-03-12 13:47:04.277\n!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.ui.internal.AbstractWorkingSetManager$9\n\n!ENTRY org.eclipse.core.jobs 2 2 2013-03-12 13:47:04.279\n!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.ui.internal.AbstractWorkingSetManager$9\n\n!ENTRY org.eclipse.core.jobs 2 2 2013-03-12 13:47:04.280\n!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.ui.internal.AbstractWorkingSetManager$9\n\n!ENTRY org.eclipse.core.jobs 2 2 2013-03-12 13:47:04.282\n!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.ui.internal.AbstractWorkingSetManager$9\n\n!ENTRY org.eclipse.core.jobs 2 2 2013-03-12 13:47:04.283\n!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.ui.internal.AbstractWorkingSetManager$9\n\n!ENTRY org.eclipse.core.jobs 2 2 2013-03-12 13:47:04.284\n!MESSAGE Job found still running after platform shutdown.  Jobs should be canceled by the plugin that scheduled them during shutdown: org.eclipse.m2e.core.internal.repository.RepositoryRegistryUpdateJob\n</code></pre>\n", "tags": ["java", "eclipse"], "title": "Eclipse will not start and I haven&#39;t changed anything", "answers": [{"body": "<p>Ok so i figured it out. Go to yourWorkspace/.metadata/.plugins and delete everything in there.\nEclipse will start and repopulate the folder.</p>\n", "title": "Eclipse will not start and I haven&#39;t changed anything", "tags": ["java", "eclipse"], "link": "http://stackoverflow.com/questions/15372023/eclipse-will-not-start-and-i-havent-changed-anything/15372342#15372342", "question_id": 15372023, "answer_id": 15372342}, {"body": "<p>Try:</p>\n\n<pre><code>$ rm YOUR_PROJECT_DIR/.metadata/.plugins/org.eclipse.core.resources/.snap\n</code></pre>\n\n<p>Original source: <a href=\"http://www.metod.si/job-found-still-running-after-platform-shutdown-eclipse/\">Job found still running after platform shutdown eclipse</a></p>\n", "title": "Eclipse will not start and I haven&#39;t changed anything", "tags": ["java", "eclipse"], "link": "http://stackoverflow.com/questions/15372023/eclipse-will-not-start-and-i-havent-changed-anything/16612264#16612264", "question_id": 15372023, "answer_id": 16612264}, {"body": "<p>I used <code>eclipse -clean -clearPersistedState</code> and that worked for me. You will lose your window layout configuration, but that seems minor to me.</p>\n\n<p>For Linux systems try: <code>./eclipse -clean -clearPersistedState</code></p>\n\n<p>See <a href=\"http://stackoverflow.com/questions/11310970/eclipse-juno-doesnt-start?rq=1\">Eclipse JUNO doesn't start</a></p>\n", "title": "Eclipse will not start and I haven&#39;t changed anything", "tags": ["java", "eclipse"], "link": "http://stackoverflow.com/questions/15372023/eclipse-will-not-start-and-i-havent-changed-anything/16901800#16901800", "question_id": 15372023, "answer_id": 16901800}, {"body": "<p>Maybe worth mentioning that when I had this problem I followed bia.migueis's advice - move everything out of the plugins folder - and the workspace would open again, minus a lot of my configuration.  But then after that, I copied/overwrote all the original files back into the plugins folder and opened the workspace again: it still worked and the settings I'd had before seemed to be intact.</p>\n", "title": "Eclipse will not start and I haven&#39;t changed anything", "tags": ["java", "eclipse"], "link": "http://stackoverflow.com/questions/15372023/eclipse-will-not-start-and-i-havent-changed-anything/17552981#17552981", "question_id": 15372023, "answer_id": 17552981}, {"body": "<p>Removing workbench.xmi under workspace/.metadata/.plugins/org.eclipse.e4.workbench/ worked for me. It did not remove the existing projects.</p>\n", "title": "Eclipse will not start and I haven&#39;t changed anything", "tags": ["java", "eclipse"], "link": "http://stackoverflow.com/questions/15372023/eclipse-will-not-start-and-i-havent-changed-anything/18282716#18282716", "question_id": 15372023, "answer_id": 18282716}, {"body": "<p>I tried the option above of moving the plugins but it didn't work. My solution was to delete the entire .metadata folder. This meant that I lost my defaults and had to import my projects again. </p>\n", "title": "Eclipse will not start and I haven&#39;t changed anything", "tags": ["java", "eclipse"], "link": "http://stackoverflow.com/questions/15372023/eclipse-will-not-start-and-i-havent-changed-anything/18913049#18913049", "question_id": 15372023, "answer_id": 18913049}, {"body": "<p>I deleted the workbench.xmi in the folder workspace/.metadata/.plugins/org.eclipse.e4.workbench/. </p>\n\n<p>I got this error because a build hung and then I tried to quit. However, I had unsaved changes. This prompted the following errors in logfile about unsaved changes and jobs that are not finished.</p>\n", "title": "Eclipse will not start and I haven&#39;t changed anything", "tags": ["java", "eclipse"], "link": "http://stackoverflow.com/questions/15372023/eclipse-will-not-start-and-i-havent-changed-anything/20383385#20383385", "question_id": 15372023, "answer_id": 20383385}, {"body": "<p><em>Read my answer if recently you have been using a VPN connection.</em></p>\n\n<p>Today I had the same exact issue and learned how to fix it without removing any plugins.\nSo I thought maybe I would share my own experience.</p>\n\n<p><strong>My issue definitely had something to do with Spring Framework</strong></p>\n\n<p>I was using a VPN connection over my internet connection.\n<strong>Once I disconnected my VPN, everything instantly turned right.</strong></p>\n", "title": "Eclipse will not start and I haven&#39;t changed anything", "tags": ["java", "eclipse"], "link": "http://stackoverflow.com/questions/15372023/eclipse-will-not-start-and-i-havent-changed-anything/21422799#21422799", "question_id": 15372023, "answer_id": 21422799}, {"body": "<p>This works like champ on mac os or windows.</p>\n\n<p>Remove workbench.xmi  located at <em>workspace/.metadata/.plugins/org.eclipse.e4.workbench/workbench.xmi</em>. Then start your Eclipse or ADT.  This will not erase your workspace or repository. </p>\n\n<p><strong>Remove workbench.xmi cmd:</strong></p>\n\n<blockquote>\n  <p>rm\n  workspace/.metadata/.plugins/org.eclipse.e4.workbench/workbench.xmi.</p>\n</blockquote>\n", "title": "Eclipse will not start and I haven&#39;t changed anything", "tags": ["java", "eclipse"], "link": "http://stackoverflow.com/questions/15372023/eclipse-will-not-start-and-i-havent-changed-anything/23228572#23228572", "question_id": 15372023, "answer_id": 23228572}, {"body": "<p>Definitely a network/proxy thing. I connect via wifi and a corporate gateway. Deleted workspace, reinstalled GGTS - still hangs. Turn off the network - launches fine.</p>\n", "title": "Eclipse will not start and I haven&#39;t changed anything", "tags": ["java", "eclipse"], "link": "http://stackoverflow.com/questions/15372023/eclipse-will-not-start-and-i-havent-changed-anything/23621071#23621071", "question_id": 15372023, "answer_id": 23621071}, {"body": "<p>I moved workbench.xmi located at workspace/.metadata/.plugins/org.eclipse.e4.workbench/workbench.xmi to a backup folder.  Then started eclipse and waited for all background processes to finish.  Then I closed eclipse and moved my backup copy of workbench.xmi back (overwriting the one created with the last launch).  Eclipse launched fine and I got all my settings back.</p>\n", "title": "Eclipse will not start and I haven&#39;t changed anything", "tags": ["java", "eclipse"], "link": "http://stackoverflow.com/questions/15372023/eclipse-will-not-start-and-i-havent-changed-anything/23665311#23665311", "question_id": 15372023, "answer_id": 23665311}, {"body": "<p>If you deleted all data in .metadata directory. There is a quick way to import all your projects again. Try this:</p>\n\n<p>File --> Import --> General: Select Existing projects into workspace --> Select root directory: Browse to old workspace folder (the SAME with the current workspace folder is OK) --> Finish.</p>\n", "title": "Eclipse will not start and I haven&#39;t changed anything", "tags": ["java", "eclipse"], "link": "http://stackoverflow.com/questions/15372023/eclipse-will-not-start-and-i-havent-changed-anything/24169191#24169191", "question_id": 15372023, "answer_id": 24169191}, {"body": "<p>Today, I had the same problem. My eclipse refused to start. When I double clicked on Eclipse icon I was able to see splashscreen for a second and then nothing happen.\nTried most of the solutions here: removed lock file, renamed workspace, tried to start Eclipse with different clean parameters. I even put a new copy of Eclispe and tried to start with a new workspace. Nothing!</p>\n\n<p>My logs were showing bunch of errors from yesterday when my workstation was rebooted at 17:45.</p>\n\n<pre><code>!ENTRY org.eclipse.ui.workbench 4 2 2014-12-17 17:45:12.178\n!MESSAGE Problems occurred when invoking code from plug-in: \"org.eclipse.ui.workbench\".\n!STACK 0\njava.lang.NullPointerException\n</code></pre>\n\n<p>In the end this very simple change (look below) saved my Eclipse together with my workspace!</p>\n\n<p><strong>SOLUTION:</strong></p>\n\n<p>I edited <code>eclipse.ini</code> and added following line:</p>\n\n<pre><code>-vm\nC:\\Program Files\\Java\\jdk1.6.0_26\\bin\\javaw.exe\n</code></pre>\n\n<p>Eclipse has started again with all my projects inside! I hope this can help.</p>\n", "title": "Eclipse will not start and I haven&#39;t changed anything", "tags": ["java", "eclipse"], "link": "http://stackoverflow.com/questions/15372023/eclipse-will-not-start-and-i-havent-changed-anything/27547318#27547318", "question_id": 15372023, "answer_id": 27547318}, {"body": "<p>I tried several of the options posted in this article, but it worked for me using this option in eclipse.ini:</p>\n\n<p>-Dorg.eclipse.swt.browser.DefaultType=mozilla</p>\n", "title": "Eclipse will not start and I haven&#39;t changed anything", "tags": ["java", "eclipse"], "link": "http://stackoverflow.com/questions/15372023/eclipse-will-not-start-and-i-havent-changed-anything/38960617#38960617", "question_id": 15372023, "answer_id": 38960617}], "creation_date": 1363122021, "score": 93, "link": "http://stackoverflow.com/questions/15372023/eclipse-will-not-start-and-i-havent-changed-anything", "question_id": 15372023}, {"body": "<p>I want to print a double value in Java without exponential form.</p>\n\n<pre><code>double dexp = 12345678;\nSystem.out.println(\"dexp: \"+dexp);\n</code></pre>\n\n<p>It shows this E notation: <code>1.2345678E7</code>.</p>\n\n<p>I want it to print it like this: <code>12345678</code></p>\n\n<p>What is the best way to prevent this?</p>\n", "tags": ["java", "double"], "title": "How to print double value without scientific notation using Java?", "answers": [{"body": "<p>You could use <code>printf()</code> with <code>%f</code>:</p>\n\n<pre><code>double dexp = 12345678;\nSystem.out.printf(\"dexp: %f\\n\", dexp);\n</code></pre>\n\n<p>This will print <code>dexp: 12345678.000000</code>. If you don't want the fractional part, use</p>\n\n<pre><code>System.out.printf(\"dexp: %.0f\\n\", dexp);\n</code></pre>\n\n<p>This uses the format specifier language explained in the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax\">documentation</a>.</p>\n\n<p>The default <code>toString()</code> format used in your original code is spelled out <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#toString%28double%29\">here</a>.</p>\n", "title": "How to print double value without scientific notation using Java?", "tags": ["java", "double"], "link": "http://stackoverflow.com/questions/16098046/how-to-print-double-value-without-scientific-notation-using-java/16098086#16098086", "question_id": 16098046, "answer_id": 16098086}, {"body": "<p>You can try it with <code>DecimalFormat</code>. With this class you are very flexible in parsing your numbers.<br>\nYou can exactly set the pattern you want to use.<br>\nIn your case for example:</p>\n\n<pre><code>double test = 12345678;\nDecimalFormat df = new DecimalFormat(\"#\");\ndf.setMaximumFractionDigits(0);\nSystem.out.println(df.format(test)); //12345678\n</code></pre>\n", "title": "How to print double value without scientific notation using Java?", "tags": ["java", "double"], "link": "http://stackoverflow.com/questions/16098046/how-to-print-double-value-without-scientific-notation-using-java/16098306#16098306", "question_id": 16098046, "answer_id": 16098306}, {"body": "<p>This will work as long as your number is a whole number:</p>\n\n<pre><code>double dnexp = 12345678;\nSystem.out.println(\"dexp: \" + (long)dexp);\n</code></pre>\n\n<p>If the double variable has precision after the decimal point it will truncate it.</p>\n", "title": "How to print double value without scientific notation using Java?", "tags": ["java", "double"], "link": "http://stackoverflow.com/questions/16098046/how-to-print-double-value-without-scientific-notation-using-java/18149295#18149295", "question_id": 16098046, "answer_id": 18149295}, {"body": "<h2>Java prevent E notation in a double:</h2>\n\n<p>Five different ways to convert a double to a normal number:</p>\n\n<pre><code>import java.math.BigDecimal;\nimport java.text.DecimalFormat;\n\npublic class Runner {\n    public static void main(String[] args) {\n        double myvalue = 0.00000021d;\n\n        //Option 1 Print bare double.\n        System.out.println(myvalue);\n\n        //Option2, use decimalFormat.\n        DecimalFormat df = new DecimalFormat(\"#\");\n        df.setMaximumFractionDigits(8);\n        System.out.println(df.format(myvalue));\n\n        //Option 3, use printf.\n        System.out.printf(\"%.9f\", myvalue);\n        System.out.println();\n\n        //Option 4, convert toBigDecimal and ask for toPlainString().\n        System.out.println(new BigDecimal(myvalue).toPlainString());\n        System.out.println();\n\n        //Option 5, String.format \n        System.out.println(String.format(\"%.12f\", myvalue));\n    }\n}\n</code></pre>\n\n<p>This program prints:</p>\n\n<pre><code>2.1E-7\n.00000021\n0.000000210\n0.000000210000000000000001085015324114868562332958390470594167709350585\n0.000000210000\n</code></pre>\n\n<p>Which are all the same value.</p>\n\n<p>Protip: If you are confused as to why those random digits appear beyond a certain threshold in the double value, this video explains: computerphile why does <code>0.1</code>+<code>0.2</code> equal <code>0.30000000000001</code>?</p>\n\n<p><a href=\"http://youtube.com/watch?v=PZRI1IfStY0\">http://youtube.com/watch?v=PZRI1IfStY0</a>    </p>\n", "title": "How to print double value without scientific notation using Java?", "tags": ["java", "double"], "link": "http://stackoverflow.com/questions/16098046/how-to-print-double-value-without-scientific-notation-using-java/20937683#20937683", "question_id": 16098046, "answer_id": 20937683}, {"body": "<p><strong>In short:</strong></p>\n\n<p>If you want to get rid of trailing zeros and Locale problems, then you should use :</p>\n\n<pre><code>double myValue = 0.00000021d;\n\nDecimalFormat df = new DecimalFormat(\"0\", DecimalFormatSymbols.getInstance(Locale.ENGLISH));\ndf.setMaximumFractionDigits(340); //340 = DecimalFormat.DOUBLE_FRACTION_DIGITS\n\nSystem.out.println(df.format(myValue)); //output: 0.00000021\n</code></pre>\n\n<p><strong>Explanation:</strong></p>\n\n<p>Why other answers did not suit me :</p>\n\n<ul>\n<li><code>Double.toString()</code> or <code>System.out.println</code> or <code>FloatingDecimal.toJavaFormatString</code> uses scientific notations if double is less than 10^-3 or greater than or equal to 10^7</li>\n<li><p>by using <code>%f</code>, the default decimal precision is 6, otherwise you can hardcode it but it results in extra zeros added if you have less decimals. Example :</p>\n\n<pre><code>double myValue = 0.00000021d;\nString.format(\"%.12f\", myvalue); //output: 0.000000210000\n</code></pre></li>\n<li><p>by using <code>setMaximumFractionDigits(0);</code> or <code>%.0f</code> you remove any decimal precision, which is fine for integers/longs but not for double</p>\n\n<pre><code>double myValue = 0.00000021d;\nSystem.out.println(String.format(\"%.0f\", myvalue)); //output: 0\nDecimalFormat df = new DecimalFormat(\"0\");\nSystem.out.println(df.format(myValue)); //output: 0\n</code></pre></li>\n<li><p>by using DecimalFormat, you are local dependent. In French locale, the decimal separator is a comma, not a point :</p>\n\n<pre><code>double myValue = 0.00000021d;\nDecimalFormat df = new DecimalFormat(\"0\");\ndf.setMaximumFractionDigits(340);\nSystem.out.println(df.format(myvalue));//output: 0,00000021\n</code></pre>\n\n<p>Using the ENGLISH locale makes sure you get a point for decimal separator, wherever your program will run</p></li>\n</ul>\n\n<p>Why using 340 then for <code>setMaximumFractionDigits</code> ?</p>\n\n<p>Two reasons :</p>\n\n<ul>\n<li><code>setMaximumFractionDigits</code> accepts an integer but its implementation has a maximum digits allowed of <code>DecimalFormat.DOUBLE_FRACTION_DIGITS</code> which equals 340</li>\n<li><code>Double.MIN_VALUE = 4.9E-324</code> so with 340 digits you are sure not to round your double and loose precision</li>\n</ul>\n", "title": "How to print double value without scientific notation using Java?", "tags": ["java", "double"], "link": "http://stackoverflow.com/questions/16098046/how-to-print-double-value-without-scientific-notation-using-java/25307973#25307973", "question_id": 16098046, "answer_id": 25307973}, {"body": "<p>I made my own method, which has fairly good decimal point precision.</p>\n\n<pre><code>public static final String toString(double d) {\n    double suffix = d % 1;\n    double prefix = d - suffix;\n    if (suffix == 0) {\n        StringBuffer buf = new StringBuffer(\"\");\n        while (true) {\n            int current = (int) (d % 10);\n            d /= 10;\n            d = Math.floor(d);\n            buf.append(current);\n            if (d == 0) {\n                break;\n            }\n        }\n        return buf.reverse().toString();\n    } else {\n        return toString(prefix) + \".\" + toString(bringUp(suffix));\n    }\n}\n</code></pre>\n", "title": "How to print double value without scientific notation using Java?", "tags": ["java", "double"], "link": "http://stackoverflow.com/questions/16098046/how-to-print-double-value-without-scientific-notation-using-java/30656918#30656918", "question_id": 16098046, "answer_id": 30656918}, {"body": "<p>The following code detects if the provided number is presented in scientific notation. If so it is represented in normal presentation with a maximum of '25' digits.</p>\n\n<pre><code> static String convertFromScientificNotation(double number) {\n    // Check if in scientific notation\n    if (String.valueOf(number).toLowerCase().contains(\"e\")) {\n        System.out.println(\"The scientific notation number'\"\n                + number\n                + \"' detected, it will be converted to normal representation with 25 maximum fraction digits.\");\n        NumberFormat formatter = new DecimalFormat();\n        formatter.setMaximumFractionDigits(25);\n        return formatter.format(number);\n    } else\n        return String.valueOf(number);\n}\n</code></pre>\n", "title": "How to print double value without scientific notation using Java?", "tags": ["java", "double"], "link": "http://stackoverflow.com/questions/16098046/how-to-print-double-value-without-scientific-notation-using-java/30699623#30699623", "question_id": 16098046, "answer_id": 30699623}, {"body": "<p>I had this same problem in my production code when I was using it as a string input to a math.Eval() function which takes a string like  \"x + 20 / 50\"</p>\n\n<p>I looked at hundreds of articles.. in the end I went with this because of the speed. and because the Eval function was going to convert it back into its own number format eventually and it didn't support the trailing E-07. anything over 5dp was too much detail for my app anyways.</p>\n\n<pre><code>double value= 0.0002111d;\nString s = Double.toString(((int)(value * 100000.0d))/100000.0d); //round to 5 dp\n\ns display as:  0.00021\n</code></pre>\n", "title": "How to print double value without scientific notation using Java?", "tags": ["java", "double"], "link": "http://stackoverflow.com/questions/16098046/how-to-print-double-value-without-scientific-notation-using-java/31694672#31694672", "question_id": 16098046, "answer_id": 31694672}, {"body": "<p>I've got another solution involving BigDecimal's toPlainString(), but this time using the String-constructor, which is recommended in the javadoc:</p>\n\n<blockquote>\n  <p>this constructor is compatible with the values returned by Float.toString and Double.toString. This is generally the preferred way to convert a float or double into a BigDecimal, as it doesn't suffer from the unpredictability of the BigDecimal(double) constructor.</p>\n</blockquote>\n\n<p>Looks like this in its shortest form:</p>\n\n<pre><code>return new BigDecimal(myDouble.toString()).stripTrailingZeros().toPlainString();\n</code></pre>\n\n<p>Pre java 8 this results in \"0.0\" for any zero-valued Doubles, so you would need to add:</p>\n\n<pre><code>if (myDouble.doubleValue() == 0)\n    return \"0\";\n</code></pre>\n\n<p>NaN and infinite values have to be checked extra.<br>\nFinal result of all these considerations:</p>\n\n<pre><code>public static String doubleToString(Double d) {\n    if (d == null)\n        return null;\n    if (d.isNaN() || d.isInfinite())\n        return d.toString();\n\n    // pre java 8, a value of 0 would yield \"0.0\" below\n    if (d.doubleValue() == 0)\n        return \"0\";\n    return new BigDecimal(d.toString()).stripTrailingZeros().toPlainString();\n}\n</code></pre>\n\n<p>This can also be copied/pasted to work nicely with Float.</p>\n", "title": "How to print double value without scientific notation using Java?", "tags": ["java", "double"], "link": "http://stackoverflow.com/questions/16098046/how-to-print-double-value-without-scientific-notation-using-java/38873693#38873693", "question_id": 16098046, "answer_id": 38873693}], "creation_date": 1366350595, "score": 91, "link": "http://stackoverflow.com/questions/16098046/how-to-print-double-value-without-scientific-notation-using-java", "question_id": 16098046}, {"body": "<p>Imagine I'm in a Service that already has a background thread. Can I do a request using volley in that same thread, so that callbacks happen synchronously?</p>\n\n<p>There are 2 reasons for this: \n- First, I do not need another thread and it would be a waste to create it.\n- Second, if I'm in a ServiceIntent, the execution of the thread will finish before the callback, and therefor I will have no response from Volley. I know I can create my own Service that has some thread with a runloop I can control, but it would be desirable having this functionality in volley.</p>\n\n<p>Thank you!</p>\n", "tags": ["java", "android", "android-volley"], "title": "Can I do a synchronous request with volley?", "answers": [{"body": "<p>It looks like it is possible with Volley's <code>RequestFuture</code> class. For example, to create a synchronous JSON HTTP GET request, you can do the following:</p>\n\n<pre><code>RequestFuture&lt;JSONObject&gt; future = RequestFuture.newFuture();\nJsonObjectRequest request = new JsonObjectRequest(URL, null, future, future);\nrequestQueue.add(request);\n\ntry {\n  JSONObject response = future.get(10, TimeUnit.SECONDS); // Blocks for at most 10 seconds.\n} catch (InterruptedException e) {\n  // Exception handling\n} catch (ExecutionException e) {\n  // Exception handling\n}\n</code></pre>\n", "title": "Can I do a synchronous request with volley?", "tags": ["java", "android", "android-volley"], "link": "http://stackoverflow.com/questions/16904741/can-i-do-a-synchronous-request-with-volley/17035421#17035421", "question_id": 16904741, "answer_id": 17035421}, {"body": "<p>Note @Matthews answer is correct BUT if you are on another thread and you do a volley call when you have no internet, <strong>your error callback will be called on the main thread, but the thread you are on will be blocked FOREVER.</strong> (Therefore if that thread is an IntentService, you will never be able to send another message to it and your service will be basically dead).</p>\n\n<p>Use the version of <code>get()</code> that has a timeout <code>future.get(30, TimeUnit.SECONDS)</code> and catch the error to exit your thread.</p>\n\n<p>To match @Mathews answer:</p>\n\n<pre><code>        try {\n            return future.get(30, TimeUnit.SECONDS);\n        } catch (InterruptedException e) {\n            // exception handling\n        } catch (ExecutionException e) {\n            // exception handling\n        } catch (TimeoutException e) {\n            // exception handling\n        }\n</code></pre>\n\n<p>Below I wrapped it in a method &amp; use a different request:</p>\n\n<pre><code>   /**\n     * Runs a blocking Volley request\n     *\n     * @param method        get/put/post etc\n     * @param url           endpoint\n     * @param errorListener handles errors\n     * @return the input stream result or exception: NOTE returns null once the onErrorResponse listener has been called\n     */\n    public InputStream runInputStreamRequest(int method, String url, Response.ErrorListener errorListener) {\n        RequestFuture&lt;InputStream&gt; future = RequestFuture.newFuture();\n        InputStreamRequest request = new InputStreamRequest(method, url, future, errorListener);\n        getQueue().add(request);\n        try {\n            return future.get(REQUEST_TIMEOUT, TimeUnit.SECONDS);\n        } catch (InterruptedException e) {\n            Log.e(\"Retrieve cards api call interrupted.\", e);\n            errorListener.onErrorResponse(new VolleyError(e));\n        } catch (ExecutionException e) {\n            Log.e(\"Retrieve cards api call failed.\", e);\n            errorListener.onErrorResponse(new VolleyError(e));\n        } catch (TimeoutException e) {\n            Log.e(\"Retrieve cards api call timed out.\", e);\n            errorListener.onErrorResponse(new VolleyError(e));\n        }\n        return null;\n    }\n</code></pre>\n", "title": "Can I do a synchronous request with volley?", "tags": ["java", "android", "android-volley"], "link": "http://stackoverflow.com/questions/16904741/can-i-do-a-synchronous-request-with-volley/23808857#23808857", "question_id": 16904741, "answer_id": 23808857}, {"body": "<p>I use a lock to achieve that effect now im wondering if its correct my way\nanyone want to comment ?</p>\n\n<pre><code>// as a field of the class where i wan't to do the synchronous `volley` call   \nObject mLock = new Object();\n\n\n// need to have the error and success listeners notifyin\nfinal boolean[] finished = {false};\n            Response.Listener&lt;ArrayList&lt;Integer&gt;&gt; responseListener = new Response.Listener&lt;ArrayList&lt;Integer&gt;&gt;() {\n                @Override\n                public void onResponse(ArrayList&lt;Integer&gt; response) {\n                    synchronized (mLock) {\n                        System.out.println();\n                        finished[0] = true;\n                        mLock.notify();\n\n                    }\n\n\n                }\n            };\n\n            Response.ErrorListener errorListener = new Response.ErrorListener() {\n                @Override\n                public void onErrorResponse(VolleyError error) {\n                    synchronized (mLock) {\n                        System.out.println();\n                        finished[0] = true;\n                        System.out.println();\n                        mLock.notify();\n                    }\n                }\n            };\n\n// after adding the Request to the volley queue\nsynchronized (mLock) {\n            try {\n                while(!finished[0]) {\n                    mLock.wait();\n                }\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n</code></pre>\n", "title": "Can I do a synchronous request with volley?", "tags": ["java", "android", "android-volley"], "link": "http://stackoverflow.com/questions/16904741/can-i-do-a-synchronous-request-with-volley/26785535#26785535", "question_id": 16904741, "answer_id": 26785535}, {"body": "<p>As a complementary observation to both @Blundells and @Mathews answers, I'm not sure <em>any</em> call is delivered to anything <em>but</em> the main thread by Volley.</p>\n\n<p><strong>The Source</strong></p>\n\n<p>Having a look at the <a href=\"https://android.googlesource.com/platform/frameworks/volley/+/master/src/main/java/com/android/volley/RequestQueue.java\" rel=\"nofollow\"><code>RequestQueue</code> implementation</a> it seems the <code>RequestQueue</code> is using a <code>NetworkDispatcher</code> to execute the request and a <code>ResponseDelivery</code> to deliver the result (the <code>ResponseDelivery</code> is injected into the <code>NetworkDispatcher</code>). The <code>ResponseDelivery</code> is in turn created with a <code>Handler</code> spawn from the main thread (somewhere around line 112 in the <code>RequestQueue</code> implementation).</p>\n\n<p>Somewhere about line 135 in the <a href=\"https://android.googlesource.com/platform/frameworks/volley/+/master/src/main/java/com/android/volley/NetworkDispatcher.java\" rel=\"nofollow\"><code>NetworkDispatcher</code> implementation</a> it seems like also successful results are delivered through the same <code>ResponseDelivery</code> as any errors. Again; a <code>ResponseDelivery</code> based on a <code>Handler</code> spawn from the main thread.</p>\n\n<p><strong>Rationale</strong></p>\n\n<p>For the use-case where a request is to be made from an <code>IntentService</code> it's fair to assume that the thread of the service should block until we have a response from Volley (to guarantee a living runtime scope to handle the result in).</p>\n\n<p><strong>Suggested solutions</strong></p>\n\n<p>One approach would be to override the default way a <a href=\"https://android.googlesource.com/platform/frameworks/volley/+/master/src/main/java/com/android/volley/toolbox/Volley.java\" rel=\"nofollow\"><code>RequestQueue</code> is created</a>, where an alternative constructor is used instead, injecting a <code>ResponseDelivery</code> which spawns from the <em>current</em> thread rather than the main thread. I haven't investigated the implications of this, however.</p>\n", "title": "Can I do a synchronous request with volley?", "tags": ["java", "android", "android-volley"], "link": "http://stackoverflow.com/questions/16904741/can-i-do-a-synchronous-request-with-volley/27962964#27962964", "question_id": 16904741, "answer_id": 27962964}, {"body": "<p>It is probably recommended to use the Futures, but if for whatever reason you don't want to, instead of cooking your own synchronized blocking thing you should use a <code>java.util.concurrent.CountDownLatch</code>. So that would work like this..</p>\n\n<pre><code>//I'm running this in an instrumentation test, in real life you'd ofc obtain the context differently...\nfinal Context context = InstrumentationRegistry.getTargetContext();\nfinal RequestQueue queue = Volley.newRequestQueue(context);\nfinal CountDownLatch countDownLatch = new CountDownLatch(1);\nfinal Object[] responseHolder = new Object[1];\n\nfinal StringRequest stringRequest = new StringRequest(Request.Method.GET, \"http://google.com\", new Response.Listener&lt;String&gt;() {\n    @Override\n    public void onResponse(String response) {\n        responseHolder[0] = response;\n        countDownLatch.countDown();\n    }\n}, new Response.ErrorListener() {\n    @Override\n    public void onErrorResponse(VolleyError error) {\n        responseHolder[0] = error;\n        countDownLatch.countDown();\n    }\n});\nqueue.add(stringRequest);\ntry {\n    countDownLatch.await();\n} catch (InterruptedException e) {\n    throw new RuntimeException(e);\n}\nif (responseHolder[0] instanceof VolleyError) {\n    final VolleyError volleyError = (VolleyError) responseHolder[0];\n    //TODO: Handle error...\n} else {\n    final String response = (String) responseHolder[0];\n    //TODO: Handle response...\n}\n</code></pre>\n", "title": "Can I do a synchronous request with volley?", "tags": ["java", "android", "android-volley"], "link": "http://stackoverflow.com/questions/16904741/can-i-do-a-synchronous-request-with-volley/38117214#38117214", "question_id": 16904741, "answer_id": 38117214}], "creation_date": 1370289092, "score": 91, "link": "http://stackoverflow.com/questions/16904741/can-i-do-a-synchronous-request-with-volley", "question_id": 16904741}, {"body": "<p>I installed Android Studio, but when I edit my layout files, I can't find live preview! I just see an XML file. How can I see my layout in graphical view?</p>\n\n<p>Update:\nThis is how it looks like in my case:</p>\n\n<p><img src=\"http://i.stack.imgur.com/A6M7G.jpg\" alt=\"enter image description here\"></p>\n", "tags": ["java", "android", "android-studio"], "title": "Where is Android Studio layout preview?", "answers": [{"body": "<p>You should have a <code>Design</code> button next to the <code>Text</code> button under the xml text editor:</p>\n\n<p><img src=\"http://i.stack.imgur.com/L3Fgq.jpg\" alt=\"enter image description here\"></p>\n\n<p>Or you can use the <code>Preview</code> button in the upper right corner to add a preview window next to the XML code:</p>\n\n<p><img src=\"http://i.stack.imgur.com/t4rkn.jpg\" alt=\"enter image description here\"></p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>If you dont have it, then do this: <code>View</code> -> <code>Tool Windows</code> -> <code>Preview</code></p>\n\n<p><img src=\"http://i.stack.imgur.com/y5VnU.jpg\" alt=\"enter image description here\"></p>\n", "title": "Where is Android Studio layout preview?", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/16660039/where-is-android-studio-layout-preview/16660112#16660112", "question_id": 16660039, "answer_id": 16660112}, {"body": "<p>If you want to see the <strong>live preview</strong>, in the right part of the screen you should have a button call <strong>Preview</strong> that show/hide the live preview. </p>\n\n<p>If what you want is to use the WYSISYG editor mode, in the bottom of the editor there is a tab that switch between <strong>XML</strong> mode and <strong>WYSISYG</strong> mode.</p>\n\n<p>This works in the same way both in IntelliJ and Android Studio.</p>\n", "title": "Where is Android Studio layout preview?", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/16660039/where-is-android-studio-layout-preview/16660139#16660139", "question_id": 16660039, "answer_id": 16660139}, {"body": "<p>Several people seem to have the same problem. The issue is that the IDE only displays the preview if editing a layout file in the <code>res/layout*</code> directory of an Android project.</p>\n\n<p>In particular, it won't show if editing a file in <code>build/res/layout*</code> since those are not <strong>source</strong> directory but <strong>output</strong> directory. In your case, you are editing a file in the <code>build/</code> directory...</p>\n\n<p>The Resource folder is set automatically, and can be viewed (and changed) in Project Structure > Modules > [Module name] > Android > Resources directory.</p>\n", "title": "Where is Android Studio layout preview?", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/16660039/where-is-android-studio-layout-preview/16669780#16669780", "question_id": 16660039, "answer_id": 16669780}, {"body": "<p>As etienne said be sure that the XML file you are looking at is in <code>src/main/res/layout</code></p>\n\n<p>I had the same issue. If you're in a layout file in <code>build</code> directory, you won't see a preview, nor will you have it as an option to enable. I wish Google had a slight warning for it.</p>\n", "title": "Where is Android Studio layout preview?", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/16660039/where-is-android-studio-layout-preview/16825056#16825056", "question_id": 16660039, "answer_id": 16825056}, {"body": "<p>File>>setting>>Compiler>>JavaCompiler At \"Project bytecode version(leave blank for jdk default):\" choose your jdk.</p>\n\n<p><img src=\"http://i.stack.imgur.com/CejhC.jpg\" alt=\"enter image description here\"></p>\n", "title": "Where is Android Studio layout preview?", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/16660039/where-is-android-studio-layout-preview/16851109#16851109", "question_id": 16660039, "answer_id": 16851109}, {"body": "<p>I had the same issue and resolved by editing the t file in src>main>res>layout. You can choose between Test and Design mode at the bottom of editor. </p>\n\n<p>Quite simple if we know where to look for !!! spend few hours figuring it out!!!  </p>\n", "title": "Where is Android Studio layout preview?", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/16660039/where-is-android-studio-layout-preview/18692691#18692691", "question_id": 16660039, "answer_id": 18692691}, {"body": "<p>In case that helps anyone, I had the same issue today where the 'design / text' tabs were missing. I had switched to the dark theme and thought maybe that was the issue, so went back to Preferences / Appearance (under IDE settings) switched back to Default Theme, and that reset everything correctly for me. I could also then switch again to Darcula theme and the tabs were still there, so seems like switching themes is a way to reset the IDE windows/tabs.</p>\n", "title": "Where is Android Studio layout preview?", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/16660039/where-is-android-studio-layout-preview/18736057#18736057", "question_id": 16660039, "answer_id": 18736057}, {"body": "<p>Navigate to file -> Project structure -> modules -> click on green plus button to add a module.</p>\n\n<p>Select new module -> select Application Module in Android option -> give a module name -> next -> next -> finish</p>\n\n<p>Select project that to be include in module -> click apply -> okay</p>\n\n<p>Now you will be able to see the full project structure; then open the module form project window (the left panel), select res then select layout -> your layout name(.xml).</p>\n\n<p>Now you will be able to see the design view and text view both...</p>\n", "title": "Where is Android Studio layout preview?", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/16660039/where-is-android-studio-layout-preview/18928115#18928115", "question_id": 16660039, "answer_id": 18928115}, {"body": "<p>The following worked for me:</p>\n\n<p>-> file </p>\n\n<p>-> settings </p>\n\n<p>-> plugins </p>\n\n<p>-> disable the android support plugin </p>\n\n<p>-> you will be prompted to restart </p>\n\n<p>-> once restarted re-enable the plugin and other dependency plugins that might have been disabled in the process</p>\n\n<p>-> you will be prompted to restart once again. Hopefully when android studio restarts the second time the preview should render. </p>\n", "title": "Where is Android Studio layout preview?", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/16660039/where-is-android-studio-layout-preview/22075191#22075191", "question_id": 16660039, "answer_id": 22075191}, {"body": "<p>Got the same problem after importing my Eclipse ADT project to Android Studio. Text and Desing tabs where missing. </p>\n\n<p>Found my Event Log windows reads \n\"Frameworks detected: Android framework is detected in the project Configure\"</p>\n\n<p>I click the hyperlink provided and everything was fixed, Text and Desing tabs became visible and functional</p>\n", "title": "Where is Android Studio layout preview?", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/16660039/where-is-android-studio-layout-preview/25532641#25532641", "question_id": 16660039, "answer_id": 25532641}, {"body": "<p>I had this problem a couple hours ago when I exported my projects from Eclipse to Android Studio. Unfortunately, the top answers here didn't work for me. </p>\n\n<p>Anyway, creating a new project instead of opening an old one did the trick for me as what Thomas Kaliakos mentioned on his comment <a href=\"http://stackoverflow.com/q/17365015/2792573\">here</a></p>\n\n<blockquote>\n  <blockquote>\n    <p><em>I had to mess around with the project..and at some point it worked. I don't know how though. My guess would be that creating a new project and adding your source code would work every time. Sorry for not being very clear, but honestly I was surprized even myself that it worked.</em> \u2013  Thomas Kaliakos Oct 15 '13 at 4:08</p>\n  </blockquote>\n</blockquote>\n", "title": "Where is Android Studio layout preview?", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/16660039/where-is-android-studio-layout-preview/26576183#26576183", "question_id": 16660039, "answer_id": 26576183}, {"body": "<ol>\n<li><p>Select MainActivity.java file from the left pane, as shown in the red colored rectangle.</p></li>\n<li><p>Left click the XML Tag icon as shown in the red colored circle.</p></li>\n<li><p>Select the \"activity_main.xml(layout)\" option shown highlighted in the below figure.</p></li>\n</ol>\n\n<p><img src=\"http://i.stack.imgur.com/jx2P6.png\" alt=\"enter image description here\"></p>\n", "title": "Where is Android Studio layout preview?", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/16660039/where-is-android-studio-layout-preview/28599932#28599932", "question_id": 16660039, "answer_id": 28599932}, {"body": "<p>Guys everything is very simple... \n1. Just input in search \"Preview\" and it will show you a single result. Just click on it and preview appears again :)\n2. Pull the right-side line and window will appear. It's kinda resize.</p>\n\n<p><img src=\"http://i.stack.imgur.com/dwri6.png\" alt=\"Preview window in android studio\"></p>\n\n<p>Happy coding!</p>\n", "title": "Where is Android Studio layout preview?", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/16660039/where-is-android-studio-layout-preview/29471742#29471742", "question_id": 16660039, "answer_id": 29471742}, {"body": "<p>Go to File->Invalidate Caches / Restart.</p>\n\n<p>This will solve the issue.</p>\n", "title": "Where is Android Studio layout preview?", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/16660039/where-is-android-studio-layout-preview/37269738#37269738", "question_id": 16660039, "answer_id": 37269738}], "creation_date": 1369093937, "score": 90, "link": "http://stackoverflow.com/questions/16660039/where-is-android-studio-layout-preview", "question_id": 16660039}, {"body": "<p><code>String</code> variable contains a file name, <code>C:\\Hello\\AnotherFolder\\The File Name.PDF</code>. How do I only get the file name <code>The File Name.PDF</code> as a String?</p>\n\n<p>I planned to split the string, but that is not the optimal solution.</p>\n", "tags": ["java", "file", "filenames", "filepath"], "title": "How do I get the file name from a String containing the Absolute file path?", "answers": [{"body": "<p>just use <strong><a href=\"http://docs.oracle.com/javase/6/docs/api/java/io/File.html#getName%28%29\">File.getName()</a></strong></p>\n\n<pre><code>File f = new File(\"C:\\\\Hello\\\\AnotherFolder\\\\The File Name.PDF\");\nSystem.out.println(f.getName());\n</code></pre>\n\n<p>using <strong>String methods</strong>:</p>\n\n<pre><code>  File f = new File(\"C:\\\\Hello\\\\AnotherFolder\\\\The File Name.PDF\");  \nSystem.out.println(f.getAbsolutePath().substring(f.getAbsolutePath().lastIndexOf(\"\\\\\")+1));\n</code></pre>\n", "title": "How do I get the file name from a String containing the Absolute file path?", "tags": ["java", "file", "filenames", "filepath"], "link": "http://stackoverflow.com/questions/14526260/how-do-i-get-the-file-name-from-a-string-containing-the-absolute-file-path/14526289#14526289", "question_id": 14526260, "answer_id": 14526289}, {"body": "<p>I'm going to clarify this first. The question is literally about the path </p>\n\n<pre><code>C:\\Hello\\AnotherFolder\\The File Name.PDF\n</code></pre>\n\n<p>It literally has the separator <code>\\</code>. That is what we are interested in. </p>\n\n<p>You can do </p>\n\n<pre><code>String fullPath = \"C:\\\\Hello\\\\AnotherFolder\\\\The File Name.PDF\";\nint index = fullPath.lastIndexOf(\"\\\\\");\nString fileName = fullPath.substring(index + 1);\n</code></pre>\n\n<p>If we had used this path on a linux machine with <code>File.separator</code> instead of <code>\\\\</code>, it would have failed.</p>\n", "title": "How do I get the file name from a String containing the Absolute file path?", "tags": ["java", "file", "filenames", "filepath"], "link": "http://stackoverflow.com/questions/14526260/how-do-i-get-the-file-name-from-a-string-containing-the-absolute-file-path/14526313#14526313", "question_id": 14526260, "answer_id": 14526313}, {"body": "<p>Alternative using <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html\"><code>Path</code></a> (Java 7+):</p>\n\n<pre><code>Path p = Paths.get(\"C:\\\\Hello\\\\AnotherFolder\\\\The File Name.PDF\");\nString file = p.getFileName().toString();\n</code></pre>\n\n<p>Note that splitting the string on <code>\\\\</code> is platform dependent as the file separator might vary. <code>Path#getName</code> takes care of that issue for you.</p>\n", "title": "How do I get the file name from a String containing the Absolute file path?", "tags": ["java", "file", "filenames", "filepath"], "link": "http://stackoverflow.com/questions/14526260/how-do-i-get-the-file-name-from-a-string-containing-the-absolute-file-path/14526362#14526362", "question_id": 14526260, "answer_id": 14526362}, {"body": "<p>you can use path = C:\\Hello\\AnotherFolder\\TheFileName.PDF</p>\n\n<pre><code>String strPath = path.substring(path.lastIndexOf(\"\\\\\")+1, path.length());\n</code></pre>\n", "title": "How do I get the file name from a String containing the Absolute file path?", "tags": ["java", "file", "filenames", "filepath"], "link": "http://stackoverflow.com/questions/14526260/how-do-i-get-the-file-name-from-a-string-containing-the-absolute-file-path/24931281#24931281", "question_id": 14526260, "answer_id": 24931281}, {"body": "<p>The other answers didn't quite work for my specific scenario, where I am reading paths that have originated from an OS different to my current one. To elaborate I am saving email attachments saved from a Windows platform on a Linux server. The filename returned from the JavaMail API is something like 'C:\\temp\\hello.xls'</p>\n\n<p>The solution I ended up with:</p>\n\n<pre><code>String filenameWithPath = \"C:\\\\temp\\\\hello.xls\";\nString[] tokens = filenameWithPath.split(\"[\\\\\\\\|/]\");\nString filename = tokens[tokens.length - 1];\n</code></pre>\n", "title": "How do I get the file name from a String containing the Absolute file path?", "tags": ["java", "file", "filenames", "filepath"], "link": "http://stackoverflow.com/questions/14526260/how-do-i-get-the-file-name-from-a-string-containing-the-absolute-file-path/33536963#33536963", "question_id": 14526260, "answer_id": 33536963}, {"body": "<p>A method without any dependency and takes care of <strong>..</strong> , <strong>.</strong> and duplicate separators.</p>\n\n<pre><code>public static String getFileName(String filePath) {\n    if( filePath==null || filePath.length()==0 )\n        return \"\";\n    filePath = filePath.replaceAll(\"[/\\\\\\\\]+\", \"/\");\n    int len = filePath.length(),\n        upCount = 0;\n    while( len&gt;0 ) {\n        //remove trailing separator\n        if( filePath.charAt(len-1)=='/' ) {\n            len--;\n            if( len==0 )\n                return \"\";\n        }\n        int lastInd = filePath.lastIndexOf('/', len-1);\n        String fileName = filePath.substring(lastInd+1, len);\n        if( fileName.equals(\".\") ) {\n            len--;\n        }\n        else if( fileName.equals(\"..\") ) {\n            len -= 2;\n            upCount++;\n        }\n        else {\n            if( upCount==0 )\n                return fileName;\n            upCount--;\n            len -= fileName.length();\n        }\n    }\n    return \"\";\n}\n</code></pre>\n\n<p>Test case:</p>\n\n<pre><code>@Test\npublic void testGetFileName() {\n    assertEquals(\"\", getFileName(\"/\"));\n    assertEquals(\"\", getFileName(\"////\"));\n    assertEquals(\"\", getFileName(\"//C//.//../\"));\n    assertEquals(\"\", getFileName(\"C//.//../\"));\n    assertEquals(\"C\", getFileName(\"C\"));\n    assertEquals(\"C\", getFileName(\"/C\"));\n    assertEquals(\"C\", getFileName(\"/C/\"));\n    assertEquals(\"C\", getFileName(\"//C//\"));\n    assertEquals(\"C\", getFileName(\"/A/B/C/\"));\n    assertEquals(\"C\", getFileName(\"/A/B/C\"));\n    assertEquals(\"C\", getFileName(\"/C/./B/../\"));\n    assertEquals(\"C\", getFileName(\"//C//./B//..///\"));\n    assertEquals(\"user\", getFileName(\"/user/java/..\"));\n    assertEquals(\"C:\", getFileName(\"C:\"));\n    assertEquals(\"C:\", getFileName(\"/C:\"));\n    assertEquals(\"java\", getFileName(\"C:\\\\Program Files (x86)\\\\java\\\\bin\\\\..\"));\n    assertEquals(\"C.ext\", getFileName(\"/A/B/C.ext\"));\n    assertEquals(\"C.ext\", getFileName(\"C.ext\"));\n}\n</code></pre>\n\n<p>Maybe getFileName is a bit confusing, because it returns directory names also. It returns the name of file or last directory in a path. </p>\n", "title": "How do I get the file name from a String containing the Absolute file path?", "tags": ["java", "file", "filenames", "filepath"], "link": "http://stackoverflow.com/questions/14526260/how-do-i-get-the-file-name-from-a-string-containing-the-absolute-file-path/36283419#36283419", "question_id": 14526260, "answer_id": 36283419}, {"body": "<p>Using <code>FilenameUtils</code> in <a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-1.4/org/apache/commons/io/FilenameUtils.html#getName(java.lang.String)\" rel=\"nofollow\">Apache Commons IO</a> :</p>\n\n<pre><code>String name1 = FilenameUtils.getName(\"/ab/cd/xyz.txt\");\nString name2 = FilenameUtils.getName(\"c:\\\\ab\\\\cd\\\\xyz.txt\");\n</code></pre>\n", "title": "How do I get the file name from a String containing the Absolute file path?", "tags": ["java", "file", "filenames", "filepath"], "link": "http://stackoverflow.com/questions/14526260/how-do-i-get-the-file-name-from-a-string-containing-the-absolute-file-path/39336223#39336223", "question_id": 14526260, "answer_id": 39336223}], "creation_date": 1359131944, "score": 89, "link": "http://stackoverflow.com/questions/14526260/how-do-i-get-the-file-name-from-a-string-containing-the-absolute-file-path", "question_id": 14526260}, {"body": "<p>I searched and went through most of the questions here, none of which seemed to solve my situation.</p>\n\n<p>I want to save a file to the internal storage by getting the text inputted from EditText. Then I want the same file to return the inputted text in String form and save it to another String which is to be used later.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>package com.omm.easybalancerecharge;\n\n\nimport android.app.Activity;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.net.Uri;\nimport android.os.Bundle;\nimport android.telephony.TelephonyManager;\nimport android.view.Menu;\nimport android.view.View;\nimport android.view.View.OnClickListener;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.TextView;\n\npublic class MainActivity extends Activity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        final EditText num = (EditText) findViewById(R.id.sNum);\n        Button ch = (Button) findViewById(R.id.rButton);\n        TelephonyManager operator = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);\n        String opname = operator.getNetworkOperatorName();\n        TextView status = (TextView) findViewById(R.id.setStatus);\n        final EditText ID = (EditText) findViewById(R.id.IQID);\n        Button save = (Button) findViewById(R.id.sButton);\n\n        final String myID = \"\"; //When Reading The File Back, I Need To Store It In This String For Later Use\n\n        save.setOnClickListener(new OnClickListener() {\n\n            @Override\n            public void onClick(View v) {\n                // TODO Auto-generated method stub\n\n                //Get Text From EditText \"ID\" And Save It To Internal Memory\n            }\n        });\n        if (opname.contentEquals(\"zain SA\")) {\n            status.setText(\"Your Network Is: \" + opname);\n        } else {\n            status.setText(\"No Network\");\n        }\n        ch.setOnClickListener(new OnClickListener() {\n\n            @Override\n            public void onClick(View v) {\n                // TODO Auto-generated method stub\n\n                //Read From The Saved File Here And Append It To String \"myID\"\n\n\n                String hash = Uri.encode(\"#\");\n                Intent intent = new Intent(Intent.ACTION_CALL);\n                intent.setData(Uri.parse(\"tel:*141*\" + /*Use The String With Data Retrieved Here*/ num.getText()\n                        + hash));\n                startActivity(intent);\n            }\n        });\n    }\n</code></pre>\n\n<p>I have included comments to help you further analyze my points as to where I want the operations to be done/variables to be used.</p>\n", "tags": ["java", "android", "string", "file-io"], "title": "How To Read/Write String From A File In Android", "answers": [{"body": "<p>check the below code.</p>\n\n<p>Reading from a file in the filesystem.</p>\n\n<pre><code>FileInputStream fis = null;\n    try {\n\n        fis = context.openFileInput(fileName);\n        InputStreamReader isr = new InputStreamReader(fis);\n        // READ STRING OF UNKNOWN LENGTH\n        StringBuilder sb = new StringBuilder();\n        char[] inputBuffer = new char[2048];\n        int l;\n        // FILL BUFFER WITH DATA\n        while ((l = isr.read(inputBuffer)) != -1) {\n            sb.append(inputBuffer, 0, l);\n        }\n        // CONVERT BYTES TO STRING\n        String readString = sb.toString();\n        fis.close();\n\n    catch (Exception e) {\n\n    } finally {\n        if (fis != null) {\n            fis = null;\n        }\n    }\n</code></pre>\n\n<p>below code is to write the file in to internal filesystem.</p>\n\n<pre><code>FileOutputStream fos = null;\n    try {\n\n        fos = context.openFileOutput(fileName, Context.MODE_PRIVATE);\n        fos.write(stringdatatobestoredinfile.getBytes());\n        fos.flush();\n        fos.close();\n\n    } catch (Exception e) {\n\n    } finally {\n        if (fos != null) {\n            fos = null;\n        }\n    }\n</code></pre>\n\n<p>I think this will help you.</p>\n", "title": "How To Read/Write String From A File In Android", "tags": ["java", "android", "string", "file-io"], "link": "http://stackoverflow.com/questions/14376807/how-to-read-write-string-from-a-file-in-android/14376975#14376975", "question_id": 14376807, "answer_id": 14376975}, {"body": "<p>Hope this might be useful to you.</p>\n\n<p>Write File:</p>\n\n<pre><code>private void writeToFile(String data,Context context) {\n    try {\n        OutputStreamWriter outputStreamWriter = new OutputStreamWriter(context.openFileOutput(\"config.txt\", Context.MODE_PRIVATE));\n        outputStreamWriter.write(data);\n        outputStreamWriter.close();\n    }\n    catch (IOException e) {\n        Log.e(\"Exception\", \"File write failed: \" + e.toString());\n    } \n}\n</code></pre>\n\n<p>Read File:</p>\n\n<pre><code>private String readFromFile(Context context) {\n\n    String ret = \"\";\n\n    try {\n        InputStream inputStream = context.openFileInput(\"config.txt\");\n\n        if ( inputStream != null ) {\n            InputStreamReader inputStreamReader = new InputStreamReader(inputStream);\n            BufferedReader bufferedReader = new BufferedReader(inputStreamReader);\n            String receiveString = \"\";\n            StringBuilder stringBuilder = new StringBuilder();\n\n            while ( (receiveString = bufferedReader.readLine()) != null ) {\n                stringBuilder.append(receiveString);\n            }\n\n            inputStream.close();\n            ret = stringBuilder.toString();\n        }\n    }\n    catch (FileNotFoundException e) {\n        Log.e(\"login activity\", \"File not found: \" + e.toString());\n    } catch (IOException e) {\n        Log.e(\"login activity\", \"Can not read file: \" + e.toString());\n    }\n\n    return ret;\n}\n</code></pre>\n", "title": "How To Read/Write String From A File In Android", "tags": ["java", "android", "string", "file-io"], "link": "http://stackoverflow.com/questions/14376807/how-to-read-write-string-from-a-file-in-android/14377185#14377185", "question_id": 14376807, "answer_id": 14377185}, {"body": "<pre><code>public static void writeStringAsFile(final String fileContents, String fileName) {\n        Context context = App.instance.getApplicationContext();\n        try {\n            FileWriter out = new FileWriter(new File(context.getFilesDir(), fileName));\n            out.write(fileContents);\n            out.close();\n        } catch (IOException e) {\n            Logger.logError(TAG, e);\n        }\n    }\n\n    public static String readFileAsString(String fileName) {\n        Context context = App.instance.getApplicationContext();\n        StringBuilder stringBuilder = new StringBuilder();\n        String line;\n        BufferedReader in = null;\n\n        try {\n            in = new BufferedReader(new FileReader(new File(context.getFilesDir(), fileName)));\n            while ((line = in.readLine()) != null) stringBuilder.append(line);\n\n        } catch (FileNotFoundException e) {\n            Logger.logError(TAG, e);\n        } catch (IOException e) {\n            Logger.logError(TAG, e);\n        } \n\n        return stringBuilder.toString();\n    }\n</code></pre>\n", "title": "How To Read/Write String From A File In Android", "tags": ["java", "android", "string", "file-io"], "link": "http://stackoverflow.com/questions/14376807/how-to-read-write-string-from-a-file-in-android/17814072#17814072", "question_id": 14376807, "answer_id": 17814072}, {"body": "<p>For those looking for a general strategy for reading and writing a string to file:</p>\n\n<p><strong>First, get a file object</strong></p>\n\n<p>You'll need the storage path. For the internal storage, use:</p>\n\n<pre><code>File path = context.getFilesDir();\n</code></pre>\n\n<p>For the external storage (SD card), use:</p>\n\n<pre><code>File path = context.getExternalFilesDir(null);\n</code></pre>\n\n<p>Then create your file object:</p>\n\n<pre><code>File file = new File(path, \"my-file-name.txt\");\n</code></pre>\n\n<p><strong>Write a string to the file</strong></p>\n\n<pre><code>FileOutputStream stream = new FileOutputStream(file);\ntry {\n    stream.write(\"text-to-write\".getBytes());\n} finally {\n    stream.close();\n}\n</code></pre>\n\n<p>Or with Google Guava</p>\n\n<pre><code>Files.write(\"text-to-write\", file, \"UTF-8\");\n</code></pre>\n\n<p><strong>Read the file to a string</strong></p>\n\n<pre><code>int length = (int) file.length();\n\nbyte[] bytes = new byte[length];\n\nFileInputStream in = new FileInputStream(file);\ntry {\n    in.read(bytes);\n} finally {\n    in.close();\n}\n\nString contents = new String(bytes);   \n</code></pre>\n\n<p>Or if you are using Google Guava</p>\n\n<pre><code>String contents = Files.toString(file,\"UTF-8\");\n</code></pre>\n\n<p>For completeness I'll mention </p>\n\n<pre><code>String contents = new Scanner(file).useDelimiter(\"\\\\A\").next();\n</code></pre>\n\n<p>which requires no libraries, but benchmarks 50% - 400% slower than the other options (in various tests on my Nexus 5).</p>\n\n<p><strong>Notes</strong></p>\n\n<p>For each of these strategies, you'll be asked to catch an IOException.  </p>\n\n<p>The default character encoding on Android is UTF-8.  </p>\n\n<p>If you are using external storage, you'll need to add to your manifest either:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\"/&gt;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"/&gt;\n</code></pre>\n\n<p>Write permission implies read permission, so you don't need both.</p>\n", "title": "How To Read/Write String From A File In Android", "tags": ["java", "android", "string", "file-io"], "link": "http://stackoverflow.com/questions/14376807/how-to-read-write-string-from-a-file-in-android/22092971#22092971", "question_id": 14376807, "answer_id": 22092971}, {"body": "<p>Just a a bit modifications on reading string from a file method for more performance</p>\n\n<pre><code>private String readFromFile(Context context, String fileName) {\n    if (context == null) {\n        return null;\n    }\n\n    String ret = \"\";\n\n    try {\n        InputStream inputStream = context.openFileInput(fileName);\n\n        if ( inputStream != null ) {\n            InputStreamReader inputStreamReader = new InputStreamReader(inputStream);               \n\n            int size = inputStream.available();\n            char[] buffer = new char[size];\n\n            inputStreamReader.read(buffer);\n\n            inputStream.close();\n            ret = new String(buffer);\n        }\n    }catch (Exception e) {\n        e.printStackTrace();\n    }\n\n    return ret;\n}\n</code></pre>\n", "title": "How To Read/Write String From A File In Android", "tags": ["java", "android", "string", "file-io"], "link": "http://stackoverflow.com/questions/14376807/how-to-read-write-string-from-a-file-in-android/27498663#27498663", "question_id": 14376807, "answer_id": 27498663}, {"body": "<p>To append an existing file.</p>\n\n<pre><code>  File file = new File(persistPath);\n  BufferedWriter out = new BufferedWriter(new FileWriter(file, true), 1024);\n  out.write(str);\n  out.newLine();\n  out.close(); \n</code></pre>\n", "title": "How To Read/Write String From A File In Android", "tags": ["java", "android", "string", "file-io"], "link": "http://stackoverflow.com/questions/14376807/how-to-read-write-string-from-a-file-in-android/35451165#35451165", "question_id": 14376807, "answer_id": 35451165}, {"body": "<p>I'm a bit of a beginner and struggled getting this to work today.</p>\n\n<p>Below is the class that I ended up with. It works but I was wondering how imperfect my solution is. Anyway, I was hoping some of you more experienced folk might be willing to have a look at my IO class and give me some tips. Cheers!</p>\n\n<pre><code>public class HighScore {\n    File data = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + File.separator);\n    File file = new File(data, \"highscore.txt\");\n    private int highScore = 0;\n\n    public int readHighScore() {\n        try {\n            BufferedReader br = new BufferedReader(new FileReader(file));\n            try {\n                highScore = Integer.parseInt(br.readLine());\n                br.close();\n            } catch (NumberFormatException | IOException e) {\n                e.printStackTrace();\n            }\n        } catch (FileNotFoundException e) {\n            try {\n                file.createNewFile();\n            } catch (IOException ioe) {\n                ioe.printStackTrace();\n            }\n            e.printStackTrace();\n        }\n        return highScore;\n    }\n\n    public void writeHighScore(int highestScore) {\n        try {\n            BufferedWriter bw = new BufferedWriter(new FileWriter(file));\n            bw.write(String.valueOf(highestScore));\n            bw.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n", "title": "How To Read/Write String From A File In Android", "tags": ["java", "android", "string", "file-io"], "link": "http://stackoverflow.com/questions/14376807/how-to-read-write-string-from-a-file-in-android/37132384#37132384", "question_id": 14376807, "answer_id": 37132384}], "creation_date": 1358418002, "score": 88, "link": "http://stackoverflow.com/questions/14376807/how-to-read-write-string-from-a-file-in-android", "question_id": 14376807}, {"body": "<p>In my code, the program does something depending on the text entered by the user. My code looks like:</p>\n\n<pre><code>switch (name) {\n        case text1: {\n            //blah\n            break;\n        }\n        case text2: {\n            //blah\n            break;\n        }\n        case text3: {\n            //blah\n            break;\n        }\n        case text4: {\n            //blah\n            break;\n        }\n</code></pre>\n\n<p>However, the code inside cases <code>text1</code> and <code>text4</code> is the same. I was therefore wondering if it would be possible for me to implement something like</p>\n\n<pre><code>case text1||text4: {\n            //blah\n            break;\n        }\n</code></pre>\n\n<p>I know that the <code>||</code> operator won't work in the case statement but is there something similar I can use.</p>\n", "tags": ["java", "switch-statement"], "title": "Using two values for one switch case statement", "answers": [{"body": "<p>You can use have both <code>CASE</code> statements as follows.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>  case text1: \n  case text4:{\n            //blah\n            break;\n        }\n</code></pre>\n\n<p>SEE THIS EXAMPLE:The code example calculates the number of days in a particular month:</p>\n\n<pre><code>class SwitchDemo {\n    public static void main(String[] args) {\n\n        int month = 2;\n        int year = 2000;\n        int numDays = 0;\n\n        switch (month) {\n            case 1:\n            case 3:\n            case 5:\n            case 7:\n            case 8:\n            case 10:\n            case 12:\n                numDays = 31;\n                break;\n            case 4:\n            case 6:\n            case 9:\n            case 11:\n                numDays = 30;\n                break;\n            case 2:\n                if (((year % 4 == 0) &amp;&amp; \n                     !(year % 100 == 0))\n                     || (year % 400 == 0))\n                    numDays = 29;\n                else\n                    numDays = 28;\n                break;\n            default:\n                System.out.println(\"Invalid month.\");\n                break;\n        }\n        System.out.println(\"Number of Days = \"\n                           + numDays);\n    }\n}\n</code></pre>\n\n<p>This is the output from the code:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Number of Days = 29\n</code></pre>\n\n<p>FALLTHROUGH:</p>\n\n<blockquote>\n  <p>Another point of interest is the break statement. Each break statement\n  terminates the enclosing switch statement. Control flow continues with\n  the first statement following the switch block. The break statements\n  are necessary because without them, statements in switch blocks <code>fall\n  through</code>: All statements after the matching case label are executed in\n  sequence, regardless of the expression of subsequent case labels,\n  until a break statement is encountered.</p>\n</blockquote>\n\n<p>EXAMPLE CODE:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class SwitchFallThrough {\n\n    public static void main(String[] args) {\n        java.util.ArrayList&lt;String&gt; futureMonths =\n            new java.util.ArrayList&lt;String&gt;();\n\n        int month = 8;\n\n        switch (month) {\n            case 1:  futureMonths.add(\"January\");\n            case 2:  futureMonths.add(\"February\");\n            case 3:  futureMonths.add(\"March\");\n            case 4:  futureMonths.add(\"April\");\n            case 5:  futureMonths.add(\"May\");\n            case 6:  futureMonths.add(\"June\");\n            case 7:  futureMonths.add(\"July\");\n            case 8:  futureMonths.add(\"August\");\n            case 9:  futureMonths.add(\"September\");\n            case 10: futureMonths.add(\"October\");\n            case 11: futureMonths.add(\"November\");\n            case 12: futureMonths.add(\"December\");\n            default: break;\n        }\n\n        if (futureMonths.isEmpty()) {\n            System.out.println(\"Invalid month number\");\n        } else {\n            for (String monthName : futureMonths) {\n               System.out.println(monthName);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>This is the output from the code:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>August\nSeptember\nOctober\nNovember\nDecember\n</code></pre>\n\n<p>Using Strings in switch Statements</p>\n\n<blockquote>\n  <p>In Java SE 7 and later, you can use a String object in the switch\n  statement's expression. The following code example, ,\n  displays the number of the month based on the value of the String\n  named month:</p>\n</blockquote>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class StringSwitchDemo {\n\n    public static int getMonthNumber(String month) {\n\n        int monthNumber = 0;\n\n        if (month == null) {\n            return monthNumber;\n        }\n\n        switch (month.toLowerCase()) {\n            case \"january\":\n                monthNumber = 1;\n                break;\n            case \"february\":\n                monthNumber = 2;\n                break;\n            case \"march\":\n                monthNumber = 3;\n                break;\n            case \"april\":\n                monthNumber = 4;\n                break;\n            case \"may\":\n                monthNumber = 5;\n                break;\n            case \"june\":\n                monthNumber = 6;\n                break;\n            case \"july\":\n                monthNumber = 7;\n                break;\n            case \"august\":\n                monthNumber = 8;\n                break;\n            case \"september\":\n                monthNumber = 9;\n                break;\n            case \"october\":\n                monthNumber = 10;\n                break;\n            case \"november\":\n                monthNumber = 11;\n                break;\n            case \"december\":\n                monthNumber = 12;\n                break;\n            default: \n                monthNumber = 0;\n                break;\n        }\n\n        return monthNumber;\n    }\n\n    public static void main(String[] args) {\n\n        String month = \"August\";\n\n        int returnedMonthNumber =\n            StringSwitchDemo.getMonthNumber(month);\n\n        if (returnedMonthNumber == 0) {\n            System.out.println(\"Invalid month\");\n        } else {\n            System.out.println(returnedMonthNumber);\n        }\n    }\n}\n</code></pre>\n\n<p>The output from this code is 8.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html\">FROM Java Docs</a></p>\n", "title": "Using two values for one switch case statement", "tags": ["java", "switch-statement"], "link": "http://stackoverflow.com/questions/16706716/using-two-values-for-one-switch-case-statement/16706729#16706729", "question_id": 16706716, "answer_id": 16706729}, {"body": "<p>you can do like: </p>\n\n<pre><code>case text1:\ncase text4: {\n            //blah\n            break;\n}\n</code></pre>\n", "title": "Using two values for one switch case statement", "tags": ["java", "switch-statement"], "link": "http://stackoverflow.com/questions/16706716/using-two-values-for-one-switch-case-statement/16706733#16706733", "question_id": 16706716, "answer_id": 16706733}, {"body": "<p>Just do</p>\n\n<pre><code>case text1: case text4: \n     do stuff;\n     break;\n</code></pre>\n", "title": "Using two values for one switch case statement", "tags": ["java", "switch-statement"], "link": "http://stackoverflow.com/questions/16706716/using-two-values-for-one-switch-case-statement/16706751#16706751", "question_id": 16706716, "answer_id": 16706751}, {"body": "<p>The <code>case</code> values are just codeless \"goto\" points that can share the same entry point:</p>\n\n<pre><code>case text1:\ncase text4: \n    //blah\n    break;\n</code></pre>\n\n<p>Note that the braces are redundant.</p>\n", "title": "Using two values for one switch case statement", "tags": ["java", "switch-statement"], "link": "http://stackoverflow.com/questions/16706716/using-two-values-for-one-switch-case-statement/16706772#16706772", "question_id": 16706716, "answer_id": 16706772}, {"body": "<p>The brackets are unnecessary. Just do</p>\n\n<pre><code>case text1:\ncase text4:\n  doSomethingHere();\n  break;\ncase text2:\n  doSomethingElse()\n  break;\n</code></pre>\n\n<p>If anyone is curious, this is called a case fallthrough. The ability to do this is the reason why <code>break;</code> is necessary to end case statements.  For more information, see the wikipedia article <a href=\"http://en.wikipedia.org/wiki/Switch_statement\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Switch_statement</a>.</p>\n", "title": "Using two values for one switch case statement", "tags": ["java", "switch-statement"], "link": "http://stackoverflow.com/questions/16706716/using-two-values-for-one-switch-case-statement/16707803#16707803", "question_id": 16706716, "answer_id": 16707803}, {"body": "<p>The <code>fallthrough</code> answers by others are good ones. </p>\n\n<p>However another approach would be extract methods out of the contents of your case statements and then just call the appropriate method from each case.</p>\n\n<p>In the example below, both case 'text1' and case 'text4' behave the same:</p>\n\n<pre><code>switch (name) {\n        case text1: {\n            method1();\n            break;\n        }\n        case text2: {\n            method2();\n            break;\n        }\n        case text3: {\n            method3();\n            break;\n        }\n        case text4: {\n            method1();\n            break;\n        }\n</code></pre>\n\n<p>I personally find this style of writing case statements more maintainable and slightly more readable, especially when the methods you call have good descriptive names.</p>\n", "title": "Using two values for one switch case statement", "tags": ["java", "switch-statement"], "link": "http://stackoverflow.com/questions/16706716/using-two-values-for-one-switch-case-statement/16714470#16714470", "question_id": 16706716, "answer_id": 16714470}, {"body": "<p>Simplest trick it to use same method from both cases.</p>\n\n<pre><code> switch (name) \n{\ncase text1: \n{\nmethod1();\nbreak;\n}\ncase text2: \n{\nmethod2();\nbreak;\n}\ncase text3:\n{\nmethod3();\nbreak;\n}\ncase text4: \n{\nmethod1();\nbreak;\n}\n}\n\nprivate void method1()\n{\n//do the logic which is same\n}\n</code></pre>\n", "title": "Using two values for one switch case statement", "tags": ["java", "switch-statement"], "link": "http://stackoverflow.com/questions/16706716/using-two-values-for-one-switch-case-statement/16728744#16728744", "question_id": 16706716, "answer_id": 16728744}, {"body": "<p>Fall through approach is the best one i feel.</p>\n\n<pre><code>case text1:\ncase text4: {\n        //Yada yada\n        break;\n} \n</code></pre>\n", "title": "Using two values for one switch case statement", "tags": ["java", "switch-statement"], "link": "http://stackoverflow.com/questions/16706716/using-two-values-for-one-switch-case-statement/17064186#17064186", "question_id": 16706716, "answer_id": 17064186}, {"body": "<p>The case values are just codeless \"goto\" points that can share the same entry point:</p>\n\n<blockquote>\n  <p>case text1:<br/>\n  case text4: {<br/> \n     //Do something <br/>\n     break;<br/>\n  }<br/></p>\n</blockquote>\n\n<p>Note that the braces are redundant.</p>\n", "title": "Using two values for one switch case statement", "tags": ["java", "switch-statement"], "link": "http://stackoverflow.com/questions/16706716/using-two-values-for-one-switch-case-statement/22397296#22397296", "question_id": 16706716, "answer_id": 22397296}], "creation_date": 1369289454, "score": 86, "link": "http://stackoverflow.com/questions/16706716/using-two-values-for-one-switch-case-statement", "question_id": 16706716}, {"body": "<p>When using the <em>same JDK</em> (i.e. the same <code>javac</code> executable), are the generated class files always identical? Can there be a difference depending on the <em>operating system</em> or <em>hardware</em>? Except of the JDK version, could there be any other factors resulting in differences? Are there any compiler options to avoid differences? Is a difference only possibly in theory or does Oracle's <code>javac</code> actually produce different class files for the same input and compiler options?</p>\n\n<p><strong>Update 1</strong> I'm interested in the <em>generation</em>, i.e. compiler output, not whether a class file can be <em>run</em> on various platforms.</p>\n\n<p><strong>Update 2</strong> By 'Same JDK', I also mean the same <code>javac</code> executable.</p>\n\n<p><strong>Update 3</strong> Distinction between theoretical difference and practical difference in Oracle's compilers.</p>\n\n<p>[EDIT, adding paraphrased question]<br>\n\"What are the circumstances where the same javac executable,when run on a different platform, will produce different bytecode?\" </p>\n", "tags": ["java", "compiler-construction", "javac"], "title": "Is the creation of Java class files deterministic?", "answers": [{"body": "<p>There is no obligation for the compilers to produce the same bytecode on each platform. You should consult the different vendors' <code>javac</code> utility to have a specific answer.</p>\n\n<hr>\n\n<p>I will show a practical example for this with file ordering.</p>\n\n<p>Let's say that we have 2 jar files: <code>my1.jar</code> and <code>My2.jar</code>. They're put in the <code>lib</code> directory, side-by-side. The compiler reads them in alphabetical order (since this is <code>lib</code>), but the order is <code>my1.jar</code>, <code>My2.jar</code> when the file system is case insensitive , and <code>My2.jar</code>, <code>my1.jar</code> if it is case sensitive.</p>\n\n<p>The  <code>my1.jar</code> has a class <code>A.class</code> with a method </p>\n\n<pre><code>public class A {\n     public static void a(String s) {}\n}\n</code></pre>\n\n<p>The <code>My2.jar</code> has the same <code>A.class</code>, but with different method signature (accepts <code>Object</code>):</p>\n\n<pre><code>public class A {\n     public static void a(Object o) {}\n}\n</code></pre>\n\n<p>It is clear that if you have a call </p>\n\n<pre><code>String s = \"x\"; \nA.a(s); \n</code></pre>\n\n<p>it will compile a method call with different signature in different cases. So, <strong>depending on your filesystem case sensitiveness, you will get different class as a result.</strong></p>\n", "title": "Is the creation of Java class files deterministic?", "tags": ["java", "compiler-construction", "javac"], "link": "http://stackoverflow.com/questions/14984984/is-the-creation-of-java-class-files-deterministic/14985246#14985246", "question_id": 14984984, "answer_id": 14985246}, {"body": "<p>Most probably, the answer is \"yes\", but to have precise answer, one does need to search for some keys or guid generation during compiling. </p>\n\n<p>I can't remember the situation where this occurs. For example to have ID for serializing purposes it is hardcoded, i.e. generated by programmer or IDE.</p>\n\n<p>P.S. Also JNI can matter.</p>\n\n<p>P.P.S. I found that <code>javac</code> is itself written in java. This means that it is identical on different platforms. Hence it would not generate different code without a reason. So, it can do this only with native calls.</p>\n", "title": "Is the creation of Java class files deterministic?", "tags": ["java", "compiler-construction", "javac"], "link": "http://stackoverflow.com/questions/14984984/is-the-creation-of-java-class-files-deterministic/14985250#14985250", "question_id": 14984984, "answer_id": 14985250}, {"body": "<p>Short Answer - <strong>NO</strong></p>\n\n<hr>\n\n<h3>Long Answer</h3>\n\n<p>They <code>bytecode</code> need not be the same for different platform. It's the JRE (Java Runtime Environment) which know how exactly to execute the bytecode.</p>\n\n<p>If you go through the <a href=\"http://docs.oracle.com/javase/specs/jvms/se5.0/html/VMSpecTOC.doc.html\">Java VM specification</a> you'll come to know that this needs not to be true that the bytecode is same for different platforms.</p>\n\n<p>Going through <a href=\"http://docs.oracle.com/javase/specs/jvms/se5.0/html/ClassFile.doc.html\">the class file format</a>, it shows the structure of a class file as</p>\n\n<pre><code>ClassFile {\n    u4 magic;\n    u2 minor_version;\n    u2 major_version;\n    u2 constant_pool_count;\n    cp_info constant_pool[constant_pool_count-1];\n    u2 access_flags;\n    u2 this_class;\n    u2 super_class;\n    u2 interfaces_count;\n    u2 interfaces[interfaces_count];\n    u2 fields_count;\n    field_info fields[fields_count];\n    u2 methods_count;\n    method_info methods[methods_count];\n    u2 attributes_count;\n    attribute_info attributes[attributes_count];\n}\n</code></pre>\n\n<p>Checking about the minor and major version</p>\n\n<blockquote>\n  <p><strong>minor_version, major_version</strong></p>\n  \n  <p>The values of the minor_version and\n  major_version items are the minor and major version numbers of this\n  class file.Together, a major and a minor version number determine the\n  version of the class file format. If a class file has major version\n  number M and minor version number m, we denote the version of its\n  class file format as M.m. Thus, class file format versions may be\n  ordered lexicographically, for example, 1.5 &lt; 2.0 &lt; 2.1. A Java\n  virtual machine implementation can support a class file format of\n  version v if and only if v lies in some contiguous range Mi.0  v \n  Mj.m. Only Sun can specify what range of versions a Java virtual\n  machine implementation conforming to a certain release level of the\n  Java platform may support.1</p>\n</blockquote>\n\n<p>Reading more through the footnotes</p>\n\n<blockquote>\n  <p>1 The Java virtual machine implementation of Sun's JDK release 1.0.2\n  supports class file format versions 45.0 through 45.3 inclusive. Sun's\n  JDK releases 1.1.X can support class file formats of versions in the\n  range 45.0 through 45.65535 inclusive. Implementations of version 1.2\n  of the Java 2 platform can support class file formats of versions in\n  the range 45.0 through 46.0 inclusive.</p>\n</blockquote>\n\n<p>So, investigating all this shows that the class files generated on different platforms need not be identical.</p>\n", "title": "Is the creation of Java class files deterministic?", "tags": ["java", "compiler-construction", "javac"], "link": "http://stackoverflow.com/questions/14984984/is-the-creation-of-java-class-files-deterministic/14985279#14985279", "question_id": 14984984, "answer_id": 14985279}, {"body": "<p>I believe that, if you use the same JDK, the generated byte code will always be the same, without relation with the harware and OS used. The byte code production is done by the java compiler, that uses a deterministic algorithm to \"transform\" the source code into byte code. So, the output will always be the same. In these conditions, only a update on the source code will affect the output.</p>\n", "title": "Is the creation of Java class files deterministic?", "tags": ["java", "compiler-construction", "javac"], "link": "http://stackoverflow.com/questions/14984984/is-the-creation-of-java-class-files-deterministic/14985283#14985283", "question_id": 14984984, "answer_id": 14985283}, {"body": "<p><code>Java allows you write/compile code on one platform and run on different platform.</code>\n<strong>AFAIK</strong>; this will be possible only when class file generated on different platform is same or technically same i.e. identical.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>What i mean by <strong>technically same</strong> comment is that. They don't need to be exactly same if you compare byte by byte. </p>\n\n<p><strong>So as per specification .class file of a class on different platforms don't need to match byte-by-byte.</strong></p>\n", "title": "Is the creation of Java class files deterministic?", "tags": ["java", "compiler-construction", "javac"], "link": "http://stackoverflow.com/questions/14984984/is-the-creation-of-java-class-files-deterministic/14985350#14985350", "question_id": 14984984, "answer_id": 14985350}, {"body": "<p>Let's put it this way:</p>\n\n<p>I can easily produce an entirely conforming Java compiler that never produces the same <code>.class</code> file twice, given the same <code>.java</code> file.</p>\n\n<p>I could do this by tweaking all kinds of bytecode construction or by simply adding superfluous attributes to my method (which is allowed).</p>\n\n<p>Given that the <em>specification</em> does not <em>require</em> the compiler to produce byte-for-byte identical class files, I'd <em>avoid depending</em>  such a result.</p>\n\n<p><em>However</em>, the few times that I've checked, compiling the same source file with the same compiler with the same switches (and the same libraries!) <em>did</em> result in the same <code>.class</code> files.</p>\n\n<p><em>Update:</em> I've recently stumbled over <a href=\"https://blogs.oracle.com/darcy/entry/project_coin_string_switch_anatomy\">this interesting blog post about the implementation of <code>switch</code> on <code>String</code> in Java 7</a>. In this blog post, there are some relevant parts, that I'll quote here (emphasis mine):</p>\n\n<blockquote>\n  <p>In order to make the compiler's output predictable and repeatable, the maps and sets used in these data structures are <code>LinkedHashMap</code>s and <code>LinkedHashSet</code>s rather than just <code>HashMaps</code> and <code>HashSets</code>. <strong>In terms of functional correctness of code generated</strong> during a given compile, <strong>using <code>HashMap</code> and <code>HashSet</code> would be fine</strong>; the iteration order does not matter. However, <em>we find it beneficial to have <code>javac</code>'s output not vary based on implementation details of system classes</em> .</p>\n</blockquote>\n\n<p>This pretty clearly illustrates the issue: The compiler is <em>not required</em> to act in a deterministic manner, as long as it matches the spec. The compiler developers, however, realize that it's <em>generally</em> a good idea to <em>try</em> (provided it's not too expensive, probably).</p>\n", "title": "Is the creation of Java class files deterministic?", "tags": ["java", "compiler-construction", "javac"], "link": "http://stackoverflow.com/questions/14984984/is-the-creation-of-java-class-files-deterministic/14985784#14985784", "question_id": 14984984, "answer_id": 14985784}, {"body": "<p>Overall, I'd have to say there is no guarantee that the same source will produce the same bytecode when compiled by the same compiler but on a different platform.</p>\n\n<p>I'd look into scenarios involving different languages (code-pages), for example Windows with Japanese language support. Think multi-byte characters; unless the compiler always assumes it needs to support all languages it might optimize for 8-bit ASCII.</p>\n\n<p>There is a section on binary compatibility in the <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-13.html\" rel=\"nofollow\">Java Language Specification</a>.</p>\n\n<blockquote>\n  <p>Within the framework of Release-to-Release Binary Compatibility in SOM\n  (Forman, Conner, Danforth, and Raper, Proceedings of OOPSLA '95), Java\n  programming language binaries are binary compatible under all relevant\n  transformations that the authors identify (with some caveats with\n  respect to the addition of instance variables). Using their scheme,\n  here is a list of some important binary compatible changes that the\n  Java programming language supports: </p>\n  \n  <p>\u2022Reimplementing existing methods, constructors, and initializers to\n  improve performance. </p>\n  \n  <p>\u2022Changing methods or constructors to return values on inputs for which\n  they previously either threw exceptions that normally should not occur\n  or failed by going into an infinite loop or causing a deadlock. </p>\n  \n  <p>\u2022Adding new fields, methods, or constructors to an existing class or\n  interface. </p>\n  \n  <p>\u2022Deleting private fields, methods, or constructors of a class. </p>\n  \n  <p>\u2022When an entire package is updated, deleting default (package-only)\n  access fields, methods, or constructors of classes and interfaces in\n  the package. </p>\n  \n  <p>\u2022Reordering the fields, methods, or constructors in an existing type\n  declaration. </p>\n  \n  <p>\u2022Moving a method upward in the class hierarchy. </p>\n  \n  <p>\u2022Reordering the list of direct superinterfaces of a class or\n  interface. </p>\n  \n  <p>\u2022Inserting new class or interface types in the type hierarchy. </p>\n  \n  <p>This chapter specifies minimum standards for binary compatibility\n  guaranteed by all implementations. The Java programming language\n  guarantees compatibility when binaries of classes and interfaces are\n  mixed that are not known to be from compatible sources, but whose\n  sources have been modified in the compatible ways described here. Note\n  that we are discussing compatibility between releases of an\n  application. A discussion of compatibility among releases of the Java\n  SE platform is beyond the scope of this chapter.</p>\n</blockquote>\n", "title": "Is the creation of Java class files deterministic?", "tags": ["java", "compiler-construction", "javac"], "link": "http://stackoverflow.com/questions/14984984/is-the-creation-of-java-class-files-deterministic/14986861#14986861", "question_id": 14984984, "answer_id": 14986861}, {"body": "<p>Firstly, there's absolutely no such guarantee in the spec. A conforming compiler could stamp the time of compilation into the generated class file as an additional (custom) attribute, and the class file would still be correct. It would however produce a byte-level different file on every single build, and trivially so.</p>\n\n<p>Secondly, even without such nasty tricks about, there's no reason to expect a compiler to do exactly the same thing twice in a row unless both its configuration and its input are identical in the two cases. The spec <em>does</em> describe the source filename as one of the standard attributes, and adding blank lines to the source file could well change the line number table.</p>\n\n<p>Thirdly, I've never encountered any difference in build due to the host platform (other than that which was attributable to differences in what was on the classpath). The code which would vary based on platform (i.e., native code libraries) isn't part of the class file, and the actual generation of native code from the bytecode happens after the class is loaded.</p>\n\n<p>Fourthly (and most importantly) it <em>reeks of a bad process smell</em> (like a code smell, but for how you act on the code) to want to know this. Version the source if possible, not the build, and if you do need to version the build, version at the whole-component level and not on individual class files. For preference, use a CI server (such as Jenkins) to manage the process of turning source into runnable code.</p>\n", "title": "Is the creation of Java class files deterministic?", "tags": ["java", "compiler-construction", "javac"], "link": "http://stackoverflow.com/questions/14984984/is-the-creation-of-java-class-files-deterministic/14991457#14991457", "question_id": 14984984, "answer_id": 14991457}, {"body": "<p>For the question:</p>\n\n<blockquote>\n  <p>\"What are the circumstances where the same javac executable,when run on a different platform, will produce different bytecode?\"</p>\n</blockquote>\n\n<p>The <a href=\"http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javac.html\" rel=\"nofollow\">Cross-Compilation example</a> shows how we can use the Javac option:-target version</p>\n\n<p>This flag generates class files which are compatible with the Java version we specify while invoking this command. Hence the class files will differ depending on the attributes we supply during the compaliation using this option.</p>\n", "title": "Is the creation of Java class files deterministic?", "tags": ["java", "compiler-construction", "javac"], "link": "http://stackoverflow.com/questions/14984984/is-the-creation-of-java-class-files-deterministic/15108514#15108514", "question_id": 14984984, "answer_id": 15108514}, {"body": "<p>I would put it another way.</p>\n\n<p>First, I think the question is not about being deterministic:</p>\n\n<p>Of course it is deterministic: randomness is hard to achieve in computer science, and there is no reason a compiler would introduce it here for any reason.</p>\n\n<p>Second, if you reformulate it by \"how similar are bytecode files for a same sourcecode file ?\", then <strong><em>No</strong>, you can't rely on the fact that they will be similar</em>. </p>\n\n<p>A good way of making sure of this, is by leaving the .class (or .pyc in my case) in your git stage. You'll realize that among different computers in your team, git notices changes between .pyc files, when no changes were brought to the .py file (and .pyc recompiled anyway).</p>\n\n<p>At least that's what I observed. So put *.pyc and *.class in your .gitignore !</p>\n", "title": "Is the creation of Java class files deterministic?", "tags": ["java", "compiler-construction", "javac"], "link": "http://stackoverflow.com/questions/14984984/is-the-creation-of-java-class-files-deterministic/15109355#15109355", "question_id": 14984984, "answer_id": 15109355}, {"body": "<p>There are two questions.  </p>\n\n<pre><code>Can there be a difference depending on the operating system or hardware? \n</code></pre>\n\n<p>This is a theoretical question, and the answer is clearly, yes, there <strong>can</strong> be.  As others have said, the specification does not require the compiler to produce byte-for-byte identical class files.</p>\n\n<p>Even if every compiler currently in existence produced the same byte code in all circumstances (different hardware, etc.), the answer tomorrow might be different.  If you never plan to update javac or your operating system, you could test that version's behavior in your particular circumstances, but the results might be different if you go from, for example, Java 7 Update 11 to Java 7 Update 15.  </p>\n\n<pre><code>What are the circumstances where the same javac executable, when run on a different platform, will produce different bytecode?\n</code></pre>\n\n<p>That's unknowable.  </p>\n\n<p>I don't know if configuration management is your reason for asking the question, but it's an understandable reason to care.  Comparing byte codes is a legitimate IT control, but only to determine if the class files changed, not top determine if the source files did.  </p>\n", "title": "Is the creation of Java class files deterministic?", "tags": ["java", "compiler-construction", "javac"], "link": "http://stackoverflow.com/questions/14984984/is-the-creation-of-java-class-files-deterministic/15113407#15113407", "question_id": 14984984, "answer_id": 15113407}], "creation_date": 1361377847, "score": 86, "link": "http://stackoverflow.com/questions/14984984/is-the-creation-of-java-class-files-deterministic", "question_id": 14984984}, {"body": "<p>Why do Double.parseDouble(null) and Integer.parseInt(null) throw different exceptions?</p>\n\n<p>Is this a historical accident or intentional? The documentation clearly states two types of exceptions for <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#parseDouble%28java.lang.String%29\"><code>Double.parseDouble(...)</code></a> and one for <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29\"><code>Integer.parseInt()</code></a>, but it seems inconsistent:</p>\n\n<pre><code>Integer.parseInt(null); // throws java.lang.NumberFormatException: null\n</code></pre>\n\n<p>However </p>\n\n<pre><code>Double.parseDouble(null); // throws java.lang.NullPointerException\n</code></pre>\n", "tags": ["java", "exception", "nullpointerexception", "numberformatexception"], "title": "Why do Double.parseDouble(null) and Integer.parseInt(null) throw different exceptions?", "answers": [{"body": "<p><strong>Note: everything in this post is in the source of Java7-b147</strong></p>\n\n<p><code>Double.parseDouble()</code> goes into a Sun library (in <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/sun/misc/FloatingDecimal.java#FloatingDecimal.readJavaFormatString%28java.lang.String%29\"><code>sun.misc.FloatingDecimal</code></a>) the first important thing that happens is:</p>\n\n<pre><code>in = in.trim(); // don't fool around with white space.\n                // throws NullPointerException if null\n</code></pre>\n\n<p><code>Integer.parseInt()</code> is done manually in the <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/Integer.java#Integer.parseInt%28java.lang.String%2Cint%29\"><code>Integer</code></a> class. The first important thing that happens is:</p>\n\n<pre><code>if (s == null) {\n    throw new NumberFormatException(\"null\");\n}\n</code></pre>\n\n<p>I would guess there are two different authors.</p>\n", "title": "Why do Double.parseDouble(null) and Integer.parseInt(null) throw different exceptions?", "tags": ["java", "exception", "nullpointerexception", "numberformatexception"], "link": "http://stackoverflow.com/questions/16324831/why-do-double-parsedoublenull-and-integer-parseintnull-throw-different-excep/16324963#16324963", "question_id": 16324831, "answer_id": 16324963}, {"body": "<blockquote>\n  <p>It is reasonable to expect the same exceptions to be thrown for null; however, these api's are very old and may not be able to be changed at this point.</p>\n</blockquote>\n\n<p>And:</p>\n\n<blockquote>\n  <p>Since the exception behavior is long-standing and specified in the JavaDoc, it is impractical to change either method's behavior at this time.  Closing as will not fix.</p>\n</blockquote>\n\n<p>As taken from: <a href=\"http://bugs.sun.com/view_bug.do?bug_id=4787924\">Bug Report: Integer.parseInt() and Double.parseDouble() throw different exceptions on null.</a></p>\n\n<p>Like others have stated: It's likely made by different authors.</p>\n", "title": "Why do Double.parseDouble(null) and Integer.parseInt(null) throw different exceptions?", "tags": ["java", "exception", "nullpointerexception", "numberformatexception"], "link": "http://stackoverflow.com/questions/16324831/why-do-double-parsedoublenull-and-integer-parseintnull-throw-different-excep/16325020#16325020", "question_id": 16324831, "answer_id": 16325020}], "creation_date": 1367435816, "score": 84, "link": "http://stackoverflow.com/questions/16324831/why-do-double-parsedoublenull-and-integer-parseintnull-throw-different-excep", "question_id": 16324831}, {"body": "<p>I am running a Maven project which is also a dynamic web project. I have used all spring libraries in maven. I created <code>web.xml</code>, but when I start my tomcat 7 server I am getting the following message:</p>\n\n<pre><code>INFO: validateJarFile(C:\\Users\\mibvzd0\\workspace\\.metadata\\.plugins\\\norg.eclipse.wst.server.core\\tmp2\\wtpwebapps\\hapi_hl7\\WEB-INF\\lib\\\nservlet-api-2.4.jar) - jar not loaded.\nSee Servlet Spec 2.3, section 9.7.2. Offending class: javax/servlet/Servlet.class\n</code></pre>\n\n<p>I tried deleting the servlet from webapp/lib, but it didn't work. Let me know what should be done in my case.</p>\n", "tags": ["java", "eclipse", "maven", "tomcat7"], "title": "jar not loaded. See Servlet Spec 2.3, section 9.7.2. Offending class: javax/servlet/Servlet.class", "answers": [{"body": "<p>The servlet API .jar file must not be embedded inside the webapp since, obviously, the container already has these classes in its classpath: it implements the interfaces contained in this jar.</p>\n\n<p>The dependency should be in the <code>provided</code> scope, rather than the default <code>compile</code> scope, in your Maven pom:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n    &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n    &lt;version&gt;3.1.0&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n", "title": "jar not loaded. See Servlet Spec 2.3, section 9.7.2. Offending class: javax/servlet/Servlet.class", "tags": ["java", "eclipse", "maven", "tomcat7"], "link": "http://stackoverflow.com/questions/15601469/jar-not-loaded-see-servlet-spec-2-3-section-9-7-2-offending-class-javax-serv/15601606#15601606", "question_id": 15601469, "answer_id": 15601606}, {"body": "<p>Check Inside the Following Directory for the jar file el-api.jar  :C:\\apache-tomcat-7.0.39\\lib\\el-api.jar  if it exists then in this directory of your web application  WEB-INF\\lib\\el-api.jar   the jar should be removed </p>\n", "title": "jar not loaded. See Servlet Spec 2.3, section 9.7.2. Offending class: javax/servlet/Servlet.class", "tags": ["java", "eclipse", "maven", "tomcat7"], "link": "http://stackoverflow.com/questions/15601469/jar-not-loaded-see-servlet-spec-2-3-section-9-7-2-offending-class-javax-serv/16196688#16196688", "question_id": 15601469, "answer_id": 16196688}, {"body": "<p>You get this warning message when the servlet api jar file has already been loaded in the container and you try to load it once again from <code>lib</code> directory.</p>\n\n<blockquote>\n  <p>The Servlet specs say you are not allowed to have <strong><em>servlet.jar</em></strong> in\n  your webapps <code>lib</code> directory.</p>\n</blockquote>\n\n<ul>\n<li>Get rid of the warning message by simply removing <code>servlet.jar</code> from your <code>lib</code> directory.</li>\n<li>If you don't find the jar in the <code>lib</code> directory scan for your build path and remove the jar.</li>\n</ul>\n\n<hr>\n\n<pre><code>C:\\Program Files\\Apache Software Foundation\\Tomcat 7.0\\webapps\\project\\WEB-INF\\lib\n</code></pre>\n\n<p>If you are running a maven project, change the <code>javax.servlet-api</code> dependency to scope <code>provided</code> in you pom.xml since the container already provided the servlet jar in itself.</p>\n", "title": "jar not loaded. See Servlet Spec 2.3, section 9.7.2. Offending class: javax/servlet/Servlet.class", "tags": ["java", "eclipse", "maven", "tomcat7"], "link": "http://stackoverflow.com/questions/15601469/jar-not-loaded-see-servlet-spec-2-3-section-9-7-2-offending-class-javax-serv/16710657#16710657", "question_id": 15601469, "answer_id": 16710657}, {"body": "<p>when your URL pattern is wrong, this error may be occurred.</p>\n\n<p>eg. If you wrote @WebServlet(\"login\"), this error will be shown. The correct one is @WebServlet(\"/login\").</p>\n", "title": "jar not loaded. See Servlet Spec 2.3, section 9.7.2. Offending class: javax/servlet/Servlet.class", "tags": ["java", "eclipse", "maven", "tomcat7"], "link": "http://stackoverflow.com/questions/15601469/jar-not-loaded-see-servlet-spec-2-3-section-9-7-2-offending-class-javax-serv/24218301#24218301", "question_id": 15601469, "answer_id": 24218301}, {"body": "<p>You may find the following windows command line useful in tracking down the offending jar file.  it creates an index of all the class files in all the jars in the folder.  Execute from within the lib folder of your deployed app, then search the index.txt file for the offending class.</p>\n\n<pre><code>for /r %X in (*.jar) do (echo %X &amp; jar -tf %X) &gt;&gt; index.txt\n</code></pre>\n", "title": "jar not loaded. See Servlet Spec 2.3, section 9.7.2. Offending class: javax/servlet/Servlet.class", "tags": ["java", "eclipse", "maven", "tomcat7"], "link": "http://stackoverflow.com/questions/15601469/jar-not-loaded-see-servlet-spec-2-3-section-9-7-2-offending-class-javax-serv/26852373#26852373", "question_id": 15601469, "answer_id": 26852373}, {"body": "<p><a href=\"http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope\" rel=\"nofollow\">Maven Dependency Scope</a> </p>\n\n<blockquote>\n  <p><strong>provided</strong> : This is much like compile, but indicates you <strong><em>expect</em></strong> the <strong>JDK</strong> or a <strong>container</strong> to provide the dependency at runtime. For example,\n  when building a web application for the Java Enterprise Edition, you\n  would set the dependency on the <strong><em>Servlet</em> API</strong> and related Java EE APIs\n  to scope <strong>provided</strong> because <strong><em>the web container provides those classes</em></strong>.\n  This scope is only available on the compilation and test classpath,\n  and is not transitive.</p>\n</blockquote>\n", "title": "jar not loaded. See Servlet Spec 2.3, section 9.7.2. Offending class: javax/servlet/Servlet.class", "tags": ["java", "eclipse", "maven", "tomcat7"], "link": "http://stackoverflow.com/questions/15601469/jar-not-loaded-see-servlet-spec-2-3-section-9-7-2-offending-class-javax-serv/27691772#27691772", "question_id": 15601469, "answer_id": 27691772}, {"body": "<p>To fix it, set the <strong>scope</strong> to <strong>provided</strong>. This tells Maven use code servlet-api.jar for compiling and testing only, but NOT include it in the WAR file. The deployed container will \u201cprovide\u201d the servlet-api.jar at runtime.</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n    &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n    &lt;version&gt;2.5&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n", "title": "jar not loaded. See Servlet Spec 2.3, section 9.7.2. Offending class: javax/servlet/Servlet.class", "tags": ["java", "eclipse", "maven", "tomcat7"], "link": "http://stackoverflow.com/questions/15601469/jar-not-loaded-see-servlet-spec-2-3-section-9-7-2-offending-class-javax-serv/29529116#29529116", "question_id": 15601469, "answer_id": 29529116}, {"body": "<p>I've been struggling with this issue and I've tried numerous \"solutions\".</p>\n\n<p>However, in the end, the only one that worked and it actually took a few seconds to do it was to: <strong>delete and add back new server instance</strong>!</p>\n\n<p>Basically, I right clicked on my Tomcat server in Eclipse under Servers and deleted it. Next, I've added a new Tomcat server. Cleaned and redeployed the application and I got rid of this error.</p>\n", "title": "jar not loaded. See Servlet Spec 2.3, section 9.7.2. Offending class: javax/servlet/Servlet.class", "tags": ["java", "eclipse", "maven", "tomcat7"], "link": "http://stackoverflow.com/questions/15601469/jar-not-loaded-see-servlet-spec-2-3-section-9-7-2-offending-class-javax-serv/29669901#29669901", "question_id": 15601469, "answer_id": 29669901}, {"body": "<p>Remove <code>servlet.jar</code> from source <code>web-inf/lib</code> folder as it is available in tomcat <code>lib</code> folder then it works fine</p>\n", "title": "jar not loaded. See Servlet Spec 2.3, section 9.7.2. Offending class: javax/servlet/Servlet.class", "tags": ["java", "eclipse", "maven", "tomcat7"], "link": "http://stackoverflow.com/questions/15601469/jar-not-loaded-see-servlet-spec-2-3-section-9-7-2-offending-class-javax-serv/31988563#31988563", "question_id": 15601469, "answer_id": 31988563}, {"body": "<p><em>Exclusions and <code>provided</code> dependencies will not work in child projects.</em></p>\n\n<p>If you are using inheritance in Maven projects you <em>must</em> include this configuration on the parent <code>pom.xml</code> file. You  will have a <code>&lt;parent&gt;...&lt;/parent&gt;</code> section in your pom.xml <em>if you are using inheritance</em>. So you will have something like this in your parent <code>pom.xml</code>:</p>\n\n<pre><code>&lt;groupId&gt;some.groupId&lt;/groupId&gt;\n&lt;version&gt;1.0&lt;/version&gt;\n&lt;artifactId&gt;someArtifactId&lt;/artifactId&gt;\n&lt;packaging&gt;pom&lt;/packaging&gt;\n&lt;modules&gt;\n    &lt;module&gt;child-module-1&lt;/module&gt;\n    &lt;module&gt;child-module-2&lt;/module&gt;\n&lt;/modules&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n        &lt;version&gt;2.5&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n        &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\n        &lt;version&gt;2.1&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n", "title": "jar not loaded. See Servlet Spec 2.3, section 9.7.2. Offending class: javax/servlet/Servlet.class", "tags": ["java", "eclipse", "maven", "tomcat7"], "link": "http://stackoverflow.com/questions/15601469/jar-not-loaded-see-servlet-spec-2-3-section-9-7-2-offending-class-javax-serv/33222718#33222718", "question_id": 15601469, "answer_id": 33222718}, {"body": "<p>The JAX-WS dependency library \u201cjaxws-rt.jar\u201d is missing.</p>\n\n<p>Go here <a href=\"http://jax-ws.java.net/\" rel=\"nofollow\">http://jax-ws.java.net/</a>.\nDownload JAX-WS RI distribution.\nUnzip it and copy \u201cjaxws-rt.jar\u201d to Tomcat library folder \u201c{$TOMCAT}/lib\u201c.\nRestart Tomcat.</p>\n", "title": "jar not loaded. See Servlet Spec 2.3, section 9.7.2. Offending class: javax/servlet/Servlet.class", "tags": ["java", "eclipse", "maven", "tomcat7"], "link": "http://stackoverflow.com/questions/15601469/jar-not-loaded-see-servlet-spec-2-3-section-9-7-2-offending-class-javax-serv/35524350#35524350", "question_id": 15601469, "answer_id": 35524350}], "creation_date": 1364145140, "score": 84, "link": "http://stackoverflow.com/questions/15601469/jar-not-loaded-see-servlet-spec-2-3-section-9-7-2-offending-class-javax-serv", "question_id": 15601469}, {"body": "<p>My development team recently was forced over to a remote development environment where we do not have full access to the servers.  Before the change over we had a JAR that was running fine on Java 1.7 x64 along with JRE 7.  When we moved over to the new server our JAR was running alright, but then one of the server admins \"updated\" our Java to an older version and uninstalled the one we were using.  Don't ask me why, I don't know.  I re-installed Java 1.7 and uninstalled 1.6 along with the JREs.</p>\n\n<p>The following problem occurs at runtime, there are no build errors:</p>\n\n<pre><code>Registry key 'Software\\JavaSoft\\Java Runtime Environment\\CurrentVersion'\nhas value '1.7', but '1.6' is required.\nError: could not find java.dll\nError: could not find Java SE Runtime Environment.\n</code></pre>\n\n<p>I've run the same JAR on my laptop with no issues.  Both the server and my laptop have JDK 1.7 and JRE 7 in the respective %HOME% variables and system PATH.  I've even reinstalled JRE 6 and placed it later in the system environment PATH variables with the same result.</p>\n\n<p>I have also changed the registry back to look at 1.6 and it results in the following, which I looked up and it appears to be from having multiple Javas installed (leading back to my original problem):</p>\n\n<pre><code>Exception in thread \"main\" java.lang.UnsupportedClassVersionError: ... :\nUnsupported major.minor version 51.0\n</code></pre>\n\n<p>I would appreciate any insight you all have as I have been looking over various forums but nothing seems to have exactly my problem.  Also, this has happen on another server we are using as well.  Thanks!</p>\n\n<p>Update: No luck with recompiling the JAR to either 1.6 or 1.7 and matching the JDK.  Also, why in the world would a newer version of Java break an older compiled version?</p>\n", "tags": ["jar", "environment-variables", "java"], "title": "Registry Key &#39;...&#39; has value &#39;1.7&#39;, but &#39;1.6&#39; is required. Java 1.7 is Installed and the Registry is Pointing to it", "answers": [{"body": "<p>The jar was compiled to be <code>1.6</code>  compliant.  That is why you get this error.  Two resolutions:<br>\n1) Use Java 1.6  </p>\n\n<p>OR  </p>\n\n<p>2)  Recompile the jar to be compliant for your environment <code>1.7</code></p>\n", "title": "Registry Key &#39;...&#39; has value &#39;1.7&#39;, but &#39;1.6&#39; is required. Java 1.7 is Installed and the Registry is Pointing to it", "tags": ["jar", "environment-variables", "java"], "link": "http://stackoverflow.com/questions/15277496/registry-key-has-value-1-7-but-1-6-is-required-java-1-7-is-installed/15277535#15277535", "question_id": 15277496, "answer_id": 15277535}, {"body": "<p>This happens when you somehow confused java itself. You are trying to run a java 6 VM where it found a JRE 7. It might show this problem even if you type in the command line just <code>java</code> or <code>java -version</code> in a misconfigured environment. The JAR is not the problem, except in the very unlikely case where the code in JAR is looking in the Windows Registry for that (which probably is not your case).</p>\n\n<p>In my case, I had the <code>java.exe</code>, <code>javaw.exe</code> and <code>javaws.exe</code> from Java 6 in the <code>Windows/System32</code> folder (don't know how it got to be there). The rest of the JDK and JRE where found in the PATH inside <code>C:\\Java\\jdk_1.7.0\\bin</code>. Oops!</p>\n", "title": "Registry Key &#39;...&#39; has value &#39;1.7&#39;, but &#39;1.6&#39; is required. Java 1.7 is Installed and the Registry is Pointing to it", "tags": ["jar", "environment-variables", "java"], "link": "http://stackoverflow.com/questions/15277496/registry-key-has-value-1-7-but-1-6-is-required-java-1-7-is-installed/18928120#18928120", "question_id": 15277496, "answer_id": 18928120}, {"body": "<p>I don't know if anyone is still following this thread, but I recently had this issue when I tried to launch ActiveMQ 5.10 as a Windows service.</p>\n\n<p>I didn't have a JAVA_HOME path set.\nI had Java 6 and Java 7 installed, but the default version was v7. (ie if I opened a command window and types \"java -version\").</p>\n\n<p>This is where the clue was - \"java -version\" returned \"Java HotSpot(TM) 64-Bit Server VM (build 23.1-b03, mixed mode)\" but I was had installed the Win32 service...</p>\n\n<p>It turns out that if you use the Win32 wrapper on a 64-bit machine it somehow decides to use a different version of Java...</p>\n\n<p>So my fix was to uninstall the 32-bit version of the wrapper and install the 64-bit version.\naversion on my machine; just habit I guess... But luckily I resolved the issue eventually...</p>\n", "title": "Registry Key &#39;...&#39; has value &#39;1.7&#39;, but &#39;1.6&#39; is required. Java 1.7 is Installed and the Registry is Pointing to it", "tags": ["jar", "environment-variables", "java"], "link": "http://stackoverflow.com/questions/15277496/registry-key-has-value-1-7-but-1-6-is-required-java-1-7-is-installed/24927695#24927695", "question_id": 15277496, "answer_id": 24927695}, {"body": "<p>Using regedit, remove the entries corresponding to java 7. It will work.</p>\n", "title": "Registry Key &#39;...&#39; has value &#39;1.7&#39;, but &#39;1.6&#39; is required. Java 1.7 is Installed and the Registry is Pointing to it", "tags": ["jar", "environment-variables", "java"], "link": "http://stackoverflow.com/questions/15277496/registry-key-has-value-1-7-but-1-6-is-required-java-1-7-is-installed/25060488#25060488", "question_id": 15277496, "answer_id": 25060488}, {"body": "<p>I've deleted java files at windows/system32 and I also have removed c:\\ProgramData\\Oracle\\Java\\javapath from the PATH variable, because there was 3 symlinks to java 1.8 files.</p>\n\n<p>I had JDK 1.7 in the %JAVA_HOME% variable and java1.7/bin in the PATH.</p>\n\n<p>PS1: My problem was between Java 1.7 and Java 1.8. </p>\n\n<p>PS2: I can't add this as a comment to Victor's answer because I haven't enough points.</p>\n", "title": "Registry Key &#39;...&#39; has value &#39;1.7&#39;, but &#39;1.6&#39; is required. Java 1.7 is Installed and the Registry is Pointing to it", "tags": ["jar", "environment-variables", "java"], "link": "http://stackoverflow.com/questions/15277496/registry-key-has-value-1-7-but-1-6-is-required-java-1-7-is-installed/25979678#25979678", "question_id": 15277496, "answer_id": 25979678}, {"body": "<p>Just had the similar error when installing java 8 (jdk &amp; jre) on a system already running Java 7.</p>\n\n<blockquote>\n  <p>Error: Registry key 'Software\\JavaSoft\\Java Runtime</p>\n  \n  <p>Environment'\\CurrentVersion' has value '1.8', but '1.7' is required.</p>\n  \n  <p>Error: could not find java.dll Error: Could not find Java SE Runtime Environment.</p>\n</blockquote>\n\n<p>My environment was set up correctly (Path &amp; java_home correctly defined), but the problem arises from the way pre-8 Java installers worked, which is that they used to copy the three executables (java.exe, javaw.exe &amp; javaws.exe) to the Windows system directory.  These remain unless overwritten by a new pre-8 installation.</p>\n\n<p>However the Java 8 installer instead creates symbolic links in a new directory, C:\\ProgramData\\Oracle\\Java\\javapath, pointing to the actual JRE 8 location.</p>\n\n<p>This means that you'll actually run the old 7 exes but use the new 8 DLLs.</p>\n\n<p>So, the solution is simply to delete the 3 Java exes, as above, from the windows system directory.</p>\n\n<p>If you are running 32-bit Java on a 64-bit Windows, the exes would be in Windows\\SysWOW64, otherwise in Windows\\System32.</p>\n", "title": "Registry Key &#39;...&#39; has value &#39;1.7&#39;, but &#39;1.6&#39; is required. Java 1.7 is Installed and the Registry is Pointing to it", "tags": ["jar", "environment-variables", "java"], "link": "http://stackoverflow.com/questions/15277496/registry-key-has-value-1-7-but-1-6-is-required-java-1-7-is-installed/27756484#27756484", "question_id": 15277496, "answer_id": 27756484}, {"body": "<p>For my Win7</p>\n\n<p>Paradox was in being java.exe and javaw.exe in System32 folder.\nOpening that folder I couldn't see them but using search in Start menu I get links to those files, removed them. Next searsh gave me links to files from JAVA_HOME</p>\n\n<p>magic )</p>\n", "title": "Registry Key &#39;...&#39; has value &#39;1.7&#39;, but &#39;1.6&#39; is required. Java 1.7 is Installed and the Registry is Pointing to it", "tags": ["jar", "environment-variables", "java"], "link": "http://stackoverflow.com/questions/15277496/registry-key-has-value-1-7-but-1-6-is-required-java-1-7-is-installed/28331413#28331413", "question_id": 15277496, "answer_id": 28331413}, {"body": "<p>I solved this problem by uninstalling Java 1.8</p>\n", "title": "Registry Key &#39;...&#39; has value &#39;1.7&#39;, but &#39;1.6&#39; is required. Java 1.7 is Installed and the Registry is Pointing to it", "tags": ["jar", "environment-variables", "java"], "link": "http://stackoverflow.com/questions/15277496/registry-key-has-value-1-7-but-1-6-is-required-java-1-7-is-installed/30156063#30156063", "question_id": 15277496, "answer_id": 30156063}, {"body": "<p>In the START menu type \"regedit\" to open the Registry editor</p>\n\n<p>Go to \"HKEY_LOCAL_MACHINE\" on the left-hand side registry explorer/tree menu</p>\n\n<p>Click \"SOFTWARE\" within the \"HKEY_LOCAL_MACHINE\" registries</p>\n\n<p>Click \"JavaSoft\" within the \"SOFTWARE\" registries</p>\n\n<p>Click \"Java Runtime Environment\" within the \"JavaSoft\" list of registries here you can see different versions of installed java</p>\n\n<p>Click \"Java Runtime Environment\"- On right hand side you will get 4-5 rows . Please select \"CurrentVersion\" and right Click( select modify option) Change version to \"1.7\"</p>\n\n<p>Now the magic has been completed</p>\n", "title": "Registry Key &#39;...&#39; has value &#39;1.7&#39;, but &#39;1.6&#39; is required. Java 1.7 is Installed and the Registry is Pointing to it", "tags": ["jar", "environment-variables", "java"], "link": "http://stackoverflow.com/questions/15277496/registry-key-has-value-1-7-but-1-6-is-required-java-1-7-is-installed/30186977#30186977", "question_id": 15277496, "answer_id": 30186977}, {"body": "<p>Change to directory with correct <code>java.exe</code> i.e. go to the required JDK version <code>java.exe</code></p>\n\n<pre><code>cd C:/Program Files/Java/jdk1.7.0_25/bin\n</code></pre>\n\n<p>Run the <code>java.exe</code> from this directory, it has precedence over registry and $PATH settings.</p>\n\n<pre><code>java -jar C:/installed/selenium-server-standalone-2.53.0.jar \n</code></pre>\n", "title": "Registry Key &#39;...&#39; has value &#39;1.7&#39;, but &#39;1.6&#39; is required. Java 1.7 is Installed and the Registry is Pointing to it", "tags": ["jar", "environment-variables", "java"], "link": "http://stackoverflow.com/questions/15277496/registry-key-has-value-1-7-but-1-6-is-required-java-1-7-is-installed/37113910#37113910", "question_id": 15277496, "answer_id": 37113910}], "creation_date": 1362676368, "score": 83, "link": "http://stackoverflow.com/questions/15277496/registry-key-has-value-1-7-but-1-6-is-required-java-1-7-is-installed", "question_id": 15277496}, {"body": "<p>I'm a little confused about the difference between the <code>getFields</code> method and the <code>getDeclaredFields</code> method when using Java reflection. </p>\n\n<p>I read that <code>getDeclaredFields</code> gives you access to all the fields of the class and that  <code>getFields</code> only returns public fields. If this is the case, why wouldn't you just always use <code>getDeclaredFields</code>? </p>\n\n<p>Can someone please elaborate on this, and explain the difference between the two methods, and when/why you would want to use one over the other? </p>\n", "tags": ["java", "reflection"], "title": "What is the difference between getFields and getDeclaredFields in Java reflection", "answers": [{"body": "<h2>getFields()</h2>\n\n<p>All the <code>public</code> fields up the entire class hierarchy.</p>\n\n<h2>getDeclaredFields()</h2>\n\n<p>All the fields, regardless of their accessibility but <strong>only for the current class, not any base classes that the current class might be inheriting from.</strong></p>\n\n<h3>To get all the fields up the hierarchy</h3>\n\n<p>I have written the following function:</p>\n\n<pre><code>public static Iterable&lt;Field&gt; getFieldsUpTo(@Nonnull Class&lt;?&gt; startClass, \n                                   @Nullable Class&lt;?&gt; exclusiveParent) {\n\n   List&lt;Field&gt; currentClassFields = Lists.newArrayList(startClass.getDeclaredFields());\n   Class&lt;?&gt; parentClass = startClass.getSuperclass();\n\n   if (parentClass != null &amp;&amp; \n          (exclusiveParent == null || !(parentClass.equals(exclusiveParent)))) {\n     List&lt;Field&gt; parentClassFields = \n         (List&lt;Field&gt;) getFieldsUpTo(parentClass, exclusiveParent);\n     currentClassFields.addAll(parentClassFields);\n   }\n\n   return currentClassFields;\n}\n</code></pre>\n\n<p>The <code>exclusiveParent</code> class is provided to prevent the retrieval of fields from <code>Object</code>. If may be <code>null</code> if you DO want the <code>Object</code> fields.</p>\n\n<p>To claify, <code>Lists.newArrayList</code> comes from Guava.</p>\n\n<h3>Update</h3>\n\n<p>FYI, the above code is published on GitHub in my <a href=\"https://github.com/dancerjohn/LibEx\">LibEx</a> project in <a href=\"https://github.com/dancerjohn/LibEx/blob/master/libex/src/main/java/org/libex/reflect/ReflectionUtils.java\">ReflectionUtils</a>.</p>\n", "title": "What is the difference between getFields and getDeclaredFields in Java reflection", "tags": ["java", "reflection"], "link": "http://stackoverflow.com/questions/16966629/what-is-the-difference-between-getfields-and-getdeclaredfields-in-java-reflectio/16966699#16966699", "question_id": 16966629, "answer_id": 16966699}, {"body": "<p>As already mentioned, <code>Class.getDeclaredField(String)</code> only looks at the fields from the <code>Class</code> in which you call it.</p>\n\n<p>If you want to search a <code>Field</code> in the <code>Class</code> hierarchy, you can use this simple function:</p>\n\n<pre><code>/**\n * Returns the first {@link Field} in the hierarchy for the specified name\n */\npublic static Field getField(Class&lt;?&gt; clazz, String name) {\n    Field field = null;\n    while (clazz != null &amp;&amp; field == null) {\n        try {\n            field = clazz.getDeclaredField(name);\n        } catch (Exception e) {\n        }\n        clazz = clazz.getSuperclass();\n    }\n    return field;\n}\n</code></pre>\n\n<p>This is useful to find a <code>private</code> field from a superclass, for example. Also, if you want to modify its value, you can use it like this:</p>\n\n<pre><code>/**\n * Sets {@code value} to the first {@link Field} in the {@code object} hierarchy, for the specified name\n */\npublic static void setField(Object object, String fieldName, Object value) throws Exception {\n    Field field = getField(object.getClass(), fieldName);\n    field.setAccessible(true);\n    field.set(object, value);\n}\n</code></pre>\n", "title": "What is the difference between getFields and getDeclaredFields in Java reflection", "tags": ["java", "reflection"], "link": "http://stackoverflow.com/questions/16966629/what-is-the-difference-between-getfields-and-getdeclaredfields-in-java-reflectio/37332884#37332884", "question_id": 16966629, "answer_id": 37332884}, {"body": "<p><code>public Field[] getFields() throws SecurityException</code></p>\n\n<p>Returns an array containing Field objects reflecting all the <strong><em>accessible public fields</em></strong> of the class or interface represented by this Class object. The elements in the array returned are not sorted and are not in any particular order. This method returns an array of length 0 if the class or interface has no accessible public fields, or if it represents an array class, a primitive type, or void.</p>\n\n<p>Specifically, if this Class object represents a class, this method returns <strong><em>the public fields of this class and of all its superclasses.</em></strong> If this Class object represents an interface, this method returns the fields of this interface and of all its superinterfaces.</p>\n\n<p>The implicit length field for array class is not reflected by this method. User code should use the methods of class Array to manipulate arrays.</p>\n\n<p><br/></p>\n\n<p><code>public Field[] getDeclaredFields() throws SecurityException</code></p>\n\n<p>Returns an array of Field objects reflecting all <strong><em>the fields declared by the class</em></strong> or interface represented by this Class object. This <strong><em>includes public, protected, default (package) access, and private</em></strong> fields, but <strong><em>excludes inherited</em></strong> fields. The elements in the array returned are not sorted and are not in any particular order. This method returns an array of length 0 if the class or interface declares no fields, or if this Class object represents a primitive type, an array class, or void.</p>\n\n<p><br/></p>\n\n<p>And what if I need all fields from all parent classes?\nSome code is needed, e.g. from <a href=\"http://stackoverflow.com/a/35103361/755804\">http://stackoverflow.com/a/35103361/755804</a>:</p>\n\n<pre><code>public static List&lt;Field&gt; getAllModelFields(Class aClass) {\n    List&lt;Field&gt; fields = new ArrayList&lt;&gt;();\n    do {\n        Collections.addAll(fields, aClass.getDeclaredFields());\n        aClass = aClass.getSuperclass();\n    } while (aClass != null);\n    return fields;\n}\n</code></pre>\n", "title": "What is the difference between getFields and getDeclaredFields in Java reflection", "tags": ["java", "reflection"], "link": "http://stackoverflow.com/questions/16966629/what-is-the-difference-between-getfields-and-getdeclaredfields-in-java-reflectio/37916809#37916809", "question_id": 16966629, "answer_id": 37916809}], "creation_date": 1370533869, "score": 81, "link": "http://stackoverflow.com/questions/16966629/what-is-the-difference-between-getfields-and-getdeclaredfields-in-java-reflectio", "question_id": 16966629}, {"body": "<p>I just began to learn Java.</p>\n\n<p>My friend who is helping me study just sent me this and said 'figure this out'.</p>\n\n<p>Unfortunately I am unable to read this. It looks like Perl to me. </p>\n\n<pre><code>class _{_ _;_(){_=this;}}\n</code></pre>\n\n<p>What does it mean?</p>\n", "tags": ["java", "syntax"], "title": "What is the underscore actually doing in this Java code?", "answers": [{"body": "<p><code>_</code> is the class name. It's a very confusing one, but it works!</p>\n\n<p>With the class renamed:</p>\n\n<pre><code>class Something {Something something;Something(){something=this;}}\n</code></pre>\n\n<p>And cleaned up:</p>\n\n<pre><code>class Something {\n    Something something;\n    Something() {\n        something=this;\n    }\n}\n</code></pre>\n\n<p>And you can go crazy with this odd naming <code>:)</code></p>\n\n<pre><code>class _{_ __;_ ____;_(){__=this;____=__;}_(_ ___){__=___;}}\n</code></pre>\n\n<p>In fact, Unicode is even supported, so this is valid:</p>\n\n<pre><code>class \u5408\u6cd5\u985e\u5225\u540d\u7a31{\u5408\u6cd5\u985e\u5225\u540d\u7a31(){}}\n</code></pre>\n", "title": "What is the underscore actually doing in this Java code?", "tags": ["java", "syntax"], "link": "http://stackoverflow.com/questions/15648312/what-is-the-underscore-actually-doing-in-this-java-code/15648325#15648325", "question_id": 15648312, "answer_id": 15648325}, {"body": "<p><code>_</code> is the class name, underscore is a valid Java variable name, you just need to indent your code to deobfuscate it: </p>\n\n<pre><code>class _{\n    _ _;\n    _(){\n     _=this;\n   }\n}\n</code></pre>\n\n<p>Like: </p>\n\n<pre><code>class A{\n    A A;\n    A(){\n     A=this;\n   }\n}\n</code></pre>\n\n<p><strong>Edit:</strong> thanks to  @Daniel Fischer </p>\n\n<blockquote>\n  <p>Type names and variable names have different namespaces. and for example code <code>class FOO { FOO FOO; }</code> is valid in Java. </p>\n</blockquote>\n\n<p><strong>Summary</strong></p>\n\n<ul>\n<li><code>_</code> is a class name e.g at <code>class _{</code>  </li>\n<li><code>_</code> is a class member name e.g at <code>_ _;</code> and <code>_=this</code> </li>\n<li><code>_</code> is a constructor name e.g. at <code>_()</code></li>\n</ul>\n\n<p>Remember: Java uses <a href=\"http://www.cis.upenn.edu/~matuszek/cit591-2011/Pages/o-o-concepts.html\"><strong>six different namespaces:</strong></a> </p>\n\n<blockquote>\n  <ul>\n  <li>Package names, </li>\n  <li>type names, </li>\n  <li>field (variable) names, </li>\n  <li>method names, </li>\n  <li>local variable names (including parameters), and </li>\n  <li>labels.   </li>\n  </ul>\n  \n  <p>In addition, each declared enum has its own namespace. Identical names of different types do not conflict; for example, <em>a method may be named the same as a local variable</em>.</p>\n</blockquote>\n", "title": "What is the underscore actually doing in this Java code?", "tags": ["java", "syntax"], "link": "http://stackoverflow.com/questions/15648312/what-is-the-underscore-actually-doing-in-this-java-code/15648348#15648348", "question_id": 15648312, "answer_id": 15648348}, {"body": "<p>well that\u2019s good example . Java allows unicode to be identifiers so you can write something like:</p>\n\n<pre><code>class \u2ca5lass {\n\u2ca5lass cla\u0455\u0455;\n}\n</code></pre>\n\n<p>here class name's c is '\u2ca5' (U+2CA5 COPTIC SMALL LETTER SIMA) and</p>\n\n<p>object name's '\u0455' (U+0455 CYRILLIC SMALL LETTER DZE).</p>\n", "title": "What is the underscore actually doing in this Java code?", "tags": ["java", "syntax"], "link": "http://stackoverflow.com/questions/15648312/what-is-the-underscore-actually-doing-in-this-java-code/15658625#15658625", "question_id": 15648312, "answer_id": 15658625}], "creation_date": 1364335668, "score": 80, "link": "http://stackoverflow.com/questions/15648312/what-is-the-underscore-actually-doing-in-this-java-code", "question_id": 15648312}, {"body": "<p>See below for 50 tweets about \"apple.\" I have hand labeled the positive matches about Apple Inc. They are marked as 1 below.</p>\n\n<p>Here are a couple of lines:</p>\n\n<pre><code>1|\u201c@chrisgilmer: Apple targets big business with new iOS 7 features http://bit.ly/15F9JeF \u201d. Finally.. A corp iTunes account!\n0|\u201c@Zach_Paull: When did green skittles change from lime to green apple? #notafan\u201d @Skittles\n1|@dtfcdvEric: @MaroneyFan11 apple inc is searching for people to help and tryout all their upcoming tablet within our own net page No.\n0|@STFUTimothy have you tried apple pie shine?\n1|#SuryaRay #India Microsoft to bring Xbox and PC games to Apple, Android phones: Report: Microsoft Corp... http://dlvr.it/3YvbQx  @SuryaRay\n</code></pre>\n\n<p>Here is the total data set: <a href=\"http://pastebin.com/eJuEb4eB\">http://pastebin.com/eJuEb4eB</a></p>\n\n<p>I need to build a model that classifies \"Apple\" (Inc). from the rest.</p>\n\n<p>I'm not looking for a general overview of machine learning, rather I'm looking for actual model in code (<a href=\"http://en.wikipedia.org/wiki/Python_%28programming_language%29\">Python</a> preferred).</p>\n", "tags": ["java", "python", "r", "machine-learning", "classification"], "title": "How can I build a model to distinguish tweets about Apple (Inc.) from tweets about apple (fruit)?", "answers": [{"body": "<p>I would do it as follows:</p>\n\n<ol>\n<li>Split the sentence into words, normalise them, build a dictionary</li>\n<li>With each word, store how many times they occurred in tweets about the company, and how many times they appeared in tweets about the fruit - these tweets must be confirmed by a human</li>\n<li>When a new tweet comes in, find every word in the tweet in the dictionary, calculate a weighted score - words that are used frequently in relation to the company would get a high company score, and vice versa; words used rarely, or used with both the company and the fruit, would not have much of a score.</li>\n</ol>\n", "title": "How can I build a model to distinguish tweets about Apple (Inc.) from tweets about apple (fruit)?", "tags": ["java", "python", "r", "machine-learning", "classification"], "link": "http://stackoverflow.com/questions/17352469/how-can-i-build-a-model-to-distinguish-tweets-about-apple-inc-from-tweets-abo/17352583#17352583", "question_id": 17352469, "answer_id": 17352583}, {"body": "<p>Thank you for the comments thus far. Here is a <a href=\"http://codepad.org/C359F62N\">working solution</a> I prepared with PHP. I'd still be interested in hearing from others a more algorithmic approach to this same solution. </p>\n\n<pre><code>&lt;?php\n\n// Confusion Matrix Init\n$tp = 0;\n$fp = 0;\n$fn = 0;\n$tn = 0;\n$arrFP = array();\n$arrFN = array();\n\n// Load All Tweets to string\n$ch = curl_init();\ncurl_setopt($ch, CURLOPT_URL, 'http://pastebin.com/raw.php?i=m6pP8ctM');\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\n$strCorpus = curl_exec($ch);\ncurl_close($ch);\n\n// Load Tweets as Array\n$arrCorpus = explode(\"\\n\", $strCorpus);\nforeach ($arrCorpus as $k =&gt; $v) {\n    // init\n    $blnActualClass = substr($v,0,1);\n    $strTweet = trim(substr($v,2));\n\n    // Score Tweet\n    $intScore = score($strTweet);\n\n    // Build Confusion Matrix and Log False Positives &amp; Negatives for Review\n    if ($intScore &gt; 0) {\n        if ($blnActualClass == 1) {\n            // True Positive\n            $tp++;\n        } else {\n            // False Positive\n            $fp++;\n            $arrFP[] = $strTweet;\n        }\n    } else {\n        if ($blnActualClass == 1) {\n            // False Negative\n            $fn++;\n            $arrFN[] = $strTweet;\n        } else {\n            // True Negative\n            $tn++;\n        }\n    }\n}\n\n// Confusion Matrix and Logging\necho \"\n           Predicted\n            1     0\nActual 1   $tp     $fp\nActual 0    $fn    $tn\n\n\";\n\nif (count($arrFP) &gt; 0) {\n    echo \"\\n\\nFalse Positives\\n\";\n    foreach ($arrFP as $strTweet) {\n        echo \"$strTweet\\n\";\n    }\n}\n\nif (count($arrFN) &gt; 0) {\n    echo \"\\n\\nFalse Negatives\\n\";\n    foreach ($arrFN as $strTweet) {\n        echo \"$strTweet\\n\";\n    }\n}\n\nfunction LoadDictionaryArray() {\n    $strDictionary = &lt;&lt;&lt;EOD\n10|iTunes\n10|ios 7\n10|ios7\n10|iPhone\n10|apple inc\n10|apple corp\n10|apple.com\n10|MacBook\n10|desk top\n10|desktop\n1|config\n1|facebook\n1|snapchat\n1|intel\n1|investor\n1|news\n1|labs\n1|gadget\n1|apple store\n1|microsoft\n1|android\n1|bonds\n1|Corp.tax\n1|macs\n-1|pie\n-1|clientes\n-1|green apple\n-1|banana\n-10|apple pie\nEOD;\n\n    $arrDictionary = explode(\"\\n\", $strDictionary);\n    foreach ($arrDictionary as $k =&gt; $v) {\n        $arr = explode('|', $v);\n        $arrDictionary[$k] = array('value' =&gt; $arr[0], 'term' =&gt; strtolower(trim($arr[1])));\n    }\n    return $arrDictionary;\n}\n\nfunction score($str) {\n    $str = strtolower($str);\n    $intScore = 0;\n    foreach (LoadDictionaryArray() as $arrDictionaryItem) {\n        if (strpos($str,$arrDictionaryItem['term']) !== false) {\n            $intScore += $arrDictionaryItem['value'];\n        }\n    }\n    return $intScore;\n}\n?&gt;\n</code></pre>\n\n<p>The above outputs:</p>\n\n<pre><code>           Predicted\n            1     0\nActual 1   31     1\nActual 0    1    17\n\n\nFalse Positives\n1|Royals apple #ASGame @mlb @ News Corp Building http://instagram.com/p/bBzzgMrrIV/\n\n\nFalse Negatives\n-1|RT @MaxFreixenet: Apple no tiene clientes. Tiene FANS// error.... PAGAS por productos y apps, ergo: ERES CLIENTE.\n</code></pre>\n", "title": "How can I build a model to distinguish tweets about Apple (Inc.) from tweets about apple (fruit)?", "tags": ["java", "python", "r", "machine-learning", "classification"], "link": "http://stackoverflow.com/questions/17352469/how-can-i-build-a-model-to-distinguish-tweets-about-apple-inc-from-tweets-abo/17373573#17373573", "question_id": 17352469, "answer_id": 17373573}, {"body": "<p>What you are looking for is called <a href=\"http://en.wikipedia.org/wiki/Named-entity_recognition\" rel=\"nofollow\">Named Entity Recognition</a>. It is a statistical technique that (most commonly) uses <a href=\"http://en.wikipedia.org/wiki/Conditional_random_field\" rel=\"nofollow\">Conditional Random Fields</a> to find named entities, based on having been trained to learn things about named entities.</p>\n\n<p>Essentially, it looks at the content and <em>context</em> of the word, (looking back and forward a few words), to estimate the probability that the word is a named entity. </p>\n\n<p>Good software can look at other features of words, such as their length or shape (like \"Vcv\" if it starts with \"Vowel-consonant-vowel\")</p>\n\n<p>A very good library (GPL) is <a href=\"http://nlp.stanford.edu/software/CRF-NER.shtml\" rel=\"nofollow\">Stanford's NER</a></p>\n\n<p>Here's the demo: <a href=\"http://nlp.stanford.edu:8080/ner/\" rel=\"nofollow\">http://nlp.stanford.edu:8080/ner/</a></p>\n\n<p>Some sample text to try:</p>\n\n<blockquote>\n  <p>I was eating an apple over at Apple headquarters and I thought about\n  Apple Martin, the daughter of the Coldplay guy</p>\n</blockquote>\n\n<p>(the 3class and 4class classifiers get it right)</p>\n", "title": "How can I build a model to distinguish tweets about Apple (Inc.) from tweets about apple (fruit)?", "tags": ["java", "python", "r", "machine-learning", "classification"], "link": "http://stackoverflow.com/questions/17352469/how-can-i-build-a-model-to-distinguish-tweets-about-apple-inc-from-tweets-abo/17377820#17377820", "question_id": 17352469, "answer_id": 17377820}, {"body": "<p>In all the examples that you gave, Apple(inc) was either referred to as <i>A</i>pple or apple <i>inc</i>, so a possible way could be to search for:</p>\n\n<ul>\n<li><p>a capital \"A\" in Apple</p></li>\n<li><p>an \"inc\" after apple</p></li>\n<li><p>words/phrases like \"OS\", \"operating system\", \"Mac\", \"iPhone\", ...</p></li>\n<li><p>or a combination of them</p></li>\n</ul>\n", "title": "How can I build a model to distinguish tweets about Apple (Inc.) from tweets about apple (fruit)?", "tags": ["java", "python", "r", "machine-learning", "classification"], "link": "http://stackoverflow.com/questions/17352469/how-can-i-build-a-model-to-distinguish-tweets-about-apple-inc-from-tweets-abo/17412625#17412625", "question_id": 17352469, "answer_id": 17412625}, {"body": "<p>If you don't have an issue using an outside library, I'd recommend <a href=\"http://scikit-learn.org/\" rel=\"nofollow\">scikit-learn</a> since it can probably do this better &amp; faster than anything you could code by yourself. I'd just do something like this:</p>\n\n<p>Build your corpus. I did the list comprehensions for clarity, but depending on how your data is stored you might need to do different things:</p>\n\n<pre><code>def corpus_builder(apple_inc_tweets, apple_fruit_tweets):\n    corpus = [tweet for tweet in apple_inc_tweets] + [tweet for tweet in apple_fruit_tweets]\n    labels = [1 for x in xrange(len(apple_inc_tweets))] + [0 for x in xrange(len(apple_fruit_tweets))]\n    return (corpus, labels)\n</code></pre>\n\n<p>The important thing is you end up with two lists that look like this:</p>\n\n<pre><code>([['apple inc tweet i love ios and iphones'], ['apple iphones are great'], ['apple fruit tweet i love pie'], ['apple pie is great']], [1, 1, 0, 0])\n</code></pre>\n\n<p>The [1, 1, 0, 0] represent the positive and negative labels.</p>\n\n<p>Then, you create a Pipeline! Pipeline is a scikit-learn class that makes it easy to chain text processing steps together so you only have to call one object when training/predicting:</p>\n\n<pre><code>def train(corpus, labels)\n    pipe = Pipeline([('vect', CountVectorizer(ngram_range=(1, 3), stop_words='english')),\n                        ('tfidf', TfidfTransformer(norm='l2')),\n                        ('clf', LinearSVC()),])\n    pipe.fit_transform(corpus, labels)\n    return pipe\n</code></pre>\n\n<p>Inside the Pipeline there are three processing steps. The CountVectorizer tokenizes the words, splits them, counts them, and transforms the data into a sparse matrix. The TfidfTransformer is optional, and you might want to remove it depending on the accuracy rating (doing cross validation tests and a grid search for the best parameters is a bit involved, so I won't get into it here). The LinearSVC is a standard text classification algorithm.</p>\n\n<p>Finally, you predict the category of tweets:</p>\n\n<pre><code>def predict(pipe, tweet):\n    prediction = pipe.predict([tweet])\n    return prediction\n</code></pre>\n\n<p>Again, the tweet needs to be in a list, so I assumed it was entering the function as a string.</p>\n\n<p>Put all those into a class or whatever, and you're done. At least, with this very basic example.</p>\n\n<p>I didn't test this code so it might not work if you just copy-paste, but if you want to use scikit-learn it should give you an idea of where to start.</p>\n\n<p>EDIT: tried to explain the steps in more detail.</p>\n", "title": "How can I build a model to distinguish tweets about Apple (Inc.) from tweets about apple (fruit)?", "tags": ["java", "python", "r", "machine-learning", "classification"], "link": "http://stackoverflow.com/questions/17352469/how-can-i-build-a-model-to-distinguish-tweets-about-apple-inc-from-tweets-abo/17438029#17438029", "question_id": 17352469, "answer_id": 17438029}, {"body": "<p>You can do the following:</p>\n\n<ol>\n<li><p>Make a dict of words containing their count of occurrence in fruit and company related tweets. This can be achieved by feeding it some sample tweets whose inclination we know.</p></li>\n<li><p>Using enough previous data, we can find out the probability of a word occurring in tweet about apple inc.</p></li>\n<li><p>Multiply individual probabilities of words to get the probability of the whole tweet.</p></li>\n</ol>\n\n<h3>A simplified example:</h3>\n\n<p><strong>p_f</strong> = Probability of fruit tweets.</p>\n\n<p><strong>p_w_f</strong> = Probability of a word occurring in a fruit tweet.</p>\n\n<p><strong>p_t_f</strong> = Combined probability of all words in tweet occurring a fruit tweet\n      = p_w1_f * p_w2_f * ...</p>\n\n<p><strong>p_f_t</strong> = Probability of fruit given a particular tweet.</p>\n\n<p><strong>p_c, p_w_c, p_t_c, p_c_t</strong> are respective values for company.</p>\n\n<p>A laplacian smoother of value 1 is added to eliminate the problem of zero frequency of new words which are not there in our database.</p>\n\n<pre><code>old_tweets = {'apple pie sweet potatoe cake baby https://vine.co/v/hzBaWVA3IE3': '0', ...}\nknown_words = {}\ntotal_company_tweets = total_fruit_tweets =total_company_words = total_fruit_words = 0\n\nfor tweet in old_tweets:\n    company = old_tweets[tweet]\n    for word in tweet.lower().split(\" \"):\n        if not word in known_words:\n            known_words[word] = {\"company\":0, \"fruit\":0 }\n        if company == \"1\":\n            known_words[word][\"company\"] += 1\n            total_company_words += 1\n        else:\n            known_words[word][\"fruit\"] += 1\n            total_fruit_words += 1\n\n    if company == \"1\":\n        total_company_tweets += 1\n    else:\n        total_fruit_tweets += 1\ntotal_tweets = len(old_tweets)\n\ndef predict_tweet(new_tweet,K=1):\n    p_f = (total_fruit_tweets+K)/(total_tweets+K*2)\n    p_c = (total_company_tweets+K)/(total_tweets+K*2)\n    new_words = new_tweet.lower().split(\" \")\n\n    p_t_f = p_t_c = 1\n    for word in new_words:\n        try:\n            wordFound = known_words[word]\n        except KeyError:\n            wordFound = {'fruit':0,'company':0}\n        p_w_f = (wordFound['fruit']+K)/(total_fruit_words+K*(len(known_words)))\n        p_w_c = (wordFound['company']+K)/(total_company_words+K*(len(known_words)))\n    p_t_f *= p_w_f\n    p_t_c *= p_w_c\n\n    #Applying bayes rule\n    p_f_t = p_f * p_t_f/(p_t_f*p_f + p_t_c*p_c)\n    p_c_t = p_c * p_t_c/(p_t_f*p_f + p_t_c*p_c)\n    if p_c_t &gt; p_f_t:\n        return \"Company\"\n    return \"Fruit\"\n</code></pre>\n", "title": "How can I build a model to distinguish tweets about Apple (Inc.) from tweets about apple (fruit)?", "tags": ["java", "python", "r", "machine-learning", "classification"], "link": "http://stackoverflow.com/questions/17352469/how-can-i-build-a-model-to-distinguish-tweets-about-apple-inc-from-tweets-abo/17468347#17468347", "question_id": 17352469, "answer_id": 17468347}, {"body": "<p>Make an AI filter to distinguish <em>Apple Inc</em> (the company) from <em>apple</em> (the fruit). Since these are tweets, define your training set with a vector of 140 fields, each field being the character written in the tweet at position X (0 to 139). If the tweet is shorter, just give a value for being blank.</p>\n\n<p>Then build a training set big enough to get a good accuracy (subjective to your taste). Assign a result value to each tweet, a <em>Apple Inc</em> tweet get 1 (true) and an apple tweet (fruit) gets 0. It would be a case of <a href=\"https://en.wikipedia.org/wiki/Supervised_learning\" rel=\"nofollow\">supervised learning</a> in a <a href=\"https://en.wikipedia.org/wiki/Logistic_regression\" rel=\"nofollow\">logistic regression</a>.</p>\n\n<p>That is machine learning, is generally easier to code and performs better. It has to learn from the set you give it, and it's not hardcoded.</p>\n\n<p>I don't know <a href=\"http://en.wikipedia.org/wiki/Python_%28programming_language%29\" rel=\"nofollow\">Python</a>, so I can not write the code for it, but if you were to take more time for machine learning's logic and theory you might want to look the class I'm following.</p>\n\n<p>Try the <a href=\"http://en.wikipedia.org/wiki/Coursera\" rel=\"nofollow\">Coursera</a> course <em><a href=\"https://www.coursera.org/course/ml\" rel=\"nofollow\">Machine Learning</a></em> by <a href=\"https://en.wikipedia.org/wiki/Andrew_Ng\" rel=\"nofollow\">Andrew Ng</a>. You will learn machine learning on <a href=\"http://en.wikipedia.org/wiki/MATLAB\" rel=\"nofollow\">MATLAB</a> or <a href=\"http://en.wikipedia.org/wiki/GNU_Octave\" rel=\"nofollow\">Octave</a>, but once you get the basics you will be able to write machine learning in about any language if you do understand the simple math (simple in logistic regression).</p>\n\n<p>That is, getting the code from someone won't make you able to understand what is going in the machine learning code. You might want to invest a couple of hours on the subject to see what is really going on.</p>\n", "title": "How can I build a model to distinguish tweets about Apple (Inc.) from tweets about apple (fruit)?", "tags": ["java", "python", "r", "machine-learning", "classification"], "link": "http://stackoverflow.com/questions/17352469/how-can-i-build-a-model-to-distinguish-tweets-about-apple-inc-from-tweets-abo/17476900#17476900", "question_id": 17352469, "answer_id": 17476900}, {"body": "<p>There's a really good library for processing natural language text in <a href=\"http://en.wikipedia.org/wiki/Python_%28programming_language%29\" rel=\"nofollow\">Python</a> called <code>nltk</code>. You should take a look at it. </p>\n\n<p>One strategy you could try is to look at n-grams (groups of words) with the word \"apple\" in them. Some words are more likely to be used next to \"apple\" when talking about the fruit, others when talking about the company, and you can use those to classify tweets.</p>\n", "title": "How can I build a model to distinguish tweets about Apple (Inc.) from tweets about apple (fruit)?", "tags": ["java", "python", "r", "machine-learning", "classification"], "link": "http://stackoverflow.com/questions/17352469/how-can-i-build-a-model-to-distinguish-tweets-about-apple-inc-from-tweets-abo/17481155#17481155", "question_id": 17352469, "answer_id": 17481155}, {"body": "<p>I have a semi-working system that solves this problem, open sourced using scikit-learn, with a series of blog posts describing what I'm doing. The problem I'm tackling is word-sense disambiguation (choosing one of multiple <a href=\"https://en.wikipedia.org/wiki/Word_sense\" rel=\"nofollow\">word sense</a> options), which is not the same as Named Entity Recognition. My basic approach is somewhat-competitive with existing solutions and (crucially) is customisable.</p>\n\n<p>There are some existing commercial NER tools (OpenCalais, DBPedia Spotlight, and AlchemyAPI) that might give you a good enough commercial result - do try these first!</p>\n\n<p>I used some of these for a client project (I consult using NLP/ML in London), but I wasn't happy with their recall (<a href=\"https://en.wikipedia.org/wiki/Precision_and_recall\" rel=\"nofollow\">precision and recall</a>). Basically they can be precise (when they say \"This is Apple Inc\" they're typically correct), but with low recall (they rarely say \"This is Apple Inc\" even though to a human the tweet is obviously about Apple Inc). I figured it'd be an intellectually interesting exercise to build an open source version tailored to tweets. Here's the current code:\n<a href=\"https://github.com/ianozsvald/social_media_brand_disambiguator\" rel=\"nofollow\">https://github.com/ianozsvald/social_media_brand_disambiguator</a></p>\n\n<p>I'll note - I'm not trying to solve the generalised word-sense disambiguation problem with this approach, just <strong>brand</strong> disambiguation (companies, people, etc.) when you already have their name. That's why I believe that this straightforward approach will work.</p>\n\n<p>I started this six weeks ago, and it is written in Python 2.7 using scikit-learn. It uses a very basic approach. I vectorize using a binary count vectorizer (I only count whether a word appears, not how many times) with 1-3&nbsp;<a href=\"https://en.wikipedia.org/wiki/N-gram\" rel=\"nofollow\">n-grams</a>. I don't scale with TF-IDF (TF-IDF is good when you have a variable document length; for me the tweets are only one or two sentences, and my testing results didn't show improvement with TF-IDF).</p>\n\n<p>I use the basic tokenizer which is very basic but surprisingly useful. It ignores @ # (so you lose some context) and of course doesn't expand a URL. I then train using <a href=\"https://en.wikipedia.org/wiki/Logistic_regression\" rel=\"nofollow\">logistic regression</a>, and it seems that this problem is somewhat linearly separable (lots of terms for one class don't exist for the other). Currently I'm avoiding any stemming/cleaning (I'm trying The Simplest Possible Thing That Might Work).</p>\n\n<p>The code has a full README, and you should be able to ingest your tweets relatively easily and then follow my suggestions for testing.</p>\n\n<p>This works for Apple as people don't eat or drink Apple computers, nor do we type or play with fruit, so the words are easily split to one category or the other. This condition may not hold when considering something like #definance for the TV show (where people also use #definance in relation to the Arab Spring, cricket matches, exam revision and a music band). Cleverer approaches may well be required here.</p>\n\n<p>I have <a href=\"http://ianozsvald.com/category/socialmediabranddisambiguator/\" rel=\"nofollow\">a series of blog posts</a> describing this project including a one-hour presentation I gave at the BrightonPython usergroup (which turned into a shorter presentation for 140 people at DataScienceLondon).</p>\n\n<p>If you use something like LogisticRegression (where you get a probability for each classification) you can pick only the confident classifications, and that way you can force high precision by trading against recall (so you get correct results, but fewer of them). You'll have to tune this to your system.</p>\n\n<p>Here's a possible algorithmic approach using scikit-learn:</p>\n\n<ul>\n<li>Use a Binary CountVectorizer (I don't think term-counts in short messages add much information as most words occur only once)</li>\n<li>Start with a Decision Tree classifier. It'll have explainable performance (see <em><a href=\"http://ianozsvald.com/2013/07/07/overfitting-with-a-decision-tree/\" rel=\"nofollow\">Overfitting with a Decision Tree</a></em> for an example).</li>\n<li>Move to logistic regression</li>\n<li>Investigate the errors generated by the classifiers (read the DecisionTree's exported output or look at the coefficients in LogisticRegression, work the mis-classified tweets back through the Vectorizer to see what the underlying Bag of Words representation looks like - there will be fewer tokens there than you started with in the raw tweet - are there enough for a classification?)</li>\n<li>Look at my example code in <a href=\"https://github.com/ianozsvald/social_media_brand_disambiguator/blob/master/learn1.py\" rel=\"nofollow\">https://github.com/ianozsvald/social_media_brand_disambiguator/blob/master/learn1.py</a> for a worked version of this approach</li>\n</ul>\n\n<p>Things to consider:</p>\n\n<ul>\n<li>You need a larger dataset. I'm using 2000 labelled tweets (it took me five hours), and as a minimum you want a balanced set with >100 per class (see the overfitting note below)</li>\n<li>Improve the tokeniser (very easy with scikit-learn) to keep # @ in tokens, and maybe add a capitalised-brand detector (as user @user2425429 notes)</li>\n<li>Consider a non-linear classifier (like @oiez's suggestion above) when things get harder. Personally I found LinearSVC to do worse than logistic regression (but that may be due to the high-dimensional feature space that I've yet to reduce).</li>\n<li>A tweet-specific part of speech tagger (in my humble opinion not Standford's as @Neil suggests - it performs poorly on poor Twitter grammar in my experience)</li>\n<li>Once you have lots of tokens you'll probably want to do some dimensionality reduction (I've not tried this yet - see my blog post on LogisticRegression l1 l2 penalisation)</li>\n</ul>\n\n<p>Re. overfitting. In my dataset with 2000 items I have a 10 minute snapshot from Twitter of 'apple' tweets. About 2/3 of the tweets are for Apple Inc, 1/3 for other-apple-uses. I pull out a balanced subset (about 584 rows I think) of each class and do five-fold cross validation for training.</p>\n\n<p>Since I only have a 10 minute time-window I have many tweets about the same topic, and this is probably why my classifier does so well relative to existing tools - it will have overfit to the training features without generalising well (whereas the existing commercial tools perform worse on this snapshop, but more reliably across a wider set of data). I'll be expanding my time window to test this as a subsequent piece of work.</p>\n", "title": "How can I build a model to distinguish tweets about Apple (Inc.) from tweets about apple (fruit)?", "tags": ["java", "python", "r", "machine-learning", "classification"], "link": "http://stackoverflow.com/questions/17352469/how-can-i-build-a-model-to-distinguish-tweets-about-apple-inc-from-tweets-abo/17502141#17502141", "question_id": 17352469, "answer_id": 17502141}, {"body": "<p>Using a decision tree seems to work quite well for this problem. At least it produces a higher accuracy than a naive bayes classifier with my chosen features.</p>\n\n<p>If you want to play around with some possibilities, you can use the following code, which requires nltk to be installed. The nltk book is also freely available online, so you might want to read a bit about how all of this actually works: <a href=\"http://nltk.googlecode.com/svn/trunk/doc/book/ch06.html\">http://nltk.googlecode.com/svn/trunk/doc/book/ch06.html</a></p>\n\n<pre><code>#coding: utf-8\nimport nltk\nimport random\nimport re\n\ndef get_split_sets():\n    structured_dataset = get_dataset()\n    train_set = set(random.sample(structured_dataset, int(len(structured_dataset) * 0.7)))\n    test_set = [x for x in structured_dataset if x not in train_set]\n\n    train_set = [(tweet_features(x[1]), x[0]) for x in train_set]\n    test_set = [(tweet_features(x[1]), x[0]) for x in test_set]\n    return (train_set, test_set)\n\ndef check_accurracy(times=5):\n    s = 0\n    for _ in xrange(times):\n        train_set, test_set = get_split_sets()\n        c = nltk.classify.DecisionTreeClassifier.train(train_set)\n        # Uncomment to use a naive bayes classifier instead\n        #c = nltk.classify.NaiveBayesClassifier.train(train_set)\n        s += nltk.classify.accuracy(c, test_set)\n\n    return s / times\n\n\ndef remove_urls(tweet):\n    tweet = re.sub(r'http:\\/\\/[^ ]+', \"\", tweet)\n    tweet = re.sub(r'pic.twitter.com/[^ ]+', \"\", tweet)\n    return tweet\n\ndef tweet_features(tweet):\n    words = [x for x in nltk.tokenize.wordpunct_tokenize(remove_urls(tweet.lower())) if x.isalpha()]\n    features = dict()\n    for bigram in nltk.bigrams(words):\n        features[\"hasBigram(%s)\" % \",\".join(bigram)] = True\n    for trigram in nltk.trigrams(words):\n        features[\"hasTrigram(%s)\" % \",\".join(trigram)] = True  \n    return features\n\ndef get_dataset():\n    dataset = \"\"\"copy dataset in here\n\"\"\"\n    structured_dataset = [('fruit' if x[0] == '0' else 'company', x[2:]) for x in dataset.splitlines()]\n    return structured_dataset\n\nif __name__ == '__main__':\n    print check_accurracy()\n</code></pre>\n", "title": "How can I build a model to distinguish tweets about Apple (Inc.) from tweets about apple (fruit)?", "tags": ["java", "python", "r", "machine-learning", "classification"], "link": "http://stackoverflow.com/questions/17352469/how-can-i-build-a-model-to-distinguish-tweets-about-apple-inc-from-tweets-abo/17502204#17502204", "question_id": 17352469, "answer_id": 17502204}, {"body": "<p>To simplify answers based on Conditional Random Fields a bit...context is huge here. You will want to pick out in those tweets that clearly show Apple the company vs apple the fruit. Let me outline a list of features here that might be useful for you to start with. For more information look up noun phrase chunking, and something called BIO labels. See (<a href=\"http://www.cis.upenn.edu/~pereira/papers/crf.pdf\" rel=\"nofollow\">http://www.cis.upenn.edu/~pereira/papers/crf.pdf</a>) </p>\n\n<p>Surrounding words: Build a feature vector for the previous word and the next word, or if you want more features perhaps the previous 2 and next 2 words. You don't want too many words in the model or it won't match the data very well. \nIn Natural Language Processing, you are going to want to keep this as general as possible.</p>\n\n<p>Other features to get from surrounding words include the following:</p>\n\n<p>Whether the first character is a capital</p>\n\n<p>Whether the last character in the word is a period</p>\n\n<p>The part of speech of the word (Look up part of speech tagging)</p>\n\n<p>The text itself of the word</p>\n\n<p>I don't advise this, but to give more examples of features specifically for Apple:</p>\n\n<p>WordIs(Apple)</p>\n\n<p>NextWordIs(Inc.)</p>\n\n<p>You get the point. Think of Named Entity Recognition as describing a sequence, and then using some math to tell a computer how to calculate that.</p>\n\n<p>Keep in mind that natural language processing is a pipeline based system. Typically, you break things in to sentences, move to tokenization, then do part of speech tagging or even dependency parsing.</p>\n\n<p>This is all to get you a list of features you can use in your model to identify what you're looking for.</p>\n", "title": "How can I build a model to distinguish tweets about Apple (Inc.) from tweets about apple (fruit)?", "tags": ["java", "python", "r", "machine-learning", "classification"], "link": "http://stackoverflow.com/questions/17352469/how-can-i-build-a-model-to-distinguish-tweets-about-apple-inc-from-tweets-abo/17502732#17502732", "question_id": 17352469, "answer_id": 17502732}, {"body": "<p>Use <a href=\"http://www.csie.ntu.edu.tw/~cjlin/libshorttext/\" rel=\"nofollow\">LibShortText</a>. This <a href=\"http://en.wikipedia.org/wiki/Python_%28programming_language%29\" rel=\"nofollow\">Python</a> utility has already been tuned to work for short text categorization tasks, and it works well. The maximum you'll have to do is to write a loop to pick the best combination of flags. I used it to do supervised speech act classification in emails and the results were up to 95-97% accurate (during 5 fold cross validation!).</p>\n\n<p>And it comes from the makers of <a href=\"https://en.wikipedia.org/wiki/LIBSVM\" rel=\"nofollow\">LIBSVM</a> and <a href=\"https://en.wikipedia.org/wiki/LIBSVM\" rel=\"nofollow\">LIBLINEAR</a> whose <a href=\"https://en.wikipedia.org/wiki/Support_vector_machine\" rel=\"nofollow\">support vector machine</a> (SVM) implementation is used in sklearn and cran, so you can be reasonably assured that their implementation is not buggy.</p>\n", "title": "How can I build a model to distinguish tweets about Apple (Inc.) from tweets about apple (fruit)?", "tags": ["java", "python", "r", "machine-learning", "classification"], "link": "http://stackoverflow.com/questions/17352469/how-can-i-build-a-model-to-distinguish-tweets-about-apple-inc-from-tweets-abo/17520217#17520217", "question_id": 17352469, "answer_id": 17520217}], "creation_date": 1372364459, "score": 78, "link": "http://stackoverflow.com/questions/17352469/how-can-i-build-a-model-to-distinguish-tweets-about-apple-inc-from-tweets-abo", "question_id": 17352469}, {"body": "<p>I'm relative new to the webservices world and my research seems to have confused me more than enlighten me, my problem is that I was given a library(jar) which I have to extend with some webservice functionality.</p>\n\n<p>This library will be shared to other developers, and among the classes in the jar will be classes that have a method which calls a webservice (that essentially sets an attribute of the class, does some business logic, like storing the object in a db, etc and sends back the object with those modifications). I want to make the call to this service as simple as possible, hopefully as simple so that the developer using the class only need to do.</p>\n\n<pre><code>Car c = new Car(\"Blue\");\nc.webmethod();\n</code></pre>\n\n<p>I have been studying JAX-WS to use on the server but seems to me that I don't need to create a <code>wsimport</code> in the server nor the <code>wsimport</code> on the client, since I know that both have the classes, I just need some interaction between classes shared in both the server and the client. How do you think makes sense to do the webservice and the call in the class?</p>\n", "tags": ["java", "web-services", "soap", "jax-ws", "saaj"], "title": "How to do a SOAP Web Service call from Java class?", "answers": [{"body": "<p>I understand your problem boils down to <strong>how to call a SOAP (JAX-WS) web service from Java and get its returning object</strong>. In that case, you have two possible approaches:</p>\n\n<ol>\n<li>Generate the Java classes through <code>wsimport</code> and use them; or</li>\n<li>Create a SOAP client that:\n\n<ol>\n<li>Serializes the service's parameters to XML;</li>\n<li>Calls the web method through HTTP manipulation; and</li>\n<li>Parse the returning XML response back into an object.</li>\n</ol></li>\n</ol>\n\n<p><br>\n<strong>About the first approach (using <code>wsimport</code>):</strong></p>\n\n<p>I see you already have the services' (entities or other) business classes, and it's a fact that the <code>wsimport</code> generates a whole new set of classes (that are somehow duplicates of the classes you already have).</p>\n\n<p>I'm afraid, though, in this scenario, you can only either:</p>\n\n<ul>\n<li>Adapt (edit) the <code>wsimport</code> generated code to make it use <strong>your</strong> business classes (this is difficult and somehow not worth it - bear in mind everytime the WSDL changes, you'll have to regenerate and readapt the code); or</li>\n<li>Give up and use the <code>wsimport</code> generated classes. (In this solution, you business code could \"use\" the generated classes as a service from another architectural layer.)</li>\n</ul>\n\n<p><strong>About the second approach (create your custom SOAP client):</strong></p>\n\n<p>In order to implement the second approach, you'll have to:</p>\n\n<ol>\n<li>Make the call:\n\n<ul>\n<li>Use the SAAJ (SOAP with Attachments API for Java) framework (see below, it's shipped with Java SE 1.6 or above) to make the calls; or</li>\n<li>You can also do it through <code>java.net.HttpUrlconnection</code> (and some <code>java.io</code> handling).</li>\n</ul></li>\n<li>Turn the objects into and back from XML:\n\n<ul>\n<li>Use an OXM (Object to XML Mapping) framework such as JAXB to serialize/deserialize the XML from/into objects</li>\n<li>Or, if you must, manually create/parse the XML (this can be the best solution if the received object is only a little bit differente from the sent one).</li>\n</ul></li>\n</ol>\n\n<p>Creating a SOAP client using classic <code>java.net.HttpUrlConnection</code> is not that hard (but not that simple either), and you can find in <a href=\"http://www.ibm.com/developerworks/library/x-soapcl/listing1.html\">this link</a> a very good starting code.</p>\n\n<p>I recommend you use the SAAJ framework:</p>\n\n<blockquote>\n  <p><strong>SOAP with Attachments API for Java (SAAJ)</strong> is mainly used for dealing directly with SOAP Request/Response messages which happens behind the scenes in any Web Service API. It allows the developers to directly send and receive soap messages instead of using JAX-WS.</p>\n</blockquote>\n\n<p>See below a working example (run it!) of a SOAP web service call using SAAJ. It calls <a href=\"http://ws.cdyne.com/emailverify/Emailvernotestemail.asmx?wsdl\">this web service</a>.</p>\n\n<pre><code>import javax.xml.soap.*;\nimport javax.xml.transform.*;\nimport javax.xml.transform.stream.*;\n\npublic class SOAPClientSAAJ {\n\n    /**\n     * Starting point for the SAAJ - SOAP Client Testing\n     */\n    public static void main(String args[]) {\n        try {\n            // Create SOAP Connection\n            SOAPConnectionFactory soapConnectionFactory = SOAPConnectionFactory.newInstance();\n            SOAPConnection soapConnection = soapConnectionFactory.createConnection();\n\n            // Send SOAP Message to SOAP Server\n            String url = \"http://ws.cdyne.com/emailverify/Emailvernotestemail.asmx\";\n            SOAPMessage soapResponse = soapConnection.call(createSOAPRequest(), url);\n\n            // Process the SOAP Response\n            printSOAPResponse(soapResponse);\n\n            soapConnection.close();\n        } catch (Exception e) {\n            System.err.println(\"Error occurred while sending SOAP Request to Server\");\n            e.printStackTrace();\n        }\n    }\n\n    private static SOAPMessage createSOAPRequest() throws Exception {\n        MessageFactory messageFactory = MessageFactory.newInstance();\n        SOAPMessage soapMessage = messageFactory.createMessage();\n        SOAPPart soapPart = soapMessage.getSOAPPart();\n\n        String serverURI = \"http://ws.cdyne.com/\";\n\n        // SOAP Envelope\n        SOAPEnvelope envelope = soapPart.getEnvelope();\n        envelope.addNamespaceDeclaration(\"example\", serverURI);\n\n        /*\n        Constructed SOAP Request Message:\n        &lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:example=\"http://ws.cdyne.com/\"&gt;\n            &lt;SOAP-ENV:Header/&gt;\n            &lt;SOAP-ENV:Body&gt;\n                &lt;example:VerifyEmail&gt;\n                    &lt;example:email&gt;mutantninja@gmail.com&lt;/example:email&gt;\n                    &lt;example:LicenseKey&gt;123&lt;/example:LicenseKey&gt;\n                &lt;/example:VerifyEmail&gt;\n            &lt;/SOAP-ENV:Body&gt;\n        &lt;/SOAP-ENV:Envelope&gt;\n         */\n\n        // SOAP Body\n        SOAPBody soapBody = envelope.getBody();\n        SOAPElement soapBodyElem = soapBody.addChildElement(\"VerifyEmail\", \"example\");\n        SOAPElement soapBodyElem1 = soapBodyElem.addChildElement(\"email\", \"example\");\n        soapBodyElem1.addTextNode(\"mutantninja@gmail.com\");\n        SOAPElement soapBodyElem2 = soapBodyElem.addChildElement(\"LicenseKey\", \"example\");\n        soapBodyElem2.addTextNode(\"123\");\n\n        MimeHeaders headers = soapMessage.getMimeHeaders();\n        headers.addHeader(\"SOAPAction\", serverURI  + \"VerifyEmail\");\n\n        soapMessage.saveChanges();\n\n        /* Print the request message */\n        System.out.print(\"Request SOAP Message = \");\n        soapMessage.writeTo(System.out);\n        System.out.println();\n\n        return soapMessage;\n    }\n\n    /**\n     * Method used to print the SOAP Response\n     */\n    private static void printSOAPResponse(SOAPMessage soapResponse) throws Exception {\n        TransformerFactory transformerFactory = TransformerFactory.newInstance();\n        Transformer transformer = transformerFactory.newTransformer();\n        Source sourceContent = soapResponse.getSOAPPart().getContent();\n        System.out.print(\"\\nResponse SOAP Message = \");\n        StreamResult result = new StreamResult(System.out);\n        transformer.transform(sourceContent, result);\n    }\n\n}\n</code></pre>\n\n<p>(The code above was taken and adapted from <a href=\"http://techdive.in/web-service/saaj-web-service-soap-client\">this page</a>.)</p>\n\n<p>About using JAXB for serializing/deserializing, it is very easy to find information about it. You can start here: <a href=\"http://www.mkyong.com/java/jaxb-hello-world-example/\">http://www.mkyong.com/java/jaxb-hello-world-example/</a>.</p>\n", "title": "How to do a SOAP Web Service call from Java class?", "tags": ["java", "web-services", "soap", "jax-ws", "saaj"], "link": "http://stackoverflow.com/questions/15940234/how-to-do-a-soap-web-service-call-from-java-class/15942217#15942217", "question_id": 15940234, "answer_id": 15942217}], "creation_date": 1365650921, "score": 77, "link": "http://stackoverflow.com/questions/15940234/how-to-do-a-soap-web-service-call-from-java-class", "question_id": 15940234}, {"body": "<p>What's the difference between <code>future</code> and <code>promise</code>?<br>\nThey both act like a placeholder for future results, but where is the main difference?</p>\n", "tags": ["java", "concurrency", "future", "promise"], "title": "Difference between Future and Promise", "answers": [{"body": "<p>According to <a href=\"http://cs.oswego.edu/pipermail/concurrency-interest/2012-December/010423.html\">this discussion</a>, <code>Promise</code> has finally been called <code>CompletableFuture</code> for inclusion in Java 8, and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\">its javadoc</a> explains:</p>\n\n<blockquote>\n  <p>A Future that may be explicitly completed (setting its value and status), and may be used as a CompletionStage, supporting dependent functions and actions that trigger upon its completion.  </p>\n</blockquote>\n\n<p>An example is also given on the list:</p>\n\n<pre><code>f.then((s -&gt; aStringFunction(s)).thenAsync(s -&gt; ...);\n</code></pre>\n\n<p>Note that the final API is slightly different but allows similar asynchronous execution:</p>\n\n<pre><code>CompletableFuture&lt;String&gt; f = ...;\nf.thenApply(this::modifyString).thenAccept(System.out::println);\n</code></pre>\n", "title": "Difference between Future and Promise", "tags": ["java", "concurrency", "future", "promise"], "link": "http://stackoverflow.com/questions/14541975/difference-between-future-and-promise/14542066#14542066", "question_id": 14541975, "answer_id": 14542066}, {"body": "<p>I am aware that there's already an accepted answer but would like to add my two cents nevertheless:</p>\n\n<p>As a <strong>caller</strong> of an asynchronous API method, you will get a <strong><code>Future</code></strong> as a handle to the computation's result. You can e.g. call <code>get()</code> on it to wait for the computation to complete and retrieve the result.</p>\n\n<p>Now think of how this API method is actually implemented: The <strong>implementor</strong> must return a <code>Future</code> immediately. She is responsible for completing that future as soon as the computation is done (which she will know because she is implementing the dispatch logic ;-)). She will use a <strong><code>Promise</code></strong>/<strong><code>CompletableFuture</code></strong> to do just that: Construct and return the <code>CompletableFuture</code> immediately, and call <code>complete(T result)</code> once the computation is done.</p>\n\n<p>TLDR: Future and Promise are the two sides of an asynchronous operation: <strong>consumer/caller</strong> vs. <strong>producer/implementor</strong>.</p>\n", "title": "Difference between Future and Promise", "tags": ["java", "concurrency", "future", "promise"], "link": "http://stackoverflow.com/questions/14541975/difference-between-future-and-promise/27793863#27793863", "question_id": 14541975, "answer_id": 27793863}, {"body": "<p>(I'm not completely happy with the answers so far, so here is my attempt...)</p>\n\n<p>I think that  Kevin Wright's comment (<em>\"You can make a Promise and it's up to you to keep it. When someone else makes you a promise you must wait to see if they honour it in the Future\"</em>) summarizes it pretty well, but some explanation can be useful.</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Futures_and_promises\">Futures and promises</a> are pretty similar concepts, the difference is that a future is a read-only container for a result that does not yet exist, while a promise can be written (normally only once). The Java 8 <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\">CompletableFuture </a> and the Guava <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/SettableFuture.html\">SettableFuture</a> can be thought of as promises, because their value can be set (\"completed\"), but they also implement the Future interface, therefore there is no difference for the client. </p>\n\n<p>The result of the future will be set by \"someone else\" - by the result of an asynchronous computation. Note how <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/FutureTask.html\">FutureTask</a> - a classic future - <em>must</em> be initialized with a Callable or Runnable, there is no no-argument constructor, and both Future and FutureTask are read-only from the outside (the set methods of FutureTask are protected). The value will be set to the result of the computation from the inside.</p>\n\n<p>On the other hand, the result of a promise can be set by \"you\" (or in fact by anybody) anytime because it has a public setter method. Both CompletableFuture and SettableFuture can be created without any task, and their value can be set at any time. You send a promise to the client code, and fulfill it later as you wish.</p>\n\n<p>Note that CompletableFuture is not a \"pure\" promise, it can be initialized with a task just like FutureTask, and its most useful feature is the unrelated chaining of processing steps.</p>\n\n<p>Also note that a promise does not have to be a subtype of future and it does not have to be the same object. In Scala a Future object is created by an asynchronous computation or by a <em>different</em> Promise object. In C++ the situation is similar: the promise object is used by the producer and the future object by the consumer. The advantage of this separation is that the client cannot set the value of the future.</p>\n\n<p>Both <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/scheduling/annotation/AsyncResult.html\">Spring</a> and <a href=\"http://docs.oracle.com/javaee/7/api/javax/ejb/AsyncResult.html?is-external=true\">EJB 3.1</a> have an AsyncResult class, which is similar to the Scala/C++ promises. AsyncResult does implement Future but this is not the real future: asynchronous methods in Spring/EJB return a different, read-only Future object through some background magic, and this second \"real\" future can be used by the client to access the result.</p>\n", "title": "Difference between Future and Promise", "tags": ["java", "concurrency", "future", "promise"], "link": "http://stackoverflow.com/questions/14541975/difference-between-future-and-promise/28821051#28821051", "question_id": 14541975, "answer_id": 28821051}, {"body": "<p>Not sure if this can be an answer but as I see what others have said for someone it may look like you need two separate abstractions for both of these concepts so that one of them (<code>Future</code>) is just a read-only view of the other (<code>Promise</code>) ... but actually this is not needed.</p>\n\n<p>For example take a look at how promises are defined in javascript:</p>\n\n<p><a href=\"https://promisesaplus.com/\" rel=\"nofollow\">https://promisesaplus.com/</a></p>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise</a></p>\n\n<p>The focus is on the composability using the <code>then</code> method like:</p>\n\n<pre><code>asyncOp1()\n.then(function(op1Result){\n  // do something\n  return asyncOp2();\n})\n.then(function(op2Result){\n  // do something more\n  return asyncOp3();\n})\n.then(function(op3Result){\n  // do something even more\n  return syncOp4(op3Result);\n})\n...\n.then(function(result){\n  console.log(result);\n})\n.catch(function(error){\n  console.log(error);\n})\n</code></pre>\n\n<p>which makes asynchronous computation to look like synchronous:</p>\n\n<pre><code>try {\n  op1Result = syncOp1();\n  // do something\n  op1Result = syncOp2();\n  // do something more\n  op3Result = syncOp3();\n  // do something even more\n  syncOp4(op3Result);\n  ...\n  console.log(result);\n} catch(error) {\n  console.log(error);\n}\n</code></pre>\n\n<p>which is pretty cool.\n(Not as cool as <em>async-await</em> but <em>async-await</em> just removes the boilerplate <em>....then(function(result) {....</em> from it).</p>\n\n<p>And actually their abstraction is pretty good as the promise constructor </p>\n\n<pre><code>new Promise( function(resolve, reject) { /* do it */ } );\n</code></pre>\n\n<p>allows you to provide two callbacks which can be used to either complete the <code>Promise</code> successfully or with an error. So that only the code that constructs the <code>Promise</code> can complete it and the code that receives an already constructed <code>Promise</code> object has the read-only view.</p>\n\n<p>With inheritance the above can be achieved if <em>resolve</em> and <em>reject</em> are protected methods.</p>\n", "title": "Difference between Future and Promise", "tags": ["java", "concurrency", "future", "promise"], "link": "http://stackoverflow.com/questions/14541975/difference-between-future-and-promise/37477557#37477557", "question_id": 14541975, "answer_id": 37477557}], "creation_date": 1359237382, "score": 77, "link": "http://stackoverflow.com/questions/14541975/difference-between-future-and-promise", "question_id": 14541975}, {"body": "<pre><code>class Test{\n    public static void main(String arg[]){    \n        System.out.println(\"**MAIN METHOD\");\n        System.out.println(Mno.VAL);//SOP(9090);\n        System.out.println(Mno.VAL+100);//SOP(9190);\n    }\n\n}\n\nclass Mno{\n    final static int VAL=9090;\n    static{\n        System.out.println(\"**STATIC BLOCK OF Mno\\t:\"+VAL);\n    }\n}\n</code></pre>\n\n<p>I know that a <code>static</code> block executed when class loaded. But in this case the instance variable inside class <code>Mno</code> is <code>final</code>, because of that the <code>static</code> block is not executing. </p>\n\n<p>Why is that so? And if I would remove the <code>final</code>, would it work fine? </p>\n\n<p>Which memory will be allocated first, the <code>static final</code> variable or the <code>static</code> block? </p>\n\n<p>If due to the <code>final</code> access modifier the class does not get loaded, then how can the variable get memory?</p>\n", "tags": ["java", "static", "access-modifiers"], "title": "Static block in Java not executed", "answers": [{"body": "<ol>\n<li>A <code>static final int</code> field is a <em>compile-time constant</em> and its value is hardcoded into the destination class without a reference to its origin; </li>\n<li>therefore your main class does not trigger the loading of the class containing the field; </li>\n<li>therefore the static initializer in that class is not executed. </li>\n</ol>\n\n<p>In specific detail, the compiled bytecode corresponds to this:</p>\n\n<pre><code>public static void main(String arg[]){    \n    System.out.println(\"**MAIN METHOD\");\n    System.out.println(9090)\n    System.out.println(9190)\n}\n</code></pre>\n\n<p>As soon as you remove <code>final</code>, it is no longer a compile-time constant and the special behavior described above does not apply. The <code>Mno</code> class is loaded as you expect and its static initializer executes.</p>\n", "title": "Static block in Java not executed", "tags": ["java", "static", "access-modifiers"], "link": "http://stackoverflow.com/questions/16853747/static-block-in-java-not-executed/16853836#16853836", "question_id": 16853747, "answer_id": 16853836}, {"body": "<p>As far as I know, it will be executed in order of appearance. For instance :</p>\n\n<pre><code> public class Statique {\n     public static final String value1 = init1();\n\n     static {\n         System.out.println(\"trace middle\");\n     }\n     public static final String value2 = init2();\n\n\n     public static String init1() {\n         System.out.println(\"trace init1\");\n         return \"1\";\n     }\n     public static String init2() {\n         System.out.println(\"trace init2\");\n         return \"2\";\n     }\n }\n</code></pre>\n\n<p>will print</p>\n\n<pre><code>  trace init1\n  trace middle\n  trace init2\n</code></pre>\n\n<p>I just tested it and the statics are initialized (=> print) when the class \"Statique\" is actually used and \"executed\" in another piece of code (my case I did \"new Statique()\".</p>\n", "title": "Static block in Java not executed", "tags": ["java", "static", "access-modifiers"], "link": "http://stackoverflow.com/questions/16853747/static-block-in-java-not-executed/16853993#16853993", "question_id": 16853747, "answer_id": 16853993}, {"body": "<p>The reason why the class is not loaded is that <code>VAL</code> is <code>final</code> <strong>AND</strong> it is initialised with <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28\">a constant expression</a> (9090). If, and only if, those two conditions are met, the constant is evaluated at compile time and \"hardcoded\" where needed.</p>\n\n<p>To prevent the expression from being evaluated at compile time (and to make the JVM load your class), you can either:</p>\n\n<ul>\n<li><p>remove the final keyword:</p>\n\n<pre><code>static int VAL = 9090; //not a constant variable any more\n</code></pre></li>\n<li><p>or change the right hand side expression to something non constant (even if the variable is still final):</p>\n\n<pre><code>final static int VAL = getInt(); //not a constant expression any more\nstatic int getInt() { return 9090; }\n</code></pre></li>\n</ul>\n", "title": "Static block in Java not executed", "tags": ["java", "static", "access-modifiers"], "link": "http://stackoverflow.com/questions/16853747/static-block-in-java-not-executed/16929330#16929330", "question_id": 16853747, "answer_id": 16929330}, {"body": "<p>If you see generated bytecode using <code>javap -v Test.class</code>, main() comes out like:</p>\n\n<pre><code>public static void main(java.lang.String[]) throws java.lang.Exception;\n    flags: ACC_PUBLIC, ACC_STATIC\n    Code:\n      stack=2, locals=1, args_size=1\n         0: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;\n         3: ldc           #3                  // String **MAIN METHOD\n         5: invokevirtual #4                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V\n         8: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;\n        11: sipush        9090\n        14: invokevirtual #5                  // Method java/io/PrintStream.println:(I)V\n        17: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;\n        20: sipush        9190\n        23: invokevirtual #5                  // Method java/io/PrintStream.println:(I)V\n        26: return        \n</code></pre>\n\n<p>You can clearly see in \"<code>11: sipush        9090</code>\" that static final value is directly used, because Mno.VAL is a compile time constant. Therefore it is not required to load Mno class. Hence static block of Mno is not executed.</p>\n\n<p>You can execute the static block by manually loading Mno as below:</p>\n\n<pre><code>class Test{\n    public static void main(String arg[]) throws Exception {\n        System.out.println(\"**MAIN METHOD\");\n        Class.forName(\"Mno\");                 // Load Mno\n        System.out.println(Mno.VAL);\n        System.out.println(Mno.VAL+100);\n    }\n\n}\n\nclass Mno{\n    final static int VAL=9090;\n    static{\n        System.out.println(\"**STATIC BLOCK OF Mno\\t:\"+VAL);\n    }\n}\n</code></pre>\n", "title": "Static block in Java not executed", "tags": ["java", "static", "access-modifiers"], "link": "http://stackoverflow.com/questions/16853747/static-block-in-java-not-executed/16947857#16947857", "question_id": 16853747, "answer_id": 16947857}, {"body": "<p>1)Actually you have not extends that Mno class so when compilation start it will generate constant of variable VAL and when execution start when that variable is needed its load thats from memory.so its not required your class reference so that static bock is not executed.</p>\n\n<p>2)if A class  extend that Mno class at that time that static block is included in A class if you do this then that static block is executed.\nfor example..\n public class A extends Mno{</p>\n\n<pre><code>public static void main(String arg[]){    \n    System.out.println(\"**MAIN METHOD\");\n    System.out.println(Mno.VAL);//SOP(9090);\n    System.out.println(Mno.VAL+100);//SOP(9190);\n}\n\n}\n\nclass Mno{\n      final static int VAL=9090;\n    static`{`\n        System.out.println(\"**STATIC BLOCK OF Mno\\t:\"+VAL);\n    }\n}\n</code></pre>\n", "title": "Static block in Java not executed", "tags": ["java", "static", "access-modifiers"], "link": "http://stackoverflow.com/questions/16853747/static-block-in-java-not-executed/16954099#16954099", "question_id": 16853747, "answer_id": 16954099}], "creation_date": 1369991426, "score": 76, "link": "http://stackoverflow.com/questions/16853747/static-block-in-java-not-executed", "question_id": 16853747}, {"body": "<p>I have been using Open JDK for ages, initially for small projects where it has no problems. But since I started to play with it for big toys, I started to notice random/unknown fatal error and crashes (with x.264 codecs etc), it was a nightmare till then to get ride of system crash+fatal errors caused by Open JDK.</p>\n\n<p>After getting completely frustrated and tired with Open JDK, I finally decided to switch into Oracle JDK 7. Since then my fatal errors/crashes were gone. Still doing trace to see if it occurs but never got those system crashes yet.</p>\n\n<p>Now I am wondering, if Open JDK is only a license issue, why is stability impossible with it?</p>\n\n<p>Why does Open JDK keeps bug alive, inside there stable releases, but claiming that its clone of Oracle JDK (which is not really), then what really technically separates Open JDK from Oracle JDK? (only quick features availability? or focused on stability/reliability?)</p>\n", "tags": ["linux", "java", "java-7", "openjdk"], "title": "Technically what is the main difference between Oracle JDK and Open JDK?", "answers": [{"body": "<p>Technical differences are a consequence of the goal of each one (OpenJDK is meant to be the reference implementation, open to the community, while Oracle is meant to be a commercial one)</p>\n\n<p>They both have \"almost\" the same code of the classes in the Java API; but the code for the virtual machine itself is actually different, and when it comes to libraries, OpenJDK tends to use open libraries while Oracle tends to use closed ones; for instance,  <a href=\"http://technfun.wordpress.com/2013/01/18/last-difference-openjdk-oracle-jdk\">the font library</a>. </p>\n", "title": "Technically what is the main difference between Oracle JDK and Open JDK?", "tags": ["linux", "java", "java-7", "openjdk"], "link": "http://stackoverflow.com/questions/17360011/technically-what-is-the-main-difference-between-oracle-jdk-and-open-jdk/17364418#17364418", "question_id": 17360011, "answer_id": 17364418}, {"body": "<p>OpenJDK is a reference model and open source, while Oracle JDK is an implementation of the OpenJDK and is not open source. Oracle JDK is more stable than OpenJDK.</p>\n\n<p>OpenJDK is released under license GPL v2 wherein Oracle JDK is licensed under Oracle Binary Code License Agreement.</p>\n\n<p>OpenJDK and Oracle JDK have almost the same code, but Oracle JDK has more classes and some bugs fixed.</p>\n\n<p>So if you want to develop enterprise/commercial software I would suggest to go for Oracle JDK, as it is thoroughly tested and stable.</p>\n\n<p>I have faced lot of problems with application crashes using OpenJDK, which are fixed just by switching to Oracle JDK</p>\n", "title": "Technically what is the main difference between Oracle JDK and Open JDK?", "tags": ["linux", "java", "java-7", "openjdk"], "link": "http://stackoverflow.com/questions/17360011/technically-what-is-the-main-difference-between-oracle-jdk-and-open-jdk/22558837#22558837", "question_id": 17360011, "answer_id": 22558837}], "creation_date": 1372406539, "score": 76, "link": "http://stackoverflow.com/questions/17360011/technically-what-is-the-main-difference-between-oracle-jdk-and-open-jdk", "question_id": 17360011}, {"body": "<p>I tried searching using Google Search and Stack&nbsp;Overflow, but it didn't show up any results. I have seen this in opensource library code:</p>\n\n<pre><code>Notification notification = new Notification(icon, tickerText, when);\nnotification.defaults |= Notification.DEFAULT_SOUND;\nnotification.defaults |= Notification.DEFAULT_VIBRATE;\n</code></pre>\n\n<p>What does \"|=\" ( <code>pipe equal operator</code> ) mean?</p>\n", "tags": ["java", "android", "operators"], "title": "What does &quot;|=&quot; mean? (pipe equal operator)", "answers": [{"body": "<p><code>|=</code> reads the same way as <code>+=</code>.</p>\n\n<pre><code>notification.defaults |= Notification.DEFAULT_SOUND;\n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>notification.defaults = notification.defaults | Notification.DEFAULT_SOUND;\n</code></pre>\n\n<p>where <code>|</code> is the bit-wise OR operator.</p>\n\n<p>All operators are referenced <a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html\">here</a>.</p>\n\n<p>A bit-wise operator is used because, as is frequent, those constants enable an int to carry flags.</p>\n\n<p>If you <a href=\"http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.6_r2/android/app/Notification.java\">look</a> at those constants, you'll see that they're in powers of two :</p>\n\n<pre><code>public static final int DEFAULT_SOUND = 1;\npublic static final int DEFAULT_VIBRATE = 2; // is the same than 1&lt;&lt;1 or 10 in binary\npublic static final int DEFAULT_LIGHTS = 4; // is the same than 1&lt;&lt;2 or 100 in binary\n</code></pre>\n\n<p>So you can use bit-wise OR to add flags</p>\n\n<pre><code>int myFlags = DEFAULT_SOUND | DEFAULT_VIBRATE; // same as 001 | 010, producing 011\n</code></pre>\n\n<p>so</p>\n\n<pre><code>myFlags |= DEFAULT_LIGHTS;\n</code></pre>\n\n<p>simply means we add a flag.</p>\n\n<p>And symmetrically, we test a flag is set using <code>&amp;</code> :</p>\n\n<pre><code>boolean hasVibrate = (DEFAULT_VIBRATE &amp; myFlags) != 0;\n</code></pre>\n", "title": "What does &quot;|=&quot; mean? (pipe equal operator)", "tags": ["java", "android", "operators"], "link": "http://stackoverflow.com/questions/14295469/what-does-mean-pipe-equal-operator/14295472#14295472", "question_id": 14295469, "answer_id": 14295472}, {"body": "<p>It's a shortening for this:</p>\n\n<pre><code>notification.defaults = notification.defaults | Notification.DEFAULT_SOUND;\n</code></pre>\n\n<p>And <code>|</code> is a bit-wise OR.</p>\n", "title": "What does &quot;|=&quot; mean? (pipe equal operator)", "tags": ["java", "android", "operators"], "link": "http://stackoverflow.com/questions/14295469/what-does-mean-pipe-equal-operator/14295480#14295480", "question_id": 14295469, "answer_id": 14295480}, {"body": "<p><code>|</code> is the <a href=\"http://en.wikipedia.org/wiki/Bitwise_operation#OR\">bitwise-or</a> operator, and it is being applied like <code>+=</code>. </p>\n", "title": "What does &quot;|=&quot; mean? (pipe equal operator)", "tags": ["java", "android", "operators"], "link": "http://stackoverflow.com/questions/14295469/what-does-mean-pipe-equal-operator/14295491#14295491", "question_id": 14295469, "answer_id": 14295491}, {"body": "<p>You have already got sufficient answer for your question. But may be my answer help you more about <code>|=</code> kind of binary operators.    </p>\n\n<p>I am writing table for <a href=\"http://www.tutorialspoint.com/java/java_basic_operators.htm\">bitwise operators</a>:<br>\nFollowing are valid:  </p>\n\n<pre><code>----------------------------------------------------------------------------------------\nOperator   Description                                   Example\n----------------------------------------------------------------------------------------\n|=        bitwise inclusive OR and assignment operator   C |= 2 is same as C = C | 2\n^=        bitwise exclusive OR and assignment operator   C ^= 2 is same as C = C ^ 2\n&amp;=        Bitwise AND assignment operator                C &amp;= 2 is same as C = C &amp; 2\n&lt;&lt;=       Left shift AND assignment operator             C &lt;&lt;= 2 is same as C = C &lt;&lt; 2\n&gt;&gt;=       Right shift AND assignment operator            C &gt;&gt;= 2 is same as C = C &gt;&gt; 2  \n----------------------------------------------------------------------------------------\n</code></pre>\n\n<p>note all operators are binary operators.    </p>\n\n<p>Also <strong>Note:</strong> <sub><em>(for below points I wanted to add my answer)</em></sub>  </p>\n\n<ul>\n<li><p><code>&gt;&gt;&gt;</code> is bitwise operator in Java that is called <strong>Unsigned shift</strong><br>\n<del>but  <code>&gt;&gt;&gt;=</code> not an operator in Java.</del> <a href=\"http://bmanolov.free.fr/javaoperators.php\">>>>= operator</a>  </p></li>\n<li><p><code>~</code> is bitwise complement bits, <code>0 to 1 and 1 to 0</code> (Unary operator) but <code>~=</code> not an operator.  </p></li>\n<li><p>Additionally,  <code>!</code> Called Logical NOT Operator, but <code>!=</code> Checks if the value of two operands are equal or not, if values are not equal then condition becomes true. e.g. <code>(A != B) is true</code>. where as <code>A=!B</code> means if <code>B</code> is <code>true</code> then <code>A</code> become <code>false</code> (and if <code>B</code> is <code>false</code> then <code>A</code> become <code>true</code>).  </p></li>\n</ul>\n\n<p><sub>side note: <em><code>|</code> is not called pipe, instead its called OR, pipe is shell terminology transfer one process out to next..</em></sub> </p>\n", "title": "What does &quot;|=&quot; mean? (pipe equal operator)", "tags": ["java", "android", "operators"], "link": "http://stackoverflow.com/questions/14295469/what-does-mean-pipe-equal-operator/14296609#14296609", "question_id": 14295469, "answer_id": 14296609}, {"body": "<p>Note: ||= does not exist. (logical or)\nYou can use </p>\n\n<pre><code>y= y || expr; // expr is NOT evaluated if y==true\n</code></pre>\n\n<p>or</p>\n\n<pre><code>y = expr ? true : y;  // expr is always evaluated.\n</code></pre>\n", "title": "What does &quot;|=&quot; mean? (pipe equal operator)", "tags": ["java", "android", "operators"], "link": "http://stackoverflow.com/questions/14295469/what-does-mean-pipe-equal-operator/31093995#31093995", "question_id": 14295469, "answer_id": 31093995}, {"body": "<p>I was looking for an answer on what <code>|=</code> does in Groovy and although answers above are right on they did not help me understand a particular piece of code I was looking at.</p>\n\n<p>In particular, when applied to a boolean variable \"|=\" will set it to TRUE the first time it encounters a truthy expression on the right side and will HOLD its TRUE value for all |= subsequent calls. Like a latch.</p>\n\n<p>Here a simplified example of this:</p>\n\n<pre><code>groovy&gt; boolean result  \ngroovy&gt; //------------ \ngroovy&gt; println result           //&lt;-- False by default\ngroovy&gt; println result |= false \ngroovy&gt; println result |= true   //&lt;-- set to True and latched on to it\ngroovy&gt; println result |= false \n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>false\nfalse\ntrue\ntrue\n</code></pre>\n\n<p><em>Edit</em>:\nWhy is this useful?</p>\n\n<p>Consider a situation where you want to know if anything has changed on a variety of objects and if so notify some one of the changes. So, you would setup a <code>hasChanges</code> boolean and set it to  <code>|= diff (a,b)</code> and then <code>|= dif(b,c)</code> etc.\nHere is a brief example:</p>\n\n<pre><code>groovy&gt; boolean hasChanges, a, b, c, d \ngroovy&gt; diff = {x,y -&gt; x!=y}  \ngroovy&gt; hasChanges |= diff(a,b) \ngroovy&gt; hasChanges |= diff(b,c) \ngroovy&gt; hasChanges |= diff(true,false) \ngroovy&gt; hasChanges |= diff(c,d) \ngroovy&gt; hasChanges \n\nResult: true\n</code></pre>\n", "title": "What does &quot;|=&quot; mean? (pipe equal operator)", "tags": ["java", "android", "operators"], "link": "http://stackoverflow.com/questions/14295469/what-does-mean-pipe-equal-operator/34274848#34274848", "question_id": 14295469, "answer_id": 34274848}], "creation_date": 1358008999, "score": 75, "link": "http://stackoverflow.com/questions/14295469/what-does-mean-pipe-equal-operator", "question_id": 14295469}, {"body": "<p>The queryforInt/queryforLong methods in JdbcTemplate are deprecated in Spring 3.2. I can't find out why or what is considered the best practice to replace existing code using these methods.</p>\n\n<p>A typical method:</p>\n\n<pre><code>int rowCount = jscoreJdbcTemplate.queryForInt(\n    \"SELECT count(*) FROM _player WHERE nameKey = ? AND teamClub = ?\",\n    playerNameKey.toUpperCase(),\n    teamNameKey.toUpperCase()\n);\n</code></pre>\n\n<p>OK the above method needs to be re-written as follows:</p>\n\n<pre><code>Object[] params = new Object[] { \n   playerNameKey.toUpperCase(), \n   teamNameKey.toUpperCase()\n};\nint rowCount = jscoreJdbcTemplate.queryForObject(\n    \"SELECT count(*) FROM _player WHERE nameKey = ? AND teamClub = ?\",\n    params, Integer.class);\n</code></pre>\n\n<p>Obviously this deprecation makes the JdbcTemplate class simpler (or does it?). QueryForInt was always a convenience method (I guess) and has been around a long time. Why has it been removed. The code becomes more complicated as a result.</p>\n", "tags": ["java", "spring", "jdbc", "jdbctemplate"], "title": "JdbcTemplate queryForInt/Long is deprecated in Spring 3.2.2. What should it be replaced by?", "answers": [{"body": "<p>Deprecated in favor of <code>queryForObject(String, Class)</code>.</p>\n", "title": "JdbcTemplate queryForInt/Long is deprecated in Spring 3.2.2. What should it be replaced by?", "tags": ["java", "spring", "jdbc", "jdbctemplate"], "link": "http://stackoverflow.com/questions/15661313/jdbctemplate-queryforint-long-is-deprecated-in-spring-3-2-2-what-should-it-be-r/15661510#15661510", "question_id": 15661313, "answer_id": 15661510}, {"body": "<p>What I think is that somebody realized that the queryForInt/Long methods has confusing semantics, that is, from JdbcTemplate source code you can see its current implementation:</p>\n\n<pre><code>@Deprecated\npublic int queryForInt(String sql, Object... args) throws DataAccessException {\n    Number number = queryForObject(sql, args, Integer.class);\n    return (number != null ? number.intValue() : 0);\n}\n</code></pre>\n\n<p>which may lead you to think that if the result set is empty it will return 0, however it throws an exception:</p>\n\n<p><code>org.springframework.dao.EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0</code></p>\n\n<p>so the the following implementation is essentially equivalent to the current one:</p>\n\n<pre><code>@Deprecated\npublic int queryForInt(String sql, Object... args) throws DataAccessException {\n    return queryForObject(sql, args, Integer.class);\n}\n</code></pre>\n\n<p>And then the non deprecated code now must be replaced with the ugly:</p>\n\n<pre><code>    queryForObject(sql, new Object { arg1, arg2, ...}, Integer.class);\n</code></pre>\n\n<p>or this (nicer):</p>\n\n<pre><code>    queryForObject(sql, Integer.class, arg1, arg2, ...);\n</code></pre>\n", "title": "JdbcTemplate queryForInt/Long is deprecated in Spring 3.2.2. What should it be replaced by?", "tags": ["java", "spring", "jdbc", "jdbctemplate"], "link": "http://stackoverflow.com/questions/15661313/jdbctemplate-queryforint-long-is-deprecated-in-spring-3-2-2-what-should-it-be-r/15839137#15839137", "question_id": 15661313, "answer_id": 15839137}, {"body": "<p>I agree with the original poster that deprecating the convenience method queryForLong(sql) is an inconvenience.</p>\n\n<p>I had developed an app using Spring 3.1 and just updated to the latest Spring version (3.2.3) and noticed that it was deprecated.</p>\n\n<p>Fortunately, it was a one line change for me:</p>\n\n<pre><code>return jdbcTemplate.queryForLong(sql);  // deprecated in Spring 3.2.x\n</code></pre>\n\n<p>was changed to </p>\n\n<pre><code>return jdbcTemplate.queryForObject(sql, Long.class);\n</code></pre>\n\n<p>And a couple of Unit Tests seem to indicate, the above change works.</p>\n", "title": "JdbcTemplate queryForInt/Long is deprecated in Spring 3.2.2. What should it be replaced by?", "tags": ["java", "spring", "jdbc", "jdbctemplate"], "link": "http://stackoverflow.com/questions/15661313/jdbctemplate-queryforint-long-is-deprecated-in-spring-3-2-2-what-should-it-be-r/17861875#17861875", "question_id": 15661313, "answer_id": 17861875}, {"body": "<p>Replacing such code:</p>\n\n<pre><code>long num = jdbcTemplate.queryForLong(sql);\n</code></pre>\n\n<p>With this code:</p>\n\n<pre><code>long num = jdbcTemplate.queryForObject(sql, Long.class);\n</code></pre>\n\n<p>is very dangerous because if column have null value queryForObject return null and as we know primitive types can't be null and You will have NullPointerException. The compiler didn't warn You about this. You will know about this error at runtime. The same error You will have if You have method that return primitive type:</p>\n\n<pre><code>public long getValue(String sql) {\n    return = jdbcTemplate.queryForObject(sql, Long.class);\n}\n</code></pre>\n\n<p>The deprecated method queryForLong in JdbcTemplate in Spring 3.2.2 have the following body:</p>\n\n<pre><code>@Deprecated\npublic long queryForLong(String sql) throws DataAccessException {\n    Number number = queryForObject(sql, Long.class);\n    return (number != null ? number.longValue() : 0);\n}\n</code></pre>\n\n<p>You see before they return primitive value there is check that this is not null and if it is null they return 0. By the way - Should be 0L.</p>\n", "title": "JdbcTemplate queryForInt/Long is deprecated in Spring 3.2.2. What should it be replaced by?", "tags": ["java", "spring", "jdbc", "jdbctemplate"], "link": "http://stackoverflow.com/questions/15661313/jdbctemplate-queryforint-long-is-deprecated-in-spring-3-2-2-what-should-it-be-r/18076283#18076283", "question_id": 15661313, "answer_id": 18076283}, {"body": "<p><code>JdbcTemplate#queryForInt</code> returns 0 if the column value is SQL NULL or 0. There is no way to distinguish one case from the other. I think this is the main reason why the method is deprecated. BTW, <code>ResultSet#getInt</code> behaves similarly. Though, we can distinguish between these two cases by <code>ResultSet#wasNull</code>.</p>\n", "title": "JdbcTemplate queryForInt/Long is deprecated in Spring 3.2.2. What should it be replaced by?", "tags": ["java", "spring", "jdbc", "jdbctemplate"], "link": "http://stackoverflow.com/questions/15661313/jdbctemplate-queryforint-long-is-deprecated-in-spring-3-2-2-what-should-it-be-r/36066284#36066284", "question_id": 15661313, "answer_id": 36066284}], "creation_date": 1364394274, "score": 75, "link": "http://stackoverflow.com/questions/15661313/jdbctemplate-queryforint-long-is-deprecated-in-spring-3-2-2-what-should-it-be-r", "question_id": 15661313}, {"body": "<p>I am playing a bit with the new Java 7 IO features, actually I trying to receive all the xml files of a folder. But this throws an exception when the folder does not exist, how can I check if the folder exists with the new IO? </p>\n\n<pre><code>public UpdateHandler(String release) {\n    log.info(\"searching for configuration files in folder \" + release);\n    Path releaseFolder = Paths.get(release);\n    try(DirectoryStream&lt;Path&gt; stream = Files.newDirectoryStream(releaseFolder, \"*.xml\")){\n\n        for (Path entry: stream){\n            log.info(\"working on file \" + entry.getFileName());\n        }\n    }\n    catch (IOException e){\n        log.error(\"error while retrieving update configuration files \" + e.getMessage());\n    }\n\n\n}\n</code></pre>\n", "tags": ["java"], "title": "How to check if a folder exists", "answers": [{"body": "<p>Quite simple:</p>\n\n<pre><code>new File(\"/Path/To/File/or/Directory\").exists();\n</code></pre>\n\n<p>And if you want to be certain it is a directory:</p>\n\n<pre><code>File f = new File(\"/Path/To/File/or/Directory\");\nif (f.exists() &amp;&amp; f.isDirectory()) {\n   ...\n}\n</code></pre>\n", "title": "How to check if a folder exists", "tags": ["java"], "link": "http://stackoverflow.com/questions/15571496/how-to-check-if-a-folder-exists/15571524#15571524", "question_id": 15571496, "answer_id": 15571524}, {"body": "<p>You need to transform your Path into a <code>File</code> and test for existence:</p>\n\n<pre><code>for(Path entry: stream){\n  if(entry.toFile().exists()){\n    log.info(\"working on file \" + entry.getFileName());\n  }\n}\n</code></pre>\n", "title": "How to check if a folder exists", "tags": ["java"], "link": "http://stackoverflow.com/questions/15571496/how-to-check-if-a-folder-exists/15571565#15571565", "question_id": 15571496, "answer_id": 15571565}, {"body": "<p>Using <code>java.nio.file.Files</code>:</p>\n\n<pre><code>Path path = ...;\n\nif (Files.exists(path)) {\n    // ...\n}\n</code></pre>\n\n<p>You can optionally pass this method <code>LinkOption</code> values:</p>\n\n<pre><code>if (Files.exists(path, LinkOption.NOFOLLOW_LINKS)) {\n</code></pre>\n\n<p>There's also a method <code>notExists</code>:</p>\n\n<pre><code>if (Files.notExists(path)) {\n</code></pre>\n", "title": "How to check if a folder exists", "tags": ["java"], "link": "http://stackoverflow.com/questions/15571496/how-to-check-if-a-folder-exists/15571626#15571626", "question_id": 15571496, "answer_id": 15571626}, {"body": "<pre><code>File sourceLoc=new File(\"/a/b/c/folderName\");\nboolean isFolderExisted=false;\nsourceLoc.exists()==true?sourceLoc.isDirectory()==true?isFolderExisted=true:isFolderExisted=false:isFolderExisted=false;\n</code></pre>\n", "title": "How to check if a folder exists", "tags": ["java"], "link": "http://stackoverflow.com/questions/15571496/how-to-check-if-a-folder-exists/15571861#15571861", "question_id": 15571496, "answer_id": 15571861}, {"body": "<p>There is no need to call separately the <code>exists()</code> method, as the <code>isDirectory()</code> implicitly checks that the directory exists or not.</p>\n", "title": "How to check if a folder exists", "tags": ["java"], "link": "http://stackoverflow.com/questions/15571496/how-to-check-if-a-folder-exists/22454659#22454659", "question_id": 15571496, "answer_id": 22454659}, {"body": "<p>To check if a directory exists with the new IO:</p>\n\n<pre><code>if (Files.isDirectory(Paths.get(\"directory\"))) {\n  ...\n}\n</code></pre>\n\n<p><code>isDirectory</code> returns <code>true</code> if the file is a directory; <code>false</code> if the file does not exist, is not a directory, or it cannot be determined if the file is a directory or not.</p>\n\n<p>See: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#isDirectory(java.nio.file.Path,%20java.nio.file.LinkOption...)\">documentation</a>.</p>\n", "title": "How to check if a folder exists", "tags": ["java"], "link": "http://stackoverflow.com/questions/15571496/how-to-check-if-a-folder-exists/26000677#26000677", "question_id": 15571496, "answer_id": 26000677}, {"body": "<p>Generate a file from the string of your folder directory </p>\n\n<pre><code>String path=\"Folder directory\";    \nFile file = new File(path);\n</code></pre>\n\n<p>and use method exist.<br>\nIf you want to generate the folder you sould use mkdir()</p>\n\n<pre><code>if (!file.exists()) {\n            System.out.print(\"No Folder\");\n            file.mkdir();\n            System.out.print(\"Folder created\");\n        }\n</code></pre>\n", "title": "How to check if a folder exists", "tags": ["java"], "link": "http://stackoverflow.com/questions/15571496/how-to-check-if-a-folder-exists/38985883#38985883", "question_id": 15571496, "answer_id": 38985883}], "creation_date": 1363958736, "score": 74, "link": "http://stackoverflow.com/questions/15571496/how-to-check-if-a-folder-exists", "question_id": 15571496}, {"body": "<p>I've recently come across the java <strong>@SafeVarargs</strong> annotation. Googling for what makes a variadic function in Java unsafe left me rather confused (heap poisoning? erased types?), so I'd like to know a few things:</p>\n\n<ol>\n<li><p>What makes a variadic Java function unsafe in the <strong>@SafeVarargs</strong> sense (preferably explained in the form of an in-depth example)?</p></li>\n<li><p>Why is this annotation left to the discretion of the programmer? Isn't this something the compiler should be able to check?</p></li>\n<li><p>Is there some standard one must adhere to in order to ensure his function is indeed varags safe? If not, what are the best practices to ensure it?</p></li>\n</ol>\n", "tags": ["java", "java-7", "varargs"], "title": "Java SafeVarargs annotation, does a standard or best practice exist?", "answers": [{"body": "<p>1) There are many examples on the Internet and on StackOverflow about the particular issue with generics and varargs. Basically, it's when you have a variable number of arguments of a type-parameter type:</p>\n\n<pre><code>void foo(T... args);\n</code></pre>\n\n<p>In Java, varargs are a syntactic sugar that undergoes a simple \"re-writing\" at compile-time: a varargs parameter of type <code>X...</code> is converted into a parameter of type <code>X[]</code>; and every time a call is made to this varargs method, the compiler collects all of the \"variable arguments\" that goes in the varargs parameter, and creates an array just like <code>new X[] { ...(arguments go here)... }</code>.</p>\n\n<p>This works well when the varargs type is concrete like <code>String...</code>. When it's a type variable like <code>T...</code>, it also works when <code>T</code> is known to be a concrete type for that call. e.g. if the method above were part of a class <code>Foo&lt;T&gt;</code>, and you have a <code>Foo&lt;String&gt;</code> reference, then calling <code>foo</code> on it would be okay because we know <code>T</code> is <code>String</code> at that point in the code.</p>\n\n<p>However, it does not work when the \"value\" of <code>T</code> is another type parameter. In Java, it is impossible to create an array of a type-parameter component type (<code>new T[] { ... }</code>). So Java instead uses <code>new Object[] { ... }</code> (here <code>Object</code> is the upper bound of <code>T</code>; if there upper bound were something different, it would be that instead of <code>Object</code>), and then gives you a compiler warning.</p>\n\n<p>So what is wrong with creating <code>new Object[]</code> instead of <code>new T[]</code> or whatever? Well, arrays in Java know their component type at runtime. Thus, the passed array object will have the wrong component type at runtime.</p>\n\n<p>For probably the most common use of varargs, simply to iterate over the elements, this is no problem (you don't care about the runtime type of the array), so this is safe:</p>\n\n<pre><code>@SafeVarargs\nvoid foo(T... args) {\n    for (T x : args) {\n        // do stuff with x\n    }\n}\n</code></pre>\n\n<p>However, for anything that depends on the runtime component type of the passed array, it will not be safe. Here is a simple example of something that is unsafe and crashes:</p>\n\n<pre><code>class UnSafeVarargs\n{\n  static &lt;T&gt; T[] asArray(T... args) {\n    return args;\n  }\n\n  static &lt;T&gt; T[] arrayOfTwo(T a, T b) {\n    return asArray(a, b);\n  }\n\n  public static void main(String[] args) {\n    String[] bar = arrayOfTwo(\"hi\", \"mom\");\n  }\n}\n</code></pre>\n\n<p>The problem here is that we depend on the type of <code>args</code> to be <code>T[]</code> in order to return it as <code>T[]</code>. But actually the type of the argument at runtime is not an instance of <code>T[]</code>.</p>\n\n<p>3) If your method has an argument of type <code>T...</code> (where T is any type parameter), then:</p>\n\n<ul>\n<li>Safe: If your method only depends on the fact that the elements of the array are instances of <code>T</code></li>\n<li>Unsafe: If it depends on the fact that the array is an instance of <code>T[]</code></li>\n</ul>\n\n<p>Things that depend on the runtime type of the array include: returning it as type <code>T[]</code>, passing it as an argument to a parameter of type <code>T[]</code>, getting the array type using <code>.getClass()</code>, passing it to methods that depend on the runtime type of the array, like <code>List.toArray()</code> and <code>Arrays.copyOf()</code>, etc.</p>\n\n<p>2) The distinction I mentioned above is too complicated to be easily distinguished automatically.</p>\n", "title": "Java SafeVarargs annotation, does a standard or best practice exist?", "tags": ["java", "java-7", "varargs"], "link": "http://stackoverflow.com/questions/14231037/java-safevarargs-annotation-does-a-standard-or-best-practice-exist/14252221#14252221", "question_id": 14231037, "answer_id": 14252221}], "creation_date": 1357720106, "score": 74, "link": "http://stackoverflow.com/questions/14231037/java-safevarargs-annotation-does-a-standard-or-best-practice-exist", "question_id": 14231037}, {"body": "<p><a href=\"http://codereview.stackexchange.com/a/22750/4884\">On CodeReview</a> I posted a working piece of code and asked for tips to improve it. One I got was to use a boolean method to check if an ArrayList had an even number of indices (which was required). This was the code that was suggested:</p>\n\n<pre><code>private static boolean isEven(int number)\n{\n    return (number &amp; 1) == 0;\n}\n</code></pre>\n\n<p>As I've already pestered that particular user for a lot of help, I've decided it's time I pestered the SO community! I don't really understand how this works. The method is called and takes the size of the ArrayList as a parameter (i.e. ArrayList has ten elements, number = 10).</p>\n\n<p>I know a single <code>&amp;</code> runs the comparison of both number and 1, but I got lost after that.</p>\n\n<p>The way I read it, it is saying return true if <code>number == 0</code> and <code>1 == 0</code>. I know the first isn't true and the latter obviously doesn't make sense. Could anybody help me out?</p>\n\n<p><strong>Edit: I should probably add that the code does work, in case anyone is wondering.</strong></p>\n", "tags": ["java", "methods", "arraylist", "boolean", "int"], "title": "What does this boolean return mean?", "answers": [{"body": "<p><code>&amp;</code> is the bitwise AND operator. <code>&amp;&amp;</code> is the logical AND operator</p>\n\n<p>In binary, if the digits bit is set (i.e one), the number is odd.</p>\n\n<p>In binary, if the digits bit is zero , the number is even.</p>\n\n<p><code>(number &amp; 1)</code>  is a <em>bitwise</em> AND test of the digits bit. </p>\n\n<p>Another way to do this (and possibly less efficient but more understandable) is using the modulus operator <code>%</code>:</p>\n\n<pre><code>private static boolean isEven(int number)\n{\n    if (number &lt; 0)\n       throw new ArgumentOutOfRangeException();\n\n    return (number % 2) == 0;\n}\n</code></pre>\n", "title": "What does this boolean return mean?", "tags": ["java", "methods", "arraylist", "boolean", "int"], "link": "http://stackoverflow.com/questions/14905643/what-does-this-boolean-return-mean/14905653#14905653", "question_id": 14905643, "answer_id": 14905653}, {"body": "<p>This expression means \"the integer represents an even number\".</p>\n\n<p>Here is the reason why: the binary representation of decimal <code>1</code> is <code>00000000001</code>. All odd numbers end in a <code>1</code> in binary (this is easy to verify: suppose the number's binary representation does not end in <code>1</code>; then it's composed of non-zero powers of two, which is always an even number). When you do a binary <code>AND</code> with an odd number, the result is <code>1</code>; when you do a binary <code>AND</code> with an even number, the result is <code>0</code>.</p>\n\n<p>This used to be the preferred method of deciding odd/even back at the time when optimizers were poor to nonexistent, and <code>%</code> operators required twenty times the number of cycles taken by an <code>&amp;</code> operator. These days, if you do <code>number % 2 == 0</code>, the compiler is likely to generate code that executes as quickly as <code>(number &amp; 1) == 0</code> does.</p>\n", "title": "What does this boolean return mean?", "tags": ["java", "methods", "arraylist", "boolean", "int"], "link": "http://stackoverflow.com/questions/14905643/what-does-this-boolean-return-mean/14905656#14905656", "question_id": 14905643, "answer_id": 14905656}, {"body": "<p>Single <code>&amp;</code> means bit-wise <code>and</code> operator <strong>not</strong> comparison</p>\n\n<p>So this code checks if the first <code>bit</code> (least significant/most right) is set or not, which indicates if the number is <code>odd</code> or not; because all odd numbers will end with <code>1</code> in the least significant bit e.g. <code>xxxxxxx1</code></p>\n", "title": "What does this boolean return mean?", "tags": ["java", "methods", "arraylist", "boolean", "int"], "link": "http://stackoverflow.com/questions/14905643/what-does-this-boolean-return-mean/14905659#14905659", "question_id": 14905643, "answer_id": 14905659}, {"body": "<p>The <code>&amp;</code> operator in Java is the bitwise-and operator.  Basically, <code>(number &amp; 1)</code> performs a bitwise-and between <code>number</code> and <code>1</code>.  The result is either 0 or 1, depending on whether it's even or odd.  Then the result is compared with 0 to determine if it's even.</p>\n\n<p>Here's a <a href=\"http://vipan.com/htdocs/bitwisehelp.html\" rel=\"nofollow\">page describing bitwise operations</a>.</p>\n", "title": "What does this boolean return mean?", "tags": ["java", "methods", "arraylist", "boolean", "int"], "link": "http://stackoverflow.com/questions/14905643/what-does-this-boolean-return-mean/14905662#14905662", "question_id": 14905643, "answer_id": 14905662}, {"body": "<p>It is performing a binary and against 1, which returns 0 if the least significant bit is not set</p>\n\n<p>for your example</p>\n\n<p>00001010 (10)</p>\n\n<p>00000001 (1)</p>\n\n<p>===========</p>\n\n<p>00000000 (0)</p>\n", "title": "What does this boolean return mean?", "tags": ["java", "methods", "arraylist", "boolean", "int"], "link": "http://stackoverflow.com/questions/14905643/what-does-this-boolean-return-mean/14905683#14905683", "question_id": 14905643, "answer_id": 14905683}, {"body": "<p>Keep in mind that \"&amp;\" is a bitwise operation.  You are probably aware of this, but it's not totally clear to me based on the way you posed the question.</p>\n\n<p>That being said, the theoretical idea is that you have some int, which can be expressed in bits by some series of 1s and 0s.  For example:</p>\n\n<pre><code>...10110110\n</code></pre>\n\n<p>In binary, because it is base 2, whenever the bitwise version of the number ends in 0, it is even, and when it ends in 1 it is odd.  </p>\n\n<p>Therefore, doing a bitwise &amp; with 1 for the above is:</p>\n\n<pre><code>...10110110 &amp; ...00000001\n</code></pre>\n\n<p>Of course, this is 0, so you can say that the original input was even.</p>\n\n<p>Alternatively, consider an odd number.  For example, add 1 to what we had above.  Then</p>\n\n<pre><code>...10110111 &amp; ...00000001\n</code></pre>\n\n<p>Is equal to 1, and is therefore, not equal to zero.  Voila.</p>\n", "title": "What does this boolean return mean?", "tags": ["java", "methods", "arraylist", "boolean", "int"], "link": "http://stackoverflow.com/questions/14905643/what-does-this-boolean-return-mean/14905686#14905686", "question_id": 14905643, "answer_id": 14905686}, {"body": "<p><code>&amp;</code> is a bitwise <code>AND</code> operation.</p>\n\n<p>For number = 8:</p>\n\n<pre><code>  1000\n  0001\n&amp; ----\n  0000\n</code></pre>\n\n<p>The result is that <code>(8 &amp; 1) == 0</code>. This is the case for all even numbers, since they are multiples of 2 and the first binary digit from the right is always 0. 1 has a binary value of 1 with leading 0s, so when we <code>AND</code> it with an even number we're left with 0.</p>\n", "title": "What does this boolean return mean?", "tags": ["java", "methods", "arraylist", "boolean", "int"], "link": "http://stackoverflow.com/questions/14905643/what-does-this-boolean-return-mean/14905725#14905725", "question_id": 14905643, "answer_id": 14905725}, {"body": "<p>You can determine the number either is even or odd by the <em>last bit</em> in its binary representation:</p>\n\n<pre><code>1 -&gt; 00000000000000000000000000000001 (odd)\n2 -&gt; 00000000000000000000000000000010 (even)\n3 -&gt; 00000000000000000000000000000011 (odd)\n4 -&gt; 00000000000000000000000000000100 (even)\n5 -&gt; 00000000000000000000000000000101 (odd)\n6 -&gt; 00000000000000000000000000000110 (even)\n7 -&gt; 00000000000000000000000000000111 (odd)\n8 -&gt; 00000000000000000000000000001000 (even)\n</code></pre>\n\n<p><code>&amp;</code> between two integers is bitwise AND operator:</p>\n\n<pre><code>0 &amp; 0 = 0\n0 &amp; 1 = 0\n1 &amp; 0 = 0\n1 &amp; 1 = 1\n</code></pre>\n\n<p>So, if <code>(number &amp; 1) == 0</code> is <code>true</code>, this means <code>number</code> is even.</p>\n\n<hr>\n\n<p>Let's assume that <code>number == 6</code>, then:</p>\n\n<pre><code>6 -&gt; 00000000000000000000000000000110 (even)\n\n     &amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;\n\n1 -&gt; 00000000000000000000000000000001\n\n-------------------------------------\n\n0 -&gt; 00000000000000000000000000000000\n</code></pre>\n\n<p>and when <code>number == 7</code>:</p>\n\n<pre><code>7 -&gt; 00000000000000000000000000000111 (odd)\n\n     &amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;\n\n1 -&gt; 00000000000000000000000000000001\n\n-------------------------------------\n\n1 -&gt; 00000000000000000000000000000001\n</code></pre>\n", "title": "What does this boolean return mean?", "tags": ["java", "methods", "arraylist", "boolean", "int"], "link": "http://stackoverflow.com/questions/14905643/what-does-this-boolean-return-mean/14905831#14905831", "question_id": 14905643, "answer_id": 14905831}, {"body": "<p>This is Logical design concept bitwise &amp; (AND)operater.</p>\n\n<p>return ( 2 &amp; 1 ); means- convert the value to bitwise numbers and comapre the (AND) feature and returns the value.</p>\n\n<p>Prefer this link <a href=\"http://www.roseindia.net/java/master-java/java-bitwise-and.shtml\" rel=\"nofollow\">http://www.roseindia.net/java/master-java/java-bitwise-and.shtml</a></p>\n", "title": "What does this boolean return mean?", "tags": ["java", "methods", "arraylist", "boolean", "int"], "link": "http://stackoverflow.com/questions/14905643/what-does-this-boolean-return-mean/14908104#14908104", "question_id": 14905643, "answer_id": 14908104}], "creation_date": 1360975403, "score": 72, "link": "http://stackoverflow.com/questions/14905643/what-does-this-boolean-return-mean", "question_id": 14905643}, {"body": "<p>I'm building a regex helper at <a href=\"http://www.debuggex.com\">http://www.debuggex.com</a>. The amount of detail I want to show requires me to write my own parser and matcher.</p>\n\n<p>To make sure my parser and matcher work correctly, I've written my own unit tests for the Javascript flavor of regexes, but these only cover edge cases I know about. I would like to use a standard test suite, and was recently pointed to <a href=\"http://hg.ecmascript.org/tests/test262/summary\">http://hg.ecmascript.org/tests/test262/summary</a>, which I will be using.</p>\n\n<p>My question is, where can I find such test suites for other regex flavors? I'd like to support other flavors in the future. I have not been able to find anything by googling (\"test\" pollutes the results with regex testers). I am looking for test suites for the languages <strong>python</strong>, <strong>php</strong>, <strong>perl</strong>, <strong>java</strong>, <strong>ruby</strong>, and <strong>.net</strong>.</p>\n", "tags": ["java", "php", "javascript", ".net", "regex"], "title": "Where can I find unit tests for regular expressions in multiple languages?", "answers": [{"body": "<p>Most of those languages are open source.  Any decent project should have their test cases in said repo, otherwise I would be pretty concerned.</p>\n\n<ul>\n<li><a href=\"http://hg.python.org/cpython/file/178075fbff3a/Lib/test/re_tests.py\" rel=\"nofollow\">Python</a>'s regex tests</li>\n<li><a href=\"https://github.com/php/php-src/tree/master/ext/pcre/tests\" rel=\"nofollow\">PHP</a>'s regex tests</li>\n<li><a href=\"http://perl5.git.perl.org/perl.git/tree/HEAD:/t/re\" rel=\"nofollow\">Perl</a>'s regex tests looks really extensive</li>\n<li><a href=\"http://hg.openjdk.java.net/jdk7u/jdk7u6/jdk/file/8c2c5d63a17e/test/java/util/regex/\" rel=\"nofollow\">Open JDK</a>'s unit tests (an open source flavour of Java)</li>\n<li><a href=\"https://github.com/ruby/ruby/blob/trunk/test/ruby/test_regexp.rb\" rel=\"nofollow\">Ruby</a>'s regex tests</li>\n<li><a href=\"https://github.com/mono/mono/tree/0f2995e95e98e082c7c7039e17175cf2c6a00034/mcs/class/System/Test/System.Text.RegularExpressions\" rel=\"nofollow\">Mono</a>'s regex tests (open source version of .NET)</li>\n<li><a href=\"https://github.com/google/re2/tree/master/re2/testing\" rel=\"nofollow\">RE2</a>'s tests (C++ regex engine developed at Google)</li>\n<li><a href=\"http://www2.research.att.com/~astopen/testregex/testregex.html\" rel=\"nofollow\">C</a> test suite (developed by AT&amp;T Research)</li>\n<li><a href=\"http://vcs.pcre.org/pcre2/code/trunk/testdata/\" rel=\"nofollow\">PCRE</a> regex tests (Perl Compatible Regular Expressions C library)</li>\n<li><a href=\"https://github.com/tc39/test262/tree/master/test/built-ins/RegExp\" rel=\"nofollow\">JavaScript</a> regex tests (Ecma Technical Committee 39 compatability suite)</li>\n</ul>\n\n<p>I also found an extensive chart on <a href=\"http://www.regular-expressions.info/refflavors.html\" rel=\"nofollow\">this page</a> which might be of some help to you.</p>\n", "title": "Where can I find unit tests for regular expressions in multiple languages?", "tags": ["java", "php", "javascript", ".net", "regex"], "link": "http://stackoverflow.com/questions/15819919/where-can-i-find-unit-tests-for-regular-expressions-in-multiple-languages/15823499#15823499", "question_id": 15819919, "answer_id": 15823499}, {"body": "<p>To have a complete list on one page, I've found the ones omitted from the accepted answer:</p>\n\n<ul>\n<li><a href=\"https://github.com/mono/mono/tree/0f2995e95e98e082c7c7039e17175cf2c6a00034/mcs/class/System/Test/System.Text.RegularExpressions\">Mono's</a> regex tests (it's an open source version of .net)</li>\n<li><a href=\"https://github.com/php/php-src/tree/master/ext/pcre/tests\">PHP's</a> regex tests</li>\n</ul>\n", "title": "Where can I find unit tests for regular expressions in multiple languages?", "tags": ["java", "php", "javascript", ".net", "regex"], "link": "http://stackoverflow.com/questions/15819919/where-can-i-find-unit-tests-for-regular-expressions-in-multiple-languages/15840733#15840733", "question_id": 15819919, "answer_id": 15840733}, {"body": "<p>Additional regex test suites for additional languages:</p>\n\n<ul>\n<li><a href=\"https://github.com/D-Programming-Language/phobos/blob/master/std/regex/internal/tests.d\" rel=\"nofollow\">D's standard library regex tests</a></li>\n<li><a href=\"https://golang.org/src/regexp/testdata/\" rel=\"nofollow\">Go's regex tests</a></li>\n<li><a href=\"http://git.savannah.gnu.org/cgit/grep.git/tree/tests\" rel=\"nofollow\">GNU grep's tests</a> (Command line C regex engine)</li>\n<li><a href=\"https://wiki.haskell.org/Regex_Posix#regex-posix-unittest\" rel=\"nofollow\">regex-posix-unittest</a> (POSIX regex test suite written in Haskell)</li>\n<li><a href=\"http://source.icu-project.org/repos/icu/icu/trunk/source/test/testdata/\" rel=\"nofollow\">ICU's regex tests</a> (C/C++ and Java libraries for Unicode, look for files named <code>re[_g].*txt</code>)</li>\n<li><a href=\"https://github.com/dotnet/corefx/tree/master/src/System.Text.RegularExpressions/tests\" rel=\"nofollow\">.NET Core Framework regex tests</a> (C#)</li>\n<li><a href=\"https://github.com/tcltk/tcl/tree/master/tests\" rel=\"nofollow\">TCL's regex tests</a> (look for the <code>reg.*test</code> files)</li>\n<li><a href=\"https://github.com/laurikari/tre/tree/master/tests\" rel=\"nofollow\">TRE's regex tests</a> (C regex engine which aims for strict POSIX compliance)</li>\n<li><a href=\"https://chromium.googlesource.com/v8/v8/+/master/test/mjsunit/\" rel=\"nofollow\">V8's regex tests</a> (V8 is the JavaScript engine of Chrome, search for files named <code>.*regexp.*js</code>)</li>\n<li><a href=\"https://trac.webkit.org/browser/trunk/LayoutTests/fast/regex\" rel=\"nofollow\">WebKit's regex tests</a> (JavaScript tests are in script-tests folders) </li>\n<li><a href=\"https://trac.webkit.org/browser/trunk/Source/JavaScriptCore/tests/regexp/RegExpTest.data\" rel=\"nofollow\">Yarr's regex tests</a> (C++ regex engine of WebKit's JavaScriptCore)</li>\n</ul>\n\n<h2>Bonus</h2>\n\n<ul>\n<li><a href=\"https://code.google.com/p/regfuzz/\" rel=\"nofollow\">Regfuzz</a> (C toolkit for testing regular expression robustness using randomly generated and invalid regexes)</li>\n</ul>\n", "title": "Where can I find unit tests for regular expressions in multiple languages?", "tags": ["java", "php", "javascript", ".net", "regex"], "link": "http://stackoverflow.com/questions/15819919/where-can-i-find-unit-tests-for-regular-expressions-in-multiple-languages/33449659#33449659", "question_id": 15819919, "answer_id": 33449659}], "creation_date": 1365103331, "score": 71, "link": "http://stackoverflow.com/questions/15819919/where-can-i-find-unit-tests-for-regular-expressions-in-multiple-languages", "question_id": 15819919}, {"body": "<p>I'm currently using jackson 2.1.4 and I'm having some trouble ignoring fields when I'm converting an object to a JSON string.</p>\n\n<p>Here's my class which acts as the object to be converted:</p>\n\n<pre><code>public class JsonOperation {\n\npublic static class Request {\n    @JsonInclude(Include.NON_EMPTY)\n    String requestType;\n    Data data = new Data();\n\n    public static class Data {\n    @JsonInclude(Include.NON_EMPTY)\n        String username;\n        String email;\n        String password;\n        String birthday;\n        String coinsPackage;\n        String coins;\n        String transactionId;\n        boolean isLoggedIn;\n    }\n}\n\npublic static class Response {\n    @JsonInclude(Include.NON_EMPTY)\n    String requestType = null;\n    Data data = new Data();\n\n    public static class Data {\n        @JsonInclude(Include.NON_EMPTY)\n        enum ErrorCode { ERROR_INVALID_LOGIN, ERROR_USERNAME_ALREADY_TAKEN, ERROR_EMAIL_ALREADY_TAKEN };\n        enum Status { ok, error };\n\n        Status status;\n        ErrorCode errorCode;\n        String expiry;\n        int coins;\n        String email;\n        String birthday;\n        String pictureUrl;\n        ArrayList &lt;Performer&gt; performer;\n    }\n}\n}\n</code></pre>\n\n<p>And here's how I convert it:</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nmapper.setVisibility(PropertyAccessor.FIELD, Visibility.ANY);\n\nJsonOperation subscribe = new JsonOperation();\n\nsubscribe.request.requestType = \"login\";\n\nsubscribe.request.data.username = \"Vincent\";\nsubscribe.request.data.password = \"test\";\n\n\nWriter strWriter = new StringWriter();\ntry {\n    mapper.writeValue(strWriter, subscribe.request);\n} catch (JsonGenerationException e) {\n    // TODO Auto-generated catch block\n    e.printStackTrace();\n} catch (JsonMappingException e) {\n    // TODO Auto-generated catch block\n    e.printStackTrace();\n} catch (IOException e) {\n    // TODO Auto-generated catch block\n    e.printStackTrace();\n}\n\nLog.d(\"JSON\", strWriter.toString())\n</code></pre>\n\n<p>Here's the output:</p>\n\n<pre><code>{\"data\":{\"birthday\":null,\"coins\":null,\"coinsPackage\":null,\"email\":null,\"username\":\"Vincent\",\"password\":\"test\",\"transactionId\":null,\"isLoggedIn\":false},\"requestType\":\"login\"}\n</code></pre>\n\n<p>How can I avoid those null values? I only want to take required information for the \"subscription\" purpose!</p>\n\n<p>Here's exactly the output that I'm looking for:</p>\n\n<pre><code>{\"data\":{\"username\":\"Vincent\",\"password\":\"test\"},\"requestType\":\"login\"}\n</code></pre>\n\n<p>I also tried @JsonInclude(Include.NON_NULL) and put all my variables to null, but it didn't work either! Thanks for your help guys!</p>\n", "tags": ["java", "json", "jackson"], "title": "Jackson serialization: ignore empty values (or null)", "answers": [{"body": "<p>You have the annotation in the wrong place - it needs to be on the class, not the field. i.e: </p>\n\n<pre><code>@JsonInclude(Include.NON_NULL) //or Include.NON_EMPTY, if that fits your use case \npublic static class Request {\n  // ...\n}\n</code></pre>\n\n<p>As noted in comments, in version 2.x+ the syntax for this annotation is: </p>\n\n<pre><code>@JsonInclude(JsonSerialize.Inclusion.NON_NULL) // or JsonSerialize.Inclusion.NON_EMPTY\n</code></pre>\n\n<p>The other option is to configure the <code>ObjectMapper</code> directly, simply by calling \n<code>mapper.setSerializationInclusion(Include.NON_NULL);</code></p>\n", "title": "Jackson serialization: ignore empty values (or null)", "tags": ["java", "json", "jackson"], "link": "http://stackoverflow.com/questions/16089651/jackson-serialization-ignore-empty-values-or-null/16089705#16089705", "question_id": 16089651, "answer_id": 16089705}, {"body": "<p>You can also set the global option:</p>\n\n<pre><code>objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);\n</code></pre>\n", "title": "Jackson serialization: ignore empty values (or null)", "tags": ["java", "json", "jackson"], "link": "http://stackoverflow.com/questions/16089651/jackson-serialization-ignore-empty-values-or-null/17983273#17983273", "question_id": 16089651, "answer_id": 17983273}, {"body": "<p>Also you can try to use </p>\n\n<pre><code>@JsonSerialize(include=JsonSerialize.Inclusion.NON_NULL)\n</code></pre>\n\n<p>if you are dealing with jackson with version below 2+ (1.9.5) i tested it, you can easily use this annotation above the class. Not for specified for the attributes, just for class decleration.</p>\n", "title": "Jackson serialization: ignore empty values (or null)", "tags": ["java", "json", "jackson"], "link": "http://stackoverflow.com/questions/16089651/jackson-serialization-ignore-empty-values-or-null/20678495#20678495", "question_id": 16089651, "answer_id": 20678495}, {"body": "<p>Or you can use GSON [<a href=\"https://code.google.com/p/google-gson/\" rel=\"nofollow\">https://code.google.com/p/google-gson/</a>], where these null fields will be automatically removed.</p>\n\n<p><em><strong>Example:</em></strong></p>\n\n<p><strong>SampleDTO.java</strong></p>\n\n<pre><code>    public class SampleDTO {\n\n        String username;\n        String email;\n        String password;\n        String birthday;\n        String coinsPackage;\n        String coins;\n        String transactionId;\n        boolean isLoggedIn;\n\n\n        public String getUsername() {\n            return username;\n        }\n        public void setUsername(String username) {\n            this.username = username;\n        }\n        public String getEmail() {\n            return email;\n        }\n        public void setEmail(String email) {\n            this.email = email;\n        }\n        public String getPassword() {\n            return password;\n        }\n        public void setPassword(String password) {\n            this.password = password;\n        }\n        public String getBirthday() {\n            return birthday;\n        }\n        public void setBirthday(String birthday) {\n            this.birthday = birthday;\n        }\n        public String getCoinsPackage() {\n            return coinsPackage;\n        }\n        public void setCoinsPackage(String coinsPackage) {\n            this.coinsPackage = coinsPackage;\n        }\n        public String getCoins() {\n            return coins;\n        }\n        public void setCoins(String coins) {\n            this.coins = coins;\n        }\n        public String getTransactionId() {\n            return transactionId;\n        }\n        public void setTransactionId(String transactionId) {\n            this.transactionId = transactionId;\n        }\n        public boolean isLoggedIn() {\n            return isLoggedIn;\n        }\n        public void setLoggedIn(boolean isLoggedIn) {\n            this.isLoggedIn = isLoggedIn;\n        }\n    }\n</code></pre>\n\n<p><strong>Test.java</strong></p>\n\n<pre><code>    import com.google.gson.Gson;\n\n    public class Test {\n\n        public static void main(String[] args) {\n            // TODO Auto-generated method stub\n            SampleDTO objSampleDTO = new SampleDTO();\n\n        Gson objGson = new Gson();\n        System.out.println(objGson.toJson(objSampleDTO));\n\n        }\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>{\"isLoggedIn\":false}\n</code></pre>\n\n<p>I used <strong>gson-2.2.4</strong></p>\n", "title": "Jackson serialization: ignore empty values (or null)", "tags": ["java", "json", "jackson"], "link": "http://stackoverflow.com/questions/16089651/jackson-serialization-ignore-empty-values-or-null/22788080#22788080", "question_id": 16089651, "answer_id": 22788080}, {"body": "<p>For jackson 2.x</p>\n\n<p>@JsonInclude(JsonInclude.Include.NON_NULL) just before the field.</p>\n", "title": "Jackson serialization: ignore empty values (or null)", "tags": ["java", "json", "jackson"], "link": "http://stackoverflow.com/questions/16089651/jackson-serialization-ignore-empty-values-or-null/26897427#26897427", "question_id": 16089651, "answer_id": 26897427}, {"body": "<p>You need to add import com.fasterxml.jackson.annotation.JsonInclude;</p>\n\n<p>Add  </p>\n\n<pre><code>@JsonInclude(JsonInclude.Include.NON_NULL)\n</code></pre>\n\n<p>on top of POJO </p>\n\n<p>If you have nested POJO then </p>\n\n<pre><code>@JsonInclude(JsonInclude.Include.NON_NULL)\n</code></pre>\n\n<p>need to add on every values.</p>\n\n<p>NOTE:\nJAXRS (Jersey ) automatically handle this scenario 2.6 and above.</p>\n", "title": "Jackson serialization: ignore empty values (or null)", "tags": ["java", "json", "jackson"], "link": "http://stackoverflow.com/questions/16089651/jackson-serialization-ignore-empty-values-or-null/32581127#32581127", "question_id": 16089651, "answer_id": 32581127}, {"body": "<p>I was having similar problem recently with version 2.6.6. </p>\n\n<pre><code>@JsonInclude(JsonInclude.Include.NON_NULL)\n</code></pre>\n\n<p>Using above annotation either on filed or class level was not working as expected. The POJO was mutable where I was applying the annotation. When I changed the behaviour of the POJO to be immutable the annotation worked its magic. </p>\n\n<p>I am not sure if its down to new version or previous versions of this lib had similar behaviour but for 2.6.6 certainly you need to have Immutable POJO for the annotation to work. </p>\n\n<pre><code>objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);\n</code></pre>\n\n<p>Above option mentioned in various answers of setting serialisation inclusion in ObjectMapper directly at global level works as well but, I prefer controlling it at class or filed level. </p>\n\n<p>So if you wanted all the null fields to be ignored while JSON serialisation then use the annotation at class level but if you want only few fields to ignored in a class then use it over those specific fields. This way its more readable &amp; easy for maintenance if you wanted to change behaviour for specific response.</p>\n", "title": "Jackson serialization: ignore empty values (or null)", "tags": ["java", "json", "jackson"], "link": "http://stackoverflow.com/questions/16089651/jackson-serialization-ignore-empty-values-or-null/39037743#39037743", "question_id": 16089651, "answer_id": 39037743}], "creation_date": 1366306650, "score": 69, "link": "http://stackoverflow.com/questions/16089651/jackson-serialization-ignore-empty-values-or-null", "question_id": 16089651}, {"body": "<p>I've been using ArrayList recently in my android project at the office and I'm a bit confused between List and ArrayList, what is the difference of the two and what should I use?</p>\n\n<p>Also I saw some implementations of it like.</p>\n\n<pre><code>List&lt;SomeObject&gt; myList = new ArrayList&lt;SomeObject&gt;();\n\nArrayList&lt;SomeObject&gt; myList = new ArrayList&lt;SomeObject&gt;();\n</code></pre>\n\n<p>What is the difference of those two instances?</p>\n", "tags": ["java", "android", "list", "arraylist"], "title": "What is the difference between List and ArrayList?", "answers": [{"body": "<p>There's no difference between list implementations in both of your examples.\nThere's however a difference in a way you can further use variable myList in your code.</p>\n\n<p>When you define your list as:</p>\n\n<pre><code>List myList = new ArrayList();\n</code></pre>\n\n<p>you can only call methods and reference members that belong to List class.\nIf you define it as:</p>\n\n<pre><code>ArrayList myList = new ArrayList();\n</code></pre>\n\n<p>you'll be able to invoke ArrayList specific methods and use ArrayList specific members in addition to those inherited from List.</p>\n\n<p>Nevertheless, when you call a method of a List class in the first example, which was overridden in ArrayList, then method from ArrayList will be called not the one in the List.</p>\n\n<p>That's called polymorphism. You can read up on it. </p>\n", "title": "What is the difference between List and ArrayList?", "tags": ["java", "android", "list", "arraylist"], "link": "http://stackoverflow.com/questions/14903145/what-is-the-difference-between-list-and-arraylist/14903234#14903234", "question_id": 14903145, "answer_id": 14903234}], "creation_date": 1360961546, "score": 69, "link": "http://stackoverflow.com/questions/14903145/what-is-the-difference-between-list-and-arraylist", "question_id": 14903145}, {"body": "<p>Which of the 2 APIs is simpler to read/write/edit excel sheets ?\nDo these APIs not support CSV extensions ?</p>\n\n<p>Using JXL for file.xls and file.xlsx, I get an exception like: </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>jxl.read.biff.BiffException: Unable to recognize OLE stream\n    at jxl.read.biff.CompoundFile.&lt;init&gt;(CompoundFile.java:116)\n    at jxl.read.biff.File.&lt;init&gt;(File.java:127)\n    at jxl.Workbook.getWorkbook(Workbook.java:268)\n    at core.ReadXLSheet.contentReading(ReadXLSheet.java:46)\n    at core.ReadXLSheet.init(ReadXLSheet.java:22)\n    at core.ReadXLSheet.main(ReadXLSheet.java:72)\n</code></pre>\n\n<p>Both for .xls and .xlsx extensions.\nJava Version I am using is : JDK1.6</p>\n", "tags": ["java", "excel", "apache-poi", "jxl"], "title": "What is the better API to Reading Excel sheets in java - JXL or Apache POI", "answers": [{"body": "<p>I have used POI.</p>\n\n<p>If you use that, keep on eye those cell formatters: create one and use it several times instead of creating each time for cell, it isa huge memory consumption difference or large data.</p>\n", "title": "What is the better API to Reading Excel sheets in java - JXL or Apache POI", "tags": ["java", "excel", "apache-poi", "jxl"], "link": "http://stackoverflow.com/questions/14980717/what-is-the-better-api-to-reading-excel-sheets-in-java-jxl-or-apache-poi/14980754#14980754", "question_id": 14980717, "answer_id": 14980754}, {"body": "<p>I am not familiar with JXL and but we use POI. POI is well maintained and can handle both the binary .xls format and the new xml based format that was introduced in Office 2007.</p>\n\n<p>CSV files are not excel files, they are text based files, so these libraries don't read them. You will need to parse out a CSV file yourself. I am not aware of any CSV file libraries, but I haven't looked either.</p>\n", "title": "What is the better API to Reading Excel sheets in java - JXL or Apache POI", "tags": ["java", "excel", "apache-poi", "jxl"], "link": "http://stackoverflow.com/questions/14980717/what-is-the-better-api-to-reading-excel-sheets-in-java-jxl-or-apache-poi/14981346#14981346", "question_id": 14980717, "answer_id": 14981346}, {"body": "<p>I have used both <a href=\"http://sourceforge.net/projects/jexcelapi/\">JXL</a> (now \"JExcel\") and <a href=\"http://poi.apache.org/\">Apache POI</a>.  At first I used JXL, but now I use Apache POI.</p>\n\n<p>First, here are the things where both APIs have the same end functionality:</p>\n\n<ul>\n<li>Both are free</li>\n<li>Cell styling: alignment, backgrounds (colors and patterns), borders\n(types and colors), font support (font names, colors, size, bold,\nitalic, strikeout, underline)</li>\n<li>Formulas</li>\n<li>Hyperlinks</li>\n<li>Merged cell regions</li>\n<li>Size of rows and columns</li>\n<li>Data formatting: Numbers and Dates</li>\n<li>Text wrapping within cells</li>\n<li>Freeze Panes</li>\n<li>Header/Footer support</li>\n<li>Read/Write existing and new spreadsheets</li>\n<li>Both attempt to keep existing objects in spreadsheets they read in intact as far as possible.</li>\n</ul>\n\n<p>However, there are many differences:</p>\n\n<ul>\n<li>Perhaps the most significant difference is that Java JXL does not support the Excel 2007+ \".xlsx\" format; it only supports the old BIFF (binary) \".xls\" format.  Apache POI supports both with a common design.</li>\n<li>Additionally, the Java portion of the JXL API was last updated in 2009 (3 years, 4 months ago as I write this), although it looks like there is a C# API.  Apache POI is actively maintained.</li>\n<li>JXL doesn't support Conditional Formatting, Apache POI does, although this is not that significant, because you can conditionally format cells with your own code.</li>\n<li>JXL doesn't support <em>rich</em> <strong>text</strong> formatting, i.e. different formatting within a text string; Apache POI does support it.</li>\n<li>JXL only supports certain text rotations: horizontal/vertical, +/- 45 degrees, and stacked; Apache POI supports any integer number of degrees plus stacked.</li>\n<li>JXL doesn't support drawing shapes; Apache POI does.</li>\n<li>JXL supports most Page Setup settings such as Landscape/Portrait, Margins, Paper size, and Zoom.  Apache POI supports all of that plus Repeating Rows and Columns.</li>\n<li>JXL doesn't support Split Panes; Apache POI does.</li>\n<li>JXL doesn't support Chart creation or manipulation; that support isn't there yet in Apache POI, but an API is slowly starting to form.</li>\n<li>Apache POI has a more extensive set of documentation and examples available than JXL.</li>\n</ul>\n\n<p>Additionally, POI contains not just the main \"usermodel\" API, but also an event-based API if all you want to do is read the spreadsheet content.</p>\n\n<p>In conclusion, because of the better documentation, more features, active development, and Excel 2007+ format support, I use Apache POI.</p>\n", "title": "What is the better API to Reading Excel sheets in java - JXL or Apache POI", "tags": ["java", "excel", "apache-poi", "jxl"], "link": "http://stackoverflow.com/questions/14980717/what-is-the-better-api-to-reading-excel-sheets-in-java-jxl-or-apache-poi/14986986#14986986", "question_id": 14980717, "answer_id": 14986986}, {"body": "<p>For reading \"plain\" CSV files in Java, there is a library called OpenCSV, available here: <a href=\"http://opencsv.sourceforge.net/\" rel=\"nofollow\">http://opencsv.sourceforge.net/</a> </p>\n", "title": "What is the better API to Reading Excel sheets in java - JXL or Apache POI", "tags": ["java", "excel", "apache-poi", "jxl"], "link": "http://stackoverflow.com/questions/14980717/what-is-the-better-api-to-reading-excel-sheets-in-java-jxl-or-apache-poi/20907368#20907368", "question_id": 14980717, "answer_id": 20907368}], "creation_date": 1361365946, "score": 68, "link": "http://stackoverflow.com/questions/14980717/what-is-the-better-api-to-reading-excel-sheets-in-java-jxl-or-apache-poi", "question_id": 14980717}, {"body": "<p>Code assist (ctrl+space) doesn't work on Eclipse Kepler. This happened to me this morning. </p>\n", "tags": ["java", "eclipse"], "title": "Code assist (ctrl+space) doesn&#39;t work on Eclipse Kepler", "answers": [{"body": "<p>My workaround to this problem: it seems that some component of Eclipse Kepler doesn't like workspace from older Eclipse version. Starting Eclipse with new workspace and reimporting projects solved the problem.</p>\n", "title": "Code assist (ctrl+space) doesn&#39;t work on Eclipse Kepler", "tags": ["java", "eclipse"], "link": "http://stackoverflow.com/questions/17358312/code-assist-ctrlspace-doesnt-work-on-eclipse-kepler/17358313#17358313", "question_id": 17358312, "answer_id": 17358313}, {"body": "<p>This happend to me too.</p>\n\n<p>For some reason Kepler changes the settings for Content Assist on Juno workspaces. Checking the <code>Java Proposals</code> checkbox in <code>Preferences -&gt; Java\\Editor\\Content Assist\\Advanced</code> should resolve this problem.</p>\n", "title": "Code assist (ctrl+space) doesn&#39;t work on Eclipse Kepler", "tags": ["java", "eclipse"], "link": "http://stackoverflow.com/questions/17358312/code-assist-ctrlspace-doesnt-work-on-eclipse-kepler/17360005#17360005", "question_id": 17358312, "answer_id": 17360005}], "creation_date": 1372399908, "score": 68, "link": "http://stackoverflow.com/questions/17358312/code-assist-ctrlspace-doesnt-work-on-eclipse-kepler", "question_id": 17358312}, {"body": "<p>What is the difference between <code>@Mock</code> and <code>@InjectMocks</code> in Mockito framework?</p>\n", "tags": ["java", "unit-testing", "mocking", "mockito"], "title": "Difference between @Mock and @InjectMocks", "answers": [{"body": "<p>I  think @InjectMocks allows these from the docs:</p>\n\n<p>Allows shorthand mock and spy injection.\nMinimizes repetitive mock and spy injection.</p>\n\n<p>@mock doesn't allow that degree of resolution and has the drawback of needing to mock all of a class's fields.</p>\n", "title": "Difference between @Mock and @InjectMocks", "tags": ["java", "unit-testing", "mocking", "mockito"], "link": "http://stackoverflow.com/questions/16467685/difference-between-mock-and-injectmocks/16467735#16467735", "question_id": 16467685, "answer_id": 16467735}, {"body": "<p><code>@Mock</code> creates a mock. <code>@InjectMocks</code> creates an instance of the class and injects the mocks that are created with the <code>@Mock</code> (or <code>@Spy</code>) annotations into this instance. Note that you must use <code>@RunWith(MockitoJUnitRunner.class)</code> or <code>Mockito.initMocks(this)</code> to initialise these mocks and inject them.</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class SomeManagerTest {\n\n    @InjectMocks\n    private SomeManager someManager;\n\n    @Mock\n    private SomeDependency someDependency; // this will be injected into someManager\n\n     //tests...\n\n}\n</code></pre>\n", "title": "Difference between @Mock and @InjectMocks", "tags": ["java", "unit-testing", "mocking", "mockito"], "link": "http://stackoverflow.com/questions/16467685/difference-between-mock-and-injectmocks/16467893#16467893", "question_id": 16467685, "answer_id": 16467893}, {"body": "<p><code>@Mock</code> annotation mocks the concerned object.</p>\n\n<p><code>@InjectMocks</code> annotation allows to inject into the underlying object the different (and relevant) mocks created by <code>@Mock</code>.</p>\n\n<p><strong>Both are complementary.</strong></p>\n", "title": "Difference between @Mock and @InjectMocks", "tags": ["java", "unit-testing", "mocking", "mockito"], "link": "http://stackoverflow.com/questions/16467685/difference-between-mock-and-injectmocks/16467901#16467901", "question_id": 16467685, "answer_id": 16467901}, {"body": "<p>A \"mocking framework\", which Mockito is based on, is a framework that gives you the ability to create Mock objects ( in old terms these objects could be called shunts, as they work as shunts for dependend functionality ) \nIn other words, a mock object is used to imitate the real object your code is dependend on, you create a proxy object with the mocking framework.\nBy using mock objects in your tests you are essentially going from normal unit testing to integrational testing</p>\n\n<p>Mockito is an open source testing framework for Java released under the MIT License, it is a \"mocking framework\", that lets you write beautiful tests with clean and simple API. There are many different mocking frameworks in the Java space, however there are essentially two main types of mock object frameworks, ones that are implemented via proxy and ones that are implemented via class remapping.</p>\n\n<p>Dependency injection frameworks like Spring allow you to inject your proxy objects without modifying any code, the mock object expects a certain method to be called and it will return an expected result.</p>\n\n<p>The <code>@InjectMocks</code> annotation tries to instantiate the testing object instance and injects fields annotated with <code>@Mock</code> or <code>@Spy</code> into private fields of the testing object.</p>\n\n<p><code>MockitoAnnotations.initMocks(this)</code> call, resets testing object and re-initializes mocks, so remember to have this at your <code>@Before</code> / <code>@BeforeMethod</code> annotation.</p>\n", "title": "Difference between @Mock and @InjectMocks", "tags": ["java", "unit-testing", "mocking", "mockito"], "link": "http://stackoverflow.com/questions/16467685/difference-between-mock-and-injectmocks/30886431#30886431", "question_id": 16467685, "answer_id": 30886431}, {"body": "<p>One advantage you get with the approach mentioned by @Tom is that you don't have to create any constructors in the SomeManager, and hence limiting the clients to instantiate it. </p>\n\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class SomeManagerTest {\n\n    @InjectMocks\n    private SomeManager someManager;\n\n    @Mock\n    private SomeDependency someDependency; // this will be injected into someManager\n\n    //You don't need to instantiate the SomeManager with default contructor at all\n   //SomeManager someManager = new SomeManager();    \n   //Or SomeManager someManager = new SomeManager(someDependency);\n\n     //tests...\n\n}\n</code></pre>\n\n<p>Whether its a good practice or not depends on your application design.</p>\n", "title": "Difference between @Mock and @InjectMocks", "tags": ["java", "unit-testing", "mocking", "mockito"], "link": "http://stackoverflow.com/questions/16467685/difference-between-mock-and-injectmocks/34765504#34765504", "question_id": 16467685, "answer_id": 34765504}, {"body": "<p>In your test class, the tested class should be annotated with @InjectMocks. This tells Mockito which class to inject mocks into:</p>\n\n<pre><code>@InjectMocks\nprivate SomeManager someManager;\n</code></pre>\n\n<p>From then on, we can specify which specific methods or objects inside the class, in this case <strong>SomeManager</strong>, will be substituted with mocks:</p>\n\n<pre><code>@Mock\nprivate SomeDependency someDependency;\n</code></pre>\n\n<p>In this example, SomeDependency inside the SomeManager class will be mocked.</p>\n", "title": "Difference between @Mock and @InjectMocks", "tags": ["java", "unit-testing", "mocking", "mockito"], "link": "http://stackoverflow.com/questions/16467685/difference-between-mock-and-injectmocks/35829112#35829112", "question_id": 16467685, "answer_id": 35829112}], "creation_date": 1368120810, "score": 68, "link": "http://stackoverflow.com/questions/16467685/difference-between-mock-and-injectmocks", "question_id": 16467685}, {"body": "<p>I want my JSON to look like this:</p>\n\n<pre><code>{\n    \"information\": [{\n        \"timestamp\": \"xxxx\",\n        \"feature\": \"xxxx\",\n        \"ean\": 1234,\n        \"data\": \"xxxx\"\n    }, {\n        \"timestamp\": \"yyy\",\n        \"feature\": \"yyy\",\n        \"ean\": 12345,\n        \"data\": \"yyy\"\n    }]\n}\n</code></pre>\n\n<p>Code so far:</p>\n\n<pre><code>import java.util.List;\n\npublic class ValueData {\n\n    private List&lt;ValueItems&gt; information;\n\n    public ValueData(){\n\n    }\n\n    public List&lt;ValueItems&gt; getInformation() {\n        return information;\n    }\n\n    public void setInformation(List&lt;ValueItems&gt; information) {\n        this.information = information;\n    }\n\n    @Override\n    public String toString() {\n        return String.format(\"{information:%s}\", information);\n    }\n\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>public class ValueItems {\n\n    private String timestamp;\n    private String feature;\n    private int ean;\n    private String data;\n\n\n    public ValueItems(){\n\n    }\n\n    public ValueItems(String timestamp, String feature, int ean, String data){\n        this.timestamp = timestamp;\n        this.feature = feature;\n        this.ean = ean;\n        this.data = data;\n    }\n\n    public String getTimestamp() {\n        return timestamp;\n    }\n\n    public void setTimestamp(String timestamp) {\n        this.timestamp = timestamp;\n    }\n\n    public String getFeature() {\n        return feature;\n    }\n\n    public void setFeature(String feature) {\n        this.feature = feature;\n    }\n\n    public int getEan() {\n        return ean;\n    }\n\n    public void setEan(int ean) {\n        this.ean = ean;\n    }\n\n    public String getData() {\n        return data;\n    }\n\n    public void setData(String data) {\n        this.data = data;\n    }\n\n    @Override\n    public String toString() {\n        return String.format(\"{timestamp:%s,feature:%s,ean:%s,data:%s}\", timestamp, feature, ean, data);\n    }\n}\n</code></pre>\n\n<p>I just missing the part how I can convert the Java object to JSON with Jackson:</p>\n\n<pre><code>public static void main(String[] args) {\n   // CONVERT THE JAVA OBJECT TO JSON HERE\n    System.out.println(json);\n}\n</code></pre>\n\n<p>My Question is: Are my classes correct? Which instance do I have to call and how that I can achieve this JSON output?</p>\n", "tags": ["java", "json", "object", "jackson"], "title": "Converting Java objects to JSON with Jackson", "answers": [{"body": "<p>To convert your <code>object</code> in JSON with Jackson:</p>\n\n<pre><code>ObjectWriter ow = new ObjectMapper().writer().withDefaultPrettyPrinter();\nString json = ow.writeValueAsString(object);\n</code></pre>\n", "title": "Converting Java objects to JSON with Jackson", "tags": ["java", "json", "object", "jackson"], "link": "http://stackoverflow.com/questions/15786129/converting-java-objects-to-json-with-jackson/15786175#15786175", "question_id": 15786129, "answer_id": 15786175}, {"body": "<p>This might be useful.........</p>\n\n<pre><code>objectMapper.writeValue(new File(\"c:\\\\employee.json\"), employee);\n\n   // display to console\n   Object json = objectMapper.readValue(\n     objectMapper.writeValueAsString(employee), Object.class);\n\n   System.out.println(objectMapper.writerWithDefaultPrettyPrinter()\n     .writeValueAsString(json));\n</code></pre>\n\n<p><a href=\"http://www.technicalkeeda.com/java/convert-java-object-to-json-and-vice-versa-using-jackson\">http://www.technicalkeeda.com/java/convert-java-object-to-json-and-vice-versa-using-jackson</a></p>\n", "title": "Converting Java objects to JSON with Jackson", "tags": ["java", "json", "object", "jackson"], "link": "http://stackoverflow.com/questions/15786129/converting-java-objects-to-json-with-jackson/23708392#23708392", "question_id": 15786129, "answer_id": 23708392}, {"body": "<p>just do this</p>\n\n<pre><code>Gson gson = new Gson();\n        return Response.ok(gson.toJson(yourClass)).build();\n</code></pre>\n", "title": "Converting Java objects to JSON with Jackson", "tags": ["java", "json", "object", "jackson"], "link": "http://stackoverflow.com/questions/15786129/converting-java-objects-to-json-with-jackson/30377678#30377678", "question_id": 15786129, "answer_id": 30377678}, {"body": "<p>I know this is old (and I am new to java), but I ran into the same problem. And the answers were not as clear to me as a newbie... so I thought I would add what I learned.</p>\n\n<p>I used a third-party library to aid in the endeavor: <code>org.codehaus.jackson</code>\nAll of the downloads for this can be found <a href=\"http://mvnrepository.com/artifact/org.codehaus.jackson\" rel=\"nofollow\">here</a>.</p>\n\n<p>For base JSON functionality, you need to add the following jars to your project's libraries:\n   <a href=\"http://mvnrepository.com/artifact/org.codehaus.jackson/jackson-mapper-asl\" rel=\"nofollow\">jackson-mapper-asl</a>\nand \n   <a href=\"http://mvnrepository.com/artifact/org.codehaus.jackson/jackson-core-asl\" rel=\"nofollow\">jackson-core-asl</a></p>\n\n<p>Choose the version your project needs. (Typically you can go with the latest stable build).  </p>\n\n<p>Once they are imported in to your project's libraries, add the following <code>import</code> lines to your code:</p>\n\n<pre><code> import org.codehaus.jackson.JsonGenerationException;\n import org.codehaus.jackson.map.JsonMappingException;\n import org.codehaus.jackson.map.ObjectMapper;`\n</code></pre>\n\n<p>With the java object defined and assigned values that you wish to convert to JSON and return as part of a RESTful web service</p>\n\n<pre><code>User u = new User();\n u.firstName = \"Sample\";\n u.lastName = \"User\";\n u.email = \"sampleU@example.com\";\n\nObjectMapper mapper = new ObjectMapper();\n\ntry {\n    // convert user object to json string and return it \n    return mapper.writeValueAsString(u);\n}\n\n  // catch various errors\n  catch (JsonGenerationException e) {\n    e.printStackTrace();\n} \n  catch (JsonMappingException e) {\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>The result should looks like this:\n<code>{\"firstName\":\"Sample\",\"lastName\":\"User\",\"email\":\"sampleU@example.com\"}</code></p>\n", "title": "Converting Java objects to JSON with Jackson", "tags": ["java", "json", "object", "jackson"], "link": "http://stackoverflow.com/questions/15786129/converting-java-objects-to-json-with-jackson/32057878#32057878", "question_id": 15786129, "answer_id": 32057878}, {"body": "<pre><code>public class JSONConvector {\n\n    public static String toJSON(Object object) throws JSONException, IllegalAccessException {\n        String str = \"\";\n        Class c = object.getClass();\n        JSONObject jsonObject = new JSONObject();\n        for (Field field : c.getDeclaredFields()) {\n            field.setAccessible(true);\n            String name = field.getName();\n            String value = String.valueOf(field.get(object));\n            jsonObject.put(name, value);\n        }\n        System.out.println(jsonObject.toString());\n        return jsonObject.toString();\n    }\n\n\n    public static String toJSON(List list ) throws JSONException, IllegalAccessException {\n        JSONArray jsonArray = new JSONArray();\n        for (Object i : list) {\n            String jstr = toJSON(i);\n            JSONObject jsonObject = new JSONObject(jstr);\n            jsonArray.put(jsonArray);\n        }\n        return jsonArray.toString();\n    }\n}\n</code></pre>\n", "title": "Converting Java objects to JSON with Jackson", "tags": ["java", "json", "object", "jackson"], "link": "http://stackoverflow.com/questions/15786129/converting-java-objects-to-json-with-jackson/32681005#32681005", "question_id": 15786129, "answer_id": 32681005}, {"body": "<p>Well, even the accepted answer does not <em>exactly</em> output what op has asked for. It outputs the JSON string but with <code>\"</code> characters escaped. So, although might be a little late, I am answering hopeing it will help people! Here is how I do it:</p>\n\n<pre><code>StringWriter writer = new StringWriter();\nJsonGenerator jgen = new JsonFactory().createGenerator(writer);\njgen.setCodec(new ObjectMapper());\njgen.writeObject(object);\njgen.close();\nSystem.out.println(writer.toString());\n</code></pre>\n", "title": "Converting Java objects to JSON with Jackson", "tags": ["java", "json", "object", "jackson"], "link": "http://stackoverflow.com/questions/15786129/converting-java-objects-to-json-with-jackson/34914936#34914936", "question_id": 15786129, "answer_id": 34914936}], "creation_date": 1364988579, "score": 67, "link": "http://stackoverflow.com/questions/15786129/converting-java-objects-to-json-with-jackson", "question_id": 15786129}, {"body": "<p>Can someone please explain to me how the compiler does not complain in the first casting, but does complain in the second? </p>\n\n<pre><code>interface I1 { }\ninterface I2 { }\nclass C1 implements I1 { }\nclass C2 implements I2 { }\n\npublic class Test{\n     public static void main(){\n        C1 o1 = new C1();\n        C2 o2 = new C2();\n        Integer o3 = new Integer(4);\n\n        I2 x = (I2)o1; //compiler does not complain\n        I2 y = (I2)o3; //compiler complains here !!\n     }\n}\n</code></pre>\n", "tags": ["java", "interface", "casting"], "title": "Java casting in interfaces", "answers": [{"body": "<p>When you cast <code>o1</code> and <code>o3</code> with <code>(I2)</code>, you tell the compiler that the class of the object is actually a subclass of its declared type, and that this subclass implements <code>I2</code>.</p>\n\n<p>The <code>Integer</code> class is <strong>final</strong>, so <code>o3</code> cannot be an instance of a subclass of <code>Integer</code>: the compiler knows that you're lying. <code>C1</code> however is not final, so <code>o1</code> <em>could</em> be an instance of a subtype of <code>C1</code> that implements <code>I2</code>.</p>\n\n<p>If you make <code>C1</code> final, the compiler will complain too:</p>\n\n<pre><code>interface I1 { }\ninterface I2 { }\nfinal class C1 implements I1 { }\nclass C2 implements I2 { }\n\npublic class Test{\n     public static void main(){\n        C1 o1 = new C1();\n        C2 o2 = new C2();\n        Integer o3 = new Integer(4);\n\n        I2 y = (I2)o3; //compiler complains here !!\n        I2 x = (I2)o1; //compiler complains too\n     }\n}\n</code></pre>\n", "title": "Java casting in interfaces", "tags": ["java", "interface", "casting"], "link": "http://stackoverflow.com/questions/16186474/java-casting-in-interfaces/16186588#16186588", "question_id": 16186474, "answer_id": 16186588}, {"body": "<p>That's because class <code>Integer</code> is final and <code>C1</code> is not. Thus, an Integer object cannot implement I2, while a C1 object could if it is an instance of a subclass of C1 that implements I2.</p>\n", "title": "Java casting in interfaces", "tags": ["java", "interface", "casting"], "link": "http://stackoverflow.com/questions/16186474/java-casting-in-interfaces/16186644#16186644", "question_id": 16186474, "answer_id": 16186644}, {"body": "<p>According to <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.5.1\" rel=\"nofollow\">JLS 5.5.1 - Reference Type casting</a>, the rule(s) apply:</p>\n\n<ul>\n<li><p><strong>If T is a class type, then either |S| &lt;: |T|, or |T| &lt;: |S|. Otherwise, a compile-time error occurs.</strong></p>\n\n<p><code>I2 y = (I2)o3; //compiler complains here !!</code></p></li>\n</ul>\n\n<p>In this case, an <code>Integer</code> and <code>I2</code> are <strong>unrelated</strong> in any way, so a compile-time error occurs. Also, because <code>Integer</code> is <code>final</code>, there is no relation between <code>Integer</code> and <code>I2</code>.</p>\n\n<p><code>I2</code> and <code>I1</code> can be related due to both being a marker interface (there are no contract).</p>\n\n<p>As for the compiled code, the rule follows:</p>\n\n<ul>\n<li><strong>If S is not a final class (\u00a78.1.1), then, if there exists a supertype X of T, and a supertype Y of S, such that both X and Y are provably distinct parameterized types, and that the erasures of X and Y are the same, a compile-time error occurs.</strong></li>\n</ul>\n\n<p><code>S</code> is <code>o1</code> and <code>T</code> is <code>I2</code>.</p>\n\n<p>Hope this helps.</p>\n", "title": "Java casting in interfaces", "tags": ["java", "interface", "casting"], "link": "http://stackoverflow.com/questions/16186474/java-casting-in-interfaces/16186699#16186699", "question_id": 16186474, "answer_id": 16186699}, {"body": "<p>According to <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.5\">JLS chapter 5</a></p>\n\n<h3>5.5.1. Reference Type Casting</h3>\n\n<blockquote>\n  <p>Given a compile-time reference type S (source) and a compile-time reference type T (target), a casting conversion exists from S to T if no compile-time errors occur due to the following rules.\n  If T is an interface type:</p>\n  \n  <p>If S is not a final class (\u00a78.1.1), then, if there exists a supertype X of T, and a supertype Y of S, such that both X and Y are provably distinct parameterized types, and that the erasures of X and Y are the same, a compile-time error occurs.</p>\n  \n  <p>Otherwise, the cast is always legal at compile time (because even if S does not implement T, a subclass of S might).</p>\n  \n  <p>If S is a final class (\u00a78.1.1), then S must implement T, or a compile-time error occurs.</p>\n</blockquote>\n", "title": "Java casting in interfaces", "tags": ["java", "interface", "casting"], "link": "http://stackoverflow.com/questions/16186474/java-casting-in-interfaces/16186705#16186705", "question_id": 16186474, "answer_id": 16186705}], "creation_date": 1366790094, "score": 67, "link": "http://stackoverflow.com/questions/16186474/java-casting-in-interfaces", "question_id": 16186474}, {"body": "<p>I am seeking to run a common Java program in both Windows and Linux.</p>\n\n<p>The program needs to do some things differently on each platform.</p>\n\n<p>So how can / should my Java program detect it is running under Linux vs. Windows?</p>\n", "tags": ["java", "linux", "windows", "platform-detection"], "title": "Detecting Windows or Linux?", "answers": [{"body": "<p>Try:</p>\n\n<pre><code>System.getProperty(\"os.name\");\n</code></pre>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#getProperties%28%29\">http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#getProperties%28%29</a></p>\n", "title": "Detecting Windows or Linux?", "tags": ["java", "linux", "windows", "platform-detection"], "link": "http://stackoverflow.com/questions/14288185/detecting-windows-or-linux/14288297#14288297", "question_id": 14288185, "answer_id": 14288297}, {"body": "<p><a href=\"http://commons.apache.org/lang/\">apache commons lang</a> has a class <a href=\"http://grepcode.com/file/repo1.maven.org/maven2/commons-lang/commons-lang/2.6/org/apache/commons/lang/SystemUtils.java\">SystemUtils.java</a>\nyou can use :</p>\n\n<pre><code>SystemUtils.IS_OS_LINUX\nSystemUtils.IS_OS_WINDOWS\n</code></pre>\n", "title": "Detecting Windows or Linux?", "tags": ["java", "linux", "windows", "platform-detection"], "link": "http://stackoverflow.com/questions/14288185/detecting-windows-or-linux/14288916#14288916", "question_id": 14288185, "answer_id": 14288916}, {"body": "<p>You can use \"system.properties.os\", for example:</p>\n\n<pre><code>public class GetOs {\n\n  public static void main (String[] args) {\n    String s = \n      \"name: \" + System.getProperty (\"os.name\");\n    s += \", version: \" + System.getProperty (\"os.version\");\n    s += \", arch: \" + System.getProperty (\"os.arch\");\n    System.out.println (\"OS=\" + s);\n  }\n}\n\n// EXAMPLE OUTPUT: OS=name: Windows 7, version: 6.1, arch: amd64\n</code></pre>\n\n<p>Here are more details:</p>\n\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html\">http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html</a></li>\n</ul>\n", "title": "Detecting Windows or Linux?", "tags": ["java", "linux", "windows", "platform-detection"], "link": "http://stackoverflow.com/questions/14288185/detecting-windows-or-linux/18480044#18480044", "question_id": 14288185, "answer_id": 18480044}, {"body": "<p>Useful simple class are forked by me on: \n<a href=\"https://gist.github.com/kiuz/816e24aa787c2d102dd0\">https://gist.github.com/kiuz/816e24aa787c2d102dd0</a></p>\n\n<pre><code>public class OSValidator {\n\n    private static String OS = System.getProperty(\"os.name\").toLowerCase();\n\n    public static void main(String[] args) {\n\n        System.out.println(OS);\n\n        if (isWindows()) {\n            System.out.println(\"This is Windows\");\n        } else if (isMac()) {\n            System.out.println(\"This is Mac\");\n        } else if (isUnix()) {\n            System.out.println(\"This is Unix or Linux\");\n        } else if (isSolaris()) {\n            System.out.println(\"This is Solaris\");\n        } else {\n            System.out.println(\"Your OS is not support!!\");\n        }\n    }\n\n    public static boolean isWindows() {\n        return (OS.indexOf(\"win\") &gt;= 0);\n    }\n\n    public static boolean isMac() {\n        return (OS.indexOf(\"mac\") &gt;= 0);\n    }\n\n    public static boolean isUnix() {\n        return (OS.indexOf(\"nix\") &gt;= 0 || OS.indexOf(\"nux\") &gt;= 0 || OS.indexOf(\"aix\") &gt; 0 );\n    }\n\n    public static boolean isSolaris() {\n        return (OS.indexOf(\"sunos\") &gt;= 0);\n    }\n    public static String getOS(){\n        if (isWindows()) {\n            return \"win\";\n        } else if (isMac()) {\n            return \"osx\";\n        } else if (isUnix()) {\n            return \"uni\";\n        } else if (isSolaris()) {\n            return \"sol\";\n        } else {\n            return \"err\";\n        }\n    }\n\n}\n</code></pre>\n", "title": "Detecting Windows or Linux?", "tags": ["java", "linux", "windows", "platform-detection"], "link": "http://stackoverflow.com/questions/14288185/detecting-windows-or-linux/24861219#24861219", "question_id": 14288185, "answer_id": 24861219}, {"body": "<p>I think It's a best approach to use Apache lang dependency to decide which OS you're running programmatically through Java</p>\n\n<pre><code>import org.apache.commons.lang3.SystemUtils;\n\npublic class App {\n    public static void main( String[] args ) {\n        if(SystemUtils.IS_OS_WINDOWS_7)\n            System.out.println(\"It's a Windows 7 OS\");\n        if(SystemUtils.IS_OS_WINDOWS_8)\n            System.out.println(\"It's a Windows 8 OS\");\n        if(SystemUtils.IS_OS_LINUX)\n            System.out.println(\"It's a Linux OS\");\n        if(SystemUtils.IS_OS_MAC)\n            System.out.println(\"It's a MAC OS\");\n    }\n}\n</code></pre>\n", "title": "Detecting Windows or Linux?", "tags": ["java", "linux", "windows", "platform-detection"], "link": "http://stackoverflow.com/questions/14288185/detecting-windows-or-linux/30131127#30131127", "question_id": 14288185, "answer_id": 30131127}], "creation_date": 1357946031, "score": 67, "link": "http://stackoverflow.com/questions/14288185/detecting-windows-or-linux", "question_id": 14288185}, {"body": "<p>When I try to compile this class with javac, I get a compilation error and Test.class is not created.</p>\n\n<pre><code>public class Test {\n    public static void main(String[] args) {\n        int x = 1L;  // &lt;- this cannot compile\n    }\n}\n</code></pre>\n\n<p>But when I create this class in Eclipse, I can see that Test.class appears in target/classes. When I try to run this class from command line with java.exe, I get </p>\n\n<blockquote>\n  <p>Exception in thread \"main\" java.lang.Error: Unresolved compilation problem: <br/>\n        Type mismatch: cannot convert from long to int</p>\n</blockquote>\n\n<p>Does Eclipse use its own special Java compiler to create a broken .class? How does java.exe know about complilation problems in .class?</p>\n", "tags": ["java", "eclipse", "compiler-errors"], "title": "How can Eclipse create a class with unresolved compilation problems?", "answers": [{"body": "<p>Eclipse uses the IBM compiler which has an option of creating classes which do not compile, replacing errors with</p>\n\n<pre><code>throw new Error();\n</code></pre>\n\n<p>IMHO, this is very bad practice and I have seen some very poor quality projects use this.  The project didn't compile completely for weeks at a time.</p>\n\n<p>Unlike fail fast strategies, which try to minimise the cost of bugs, discovering bugs as late as possible also maximises the cost of fixing them.</p>\n\n<p>This strategy only works if you are writing prototype code quickly, i.e. code you know will never get into production. (It is hard to be sure this will be the case)</p>\n", "title": "How can Eclipse create a class with unresolved compilation problems?", "tags": ["java", "eclipse", "compiler-errors"], "link": "http://stackoverflow.com/questions/16394152/how-can-eclipse-create-a-class-with-unresolved-compilation-problems/16394191#16394191", "question_id": 16394152, "answer_id": 16394191}, {"body": "<p>Yes, <a href=\"http://en.wikipedia.org/wiki/Eclipse_%28software%29\">Eclipse</a> uses its own special compiler; known as \"ecj\". From Stack Overflow question <em><a href=\"http://stackoverflow.com/questions/3061654\">What is the difference between javac and the Eclipse compiler?</a></em>:</p>\n\n<blockquote>\n  <p>One notable difference is that the Eclipse compiler lets you run code that didn't actually properly compile. If the block of code with the error is never ran, your program will run fine. Otherwise it will throw an exception indicating that you tried to run code that doesn't compile.</p>\n</blockquote>\n", "title": "How can Eclipse create a class with unresolved compilation problems?", "tags": ["java", "eclipse", "compiler-errors"], "link": "http://stackoverflow.com/questions/16394152/how-can-eclipse-create-a-class-with-unresolved-compilation-problems/16394204#16394204", "question_id": 16394152, "answer_id": 16394204}, {"body": "<p>This is how the Java compiler knows about the compilation error in the class.</p>\n\n<pre><code>public static void main(String[] paramArrayOfString)\n{\n    throw new Error(\"Unresolved compilation problem: \\n\\tType mismatch: cannot convert from long to int.\\n\");\n}\n</code></pre>\n\n<p>If you decompile your class file, you can see the above <code>main()</code> method of the class file, which the compiler has generated. This is because of the <a href=\"http://blog.deepakazad.com/2010/05/ecj-eclipse-java-compiler.html\">compiler</a> which Eclipse uses (<strong>Eclipse Compiler for Java</strong>) is not the same as the standard Java compiler!</p>\n", "title": "How can Eclipse create a class with unresolved compilation problems?", "tags": ["java", "eclipse", "compiler-errors"], "link": "http://stackoverflow.com/questions/16394152/how-can-eclipse-create-a-class-with-unresolved-compilation-problems/16394218#16394218", "question_id": 16394152, "answer_id": 16394218}], "creation_date": 1367825769, "score": 67, "link": "http://stackoverflow.com/questions/16394152/how-can-eclipse-create-a-class-with-unresolved-compilation-problems", "question_id": 16394152}, {"body": "<p>Has any one seen the array <code>[]</code> placed after the method signature like this?</p>\n\n<pre><code>public static String mySplit(String s)[] {\n    return s.split(\",\");\n}\n\npublic static void main(String... args) {\n    String[] words = mySplit(\"a,b,c,d,e\");\n    System.out.println(Arrays.toString(words));\n}\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>[a, b, c, d, e]\n</code></pre>\n\n<p>In the past, odd notations have been for \"C\" compatibility, but I wouldn't imagine someone writing this in C either.</p>\n\n<p>Does anyone know why this is even allowed?  </p>\n\n<p>I am using Java 7 update 10, in case it matters.</p>\n\n<p>This does the same thing in Java 6. <a href=\"http://ideone.com/91rZV1\">http://ideone.com/91rZV1</a></p>\n\n<hr>\n\n<p>BTW this doesn't compile, nor would I expect it to</p>\n\n<pre><code>public static &lt;T&gt; List mySplit(String s)&lt;T&gt; {\n    return Collections.emptyList();\n}\n</code></pre>\n", "tags": ["java", "arrays", "syntax", "declaration"], "title": "Strange array return type", "answers": [{"body": "<blockquote>\n  <p>Does anyone know why this is even allowed?</p>\n</blockquote>\n\n<p>In this case it's for backward compatibility with Java itself. From the <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4\">JLS section 8.4</a>:</p>\n\n<blockquote>\n  <p>For compatibility with older versions of the Java SE platform, the declaration of a method that returns an array is allowed to place (some or all of) the empty bracket pairs that form the declaration of the array type after the formal parameter list. This is supported by the following obsolescent production, but should not be used in new code.</p>\n</blockquote>\n\n<p>And yes, you should indeed regard it as an abomination which has no good purpose other than to shock other developers. Actually, you might be able to use it to win some money at parties by betting that it would compile, against folks who've never seen it...</p>\n\n<p>Here's the kind of method which right-minded coders would expect to be invalid:</p>\n\n<pre><code>public String[] mwahahaha(String[] evil[])[] {\n    return evil;\n}\n</code></pre>\n", "title": "Strange array return type", "tags": ["java", "arrays", "syntax", "declaration"], "link": "http://stackoverflow.com/questions/14203298/strange-array-return-type/14203354#14203354", "question_id": 14203298, "answer_id": 14203354}, {"body": "<p>I think its the same reason that the following variable declarations are both equivalent</p>\n\n<pre><code>String[] array\nString array[]\n</code></pre>\n\n<p>this is a thing C developers do, so it was included to help them.</p>\n", "title": "Strange array return type", "tags": ["java", "arrays", "syntax", "declaration"], "link": "http://stackoverflow.com/questions/14203298/strange-array-return-type/14203356#14203356", "question_id": 14203298, "answer_id": 14203356}, {"body": "<p>I believe it's just telling Java that the return type is an array of <code>Strings</code>, the same as declaring</p>\n\n<pre><code>static String[] mySplit(String s) {...\n</code></pre>\n\n<p>Similar to declaring variables:</p>\n\n<pre><code>String myStringArray[];\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>String[] myStringArray;\n</code></pre>\n", "title": "Strange array return type", "tags": ["java", "arrays", "syntax", "declaration"], "link": "http://stackoverflow.com/questions/14203298/strange-array-return-type/14203358#14203358", "question_id": 14203298, "answer_id": 14203358}, {"body": "<p>It's like</p>\n\n<pre><code>  String[] a; \n</code></pre>\n\n<p>is the same as </p>\n\n<pre><code>  String a[];\n</code></pre>\n\n<p>Same works for the syntax of method return types</p>\n\n<pre><code>  public static String mySplit(String s)[] {\n</code></pre>\n\n<p>is the same as </p>\n\n<pre><code>  public static String[] mySplit(String s) {\n</code></pre>\n\n<p>But I think I never saw the version you mentioned in productive code yet.</p>\n", "title": "Strange array return type", "tags": ["java", "arrays", "syntax", "declaration"], "link": "http://stackoverflow.com/questions/14203298/strange-array-return-type/14203372#14203372", "question_id": 14203298, "answer_id": 14203372}, {"body": "<p>Yes, this is allowed,</p>\n\n<p>same reason that:</p>\n\n<pre><code>String[] myArray;\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>String myArray[];\n</code></pre>\n", "title": "Strange array return type", "tags": ["java", "arrays", "syntax", "declaration"], "link": "http://stackoverflow.com/questions/14203298/strange-array-return-type/14211688#14211688", "question_id": 14203298, "answer_id": 14211688}, {"body": "<p>Good question; when I implemented a Java parser I remember getting really confused by the JLS grammar at this point.</p>\n\n<p>To expand on John's answer, here's what's going on:  </p>\n\n<ul>\n<li>this is called <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.2\" rel=\"nofollow\">\"mixed notation\"</a> in the spec</li>\n<li>the <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-18.html\" rel=\"nofollow\">grammar</a> breaks type declarations into two pieces, each of which may have 0 or more <code>[]</code>s</li>\n</ul>\n\n<p>There are (at least) 5 places where this matters:</p>\n\n<ul>\n<li>method type signatures</li>\n<li>local variable declarations</li>\n<li>field declarations</li>\n<li>formal parameters</li>\n<li><code>for</code>-loops</li>\n</ul>\n\n<p>Here's an excerpt from the grammar, focusing on method declarations:</p>\n\n<pre><code>MethodOrFieldDecl:\n    Type Identifier MethodOrFieldRest\n\nMethodOrFieldRest:  \n    FieldDeclaratorsRest ;\n    MethodDeclaratorRest\n\nMethodDeclaratorRest:\n    FormalParameters {[]} [throws QualifiedIdentifierList] (Block | ;)\n\nType:\n    BasicType {[]}\n    ReferenceType  {[]}\n</code></pre>\n\n<p><em>(Warning: it's difficult to read the grammar because the square and curly brackets are sometimes literals and sometimes metacharacters.)</em></p>\n\n<p>This shows that <code>[]</code> can appear both under the <code>Type</code> rule, and as part of the <code>MethodDeclaratorRest</code> rule.  It is optional in both places.</p>\n", "title": "Strange array return type", "tags": ["java", "arrays", "syntax", "declaration"], "link": "http://stackoverflow.com/questions/14203298/strange-array-return-type/14225783#14225783", "question_id": 14203298, "answer_id": 14225783}], "creation_date": 1357589516, "score": 67, "link": "http://stackoverflow.com/questions/14203298/strange-array-return-type", "question_id": 14203298}, {"body": "<p>I am in the process of starting a new project (java-based). I need to build it as a modular, distributed and resilient architecture.</p>\n\n<p>Therefore I would like to have the business processes to communicate among themselves, be interoperable, but also independent.</p>\n\n<p>I am looking right now at two frameworks that, besides their difference in age, express 2 different views:</p>\n\n<ul>\n<li>Akka (<a href=\"http://akka.io\">http://akka.io</a>)</li>\n<li>Reactor (<a href=\"https://github.com/reactor/reactor\">https://github.com/reactor/reactor</a>)</li>\n</ul>\n\n<p>What I should  consider when choosing one of the above frameworks?</p>\n\n<p>As far as I understand till now, Akka is still somehow coupled (in a way that I have to 'choose' the actor I want to send the messages to), but very resilient. While Reactor is loose (as is based on event posting).</p>\n\n<p>Can someone help me understand how make a proper decision?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>After reviewing better the <a href=\"http://doc.akka.io/docs/akka/snapshot/java/event-bus.html\">Event Bus</a> of Akka, I believe in some way the <a href=\"https://github.com/reactor/reactor#events-selectors-and-consumers\">features expressed by Reactor</a> are already included in Akka.</p>\n\n<p>For example the subscription and event publishing, documented on <a href=\"https://github.com/reactor/reactor#events-selectors-and-consumers\">https://github.com/reactor/reactor#events-selectors-and-consumers</a>, can be expressed in Akka as following:</p>\n\n<pre><code>final ActorSystem system = ActorSystem.create(\"system\");\nfinal ActorRef actor = system.actorOf(new Props(\n    new UntypedActorFactory() {\n\n        @Override\n        public Actor create() throws Exception {\n\n            return new UntypedActor() {\n                final LoggingAdapter log = Logging.getLogger(\n                        getContext().system(), this);\n\n                @Override\n                public void onReceive(Object message)\n                        throws Exception {\n                    if (message instanceof String)\n                        log.info(\"Received String message: {}\",\n                                message);\n                    else\n                        unhandled(message);\n                }\n            };\n        }\n    }), \"actor\");\n\nsystem.eventStream().subscribe(actor, String.class);\nsystem.eventStream().publish(\"testing 1 2 3\");\n</code></pre>\n\n<p>Therefore it seems to me now that the major differences between the two are:</p>\n\n<ul>\n<li>Akka, more mature, bound to Typesafe</li>\n<li>Reactor, early stage, bound to the Spring</li>\n</ul>\n\n<p>Is my interpretation correct? But <strong>what is conceptually the difference between the Actor in Akka and the Consumer in Reactor</strong>?</p>\n", "tags": ["java", "spring", "akka", "reactor", "project-reactor"], "title": "Akka or Reactor", "answers": [{"body": "<p>This is an excellent question and the answer will change over the weeks to come. We can't make any promises of what inter-node communication will look like right now just because it's too early. We still have some pieces to put together before we can demonstrate clustering in Reactor.</p>\n\n<p>With that said, just because Reactor doesn't do inter-node comms OOTB doesn't mean it <em>can't</em>. :) One would only need a fairly thin network layer to coordinate between Reactors using something like Redis or AMQP to give it some clustered smarts. </p>\n\n<p>We're definitely talking about and planning for distributed scenarios in Reactor. It's just too early to say exactly how it's going to work. </p>\n\n<p>If you need something that does clustering right now, you'll be safer choosing Akka.</p>\n", "title": "Akka or Reactor", "tags": ["java", "spring", "akka", "reactor", "project-reactor"], "link": "http://stackoverflow.com/questions/16595393/akka-or-reactor/16597024#16597024", "question_id": 16595393, "answer_id": 16597024}, {"body": "<p>It is hard to tell at this point because Reactor is still a sketch and I (Akka tech lead) do not have insight into where it will go. It will be interesting to see if Reactor becomes a competitor to Akka, we are looking forward to that.</p>\n\n<p>As far as I can see, from your requirements list Reactor is missing resilience (i.e. what supervision gives you in Akka) and location transparency (i.e. referring to active entities in a fashion which lets you abstract over local or remote messaging; which is what you imply by \u201cdistributed\u201d). For \u201cmodular\u201d I do not know enough about Reactor, in particular how you can look up active components and manage them.</p>\n\n<p>If you start a real project now and need something which satisfies your first sentence, then I don\u2019t think it would be controversial to recommend Akka at this point (as Jon also noted). Feel free to ask more concrete questions on SO or on the <a href=\"https://groups.google.com/forum/#!forum/akka-user\">akka-user mailing list</a>.</p>\n", "title": "Akka or Reactor", "tags": ["java", "spring", "akka", "reactor", "project-reactor"], "link": "http://stackoverflow.com/questions/16595393/akka-or-reactor/16663953#16663953", "question_id": 16595393, "answer_id": 16663953}, {"body": "<p>Reactor is not bound to Spring, its an optional module. We want Reactor to be portable, a foundation as Jon outlined. </p>\n\n<p>I won't be confident about pushing in production as we are not even Milestone (1.0.0.SNAPSHOT), in that regard, I would have a deeper look at <em>Akka</em> which is a fantastic asynchronous framework IMO. Also consider <em>Vert.x</em> and <em>Finagle</em> which might be adapted if you look either for a platform (the former) or for composable futures (the latter). If you look after a wide range of asynchronous patterns, maybe <em>GPars</em> will provide you a more complete solution.</p>\n\n<p>In the end, we might certainly have overlaps, in fact we're leaning toward a mixed approach (flexible composable eventing, distributed, and not bound to any dispatching strategy) where you can easily find bits from <em>RxJava</em>, <em>Vert.x</em>, <em>Akka</em> etc. We are not even opinionated by the language choice, even if we are strongly committed to Groovy, people have already started <em>Clojure</em> and <em>Kotlin</em> ports. Add to this mix the fact that some requirements are driven by <a href=\"https://github.com/SpringSource/spring-xd\">Spring XD</a> and <a href=\"http://www.grails.org\">Grails</a>.</p>\n\n<p>Many thanks for your witnessed interest, hopefully you'll have more comparison points in a couple of months :)</p>\n", "title": "Akka or Reactor", "tags": ["java", "spring", "akka", "reactor", "project-reactor"], "link": "http://stackoverflow.com/questions/16595393/akka-or-reactor/16674388#16674388", "question_id": 16595393, "answer_id": 16674388}], "creation_date": 1368730964, "score": 67, "link": "http://stackoverflow.com/questions/16595393/akka-or-reactor", "question_id": 16595393}, {"body": "<p>I am trying to understand what JMS and how it is connected to AMQP terminology.\nI know JMS is an API and AMQP is a protocol. </p>\n\n<p>Here are my assumptions (and questions as well)</p>\n\n<ul>\n<li>RabbitMQ uses AMQP protocol (rather implements AMQP protocol)</li>\n<li>Java clients need to use AMQP protocol client libraries to connect / use RabbitMQ</li>\n<li>Where does JMS API come into play here? JMS API should use AMQP client libraries to connect to RabbitMQ?</li>\n<li>Usually we use JMS to connect Message brokers like RabbitMQ, ActiveMQ, etc. Then what is the default protocol used here instead of AMQP?</li>\n</ul>\n\n<p>Some of the above may be dumb. :-) But trying to wrap my head around it.</p>\n", "tags": ["java", "jms", "rabbitmq", "message-queue", "amqp"], "title": "JMS and AMQP - RabbitMQ", "answers": [{"body": "<p>Your question is a bit messy and like a tough Question of a question paper :)(As teachers always try to ask simple questions making complex :D I hope you are not a teacher :) )Let see all of these one by one.<br/>\nAs you know<br/>\nThe Java Message Service <strong>(JMS) API is a Java Message Oriented Middleware (MOM) API for sending messages between two or more clients</strong>. JMS is a part of the Java Platform, Enterprise Edition, and is defined by a specification developed under the Java Community Process as JSR 914. <strong>It is a messaging standard that allows application components based on the Java Enterprise Edition (Java EE) to create, send, receive, and read messages. It allows the communication between different components of a distributed application to be loosely coupled, reliable, and asynchronous</strong>(From WIKI).<br/>\n<em>Now</em> <br/>\n<strong>The Advanced Message Queuing Protocol (AMQP)</strong> <code>is an open standard application layer protocol for message-oriented middleware. The defining features of AMQP are message orientation, queuing, routing (including point-to-point and publish-and-subscribe), reliability and security</code><br/>And the most important thing<br/>\n<code>Unlike JMS, which merely defines an API, AMQP is a wire-level protocol. A wire-level protocol is a description of the format of the data that is sent across the network as a stream of octets. Consequently any tool that can create and interpret messages that conform to this data format can interoperate with any other compliant tool irrespective of implementation language</code>(From WIKI).<br/>\n<br/>Some imp things you should know<br/>\n<strong>1:</strong> Keep in mind that AMQP is a Messaging technologies that do not implement the JMS API.<br/>\n<strong>2:</strong> JMS is API and AMQP is a protocol.So it doesn't make sense to say that what is default protocol of JMS , Ofcourse client applications use HTTP/S as the connection protocol when invoking a WebLogic Web Service.<br/>\n<strong>3:</strong> JMS is only a API spec. It doesnt use any protocol. A JMS provider (like ActiveMQ) could be using any underlying protocol to realize the JMS API. For ex: Apache ActiveMQ can use any of the following protocols: AMQP, MQTT, OpenWire, REST(HTTP), RSS and Atom, Stomp, WSIF, WS Notification, XMPP<br/>I suggest you to see <a href=\"http://docs.oracle.com/cd/E13222_01/wls/docs103/webserv_adv_rpc/jmstransport.html#wp244314\">Using JMS Transport as the Connection Protocol</a> GoodLuck :)</p>\n", "title": "JMS and AMQP - RabbitMQ", "tags": ["java", "jms", "rabbitmq", "message-queue", "amqp"], "link": "http://stackoverflow.com/questions/15150133/jms-and-amqp-rabbitmq/15150540#15150540", "question_id": 15150133, "answer_id": 15150540}, {"body": "<p>JMS, when it was defined did not define a protocol between the JMS client and a messaging server. The JMS client, which implement the JMS API can use whatever protocol to communicate with messaging server. The client just need to be compliant with JMS api. Thats all. Ususally JMS clients use a custom protocol that their messaging server understands.</p>\n\n<p>AMQP on other hand is a protocol between a messaging client and messaging server. A JMS client can use AMQP as the protocol to communicate with the messaging server. And there are clients like that available.</p>\n\n<p><a href=\"http://www.lshift.net/blog/2009/03/16/openamqs-jms-client-with-rabbitmq-server\">http://www.lshift.net/blog/2009/03/16/openamqs-jms-client-with-rabbitmq-server</a> </p>\n", "title": "JMS and AMQP - RabbitMQ", "tags": ["java", "jms", "rabbitmq", "message-queue", "amqp"], "link": "http://stackoverflow.com/questions/15150133/jms-and-amqp-rabbitmq/15151370#15151370", "question_id": 15150133, "answer_id": 15151370}, {"body": "<p>I suspect you may be looking for <a href=\"http://pubs.vmware.com/vfabricRabbitMQ32/index.jsp?topic=/com.vmware.vfabric.rabbitmq.3.2/jms-client/about.html\" rel=\"nofollow\">this documentation</a> which says, in part:</p>\n\n<blockquote>\n  <p>JMS Client for vFabric RabbitMQ is a client library for vFabric\n  RabbitMQ. vFabric RabbitMQ is not a JMS provider but has features\n  needed to support the JMS Queue and Topic messaging models. JMS Client\n  for RabbitMQ implements the JMS 1.1 specification on top of the\n  RabbitMQ Java client API, thus allowing new and existing JMS\n  applications to connect with RabbitMQ brokers through Advanced Message\n  Queueing Protocol (AMQP).</p>\n</blockquote>\n", "title": "JMS and AMQP - RabbitMQ", "tags": ["java", "jms", "rabbitmq", "message-queue", "amqp"], "link": "http://stackoverflow.com/questions/15150133/jms-and-amqp-rabbitmq/23112304#23112304", "question_id": 15150133, "answer_id": 23112304}, {"body": "<p>Let's start from the basis. </p>\n\n<p><strong>RabbitMQ</strong> <em>is a MOM</em> (Message Oriented Middleware), developed with Erlang (a TLC-oriented programming language) and <strong>implementing the wire protocol AMQP</strong> (Advance Message Queuing Protocol). \nCurrently, many Client APIs (e.g., Java, C++, RESTful, etc.) are available to enable the usage of RabbitMQ messaging services.</p>\n\n<p><strong>JMS</strong> (Java Messaging Service) is a JCP standard defining a <strong>set of structured APIs</strong> to be implemented by a MOM. An example of MOM that implements (i.e. is compatible with) the JMS APIs is ActiveMQ; there's also HornetMQ, and others. Such middlewares get the JMS APIs and implement the exchange patterns accordingly.</p>\n\n<p>According to above, taken the skeleton of JMS APIs, an instance of RabbitMQ and its Java Client APIs, it is possible to develop a JMS implementation making use of RabbitMQ: the only thing that one has to do, at that point, is implementing the exchange pattern (over RabbitMQ) according to the JMS specification.</p>\n\n<p>The key is: <em>a set of APIs, like JMS, can be implemented no matter of the technology</em> (in this case, RabbitMQ).</p>\n", "title": "JMS and AMQP - RabbitMQ", "tags": ["java", "jms", "rabbitmq", "message-queue", "amqp"], "link": "http://stackoverflow.com/questions/15150133/jms-and-amqp-rabbitmq/26412087#26412087", "question_id": 15150133, "answer_id": 26412087}, {"body": "<p>I had similar questions on JMS and AMQP. While the discussion here answer the questions. This link from spring.io also explains it nicely and worth taking a look, hence sharing...</p>\n\n<p><a href=\"https://spring.io/understanding/AMQP\" rel=\"nofollow\">Understanding AMQP</a>  </p>\n", "title": "JMS and AMQP - RabbitMQ", "tags": ["java", "jms", "rabbitmq", "message-queue", "amqp"], "link": "http://stackoverflow.com/questions/15150133/jms-and-amqp-rabbitmq/31381827#31381827", "question_id": 15150133, "answer_id": 31381827}], "creation_date": 1362109409, "score": 67, "link": "http://stackoverflow.com/questions/15150133/jms-and-amqp-rabbitmq", "question_id": 15150133}, {"body": "<p>I'm trying to get Appfuse + tomcat + jRebel working.</p>\n\n<p>Appfuse by default uses Cargo to download tomcat (ver. 7.0.33) and deploy the application to it. I wish to use an already installed tomcat (ver. 7.0.27) instead of the downloaded one. I made the change following the <a href=\"http://appfuse.org/display/APF/FAQ#FAQ-useexistingtomcat\">appfuse FAQ</a>.</p>\n\n<p>After deploying with <code>mvn cargo:run</code>, how can I know that the actual running tomcat is indeed 7.0.27? </p>\n\n<p>I used to type a wrong URL (ex. <em>localhost:8080/dfsfsdf</em>) to see it in the error page, but now it shows nothing.</p>\n\n<p>My <code>$CATALINA_HOME</code> points to my own tomcat 7.0.27.\nsorry forgot to mention, it's for Windows</p>\n\n<p>Update:</p>\n\n<p>Since this question had become somehow popular, I would like to explain why that accepted answer. simple, it was the first one which solved my problem. </p>\n\n<p>looking at the title of the question,  Tech Junkie and CPU 100 really have the best answer, but not for the scenario I was encountered. (I was wanting to know if <code>mvn cargo:run</code> runs my installed tomcat or a \"project embeded\" tomcat)  <code>:)</code></p>\n", "tags": ["java", "tomcat", "appfuse"], "title": "how to find out running tomcat version", "answers": [{"body": "<ol>\n<li>Try parsing or executing the Tomcat_home/bin directory and look for\na script named <strong>version.sh</strong> or <strong>version.bat</strong> depending on your\noperating system.</li>\n<li>Execute the script <code>./version.sh</code> or <code>version.bat</code></li>\n</ol>\n\n<p>If there are no version.bat or version.sh then\nuse a tool to unzipping JAR files (\\tomcat\\server\\lib\\catalina.jar) and look in the file org\\apache\\catalina\\util\\lib\\ServerInfo.properties.\nthe version defined under \"server.info=\".</p>\n", "title": "how to find out running tomcat version", "tags": ["java", "tomcat", "appfuse"], "link": "http://stackoverflow.com/questions/14925073/how-to-find-out-running-tomcat-version/14925114#14925114", "question_id": 14925073, "answer_id": 14925114}, {"body": "<p>Windows task manager > Processes > find tomcat > right click > open file location > if you run Tomcat7w.exe it is visible at description.</p>\n\n<p>Tomcat should running to be visible at Processes if not at Windows Vista/7 go to task manager > tab (services) find tomcat start it and then processes.</p>\n", "title": "how to find out running tomcat version", "tags": ["java", "tomcat", "appfuse"], "link": "http://stackoverflow.com/questions/14925073/how-to-find-out-running-tomcat-version/14925427#14925427", "question_id": 14925073, "answer_id": 14925427}, {"body": "<p>if you can upload a JSP file you may print out some info like in this example: <a href=\"http://www.bestdesigns.co.in/blog/check-jsp-tomcat-version\">bestdesigns.co.in/blog/check-jsp-tomcat-version</a></p>\n\n<p>Save this code into a file called tomcat_version.jsp:</p>\n\n<pre><code>    Tomcat Version : &lt;%= application.getServerInfo() %&gt;&lt;br&gt;    \n    Servlet Specification Version : \n&lt;%= application.getMajorVersion() %&gt;.&lt;%= application.getMinorVersion() %&gt; &lt;br&gt;    \n    JSP version :\n&lt;%=JspFactory.getDefaultFactory().getEngineInfo().getSpecificationVersion() %&gt;&lt;br&gt;\n</code></pre>\n\n<p>When you access, <a href=\"http://example.com/tomcat_version.jsp\">http://example.com/tomcat_version.jsp</a>, the output should look similar to:</p>\n\n<pre><code>Tomcat Version : Apache Tomcat/5.5.25\nServlet Specification Version : 2.4\nJSP version: 2.0\n</code></pre>\n\n<p>Thanks! :)</p>\n", "title": "how to find out running tomcat version", "tags": ["java", "tomcat", "appfuse"], "link": "http://stackoverflow.com/questions/14925073/how-to-find-out-running-tomcat-version/14938856#14938856", "question_id": 14925073, "answer_id": 14938856}, {"body": "<p>You can simply open <code>http://localhost:8080/</code> in your web browser\nand this will open Tomcat welcome page that shows running Tomcat version like this:</p>\n\n<pre><code>Apache Tomcat/7.0.42\n</code></pre>\n\n<ul>\n<li>I assume that your Tomcat is running on port 8080</li>\n</ul>\n", "title": "how to find out running tomcat version", "tags": ["java", "tomcat", "appfuse"], "link": "http://stackoverflow.com/questions/14925073/how-to-find-out-running-tomcat-version/18647569#18647569", "question_id": 14925073, "answer_id": 18647569}, {"body": "<p>Though this is not recent, I thought, my answer can still help others:\nCD to server/lib and run the following command:</p>\n\n<pre><code>java -cp catalina.jar org.apache.catalina.util.ServerInfo\n</code></pre>\n\n<p>and that's it.</p>\n", "title": "how to find out running tomcat version", "tags": ["java", "tomcat", "appfuse"], "link": "http://stackoverflow.com/questions/14925073/how-to-find-out-running-tomcat-version/21773359#21773359", "question_id": 14925073, "answer_id": 21773359}, {"body": "<p>You can find out the server information through its status page:</p>\n\n<p>{running-tomcat-url}/manager/status</p>\n\n<p>On that page you can see the version of Java on which your Tomcat runs</p>\n\n<p>Note: I have also pasted this answer on <a href=\"http://stackoverflow.com/questions/17478093/tomcat6-and-jre7-compatibility-issue-unsupported-major-minor-version-51-0/21812446#21812446\">Tomcat6 and JRE7 compatibility issue. Unsupported major.minor version 51.0</a></p>\n", "title": "how to find out running tomcat version", "tags": ["java", "tomcat", "appfuse"], "link": "http://stackoverflow.com/questions/14925073/how-to-find-out-running-tomcat-version/21812477#21812477", "question_id": 14925073, "answer_id": 21812477}, {"body": "<p>execute the script in your <code>tomcat/bin</code> directory:</p>\n\n<pre><code>sh tomcat/bin/version.sh\n\nServer version: Apache Tomcat/7.0.42\nServer built:   Jul 2 2013 08:57:41\nServer number:  7.0.42.0\nOS Name:        Linux\nOS Version:     2.6.32-042stab084.26\nArchitecture:   amd64\nJVM Version:    1.7.0_21-b11\nJVM Vendor:     Oracle Corporation\n</code></pre>\n", "title": "how to find out running tomcat version", "tags": ["java", "tomcat", "appfuse"], "link": "http://stackoverflow.com/questions/14925073/how-to-find-out-running-tomcat-version/23060386#23060386", "question_id": 14925073, "answer_id": 23060386}, {"body": "<p>If Tomcat is installed as a service, try:</p>\n\n<pre><code>sudo /etc/init.d/tomcat version\n</code></pre>\n\n<p>Swap out \"tomcat\" with the actual name of the service.</p>\n", "title": "how to find out running tomcat version", "tags": ["java", "tomcat", "appfuse"], "link": "http://stackoverflow.com/questions/14925073/how-to-find-out-running-tomcat-version/29657852#29657852", "question_id": 14925073, "answer_id": 29657852}, {"body": "<p>run the following</p>\n\n<pre><code>/usr/local/tomcat/bin/catalina.sh version\n</code></pre>\n\n<p>its response will be something like:</p>\n\n<pre><code>Using CATALINA_BASE:   /usr/local/tomcat\nUsing CATALINA_HOME:   /usr/local/tomcat\nUsing CATALINA_TMPDIR: /var/tmp/\nUsing JRE_HOME:        /usr\nUsing CLASSPATH:       /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar\nUsing CATALINA_PID:    /var/catalina.pid\nServer version: Apache Tomcat/7.0.30\nServer built:   Sep 27 2012 05:13:37\nServer number:  7.0.30.0\nOS Name:        Linux\nOS Version:     2.6.32-504.3.3.el6.x86_64\nArchitecture:   amd64\nJVM Version:    1.7.0_60-b19\nJVM Vendor:     Oracle Corporation\n</code></pre>\n", "title": "how to find out running tomcat version", "tags": ["java", "tomcat", "appfuse"], "link": "http://stackoverflow.com/questions/14925073/how-to-find-out-running-tomcat-version/30494268#30494268", "question_id": 14925073, "answer_id": 30494268}, {"body": "<p>run on terminal of the Unix server</p>\n\n<pre><code>w3m http://localhost:8080/\n</code></pre>\n\n<p>to quit press q and next y</p>\n", "title": "how to find out running tomcat version", "tags": ["java", "tomcat", "appfuse"], "link": "http://stackoverflow.com/questions/14925073/how-to-find-out-running-tomcat-version/30731740#30731740", "question_id": 14925073, "answer_id": 30731740}, {"body": "<p>To find out the Tomcat version, find this file \u2013 version.sh for *nix or version.bat for Windows. This version.sh file is normally located in the Tomcat bin folder.</p>\n\n<pre><code>phpmongodb@kumar:/usr/share/tomcat7/bin$ ./version.sh \n</code></pre>\n\n<p><strong>Note</strong></p>\n\n<p>If you are not sure where is the version.sh file, try this command :</p>\n\n<pre><code>sudo find / -name \"version.sh\"\n</code></pre>\n\n<p>Find out everything about Tomcat7.</p>\n\n<pre><code>sudo find / -name \"tomcat7\"\n</code></pre>\n", "title": "how to find out running tomcat version", "tags": ["java", "tomcat", "appfuse"], "link": "http://stackoverflow.com/questions/14925073/how-to-find-out-running-tomcat-version/33892701#33892701", "question_id": 14925073, "answer_id": 33892701}, {"body": "<h2>Using the release notes</h2>\n\n<p>In the main Tomcat folder you can find the <strong>RELEASE-NOTES</strong> file which contains the following lines (~line 20-21):</p>\n\n<blockquote>\n<pre><code>                Apache Tomcat Version 8.0.22\n                        Release Notes\n</code></pre>\n</blockquote>\n\n<p>Or you can get the same information using <strong>command line</strong>:</p>\n\n<ul>\n<li><p><strong>Windows</strong>:</p>\n\n<pre><code>type RELEASE-NOTES | find \"Apache Tomcat Version\"\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>             Apache Tomcat Version 8.0.22\n</code></pre></li>\n<li><p><strong>Linux</strong>:</p>\n\n<pre><code>cat RELEASE-NOTES | grep \"Apache Tomcat Version\"\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>             Apache Tomcat Version 8.0.22\n</code></pre></li>\n</ul>\n", "title": "how to find out running tomcat version", "tags": ["java", "tomcat", "appfuse"], "link": "http://stackoverflow.com/questions/14925073/how-to-find-out-running-tomcat-version/35505896#35505896", "question_id": 14925073, "answer_id": 35505896}, {"body": "<p>For windows machine </p>\n\n<pre><code>bin&gt;version.bat\nUsing CATALINA_BASE:   \"C:\\apache-tomcat-7.0.53\"\nUsing CATALINA_HOME:   \"C:\\apache-tomcat-7.0.53\"\nUsing CATALINA_TMPDIR: \"C:\\apache-tomcat-7.0.53\\temp\"\nUsing JRE_HOME:        \"C:\\Program Files\\Java\\jdk1.8.0_65\"\nUsing CLASSPATH:       \"C:\\apache-tomcat-7.0.53\\bin\\bootstrap.jar;C:\\apache-tomcat-7.0.53\\bin\\tomcat-juli.jar\"\nServer version: Apache Tomcat/7.0.53\nServer built:   Jan 01 2014 06:20:16\nServer number:  7.0.53.0\nOS Name:        Windows 10\nOS Version:     10.0\nArchitecture:   amd64\nJVM Version:    1.8.0_65-b17\nJVM Vendor:     Oracle Corporation\n</code></pre>\n\n<p>For Linux Machine </p>\n\n<pre><code># ./version.sh\nUsing CATALINA_BASE:   /usr/epramaan/apache-tomcat-7.0.56\nUsing CATALINA_HOME:   /usr/epramaan/apache-tomcat-7.0.56\nUsing CATALINA_TMPDIR: /usr/epramaan/apache-tomcat-7.0.56/temp\nUsing JRE_HOME:        /usr/java/jdk1.7.0_71/jre\nUsing CLASSPATH:       /usr/epramaan/apache-tomcat-7.0.56/bin/bootstrap.jar:/usr/epramaan/apache-tomcat-7.0.56/bin/tomcat-juli.jar\nServer version: Apache Tomcat/7.0.56\nServer built:   Sep 26 2014 12:08:24\nServer number:  7.0.56.0\nOS Name:        Linux\nOS Version:     2.6.32-431.el6.x86_64\nArchitecture:   amd64\nJVM Version:    1.7.0_71-b14\nJVM Vendor:     Oracle Corporation\n</code></pre>\n\n<p>If Tomcat is installed as a service:</p>\n\n<pre><code>#sudo /etc/init.d/tomcat version\n</code></pre>\n", "title": "how to find out running tomcat version", "tags": ["java", "tomcat", "appfuse"], "link": "http://stackoverflow.com/questions/14925073/how-to-find-out-running-tomcat-version/35506087#35506087", "question_id": 14925073, "answer_id": 35506087}, {"body": "<p>Enter <code>404.jsp</code> or <code>non-existent.jsp</code>.</p>\n\n<p>Get Tomcat/JBoss version number at bottom of page.</p>\n", "title": "how to find out running tomcat version", "tags": ["java", "tomcat", "appfuse"], "link": "http://stackoverflow.com/questions/14925073/how-to-find-out-running-tomcat-version/36880954#36880954", "question_id": 14925073, "answer_id": 36880954}, {"body": "<p>For securing Tomcat from hackers, it's recommended that we try a few steps at hiding the tomcat version information. The OWASP project suggests a few steps. <a href=\"https://www.owasp.org/index.php/Securing_tomcat\" rel=\"nofollow\">https://www.owasp.org/index.php/Securing_tomcat</a> . If a tomcat installation is thus protected, then only 1 of the above answers will show the version of tomcat. <br>i.e going through the $TOMCAT_HOME\\RELEASE-NOTES file where the version number is clearly announced.</p>\n\n<p>I had one such protected server and only the RELEASE-NOTES file revealed the version of the tomcat. all other techniques failed to reveal the version info.</p>\n", "title": "how to find out running tomcat version", "tags": ["java", "tomcat", "appfuse"], "link": "http://stackoverflow.com/questions/14925073/how-to-find-out-running-tomcat-version/38114945#38114945", "question_id": 14925073, "answer_id": 38114945}], "creation_date": 1361128940, "score": 65, "link": "http://stackoverflow.com/questions/14925073/how-to-find-out-running-tomcat-version", "question_id": 14925073}, {"body": "<p>I want to use the JRE 1.7 that I downloaded <a href=\"http://java.com/fr/download/mac_download.jsp?locale=fr\">from Oracle website</a>.</p>\n\n<p>So I correctly install the .pkg file, and when I try <code>/Library/Internet\\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java -version</code> in the terminal I get this :</p>\n\n<blockquote>\n  <p>java version \"1.7.0_11\" Java(TM) SE Runtime Environment (build\n  1.7.0_11-b21) Java HotSpot(TM) 64-Bit Server VM (build 23.6-b04, mixed mode)</p>\n</blockquote>\n\n<p>But in Eclipse I can't use anything else than JRE 1.6. When I go in Properties > Java Build Path > Add Library > JRE System Library, I can't find the 1.7 (there is only option for it : <code>JavaSE-1.7 (unbound)</code> with this issue : </p>\n\n<blockquote>\n  <p>No JREs in workspace compatible with specified execution environment: JavaSE-1.7</p>\n</blockquote>\n\n<p>What should I do ? Thanks</p>\n", "tags": ["eclipse", "osx", "java"], "title": "How to install JRE 1.7 on Mac OS X and use it with Eclipse?", "answers": [{"body": "<p>Try editing your eclipse.ini file and add the following at the top</p>\n\n<pre><code>-vm\n/Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home\n</code></pre>\n\n<p>Of course the path may be slightly different, looks like I have an older version...</p>\n\n<p>I'm not sure if it will add itself automatically. If not go into</p>\n\n<p>Preferences --> Java --> Installed JREs</p>\n\n<p>Click Add and follow the instructions there to add it</p>\n", "title": "How to install JRE 1.7 on Mac OS X and use it with Eclipse?", "tags": ["eclipse", "osx", "java"], "link": "http://stackoverflow.com/questions/14341865/how-to-install-jre-1-7-on-mac-os-x-and-use-it-with-eclipse/14342169#14342169", "question_id": 14341865, "answer_id": 14342169}, {"body": "<p>You need to tell Eclipse which JDK/JRE's you have installed and where they are located.</p>\n\n<p>This is somewhat burried in the Eclipse preferences: In the Window-Menu select \"Preferences\". In the Preferences Tree, open the Node \"Java\" and select \"Installed JRE's\". Then click on the \"Add\"-Button in the Panel and select \"Standard VM\", \"Next\" and for \"JRE Home\" click on the \"Directory\"-Button and select the top level folder of the JDK you want to add.</p>\n\n<p>Its easier than the description may make it look.</p>\n", "title": "How to install JRE 1.7 on Mac OS X and use it with Eclipse?", "tags": ["eclipse", "osx", "java"], "link": "http://stackoverflow.com/questions/14341865/how-to-install-jre-1-7-on-mac-os-x-and-use-it-with-eclipse/14342538#14342538", "question_id": 14341865, "answer_id": 14342538}, {"body": "<p>The download from <code>java.com</code> which installs in <code>/Library/Internet Plug-Ins</code> is only the JRE, for development you probably want to download the JDK from <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html\">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a> and install that instead.  This will install the JDK at <code>/Library/Java/JavaVirtualMachines/jdk1.7.0_&lt;something&gt;.jdk/Contents/Home</code> which you can then add to Eclipse via Preferences -> Java -> Installed JREs.</p>\n", "title": "How to install JRE 1.7 on Mac OS X and use it with Eclipse?", "tags": ["eclipse", "osx", "java"], "link": "http://stackoverflow.com/questions/14341865/how-to-install-jre-1-7-on-mac-os-x-and-use-it-with-eclipse/14342646#14342646", "question_id": 14341865, "answer_id": 14342646}], "creation_date": 1358266176, "score": 65, "link": "http://stackoverflow.com/questions/14341865/how-to-install-jre-1-7-on-mac-os-x-and-use-it-with-eclipse", "question_id": 14341865}, {"body": "<p>I want to do mouseover function over a drop down menu. When we hover over the menu, it will show the new options.\nI tried to click the new options using the xpath. But cannot click the menus directly.\nSo, as the manual way i am trying to hover over the drop down menu and then will click the new options.</p>\n\n<pre><code>Actions action = new Actions(webdriver);\nWebElement we = webdriver.findElement(By.xpath(\"//html/body/div[13]/ul/li[4]/a\"));\naction.moveToElement(we).build().perform();\n</code></pre>\n", "tags": ["java", "selenium", "selenium-webdriver", "mouseover"], "title": "How to perform mouseover function in Selenium WebDriver using Java?", "answers": [{"body": "<p>Its not really possible to perform a 'mouse hover' action, instead you need to chain all of the actions that you want to achieve in one go. So move to the element that reveals the others, then during the same chain, move to the now revealed element and click on it.</p>\n\n<p>When using Action Chains you have to remember to 'do it like a user would'.</p>\n\n<pre><code>Actions action = new Actions(webdriver);\nWebElement we = webdriver.findElement(By.xpath(\"html/body/div[13]/ul/li[4]/a\"));\naction.moveToElement(we).moveToElement(webdriver.findElement(By.xpath(\"/expression-here\"))).click().build().perform();\n</code></pre>\n", "title": "How to perform mouseover function in Selenium WebDriver using Java?", "tags": ["java", "selenium", "selenium-webdriver", "mouseover"], "link": "http://stackoverflow.com/questions/17293914/how-to-perform-mouseover-function-in-selenium-webdriver-using-java/17294390#17294390", "question_id": 17293914, "answer_id": 17294390}, {"body": "<p>Based on <a href=\"http://www.learnseleniumtesting.com/mouse-hover-and-other-mouse-events-in-webdriver/\">this </a> blog post I was able to trigger hovering using the following code with Selenium 2 Webdriver:</p>\n\n<pre><code>String javaScript = \"var evObj = document.createEvent('MouseEvents');\" +\n                    \"evObj.initMouseEvent(\\\"mouseover\\\",true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\" +\n                    \"arguments[0].dispatchEvent(evObj);\";\n\n\n((JavascriptExecutor)driver).executeScript(javaScript, webElement);\n</code></pre>\n", "title": "How to perform mouseover function in Selenium WebDriver using Java?", "tags": ["java", "selenium", "selenium-webdriver", "mouseover"], "link": "http://stackoverflow.com/questions/17293914/how-to-perform-mouseover-function-in-selenium-webdriver-using-java/23901014#23901014", "question_id": 17293914, "answer_id": 23901014}, {"body": "<p>None of these answers work when trying to do the following:</p>\n\n<ol>\n<li>Hover over a menu item.</li>\n<li>Find the hidden element that is ONLY available after the hover.</li>\n<li>Click the sub-menu item.</li>\n</ol>\n\n<p>If you insert a 'perform' command after the moveToElement, it moves to the element, and the sub-menu item shows for a brief period, but that is not a hover. The hidden element immediately disappears before it can be found resulting in a ElementNotFoundException. I tried two things:</p>\n\n<pre><code>Actions builder = new Actions(driver);\nbuilder.moveToElement(hoverElement).perform();\nbuilder.moveToElement(clickElement).click().perform();\n</code></pre>\n\n<p>This did not work for me. The following worked for me:</p>\n\n<pre><code>Actions builder = new Actions(driver);\nbuilder.moveToElement(hoverElement).perform();\nBy locator = By.id(\"clickElementID\");\ndriver.click(locator);\n</code></pre>\n\n<p>Using the Actions to hover and the standard WebDriver click, I could hover and then click.</p>\n", "title": "How to perform mouseover function in Selenium WebDriver using Java?", "tags": ["java", "selenium", "selenium-webdriver", "mouseover"], "link": "http://stackoverflow.com/questions/17293914/how-to-perform-mouseover-function-in-selenium-webdriver-using-java/25003010#25003010", "question_id": 17293914, "answer_id": 25003010}, {"body": "<p>I found this question looking for a way to do the same thing for my Javascript tests, using Protractor (a javascript frontend to Selenium.)</p>\n\n<p>My solution with protractor 1.2.0 and webdriver 2.1:</p>\n\n<pre><code>  browser.actions()\n  .mouseMove(\n    element(by.css('.material-dialog-container'))\n  )\n  .click()\n  .perform();\n</code></pre>\n\n<p>This also accepts an offset (i'm using it to click above and left of an element:)</p>\n\n<pre><code>  browser.actions()\n  .mouseMove(\n    element(by.css('.material-dialog-container'))\n    , -20, -20  // pixel offset from top left\n  )\n  .click()\n  .perform();\n</code></pre>\n", "title": "How to perform mouseover function in Selenium WebDriver using Java?", "tags": ["java", "selenium", "selenium-webdriver", "mouseover"], "link": "http://stackoverflow.com/questions/17293914/how-to-perform-mouseover-function-in-selenium-webdriver-using-java/25773211#25773211", "question_id": 17293914, "answer_id": 25773211}, {"body": "<p><strong>Sample program to mouse hover using Selenium java WebDriver :</strong></p>\n\n<pre><code>public class Mhover {\n\npublic static void main(String[] args){\n\n   WebDriver driver = new FirefoxDriver();\n   driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\n   driver.get(\"http://www.google.com\");\n   WebElement ele = driver.findElement(By.id(\"gbqfba\"));\n   Actions action = new Actions(driver);\n   action.moveToElement(ele).build().perform();\n\n\n}\n\n}\n</code></pre>\n", "title": "How to perform mouseover function in Selenium WebDriver using Java?", "tags": ["java", "selenium", "selenium-webdriver", "mouseover"], "link": "http://stackoverflow.com/questions/17293914/how-to-perform-mouseover-function-in-selenium-webdriver-using-java/27287937#27287937", "question_id": 17293914, "answer_id": 27287937}], "creation_date": 1372153151, "score": 65, "link": "http://stackoverflow.com/questions/17293914/how-to-perform-mouseover-function-in-selenium-webdriver-using-java", "question_id": 17293914}, {"body": "<p>I am bit confused about difference between Spring Data-JPA and JPA. I know about JPA that it is a specification for persisting the Java Objects to relational database using popular ORM technology i.e. in other words JPA provides interfaces and other ORM technologies implements those interfaces known as JPA provider eg Hibernate.</p>\n\n<p>Now what exactly is Spring Data JPA. Is Spring Data JPA has added some more functionality (Interfaces) over JPA and still it is specification only or it is also a JPA provider ?</p>\n\n<p>I saw Spring Data JPA works around repositories (DAO layer: if I am not wrong). So I mean how it is different using 'Spring Data JPA + Hibernate' or only using 'Hibernate' directly ?</p>\n\n<p>I might be totally wrong in asking question but I appreciate your help in resolving my confusion. Kindly also post any useful links of documentation that helps.\nThanks in advance....</p>\n", "tags": ["java", "spring", "hibernate", "orm", "jpa-2.0"], "title": "Spring Data-JPA versus JPA: Whats the difference?", "answers": [{"body": "<p>The Java Persistence API, sometimes referred to as JPA, is a Java framework managing relational data in applications using the Java Platform, Standard Edition(JavaSE) and Java Platform, Enterprise Edition(JavaEE).</p>\n\n<p><strong>Persistence in this context covers three areas:</strong><br>\n    1. The API itself, defined in the <code>javax.persistence</code> package.<br>\n    2. The Java Persistence Query Language (JPQL).<br>\n    3. Object-Relational metadata.</p>\n\n<p>Spring Data JPA is part of the umbrella Spring Data project that makes it easy to easily implement JPA based repositories.  </p>\n\n<p><strong>Features:</strong></p>\n\n<ul>\n<li>Sophisticated support to build repositories based on Spring and JPA<br></li>\n<li>Support for QueryDSL predicates and thus type-safe JPA queries<br></li>\n<li>Transparent auditing of domain class<br></li>\n<li>Pagination support, dynamic query execution, ability to integrate custom data access code<br></li>\n<li>Validation of <code>@Query</code> annotated queries at bootstrap time<br></li>\n<li>Support for XML based entity mapping<br></li>\n<li>JavaConfig based repository configuration by introducing <code>@EnableJpaRepositories</code><br></li>\n</ul>\n", "title": "Spring Data-JPA versus JPA: Whats the difference?", "tags": ["java", "spring", "hibernate", "orm", "jpa-2.0"], "link": "http://stackoverflow.com/questions/16148188/spring-data-jpa-versus-jpa-whats-the-difference/16148473#16148473", "question_id": 16148188, "answer_id": 16148473}, {"body": "<blockquote>\n  <p>I saw Spring JPA works around repositories (DAO layer: if I am not wrong). So I mean how it is different using 'Spring JPA + Hibernate' or only using 'Hibernate' directly ?</p>\n</blockquote>\n\n<p>As you said, <strong>JPA</strong> is an <em>specification</em> while <strong>Hibernate</strong> is a particular implementation of that specification (these implementations are usually referred to as <em>Providers</em>). By using Hibernate you tie yourself to that provider restricting your freedom to switch to another option when required (for example, you want to use EclipseLink or ObjectDB instead because Hibernate has a bug that halts your development process).</p>\n\n<p>Quoting <strong><a href=\"http://static.springsource.org/spring-data/jpa/docs/1.0.0.M1/reference/html/\">Spring Data JPA</a>'s</strong> documentation:</p>\n\n<blockquote>\n  <p>Implementing a data access layer of an application has been cumbersome for quite a while. Too much boilerplate code had to be written. Domain classes were anemic and haven't been designed in a real object oriented or domain driven manner.</p>\n  \n  <p>Using both of these technologies makes developers life a lot easier regarding rich domain model's persistence. Nevertheless the amount of boilerplate code to implement repositories especially is still quite high. So the goal of the repository abstraction of Spring Data is to reduce the effort to implement data access layers for various persistence stores significantly.</p>\n</blockquote>\n\n<p>To sum it up, it is on top of JPA adding another layer of abstraction, kind of defining a \"standarized\" design for the support of your <em>Persistence Layer</em> in a Spring context. Those defined interfaces (known to Spring) provide the services that the framework handles using JPA to serve the results. You define a repository in a way Spring can scan the project and find it</p>\n\n<pre><code>&lt;repositories base-package=\"com.acme.repositories\" /&gt;\n</code></pre>\n\n<p>Allowing you to use it in the context of a container or outside of it.</p>\n\n<blockquote>\n  <p>Now what exactly is Spring JPA. Is Spring JPA has added some more functionality (Interfaces) over JPA and still it is specification only or it is also a JPA provider ?</p>\n</blockquote>\n\n<p>Long story short, then, Spring Data JPA provides a definition to implement repositories that is supported under the hood by referencing the JPA specification, using the provider you define.</p>\n", "title": "Spring Data-JPA versus JPA: Whats the difference?", "tags": ["java", "spring", "hibernate", "orm", "jpa-2.0"], "link": "http://stackoverflow.com/questions/16148188/spring-data-jpa-versus-jpa-whats-the-difference/16148515#16148515", "question_id": 16148188, "answer_id": 16148515}], "creation_date": 1366636825, "score": 65, "link": "http://stackoverflow.com/questions/16148188/spring-data-jpa-versus-jpa-whats-the-difference", "question_id": 16148188}, {"body": "<p>I'm trying to find a simple (ha) SOAP example in JAVA with a working service any I seem to be finding are not working.</p>\n\n<p>I have tried this <a href=\"http://www.elharo.com/fibonacci/SOAP\">one</a> from this <a href=\"http://cafeconleche.org/books/xmljava/chapters/ch03s05.html\">example</a> but it's just not working, it's asking me to put a forward slash in but it's in there and nothing happening.</p>\n\n<p>So does anyone know any SOAP example links, I can download/request and mess with?</p>\n\n<p>Thanks for your help.</p>\n", "tags": ["java", "web-services", "soap"], "title": "Working Soap client example", "answers": [{"body": "<p>To implement simple SOAP clients in Java, you can use the SAAJ framework (it is shipped with JSE 1.6 and above):</p>\n\n<blockquote>\n  <p><strong>SOAP with Attachments API for Java (SAAJ)</strong> is mainly used for dealing directly with SOAP Request/Response messages which happens behind the scenes in any Web Service API. It allows the developers to directly send and receive soap messages instead of using JAX-WS.</p>\n</blockquote>\n\n<p>See below a working example (run it!) of a SOAP web service call using SAAJ. It calls <a href=\"http://ws.cdyne.com/emailverify/Emailvernotestemail.asmx?wsdl\">this web service</a>.</p>\n\n<pre><code>import javax.xml.soap.*;\n\npublic class SOAPClientSAAJ {\n\n    public static void main(String args[]) throws Exception {\n        // Create SOAP Connection\n        SOAPConnectionFactory soapConnectionFactory = SOAPConnectionFactory.newInstance();\n        SOAPConnection soapConnection = soapConnectionFactory.createConnection();\n\n        // Send SOAP Message to SOAP Server\n        String url = \"http://ws.cdyne.com/emailverify/Emailvernotestemail.asmx\";\n        SOAPMessage soapResponse = soapConnection.call(createSOAPRequest(), url);\n\n        // print SOAP Response\n        System.out.print(\"Response SOAP Message:\");\n        soapResponse.writeTo(System.out);\n\n        soapConnection.close();\n    }\n\n    private static SOAPMessage createSOAPRequest() throws Exception {\n        MessageFactory messageFactory = MessageFactory.newInstance();\n        SOAPMessage soapMessage = messageFactory.createMessage();\n        SOAPPart soapPart = soapMessage.getSOAPPart();\n\n        String serverURI = \"http://ws.cdyne.com/\";\n\n        // SOAP Envelope\n        SOAPEnvelope envelope = soapPart.getEnvelope();\n        envelope.addNamespaceDeclaration(\"example\", serverURI);\n\n        /*\n        Constructed SOAP Request Message:\n        &lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:example=\"http://ws.cdyne.com/\"&gt;\n            &lt;SOAP-ENV:Header/&gt;\n            &lt;SOAP-ENV:Body&gt;\n                &lt;example:VerifyEmail&gt;\n                    &lt;example:email&gt;mutantninja@gmail.com&lt;/example:email&gt;\n                    &lt;example:LicenseKey&gt;123&lt;/example:LicenseKey&gt;\n                &lt;/example:VerifyEmail&gt;\n            &lt;/SOAP-ENV:Body&gt;\n        &lt;/SOAP-ENV:Envelope&gt;\n         */\n\n        // SOAP Body\n        SOAPBody soapBody = envelope.getBody();\n        SOAPElement soapBodyElem = soapBody.addChildElement(\"VerifyEmail\", \"example\");\n        SOAPElement soapBodyElem1 = soapBodyElem.addChildElement(\"email\", \"example\");\n        soapBodyElem1.addTextNode(\"mutantninja@gmail.com\");\n        SOAPElement soapBodyElem2 = soapBodyElem.addChildElement(\"LicenseKey\", \"example\");\n        soapBodyElem2.addTextNode(\"123\");\n\n        MimeHeaders headers = soapMessage.getMimeHeaders();\n        headers.addHeader(\"SOAPAction\", serverURI  + \"VerifyEmail\");\n\n        soapMessage.saveChanges();\n\n        /* Print the request message */\n        System.out.print(\"Request SOAP Message:\");\n        soapMessage.writeTo(System.out);\n        System.out.println();\n\n        return soapMessage;\n    }\n\n}\n</code></pre>\n", "title": "Working Soap client example", "tags": ["java", "web-services", "soap"], "link": "http://stackoverflow.com/questions/15948927/working-soap-client-example/15949858#15949858", "question_id": 15948927, "answer_id": 15949858}, {"body": "<p>Yes, if you can acquire any WSDL file, then you can use SoapUI to create mock service of that service complete with unit test requests.  I <a href=\"https://github.com/djangofan/soapui-maven-template\" rel=\"nofollow\">created an example of this (using Maven) that you can try out</a>.</p>\n\n<p>Also, <a href=\"http://www.actionscript.org/forums/showthread.php3?t=70742\" rel=\"nofollow\">here is a giant list of free webservices someone posted.</a></p>\n", "title": "Working Soap client example", "tags": ["java", "web-services", "soap"], "link": "http://stackoverflow.com/questions/15948927/working-soap-client-example/18448517#18448517", "question_id": 15948927, "answer_id": 18448517}, {"body": "<p>For Basic Authentication of WSDL the accepted answers code raises an error. Try the following instead </p>\n\n<pre><code>Authenticator.setDefault(new Authenticator() {\n    @Override\n    protected PasswordAuthentication getPasswordAuthentication() {\n        return new PasswordAuthentication(\"username\",\"password\".toCharArray());\n    }\n});\n</code></pre>\n", "title": "Working Soap client example", "tags": ["java", "web-services", "soap"], "link": "http://stackoverflow.com/questions/15948927/working-soap-client-example/19734762#19734762", "question_id": 15948927, "answer_id": 19734762}], "creation_date": 1365683702, "score": 64, "link": "http://stackoverflow.com/questions/15948927/working-soap-client-example", "question_id": 15948927}, {"body": "<p>I have a situation in which i want to write all logs created by me to write into a text file.</p>\n\n<p>we are using java.util.logging.Logger API for generating the logs.</p>\n\n<p>I tried </p>\n\n<pre><code>private static Logger logger = Logger.getLogger(className.class.getName());\nFileHandler fh;   \nfh = new FileHandler(\"C:/className.log\");   \nlogger.addHandler(fh); \n</code></pre>\n\n<p>But still getting my logs on console only.... Kindly help. Thanks in Advance</p>\n", "tags": ["java", "logging"], "title": "How to write logs in text file when using java.util.logging.Logger", "answers": [{"body": "<p>Try this sample. It works for me.</p>\n\n<pre><code>public static void main(String[] args) {  \n\n    Logger logger = Logger.getLogger(\"MyLog\");  \n    FileHandler fh;  \n\n    try {  \n\n        // This block configure the logger with handler and formatter  \n        fh = new FileHandler(\"C:/temp/test/MyLogFile.log\");  \n        logger.addHandler(fh);\n        SimpleFormatter formatter = new SimpleFormatter();  \n        fh.setFormatter(formatter);  \n\n        // the following statement is used to log any messages  \n        logger.info(\"My first log\");  \n\n    } catch (SecurityException e) {  \n        e.printStackTrace();  \n    } catch (IOException e) {  \n        e.printStackTrace();  \n    }  \n\n    logger.info(\"Hi How r u?\");  \n\n}\n</code></pre>\n\n<p>Produces the output at MyLogFile.log</p>\n\n<pre><code>Apr 2, 2013 9:57:08 AM testing.MyLogger main  \nINFO: My first log  \nApr 2, 2013 9:57:08 AM testing.MyLogger main  \nINFO: Hi How r u?\n</code></pre>\n\n<p><strong><em>Edit:</em></strong></p>\n\n<p>To remove the console handler, use</p>\n\n<pre><code>logger.setUseParentHandlers(false);\n</code></pre>\n\n<p>since the ConsoleHandler is registered with the parent logger from which all the loggers derive.</p>\n", "title": "How to write logs in text file when using java.util.logging.Logger", "tags": ["java", "logging"], "link": "http://stackoverflow.com/questions/15758685/how-to-write-logs-in-text-file-when-using-java-util-logging-logger/15758768#15758768", "question_id": 15758685, "answer_id": 15758768}, {"body": "<p>A good library available named <a href=\"http://logging.apache.org/log4j/1.2/\" rel=\"nofollow\">log4j for Java</a>.<br>\nThis will provide numerous feature. Go through link and you will find your solution.</p>\n", "title": "How to write logs in text file when using java.util.logging.Logger", "tags": ["java", "logging"], "link": "http://stackoverflow.com/questions/15758685/how-to-write-logs-in-text-file-when-using-java-util-logging-logger/15758794#15758794", "question_id": 15758685, "answer_id": 15758794}, {"body": "<pre><code>int SIZE = \"&lt;intialize-here&gt;\"\nint ROTATIONCOUNT = \"&lt;intialize-here&gt;\"\n\nHandler handler = new FileHandler(\"test.log\", SIZE, LOG_ROTATIONCOUNT);\nlogger.addHandler(handler);     // for your code.. \n\n// you can also set logging levels\nLogger.getLogger(this.getClass().getName()).log(Level.[...]).addHandler(handler);\n</code></pre>\n", "title": "How to write logs in text file when using java.util.logging.Logger", "tags": ["java", "logging"], "link": "http://stackoverflow.com/questions/15758685/how-to-write-logs-in-text-file-when-using-java-util-logging-logger/15758818#15758818", "question_id": 15758685, "answer_id": 15758818}, {"body": "<pre><code>import java.io.IOException;\nimport org.apache.log4j.Appender;\nimport org.apache.log4j.FileAppender;\nimport org.apache.log4j.Logger;\nimport org.apache.log4j.SimpleLayout;\n\n/**\n * @author Kiran\n * \n */\npublic class MyLogger {\n\n    public MyLogger() {\n    }\n\n    public static void main(String[] args) {\n        Logger logger = Logger.getLogger(\"MyLog\");\n        Appender fh = null;\n        try {\n            fh = new FileAppender(new SimpleLayout(), \"MyLogFile.log\");\n            logger.addAppender(fh);\n            fh.setLayout(new SimpleLayout());\n            logger.info(\"My first log\");\n        } catch (SecurityException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        logger.info(\"Hi How r u?\");\n    }\n}\n</code></pre>\n", "title": "How to write logs in text file when using java.util.logging.Logger", "tags": ["java", "logging"], "link": "http://stackoverflow.com/questions/15758685/how-to-write-logs-in-text-file-when-using-java-util-logging-logger/19109637#19109637", "question_id": 15758685, "answer_id": 19109637}, {"body": "<p>Maybe <a href=\"https://sites.google.com/site/ibrabel/sscce/logtofile\" rel=\"nofollow\">this is</a> what you need... </p>\n\n<pre><code>import java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.io.IOException;\nimport java.util.logging.FileHandler;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JOptionPane;\nimport javax.swing.JPanel;\n\n/**\n * LogToFile class\n * This class is intended to be use with the default logging class of java\n * It save the log in an XML file  and display a friendly message to the user\n * @author Ibrabel &lt;ibrabel@gmail.com&gt;\n */\npublic class LogToFile {\n\n    protected static final Logger logger=Logger.getLogger(\"MYLOG\");\n    /**\n     * log Method \n     * enable to log all exceptions to a file and display user message on demand\n     * @param ex\n     * @param level\n     * @param msg \n     */\n    public static void log(Exception ex, String level, String msg){\n\n        FileHandler fh = null;\n        try {\n            fh = new FileHandler(\"log.xml\",true);\n            logger.addHandler(fh);\n            switch (level) {\n                case \"severe\":\n                    logger.log(Level.SEVERE, msg, ex);\n                    if(!msg.equals(\"\"))\n                        JOptionPane.showMessageDialog(null,msg,\n                            \"Error\", JOptionPane.ERROR_MESSAGE);\n                    break;\n                case \"warning\":\n                    logger.log(Level.WARNING, msg, ex);\n                    if(!msg.equals(\"\"))\n                        JOptionPane.showMessageDialog(null,msg,\n                            \"Warning\", JOptionPane.WARNING_MESSAGE);\n                    break;\n                case \"info\":\n                    logger.log(Level.INFO, msg, ex);\n                    if(!msg.equals(\"\"))\n                        JOptionPane.showMessageDialog(null,msg,\n                            \"Info\", JOptionPane.INFORMATION_MESSAGE);\n                    break;\n                case \"config\":\n                    logger.log(Level.CONFIG, msg, ex);\n                    break;\n                case \"fine\":\n                    logger.log(Level.FINE, msg, ex);\n                    break;\n                case \"finer\":\n                    logger.log(Level.FINER, msg, ex);\n                    break;\n                case \"finest\":\n                    logger.log(Level.FINEST, msg, ex);\n                    break;\n                default:\n                    logger.log(Level.CONFIG, msg, ex);\n                    break;\n            }\n        } catch (IOException | SecurityException ex1) {\n            logger.log(Level.SEVERE, null, ex1);\n        } finally{\n            if(fh!=null)fh.close();\n        }\n    }\n\n    public static void main(String[] args) {\n\n        /*\n            Create simple frame for the example\n        */\n        JFrame myFrame = new JFrame();\n        myFrame.setTitle(\"LogToFileExample\");\n        myFrame.setSize(300, 100);\n        myFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        myFrame.setLocationRelativeTo(null);\n        JPanel pan = new JPanel();\n        JButton severe = new JButton(\"severe\");\n        pan.add(severe);\n        JButton warning = new JButton(\"warning\");\n        pan.add(warning);\n        JButton info = new JButton(\"info\");\n        pan.add(info);\n\n        /*\n            Create an exception on click to use the LogToFile class\n        */\n        severe.addActionListener(new ActionListener(){\n\n            @Override\n            public void actionPerformed(ActionEvent ae) {\n                int j = 20, i = 0;\n                try {\n                    System.out.println(j/i);\n                } catch (ArithmeticException ex) {\n                    log(ex,\"severe\",\"You can't divide anything by zero\");\n                }\n\n            }\n\n        });\n\n        warning.addActionListener(new ActionListener(){\n\n            @Override\n            public void actionPerformed(ActionEvent ae) {\n                int j = 20, i = 0;\n                try {\n                    System.out.println(j/i);\n                } catch (ArithmeticException ex) {\n                    log(ex,\"warning\",\"You can't divide anything by zero\");\n                }\n\n            }\n\n        });\n\n        info.addActionListener(new ActionListener(){\n\n            @Override\n            public void actionPerformed(ActionEvent ae) {\n                int j = 20, i = 0;\n                try {\n                    System.out.println(j/i);\n                } catch (ArithmeticException ex) {\n                    log(ex,\"info\",\"You can't divide anything by zero\");\n                }\n\n            }\n\n        });\n\n        /*\n            Add the JPanel to the JFrame and set the JFrame visible\n        */\n        myFrame.setContentPane(pan);\n        myFrame.setVisible(true);\n    }\n}\n</code></pre>\n", "title": "How to write logs in text file when using java.util.logging.Logger", "tags": ["java", "logging"], "link": "http://stackoverflow.com/questions/15758685/how-to-write-logs-in-text-file-when-using-java-util-logging-logger/22984168#22984168", "question_id": 15758685, "answer_id": 22984168}, {"body": "<p>Firstly, where did you define your logger and from what class\\method trying to call it? There is a working example, fresh baked:</p>\n\n<pre><code>public class LoggingTester {\n    private final Logger logger = Logger.getLogger(LoggingTester.class\n            .getName());\n    private FileHandler fh = null;\n\n    public LoggingTester() {\n        //just to make our log file nicer :)\n        SimpleDateFormat format = new SimpleDateFormat(\"M-d_HHmmss\");\n        try {\n            fh = new FileHandler(\"C:/temp/test/MyLogFile_\"\n                + format.format(Calendar.getInstance().getTime()) + \".log\");\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        fh.setFormatter(new SimpleFormatter());\n        logger.addHandler(fh);\n    }\n\n    public void doLogging() {\n        logger.info(\"info msg\");\n        logger.severe(\"error message\");\n        logger.fine(\"fine message\"); //won't show because to high level of logging\n    }\n}   \n</code></pre>\n\n<p>In your code you forgot to define the formatter, if you need simple one you can do it as I mentioned above, but there is another option, you can format it by yourself, there is an example (just insert it instead of this line fh.setFormatter(new SimpleFormatter()) following code):</p>\n\n<pre><code>fh.setFormatter(new Formatter() {\n            @Override\n            public String format(LogRecord record) {\n                SimpleDateFormat logTime = new SimpleDateFormat(\"MM-dd-yyyy HH:mm:ss\");\n                Calendar cal = new GregorianCalendar();\n                cal.setTimeInMillis(record.getMillis());\n                return record.getLevel()\n                        + logTime.format(cal.getTime())\n                        + \" || \"\n                        + record.getSourceClassName().substring(\n                                record.getSourceClassName().lastIndexOf(\".\")+1,\n                                record.getSourceClassName().length())\n                        + \".\"\n                        + record.getSourceMethodName()\n                        + \"() : \"\n                        + record.getMessage() + \"\\n\";\n            }\n        });\n</code></pre>\n\n<p>Or any other modification whatever you like. Hope it helps.</p>\n", "title": "How to write logs in text file when using java.util.logging.Logger", "tags": ["java", "logging"], "link": "http://stackoverflow.com/questions/15758685/how-to-write-logs-in-text-file-when-using-java-util-logging-logger/24371368#24371368", "question_id": 15758685, "answer_id": 24371368}], "creation_date": 1364888477, "score": 64, "link": "http://stackoverflow.com/questions/15758685/how-to-write-logs-in-text-file-when-using-java-util-logging-logger", "question_id": 15758685}, {"body": "<p>When I boot up Android Studio and select \"New Project...\" and go through creating a new project, I get this popup error:</p>\n\n<blockquote>\n  <p>Failed to import new Gradle project: failed to find Build Tools revision 17.0.0</p>\n  \n  <p>Consult IDE log for more details (Help | Show Log)</p>\n</blockquote>\n\n<p>I would love to consult the IDE log, but I haven't even managed to get into the application to do much of anything. I've went through the preferences multiple times to see if I can set a path for the Build Tools, but I can't find much of anything. How do I fix this, or how do I get into the application without opening a project so I can at least see the logs?</p>\n", "tags": ["java", "android", "gradle", "android-studio"], "title": "Failed to import new Gradle project: failed to find Build Tools revision *.0.0", "answers": [{"body": "<p>After spending a few hours: I restarted the <code>Android SDK Manager</code> and at this time I noticed that I got <code>Android SDK Platform-tools</code> (upgrade) and <code>Android SDK Build-tools</code> (new).</p>\n\n<p>After installing those, I was finally able to fully compile my project.</p>\n\n<p>Note: The latest ADT (Version 22) should be installed.</p>\n", "title": "Failed to import new Gradle project: failed to find Build Tools revision *.0.0", "tags": ["java", "android", "gradle", "android-studio"], "link": "http://stackoverflow.com/questions/16619773/failed-to-import-new-gradle-project-failed-to-find-build-tools-revision-0-0/16620529#16620529", "question_id": 16619773, "answer_id": 16620529}, {"body": "<p>i think you can download the latest android SDK and use it.i do this and fixed the problem and work well.\nhere is the link:\n<a href=\"http://developer.android.com/sdk/index.html#download\" rel=\"nofollow\">http://developer.android.com/sdk/index.html#download</a></p>\n", "title": "Failed to import new Gradle project: failed to find Build Tools revision *.0.0", "tags": ["java", "android", "gradle", "android-studio"], "link": "http://stackoverflow.com/questions/16619773/failed-to-import-new-gradle-project-failed-to-find-build-tools-revision-0-0/16630486#16630486", "question_id": 16619773, "answer_id": 16630486}, {"body": "<p>This is what I had to do:</p>\n\n<ol>\n<li>Install the latest <a href=\"http://developer.android.com/sdk/index.html\">Android SDK Manager</a> (22.0.1)</li>\n<li>Install <a href=\"http://www.gradle.org/get-started\">Gradle</a> (1.6)</li>\n<li>Update my environment variables: \n<ul>\n<li><code>ANDROID_HOME=C:\\...\\android-sdk</code> </li>\n<li><code>GRADLE_HOME=C:\\...\\gradle-1.6</code></li>\n</ul></li>\n<li>Update/dobblecheck my PATH variable: \n<ul>\n<li><code>PATH=...;%GRADLE_HOME%\\bin;%ANDROID_HOME%\\tools;%ANDROID_HOME%\\platform-tools</code></li>\n</ul></li>\n<li>Start Android SDK Manager and download necessary SDK API's</li>\n</ol>\n", "title": "Failed to import new Gradle project: failed to find Build Tools revision *.0.0", "tags": ["java", "android", "gradle", "android-studio"], "link": "http://stackoverflow.com/questions/16619773/failed-to-import-new-gradle-project-failed-to-find-build-tools-revision-0-0/17447972#17447972", "question_id": 16619773, "answer_id": 17447972}, {"body": "<p>Try to run <code>gradle</code> at the command line first. It might prompt you to setup and environment variable:</p>\n\n<pre><code>export _JAVA_OPTIONS=\"-Xms256m -Xmx1024m\"\n</code></pre>\n\n<p>Read more here: <a href=\"http://www.pressingquestion.com/5031828/Failed-To-Import-New-Gradle-Project-Failed-To-Find-Build-Tools-Revision-1700\" rel=\"nofollow\">1</a>, <a href=\"http://stackoverflow.com/a/16634014/356895\">2</a></p>\n\n<hr>\n\n<p>Further make sure that the Android SDK build tools (<code>adb</code>, <code>aapt</code>, <code>dx</code>, <code>dx.jar</code>) are available in the <code>PATH</code>. If not you can create symlinks at the appropriate locations. They changed with the release of new SDK versions. Here is a <a href=\"https://gist.github.com/johnjohndoe/6442719\" rel=\"nofollow\">shell script which creates the symlinks within the <code>$ANDROID_HOME</code> folder</a> for you.</p>\n", "title": "Failed to import new Gradle project: failed to find Build Tools revision *.0.0", "tags": ["java", "android", "gradle", "android-studio"], "link": "http://stackoverflow.com/questions/16619773/failed-to-import-new-gradle-project-failed-to-find-build-tools-revision-0-0/18623840#18623840", "question_id": 16619773, "answer_id": 18623840}, {"body": "<p>Look in the SDK Manager what is your highest <code>Android SDK Build-tools</code> version, and copy this version number in your project <code>build.gradle</code> file, in the <code>android/buildToolsVersion</code> property (for me, version was \"18.1.1\").</p>\n\n<p>Hope it help!</p>\n", "title": "Failed to import new Gradle project: failed to find Build Tools revision *.0.0", "tags": ["java", "android", "gradle", "android-studio"], "link": "http://stackoverflow.com/questions/16619773/failed-to-import-new-gradle-project-failed-to-find-build-tools-revision-0-0/19432649#19432649", "question_id": 16619773, "answer_id": 19432649}, {"body": "<p>I had this problem recently, my project didn't include <code>local.properties</code> file.</p>\n\n<p>Check <code>local.properties</code> file if it includes <code>sdk.dir</code> with correct path to sdk</p>\n", "title": "Failed to import new Gradle project: failed to find Build Tools revision *.0.0", "tags": ["java", "android", "gradle", "android-studio"], "link": "http://stackoverflow.com/questions/16619773/failed-to-import-new-gradle-project-failed-to-find-build-tools-revision-0-0/20176644#20176644", "question_id": 16619773, "answer_id": 20176644}, {"body": "<p>Basically error saying your are missing \"Android SDK Build-tools\" installed.</p>\n", "title": "Failed to import new Gradle project: failed to find Build Tools revision *.0.0", "tags": ["java", "android", "gradle", "android-studio"], "link": "http://stackoverflow.com/questions/16619773/failed-to-import-new-gradle-project-failed-to-find-build-tools-revision-0-0/21646384#21646384", "question_id": 16619773, "answer_id": 21646384}, {"body": "<p>I had the API 17 installed but that was not enough. What I really need installed is the \"Android SDK Build-Tools 17\". </p>\n\n<p>You can locate your \"Android SDK Build-Tools X\" inside the first child, named \"Tools\", in the \"Android SDK Manager\".</p>\n", "title": "Failed to import new Gradle project: failed to find Build Tools revision *.0.0", "tags": ["java", "android", "gradle", "android-studio"], "link": "http://stackoverflow.com/questions/16619773/failed-to-import-new-gradle-project-failed-to-find-build-tools-revision-0-0/22078081#22078081", "question_id": 16619773, "answer_id": 22078081}, {"body": "<p>It happens because <strong>Build Tools revision x doesn't exist</strong>.</p>\n\n<p>Today, the latest version is <code>23.0.2</code> (subject to change all the time).</p>\n\n<p>The <code>buildToolsVersion</code>s you want are included in the Android SDK, normally installed in the <code>&lt;sdk&gt;/build-tools/&lt;buildToolsVersion&gt;</code> directory.</p>\n\n<p><strong>Don't confuse</strong> the <a href=\"http://developer.android.com/intl/es/tools/sdk/tools-notes.html\" rel=\"nofollow\">Android SDK Tools</a> with <a href=\"http://developer.android.com/intl/es/tools/revisions/build-tools.html\" rel=\"nofollow\">SDK Build Tools</a>.</p>\n\n<hr>\n\n<p>Change in your <code>build.gradle</code>'s <code>buildToolsVersion</code> to some version installed in <code>&lt;sdk&gt;/build-tools</code></p>\n\n<pre><code>android {\n   buildToolsVersion \"23.0.2\"\n   // ...\n\n}\n</code></pre>\n", "title": "Failed to import new Gradle project: failed to find Build Tools revision *.0.0", "tags": ["java", "android", "gradle", "android-studio"], "link": "http://stackoverflow.com/questions/16619773/failed-to-import-new-gradle-project-failed-to-find-build-tools-revision-0-0/34918168#34918168", "question_id": 16619773, "answer_id": 34918168}, {"body": "<p>in your Project perspective, look for Application --> build.gradle and edit this lines </p>\n\n<p><code>android {\n    compileSdkVersion \"android-N\"\n    buildToolsVersion \"24.0.0 rc1\"</code></p>\n\n<p>like this:</p>\n\n<p><code>android {\n    compileSdkVersion 24\n    buildToolsVersion \"23.0.3\"</code></p>\n", "title": "Failed to import new Gradle project: failed to find Build Tools revision *.0.0", "tags": ["java", "android", "gradle", "android-studio"], "link": "http://stackoverflow.com/questions/16619773/failed-to-import-new-gradle-project-failed-to-find-build-tools-revision-0-0/37905006#37905006", "question_id": 16619773, "answer_id": 37905006}, {"body": "<p>As of August 2016, A really straightforward solution using Android Studio:</p>\n\n<ol>\n<li>Open Android Studio</li>\n<li>From the top, choose <strong>Tools</strong> -> <strong>Android</strong> -> <strong>SDK Manager</strong></li>\n<li>Under Appearance &amp; Behaviour->System Settings->Android SDK, click <strong>SDK Tools</strong> from the top. Then highlight <strong>Android SDK Build Tools</strong> from the list.</li>\n<li>Check \"<strong>Show Package Details</strong>\" check box, choose the build tools version you need and then click Apply. </li>\n</ol>\n\n<p>Done. </p>\n", "title": "Failed to import new Gradle project: failed to find Build Tools revision *.0.0", "tags": ["java", "android", "gradle", "android-studio"], "link": "http://stackoverflow.com/questions/16619773/failed-to-import-new-gradle-project-failed-to-find-build-tools-revision-0-0/39068538#39068538", "question_id": 16619773, "answer_id": 39068538}], "creation_date": 1368839295, "score": 64, "link": "http://stackoverflow.com/questions/16619773/failed-to-import-new-gradle-project-failed-to-find-build-tools-revision-0-0", "question_id": 16619773}, {"body": "<p>What exactly is HotSpot and how does it relate to JVM and OpenJDK? Is it a library? What exactly does it do?</p>\n\n<p>Also, what is the difference between OpenJDK and HotSpot?</p>\n", "tags": ["java", "jvm-hotspot"], "title": "Difference between JVM and HotSpot?", "answers": [{"body": "<p><strong>OpenJDK</strong> (Open Java Development Kit) is a free and open source implementation of the Java Platform, Standard Edition (Java SE).The openjdk is a project started by Sun Microsystems, nowadays care by many companies and the community for build a Java Development Kit absolutely in open source. As per the <a href=\"http://www.oracle.com/technetwork/java/javase/community/opensourcejdk-jsp-136417.html\">official documentation</a>.</p>\n\n<p><em>OpenJDK is an open-source implementation of the Java Platform, Standard Edition (Java SE) specifications. In May 2007, Sun released a fully buildable Java Development Kit (JDK) version for Java SE to the OpenJDK Community as free software under the GNU General Public License version two (GPLv2). Sun announced the Interim Governing Board for the OpenJDK community. Sun also announced that OpenJDK-based implementations can use the Java SE 6 Technical Compatibility Kit (JCK) to establish compatibility with the Java SE 6 specification.</em> </p>\n\n<p>The <strong>OpenJDK project</strong> consists of a number of components - <strong>HotSpot (the virtual machine)</strong>, the Java Class Library and the javac Java compiler.For more on it, visit its <a href=\"http://openjdk.java.net/\">site</a>.</p>\n\n<p>The current JVM provided by Sun/Oracle is called <strong>HotSpot</strong> because it seeks hot spots of use in the code (places where code is more intensively used) for \"just-in-time\" optimization. From the <a href=\"http://en.wikipedia.org/wiki/HotSpot\">wikipedia</a>, <em>HotSpot, released as the \"Java HotSpot Performance Engine\" is a Java virtual machine for desktops and servers, maintained and distributed by Oracle Corporation.</em></p>\n", "title": "Difference between JVM and HotSpot?", "tags": ["java", "jvm-hotspot"], "link": "http://stackoverflow.com/questions/16568253/difference-between-jvm-and-hotspot/16568530#16568530", "question_id": 16568253, "answer_id": 16568530}, {"body": "<p>The definition of the Java Virtual Machine is in what is called the <a href=\"http://docs.oracle.com/javase/specs/jvms/se7/html/\">Java Virtual Machine Specification</a></p>\n\n<p>The JVM is by definition a <a href=\"http://en.wikipedia.org/wiki/Virtual_Machine\">virtual machine</a>, that is a software machine that simulates what a real machine does. Like real machines it has an <a href=\"http://en.wikipedia.org/wiki/Instruction_set\">instruction set</a>, a virtual computer architecture and an execution model. It is capable of running code written with this virtual instruction set, pretty much like a real machine can run machine code.</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/HotSpot\">HotSpot</a> is an an implementation of the JVM concept, originally developed by Sun and now owned by Oracle. There are other implementations of the JVM specification, like <a href=\"http://en.wikipedia.org/wiki/JRockit\">JRockit</a>, <a href=\"http://en.wikipedia.org/wiki/IBM_J9\">IBM J9</a>, among many others. </p>\n\n<p>See <a href=\"http://en.wikipedia.org/wiki/List_of_Java_virtual_machines\">List of Java Virtual Machine Implementations</a></p>\n\n<p>The <a href=\"http://en.wikipedia.org/wiki/OpenJDK\">OpenJDK</a> is a project under which an opensource implementation of the HotSpot (and many other things e.g compiler, JDK APIs, etc) is developed.</p>\n", "title": "Difference between JVM and HotSpot?", "tags": ["java", "jvm-hotspot"], "link": "http://stackoverflow.com/questions/16568253/difference-between-jvm-and-hotspot/16568659#16568659", "question_id": 16568253, "answer_id": 16568659}, {"body": "<p>HotSpot is, as mentioned above, a cross-platform implementation of the Java Virtual Machine (JVM) Concept, and is distributed with the OpenJDK (Java Developer Kit), under the GNU General Public License. HotSpot is written mainly in C++, and was originally developed under Sun Microsystems. It is currently developed under the OpenJDK Project, at www.java.net. The HotSpot JVM was available as an add-on for Java 1.2, and later was used as the default Sun JVM in Java 1.3. The JVM is currently in Version 7, Build b147, and has an active development community behind it. </p>\n\n<p>For more information, goto:\n<a href=\"https://www.java.net/\" rel=\"nofollow\">https://www.java.net/</a></p>\n\n<p>Happy Coding!</p>\n", "title": "Difference between JVM and HotSpot?", "tags": ["java", "jvm-hotspot"], "link": "http://stackoverflow.com/questions/16568253/difference-between-jvm-and-hotspot/24354744#24354744", "question_id": 16568253, "answer_id": 24354744}, {"body": "<blockquote>\n  <p>JVM is an abstract machine (specifications). HotSpot, OpenJDK and JRockit and so are implementations of JVM.</p>\n</blockquote>\n\n<p><strong>Free and open source implementations</strong>  </p>\n\n<ul>\n<li><p><strong>HotSpot</strong>, the primary reference Java VM implementation</p></li>\n<li><p><strong>OpenJDK</strong> \u2014 Open Java Development Kit is a free and open source implementation licensed under the GNU General Public License (GNU\nGPL) with a linking exception.  </p></li>\n</ul>\n\n<p><strong>Proprietary implementations</strong>  </p>\n\n<ul>\n<li><strong>JRockit</strong> (originally from Appeal Virtual Machines) acquired by Oracle for Linux, Windows and Solaris</li>\n</ul>\n\n<p>for more <a href=\"https://en.wikipedia.org/wiki/List_of_Java_virtual_machines\" rel=\"nofollow\">implementations</a><br>\n<a href=\"http://www.dbi-services.com/index.php/blog/entry/a-comparison-of-java-virtual-machines-hotspot-jvm-vs-jrockit-jvm\" rel=\"nofollow\">link</a> explains differences between HotSpot and JRocket </p>\n", "title": "Difference between JVM and HotSpot?", "tags": ["java", "jvm-hotspot"], "link": "http://stackoverflow.com/questions/16568253/difference-between-jvm-and-hotspot/31531894#31531894", "question_id": 16568253, "answer_id": 31531894}, {"body": "<p>HotSpot is an advanced form of C++ hacking, in order to use it you must build against it in order to compile even the simplest of things. Unless you tune compilers and or write them from scratch. HotSpot is basically a way of converting source code into C++ code and then compiling it to native code thus the term jit compiled.  </p>\n", "title": "Difference between JVM and HotSpot?", "tags": ["java", "jvm-hotspot"], "link": "http://stackoverflow.com/questions/16568253/difference-between-jvm-and-hotspot/36310946#36310946", "question_id": 16568253, "answer_id": 36310946}], "creation_date": 1368629324, "score": 64, "link": "http://stackoverflow.com/questions/16568253/difference-between-jvm-and-hotspot", "question_id": 16568253}, {"body": "<p>I have a string:</p>\n\n<pre><code>/abc/def/ghfj.doc\n</code></pre>\n\n<p>I would like to extract <code>ghfj.doc</code> from this this, ie, the substring after the last \"/\" or first \"/\" from right.</p>\n\n<p>Could someone please provide some help?</p>\n", "tags": ["java", "string", "substring"], "title": "Java: Getting a substring from a string starting after a particular character", "answers": [{"body": "<p>A very simple implementation with <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29\"><code>String.split()</code></a>:</p>\n\n<pre><code>String path = \"/abc/def/ghfj.doc\";\n// Split path into segments\nString segments[] = path.split(\"/\");\n// Grab the last segment\nString document = segments[segments.length - 1];\n</code></pre>\n", "title": "Java: Getting a substring from a string starting after a particular character", "tags": ["java", "string", "substring"], "link": "http://stackoverflow.com/questions/14316487/java-getting-a-substring-from-a-string-starting-after-a-particular-character/14316543#14316543", "question_id": 14316487, "answer_id": 14316543}, {"body": "<pre><code>    String example = \"/abc/def/ghfj.doc\";\n    System.out.println(example.substring(example.lastIndexOf(\"/\") + 1));\n</code></pre>\n", "title": "Java: Getting a substring from a string starting after a particular character", "tags": ["java", "string", "substring"], "link": "http://stackoverflow.com/questions/14316487/java-getting-a-substring-from-a-string-starting-after-a-particular-character/14316548#14316548", "question_id": 14316487, "answer_id": 14316548}, {"body": "<p>what have you tried?\nit's very simple:</p>\n\n<pre><code>String s = \"/abc/def/ghfj.doc\";\ns.substring(s.lastIndexOf(\"/\") + 1)\n</code></pre>\n", "title": "Java: Getting a substring from a string starting after a particular character", "tags": ["java", "string", "substring"], "link": "http://stackoverflow.com/questions/14316487/java-getting-a-substring-from-a-string-starting-after-a-particular-character/14316561#14316561", "question_id": 14316487, "answer_id": 14316561}, {"body": "<p>I think that would be better if we use directly the split function </p>\n\n<pre><code>String toSplit = \"/abc/def/ghfj.doc\";\n\nString result[] = toSplit.split(\"/\");\n\nString returnValue = result[result.length - 1]; //equals \"ghfj.doc\"\n</code></pre>\n", "title": "Java: Getting a substring from a string starting after a particular character", "tags": ["java", "string", "substring"], "link": "http://stackoverflow.com/questions/14316487/java-getting-a-substring-from-a-string-starting-after-a-particular-character/37150182#37150182", "question_id": 14316487, "answer_id": 37150182}, {"body": "<p>You can use Apache commons:</p>\n\n<p>For substring after last occurrence use this method:\n<a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#substringAfterLast(java.lang.String,%20java.lang.String)\" rel=\"nofollow\">https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#substringAfterLast(java.lang.String,%20java.lang.String)</a></p>\n\n<p>And for substring after first occurrence equivalent method is:\n<a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#substringAfter(java.lang.String,%20java.lang.String)\" rel=\"nofollow\">https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#substringAfter(java.lang.String,%20java.lang.String)</a></p>\n", "title": "Java: Getting a substring from a string starting after a particular character", "tags": ["java", "string", "substring"], "link": "http://stackoverflow.com/questions/14316487/java-getting-a-substring-from-a-string-starting-after-a-particular-character/38148477#38148477", "question_id": 14316487, "answer_id": 38148477}, {"body": "<p>This can also get the filename</p>\n\n<pre><code>import java.nio.file.Paths;\nimport java.nio.file.Path;\nPath path = Paths.get(\"/abc/def/ghfj.doc\");\nSystem.out.println(path.getFileName().toString());\n</code></pre>\n\n<p>Will print <code>ghfj.doc</code></p>\n", "title": "Java: Getting a substring from a string starting after a particular character", "tags": ["java", "string", "substring"], "link": "http://stackoverflow.com/questions/14316487/java-getting-a-substring-from-a-string-starting-after-a-particular-character/39152731#39152731", "question_id": 14316487, "answer_id": 39152731}], "creation_date": 1358158451, "score": 63, "link": "http://stackoverflow.com/questions/14316487/java-getting-a-substring-from-a-string-starting-after-a-particular-character", "question_id": 14316487}, {"body": "<p>I am trying to build a HashMap which will have integer as keys and objects as values.</p>\n\n<p>My syntax is:</p>\n\n<pre><code>HashMap&lt;int, myObject&gt; myMap = new HashMap&lt;int, myObject&gt;();\n</code></pre>\n\n<p>However, the error returned is - Syntax error on token \"int\", Dimensions expected after this token - I don't understand why I should add a dimension (ie: making the int into an array) since I only need to store a digit as key.</p>\n\n<p>What could I do?</p>\n\n<p>Thanks in advance! :)</p>\n", "tags": ["java", "hashmap"], "title": "HashMap and int as key", "answers": [{"body": "<p>Use <code>Integer</code> instead.</p>\n\n<pre><code>HashMap&lt;Integer, MyObject&gt; myMap = new HashMap&lt;Integer, MyObject&gt;();\n</code></pre>\n\n<p>Java will automatically autobox your <code>int</code> primitive values to <code>Integer</code> objects.</p>\n\n<p>Read more about <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/language/autoboxing.html\">autoboxing</a> from Oracle Java documentations.</p>\n", "title": "HashMap and int as key", "tags": ["java", "hashmap"], "link": "http://stackoverflow.com/questions/16148575/hashmap-and-int-as-key/16148593#16148593", "question_id": 16148575, "answer_id": 16148593}, {"body": "<p>use int as Object not as primitive type</p>\n\n<pre><code>HashMap&lt;Integer, myObject&gt; myMap = new HashMap&lt;Integer, myObject&gt;();\n</code></pre>\n", "title": "HashMap and int as key", "tags": ["java", "hashmap"], "link": "http://stackoverflow.com/questions/16148575/hashmap-and-int-as-key/16148619#16148619", "question_id": 16148575, "answer_id": 16148619}, {"body": "<p>Please use \n<code>HashMap&lt;Integer, myObject&gt; myMap = new HashMap&lt;Integer, myObject&gt;();</code></p>\n", "title": "HashMap and int as key", "tags": ["java", "hashmap"], "link": "http://stackoverflow.com/questions/16148575/hashmap-and-int-as-key/16148647#16148647", "question_id": 16148575, "answer_id": 16148647}, {"body": "<p>You can't use a primitive because HashMap use object internally for the key. So you can only use an object that inherits from Object (that is any object).</p>\n\n<p>That is the function put() in HashMap and as you can see it uses Object for K:</p>\n\n<pre><code>public V put(K key, V value) {\n    if (key == null)\n        return putForNullKey(value);\n    int hash = hash(key);\n    int i = indexFor(hash, table.length);\n    for (Entry&lt;K,V&gt; e = table[i]; e != null; e = e.next) {\n        Object k;\n        if (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) {\n            V oldValue = e.value;\n            e.value = value;\n            e.recordAccess(this);\n            return oldValue;\n        }\n    }\n\n    modCount++;\n    addEntry(hash, key, value, i);\n    return null;\n}\n</code></pre>\n\n<p>The expression \"k = e.key\" should make it clear.</p>\n\n<p>I suggest to use a wrapper like Integer and autoboxing.</p>\n", "title": "HashMap and int as key", "tags": ["java", "hashmap"], "link": "http://stackoverflow.com/questions/16148575/hashmap-and-int-as-key/16149127#16149127", "question_id": 16148575, "answer_id": 16149127}, {"body": "<p>HashMap does not allow primitive data types as arguments. It can only accept objects so </p>\n\n<pre><code>HashMap&lt;int, myObject&gt; myMap = new HashMap&lt;int, myObject&gt;();\n</code></pre>\n\n<p>will not work.</p>\n\n<p>You have to change the declaration to </p>\n\n<pre><code>HashMap&lt;Integer, myObject&gt; myMap = new HashMap&lt;Integer, myObject&gt;();\n</code></pre>\n\n<p>so even when you do the following</p>\n\n<pre><code>myMap.put(2,myObject);\n</code></pre>\n\n<p>The primitive data type is autoboxed to an Integer object. </p>\n\n<pre><code>8 (int) === boxing ===&gt; 8 (Integer)\n</code></pre>\n\n<p>You can read more on autoboxing here <a href=\"http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html\" rel=\"nofollow\">http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html</a></p>\n", "title": "HashMap and int as key", "tags": ["java", "hashmap"], "link": "http://stackoverflow.com/questions/16148575/hashmap-and-int-as-key/16149160#16149160", "question_id": 16148575, "answer_id": 16149160}, {"body": "<p>If you code in Android, there is <a href=\"http://developer.android.com/reference/android/util/SparseArray.html\" rel=\"nofollow\">SparseArray</a>, mapping integer to object.</p>\n", "title": "HashMap and int as key", "tags": ["java", "hashmap"], "link": "http://stackoverflow.com/questions/16148575/hashmap-and-int-as-key/18481387#18481387", "question_id": 16148575, "answer_id": 18481387}, {"body": "<p>For everybody who codes Java for Android devices and ends up here: use SparseArray for better performance</p>\n\n<pre><code>private final SparseArray&lt;myObject&gt; myMap = new SparseArray&lt;myObject&gt;();\n</code></pre>\n\n<p>with this you can use int instead of Integer like</p>\n\n<pre><code>int newPos = 3;\n\nmyMap.put(newPos, newObject);\nmyMap.get(newPos);\n</code></pre>\n", "title": "HashMap and int as key", "tags": ["java", "hashmap"], "link": "http://stackoverflow.com/questions/16148575/hashmap-and-int-as-key/20454885#20454885", "question_id": 16148575, "answer_id": 20454885}, {"body": "<p>You may try to use Trove <a href=\"http://trove.starlight-systems.com/\" rel=\"nofollow\">http://trove.starlight-systems.com/</a><br>\nTIntObjectHashMap is probably what you are looking for.</p>\n", "title": "HashMap and int as key", "tags": ["java", "hashmap"], "link": "http://stackoverflow.com/questions/16148575/hashmap-and-int-as-key/20654816#20654816", "question_id": 16148575, "answer_id": 20654816}, {"body": "<p>The main reason with <strong><em>HashMap</em></strong> not allowing primitive as keys is that HashMap is designed in such a way that for comparing the keys, it makes use of <strong><em>equals()</em></strong> method, and a method can be called only on an object not on a primitive.</p>\n\n<p>Thus when int is autoboxed to Integer, Hashmap can call <strong><em>equals()</em></strong> method on Integer object.</p>\n\n<p>That is why, you should use Integer instead of int. I mean hashmap throws an error while putting int as a key (Don't know the meaning of the error that is thrown)</p>\n\n<p>And if you think that, you can make Map performance faster by making a primitive as a key, there is a library called <strong><em>FastUtil</em></strong> which contains a Map implementation with int type as a key.</p>\n\n<p>Because of this, it is much faster than <strong><em>Hashmap</em></strong></p>\n", "title": "HashMap and int as key", "tags": ["java", "hashmap"], "link": "http://stackoverflow.com/questions/16148575/hashmap-and-int-as-key/32866218#32866218", "question_id": 16148575, "answer_id": 32866218}], "creation_date": 1366637992, "score": 63, "link": "http://stackoverflow.com/questions/16148575/hashmap-and-int-as-key", "question_id": 16148575}], "quota_max": 300, "page_size": 100, "quota_remaining": 100, "page": 1}