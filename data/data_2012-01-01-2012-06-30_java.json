{"has_more": true, "items": [{"body": "<p>Here is a piece of C++ code that seems very peculiar. For some strange reason, sorting the data miraculously makes the code almost six times faster.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;algorithm&gt;\n#include &lt;ctime&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    // Generate data\n    const unsigned arraySize = 32768;\n    int data[arraySize];\n\n    for (unsigned c = 0; c &lt; arraySize; ++c)\n        data[c] = std::rand() % 256;\n\n    // !!! With this, the next loop runs faster\n    std::sort(data, data + arraySize);\n\n    // Test\n    clock_t start = clock();\n    long long sum = 0;\n\n    for (unsigned i = 0; i &lt; 100000; ++i)\n    {\n        // Primary loop\n        for (unsigned c = 0; c &lt; arraySize; ++c)\n        {\n            if (data[c] &gt;= 128)\n                sum += data[c];\n        }\n    }\n\n    double elapsedTime = static_cast&lt;double&gt;(clock() - start) / CLOCKS_PER_SEC;\n\n    std::cout &lt;&lt; elapsedTime &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"sum = \" &lt;&lt; sum &lt;&lt; std::endl;\n}\n</code></pre>\n\n<ul>\n<li>Without <code>std::sort(data, data + arraySize);</code>, the code runs in 11.54 seconds.</li>\n<li>With the sorted data, the code runs in 1.93 seconds.</li>\n</ul>\n\n<p>Initially, I thought this might be just a language or compiler anomaly. So I tried it in Java.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Arrays;\nimport java.util.Random;\n\npublic class Main\n{\n    public static void main(String[] args)\n    {\n        // Generate data\n        int arraySize = 32768;\n        int data[] = new int[arraySize];\n\n        Random rnd = new Random(0);\n        for (int c = 0; c &lt; arraySize; ++c)\n            data[c] = rnd.nextInt() % 256;\n\n        // !!! With this, the next loop runs faster\n        Arrays.sort(data);\n\n        // Test\n        long start = System.nanoTime();\n        long sum = 0;\n\n        for (int i = 0; i &lt; 100000; ++i)\n        {\n            // Primary loop\n            for (int c = 0; c &lt; arraySize; ++c)\n            {\n                if (data[c] &gt;= 128)\n                    sum += data[c];\n            }\n        }\n\n        System.out.println((System.nanoTime() - start) / 1000000000.0);\n        System.out.println(\"sum = \" + sum);\n    }\n}\n</code></pre>\n\n<p>With a somewhat similar but less extreme result.</p>\n\n<hr>\n\n<p>My first thought was that sorting brings the data into the cache, but then I thought how silly that is because the array was just generated.</p>\n\n<ul>\n<li>What is going on?</li>\n<li>Why is a sorted array faster to process than an unsorted array?</li>\n<li>The code is summing up some independent terms, and the order should not matter.</li>\n</ul>\n", "tags": ["java", "c++", "performance", "optimization", "branch-prediction"], "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_count": 13, "creation_date": 1340805096, "score": 15656, "link": "http://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array", "answers": [{"body": "<p><strong>Branch prediction.</strong></p>\n\n<p>With a sorted array, the condition <code>data[c] &gt;= 128</code> is first <code>false</code> for a streak of values, then becomes <code>true</code> for all later values. That's easy to predict. With an unsorted array, you pay for the branching cost.</p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 11227877, "link": "http://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array/11227877#11227877", "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p><strong>You are a victim of <a href=\"//en.wikipedia.org/wiki/Branch_predictor\">branch prediction</a> fail.</strong></p>\n\n<hr>\n\n<h2>What is Branch Prediction?</h2>\n\n<p>Consider a railroad junction:</p>\n\n<p><a href=\"//commons.wikimedia.org/wiki/File:Entroncamento_do_Transpraia.JPG\"><img src=\"//i.stack.imgur.com/muxnt.jpg\" alt=\"\"></a>\n<sub><a href=\"//commons.wikimedia.org/wiki/File:Entroncamento_do_Transpraia.JPG\">Image</a> by Mecanismo, via Wikimedia Commons. Used under the <a href=\"//creativecommons.org/licenses/by-sa/3.0/deed.en\">CC-By-SA 3.0</a> license.</sub></p>\n\n<p>Now for the sake of argument, suppose this is back in the 1800s - before long distance or radio communication.</p>\n\n<p>You are the operator of a junction and you hear a train coming. You have no idea which way it is supposed to go. You stop the train to ask the driver which direction they want. And then you set the switch appropriately.</p>\n\n<p><em>Trains are heavy and have a lot of inertia. So they take forever to start up and slow down.</em></p>\n\n<p>Is there a better way? You guess which direction the train will go!</p>\n\n<ul>\n<li>If you guessed right, it continues on.</li>\n<li>If you guessed wrong, the captain will stop, back up, and yell at you to flip the switch. Then it can restart down the other path.</li>\n</ul>\n\n<p><strong>If you guess right every time</strong>, the train will never have to stop.<br>\n<strong>If you guess wrong too often</strong>, the train will spend a lot of time stopping, backing up, and restarting.</p>\n\n<hr>\n\n<p><strong>Consider an if-statement:</strong> At the processor level, it is a branch instruction:</p>\n\n<p><img src=\"//i.stack.imgur.com/pyfwC.png\" alt=\"enter image description here\"></p>\n\n<p>You are a processor and you see a branch. You have no idea which way it will go. What do you do? You halt execution and wait until the previous instructions are complete. Then you continue down the correct path.</p>\n\n<p><em>Modern processors are complicated and have long pipelines. So they take forever to \"warm up\" and \"slow down\".</em></p>\n\n<p>Is there a better way? You guess which direction the branch will go!</p>\n\n<ul>\n<li>If you guessed right, you continue executing.</li>\n<li>If you guessed wrong, you need to flush the pipeline and roll back to the branch. Then you can restart down the other path.</li>\n</ul>\n\n<p><strong>If you guess right every time</strong>, the execution will never have to stop.<br>\n<strong>If you guess wrong too often</strong>, you spend a lot of time stalling, rolling back, and restarting.</p>\n\n<hr>\n\n<p>This is branch prediction. I admit it's not the best analogy since the train could just signal the direction with a flag. But in computers, the processor doesn't know which direction a branch will go until the last moment.</p>\n\n<p>So how would you strategically guess to minimize the number of times that the train must back up and go down the other path? You look at the past history! If the train goes left 99% of the time, then you guess left. If it alternates, then you alternate your guesses. If it goes one way every 3 times, you guess the same...</p>\n\n<p><strong><em>In other words, you try to identify a pattern and follow it.</em></strong> This is more or less how branch predictors work.</p>\n\n<p>Most applications have well-behaved branches. So modern branch predictors will typically achieve >90% hit rates. But when faced with unpredictable branches with no recognizable patterns, branch predictors are virtually useless.</p>\n\n<p>Further reading: <a href=\"//en.wikipedia.org/wiki/Branch_predictor\">\"Branch predictor\" article on Wikipedia</a>.</p>\n\n<hr>\n\n<h2>As hinted from above, the culprit is this if-statement:</h2>\n\n<pre><code>if (data[c] &gt;= 128)\n    sum += data[c];\n</code></pre>\n\n<p>Notice that the data is evenly distributed between 0 and 255. \nWhen the data is sorted, roughly the first half of the iterations will not enter the if-statement. After that, they will all enter the if-statement.</p>\n\n<p>This is very friendly to the branch predictor since the branch consecutively goes the same direction many times.\nEven a simple saturating counter will correctly predict the branch except for the few iterations after it switches direction.</p>\n\n<p><strong>Quick visualization:</strong></p>\n\n<pre><code>T = branch taken\nN = branch not taken\n\ndata[] = 0, 1, 2, 3, 4, ... 126, 127, 128, 129, 130, ... 250, 251, 252, ...\nbranch = N  N  N  N  N  ...   N    N    T    T    T  ...   T    T    T  ...\n\n       = NNNNNNNNNNNN ... NNNNNNNTTTTTTTTT ... TTTTTTTTTT  (easy to predict)\n</code></pre>\n\n<p>However, when the data is completely random, the branch predictor is rendered useless because it can't predict random data.\nThus there will probably be around 50% misprediction. (no better than random guessing)</p>\n\n<pre><code>data[] = 226, 185, 125, 158, 198, 144, 217, 79, 202, 118,  14, 150, 177, 182, 133, ...\nbranch =   T,   T,   N,   T,   T,   T,   T,  N,   T,   N,   N,   T,   T,   T,   N  ...\n\n       = TTNTTTTNTNNTTTN ...   (completely random - hard to predict)\n</code></pre>\n\n<hr>\n\n<p><strong>So what can be done?</strong></p>\n\n<p>If the compiler isn't able to optimize the branch into a conditional move, you can try some hacks if you are willing to sacrifice readability for performance.</p>\n\n<p>Replace:</p>\n\n<pre><code>if (data[c] &gt;= 128)\n    sum += data[c];\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>int t = (data[c] - 128) &gt;&gt; 31;\nsum += ~t &amp; data[c];\n</code></pre>\n\n<p>This eliminates the branch and replaces it with some bitwise operations.</p>\n\n<p><sub>(Note that this hack is not strictly equivalent to the original if-statement. But in this case, it's valid for all the input values of <code>data[]</code>.)</sub></p>\n\n<p><strong>Benchmarks: Core i7 920 @ 3.5 GHz</strong></p>\n\n<p>C++ - Visual Studio 2010 - x64 Release</p>\n\n<pre><code>//  Branch - Random\nseconds = 11.777\n\n//  Branch - Sorted\nseconds = 2.352\n\n//  Branchless - Random\nseconds = 2.564\n\n//  Branchless - Sorted\nseconds = 2.587\n</code></pre>\n\n<p>Java - Netbeans 7.1.1 JDK 7 - x64</p>\n\n<pre><code>//  Branch - Random\nseconds = 10.93293813\n\n//  Branch - Sorted\nseconds = 5.643797077\n\n//  Branchless - Random\nseconds = 3.113581453\n\n//  Branchless - Sorted\nseconds = 3.186068823\n</code></pre>\n\n<p>Observations:</p>\n\n<ul>\n<li><strong>With the Branch:</strong> There is a huge difference between the sorted and unsorted data.</li>\n<li><strong>With the Hack:</strong> There is no difference between sorted and unsorted data.</li>\n<li>In the C++ case, the hack is actually a tad slower than with the branch when the data is sorted.</li>\n</ul>\n\n<p>A general rule of thumb is to avoid data-dependent branching in critical loops. (such as in this example)</p>\n\n<hr>\n\n<p><strong>Update :</strong></p>\n\n<ul>\n<li><p>GCC 4.6.1 with <code>-O3</code> or <code>-ftree-vectorize</code> on x64 is able to generate a conditional move. So there is no difference between the sorted and unsorted data - both are fast.</p></li>\n<li><p>VC++ 2010 is unable to generate conditional moves for this branch even under <code>/Ox</code>.</p></li>\n<li><p>Intel Compiler 11 does something miraculous. It <a href=\"//en.wikipedia.org/wiki/Loop_interchange\">interchanges the two loops</a>, thereby hoisting the unpredictable branch to the outer loop. So not only is it immune the mispredictions, it is also twice as fast as whatever VC++ and GCC can generate! In other words, ICC took advantage of the test-loop to defeat the benchmark...</p></li>\n<li><p>If you give the Intel Compiler the branchless code, it just out-right vectorizes it... and is just as fast as with the branch (with the loop interchange).</p></li>\n</ul>\n\n<p>This goes to show that even mature modern compilers can vary wildly in their ability to optimize code...</p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 11227902, "link": "http://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array/11227902#11227902", "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>The reason why the performance improves drastically when the data is sorted is that the branch prediction penalty is removed, as explained beautifully in <a href=\"http://stackoverflow.com/users/922184/mysticial\">Mysticial</a>'s answer.</p>\n\n<p>Now, if we look at the code</p>\n\n<pre><code>if (data[c] &gt;= 128)\n    sum += data[c];\n</code></pre>\n\n<p>we can find that the meaning of this particular <code>if... else...</code> branch is to add something when a condition is satisfied. This type of branch can be easily transformed into a <strong>conditional move</strong> statement, which would be compiled into a conditional move instruction: <code>cmovl</code>, in an <code>x86</code> system. The branch and thus the potential branch prediction penalty is removed.</p>\n\n<p>In <code>C</code>, thus <code>C++</code>, the statment, which would compile directly (without any optimization) into the conditional move instruction in <code>x86</code>, is the ternary operator <code>... ? ... : ...</code>. So we rewrite the above statement into an equivalent one:</p>\n\n<pre><code>sum += data[c] &gt;=128 ? data[c] : 0;\n</code></pre>\n\n<p>While maintaining readability, we can check the speedup factor.</p>\n\n<p>On an <code>Intel [Core i7][2]-2600K @ 3.4&amp;nbsp;GHz</code> and <code>Visual Studio 2010</code> Release Mode, the benchmark is (format copied from Mysticial):</p>\n\n<p><strong>x86</strong></p>\n\n<pre><code>//  Branch - Random\nseconds = 8.885\n\n//  Branch - Sorted\nseconds = 1.528\n\n//  Branchless - Random\nseconds = 3.716\n\n//  Branchless - Sorted\nseconds = 3.71\n</code></pre>\n\n<p><strong>x64</strong></p>\n\n<pre><code>//  Branch - Random\nseconds = 11.302\n\n//  Branch - Sorted\n seconds = 1.830\n\n//  Branchless - Random\nseconds = 2.736\n\n//  Branchless - Sorted\nseconds = 2.737\n</code></pre>\n\n<p>The result is robust in multiple tests. We get great speedup when the branch result is unpredictable, but we suffer a little bit when it is predictable. In fact, when using a conditional move, the performance is the same regardless of the data pattern.</p>\n\n<p>Now let's look more closely by investigating at the <code>x86</code> assembly they generate. For simplicity, we use two functions <code>max1</code> and <code>max2</code>.</p>\n\n<p><code>max1</code> uses the conditional branch <code>if... else ...</code>:</p>\n\n<pre><code>int max1(int a, int b) {\n    if (a &gt; b)\n        return a;\n    else\n        return b;\n}\n</code></pre>\n\n<p><code>max2</code> uses the ternary operator <code>... ? ... : ...</code>:</p>\n\n<pre><code>int max2(int a, int b) {\n    return a &gt; b ? a : b;\n}\n</code></pre>\n\n<p>On a x86-64 machine, <code>GCC -S</code> generates the assembly below.</p>\n\n<pre><code>:max1\n    movl    %edi, -4(%rbp)\n    movl    %esi, -8(%rbp)\n    movl    -4(%rbp), %eax\n    cmpl    -8(%rbp), %eax\n    jle     .L2\n    movl    -4(%rbp), %eax\n    movl    %eax, -12(%rbp)\n    jmp     .L4\n.L2:\n    movl    -8(%rbp), %eax\n    movl    %eax, -12(%rbp)\n.L4:\n    movl    -12(%rbp), %eax\n    leave\n    ret\n\n:max2\n    movl    %edi, -4(%rbp)\n    movl    %esi, -8(%rbp)\n    movl    -4(%rbp), %eax\n    cmpl    %eax, -8(%rbp)\n    cmovge  -8(%rbp), %eax\n    leave\n    ret\n</code></pre>\n\n<p><code>max2</code> uses much less code due to the usage of instruction <code>cmovge</code>. But the real gain is that <code>max2</code> does not involve branch jumps, <code>jmp</code>, which would have a significant performance penalty if the predicted result is not right.</p>\n\n<p>So why can a conditional move perform better?</p>\n\n<p>In a typical <code>x86</code> processor, the execution of an instruction is divided to several stages. Roughly, we have different hardware to deal with different stages. So we do not have to wait for one instruction to finish to start a new one. This is called <strong><a href=\"http://en.wikipedia.org/wiki/Pipeline_%28computing%29\">pipelining</a></strong>.</p>\n\n<p>In a branch case, the following instruction is determined by the preceding one, so we can not do pipelining. We have to either wait or predict.</p>\n\n<p>In a conditional move case, the execution conditional move instruction is divided into several stages, but the earlier stages like <code>Fetch</code>, <code>Decode</code>, does not depend on the result of previous instruction, only latter stages need the result. So we wait a fraction of one instruction's execution time. This is why the conditional move version is slower than the branch when prediction is easy.</p>\n\n<p>The book <em><a href=\"http://rads.stackoverflow.com/amzn/click/0136108040\">Computer Systems: A Programmer's Perspective, second edition</a></em> explains this in detail. You can check Section 3.6.6 for <em>Conditional Move Instructions</em>, entire Chapter 4 for <em>Processor Architecture</em>, and Section 5.11.2 for a special treatment for <em>Branch Prediction and Misprediction Penalties</em>.</p>\n\n<p>Sometimes, some modern compilers can optimize our code to assembly with better performance, sometimes some compilers can't (the code in question is using Visual Studio's native compiler). Knowing the performance difference between branch and conditional move when unpredictable can help us write code with better performance when the scenario gets so complex that the compiler can not optimize them automatically.</p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 11237235, "link": "http://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array/11237235#11237235", "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>If you are curious about even more optimizations that can be done to this code, consider this... Starting with the original loop:</p>\n\n<pre><code>for (unsigned i = 0; i &lt; 100000; ++i)\n{\n    for (unsigned j = 0; j &lt; arraySize; ++j)\n    {\n        if (data[j] &gt;= 128)\n            sum += data[j];\n    }\n}\n</code></pre>\n\n<p>With loop interchange, we can safely change this loop to:</p>\n\n<pre><code>for (unsigned j = 0; j &lt; arraySize; ++j)\n{\n    for (unsigned i = 0; i &lt; 100000; ++i)\n    {\n        if (data[j] &gt;= 128)\n            sum += data[j];\n    }\n}\n</code></pre>\n\n<p>Then, you can see that the \"if\" conditional is constant throughout the execution of the \"i\" loop, so you can hoist the \"if\" out:</p>\n\n<pre><code>for (unsigned j = 0; j &lt; arraySize; ++j)\n{\n    if (data[j] &gt;= 128)\n    {\n        for (unsigned i = 0; i &lt; 100000; ++i)\n        {\n            sum += data[j];\n        }\n    }\n}\n</code></pre>\n\n<p>Then, you see that the inner loop can be collapsed into one single expression, assuming the floating point model allows it (/fp:fast is thrown, for example)</p>\n\n<pre><code>for (unsigned j = 0; j &lt; arraySize; ++j)\n{\n    if (data[j] &gt;= 128)\n    {\n        sum += data[j] * 100000;\n    }\n}\n</code></pre>\n\n<p>That one is 100,000x faster than before (-8</p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 11303693, "link": "http://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array/11303693#11303693", "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>No doubt some of us would be interested in ways of identifying code that is problematic for the CPU's branch-predictor. The Valgrind tool <code>cachegrind</code> has a branch-predictor simulator, enabled by using the <code>--branch-sim=yes</code> flag. Running it over the examples in this question, with the number of outer loops reduced to 10000 and compiled with <code>g++</code>, gives these results:</p>\n\n<p><strong>Sorted:</strong></p>\n\n<pre><code>==32551== Branches:        656,645,130  (  656,609,208 cond +    35,922 ind)\n==32551== Mispredicts:         169,556  (      169,095 cond +       461 ind)\n==32551== Mispred rate:            0.0% (          0.0%     +       1.2%   )\n</code></pre>\n\n<p><strong>Unsorted:</strong></p>\n\n<pre><code>==32555== Branches:        655,996,082  (  655,960,160 cond +  35,922 ind)\n==32555== Mispredicts:     164,073,152  (  164,072,692 cond +     460 ind)\n==32555== Mispred rate:           25.0% (         25.0%     +     1.2%   )\n</code></pre>\n\n<p>Drilling down into the line-by-line output produced by <code>cg_annotate</code> we see for the loop in question:</p>\n\n<p><strong>Sorted:</strong></p>\n\n<pre><code>          Bc    Bcm Bi Bim\n      10,001      4  0   0      for (unsigned i = 0; i &lt; 10000; ++i)\n           .      .  .   .      {\n           .      .  .   .          // primary loop\n 327,690,000 10,016  0   0          for (unsigned c = 0; c &lt; arraySize; ++c)\n           .      .  .   .          {\n 327,680,000 10,006  0   0              if (data[c] &gt;= 128)\n           0      0  0   0                  sum += data[c];\n           .      .  .   .          }\n           .      .  .   .      }\n</code></pre>\n\n<p><strong>Unsorted:</strong></p>\n\n<pre><code>          Bc         Bcm Bi Bim\n      10,001           4  0   0      for (unsigned i = 0; i &lt; 10000; ++i)\n           .           .  .   .      {\n           .           .  .   .          // primary loop\n 327,690,000      10,038  0   0          for (unsigned c = 0; c &lt; arraySize; ++c)\n           .           .  .   .          {\n 327,680,000 164,050,007  0   0              if (data[c] &gt;= 128)\n           0           0  0   0                  sum += data[c];\n           .           .  .   .          }\n           .           .  .   .      }\n</code></pre>\n\n<p>This lets you easily identify the problematic line - in the unsorted version the <code>if (data[c] &gt;= 128)</code> line is causing 164,050,007 mispredicted conditional branches (<code>Bcm</code>) under cachegrind's branch-predictor model, whereas it's only causing 10,006 in the sorted version.</p>\n\n<hr>\n\n<p>Alternatively, on Linux you can use the performance counters subsystem to accomplish the same task, but with native performance using CPU counters.</p>\n\n<pre><code>perf stat ./sumtest_sorted\n</code></pre>\n\n<p><strong>Sorted:</strong></p>\n\n<pre><code> Performance counter stats for './sumtest_sorted':\n\n  11808.095776 task-clock                #    0.998 CPUs utilized          \n         1,062 context-switches          #    0.090 K/sec                  \n            14 CPU-migrations            #    0.001 K/sec                  \n           337 page-faults               #    0.029 K/sec                  \n26,487,882,764 cycles                    #    2.243 GHz                    \n41,025,654,322 instructions              #    1.55  insns per cycle        \n 6,558,871,379 branches                  #  555.455 M/sec                  \n       567,204 branch-misses             #    0.01% of all branches        \n\n  11.827228330 seconds time elapsed\n</code></pre>\n\n<p><strong>Unsorted:</strong></p>\n\n<pre><code> Performance counter stats for './sumtest_unsorted':\n\n  28877.954344 task-clock                #    0.998 CPUs utilized          \n         2,584 context-switches          #    0.089 K/sec                  \n            18 CPU-migrations            #    0.001 K/sec                  \n           335 page-faults               #    0.012 K/sec                  \n65,076,127,595 cycles                    #    2.253 GHz                    \n41,032,528,741 instructions              #    0.63  insns per cycle        \n 6,560,579,013 branches                  #  227.183 M/sec                  \n 1,646,394,749 branch-misses             #   25.10% of all branches        \n\n  28.935500947 seconds time elapsed\n</code></pre>\n\n<p>It can also do source code annotation with dissassembly.</p>\n\n<pre><code>perf record -e branch-misses ./sumtest_unsorted\nperf annotate -d sumtest_unsorted\n</code></pre>\n\n\n\n<pre><code> Percent |      Source code &amp; Disassembly of sumtest_unsorted\n------------------------------------------------\n...\n         :                      sum += data[c];\n    0.00 :        400a1a:       mov    -0x14(%rbp),%eax\n   39.97 :        400a1d:       mov    %eax,%eax\n    5.31 :        400a1f:       mov    -0x20040(%rbp,%rax,4),%eax\n    4.60 :        400a26:       cltq   \n    0.00 :        400a28:       add    %rax,-0x30(%rbp)\n...\n</code></pre>\n\n<p>See <a href=\"https://perf.wiki.kernel.org/index.php/Tutorial\">the performance tutorial</a> for more details.</p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 12853037, "link": "http://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array/12853037#12853037", "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>As data is distributed between 0 and 255 when array is sorted, around first half of the iterations will not enter the if-statement (if statement shared below).</p>\n\n<pre><code>if (data[c] &gt;= 128)\n    sum += data[c];\n</code></pre>\n\n<p>Question is what make the above statement not execute in certain case as in case of sorted data? Here comes the \"Branch predictor\" a branch predictor is a digital circuit that tries to guess which way a branch (e.g. an if-then-else structure) will go before this is known for sure. The purpose of the branch predictor is to improve the flow in the instruction pipeline. Branch predictors play a critical role in achieving high effective performance!</p>\n\n<p><strong>Lets do some bench marking to understand it better</strong></p>\n\n<p>The performance of an if-statement depends on whether its condition has a predictable pattern. If the condition is always true or always false, the branch prediction logic in the processor will pick up the pattern. On the other hand, if the pattern is unpredictable, the if-statement will be much more expensive.</p>\n\n<p>Let\u2019s measure the performance of this loop with different conditions:</p>\n\n<pre><code>for (int i = 0; i &lt; max; i++) if (condition) sum++;\n</code></pre>\n\n<p>Here are the timings of the loop with different True-False patterns:</p>\n\n<pre><code>Condition           Pattern              Time (ms)\n\n(i &amp; 0\u00d780000000) == 0   T repeated        322\n\n(i &amp; 0xffffffff) == 0   F repeated        276\n\n(i &amp; 1) == 0            TF alternating    760\n\n(i &amp; 3) == 0            TFFFTFFF\u2026         513\n\n(i &amp; 2) == 0            TTFFTTFF\u2026         1675\n\n(i &amp; 4) == 0            TTTTFFFFTTTTFFFF\u2026 1275\n\n(i &amp; 8) == 0            8T 8F 8T 8F \u2026     752\n\n(i &amp; 16) == 0           16T 16F 16T 16F \u2026 490\n</code></pre>\n\n<p>A \u201c<strong>bad</strong>\u201d true-false pattern can make an if-statement up to six times slower than a \u201c<strong>good</strong>\u201d pattern! Of course, which pattern is good and which is bad depends on the exact instructions generated by the compiler and on the specific processor.</p>\n\n<p>So there is no doubt about impact of branch prediction on performance!</p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 14889969, "link": "http://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array/14889969#14889969", "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>Just read up on the thread and I feel an answer is missing. A common way to eliminate branch prediction that I've found to work particularly good in managed languages is a table lookup instead of using a branch. (although I haven't tested it in this case)</p>\n\n<p>This approach works in general if:</p>\n\n<ol>\n<li>It's a small table and is likely to be cached in the processor</li>\n<li>You are running things in a quite tight loop and/or the processor can pre-load the data</li>\n</ol>\n\n<p><strong>Background and why</strong></p>\n\n<p>Pfew, so what the hell is that supposed to mean?</p>\n\n<p>From a processor perspective, your memory is slow. To compensate for the difference in speed, they build in a couple of caches in your processor (L1/L2 cache) that compensate for that. So imagine that you're doing your nice calculations and figure out that you need a piece of memory. The processor will get his 'load' operation and loads the piece of memory into cache - and then uses the cache to do the rest of the calculations. Because memory is relatively slow, this 'load' will slow down your program. </p>\n\n<p>Like branch prediction, this was optimized in the Pentium processors: the processor predicts that it needs to load a piece of data and attempts to load that into the cache before the operation actually hits the cache. As we've already seen, branch prediction sometimes goes horribly wrong -- in the worst case scenario you need to go back and actually wait for a memory load, which will take forever (<strong>in other words: failing branch prediction is bad, a memory load after a branch prediction fail is just horrible!</strong>).</p>\n\n<p>Fortunately for us, if the memory access pattern is predictable, the processor will load it in its fast cache and all is well.</p>\n\n<p>First thing we need to know is what is <em>small</em>? While smaller is generally better, a rule of thumb is to stick to lookup tables that are &lt;=4096 bytes in size. As an upper limit: if your lookup table is larger than 64K it's probably worth reconsidering.</p>\n\n<p><strong>Constructing a table</strong></p>\n\n<p>So we've figured out that we can create a small table. Next thing to do is get a lookup function in place. Lookup functions are usually small functions that use a couple of basic integer operations (and, or, xor, shift, add, remove and perhaps a multiply). What you want is to have your input translated by the lookup function to some kind of 'unique key' in your table, which then simply gives you the answer of all the work you wanted it to do.</p>\n\n<p>In this case: >=128 means we can keep the value, &lt;128 means we get rid of it. The easiest way to do that is by using an 'AND': if we keep it, we AND it with 7FFFFFFF ; if we want to get rid of it, we AND it with 0. Notice also that 128 is a power of 2 -- so we can go ahead and make a table of 32768/128 integers and fill it with one zero and a lot of 7FFFFFFFF's.</p>\n\n<p><strong>Managed languages</strong></p>\n\n<p>You might wonder why this works well in managed languages. After all, managed languages check the boundaries of the arrays with a branch to ensure you don't mess up...</p>\n\n<p>Well, not exactly... :-)</p>\n\n<p>There has been quite some work on eliminating this branch for managed languages. For example:</p>\n\n<pre><code>for (int i=0; i&lt;array.Length; ++i)\n   // use array[i]\n</code></pre>\n\n<p>in this case it's obvious to the compiler that the boundary condition will never hit. At least the Microsoft JIT compiler (but I expect Java does similar things) will notice this and remove the check all together. WOW - that means no branch. Similarly, it will deal with other obvious cases.</p>\n\n<p>If you run into trouble with lookups on managed languages - the key is to add a <code>&amp; 0x[something]FFF</code> to your lookup function to make the boundary check predictable - and watch it going faster.</p>\n\n<p><strong>The result for this case</strong></p>\n\n<pre><code>// generate data\nint arraySize = 32768;\nint[] data = new int[arraySize];\n\nRandom rnd = new Random(0);\nfor (int c = 0; c &lt; arraySize; ++c)\n    data[c] = rnd.Next(256);\n\n\n// Too keep the spirit of the code in-tact I'll make a separate lookup table\n// (I assume we cannot modify 'data' or the number of loops)\nint[] lookup = new int[256];\n\nfor (int c = 0; c &lt; 256; ++c)\n    lookup[c] = (c &gt;= 128) ? c : 0;\n\n// test\nDateTime startTime = System.DateTime.Now;\nlong sum = 0;\n\nfor (int i = 0; i &lt; 100000; ++i)\n{\n    // primary loop\n    for (int j = 0; j &lt; arraySize; ++j)\n    {\n        // here you basically want to use simple operations - so no \n        // random branches, but things like &amp;, |, *, -, +, etc are fine.\n        sum += lookup[data[j]];\n    }\n}\n\nDateTime endTime = System.DateTime.Now;\nConsole.WriteLine(endTime - startTime);\nConsole.WriteLine(\"sum = \" + sum);\n\nConsole.ReadLine();\n</code></pre>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 16184827, "link": "http://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array/16184827#16184827", "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>One way to avoid branch prediction errors is to build a lookup table, and index it using the data.  Stefan de Bruijn discussed that in his answer.</p>\n\n<p>But in this case, we know values are in the range [0, 255] and we only care about values >= 128.  That means we can easily extract a single bit that will tell us whether we want a value or not: by shifting the data to the right 7 bits, we are left with a 0 bit or a 1 bit, and we only want to add the value when we have a 1 bit.  Let's call this bit the \"decision bit\".</p>\n\n<p>By using the 0/1 value of the decision bit as an index into an array, we can make code that will be equally fast whether the data is sorted or not sorted.  Our code will always add a value, but when the decision bit is 0, we will add the value somewhere we don't care about.  Here's the code:</p>\n\n<pre><code>// Test\nclock_t start = clock();\nlong long a[] = {0, 0};\nlong long sum;\n\nfor (unsigned i = 0; i &lt; 100000; ++i)\n{\n    // Primary loop\n    for (unsigned c = 0; c &lt; arraySize; ++c)\n    {\n        int j = (data[c] &gt;&gt; 7);\n        a[j] += data[c];\n    }\n}\n\ndouble elapsedTime = static_cast&lt;double&gt;(clock() - start) / CLOCKS_PER_SEC;\nsum = a[1];\n</code></pre>\n\n<p>This code wastes half of the adds, but never has a branch prediction failure.  It's tremendously faster on random data than the version with an actual if statement.</p>\n\n<p>But in my testing, an explicit lookup table was slightly faster than this, probably because indexing into a lookup table was slightly faster than bit shifting.  This shows how my code sets up and uses the lookup table (unimaginatively called <code>lut</code> for \"LookUp Table\" in the code).  Here's the C++ code:</p>\n\n<pre><code>// declare and then fill in the lookup table\nint lut[256];\nfor (unsigned c = 0; c &lt; 256; ++c)\n    lut[c] = (c &gt;= 128) ? c : 0;\n\n// use the lookup table after it is built\nfor (unsigned i = 0; i &lt; 100000; ++i)\n{\n    // Primary loop\n    for (unsigned c = 0; c &lt; arraySize; ++c)\n    {\n        sum += lut[data[c]];\n    }\n}\n</code></pre>\n\n<p>In this case the lookup table was only 256 bytes, so it fit nicely in cache and all was fast.  This technique wouldn't work well if the data was 24-bit values and we only wanted half of them... the lookup table would be far too big to be practical.  On the other hand, we can combine the two techniques shown above: first shift the bits over, then index a lookup table.  For a 24-bit value that we only want the top half value, we could potentially shift the data right by 12 bits, and be left with a 12-bit value for a table index.  A 12-bit table index implies a table of 4096 values, which might be practical.</p>\n\n<p>EDIT: One thing I forgot to put in.</p>\n\n<p>The technique of indexing into an array, instead of using an <code>if</code> statement, can be used for deciding which pointer to use.  I saw a library that implemented binary trees, and instead of having two named pointers (<code>pLeft</code> and <code>pRight</code> or whatever) had a length-2 array of pointers, and used the \"decision bit\" technique to decide which one to follow.  For example, instead of:</p>\n\n<pre><code>if (x &lt; node-&gt;value)\n    node = node-&gt;pLeft;\nelse\n    node = node-&gt;pRight;\n</code></pre>\n\n<p>this library would do something like:</p>\n\n<pre><code>i = (x &lt; node-&gt;value);\nnode = node-&gt;link[i];\n</code></pre>\n\n<p>Here's a link to this code: <a href=\"http://www.eternallyconfuzzled.com/tuts/datastructures/jsw_tut_rbtree.aspx\">Red Black Trees</a>, <em>Eternally Confuzzled</em></p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 17782979, "link": "http://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array/17782979#17782979", "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>In the sorted case, you can do better than relying on successful branch prediction or any branchless comparison trick: completely remove the branch.</p>\n\n<p>Indeed, the array is partitioned in a contiguous zone with <code>data &lt; 128</code> and another with <code>data &gt;= 128</code>. So you should find the partition point with a dichotomic search (using <code>Lg(arraySize) = 15</code> comparisons), then do a straight accumulation from that point.</p>\n\n<p>Something like (unchecked)</p>\n\n<pre><code>int i= 0, j, k= arraySize;\nwhile (i &lt; k)\n{\n  j= (i + k) &gt;&gt; 1;\n  if (data[j] &gt;= 128)\n    k= j;\n  else\n    i= j;\n}\nsum= 0;\nfor (; i &lt; arraySize; i++)\n  sum+= data[i];\n</code></pre>\n\n<p>or, slightly more obfuscated</p>\n\n<pre><code>int i, k, j= (i + k) &gt;&gt; 1;\nfor (i= 0, k= arraySize; i &lt; k; (data[j] &gt;= 128 ? k : i)= j)\n  j= (i + k) &gt;&gt; 1;\nfor (sum= 0; i &lt; arraySize; i++)\n  sum+= data[i];\n</code></pre>\n\n<p>A yet faster approach, that gives an <strong>approximate</strong> solution for both sorted or unsorted is: <code>sum= 3137536;</code> (assuming a truly uniform distribution, 16384 samples with expected value 191.5) <strong>:-)</strong></p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 17828251, "link": "http://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array/17828251#17828251", "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>The above behavior is happening because of Branch prediction.</p>\n\n<p>To understand branch prediction one must first understand <strong>Instruction Pipeline</strong>:</p>\n\n<p>Any instruction is broken into sequence of steps so that different steps can be executed concurrently in parallel. This technique is known as instruction pipeline and this is used to increase throughput in modern processors. To understand this better please see the example <a href=\"https://en.wikipedia.org/wiki/Pipeline_(computing)#Concept_and_motivation\">https://en.wikipedia.org/wiki/Pipeline_(computing)#Concept_and_motivation</a></p>\n\n<p>Generally modern processors have quite long pipelines, but for ease let's consider these 4 steps only.</p>\n\n<ol>  \n  <li>IF -- Fetch the instruction from memory \n  <li>ID -- Decode the instruction\n  <li>EX -- Execute the instruction \n  <li>WB -- Write back to CPU register\n</ol>\n\n<p><strong><em>4-stage pipeline in general for 2 instructions.</em></strong>\n<img src=\"http://i.stack.imgur.com/PqBBR.png\" alt=\"4-stage pipeline in general\"></p>\n\n<p>Moving back to the above question let's consider the following instructions:</p>\n\n<pre><code>                        A) if (data[c] &gt;= 128)\n                                /\\\n                               /  \\\n                              /    \\\n                        true /      \\ false\n                            /        \\\n                           /          \\\n                          /            \\\n                         /              \\\n              B) sum += data[c];          C) for loop or print().\n</code></pre>\n\n<p>Without branch prediction the following would occur:</p>\n\n<p>To execute instruction B or instruction C the processor will have to wait till the instruction A doesn't reach till EX stage in the pipeline, as the decision to go to instruction B or instruction C depends on the result of instruction A. So the pipeline will look like this.</p>\n\n<p><strong><em>when if condition returns true:</em></strong>\n<img src=\"http://i.stack.imgur.com/0H4gP.png\" alt=\"enter image description here\"></p>\n\n<p><strong><em>When if condition returns false:</em></strong>\n<img src=\"http://i.stack.imgur.com/APpca.png\" alt=\"enter image description here\"></p>\n\n<p>As a result of waiting for the result of instruction A, the total CPU cycles spent in the above case (without branch prediction; for both true and false) is 7.</p>\n\n<p><strong>So what is branch prediction?</strong></p>\n\n<p>Branch predictor will tries to guess which way a branch (an if-then-else structure) will go before this is known for sure. It will not wait for the instruction A to reach the EX stage of the pipeline, but it will guess the decision and go onto that instruction (B or C in case of our example).</p>\n\n<p><strong><em>In case of a correct guess, the pipeline looks something like this:</em></strong>\n<img src=\"http://i.stack.imgur.com/ZYUbs.png\" alt=\"enter image description here\"></p>\n\n<p>If it is later detected that the guess was wrong then the partially executed instructions are discarded and the pipeline starts over with the correct branch, incurring a delay. \nThe time that is wasted in case of a branch misprediction is equal to the number of stages in the pipeline from the fetch stage to the execute stage. Modern microprocessors tend to have quite long pipelines so that the misprediction delay is between 10 and 20 clock cycles. The longer the pipeline the greater the need for a good branch predictor. (<a href=\"https://en.wikipedia.org/wiki/Branch_predictor\">https://en.wikipedia.org/wiki/Branch_predictor</a>)</p>\n\n<p>In the OP's code, the first time when the conditional, the branch predictor does not have any information to base up prediction, so first time it will randomly choose the next instruction. Later in the for loop it can base the prediction on the history. \nFor an array sorted in ascending order, there are three possibilities:</p>\n\n<ol>\n<li> All the elements are less than 128\n<li> All the elements are greater than 128\n<li> Some starting new elements are less than 128 and later it become greater than 128\n</ol>\n\n<p>Let us assume that the predictor will always assume the true branch on the first run.</p>\n\n<p>So in the first case it will always take the true branch since historically all its predictions are correct.\nIn the 2nd case, initially it will predict wrong, but after a few iterations it will predict correctly.\nIn the 3rd case it will initially predict correctly till the elements are less than 128. After which it will fail for some time and the correct itself when it see branch prediction failure in history. </p>\n\n<p>In all these cases the failure will be too less in number and as a result only few times it will need to discard the partially executed instructions and start over with the correct branch, resulting in less CPU cycles. </p>\n\n<p>But in case of random unsorted array, the prediction will need to discard the partially executed instructions and start over with the correct branch most of the time and result in more CPU cycles compared to the sorted array.</p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 31210295, "link": "http://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array/31210295#31210295", "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>In the same line (I think this was not highlighted by any answer) it's good to mention that sometimes (specially in software where the performance matters --like in the Linux kernel-- you can find some if statements like the following: </p>\n\n<pre><code>if (likely( everything_is_ok ))\n{\n    /* Do something */\n}\n</code></pre>\n\n<p>or similarly:</p>\n\n<pre><code>if (unlikely(very_improbable_condition))\n{\n    /* Do something */    \n}\n</code></pre>\n\n<p>Both likely() and unlikely() are in fact macros that are defined by using something like the GCC's __builtin_expect to help the compiler insert prediction code to favour the condition taking into account the information provided by the user. GCC supports other builtins that could change the behavior of the running program or emit low level instructions like clearing the cache, etc. The following documentation go through the available GCC's builtins:</p>\n\n<p><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html\">https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html</a></p>\n\n<p>Normally this kind of optimizations are mainly found in hard-real time applications or embedded systems where execution time matters and it's critical. For example, if you are checking for some error condition that only happens 1/10000000 times, then why not inform the compiler about this? .. this way, by default, the branch prediction would assume that the condition is false. </p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 32742980, "link": "http://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array/32742980#32742980", "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>Frequently used Boolean operations in C++ produce many branches in compiled program. If these branches are inside loops and are hard to predict they can slow down execution significantly. Boolean variables are stored as 8-bit integers with the value <code>0</code> for <code>false</code> and <code>1</code> for <code>true</code>.</p>\n\n<p>Boolean variables are overdetermined in the sense that all operators that have Boolean variables as input check if the inputs have any other value than <code>0</code> or <code>1</code>, but operators that have Booleans as output can produce no other value than <code>0</code> or <code>1</code>. This makes operations with Boolean variables as input less efficient than necessary.\nConsider example:</p>\n\n<pre><code>bool a, b, c, d;\nc = a &amp;&amp; b;\nd = a || b;\n</code></pre>\n\n<p>This is typically implemented by the compiler in the following way:</p>\n\n<pre><code>bool a, b, c, d;\nif (a != 0) {\n    if (b != 0) {\n        c = 1;\n    }\n    else {\n        goto CFALSE;\n    }\n}\nelse {\n    CFALSE:\n    c = 0;\n}\nif (a == 0) {\n    if (b == 0) {\n        d = 0;\n    }\n    else {\n        goto DTRUE;\n    }\n}\nelse {\n    DTRUE:\n    d = 1;\n}\n</code></pre>\n\n<p>This code is far from optimal. The branches may take a long time in case of mispredictions. The Boolean operations can be made much more efficient if it is known with certainty that the operands have no other values than <code>0</code> and <code>1</code>. The reason why the compiler does not make such an assumption is that the variables might have other values if they are uninitialized or come from unknown sources. The above code can be optimized if <code>a</code> and <code>b</code> have been initialized to valid values or if they come from operators that produce Boolean output. The optimized code looks like this:</p>\n\n<pre><code>char a = 0, b = 1, c, d;\nc = a &amp; b;\nd = a | b;\n</code></pre>\n\n<p><code>char</code> is used instead of <code>bool</code> in order to make it possible to use the bitwise operators (<code>&amp;</code> and <code>|</code>) instead of the Boolean operators (<code>&amp;&amp;</code> and <code>||</code>). The bitwise operators are single instructions that take only one clock cycle. The OR operator (<code>|</code>) works even if <code>a</code> and <code>b</code> have other values than <code>0</code> or <code>1</code>. The AND operator (<code>&amp;</code>) and the EXCLUSIVE OR operator (<code>^</code>) may give inconsistent results if the operands have other values than <code>0</code> and <code>1</code>.</p>\n\n<p><code>~</code> can not be used for NOT. Instead, you can make a Boolean NOT on a variable which is known to be <code>0</code> or <code>1</code> by XOR'ing it with <code>1</code>:</p>\n\n<pre><code>bool a, b;\nb = !a;\n</code></pre>\n\n<p>can be optimized to:</p>\n\n<pre><code>char a = 0, b;\nb = a ^ 1;\n</code></pre>\n\n<p><code>a &amp;&amp; b</code> cannot be replaced with <code>a &amp; b</code> if <code>b</code> is an expression that should not be evaluated if <code>a</code> is <code>false</code> ( <code>&amp;&amp;</code> will not evaluate <code>b</code>, <code>&amp;</code> will). Likewise, <code>a || b</code> can not be replaced with <code>a | b</code> if <code>b</code> is an expression that should not be evaluated if <code>a</code> is <code>true</code>.</p>\n\n<p>Using bitwise operators is more advantageous if the operands are variables than if the operands are comparisons:</p>\n\n<pre><code>bool a; double x, y, z;\na = x &gt; y &amp;&amp; z &lt; 5.0;\n</code></pre>\n\n<p>is optimal in most cases (unless you expect the <code>&amp;&amp;</code> expression to generate many branch mispredictions).</p>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 33048998, "link": "http://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array/33048998#33048998", "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}, {"body": "<p>An official answer would be from</p>\n\n<ol>\n<li><a href=\"https://software.intel.com/en-us/articles/avoiding-the-cost-of-branch-misprediction\">Intel</a></li>\n<li><a href=\"https://software.intel.com/en-us/articles/branch-and-loop-reorganization-to-prevent-mispredicts\">Intel</a></li>\n<li><a href=\"https://scholar.google.com/scholar?q=branch%20prediction%20computer%20architecture&amp;hl=da&amp;as_sdt=0&amp;as_vis=1&amp;oi=scholart\">Scientific papers</a></li>\n<li>Books: J.L. Hennessy, D.A. Patterson: Computer architecture: a quantitative approach</li>\n<li>Articles in scientific puplications: T.Y. Yeh, Y.N. Patt made a lot of these on branch predictions.</li>\n</ol>\n\n<p>You can also see from this lovely <a href=\"https://en.wikipedia.org/wiki/Branch_predictor#/media/File:Branch_prediction_2bit_saturating_counter-dia.svg\">diagram</a> why the branch predictor gets confused.</p>\n\n<p><a href=\"https://i.stack.imgur.com/pBMV2.png\"><img src=\"https://i.stack.imgur.com/pBMV2.png\" alt=\"2-bit state diagram\"></a></p>\n\n<p>Each element in the original code is a random value</p>\n\n<pre><code>data[c] = std::rand() % 256;\n</code></pre>\n\n<p>so the predictor will change sides as the <code>std::rand()</code> blow.</p>\n\n<p>On the other hand, once it's sorted, the predictor will first move into a state of strongly not taken and when the values change to the high value the predictor will in three runs through change all the way fron strongly not taken to strongly taken.</p>\n\n<hr>\n", "title": "Why is it faster to process a sorted array than an unsorted array?", "answer_id": 33070112, "link": "http://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array/33070112#33070112", "tags": ["java", "c++", "performance", "optimization", "branch-prediction"]}], "question_id": 11227809}, {"body": "<p>Until today I thought that for example:</p>\n\n<pre><code>i += j;\n</code></pre>\n\n<p>is just a shortcut for:</p>\n\n<pre><code>i = i + j;\n</code></pre>\n\n<p>But what if we try this:</p>\n\n<pre><code>int i = 5;\nlong j = 8;\n</code></pre>\n\n<p>Then <code>i = i + j;</code> will not compile but <code>i += j;</code> will compile fine.</p>\n\n<p>Does it mean that in fact <code>i += j;</code> is a shortcut for something like this\n<code>i = (type of i) (i + j)</code>?</p>\n", "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"], "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "answer_count": 10, "creation_date": 1325585432, "score": 2717, "link": "http://stackoverflow.com/questions/8710619/javas-compound-assignment-operators", "answers": [{"body": "<p>As always with these questions, the JLS holds the answer. In this case <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.26.2\">\u00a715.26.2 Compound Assignment Operators</a>. An extract:</p>\n\n<blockquote>\n  <p>A compound assignment expression of the form <code>E1&nbsp;op=&nbsp;E2</code> is equivalent to <code>E1&nbsp;=&nbsp;(T)((E1)&nbsp;op&nbsp;(E2))</code>, where <code>T</code> is the type of <code>E1</code>, except that <code>E1</code> is evaluated only once.</p>\n</blockquote>\n\n<p>An example cited from <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.26.2\">\u00a715.26.2</a></p>\n\n<blockquote>\n  <p>[...] the following code is correct:</p>\n\n<pre><code>short x = 3;\nx += 4.6;\n</code></pre>\n  \n  <p>and results in x having the value 7 because it is equivalent to:</p>\n\n<pre><code>short x = 3;\nx = (short)(x + 4.6);\n</code></pre>\n</blockquote>\n\n<p>In other words, your assumption is correct.</p>\n", "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "answer_id": 8710685, "link": "http://stackoverflow.com/questions/8710619/javas-compound-assignment-operators/8710685#8710685", "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"]}, {"body": "<p>you need to cast from <code>long</code> to <code>int</code> <code>explicitly</code> in case of <code>i = i + l</code>  then it will compile and give correct output. like </p>\n\n<pre><code>i = i + (int)l;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>i = (int)((long)i + l); // this is what happens in case of += , dont need (long) casting since upper casting is done implicitly.\n</code></pre>\n\n<p>but in case of <code>+=</code> it just works fine because the operator implicitly does the type casting from type of right variable to type of left variable so need not cast explicitly.</p>\n", "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "answer_id": 8710688, "link": "http://stackoverflow.com/questions/8710619/javas-compound-assignment-operators/8710688#8710688", "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"]}, {"body": "<p>Very good question. The <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2\">Java Language specification</a> confirms your suggestion.</p>\n\n<p>For example, the following code is correct:</p>\n\n<pre><code> short x = 3;\n x += 4.6;\n</code></pre>\n\n<p>and results in x having the value 7 because it is equivalent to:</p>\n\n<pre><code> short x = 3;\n x = (short)(x + 4.6);\n</code></pre>\n", "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "answer_id": 8710717, "link": "http://stackoverflow.com/questions/8710619/javas-compound-assignment-operators/8710717#8710717", "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"]}, {"body": "<p>Yes,</p>\n\n<p>basically when we write</p>\n\n<pre><code>i += l; \n</code></pre>\n\n<p>the compiler converts this to </p>\n\n<pre><code>i = (int)(i + l);\n</code></pre>\n\n<p>I just checked the <code>.class</code> file code.</p>\n\n<p>Really a good thing to know</p>\n", "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "answer_id": 8710746, "link": "http://stackoverflow.com/questions/8710619/javas-compound-assignment-operators/8710746#8710746", "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"]}, {"body": "<p>A good example of this casting is using *= or /=</p>\n\n<pre><code>byte b = 10;\nb *= 5.7;\nSystem.out.println(b); // prints 57\n</code></pre>\n\n<p>or</p>\n\n<pre><code>byte b = 100;\nb /= 2.5;\nSystem.out.println(b); // prints 40\n</code></pre>\n\n<p>or</p>\n\n<pre><code>char ch = '0';\nch *= 1.1;\nSystem.out.println(ch); // prints '4'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>char ch = 'A';\nch *= 1.5;\nSystem.out.println(ch); // prints 'a'\n</code></pre>\n", "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "answer_id": 8710747, "link": "http://stackoverflow.com/questions/8710619/javas-compound-assignment-operators/8710747#8710747", "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"]}, {"body": "<p>The problem here involves type casting.</p>\n\n<p>When you add int and long, </p>\n\n<ol>\n<li>The int object is casted to long &amp; both are added and you get long object.</li>\n<li>but long object cannot be implicitly casted to int. So, you have to do that explicitly.</li>\n</ol>\n\n<p>But <code>+=</code> is coded in such a way that it does type casting. <code>i=(int)(i+m)</code></p>\n", "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "answer_id": 8710752, "link": "http://stackoverflow.com/questions/8710619/javas-compound-assignment-operators/8710752#8710752", "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"]}, {"body": "<p>In Java type conversions are performed automatically when the type of the expression on the right hand side of an assignment operation can be safely promoted to the type of the variable on the left hand side of the assignment. Thus we can safely assign:  </p>\n\n<pre> byte -> short -> int -> long -> float -> double. </pre>  \n\n<p>The same will not work the other way round. For example we cannot automatically convert a long to an int because the first requires more storage than the second and consequently information may be lost. To force such a conversion we must carry out an explicit conversion.<br>\n<a href=\"http://way2java.com/casting-operations/data-type-casting-type-conversion/\">Type - Conversion</a></p>\n", "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "answer_id": 14473282, "link": "http://stackoverflow.com/questions/8710619/javas-compound-assignment-operators/14473282#14473282", "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"]}, {"body": "<p>Sometimes, such a question can be asked at an interview.</p>\n\n<p>For example, when you write:</p>\n\n<pre><code>int a = 2;\nlong b = 3;\na = a + b;\n</code></pre>\n\n<p>there is no automatic typecasting. In C++ there will not be any error compiling the above code, but in Java you will get something like <code>Incompatible type exception</code>.</p>\n\n<p>So to avoid it, you must write your code like this:</p>\n\n<pre><code>int a = 2;\nlong b = 3;\na += b;// No compilation error or any exception due to the auto typecasting\n</code></pre>\n", "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "answer_id": 27247364, "link": "http://stackoverflow.com/questions/8710619/javas-compound-assignment-operators/27247364#27247364", "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"]}, {"body": "<p>The main difference is that with <code>a = a + b</code>, there is no typecasting going on, and so the compiler gets angry at you for not typecasting. But with <code>a += b</code>, what it's really doing is typecasting <code>b</code> to a type compatible with <code>a</code>. So if you do </p>\n\n<pre><code>int a=5;\nlong b=10;\na+=b;\nSystem.out.println(a);\n</code></pre>\n\n<p>What you're really doing is: </p>\n\n<pre><code>int a=5;\nlong b=10;\na=a+(int)b;\nSystem.out.println(a);\n</code></pre>\n", "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "answer_id": 30699499, "link": "http://stackoverflow.com/questions/8710619/javas-compound-assignment-operators/30699499#30699499", "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"]}, {"body": "<p>Subtle point here...</p>\n\n<p>There is an implicit typecast for 'i+j' when 'j' is a double and 'i' is an int.\nJava <strong>ALWAYS</strong> converts an integer into a double when there is an operation between them.</p>\n\n<p>To clarify 'i+=j' where i is an integer and j is a double can be described as</p>\n\n<pre><code>i = &lt;int&gt;(&lt;double&gt;i + j)\n</code></pre>\n\n<p>See: <a href=\"https://www.cs.cmu.edu/~pattis/15-1XX/15-200/lectures/voe/lecture.html#ImplicitConversion\" rel=\"nofollow\">this description of implicit casting</a></p>\n\n<p>You might want to typecast <code>j</code> to <code>(int)</code> in this case for clarity.</p>\n", "title": "Java&#39;s +=, -=, *=, /= compound assignment operators", "answer_id": 34863187, "link": "http://stackoverflow.com/questions/8710619/javas-compound-assignment-operators/34863187#34863187", "tags": ["java", "casting", "operators", "variable-assignment", "assignment-operator"]}], "question_id": 8710619}, {"body": "<p>In Swing, the password field has a <code>getPassword()</code> (returns <code>char[]</code>) method instead of the usual <code>getText()</code> (returns <code>String</code>) method. Similarly, I have come across a suggestion not to use <code>String</code> to handle passwords.</p>\n\n<p>Why does <code>String</code> pose a threat to security when it comes to passwords?\nIt feels inconvenient to use <code>char[]</code>.</p>\n", "tags": ["java", "string", "security", "passwords", "char"], "title": "Why is char[] preferred over String for passwords in Java?", "answer_count": 13, "creation_date": 1326723642, "score": 2106, "link": "http://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords-in-java", "answers": [{"body": "<p><strong>Strings are immutable</strong>. That means once you've created the <code>string</code>, if another process can dump memory, there's no way (aside from <a href=\"https://en.wikipedia.org/wiki/Reflection_%28computer_programming%29\">reflection</a>) you can get rid of the data before <a href=\"https://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29\">garbage collection</a> kicks in.</p>\n\n<p>With an array, you can explicitly wipe the data after you're done with it. You can overwrite the array with anything you like, and the password won't be present anywhere in the system, even before garbage collection.</p>\n\n<p>So yes, this <em>is</em> a security concern - but even using <code>char[]</code> only reduces the window of opportunity for an attacker, and it's only for this specific type of attack.</p>\n\n<p>As noted in comments, it's possible that arrays being moved by the garbage collector will leave stray copies of the data in memory. I believe this is implementation-specific - the garbage collector <em>may</em> clear all memory as it goes, to avoid this sort of thing. Even if it does, there's still the time during which the <code>char[]</code> contains the actual characters as an attack window.</p>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 8881376, "link": "http://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords-in-java/8881376#8881376", "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p>Character arrays (<code>char[]</code>) can be cleared after use by setting each character to zero and Strings not. If someone can somehow see the memory image, they can see a password in plain text if Strings are used, but if <code>char[]</code> is used, after purging data with 0's, the password is secure.</p>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 8881395, "link": "http://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords-in-java/8881395#8881395", "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p>I don't think this is a valid suggestion, but, I can at least guess at the reason.</p>\n\n<p>I think the motivation is wanting to make sure that you can erase all trace of the password in memory promptly and with certainty after it is used. With a <code>char[]</code> you could overwrite each element of the array with a blank or something for sure. You can't edit the internal value of a <code>String</code> that way.</p>\n\n<p>But that alone isn't a good answer; why not just make sure a reference to the <code>char[]</code> or <code>String</code> doesn't escape? Then there's no security issue. But the thing is that <code>String</code> objects can be <code>intern()</code>ed in theory and kept alive inside the constant pool. I suppose using <code>char[]</code> forbids this possibility.</p>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 8881399, "link": "http://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords-in-java/8881399#8881399", "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p>Some people believe that you have to overwrite the memory used to store the password once you no longer need it. This reduces the time window an attacker has to read the password from your system and completely ignores the fact that the attacker already needs enough access to hijack the JVM memory to do this. An attacker with that much access can catch your key events making this completely useless (AFAIK, so please correct me if I am wrong).</p>\n\n<p><strong>Update</strong></p>\n\n<p>Thanks to the comments I have to update my answer. Apparently there are two cases where this can add a (very) minor security improvement as it reduces the time a password could land on the hard drive. Still I think it's overkill for most use cases.</p>\n\n<ul>\n<li>Your target system may be badly configured or you have to assume it is and you have to be paranoid about core dumps (can be valid if the systems are not managed by an administrator). </li>\n<li>Your software has to be overly paranoid to prevent data leaks with the attacker gaining access to the hardware - using things like <a href=\"http://en.wikipedia.org/wiki/TrueCrypt\">TrueCrypt</a> (discontinued), <a href=\"https://veracrypt.codeplex.com/\">VeraCrypt</a>, or <a href=\"https://ciphershed.org/\">CipherShed</a>.</li>\n</ul>\n\n<p>If possible, disabling core dumps and the swap file would take care of both problems. However, they would require administrator rights and may reduce functionality (less memory to use) and pulling RAM from a running system would still be a valid concern.</p>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 8881461, "link": "http://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords-in-java/8881461#8881461", "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p>While other suggestions here seem valid, there is one other good reason. With plain <code>String</code> you have much higher chances of <strong>accidentally printing the password to logs</strong>, monitors or some other insecure place. <code>char[]</code> is less vulnerable.</p>\n\n<p>Consider this:</p>\n\n<pre><code>public static void main(String[] args) {\n    Object pw = \"Password\";\n    System.out.println(\"String: \" + pw);\n\n    pw = \"Password\".toCharArray();\n    System.out.println(\"Array: \" + pw);\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>String: Password\nArray: [C@5829428e\n</code></pre>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 8885343, "link": "http://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords-in-java/8885343#8885343", "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p>To quote an official document, the <a href=\"http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html#PBEEx\">Java Cryptography Architecture guide</a> says this about <code>char[]</code> vs. <code>String</code> passwords (about password-based encryption, but this is more generally about passwords of course):</p>\n\n<blockquote>\n  <p>It would seem logical to collect and store the password in an object\n  of type <code>java.lang.String</code>. However, here's the caveat: <code>Object</code>s of\n  type <code>String</code> are immutable, i.e., there are no methods defined that\n  allow you to change (overwrite) or zero out the contents of a <code>String</code>\n  after usage. This feature makes <code>String</code> objects unsuitable for\n  storing security sensitive information such as user passwords. You\n  should always collect and store security sensitive information in a\n  <code>char</code> array instead.</p>\n</blockquote>\n\n<p><a href=\"http://www.oracle.com/technetwork/java/seccodeguide-139067.html#2\">Guideline 2-2 of the Secure Coding Guidelines for the Java Programming Language, Version 4.0</a> also says something similar (although it is originally in the context of logging):</p>\n\n<blockquote>\n  <p><em>Guideline 2-2: Do not log highly sensitive information</em></p>\n  \n  <p>Some information, such as Social Security numbers (SSNs) and\n  passwords, is highly sensitive. This information should not be kept\n  for longer than necessary nor where it may be seen, even by\n  administrators. For instance, it should not be sent to log files and\n  its presence should not be detectable through searches. Some transient\n  data may be kept in mutable data structures, such as char arrays, and\n  cleared immediately after use. Clearing data structures has reduced\n  effectiveness on typical Java runtime systems as objects are moved in\n  memory transparently to the programmer.</p>\n  \n  <p>This guideline also has implications for implementation and use of\n  lower-level libraries that do not have semantic knowledge of the data\n  they are dealing with. As an example, a low-level string parsing\n  library may log the text it works on. An application may parse an SSN\n  with the library. This creates a situation where the SSNs are\n  available to administrators with access to the log files.</p>\n</blockquote>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 8889285, "link": "http://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords-in-java/8889285#8889285", "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p>The answer has already been given, but I'd like to share an issue that I discovered lately with Java standard libraries. While they take great care now of replacing password strings with <code>char[]</code> everywhere (which of course is a good thing), other security-critical data seems to be overlooked when it comes to clearing it from memory.</p>\n\n<p>I'm thinking of e.g. the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/security/PrivateKey.html\">PrivateKey</a> class. Consider a scenario where you would load a private RSA key from a PKCS#12 file, using it to perform some operation. Now in this case, sniffing the password alone wouldn't help you much as long as physical access to the key file is properly restricted. As an attacker, you would be much better off if you obtained the key directly instead of the password. The desired information can be leaked manifold, core dumps, a debugger session or swap files are just some examples.</p>\n\n<p>And as it turns out, there is nothing that lets you clear the private information of a <code>PrivateKey</code> from memory, because there's no API that lets you wipe the bytes that form the corresponding information.</p>\n\n<p>This is a bad situation, as this <a href=\"http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.77.3297&amp;rep=rep1&amp;type=pdf\">paper</a> describes how this circumstance could be potentially exploited.</p>\n\n<p>The OpenSSL library for example overwrites critical memory sections before private keys are freed. Since Java is garbage-collected, we would need explicit methods to wipe and invalidate private information for Java keys, which are to be applied immediately after using the key. </p>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 8932215, "link": "http://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords-in-java/8932215#8932215", "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<ol>\n<li><strong>Strings are immutable</strong> in Java if you store password as plain text it will be available in memory until Garbage collector clears it and since Strings are used in String pool for re-usability there is pretty high chance that it will be remain in memory for long duration, which pose a security threat. Since any one who has access to memory dump can find the password in clear text </li>\n<li><strong>Java recommendation</strong> using <code>getPassword()</code> method of JPasswordField which returns a char[] and deprecated <code>getText()</code> method which returns password in clear text stating security reason. </li>\n<li><p><strong>toString()</strong> there is always a risk of printing plain text in log file or console but if use Array you won't print contents of array instead its memory location get printed. </p>\n\n<pre><code>String strPwd = \"passwd\";\nchar[] charPwd = new char[]{'p','a','s','s','w','d'};\nSystem.out.println(\"String password: \" + strPwd );\nSystem.out.println(\"Character password: \" + charPwd );\n</code></pre>\n\n<blockquote>\n  <p>String password: passwd</p>\n  \n  <p>Character password: [C@110b2345</p>\n</blockquote></li>\n</ol>\n\n<p><strong>Final thoughts:</strong> Though using char[] is not just enough you need to erase content to be more secure. I also suggest working with hash'd or encrypted password instead of plaintext and clearing it from memory as soon as authentication is completed.</p>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 14060804, "link": "http://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords-in-java/14060804#14060804", "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p>These are all the reasons , one should choose <strong>char[]</strong> array instead of <strong>String</strong> for password.</p>\n\n<p><strong>1.</strong>  Since Strings are immutable in Java if you store password as plain text it will be available in memory until Garbage collector clears it and since String are used in String pool for reusability there is pretty high chance that it will be remain in memory for long duration, which pose a security threat. Since any one who has access to memory dump can find the password in clear text and that's another reason you should always used an encrypted password than plain text. Since Strings are immutable there is no way contents of Strings can be changed because any change will produce new String, while if you char[] you can still set all his element as blank or zero. So Storing password in character array clearly mitigates security risk of stealing password.</p>\n\n<p><strong>2.</strong>  Java itself recommends using getPassword() method of JPasswordField which returns a char[] and deprecated getText() method which returns password in clear text stating security reason. Its good to follow advice from Java team and adhering to standard rather than going against it.</p>\n\n<p><strong>3.</strong>  With String there is always a risk of printing plain text in log file or console but if use Array you won't print contents of array instead its memory location get printed. though not a real reason but still make sense.</p>\n\n<pre><code>    String strPassword=\"Unknown\";\n    char[] charPassword= new char[]{'U','n','k','w','o','n'};\n    System.out.println(\"String password: \" + strPassword);\n    System.out.println(\"Character password: \" + charPassword);\n\n    String password: Unknown\n    Character password: [C@110b053\n</code></pre>\n\n<p>Reference from:  <a href=\"http://javarevisited.blogspot.com/2012/03/why-character-array-is-better-than.html#ixzz317MOiiUr\">http://javarevisited.blogspot.com/2012/03/why-character-array-is-better-than.html#ixzz317MOiiUr</a></p>\n\n<p>Hope this helps.</p>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 23538955, "link": "http://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords-in-java/23538955#23538955", "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p>There is nothing that char array gives you vs String unless you clean it up manually after use, and I haven't seen anyone actually doing that. So to me the preference of char[] vs String is a little exaggerated.</p>\n\n<p>Take a look at the <sub>widely used</sub> Spring Security library <a href=\"http://grepcode.com/file/repo1.maven.org/maven2/org.springframework.security/spring-security-web/3.0.1.RELEASE/org/springframework/security/web/authentication/UsernamePasswordAuthenticationFilter.java#73\">here</a> and ask yourself - are Spring Security guys incompetent or char[] passwords just don't make much sense. When someone grabs memory dumps of your RAM be sure she'll get all the passwords even if you use sophisticated ways to hide them.</p>\n\n<p>However, Java changes all the time, and some scary features like <a href=\"http://stackoverflow.com/questions/27949213/string-deduplication-feature-of-java-8\">String Deduplication feature of Java 8</a> might intern String objects without your knowledge. But that's different conversation.</p>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 28123411, "link": "http://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords-in-java/28123411#28123411", "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p><strong>Edit:</strong> Coming back to this answer after a year of security research, I realize it makes the rather unfortunate implication that you would ever actually compare plaintext passwords. Please don't. <a href=\"http://stackoverflow.com/questions/2860943/how-can-i-hash-a-password-in-java\">Use a secure one-way hash with a salt and a reasonable number of iterations</a>. Consider using a library: this stuff is hard to get right!</p>\n\n<p><strong>Original answer:</strong> What about the fact that String.equals() uses <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#String.equals%28java.lang.Object%29\" rel=\"nofollow\">short-circuit evaluation</a>, and is therefore vulnerable to a timing attack? It may be unlikely, but you could <em>theoretically</em> time the password comparison in order to determine the correct sequence of characters.</p>\n\n<pre><code>public boolean equals(Object anObject) {\n    if (this == anObject) {\n        return true;\n    }\n    if (anObject instanceof String) {\n        String anotherString = (String)anObject;\n        int n = value.length;\n        // Quits here if Strings are different lengths.\n        if (n == anotherString.value.length) {\n            char v1[] = value;\n            char v2[] = anotherString.value;\n            int i = 0;\n            // Quits here at first different character.\n            while (n-- != 0) {\n                if (v1[i] != v2[i])\n                    return false;\n                i++;\n            }\n            return true;\n        }\n    }\n    return false;\n}\n</code></pre>\n\n<p>Some more resources on timing attacks:</p>\n\n<ul>\n<li><a href=\"http://codahale.com/a-lesson-in-timing-attacks/\" rel=\"nofollow\">A Lesson In Timing Attacks</a></li>\n<li><a href=\"http://security.stackexchange.com/a/83671\">A discussion about timing attacks</a> over on Information Security Stack Exchange</li>\n<li>And of course, the <a href=\"http://en.wikipedia.org/wiki/Timing_attack\" rel=\"nofollow\">Timing Attack Wikipedia page</a></li>\n</ul>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 29503590, "link": "http://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords-in-java/29503590#29503590", "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p>As Jon Skeet states, there is no way except by using reflection. </p>\n\n<p>However, if reflection is an option for you, you can do this.</p>\n\n<pre><code>public static void main(String[] args) {\n    System.out.println(\"please enter a password\");\n    // don't actually do this, this is an example only.\n    Scanner in = new Scanner(System.in);\n    String password = in.nextLine();\n    usePassword(password);\n\n    clearString(password);\n\n    System.out.println(\"password: '\" + password + \"'\");\n}\n\nprivate static void usePassword(String password) {\n\n}\n\nprivate static void clearString(String password) {\n    try {\n        Field value = String.class.getDeclaredField(\"value\");\n        value.setAccessible(true);\n        char[] chars = (char[]) value.get(password);\n        Arrays.fill(chars, '*');\n    } catch (Exception e) {\n        throw new AssertionError(e);\n    }\n}\n</code></pre>\n\n<p>when run</p>\n\n<pre><code>please enter a password\nhello world\npassword: '***********'\n</code></pre>\n\n<p>Note: if the String's char[] has been copied as a part of a GC cycle, there is a chance the previous copy is somewhere in memory.  </p>\n\n<p>This old copy wouldn't appear in a heap dump, but if you have direct access to the raw memory of the process you could see it.  In general you should avoid anyone having such access.</p>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 31288609, "link": "http://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords-in-java/31288609#31288609", "tags": ["java", "string", "security", "passwords", "char"]}, {"body": "<p>Strings are immutable and cannot be altered once they have been created. Creating a password as a string will leave stray references to the password on the heap or on the String pool. Now if someone takes a heap dump of the Java process and carefully scans through he might be able to guess the passwords. Of course these non used strings will be garbage collected but that depends on when the GC kicks in.</p>\n\n<p>On the other side char[] are mutable as soon as the authentication is done you can overwrite them with any character like all M's or backslashes. Now even if someone takes a heap dump he might not be able to get the passwords which are not currently in use. This gives you more control in the sense like clearing the Object content yourself vs waiting for the GC to do it.</p>\n", "title": "Why is char[] preferred over String for passwords in Java?", "answer_id": 31674073, "link": "http://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords-in-java/31674073#31674073", "tags": ["java", "string", "security", "passwords", "char"]}], "question_id": 8881291}, {"body": "<p>I am trying to use <a href=\"http://en.wikipedia.org/wiki/Notepad%2B%2B\">Notepad++</a> as my all-in-one tool edit, run, compile, etc.</p>\n\n<p>I have <a href=\"http://en.wikipedia.org/wiki/Java_Virtual_Machine#Execution_environment\">JRE</a> installed, and I have setup my path variable to the .../bin directory.</p>\n\n<p>When I run my \"Hello world\" in Notepad++, I get this message:</p>\n\n<pre><code>java.lang.UnsupportedClassVersionError: test_hello_world :\n Unsupported major.minor version 51.0\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClassCond(Unknown Source)\n       .........................................\n</code></pre>\n\n<p>I think the problem here is about versions; some version of Java may be old or too new.</p>\n\n<ol>\n<li>How do I fix it?</li>\n<li>Should I install the JDK, and setup my path variable to the JDK instead of JRE?</li>\n<li>What is the difference between the <code>PATH</code> variable in JRE or JDK?</li>\n</ol>\n", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"], "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_count": 37, "creation_date": 1335785304, "score": 1009, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi", "answers": [{"body": "<p>Don't worry, I got it solved.</p>\n\n<p>It is actually simple - you need to install BOTH JRE / JDK with the same version.</p>\n\n<p>JRE 6 -> JDK 6</p>\n\n<p>JRE 7 -> JDK 7</p>\n\n<p>And so on.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 10443722, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/10443722#10443722", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p><code>java.lang.UnsupportedClassVersionError</code> happens because of a higher JDK during compile time and lower JDK during runtime.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 11239393, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/11239393#11239393", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>The version number shown describes the version of the JRE the class file is compatible with.</p>\n\n<p>The reported major numbers are:</p>\n\n<pre><code>Java SE 9 = 53,\nJava SE 8 = 52,\nJava SE 7 = 51,\nJava SE 6.0 = 50,\nJava SE 5.0 = 49,\nJDK 1.4 = 48,\nJDK 1.3 = 47,\nJDK 1.2 = 46,\nJDK 1.1 = 45\n</code></pre>\n\n<p>(Source: <a href=\"https://en.wikipedia.org/wiki/Java_class_file#General_layout\">Wikipedia</a>)</p>\n\n<p>To fix the actual problem you should try to either run the Java code with a newer version of Java JRE or specify the target parameter to the Java compiler to instruct the compiler to create code compatible with earlier Java versions. </p>\n\n<p>For example, in order to generate class files compatible with Java 1.4, use the following command line:</p>\n\n<pre><code>javac -target 1.4 HelloWorld.java\n</code></pre>\n\n<p>With newer versions of the Java compiler you are likely to get a warning about the bootstrap class path not being set. More information about this error is available in blog post <em><a href=\"https://blogs.oracle.com/darcy/entry/bootclasspath_older_source\">New javac warning for setting an older source without bootclasspath</a></em>.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 11432195, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/11432195#11432195", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>This error means you're trying to load a Java \"class\" file that was compiled with a newer version of Java than you have installed.</p>\n\n<p>For example, your <code>.class</code> file could have been compiled for JDK 7, and you're trying to run it with JDK 6.</p>\n\n<p>So the solution is to either:</p>\n\n<ul>\n<li>Upgrade your Java runtime or</li>\n<li><p>Recompile the class if you have the source, using your local Java compiler (if you have one). </p>\n\n<p>javac FileName.java</p></li>\n</ul>\n\n<p>For developers, this can happen if another developer checks in a .class file, and they've got a newer version of java than you have!</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 14987879, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/14987879#14987879", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>In Eclipse, I just went to menu command <em>Window</em> -> <em>Preferences</em> -> <em>Java</em> -> <em>Compiler</em> and then set \"Compiler compliance level\" to 1.6.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 16345710, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/16345710#16345710", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>You can have some JAR library compiled in Java 7, and you have only Java 6 as Java Runtime. It  could happen with some new libraries.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 17297854, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/17297854#17297854", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>In Eclipse's menu <em>Window</em> -> <em>Preferences</em> -> <em>Java</em> -> <em>Compiler</em> check also \"Configure Project Specific Settings\".</p>\n\n<p>If you stil have the error with same Java version: try to delete build folder of your project manually. Then restart Eclipse.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 18077509, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/18077509#18077509", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>As answered elsewhere by several people, the Java program is being run on an older version of Java than the one it was compiled it for. It needs to be \"crosscompiled\" for backward compatibility. To put it another way, there is a mismatch between source and target Java versions.</p>\n\n<p>Changing options in Eclipse menus don't answer the original poster, who said he/she is not using Eclipse. On OpenJDK javac version 1.7, you can crosscompile for 1.6 if you use parameters <code>-source</code> and <code>-target</code>, plus provide the <em>rt.jar</em> -file of the target version (that is, the older one) at compile time. If you actually install the 1.6 JRE, you can point to its installation (for example, /usr/lib/jvm/java-6-openjdk-i386/jre/lib/rt.jar on Ubuntu, /usr/jdk/jdk1.6.0_60/jre/lib/rt.jar on SunOS apparently. Sorry, I don't know where it is on a Windows system). Like so:</p>\n\n<pre><code>javac -source 1.6 -target 1.6 -bootclasspath /usr/lib/jvm/java-6-openjdk-i386/jre/lib/rt.jar HelloWorld.java\n</code></pre>\n\n<p>It looks like you can just download rt.jar from the Internet, and point to it. This is not too elegant though:</p>\n\n<pre><code>javac -source 1.6 -target 1.6 -bootclasspath ./rt.jar HelloWorld.java\n</code></pre>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 18834769, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/18834769#18834769", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>You are trying to run your program with a Java version that does not support the version in which the code was compiled. <strong>So basically you must have compiled your code with a higher version and trying to run it using a lower version.</strong></p>\n\n<p>As you are getting</p>\n\n<pre><code>Unsupported major.minor version 51.0\n</code></pre>\n\n<p>and version <strong>51.0</strong> corresponds to <strong>J2SE 7</strong> you have most probably compiled your code in Java 7 and trying to run it using a lower version. Check what <code>java -version</code> displays. It should be the Java 7 version. If not make appropriate changes in the PATH/JAVA_HOME. Or you can compile with the same version you are trying to run the code. If the configurations are confusing you can always give absolute path <code>/home/user/jdk1.7.0_11/bin/javac</code> and <code>/home/user/jdk1.7.0_11/bin/java</code>.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 19111845, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/19111845#19111845", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I have faced the same problem when I was working with an <a href=\"http://en.wikipedia.org/wiki/Apache_Ant\" rel=\"nofollow\">Ant</a> script to build my application.</p>\n\n<p>I use <a href=\"http://en.wikipedia.org/wiki/Eclipse_%28software%29\" rel=\"nofollow\">Eclipse</a> for my application development, and I changed the compiler version in build properties of the project. But that didn't work for me. Then I found out that I can provide the compiler version in the Ant script.</p>\n\n<p>I modified the Ant script at the section where it compile Java files.</p>\n\n<pre><code>&lt;target name=\"build-java\" depends=\"prepare-build\"&gt;\n    &lt;echo message=\"Compiling java files\"/&gt;\n    &lt;javac ....\n           target=\"1.5\"...\n    &lt;/javac&gt;\n&lt;/target&gt;\n</code></pre>\n\n<p>This worked for me to resolve the unsupported major minor issue.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 19353132, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/19353132#19353132", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>When I installed <a href=\"http://en.wikipedia.org/wiki/Java_Development_Kit\">JDK</a> 1.7, the problem got solved.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 20965499, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/20965499#20965499", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I had a similar situation on Mac, and the following process worked for me:</p>\n\n<p>In the terminal, type</p>\n\n<pre><code>vi ~/.profile\n</code></pre>\n\n<p>Then add this line in the file, and save</p>\n\n<pre><code>export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk&lt;version&gt;.jdk/Contents/Home\n</code></pre>\n\n<p>where version is the one on your computer, such as <code>1.7.0_25</code>.</p>\n\n<p>Exit the editor, then type the following command make it become effective</p>\n\n<pre><code>source ~/.profile \n</code></pre>\n\n<p>Then type java -version to check the result</p>\n\n<pre><code>java -version \n</code></pre>\n\n<p>What is <code>.profile</code> file?</p>\n\n<blockquote>\n  <p>.profile file is a hidden file. It is an optional file which tells the system which commands to run when the user whose profile file it is logs in. For example, if my username is bruno and there is a .profile file in /Users/bruno/, all of its contents will be executed during the log-in procedure.</p>\n</blockquote>\n\n<p>Source: <a href=\"http://computers.tutsplus.com/tutorials/speed-up-your-terminal-workflow-with-command-aliases-and-profile--mac-30515\">http://computers.tutsplus.com/tutorials/speed-up-your-terminal-workflow-with-command-aliases-and-profile--mac-30515</a></p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 21695143, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/21695143#21695143", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I had the same error message when running Ant from Eclipse, but the other solutions mentioned here didn't solve my problem. The funny thing was that running Ant from the Windows command line was running fine, so it had to be a configuration issue within Eclipse.</p>\n\n<p>It turned out that under Eclipse you can specify the environment that Ant should be running with and this was set as a JRE instead of a JDK.</p>\n\n<ul>\n<li>Go to: Run -> External Tools -> External Tools Configurations ...</li>\n<li>Select the Ant build.xml for your project (if you have multiple projects)</li>\n<li>Activate the Tab 'JRE'</li>\n<li>Here was selected 'Separate JRE: jre6'. When I changed this to a JDK from the 1.6 or 1.7 series, the error was gone.</li>\n</ul>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 21699403, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/21699403#21699403", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>If somebody is facing the same issue while using <a href=\"http://en.wikipedia.org/wiki/Apache_Maven\" rel=\"nofollow\">Maven</a>, you can cross compile using the plug-in <em><a href=\"http://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html\" rel=\"nofollow\">Maven Compiler</a></em>.</p>\n\n<h3> </h3>\n\n<pre><code> &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.6&lt;/source&gt;\n                    &lt;target&gt;1.6&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n       .....\n</code></pre>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 22298353, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/22298353#22298353", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>First let's get some basics right...</p>\n\n<p>JRE is a component in <a href=\"http://en.wikipedia.org/wiki/NetBeans\" rel=\"nofollow\">NetBeans</a>/<a href=\"http://en.wikipedia.org/wiki/Eclipse_%28software%29\" rel=\"nofollow\">Eclipse</a>/standalone that is going to provide you with libraries, JVM, Java plugins &amp; Java web start. Note that it does not provide compliers or debuggers.</p>\n\n<p>JDK is the superset of JRE along with compliers and debuggers.</p>\n\n<p>So when you have your default library as a JRE instead of JDK, you are going to have a nice time importing stuff, but it won't compile.</p>\n\n<p>Instead, set your path to JDK (I use NetBeans, and I set them using netbeans.conf in netbeans/etc/netbeans.conf and change the path).</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 22514103, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/22514103#22514103", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>Today, this error message appeared in our <a href=\"http://en.wikipedia.org/wiki/Apache_Tomcat\" rel=\"nofollow\">Tomcat</a> 7 on <a href=\"http://en.wikipedia.org/wiki/List_of_Ubuntu_releases#Ubuntu_12.04_LTS_.28Precise_Pangolin.29\" rel=\"nofollow\">Ubuntu 12.04.2 LTS</a> (Precise Pangolin):</p>\n\n<blockquote>\n  <p>/var/log/tomcat7/localhost.2014-04-08.log: <br/>\n  Apr 8, 2014 9:00:55 AM org.apache.catalina.core.StandardContext filterStart <br/>\n  SEVERE: Exception starting filter struts2 <br/>\n  java.lang.UnsupportedClassVersionError: controller/ReqAccept : Unsupported major.minor version 51.0 (unable to load class controller.ReqAccept)</p>\n</blockquote>\n\n<p>The <a href=\"http://en.wikipedia.org/wiki/Apache_Struts\" rel=\"nofollow\">Struts</a> application is compiled with Java 7.</p>\n\n<p>It turned out, someone uses \"service tomcat [stop/start]\" to restart Tomcat 7,</p>\n\n<blockquote>\n  <p>$ ps -ef | grep java<br>\n  tomcat7  31783 1 32 20:13 ? 00:00:03 /usr/lib/jvm/default-java/bin/java...<br>\n  $ /usr/lib/jvm/default-java/bin/java -version<br>\n  java version \"1.6.0_27\"</p>\n</blockquote>\n\n<p>Which causes the \"Unsupported major.minor version 51.0\" error.</p>\n\n<p>When we used \"/etc/init.d/tomcat7 [stop/start]\" to restart Tomcat 7, the problem was solved.</p>\n\n<blockquote>\n  <p>$ ps -ef | grep java<br>\n  tomcat7  31886 1 80 20:24 ? 00:00:10 /usr/local/java/jdk1.7.0_15/bin/java<br>\n  $ /usr/local/java/jdk1.7.0_15/bin/java -version<br>\n  java version \"1.7.0_15\"</p>\n</blockquote>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 22927824, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/22927824#22927824", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>Had this problem when I reverted to Java 6 and tried to run classes previously compiled with Java 7. What worked for me was Preferences > java > compiler --> set compliance level to 1.6 and crucially \"configure project settings\".. </p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 23073993, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/23073993#23073993", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>Based on this...</p>\n\n<pre><code>J2SE 8 = 52\nJ2SE 7 = 51\nJ2SE 6.0 = 50\nJ2SE 5.0 = 49\nJDK 1.4 = 48\nJDK 1.3 = 47\nJDK 1.2 = 46\nJDK 1.1 = 45\n</code></pre>\n\n<p>In Eclipse, right click on project in package explorer:</p>\n\n<p><strong>Build Path</strong> -> <strong>Configure Build Path</strong></p>\n\n<p>Under:</p>\n\n<p><strong>Java Build Path</strong> -> <strong>Libraries</strong> -> <strong>Add Library</strong> -> <strong>JRE System Library</strong> -> <strong>Installed JREs</strong> -> <strong>Search</strong>.</p>\n\n<p>Add the required JRE by selecting the library in the list available after the search is complete.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 23907333, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/23907333#23907333", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I had the problem whereby I was having to run a Maven compilation on my project from the command line in order to run my unit tests; if I made a change to the test class and let Eclipse automatically recompile it, then I got the \"Unsupported major.minor version 51.0\" error.</p>\n\n<p>I do have both JDK6 and JDK7 installed, but all my JRE settings were pointing at 1.6, both in the pom and from the project properties page in Eclipse. No amount of Maven Update Project and/or refreshing solved this.</p>\n\n<p>Finally I tried closing the project and re-opening it, and this seemed to fix it! HTH</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 24290721, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/24290721#24290721", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>You have compiled your Java class with JDK 7 and you are trying to run same class on JDK 6 .</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 24424941, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/24424941#24424941", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<ul>\n<li>Install JDK 7.0.55 and set the Java for <a href=\"http://en.wikipedia.org/wiki/Eclipse_%28software%29\" rel=\"nofollow\">Eclipse</a> for JDK 7.0.55.</li>\n<li>Build the project with JDK 7.0.55 by configuring on build path JDK 7.0.55.</li>\n<li>Set the compiler in Eclipse for JDK 7.0.55 by menu <em>Windows</em> -> <em>Preferences</em> -> <em>Java</em> -> <em>Compiler</em> - choose 1.7.</li>\n</ul>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 25116527, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/25116527#25116527", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I solved it. I ran:</p>\n\n<pre><code>JAVA_HOME=/usr/lib/jvm/java-7-openjdk-i386\n</code></pre>\n\n<p>The error is misleading, <code>Unsupported major.minor version 51.0</code>. This gives the impression that version 51 (Java 7) is not supported. And we should use Java 6.</p>\n\n<p>The error should have been:</p>\n\n<blockquote>\n  <p>The current Java version, 50, is unsupported. Use Java version 7 (51:0 and greater) instead.`</p>\n</blockquote>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 25439289, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/25439289#25439289", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I got the same problem with a project written in 1.7 and tried to execute in 1.6.</p>\n\n<p>My solution in Eclipse:</p>\n\n<ul>\n<li><p>Right click on your Project <strong>Properties -> Java Build Path -> Libraries</strong></p></li>\n<li><p>Select your JRE System Library and click <strong>Edit</strong> on the right, and choose the target JRE.</p></li>\n<li><p>Now go to <strong>Java Compiler</strong> on the left, and change the <strong>Compiler compliance level</strong> to your target. </p></li>\n</ul>\n\n<p>That worked for me.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 25601324, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/25601324#25601324", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I got the same problem, and I fixed this issue by <a href=\"http://brianoneill.blogspot.in/2012/11/installing-jdk-7-on-mac-os-x.html\" rel=\"nofollow\">this solution</a> on a Mac. I hope it helps someone.  It's because the system doesn't know about the newer version of JDK, and it still points to the old JDK.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 25664462, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/25664462#25664462", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>You have used a higher version of the JDK to compile and trying to run from a lower version of JDK/<a href=\"http://en.wikipedia.org/wiki/Java_Virtual_Machine#Execution_environment\" rel=\"nofollow\">JRE</a>.</p>\n\n<p>To check this, see the version information:</p>\n\n<pre><code>javac -version\n\njava -version\n</code></pre>\n\n<p>They will be different and javac will have a higher version number.</p>\n\n<p>To get around this, run using java from the JDK version or if you have a newer JRE/JDK that will work as well.</p>\n\n<p><code>which javac</code> will tell you the location, for example, <code>/usr/bin/javac</code>. Just run directly using <code>/usr/bin/java &lt;program&gt;</code>.</p>\n\n<p>OR you can set the environment variable as a permanent solution.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 26007105, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/26007105#26007105", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I had the same situation but any of above tips didn't help :) In our environment we had tomcat running as a service on Windows. We installed Java 1.7 and set up JAVA_HOME on this version. Off course the sources were built on Java 1.7. Nevertheless the tomcat said that it use previous version of JVM. After a deep analized turn out that the Tomcat service installed on Windows still keeping the old value for JAVA_HOME pointing to Java 1.6. After installing new Tomcat service everything were resolved.\nSo the conclusion is: When you change java version and tomcat running as a service, you have to reinstall tomcat service.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 27190279, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/27190279#27190279", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<blockquote>\n  <p>How do I fix it?</p>\n</blockquote>\n\n<p>This error means that the JRE that is being used to execute your class code does not recognise the version of Java used. Usually because the version of Java that generated your class file (i.e. compiled it) is newer.</p>\n\n<p>To fix it, you can either </p>\n\n<p>a) Compile your Java sources with the same, or older, version of the Java compiler as will be sued to run it. i.e. Install the appropriate JDK</p>\n\n<p>b) Compile your Java sources with the newer version of the Java compiler but in compatibility mode. i.e. use the <code>-target</code> parameter.</p>\n\n<p>c) Run your compiled classes in a JRE that is the same, or newer, version as the JDK used to compile the classes.</p>\n\n<p>You can check the versions you are currently using with\n<code>javac -version</code> for the compiler, and <code>java -version</code> for the runtime.</p>\n\n<blockquote>\n  <p>Should I install the JDK, and setup my path variable to the JDK\n  instead of JRE?</p>\n</blockquote>\n\n<p>For compilation, certainly, install and configure the specific JDK that you want.</p>\n\n<p>For runtime, you can use the one that comes with the JDK or a standalone JRE, but regardless, make sure that you have installed the right versions and that you have configured your PATH such that there are no surprises.</p>\n\n<blockquote>\n  <p>What is the difference between the PATH variable in JRE or JDK?</p>\n</blockquote>\n\n<p>The PATH environment variable tells the command shell where to look for the command you type. When you type <code>java</code>, the command shell interpreter will look through all the locations specified in the <code>PATH</code> variable, from left to right, to find the appropriate <code>java</code> runtime executable to run. If you have multiple versions of Java installed - i.e. you have the <code>java</code> executable in multiple locations specified in the PATH variable, then the first one encountered when going from left to right will be the one that is executed.</p>\n\n<p>The compiler command is <code>javac</code> and only comes with the JDK. The runtime command is <code>java</code> and comes with the JDK and is in the JRE.</p>\n\n<p>It is likely that you have one version (51.0 = Java 7) of <code>javac</code> installed, and you also have the same version of <code>java</code> installed, but that another previous version of <code>java</code> is appearing earlier in the PATH and so is being invoked instead of the one you expect.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 29275199, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/29275199#29275199", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>The most common issue is misconfiguration of your <code>JAVA_HOME</code> variable which should point to the right Java Development Kit library, if you've multiple installed.</p>\n\n<p>See also:</p>\n\n<h3>Debian/Ubuntu</h3>\n\n<p>To check which java (openjdk) you've installed, check via:</p>\n\n<pre><code>dpkg -l \"openjdk*\" | grep ^i\n</code></pre>\n\n<p>You may use:</p>\n\n<pre><code>sudo update-alternatives --config java\n</code></pre>\n\n<p>to select the alternative java version.</p>\n\n<p>Or check which are available for install:</p>\n\n<pre><code>sudo apt-cache search ^openjdk\n</code></pre>\n\n<p>Then you can install, for example:</p>\n\n<pre><code>sudo apt-get install openjdk-7-jre\n</code></pre>\n\n<h3>Fedora, Oracle Linux, Red Hat</h3>\n\n<p>Install/upgrade appropriate package via:</p>\n\n<pre><code>yum install java-1.7.0-openjdk java-1.7.0-openjdk-devel\n</code></pre>\n\n<blockquote>\n  <p>The <code>java-1.7.0-openjdk</code> package contains just the Java Runtime Environment. If you want to develop Java programs then install the <code>java-1.7.0-openjdk-devel</code> package.</p>\n</blockquote>\n\n<h3>BSD</h3>\n\n<p>There is an OpenJDK 7 package in the FreeBSD Ports collection called <a href=\"http://www.freshports.org/java/openjdk7/\">openjdk7</a> which probably needs to be reconfigured.</p>\n\n<p>See: <a href=\"https://wiki.openjdk.java.net/display/BSDPort/Main\">OpenJDK wiki page</a>.</p>\n\n<h3>Windows</h3>\n\n<p>Just install appropriate  Java SE Development Kit library from the <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html\">Oracle site</a> or install </p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 29446295, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/29446295#29446295", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>Oh Mac OS X I was able to solve this problem by setting the JAVA_HOME variable:</p>\n\n<pre><code>export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.7.0_75.jdk/Contents/Home\n</code></pre>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 29534315, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/29534315#29534315", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I got the same issue with Spring Source Tool(STS) IDE for grails project. I checked the installed java version and the project java version were 1.7.*. Later I found that in <strong>GGTS.ini</strong> file the java version was set to 1.6:</p>\n\n<p><strong>Solution:</strong></p>\n\n<p>-Dosgi.requiredJavaVersion=1.6 changed to<br>\n-Dosgi.requiredJavaVersion=1.7<br>\nAdd below two lines before -vmargs<br>\n-vm<br>\njdk1.7.0_21/jre/lib/amd64/server/libjvm.so</p>\n\n<p>Problem solved. Happy coding.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 29717289, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/29717289#29717289", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>Yet another way to fix this on Mac OS X with homebrew installed, is this:</p>\n\n<pre><code>brew install Caskroom/cask/java\n</code></pre>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 31805886, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/31805886#31805886", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>Add to your pom.xml</p>\n\n<pre><code>&lt;project ....&gt;\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>where 1.7 is the Java version you intend to use. This overwrites the maven compiler setting, so it's good to debug from here.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 32327057, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/32327057#32327057", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I solved this issue for me by checking that Maven Dependencies were being deployed in Deployment Assembly. In my case they were not. Adding it fixed the problem</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 33458079, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/33458079#33458079", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<ul>\n<li>If you use maven set your java compile level. Open command line write <strong>java -version</strong> for your compile level.</li>\n</ul>\n\n<p><a href=\"http://i.stack.imgur.com/oyfMl.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/oyfMl.png\" alt=\"enter image description here\"></a></p>\n\n<ul>\n<li>If you use IntelliJ IDEA select project->File->Settings->Build Execution Deployment -> Compiler -> Java Compiler then change byte code as 1.7 like image\n<a href=\"http://i.stack.imgur.com/GXStV.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/GXStV.png\" alt=\"enter image description here\"></a> </li>\n</ul>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 33494080, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/33494080#33494080", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>If you have a second project added to your build path make sure it has the <strong>same compiler version</strong> as your first one:\nProperties -> Java Compiler -> Compiler compliance level</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 38416698, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/38416698#38416698", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>I'm using OS X 10.11.5 and I tried setting JAVA_HOME and forcing the \"correct\" java version via maven. Nothing helped.</p>\n\n<p>The problem happened when the OS X account was logged out while the application was still running. After logging in again, OS X opened the old terminal session with greyed out history. I used the same terminal session to build the project but failed with the unsupported class version error.</p>\n\n<p>Cleaning the maven project didn't help at all.</p>\n\n<p>To solve the problem, I simply had to close the auto-opened terminal window and use a new one.</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 38475951, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/38475951#38475951", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}, {"body": "<p>Your java file is compiled with a different version (higher compiler version) than the version (lower runtime version) you are trying to run it with.</p>\n\n<p>It is basic understanding that classes compiled with lower versions are expected to run in the later higher versions. But the opposite (compiled with higher compiler version and trying to run it with lower runtime version) is quite not possible sometimes.  </p>\n\n<p>Hence you are shown this error, when trying to execute your program. <strong>Unsupported major.minor version x.x</strong></p>\n\n<blockquote>\n  <p><strong>Q:</strong> I have created an application in Java 7, but when my users try to\n  run it they get an Unsupported major.minor version 51.0 error. What\n  does this mean and what can I do about it?</p>\n  \n  <p><strong>A:</strong> If you compile an application using javac in Java 7, the resulting classfiles will have the 51.0 version number. Versions of\n  Java prior to 7 do not recogize this number, so your users will have\n  to upgrade to Java 7 prior to running your application. If you are not\n  using any Java 7 APIs you can try to compile your application using\n  javac -target 1.6 to create a 1.6-compatible classfile. If your\n  application is deployed using webstart you can specify the minimum\n  version required. For more information, see the docs on Java Web Start\n  and JNLP here. This issue will go away once we trigger autoupdate to\n  Java 7 for end-users currently having Java 6 on their desktops. The\n  timeline for this is not yet determined, we want to give developers\n  time to work out any issues between their code and JDK 7 first.</p>\n</blockquote>\n\n<p>(Source: <a href=\"https://blogs.oracle.com/henrik/entry/java_7_questions_answers\" rel=\"nofollow\">oracle.com</a>)</p>\n", "title": "How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version", "answer_id": 39474551, "link": "http://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi/39474551#39474551", "tags": ["java", "jvm", "incompatibility", "unsupported-class-version"]}], "question_id": 10382929}, {"body": "<p>I don't understand what exactly <a href=\"http://camel.apache.org/index.html\">Camel</a> does.</p>\n\n<p>If you could give in 101 words an introduction to Camel:</p>\n\n<ul>\n<li>What exactly is it? </li>\n<li>How does it interact with an application written in Java? </li>\n<li>Is it something that goes together with the server? </li>\n<li>Is it an independent program? </li>\n</ul>\n\n<p><strong>Please explain what Camel is.</strong></p>\n", "tags": ["java", "apache-camel", "soa", "enterprise-integration"], "title": "What exactly is Apache Camel?", "answer_count": 17, "creation_date": 1326421938, "score": 796, "link": "http://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel", "answers": [{"body": "<p>If you are aware of Enterprise Integration Patterns, Apache Camel is one integration framework which implements all EIPs.</p>\n\n<p>And you can deploy Camel as a standalone application in a web-container.</p>\n\n<p>Basically, if you have to integrate several applications with different protocols and technologies, you can use Camel.</p>\n", "title": "What exactly is Apache Camel?", "answer_id": 8845358, "link": "http://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel/8845358#8845358", "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>One of the things you need to understand, before you try to understand Apache Camel, are Enterprise Integration Patterns. Not everyone in the field is actually aware of them. While you can certainly read the Enterprise Integration Patterns book, a quicker way to get up to speed on them would be to read something like the Wikipedia article on <a href=\"http://en.wikipedia.org/wiki/Enterprise_application_integration\">Enterprise Application Integration</a>. </p>\n\n<p>One you have read and understood the subject area, you would be much more likely to understand the purpose of Apache Camel</p>\n\n<p>HTH</p>\n", "title": "What exactly is Apache Camel?", "answer_id": 8845595, "link": "http://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel/8845595#8845595", "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>If you have 5 to 10 minutes, I generally recommend people to read this <a href=\"http://java.dzone.com/articles/open-source-integration-apache\">Integration with Apache Camel</a> by Jonathan Anstey. It's a well written piece which gives a brief introduction to and overview of some of Camel's concepts, and it implements a use case with code samples. In it, Jonathan writes:</p>\n\n<blockquote>\n  <p>Apache Camel is an open source Java framework that focuses on making integration easier and more accessible to developers. It does this by providing:</p>\n  \n  <ul>\n  <li>concrete implementations of all the widely used <a href=\"http://www.enterpriseintegrationpatterns.com/\">Enterprise Integration Patterns</a> (EIPs)</li>\n  <li>connectivity to a great variety of transports and APIs</li>\n  <li>easy to use Domain Specific Languages (DSLs) to wire EIPs and transports together</li>\n  </ul>\n</blockquote>\n\n<p>There is also a free chapter of <a href=\"http://manning.com/ibsen/\">Camel in Action</a> which introduces Camel in the first chapter. Jonathan is a co-author on that book with me.</p>\n", "title": "What exactly is Apache Camel?", "answer_id": 8849379, "link": "http://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel/8849379#8849379", "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>Creating a <a href=\"http://www.bigsoft.co.uk/blog/index.php/2010/10/18/the-whats-and-whys-to-creating-project-descriptions\">project description</a> should not be complicated.</p>\n\n<p>I say:</p>\n\n<blockquote>\n  <p>Apache Camel is messaging technology glue with routing. It joins together messaging start and end points allowing the transference of messages from different sources to different destinations. For example: JMS -> JSON, HTTP -> JMS or funneling FTP -> JMS, HTTP -> JMS, JSON -> JMS</p>\n</blockquote>\n\n<p>Wikipedia says:</p>\n\n<blockquote>\n  <p>Apache Camel is a rule-based routing and mediation engine which provides a Java object based implementation of the Enterprise Integration Patterns using an API (or declarative Java Domain Specific Language) to configure routing and mediation rules. The domain specific language means that Apache Camel can support type-safe smart completion of routing rules in your IDE using regular Java code without huge amounts of XML configuration files; though XML configuration inside Spring is also supported.</p>\n</blockquote>\n\n<p>See? That wasn't hard was it?</p>\n", "title": "What exactly is Apache Camel?", "answer_id": 10836773, "link": "http://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel/10836773#10836773", "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>My take to describe this in a more accessible way...</p>\n\n<p>In order to understand what Apache Camel is, you need to understand what Enterprise Integration Patterns are.</p>\n\n<p>Let's start with what we presumably already know: The Singleton pattern, the Factory pattern, etc; They are merely ways of organizing your solution to the problem, but they are not solutions themselves. These patterns were analyzed and extracted for the rest of us by the Gang of Four, when they published their book: <a href=\"http://en.wikipedia.org/wiki/Design_Patterns\">Design Patterns</a>. They saved some of us tremendous effort in thinking of how to best structure our code.</p>\n\n<p>Much like the Gang of Four, Gregor Hohpe and Bobby Woolf authored the book <a href=\"http://www.eaipatterns.com/\">Enterprise Integration Patterns</a> (EIP) in which they propose and document a set of new patterns and <em>blueprints</em> for how we could <em>best</em> design large component-based systems, where components can be running on the same process or in a different machine.</p>\n\n<p>They basically propose that we structure our system to be <em>message</em> oriented -- where components communicate with each others using messages as inputs and outputs and absolutely nothing else. They show us a complete set of patterns that we may choose from and implement in our different components that will together form the whole system.</p>\n\n<p><strong>So what is Apache Camel?</strong></p>\n\n<p>Apache Camel offers you the interfaces for the EIPs, the base objects, commonly needed implementations, debugging tools, a configuration system, and many other helpers which will save you a ton of time when you want to implement your solution to follow the EIPs.</p>\n\n<p>Take MVC. MVC is pretty simple in theory and we could implement it without any framework help. But good MVC frameworks provide us with the structure ready-to-use and have gone the extra mile and thought out all the other \"side\" things you need when you create a large MVC project and that's why we use them most of the time.</p>\n\n<p>That's exactly what Apache Camel is for EIPs. <strong>It's a complete production-ready framework for people who want to implement their solution to follow the EIPs.</strong></p>\n", "title": "What exactly is Apache Camel?", "answer_id": 11540451, "link": "http://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel/11540451#11540451", "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>A definition from another perspective: </p>\n\n<p>Apache Camel is an integration framework. It consists of some Java libraries, which helps you implementing integration problems on the Java platform. What this means and how it differs from APIs on the one side and an Enterprise Service Bus (ESB) on the other side is described in my article \"<a href=\"http://www.kai-waehner.de/blog/2011/06/02/when-to-use-apache-camel/\">When to use Apache Camel</a>\". </p>\n", "title": "What exactly is Apache Camel?", "answer_id": 15452135, "link": "http://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel/15452135#15452135", "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>In short: </p>\n\n<p>When there is a requirement to connect / integrate systems, you will probably need to connect to some data source and then process this data to match your business requirements.</p>\n\n<p>In order to do that:</p>\n\n<p>1) You could develop custom program that would do it (might be time consuming and hard to understand, maintain for other developer) </p>\n\n<p>2) Alternatively, you could use Apache Camel to do it in standardised way (it has most of the connectors already developed for you, you just need to set it up and plug your logic - called Process):</p>\n\n<p>Camel will help you to:</p>\n\n<ol>\n<li>Consume data from any source/format</li>\n<li>Process this data</li>\n<li>Output data to any source/format</li>\n</ol>\n\n<p>By using Apache Camel you will make it easy to understand / maintain / extend your system to another developer.</p>\n\n<p>Apache Camel is developed with Enterprise Integration Patterns. The patterns help you to integrate systems in a good way :-)</p>\n", "title": "What exactly is Apache Camel?", "answer_id": 16927203, "link": "http://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel/16927203#16927203", "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>Here is another attempt at it.</p>\n\n<p>You know how there are/were things like Webmethods, ICAN Seebeyond, Tibco BW, IBM Broker. They all did help with integration solutions in the enterprise. These tools are commonly known by the name Enterprise Application Integration (EAI) tools.</p>\n\n<p>There were mostly drag drop tools built around these technologies and in parts you would have to write adapters in Java. These adapter code were either untested or had poor tooling/automation around testing.</p>\n\n<p>Just like with design patterns in programming, you have Enterprise Integration patterns for common integration solutions. They were made famous by a book of the same name by Gregor Hohpe and Bobby Woolf.</p>\n\n<p>Although it is quite possible to implement integration solutions which use one or many EIP, Camel is an attempt at doing this within your code base using one of XML, Java, Groovy or Scala.</p>\n\n<p>Camel supports all Enterprise Integration Patterns listed in the book via its rich DSL and routing mechanism.</p>\n\n<p>So Camel is a competing technoloy to other EAI tools with better support for testing your integration code. The code is concise because of the Domain Specific Languages (DSLs). It is readable by even business users and it is free and makes you productive.</p>\n", "title": "What exactly is Apache Camel?", "answer_id": 19905650, "link": "http://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel/19905650#19905650", "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>There are lot of frameworks that facilitates us for messaging and solving problems in messaging. One such product is Apache Camel.</p>\n\n<p>Most of the common problems have proven solutions called as design patterns. The design pattern for messaging is Enterprise Integration patterns(EIPs) which are well explained <a href=\"http://www.eaipatterns.com/toc.html\">here</a>. Apache camel help us to implement our solution using the EIPs.</p>\n\n<p>The strength of an integration framework is its ability to facilitate us through EIPs or other patterns,number of transports and components and ease of development on which Apache camel stands on the top of the list </p>\n\n<p>Each of the Frameworks has its own advantages  Some of the special features of Apache camel are the following.</p>\n\n<ol>\n<li>It provides the coding to be in many DSLs namely Java DSL and Spring xml based DSL , which are popular.</li>\n<li>Easy use and simple to use. </li>\n<li>Fuse IDE is a product that helps you to code through UI</li>\n</ol>\n", "title": "What exactly is Apache Camel?", "answer_id": 23929350, "link": "http://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel/23929350#23929350", "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>Camel helps in routing, transformation, monitoring. </p>\n\n<p>It uses Routes; which can be described as :</p>\n\n<p><em>When service bus receives particular message, it will route it through no of services/broker destinations such as queue/topics. This path is known as route.</em></p>\n\n<p>Example:\n<em>your stock application has got some input by analyst, it will be processed through the application/web component and then result will be published to all the interested/registered members for particular stock update.</em></p>\n", "title": "What exactly is Apache Camel?", "answer_id": 25407488, "link": "http://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel/25407488#25407488", "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>A diagram is better than thousands of description.\nThis Diagram illustrates  the architecture of Camel.</p>\n\n<p><img src=\"http://camel.apache.org/architecture.data/camel-components.png\" alt=\"enter image description here\"></p>\n", "title": "What exactly is Apache Camel?", "answer_id": 27663938, "link": "http://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel/27663938#27663938", "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>BASED ON ANALOGY</p>\n\n<p>Camel based routing can be understood much easily by putting yourself in the shoes of a Airline owner (eg.: American Airlines, Jet Airways) .</p>\n\n<p>Purpose of 'your airline' is to 'carry' 'passengers' from one 'city' to another one in the world. You use aircrafts from different 'aircraft companies' like Boeing, Airbus, HAL for carrying passengers.</p>\n\n<p>Your airline's boards passengers using 'airports' of the from city and deboards them using the airport of the to city. A passenger may 'travel' to multiple cities, but everywhere they have to go through the airport to travel between your airline's aircraft and the city.</p>\n\n<p>Note that a passenger 'departing' from the city is essentially 'arriving' into your airlines' aircraft. And a passeger  'arriving' into the city, is essentially departing from the aircraft. Since we are in the shoes of airline owner, the term 'arrival passenger' and 'departing passenger' are reversed from our conventional notions which are based on cities perspective.</p>\n\n<p>Same 'airport' infrastructure of each city is used by 'departing' passengers and 'arrival' passengers. An airport provides 'departing infrastructure' for departing passengers, which is different from the 'arrival infrastructure' provided for arriving passengers.</p>\n\n<p>Passengers can continue doing their day to their activities due to various 'amenities' provided inside the aircraft by your airlines, while travelling.</p>\n\n<p>On top of that, your airline also provides lounge facilities for special treatments like 'understanding local language' and or preparing you for the 'travel'.</p>\n\n<p><strong>Lets replace few words/phrases used above with following:</strong></p>\n\n<p>your airline: Apache Camel</p>\n\n<p>aircraft companies: Transport mechanisms</p>\n\n<p>your airline's aircraft: Apache Camel's underlying transport mechanism</p>\n\n<p>carry: route</p>\n\n<p>passengers: message;</p>\n\n<p>city: system;</p>\n\n<p>airport: Camel Component;</p>\n\n<p>understanding local languages: Type Conversions;</p>\n\n<p>departing: producing, produced</p>\n\n<p>arriving: consuming, consumed</p>\n\n<p>travel: routed</p>\n\n<p>amenities: provided</p>\n\n<p>After replacing the words, here is what you get:</p>\n\n<p><strong>Purpose of 'Apache Camel'</strong> is to route 'messages' from one 'system' to another one in the world. Apache camel uses different transport mechanisms for message routing.</p>\n\n<p>Apache Camel picks up messages using 'Camel based Component' of the 'from' system and drops them using the 'Camel based Component' of the 'to' system. A message may route to multiple systems, but everywhere they have to go through 'Camel based Components' to travel between 'Apache Camel's underlying transport mechanism' and the system.</p>\n\n<p>Note that a message 'produced' from the system is essentially 'consumed' into Apache Camel's underlying transport mechanism'. And a message consumed by a system, is essentially produced by the 'Apache Camel's underlying transport mechanism'.</p>\n\n<p>Since we are attempting to understand Camel, we must think from Camel's perspective here onwards. The meaning of the terms 'consumer message' and 'producer message' are ,thus, reversed from our conventional notions which are based on a system's perspective.</p>\n\n<p>Same 'Camel based Component's ' coding infrastructure is used by 'producer message' and 'consumer message'. A 'Camel based Component' provides a 'producer endpoint' for 'producer message' and a 'consumer endpoint' for 'consumer message'.</p>\n\n<p>Messages can be processed by Camel when they are being routed.</p>\n\n<p>On top of this routing, Camel provides special features like 'Type Conversion' and many more...</p>\n", "title": "What exactly is Apache Camel?", "answer_id": 29605854, "link": "http://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel/29605854#29605854", "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>Simply Put: Apache Camel is the Swiss Army knife for developers doing integration work. </p>\n\n<p>Site: <a href=\"http://camel.apache.org\" rel=\"nofollow\">http://camel.apache.org</a></p>\n\n<p>Best Book: Camel in Action</p>\n\n<p>Underlying patterns: <a href=\"http://www.enterpriseintegrationpatterns.com/\" rel=\"nofollow\">http://www.enterpriseintegrationpatterns.com/</a></p>\n", "title": "What exactly is Apache Camel?", "answer_id": 29703844, "link": "http://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel/29703844#29703844", "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>Most \"new\" things in computing aren't really new at all, they're just a mystifying wrapper around something that already well-understood.  When they're hard to understand, it's usually because someone decided to invent new language terms or colonise existing terms for a different purpose (a good example of <em>that</em> is the X developers' reversal of what \"client\" and \"server\" mean.)</p>\n\n<p>Camel is a Java-based wrapper/API for inter-application middleware.  </p>\n\n<p>Middleware is a general term for software that provides interpretation services between entities that don't share a common language or data types.</p>\n\n<p>That's what Camel is, at bottom.  We can flesh out the description by noting that it provides for EIP-type middleware.</p>\n\n<p>It doesn't provide the middleware itself, since it can't know the details of what the applications need to communicate.  But it provides the API for creating the invariant parts of that middleware (create a start point, create an end point, create conditions for starting and ending, etc)</p>\n\n<p>Hope that helps.</p>\n", "title": "What exactly is Apache Camel?", "answer_id": 32458754, "link": "http://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel/32458754#32458754", "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>Yes, this is probably a bit late. But one thing to add to everyone else's comments is that, Camel is actually a toolbox rather than a complete set of features. You should bear this in mind when developing and need to do various transformations and protocol conversions. </p>\n\n<p>Camel itself relies on other frameworks and therefore sometimes you need to understand those as well in order to understand which is best suited for your needs. There are for example multiple ways to handle REST. This can get a bit confusing at first, but once you starting using and testing you will feel at ease and your knowledge of the different concepts will increase.</p>\n", "title": "What exactly is Apache Camel?", "answer_id": 32709196, "link": "http://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel/32709196#32709196", "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<blockquote>\n  <p>What exactly is it?</p>\n</blockquote>\n\n<p><em>Apache Camel</em> is a lightweight integration framework which implements all Enterprise Integration patterns.You can easily integrate different applications using the required patterns. </p>\n\n<p><em>You can use Java, Spring XML, Scala or Groovy. Almost every technology you can imagine is available, for example HTTP, FTP, JMS, EJB, JPA, RMI, JMS, JMX, LDAP, Netty etc.</em> </p>\n\n<p>Have a look at this <a href=\"https://dzone.com/articles/when-use-apache-camel\" rel=\"nofollow\">article</a> and <a href=\"http://camel.apache.org/enterprise-integration-patterns.html\" rel=\"nofollow\">EIP pattern article</a> </p>\n\n<blockquote>\n  <p>How does it interact with an application written in Java?</p>\n</blockquote>\n\n<p>Camel uses a <em>Java Domain Specific Language or DSL</em> for creating Enterprise Integration Patterns or Routes in a variety of domain-specific languages (DSL) as listed below.</p>\n\n<p><em>Java DSL</em> - A Java based DSL using the fluent builder style.</p>\n\n<p>The story of Enterprise Integration Pattern resolves around these concepts : </p>\n\n<p><em>Message, End Point, Producer, Consumer, Routing, Bus, Transform and Process</em>.</p>\n\n<p>Have a look at this <a href=\"http://www.javaworld.com/article/2078883/open-source-tools/java-tip-write-an-soa-integration-layer-with-apache-camel.html\" rel=\"nofollow\">article</a> By Anirban Konar  for one of real time use cases.</p>\n\n<blockquote>\n  <p>Is it something that goes together with the server?</p>\n</blockquote>\n\n<p>It acts as a bridge across multiple enterprise sub systems.</p>\n\n<blockquote>\n  <p>Is it an independent program?</p>\n</blockquote>\n\n<p>Apache Camel, an integration framework, integrates different independent applications. </p>\n\n<p><em>The major advantage of Camel</em> : You can integrate different applications with different technologies (and different protocols) by using same same concepts for every integration. </p>\n", "title": "What exactly is Apache Camel?", "answer_id": 34154102, "link": "http://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel/34154102#34154102", "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}, {"body": "<p>In plane english, camel gets (many) things done without much of boiler plate code.</p>\n\n<p>Just to give you a perspective, the java DSL given below will create a REST endpoint which will be able to accept an XML consisting of List of Products and splits it into multiple products and invoke Process method of BrandProcessor with it. \nAnd just by adding .parallelProcessing (note the commented out part) it will parallel process all the Product Objects. (Product class is JAXB/XJC generated Java stub from the XSD which the input xml is confined to.) This much code (along with few Camel dependencies) will get the job done which used to take 100s of lines of Java code.</p>\n\n<pre><code>from(\"servlet:item-delta?matchOnUriPrefix=true&amp;httpMethodRestrict=POST\").split(stax(Product.class))/*.parallelProcessing()*/.process(itemDeltaProcessor);\n</code></pre>\n\n<p>After Adding the route ID and Logging statement</p>\n\n<pre><code>from(\"servlet:item-delta?matchOnUriPrefix=true&amp;httpMethodRestrict=POST\")\n.routeId(\"Item-DeltaRESTRoute\")\n.log(LoggingLevel.INFO, \"Item Delta received on Item-DeltaRESTRoute\")\n.split(stax(Product.class))\n.parallelProcessing()\n.process(itemDeltaProcessor);\n</code></pre>\n\n<p>This is just a sample, Camel is much more than just REST end point. Just take a look the pluggable component list <a href=\"http://camel.apache.org/components.html\" rel=\"nofollow\">http://camel.apache.org/components.html</a></p>\n", "title": "What exactly is Apache Camel?", "answer_id": 37219754, "link": "http://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel/37219754#37219754", "tags": ["java", "apache-camel", "soa", "enterprise-integration"]}], "question_id": 8845186}, {"body": "<p>In the following program you can see that for each value slightly less that <code>.5</code> is rounded down, except for <code>0.5</code>.</p>\n\n<pre><code>for (int i = 10; i &gt;= 0; i--) {\n    long l = Double.doubleToLongBits(i + 0.5);\n    double x;\n    do {\n        x = Double.longBitsToDouble(l);\n        System.out.println(x + \" rounded is \" + Math.round(x));\n        l--;\n    } while (Math.round(x) &gt; i);\n}\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>10.5 rounded is 11\n10.499999999999998 rounded is 10\n9.5 rounded is 10\n9.499999999999998 rounded is 9\n8.5 rounded is 9\n8.499999999999998 rounded is 8\n7.5 rounded is 8\n7.499999999999999 rounded is 7\n6.5 rounded is 7\n6.499999999999999 rounded is 6\n5.5 rounded is 6\n5.499999999999999 rounded is 5\n4.5 rounded is 5\n4.499999999999999 rounded is 4\n3.5 rounded is 4\n3.4999999999999996 rounded is 3\n2.5 rounded is 3\n2.4999999999999996 rounded is 2\n1.5 rounded is 2\n1.4999999999999998 rounded is 1\n0.5 rounded is 1\n0.49999999999999994 rounded is 1\n0.4999999999999999 rounded is 0\n</code></pre>\n\n<p>I am using Java 6 update 31.</p>\n", "tags": ["java", "floating-point", "double", "rounding"], "title": "Why does Math.round(0.49999999999999994) return 1", "answer_count": 5, "creation_date": 1332919827, "score": 472, "link": "http://stackoverflow.com/questions/9902968/why-does-math-round0-49999999999999994-return-1", "answers": [{"body": "<p><strong>Summary</strong></p>\n\n<p>In Java 6 (and presumably earlier), <code>round(x)</code> is implemented as <code>floor(x+0.5)</code>.<sup>1</sup>   This is a specification bug, for precisely this one pathological case.<sup>2</sup>  Java 7 no longer mandates this broken implementation.<sup>3</sup></p>\n\n<p><strong>The problem</strong></p>\n\n<p>0.5+0.49999999999999994 is exactly 1 in double precision:</p>\n\n<pre><code>static void print(double d) {\n    System.out.printf(\"%016x\\n\", Double.doubleToLongBits(d));\n}\n\npublic static void main(String args[]) {\n    double a = 0.5;\n    double b = 0.49999999999999994;\n\n    print(a);      // 3fe0000000000000\n    print(b);      // 3fdfffffffffffff\n    print(a+b);    // 3ff0000000000000\n    print(1.0);    // 3ff0000000000000\n}\n</code></pre>\n\n<p>This is because 0.49999999999999994 has a smaller exponent than 0.5, so when they're added, its mantissa is shifted, and the ULP gets bigger.</p>\n\n<p><strong>The solution</strong></p>\n\n<p>Since Java 7, OpenJDK (for example) implements it thus:<sup>4</sup></p>\n\n<pre><code>public static long round(double a) {\n    if (a != 0x1.fffffffffffffp-2) // greatest double value less than 0.5\n        return (long)floor(a + 0.5d);\n    else\n        return 0;\n}\n</code></pre>\n\n<hr>\n\n<p><sub>\n1. <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#round%28double%29\">http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#round%28double%29</a>\n</sub></p>\n\n<p><sub>\n2. <a href=\"http://bugs.java.com/bugdatabase/view_bug.do?bug_id=6430675\">http://bugs.java.com/bugdatabase/view_bug.do?bug_id=6430675</a> (credits to @SimonNickerson for finding this)\n</sub></p>\n\n<p><sub>\n3. <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#round%28double%29\">http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#round%28double%29</a>\n</sub></p>\n\n<p><sub>\n4. <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7u40-b43/java/lang/Math.java#Math.round%28double%29\">http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7u40-b43/java/lang/Math.java#Math.round%28double%29</a>\n</sub></p>\n", "title": "Why does Math.round(0.49999999999999994) return 1", "answer_id": 9903075, "link": "http://stackoverflow.com/questions/9902968/why-does-math-round0-49999999999999994-return-1/9903075#9903075", "tags": ["java", "floating-point", "double", "rounding"]}, {"body": "<p>I've got the same on jdk 1.6 32bit, but on java 7 64bit I've go 0 for 0.49999999999999994 rounded is 0 and the last line is not printed. It seems to be VM issue, however, using floating points, you should expect the results to differ a bit on various environments (CPU, 32- or 64-bit mode)</p>\n\n<p>And, when using <code>round</code> or inverting matrixes or etc., this <em>bits</em> can make a huge difference.</p>\n\n<p>x64 output:</p>\n\n<pre><code>10.5 rounded is 11\n10.499999999999998 rounded is 10\n9.5 rounded is 10\n9.499999999999998 rounded is 9\n8.5 rounded is 9\n8.499999999999998 rounded is 8\n7.5 rounded is 8\n7.499999999999999 rounded is 7\n6.5 rounded is 7\n6.499999999999999 rounded is 6\n5.5 rounded is 6\n5.499999999999999 rounded is 5\n4.5 rounded is 5\n4.499999999999999 rounded is 4\n3.5 rounded is 4\n3.4999999999999996 rounded is 3\n2.5 rounded is 3\n2.4999999999999996 rounded is 2\n1.5 rounded is 2\n1.4999999999999998 rounded is 1\n0.5 rounded is 1\n0.49999999999999994 rounded is 0\n</code></pre>\n", "title": "Why does Math.round(0.49999999999999994) return 1", "answer_id": 9903125, "link": "http://stackoverflow.com/questions/9902968/why-does-math-round0-49999999999999994-return-1/9903125#9903125", "tags": ["java", "floating-point", "double", "rounding"]}, {"body": "<p>This appears to be a known bug (<a href=\"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6430675\">Java bug 6430675: Math.round has surprising behavior for 0x1.fffffffffffffp-2</a>) which has been fixed in Java 7.</p>\n", "title": "Why does Math.round(0.49999999999999994) return 1", "answer_id": 9903269, "link": "http://stackoverflow.com/questions/9902968/why-does-math-round0-49999999999999994-return-1/9903269#9903269", "tags": ["java", "floating-point", "double", "rounding"]}, {"body": "<p>source code in JDK 6</p>\n\n<pre><code>public static long round(double a) {\n    return (long)Math.floor(a + 0.5d);\n}\n</code></pre>\n\n<p>source code in JDK 7</p>\n\n<pre><code>public static long round(double a) {\n    if (a != 0x1.fffffffffffffp-2) { \n        // a is not the greatest double value less than 0.5\n        return (long)Math.floor(a + 0.5d);\n    } else {\n        return 0; \n    }\n}\n</code></pre>\n\n<p>When the value is 0.49999999999999994d, in JDK 6, it will call <strong>floor</strong> and hence returns 1 but in JDK 7, the if condition is checking whether the number is greatest double value less than 0.5 or not. As in this case the number is not the greatest double value less than 0.5, so else block returns 0.</p>\n\n<p>You can try 0.49999999999999999d, which will return 1 but not 0, because this is the greatest double value less than 0.5.</p>\n", "title": "Why does Math.round(0.49999999999999994) return 1", "answer_id": 9903777, "link": "http://stackoverflow.com/questions/9902968/why-does-math-round0-49999999999999994-return-1/9903777#9903777", "tags": ["java", "floating-point", "double", "rounding"]}, {"body": "<p>The answer hereafter is an excerpt of an oracle bug report at <a href=\"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6430675\">http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6430675</a>. Visit the link for the full explanation.</p>\n\n<p><strong>The methods {Math, StrictMath.round are operationally defined as</strong></p>\n\n<pre><code>(long)Math.floor(a + 0.5d)\n</code></pre>\n\n<p>for double arguments.  While this definition usually works as expected, it gives the surprising result of 1, rather than 0, for 0x1.fffffffffffffp-2 (0.49999999999999994).</p>\n\n<p>The value 0.49999999999999994 is the greatest floating-point value less than 0.5.  As a hexadecimal floating-point literal its value is 0x1.fffffffffffffp-2, which is equal to (2 - 2^52) * 2^-2. == (0.5 - 2^54).  Therefore, the exact value of the sum</p>\n\n<pre><code>(0.5 - 2^54) + 0.5\n</code></pre>\n\n<p>is 1 - 2^54.  This is halfway between the two adjacent floating-point numbers (1 - 2^53) and 1.  In the IEEE 754 arithmetic round to nearest even rounding mode used by Java, when a floating-point results is inexact, the closer of the two representable floating-point values which bracket the exact result must be returned; if both values are equally close, the one which its last bit zero is returned.  In this case the correct return value from the add is 1, not the greatest value less than 1.</p>\n\n<p>While the method is operating as defined, the behavior on this input is very surprising; the specification coudl be ameneded to something more like \"Round to the closest long, rounding ties up,\" which would allow the behavior on this input to be changed.</p>\n", "title": "Why does Math.round(0.49999999999999994) return 1", "answer_id": 16938560, "link": "http://stackoverflow.com/questions/9902968/why-does-math-round0-49999999999999994-return-1/16938560#16938560", "tags": ["java", "floating-point", "double", "rounding"]}], "question_id": 9902968}, {"body": "<p>I understand that JPA 2 is a specification and Hibernate is a tool for ORM. Also, I understand that Hibernate has more features than JPA 2. But from a practical point of view, what really is the difference? </p>\n\n<p>I have experience using iBatis and now I'm trying to learn either Hibernate or JPA2. I picked up Pro JPA2 book and it keeps referring to \"JPA provider\". For example:</p>\n\n<blockquote>\n  <p>If you think a feature should be standardized, you should speak up\n  and request it from your JPA provider</p>\n</blockquote>\n\n<p>This confuses me so I have a few questions:</p>\n\n<ul>\n<li>Using JPA2 alone can I fetch data from DB by simply annotating my POJO's</li>\n<li>Is JPA2 supposed to be used with a \"JPA Provider\" e.g TopLink or Hibernate? If so, then what's the benefit of using JPA2 + Hibernate as compared to Hibernate alone?</li>\n<li>Can you recommend a good practical JPA2 book. \"Pro JPA2\" seems more like a bible and reference on JPA2 (It doesn't get into Queries until the later half of the book). Is there a book that takes a problem/solution approach to JPA2?</li>\n</ul>\n", "tags": ["java", "hibernate", "java-ee", "orm", "jpa-2.0"], "title": "What&#39;s the difference between JPA and Hibernate?", "answer_count": 18, "creation_date": 1332806679, "score": 429, "link": "http://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate", "answers": [{"body": "<p>As you state JPA is just a specification, meaning there is no implementation.  You can annotate your classes as much as you would like with JPA annotations, however without an implementation nothing will happen.  Think of JPA as the guidelines that must be followed or an interface, while Hibernate's JPA implementation is code that meets the API as defined by the JPA specification and provides the under the hood functionality.</p>\n\n<p>When you use Hibernate with JPA you are actually using the Hibernate JPA implementation.  The benefit of this is that you can swap out Hibernate's implementation of JPA for another implementation of the JPA specification.  When you use straight Hibernate you are locking into the implementation because other ORMs may use different methods/configurations and annotations, therefore you cannot just switch over to another ORM.</p>\n\n<p>For a more detailed explanation of this answer read my <a href=\"http://blog-tothought.rhcloud.com//post/2\">blog entry</a>.</p>\n", "title": "What&#39;s the difference between JPA and Hibernate?", "answer_id": 9881640, "link": "http://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate/9881640#9881640", "tags": ["java", "hibernate", "java-ee", "orm", "jpa-2.0"]}, {"body": "<p>From the <a href=\"http://en.wikipedia.org/wiki/Java_Persistence_API\">Wiki</a>.</p>\n\n<blockquote>\n  <p><strong>Motivation for creating the Java Persistence API</strong></p>\n  \n  <p>Many enterprise Java developers use lightweight persistent objects provided by open-source frameworks or Data Access Objects instead of entity beans: entity beans and enterprise beans had a reputation of being too heavyweight and complicated, and one could only use them in Java EE application servers. Many of the features of the third-party persistence frameworks were incorporated into the Java Persistence API, and as of 2006 projects like Hibernate (version 3.2) and Open-Source Version TopLink Essentials have become implementations of the Java Persistence API.</p>\n</blockquote>\n\n<p>As told in the <a href=\"http://jcp.org/aboutJava/communityprocess/final/jsr317/index.html\">JCP page</a> the Eclipse link is the Reference Implementation for JPA. Have look at <a href=\"http://stackoverflow.com/questions/4477082/what-is-a-jpa-implementation\">this answer</a> for bit more on this.</p>\n\n<p><strong>JPA</strong> itself has features that will make up for a standard ORM framework. Since JPA is a part of Java EE spec, you can use JPA alone in a project and it should work with any <a href=\"http://www.oracle.com/technetwork/java/javaee/overview/compatibility-jsp-136984.html\">Java EE compatible Servers</a>. Yes, these servers will have the implementations for the JPA spec.</p>\n\n<p>Hibernate is the most popular <strong>ORM</strong> framework, once the <strong>JPA</strong> got introduced hibernate conforms to the <strong>JPA</strong> specifications. Apart from the basic set of specification that it should follow hibernate provides whole lot of additional stuff. </p>\n", "title": "What&#39;s the difference between JPA and Hibernate?", "answer_id": 9883017, "link": "http://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate/9883017#9883017", "tags": ["java", "hibernate", "java-ee", "orm", "jpa-2.0"]}, {"body": "<p>JPA is a specification to standardize ORM-APIs. Hibernate is a vendor of a JPA implementation. So if you use JPA with hibernate, you can use the standard JPA API, hibernate will be under the hood, offering some more non standard functions.\nSee <a href=\"http://docs.jboss.org/hibernate/stable/entitymanager/reference/en/html_single/\">http://docs.jboss.org/hibernate/stable/entitymanager/reference/en/html_single/</a> and <a href=\"http://docs.jboss.org/hibernate/stable/annotations/reference/en/html_single/\">http://docs.jboss.org/hibernate/stable/annotations/reference/en/html_single/</a></p>\n", "title": "What&#39;s the difference between JPA and Hibernate?", "answer_id": 9883153, "link": "http://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate/9883153#9883153", "tags": ["java", "hibernate", "java-ee", "orm", "jpa-2.0"]}, {"body": "<p>JPA is just a specification which needs concrete implementation.\nThe <strong>default implementation oracle</strong> provide is \"Eclipselink\" now. (Toplink is donated by Oracle to Eclipse foundation to merge with eclipselink)</p>\n\n<p>(Reference :  <a href=\"http://www.oracle.com/technetwork/middleware/toplink/index-085257.html\">http://www.oracle.com/technetwork/middleware/toplink/index-085257.html</a> \n               <a href=\"http://www.eclipse.org/org/press-release/20080317_Eclipselink.php\">http://www.eclipse.org/org/press-release/20080317_Eclipselink.php</a>\n)</p>\n\n<p>Using Eclipselink, one can be sure that the code is portable to any implementation if need arises.\nHibernate is also a full  JPA implementation + MORE ( Sort of JPA Plus). Hibernate is super set of JPA with some extra Hibernate specific functionality.\nSo app developed in Hibernate may not be compatible when switched to other implementation.\nStill hibernate is choice of majority of developers as JPA implementation and widely used.</p>\n\n<p>Another JPA implementation is OpenJPA (openjpa.apache.org)  which is an extension of Kodo implementation.</p>\n", "title": "What&#39;s the difference between JPA and Hibernate?", "answer_id": 20280401, "link": "http://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate/20280401#20280401", "tags": ["java", "hibernate", "java-ee", "orm", "jpa-2.0"]}, {"body": "<p>JPA is a Java API specification which describes the management of relational data in applications using Java Platform. where as Hibernate is a ORM (Object Relational Mapping) library which follows JPA specification. </p>\n\n<p>You can think JPA as a set of Rules which is implemented by Hibernate.</p>\n", "title": "What&#39;s the difference between JPA and Hibernate?", "answer_id": 20855635, "link": "http://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate/20855635#20855635", "tags": ["java", "hibernate", "java-ee", "orm", "jpa-2.0"]}, {"body": "<p>JPA is the dance, Hibernate is the dancer.</p>\n", "title": "What&#39;s the difference between JPA and Hibernate?", "answer_id": 21533643, "link": "http://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate/21533643#21533643", "tags": ["java", "hibernate", "java-ee", "orm", "jpa-2.0"]}, {"body": "<p>Some things are too hard to understand without a historical perspective of the language and understanding of the JCP.</p>\n\n<p>Often there are third parties that develop packages that perform a function or fill a gap that are not part of the official JDK. For various reasons that function may become part of the Java JDK through the JCP (Java Community Process)</p>\n\n<p>Hibernate (in 2003) provided a way to abstract SQL and allow developers to think more in terms of persisting objects (ORM). You notify hibernate about your Entity objects and it automatically generates the strategy to persist them. Hibernate provided an implementation to do this and the API to drive the implementation either through XML config or annotations.</p>\n\n<p>The fundamental issue now is that your code becomes tightly coupled with a specific vendor(Hibernate) for what a lot of people thought should be more generic. Hence the need for a generic persistence API.</p>\n\n<p>Meanwhile, the JCP with a lot of input from Hibernate and other ORM tool vendors was developing JSR 220 (Java Specification Request) which resulted in JPA 1.0 (2006) and eventually JSR 317 which is JPA 2.0 (2009). These are specifications of a generic Java Persistence API. The API is provided in the JDK as a set of interfaces so that your classes can depend on the javax.persistence and not worry about the particular vendor that is doing the work of persisting your objects. This is only the API and not the implementation. Hibernate now becomes one of the many vendors that implement the JPA 2.0 specification. You can code toward JPA and pick whatever compliant ORM vendor suits your needs.</p>\n\n<p>There are cases where Hibernate may give you features that are not codified in JPA. In this case, you can choose to insert a Hibernate specific annotation directly in your class since JPA does not provide the interface to do that thing.</p>\n\n<p>Source: <a href=\"http://www.reddit.com/r/java/comments/16ovek/understanding_when_to_use_jpa_vs_hibernate/\">http://www.reddit.com/r/java/comments/16ovek/understanding_when_to_use_jpa_vs_hibernate/</a></p>\n", "title": "What&#39;s the difference between JPA and Hibernate?", "answer_id": 21993987, "link": "http://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate/21993987#21993987", "tags": ["java", "hibernate", "java-ee", "orm", "jpa-2.0"]}, {"body": "<p>JPA is just a specification.In market there are many vendors which implements JPA. Different types of vendors implement JPA in different way. so different types of vendors provide different functionality so choose proper vendor based on your requirements.</p>\n\n<p>If you are using Hibernate or any other vendors instead of JPA than you can not easily move to hibernate to EclipseLink or OpenJPA to Hibernate.But If you using JPA than you just have to change provide in persistence XML file.So migration is easily possible in JPA.</p>\n", "title": "What&#39;s the difference between JPA and Hibernate?", "answer_id": 22931843, "link": "http://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate/22931843#22931843", "tags": ["java", "hibernate", "java-ee", "orm", "jpa-2.0"]}, {"body": "<p>Here is a one of the best article read on the subject. In this long 7 page article the difference with pros / cons between iBatis/Hibernate/JPA being described. </p>\n\n<p>Kudos to the article contributors</p>\n\n<p>For JPA spec section start reading from Page 5.. else start from scratch from here :</p>\n\n<p><a href=\"http://www.javaworld.com/article/2077875/open-source-tools/ibatis--hibernate--and-jpa--which-is-right-for-you-.html\" rel=\"nofollow\">http://www.javaworld.com/article/2077875/open-source-tools/ibatis--hibernate--and-jpa--which-is-right-for-you-.html</a></p>\n", "title": "What&#39;s the difference between JPA and Hibernate?", "answer_id": 23196513, "link": "http://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate/23196513#23196513", "tags": ["java", "hibernate", "java-ee", "orm", "jpa-2.0"]}, {"body": "<p>Java - its independence is not only from the operating system, but also from the vendor. </p>\n\n<p>Therefore, you <em>should be</em> able to deploy your application on different application servers.\nJPA is implemented in any Java EE- compliant application server and it allows to swap application servers, but then the implementation is also changing. A Hibernate application <em>may be</em> easier to deploy on a different application server.</p>\n", "title": "What&#39;s the difference between JPA and Hibernate?", "answer_id": 25017152, "link": "http://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate/25017152#25017152", "tags": ["java", "hibernate", "java-ee", "orm", "jpa-2.0"]}, {"body": "<p>Hibernate is a JPA provider.</p>\n\n<p>The page <a href=\"http://www.javabeat.net/jpa-vs-hibernate/#sthash.CB5R3vsY.dpuf\">JPA Vs Hibernate</a> by Krishna Srinivasan  says:</p>\n\n<blockquote>\n  <p>JPA is a specification for accessing, persisting and managing the data between Java objects and the relational database. As the definition says its API, it is only the specification. There is no implementation for the API. JPA specifies the set of rules and guidelines for developing the interfaces that follows standard. Straight to the point : JPA is just guidelines to implement the Object Relational Mapping (ORM)  and there is no underlying code for the implementation.\n  Where as, Hibernate is the actual implementation of JPA guidelines. When hibernate implements the JPA specification, this will be certified by the JPA group upon following all the standards mentioned in the specification. For example, JPA guidelines would provide information of mandatory and optional features to be implemented as part of the JPA implementation.</p>\n</blockquote>\n", "title": "What&#39;s the difference between JPA and Hibernate?", "answer_id": 25806383, "link": "http://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate/25806383#25806383", "tags": ["java", "hibernate", "java-ee", "orm", "jpa-2.0"]}, {"body": "<p>JPA and Hibernate Difference</p>\n\n<p>JPA is a specification for accessing, persisting and managing the data between Java objects and the relational database. As the definition says its API, it is only the specification. There is no implementation for the API. JPA specifies the set of rules and guidelines for developing the interfaces that follows standard. Straight to the point : JPA is just guidelines to implement the Object Relational Mapping (ORM)  and there is no underlying code for the implementation.</p>\n\n<p>Where as, Hibernate is the actual implementation of JPA guidelines. When hibernate implements the JPA specification, this will be certified by the JPA group upon following all the standards mentioned in the specification. For example, JPA guidelines would provide information of mandatory and optional features to be implemented as part of the JPA implementation.</p>\n\n<p>Hibernate is a JPA provider. When there is new changes to the specification, hibernate would release its updated implementation for the JPA specification. </p>\n", "title": "What&#39;s the difference between JPA and Hibernate?", "answer_id": 26778577, "link": "http://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate/26778577#26778577", "tags": ["java", "hibernate", "java-ee", "orm", "jpa-2.0"]}, {"body": "<p><a href=\"http://www.oracle.com/technetwork/java/javaee/tech/persistence-jsp-140049.html\">JPA</a> is the interface while Hibernate is the implementation.</p>\n\n<p>Traditionally there have been multiple Java ORM solutions:</p>\n\n<ul>\n<li><a href=\"http://hibernate.org/orm/documentation/\">Hibernate</a></li>\n<li><a href=\"http://en.wikipedia.org/wiki/TopLink\">TopLink</a></li>\n<li><a href=\"http://en.wikipedia.org/wiki/Java_Data_Objects\">JDO</a></li>\n</ul>\n\n<p>each implementation defining its own mapping definition or client API. The JPA expert group gathered the best of all these tools and so they created the Java Persistence API standard.</p>\n\n<p>A standard persistence API is very convenient from a client point of view, making it <em>relatively</em> easy to switch one implementation with the other (although in practice it's not that simple, because on large projects you'll have to use specific non-standard features anyway).</p>\n\n<p>The standard JPA has pushed Java ORM competition to a new level and this can only lead to better implementations.</p>\n\n<p><a href=\"https://leanpub.com/high-performance-java-persistence/read#leanpub-auto-jpa-vs-hibernate\">Hibernate offers features that are not yet supported by JPA</a>:</p>\n\n<ul>\n<li>extended identifier generators (<a href=\"https://vladmihalcea.com/2014/06/23/the-hilo-algorithm/\">hi/lo</a>, <a href=\"http://vladmihalcea.com/2014/07/15/from-jpa-to-hibernates-legacy-and-enhanced-identifier-generators/\">pooled, pooled-lo</a>)</li>\n<li>transparent prepared statement batching</li>\n<li>customizable CRUD (<code>@SQLInsert</code>, <code>@SQLUpdate</code>, <code>@SQLDelete</code>) statements</li>\n<li>static or dynamic collection filters (e.g. <code>@FilterDef</code>, <code>@Filter</code>, <code>@Where</code>) and entity filters (e.g. <code>@Where</code>)</li>\n<li>mapping properties to SQL fragments (e.g. <code>@Formula</code>)</li>\n<li>immutable entities (e.g. <code>@Immutable</code>)</li>\n<li><a href=\"https://vladmihalcea.com/2016/01/19/how-does-jpa-and-hibernate-define-the-auto-flush-mode/\">more flush modes (e.g. <code>FlushMode.MANUAL</code>, <code>FlushMode.ALWAYS</code>)</a></li>\n<li>querying the second-level cache by the natural key of a given entity</li>\n<li>entity-level cache concurrency strategies\n(e.g. <a href=\"https://vladmihalcea.com/2015/05/25/how-does-hibernate-read_write-cacheconcurrencystrategy-work/\"><code>Cache(usage = CacheConcurrencyStrategy.READ_WRITE)</code></a>)</li>\n<li>versioned bulk updates through HQL</li>\n<li>exclude fields from optimistic locking check (e.g. <code>@OptimisticLock(excluded = true)</code>)</li>\n<li><a href=\"https://vladmihalcea.com/2014/12/08/the-downside-of-version-less-optimistic-locking/\">versionless optimistic locking</a> (e.g. <code>OptimisticLockType.ALL</code>, <code>OptimisticLockType.DIRTY</code>)</li>\n<li>support for skipping (without waiting) pessimistic lock requests</li>\n<li>support for Java 8 Date and Time</li>\n<li>support for multitenancy</li>\n</ul>\n\n<p>These extra features allow Hibernate to address many persistence requirements demanded by large enterprise applications.</p>\n", "title": "What&#39;s the difference between JPA and Hibernate?", "answer_id": 26825931, "link": "http://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate/26825931#26825931", "tags": ["java", "hibernate", "java-ee", "orm", "jpa-2.0"]}, {"body": "<p>JPA is the interface, Hibernate is one implementation of that interface.</p>\n", "title": "What&#39;s the difference between JPA and Hibernate?", "answer_id": 29773167, "link": "http://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate/29773167#29773167", "tags": ["java", "hibernate", "java-ee", "orm", "jpa-2.0"]}, {"body": "<p><strong>JPA :</strong> is just like an <em>interface</em> and have no concrete implementation of it to use functions which are there in JPA.</p>\n\n<p><strong>Hibernate :</strong> is just a <em>JPA Provider</em> which have the implementation of the functions in JPA and can have some extra functions which might not be there in JPA. </p>\n\n<p>TIP : you can use</p>\n\n<pre><code>     *combo 1* : JPA + JPA Provider(Hibernate) \n     *combo 2* : only Hiberante which does not need any interface \n</code></pre>\n\n<p><em>Combo 1</em> : is used when you feel that your hibernate is not giving better performance and want to change JPA Provider that time you don't have to write your JPA once again. You can write another JPA Provider ... and can change as many times you can.</p>\n\n<p><em>Combo 2</em> : is used very less as when you are not going change your JPA Provider at any cost.</p>\n\n<p>Visit <a href=\"http://blog-tothought.rhcloud.com//post/2\">http://blog-tothought.rhcloud.com//post/2</a>, where your complete confusion will get clear.</p>\n", "title": "What&#39;s the difference between JPA and Hibernate?", "answer_id": 31783407, "link": "http://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate/31783407#31783407", "tags": ["java", "hibernate", "java-ee", "orm", "jpa-2.0"]}, {"body": "<p>JPA is JSR i.e. Java Specification Requirement to implement Object Relational Mapping which has got no specific code for its implementation. It defines certain set of rules for for accessing, persisting and managing the data between Java objects and the relational databaseWith its introduction, EJB was replaced as It was  criticized for being heavyweight by the Java developer community. \nHibernate is one of the way JPA can be implemented using te guidelines.Hibernate is a high-performance Object/Relational persistence and query service which is licensed under the open source GNU Lesser General Public License (LGPL) .The benefit of this is that you can swap out Hibernate's implementation of JPA for another implementation of the JPA specification. When you use straight Hibernate you are locking into the implementation because other ORMs may use different methods/configurations and annotations, therefore you cannot just switch over to another ORM.</p>\n", "title": "What&#39;s the difference between JPA and Hibernate?", "answer_id": 34283343, "link": "http://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate/34283343#34283343", "tags": ["java", "hibernate", "java-ee", "orm", "jpa-2.0"]}, {"body": "<p>JPA is an API, one which Hibernate implements.Hibernate predates JPA. Before JPA, you write native hibernate code to do your ORM. JPA is just the interface, so now you write JPA code and you need to find an implementation. Hibernate happens to be an implementation.</p>\n\n<p>So your choices are this:\nhibernate, toplink, etc...</p>\n\n<p>The advantage to JPA is that it allows you to swap out your implementation if need be. The disadvantage is that the native hibernate/toplink/etc... API may offer functionality that the JPA specification doesn't support.</p>\n", "title": "What&#39;s the difference between JPA and Hibernate?", "answer_id": 35078171, "link": "http://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate/35078171#35078171", "tags": ["java", "hibernate", "java-ee", "orm", "jpa-2.0"]}, {"body": "<p>While JPA is the specification, Hibernate is the implementation provider that follows the rules dictated in the specification.</p>\n", "title": "What&#39;s the difference between JPA and Hibernate?", "answer_id": 37170492, "link": "http://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate/37170492#37170492", "tags": ["java", "hibernate", "java-ee", "orm", "jpa-2.0"]}], "question_id": 9881611}, {"body": "<p>When I try to download Java from Oracle I instead end up downloading a page telling me that I need agree to the OTN license terms.</p>\n\n<blockquote>\n  <h1>Sorry!</h1>\n  \n  <p>In order to download products from Oracle Technology Network you must agree to the OTN license terms.</p>\n  \n  <p>Be sure that...</p>\n  \n  <ul>\n  <li>Your browser has \"cookies\" and JavaScript enabled.</li>\n  <li>You clicked on \"Accept License\" for the product you wish to download.</li>\n  <li>You attempt the download within 30 minutes of accepting the license.</li>\n  </ul>\n</blockquote>\n\n<p>How can I download and install Java?</p>\n", "tags": ["java", "linux", "install", "wget"], "title": "Downloading Java JDK on Linux via wget is shown license page instead", "answer_count": 16, "creation_date": 1335103390, "score": 376, "link": "http://stackoverflow.com/questions/10268583/downloading-java-jdk-on-linux-via-wget-is-shown-license-page-instead", "answers": [{"body": "<p>Oracle has put a prevention cookie on the download link to force you to agree to the terms even though the license agreement to use Java clearly states that merely by using Java you 'agree' to the license..</p>\n\n<p>The method that Oracle wants is you to download it with an agreement. After that, this script cn be modified for your  specific Linux</p>\n\n<pre><code>#!/bin/bash\n#Author: Yucca Nel http://thejarbar.org\n#Will restart system\n#Modify these variables as needed...\ntempWork=/tmp/work\nlocBin=/usr/local/bin\njavaUsrLib=/usr/lib/jvm\n\nsudo mkdir -p $javaUsrLib\nmkdir -p $tempWork\ncd $tempWork\n\n#Extract the download\ntar -zxvf $downloadDir/jdk*tar.gz\n\n#Move it to where it can be found...\n\nsudo mv -f $tempWork/jdk* $javaUsrLib/\n\nsudo ln -f -s $javaUsrLib/jdk1/bin/* /usr/bin/\n\n#Update this line to reflect versions of JDK...\nexport JAVA_HOME=\"$javaUsrLib/jdk1.7.0_03\"\n#Extract the download\ntar -zxvf $tempWork/*\n\n#Move it to where it can be found...\n\nsudo mv -f $tempWork/jdk1* $javaUsrLib/\n\nsudo ln -f -s $javaUsrLib/jdk1*/bin/* /usr/bin/\nsudo rm -rf $tempWork\n#Update this line to reflect newer versions of JDK...\nexport JAVA_HOME=\"$javaUsrLib/jdk1.7.0_03\"\n\nif ! grep \"JAVA_HOME=$javaUsrLib/jdk1.7.0_03\" /etc/environment\nthen\n    echo \"JAVA_HOME=$javaUsrLib/jdk1.7.0_03\"| sudo tee -a /etc/environment\nfi\n\n\nexit 0\n</code></pre>\n", "title": "Downloading Java JDK on Linux via wget is shown license page instead", "answer_id": 10268587, "link": "http://stackoverflow.com/questions/10268583/downloading-java-jdk-on-linux-via-wget-is-shown-license-page-instead/10268587#10268587", "tags": ["java", "linux", "install", "wget"]}, {"body": "<p><strong>UPDATED FOR JDK 8u102</strong></p>\n\n<p>RPM:</p>\n\n<pre><code>  wget --no-check-certificate --no-cookies --header \"Cookie: oraclelicense=accept-securebackup-cookie\" http://download.oracle.com/otn-pub/java/jdk/8u102-b14/jdk-8u102-linux-x64.rpm\n</code></pre>\n\n<p>TAR GZ: </p>\n\n<pre><code> wget --no-check-certificate --no-cookies --header \"Cookie: oraclelicense=accept-securebackup-cookie\" http://download.oracle.com/otn-pub/java/jdk/8u102-b14/jdk-8u102-linux-x64.tar.gz\n</code></pre>\n\n<p>RPM using curl:</p>\n\n<pre><code> curl -v -j -k -L -H \"Cookie: oraclelicense=accept-securebackup-cookie\" http://download.oracle.com/otn-pub/java/jdk/8u102-b14/jdk-8u102-linux-x64.rpm &gt; jdk-8u102-linux-x64.rpm\n</code></pre>\n\n<p>In all cases above, subst 'i586' for 'x64' to download the 32-bit build.</p>\n\n<ul>\n<li><strong>-j</strong> -> junk cookies</li>\n<li><strong>-k</strong> -> ignore certificates</li>\n<li><strong>-L</strong> -> follow redirects</li>\n<li><strong>-H [arg]</strong> -> headers</li>\n</ul>\n\n<p><code>curl</code> can be used in place of <code>wget</code>.</p>\n\n<p><strong>UPDATE FOR JDK 7u79</strong></p>\n\n<p>TAR GZ:  </p>\n\n<pre><code>wget --no-check-certificate --no-cookies --header \"Cookie: oraclelicense=accept-securebackup-cookie\" http://download.oracle.com/otn-pub/java/jdk/7u79-b15/jdk-7u79-linux-x64.tar.gz\n</code></pre>\n\n<p>RPM using curl:</p>\n\n<pre><code>curl -v -j -k -L -H \"Cookie: oraclelicense=accept-securebackup-cookie\" http://download.oracle.com/otn-pub/java/jdk/7u79-b15/jdk-7u79-linux-x64.rpm &gt; jdk-7u79-linux-x64.rpm\n</code></pre>\n\n<p>Once again, make sure you specify the correct URL for the version you are downloading. You can find the URL here: <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html\">Oracle JDK download site</a></p>\n\n<p><strong>ORIGINAL ANSWER FROM 9th June 2012</strong></p>\n\n<p>If you are looking to download the Oracle JDK from the command line using <code>wget</code>, there is a workaround. Run the <code>wget</code> command as follows:</p>\n\n<pre><code>wget --no-cookies --header \"Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com\" \"http://download.oracle.com/otn-pub/java/jdk/7/jdk-7-linux-x64.tar.gz\"\n</code></pre>\n\n<p>Be sure to replace the download link with the correct one for the version you are downloading.</p>\n", "title": "Downloading Java JDK on Linux via wget is shown license page instead", "answer_id": 10959815, "link": "http://stackoverflow.com/questions/10268583/downloading-java-jdk-on-linux-via-wget-is-shown-license-page-instead/10959815#10959815", "tags": ["java", "linux", "install", "wget"]}, {"body": "<p>This works for the JDK 6, you just need to replace the download url with the latest version.</p>\n\n<pre><code>wget --no-cookies --header \"Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2Ftechnetwork%2Fjava%2Fjavase%2Fdownloads%2Fjdk6-downloads-1637591.html;\" http://download.oracle.com/otn-pub/java/jdk/6u33-b03/jdk-6u33-linux-x64.bin\n</code></pre>\n", "title": "Downloading Java JDK on Linux via wget is shown license page instead", "answer_id": 11015931, "link": "http://stackoverflow.com/questions/10268583/downloading-java-jdk-on-linux-via-wget-is-shown-license-page-instead/11015931#11015931", "tags": ["java", "linux", "install", "wget"]}, {"body": "<p>Downloading Java from the command line has always been troublesome. What I have been doing reciently is to use FireFox (other browsers might work) to get a download started on my laptop, pause it (within the Downloads windows), use the \"Copy Download Link\" menu item of the context menu displayed for the downloading file. This URL can then be used on the Linux box to download the same file. I expect the URL has a short time to live. Ugly, but generally successful.</p>\n", "title": "Downloading Java JDK on Linux via wget is shown license page instead", "answer_id": 11209953, "link": "http://stackoverflow.com/questions/10268583/downloading-java-jdk-on-linux-via-wget-is-shown-license-page-instead/11209953#11209953", "tags": ["java", "linux", "install", "wget"]}, {"body": "<p>I know that Oracle made everything possible to make their Java Runtime and Java SDK as hard as possible.</p>\n\n<p>Here are some guides for command line lovers.</p>\n\n<p>For Debian like systems (tested on <code>Debian</code> squeeze and <code>Ubuntu</code> 12.x+)</p>\n\n<pre><code>su -\necho \"deb http://ppa.launchpad.net/webupd8team/java/ubuntu precise main\" | tee -a /etc/apt/sources.list\necho \"deb-src http://ppa.launchpad.net/webupd8team/java/ubuntu precise main\" | tee -a /etc/apt/sources.list\napt-key adv --keyserver keyserver.ubuntu.com --recv-keys EEA14886\napt-get update\napt-get install --yes oracle-java7-installer\nexit\n</code></pre>\n\n<p>Note: if you know a better or easier way add a comment, I will update the guide.</p>\n", "title": "Downloading Java JDK on Linux via wget is shown license page instead", "answer_id": 13347087, "link": "http://stackoverflow.com/questions/10268583/downloading-java-jdk-on-linux-via-wget-is-shown-license-page-instead/13347087#13347087", "tags": ["java", "linux", "install", "wget"]}, {"body": "<p>latest tested,</p>\n\n<blockquote>\n  <p>wget --no-cookies --no-check-certificate --header \"Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com\" \"<a href=\"https://edelivery.oracle.com/otn-pub/java/jdk/7u25-b15/jdk-7u25-linux-x64.tar.gz\">https://edelivery.oracle.com/otn-pub/java/jdk/7u25-b15/jdk-7u25-linux-x64.tar.gz</a>\"</p>\n</blockquote>\n\n<p>Be aware that certificate check is disabled if you care about absolute security. : )</p>\n", "title": "Downloading Java JDK on Linux via wget is shown license page instead", "answer_id": 17290992, "link": "http://stackoverflow.com/questions/10268583/downloading-java-jdk-on-linux-via-wget-is-shown-license-page-instead/17290992#17290992", "tags": ["java", "linux", "install", "wget"]}, {"body": "<p>Why not click to download from your browser then copy &amp; paste the exact link where it was downloaded, for example: </p>\n\n<pre><code>wget http://download.oracle.com/otn-pub/java/jdk/7u40-b43/jdk-7u40-linux-x64.tar.gz?AuthParam=1380225131_dd70d2038c57a4729d8c0226684xxxx\n</code></pre>\n\n<p>You can find out the link by looking at the network tab of your browser after accepting terms in oracle and clicking to download. F12 in Chrome. Firebug in Firefox.</p>\n", "title": "Downloading Java JDK on Linux via wget is shown license page instead", "answer_id": 19037455, "link": "http://stackoverflow.com/questions/10268583/downloading-java-jdk-on-linux-via-wget-is-shown-license-page-instead/19037455#19037455", "tags": ["java", "linux", "install", "wget"]}, {"body": "<pre><code>sudo wget --no-check-certificate --no-cookies --header \"Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com\" \"http://download.oracle.com/otn-pub/java/jdk/7u45-b18/jdk-7u45-linux-x64.rpm\"\n</code></pre>\n", "title": "Downloading Java JDK on Linux via wget is shown license page instead", "answer_id": 20424827, "link": "http://stackoverflow.com/questions/10268583/downloading-java-jdk-on-linux-via-wget-is-shown-license-page-instead/20424827#20424827", "tags": ["java", "linux", "install", "wget"]}, {"body": "<p>All of the above seem to assume you know the URL for the latest Java RPM...</p>\n\n<p>Oracle provide persistent links to the <em>latest</em> updates of each Java version as documented at\n<a href=\"https://support.oracle.com/epmos/faces/DocumentDisplay?_afrLoop=397248601136938&amp;id=1414485.1\" rel=\"nofollow\">https://support.oracle.com/epmos/faces/DocumentDisplay?_afrLoop=397248601136938&amp;id=1414485.1</a> - though you need to create/log in to an Oracle Support account. *Otherwise you can only access the last \"public\" update of each Java version, e.g. 1.6_u45 (Mar 2013; Latest update is u65, Oct 2013)*</p>\n\n<p>Once you <strong>know</strong> the persistent link, you should be able to resolve it to the real download;\nThe following works for me, though I don't yet know if the \"aru\" reference changes.</p>\n\n<pre><code>ME=&lt;myOracleID&gt;\nPW=&lt;myOraclePW&gt;\nPATCH_FILE=p13079846_17000_Linux-x86-64.zip\n\necho \"Get real URL from the persistent link\"\n\nwget -o getrealurl.out --no-cookies --no-check-certificate --user=$ME \\\n--password=$PW --header \"Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com\" \\\nhttps://updates.oracle.com/Orion/Services/download/$PATCH_FILE?aru=16884382&amp;\\\npatch_file=$PATCH_FILE\n\nwait    # wget appears to go into background, so \"wait\" waits \n        # until all background processes complete\n\nREALURL=`grep \"^--\" getrealurl.out |tail -1 |sed -e 's/.*http/http/'`\nwget -O $PATCH_FILE $REALURL\n#These last steps must be done quickly, as the REALURL seems to have a short-lived \n#cookie on it and I've had no success with  --keep-session-cookies etc.\n</code></pre>\n", "title": "Downloading Java JDK on Linux via wget is shown license page instead", "answer_id": 20705933, "link": "http://stackoverflow.com/questions/10268583/downloading-java-jdk-on-linux-via-wget-is-shown-license-page-instead/20705933#20705933", "tags": ["java", "linux", "install", "wget"]}, {"body": "<p>Try </p>\n\n<pre><code>wget --no-cookies --header \"Cookie: s_nr=1359635827494; s_cc=true; gpw_e24=http%3A%2F%2Fwww.oracle.com%2Ftechnetwork%2Fjava%2Fjavase%2Fdownloads%2Fjdk6downloads-1902814.html; s_sq=%5B%5BB%5D%5D; gpv_p24=no%20value\" http://download.oracle.com/otn-pub/java/jdk/6u45-b06/jdk-6u45-linux-x64-rpm.bin --no-check-certificate -O ./jdk-6u45-linux-x64-rpm.bin\n</code></pre>\n\n<p>if you are like me trying to get Oracle JDK 6. </p>\n\n<p>source: <a href=\"https://gist.github.com/hgomez/4697585\" rel=\"nofollow\">Oracle JVM download using curl/wget</a></p>\n", "title": "Downloading Java JDK on Linux via wget is shown license page instead", "answer_id": 21653625, "link": "http://stackoverflow.com/questions/10268583/downloading-java-jdk-on-linux-via-wget-is-shown-license-page-instead/21653625#21653625", "tags": ["java", "linux", "install", "wget"]}, {"body": "<p>(<em><a href=\"http://stackoverflow.com/a/10959815/1821548\">Irani</a> already said it, but here's to clarify it all.</em>)</p>\n\n<h3>Edit: Updated for <a href=\"http://www.oracle.com/technetwork/java/javase/8u101-relnotes-3021761.html\">Java 8u101</a>, released in <a href=\"https://blogs.oracle.com/stevenChan/entry/jre_1_8_0_101\">20th July</a></h3>\n\n<h2>Wget</h2>\n\n<pre><code>wget --no-check-certificate -c --header \"Cookie: oraclelicense=accept-securebackup-cookie\" http://download.oracle.com/otn-pub/java/jdk/8u101-b13/jdk-8u101-linux-x64.tar.gz\n</code></pre>\n\n<p><strong><em>32-bit JDK:</em></strong><br>\n<em><a href=\"http://download.oracle.com/otn-pub/java/jdk/8u101-b13/jdk-8u101-linux-i586.tar.gz\">http://download.oracle.com/otn-pub/java/jdk/8u101-b13/jdk-8u101-linux-i586.tar.gz</a></em><br>\n<strong><em>JRE (no cookie flags):</em></strong><br>\n<em>32-bit JRE: <a href=\"http://javadl.oracle.com/webapps/download/AutoDL?BundleId=211987\">http://javadl.oracle.com/webapps/download/AutoDL?BundleId=211987</a></em><br>\n<em>64-bit JRE: <a href=\"http://javadl.oracle.com/webapps/download/AutoDL?BundleId=211989\">http://javadl.oracle.com/webapps/download/AutoDL?BundleId=211989</a></em><br>\n<em>See the downloads in <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html\">oracle.com</a> and <a href=\"https://www.java.com/en/download/manual.jsp\">java.com</a> for more.</em><br></p>\n\n<ul>\n<li><p><strong><code>--no-check-certificate</code></strong></p>\n\n<p><em>Only</em> required with <em>wget 1.12 and earlier</em>, which do <a href=\"https://bugzilla.redhat.com/show_bug.cgi?id=667825\">not</a> <a href=\"https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=409938\">support</a> <em>Subject Alternative Name</em> (SAN) certificates (mainly Red Hat Enterprise Linux 6.x and friends, such as CentOS). 1.13 was <a href=\"http://ftp.gnu.org/gnu/wget/\">released</a> in August 2011.</p>\n\n<p>To see the current version, use: <code>wget --version | head -1</code></p></li>\n<li><p><strong><code>-c / --continue</code></strong></p>\n\n<p>Allows continuing an unfinished download.</p></li>\n<li><p><strong><code>--header \"Cookie: oraclelicense=accept-securebackup-cookie\"</code></strong></p>\n\n<p>Since <em>15th March 2014</em> this cookie is provided to the user after accepting the <a href=\"http://www.oracle.com/technetwork/java/javase/terms/license/index.html\">License Agreement</a> and is necessary for accessing the Java packages in <em>download.oracle.com</em>. The previous (and first) implementation in <em>27th March 2012</em> made use of the cookie <code>gpw_e24=http%3A%2F%2Fwww.oracle.com[...]</code>. Both cases remain unannounced to the public.</p>\n\n<p><em>The value doesn't have to be \"<code>accept-securebackup-cookie</code>\".</em></p></li>\n</ul>\n\n<h3>Not required</h3>\n\n<ul>\n<li><p><strong><code>--no-cookies</code></strong></p>\n\n<p>The combination <code>--no-cookies --header \"Cookie: name=value\"</code> is mentioned as the \"<a href=\"http://www.manpagez.com/info/wget/wget-1.15/wget_9.php#HTTP-Options\">official</a>\" cookie support, but not strictly required here.</p></li>\n</ul>\n\n<h2>cURL</h2>\n\n<pre><code>curl -L -C - -b \"oraclelicense=accept-securebackup-cookie\" -O http://download.oracle.com/otn-pub/java/jdk/8u101-b13/jdk-8u101-linux-x64.tar.gz\n</code></pre>\n\n<ul>\n<li><p><strong><code>-L / --location</code></strong></p>\n\n<p>Required for <em>cURL</em> to redirect through all the mirrors.</p></li>\n<li><p><strong><code>-C / --continue-at -</code></strong></p>\n\n<p><em>See above. cURL requires the dash (<code>-</code>) in the end.</em></p></li>\n<li><p><strong><code>-O</code></strong></p>\n\n<p>Required for <em>cURL</em> to save files (see <a href=\"http://daniel.haxx.se/docs/curl-vs-wget.html\">author's comparison</a> for more differences).</p></li>\n<li><p><strong><code>-b / --cookie \"oraclelicense=accept-securebackup-cookie\"</code></strong></p>\n\n<p><em>Same as <code>-H/--header \"Cookie: ...\"</code>, but accepts files too.</em></p></li>\n</ul>\n", "title": "Downloading Java JDK on Linux via wget is shown license page instead", "answer_id": 22466509, "link": "http://stackoverflow.com/questions/10268583/downloading-java-jdk-on-linux-via-wget-is-shown-license-page-instead/22466509#22466509", "tags": ["java", "linux", "install", "wget"]}, {"body": "<p>I'm using <a href=\"https://github.com/flexiondotorg/oab-java6\" rel=\"nofollow\">https://github.com/flexiondotorg/oab-java6</a> to build a local deb repo with java packages.\nIf you need a more industrial solution you can perfectly setup a remote deb repo with the output of this.</p>\n", "title": "Downloading Java JDK on Linux via wget is shown license page instead", "answer_id": 22504727, "link": "http://stackoverflow.com/questions/10268583/downloading-java-jdk-on-linux-via-wget-is-shown-license-page-instead/22504727#22504727", "tags": ["java", "linux", "install", "wget"]}, {"body": "<p>The simple way is access to Software Center and download JDK.\nYou can do the same with command line, and hou have write just openjdk-X-jdk where \"X\" is the version(6 or 7) from jdk.\nExample in Ubuntu System-based : sudo apt-get install openjdk-7-jdk</p>\n", "title": "Downloading Java JDK on Linux via wget is shown license page instead", "answer_id": 22607878, "link": "http://stackoverflow.com/questions/10268583/downloading-java-jdk-on-linux-via-wget-is-shown-license-page-instead/22607878#22607878", "tags": ["java", "linux", "install", "wget"]}, {"body": "<p>I solve this (for Debian based Linux distros) by making packages using <code>java-package</code> a few times (for various architectures), then distributing them internally.</p>\n\n<p>The big plus side is that this method always works; no matter how crazy Oracle's web pages become.  Oracle can no longer break my build!</p>\n\n<p>The downside is that it's a bit more work to set up initially.</p>\n\n<ul>\n<li>Download the tar.gz files manually in a browser (thus \"accepting\" their terms)</li>\n<li>Run <code>make-jpkg jdk-7u51-linux-x64.tar.gz</code>. This creates <code>oracle-java8-jdk_8_amd64.deb</code></li>\n<li>Distribute it within your organization</li>\n</ul>\n\n<p>For distribution over the Internet, I suggest using a password protected apt repository or provide raw packages using symmetric encryption:</p>\n\n<pre><code>passphrase=\"Hard to crack string. Use /dev/urandom for inspiration.\"\ngpg --batch --symmetric --force-mdc --passphrase-fd 0 \\\n   oracle-java8-jdk_8_amd64.deb &lt;&lt;&lt; \"$passphrase\"\n</code></pre>\n\n<p>Of course providing (unencrypted) .deb packages on the internet is <em>probably</em> a violation of your license agreement with Oracle, which states:</p>\n\n<blockquote>\n  <p>... Oracle grants you a ... license ... to reproduce and use internally the Software complete and unmodified for the sole purpose of running Programs\"</p>\n</blockquote>\n\n<p>On the receiving end, if you have a password protected apt repo, all you need to do is <code>apt-get install</code> it. If you have raw packages, download, decrypt and <code>dpkg -i</code> them.  Works like a charm!</p>\n", "title": "Downloading Java JDK on Linux via wget is shown license page instead", "answer_id": 23216090, "link": "http://stackoverflow.com/questions/10268583/downloading-java-jdk-on-linux-via-wget-is-shown-license-page-instead/23216090#23216090", "tags": ["java", "linux", "install", "wget"]}, {"body": "<p>I've made a jdk-download script (specific for the tar.gz) for my gentoo boxes. Doesn't need to be updated like other similar scripts, trying to \"brute-force\" download the latest build for whatever version you want.</p>\n\n<p><strong>USAGE</strong></p>\n\n<pre><code>jdk-download&lt; &lt;version&gt; &lt;platform&gt; [&lt;build&gt;]\n\n* &lt;version&gt; - Something like \"8u40\"\n* &lt;platform&gt; - Usually i586 or x64\n* &lt;build&gt; - The internal build number used by oracle, to avoid guessing and trying to download starting from 99 to 1 (build 0, really?!!)\n</code></pre>\n\n<p><a href=\"http://bonfab.io/?p=10\" rel=\"nofollow\">Blog post</a></p>\n\n<p><a href=\"https://bitbucket.org/bfx/jdk-download/src/2b32dbe6775ce6008b84bf3dc1d9329708f88774/jdk-download?at=default\" rel=\"nofollow\">Source on bitbucket</a></p>\n", "title": "Downloading Java JDK on Linux via wget is shown license page instead", "answer_id": 30324941, "link": "http://stackoverflow.com/questions/10268583/downloading-java-jdk-on-linux-via-wget-is-shown-license-page-instead/30324941#30324941", "tags": ["java", "linux", "install", "wget"]}, {"body": "<p>For those needing JCE8 as well, you can download that also.</p>\n\n<pre><code>curl -L -C - -b \"oraclelicense=accept-securebackup-cookie\" -O http://download.oracle.com/otn-pub/java/jce/8/jce_policy-8.zip\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>wget --no-check-certificate -c --header \"Cookie: oraclelicense=accept-securebackup-cookie\" http://download.oracle.com/otn-pub/java/jce/8/jce_policy-8.zip\n</code></pre>\n", "title": "Downloading Java JDK on Linux via wget is shown license page instead", "answer_id": 31189401, "link": "http://stackoverflow.com/questions/10268583/downloading-java-jdk-on-linux-via-wget-is-shown-license-page-instead/31189401#31189401", "tags": ["java", "linux", "install", "wget"]}], "question_id": 10268583}, {"body": "<p>Say I have a URL </p>\n\n<pre><code>http://example.com/query?q= \n</code></pre>\n\n<p>and I have a query entered by the user such as:</p>\n\n<blockquote>\n  <p>random word \u00a3500 bank $</p>\n</blockquote>\n\n<p>I want the result to be a properly encoded URL:</p>\n\n<pre><code>http://example.com/query?q=random%20word%20%A3500%20bank%20%24\n</code></pre>\n\n<p>What's the best way to achieve this? I tried <code>URLEncoder</code> and creating URI/URL objects but none of them come out quite right.</p>\n", "tags": ["java", "http", "url", "encoding", "urlencode"], "title": "Java URL encoding of query string parameters", "answer_count": 8, "creation_date": 1338214245, "score": 365, "link": "http://stackoverflow.com/questions/10786042/java-url-encoding-of-query-string-parameters", "answers": [{"body": "<p><a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/URLEncoder.html\"><code>URLEncoder</code></a> should be the way to go. You only need to keep in mind to encode <em>only</em> the individual query string parameter name and/or value, not the entire URL, for sure not the query string parameter separator character <code>&amp;</code> nor the parameter name-value separator character <code>=</code>.</p>\n\n<pre><code>String q = \"random word \u00a3500 bank $\";\nString url = \"http://example.com/query?q=\" + URLEncoder.encode(q, \"UTF-8\");\n</code></pre>\n\n<hr>\n\n<p>Note that spaces in query parameters are represented by <code>+</code>, not <code>%20</code>, which is legitimately valid. The <code>%20</code> is usually to be used to represent spaces in URI itself (the part before the URI-query string separator character <code>?</code>), not in query string (the part after <code>?</code>).</p>\n\n<p>Also note that there are two <code>encode()</code> methods. One without charset argument and another with. The one without charset argument is deprecated. Never use it and always specify the charset argument. The <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/URLEncoder.html\">javadoc</a> even explicitly recommends to use the UTF-8 encoding, as mandated by <a href=\"http://tools.ietf.org/html/rfc3986\">RFC3986</a> and <a href=\"http://www.w3.org/TR/html40/appendix/notes.html#non-ascii-chars\">W3C</a>.</p>\n\n<blockquote>\n  <p>All other characters are unsafe and are first converted into one or more bytes using some encoding scheme. Then each byte is represented by the 3-character string \"%xy\", where xy is the two-digit hexadecimal representation of the byte. <strong>The recommended encoding scheme to use is UTF-8</strong>. However, for compatibility reasons, if an encoding is not specified, then the default encoding of the platform is used.</p>\n</blockquote>\n\n<h3>See also:</h3>\n\n<ul>\n<li><a href=\"https://www.talisman.org/~erlkonig/misc/lunatech%5Ewhat-every-webdev-must-know-about-url-encoding/\">What every web developer must know about URL encoding</a></li>\n</ul>\n", "title": "Java URL encoding of query string parameters", "answer_id": 10786112, "link": "http://stackoverflow.com/questions/10786042/java-url-encoding-of-query-string-parameters/10786112#10786112", "tags": ["java", "http", "url", "encoding", "urlencode"]}, {"body": "<p>I would not use <code>URLEncoder</code>. Besides being incorrectly named (<code>URLEncoder</code> has nothing to do with URLs), inefficient (it uses a <code>StringBuffer</code> instead of Builder and does a couple of other things that are slow) Its also way too easy to screw it up.</p>\n\n<p>Instead I would use <a href=\"http://stackoverflow.com/questions/444112/how-do-i-encode-uri-parameter-values\"><code>URIBuilder</code> or Spring's <code>URIUtils</code> or Commons Apache <code>HttpClient</code></a>.\nThe reason being you have to escape the query parameters name (ie BalusC's answer <code>q</code>) differently than the parameter value. </p>\n\n<p>The only downside to the above (that I found out painfully) is that <a href=\"http://adamgent.com/post/25161273526/urls-are-not-a-subset-of-uris\">URL's are not a true subset of URI's</a>. </p>\n\n<p><em>Since I'm just linking to other answers I marked this as a community wiki. Feel free to edit.</em></p>\n", "title": "Java URL encoding of query string parameters", "answer_id": 16226168, "link": "http://stackoverflow.com/questions/10786042/java-url-encoding-of-query-string-parameters/16226168#16226168", "tags": ["java", "http", "url", "encoding", "urlencode"]}, {"body": "<p>this is additional not Particular Solution (Which is Already answered)\nif anyone wants to replace specific symbols or white space simply can use following :-</p>\n\n<pre><code>String strUrl =getResources().getString(R.string.ipaddress)\n            + \"/index.php?action=passengerRegistration&amp;name=\" + strname\n            + \"&amp;gender=\" + strgender + \"&amp;location=\" + strLocation\n            + \"&amp;phoneNo=\" + strphoneno + \"&amp;password=\" + strPwd + \"&amp;email=\"\n            + stremail;\n\nstrRegUrl=strRegUrl.replaceAll(\" \", \"%20\");\n</code></pre>\n\n<p>like your name containing white space \"hello name\"</p>\n\n<p>than it will be \"hello%20name\" which will not cause problem ! </p>\n\n<p>similarly we target specific Symbol also ! :)</p>\n", "title": "Java URL encoding of query string parameters", "answer_id": 17358214, "link": "http://stackoverflow.com/questions/10786042/java-url-encoding-of-query-string-parameters/17358214#17358214", "tags": ["java", "http", "url", "encoding", "urlencode"]}, {"body": "<p>Guava 15 has now added <a href=\"http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/net/UrlEscapers.html\">a set of straightforward URL escapers</a>.</p>\n", "title": "Java URL encoding of query string parameters", "answer_id": 20376446, "link": "http://stackoverflow.com/questions/10786042/java-url-encoding-of-query-string-parameters/20376446#20376446", "tags": ["java", "http", "url", "encoding", "urlencode"]}, {"body": "<p>You need to first create a URI like:</p>\n\n<pre><code>    String urlStr = \"http://www.example.com/CEREC\u00ae Materials &amp; Accessories/IPS Empress\u00ae CAD.pdf\"\n    URL url= new URL(urlStr);\n    URI uri = new URI(url.getProtocol(), url.getUserInfo(), url.getHost(), url.getPort(), url.getPath(), url.getQuery(), url.getRef());\n</code></pre>\n\n<p>Then convert that Uri to ASCII string:</p>\n\n<pre><code>    urlStr=uri.toASCIIString();\n</code></pre>\n\n<p>Now your url string is completely encoded first we did simple url encoding and then we converted it to ASCII String to make sure no character outside US-ASCII are remaining in string. This is exactly how browsers do.</p>\n", "title": "Java URL encoding of query string parameters", "answer_id": 25735202, "link": "http://stackoverflow.com/questions/10786042/java-url-encoding-of-query-string-parameters/25735202#25735202", "tags": ["java", "http", "url", "encoding", "urlencode"]}, {"body": "<p>You need to first create a URI like This:</p>\n\n<pre><code>var Url=\"https://http://localhost:50826/#/Post-Detail/12\"\n\nvar EncodedUri=encodeURIComponent(Url);\n</code></pre>\n", "title": "Java URL encoding of query string parameters", "answer_id": 35947965, "link": "http://stackoverflow.com/questions/10786042/java-url-encoding-of-query-string-parameters/35947965#35947965", "tags": ["java", "http", "url", "encoding", "urlencode"]}, {"body": "<p>I would use this code:</p>\n\n<pre><code>Uri myUI = Uri.parse (\"http://example.com/query\").buildUpon().appendQueryParameter(\"q\",\"random word A3500 bank 24\").build();\n</code></pre>\n", "title": "Java URL encoding of query string parameters", "answer_id": 37568559, "link": "http://stackoverflow.com/questions/10786042/java-url-encoding-of-query-string-parameters/37568559#37568559", "tags": ["java", "http", "url", "encoding", "urlencode"]}, {"body": "<p>Apache Http Components library provides a neat option for building and encoding query params - </p>\n\n<p>With HttpComponents 4.x use - \n   <a href=\"https://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/utils/URLEncodedUtils.html#format(java.lang.Iterable,%20java.nio.charset.Charset)\" rel=\"nofollow\">URLEncodedUtils</a></p>\n\n<p>For HttpClient 3.x use - \n   <a href=\"https://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/util/EncodingUtil.html#formUrlEncode(org.apache.commons.httpclient.NameValuePair[],%20java.lang.String)\" rel=\"nofollow\">EncodingUtil</a></p>\n", "title": "Java URL encoding of query string parameters", "answer_id": 38233555, "link": "http://stackoverflow.com/questions/10786042/java-url-encoding-of-query-string-parameters/38233555#38233555", "tags": ["java", "http", "url", "encoding", "urlencode"]}], "question_id": 10786042}, {"body": "<p>I'm developing an application which displays images, and plays sounds from a database. I'm trying to decide, whether to use a separate <code>JFrame</code> to add images to the database from the GUI. </p>\n\n<p>I'm just wondering whether it is good practice to use multiple <code>JFrame</code> windows?</p>\n", "tags": ["java", "swing", "user-interface", "jframe"], "title": "The Use of Multiple JFrames: Good or Bad Practice?", "answer_count": 9, "creation_date": 1330862020, "score": 351, "link": "http://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-or-bad-practice", "answers": [{"body": "<blockquote>\n  <p>I'm just wondering whether it is good practice to use multiple JFrames?</p>\n</blockquote>\n\n<p>Bad (bad, bad) practice.  </p>\n\n<ul>\n<li>User unfriendly: The user sees multiple icons in their task bar when expecting to see only one.  Plus the side effects of the coding problems..</li>\n<li>A nightmare to code and maintain:\n<ul>\n<li>A <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/misc/modality.html\">modal dialog</a> offers the easy opportunity to focus attention on the content of that dialog - choose/fix/cancel this, <strong>then</strong> proceed.  Multiple frames do not.</li>\n<li>A dialog (or floating tool-bar) with a parent will come to front when the parent is clicked on - you'd have to implement that in frames if that was the desired behavior.</li>\n</ul></li>\n</ul>\n\n<hr>\n\n<p>There are any number of ways of displaying many elements in one GUI, e.g.:</p>\n\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html\"><code>CardLayout</code></a> (short <a href=\"http://stackoverflow.com/a/5786005/418556\">demo.</a>). Good for:\n<ol>\n<li>Showing wizard like dialogs.</li>\n<li>Displaying list, tree etc. selections for items that have an associated component.</li>\n<li>Flipping between no component and visible component.</li>\n</ol></li>\n<li><a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html\"><code>JInternalFrame</code>/<code>JDesktopPane</code></a> typically used for an <a href=\"http://en.wikipedia.org/wiki/Multiple_document_interface\">MDI</a>.</li>\n<li><a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html\"><code>JTabbedPane</code></a> for groups of components.</li>\n<li><a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/splitpane.html\"><code>JSplitPane</code></a> A way to display two components of which the importance between one or the other (the size) varies according to what the user is doing.</li>\n<li><a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html\"><code>JLayeredPane</code></a> far many well ..layered components.</li>\n<li><a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/toolbar.html\"><code>JToolBar</code></a> typically contains groups of actions or controls.  Can be dragged around the GUI, or off it entirely according to user need.  As mentioned above, will minimize/restore according to the parent doing so.</li>\n<li>As items in a <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/list.html\"><code>JList</code></a> (simple example below).</li>\n<li>As nodes in a <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html\"><code>JTree</code></a>.</li>\n<li><a href=\"http://stackoverflow.com/a/5630271/418556\">Nested layouts</a>.<br><img src=\"http://i.stack.imgur.com/Jaqap.png\"></li>\n</ul>\n\n<p>But if those strategies do not work for a particular use-case, try the following.  Establish a single main <code>JFrame</code>, then have <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html\"><code>JDialog</code></a> or <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#features\"><code>JOptionPane</code></a> instances appear for the rest of the free-floating elements, using the frame as the parent for the dialogs.</p>\n\n<h2>Many images</h2>\n\n<p>In this case where the multiple elements are images, it would be better to use either of the following instead:</p>\n\n<ol>\n<li>A single <code>JLabel</code> (centered in a scroll pane) to display whichever image the user is interested in at that moment.  As seen in <a href=\"http://stackoverflow.com/a/13463684/418556\"><code>ImageViewer</code></a>.<br><img src=\"http://i.stack.imgur.com/5JXpC.gif\"></li>\n<li>A single row <code>JList</code>. As seen in <a href=\"http://stackoverflow.com/a/9544652/418556\">this answer</a>.  The 'single row' part of that only works if they are all the same dimensions.  Alternately, if you are prepared to scale the images on the fly, and they are all the same aspect ratio (e.g. 4:3 or 16:9).</li>\n</ol>\n\n<p><img src=\"http://i.stack.imgur.com/q8hEl.jpg\"></p>\n", "title": "The Use of Multiple JFrames: Good or Bad Practice?", "answer_id": 9554657, "link": "http://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-or-bad-practice/9554657#9554657", "tags": ["java", "swing", "user-interface", "jframe"]}, {"body": "<p>Make an jInternalFrame into main frame and make it invisible. Then you can use it for further events.</p>\n\n<pre><code>jInternalFrame.setSize(300,150);\njInternalFrame.setVisible(true);\n</code></pre>\n", "title": "The Use of Multiple JFrames: Good or Bad Practice?", "answer_id": 12927630, "link": "http://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-or-bad-practice/12927630#12927630", "tags": ["java", "swing", "user-interface", "jframe"]}, {"body": "<p>Bad practice definitely. One reason is that it is not very 'user-friendly' for the fact that every JFrame shows a new taskbar icon. Controlling multiple JFrames will have you ripping your hair out.</p>\n\n<p>Personally, I would use ONE JFrame for your kind of application. Methods of displaying multiple things is up to you, there are many. Canvases, JInternalFrame, CardLayout, even JPanels possibly.</p>\n\n<p>Multiple JFrame objects = Pain, trouble, and problems.</p>\n", "title": "The Use of Multiple JFrames: Good or Bad Practice?", "answer_id": 14255882, "link": "http://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-or-bad-practice/14255882#14255882", "tags": ["java", "swing", "user-interface", "jframe"]}, {"body": "<p>It's been a while since the last time i touch swing but in general is a bad practice to do this. Some of the main disadvantages that comes to mind: </p>\n\n<ul>\n<li><p><strong>It's more expensive:</strong> you will have to allocate way more resources to draw a JFrame that other kind of window container, such as Dialog or JInternalFrame.</p></li>\n<li><p><strong>Not user friendly:</strong> It is not easy to navigate into a bunch of JFrame stuck together, it will look like your application is a set of applications inconsistent and poorly design.</p></li>\n<li><p><strong>It's easy to use JInternalFrame</strong> This is kind of retorical, now it's way easier and other people smarter ( or with more spare time) than us have already think through the Desktop and JInternalFrame pattern, so I would recommend to use it.</p></li>\n</ul>\n", "title": "The Use of Multiple JFrames: Good or Bad Practice?", "answer_id": 15213944, "link": "http://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-or-bad-practice/15213944#15213944", "tags": ["java", "swing", "user-interface", "jframe"]}, {"body": "<p>The multiple <code>JFrame</code> approach has been something I've implemented since I began programming Swing apps. For the most part, I did it in the beginning because I didn't know any better. <strong>However</strong>, as I matured in my experience and knowledge as a developer and as began to read and absorb the opinions of so many more experienced Java devs online, I made an attempt to <strong>shift away</strong> from the multiple <code>JFrame</code> approach (both in current projects and future projects) only to be met with... get this... <em>resistance from my clients!</em> As I began implementing modal dialogs to control \"child\" windows and <code>JInternalFrame</code>s for separate components, <strong>my clients began to complain!</strong> I was quite surprised, as I was doing what I thought was best-practice! But, as they say, \"A happy wife is a happy life.\" Same goes for your clients. Of course, I am a contractor so my end-users have direct access to me, the developer, which is obviously not a common scenario.</p>\n\n<p>So, I'm going to explain the benefits of the multiple <code>JFrame</code> approach, as well as myth-bust some of the cons that others have presented.</p>\n\n<ol>\n<li><strong>Ultimate flexibility in layout</strong> - By allowing separate <code>JFrame</code>s, you give your end-user the ability to spread out and control what's on his/her screen. The concept feels \"open\" and non-constricting. You lose this when you go towards one big <code>JFrame</code> and a bunch of <code>JInternalFrame</code>s.</li>\n<li><strong>Works well for very modularized applications</strong> - In my case, most of my applications have 3 - 5 big \"modules\" that really have nothing to do with each other whatsoever. For instance, one module might be a sales dashboard and one might be an accounting dashboard. They don't talk to each other or anything. However, the executive might want to open both and them being separate frames on the taskbar makes his life easier.</li>\n<li><strong>Makes it easy for end-users to reference outside material</strong> - Once, I had this situation: My app had a \"data viewer,\" from which you could click \"Add New\" and it would open a data entry screen. Initially, both were <code>JFrame</code>s. However, I wanted the data entry screen to be a <code>JDialog</code> whose parent was the data viewer. I made the change, and immediately I received a call from an end-user who relied heavily on the fact that he could minimize or close the <strong>viewer</strong> and keep the <strong>editor</strong> open while he referenced another part of the program (or a website, I don't remember). He's <strong>not</strong> on a multi-monitor, so he needed the entry dialog to be first and <em>something else</em> to be second, with the data viewer completely hidden. This was impossible with a <code>JDialog</code> and certainly would've been impossible with a <code>JInternalFrame</code> as well. I begrudgingly changed it back to being separate <code>JFrames</code> for his sanity, but it taught me an important lesson.</li>\n<li><strong>Myth: Hard to code</strong> - This is not true in my experience. I don't see why it would be any easier to create a <code>JInternalFrame</code> than a <code>JFrame</code>. In fact, in my experience, <code>JInternalFrames</code> offer much less flexibility. I have developed a systematic way of handling the opening &amp; closing of <code>JFrame</code>s in my apps that really works well. I control the frame almost completely from within the frame's code itself; the creation of the new frame, <code>SwingWorker</code>s that control the retrieval of data on background threads and the GUI code on EDT, restoring/bringing to front the frame if the user tries to open it twice, etc. All you need to open my <code>JFrame</code>s is call a public static method <code>open()</code> and the open method, combined with a <code>windowClosing()</code> event handles the rest (is the frame already open? is it not open, but loading? etc.) I made this approach a template so it's not difficult to implement for each frame.</li>\n<li><strong>Myth/Unproven: Resource Heavy</strong> - I'd like to see some facts behind this speculative statement. Although, perhaps, you could say a <code>JFrame</code> needs more space than a <code>JInternalFrame</code>, even if you open up 100 <code>JFrame</code>s, how many more resources would you really be consuming? If your concern is memory leaks because of resources: calling <code>dispose()</code> frees all resources used by the frame for garbage collection (and, again I say, a <code>JInternalFrame</code> should invoke exactly the same concern).</li>\n</ol>\n\n<p>I've written a lot and I feel like I could write more. Anyways, I hope I don't get down-voted simply because it's an unpopular opinion. The question is clearly a valuable one and I hope I've provided a valuable answer, even if it isn't the common opinion.</p>\n\n<p>A great example of multiple frames/single document per frame (<a href=\"http://en.wikipedia.org/wiki/Single_document_interface\">SDI</a>) vs single frame/multiple documents per frame (<a href=\"http://en.wikipedia.org/wiki/Multiple_document_interface\">MDI</a>) is Microsoft Excel. Some of MDI benefits:</p>\n\n<ul>\n<li>it is possible to have a few windows in non rectangular shape - so they don't hide desktop or other window from another process (e.g. web browser)</li>\n<li>it is possible to open a window from another process over one Excel window while writing in second Excel window - with MDI, trying to write in one of internal windows will give focus to the entire Excel window, hence hiding window from another process</li>\n<li>it is possible to have different documents on different screens, which is especially useful when screens do not have the same resolution</li>\n</ul>\n\n<p>SDI (Single-Document Interface, i.e., every window can only have a single document):</p>\n\n<p><img src=\"http://i.stack.imgur.com/5iv4S.png\" alt=\"enter image description here\"></p>\n\n<p>MDI (Multiple-Document Interface, i.e., every window can have multiple documents):</p>\n\n<p><img src=\"http://i.stack.imgur.com/HeLur.png\" alt=\"enter image description here\"></p>\n", "title": "The Use of Multiple JFrames: Good or Bad Practice?", "answer_id": 17961122, "link": "http://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-or-bad-practice/17961122#17961122", "tags": ["java", "swing", "user-interface", "jframe"]}, {"body": "<p>I'd like to counter the \"not user friendly\" argument with an example that I have just been involved with.</p>\n\n<p>In our application we have a main window where the users run various 'programs' as separate tabs. As much as possible we have tried to keep our application to this single window.</p>\n\n<p>One of the 'programs' they run presents a list of reports that have been generated by the system, and the user can click on an icon on each line to pop open a report viewer dialog. This viewer is showing the equivalent of the portrait/landscape A4 page(s) of the report, so the users like this window to be quite big, almost filling their screens.</p>\n\n<p>A few months ago we started getting requests from our customers to make these report viewer windows modeless, so that they could have multiple reports open at the same time.</p>\n\n<p>For some time I resisted this request as I did not think this was a good solution. However, my mind was changed when I found out how the users were getting around this 'deficiency' of our system.</p>\n\n<p>They were opening a viewer, using the 'Save As' facility to save the report as a PDF to a specific directory, using Acrobat Reader to open the PDF file, and then they would do the same with the next report. They would have multiple Acrobat Readers running with the various report outputs that they wanted to look at.</p>\n\n<p>So I relented and made the viewer modeless. This means that each viewer has a task-bar icon.</p>\n\n<p>When the latest version was released to them last week, the overwhelming response from them is that they LOVE it. It's been one of our most popular recent enhancements to the system.</p>\n\n<p>So you go ahead and tell your users that what they want is bad, but ultimately it won't do you any favours.</p>\n\n<p>SOME NOTES:</p>\n\n<ul>\n<li>It seems to be best practice to use JDialog's for these modeless windows</li>\n<li>Use the constructors that use the new <code>ModalityType</code> rather than the boolean <code>modal</code> argument. This is what gives these dialogs the task-bar icon.</li>\n<li>For modeless dialogs, pass a null parent to the constructor, but locate them relative to their 'parent' window.</li>\n<li>Version 6 of Java on Windows has a <a href=\"http://bugs.sun.com/view_bug.do?bug_id=6829546\">bug</a> which means that your main window can become 'always on top' without you telling it. Upgrade to version 7 to fix this</li>\n</ul>\n", "title": "The Use of Multiple JFrames: Good or Bad Practice?", "answer_id": 18524507, "link": "http://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-or-bad-practice/18524507#18524507", "tags": ["java", "swing", "user-interface", "jframe"]}, {"body": "<p>If the frames are going to be the same size, why not create the frame and pass the frame then as a reference to it instead. </p>\n\n<p>When you have passed the frame you can then decide how to populate it. It would be like having a method for calculating the average of a set of figures. Would you create the method over and over again? </p>\n", "title": "The Use of Multiple JFrames: Good or Bad Practice?", "answer_id": 18602494, "link": "http://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-or-bad-practice/18602494#18602494", "tags": ["java", "swing", "user-interface", "jframe"]}, {"body": "<p>It is not a good practice but even though you wish to use it you can use the singleton pattern as its good. I have used the singleton patterns in most of my project its good.</p>\n", "title": "The Use of Multiple JFrames: Good or Bad Practice?", "answer_id": 20583823, "link": "http://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-or-bad-practice/20583823#20583823", "tags": ["java", "swing", "user-interface", "jframe"]}, {"body": "<p>i think using multiple Jframes is not a good idea.</p>\n\n<p>Instead we can use jpanels more than one or more jpanel in the same jframe.</p>\n\n<p>also we can switch between this jpanels .so it give us freedom to display more than on thing in the jframe.</p>\n\n<p>for each jpanel we can design different things and all this jpanel can be displayed on the single jframe one at a time.</p>\n\n<p>To switch between this jpanels use menubar with menuitems for each jpanel or jbutton for each jpanel.</p>\n\n<p>more than one jframe is not a good practice.but there is nothing wrong if we waqnt more than one jframe.\nbut its better to change one jframe for our different needs rather than having multiple jframes.</p>\n", "title": "The Use of Multiple JFrames: Good or Bad Practice?", "answer_id": 20651646, "link": "http://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-or-bad-practice/20651646#20651646", "tags": ["java", "swing", "user-interface", "jframe"]}], "question_id": 9554636}, {"body": "<p>I have a byte array filled with hex numbers and printing it the easy way is pretty pointless because there are many unprintable elements. What I need is the exact hexcode in the form of: <code>3a5f771c</code></p>\n", "tags": ["java", "bytearray", "hex"], "title": "How to convert a byte array to a hex string in Java?", "answer_count": 17, "creation_date": 1331471184, "score": 325, "link": "http://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java", "answers": [{"body": "<p>I found three different ways here:\n<a href=\"http://www.rgagnon.com/javadetails/java-0596.html\">http://www.rgagnon.com/javadetails/java-0596.html</a></p>\n\n<p>The most elegant one, as he also notes, I think is this one:</p>\n\n<pre><code>static final String HEXES = \"0123456789ABCDEF\";\npublic static String getHex( byte [] raw ) {\n    if ( raw == null ) {\n        return null;\n    }\n    final StringBuilder hex = new StringBuilder( 2 * raw.length );\n    for ( final byte b : raw ) {\n        hex.append(HEXES.charAt((b &amp; 0xF0) &gt;&gt; 4))\n            .append(HEXES.charAt((b &amp; 0x0F)));\n    }\n    return hex.toString();\n}\n</code></pre>\n", "title": "How to convert a byte array to a hex string in Java?", "answer_id": 9655224, "link": "http://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java/9655224#9655224", "tags": ["java", "bytearray", "hex"]}, {"body": "<p>If you're not averse to including extra libraries, the <a href=\"http://commons.apache.org/codec/\">Apache Commons Codec</a> library has a <a href=\"http://commons.apache.org/proper/commons-codec/archives/1.10/apidocs/org/apache/commons/codec/binary/Hex.html\">Hex</a> class for doing just this type of work.</p>\n\n<pre><code>import org.apache.commons.codec.binary.Hex;\n</code></pre>\n\n<p>...</p>\n\n<pre><code>String foo = \"I am a string\";\nbyte[] bytes = foo.getBytes();\nSystem.out.println( Hex.encodeHexString( bytes ) );\n</code></pre>\n\n<p>I used it just this morning in a <a href=\"https://github.com/chooban/Whats-That-Character-Set\">personal project</a>.</p>\n", "title": "How to convert a byte array to a hex string in Java?", "answer_id": 9655275, "link": "http://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java/9655275#9655275", "tags": ["java", "bytearray", "hex"]}, {"body": "<p>From the discussion <a href=\"http://stackoverflow.com/q/332079/1284661\">here</a>, and especially <a href=\"http://stackoverflow.com/a/2197650/1284661\">this</a> answer, this is the function I currently use:</p>\n\n<pre><code>final protected static char[] hexArray = \"0123456789ABCDEF\".toCharArray();\npublic static String bytesToHex(byte[] bytes) {\n    char[] hexChars = new char[bytes.length * 2];\n    for ( int j = 0; j &lt; bytes.length; j++ ) {\n        int v = bytes[j] &amp; 0xFF;\n        hexChars[j * 2] = hexArray[v &gt;&gt;&gt; 4];\n        hexChars[j * 2 + 1] = hexArray[v &amp; 0x0F];\n    }\n    return new String(hexChars);\n}\n</code></pre>\n\n<p>My own tiny benchmarks (a million bytes a thousand times, 256 bytes 10 million times) showed it to be much faster than any other alternative, about half the time on long arrays.  Compared to the answer I took it from, switching to bitwise ops --- as suggested in the discussion --- cut about 20% off of the time for long arrays. (Edit: When I say it's faster than the alternatives, I mean the alternative code offered in the discussions. Performance is equivalent to Commons Codec, which uses very similar code.)</p>\n", "title": "How to convert a byte array to a hex string in Java?", "answer_id": 9855338, "link": "http://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java/9855338#9855338", "tags": ["java", "bytearray", "hex"]}, {"body": "<p>Simplest solution, no external libs, no digits constants:</p>\n\n<pre><code>public static String byteArrayToHex(byte[] a) {\n   StringBuilder sb = new StringBuilder(a.length * 2);\n   for(byte b: a)\n      sb.append(String.format(\"%02x\", b &amp; 0xff));\n   return sb.toString();\n}\n</code></pre>\n", "title": "How to convert a byte array to a hex string in Java?", "answer_id": 13006907, "link": "http://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java/13006907#13006907", "tags": ["java", "bytearray", "hex"]}, {"body": "<p>This simple oneliner works for me<br>\n    <code>String result = new BigInteger(1, inputBytes).toString(16); </code> <br>\nEDIT - Using this will remove the leading zeros, but hey worked for my use-case. Thanks @Voicu for pointing it out</p>\n", "title": "How to convert a byte array to a hex string in Java?", "answer_id": 13219952, "link": "http://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java/13219952#13219952", "tags": ["java", "bytearray", "hex"]}, {"body": "<p>// Shifting bytes is more efficient\n// You can use this one too </p>\n\n<pre><code>public static String getHexString (String s) \n{\n    byte[] buf = s.getBytes();\n\n    StringBuffer sb = new StringBuffer();\n\n    for (byte b:buf)\n    {\n        sb.append(String.format(\"%x\", b));\n    }\n\n\n        return sb.toString();\n}\n</code></pre>\n", "title": "How to convert a byte array to a hex string in Java?", "answer_id": 16228804, "link": "http://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java/16228804#16228804", "tags": ["java", "bytearray", "hex"]}, {"body": "<p>Why cant we just used some simple logic like this...?</p>\n\n<pre><code>for (int i = 0; i &lt; byteData.length; i++) {\nsb.append(Integer.toString((byteData[i] &amp; 0xff) + 0x100, 16).substring(1));\n}\n</code></pre>\n", "title": "How to convert a byte array to a hex string in Java?", "answer_id": 21045490, "link": "http://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java/21045490#21045490", "tags": ["java", "bytearray", "hex"]}, {"body": "<p>At the minor cost of storing the lookup table this implementation is simple and very fast.</p>\n\n<pre><code> private static final char[] BYTE2HEX=(\n    \"000102030405060708090A0B0C0D0E0F\"+\n    \"101112131415161718191A1B1C1D1E1F\"+\n    \"202122232425262728292A2B2C2D2E2F\"+\n    \"303132333435363738393A3B3C3D3E3F\"+\n    \"404142434445464748494A4B4C4D4E4F\"+\n    \"505152535455565758595A5B5C5D5E5F\"+\n    \"606162636465666768696A6B6C6D6E6F\"+\n    \"707172737475767778797A7B7C7D7E7F\"+\n    \"808182838485868788898A8B8C8D8E8F\"+\n    \"909192939495969798999A9B9C9D9E9F\"+\n    \"A0A1A2A3A4A5A6A7A8A9AAABACADAEAF\"+\n    \"B0B1B2B3B4B5B6B7B8B9BABBBCBDBEBF\"+\n    \"C0C1C2C3C4C5C6C7C8C9CACBCCCDCECF\"+\n    \"D0D1D2D3D4D5D6D7D8D9DADBDCDDDEDF\"+\n    \"E0E1E2E3E4E5E6E7E8E9EAEBECEDEEEF\"+\n    \"F0F1F2F3F4F5F6F7F8F9FAFBFCFDFEFF\").toCharArray();\n   ; \n\n  public static String getHexString(byte[] bytes) {\n    final int len=bytes.length;\n    final char[] chars=new char[len&lt;&lt;1];\n    int hexIndex;\n    int idx=0;\n    int ofs=0;\n    while (ofs&lt;len) {\n      hexIndex=(bytes[ofs++] &amp; 0xFF)&lt;&lt;1;\n      chars[idx++]=BYTE2HEX[hexIndex++];\n      chars[idx++]=BYTE2HEX[hexIndex];\n    }\n    return new String(chars);\n  }\n</code></pre>\n", "title": "How to convert a byte array to a hex string in Java?", "answer_id": 21429909, "link": "http://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java/21429909#21429909", "tags": ["java", "bytearray", "hex"]}, {"body": "<p>Use <code>DatatypeConverter.printHexBinary()</code>. You can read its documentation in <a href=\"http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/DatatypeConverter.html\">http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/DatatypeConverter.html</a></p>\n\n<p>For example:</p>\n\n<pre><code>byte bytes[] = {(byte)0, (byte)0, (byte)134, (byte)0, (byte)61};\nSystem.out.println(javax.xml.bind.DatatypeConverter.printHexBinary(bytes));\n</code></pre>\n\n<p>Will result in:</p>\n\n<pre><code>000086003D\n</code></pre>\n\n<p>As you can see this will retrieve the hexadecimal string representing the array of bytes with leading zeros.</p>\n\n<p>This answer is basically the same as in the question <a href=\"http://stackoverflow.com/questions/332079/in-java-how-do-i-convert-a-byte-array-to-a-string-of-hex-digits-while-keeping-l\">In Java, how do I convert a byte array to a string of hex digits while keeping leading zeros?</a></p>\n", "title": "How to convert a byte array to a hex string in Java?", "answer_id": 21992128, "link": "http://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java/21992128#21992128", "tags": ["java", "bytearray", "hex"]}, {"body": "<p>I usually use the following method for debuf statement, but i don't know if it is the best way of doing it or not</p>\n\n<pre><code>private static String digits = \"0123456789abcdef\";\n\npublic static String toHex(byte[] data){\n    StringBuffer buf = new StringBuffer();\n    for (int i = 0; i != data.length; i++)\n    {\n        int v = data[i] &amp; 0xff;\n        buf.append(digits.charAt(v &gt;&gt; 4));\n        buf.append(digits.charAt(v &amp; 0xf));\n    }\n    return buf.toString();\n}\n</code></pre>\n", "title": "How to convert a byte array to a hex string in Java?", "answer_id": 23200748, "link": "http://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java/23200748#23200748", "tags": ["java", "bytearray", "hex"]}, {"body": "<p>I prefer to use this:</p>\n\n<pre><code>final protected static char[] hexArray = \"0123456789ABCDEF\".toCharArray();\npublic static String bytesToHex(byte[] bytes, int offset, int count) {\n    char[] hexChars = new char[count * 2];\n    for ( int j = 0; j &lt; count; j++ ) {\n        int v = bytes[j+offset] &amp; 0xFF;\n        hexChars[j * 2] = hexArray[v &gt;&gt;&gt; 4];\n        hexChars[j * 2 + 1] = hexArray[v &amp; 0x0F];\n    }\n    return new String(hexChars);\n}\n</code></pre>\n\n<p>It is slightly more flexible adaptation of the accepted answer.\nPersonally, I keep both the accepted answer and this overload along with it, usable in more contexts.</p>\n", "title": "How to convert a byte array to a hex string in Java?", "answer_id": 24267654, "link": "http://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java/24267654#24267654", "tags": ["java", "bytearray", "hex"]}, {"body": "<p>A small variant of the solution proposed by @maybewecouldstealavan, which lets you visually bundle N bytes together in the output hex string:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code> final static char[] HEX_ARRAY = \"0123456789ABCDEF\".toCharArray();\n final static char BUNDLE_SEP = ' ';\n\npublic static String bytesToHexString(byte[] bytes, int bundleSize /*[bytes]*/]) {\n        char[] hexChars = new char[(bytes.length * 2) + (bytes.length / bundleSize)];\n        for (int j = 0, k = 1; j &lt; bytes.length; j++, k++) {\n                int v = bytes[j] &amp; 0xFF;\n                int start = (j * 2) + j/bundleSize;\n\n                hexChars[start] = HEX_ARRAY[v &gt;&gt;&gt; 4];\n                hexChars[start + 1] = HEX_ARRAY[v &amp; 0x0F];\n\n                if ((k % bundleSize) == 0) {\n                        hexChars[start + 2] = BUNDLE_SEP;\n                }   \n        }   \n        return new String(hexChars).trim();    \n}\n</code></pre>\n\n<p>That is:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>bytesToHexString(\"..DOOM..\".toCharArray().getBytes(), 2);\n2E2E 444F 4F4D 2E2E\n\nbytesToHexString(\"..DOOM..\".toCharArray().getBytes(), 4);\n2E2E444F 4F4D2E2E\n</code></pre>\n", "title": "How to convert a byte array to a hex string in Java?", "answer_id": 28854762, "link": "http://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java/28854762#28854762", "tags": ["java", "bytearray", "hex"]}, {"body": "<p>How about this?</p>\n\n<pre><code>    String byteToHex(final byte[] hash)\n    {\n        Formatter formatter = new Formatter();\n        for (byte b : hash)\n        {\n            formatter.format(\"%02x\", b);\n        }\n        String result = formatter.toString();\n        formatter.close();\n        return result;\n    }\n</code></pre>\n", "title": "How to convert a byte array to a hex string in Java?", "answer_id": 29784501, "link": "http://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java/29784501#29784501", "tags": ["java", "bytearray", "hex"]}, {"body": "<p>If you're looking for a byte array exactly like this for python, I have converted this Java implementation into python.</p>\n\n<pre><code>class ByteArray:\n\n@classmethod\ndef char(cls, args=[]):\n    cls.hexArray = \"0123456789ABCDEF\".encode('utf-16')\n    j = 0\n    length = (cls.hexArray)\n\n    if j &lt; length:\n        v = j &amp; 0xFF\n        hexChars = [None, None]\n        hexChars[j * 2] = str( cls.hexArray) + str(v)\n        hexChars[j * 2 + 1] = str(cls.hexArray) + str(v) + str(0x0F)\n        # Use if you want...\n        #hexChars.pop()\n\n    return str(hexChars)\n\narray = ByteArray()\nprint array.char(args=[])\n</code></pre>\n", "title": "How to convert a byte array to a hex string in Java?", "answer_id": 33696458, "link": "http://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java/33696458#33696458", "tags": ["java", "bytearray", "hex"]}, {"body": "<p>A Guava solution, for completeness:</p>\n\n<pre><code>import com.google.common.io.BaseEncoding;\n...\nbyte[] bytes = \"Hello world\".getBytes(StandardCharsets.UTF_8);\nfinal String hex = BaseEncoding.base16().lowerCase().encode(bytes);\n</code></pre>\n\n<p>Now <code>hex</code> is <code>\"48656c6c6f20776f726c64\"</code>.</p>\n", "title": "How to convert a byte array to a hex string in Java?", "answer_id": 36477814, "link": "http://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java/36477814#36477814", "tags": ["java", "bytearray", "hex"]}, {"body": "<p>Use DataTypeConverter class<code>javax.xml.bind.DataTypeConverter</code></p>\n\n<p><code>String hexString = DatatypeConverter.printHexBinary(bytes[] raw);</code></p>\n", "title": "How to convert a byte array to a hex string in Java?", "answer_id": 37188787, "link": "http://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java/37188787#37188787", "tags": ["java", "bytearray", "hex"]}, {"body": "<p>Ok so there are a bunch of ways to do this, but if you decide to use a library I would suggest poking about in your project to see if something has been implemented in a library that is already part of your project before adding a new library just to do this.  For example if you don't already have </p>\n\n<blockquote>\n  <p>org.apache.commons.codec.binary.Hex</p>\n</blockquote>\n\n<p>maybe you do have...</p>\n\n<blockquote>\n  <p>org.apache.xerces.impl.dv.util.HexBin</p>\n</blockquote>\n", "title": "How to convert a byte array to a hex string in Java?", "answer_id": 39337157, "link": "http://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java/39337157#39337157", "tags": ["java", "bytearray", "hex"]}], "question_id": 9655181}, {"body": "<p>How can I convert a <code>List</code> to an <code>Array</code> in Java?</p>\n\n<p>Check the code below:</p>\n\n<pre><code>ArrayList&lt;Tienda&gt; tiendas;\nList&lt;Tienda&gt; tiendasList; \ntiendas = new ArrayList&lt;Tienda&gt;();\n\nResources res = this.getBaseContext().getResources();\nXMLParser saxparser =  new XMLParser(marca,res);\n\ntiendasList = saxparser.parse(marca,res);\ntiendas = tiendasList.toArray();\n\nthis.adaptador = new adaptadorMarca(this, R.layout.filamarca, tiendas);\nsetListAdapter(this.adaptador);  \n</code></pre>\n\n<p>I need to populate the array <code>tiendas</code> with the values of <code>tiendasList</code>.</p>\n", "tags": ["java", "android", "arrays", "list", "arraylist"], "title": "Convert list to array in Java", "answer_count": 11, "creation_date": 1330976248, "score": 316, "link": "http://stackoverflow.com/questions/9572795/convert-list-to-array-in-java", "answers": [{"body": "<p>Either:</p>\n\n<pre><code>Foo[] array = list.toArray(new Foo[list.size()]);\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>Foo[] array = new Foo[list.size()];\nlist.toArray(array); // fill the array\n</code></pre>\n\n<hr>\n\n<p>Note that this works only for arrays of reference types. For arrays of primitive types, use the traditional way:</p>\n\n<pre><code>List&lt;Integer&gt; list = ...;\nint[] array = new int[list.size()];\nfor(int i = 0; i &lt; list.size(); i++) array[i] = list.get(i);\n</code></pre>\n", "title": "Convert list to array in Java", "answer_id": 9572820, "link": "http://stackoverflow.com/questions/9572795/convert-list-to-array-in-java/9572820#9572820", "tags": ["java", "android", "arrays", "list", "arraylist"]}, {"body": "<p>Try this:</p>\n\n<pre><code>List list = new ArrayList();\nlist.add(\"Apple\");\nlist.add(\"Banana\");\n\nObject[] ol = list.toArray();\n</code></pre>\n", "title": "Convert list to array in Java", "answer_id": 10384309, "link": "http://stackoverflow.com/questions/9572795/convert-list-to-array-in-java/10384309#10384309", "tags": ["java", "android", "arrays", "list", "arraylist"]}, {"body": "<pre><code>tiendas = new ArrayList&lt;Tienda&gt;(tiendasList);\n</code></pre>\n\n<p>All collection implementations have an overloaded constructor that takes another collection (with the template <code>&lt;T&gt;</code> matching). The new instance is instantiated with the passed collection.</p>\n", "title": "Convert list to array in Java", "answer_id": 13605419, "link": "http://stackoverflow.com/questions/9572795/convert-list-to-array-in-java/13605419#13605419", "tags": ["java", "android", "arrays", "list", "arraylist"]}, {"body": "<p>I think this is the simplest way:</p>\n\n<pre><code>Foo[] array = list.toArray(new Foo[0]);\n</code></pre>\n", "title": "Convert list to array in Java", "answer_id": 14137519, "link": "http://stackoverflow.com/questions/9572795/convert-list-to-array-in-java/14137519#14137519", "tags": ["java", "android", "arrays", "list", "arraylist"]}, {"body": "<p>This (Ondrej's answer):</p>\n\n<pre><code>Foo[] array = list.toArray(new Foo[0]);\n</code></pre>\n\n<p>Is the most common idiom I see. Those who are suggesting that you use the actual list size instead of \"0\" are misunderstanding what's happening here.  The toArray call does not care about the size or contents of the given array - it only needs its type. It would have been better if it took an actual Type in which case \"Foo.class\" would have been a lot clearer. Yes, this idiom generates a dummy object, but including the list size just means that you generate a larger dummy object.  Again, the object is not used in any way; it's only the type that's needed.</p>\n", "title": "Convert list to array in Java", "answer_id": 18753416, "link": "http://stackoverflow.com/questions/9572795/convert-list-to-array-in-java/18753416#18753416", "tags": ["java", "android", "arrays", "list", "arraylist"]}, {"body": "<p>An alternative in Java 8:</p>\n\n<pre><code>String[] strings = list.stream().toArray(String[]::new);\n</code></pre>\n", "title": "Convert list to array in Java", "answer_id": 23184843, "link": "http://stackoverflow.com/questions/9572795/convert-list-to-array-in-java/23184843#23184843", "tags": ["java", "android", "arrays", "list", "arraylist"]}, {"body": "<p>For ArrayList the following works:</p>\n\n<pre><code>ArrayList&lt;Foo&gt; list = new ArrayList&lt;Foo&gt;();\n\n//... add values\n\nFoo[] resultArray = new Foo[list.size()];\nresultArray = list.toArray(resultArray);\n</code></pre>\n", "title": "Convert list to array in Java", "answer_id": 26853171, "link": "http://stackoverflow.com/questions/9572795/convert-list-to-array-in-java/26853171#26853171", "tags": ["java", "android", "arrays", "list", "arraylist"]}, {"body": "<p>Example taken from this page: <a href=\"http://www.java-examples.com/copy-all-elements-java-arraylist-object-array-example\" rel=\"nofollow\">http://www.java-examples.com/copy-all-elements-java-arraylist-object-array-example</a></p>\n\n<pre><code>import java.util.ArrayList;\n\npublic class CopyElementsOfArrayListToArrayExample {\n\n  public static void main(String[] args) {\n    //create an ArrayList object\n    ArrayList arrayList = new ArrayList();\n\n    //Add elements to ArrayList\n    arrayList.add(\"1\");\n    arrayList.add(\"2\");\n    arrayList.add(\"3\");\n    arrayList.add(\"4\");\n    arrayList.add(\"5\");\n\n    /*\n      To copy all elements of java ArrayList object into array use\n      Object[] toArray() method.\n    */\n\n    Object[] objArray = arrayList.toArray();\n\n    //display contents of Object array\n    System.out.println(\"ArrayList elements are copied into an Array.\n                                                  Now Array Contains..\");\n    for(int index=0; index &lt; objArray.length ; index++)\n      System.out.println(objArray[index]);\n  }\n}\n\n/*\nOutput would be\nArrayList elements are copied into an Array. Now Array Contains..\n1\n2\n3\n4\n5\n</code></pre>\n", "title": "Convert list to array in Java", "answer_id": 27247073, "link": "http://stackoverflow.com/questions/9572795/convert-list-to-array-in-java/27247073#27247073", "tags": ["java", "android", "arrays", "list", "arraylist"]}, {"body": "<p>I came across this code snippet that solves it.</p>\n\n<pre><code>//Creating a sample ArrayList \nList&lt;Long&gt; list = new ArrayList&lt;Long&gt;();\n\n//Adding some long type values\nlist.add(100l);\nlist.add(200l);\nlist.add(300l);\n\n//Converting the ArrayList to a Long\nLong[] array = (Long[]) list.toArray(new Long[list.size()]);\n\n//Printing the results\nSystem.out.println(array[0] + \" \" + array[1] + \" \" + array[2]);\n</code></pre>\n\n<p>The conversion works as follows: </p>\n\n<ol>\n<li>It creates a new Long array, with the size of the original list</li>\n<li>It converts the original ArrayList to an array using the newly created one</li>\n<li>It casts that array into a Long array (Long[]), which I appropriately named 'array'</li>\n</ol>\n", "title": "Convert list to array in Java", "answer_id": 27723119, "link": "http://stackoverflow.com/questions/9572795/convert-list-to-array-in-java/27723119#27723119", "tags": ["java", "android", "arrays", "list", "arraylist"]}, {"body": "<p>You can use toArray() api as follows,</p>\n\n<pre><code>ArrayList&lt;String&gt; stringList = new ArrayList&lt;String&gt;();\nstringList.add(\"ListItem1\");\nstringList.add(\"ListItem2\");\nString[] stringArray = new String[stringList.size()];\nstringArray = stringList.toArray(stringList);\n</code></pre>\n\n<p>Values from the array are,</p>\n\n<pre><code>for(String value : stringList)\n{\n    System.out.println(value);\n}\n</code></pre>\n", "title": "Convert list to array in Java", "answer_id": 28192590, "link": "http://stackoverflow.com/questions/9572795/convert-list-to-array-in-java/28192590#28192590", "tags": ["java", "android", "arrays", "list", "arraylist"]}, {"body": "<p>This is works. Kind of.</p>\n\n<pre><code>public static Object[] toArray(List&lt;?&gt; a) {\n    Object[] arr = new Object[a.size()];\n    for (int i = 0; i &lt; a.size(); i++)\n        arr[i] = a.get(i);\n    return arr;\n}\n</code></pre>\n\n<p>Then the main method.</p>\n\n<pre><code>public static void main(String[] args) {\n    List&lt;String&gt; list = new ArrayList&lt;String&gt;() {{\n        add(\"hello\");\n        add(\"world\");\n    }};\n    Object[] arr = toArray(list);\n    System.out.println(arr[0]);\n}\n</code></pre>\n", "title": "Convert list to array in Java", "answer_id": 34812333, "link": "http://stackoverflow.com/questions/9572795/convert-list-to-array-in-java/34812333#34812333", "tags": ["java", "android", "arrays", "list", "arraylist"]}], "question_id": 9572795}, {"body": "<p><strong>Implements vs. Extends. When to use? What's the Difference?</strong></p>\n\n<p>Sorry for such a basic question. I've searched for this and read a couple of articles but I don't seem to understand it properly.</p>\n\n<p>Can anyone please explain in an easy to understand language or a link to some article?</p>\n", "tags": ["java", "inheritance", "interface", "extends", "implements"], "title": "Implements vs. Extends. When to use? What&#39;s the Difference?", "answer_count": 11, "creation_date": 1338488747, "score": 314, "link": "http://stackoverflow.com/questions/10839131/implements-vs-extends-when-to-use-whats-the-difference", "answers": [{"body": "<p><code>extends</code> is for when you're inheriting from a <em>base class</em> (i.e. extending its functionality).</p>\n\n<p><code>implements</code> is for when you're implementing an <em>interface</em>.</p>\n\n<p>Here is a good place to start: <a href=\"http://docs.oracle.com/javase/tutorial/java/IandI/index.html\"><em>Interfaces and Inheritance</em></a>.</p>\n", "title": "Implements vs. Extends. When to use? What&#39;s the Difference?", "answer_id": 10839149, "link": "http://stackoverflow.com/questions/10839131/implements-vs-extends-when-to-use-whats-the-difference/10839149#10839149", "tags": ["java", "inheritance", "interface", "extends", "implements"]}, {"body": "<p><code>extends</code> is for <em>extending</em> a class.</p>\n\n<p><code>implements</code> is for <em>implementing</em> an interface</p>\n\n<p>The difference between an interface and a regular class is that in an interface you can not implement any of the declared methods.  Only the class that \"implements\" the interface can implement the methods.  The C++ equivalent of an interface would be an abstract class (not EXACTLY the same but pretty much).</p>\n\n<p>Also java doesn't support <strong>multiple inheritance</strong> for classes. This is solved by using multiple interfaces.</p>\n\n<pre><code> public interface ExampleInterface{\n    public void do();\n    public String doThis(int number);\n }\n\n public class sub implements ExampleInterface{\n     public void do(){\n       //specify what must happen\n     }\n\n     public String doThis(int number){\n       //specfiy what must happen\n     }\n }\n</code></pre>\n\n<p>now extending a class</p>\n\n<pre><code> public class SuperClass{\n    public int getNb(){\n         //specify what must happen\n        return 1;\n     }\n\n     public int getNb2(){\n         //specify what must happen\n        return 2;\n     }\n }\n\n public class SubClass extends SuperClass{\n      //you can override the implementation\n      @Override\n      public int getNb2(){\n        return 3;\n     }\n }\n</code></pre>\n\n<p>in this case</p>\n\n<pre><code>  Subclass s = new SubClass();\n  s.getNb(); //returns 1\n  s.getNb2(); //returns 3\n\n  SuperClass sup = new SuperClass();\n  sup.getNb(); //returns 1\n  sup.getNb2(); //returns 2\n</code></pre>\n\n<p>I suggest you do some more research on <strong>dynamic binding, polymorphism and in general inheritance in Object-oriented programming</strong></p>\n", "title": "Implements vs. Extends. When to use? What&#39;s the Difference?", "answer_id": 10839155, "link": "http://stackoverflow.com/questions/10839131/implements-vs-extends-when-to-use-whats-the-difference/10839155#10839155", "tags": ["java", "inheritance", "interface", "extends", "implements"]}, {"body": "<p>Implements is used for Interfaces and extends is used to extend a class.</p>\n\n<p>To make it more clearer in easier terms,an interface is like it sound - an interface - a model, that you need to apply,follow, along with your ideas to it.</p>\n\n<p>Extend is used for classes,here,you are extending something that already exists by adding more functionality to it.</p>\n\n<p>A few more notes:</p>\n\n<p>an interface can extend another interface.</p>\n\n<p>And when you need to choose between implementing an interface or extending a class for a particular scenario, go for implementing an interface. Because a class can implement multiple interfaces but extend only one class.</p>\n", "title": "Implements vs. Extends. When to use? What&#39;s the Difference?", "answer_id": 10839157, "link": "http://stackoverflow.com/questions/10839131/implements-vs-extends-when-to-use-whats-the-difference/10839157#10839157", "tags": ["java", "inheritance", "interface", "extends", "implements"]}, {"body": "<p>Both keywords are used when creating your own new class in the Java language. The distinction is that implements means that you're using the elements of a Java Interface in your class, and extends means that you are creating a subclass of the class you are extending. You can only extend one class in your new class, but you can implement as many interfaces as you would like. </p>\n\n<p><a href=\"http://docs.oracle.com/javase/tutorial/java/concepts/interface.html\" rel=\"nofollow\">http://docs.oracle.com/javase/tutorial/java/concepts/interface.html</a></p>\n\n<p>This can help to clarify what an interface is, and the conventions around using them.</p>\n", "title": "Implements vs. Extends. When to use? What&#39;s the Difference?", "answer_id": 10839178, "link": "http://stackoverflow.com/questions/10839131/implements-vs-extends-when-to-use-whats-the-difference/10839178#10839178", "tags": ["java", "inheritance", "interface", "extends", "implements"]}, {"body": "<p>A <code>class</code> can only \"implement\" an <code>interface</code>. A class only \"extends\" a <code>class</code>. Likewise, an <code>interface</code> can extend another <code>interface</code>.</p>\n\n<p>A <code>class</code> can only extend one other <code>class</code>. A <code>class</code> can implement several <code>interface</code>s. </p>\n\n<p>If instead you are more interested in knowing when to use <code>abstract class</code>es and <code>interface</code>s, refer to this thread: <a href=\"http://stackoverflow.com/questions/761194/interface-vs-abstract-class-general-oo\">Interface vs Abstract Class (general OO)</a></p>\n", "title": "Implements vs. Extends. When to use? What&#39;s the Difference?", "answer_id": 10839184, "link": "http://stackoverflow.com/questions/10839131/implements-vs-extends-when-to-use-whats-the-difference/10839184#10839184", "tags": ["java", "inheritance", "interface", "extends", "implements"]}, {"body": "<p>I notice you have some C++ questions in your profile.  If you understand the concept of <em>multiple-inheritance</em> from C++ (referring to classes that inherit characteristics from more than one other class), Java does not allow this, but it does have keyword <code>interface</code>, which is sort of like a pure virtual class in C++.  As mentioned by lots of people, you <code>extend</code> a class (and you can only extend from one), and you <code>implement</code> an interface -- but your class can implement as many interfaces as you like.</p>\n\n<p>Ie, these keywords and the rules governing their use delineate the possibilities for multiple-inheritance in Java (you can only have one super class, but you can implement multiple interfaces).</p>\n", "title": "Implements vs. Extends. When to use? What&#39;s the Difference?", "answer_id": 10839299, "link": "http://stackoverflow.com/questions/10839131/implements-vs-extends-when-to-use-whats-the-difference/10839299#10839299", "tags": ["java", "inheritance", "interface", "extends", "implements"]}, {"body": "<p>Extends : This is used to get attributes of a parent class into base class and may contain already defined methods that can be overridden in the child class.</p>\n\n<p>Implements : This is used to implement an interface (parent class with functions signatures only but not their definitions) by defining it in the child class.</p>\n", "title": "Implements vs. Extends. When to use? What&#39;s the Difference?", "answer_id": 27354862, "link": "http://stackoverflow.com/questions/10839131/implements-vs-extends-when-to-use-whats-the-difference/27354862#27354862", "tags": ["java", "inheritance", "interface", "extends", "implements"]}, {"body": "<p>An interface is a description of the actions that an object can do... for example when you flip a light switch, the light goes on, you don't care how, just that it does. In Object Oriented Programming, an Interface is a description of all functions that an object must have in order to be an \"X\". Again, as an example, anything that \"ACTS LIKE\" a light, should have a turn_on() method and a turn_off() method. The purpose of interfaces is to allow the computer to enforce these properties and to know that an object of TYPE T (whatever the interface is ) must have functions called X,Y,Z, etc.</p>\n\n<p>An interface is a programming structure/syntax that allows the computer to enforce certain properties on an object (class). For example, say we have a car class and a scooter class and a truck class. Each of these three classes should have a start_engine() action. How the \"engine is started\" for each vehicle is left to each particular class, but the fact that they must have a start_engine action is the domain of the interface.</p>\n\n<p><a href=\"http://www.cs.utah.edu/~germain/PPS/Topics/interfaces.html\">http://www.cs.utah.edu/~germain/PPS/Topics/interfaces.html</a></p>\n", "title": "Implements vs. Extends. When to use? What&#39;s the Difference?", "answer_id": 32213713, "link": "http://stackoverflow.com/questions/10839131/implements-vs-extends-when-to-use-whats-the-difference/32213713#32213713", "tags": ["java", "inheritance", "interface", "extends", "implements"]}, {"body": "<p>When a subclass extends a class, it allows the subclass to inherit (reuse) and override code defined in the supertype.\nWhen a class implements an interface, it allows an object created from the class to be used in any context that expects a value of the interface.</p>\n\n<p>The real catch here is that while we are implementing anything it simply means we are using those methods as it is. There is no scope for change in their values and return types. </p>\n\n<p>But when we are extending anything then it becomes an extension of your class. You can change it, use it, reuse use it and it does not necessarily need to return the same values as it does in superclass. </p>\n", "title": "Implements vs. Extends. When to use? What&#39;s the Difference?", "answer_id": 34826272, "link": "http://stackoverflow.com/questions/10839131/implements-vs-extends-when-to-use-whats-the-difference/34826272#34826272", "tags": ["java", "inheritance", "interface", "extends", "implements"]}, {"body": "<p>Generally <code>implements</code> used for implementing an <code>interface</code> and <code>extends</code> used for <code>extension</code> of base class behaviour or <code>abstract</code> class. </p>\n\n<p><em>extends</em>: A derived class can extend a base class. You may redefine the behaviour of an established relation. Derived class \"<strong><em>is a</em></strong>\" base class type</p>\n\n<p><em>implements</em>: You are implementing a contract. The class implementing the interface \"<strong><em>has a</em></strong>\" capability. </p>\n\n<p>With java 8 release, interface can have <code>default</code> methods in interface, which provides implementation in interface itself.</p>\n\n<p>Refer to this question for when to use each of them:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/761194/interface-vs-abstract-class-general-oo/33963650#33963650\">Interface vs Abstract Class (general OO)</a></p>\n\n<p>Example to understand things.</p>\n\n<pre><code>public class ExtendsAndImplementsDemo{\n    public static void main(String args[]){\n\n        Dog dog = new Dog(\"Tiger\",16);\n        Cat cat = new Cat(\"July\",20);\n\n        System.out.println(\"Dog:\"+dog);\n        System.out.println(\"Cat:\"+cat);\n\n        dog.remember();\n        dog.protectOwner();\n        Learn dl = dog;\n        dl.learn();\n\n        cat.remember();\n        cat.protectOwner();\n\n        Climb c = cat;\n        c.climb();\n\n        Man man = new Man(\"Ravindra\",40);\n        System.out.println(man);\n\n        Climb cm = man;\n        cm.climb();\n        Think t = man;\n        t.think();\n        Learn l = man;\n        l.learn();\n        Apply a = man;\n        a.apply();\n\n    }\n}\n\nabstract class Animal{\n    String name;\n    int lifeExpentency;\n    public Animal(String name,int lifeExpentency ){\n        this.name = name;\n        this.lifeExpentency=lifeExpentency;\n    }\n    public void remember(){\n        System.out.println(\"Define your own remember\");\n    }\n    public void protectOwner(){\n        System.out.println(\"Define your own protectOwner\");\n    }\n\n    public String toString(){\n        return this.getClass().getSimpleName()+\":\"+name+\":\"+lifeExpentency;\n    }\n}\nclass Dog extends Animal implements Learn{\n\n    public Dog(String name,int age){\n        super(name,age);\n    }\n    public void remember(){\n        System.out.println(this.getClass().getSimpleName()+\" can remember for 5 minutes\");\n    }\n    public void protectOwner(){\n        System.out.println(this.getClass().getSimpleName()+ \" will protect owner\");\n    }\n    public void learn(){\n        System.out.println(this.getClass().getSimpleName()+ \" can learn:\");\n    }\n}\nclass Cat extends Animal implements Climb {\n    public Cat(String name,int age){\n        super(name,age);\n    }\n    public void remember(){\n        System.out.println(this.getClass().getSimpleName() + \" can remember for 16 hours\");\n    }\n    public void protectOwner(){\n        System.out.println(this.getClass().getSimpleName()+ \" won't protect owner\");\n    }\n    public void climb(){\n        System.out.println(this.getClass().getSimpleName()+ \" can climb\");\n    }\n}\ninterface Climb{\n    public void climb();\n}\ninterface Think {\n    public void think();\n}\n\ninterface Learn {\n    public void learn();\n}\ninterface Apply{\n    public void apply();\n}\n\nclass Man implements Think,Learn,Apply,Climb{\n    String name;\n    int age;\n\n    public Man(String name,int age){\n        this.name = name;\n        this.age = age;\n    }\n    public void think(){\n        System.out.println(\"I can think:\"+this.getClass().getSimpleName());\n    }\n    public void learn(){\n        System.out.println(\"I can learn:\"+this.getClass().getSimpleName());\n    }\n    public void apply(){\n        System.out.println(\"I can apply:\"+this.getClass().getSimpleName());\n    }\n    public void climb(){\n        System.out.println(\"I can climb:\"+this.getClass().getSimpleName());\n    }\n    public String toString(){\n        return \"Man :\"+name+\":Age:\"+age;\n    }\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>Dog:Dog:Tiger:16\nCat:Cat:July:20\nDog can remember for 5 minutes\nDog will protect owner\nDog can learn:\nCat can remember for 16 hours\nCat won't protect owner\nCat can climb\nMan :Ravindra:Age:40\nI can climb:Man\nI can think:Man\nI can learn:Man\nI can apply:Man\n</code></pre>\n\n<p>Important points to understand:</p>\n\n<ol>\n<li>Dog and <code>Cats</code> are animals and they extended <code>remember</code>() and <code>protectOwner</code>() by sharing <code>name,lifeExpentency</code> from <code>Animal</code></li>\n<li><em>Cat can climb() but Dog does not. Dog can think() but Cat does not</em>. These specific capabilities are added to <code>Cat</code> and <code>Dog</code> by implementing that capability.</li>\n<li><em><code>Man</code> is not an animal but he can <code>Think,Learn,Apply,Climb</code></em></li>\n</ol>\n\n<p>By going through these examples, you can understand that</p>\n\n<p><em>Unrelated classes can have capabilities through interface but related classes override behaviour through extension of base classes.</em></p>\n", "title": "Implements vs. Extends. When to use? What&#39;s the Difference?", "answer_id": 34977257, "link": "http://stackoverflow.com/questions/10839131/implements-vs-extends-when-to-use-whats-the-difference/34977257#34977257", "tags": ["java", "inheritance", "interface", "extends", "implements"]}, {"body": "<ul>\n<li><p>A extends B:</p>\n\n<p>A and B are both classes or both interfaces</p></li>\n<li><p>A implements B</p>\n\n<p>A is a class and B is an interface</p></li>\n<li><p>The remaining case where A is an interface and B is a class is not legal in Java.</p></li>\n</ul>\n", "title": "Implements vs. Extends. When to use? What&#39;s the Difference?", "answer_id": 37430695, "link": "http://stackoverflow.com/questions/10839131/implements-vs-extends-when-to-use-whats-the-difference/37430695#37430695", "tags": ["java", "inheritance", "interface", "extends", "implements"]}], "question_id": 10839131}, {"body": "<p>I have installed an application, when I try to run it (it's an executable jar) nothing happens. When I run it from the commandline with: </p>\n\n<blockquote>\n  <p>java -jar \"app.jar\"</p>\n</blockquote>\n\n<p>I get the following message:</p>\n\n<blockquote>\n  <p>no main manifest attribute, in \"app.jar\"</p>\n</blockquote>\n\n<p>Normally, if I had created the program myself, I would have added a main class attribute to the manifest file. But in this case, since the file is from an application, i cannot do that. I also tried extracting the jar to see if I could find the main class, but there are to many classes and none of them has the word \"main\" in it's name. There must be a way to fix this because the program runs fine on other systems.</p>\n", "tags": ["java", "jar", "manifest", "main"], "title": "Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;", "answer_count": 20, "creation_date": 1331662840, "score": 308, "link": "http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute", "answers": [{"body": "<p>If the jar isn't following <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/jar/jar.html#Main_Attributes\" rel=\"nofollow\">the rules</a>, it's not an executable jar.</p>\n", "title": "Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;", "answer_id": 9689837, "link": "http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute/9689837#9689837", "tags": ["java", "jar", "manifest", "main"]}, {"body": "<p>That should have been <code>java -jar app.jar</code> instead of <code>java -jar \"app\"</code>.</p>\n\n<p>The <code>-jar</code> option only works if the JAR file is an executable JAR file, which means it must have a manifest file with a <code>Main-Class</code> attribute in it. See <a href=\"http://docs.oracle.com/javase/tutorial/deployment/jar/index.html\">Packaging Programs in JAR Files</a> to learn how to create an executable JAR.</p>\n\n<p>If it's not an executable JAR, then you'll need to run the program with something like:</p>\n\n<pre><code>java -cp app.jar com.somepackage.SomeClass\n</code></pre>\n\n<p>where <code>com.somepackage.SomeClass</code> is the class that contains the <code>main</code> method to run the program. (What that class is depends on the program, it's impossible to tell from the information you've supplied).</p>\n", "title": "Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;", "answer_id": 9689868, "link": "http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute/9689868#9689868", "tags": ["java", "jar", "manifest", "main"]}, {"body": "<p>First, it's kind of weird, to see you run <code>java -jar \"app\"</code> and not <code>java -jar app.jar</code></p>\n\n<p>Second, to make a jar executable... you need to jar a file called META-INF/MANIFEST.MF</p>\n\n<p>the file itself should have (at least) this one liner:</p>\n\n<pre><code>Main-Class: com.mypackage.MyClass\n</code></pre>\n\n<p>Where <strong>com.mypackage.MyClass</strong> is the class holding the <em>public static void main(String[] args)</em> entry point.</p>\n\n<p>Note that there are several ways to get this done either with the CLI, Maven or Ant:</p>\n\n<p>For <strong>CLI</strong>, the following command will do: (tks @dvvrt)\n<code>\njar cmvf META-INF/MANIFEST.MF &lt;new-jar-filename&gt;.jar  &lt;files to include&gt;\n</code></p>\n\n<p>For <strong>Maven</strong>, something like the following snippet should do the trick. Note that this is only the plugin definition, not the full <strong>pom.xml</strong>:</p>\n\n<pre><code>&lt;build&gt;\n  &lt;plugins&gt;\n    &lt;plugin&gt;\n      &lt;!-- Build an executable JAR --&gt;\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n      &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n      &lt;version&gt;3.0.2&lt;/version&gt;\n      &lt;configuration&gt;\n        &lt;archive&gt;\n          &lt;manifest&gt;\n            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n            &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n            &lt;mainClass&gt;com.mypackage.MyClass&lt;/mainClass&gt;\n          &lt;/manifest&gt;\n        &lt;/archive&gt;\n      &lt;/configuration&gt;\n    &lt;/plugin&gt;\n  &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>(Pick a <a href=\"http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22org.apache.maven.plugins%22%20AND%20a%3A%22maven-jar-plugin%22\"><code>&lt;version&gt;</code></a> appropriate to your project.)</p>\n\n<p>For <strong>Ant</strong>, the snippet below should help:</p>\n\n<pre><code>&lt;jar destfile=\"build/main/checksites.jar\"&gt;\n  &lt;fileset dir=\"build/main/classes\"/&gt;\n  &lt;zipfileset includes=\"**/*.class\" src=\"lib/main/some.jar\"/&gt;\n  &lt;manifest&gt;\n    &lt;attribute name=\"Main-Class\" value=\"com.acme.checksites.Main\"/&gt;\n  &lt;/manifest&gt;\n&lt;/jar&gt;\n</code></pre>\n\n<p>Credits Michael Niemand -</p>\n", "title": "Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;", "answer_id": 9689877, "link": "http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute/9689877#9689877", "tags": ["java", "jar", "manifest", "main"]}, {"body": "<p>Any executable jar file Should run either by clicking or running using command prompt like java -jar app.jar (use \"if path of jar contains space\" - i.e. java -jar \"C:\\folder name\\app.jar\"). If your executable jar is not running, which means it is not created properly.</p>\n\n<p>For better understanding, extract the jar file (or view using any tool, for windows 7-Zip is nice one) and check the file under /META-INF/MANIFEST.MF. If you find any entry like</p>\n\n<p>Main-Class: your.package.name.ClaaswithMain - then it's fine, otherwise you have to provide it.</p>\n\n<p>Be aware of appending Main-Class entry on MANIFEST.MF file, check where you are saving it! </p>\n", "title": "Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;", "answer_id": 11797307, "link": "http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute/11797307#11797307", "tags": ["java", "jar", "manifest", "main"]}, {"body": "<p>For maven, this is what solved it (for me, for a Veetle codebase on GitHub):</p>\n\n<pre><code>&lt;build&gt;\n&lt;plugins&gt;\n  &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.0&lt;/version&gt;\n    &lt;executions&gt;\n      &lt;execution&gt;\n        &lt;phase&gt;package&lt;/phase&gt;\n        &lt;goals&gt;\n          &lt;goal&gt;shade&lt;/goal&gt;\n        &lt;/goals&gt;\n        &lt;configuration&gt;\n          &lt;transformers&gt;\n            &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer\"&gt;\n              &lt;mainClass&gt;org.lazydevs.veetle.api.VeetleAPI&lt;/mainClass&gt;\n            &lt;/transformer&gt;\n          &lt;/transformers&gt;\n        &lt;/configuration&gt;\n      &lt;/execution&gt;\n    &lt;/executions&gt;\n  &lt;/plugin&gt;\n &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>Cheers...</p>\n", "title": "Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;", "answer_id": 15161904, "link": "http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute/15161904#15161904", "tags": ["java", "jar", "manifest", "main"]}, {"body": "<p>We generally use the syntax below:</p>\n\n<pre><code>java -jar app.jar  \n</code></pre>\n\n<p>If your <code>jar</code> is not executable then you can see such type of error no main manifest attribute.</p>\n", "title": "Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;", "answer_id": 16944593, "link": "http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute/16944593#16944593", "tags": ["java", "jar", "manifest", "main"]}, {"body": "<p>Try this command to include the jar: </p>\n\n<pre><code>java -cp yourJarName.jar your.package..your.MainClass\n</code></pre>\n", "title": "Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;", "answer_id": 18397266, "link": "http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute/18397266#18397266", "tags": ["java", "jar", "manifest", "main"]}, {"body": "<p>You might not have created the jar file properly:</p>\n\n<blockquote>\n  <p>ex: missing option m in jar creation</p>\n</blockquote>\n\n<p>The following works:</p>\n\n<pre><code>jar -cvfm MyJar.jar Manifest.txt *.class\n</code></pre>\n", "title": "Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;", "answer_id": 18495052, "link": "http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute/18495052#18495052", "tags": ["java", "jar", "manifest", "main"]}, {"body": "<p>You Can Simply follow this step \n Create a jar file using</p>\n\n<pre><code> jar -cfm jarfile-name manifest-filename Class-file name\n</code></pre>\n\n<p>While running the jar file simple run like this</p>\n\n<pre><code> java -cp jarfile-name main-classname\n</code></pre>\n", "title": "Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;", "answer_id": 19063490, "link": "http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute/19063490#19063490", "tags": ["java", "jar", "manifest", "main"]}, {"body": "<p>That is because Java cannot find the Main attribute in the MANIFEST.MF file.\nThe Main attribute is necessary to tell java which class it should use as the application's entry point. Inside the jar file, the MANIFEST.MF file is located in META-INF folder. Wondering how you could look at what's inside a jar file? Open the jar file with WinRAR.</p>\n\n<p>The main attribute inside the MANIFEST.MF looks like this:</p>\n\n<pre><code>Main-Class: &lt;packagename&gt;.&lt;classname&gt;\n</code></pre>\n\n<p>You get this \"no main manifest attribute\" error when this line is missing from the MANIFEST.MF file. </p>\n\n<p><strike>It's really a huge mess to specify this attribute inside the MANIFEST.MF file.</strike></p>\n\n<p>Update: I just found a really neat way to specify the Application's entry point in eclipse.\nWhen you say Export, </p>\n\n<pre><code>Select Jar and next \n\n[ give it a name in the next window ] and next\n\nand next again\n\nand you'll see \" Select the class of the application entry point\".\n\nJust pick a class and Eclipse will automatically build a cool MANIFEST.MF for you.\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/9V7F3.png\" alt=\"enter image description here\"></p>\n", "title": "Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;", "answer_id": 19073153, "link": "http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute/19073153#19073153", "tags": ["java", "jar", "manifest", "main"]}, {"body": "<p>Alternatively, you can use maven-assembly-plugin, as shown in the below example:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n    &lt;executions&gt;\n      &lt;execution&gt;\n        &lt;phase&gt;package&lt;/phase&gt;\n        &lt;goals&gt;\n          &lt;goal&gt;single&lt;/goal&gt;\n        &lt;/goals&gt;\n      &lt;/execution&gt;\n    &lt;/executions&gt;\n    &lt;configuration&gt;\n\n      &lt;archive&gt;\n      &lt;manifest&gt;\n        &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n        &lt;mainClass&gt;com.package.MainClass&lt;/mainClass&gt;\n      &lt;/manifest&gt;\n      &lt;/archive&gt;\n\n      &lt;descriptorRefs&gt;\n        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n      &lt;/descriptorRefs&gt;\n\n    &lt;/configuration&gt;\n  &lt;/plugin&gt; \n</code></pre>\n\n<p>In this example all the dependency jars as specified in  section will be automatically included in your single jar. Note that jar-with-dependencies should be literally put as, not to be replaced with the jar file names you want to include.</p>\n", "title": "Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;", "answer_id": 27662742, "link": "http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute/27662742#27662742", "tags": ["java", "jar", "manifest", "main"]}, {"body": "<p>For me, none of the answers really helped - I had the manifest file in correct place, containing the Main-Class and everything. What tripped me over was this:</p>\n\n<blockquote>\n  <p>Warning: The text file from which you are creating the manifest must\n  end with a new line or carriage return. The last line will not be\n  parsed properly if it does not end with a new line or carriage return.</p>\n</blockquote>\n\n<p>(<a href=\"http://docs.oracle.com/javase/tutorial/deployment/jar/modman.html\">source</a>). Adding a newline at the end of the manifest fixed it.</p>\n", "title": "Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;", "answer_id": 28134909, "link": "http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute/28134909#28134909", "tags": ["java", "jar", "manifest", "main"]}, {"body": "<p>Here is the actual reason why. In your manifest.txt or whatever after the last line you need exactly two lines of new line like this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/ysbCM.png\" alt=\"image\"></p>\n\n<p>This is determined weird I know, but it worked for me.</p>\n", "title": "Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;", "answer_id": 29189691, "link": "http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute/29189691#29189691", "tags": ["java", "jar", "manifest", "main"]}, {"body": "<p>You might have the same problem as I do. After creating your .jar file, write <code>jar xf app.jar META-INF/MANIFEST.MF</code>. This will create a copy of the file to your current directory so you can read it. If it only says something like:</p>\n\n<blockquote>\n  <p>Manifest-Version: 1.0</p>\n  \n  <p>Created-By: 1.8.0_51 (Oracle Corporation)</p>\n</blockquote>\n\n<p>and does not contain the \"Main-Class\" declaration, then I think you found your problem.</p>\n\n<p>I do not know how to solve it, though. I checked other people with same/similar problems on StackOverflow and couldn't find an answer. However with this information you can perhaps get some better help (given the fact that you have the same problem as I).</p>\n\n<p><strong>Edit: I had tried with a manifest-file but didn't get it to work, but my mistake was to only name one of the classes when creating the jar-file. I wrote *.class instead and it works now.</strong></p>\n\n<p><strong>Although I don't know why there is a need to create a manifest-file. But I guess it's fine as long as it works.</strong></p>\n", "title": "Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;", "answer_id": 33768075, "link": "http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute/33768075#33768075", "tags": ["java", "jar", "manifest", "main"]}, {"body": "<p>For me this error occurred simply because I forgot tell Eclipse that I wanted a runnable jar file and not a simple library jar file.  So when you create the jar file in Eclipse make sure that you click the right radio button</p>\n", "title": "Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;", "answer_id": 33951560, "link": "http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute/33951560#33951560", "tags": ["java", "jar", "manifest", "main"]}, {"body": "<p>I faced the same issue and it's fixed now:)\nJust follow the below steps and the error could be for anything, but the below steps makes the process smoother. I spend lot of time to find the fix.</p>\n\n<p>1.Try restart the Eclipse (if you are using Eclipse to built JAR file)\n--> Actually this helped my issue in exporting the JAR file properly.</p>\n\n<p>2.After eclipse restart, try to see if your eclipse is able to recognize the main class/method by your Java project --> right click --> Run as --> Run configurations --> Main --> click Search button to see if your eclipse is able to lookup for your main class in the JAR file.\n--> This is for the validation that JAR file will have the entry point to the main class.</p>\n\n<ol start=\"4\">\n<li><p>After this, export your Java Dynamic project as \"Runnable JAR\" file and not JAR file.</p></li>\n<li><p>In Java launch configuration, choose your main class.</p></li>\n<li><p>Once export the jar file, use the below command to execute.\njava -cp [Your JAR].jar [complete package].MainClass\neg: java -cp AppleTCRuleAudit.jar com.apple.tcruleaudit.classes.TCRuleAudit</p></li>\n<li><p>You might face the unsupported java version error. the fix is to change the java_home in your shell bash profile to match the java version used to compile the project in eclipse.</p></li>\n</ol>\n\n<p>Hope this helps! Kindly let me know if you still have any issues.</p>\n", "title": "Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;", "answer_id": 35640852, "link": "http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute/35640852#35640852", "tags": ["java", "jar", "manifest", "main"]}, {"body": "<p>The Gradle answer is to add a jar/manifest/attributes setting like this:</p>\n\n<pre><code>apply plugin: 'java'\n\njar {\n    manifest {\n        attributes 'Main-Class': 'com.package.app.Class'\n    }\n}\n</code></pre>\n", "title": "Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;", "answer_id": 37127374, "link": "http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute/37127374#37127374", "tags": ["java", "jar", "manifest", "main"]}, {"body": "<p>Check your local .m2 direcory for a sub directory of this artifact.\nIf exixts - delete it, and perform Maven update again</p>\n", "title": "Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;", "answer_id": 38205482, "link": "http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute/38205482#38205482", "tags": ["java", "jar", "manifest", "main"]}, {"body": "<p>To create an executable jar we need to add the </p>\n\n<blockquote>\n  <p>spring-boot-maven-plugin</p>\n</blockquote>\n\n<p>to our </p>\n\n<blockquote>\n  <p>pom.xml</p>\n</blockquote>\n\n<p>Insert the following lines just below the dependencies section:</p>\n\n<pre><code>&lt;build&gt;\n &lt;plugins&gt;\n    &lt;plugin&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n    &lt;/plugin&gt;\n &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>After that save your pom.xml and run </p>\n\n<pre><code>mvn package\n</code></pre>\n\n<p>from the command line: and </p>\n\n<pre><code>java -jar app.jar\n</code></pre>\n\n<p>to run the application</p>\n", "title": "Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;", "answer_id": 38754015, "link": "http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute/38754015#38754015", "tags": ["java", "jar", "manifest", "main"]}, {"body": "<p>I had this issue when creating a jar using IntelliJ IDEA. See <a href=\"http://www.4answered.com/questions/view/13fb689/Wrong-Manifestmf-in-IntelliJ-IDEA-created-jar\" rel=\"nofollow\">this discussion</a>.</p>\n\n<p>What solved it for me was to re-create the jar artifact, choosing JAR > From modules with dependencies, but not accepting the default Directory for META-INF/MANIFEST.MF. Change it from -/src/main/java to -/src/main/resources.</p>\n\n<p>Otherwise it was including a manifest file in the jar, but not the one in -/src/main/java that it should have.</p>\n", "title": "Can&#39;t execute jar- file: &quot;no main manifest attribute&quot;", "answer_id": 38856446, "link": "http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute/38856446#38856446", "tags": ["java", "jar", "manifest", "main"]}], "question_id": 9689793}, {"body": "<p>Every time I try to open Eclipse in Ubuntu 12.04 I get an Unsatisfied Link Error and it will not open. I have recently installed the java JDK and Android SDK, could this be the problem? I followed <a href=\"http://forums.team-nocturnal.com/showthread.php/772\">this tutorial</a>.</p>\n\n<p>Here is the log info:</p>\n\n<pre><code>!SESSION 2012-04-15 21:05:46.902 -----------------------------------------------\neclipse.buildId=I20110613-1736\njava.version=1.7.0\njava.vendor=Oracle Corporation\nBootLoader constants: OS=linux, ARCH=x86_64, WS=gtk, NL=en_GB\nCommand-line arguments:  -os linux -ws gtk -arch x86_64\n\n!ENTRY org.eclipse.osgi 4 0 2012-04-15 21:05:47.885\n!MESSAGE Application error\n!STACK 1\njava.lang.UnsatisfiedLinkError: Could not load SWT library. Reasons: \nno swt-gtk-3740 in java.library.path\nno swt-gtk in java.library.path\nCan't load library: /home/tom/.swt/lib/linux/x86_64/libswt-gtk-3740.so\nCan't load library: /home/tom/.swt/lib/linux/x86_64/libswt-gtk.so\n\nat org.eclipse.swt.internal.Library.loadLibrary(Library.java:285)\nat org.eclipse.swt.internal.Library.loadLibrary(Library.java:194)\nat org.eclipse.swt.internal.C.&lt;clinit&gt;(C.java:21)\nat org.eclipse.swt.internal.Converter.wcsToMbcs(Converter.java:63)\nat org.eclipse.swt.internal.Converter.wcsToMbcs(Converter.java:54)\nat org.eclipse.swt.widgets.Display.&lt;clinit&gt;(Display.java:132)\nat org.eclipse.ui.internal.Workbench.createDisplay(Workbench.java:695)\nat org.eclipse.ui.PlatformUI.createDisplay(PlatformUI.java:161)\nat org.eclipse.ui.internal.ide.application.IDEApplication.createDisplay(IDEApplication.java:153)\nat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:95)\nat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)\nat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)\nat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:601)\nat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)\nat org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)\nat org.eclipse.equinox.launcher.Main.run(Main.java:1410)\nat org.eclipse.equinox.launcher.Main.main(Main.java:1386)\n</code></pre>\n\n<p>I have tried uninstalling and reinstalling, and removing the <code>~/.eclipse</code> directory but it still doesn't work</p>\n", "tags": ["java", "eclipse", "ubuntu", "unsatisfiedlinkerror"], "title": "Eclipse cannot load SWT libraries", "answer_count": 9, "creation_date": 1334521098, "score": 272, "link": "http://stackoverflow.com/questions/10165693/eclipse-cannot-load-swt-libraries", "answers": [{"body": "<pre>\nCan't load library: /home/tom/.swt/lib/linux/x86_64/libswt-gtk-3740.so\nCan't load library: /home/tom/.swt/lib/linux/x86_64/libswt-gtk.so\n</pre>\n\n<p>looks like the libraries should be at  .swt/lib/linux/x86_64/ if there are not there you can \ntry  this command:</p>\n\n<pre>locate  libswt-gtk.so</pre>\n\n<p>this should find the libraries copy the entire directory to  /home/tom/.swt/lib/linux/x86_64</p>\n", "title": "Eclipse cannot load SWT libraries", "answer_id": 10166124, "link": "http://stackoverflow.com/questions/10165693/eclipse-cannot-load-swt-libraries/10166124#10166124", "tags": ["java", "eclipse", "ubuntu", "unsatisfiedlinkerror"]}, {"body": "<p>SOLVED:</p>\n\n<p>Because I had installed the Oracle Java 7 it had changed the default Java to Oracle Java 7, however it needed to be the Open JDK.</p>\n\n<p>To fix, open up terminal and type</p>\n\n<pre><code>sudo update-alternatives --config java\n</code></pre>\n\n<p>This brings up a list of the different types of Java. Simply select the Open JDK.</p>\n", "title": "Eclipse cannot load SWT libraries", "answer_id": 10177687, "link": "http://stackoverflow.com/questions/10165693/eclipse-cannot-load-swt-libraries/10177687#10177687", "tags": ["java", "eclipse", "ubuntu", "unsatisfiedlinkerror"]}, {"body": "<p>on my Ubuntu 12.04 <strong>32 bit</strong>. I edit the command to: </p>\n\n<pre><code>ln -s /usr/lib/jni/libswt-* ~/.swt/lib/linux/x86/\n</code></pre>\n\n<p>And on Ubuntu 12.04 <strong>64 bit</strong> try: </p>\n\n<pre><code>ln -s /usr/lib/jni/libswt-* ~/.swt/lib/linux/x86_64/\n</code></pre>\n", "title": "Eclipse cannot load SWT libraries", "answer_id": 10251453, "link": "http://stackoverflow.com/questions/10165693/eclipse-cannot-load-swt-libraries/10251453#10251453", "tags": ["java", "eclipse", "ubuntu", "unsatisfiedlinkerror"]}, {"body": "<p>If you start eclipse using oracle java, then eclipse might fail in finding native libraries like SWT or SVN libraries. The SWT-JNI libraries are located in /usr/lib/jni/ and the SVN-JNI libraries are located in /usr/lib/x86_64-linux-gnu/jni/.</p>\n\n<p>Instead of starting eclipse with the command</p>\n\n<pre><code>eclipse\n</code></pre>\n\n<p>you can use the command</p>\n\n<pre><code>env LD_LIBRARY_PATH=/usr/lib/jni/:/usr/lib/x86_64-linux-gnu/jni/:$LD_LIBRARY_PATH eclipse\n</code></pre>\n\n<p>to pass the environment variable LD_LIBRARY_PATH to eclipse. Eclipse will find the native libraries and will run properly.</p>\n", "title": "Eclipse cannot load SWT libraries", "answer_id": 15277376, "link": "http://stackoverflow.com/questions/10165693/eclipse-cannot-load-swt-libraries/15277376#15277376", "tags": ["java", "eclipse", "ubuntu", "unsatisfiedlinkerror"]}, {"body": "<p>Please make sure that your home partition is mounted with executable permissions. That is the default, but if you happen to mount it without exec option, you will get this error.</p>\n", "title": "Eclipse cannot load SWT libraries", "answer_id": 15602672, "link": "http://stackoverflow.com/questions/10165693/eclipse-cannot-load-swt-libraries/15602672#15602672", "tags": ["java", "eclipse", "ubuntu", "unsatisfiedlinkerror"]}, {"body": "<p>I agree with Scott, what he listed worked. However just running it from any directory did not work. I had to cd to the /home/<strong>*</strong>/.swt/lib/linux/x86_64/ 0 files</p>\n\n<p>directory first and then run the link command: </p>\n\n<p>For 32 bit:</p>\n\n<pre><code>ln -s /usr/lib/jni/libswt-* ~/.swt/lib/linux/x86/\n</code></pre>\n\n<p>And on Ubuntu 12.04 64 bit:</p>\n\n<pre><code>ln -s /usr/lib/jni/libswt-* ~/.swt/lib/linux/x86_64/\n</code></pre>\n", "title": "Eclipse cannot load SWT libraries", "answer_id": 15814825, "link": "http://stackoverflow.com/questions/10165693/eclipse-cannot-load-swt-libraries/15814825#15814825", "tags": ["java", "eclipse", "ubuntu", "unsatisfiedlinkerror"]}, {"body": "<p>Simply specify the path to the libraries:</p>\n\n<pre><code>echo \"-Djava.library.path=/usr/lib/jni/\" &gt;&gt; /etc/eclipse.ini\n</code></pre>\n", "title": "Eclipse cannot load SWT libraries", "answer_id": 15844683, "link": "http://stackoverflow.com/questions/10165693/eclipse-cannot-load-swt-libraries/15844683#15844683", "tags": ["java", "eclipse", "ubuntu", "unsatisfiedlinkerror"]}, {"body": "<p>I came across this error when tried to start 32-bit build of Eclipse under 64-bit linux. The problem was solved after installing ia32-libs package.</p>\n", "title": "Eclipse cannot load SWT libraries", "answer_id": 17461846, "link": "http://stackoverflow.com/questions/10165693/eclipse-cannot-load-swt-libraries/17461846#17461846", "tags": ["java", "eclipse", "ubuntu", "unsatisfiedlinkerror"]}, {"body": "<p>In my case, I was missing the <code>/usr/lib/jni</code> directory entirely. Fixed by</p>\n\n<pre><code>sudo apt-get install libswt-gtk-3-jni libswt-gtk-3-java\n</code></pre>\n\n<p>No need to symlink afterwards. Eclipse started normally.</p>\n", "title": "Eclipse cannot load SWT libraries", "answer_id": 22793793, "link": "http://stackoverflow.com/questions/10165693/eclipse-cannot-load-swt-libraries/22793793#22793793", "tags": ["java", "eclipse", "ubuntu", "unsatisfiedlinkerror"]}], "question_id": 10165693}, {"body": "<p>In Java there are the <code>SortedSet</code> and <code>SortedMap</code> interfaces. Both belong to Java's standard Collections framework and provide a sorted way to access the elements. </p>\n\n<p>However, in my understanding there is no <code>SortedList</code> in Java. You can use <code>java.util.Collections.sort()</code> to sort a list.</p>\n\n<p>Any idea why it is designed like that?</p>\n", "tags": ["java", "sorting", "collections"], "title": "Why is there no SortedList in Java?", "answer_count": 10, "creation_date": 1325673353, "score": 261, "link": "http://stackoverflow.com/questions/8725387/why-is-there-no-sortedlist-in-java", "answers": [{"body": "<p>Since all lists are already \"sorted\" by the order the items were added (FIFO ordering), you can \"resort\" them with another ordering, including the natural ordering of elements, using <code>java.util.Collections.sort()</code>.</p>\n\n<p>EDIT:</p>\n\n<p>Lists as data structures are based in what is interesting is the ordering in which the items where inserted.</p>\n\n<p>Sets do not have that information.</p>\n\n<p>If you want to order by addition time, use <code>List</code>. If you want to order by other criteria, use <code>SortedSet</code>.</p>\n", "title": "Why is there no SortedList in Java?", "answer_id": 8725453, "link": "http://stackoverflow.com/questions/8725387/why-is-there-no-sortedlist-in-java/8725453#8725453", "tags": ["java", "sorting", "collections"]}, {"body": "<p>List iterators guarantee first and foremost that you get the list's elements in the internal order of the list (aka. <em>insertion order</em>). More specifically it is in the order you've inserted the elements or on how you've manipulated the list. Sorting can be seen as a manipulation of the data structure, and there are several ways to sort the list.</p>\n\n<p>I'll order the ways in the order of <em>usefulness</em> as I personally see it:</p>\n\n<h2>1. Consider using <code>Set</code> or <code>Bag</code> collections instead</h2>\n\n<p><strong>NOTE:</strong> I put this option at the top because this is what you normally want to do anyway.</p>\n\n<p>A sorted set <strong>automatically sorts the collection at insertion</strong>, meaning that it does the sorting while you add elements into the collection. It also means you don't need to manually sort it.</p>\n\n<p>Furthermore if you are sure that you don't need to worry about (or have) duplicate elements then you can use the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html\"><code>TreeSet&lt;T&gt;</code></a> instead. It implements <code>SortedSet</code> and <code>NavigableSet</code> interfaces and works as you'd probably expect from a list:</p>\n\n<pre><code>TreeSet&lt;String&gt; set = new TreeSet&lt;String&gt;();\nset.add(\"lol\");\nset.add(\"cat\");\n// automatically sorts natural order when adding\n\nfor (String s : set) {\n    System.out.println(s);\n}\n// Prints out \"cat\" and \"lol\"\n</code></pre>\n\n<p>If you don't want the natural ordering you can use the constructor parameter that takes a <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html\"><code>Comparator&lt;T&gt;</code></a>.</p>\n\n<p>Alternatively you can use <strong><a href=\"http://guava-libraries.googlecode.com/svn/tags/release02/javadoc/com/google/common/collect/Multiset.html\">Multisets</a> (also known as <em>Bags</em>)</strong>, that is a <code>Set</code> that allows duplicate elements, instead and there are third party implementations of them. Most notably from the <a href=\"http://code.google.com/p/guava-libraries/\">Guava libraries</a> there is a <a href=\"http://guava-libraries.googlecode.com/svn/tags/release02/javadoc/com/google/common/collect/TreeMultiset.html\"><code>TreeMultiset</code></a>, that works a lot like the <code>TreeSet</code>.</p>\n\n<h2>2. Sort your list with <code>Collections.sort()</code></h2>\n\n<p>As mentioned above, sorting of <code>List</code>s is an manipulation of the data structure. So for situations where you need \"one source of truth\" that will be sorted in a variety of ways then sorting it manually is the way to go.</p>\n\n<p>You can sort your list with the <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List%29\"><code>java.util.Collections.sort()</code></a> method. Here is a code sample on how:</p>\n\n<pre><code>List&lt;String&gt; strings = new ArrayList&lt;String&gt;()\nstrings.add(\"lol\");\nstrings.add(\"cat\");\n\nCollections.sort(strings);\nfor (String s : strings) {\n    System.out.println(s);\n}\n// Prints out \"cat\" and \"lol\"\n</code></pre>\n\n<h3>Using comparators</h3>\n\n<p>One clear benefit is that you may use <a href=\"https://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html\"><code>Comparator</code></a> in the <code>sort</code> method. Java also provides some implementations for the <code>Comparator</code> such as the <a href=\"https://docs.oracle.com/javase/6/docs/api/java/text/Collator.html\"><code>Collator</code></a> which is useful for locale sensitive sorting strings. Here is one example:</p>\n\n<pre><code>Collator usCollator = Collator.getInstance(Locale.US);\nusCollator.setStrength(Collator.PRIMARY); // ignores casing\n\nCollections.sort(strings, usCollator);\n</code></pre>\n\n<h3>Sorting in concurrent environments</h3>\n\n<p>Do note though that using the <code>sort</code> method is not friendly in concurrent environments, since the collection instance will be manipulated, and you should consider using immutable collections instead. This is something Guava provides in the <a href=\"http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Ordering.html\"><code>Ordering</code></a> class and is a simple one-liner:</p>\n\n<pre><code>List&lt;string&gt; sorted = Ordering.natural().sortedCopy(strings);\n</code></pre>\n\n<h2>3. Wrap your list with <code>java.util.PriorityQueue</code></h2>\n\n<p>Though there is no sorted list in Java there is however a sorted queue which would probably work just as well for you. It is the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html\"><code>java.util.PriorityQueue</code></a> class.</p>\n\n<p>Nico Haase linked in the comments to a <a href=\"http://stackoverflow.com/questions/416266/sorted-collection-in-java\">related question</a> that also answers this.</p>\n\n<p>In a sorted collection <strong>you most likely don't want to manipulate</strong> the internal data structure which is why PriorityQueue doesn't implement the List interface (because that would give you direct access to it's elements). </p>\n\n<h3>Caveat on the <code>PriorityQueue</code> iterator</h3>\n\n<p>The <code>PriorityQueue</code> class implements the <code>Iterable&lt;E&gt;</code> and <code>Collection&lt;E&gt;</code> interfaces so it can be iterated as usual. However the iterator is not guaranteed to return elements in the sorted order. Instead (as Alderath points out in the comments) you need to <code>poll()</code> the queue until empty.</p>\n\n<p>Note that you can convert a list to a priority queue via the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html#PriorityQueue%28java.util.Collection%29\">constructor that takes any collection</a>:</p>\n\n<pre><code>List&lt;String&gt; strings = new ArrayList&lt;String&gt;()\nstrings.add(\"lol\");\nstrings.add(\"cat\");\n\nPriorityQueue&lt;String&gt; sortedStrings = new PriorityQueue(strings);\nwhile(!sortedStrings.isEmpty()) {\n    System.out.println(sortedStrings.poll());\n}\n// Prints out \"cat\" and \"lol\"\n</code></pre>\n\n<h2>4. Write your own <code>SortedList</code> class</h2>\n\n<p><strong>NOTE:</strong> You shouldn't have to do this.</p>\n\n<p>You can write your own List class that sorts each time you add a new element. This can get rather computation heavy depending on your implementation <strong>and is pointless</strong>, unless you want to do it as an exercise, because of two main reasons: </p>\n\n<ol>\n<li>It breaks the contract that <code>List&lt;E&gt;</code> interface has, because the <code>add</code> methods should ensure that the element will reside in the index that the user specifies.</li>\n<li>Why reinvent the wheel? You should be using the TreeSet or Multisets instead as pointed out in the first point above.</li>\n</ol>\n\n<p>However if you want to do it as an exercise here is a code sample to get you started, it uses the <code>AbstractList</code> abstract class: </p>\n\n<pre><code>public class SortedList&lt;E&gt; extends AbstractList&lt;E&gt; {\n\n    private ArrayList&lt;E&gt; internalList = new ArrayList&lt;E&gt;();\n\n    // Note that add(E e) in AbstractList is calling this one\n    @Override \n    public void add(int position, E e) {\n        internalList.add(e);\n        Collections.sort(internalList, null);\n    }\n\n    @Override\n    public E get(int i) {\n        return internalList.get(i);\n    }\n\n    @Override\n    public int size() {\n        return internalList.size();\n    }\n\n}\n</code></pre>\n\n<p>Note that if you haven't overridden the methods you need, then the default implementations from <code>AbstractList</code> will throw <code>UnsupportedOperationException</code>s.</p>\n", "title": "Why is there no SortedList in Java?", "answer_id": 8725470, "link": "http://stackoverflow.com/questions/8725387/why-is-there-no-sortedlist-in-java/8725470#8725470", "tags": ["java", "sorting", "collections"]}, {"body": "<p>Because the concept of a List is incompatible with the concept of an automatically sorted collection. The point of a List is that after calling <code>list.add(7, elem)</code>, a call to <code>list.get(7)</code> will return <code>elem</code>. With an auto-sorted list, the element could end up in an arbitrary position.</p>\n", "title": "Why is there no SortedList in Java?", "answer_id": 8725518, "link": "http://stackoverflow.com/questions/8725387/why-is-there-no-sortedlist-in-java/8725518#8725518", "tags": ["java", "sorting", "collections"]}, {"body": "<p>Think of it like this: the <code>List</code> interface has methods like <code>add(int index, E element)</code>, <code>set(int index, E element)</code>. The contract is that once you added an element at position X you will find it there unless you add or remove elements before it.</p>\n\n<p>If any list implementation would store elements in some order other than based on the index, the above list methods would make no sense.</p>\n", "title": "Why is there no SortedList in Java?", "answer_id": 8725550, "link": "http://stackoverflow.com/questions/8725387/why-is-there-no-sortedlist-in-java/8725550#8725550", "tags": ["java", "sorting", "collections"]}, {"body": "<p>Another point is the time complexity of insert operations.\nFor a list insert, one expects a complexity of O(1).\nBut this could not be guaranteed with a sorted list.</p>\n\n<p>And the most important point is that lists assume nothing about their elements.\nFor example, you can make lists of things that do not implement <code>equals</code> or <code>compare</code>.</p>\n", "title": "Why is there no SortedList in Java?", "answer_id": 8727998, "link": "http://stackoverflow.com/questions/8725387/why-is-there-no-sortedlist-in-java/8727998#8727998", "tags": ["java", "sorting", "collections"]}, {"body": "<p>First line in the List API says it is an ordered collection (also known as a sequence). If you sort the list you can't maintain the order, so there is no TreeList in Java. <br>\nAs API says Java List got inspired from Sequence and see the sequence properties <a href=\"http://en.wikipedia.org/wiki/Sequence_(mathematics\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Sequence_(mathematics</a>) </p>\n\n<p>It doesn't mean that you can't sort the list, but Java strict to his definition and doesn't provide sorted versions of lists by default.</p>\n", "title": "Why is there no SortedList in Java?", "answer_id": 11607494, "link": "http://stackoverflow.com/questions/8725387/why-is-there-no-sortedlist-in-java/11607494#11607494", "tags": ["java", "sorting", "collections"]}, {"body": "<p>Consider using <a href=\"https://code.google.com/p/indexed-tree-map/\" rel=\"nofollow\">indexed-tree-map</a> . It's an enhanced JDK's TreeSet that provides access to element by index and finding the index of an element without iteration or hidden underlying lists that back up the tree. The algorithm is based on updating weights of changing nodes every time there is a change.</p>\n", "title": "Why is there no SortedList in Java?", "answer_id": 21383504, "link": "http://stackoverflow.com/questions/8725387/why-is-there-no-sortedlist-in-java/21383504#21383504", "tags": ["java", "sorting", "collections"]}, {"body": "<p>Though it took a while, Java 8 does have a sorted List. \n<a href=\"http://docs.oracle.com/javase/8/javafx/api/javafx/collections/transformation/SortedList.html\" rel=\"nofollow\">http://docs.oracle.com/javase/8/javafx/api/javafx/collections/transformation/SortedList.html</a></p>\n\n<p>As you can see in the javadocs, it is part of the JavaFX collections, intended to provide a sorted view on an ObservableList.</p>\n", "title": "Why is there no SortedList in Java?", "answer_id": 30540756, "link": "http://stackoverflow.com/questions/8725387/why-is-there-no-sortedlist-in-java/30540756#30540756", "tags": ["java", "sorting", "collections"]}, {"body": "<p>For any newcomers, as of April 2015, Android now has a <a href=\"https://developer.android.com/reference/android/support/v7/util/SortedList.html\" rel=\"nofollow\">SortedList</a> class in the support library, designed specifically to work with <code>RecyclerView</code>. Here's the <a href=\"http://android-developers.blogspot.com/2015/04/android-support-library-221.html\" rel=\"nofollow\">blog post</a> about it. </p>\n", "title": "Why is there no SortedList in Java?", "answer_id": 30765963, "link": "http://stackoverflow.com/questions/8725387/why-is-there-no-sortedlist-in-java/30765963#30765963", "tags": ["java", "sorting", "collections"]}, {"body": "<p>Set and Map are non-linear data structure. List is linear data structure.</p>\n\n<p><a href=\"http://i.stack.imgur.com/rsbMd.gif\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/rsbMd.gif\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>The tree data structure <code>SortedSet</code> and <code>SortedMap</code> interfaces implements  <code>TreeSet</code> and <code>TreeMap</code> respectively using used <a href=\"https://en.wikipedia.org/wiki/Red%E2%80%93black_tree\" rel=\"nofollow\">Red-Black tree</a> implementation algorithm. So it ensure that there are no duplicated items (or keys in case of <code>Map</code>).  </p>\n\n<ul>\n<li>Tree by definition cannot contain duplicates.</li>\n<li>In <code>List</code> we can have duplicates, so there is no <code>TreeList</code>.  </li>\n</ul>\n\n<p>So if we want to sort the list we have to use <code>java.util.Collections.sort()</code>. </p>\n", "title": "Why is there no SortedList in Java?", "answer_id": 34405789, "link": "http://stackoverflow.com/questions/8725387/why-is-there-no-sortedlist-in-java/34405789#34405789", "tags": ["java", "sorting", "collections"]}], "question_id": 8725387}, {"body": "<p>I am using this code to convert a <code>Set</code> to a <code>List</code>:</p>\n\n<pre><code>Map&lt;String, List&gt; mainMap = new HashMap&lt;String, List&gt;();\n\nfor(int i=0; i&lt;something.size(); i++){\n  Set set = getSet(...); //return different result each time\n  List listOfNames = new ArrayList(set);\n  mainMap.put(differentKeyName,listOfNames);\n}\n</code></pre>\n\n<p>I want to avoid creating a new list in each iteration of the loop. Is that possible?</p>\n", "tags": ["java", "performance", "list", "set"], "title": "Convert Set to List without creating new List", "answer_count": 9, "creation_date": 1326793205, "score": 235, "link": "http://stackoverflow.com/questions/8892360/convert-set-to-list-without-creating-new-list", "answers": [{"body": "<p>You can use the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/List.html#addAll%28java.util.Collection%29\">List.addAll()</a> method. It accepts a Collection as an argument, and your set is a Collection.</p>\n\n<pre><code>mainList.addAll(set);\n</code></pre>\n\n<p><strong>EDIT:</strong> as respond to the edit of the question.\n<br>It is easy to see that if you want to have a <code>Map</code> with <code>List</code>s as values, in order to have k different values, you need to create k different lists.\n<br>Thus: You cannot avoid creating these lists at all, the lists will have to be created.</p>\n\n<p>Possible work around:\n<br>Declare your <code>Map</code> as a <code>Map&lt;String,Set&gt;</code> or <code>Map&lt;String,Collection&gt;</code> instead, and just insert your set.</p>\n", "title": "Convert Set to List without creating new List", "answer_id": 8892424, "link": "http://stackoverflow.com/questions/8892360/convert-set-to-list-without-creating-new-list/8892424#8892424", "tags": ["java", "performance", "list", "set"]}, {"body": "<p>I would do :</p>\n\n<pre><code>Map&lt;String, Collection&gt; mainMap = new HashMap&lt;String, Collection&gt;();\n\nfor(int i=0; i&lt;something.size(); i++){\n  Set set = getSet(...); //return different result each time\n  mainMap.put(differentKeyName,set);\n}\n</code></pre>\n", "title": "Convert Set to List without creating new List", "answer_id": 8892760, "link": "http://stackoverflow.com/questions/8892360/convert-set-to-list-without-creating-new-list/8892760#8892760", "tags": ["java", "performance", "list", "set"]}, {"body": "<pre><code>Map&lt;String, List&gt; mainMap = new HashMap&lt;String, List&gt;();\n\nfor(int i=0; i&lt;something.size(); i++){\n  Set set = getSet(...); //return different result each time\n  mainMap.put(differentKeyName, new ArrayList(set));\n}\n</code></pre>\n", "title": "Convert Set to List without creating new List", "answer_id": 9497566, "link": "http://stackoverflow.com/questions/8892360/convert-set-to-list-without-creating-new-list/9497566#9497566", "tags": ["java", "performance", "list", "set"]}, {"body": "<p>Also from Guava Collect library, you can use <br/>\n<code>Lists.newArrayList([your_set])</code> <br/> \nThis would be very similar to the previous answer from <strong>amit</strong>, except that you do not need to declare (or instanciate) any list object.</p>\n", "title": "Convert Set to List without creating new List", "answer_id": 17588569, "link": "http://stackoverflow.com/questions/8892360/convert-set-to-list-without-creating-new-list/17588569#17588569", "tags": ["java", "performance", "list", "set"]}, {"body": "<p>Use constructor to convert it:</p>\n\n<pre><code>List&lt;?&gt; list = new ArrayList&lt;?&gt;(set);\n</code></pre>\n", "title": "Convert Set to List without creating new List", "answer_id": 19077309, "link": "http://stackoverflow.com/questions/8892360/convert-set-to-list-without-creating-new-list/19077309#19077309", "tags": ["java", "performance", "list", "set"]}, {"body": "<p>I found this working fine and useful to create a List from a Set.</p>\n\n<pre><code>ArrayList &lt; String &gt; L1 = new ArrayList &lt; String &gt; ();\nL1.addAll(ActualMap.keySet());\nfor (String x: L1) {\n    System.out.println(x.toString());\n}\n</code></pre>\n", "title": "Convert Set to List without creating new List", "answer_id": 27739696, "link": "http://stackoverflow.com/questions/8892360/convert-set-to-list-without-creating-new-list/27739696#27739696", "tags": ["java", "performance", "list", "set"]}, {"body": "<p>You could use this one line change: <code>Arrays.asList(set.toArray(new Object[0]))</code></p>\n\n<pre><code>Map&lt;String, List&gt; mainMap = new HashMap&lt;String, List&gt;();\n\nfor(int i=0; i&lt;something.size(); i++){\n  Set set = getSet(...); \n  mainMap.put(differentKeyName, Arrays.asList(set.toArray(new Object[0])));\n}  \n</code></pre>\n", "title": "Convert Set to List without creating new List", "answer_id": 34404193, "link": "http://stackoverflow.com/questions/8892360/convert-set-to-list-without-creating-new-list/34404193#34404193", "tags": ["java", "performance", "list", "set"]}, {"body": "<p>I create simple <code>static</code> method:</p>\n\n<pre><code>public static &lt;U&gt; List&lt;U&gt; convertSetToList(Set&lt;U&gt; set)\n{\n    return new ArrayList&lt;U&gt;(set);\n}\n</code></pre>\n\n<p>... or if you want to set type of List you can use:</p>\n\n<pre><code>public static &lt;U, L extends List&lt;U&gt;&gt; List&lt;U&gt; convertSetToList(Set&lt;U&gt; set, Class&lt;L&gt; clazz) throws InstantiationException, IllegalAccessException\n{\n    L list = clazz.newInstance();\n    list.addAll(set);\n    return list;\n}\n</code></pre>\n", "title": "Convert Set to List without creating new List", "answer_id": 38271151, "link": "http://stackoverflow.com/questions/8892360/convert-set-to-list-without-creating-new-list/38271151#38271151", "tags": ["java", "performance", "list", "set"]}, {"body": "<p>We can use following one liner in Java 8:</p>\n\n<pre><code>List&lt;String&gt; list = set.stream().collect(Collectors.toList());\n</code></pre>\n\n<p>Here is one small example:</p>\n\n<pre><code>public static void main(String[] args) {\n        Set&lt;String&gt; set = new TreeSet&lt;&gt;();\n        set.add(\"A\");\n        set.add(\"B\");\n        set.add(\"C\");\n        List&lt;String&gt; list = set.parallelStream().collect(Collectors.toList());\n}\n</code></pre>\n", "title": "Convert Set to List without creating new List", "answer_id": 38494330, "link": "http://stackoverflow.com/questions/8892360/convert-set-to-list-without-creating-new-list/38494330#38494330", "tags": ["java", "performance", "list", "set"]}], "question_id": 8892360}, {"body": "<p>I have already created an SQLite database. I want to use this database file with my Android project. I want to bundle this database with my application. </p>\n\n<p>Instead of creating a new database, how can the application gain access to this database and use it as its database?</p>\n", "tags": ["java", "android", "eclipse", "sqlite"], "title": "How to use an existing database with an Android application", "answer_count": 6, "creation_date": 1328172868, "score": 235, "link": "http://stackoverflow.com/questions/9109438/how-to-use-an-existing-database-with-an-android-application", "answers": [{"body": "<p>You can do this by using a <a href=\"http://developer.android.com/guide/topics/providers/content-providers.html\" rel=\"nofollow\">content provider</a>. Each data item used in the application remains private to the application. If an application want to share data accross applications, there is only technique to achieve this, using a content provider, which provides interface to access that private data.</p>\n", "title": "How to use an existing database with an Android application", "answer_id": 9109554, "link": "http://stackoverflow.com/questions/9109438/how-to-use-an-existing-database-with-an-android-application/9109554#9109554", "tags": ["java", "android", "eclipse", "sqlite"]}, {"body": "<p>Try out <em><a href=\"http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/\">Using your own SQLite database in Android applications</a></em>.</p>\n", "title": "How to use an existing database with an Android application", "answer_id": 9109558, "link": "http://stackoverflow.com/questions/9109438/how-to-use-an-existing-database-with-an-android-application/9109558#9109558", "tags": ["java", "android", "eclipse", "sqlite"]}, {"body": "<p>If you already have a database, keep it in your asset folder and copy it in your application. For more detail, see <em><a href=\"http://sspower3.blogspot.in/2011/09/android-database-basic.html\">Android database basics</a></em>. </p>\n", "title": "How to use an existing database with an Android application", "answer_id": 9109657, "link": "http://stackoverflow.com/questions/9109438/how-to-use-an-existing-database-with-an-android-application/9109657#9109657", "tags": ["java", "android", "eclipse", "sqlite"]}, {"body": "<p><strong>NOTE:</strong>\nBefore trying this code, please find this line in the below code:</p>\n\n<pre><code>private static String DB_NAME =\"YourDbName\"; // Database name\n</code></pre>\n\n<p>DB_NAME here is the name of your database. It is assumed that you have a copy of the database in the assets folder, so for example if your database name is ordersDB, then the value of DB_NAME will be ordersDB,</p>\n\n<pre><code>private static String DB_NAME =\"ordersDB\";\n</code></pre>\n\n<hr>\n\n<p>Keep the database in <strong>assets folder</strong> and then follow the below:</p>\n\n<p>DataHelper class:</p>\n\n<pre><code>import java.io.File;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\n\nimport android.content.Context;\nimport android.database.SQLException;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.sqlite.SQLiteOpenHelper;\nimport android.util.Log;\n\npublic class DataBaseHelper extends SQLiteOpenHelper\n{\n    private static String TAG = \"DataBaseHelper\"; // Tag just for the LogCat window\n    //destination path (location) of our database on device\n    private static String DB_PATH = \"\";\n    private static String DB_NAME =\"YourDbName\";// Database name\n    private SQLiteDatabase mDataBase;\n    private final Context mContext;\n\n    public DataBaseHelper(Context context)\n    {\n        super(context, DB_NAME, null, 1);// 1? Its database Version\n        if(android.os.Build.VERSION.SDK_INT &gt;= 17){\n           DB_PATH = context.getApplicationInfo().dataDir + \"/databases/\";\n        }\n        else\n        {\n           DB_PATH = \"/data/data/\" + context.getPackageName() + \"/databases/\";\n        }\n        this.mContext = context;\n    }\n\n    public void createDataBase() throws IOException\n    {\n        //If the database does not exist, copy it from the assets.\n\n        boolean mDataBaseExist = checkDataBase();\n        if(!mDataBaseExist)\n        {\n            this.getReadableDatabase();\n            this.close();\n            try\n            {\n                //Copy the database from assests\n                copyDataBase();\n                Log.e(TAG, \"createDatabase database created\");\n            }\n            catch (IOException mIOException)\n            {\n                throw new Error(\"ErrorCopyingDataBase\");\n            }\n        }\n    }\n\n    //Check that the database exists here: /data/data/your package/databases/Da Name\n    private boolean checkDataBase()\n    {\n        File dbFile = new File(DB_PATH + DB_NAME);\n        //Log.v(\"dbFile\", dbFile + \"   \"+ dbFile.exists());\n        return dbFile.exists();\n    }\n\n    //Copy the database from assets\n    private void copyDataBase() throws IOException\n    {\n        InputStream mInput = mContext.getAssets().open(DB_NAME);\n        String outFileName = DB_PATH + DB_NAME;\n        OutputStream mOutput = new FileOutputStream(outFileName);\n        byte[] mBuffer = new byte[1024];\n        int mLength;\n        while ((mLength = mInput.read(mBuffer))&gt;0)\n        {\n            mOutput.write(mBuffer, 0, mLength);\n        }\n        mOutput.flush();\n        mOutput.close();\n        mInput.close();\n    }\n\n    //Open the database, so we can query it\n    public boolean openDataBase() throws SQLException\n    {\n        String mPath = DB_PATH + DB_NAME;\n        //Log.v(\"mPath\", mPath);\n        mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.CREATE_IF_NECESSARY);\n        //mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS);\n        return mDataBase != null;\n    }\n\n    @Override\n    public synchronized void close()\n    {\n        if(mDataBase != null)\n            mDataBase.close();\n        super.close();\n    }\n}\n</code></pre>\n\n<p><strong>Write a DataAdapter class like:</strong></p>\n\n<pre><code>import java.io.IOException;\nimport android.content.Context;\nimport android.database.Cursor;\nimport android.database.SQLException;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.util.Log;\n\npublic class TestAdapter\n{\n    protected static final String TAG = \"DataAdapter\";\n\n    private final Context mContext;\n    private SQLiteDatabase mDb;\n    private DataBaseHelper mDbHelper;\n\n    public TestAdapter(Context context)\n    {\n        this.mContext = context;\n        mDbHelper = new DataBaseHelper(mContext);\n    }\n\n    public TestAdapter createDatabase() throws SQLException\n    {\n        try\n        {\n            mDbHelper.createDataBase();\n        }\n        catch (IOException mIOException)\n        {\n            Log.e(TAG, mIOException.toString() + \"  UnableToCreateDatabase\");\n            throw new Error(\"UnableToCreateDatabase\");\n        }\n        return this;\n    }\n\n    public TestAdapter open() throws SQLException\n    {\n        try\n        {\n            mDbHelper.openDataBase();\n            mDbHelper.close();\n            mDb = mDbHelper.getReadableDatabase();\n        }\n        catch (SQLException mSQLException)\n        {\n            Log.e(TAG, \"open &gt;&gt;\"+ mSQLException.toString());\n            throw mSQLException;\n        }\n        return this;\n    }\n\n    public void close()\n    {\n        mDbHelper.close();\n    }\n\n     public Cursor getTestData()\n     {\n         try\n         {\n             String sql =\"SELECT * FROM myTable\";\n\n              Cursor mCur = mDb.rawQuery(sql, null);\n             if (mCur!=null)\n             {\n                mCur.moveToNext();\n             }\n             return mCur;\n         }\n         catch (SQLException mSQLException)\n         {\n             Log.e(TAG, \"getTestData &gt;&gt;\"+ mSQLException.toString());\n             throw mSQLException;\n         }\n     }\n}\n</code></pre>\n\n<p><strong>Now you can use it like:</strong></p>\n\n<pre><code>TestAdapter mDbHelper = new TestAdapter(urContext);\nmDbHelper.createDatabase();\nmDbHelper.open();\n\nCursor testdata = mDbHelper.getTestData();\n\nmDbHelper.close();\n</code></pre>\n\n<p><strong>EDIT: Thanks to JDx</strong></p>\n\n<p>For <a href=\"https://en.wikipedia.org/wiki/Android_version_history#Android_4.1_Jelly_Bean_.28API_level_16.29\">Android&nbsp;4.1</a> (Jelly Bean), change:</p>\n\n<pre><code>DB_PATH = \"/data/data/\" + context.getPackageName() + \"/databases/\";\nto:\n\nDB_PATH = context.getApplicationInfo().dataDir + \"/databases/\";\nin the DataHelper class this code will work on JB 4.2 multi users.\n</code></pre>\n", "title": "How to use an existing database with an Android application", "answer_id": 9109728, "link": "http://stackoverflow.com/questions/9109438/how-to-use-an-existing-database-with-an-android-application/9109728#9109728", "tags": ["java", "android", "eclipse", "sqlite"]}, {"body": "<p>I had trouble with the other DatabaseHelpers regarding this problem, not sure why.<br/>\nThis is what worked for me:</p>\n\n<pre><code>import java.io.File;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\n\nimport android.content.Context;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.sqlite.SQLiteOpenHelper;\nimport android.util.Log;\n\npublic class DatabaseHelper extends SQLiteOpenHelper {\n\n  private static final String TAG = DatabaseHelper.class.getSimpleName();\n\n  private final Context context;\n  private final String assetPath;\n  private final String dbPath;\n\n  public DatabaseHelper(Context context, String dbName, String assetPath)\n      throws IOException {\n    super(context, dbName, null, 1);\n    this.context = context;\n    this.assetPath = assetPath;\n    this.dbPath = \"/data/data/\"\n        + context.getApplicationContext().getPackageName() + \"/databases/\"\n        + dbName;\n    checkExists();\n  }\n\n  /**\n   * Checks if the database asset needs to be copied and if so copies it to the\n   * default location.\n   * \n   * @throws IOException\n   */\n  private void checkExists() throws IOException {\n    Log.i(TAG, \"checkExists()\");\n\n    File dbFile = new File(dbPath);\n\n    if (!dbFile.exists()) {\n\n      Log.i(TAG, \"creating database..\");\n\n      dbFile.getParentFile().mkdirs();\n      copyStream(context.getAssets().open(assetPath), new FileOutputStream(\n          dbFile));\n\n      Log.i(TAG, assetPath + \" has been copied to \" + dbFile.getAbsolutePath());\n    }\n\n  }\n\n  private void copyStream(InputStream is, OutputStream os) throws IOException {\n    byte buf[] = new byte[1024];\n    int c = 0;\n    while (true) {\n      c = is.read(buf);\n      if (c == -1)\n        break;\n      os.write(buf, 0, c);\n    }\n    is.close();\n    os.close();\n  }\n\n  @Override\n  public void onCreate(SQLiteDatabase db) {\n  }\n\n  @Override\n  public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n  }\n}\n</code></pre>\n", "title": "How to use an existing database with an Android application", "answer_id": 13845078, "link": "http://stackoverflow.com/questions/9109438/how-to-use-an-existing-database-with-an-android-application/13845078#13845078", "tags": ["java", "android", "eclipse", "sqlite"]}, {"body": "<p>If you are having pre built data base than copy it in asset folder and create an new class as <strong>DataBaseHelper</strong> which implements <strong>SQLiteOpenHelper</strong> \nThan use following code:</p>\n\n<pre><code>import java.io.File;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\n\nimport android.content.Context;\nimport android.database.Cursor;\nimport android.database.SQLException;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.sqlite.SQLiteOpenHelper;\n\npublic class DataBaseHelperClass extends SQLiteOpenHelper{\n //The Android's default system path of your application database.\nprivate static String DB_PATH = \"/data/data/package_name/databases/\";\n// Data Base Name.\nprivate static final String DATABASE_NAME = \"DBName.sqlite\";\n// Data Base Version.\nprivate static final int DATABASE_VERSION = 1;\n// Table Names of Data Base.\nstatic final String TABLE_Name = \"tableName\";\n\npublic Context context;\nstatic SQLiteDatabase sqliteDataBase;\n\n/**\n * Constructor\n * Takes and keeps a reference of the passed context in order to access to the application assets and resources.\n * @param context\n * Parameters of super() are    1. Context\n *                              2. Data Base Name.\n *                              3. Cursor Factory.\n *                              4. Data Base Version.\n */\npublic DataBaseHelperClass(Context context) {       \n    super(context, DATABASE_NAME, null ,DATABASE_VERSION);\n    this.context = context;\n}\n\n/**\n * Creates a empty database on the system and rewrites it with your own database.\n * By calling this method and empty database will be created into the default system path\n * of your application so we are gonna be able to overwrite that database with our database.\n * */\npublic void createDataBase() throws IOException{\n    //check if the database exists\n    boolean databaseExist = checkDataBase();\n\n    if(databaseExist){\n        // Do Nothing.\n    }else{\n        this.getWritableDatabase();         \n        copyDataBase(); \n    }// end if else dbExist\n} // end createDataBase().\n\n/**\n * Check if the database already exist to avoid re-copying the file each time you open the application.\n * @return true if it exists, false if it doesn't\n */\npublic boolean checkDataBase(){\n    File databaseFile = new File(DB_PATH + DATABASE_NAME);\n    return databaseFile.exists();        \n}\n\n/**\n * Copies your database from your local assets-folder to the just created empty database in the\n * system folder, from where it can be accessed and handled.\n * This is done by transferring byte stream.\n * */\nprivate void copyDataBase() throws IOException{ \n    //Open your local db as the input stream\n    InputStream myInput = context.getAssets().open(DATABASE_NAME); \n    // Path to the just created empty db\n    String outFileName = DB_PATH + DATABASE_NAME; \n    //Open the empty db as the output stream\n    OutputStream myOutput = new FileOutputStream(outFileName); \n    //transfer bytes from the input file to the output file\n    byte[] buffer = new byte[1024];\n    int length;\n    while ((length = myInput.read(buffer))&gt;0){\n        myOutput.write(buffer, 0, length);\n    }\n\n    //Close the streams\n    myOutput.flush();\n    myOutput.close();\n    myInput.close(); \n}\n\n/**\n * This method opens the data base connection.\n * First it create the path up till data base of the device.\n * Then create connection with data base.\n */\npublic void openDataBase() throws SQLException{      \n    //Open the database\n    String myPath = DB_PATH + DATABASE_NAME;\n    sqliteDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);  \n}\n\n/**\n * This Method is used to close the data base connection.\n */\n@Override\npublic synchronized void close() { \n    if(sqliteDataBase != null)\n        sqliteDataBase.close(); \n    super.close(); \n}\n\n/**\n* Apply your methods and class to fetch data using raw or queries on data base using \n* following demo example code as:\n*/\npublic String getUserNameFromDB(){\n    String query = \"select User_First_Name From \"+TABLE_USER_DETAILS;\n    Cursor cursor = sqliteDataBase.rawQuery(query, null);\n    String userName = null;\n    if(cursor.getCount()&gt;0){\n        if(cursor.moveToFirst()){\n    do{\n                userName = cursor.getString(0);\n            }while (cursor.moveToNext());\n        }\n    }\n    return userName;\n}\n\n\n@Override\npublic void onCreate(SQLiteDatabase db) {\n    // No need to write the create table query.\n    // As we are using Pre built data base.\n    // Which is ReadOnly.\n}\n\n@Override\npublic void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n    // No need to write the update table query.\n    // As we are using Pre built data base.\n    // Which is ReadOnly.\n    // We should not update it as requirements of application.\n}   \n}\n</code></pre>\n\n<p>Hope this will help you...</p>\n", "title": "How to use an existing database with an Android application", "answer_id": 14069668, "link": "http://stackoverflow.com/questions/9109438/how-to-use-an-existing-database-with-an-android-application/14069668#14069668", "tags": ["java", "android", "eclipse", "sqlite"]}], "question_id": 9109438}, {"body": "<p>I'm using a <code>HashMap</code>. When I iterate over the map, the data is returned in (often the same) random order. But the data was inserted in a specific order, and I need to preserve the insertion order. How can I do this?</p>\n", "tags": ["java", "hashmap", "order"], "title": "How to preserve insertion order in HashMap?", "answer_count": 2, "creation_date": 1337720903, "score": 226, "link": "http://stackoverflow.com/questions/10710193/how-to-preserve-insertion-order-in-hashmap", "answers": [{"body": "<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html\"><code>LinkedHashMap</code></a> is precisely what you're looking for.</p>\n\n<p>It is exactly like <code>HashMap</code>, except that when you iterate over it, it presents the items in the insertion order.</p>\n", "title": "How to preserve insertion order in HashMap?", "answer_id": 10710205, "link": "http://stackoverflow.com/questions/10710193/how-to-preserve-insertion-order-in-hashmap/10710205#10710205", "tags": ["java", "hashmap", "order"]}, {"body": "<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html\"><code>HashMap</code></a> is unordered per the second line of the documentation:</p>\n\n<blockquote>\n  <p>This class makes no guarantees as to the order of the map; in particular, it does not guarantee that the order will remain constant over time.</p>\n</blockquote>\n\n<p>Perhaps you can do as aix suggests and use a <code>LinkedHashMap</code>, or another ordered collection.  <a href=\"http://www.javapractices.com/topic/TopicAction.do?Id=65\">This link can help you find the most appropriate collection to use.</a></p>\n", "title": "How to preserve insertion order in HashMap?", "answer_id": 10710241, "link": "http://stackoverflow.com/questions/10710193/how-to-preserve-insertion-order-in-hashmap/10710241#10710241", "tags": ["java", "hashmap", "order"]}], "question_id": 10710193}, {"body": "<p>We can determine the length of an <code>ArrayList&lt;E&gt;</code> using its public method <code>size()</code>, like</p>\n\n<pre><code>ArrayList&lt;Integer&gt; arr = new ArrayList(10);\nint size = arr.size();\n</code></pre>\n\n<p>Similarly we can determine the length of an <code>Array</code> object using the <code>length</code> property</p>\n\n<pre><code>String[] str = new String[10];\nint size =  str.length;\n</code></pre>\n\n<p>Whereas the <code>size()</code> method of <code>ArrayList</code> is defined inside the <code>ArrayList</code> class, where is this <code>length</code> property of <code>Array</code> defined?</p>\n", "tags": ["java", "arrays"], "title": "Where is array&#39;s length property defined?", "answer_count": 5, "creation_date": 1329325822, "score": 211, "link": "http://stackoverflow.com/questions/9297899/where-is-arrays-length-property-defined", "answers": [{"body": "<p>Arrays are special objects in java, they have a simple attribute named <code>length</code> which is <code>final</code>.</p>\n\n<p>There is no \"class definition\" of an array (you can't find it in any .class file), they're a part of the language itself.</p>\n\n<blockquote>\n  <h2>10.7. Array Members</h2>\n  \n  <p>The members of an array type are all of the following:</p>\n  \n  <ul>\n  <li>The <code>public</code> <code>final</code> field <code>length</code>, which contains the number of components of the array. <code>length</code> may be positive or zero.</li>\n  <li><p>The <code>public</code> method <code>clone</code>, which overrides the method of the same name in class <code>Object</code> and throws no checked exceptions. The return type of the <code>clone</code> method of an array type <code>T[]</code> is <code>T[]</code>.</p>\n  \n  <p>A clone of a multidimensional array is shallow, which is to say that it creates only a single new array. Subarrays are shared.</p></li>\n  <li>All the members inherited from class <code>Object</code>; the only method of <code>Object</code> that is not inherited is its <code>clone</code> method.</li>\n  </ul>\n</blockquote>\n\n<hr>\n\n<p><strong>Resources:</strong></p>\n\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.7\">JLS - Arrays</a></li>\n</ul>\n", "title": "Where is array&#39;s length property defined?", "answer_id": 9297956, "link": "http://stackoverflow.com/questions/9297899/where-is-arrays-length-property-defined/9297956#9297956", "tags": ["java", "arrays"]}, {"body": "<p>It's defined in the <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.7\">Java language specification</a>:</p>\n\n<blockquote>\n  <p>The members of an array type are all of the following:</p>\n  \n  <ul>\n  <li>The <code>public final</code> field <code>length</code>, which contains the number of components of the array. <code>length</code> may be positive or zero.</li>\n  </ul>\n</blockquote>\n\n<p>Since there is a limitless number of array types (for every class there is a corresponding array type, and <em>then</em> there are multidimensional arrays), they cannot be implemented in a class file; the JVM has to do it on the fly.</p>\n", "title": "Where is array&#39;s length property defined?", "answer_id": 9297976, "link": "http://stackoverflow.com/questions/9297899/where-is-arrays-length-property-defined/9297976#9297976", "tags": ["java", "arrays"]}, {"body": "<p>It's \"special\" basically, with its own bytecode instruction: <code>arraylength</code>. So this method:</p>\n\n<pre><code>public static void main(String[] args) {\n    int x = args.length;\n}\n</code></pre>\n\n<p>is compiled into bytecode like this:</p>\n\n<pre><code>public static void main(java.lang.String[]);\n  Code:\n   0:   aload_0\n   1:   arraylength\n   2:   istore_1\n   3:   return\n</code></pre>\n\n<p>So it's not accessed as if it were a normal field. Indeed, if you try to get it as if it were a normal field, like this, it fails:</p>\n\n<pre><code>// Fails...\nField field = args.getClass().getField(\"length\");\nSystem.out.println(field.get(args));\n</code></pre>\n\n<p>So unfortunately, the JLS description of each array type having a public final field <code>length</code> is somewhat misleading :(</p>\n", "title": "Where is array&#39;s length property defined?", "answer_id": 9297987, "link": "http://stackoverflow.com/questions/9297899/where-is-arrays-length-property-defined/9297987#9297987", "tags": ["java", "arrays"]}, {"body": "<p>it's public final field , which contains the number of components of the array (length may be positive or zero)</p>\n\n<p>An array thus has the same public fields and methods as the following class:</p>\n\n<pre><code>class A implements Cloneable, java.io.Serializable {\n    public final int length = X;\n    public Object clone() {\n        try {\n            return super.clone();\n        } catch (CloneNotSupportedException e) {\n            throw new InternalError(e.getMessage());\n        }\n    }\n}\n</code></pre>\n\n<p>more info at </p>\n\n<p>10.7 Array Members</p>\n\n<p><a href=\"http://java.sun.com/docs/books/jls/second_edition/html/arrays.doc.html\">http://java.sun.com/docs/books/jls/second_edition/html/arrays.doc.html</a></p>\n", "title": "Where is array&#39;s length property defined?", "answer_id": 9298002, "link": "http://stackoverflow.com/questions/9297899/where-is-arrays-length-property-defined/9298002#9298002", "tags": ["java", "arrays"]}, {"body": "<p>Even though this is not a direct answer to the question, it is an addition to the <code>.length</code> vs <code>.size()</code> argument. I was researching something related to this question so when I came across it I noticed that the definition(s) provided here</p>\n\n<blockquote>\n  <p>The public final field length, which contains the <strong>number of components of the array</strong>.   </p>\n</blockquote>\n\n<p>is not \"exactly\" correct.</p>\n\n<p>The field length contains the number of <strong><em>available places</em></strong> to put a component, not the number of components present in the array. So it represents the total available memory allocated to that array, not how much of that memory is filled. </p>\n\n<p><img src=\"http://i.stack.imgur.com/FSA5d.png\" alt=\"Array Memory Allocation\"></p>\n\n<p>Example:</p>\n\n<pre><code>static class StuffClass {\n    int stuff;\n    StuffClass(int stuff) {\n        this.stuff = stuff;\n    }\n}\n\npublic static void main(String[] args) {\n\n    int[] test = new int[5];\n    test[0] = 2;\n    test[1] = 33;\n    System.out.println(\"Length of int[]:\\t\" + test.length);\n\n    String[] test2 = new String[5];\n    test2[0] = \"2\";\n    test2[1] = \"33\";    \n    System.out.println(\"Length of String[]:\\t\" + test2.length);\n\n    StuffClass[] test3 = new StuffClass[5];\n    test3[0] = new StuffClass(2);\n    test3[1] = new StuffClass(33);\n    System.out.println(\"Length of StuffClass[]:\\t\" + test3.length);         \n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Length of int[]:        5\nLength of String[]:     5\nLength of StuffClass[]: 5\n</code></pre>\n\n<p>However, the <code>.size()</code> property of the <code>ArrayList</code> does give the number of elements in the list:</p>\n\n<pre><code>ArrayList&lt;Integer&gt; intsList = new ArrayList&lt;Integer&gt;();\nSystem.out.println(\"List size:\\t\" + intsList.size());\nintsList.add(2);\nSystem.out.println(\"List size:\\t\" + intsList.size());\nintsList.add(33);\nSystem.out.println(\"List size:\\t\" + intsList.size());\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>List size:  0\nList size:  1\nList size:  2\n</code></pre>\n", "title": "Where is array&#39;s length property defined?", "answer_id": 25816501, "link": "http://stackoverflow.com/questions/9297899/where-is-arrays-length-property-defined/25816501#25816501", "tags": ["java", "arrays"]}], "question_id": 9297899}, {"body": "<p>When I downloaded the Git project <a href=\"http://osmand.net\">OsmAnd</a> and went to compile it,\nEclipse returned these errors:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[Dex Loader] Unable to execute dex: GC overhead limit exceeded\n[OsmAnd]     Conversion to Dalvik format failed: \n             Unable to execute dex: GC overhead limit exceeded\n</code></pre>\n\n<p>Google and Stackoverflow said that I must change <code>-Xms40m</code> <code>-Xmx384m</code> in <code>eclipse.ini</code>. \n<a href=\"http://stackoverflow.com/questions/5943712/conversion-to-dalvik-format-failed-unable-to-execute-dex-java-heap-space\">Conversion to Dalvik format failed: Unable to execute dex: Java heap space</a>.<br>\nI cleaned project and restarted Eclipse, but it did not help.</p>\n\n<p>I found this link: <a href=\"http://www.cuteandroid.com/tips-for-android-developer-conversion-to-dalvik-format-failed-unable-to-execute-dex-null\">Tips for Android developer: \u201cConversion to Dalvik format failed: Unable to execute dex: null\u201d</a>\nBut I do not know which <code>.jar</code> from my project to change the input in.\nIf anyone can help, I can send the project to them.</p>\n", "tags": ["java", "android", "out-of-memory", "dalvik"], "title": "Unable to execute dex: GC overhead limit exceeded in Eclipse", "answer_count": 9, "creation_date": 1330371842, "score": 202, "link": "http://stackoverflow.com/questions/9471194/unable-to-execute-dex-gc-overhead-limit-exceeded-in-eclipse", "answers": [{"body": "<p>It can be fixed by changing the VM values in Eclipse.ini.  Set the values to 512 and 1024 as below:</p>\n\n<pre><code>openFile\n--launcher.XXMaxPermSize\n512M\n-showsplash\norg.eclipse.platform\n--launcher.defaultAction\nopenFile\n-vmargs\n-Dosgi.requiredJavaVersion=1.5\n-Xms512m\n-Xmx1024m\n</code></pre>\n\n<p>The changed area in image\n<img src=\"http://i.stack.imgur.com/caO9K.png\" alt=\"enter image description here\"></p>\n", "title": "Unable to execute dex: GC overhead limit exceeded in Eclipse", "answer_id": 11093228, "link": "http://stackoverflow.com/questions/9471194/unable-to-execute-dex-gc-overhead-limit-exceeded-in-eclipse/11093228#11093228", "tags": ["java", "android", "out-of-memory", "dalvik"]}, {"body": "<p>Let me assume this problem caused due to the Android XML, because of very frequently you're opening it</p>\n\n<p>These following two issues on StackOverFlow are realted with each other:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/22297573/every-time-i-click-on-an-android-xml-file-in-eclipse-it-loads-data-for-all-api\">Every time I click on an Android XML file in Eclipse, it loads data for all API versions</a></p>\n\n<p>and</p>\n\n<p><a href=\"https://stackoverflow.com/questions/9471194/unable-to-execute-dex-gc-overhead-limit-exceeded\">Unable to execute dex: GC overhead limit exceeded</a></p>\n\n<p>I found <strong>one more solution</strong> to resolve this problem other than increasing the VM values or downgrading to an older ADT version (22.6.2 or 23.2)</p>\n\n<p>Note:</p>\n\n<p><em>Some of the older ADT versions which won't load the XML each and every time you open so there is no memory overflow to cause this <strong>GC overhead limit exceeded</strong> as discussed on the first thread</em></p>\n\n<p><strong>Solution:</strong></p>\n\n<p>At the bottom of the eclipse there will be Trash can symbol which states <strong>Run Garbage Collector</strong>. Whenever you close an XML file of android don't forget to just click on the <strong>Trash Can</strong> or <strong>Run Garbage Collector</strong> to release memory. This way you can protect the workspace from crashing this kind of error :D</p>\n\n<p>This could be an ultimate solution because you can't increase the VM value beyond your RAM limit if you very frequently open your android XML especially if you do lot of UI works like me :P </p>\n\n<p>I hope this would help everyone who will come to this thread :)</p>\n\n<p><strong>Keep Calm and Code On</strong></p>\n", "title": "Unable to execute dex: GC overhead limit exceeded in Eclipse", "answer_id": 24675036, "link": "http://stackoverflow.com/questions/9471194/unable-to-execute-dex-gc-overhead-limit-exceeded-in-eclipse/24675036#24675036", "tags": ["java", "android", "out-of-memory", "dalvik"]}, {"body": "<p><strong>eclipse.ini</strong> look like this.</p>\n\n<pre><code>-startup\nplugins/org.eclipse.equinox.launcher_1.3.0.v20130327-1440.jar\n--launcher.library\nplugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.1.200.v20140116-2212\n-product\norg.eclipse.epp.package.jee.product\n--launcher.defaultAction\nopenFile\n-showsplash\norg.eclipse.platform\n--launcher.XXMaxPermSize\n256m\n--launcher.defaultAction\nopenFile\n--launcher.appendVmargs\n-vmargs\n-Dosgi.requiredJavaVersion=1.6\n-XX:MaxPermSize=256m\n-Xms40m\n-Xmx512m\n-Xmx1024m\n</code></pre>\n", "title": "Unable to execute dex: GC overhead limit exceeded in Eclipse", "answer_id": 26401366, "link": "http://stackoverflow.com/questions/9471194/unable-to-execute-dex-gc-overhead-limit-exceeded-in-eclipse/26401366#26401366", "tags": ["java", "android", "out-of-memory", "dalvik"]}, {"body": "<p>For me following steps worked</p>\n\n<pre><code>1) Open eclipse.ini file\n2)changed\n-Xms40m\n-Xmx512m\nto \n-Xms512m\n-Xmx1024m\n\n3)Restart eclipse\n</code></pre>\n\n<p><a href=\"https://docs.oseems.com/general/application/eclipse/fix-gc-overhead-limit-exceeded\">See here</a></p>\n", "title": "Unable to execute dex: GC overhead limit exceeded in Eclipse", "answer_id": 27716436, "link": "http://stackoverflow.com/questions/9471194/unable-to-execute-dex-gc-overhead-limit-exceeded-in-eclipse/27716436#27716436", "tags": ["java", "android", "out-of-memory", "dalvik"]}, {"body": "<p>If these answers don't work (They didn't for me) then try this:</p>\n\n<p>1) Make a copy of your .metadata folder in your workspace.</p>\n\n<p>2) Delete your .metadata directory AFTER MAKING A COPY</p>\n\n<p>3) Open Eclipse and close Eclipse.</p>\n\n<p>4) Copy your plugins folder from your old .metadata to your new .metadata</p>\n\n<p>5) Import all the projects back into your workspace</p>\n\n<p>6) Keep Calm and Code On!</p>\n", "title": "Unable to execute dex: GC overhead limit exceeded in Eclipse", "answer_id": 27838666, "link": "http://stackoverflow.com/questions/9471194/unable-to-execute-dex-gc-overhead-limit-exceeded-in-eclipse/27838666#27838666", "tags": ["java", "android", "out-of-memory", "dalvik"]}, {"body": "<p>After 12 hours with this error and no success with changing the eclipse.ini file I finally found the correct solution. In my environment variables there was a variable named \"_JAVA_OPTIONS\" containing the value \"-Xmx512M\". Changing this value to the same value as in eclipse.ini (-Xmx4096M) I was once again able to export my project to an APK file.</p>\n", "title": "Unable to execute dex: GC overhead limit exceeded in Eclipse", "answer_id": 28932262, "link": "http://stackoverflow.com/questions/9471194/unable-to-execute-dex-gc-overhead-limit-exceeded-in-eclipse/28932262#28932262", "tags": ["java", "android", "out-of-memory", "dalvik"]}, {"body": "<p>I DO NOT know the reason behind this work-around, but it works for me all the time when all of the above don't.</p>\n\n<p>Do not start eclipse from a short-cut or a link. Always open it from the <code>eclipse.exe</code> in your eclipse folder, the very folder which holds the <code>eclipse.ini</code></p>\n\n<p>Note - I tried only for linux.</p>\n", "title": "Unable to execute dex: GC overhead limit exceeded in Eclipse", "answer_id": 30551183, "link": "http://stackoverflow.com/questions/9471194/unable-to-execute-dex-gc-overhead-limit-exceeded-in-eclipse/30551183#30551183", "tags": ["java", "android", "out-of-memory", "dalvik"]}, {"body": "<p>To avoid this annoyable message, i had to change my configuration as follows:</p>\n\n<pre><code>-startup\nplugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar\n--launcher.library\nplugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v20120913-\n\n144807\n-product\ncom.android.ide.eclipse.adt.package.adtproduct\n-showsplash\norg.eclipse.platform\n--launcher.XXMaxPermSize\n1024m\n--launcher.defaultAction\nopenFile\n-vmargs\n-Dosgi.requiredJavaVersion=1.6\n-XX:MaxPermSize=256m\n-Xms512m\n-Xmx1024m\n</code></pre>\n\n<p>based on the answer marked as correct, changing</p>\n\n<pre><code>-XX:MaxPermSize=256m\n-Xms512m\n-Xmx1024m\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>--launcher.XXMaxPermSize\n1024m\n</code></pre>\n", "title": "Unable to execute dex: GC overhead limit exceeded in Eclipse", "answer_id": 31621077, "link": "http://stackoverflow.com/questions/9471194/unable-to-execute-dex-gc-overhead-limit-exceeded-in-eclipse/31621077#31621077", "tags": ["java", "android", "out-of-memory", "dalvik"]}, {"body": "<pre><code>1) Open eclipse.ini file\n2)change\n-Xms40m\n-Xmx512m\nto \n-Xms512m\n-Xmx1024m\n3)Restart eclipse\n</code></pre>\n\n<p>The same <strong>eclipse.ini</strong> file will be located in Eclipse in this root path of eclipse itself like:</p>\n\n<pre><code>C:\\Users\\username\\Downloads\\adt-bundle-windows-x86_64-20140702\\eclipse\\eclipse.ini\n</code></pre>\n\n<p>The same file will be located in android studio project:-</p>\n\n<pre><code>C:\\Users\\username\\AppData\\Local\\Android\\sdk\\tools\\lib\\monitor-x86_64\\monitor(Type:Configuration settings)\n</code></pre>\n", "title": "Unable to execute dex: GC overhead limit exceeded in Eclipse", "answer_id": 33080204, "link": "http://stackoverflow.com/questions/9471194/unable-to-execute-dex-gc-overhead-limit-exceeded-in-eclipse/33080204#33080204", "tags": ["java", "android", "out-of-memory", "dalvik"]}], "question_id": 9471194}, {"body": "<p>Is <a href=\"http://amzn.to/1jyE5Kx\"><em>Java Concurrency in Practice</em></a> still valid? I am wondering whether the ideas, concepts and implementation described in the book are still compliant with the latest Java versions.</p>\n\n<p>I ask because the latest edition seems to be done in 2006, ten years ago.</p>\n", "tags": ["java", "concurrency", "java-8", "java-7"], "title": "Is &quot;Java Concurrency In Practice&quot; still valid?", "answer_count": 9, "creation_date": 1334723257, "score": 196, "link": "http://stackoverflow.com/questions/10202768/is-java-concurrency-in-practice-still-valid", "answers": [{"body": "<p>I would say so. JDK7 adds the <a href=\"http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html\">fork-join framework</a> but that is an enhancement rather than a replacement for earlier concurrency tools.</p>\n", "title": "Is &quot;Java Concurrency In Practice&quot; still valid?", "answer_id": 10202837, "link": "http://stackoverflow.com/questions/10202768/is-java-concurrency-in-practice-still-valid/10202837#10202837", "tags": ["java", "concurrency", "java-8", "java-7"]}, {"body": "<p>Yes, it's still valid in my mind. There isn't big change in this area from 6 to 7. Fork-join is a new feature, which is very suitable for divide-and-conquer type of problems. But all the existing stuff inside the book, such as synchronization, volatile, servlet, are still very valid.</p>\n", "title": "Is &quot;Java Concurrency In Practice&quot; still valid?", "answer_id": 10202907, "link": "http://stackoverflow.com/questions/10202768/is-java-concurrency-in-practice-still-valid/10202907#10202907", "tags": ["java", "concurrency", "java-8", "java-7"]}, {"body": "<p>While my perspective may be biased, my current intention for updating the book would be almost strictly additive, covering fork-join, parallel decomposition, and the new parallel bulk data operations coming in Java SE 8.  </p>\n", "title": "Is &quot;Java Concurrency In Practice&quot; still valid?", "answer_id": 10214606, "link": "http://stackoverflow.com/questions/10202768/is-java-concurrency-in-practice-still-valid/10214606#10214606", "tags": ["java", "concurrency", "java-8", "java-7"]}, {"body": "<p>Yes. Still it is valid and i have got good feedback from my friends. It is one of the best book for learning the concurrency in java. You can read the <a href=\"http://www.javabeat.net/2012/07/book-review-java-concurrency-practice/\" rel=\"nofollow\">review for Java Concurrency In Practice</a></p>\n", "title": "Is &quot;Java Concurrency In Practice&quot; still valid?", "answer_id": 11324129, "link": "http://stackoverflow.com/questions/10202768/is-java-concurrency-in-practice-still-valid/11324129#11324129", "tags": ["java", "concurrency", "java-8", "java-7"]}, {"body": "<p>Yes definitely it's still valid, but I will recommend in addition or as an introduction <a href=\"http://www.manning.com/evans/\"><em>The Well-Grounded Java Developer</em></a> a well written book with a chapter on modern Java concurrency techniques and nicely done examples.</p>\n", "title": "Is &quot;Java Concurrency In Practice&quot; still valid?", "answer_id": 11821639, "link": "http://stackoverflow.com/questions/10202768/is-java-concurrency-in-practice-still-valid/11821639#11821639", "tags": ["java", "concurrency", "java-8", "java-7"]}, {"body": "<p>Well, the book looks promising when I read certain preview chapters online. It gives enough insight on Java and general concurrency aspects. One can keep this book as a handy outfit when designing and implementing both naive and sophisticated concurrency applications.</p>\n", "title": "Is &quot;Java Concurrency In Practice&quot; still valid?", "answer_id": 15135075, "link": "http://stackoverflow.com/questions/10202768/is-java-concurrency-in-practice-still-valid/15135075#15135075", "tags": ["java", "concurrency", "java-8", "java-7"]}, {"body": "<p>I bought this book in 2013.  I had very serious doubts that it would be current and useful given that this edition was published so long ago.  The technology world moves quickly, and software technology even faster.  Even so, this book is foundational.  The concepts and practices that are discussed are more underpinnings for good software design and engineering than updates on the latest and greatest API's.  This book has been indispensable, and I am glad that I got it before I had decided to write even a single line of concurrent code.  It's probably saved me countless hours.</p>\n", "title": "Is &quot;Java Concurrency In Practice&quot; still valid?", "answer_id": 18262880, "link": "http://stackoverflow.com/questions/10202768/is-java-concurrency-in-practice-still-valid/18262880#18262880", "tags": ["java", "concurrency", "java-8", "java-7"]}, {"body": "<p>If you are going to start your project using Java 8 you might want to consider fresh books and tutorials as well because of new stuff appeared in Java 8 like streams,lambdas and new atomics -  that changes development methods a little bit.</p>\n", "title": "Is &quot;Java Concurrency In Practice&quot; still valid?", "answer_id": 23068951, "link": "http://stackoverflow.com/questions/10202768/is-java-concurrency-in-practice-still-valid/23068951#23068951", "tags": ["java", "concurrency", "java-8", "java-7"]}, {"body": "<p>Yes. Very much. \nYou can always keep track on new things being introduced in Java, however, the book does a fine job of explaining the fundamentals.</p>\n\n<p>If it helps, this comes from a full time researcher in concurrency and parallelism using OOP.</p>\n", "title": "Is &quot;Java Concurrency In Practice&quot; still valid?", "answer_id": 26517786, "link": "http://stackoverflow.com/questions/10202768/is-java-concurrency-in-practice-still-valid/26517786#26517786", "tags": ["java", "concurrency", "java-8", "java-7"]}], "question_id": 10202768}, {"body": "<p>I am aware that every object requires heap memory and every primitive/reference on the stack requires stack memory.</p>\n\n<p>When I attempt to create an object on the heap and there's insufficient memory to do so, the JVM creates an <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/OutOfMemoryError.html\">java.lang.OutOfMemoryError</a> on the heap and throws it to me.</p>\n\n<p>So implicitly, this means that there is some memory reserved by the JVM on startup.</p>\n\n<p>What happens when this reserved memory is used up (it would definitely be used up, read discussion below) and the JVM does not have enough memory on the heap to create an instance of <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/OutOfMemoryError.html\">java.lang.OutOfMemoryError</a>?</p>\n\n<p>Does it just hang? Or would he throw me a <code>null</code> since there's no memory to <code>new</code> an instance of OOM ?</p>\n\n<pre><code>try {\n    Object o = new Object();\n    // and operations which require memory (well.. that's like everything)\n} catch (java.lang.OutOfMemoryError e) {\n    // JVM had insufficient memory to create an instance of java.lang.OutOfMemoryError to throw to us\n    // what next? hangs here, stuck forever?\n    // or would the machine decide to throw us a \"null\" ? (since it doesn't have memory to throw us anything more useful than a null)\n    e.printStackTrace(); // e.printStackTrace() requires memory too.. =X\n}\n</code></pre>\n\n<p>==</p>\n\n<p><strong>Why couldn't the JVM reserve sufficient memory?</strong></p>\n\n<p>No matter how much memory is reserved, it is still possible for that memory to be used up if the JVM does not have a way to \"reclaim\" that memory:</p>\n\n<pre><code>try {\n    Object o = new Object();\n} catch (java.lang.OutOfMemoryError e) {\n    // JVM had 100 units of \"spare memory\". 1 is used to create this OOM.\n    try {\n        e.printStackTrace();\n    } catch (java.lang.OutOfMemoryError e2) {\n        // JVM had 99 units of \"spare memory\". 1 is used to create this OOM.\n        try {\n            e.printStackTrace();\n        } catch (java.lang.OutOfMemoryError e3) {\n            // JVM had 98 units of \"spare memory\". 1 is used to create this OOM.\n            try {\n                e.printStackTrace();\n            } catch (java.lang.OutOfMemoryError e4) {\n                // JVM had 97 units of \"spare memory\". 1 is used to create this OOM.\n                try {\n                    e.printStackTrace();\n                } catch (java.lang.OutOfMemoryError e5) {\n                    // JVM had 96 units of \"spare memory\". 1 is used to create this OOM.\n                    try {\n                        e.printStackTrace();\n                    } catch (java.lang.OutOfMemoryError e6) {\n                        // JVM had 95 units of \"spare memory\". 1 is used to create this OOM.\n                        e.printStackTrace();\n                        //........the JVM can't have infinite reserved memory, he's going to run out in the end\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Or more concisely:</p>\n\n<pre><code>private void OnOOM(java.lang.OutOfMemoryError e) {\n    try {\n        e.printStackTrace();\n    } catch (java.lang.OutOfMemoryError e2) {\n        OnOOM(e2);\n    }\n}\n</code></pre>\n", "tags": ["java", "language-agnostic"], "title": "What happens when there&#39;s insufficient memory to throw an OutOfMemoryError?", "answer_count": 11, "creation_date": 1329141157, "score": 195, "link": "http://stackoverflow.com/questions/9261705/what-happens-when-theres-insufficient-memory-to-throw-an-outofmemoryerror", "answers": [{"body": "<p>Most runtime environments will pre-allocate on startup, or otherwise reserve, enough memory to deal with memory starvation situations. I imagine most sane JVM implementations would do this.</p>\n", "title": "What happens when there&#39;s insufficient memory to throw an OutOfMemoryError?", "answer_id": 9261736, "link": "http://stackoverflow.com/questions/9261705/what-happens-when-theres-insufficient-memory-to-throw-an-outofmemoryerror/9261736#9261736", "tags": ["java", "language-agnostic"]}, {"body": "<p>I am pretty sure, the JVM will make absolutely sure that it has at least enough memory to throw an exception before it runs out of memory.</p>\n", "title": "What happens when there&#39;s insufficient memory to throw an OutOfMemoryError?", "answer_id": 9261747, "link": "http://stackoverflow.com/questions/9261705/what-happens-when-theres-insufficient-memory-to-throw-an-outofmemoryerror/9261747#9261747", "tags": ["java", "language-agnostic"]}, {"body": "<p>The JVM never really runs out of memory. It does memory computation of the heap stack in advance.</p>\n\n<p>The <a href=\"http://java.sun.com/docs/books/jvms/second_edition/html/Overview.doc.html\">Structure of the JVM, Chapter 3</a>, section 3.5.2 states:</p>\n\n<blockquote>\n  <ul>\n  <li>If Java virtual machine stacks can be dynamically expanded, and expansion is attempted but insufficient memory can be made available\n  to effect the expansion, or if insufficient memory can be made\n  available to create the initial Java virtual machine stack for a new\n  thread, the Java virtual machine throws an <code>OutOfMemoryError</code>.</li>\n  </ul>\n</blockquote>\n\n<p>For <strong>Heap</strong>, Section 3.5.3.</p>\n\n<blockquote>\n  <ul>\n  <li>If a computation requires more heap than can be made available by the automatic storage management system, the Java virtual machine\n  throws an <code>OutOfMemoryError</code>.</li>\n  </ul>\n</blockquote>\n\n<p>So, it does a computation in advance before doing allocation of the object.</p>\n\n<hr>\n\n<p>What happens is that the JVM tries to allocate memory for an object in the memory called Permanent Generation region (or PermSpace). If allocation fails (even after the JVM invokes the Garbage Collector to try &amp; allocate free space), it throws an <code>OutOfMemoryError</code>. Even exceptions requires a memory space so the error will be thrown indefinitely.</p>\n\n<p><a href=\"http://javaeesupportpatterns.blogspot.com/2011/11/outofmemoryerror-java-heap-space.html\">Further reading.</a>? Furthermore, <code>OutOfMemoryError</code> can occur in different <a href=\"http://java.sys-con.com/node/1229281\">JVM structure.</a></p>\n", "title": "What happens when there&#39;s insufficient memory to throw an OutOfMemoryError?", "answer_id": 9261931, "link": "http://stackoverflow.com/questions/9261705/what-happens-when-theres-insufficient-memory-to-throw-an-outofmemoryerror/9261931#9261931", "tags": ["java", "language-agnostic"]}, {"body": "<p>From the JVM Spec, Chapter 3.5.2:</p>\n\n<blockquote>\n  <p>If Java virtual machine stacks can be dynamically expanded, and expansion is attempted but insufficient memory can be made available to effect the expansion, or if insufficient memory can be made available to create the initial Java virtual machine stack for a new thread, <strong>the Java virtual machine throws an <code>OutOfMemoryError</code></strong>.</p>\n</blockquote>\n\n<p>Every Java Virtual Machine has to guarantee that it will throw an <code>OutOfMemoryError</code>. That implies, that it has to be capable of creating an instance of <code>OutOfMemoryError</code> (or haveing on created in advance) even if there's no heap space left.</p>\n\n<p>Although it does not have to guarantee, that there's enough memory left to catch it and print a nice stacktrace...</p>\n\n<p><strong>Addition</strong></p>\n\n<p>You added some code to show, that the JVM might run out of heap space if it had to throw more than one <code>OutOfMemoryError</code>. But such an implementation would violate the requirement from above. </p>\n\n<p>There is no requirement that the thrown instances of <code>OutOfMemoryError</code> are unique or created on demand. A JVM could prepare exactly one instance of <code>OutOfMemoryError</code> during startup and throw this whenever it runs out of heap space - which is once, in normal environment. In other words: the instance of <code>OutOfMemoryError</code> that we see could be a singleton.</p>\n", "title": "What happens when there&#39;s insufficient memory to throw an OutOfMemoryError?", "answer_id": 9261936, "link": "http://stackoverflow.com/questions/9261705/what-happens-when-theres-insufficient-memory-to-throw-an-outofmemoryerror/9261936#9261936", "tags": ["java", "language-agnostic"]}, {"body": "<p><a href=\"http://stackoverflow.com/a/9261736#comment11672364_9261736\">Graham Borland seems to be right</a>: at least <em>my</em> JVM apparently re-uses OutOfMemoryErrors.  To test this, I wrote a simple test program:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class OOMTest {\n    private static void test (OutOfMemoryError o) {\n        try {\n            for (int n = 1; true; n += n) {\n                int[] foo = new int[n];\n            }\n        } catch (OutOfMemoryError e) {\n            if (e == o)\n                System.out.println(\"Got the same OutOfMemoryError twice: \" + e);\n            else test(e);\n        }\n    }\n    public static void main (String[] args) {\n        test(null);\n    }\n}\n</code></pre>\n\n<p>Running it produces this output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ javac OOMTest.java &amp;&amp; java -Xmx10m OOMTest \nGot the same OutOfMemoryError twice: java.lang.OutOfMemoryError: Java heap space\n</code></pre>\n\n<p>BTW, the JVM I'm running (on Ubuntu 10.04) is this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ java -version\njava version \"1.6.0_26\"\nJava(TM) SE Runtime Environment (build 1.6.0_26-b03)\nJava HotSpot(TM) 64-Bit Server VM (build 20.1-b02, mixed mode)\n</code></pre>\n\n<hr>\n\n<p><strong>Edit:</strong> I tried to see what would happen if I <em>forced</em> the JVM to run completely out of memory using the following program:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class OOMTest2 {\n    private static void test (int n) {\n        int[] foo;\n        try {\n            foo = new int[n];\n            test(n * 2);\n        }\n        catch (OutOfMemoryError e) {\n            test((n+1) / 2);\n        }\n    }\n    public static void main (String[] args) {\n        test(1);\n    }\n}\n</code></pre>\n\n<p>As it turns out, it seems to loop forever.  However, curiously, trying to terminate the program with <kbd>Ctrl</kbd>+<kbd>C</kbd> doesn't work, but only gives the following message:</p>\n\n<p><code>Java HotSpot(TM) 64-Bit Server VM warning: Exception java.lang.OutOfMemoryError occurred dispatching signal SIGINT to handler- the VM may need to be forcibly terminated</code></p>\n", "title": "What happens when there&#39;s insufficient memory to throw an OutOfMemoryError?", "answer_id": 9265014, "link": "http://stackoverflow.com/questions/9261705/what-happens-when-theres-insufficient-memory-to-throw-an-outofmemoryerror/9265014#9265014", "tags": ["java", "language-agnostic"]}, {"body": "<p>Last time I was working in Java and using a debugger, the heap inspector showed that the JVM allocated an instance of OutOfMemoryError on startup. In other words, it allocates the object before your program has a chance to start consuming, let alone run out of, memory.</p>\n", "title": "What happens when there&#39;s insufficient memory to throw an OutOfMemoryError?", "answer_id": 9265338, "link": "http://stackoverflow.com/questions/9261705/what-happens-when-theres-insufficient-memory-to-throw-an-outofmemoryerror/9265338#9265338", "tags": ["java", "language-agnostic"]}, {"body": "<p>You seem to be confusing the virtual memory reserved by the JVM in which the JVM runs Java programs with the host OS's native memory in which the JVM is run as a native process. The JVM on your machine is running in the memory managed by the OS, not in the memory the JVM has reserved to run Java programs.</p>\n\n<p>Further reading:</p>\n\n<ul>\n<li><a href=\"http://java.sys-con.com/node/1229281\" rel=\"nofollow\">http://java.sys-con.com/node/1229281</a></li>\n<li><a href=\"http://publib.boulder.ibm.com/infocenter/javasdk/tools/index.jsp?topic=%2Fcom.ibm.java.doc.igaa%2F_1vg000121410cbe-1195c23a635-7ffa_1001.html\" rel=\"nofollow\">http://publib.boulder.ibm.com/infocenter/javasdk/tools/index.jsp?topic=%2Fcom.ibm.java.doc.igaa%2F_1vg000121410cbe-1195c23a635-7ffa_1001.html</a></li>\n</ul>\n\n<p>And as a final note, trying to <strong>catch</strong> a <strong>java.lang.Error</strong> (and its descendant classes) in order to print a stacktrace may not give you any useful information. You want a heap dump instead.</p>\n", "title": "What happens when there&#39;s insufficient memory to throw an OutOfMemoryError?", "answer_id": 9269749, "link": "http://stackoverflow.com/questions/9261705/what-happens-when-theres-insufficient-memory-to-throw-an-outofmemoryerror/9269749#9269749", "tags": ["java", "language-agnostic"]}, {"body": "<p>Exceptions indicating an attempt to violate the boundaries of a managed-memory environment are handled by the runtime of said environment, in this case the JVM. The JVM is its own process, which is running your application's IL. Should a program attempt to make a call that extends the call stack beyond the limits, or allocate more memory than the JVM can reserve, the runtime itself will inject an exception, which will cause the call stack to be unwound. Regardless of the amount of memory your program currently needs, or how deep its call stack, the JVM will have allocated enough memory within its own process bounds to create said exception and inject it into your code.</p>\n", "title": "What happens when there&#39;s insufficient memory to throw an OutOfMemoryError?", "answer_id": 9269791, "link": "http://stackoverflow.com/questions/9261705/what-happens-when-theres-insufficient-memory-to-throw-an-outofmemoryerror/9269791#9269791", "tags": ["java", "language-agnostic"]}, {"body": "<p>Interesting question :-). While the others have given good explanations of the theoretical aspects, I decided to try it out. This is on Oracle JDK 1.6.0_26, Windows 7 64 bit.</p>\n\n<p><strong>Test setup</strong></p>\n\n<p>I wrote a simple program to exhaust memory (see below).</p>\n\n<p>The program just creates a static <code>java.util.List</code>, and keeps stuffing fresh strings into it, until OOM is thrown. It then catches it and continues stuffing in an endless loop (poor JVM...).</p>\n\n<p><strong>Test result</strong></p>\n\n<p>As one can see from the output, the first four times OOME is thrown, it comes with a stack trace. After that, subsequent OOMEs only print <code>java.lang.OutOfMemoryError: Java heap space</code> if <code>printStackTrace()</code> is invoked.</p>\n\n<p>So apparently the JVM makes an effort to print a stack trace if it can, but if memory is really tight, it just omits the trace, just like the other answers suggest.</p>\n\n<p>Also interesting is the hash code of the OOME. Note that the first few OOME all have different hashes. Once the JVM starts omitting stack traces, the hash is always the same. This suggests that the JVM will use fresh (preallocated?) OOME instances as long as possible, but if push comes to shove, it will just reuse the same instance rather than having nothing to throw.</p>\n\n<p><strong>Output</strong></p>\n\n<p><em>Note: I truncated some stack traces to make the output easier to read (\"[...]\").</em></p>\n\n<pre><code>iteration 0\niteration 100000\niteration 200000\niteration 300000\niteration 400000\niteration 500000\niteration 600000\niteration 700000\niteration 800000\niteration 900000\niteration 1000000\niteration 1100000\niteration 1200000\niteration 1300000\niteration 1400000\niteration 1500000\nOuch: java.lang.OutOfMemoryError: Java heap space; hash: 1069480624\nKeep on trying...\njava.lang.OutOfMemoryError: Java heap space\n    at java.util.Arrays.copyOf(Unknown Source)\n    at java.util.Arrays.copyOf(Unknown Source)\n    at java.util.ArrayList.ensureCapacity(Unknown Source)\n    at java.util.ArrayList.add(Unknown Source)\n    at testsl.Div.gobbleUpMemory(Div.java:23)\n    at testsl.Div.exhaustMemory(Div.java:12)\n    at testsl.Div.main(Div.java:7)\njava.lang.OutOfMemoryError: Java heap space\n    at java.util.Arrays.copyOf(Unknown Source)\n[...]\nOuch: java.lang.OutOfMemoryError: Java heap space; hash: 616699029\nKeep on trying...\njava.lang.OutOfMemoryError: Java heap space\n    at java.util.Arrays.copyOf(Unknown Source)\n[...]\nOuch: java.lang.OutOfMemoryError: Java heap space; hash: 2136955031\nKeep on trying...\njava.lang.OutOfMemoryError: Java heap space\n    at java.util.Arrays.copyOf(Unknown Source)\n[...]\nOuch: java.lang.OutOfMemoryError: Java heap space; hash: 1535562945\nKeep on trying...\njava.lang.OutOfMemoryError: Java heap space\nOuch: java.lang.OutOfMemoryError: Java heap space; hash: 1734048134\nKeep on trying...\nOuch: java.lang.OutOfMemoryError: Java heap space; hash: 1734048134\nKeep on trying...\njava.lang.OutOfMemoryError: Java heap space\nOuch: java.lang.OutOfMemoryError: Java heap space; hash: 1734048134\nKeep on trying...\n[...]\n</code></pre>\n\n<p><strong>The program</strong></p>\n\n<pre><code>public class Div{\n    static java.util.List&lt;String&gt; list = new java.util.ArrayList&lt;String&gt;();\n\n    public static void main(String[] args) {\n        exhaustMemory();\n    }\n\n    private static void exhaustMemory() {\n        try {\n            gobbleUpMemory();\n        } catch (OutOfMemoryError e) {\n            System.out.println(\"Ouch: \" + e+\"; hash: \"+e.hashCode());\n            e.printStackTrace();\n            System.out.println(\"Keep on trying...\");\n            exhaustMemory();\n        }\n    }\n\n    private static void gobbleUpMemory() {\n        for (int i = 0; i &lt; 10000000; i++) {\n            list.add(new String(\"some random long string; use constructor to force new instance\"));\n            if (i % 10000000== 0) {\n                System.out.println(\"iteration \"+i);\n            }\n        }\n\n    }\n}\n</code></pre>\n", "title": "What happens when there&#39;s insufficient memory to throw an OutOfMemoryError?", "answer_id": 9273841, "link": "http://stackoverflow.com/questions/9261705/what-happens-when-theres-insufficient-memory-to-throw-an-outofmemoryerror/9273841#9273841", "tags": ["java", "language-agnostic"]}, {"body": "<p>To further clarify @Graham Borland's answer, functionally, the JVM does this at startup:</p>\n\n<pre><code>private static final OutOfMemoryError OOME = new OutOfMemoryError();\n</code></pre>\n\n<p>Later, the JVM executes one of the following Java bytecodes: 'new', 'anewarray', or 'multianewarray'.  This instruction causes the JVM to perform a number of steps in an out of memory condition:</p>\n\n<ol>\n<li>Invoke a native function, say <code>allocate()</code>.  <code>allocate()</code> attempts to allocate memory for some a new instance of a particular class or array.</li>\n<li>That allocation request fails, so the JVM invokes another native function, say <code>doGC()</code>, which attempts to do garbage collection.</li>\n<li>When that function returns, <code>allocate()</code> tries to allocate memory for the instance once again.</li>\n<li>If that fails(*), then the JVM, within allocate(), simply does a <code>throw OOME;</code>, referring to the OOME that it instantiated at startup.  Note that it did not have to allocate that OOME, it just refers to it.</li>\n</ol>\n\n<p>Obviously, these are not literal steps; they'll vary from JVM to JVM in implementation, but this is the high-level idea.</p>\n\n<p>(*) A significant amount of work happens here before failing.  The JVM will attempt to clear SoftReference objects, attempt allocation directly into the tenured generation when using a generational collector, and possibly other things, like finalization.</p>\n", "title": "What happens when there&#39;s insufficient memory to throw an OutOfMemoryError?", "answer_id": 9333553, "link": "http://stackoverflow.com/questions/9261705/what-happens-when-theres-insufficient-memory-to-throw-an-outofmemoryerror/9333553#9333553", "tags": ["java", "language-agnostic"]}, {"body": "<p>The answers that say that the JVM will pre-allocate <code>OutOfMemoryErrors</code> are indeed correct.<br>\nIn addition to testing this by provoking an out-of-memory situation we can just check the heap of any JVM (I used a small program that just does a sleep, running it using Oracle's Hotspot JVM from Java 8 update 31).</p>\n\n<p>Using <code>jmap</code> we see that there seems to be 9 instances of OutOfMemoryError (even though we have plenty of memory):</p>\n\n<pre>\n> jmap -histo 12103 | grep OutOfMemoryError\n 71:             9            288  java.lang.OutOfMemoryError\n170:             1             32  [Ljava.lang.OutOfMemoryError;\n</pre>\n\n<p>We can then generate a heap dump:</p>\n\n<pre>\n> jmap -dump:format=b,file=heap.hprof 12315\n</pre>\n\n<p>and open it using <a href=\"https://eclipse.org/mat/\" rel=\"nofollow\">Eclipse Memory Analyzer</a>, where an OQL query shows that the JVM actually seems to pre-allocate <code>OutOfMemoryErrors</code> for all possible messages:</p>\n\n<p><img src=\"http://i.stack.imgur.com/mD2at.png\" alt=\"enter image description here\"></p>\n\n<p>The code for the Java 8 Hotspot JVM that actually preallocates these <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/hotspot/file/87ee5ee27509/src/share/vm/memory/universe.cpp#l1018\" rel=\"nofollow\">can be found here</a>, and looks like this (with some parts omitted):</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>...\n// Setup preallocated OutOfMemoryError errors\nk = SystemDictionary::resolve_or_fail(vmSymbols::java_lang_OutOfMemoryError(), true, CHECK_false);\nk_h = instanceKlassHandle(THREAD, k);\nUniverse::_out_of_memory_error_java_heap = k_h-&gt;allocate_instance(CHECK_false);\nUniverse::_out_of_memory_error_metaspace = k_h-&gt;allocate_instance(CHECK_false);\nUniverse::_out_of_memory_error_class_metaspace = k_h-&gt;allocate_instance(CHECK_false);\nUniverse::_out_of_memory_error_array_size = k_h-&gt;allocate_instance(CHECK_false);\nUniverse::_out_of_memory_error_gc_overhead_limit =\n  k_h-&gt;allocate_instance(CHECK_false);\n\n...\n\nif (!DumpSharedSpaces) {\n  // These are the only Java fields that are currently set during shared space dumping.\n  // We prefer to not handle this generally, so we always reinitialize these detail messages.\n  Handle msg = java_lang_String::create_from_str(\"Java heap space\", CHECK_false);\n  java_lang_Throwable::set_message(Universe::_out_of_memory_error_java_heap, msg());\n\n  msg = java_lang_String::create_from_str(\"Metaspace\", CHECK_false);\n  java_lang_Throwable::set_message(Universe::_out_of_memory_error_metaspace, msg());\n  msg = java_lang_String::create_from_str(\"Compressed class space\", CHECK_false);\n  java_lang_Throwable::set_message(Universe::_out_of_memory_error_class_metaspace, msg());\n\n  msg = java_lang_String::create_from_str(\"Requested array size exceeds VM limit\", CHECK_false);\n  java_lang_Throwable::set_message(Universe::_out_of_memory_error_array_size, msg());\n\n  msg = java_lang_String::create_from_str(\"GC overhead limit exceeded\", CHECK_false);\n  java_lang_Throwable::set_message(Universe::_out_of_memory_error_gc_overhead_limit, msg());\n\n  msg = java_lang_String::create_from_str(\"/ by zero\", CHECK_false);\n  java_lang_Throwable::set_message(Universe::_arithmetic_exception_instance, msg());\n\n  // Setup the array of errors that have preallocated backtrace\n  k = Universe::_out_of_memory_error_java_heap-&gt;klass();\n  assert(k-&gt;name() == vmSymbols::java_lang_OutOfMemoryError(), \"should be out of memory error\");\n  k_h = instanceKlassHandle(THREAD, k);\n\n  int len = (StackTraceInThrowable) ? (int)PreallocatedOutOfMemoryErrorCount : 0;\n  Universe::_preallocated_out_of_memory_error_array = oopFactory::new_objArray(k_h(), len, CHECK_false);\n  for (int i=0; i&lt;len; i++) {\n    oop err = k_h-&gt;allocate_instance(CHECK_false);\n    Handle err_h = Handle(THREAD, err);\n    java_lang_Throwable::allocate_backtrace(err_h, CHECK_false);\n    Universe::preallocated_out_of_memory_errors()-&gt;obj_at_put(i, err_h());\n  }\n  Universe::_preallocated_out_of_memory_error_avail_count = (jint)len;\n}\n...\n</code></pre>\n\n<p>and <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/hotspot/file/87ee5ee27509/src/share/vm/memory/universe.cpp#l571\" rel=\"nofollow\">this code</a> shows that the JVM will first try to use one of the pre-allocated errors with space for a stack trace, and then fall back to one without a stack trace:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>oop Universe::gen_out_of_memory_error(oop default_err) {\n  // generate an out of memory error:\n  // - if there is a preallocated error with backtrace available then return it wth\n  //   a filled in stack trace.\n  // - if there are no preallocated errors with backtrace available then return\n  //   an error without backtrace.\n  int next;\n  if (_preallocated_out_of_memory_error_avail_count &gt; 0) {\n    next = (int)Atomic::add(-1, &amp;_preallocated_out_of_memory_error_avail_count);\n    assert(next &lt; (int)PreallocatedOutOfMemoryErrorCount, \"avail count is corrupt\");\n  } else {\n    next = -1;\n  }\n  if (next &lt; 0) {\n    // all preallocated errors have been used.\n    // return default\n    return default_err;\n  } else {\n    // get the error object at the slot and set set it to NULL so that the\n    // array isn't keeping it alive anymore.\n    oop exc = preallocated_out_of_memory_errors()-&gt;obj_at(next);\n    assert(exc != NULL, \"slot has been used already\");\n    preallocated_out_of_memory_errors()-&gt;obj_at_put(next, NULL);\n\n    // use the message from the default error\n    oop msg = java_lang_Throwable::message(default_err);\n    assert(msg != NULL, \"no message\");\n    java_lang_Throwable::set_message(exc, msg);\n\n    // populate the stack trace and return it.\n    java_lang_Throwable::fill_in_stack_trace_of_preallocated_backtrace(exc);\n    return exc;\n  }\n}\n</code></pre>\n", "title": "What happens when there&#39;s insufficient memory to throw an OutOfMemoryError?", "answer_id": 29764066, "link": "http://stackoverflow.com/questions/9261705/what-happens-when-theres-insufficient-memory-to-throw-an-outofmemoryerror/29764066#29764066", "tags": ["java", "language-agnostic"]}], "question_id": 9261705}, {"body": "<p>I have the following code:</p>\n\n<pre><code>class Hello {\n    class Thing {\n        public int size;\n\n        Thing() {\n            size = 0;\n        }\n    }\n\n    public static void main(String[] args) {\n        Thing thing1 = new Thing();\n        System.out.println(\"Hello, World!\");\n    }\n}\n</code></pre>\n\n<p>I know <code>Thing</code> does nothing, but my Hello, World program compiles just fine without it. It's only my defined classes that are failing on me.</p>\n\n<p>And it refuses to compile. I get <code>No enclosing instance of type Hello is accessible.\"</code> at the line that creates a new Thing. I'm guessing either:</p>\n\n<ol>\n<li>I have system level problems (either in DrJava or my Java install) or</li>\n<li>I have some basic misunderstanding of how to construct a working program in java.</li>\n</ol>\n\n<p>Any ideas?</p>\n", "tags": ["java"], "title": "Java - No enclosing instance of type Foo is accessible", "answer_count": 5, "creation_date": 1330911076, "score": 190, "link": "http://stackoverflow.com/questions/9560600/java-no-enclosing-instance-of-type-foo-is-accessible", "answers": [{"body": "<p><code>Thing</code> is an <a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html\">inner class</a> with an automatic connection to an instance of <code>Hello</code>. You get a compile error because there is no instance of <code>Hello</code> for it to attach to. You can fix it most easily by changing it to a <a href=\"http://stackoverflow.com/questions/70324/java-inner-class-and-static-nested-class\">static nested class</a> which has no connection:</p>\n\n<pre><code>static class Thing\n</code></pre>\n", "title": "Java - No enclosing instance of type Foo is accessible", "answer_id": 9560631, "link": "http://stackoverflow.com/questions/9560600/java-no-enclosing-instance-of-type-foo-is-accessible/9560631#9560631", "tags": ["java"]}, {"body": "<p><code>static class Thing</code> will make your program work.</p>\n\n<p>As it is, you've got <code>Thing</code> as an inner class, which (by definition) is associated with a particular instance of <code>Hello</code> (even if it never uses or refers to it), which means it's an error to say <code>new Thing();</code> without having a particular <code>Hello</code> instance in scope. </p>\n\n<p>If you declare it as a static class instead, then it's a \"nested\" class, which doesn't need a particular <code>Hello</code> instance.</p>\n", "title": "Java - No enclosing instance of type Foo is accessible", "answer_id": 9560633, "link": "http://stackoverflow.com/questions/9560600/java-no-enclosing-instance-of-type-foo-is-accessible/9560633#9560633", "tags": ["java"]}, {"body": "<p>You've declared the class Thing as a non-static inner class. That means it must be associated with an instance of the Hello class.</p>\n\n<p>In your code, you're trying to create an instance of Thing from a static context. That is what the compiler is complaining about.</p>\n\n<p>There are a few possible solutions. Which solution to use depends on what you want to achieve.</p>\n\n<ul>\n<li><p>Change Thing to be a static nested class.</p>\n\n<pre><code>static class Thing\n</code></pre></li>\n<li><p>Create an instance of Hello, then create an instance of Thing.</p>\n\n<pre><code>public static void main(String[] args)\n{\n    Hello h = new Hello();\n    Thing thing1 = h.new Thing(); // hope this syntax is right, typing on the fly :P\n}\n</code></pre></li>\n<li><p>Move Thing out of the Hello class.</p></li>\n</ul>\n\n<p>For more information on nested/inner classes:\n<a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html\">Nested Classes (The Java Tutorials)</a></p>\n", "title": "Java - No enclosing instance of type Foo is accessible", "answer_id": 9560660, "link": "http://stackoverflow.com/questions/9560600/java-no-enclosing-instance-of-type-foo-is-accessible/9560660#9560660", "tags": ["java"]}, {"body": "<p>Lets understand it with the following simple example. \nThis happens because this is NON-STATIC INNER CLASS. You should need the instance of outer class.</p>\n\n<pre><code> public class PQ {\n\n    public static void main(String[] args) {\n\n        // create dog object here\n        Dog dog = new PQ().new Dog();\n        //OR\n        PQ pq = new PQ();\n        Dog dog1 = pq.new Dog();\n    }\n\n    abstract class Animal {\n        abstract void checkup();\n    }\n\n    class Dog extends Animal {\n        @Override\n        void checkup() {\n            System.out.println(\"Dog checkup\");\n\n        }\n    }\n\n    class Cat extends Animal {\n        @Override\n        void checkup() {\n            System.out.println(\"Cat Checkup\");\n\n        }\n    }\n}\n</code></pre>\n", "title": "Java - No enclosing instance of type Foo is accessible", "answer_id": 12954649, "link": "http://stackoverflow.com/questions/9560600/java-no-enclosing-instance-of-type-foo-is-accessible/12954649#12954649", "tags": ["java"]}, {"body": "<p>Well... so many good answers but i wanna to add more on it. A brief look on Inner class in Java- Java allows us to define a class within another class and\nBeing able to nest classes in this way has certain advantages:</p>\n\n<ol>\n<li><p>It can <em>hide(It increases encapsulation)</em> the class from other classes - especially relevant if the class is only being used by the class it is contained within. In this case there is no need for the outside world to know about it.</p></li>\n<li><p>It can make <em>code more maintainable</em> as the classes are logically grouped together around where they are needed.</p></li>\n<li><p>The inner class has <em>access</em> to the instance variables and methods of its containing class.</p></li>\n</ol>\n\n<p>We have mainly three types of  <em><strong><code>Inner Classes</code></strong></em>  </p>\n\n<ol>\n<li>Local inner </li>\n<li>Static Inner Class</li>\n<li>Anonymous Inner Class  </li>\n</ol>\n\n<p>Some of the important points to be remember</p>\n\n<ul>\n<li>We need class object to access the Local Inner Class in which it exist.</li>\n<li>Static Inner Class get directly accessed same as like any other static method of the same class in which it is exists.</li>\n<li>Anonymous Inner Class are not visible to out side world as well as to the other methods or classes of the same class(in which it is exist) and it is used on the point where it is declared. </li>\n</ul>\n\n<p>Let`s try to see the above concepts practically_</p>\n\n<pre><code>public class MyInnerClass {\n\npublic static void main(String args[]) throws InterruptedException {\n    // direct access to inner class method\n    new MyInnerClass.StaticInnerClass().staticInnerClassMethod();\n\n    // static inner class reference object\n    StaticInnerClass staticInnerclass = new StaticInnerClass();\n    staticInnerclass.staticInnerClassMethod();\n\n    // access local inner class\n    LocalInnerClass localInnerClass = new MyInnerClass().new LocalInnerClass();\n    localInnerClass.localInnerClassMethod();\n\n    /*\n     * Pay attention to the opening curly braces and the fact that there's a\n     * semicolon at the very end, once the anonymous class is created:\n     */\n    /*\n     AnonymousClass anonymousClass = new AnonymousClass() {\n         // your code goes here...\n\n     };*/\n }\n\n// static inner class\nstatic class StaticInnerClass {\n    public void staticInnerClassMethod() {\n        System.out.println(\"Hay... from Static Inner class!\");\n    }\n}\n\n// local inner class\nclass LocalInnerClass {\n    public void localInnerClassMethod() {\n        System.out.println(\"Hay... from local Inner class!\");\n    }\n }\n\n}\n</code></pre>\n\n<p>I hope this will helps to everyone. Please  <a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html\">refer for more</a></p>\n", "title": "Java - No enclosing instance of type Foo is accessible", "answer_id": 19157779, "link": "http://stackoverflow.com/questions/9560600/java-no-enclosing-instance-of-type-foo-is-accessible/19157779#19157779", "tags": ["java"]}], "question_id": 9560600}, {"body": "<p>I have written a simple Java class to generate the hash values of the Windows Calculator file.  I am using <code>Windows 7 Professional with SP1</code>.  I have tried <code>Java 6.0.29</code> and <code>Java 7.0.03</code>.  Can someone tell me why I am getting different hash values from Java versus (many!) external utilities and/or websites?  Everything external matches with each other, only Java is returning different results.</p>\n\n<pre><code>import java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.util.LinkedHashMap;\nimport java.util.Map;\nimport java.util.Map.Entry;\nimport java.util.zip.CRC32;\nimport java.security.DigestInputStream;\nimport java.security.MessageDigest;\nimport java.security.NoSuchAlgorithmException;\n\npublic class Checksum \n{\n    private static int size = 65536;\n    private static File calc = new File(\"C:/Windows/system32/calc.exe\");\n\n    /*\n        C:\\Windows\\System32\\calc.exe (verified via several different utilities)\n        ----------------------------\n        CRC-32b = 8D8F5F8E\n        MD5     = 60B7C0FEAD45F2066E5B805A91F4F0FC\n        SHA-1   = 9018A7D6CDBE859A430E8794E73381F77C840BE0\n        SHA-256 = 80C10EE5F21F92F89CBC293A59D2FD4C01C7958AACAD15642558DB700943FA22\n        SHA-384 = 551186C804C17B4CCDA07FD5FE83A32B48B4D173DAC3262F16489029894FC008A501B50AB9B53158B429031B043043D2\n        SHA-512 = 68B9F9C00FC64DF946684CE81A72A2624F0FC07E07C0C8B3DB2FAE8C9C0415BD1B4A03AD7FFA96985AF0CC5E0410F6C5E29A30200EFFF21AB4B01369A3C59B58\n\n\n        Results from this class\n        -----------------------\n        CRC-32  = 967E5DDE\n        MD5     = 10E4A1D2132CCB5C6759F038CDB6F3C9\n        SHA-1   = 42D36EEB2140441B48287B7CD30B38105986D68F\n        SHA-256 = C6A91CBA00BF87CDB064C49ADAAC82255CBEC6FDD48FD21F9B3B96ABF019916B    \n    */    \n\n    public static void main(String[] args)throws Exception {\n        Map&lt;String, String&gt; hashes = getFileHash(calc);\n        for (Map.Entry&lt;String, String&gt; entry : hashes.entrySet()) {\n            System.out.println(String.format(\"%-7s = %s\", entry.getKey(), entry.getValue()));\n        }\n    }\n\n    private static Map&lt;String, String&gt; getFileHash(File file) throws NoSuchAlgorithmException, IOException {\n        Map&lt;String, String&gt; results = new LinkedHashMap&lt;String, String&gt;();\n\n        if (file != null &amp;&amp; file.exists()) {\n            CRC32 crc32 = new CRC32();\n            MessageDigest md5 = MessageDigest.getInstance(\"MD5\");\n            MessageDigest sha1 = MessageDigest.getInstance(\"SHA-1\");\n            MessageDigest sha256 = MessageDigest.getInstance(\"SHA-256\");\n\n            FileInputStream fis = new FileInputStream(file);\n            byte data[] = new byte[size];\n            int len = 0;\n            while ((len = fis.read(data)) != -1) {\n                crc32.update(data, 0, len);\n                md5.update(data, 0, len);\n                sha1.update(data, 0, len);\n                sha256.update(data, 0, len);\n            }\n            fis.close();\n\n            results.put(\"CRC-32\", toHex(crc32.getValue()));\n            results.put(md5.getAlgorithm(), toHex(md5.digest()));\n            results.put(sha1.getAlgorithm(), toHex(sha1.digest()));\n            results.put(sha256.getAlgorithm(), toHex(sha256.digest()));\n        }\n        return results;\n    }\n\n    private static String toHex(byte[] bytes) {\n        String result = \"\";\n        if (bytes != null) {\n            StringBuilder sb = new StringBuilder(bytes.length * 2);\n            for (byte element : bytes) {\n                if ((element &amp; 0xff) &lt; 0x10) {\n                    sb.append(\"0\");\n                }\n                sb.append(Long.toString(element &amp; 0xff, 16));\n            }\n            result = sb.toString().toUpperCase();\n        }\n        return result;\n    }\n\n    private static String toHex(long value) {\n        return Long.toHexString(value).toUpperCase();\n    }\n\n}\n</code></pre>\n", "tags": ["java", "windows", "md5", "digest", "wow64"], "title": "Different results with Java&#39;s digest versus external utilities", "answer_count": 1, "creation_date": 1331845075, "score": 189, "link": "http://stackoverflow.com/questions/9728056/different-results-with-javas-digest-versus-external-utilities", "answers": [{"body": "<p>Got it. The Windows file system is behaving differently depending on the architecture of your process. This <a href=\"http://www.samlogic.net/articles/32-64-bit-windows-folder-x86-syswow64.htm\">article explains it all</a> - in particular:</p>\n\n<blockquote>\n  <p>But what about 32-bit applications that have the system path hard coded and is running in a 64-bit Windows? How can they find the new SysWOW64 folder without changes in the program code, you might think. The answer is that the emulator redirects calls to System32 folder to the SysWOW64 folder transparently so even if the folder is hard coded to the System32 folder (like C:\\Windows\\System32), the emulator will make sure that the SysWOW64 folder is used instead. So same source code, that uses the System32 folder, can be compiled to both 32-bit and 64-bit program code without any changes.</p>\n</blockquote>\n\n<p>Try copying <code>calc.exe</code> to somewhere else... then run the same tools again. You'll get the same results as Java. <em>Something</em> about the Windows file system is giving different data to the tools than it's giving to Java... I'm sure it's something to do with it being in the Windows directory, and thus probably handled \"differently\".</p>\n\n<p>Furthermore, I've reproduced it in C#... and found out that it depends on the <em>architecture of the process you're running</em>. So here's a sample program:</p>\n\n<pre><code>using System;\nusing System.IO;\nusing System.Security.Cryptography;\n\nclass Test\n{\n    static void Main()\n    {\n        using (var md5 = MD5.Create())\n        {\n            string path = \"c:/Windows/System32/Calc.exe\";\n            var bytes = md5.ComputeHash(File.ReadAllBytes(path));\n            Console.WriteLine(BitConverter.ToString(bytes));\n        }\n    }\n}\n</code></pre>\n\n<p>And here's a console session (minus chatter from the compiler):</p>\n\n<pre><code>c:\\users\\jon\\Test&gt;csc /platform:x86 Test.cs    \n\nc:\\users\\jon\\Test&gt;test\n60-B7-C0-FE-AD-45-F2-06-6E-5B-80-5A-91-F4-F0-FC\n\nc:\\users\\jon\\Test&gt;csc /platform:x64 Test.cs\n\nc:\\users\\jon\\Test&gt;test\n10-E4-A1-D2-13-2C-CB-5C-67-59-F0-38-CD-B6-F3-C9\n</code></pre>\n", "title": "Different results with Java&#39;s digest versus external utilities", "answer_id": 9728314, "link": "http://stackoverflow.com/questions/9728056/different-results-with-javas-digest-versus-external-utilities/9728314#9728314", "tags": ["java", "windows", "md5", "digest", "wow64"]}], "question_id": 9728056}, {"body": "<p><strong>Problem:</strong><br>\nWe have a Spring MVC-based RESTful API which contains sensitive information. The API should be secured, however sending the user's credentials (user/pass combo) with each request is not desirable. Per REST guidelines (and internal business requirements), the server must remain stateless. The API will be consumed by another server in a mashup-style approach.</p>\n\n<p><strong>Requirements:</strong></p>\n\n<ul>\n<li><p>Client makes a request to <code>.../authenticate</code> (unprotected URL) with credentials; server returns a secure token which contains enough information for the server to validate future requests and remain stateless. This would likely consist of the same information as Spring Security's <a href=\"http://static.springsource.org/spring-security/site/docs/3.1.x/reference/remember-me.html\">Remember-Me Token</a>.</p></li>\n<li><p>Client makes subsequent requests to various (protected) URLs, appending the previously obtained token as a query parameter (or, less desirably, an HTTP request header).</p></li>\n<li><p>Client cannot be expected to store cookies.</p></li>\n<li><p>Since we use Spring already, the solution should make use of Spring Security.</p></li>\n</ul>\n\n<p>We've been banging our heads against the wall trying to make this work, so hopefully someone out there has already solved this problem. </p>\n\n<p>Given the above scenario, how might you solve this particular need?</p>\n", "tags": ["java", "rest", "spring-mvc", "spring-security"], "title": "RESTful Authentication via Spring", "answer_count": 3, "creation_date": 1338426976, "score": 187, "link": "http://stackoverflow.com/questions/10826293/restful-authentication-via-spring", "answers": [{"body": "<p>You might consider <a href=\"http://tools.ietf.org/html/rfc2617#section-3\">Digest Access Authentication</a>.  Essentially the protocol is as follows:</p>\n\n<ol>\n<li>Request is made from client</li>\n<li>Server responds with a unique nonce string</li>\n<li>Client supplies a username and password (and some other values) md5 hashed with the nonce; this hash is known as HA1</li>\n<li>Server is then able to verify client's identity and serve up the requested materials</li>\n<li>Communication with the nonce can continue until the server supplies a new nonce (a counter is used to eliminate replay attacks)</li>\n</ol>\n\n<p>All of this communication is made through headers, which, as jmort253 points out, is generally more secure than communicating sensitive material in the url parameters.</p>\n\n<p>Digest Access Authentication is supported by <a href=\"http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#digest-processing-filter\">Spring Security</a>.  Notice that, although the docs say that you must have access to your client's plain-text password, you can <a href=\"https://jira.springsource.org/browse/SEC-1905\">successfully authenticate if you have the HA1 hash</a> for your client.</p>\n", "title": "RESTful Authentication via Spring", "answer_id": 10826800, "link": "http://stackoverflow.com/questions/10826293/restful-authentication-via-spring/10826800#10826800", "tags": ["java", "rest", "spring-mvc", "spring-security"]}, {"body": "<p>We managed to get this working exactly as described in the OP, and hopefully someone else can make use of the solution. Here's what we did:</p>\n\n<p>Set up the security context like so:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;security:http realm=\"Protected API\" use-expressions=\"true\" auto-config=\"false\" create-session=\"stateless\" entry-point-ref=\"CustomAuthenticationEntryPoint\"&gt;\n    &lt;security:custom-filter ref=\"authenticationTokenProcessingFilter\" position=\"FORM_LOGIN_FILTER\" /&gt;\n    &lt;security:intercept-url pattern=\"/authenticate\" access=\"permitAll\"/&gt;\n    &lt;security:intercept-url pattern=\"/**\" access=\"isAuthenticated()\" /&gt;\n&lt;/security:http&gt;\n\n&lt;bean id=\"CustomAuthenticationEntryPoint\"\n    class=\"com.demo.api.support.spring.CustomAuthenticationEntryPoint\" /&gt;\n\n&lt;bean id=\"authenticationTokenProcessingFilter\"\n    class=\"com.demo.api.support.spring.AuthenticationTokenProcessingFilter\" &gt;\n    &lt;constructor-arg ref=\"authenticationManager\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>As you can see, we've created a custom <code>AuthenticationEntryPoint</code>, which basically just returns a <code>401 Unauthorized</code> if the request wasn't authenticated in the filter chain by our <code>AuthenticationTokenProcessingFilter</code>.</p>\n\n<p><strong>CustomAuthenticationEntryPoint</strong>:</p>\n\n<pre><code>public class CustomAuthenticationEntryPoint implements AuthenticationEntryPoint {\n    @Override\n    public void commence(HttpServletRequest request, HttpServletResponse response,\n            AuthenticationException authException) throws IOException, ServletException {\n        response.sendError( HttpServletResponse.SC_UNAUTHORIZED, \"Unauthorized: Authentication token was either missing or invalid.\" );\n    }\n}\n</code></pre>\n\n<p><strong>AuthenticationTokenProcessingFilter</strong>:</p>\n\n<pre><code>public class AuthenticationTokenProcessingFilter extends GenericFilterBean {\n\n    @Autowired UserService userService;\n    @Autowired TokenUtils tokenUtils;\n    AuthenticationManager authManager;\n\n    public AuthenticationTokenProcessingFilter(AuthenticationManager authManager) {\n        this.authManager = authManager;\n    }\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response,\n            FilterChain chain) throws IOException, ServletException {\n        @SuppressWarnings(\"unchecked\")\n        Map&lt;String, String[]&gt; parms = request.getParameterMap();\n\n        if(parms.containsKey(\"token\")) {\n            String token = parms.get(\"token\")[0]; // grab the first \"token\" parameter\n\n            // validate the token\n            if (tokenUtils.validate(token)) {\n                // determine the user based on the (already validated) token\n                UserDetails userDetails = tokenUtils.getUserFromToken(token);\n                // build an Authentication object with the user's info\n                UsernamePasswordAuthenticationToken authentication = \n                        new UsernamePasswordAuthenticationToken(userDetails.getUsername(), userDetails.getPassword());\n                authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails((HttpServletRequest) request));\n                // set the authentication into the SecurityContext\n                SecurityContextHolder.getContext().setAuthentication(authManager.authenticate(authentication));         \n            }\n        }\n        // continue thru the filter chain\n        chain.doFilter(request, response);\n    }\n}\n</code></pre>\n\n<p>Obviously, <strong><code>TokenUtils</code></strong> contains some privy (and very case-specific) code and can't be readily shared. Here's its interface:</p>\n\n<pre><code>public interface TokenUtils {\n    String getToken(UserDetails userDetails);\n    String getToken(UserDetails userDetails, Long expiration);\n    boolean validate(String token);\n    UserDetails getUserFromToken(String token);\n}\n</code></pre>\n\n<p>That ought to get you off to a good start. Happy coding. :)</p>\n", "title": "RESTful Authentication via Spring", "answer_id": 10864088, "link": "http://stackoverflow.com/questions/10826293/restful-authentication-via-spring/10864088#10864088", "tags": ["java", "rest", "spring-mvc", "spring-security"]}, {"body": "<p>Regarding tokens carrying information, JSON Web Tokens (<a href=\"http://jwt.io\" rel=\"nofollow\">http://jwt.io</a>) is a brilliant technology. The main concept is to embed information elements (claims) into the token, and then signing the whole token so that the validating end can verify that the claims are indeed trustworthy.</p>\n\n<p>I use this Java implementation: <a href=\"https://bitbucket.org/b_c/jose4j/wiki/Home\" rel=\"nofollow\">https://bitbucket.org/b_c/jose4j/wiki/Home</a> </p>\n\n<p>There is also a Spring module (spring-security-jwt), but I haven't looked into what it supports.</p>\n", "title": "RESTful Authentication via Spring", "answer_id": 36259985, "link": "http://stackoverflow.com/questions/10826293/restful-authentication-via-spring/36259985#36259985", "tags": ["java", "rest", "spring-mvc", "spring-security"]}], "question_id": 10826293}, {"body": "<p>I was thinking if exist a better/nicer way to negate a instanceof in Java.\nActually, I do something like:</p>\n\n<pre><code>if(!(str instanceof String)) { /* do Something */ }\n</code></pre>\n\n<p>But, I think that should exist a \"beautiful\" syntax to do this.</p>\n\n<p>Someone know if it exists and how the syntax look like?</p>\n\n<hr>\n\n<p><strong>EDIT:</strong>\nBy beautiful, I might say something like this:</p>\n\n<pre><code>if(str !instanceof String) { /* do Something */ } // compile failure\n</code></pre>\n", "tags": ["java", "syntax"], "title": "Best way to &quot;negate&quot; an instanceof", "answer_count": 5, "creation_date": 1327944934, "score": 168, "link": "http://stackoverflow.com/questions/9068150/best-way-to-negate-an-instanceof", "answers": [{"body": "<p>No, there is no better way; yours is canonical.</p>\n", "title": "Best way to &quot;negate&quot; an instanceof", "answer_id": 9068167, "link": "http://stackoverflow.com/questions/9068150/best-way-to-negate-an-instanceof/9068167#9068167", "tags": ["java", "syntax"]}, {"body": "<p>You could use the <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#isInstance%28java.lang.Object%29\"><code>Class.isInstance</code></a> method:</p>\n\n<pre><code>if(!String.class.isInstance(str)) { /* do Something */ }\n</code></pre>\n\n<p>... but it is still negated and pretty ugly.</p>\n", "title": "Best way to &quot;negate&quot; an instanceof", "answer_id": 9068242, "link": "http://stackoverflow.com/questions/9068150/best-way-to-negate-an-instanceof/9068242#9068242", "tags": ["java", "syntax"]}, {"body": "<p>Usually you don't want just an <code>if</code> but an <code>else</code> clause as well.</p>\n\n<pre><code>if(!(str instanceof String)) { /* do Something */ } \nelse { /* do something else */ }\n</code></pre>\n\n<p>can be written as</p>\n\n<pre><code>if(str instanceof String) { /* do Something else */ } \nelse { /* do something */ }\n</code></pre>\n\n<p>Or you can write the code so you don't need to know if its a String or not. e.g.</p>\n\n<pre><code>if(!(str instanceof String)) { str = str.toString(); } \n</code></pre>\n\n<p>can be written as</p>\n\n<pre><code>str = str.toString();\n</code></pre>\n", "title": "Best way to &quot;negate&quot; an instanceof", "answer_id": 9068463, "link": "http://stackoverflow.com/questions/9068150/best-way-to-negate-an-instanceof/9068463#9068463", "tags": ["java", "syntax"]}, {"body": "<p>I don't know what you imagine when you say \"beautiful\", but what about this? I personally think it's worse than the classic form you posted, but somebody might like it...</p>\n\n<pre><code>if (str instanceof String == false) { /* ... */ }\n</code></pre>\n", "title": "Best way to &quot;negate&quot; an instanceof", "answer_id": 9068999, "link": "http://stackoverflow.com/questions/9068150/best-way-to-negate-an-instanceof/9068999#9068999", "tags": ["java", "syntax"]}, {"body": "<p>If you can use static imports, and your moral code allows them</p>\n\n<pre><code>public class ObjectUtils {\n    private final Object obj;\n    private ObjectUtils(Object obj) {\n        this.obj = obj;\n    }\n\n    public static ObjectUtils thisObj(Object obj){\n        return new ObjectUtils(obj);\n    }\n\n    public boolean isNotA(Class&lt;?&gt; clazz){\n        return !clazz.isInstance(obj);\n    }\n}\n</code></pre>\n\n<p>And then...</p>\n\n<pre><code>import static notinstanceof.ObjectUtils.*;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        String a = \"\";\n        if (thisObj(a).isNotA(String.class)) {\n            System.out.println(\"It is not a String\");\n        }\n        if (thisObj(a).isNotA(Integer.class)) {\n            System.out.println(\"It is not an Integer\");\n        }\n    }    \n}\n</code></pre>\n\n<p>This is just a fluent interface exercise, I'd never use that in real life code!<br>\nGo for your classic way, it won't confuse anyone else reading your code!</p>\n", "title": "Best way to &quot;negate&quot; an instanceof", "answer_id": 9069105, "link": "http://stackoverflow.com/questions/9068150/best-way-to-negate-an-instanceof/9069105#9069105", "tags": ["java", "syntax"]}], "question_id": 9068150}, {"body": "<p>I think I understand <a href=\"http://lucacardelli.name/Papers/OnUnderstanding.A4.pdf\">strong typing</a>, but every time I look for examples for what is weak typing I end up finding examples of programming languages that simply coerce/convert types automatically.</p>\n\n<p>For instance, in this article named <a href=\"http://www.artima.com/weblogs/viewpost.jsp?thread=7590\">Typing: Strong vs. Weak, Static vs. Dynamic</a> says that Python is strongly typed because you get an exception if you try to:</p>\n\n<p><strong>Python</strong></p>\n\n<pre><code>1 + \"1\"\nTraceback (most recent call last):\nFile \"\", line 1, in ? \nTypeError: unsupported operand type(s) for +: 'int' and 'str'\n</code></pre>\n\n<p>However, such thing is possible in Java and in C#, and we do not consider them weakly typed just for that.</p>\n\n<p><strong>Java</strong></p>\n\n<pre><code>  int a = 10;\n  String b = \"b\";\n  String result = a + b;\n  System.out.println(result);\n</code></pre>\n\n<p><strong>C#</strong></p>\n\n<pre><code>int a = 10;\nstring b = \"b\";\nstring c = a + b;\nConsole.WriteLine(c);\n</code></pre>\n\n<p>In this another article named <a href=\"http://www.i-programmer.info/programming/theory/1469-type-systems-demystified-part2-weak-vs-strong.html\">Weakly Type Languages</a> the author says that Perl is weakly typed simply because I can concatenate a string to a number and viceversa without any explicit conversion.</p>\n\n<p><strong>Perl</strong></p>\n\n<pre><code>$a=10;\n$b=\"a\";\n$c=$a.$b;\nprint $c; #10a\n</code></pre>\n\n<p>So the same example makes Perl weakly typed, but not Java and C#?.</p>\n\n<p>Gee, this is confusing <img src=\"http://i.stack.imgur.com/U5kPT.gif\" alt=\"enter image description here\"></p>\n\n<p>The authors seem to imply that a language that prevents the application of certain operations on values of different types is strongly typed and the contrary means weakly typed.</p>\n\n<p>Therefore, at some point I have felt prompted to believe that if a language provides a lot of automatic conversions or coercion between types (as perl) may end up being considered weakly typed, whereas other languages that provide only a few conversions may end up being considered strongly typed. </p>\n\n<p>I am inclined to believe, though, that I must be wrong in this interepretation, I just do not know why or how to explain it.</p>\n\n<p>So, my questions are: </p>\n\n<ul>\n<li>What does it really mean for a language to be truly weakly typed? </li>\n<li>Could you mention any good examples of weakly typing that are not related to automatic conversion/automatic coercion done by the language?</li>\n<li>Can a language be weakly typed and strongly typed at the same time?</li>\n</ul>\n", "tags": ["c#", "java", "python", "perl", "weakly-typed"], "title": "Seeking clarification on apparent contradictions regarding weakly typed languages", "answer_count": 9, "creation_date": 1333038864, "score": 163, "link": "http://stackoverflow.com/questions/9929585/seeking-clarification-on-apparent-contradictions-regarding-weakly-typed-language", "answers": [{"body": "<p>UPDATE: <a href=\"http://ericlippert.com/2012/10/15/is-c-a-strongly-typed-or-a-weakly-typed-language/\">This question was the subject of my blog on the 15th of October, 2012.</a> Thanks for the great question!</p>\n\n<hr>\n\n<blockquote>\n  <p>What does it really mean for a language to be \"weakly typed\"? </p>\n</blockquote>\n\n<p>It means \"this language uses a type system that I find distasteful\". A \"strongly typed\" language by contrast is a language with a type system that I find pleasant.</p>\n\n<p>The terms are essentially meaningless and you should avoid them. <a href=\"http://en.wikipedia.org/wiki/Strong_typing\">Wikipedia</a> lists <em>eleven different meanings</em> for \"strongly typed\", several of which are contradictory. This indicates that the odds of confusion being created are high in any conversation involving the term \"strongly typed\" or \"weakly typed\". </p>\n\n<p>All that you can really say with any certainty is that a \"strongly typed\" language under discussion has some additional restriction in the type system, either at runtime or compile time, that a \"weakly typed\" language under discussion lacks. What that restriction might be cannot be determined without further context.</p>\n\n<p>Instead of using \"strongly typed\" and \"weakly typed\", you should describe in detail what kind of type safety you mean. For example, C# is a <em>statically typed</em> language and a <em>type safe</em> language and a <em>memory safe</em> language, <em>for the most part</em>. C# allows all three of those forms of \"strong\" typing to be violated.  The cast operator violates static typing; it says to the compiler \"I know more about the runtime type of this expression than you do\". If the developer is wrong, then the runtime will throw an exception in order to protect type safety. If the developer wishes to break type safety or memory safety, they can do so by turning off the type safety system by making an \"unsafe\" block. In an unsafe block you can use pointer magic to treat an int as a float (violating type safety) or to write to memory you do not own. (Violating memory safety.)</p>\n\n<p>C# imposes type restrictions that are checked at both compile-time and at runtime, thereby making it a \"strongly typed\" language compared to languages that do less compile-time checking or less runtime checking. C# also allows you to in special circumstances do an end-run around those restrictions, making it a \"weakly typed\" language compared with languages which do not allow you to do such an end-run. </p>\n\n<p>Which is it really?  It is impossible to say; it depends on the point of view of the speaker and their attitude towards the various language features. </p>\n", "title": "Seeking clarification on apparent contradictions regarding weakly typed languages", "answer_id": 9929697, "link": "http://stackoverflow.com/questions/9929585/seeking-clarification-on-apparent-contradictions-regarding-weakly-typed-language/9929697#9929697", "tags": ["c#", "java", "python", "perl", "weakly-typed"]}, {"body": "<p>I like <a href=\"http://stackoverflow.com/a/9929697/50776\">@Eric Lippert's answer</a>, but to address the question - strongly typed languages typically have explicit knowledge of the types of variables at each point of the program. Weakly typed languages do not, so they can attempt to perform an operation that may not be possible for a particular type.\nIt think the easiest way to see this is in a function.\nC++:</p>\n\n<pre><code>void func(string a) {...}\n</code></pre>\n\n<p>The variable <code>a</code> is known to be of type string and any incompatible operation will be caught at compile time.</p>\n\n<p>Python:</p>\n\n<pre><code>def func(a)\n  ...\n</code></pre>\n\n<p>The variable <code>a</code> could be anything and we can have code that calls an invalid method, which will only get caught at runtime.</p>\n", "title": "Seeking clarification on apparent contradictions regarding weakly typed languages", "answer_id": 9929945, "link": "http://stackoverflow.com/questions/9929585/seeking-clarification-on-apparent-contradictions-regarding-weakly-typed-language/9929945#9929945", "tags": ["c#", "java", "python", "perl", "weakly-typed"]}, {"body": "<p>A perfect example comes from <a href=\"http://en.wikipedia.org/wiki/Strong_typing\">the wikipedia article of Strong Typing</a>:</p>\n\n<p>Generally strong typing implies that the programming language places severe restrictions on the intermixing that is permitted to occur.</p>\n\n<p><strong>Weak Typing</strong></p>\n\n<pre><code>a = 2\nb = \"2\"\n\nconcatenate(a, b) # returns \"22\"\nadd(a, b) # returns 4\n</code></pre>\n\n<p><strong>Strong Typing</strong></p>\n\n<pre><code>a = 2\nb = \"2\"\n\nconcatenate(a, b) # Type Error\nadd(a, b) # Type Error\nconcatenate(str(a), b) #Returns \"22\"\nadd(a, int(b)) # Returns 4\n</code></pre>\n\n<p>Notice that a weak typing language can intermix different types without errors. A strong type language requires the input types to be the expected types. In a strong type language a type can be converted (<code>str(a)</code> converts an integer to a string) or cast (<code>int(b)</code>). </p>\n\n<p>This all depends on the interpretation of typing.</p>\n", "title": "Seeking clarification on apparent contradictions regarding weakly typed languages", "answer_id": 9932084, "link": "http://stackoverflow.com/questions/9929585/seeking-clarification-on-apparent-contradictions-regarding-weakly-typed-language/9932084#9932084", "tags": ["c#", "java", "python", "perl", "weakly-typed"]}, {"body": "<p>In addition to what Eric has said, consider the following C code:</p>\n\n<pre><code>void f(void* x);\n\nf(42);\nf(\"hello\");\n</code></pre>\n\n<p>In contrast to languages such as Python, C#, Java or whatnot, the above is weakly typed because we <em>lose</em> type information. Eric correctly pointed out that in C# we can circumvent the compiler by casting, effectively telling it \u201cI know more about the type of this variable than you\u201d.</p>\n\n<p>But even then, the runtime will still check the type! If the cast is invalid, the runtime system will catch it and throw an exception.</p>\n\n<p>With type erasure, this doesn\u2019t happen \u2013 type information is thrown away. A cast to <code>void*</code> in C does exactly that. In this regard, the above is fundamentally different from a C# method declaration such as <code>void f(Object x)</code>.</p>\n\n<p>(Technically, C# also allows type erasure through unsafe code or marshalling.)</p>\n\n<p><em>This</em> is as weakly typed as it gets. Everything else is just a matter of static vs. dynamic type checking, i.e. of the time <em>when</em> a type is checked.</p>\n", "title": "Seeking clarification on apparent contradictions regarding weakly typed languages", "answer_id": 9934914, "link": "http://stackoverflow.com/questions/9929585/seeking-clarification-on-apparent-contradictions-regarding-weakly-typed-language/9934914#9934914", "tags": ["c#", "java", "python", "perl", "weakly-typed"]}, {"body": "<p>As others have noted, the terms \"strongly typed\" and \"weakly typed\" have so many different meanings that there's no single answer to your question.  However, since you specifically mentioned Perl in your question, let me try to explain in what sense Perl is weakly typed.</p>\n\n<p>The point is that, in Perl, there is no such thing as an \"integer variable\", a \"float variable\", a \"string variable\" or a \"boolean variable\".  In fact, as far as the user can (usually) tell, there aren't even integer, float, string or boolean <em>values</em>: all you have are \"scalars\", which are all of these things at the same time.  So you can, for example, write:</p>\n\n<pre><code>$foo = \"123\" + \"456\";           # $foo = 579\n$bar = substr($foo, 2, 1);      # $bar = 9\n$bar .= \" lives\";               # $bar = \"9 lives\"\n$foo -= $bar;                   # $foo = 579 - 9 = 570\n</code></pre>\n\n<p>Of course, as you correctly note, all of this can be seen as just type coercion.  But the point is that, in Perl, types are <em>always</em> coerced.  In fact, it's quite hard for a user to tell what the internal \"type\" of a variable might be: at line 2 in my example above, asking whether the value of <code>$bar</code> is the string <code>\"9\"</code> or the number <code>9</code> is pretty much meaningless, since, as far as Perl is concerned, <em>those are the same thing</em>.  Indeed, it's even possible for a Perl scalar to internally have <em>both</em> a string and a numeric value at the same time, as is e.g. the case for <code>$foo</code> after line 2 above.</p>\n\n<p>The flip side of all this is that, since Perl variables are untyped (or, rather, don't expose their internal type to the user), operators cannot be overloaded to do different things for different types of arguments; you can't just say \"this operator will do X for numbers and Y for strings\", because the operator can't (won't) tell which kind of values its arguments are.</p>\n\n<p>Thus, for example, Perl has and needs both a numeric addition operator (<code>+</code>) and a string concatenation operator (<code>.</code>): as you saw above, it's perfectly fine to add strings (<code>\"1\" + \"2\" == \"3\"</code>) or to concatenate numbers (<code>1 . 2 == 12</code>).  Similarly, the numeric comparison operators <code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code> and <code>&lt;=&gt;</code> compare the numeric values of their arguments, while the string comparison operators <code>eq</code>, <code>ne</code>, <code>lt</code>, <code>gt</code>, <code>le</code>, <code>ge</code> and <code>cmp</code> compare them lexicographically as strings.  So <code>2 &lt; 10</code>, but <code>2 gt 10</code> (but <code>\"02\" lt 10</code>, while <code>\"02\" == 2</code>).  (Mind you, certain <em>other</em> languages, like JavaScript, try to accommodate Perl-like weak typing while <em>also</em> doing operator overloading.  This often leads to ugliness, like the loss of associativity for <code>+</code>.)</p>\n\n<p>(The fly in the ointment here is that, for historical reasons, Perl 5 does have a few corner cases, like the bitwise logical operators, whose behavior depends on the internal representation of their arguments.  Those are generally considered an annoying design flaw, since the internal representation can change for surprising reasons, and so predicting just what those operators do in a given situation can be tricky.)</p>\n\n<p>All that said, one could argue that Perl <em>does</em> have strong types; they're just not the kind of types you might expect.  Specifically, in addition to the \"scalar\" type discussed above, Perl also has two structured types: \"array\" and \"hash\".  Those are <em>very</em> distinct from scalars, to the point where Perl variables have different <a href=\"http://en.wikipedia.org/wiki/Sigil_%28computer_programming%29\">sigils</a> indicating their type (<code>$</code> for scalars, <code>@</code> for arrays, <code>%</code> for hashes)<sup>1</sup>.  There <em>are</em> coercion rules between these types, so you <em>can</em> write e.g. <code>%foo = @bar</code>, but many of them are quite lossy: for example, <code>$foo = @bar</code> assigns the <em>length</em> of the array  <code>@bar</code> to <code>$foo</code>, not its contents.  (Also, there are a few other strange types, like typeglobs and I/O handles, that you don't often see exposed.)</p>\n\n<p>Also, a slight chink in this nice design is the existence of reference types, which are a special kind of scalars (and which <em>can</em> be distinguished from normal scalars, using the <code>ref</code> operator).  It's possible to use references as normal scalars, but their string/numeric values are not particularly useful, and they tend to lose their special reference-ness if you modify them using normal scalar operations.  Also, any Perl variable<sup>2</sup> can be <code>bless</code>ed to a class, turning it into an object of that class; the OO class system in Perl is somewhat orthogonal to the primitive type (or typelessness) system described above, although it's also \"weak\" in the sense of following the <a href=\"http://en.wikipedia.org/wiki/Duck_typing\">duck typing</a> paradigm.  The general opinion is that, if you find yourself checking the class of an object in Perl, you're doing something wrong.</p>\n\n<hr>\n\n<p><sup>1</sup> Actually, the sigil denotes the type of the value being accessed, so that e.g. the first scalar in the array <code>@foo</code> is denoted <code>$foo[0]</code>.  See <a href=\"http://perldoc.perl.org/perlfaq4.html#What-is-the-difference-between-%24array%5b1%5d-and-%40array%5b1%5d%3f\">perlfaq4</a> for more details.</p>\n\n<p><sup>2</sup> Objects in Perl are (normally) accessed through references to them, but what actually gets <code>bless</code>ed is the (possibly anonymous) variable the reference points to.  However, the blessing is indeed a property of the variable, <em>not</em> of its value, so e.g. that assigning the actual blessed variable to another one just gives you a shallow, unblessed copy of it.  See <a href=\"http://perldoc.perl.org/perlobj.html#An-Object-is-Simply-a-Reference\">perlobj</a> for more details.</p>\n", "title": "Seeking clarification on apparent contradictions regarding weakly typed languages", "answer_id": 9939476, "link": "http://stackoverflow.com/questions/9929585/seeking-clarification-on-apparent-contradictions-regarding-weakly-typed-language/9939476#9939476", "tags": ["c#", "java", "python", "perl", "weakly-typed"]}, {"body": "<p>I would like to contribute to the discussion with my own research on the subject, as others comment and contribute I have been reading their answers and following their references and I have found interesting information. As suggested, it is probable that most of this would be better discussed in the Programmers forum, since it appears to be more theoretical than practical.</p>\n\n<p>From a theoretical standpoint, I think the article by Luca Cardelli and Peter Wegner named <a href=\"http://lucacardelli.name/Papers/OnUnderstanding.A4.pdf\" rel=\"nofollow\">On Understanding Types, Data Abstraction and Polymorphism</a> has one of the best arguments I have read.</p>\n\n<blockquote>\n  <p>A type may be viewed as a set of clothes (or a suit of armor) that\n  protects an underlying <em>untyped</em> representation from arbitrary or\n  unintended use. It provides a protective covering that hides the\n  underlying representation and constrains the way objects may interact\n  with other objects. In an untyped system untyped objects are <em>naked</em>\n  in that the underlying representation is exposed for all to see.\n  Violating the type system involves removing the protective set of\n  clothing and operating directly on the naked representation.</p>\n</blockquote>\n\n<p>This statement seems to suggest that weakly typing would let us access the inner structure of a type and manipulate it as if it was something else (another type). Perhaps what we could do with unsafe code (mentioned by Eric) or with c type-erased pointers mentioned by Konrad.</p>\n\n<p>The article continues...</p>\n\n<blockquote>\n  <p>Languages in which all expressions are <em>type-consistent</em> are called\n  strongly typed languages. If a language is strongly typed its compiler\n  can guarantee that the programs it accepts will execute without type\n  errors. In general, we should strive for strong typing, and adopt\n  static typing whenever possible. Note that every statically typed\n  language is strongly typed but the converse is not necessarily true.</p>\n</blockquote>\n\n<p>As such, strong typing means the absence of type errors, I can only assume that weak typing means the contrary: the likely presence of type errors. At runtime or compile time? Seems irrelevant here.</p>\n\n<p>Funny thing, as per this definition, a language with powerful type coercions like Perl would be considered strongly typed, because the system is not failing, but it is dealing with the types by coercing them into appropriate and well defined equivalences.</p>\n\n<p>On the other hand, could I say than the allowance of <code>ClassCastException</code> and <code>ArrayStoreException</code> (in Java) and <code>InvalidCastException</code>, <code>ArrayTypeMismatchException</code> (in C#) would indicate a level of weakly typing, at least at compile time? Eric's answer seems to agree with this.</p>\n\n<p>In a second article named <a href=\"http://www.lucacardelli.name/Papers/TypefulProg.pdf\" rel=\"nofollow\">Typeful Programming</a> provided in one of the references provided in one of the answers in this question, Luca Cardelli delves into the concept of type violations:</p>\n\n<blockquote>\n  <p>Most system programming languages allow arbitrary type violations,\n  some indiscriminately, some only in restricted parts of a program.\n  Operations that involve type violations are called unsound. Type\n  violations fall in several classes [among which we can mention]:</p>\n  \n  <p><strong>Basic-value coercions</strong>: These include conversions between integers, booleans, characters, sets, etc. There is no need for type violations\n  here, because built-in interfaces can be provided to carry out the\n  coercions in a type-sound way.</p>\n</blockquote>\n\n<p>As such, type coercions like those provided by operators could be considered type violations, but unless they break the consistency of the type system, we might say that they do not lead to a weakly typed system.</p>\n\n<p>Based on this neither Python, Perl, Java or C# are weakly typed.</p>\n\n<p>Cardelli mentions two type vilations that I very well consider cases of truly weak typing:</p>\n\n<blockquote>\n  <p><strong>Address arithmetic.</strong> If necessary, there should be a built-in (unsound) interface, providing the adequate operations on addresses\n  and type conversions. Various situations involve pointers into the\n  heap (very dangerous with relocating collectors), pointers to the\n  stack, pointers to static areas, and pointers into other address\n  spaces. Sometimes array indexing can replace address arithmetic.\n  <strong>Memory mapping.</strong> This involves looking at an area of memory as an unstructured array, although it contains structured data. This is\n  typical of memory allocators and collectors.</p>\n</blockquote>\n\n<p>This kind of things possible in languages like C (mentioned by Konrad) or through unsafe code in .Net (mentioned by Eric) would truly imply weakly typing.</p>\n\n<p>I believe the best answer so far is Eric's, because the definition of this concepts is very theoretical, and when it comes to a particular language, the interpretations of all these concepts may lead to different debatable conclusions.</p>\n", "title": "Seeking clarification on apparent contradictions regarding weakly typed languages", "answer_id": 9948748, "link": "http://stackoverflow.com/questions/9929585/seeking-clarification-on-apparent-contradictions-regarding-weakly-typed-language/9948748#9948748", "tags": ["c#", "java", "python", "perl", "weakly-typed"]}, {"body": "<p>As many others have expressed, the entire notion of \"strong\" vs \"weak\" typing is problematic.</p>\n\n<p>As a archetype, Smalltalk is very strongly typed -- it will <em>always</em> raise an exception if an operation between two objects is incompatible. However, I suspect few on this list would call Smalltalk a strongly-typed language, because it is <em>dynamically typed.</em></p>\n\n<p>I find the notion of \"static\" versus \"dynamic\" typing more useful than \"strong\" versus \"weak.\" A statically-typed language has all the types figured out at compile-time, and the programmer has to explicitly declare if otherwise.</p>\n\n<p>Contrast with a dynamically-typed language, where typing is performed at run-time. This is typically a requirement for polymorphic languages, so that decisions about whether an operation between two objects is legal does not have to be decided by the programmer in advance.</p>\n\n<p>In polymorphic, dynamically-typed languages (like Smalltalk and Ruby), it's more useful to think of a \"type\" as a \"conformance to protocol.\" If an object obeys a protocol the same way another object does -- even if the two objects do not share any inheritance or mixins or other voodoo -- they are considered the same \"type\" by the run-time system. More correctly, an object in such systems is autonomous, and can decide if it makes sense to respond to any particular message referring to any particular argument.</p>\n\n<p>Want an object that can make some meaningful response to the message \"+\" with an object argument that describes the colour blue? You can do that in dynamically-typed languages, but it is a pain in statically-typed languages.</p>\n", "title": "Seeking clarification on apparent contradictions regarding weakly typed languages", "answer_id": 10016885, "link": "http://stackoverflow.com/questions/9929585/seeking-clarification-on-apparent-contradictions-regarding-weakly-typed-language/10016885#10016885", "tags": ["c#", "java", "python", "perl", "weakly-typed"]}, {"body": "<p>Weak typing does indeed mean that a high percentage of types can be implicitly coerced, attempting to guess what the coder intended.</p>\n\n<p>Strong typing means that types are not coerced, or at least coerced less.</p>\n\n<p>Static typing means your variables' types are determined at compile time.</p>\n\n<p>Many people have recently been confusing \"manifestly typed\" with \"strongly typed\".  \"Manifestly typed\" means that you declare your variables' types explicitly.</p>\n\n<p>Python is mostly strongly typed, though you can use almost anything in a boolean context, and booleans can be used in an integer context, and you can use an integer in a float context.  It is not manifestly typed, because you don't need to declare your types (except for Cython, which isn't entirely python, albeit interesting).  It is also not statically typed.</p>\n\n<p>C and C++ are manifestly typed, statically typed, and somewhat strongly typed, because you declare your types, types are determined at compile time, and you can mix integers and pointers, or integers and doubles, or even cast a pointer to one type into a pointer to another type.</p>\n\n<p>Haskell is an interesting example, because it is not manifestly typed, but it's also statically and strongly typed.</p>\n", "title": "Seeking clarification on apparent contradictions regarding weakly typed languages", "answer_id": 12959790, "link": "http://stackoverflow.com/questions/9929585/seeking-clarification-on-apparent-contradictions-regarding-weakly-typed-language/12959790#12959790", "tags": ["c#", "java", "python", "perl", "weakly-typed"]}, {"body": "<p>The strong &lt;=> weak typing is not only about the continuum on how much or how little of the values are coerced automatically by the language for one datatype to another, but how strongly or weakly the actual <strong>values</strong> are typed. In Python and Java, and mostly in C#, the values have their types set in stone. In Perl, not so much - there are really only a handful of different valuetypes to store in a variable. </p>\n\n<p>Let's open the cases one by one.</p>\n\n<hr>\n\n<h2>Python</h2>\n\n<p>In Python example <code>1 + \"1\"</code>, <code>+</code> operator calls the <code>__add__</code> for type <code>int</code> giving it the string <code>\"1\"</code> as an argument - however, this results in NotImplemented:</p>\n\n<pre><code>&gt;&gt;&gt; (1).__add__('1')\nNotImplemented\n</code></pre>\n\n<p>Next, the interpreter tries the <code>__radd__</code> of str:</p>\n\n<pre><code>&gt;&gt;&gt; '1'.__radd__(1)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: 'str' object has no attribute '__radd__'\n</code></pre>\n\n<p>As it fails, the <code>+</code> operator fails with the  the result <code>TypeError: unsupported operand type(s) for +: 'int' and 'str'</code>. As such, the exception does not say much about strong typing, but the fact that the operator <code>+</code> <strong>does not coerce</strong> its arguments automatically to the same type, is a pointer to the fact that Python is not the most weakly typed language in the continuum.</p>\n\n<p>On the other hand, in Python <code>'a' * 5</code> <strong>is</strong> implemented:</p>\n\n<pre><code>&gt;&gt;&gt; 'a' * 5\n'aaaaa'\n</code></pre>\n\n<p>That is, </p>\n\n<pre><code>&gt;&gt;&gt; 'a'.__mul__(5)\n'aaaaa'\n</code></pre>\n\n<p>The fact that the operation is different requires some strong typing - however the opposite of <code>*</code> coercing the values to numbers before multiplying still would not necessarily make the values weakly typed.</p>\n\n<hr>\n\n<h2>Java</h2>\n\n<p>The Java example, <code>String result = \"1\" + 1;</code> works only because as a fact of convenience, the operator <code>+</code> is overloaded for strings. The Java <code>+</code> operator replaces the sequence with creating a <code>StringBuilder</code> (see <a href=\"http://stackoverflow.com/questions/47605/string-concatenation-concat-vs-operator\">this</a>):</p>\n\n<pre><code>String result = a + b;\n// becomes something like\nString result = new StringBuilder().append(a).append(b).toString()\n</code></pre>\n\n<p>This is rather an example of very static typing, without no actual coercion - <code>StringBuilder</code> has a method <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html#append%28java.lang.Object%29\" rel=\"nofollow\"><code>append(Object)</code></a> that is specifically used here. The documentation says the following:</p>\n\n<blockquote>\n  <p>Appends the string representation of the <code>Object</code> argument.</p>\n  \n  <p>The overall effect is exactly as if the argument were converted to a\n  string by the method <code>String.valueOf(Object)</code>, and the characters of\n  that string were then appended to this character sequence.</p>\n</blockquote>\n\n<p>Where <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#valueOf%28java.lang.Object%29\" rel=\"nofollow\"><code>String.valueOf</code></a> then </p>\n\n<blockquote>\n  <p>Returns the string representation of the Object argument.\n  [Returns] if the argument is <code>null</code>, then a string equal to <code>\"null\"</code>; otherwise, the value of <code>obj.toString()</code> is returned.</p>\n</blockquote>\n\n<p>Thus this is a case of absolutely no coercion by the language - delegating every concern to the objects itself.</p>\n\n<hr>\n\n<h2>C#</h2>\n\n<p>According to the <a href=\"http://stackoverflow.com/questions/10341188/string-concatenation-using-operator\">Jon Skeet answer here</a>, operator <code>+</code> is not even overloaded for the <code>string</code> class - akin to Java, this is just convenience generated by the compiler, thanks to both static and strong typing.</p>\n\n<hr>\n\n<h2>Perl</h2>\n\n<p>As the <a href=\"http://perldoc.perl.org/perldata.html\" rel=\"nofollow\">perldata</a> explains,</p>\n\n<blockquote>\n  <p>Perl has three built-in data types: scalars, arrays of scalars, and associative arrays of scalars, known as \"hashes\". A scalar is a single string (of any size, limited only by the available memory), number, or a reference to something (which will be discussed in perlref). Normal arrays are ordered lists of scalars indexed by number, starting with 0. Hashes are unordered collections of scalar values indexed by their associated string key.</p>\n</blockquote>\n\n<p>Perl however does not have a separate data type for numbers, booleans, strings, nulls, <code>undefined</code>s, references to other objects etc - it just has one type for these all, the scalar type; 0 is a scalar value as much as is \"0\". A scalar <em>variable</em> that was set as a string can really change into a number, and from there on behave differently from \"just a string\", <a href=\"http://stackoverflow.com/questions/12647/how-do-i-tell-if-a-variable-has-a-numeric-value-in-perl\">if it is accessed in a numerical context</a>. The scalar can hold anything in Perl, it is as much the object as it exists in the system. whereas in Python the names just refers to the objects, in Perl the scalar values in the names are changeable objects. Furthermore, the Object Oriented Type system is glued on top of this: there are just 3 datatypes in perl - scalars, lists and hashes. A user defined object in Perl is a reference (that is a pointer to any of the 3 previous) <code>bless</code>ed to a package - you can take any such value and bless it to any class at any instant you want. </p>\n\n<p>Perl even allows you to change the classes of values at whim - this is not possible in Python where to create a value of some class you need to explicitly construct the value belonging to that class with <code>object.__new__</code> or similar. In Python you cannot really change the essence of the object after the creation, in Perl you can do much anything:</p>\n\n<pre><code>package Foo;\npackage Bar;\n\nmy $val = 42;\n# $val is now a scalar value set from double\nbless \\$val, Foo;\n# all references to $val now belong to class Foo\nmy $obj = \\$val;\n# now $obj refers to the SV stored in $val\n# thus this prints: Foo=SCALAR(0x1c7d8c8)\nprint \\$val, \"\\n\"; \n# all references to $val now belong to class Bar\nbless \\$val, Bar;\n# thus this prints Bar=SCALAR(0x1c7d8c8)\nprint \\$val, \"\\n\";\n# we change the value stored in $val from number to a string\n$val = 'abc';\n# yet still the SV is blessed: Bar=SCALAR(0x1c7d8c8)\nprint \\$val, \"\\n\";\n# and on the course, the $obj now refers to a \"Bar\" even though\n# at the time of copying it did refer to a \"Foo\".\nprint $obj, \"\\n\";\n</code></pre>\n\n<p>thus the type identity is weakly bound to the variable, and it can be changed through any reference on the fly. In fact, if you do</p>\n\n<pre><code>my $another = $val;\n</code></pre>\n\n<p><code>\\$another</code> does not have the class identity, even though <code>\\$val</code> will still give the blessed reference.</p>\n\n<hr>\n\n<h2>TL;DR</h2>\n\n<p>There are much more about weak typing to Perl than just automatic coercions, and it is more about that the types of the values themselves are not set into stone, unlike the Python which is dynamically yet very strongly typed language. That python gives <code>TypeError</code> on <code>1 + \"1\"</code> is an indication that the language is strongly typed, even though the contrary one of doing something useful, as in Java or C# does not preclude them being strongly typed languages.</p>\n", "title": "Seeking clarification on apparent contradictions regarding weakly typed languages", "answer_id": 25231726, "link": "http://stackoverflow.com/questions/9929585/seeking-clarification-on-apparent-contradictions-regarding-weakly-typed-language/25231726#25231726", "tags": ["c#", "java", "python", "perl", "weakly-typed"]}], "question_id": 9929585}, {"body": "<p>I am getting this error</p>\n\n<blockquote>\n  <p>detailed message sun.security.validator.ValidatorException: PKIX path\n  building failed:<br>\n  sun.security.provider.certpath.SunCertPathBuilderException: unable to\n  find valid certification path  to requested target</p>\n  \n  <p>cause javax.net.ssl.SSLHandshakeException:\n  sun.security.validator.ValidatorException: PKIX path   building\n  failed: sun.security.provider.certpath.SunCertPathBuilderException:\n  unable to find valid certification path to requested target</p>\n</blockquote>\n\n<p>i am using tomcat 6 as webserver. i have two https webbapplication installed on different tomcat on differte port but on same machine. Say <code>App1(port 8443)</code> and \n <code>App2(port 443)</code>. <code>App1</code> connects to <code>App2</code> .When <code>App1</code> connects to <code>App2 i</code> get above error. I know this is very common error so came across many solutions on different\n forums and sites. I have below entry in <code>server.xml</code> of both tomcat i.e</p>\n\n<pre><code>keystoreFile=\"c:/.keystore\" \nkeystorePass=\"changeit\"\n</code></pre>\n\n<p>Every site says the same reason that certificate given by app2 is not in the trusted store of app1 jvm. This seems to be true also when i tired to hit the same\nURL in IE browser, it works(with warming, There is a problem with this web site's security certificate. here i say continue to this website) But when same url\nis hit by java client(in my case). So i get the above error. So to put it in trustore i tried  these tree options i.e</p>\n\n<p><strong>Option1</strong></p>\n\n<pre><code>System.setProperty(\"javax.net.ssl.trustStore\", \"C:/.keystore\");\nSystem.setProperty(\"javax.net.ssl.trustStorePassword\", \"changeit\");\n</code></pre>\n\n<p><strong>Option2</strong>\nSetting below in environment variable</p>\n\n<pre><code>CATALINA_OPTS -- param name\n-Djavax.net.ssl.trustStore=C:\\.keystore -Djavax.net.ssl.trustStorePassword=changeit ---param value\n</code></pre>\n\n<p><strong>Option3</strong>\nSetting below in environment variable</p>\n\n<pre><code>JAVA_OPTS -- param name\n-Djavax.net.ssl.trustStore=C:\\.keystore -Djavax.net.ssl.trustStorePassword=changeit ---param value\n</code></pre>\n\n<p><strong>But nothing worked</strong> .</p>\n\n<p><strong>What at last worked</strong>   is executing the java approach suggested in <a href=\"http://stackoverflow.com/questions/1828775/httpclient-and-ssl\">How to handle invalid SSL certificates with Apache HttpClient?</a> by Pascal Thivent i.e \nexecuting the program InstallCert. </p>\n\n<p><strong>But this approach is fine for devbox setup but i can not use it at production environment.</strong> </p>\n\n<p>I am wondering\nwhy three approaches mentioned above did not work when  i have mentioned same values in <code>server.xml</code> of <code>app2</code> server and same values in truststore by setting</p>\n\n<p><code>System.setProperty(\"javax.net.ssl.trustStore\", \"C:/.keystore\") and System.setProperty(\"javax.net.ssl.trustStorePassword\", \"changeit\");</code></p>\n\n<p>in <code>app1</code> program.</p>\n\n<p>For more information this is how i am making the connection</p>\n\n<pre><code>URL url = new URL(urlStr);\n\nURLConnection conn = url.openConnection();\n\nif (conn instanceof HttpsURLConnection) {\n\n  HttpsURLConnection conn1 = (HttpsURLConnection) url.openConnection();\n\n  conn1.setHostnameVerifier(new HostnameVerifier() {\n    public boolean verify(String hostname, SSLSession session) {\n      return true;\n    }\n  });\n\n  reply.load(conn1.getInputStream());\n</code></pre>\n", "tags": ["java", "ssl", "https"], "title": "Resolving javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed Error?", "answer_count": 6, "creation_date": 1331216234, "score": 160, "link": "http://stackoverflow.com/questions/9619030/resolving-javax-net-ssl-sslhandshakeexception-sun-security-validator-validatore", "answers": [{"body": "<p>You need to add the certificate for <strong>App2</strong> to the keystore file of the used JVM located at <code>%JAVA_HOME%\\lib\\security\\cacerts</code>.</p>\n\n<p>First you can check if your certificate is already in the keystore by running the following command:\n<code>keytool -list -keystore \"%JAVA_HOME%/jre/lib/security/cacerts\"</code> (you don't need to provide a password)</p>\n\n<p>If your certificate is missing you can get it by downloading it with your browser and add it to the keystore with the following command:</p>\n\n<p><code>keytool -import -noprompt -trustcacerts -alias &lt;AliasName&gt; -file   &lt;certificate&gt; -keystore &lt;KeystoreFile&gt; -storepass &lt;Password&gt;</code></p>\n\n<p>Afer import you can run the first command again to check if your certificate was added.</p>\n\n<p>Sun/Oracle information can be found <a href=\"http://docs.oracle.com/javase/tutorial/security/toolsign/rstep2.html\">here</a>.</p>\n\n<p>Hope this helped! Have Fun!</p>\n", "title": "Resolving javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed Error?", "answer_id": 9619478, "link": "http://stackoverflow.com/questions/9619030/resolving-javax-net-ssl-sslhandshakeexception-sun-security-validator-validatore/9619478#9619478", "tags": ["java", "ssl", "https"]}, {"body": "<blockquote>\n  <p>javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</p>\n</blockquote>\n\n<p>\u2022 When I got the error, I tried to Google out the meaning of the expression and I found, this issue occurs when a server changes their HTTPS SSL certificate, and our older version of java doesn\u2019t recognize the root certificate authority (CA).</p>\n\n<p>\u2022 If you can access the HTTPS URL in your browser then it is possible to update Java to recognize the root CA.</p>\n\n<p>\u2022 In your browser, go to the HTTPS URL that Java could not access. Click on the HTTPS certificate chain (there is lock icon in the Internet Explorer), click on the lock to view the certificate.</p>\n\n<p>\u2022 Go to \u201cDetails\u201d of the certificate and \u201cCopy to file\u201d. Copy it in <strong>Base64 (.cer)</strong> format. It will be saved on your Desktop.</p>\n\n<p>\u2022 Install the certificate ignoring all the alerts.</p>\n\n<p>\u2022 This is how I gathered the certificate information of the URL that I was trying to access.</p>\n\n<p>Now I had to make my java version to know about the certificate so that further it doesn\u2019t refuse to recognize the URL. In this respect I must mention that I googled out that root certificate information stays by default in JDK\u2019s  <strong>\\jre\\lib\\security</strong> location, and the default password to access is: <strong>changeit.</strong></p>\n\n<p>To view the cacerts information the following are the procedures to follow:</p>\n\n<p>\u2022 Click on Start Button-->Run</p>\n\n<p>\u2022 Type cmd. The command prompt opens (you may need to open it as administrator).</p>\n\n<p>\u2022 Go to your <code>Java/jreX/bin</code> directory</p>\n\n<p>\u2022 Type the following</p>\n\n<blockquote>\n  <p>keytool -list -keystore D:\\Java\\jdk1.5.0_12\\jre\\lib\\security\\cacerts</p>\n</blockquote>\n\n<p>It gives the list of the current certificates contained within the keystore. It looks something like this:</p>\n\n<blockquote>\n  <p>C:\\Documents and Settings\\NeelanjanaG>keytool -list -keystore D:\\Java\\jdk1.5.0_12\\jre\\lib\\security\\cacerts</p>\n  \n  <p>Enter keystore password:  changeit</p>\n  \n  <p>Keystore type: jks</p>\n  \n  <p>Keystore provider: SUN</p>\n  \n  <p>Your keystore contains 44 entries</p>\n  \n  <p>verisignclass3g2ca, Mar 26, 2004, trustedCertEntry,</p>\n  \n  <p>Certificate fingerprint (MD5): A2:33:9B:4C:74:78:73:D4:6C:E7:C1:F3:8D:CB:5C:E9</p>\n  \n  <p>entrustclientca, Jan 9, 2003, trustedCertEntry,</p>\n  \n  <p>Certificate fingerprint (MD5): 0C:41:2F:13:5B:A0:54:F5:96:66:2D:7E:CD:0E:03:F4</p>\n  \n  <p>thawtepersonalbasicca, Feb 13, 1999, trustedCertEntry,</p>\n  \n  <p>Certificate fingerprint (MD5): E6:0B:D2:C9:CA:2D:88:DB:1A:71:0E:4B:78:EB:02:41</p>\n  \n  <p>addtrustclass1ca, May 1, 2006, trustedCertEntry,</p>\n  \n  <p>Certificate fingerprint (MD5): 1E:42:95:02:33:92:6B:B9:5F:C0:7F:DA:D6:B2:4B:FC</p>\n  \n  <p>verisignclass2g3ca, Mar 26, 2004, trustedCertEntry,</p>\n  \n  <p>Certificate fingerprint (MD5): F8:BE:C4:63:22:C9:A8:46:74:8B:B8:1D:1E:4A:2B:F6</p>\n</blockquote>\n\n<p>\u2022 Now I had to include the previously installed certificate into the cacerts.</p>\n\n<p>\u2022 For this the following is the procedure:</p>\n\n<blockquote>\n  <p>keytool \u2013import \u2013noprompt \u2013trustcacerts \u2013alias ALIASNAME -file FILENAME_OF_THE_INSTALLED_CERTIFICATE -keystore PATH_TO_CACERTS_FILE -storepass PASSWORD</p>\n</blockquote>\n\n<p>If you are using Java 7:</p>\n\n<blockquote>\n  <p>keytool \u2013importcert \u2013trustcacerts \u2013alias ALIASNAME -file PATH_TO_FILENAME_OF_THE_INSTALLED_CERTIFICATE -keystore PATH_TO_CACERTS_FILE -storepass changeit</p>\n</blockquote>\n\n<p>\u2022 It will then add the certificate information into the cacert file.</p>\n\n<p>It is the solution I found for the Exception mentioned above!!</p>\n", "title": "Resolving javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed Error?", "answer_id": 12524960, "link": "http://stackoverflow.com/questions/9619030/resolving-javax-net-ssl-sslhandshakeexception-sun-security-validator-validatore/12524960#12524960", "tags": ["java", "ssl", "https"]}, {"body": "<p>i wrote a small win32 (WinXP 32bit testet) stupid cmd (commandline) script which looks for all java versions in program files and adds a cert to them. \nThe Password needs to be the default \"changeit\" or change it yourself in the script :-)</p>\n\n<pre><code>@echo off\n\nfor /F  %%d in ('dir /B %ProgramFiles%\\java') do (\n    %ProgramFiles%\\Java\\%%d\\bin\\keytool.exe -import -noprompt -trustcacerts -file some-exported-cert-saved-as.crt -keystore %ProgramFiles%\\Java\\%%d\\lib\\security\\cacerts -storepass changeit\n)\n\npause\n</code></pre>\n", "title": "Resolving javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed Error?", "answer_id": 13747000, "link": "http://stackoverflow.com/questions/9619030/resolving-javax-net-ssl-sslhandshakeexception-sun-security-validator-validatore/13747000#13747000", "tags": ["java", "ssl", "https"]}, {"body": "<p>My cacerts file was totally empty.  I solved this by copying the cacerts file off my windows machine (that's using Oracle Java 7) and scp'd it to my Linux box (OpenJDK).  </p>\n\n<pre><code>cd %JAVA_HOME%/jre/lib/security/\nscp cacerts mylinuxmachin:/tmp\n</code></pre>\n\n<p>and then on the linux machine</p>\n\n<pre><code>cp /tmp/cacerts /etc/ssl/certs/java/cacerts\n</code></pre>\n\n<p>It's worked great so far.</p>\n", "title": "Resolving javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed Error?", "answer_id": 17890083, "link": "http://stackoverflow.com/questions/9619030/resolving-javax-net-ssl-sslhandshakeexception-sun-security-validator-validatore/17890083#17890083", "tags": ["java", "ssl", "https"]}, {"body": "<p>For Tomcat running on Ubuntu server, to find out which Java is being used, use \"ps -ef | grep tomcat\" command:</p>\n\n<p>Sample:</p>\n\n<pre><code>/home/mcp01$ **ps -ef |grep tomcat**\ntomcat7  28477     1  0 10:59 ?        00:00:18 **/usr/local/java/jdk1.7.0_15/bin/java** -Djava.util.logging.config.file=/var/lib/tomcat7/conf/logging.properties -Djava.awt.headless=true -Xmx512m -XX:+UseConcMarkSweepGC -Djava.net.preferIPv4Stack=true -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.endorsed.dirs=/usr/share/tomcat7/endorsed -classpath /usr/share/tomcat7/bin/bootstrap.jar:/usr/share/tomcat7/bin/tomcat-juli.jar -Dcatalina.base=/var/lib/tomcat7 -Dcatalina.home=/usr/share/tomcat7 -Djava.io.tmpdir=/tmp/tomcat7-tomcat7-tmp org.apache.catalina.startup.Bootstrap start\n1005     28567 28131  0 11:34 pts/1    00:00:00 grep --color=auto tomcat\n</code></pre>\n\n<p>Then, we can go in to: <strong>cd /usr/local/java/jdk1.7.0_15/jre/lib/security</strong></p>\n\n<p>Default <strong>cacerts</strong> file is located in here. Insert the untrusted certificate into it.</p>\n", "title": "Resolving javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed Error?", "answer_id": 24132430, "link": "http://stackoverflow.com/questions/9619030/resolving-javax-net-ssl-sslhandshakeexception-sun-security-validator-validatore/24132430#24132430", "tags": ["java", "ssl", "https"]}, {"body": "<h1>How to work-it in Tomcat 7</h1>\n\n<p>I wanted to support a self signed certificate in a Tomcat App but <strong>the following snippet failed to work</strong></p>\n\n<pre><code>import java.io.DataOutputStream;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\n\npublic class HTTPSPlayground {\n    public static void main(String[] args) throws Exception {\n\n        URL url = new URL(\"https:// ... .com\");\n        HttpURLConnection httpURLConnection = (HttpURLConnection) url.openConnection();\n\n        httpURLConnection.setRequestMethod(\"POST\");\n        httpURLConnection.setRequestProperty(\"Accept-Language\", \"en-US,en;q=0.5\");\n        httpURLConnection.setDoOutput(true);\n        DataOutputStream wr = new DataOutputStream(httpURLConnection.getOutputStream());\n\n        String serializedMessage = \"{}\";\n        wr.writeBytes(serializedMessage);\n        wr.flush();\n        wr.close();\n\n        int responseCode = httpURLConnection.getResponseCode();\n        System.out.println(responseCode);\n    }\n}\n</code></pre>\n\n<p>this is what solved my issue:</p>\n\n<h2><strong>1) Download the <code>.crt</code> file</strong></h2>\n\n<pre><code>echo -n | openssl s_client -connect &lt;your domain&gt;:443 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' &gt; ~/&lt;your domain&gt;.crt\n</code></pre>\n\n<ul>\n<li>replace <code>&lt;your domain&gt;</code> with your domain (e.g. <code>jossef.com</code>)</li>\n</ul>\n\n<h2>2) Apply the <code>.crt</code> file in Java's <code>cacerts</code> certificate store</h2>\n\n<pre><code>keytool -import -v -trustcacerts -alias &lt;your domain&gt; -file ~/&lt;your domain&gt;.crt -keystore &lt;JAVA HOME&gt;/jre/lib/security/cacerts -keypass changeit -storepass changeit\n</code></pre>\n\n<ul>\n<li>replace <code>&lt;your domain&gt;</code> with your domain (e.g. <code>jossef.com</code>)</li>\n<li>replace <code>&lt;JAVA HOME&gt;</code> with your java home directory</li>\n</ul>\n\n<h2>3) Hack it</h2>\n\n<p>Even though iv'e installed my certificate in <code>Java</code>'s default certificate stores, <strong>Tomcat ignores that</strong> (seems like it's not configured to use Java's default certificate stores). </p>\n\n<p>To hack this, add the following somewhere in your code:</p>\n\n<pre><code>String certificatesTrustStorePath = \"&lt;JAVA HOME&gt;/jre/lib/security/cacerts\";\nSystem.setProperty(\"javax.net.ssl.trustStore\", certificatesTrustStorePath);\n\n// ...\n</code></pre>\n", "title": "Resolving javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed Error?", "answer_id": 32074827, "link": "http://stackoverflow.com/questions/9619030/resolving-javax-net-ssl-sslhandshakeexception-sun-security-validator-validatore/32074827#32074827", "tags": ["java", "ssl", "https"]}], "question_id": 9619030}, {"body": "<p>Any way to cast <code>java.lang.Double</code> to <code>java.lang.Integer</code>? </p>\n\n<p>It throws an exception </p>\n\n<blockquote>\n  <p>\"java.lang.ClassCastException: java.lang.Double incompatible with java.lang.Integer\"</p>\n</blockquote>\n", "tags": ["java", "casting"], "title": "Cast Double to Integer in Java", "answer_count": 15, "creation_date": 1328125998, "score": 159, "link": "http://stackoverflow.com/questions/9102318/cast-double-to-integer-in-java", "answers": [{"body": "<p>A <code>Double</code> is not an <code>Integer</code>, so the cast won't work.  Note the difference between the <code>Double</code> <strong>class</strong> and the <code>double</code> <strong>primitive</strong>.  Also note that a <code>Double</code> is a <code>Number</code>, <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/Number.html#intValue%28%29\">so it has the method</a> <code>intValue</code>, when you can use to get an primitive <code>int</code>.</p>\n", "title": "Cast Double to Integer in Java", "answer_id": 9102330, "link": "http://stackoverflow.com/questions/9102318/cast-double-to-integer-in-java/9102330#9102330", "tags": ["java", "casting"]}, {"body": "<p>You need to explicitly get the int value using method intValue() like this:</p>\n\n<pre><code>Double d = 5.25;\nInteger i = d.intValue(); // i becomes 5\n</code></pre>\n\n<p>Or </p>\n\n<pre><code>double d = 5.25;\nint i = (int) d;\n</code></pre>\n", "title": "Cast Double to Integer in Java", "answer_id": 9102359, "link": "http://stackoverflow.com/questions/9102318/cast-double-to-integer-in-java/9102359#9102359", "tags": ["java", "casting"]}, {"body": "<p>Double and Integer are wrapper classes for java primitives for double and int respectively.  You can cast between those, but you will lose the floating point. ie. 5.4 casted to an int will b 5. if you cast it back, it will be 5.0. </p>\n", "title": "Cast Double to Integer in Java", "answer_id": 9102376, "link": "http://stackoverflow.com/questions/9102318/cast-double-to-integer-in-java/9102376#9102376", "tags": ["java", "casting"]}, {"body": "<p>Like this:  </p>\n\n<pre><code>Double foo = 123.456;\nInteger bar = foo.intValue();\n</code></pre>\n", "title": "Cast Double to Integer in Java", "answer_id": 9102414, "link": "http://stackoverflow.com/questions/9102318/cast-double-to-integer-in-java/9102414#9102414", "tags": ["java", "casting"]}, {"body": "<pre><code>double a = 13.34;\nint b = (int) a;\n\nSystem.out.println(b); //prints 13\n</code></pre>\n", "title": "Cast Double to Integer in Java", "answer_id": 15338784, "link": "http://stackoverflow.com/questions/9102318/cast-double-to-integer-in-java/15338784#15338784", "tags": ["java", "casting"]}, {"body": "<p>I see three possibilities. The first two cut off the digits, the last one rounds to the nearest Integer.</p>\n\n<pre><code>double d = 9.5;\nint i = (int)d;\n//i = 9\n\nDouble D = 9.5;\nint i = Integer.valueOf(D.intValue());\n//i = 9\n\ndouble d = 9.5;\nLong L = Math.round(d);\nint i = Integer.valueOf(L.intValue());\n//i = 10\n</code></pre>\n", "title": "Cast Double to Integer in Java", "answer_id": 19998172, "link": "http://stackoverflow.com/questions/9102318/cast-double-to-integer-in-java/19998172#19998172", "tags": ["java", "casting"]}, {"body": "<pre><code>Double d = 100.00;\nInteger i = d.intValue();\n</code></pre>\n\n<p>One should also add that it works with autoboxing</p>\n\n<p>Otherwise, you get an int (prmitive) and then can get Integer from there</p>\n\n<pre><code>Integer i = new Integer(d.intValue());\n</code></pre>\n", "title": "Cast Double to Integer in Java", "answer_id": 20373065, "link": "http://stackoverflow.com/questions/9102318/cast-double-to-integer-in-java/20373065#20373065", "tags": ["java", "casting"]}, {"body": "<p>Indeed, the simplest way is to use <code>intValue()</code>. However, this merely returns the integer part; it does not do any rounding. If you want the Integer <em>nearest</em> to the Double value, you'll need to do this:</p>\n\n<pre><code>Integer integer = Integer.valueOf((int) Math.round(myDouble)));\n</code></pre>\n\n<p>And don't forget the null case:</p>\n\n<pre><code>Integer integer = myDouble == null ? null : Integer.valueOf((int) Math.round(myDouble)));\n</code></pre>\n\n<p><code>Math.round()</code> handles odd duck cases, like infinity and NaN, with relative grace.</p>\n", "title": "Cast Double to Integer in Java", "answer_id": 24816336, "link": "http://stackoverflow.com/questions/9102318/cast-double-to-integer-in-java/24816336#24816336", "tags": ["java", "casting"]}, {"body": "<p>I think it's impossible to understand the other answers without covering the pitfalls and reasoning behind it.</p>\n\n<p>You cannot directly cast an Integer directly to a Double object. Also Double and Integer are immutable objects so you cannot modify them in any way. However each numeric class has a primitive alternative (Double vs double, Integer vs int, ...). </p>\n\n<p><strong>So the strategy should be</strong>:</p>\n\n<ol>\n<li>Convert the Double object to a primitive double. (= \"unboxing\")</li>\n<li>Convert the primitive double to a primitive int. (= \"casting\")</li>\n<li>Convert the primitive integer back to an Integer object. (= \"boxing\")</li>\n</ol>\n\n<p><strong>In Java:</strong></p>\n\n<pre><code>// starting point\nDouble myDouble = Double.valueOf(10.0);\n\n// step 1: unboxing\ndouble dbl = myDouble.doubleValue();\n\n// step 2: casting\nint intgr = (int) dbl;\n\n// step 3: boxing\nInteger val = Integer.valueOf(intgr);\n</code></pre>\n\n<p>Actually there is a shortcut. You can unbox immediately from a Double straight to a primitive int. That way, you can skip step 2 entirely.</p>\n\n<pre><code>Double myDouble = Double.valueOf(10.0);\nInteger val = Integer.valueOf(myDouble.intValue()); // the simple way\n</code></pre>\n\n<p>However, there are a lot of things that are not covered in the code above.\nThe code-above is <strong>not null-safe.</strong></p>\n\n<pre><code>Double myDouble = null;\nInteger val = Integer.valueOf(myDouble.intValue()); // will throw a NullPointerException\n\n// a null-safe solution:\nInteger val = (myDouble == null)? null : Integer.valueOf(myDouble.intValue());\n</code></pre>\n\n<p>Now it works fine for most values. However Integers have a very small range (min/max value) compared to a Double. On top of that, Doubles can also hold \"special values\", that Integers cannot:</p>\n\n<ul>\n<li>1/0 = +infinity </li>\n<li>-1/0 = -infinity</li>\n<li>0/0 = undefined (NaN)</li>\n</ul>\n\n<p>So, depending on the application, you may want to add some filtering to avoid nasty Exceptions.</p>\n\n<p>Then, the next shortcoming is the rounding strategy. By default Java will always round down. Rounding down makes perfect sense in all programming languages. Basically Java is just throwing away some of the bytes. In financial applications you will surely want to use economical rounding (e.g.:  <code>round(0.5) = 1</code> and <code>round(0.4) = 0</code>).</p>\n\n<pre><code>// null-safe and with better rounding\nlong rounded = (myDouble == null)? 0L: Math.round(myDouble.doubleValue());\nInteger val = Integer.valueOf(rounded);\n</code></pre>\n\n<p>You could be tempted to use auto-(un)boxing in this, but I wouldn't. If you're already stuck now, then the next things will not be that obvious neither. If you don't understand the inner workings of auto-(un)boxing then please don't use it.</p>\n\n<pre><code>Integer val1 = 10; // works\nInteger val2 = 10.0; // doesn't work\n\nDouble val3 = 10; // doesn't work\nDouble val4 = 10.0; // works\n\nDouble val5 = null; \ndouble val6 = val5; // doesn't work\n</code></pre>\n\n<p>I guess the following shouldn't be a surprise. But if it is, then you may want to read some article about casting in Java.</p>\n\n<pre><code>double val7 = (double) 10; // works\nDouble val8 = (Double) Integer.valueOf(10); // doesn't work\nInteger val9 = (Integer) 9; // pure nonsense\n</code></pre>\n\n<p>Also, don't be tempted to use <code>new Integer()</code> constructor (as some other answers propose). The <code>valueOf()</code> methods are better because they use caching. It's a good habit to use these methods, because from time to time they will save you some memory.</p>\n\n<pre><code>long rounded = (myDouble == null)? 0L: Math.round(myDouble.doubleValue());\nInteger val = new Integer(rounded); // waste of memory\n</code></pre>\n", "title": "Cast Double to Integer in Java", "answer_id": 26589526, "link": "http://stackoverflow.com/questions/9102318/cast-double-to-integer-in-java/26589526#26589526", "tags": ["java", "casting"]}, {"body": "<p>Simply do this way..</p>\n\n<pre><code>Double d = 13.5578;\nint i = d.intValue();\nSystem.out.println(i);\n</code></pre>\n", "title": "Cast Double to Integer in Java", "answer_id": 28793610, "link": "http://stackoverflow.com/questions/9102318/cast-double-to-integer-in-java/28793610#28793610", "tags": ["java", "casting"]}, {"body": "<p>Use <code>doubleNumber.intValue();</code> method.</p>\n", "title": "Cast Double to Integer in Java", "answer_id": 28793626, "link": "http://stackoverflow.com/questions/9102318/cast-double-to-integer-in-java/28793626#28793626", "tags": ["java", "casting"]}, {"body": "<p>Simply use the intValue method of Double</p>\n\n<pre><code>Double initialValue = 7.12;\nint finalValue = initialValue.intValue();\n</code></pre>\n", "title": "Cast Double to Integer in Java", "answer_id": 30797425, "link": "http://stackoverflow.com/questions/9102318/cast-double-to-integer-in-java/30797425#30797425", "tags": ["java", "casting"]}, {"body": "<p>You can do that by using \"Narrowing or Explicit type conversion\"\ndouble->long->int\nHope it will work.</p>\n\n<pre><code>double d = 100.04;  \n  long l = (long)d;  //explicit type casting required  \n  int i = (int)l;   //explicit type casting required  \n</code></pre>\n\n<p>PS: It will give 0 is double has all the decimal values and nothing on the left side. In case of 0.58. It will narrow it down to 0. But for others it will do the magic.</p>\n", "title": "Cast Double to Integer in Java", "answer_id": 32517864, "link": "http://stackoverflow.com/questions/9102318/cast-double-to-integer-in-java/32517864#32517864", "tags": ["java", "casting"]}, {"body": "<pre><code>double doublevalue=12d;\nint x=doublevalue.intValue();\n</code></pre>\n", "title": "Cast Double to Integer in Java", "answer_id": 36102747, "link": "http://stackoverflow.com/questions/9102318/cast-double-to-integer-in-java/36102747#36102747", "tags": ["java", "casting"]}, {"body": "<p>Call <code>intValue()</code> on your <code>Double</code> object.</p>\n", "title": "Cast Double to Integer in Java", "answer_id": 38687915, "link": "http://stackoverflow.com/questions/9102318/cast-double-to-integer-in-java/38687915#38687915", "tags": ["java", "casting"]}], "question_id": 9102318}, {"body": "<p>I have been reading some articles on memory leaks in Android and watched this interesting video from Google I/O <a href=\"http://www.youtube.com/watch?v=_CruQY55HOk\">on the subject</a>.</p>\n\n<p>Still, I don't fully understand the concept, and especially when it is safe or dangerous to user <strong>inner classes inside an Activity</strong>.</p>\n\n<p>This is what I understood:</p>\n\n<p>A memory leak will occur if an instance of an inner class survives longer than its outer class (an Activity).\n-> <strong>In which situations can this happen?</strong> </p>\n\n<p>In this example, I suppose there is no risk of leak, because there is no way the anonymous class extending <code>OnClickListener</code> will live longer than the activity, right?</p>\n\n<pre><code>    final Dialog dialog = new Dialog(this);\n    dialog.setContentView(R.layout.dialog_generic);\n    Button okButton = (Button) dialog.findViewById(R.id.dialog_button_ok);\n    TextView titleTv = (TextView) dialog.findViewById(R.id.dialog_generic_title);\n\n    // *** Handle button click\n    okButton.setOnClickListener(new OnClickListener() {\n        public void onClick(View v) {\n            dialog.dismiss();\n        }\n    });\n\n    titleTv.setText(\"dialog title\");\n    dialog.show();\n</code></pre>\n\n<p>Now, is this example dangerous, and why?</p>\n\n<pre><code>// We are still inside an Activity\n_handlerToDelayDroidMove = new Handler();\n_handlerToDelayDroidMove.postDelayed(_droidPlayRunnable, 10000);\n\nprivate Runnable _droidPlayRunnable = new Runnable() { \n    public void run() {\n        _someFieldOfTheActivity.performLongCalculation();\n    }\n};\n</code></pre>\n\n<p>I have a doubt regarding the fact that understanding this topic has to do with understanding in detail what is kept when an activity is destroyed and re-created.</p>\n\n<p>Is it?</p>\n\n<p>Let say I just changed the orientation of the device (which is the most common cause of leaks). When <code>super.onCreate(savedInstanceState)</code> will be called in my <code>onCreate()</code>, will this restore the values of the fields (as they were before orientation change)? Will this also restore the states of inner classes?</p>\n\n<p>I realize my question is not very precise, but I'd really appreciate any explanation that could make things clearer.</p>\n", "tags": ["java", "android", "memory-leaks", "inner-classes"], "title": "When exactly is it leak safe to use (anonymous) inner classes?", "answer_count": 1, "creation_date": 1338661582, "score": 156, "link": "http://stackoverflow.com/questions/10864853/when-exactly-is-it-leak-safe-to-use-anonymous-inner-classes", "answers": [{"body": "<p>Sebastian,</p>\n\n<p>What you are asking is a pretty tough question. While you may think it is just one question, you are actually asking several questions at once. I'll do my best with the knowledge that I have to cover it and, hopefully, some others will join in to cover what I may miss.</p>\n\n<p><strong>Inner Classes: Introduction</strong></p>\n\n<p>As I'm not sure how comfortable you are with OOP in Java, this will hit a couple of basics. An inner class is when a class definition is contained within another class. There are basically two types: static and non-static. The real difference between these are:</p>\n\n<ul>\n<li>Static inner classes: \n<ul>\n<li>Are considered \"top-level\". </li>\n<li>Do not require an instance of the containing class to be constructed.</li>\n<li>May not reference the containing class members without an explicit reference.</li>\n<li>Have their own lifetime.</li>\n</ul></li>\n<li>Non-Static inner classes:\n<ul>\n<li>Always require an instance of the containing class to be constructed.</li>\n<li>Automatically have an implicit reference to the containing instance.</li>\n<li>May access the container's class members without the reference.</li>\n<li>Lifetime is <em>supposed</em> to be no longer than that of the container.</li>\n</ul></li>\n</ul>\n\n<p><strong>Garbage Collection and Non-Static Inner Classes</strong></p>\n\n<p>Garbage Collection is automatic but tries to remove objects based on whether it thinks they are being used. The Garbage Collector is pretty smart, but not flawless. It can only determine if something is being used by whether or not there is an active reference to the object. </p>\n\n<p>The real issue here is when a Non-Static Inner Class has been kept alive longer than its container. This is because of the implicit reference to the containing class. The only way this can occur is if an object outside of the containing class keeps a reference to the inner object, without regard to the containing object. </p>\n\n<p>This can lead to a situation where the inner object is alive (via reference) but the references to the containing object has already been removed from all other objects. The inner object is, therefore, keeping the containing object alive because it will <em>always</em> have a reference to it. The problem with this is that unless it is programmed, there is no way to get back to the containing object to check if it is even alive. </p>\n\n<p>The most important aspect to this realization is that it makes no difference whether it is in an Activity or is a drawable. You will <strong><em>always</em></strong> have to be methodical when using non-static inner classes and make sure that they never outlive objects of the container. Luckily, if it isn't a core object of your code, the leaks may be small in comparison. Unfortunately, these are some of the hardest leaks to find, because they are likely to go unnoticed until many of them have leaked.</p>\n\n<p><strong>Solutions: Non-static Inner Classes</strong></p>\n\n<ul>\n<li>Gain temporary references from the containing object. </li>\n<li>Allow the containing object to be the only one to keep long-lived references to the inner objects. </li>\n<li>Use established patterns such as the Factory. </li>\n<li>If the inner class does not require access to the containing class members, consider turning it into a static class.</li>\n<li>Use with caution, regardless of whether it is in an Activity or not.</li>\n</ul>\n\n<p><strong>Activities and Views: Introduction</strong></p>\n\n<p>Activities contain a lot of information to be able to run and display. Activities are defined by the characteristic that they must have a View. They also have certain automatic handlers. Whether you specify it or not, the Activity has an implicit reference to the View it contains. </p>\n\n<p>In order for a View to be created, it must know where to create it and whether it has any children so that it can display. This means that every View has an reference to the Activity (via <code>getContext()</code>). Moreover, every View keeps references to its children (i.e. <code>getChildAt()</code>). Finally, each View keeps a reference to the rendered Bitmap that represents its display.</p>\n\n<p>Whenever you have a reference to an Activity (or Activity Context), this means that you can follow the ENTIRE chain down the layout hierarchy. This is why memory leaks regarding Activities or Views are such a huge deal. It can be a <strong>ton</strong> of memory being leaked all at once.</p>\n\n<p><strong>Activities, Views and Non-static Inner Classes</strong></p>\n\n<p>Given the information above about Inner Classes, these are the most common memory leaks, but also the most commonly avoided. While it is desirable to have an inner class have direct access to an Activities class members, many are willing to just make them static to avoid potential issues. The problem with Activities and Views goes much deeper than that.</p>\n\n<p><strong>Leaked Activities, Views and Activity Contexts</strong></p>\n\n<p>It all comes down to the Context and the LifeCycle. There are certain events (such as orientation) that will kill an Activity Context. Since so many classes and methods require a Context, developers will sometimes try to save some code by grabbing a reference to a Context and holding onto it. It just so happens that many of the objects we have to create to run our Activity have to exist outside of the Activity LifeCycle in order to allow the Activity to do what it needs to do. If any of your objects happen to have a reference to an Activity, its Context, or any of its Views when it is destroyed, you have just leaked that Activity and its entire View tree.</p>\n\n<p><strong>Solutions: Activities and Views</strong></p>\n\n<ul>\n<li>Avoid, at all costs, making a Static reference to a View or Activity. </li>\n<li>All references to Activity Contexts should be short lived (the duration of the function)</li>\n<li>If you need a long-lived Context, use the Application Context (<code>getBaseContext()</code> or <code>getApplicationContext()</code>). These do not keep references implicitly.</li>\n<li>Alternatively, you may limit the destruction of an Activity by overriding Configuration Changes. However, this does not stop other potential events from destroying the Activity. While you <em>can</em> do this, you may still want to refer to the above practices.</li>\n</ul>\n\n<p><strong>Runnables: Introduction</strong></p>\n\n<p>Runnables are actually not that bad. I mean, they <em>could</em> be, but really we've already hit most of the danger zones. A Runnable is an asynchronous operation that performs a task independant from the thread it was created on. Most runnables are instantiated from the UI thread. In essence, using a Runnable is creating another thread, just slightly more managed. If you class a Runnable like a standard class and follow the guidelines above, you should run into few problem. The reality is that many developers do not do this.</p>\n\n<p>Out of ease, readability and logical program flow, many developers utilize Anonymous Inner Classes to define their Runnables, such as the example you create above. This results in an example like the one you typed above. An Anonymous Inner Class is basically a discrete Non-Static Inner Class. You just don't have to create a whole new definition and simply override the appropriate methods. In all other respects it is a Non-Static Inner Class, which means that it keeps an implicit reference to its container.</p>\n\n<p><strong>Runnables and Activities/Views</strong></p>\n\n<p>Yay! This section can be short! Due to the fact that Runnables run outside of the current thread, the danger with these comes to long running asynchronous operations. If the runnable is defined in an Activity or View as an Anonymous Inner Class OR Non-Static Inner Class, there are some very serious dangers. This is because, as previously stated, it <strong><em>has</em></strong> to know who its container is. Enter the orientation change (or system kill). Now just refer back to the previous sections to understand what just happened. Yes, your example is quite dangerous.</p>\n\n<p><strong>Solutions: Runnables</strong></p>\n\n<ul>\n<li>Try and extend Runnable, if it doesn't break the logic of your code.</li>\n<li>Do your best to make extended Runnables static, if they must be inner classes.</li>\n<li>If you must use Anonymous Runnables, avoid creating them in <strong><em>any</em></strong> object that has a long-lived reference to an Activity or View that is in use.</li>\n<li>Many Runnables could just as easily have been AsyncTasks. Consider using AsyncTask as those are VM Managed by default.</li>\n</ul>\n\n<p><strong>Answering the Final Question</strong>\nNow to answer the questions that were not <em>directly</em> addressed by the other sections of this post. You asked \"When can an object of an inner class survive longer than its outer class?\" Before we get to this, let me reemphasize: though you are right to worry about this in Activities, it can cause a leak anywhere. I shall provide a simple example (without using an Activity) just to demonstrate.</p>\n\n<p>Below is a common example of a basic factory (missing the code).</p>\n\n<pre><code>public class LeakFactory\n{//Just so that we have some data to leak\n    int myID = 0;\n// Necessary because our Leak class is non-static\n    public Leak createLeak()\n    {\n        return new Leak();\n    }\n\n// Mass Manufactured Leak class\n    public class Leak\n    {//Again for a little data.\n       int size = 1;\n    }\n}\n</code></pre>\n\n<p>This is a not as common example, but simple enough to demonstrate. The key here is the constructor...</p>\n\n<pre><code>public class SwissCheese\n{//Can't have swiss cheese without some holes\n    public Leak[] myHoles;\n\n    public SwissCheese()\n    {//Gotta have a Factory to make my holes\n        LeakFactory _holeDriller = new LeakFactory()\n    // Now, let's get the holes and store them.\n        myHoles = new Leak[1000];\n\n        for (int i = 0; i++; i&lt;1000)\n        {//Store them in the class member\n            myHoles[i] = _holeDriller.createLeak();\n        }\n\n    // Yay! We're done! \n\n    // Buh-bye LeakFactory. I don't need you anymore...\n    }\n}\n</code></pre>\n\n<p>Now, we have Leaks, but no Factory. Even though we released the Factory, it will remain in memory because every single Leak has a reference to it. It doesn't even matter that the outer class has no data. This happens far more often than one might think. We don't need the creator, just its creations. So we create one temporarily, but use the creations indefinitely. </p>\n\n<p>Imagine what happens when we change the constructor just slightly. </p>\n\n<pre><code>public class SwissCheese\n{//Can't have swiss cheese without some holes\n    public Leak[] myHoles;\n\n    public SwissCheese()\n    {//Now, let's get the holes and store them.\n        myHoles = new Leak[1000];\n\n        for (int i = 0; i++; i&lt;1000)\n        {//WOW! I don't even have to create a Factory... \n        // This is SOOOO much prettier....\n            myHoles[i] = new LeakFactory().createLeak();\n        }\n    }\n}\n</code></pre>\n\n<p>Now, every single one of those new LeakFactories has just been leaked. What do you think of that? Those are two very common examples of how a inner class can outlive an outer class of any type. If that outer class had been an Activity, imagine how much worse it would have been.</p>\n\n<p><strong>Conclusion</strong></p>\n\n<p>These list the primarily known dangers of using these objects inappropriately. In general, this post should have covered most of your questions, but I understand it was a loooong post, so if you need clarification, just let me know. As long as you follow the above practices, you will have very little worry of leakage. </p>\n\n<p>Hope this helps,</p>\n\n<p>FuzzicalLogic</p>\n", "title": "When exactly is it leak safe to use (anonymous) inner classes?", "answer_id": 10968689, "link": "http://stackoverflow.com/questions/10864853/when-exactly-is-it-leak-safe-to-use-anonymous-inner-classes/10968689#10968689", "tags": ["java", "android", "memory-leaks", "inner-classes"]}], "question_id": 10864853}, {"body": "<p>I use a JSON library called <code>JSONObject</code> (I don't mind switching if I need to). </p>\n\n<p>I know how to iterate over <code>JSONArrays</code>, but when I parse JSON data from Facebook I don't get an array, only a <code>JSONObject</code>, but I need to be able to access an item via its index, such as <code>JSONObject[0]</code> to get the first one, and I can't figure out how to do it.</p>\n\n<pre><code>{\n   \"http://http://url.com/\": {\n      \"id\": \"http://http://url.com//\"\n   },\n   \"http://url2.co/\": {\n      \"id\": \"http://url2.com//\",\n      \"shares\": 16\n   }\n   ,\n   \"http://url3.com/\": {\n      \"id\": \"http://url3.com//\",\n      \"shares\": 16\n   }\n}\n</code></pre>\n", "tags": ["java", "json"], "title": "How to iterate over a JSONObject?", "answer_count": 8, "creation_date": 1328465177, "score": 155, "link": "http://stackoverflow.com/questions/9151619/how-to-iterate-over-a-jsonobject", "answers": [{"body": "<p>See the api doc: <a href=\"http://www.json.org/javadoc/org/json/JSONObject.html#keys%28%29\">http://www.json.org/javadoc/org/json/JSONObject.html#keys%28%29</a></p>\n\n<p>This returns an iterator on the keys of the object.</p>\n", "title": "How to iterate over a JSONObject?", "answer_id": 9151668, "link": "http://stackoverflow.com/questions/9151619/how-to-iterate-over-a-jsonobject/9151668#9151668", "tags": ["java", "json"]}, {"body": "<p>Maybe this will help:</p>\n\n<pre><code>jObject = new JSONObject(contents.trim());\nIterator&lt;?&gt; keys = jObject.keys();\n\nwhile( keys.hasNext() ) {\n    String key = (String)keys.next();\n    if ( jObject.get(key) instanceof JSONObject ) {\n\n    }\n}\n</code></pre>\n", "title": "How to iterate over a JSONObject?", "answer_id": 10593838, "link": "http://stackoverflow.com/questions/9151619/how-to-iterate-over-a-jsonobject/10593838#10593838", "tags": ["java", "json"]}, {"body": "<pre><code>Iterator&lt;JSONObject&gt; iterator = jsonObject.values().iterator();\n\nwhile (iterator.hasNext()) {\n jsonChildObject = iterator.next();\n\n //DO what ever you whont with jsonChildObject \n\n  String id = (String) jsonChildObject.get(\"id\");\n}\n</code></pre>\n", "title": "How to iterate over a JSONObject?", "answer_id": 23870796, "link": "http://stackoverflow.com/questions/9151619/how-to-iterate-over-a-jsonobject/23870796#23870796", "tags": ["java", "json"]}, {"body": "<p>for my case i found iterating the <code>names()</code> works well</p>\n\n<pre><code>for(int i = 0; i&lt;jobject.names().length(); i++){\n    Log.v(TAG, \"key = \" + jobject.names().getString(i) + \" value = \" + jobject.get(jobject.names().getString(i)));\n}\n</code></pre>\n", "title": "How to iterate over a JSONObject?", "answer_id": 25977001, "link": "http://stackoverflow.com/questions/9151619/how-to-iterate-over-a-jsonobject/25977001#25977001", "tags": ["java", "json"]}, {"body": "<p>I made a small recursive function that goes through the entire json object and saves the key path and its value.</p>\n\n<pre><code>// My stored keys and values from the json object\nHashMap&lt;String,String&gt; myKeyValues = new HashMap&lt;String,String&gt;();\n\n// Used for constructing the path to the key in the json object\nStack&lt;String&gt; key_path = new Stack&lt;String&gt;();\n\n// Recursive function that goes through a json object and stores \n// its key and values in the hashmap \nprivate void loadJson(JSONObject json){\n    Iterator&lt;?&gt; json_keys = json.keys();\n\n    while( json_keys.hasNext() ){\n        String json_key = (String)json_keys.next();\n\n        try{\n            key_path.push(json_key);\n            loadJson(json.getJSONObject(json_key));\n       }catch (JSONException e){\n           // Build the path to the key\n           String key = \"\";\n           for(String sub_key: key_path){\n               key += sub_key+\".\";\n           }\n           key = key.substring(0,key.length()-1);\n\n           System.out.println(key+\": \"+json.getString(json_key));\n           key_path.pop();\n           myKeyValues.put(key, json.getString(json_key));\n        }\n    }\n    if(key_path.size() &gt; 0){\n        key_path.pop();\n    }\n}\n</code></pre>\n", "title": "How to iterate over a JSONObject?", "answer_id": 28384106, "link": "http://stackoverflow.com/questions/9151619/how-to-iterate-over-a-jsonobject/28384106#28384106", "tags": ["java", "json"]}, {"body": "<p>I will avoid iterator as they can add/remove object during iteration and also for clean code use a for loop. less line simple code.</p>\n\n<pre><code>import org.json.simple.JSONObject;\npublic static void printJsonObject(JSONObject jsonObj) {\n    for (Object key : jsonObj.keySet()) {\n        //based on you key types\n        String keyStr = (String)key;\n        Object keyvalue = jsonObj.get(keyStr);\n\n        //Print key and value\n        System.out.println(\"key: \"+ keyStr + \" value: \" + keyvalue);\n\n        //for nested objects iteration if required\n        if (keyvalue instanceof JSONObject)\n            printJsonObject((JSONObject)keyvalue);\n    }\n}\n</code></pre>\n", "title": "How to iterate over a JSONObject?", "answer_id": 32412500, "link": "http://stackoverflow.com/questions/9151619/how-to-iterate-over-a-jsonobject/32412500#32412500", "tags": ["java", "json"]}, {"body": "<p>First put this somewhere:</p>\n\n<pre><code>private &lt;T&gt; Iterable&lt;T&gt; iteratorToIterable(final Iterator&lt;T&gt; iterator) {\n    return new Iterable&lt;T&gt;() {\n        @Override\n        public Iterator&lt;T&gt; iterator() {\n            return iterator;\n        }\n    };\n}\n</code></pre>\n\n<p>Or if you have access to Java8, just this:</p>\n\n<pre><code>private &lt;T&gt; Iterable&lt;T&gt; iteratorToIterable(Iterator&lt;T&gt; iterator) {\n    return () -&gt; iterator;\n}\n</code></pre>\n\n<p>Then simply iterate over the object's keys and values:</p>\n\n<pre><code>for (String key : iteratorToIterable(object.keys())) {\n    JSONObject entry = object.getJSONObject(key);\n    // ...\n</code></pre>\n", "title": "How to iterate over a JSONObject?", "answer_id": 35517122, "link": "http://stackoverflow.com/questions/9151619/how-to-iterate-over-a-jsonobject/35517122#35517122", "tags": ["java", "json"]}, {"body": "<pre><code> Object[] obs = jobject.keySet().toArray();\n for(int i = 0; i&lt;obs.length; i++)\n {\n     jobject.get(obs[i]);\n }\n</code></pre>\n", "title": "How to iterate over a JSONObject?", "answer_id": 36203811, "link": "http://stackoverflow.com/questions/9151619/how-to-iterate-over-a-jsonobject/36203811#36203811", "tags": ["java", "json"]}], "question_id": 9151619}, {"body": "<p>Is there a way to declare an unsigned int in Java?</p>\n\n<p>Or the question may be framed as this as well:\nWhat is the Java equivalent of unsigned?</p>\n\n<p><em>Just to tell you the context I was looking at the java's implementation of String.hashcode(). I wanted to test the possibility of collision if the integer were 32 unsigned int.</em></p>\n", "tags": ["java", "integer", "unsigned"], "title": "Declaring an unsigned int in java", "answer_count": 7, "creation_date": 1332612454, "score": 155, "link": "http://stackoverflow.com/questions/9854166/declaring-an-unsigned-int-in-java", "answers": [{"body": "<p>Java has no <a href=\"https://en.wikipedia.org/wiki/Integer_%28computer_science%29\">unsigned integers</a>.</p>\n\n<p>You can define a <a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\"><code>long</code></a> instead of an <code>int</code> if you need to store large values but there's no way to exclude negative values.</p>\n\n<p>However, as of Java SE 8, there are a few new methods in the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html\"><code>Integer</code></a> class which allow you to use the <code>int</code> data type <a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\">to perform unsigned arithmetic</a>:</p>\n\n<blockquote>\n  <p>In Java SE 8 and later, you can use the int data type to represent an unsigned 32-bit integer, which has a minimum value of 0 and a maximum value of 2^32-1. Use the Integer class to use int data type as an unsigned integer. Static methods like <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#compareUnsigned-int-int-\"><code>compareUnsigned</code></a>, <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#divideUnsigned-int-int-\"><code>divideUnsigned</code></a> etc have been added to the Integer class to support the arithmetic operations for unsigned integers.</p>\n</blockquote>\n\n<p>Note that <code>int</code> variables are still signed when declared but unsigned arithmetic is now possible by using those methods in the <code>Integer</code> class.</p>\n", "title": "Declaring an unsigned int in java", "answer_id": 9854205, "link": "http://stackoverflow.com/questions/9854166/declaring-an-unsigned-int-in-java/9854205#9854205", "tags": ["java", "integer", "unsigned"]}, {"body": "<p>you can use the Math.abs(number) function, it returns a positive number</p>\n", "title": "Declaring an unsigned int in java", "answer_id": 15701957, "link": "http://stackoverflow.com/questions/9854166/declaring-an-unsigned-int-in-java/15701957#15701957", "tags": ["java", "integer", "unsigned"]}, {"body": "<p>There will be an <a href=\"https://blogs.oracle.com/darcy/entry/unsigned_api\">API for unsigned Integer and Long in Java 8!</a></p>\n", "title": "Declaring an unsigned int in java", "answer_id": 20198933, "link": "http://stackoverflow.com/questions/9854166/declaring-an-unsigned-int-in-java/20198933#20198933", "tags": ["java", "integer", "unsigned"]}, {"body": "<p>Whether a value in an int is signed or unsigned depends on how the bits are interpreted - java interprets bits as a signed value (doesn't have unsigned primitives).  </p>\n\n<p>If you have an int that you want to interpret as an unsigned value (e.g. you read an int from a DataInputStream that you know contains an unsigned value) then you can do the following trick.</p>\n\n<pre><code>int fourBytesIJustRead = someObject.getInt();\nlong unsignedValue = fourBytesIJustRead &amp; 0xffffffffl;\n</code></pre>\n\n<p>Note, that it is important that the hex literal is a long literal, not an int literal - hence the 'l' at the end.</p>\n", "title": "Declaring an unsigned int in java", "answer_id": 22938125, "link": "http://stackoverflow.com/questions/9854166/declaring-an-unsigned-int-in-java/22938125#22938125", "tags": ["java", "integer", "unsigned"]}, {"body": "<p>For unsigned numbers you can use these classes from <strong><a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/primitives/package-summary.html\" rel=\"nofollow\">Guava library</a></strong>:</p>\n\n<ul>\n<li><a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/primitives/UnsignedInteger.html\" rel=\"nofollow\">UnsignedInteger</a></li>\n<li><a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/primitives/UnsignedLong.html\" rel=\"nofollow\">UnsignedLong</a></li>\n</ul>\n\n<p>They support various operations:</p>\n\n<ul>\n<li>plus</li>\n<li>minus</li>\n<li>times</li>\n<li>mod</li>\n<li>dividedBy</li>\n</ul>\n\n<p>The thing that seems missing at the moment are byte shift operators. If you need those you can use BigInteger from Java.</p>\n", "title": "Declaring an unsigned int in java", "answer_id": 25159153, "link": "http://stackoverflow.com/questions/9854166/declaring-an-unsigned-int-in-java/25159153#25159153", "tags": ["java", "integer", "unsigned"]}, {"body": "<p>We needed unsigned numbers to model MySQL's unsigned <code>TINYINT</code>, <code>SMALLINT</code>, <code>INT</code>, <code>BIGINT</code> in <a href=\"http://www.jooq.org\" rel=\"nofollow\">jOOQ</a>, which is why we have created <a href=\"https://github.com/jOOQ/jOOU\" rel=\"nofollow\">jOOU</a>, a minimalistic library offering wrapper types for unsigned integer numbers in Java. Example:</p>\n\n<pre><code>import static org.joou.Unsigned.*;\n\n// and then...\nUByte    b = ubyte(1);\nUShort   s = ushort(1);\nUInteger i = uint(1);\nULong    l = ulong(1);\n</code></pre>\n\n<p>All of these types extend <code>java.lang.Number</code> and can be converted into higher-order primitive types and <code>BigInteger</code>. Hope this helps.</p>\n\n<p>(Disclaimer: I work for the company behind these libraries)</p>\n", "title": "Declaring an unsigned int in java", "answer_id": 25159296, "link": "http://stackoverflow.com/questions/9854166/declaring-an-unsigned-int-in-java/25159296#25159296", "tags": ["java", "integer", "unsigned"]}, {"body": "<p>Perhaps this is what you meant?</p>\n\n<pre><code>long getUnsigned(int signed) {\n    return signed &gt;= 0 ? signed : 2 * (long) Integer.MAX_VALUE + 2 + signed;\n}\n</code></pre>\n\n<ul>\n<li><code>getUnsigned(0)</code> \u2192 0</li>\n<li><code>getUnsigned(1)</code> \u2192 1</li>\n<li><code>getUnsigned(Integer.MAX_VALUE)</code> \u2192 2147483647</li>\n<li><code>getUnsigned(Integer.MIN_VALUE)</code> \u2192 2147483648</li>\n<li><code>getUnsigned(Integer.MIN_VALUE + 1)</code> \u2192 2147483649</li>\n</ul>\n", "title": "Declaring an unsigned int in java", "answer_id": 34744113, "link": "http://stackoverflow.com/questions/9854166/declaring-an-unsigned-int-in-java/34744113#34744113", "tags": ["java", "integer", "unsigned"]}], "question_id": 9854166}, {"body": "<p>I would like to make one of my methods \"deprecated\" = not used anymore.</p>\n\n<p>But still I would like to have it in my API. I just want to show \"warning\" to anyone using that method.</p>\n\n<p>How can I achieve that?</p>\n", "tags": ["java", "deprecated"], "title": "How to declare or mark a Java method as deprecated?", "answer_count": 6, "creation_date": 1327659746, "score": 153, "link": "http://stackoverflow.com/questions/9031832/how-to-declare-or-mark-a-java-method-as-deprecated", "answers": [{"body": "<p>There are two things you can do:</p>\n\n<ol>\n<li>Add the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/Deprecated.html\"><code>@Deprecated</code></a> annotation to the method, and</li>\n<li>Add a <a href=\"http://docs.oracle.com/javase/1.5.0/docs/guide/javadoc/deprecation/deprecation.html#javadoc_tag\"><code>@deprecated</code></a> tag to the javadoc of the method</li>\n</ol>\n\n<p>You should <strong>do both</strong>!</p>\n\n<p>Quoting the <a href=\"http://docs.oracle.com/javase/1.5.0/docs/guide/javadoc/deprecation/deprecation.html#how\">java documentation</a> on this subject:</p>\n\n<blockquote>\n  <p>Starting with J2SE 5.0, you deprecate a class, method, or field by using the @Deprecated annotation. Additionally, you can use the @deprecated Javadoc tag tell developers what to use instead.  </p>\n  \n  <p>Using the annotation causes the Java compiler to generate warnings when the deprecated class, method, or field is used. The compiler suppresses deprecation warnings if a deprecated compilation unit uses a deprecated class, method, or field. This enables you to build legacy APIs without generating warnings.  </p>\n  \n  <p>You are strongly recommended to use the Javadoc @deprecated tag with appropriate comments explaining how to use the new API. This ensures developers will have a workable migration path from the old API to the new API</p>\n</blockquote>\n", "title": "How to declare or mark a Java method as deprecated?", "answer_id": 9031850, "link": "http://stackoverflow.com/questions/9031832/how-to-declare-or-mark-a-java-method-as-deprecated/9031850#9031850", "tags": ["java", "deprecated"]}, {"body": "<p>Use @Deprecated on method. Don't forget about clarifying javadoc field:</p>\n\n<pre><code>/**\n * Does some thing in old style.\n *\n * @deprecated use {@link #new()} instead.  \n */\n@Deprecated\npublic void old() {\n// ...\n}\n</code></pre>\n", "title": "How to declare or mark a Java method as deprecated?", "answer_id": 9031854, "link": "http://stackoverflow.com/questions/9031832/how-to-declare-or-mark-a-java-method-as-deprecated/9031854#9031854", "tags": ["java", "deprecated"]}, {"body": "<p>Use the <a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/annotations.html\">annotation</a> <code>@Deprecated</code> for your method, and you should also mention it in your javadocs.</p>\n", "title": "How to declare or mark a Java method as deprecated?", "answer_id": 9031858, "link": "http://stackoverflow.com/questions/9031832/how-to-declare-or-mark-a-java-method-as-deprecated/9031858#9031858", "tags": ["java", "deprecated"]}, {"body": "<p>Take a look at the <code>@Deprecated</code> annotation.</p>\n", "title": "How to declare or mark a Java method as deprecated?", "answer_id": 9031868, "link": "http://stackoverflow.com/questions/9031832/how-to-declare-or-mark-a-java-method-as-deprecated/9031868#9031868", "tags": ["java", "deprecated"]}, {"body": "<p>Use both <code>@Deprecated</code> annotation and the <code>@deprecated</code> JavaDoc tag.</p>\n\n<p>The <code>@deprecated</code> JavaDoc tag is used for documentation purposes.</p>\n\n<p>The <code>@Deprecated</code> annotation instructs the compiler that the method is deprecated. Here is what it says in Sun/Oracles document on the subject:</p>\n\n<blockquote>\n  <p>Using the <strong><code>@Deprecated</code></strong> annotation to deprecate a class, method, or field ensures that all compilers will issue warnings when code uses that program element. In contrast, there is no guarantee that all compilers will always issue warnings based on the <strong><code>@deprecated</code></strong> Javadoc tag, though the Sun compilers currently do so. Other compilers may not issue such warnings. Thus, using the <strong><code>@Deprecated</code></strong> annotation to generate warnings is more portable that relying on the <strong><code>@deprecated</code></strong> Javadoc tag. </p>\n</blockquote>\n\n<p>You can find the full document at <a href=\"http://docs.oracle.com/javase/1.5.0/docs/guide/javadoc/deprecation/deprecation.html\">How and When to Deprecate APIs</a></p>\n", "title": "How to declare or mark a Java method as deprecated?", "answer_id": 9031910, "link": "http://stackoverflow.com/questions/9031832/how-to-declare-or-mark-a-java-method-as-deprecated/9031910#9031910", "tags": ["java", "deprecated"]}, {"body": "<p>since some minor explanations were missing</p>\n\n<p>Use <strong><code>@Deprecated</code></strong> annotation on the method like this</p>\n\n<blockquote>\n<pre><code>/**\n * @param baseprice\n * \n * @deprecated  reason this method is deprecated &lt;/br&gt;\n *              {will be removed in next version} &lt;/br&gt;\n *              use {@link #setPurchasePrice()} instead like this: \n * \n * &lt;blockquote&gt;\n * &lt;pre&gt;\n * getProduct().setPurchasePrice(200) \n * &lt;/pre&gt;&lt;/blockquote&gt;\n * \n */\n@Deprecated\npublic void setBaseprice(int baseprice) {\n}\n</code></pre>\n</blockquote>\n\n<p><strong>remember to explain:</strong></p>\n\n<ul>\n<li>Why is this method no longer recommended , remeber to seperate line for readability <code>&lt;/br&gt;</code></li>\n<li>When it will be removed (let your users know how much they can still rely on this method if they decided to stick to the old way)</li>\n<li><strong>Provide a solution</strong> or link to the method you recommend  <code>{@link #setPurchasePrice()}</code></li>\n</ul>\n", "title": "How to declare or mark a Java method as deprecated?", "answer_id": 24605999, "link": "http://stackoverflow.com/questions/9031832/how-to-declare-or-mark-a-java-method-as-deprecated/24605999#24605999", "tags": ["java", "deprecated"]}], "question_id": 9031832}, {"body": "<p>I need a solution to properly stop the thread in Java.</p>\n\n<p>I have <code>IndexProcessor</code>class which implements the Runnable interface:</p>\n\n<pre><code>public class IndexProcessor implements Runnable {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(IndexProcessor.class);\n\n    @Override\n    public void run() {\n        boolean run = true;\n        while (run) {\n            try {\n                LOGGER.debug(\"Sleeping...\");\n                Thread.sleep((long) 15000);\n\n                LOGGER.debug(\"Processing\");\n            } catch (InterruptedException e) {\n                LOGGER.error(\"Exception\", e);\n                run = false;\n            }\n        }\n\n    }\n}\n</code></pre>\n\n<p>And I have <code>ServletContextListener</code> class which starts and stops the thread:</p>\n\n<pre><code>public class SearchEngineContextListener implements ServletContextListener {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(SearchEngineContextListener.class);\n\n    private Thread thread = null;\n\n    @Override\n    public void contextInitialized(ServletContextEvent event) {\n        thread = new Thread(new IndexProcessor());\n        LOGGER.debug(\"Starting thread: \" + thread);\n        thread.start();\n        LOGGER.debug(\"Background process successfully started.\");\n    }\n\n    @Override\n    public void contextDestroyed(ServletContextEvent event) {\n        LOGGER.debug(\"Stopping thread: \" + thread);\n        if (thread != null) {\n            thread.interrupt();\n            LOGGER.debug(\"Thread successfully stopped.\");\n        }\n    }\n}\n</code></pre>\n\n<p>But when I shutdown tomcat, I get the exception in my IndexProcessor class:</p>\n\n<pre><code>2012-06-09 17:04:50,671 [Thread-3] ERROR  IndexProcessor Exception\njava.lang.InterruptedException: sleep interrupted\n    at java.lang.Thread.sleep(Native Method)\n    at lt.ccl.searchengine.processor.IndexProcessor.run(IndexProcessor.java:22)\n    at java.lang.Thread.run(Unknown Source)\n</code></pre>\n\n<p>I am using JDK 1.6. So the question is:</p>\n\n<p>How can I stop the thread and not throw any exceptions? </p>\n\n<p><strong>P.S.</strong> I do not want to use <code>.stop();</code> method because it is deprecated.</p>\n", "tags": ["java", "multithreading", "listener"], "title": "How to properly stop the Thread in Java?", "answer_count": 6, "creation_date": 1339251306, "score": 149, "link": "http://stackoverflow.com/questions/10961714/how-to-properly-stop-the-thread-in-java", "answers": [{"body": "<p>In the <code>IndexProcessor</code> class you need a way of setting a flag which informs the thread that it will need to terminate, similar to the variable <code>run</code> that you have used just in the class scope.</p>\n\n<p>When you wish to stop the thread, you set this flag and call <code>join()</code> on the thread and wait for it to finish.</p>\n\n<p>Make sure that the flag is thread safe by using a volatile variable or by using getter and setter methods which are synchronised with the variable being used as the flag.</p>\n\n<pre><code>public class IndexProcessor implements Runnable {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(IndexProcessor.class);\n    private volatile boolean running = true;\n\n    public void terminate() {\n        running = false;\n    }\n\n    @Override\n    public void run() {\n        while (running) {\n            try {\n                LOGGER.debug(\"Sleeping...\");\n                Thread.sleep((long) 15000);\n\n                LOGGER.debug(\"Processing\");\n            } catch (InterruptedException e) {\n                LOGGER.error(\"Exception\", e);\n                running = false;\n            }\n        }\n\n    }\n}\n</code></pre>\n\n<p>Then in <code>SearchEngineContextListener</code>:</p>\n\n<pre><code>public class SearchEngineContextListener implements ServletContextListener {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(SearchEngineContextListener.class);\n\n    private Thread thread = null;\n    private IndexProcessor runnable = null;\n\n    @Override\n    public void contextInitialized(ServletContextEvent event) {\n        runnable = new IndexProcessor();\n        thread = new Thread(runnable);\n        LOGGER.debug(\"Starting thread: \" + thread);\n        thread.start();\n        LOGGER.debug(\"Background process successfully started.\");\n    }\n\n    @Override\n    public void contextDestroyed(ServletContextEvent event) {\n        LOGGER.debug(\"Stopping thread: \" + thread);\n        if (thread != null) {\n            runnable.terminate();\n            thread.join();\n            LOGGER.debug(\"Thread successfully stopped.\");\n        }\n    }\n}\n</code></pre>\n", "title": "How to properly stop the Thread in Java?", "answer_id": 10961760, "link": "http://stackoverflow.com/questions/10961714/how-to-properly-stop-the-thread-in-java/10961760#10961760", "tags": ["java", "multithreading", "listener"]}, {"body": "<p>You should always end threads by checking a flag in the <code>run()</code> loop (if any).</p>\n\n<p>Your thread should look like this:</p>\n\n<pre><code>public class IndexProcessor implements Runnable {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(IndexProcessor.class);\n    private volatile boolean execute;\n\n    @Override\n    public void run() {\n        this.execute = true;\n        while (this.execute) {\n            try {\n                LOGGER.debug(\"Sleeping...\");\n                Thread.sleep((long) 15000);\n\n                LOGGER.debug(\"Processing\");\n            } catch (InterruptedException e) {\n                LOGGER.error(\"Exception\", e);\n                this.execute = false;\n            }\n        }\n    }\n\n    public void stopExecuting() {\n        this.execute = false;\n    }\n}\n</code></pre>\n\n<p>Then you can end the thread by calling <code>thread.stopExecuting()</code>. That way the thread is ended clean, but this takes up to 15 seconds (due to your sleep).\nYou can still call thread.interrupt() if it's really urgent - but the prefered way should always be checking the flag.</p>\n\n<p>To avoid waiting for 15 seconds, you can split up the sleep like this:</p>\n\n<pre><code>        ...\n        try {\n            LOGGER.debug(\"Sleeping...\");\n            for (int i = 0; (i &lt; 150) &amp;&amp; this.execute; i++) {\n                Thread.sleep((long) 100);\n            }\n\n            LOGGER.debug(\"Processing\");\n        } catch (InterruptedException e) {\n        ...\n</code></pre>\n", "title": "How to properly stop the Thread in Java?", "answer_id": 10961767, "link": "http://stackoverflow.com/questions/10961714/how-to-properly-stop-the-thread-in-java/10961767#10961767", "tags": ["java", "multithreading", "listener"]}, {"body": "<p>For synchronizing threads I prefer using <code>CountDownLatch</code> which helps threads to wait until the process being performed complete. In this case, the worker class is set up with a <code>CountDownLatch</code> instance with a given count. A call to <code>await</code> method will block until the current count reaches zero due to invocations of the <code>countDown</code> method or the timeout set is reached. This approach allows interrupting a thread instantly without having to wait for the specified waiting time to elapse:</p>\n\n<pre><code>public class IndexProcessor implements Runnable {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(IndexProcessor.class);\n\n    private final CountDownLatch countdownlatch;\n    public IndexProcessor(CountDownLatch countdownlatch) {\n        this.countdownlatch = countdownlatch;\n    }\n\n\n    public void run() {\n        try {\n            while (!countdownlatch.await(15000, TimeUnit.MILLISECONDS)) {\n                LOGGER.debug(\"Processing...\");\n            }\n        } catch (InterruptedException e) {\n            LOGGER.error(\"Exception\", e);\n            run = false;\n        }\n\n    }\n}\n</code></pre>\n\n<p>When you want to finish execution of the other thread, execute countDown on the <code>CountDownLatch</code> and <code>join</code> the thread to the main thread:</p>\n\n<pre><code>public class SearchEngineContextListener implements ServletContextListener {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(SearchEngineContextListener.class);\n\n    private Thread thread = null;\n    private IndexProcessor runnable = null;\n    private CountDownLatch countdownLatch = null;\n\n    @Override\n    public void contextInitialized(ServletContextEvent event) {\n        countdownLatch = new CountDownLatch(1);\n        Thread thread = new Thread(new IndexProcessor(countdownLatch));\n        LOGGER.debug(\"Starting thread: \" + thread);\n        thread.start();\n        LOGGER.debug(\"Background process successfully started.\");\n    }\n\n    @Override\n    public void contextDestroyed(ServletContextEvent event) {\n        LOGGER.debug(\"Stopping thread: \" + thread);\n        if (countdownLatch != null) \n        {\n            countdownLatch.countDown();\n        } \n        if (thread != null) {\n            try {\n                thread.join();\n            } catch (InterruptedException e) {\n                LOGGER.error(\"Exception\", e);\n            }\n            LOGGER.debug(\"Thread successfully stopped.\");\n        } \n    }\n}\n</code></pre>\n", "title": "How to properly stop the Thread in Java?", "answer_id": 10961971, "link": "http://stackoverflow.com/questions/10961714/how-to-properly-stop-the-thread-in-java/10961971#10961971", "tags": ["java", "multithreading", "listener"]}, {"body": "<p>Using Thread.interrupt() is a perfectly acceptable way of doing this.  In fact, it's probably preferrable to a flag as suggested above.  The reason being that if you're in an interruptable blocking call (like Thread.sleep or using java.nio Channel operations), you'll actually be able to break out of those right away.</p>\n\n<p>If you use a flag, you have to wait for the blocking operation to finish and then you can check your flag.  In some cases you have to do this anyway, such as using standard InputStream/OutputStream which are not interruptable.</p>\n\n<p>In that case, when a thread is interrupted, it will not interrupt the IO, however, you can easily do this routinely in your code (and you should do this at strategic points where you can safely stop and cleanup)</p>\n\n<pre><code>if (Thread.currentThread().isInterrupted()) {\n  // cleanup and stop execution\n  // for example a break in a loop\n}\n</code></pre>\n\n<p>Like I said, the main advantage to Thread.interrupt() is that you can immediately break out of interruptable calls, which you can't do with the flag approach.</p>\n", "title": "How to properly stop the Thread in Java?", "answer_id": 10962613, "link": "http://stackoverflow.com/questions/10961714/how-to-properly-stop-the-thread-in-java/10962613#10962613", "tags": ["java", "multithreading", "listener"]}, {"body": "<p>Simple answer:\nYou can stop a thread INTERNALLY in one of two common ways:</p>\n\n<ul>\n<li>The run method hits a return subroutine.</li>\n<li>Run method finishes, and returns implicitly.</li>\n</ul>\n\n<p>You can also stop threads EXTERNALLY:</p>\n\n<ul>\n<li>Call <code>system.exit</code> (this kills your entire process)</li>\n<li>Call the thread object's <code>interrupt()</code> method *</li>\n<li>See if the thread has an implemented method that sounds like it would work (like <code>kill()</code> or <code>stop()</code>)</li>\n</ul>\n\n<p>*: The expectation is that this is supposed to stop a thread.  However, what the thread actually does when this happens is entirely up to what the developer wrote when they created the thread implementation.</p>\n\n<p>A common pattern you see with run method implementations is a <code>while(boolean){}</code>, where the boolean is typically something named <code>isRunning</code>, it's a member variable of its thread class, it's volatile, and typically accessible by other threads by a setter method of sorts, e.g. <code>kill() { isRunnable=false; }</code>. These subroutines are nice because they allow the thread to release any resources it holds before terminating.</p>\n", "title": "How to properly stop the Thread in Java?", "answer_id": 29809440, "link": "http://stackoverflow.com/questions/10961714/how-to-properly-stop-the-thread-in-java/29809440#29809440", "tags": ["java", "multithreading", "listener"]}, {"body": "<p>Some supplementary info.\nBoth flag and interrupt are suggested in the Java doc. </p>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html\" rel=\"nofollow\">https://docs.oracle.com/javase/8/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html</a></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>private volatile Thread blinker;\n\npublic void stop() {\n    blinker = null;\n}\n\npublic void run() {\n    Thread thisThread = Thread.currentThread();\n    while (blinker == thisThread) {\n        try {\n            Thread.sleep(interval);\n        } catch (InterruptedException e){\n        }\n        repaint();\n    }\n}\n</code></pre>\n\n<p>For a thread that waits for long periods (e.g., for input), use <code>Thread.interrupt</code>  </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public void stop() {\n     Thread moribund = waiter;\n      waiter = null;\n      moribund.interrupt();\n }\n</code></pre>\n", "title": "How to properly stop the Thread in Java?", "answer_id": 31951888, "link": "http://stackoverflow.com/questions/10961714/how-to-properly-stop-the-thread-in-java/31951888#31951888", "tags": ["java", "multithreading", "listener"]}], "question_id": 10961714}, {"body": "<p>What is the simplest way to reverse this ArrayList?</p>\n\n<pre><code>ArrayList aList = new ArrayList();\n\n//Add elements to ArrayList object\naList.add(\"1\");\naList.add(\"2\");\naList.add(\"3\");\naList.add(\"4\");\naList.add(\"5\");\n\nwhile (aList.listIterator().hasPrevious())\n  Log.d(\"reverse\", \"\" + aList.listIterator().previous());\n</code></pre>\n", "tags": ["java", "android", "collections"], "title": "What is the Simplest Way to Reverse an ArrayList?", "answer_count": 4, "creation_date": 1338037504, "score": 148, "link": "http://stackoverflow.com/questions/10766492/what-is-the-simplest-way-to-reverse-an-arraylist", "answers": [{"body": "<p>Try this (<a href=\"http://www.java2s.com/Code/Java/Collections-Data-Structure/ReverseorderofallelementsofJavaArrayList.htm\">Reference</a>):</p>\n\n<pre><code>ArrayList aList = new ArrayList();\n//Add elements to ArrayList object\naList.add(\"1\");\naList.add(\"2\");\naList.add(\"3\");\naList.add(\"4\");\naList.add(\"5\");\nCollections.reverse(aList);\nSystem.out.println(\"After Reverse Order, ArrayList Contains : \" + aList);\n</code></pre>\n", "title": "What is the Simplest Way to Reverse an ArrayList?", "answer_id": 10766502, "link": "http://stackoverflow.com/questions/10766492/what-is-the-simplest-way-to-reverse-an-arraylist/10766502#10766502", "tags": ["java", "android", "collections"]}, {"body": "<p>Not the simplest way but if you're a fan of recursion you might be interested in the following method to reverse an ArrayList:</p>\n\n<pre><code>public ArrayList&lt;Object&gt; reverse(ArrayList&lt;Object&gt; list) {\n    if(list.size() &gt; 1) {                   \n        Object value = list.remove(0);\n        reverse(list);\n        list.add(value);\n    }\n    return list;\n}\n</code></pre>\n\n<p>Or non-recursively:</p>\n\n<pre><code>public ArrayList&lt;Object&gt; reverse(ArrayList&lt;Object&gt; list) {\n    for(int i = 0, j = list.size() - 1; i &lt; j; i++) {\n        list.add(i, list.remove(j));\n    }\n    return list;\n}\n</code></pre>\n", "title": "What is the Simplest Way to Reverse an ArrayList?", "answer_id": 25318143, "link": "http://stackoverflow.com/questions/10766492/what-is-the-simplest-way-to-reverse-an-arraylist/25318143#25318143", "tags": ["java", "android", "collections"]}, {"body": "<p>A little more readable :)</p>\n\n<pre><code>public static &lt;T&gt; ArrayList&lt;T&gt; reverse(ArrayList&lt;T&gt; list) {\n    int length = list.size();\n    ArrayList&lt;T&gt; result = new ArrayList&lt;T&gt;(length);\n\n    for (int i = length - 1; i &gt;= 0; i--) {\n        result.add(list.get(i));\n    }\n\n    return result;\n}\n</code></pre>\n", "title": "What is the Simplest Way to Reverse an ArrayList?", "answer_id": 34220087, "link": "http://stackoverflow.com/questions/10766492/what-is-the-simplest-way-to-reverse-an-arraylist/34220087#34220087", "tags": ["java", "android", "collections"]}, {"body": "<p>I think it will be the most easiest way :-</p>\n\n<pre><code>ArrayList&lt;Element&gt; tempElements = new ArrayList&lt;Element&gt;(mElements);\nCollections.reverse(tempElements);\n</code></pre>\n", "title": "What is the Simplest Way to Reverse an ArrayList?", "answer_id": 37936975, "link": "http://stackoverflow.com/questions/10766492/what-is-the-simplest-way-to-reverse-an-arraylist/37936975#37936975", "tags": ["java", "android", "collections"]}], "question_id": 10766492}, {"body": "<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/2808535/round-a-double-to-2-significant-figures-after-decimal-point\">Round a double to 2 significant figures after decimal point</a>  </p>\n</blockquote>\n\n\n\n<p>I am dealing with lot of double values in my application, is there is any easy way to handle the formatting of decimal values in Java?</p>\n\n<p>Is there any other better way of doing it than </p>\n\n<pre><code> DecimalFormat df = new DecimalFormat(\"#.##\");\n</code></pre>\n\n<p>What i want to do basically is format double values like </p>\n\n<pre><code>23.59004  to 23.59\n\n35.7  to 35.70\n\n3.0 to 3.00\n\n9 to 9.00\n</code></pre>\n", "tags": ["java"], "title": "Best way to Format a Double value to 2 Decimal places", "answer_count": 2, "creation_date": 1326287488, "score": 148, "link": "http://stackoverflow.com/questions/8819842/best-way-to-format-a-double-value-to-2-decimal-places", "answers": [{"body": "<p>No, there is no better way.</p>\n\n<p>Actually you have an error in your pattern. What you want is:</p>\n\n<pre><code>DecimalFormat df = new DecimalFormat(\"#.00\"); \n</code></pre>\n\n<p>Note the <code>\"00\"</code>, meaning <em>exactly</em> two decimal places.</p>\n\n<p>If you use <code>\"#.##\"</code> (<code>#</code> means \"optional\" digit), it will drop trailing zeroes - ie <code>new DecimalFormat(\"#.##\").format(3.0d);</code> prints just <code>\"3\"</code>, not <code>\"3.00\"</code>.</p>\n", "title": "Best way to Format a Double value to 2 Decimal places", "answer_id": 8819889, "link": "http://stackoverflow.com/questions/8819842/best-way-to-format-a-double-value-to-2-decimal-places/8819889#8819889", "tags": ["java"]}, {"body": "<p>An alternative is to use <code>String.format</code>:</p>\n\n<pre><code>double[] arr = { 23.59004,\n    35.7,\n    3.0,\n    9\n};\n\nfor ( double dub : arr ) {\n  System.out.println( String.format( \"%.2f\", dub ) );\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>23.59\n35.70\n3.00\n9.00\n</code></pre>\n\n<p>You could also use <code>System.out.format</code> (same method signature), or create a <code>java.util.Formatter</code> which works in the same way.</p>\n", "title": "Best way to Format a Double value to 2 Decimal places", "answer_id": 8820013, "link": "http://stackoverflow.com/questions/8819842/best-way-to-format-a-double-value-to-2-decimal-places/8820013#8820013", "tags": ["java"]}], "question_id": 8819842}, {"body": "<p>Why does this work fine:</p>\n\n<pre><code>    String str;\n    while(condition){\n        str = calculateStr();\n        .....\n    }\n</code></pre>\n\n<p>But this one said to be dangerous/incorrect:</p>\n\n<pre><code>    while(condition){\n        String str = calculateStr();\n        .....\n    }\n</code></pre>\n\n<p>Is it necessary to declare variables outside the loop?</p>\n", "tags": ["java", "optimization", "design", "while-loop"], "title": "Declaring variables inside or outside of a loop", "answer_count": 19, "creation_date": 1326200475, "score": 147, "link": "http://stackoverflow.com/questions/8803674/declaring-variables-inside-or-outside-of-a-loop", "answers": [{"body": "<p>Declaring String str outside of the wile loop allows it to be referenced inside &amp; outside the while loop. Declaring String str inside of the while loop allows it to <strong>only</strong> be referenced inside the while loop. </p>\n", "title": "Declaring variables inside or outside of a loop", "answer_id": 8803700, "link": "http://stackoverflow.com/questions/8803674/declaring-variables-inside-or-outside-of-a-loop/8803700#8803700", "tags": ["java", "optimization", "design", "while-loop"]}, {"body": "<p>Inside, the less scope the variable is visible into the better.</p>\n", "title": "Declaring variables inside or outside of a loop", "answer_id": 8803705, "link": "http://stackoverflow.com/questions/8803674/declaring-variables-inside-or-outside-of-a-loop/8803705#8803705", "tags": ["java", "optimization", "design", "while-loop"]}, {"body": "<p>if you want to use <code>str</code> outside looop also; declare it outside. otherwise, 2nd version is fine.</p>\n", "title": "Declaring variables inside or outside of a loop", "answer_id": 8803715, "link": "http://stackoverflow.com/questions/8803674/declaring-variables-inside-or-outside-of-a-loop/8803715#8803715", "tags": ["java", "optimization", "design", "while-loop"]}, {"body": "<p>If you don't need to use the <code>str</code> after the while loop (scope related) then the second condition i.e.  </p>\n\n<pre><code>  while(condition){\n        String str = calculateStr();\n        .....\n    }\n</code></pre>\n\n<p>is better since if you define an object on the stack only if the <code>condition</code> is true. I.e. use it <strong>if you need it</strong></p>\n", "title": "Declaring variables inside or outside of a loop", "answer_id": 8803723, "link": "http://stackoverflow.com/questions/8803674/declaring-variables-inside-or-outside-of-a-loop/8803723#8803723", "tags": ["java", "optimization", "design", "while-loop"]}, {"body": "<h2>The scope of local variables should always be the smallest possible.</h2>\n\n<p>In your example I presume <code>str</code> is <em>not</em> used outside of the <code>while</code> loop, otherwise you would not be asking the question, because declaring it inside the <code>while</code> loop would not be an option, since it would not compile.</p>\n\n<p>So, since <code>str</code> is <em>not</em> used outside the loop, the smallest possible scope for <code>str</code> is <em>within</em> the while loop.</p>\n\n<p>So, the answer is <em>emphatically</em> that <code>str</code> absolutely ought to be declared within the while loop. No ifs, no ands, no buts.</p>\n\n<p>The only case where this rule might be violated is if for some reason it is of vital importance that every clock cycle must be squeezed out of the code, in which case you might want to consider instantiating something in an outer scope and reusing it instead of re-instantiating it on every iteration of an inner scope. However, this does not apply to your example, due to the immutability of strings in java: a new instance of str will always be created in the beginning of your loop and it will have to be thrown away at the end of it, so there is no possibility to optimize there.</p>\n\n<p><strong>EDIT:</strong> (this is something that I wrote in a comment below, but I think it is worth making part of the answer.)</p>\n\n<p>In any case, the right way to do things is to write all your code properly, establish a performance requirement for your product, measure your final product against this requirement, and if it does not satisfy it, then go optimize things. And what usually ends up happening is that you find ways to provide some nice and formal algorithmic optimizations in just a couple of places which make our program meet its performance requirements instead of having to go all over your entire code base and tweak and hack things in order to squeeze clock cycles here and there.</p>\n", "title": "Declaring variables inside or outside of a loop", "answer_id": 8803806, "link": "http://stackoverflow.com/questions/8803674/declaring-variables-inside-or-outside-of-a-loop/8803806#8803806", "tags": ["java", "optimization", "design", "while-loop"]}, {"body": "<p>declaring inside the loop limits the scope of the respective variable..it all depends on requirement of project on scope of variable</p>\n", "title": "Declaring variables inside or outside of a loop", "answer_id": 8803866, "link": "http://stackoverflow.com/questions/8803674/declaring-variables-inside-or-outside-of-a-loop/8803866#8803866", "tags": ["java", "optimization", "design", "while-loop"]}, {"body": "<p>I compared the byte code of those two (similar) examples:</p>\n\n<p>Let's look at <strong>1. example</strong>:</p>\n\n<pre><code>package inside;\n\npublic class Test {\n    public static void main(String[] args) {\n        while(true){\n            String str = String.valueOf(System.currentTimeMillis());\n            System.out.println(str);\n        }\n    }\n}\n</code></pre>\n\n<p>after <code>javac Test.java</code>, <code>javap -c Test</code> you'll get:</p>\n\n<pre><code>public class inside.Test extends java.lang.Object{\npublic inside.Test();\n  Code:\n   0:   aload_0\n   1:   invokespecial   #1; //Method java/lang/Object.\"&lt;init&gt;\":()V\n   4:   return\n\npublic static void main(java.lang.String[]);\n  Code:\n   0:   invokestatic    #2; //Method java/lang/System.currentTimeMillis:()J\n   3:   invokestatic    #3; //Method java/lang/String.valueOf:(J)Ljava/lang/String;\n   6:   astore_1\n   7:   getstatic       #4; //Field java/lang/System.out:Ljava/io/PrintStream;\n   10:  aload_1\n   11:  invokevirtual   #5; //Method java/io/PrintStream.println:(Ljava/lang/String;)V\n   14:  goto    0\n\n}\n</code></pre>\n\n<p>Let's look at <strong>2. example</strong>:</p>\n\n<pre><code>package outside;\n\npublic class Test {\n    public static void main(String[] args) {\n        String str;\n        while(true){\n            str =  String.valueOf(System.currentTimeMillis());\n            System.out.println(str);\n        }\n    }\n}\n</code></pre>\n\n<p>after <code>javac Test.java</code>, <code>javap -c Test</code> you'll get:</p>\n\n<pre><code>public class outside.Test extends java.lang.Object{\npublic outside.Test();\n  Code:\n   0:   aload_0\n   1:   invokespecial   #1; //Method java/lang/Object.\"&lt;init&gt;\":()V\n   4:   return\n\npublic static void main(java.lang.String[]);\n  Code:\n   0:   invokestatic    #2; //Method java/lang/System.currentTimeMillis:()J\n   3:   invokestatic    #3; //Method java/lang/String.valueOf:(J)Ljava/lang/String;\n   6:   astore_1\n   7:   getstatic       #4; //Field java/lang/System.out:Ljava/io/PrintStream;\n   10:  aload_1\n   11:  invokevirtual   #5; //Method java/io/PrintStream.println:(Ljava/lang/String;)V\n   14:  goto    0\n\n}\n</code></pre>\n\n<p>The observations shows that there is <strong>no difference</strong> among those two examples. It's the result of JVM specifications...</p>\n\n<p>But in the name of best coding practice it is recommended to declare the variable in the smallest possible scope (in this example it is inside the loop, as this is the only place where the variable is used).</p>\n", "title": "Declaring variables inside or outside of a loop", "answer_id": 8878071, "link": "http://stackoverflow.com/questions/8803674/declaring-variables-inside-or-outside-of-a-loop/8878071#8878071", "tags": ["java", "optimization", "design", "while-loop"]}, {"body": "<p>Truly , the question stated above is an programming issue . How would like to program your code. Where do u need the 'STR' to be accessed . There is no use of declaring a  variable which is used locally as a global variable . basics of programming i believe. </p>\n", "title": "Declaring variables inside or outside of a loop", "answer_id": 8936764, "link": "http://stackoverflow.com/questions/8803674/declaring-variables-inside-or-outside-of-a-loop/8936764#8936764", "tags": ["java", "optimization", "design", "while-loop"]}, {"body": "<p>Declaring objects in the <em>smallest scope</em> improve <strong>readability</strong>.<br/></p>\n\n<p>Performance doesn't matter for today's compilers.(in this scenario)<br>\nFrom a maintenance perspective, <strong>2nd</strong> option is better.<br>\nDeclare and initialize variables in the same place, in the narrowest scope possible.</p>\n\n<p>As <em>Donald Ervin Knuth</em> told:</p>\n\n<blockquote>\n  <p><strong>\"We should forget about small efficiencies, say about 97% of the time:\n  premature optimization is the root of all evil\"</strong></p>\n</blockquote>\n\n<p>i.e) situation where a programmer lets performance considerations affect the <em>design</em> of a piece of code. This can result in a design that is <strong>not as clean</strong> as it could have been <em>or</em> code that is incorrect, because the code is <strong>complicated</strong> by the <em>optimization</em> and the programmer is distracted by <em>optimizing</em>.</p>\n", "title": "Declaring variables inside or outside of a loop", "answer_id": 8956395, "link": "http://stackoverflow.com/questions/8803674/declaring-variables-inside-or-outside-of-a-loop/8956395#8956395", "tags": ["java", "optimization", "design", "while-loop"]}, {"body": "<p>These two examples result the same thing. However, first provides you with using str variable outside of while loop, second is not  </p>\n", "title": "Declaring variables inside or outside of a loop", "answer_id": 8964505, "link": "http://stackoverflow.com/questions/8803674/declaring-variables-inside-or-outside-of-a-loop/8964505#8964505", "tags": ["java", "optimization", "design", "while-loop"]}, {"body": "<p>Variables should be declared as close to where they are used as possible.</p>\n\n<p>It makes RAII <a href=\"http://en.wikipedia.org/wiki/RAII\" rel=\"nofollow\">(Resource Acquisition Is Initialization)</a> easier.</p>\n\n<p>It keeps the scope of the variable tight. This lets the optimizer work better.</p>\n", "title": "Declaring variables inside or outside of a loop", "answer_id": 8967329, "link": "http://stackoverflow.com/questions/8803674/declaring-variables-inside-or-outside-of-a-loop/8967329#8967329", "tags": ["java", "optimization", "design", "while-loop"]}, {"body": "<p>As many people have pointed</p>\n\n<pre><code>String str;\nwhile(condition){\n    str = calculateStr();\n    .....\n}\n</code></pre>\n\n<p>is <strong>NOT</strong> better than this</p>\n\n<pre><code>while(condition){\n    String str = calculateStr();\n    .....\n}\n</code></pre>\n\n<p>So don't declare variables outside their scopes if you are not reusing it..</p>\n", "title": "Declaring variables inside or outside of a loop", "answer_id": 8967775, "link": "http://stackoverflow.com/questions/8803674/declaring-variables-inside-or-outside-of-a-loop/8967775#8967775", "tags": ["java", "optimization", "design", "while-loop"]}, {"body": "<p>According to Google Android Development guide, the variable scope should be limited. Please check this link:</p>\n\n<p><a href=\"http://source.android.com/source/code-style.html#limit-variable-scope\" rel=\"nofollow\">Limit Variable Scope</a></p>\n", "title": "Declaring variables inside or outside of a loop", "answer_id": 8968121, "link": "http://stackoverflow.com/questions/8803674/declaring-variables-inside-or-outside-of-a-loop/8968121#8968121", "tags": ["java", "optimization", "design", "while-loop"]}, {"body": "<p>You have a risk of <code>NullPointerException</code> if your <code>calculateStr()</code> method returns <em>null</em> and then you try to call a method on str.</p>\n\n<p>More generally, avoid having variables with a <em>null</em> value. It stronger for class attributes, by the way.</p>\n", "title": "Declaring variables inside or outside of a loop", "answer_id": 13510338, "link": "http://stackoverflow.com/questions/8803674/declaring-variables-inside-or-outside-of-a-loop/13510338#13510338", "tags": ["java", "optimization", "design", "while-loop"]}, {"body": "<p><strong>Please skip to the updated answer . . .</strong></p>\n\n<p>For those who care about performance take out the System.out and limit loop to 1B. Using double (test 1/2) and using String (3/4) elapsed times in milliseconds given below with Windows7P-64 &amp; JDK-1.7.0_21. Bytecodes (also given below for test1 and test2) are not the same. I was too lazy to test with mutable &amp; relatively complex objects</p>\n\n<p><em>double</em></p>\n\n<p>Test1 Took: 2710 msecs</p>\n\n<p>Test2 Took: 2790 msecs</p>\n\n<p><em>String (just replace double with string in the tests)</em></p>\n\n<p>Test3 Took: 1200 msecs</p>\n\n<p>Test4 Took: 3000 msecs</p>\n\n<p><em>Compiling and getting bytecode</em></p>\n\n<p>javac.exe LocalTest1.java</p>\n\n<p>javap.exe -c LocalTest1 > LocalTest1.bc</p>\n\n<pre><code>public class LocalTest1 {\n\n    public static void main(String[] args) throws Exception {\n        long start = System.currentTimeMillis();\n        double test;\n        for (double i = 0; i &lt; 1000000000; i++) {\n            test = i;\n        }\n        long finish = System.currentTimeMillis();\n        System.out.println(\"Test1 Took: \" + (finish - start) + \" msecs\");\n    }\n\n}\n\npublic class LocalTest2 {\n\n    public static void main(String[] args) throws Exception {\n        long start = System.currentTimeMillis();\n        for (double i = 0; i &lt; 1000000000; i++) {\n            double test = i;\n        }\n        long finish = System.currentTimeMillis();\n        System.out.println(\"Test1 Took: \" + (finish - start) + \" msecs\");\n    }\n\n}\n\n\nCompiled from \"LocalTest1.java\"\npublic class LocalTest1 {\n  public LocalTest1();\n    Code:\n       0: aload_0       \n       1: invokespecial #1                  // Method java/lang/Object.\"&lt;init&gt;\":()V\n       4: return        \n\n  public static void main(java.lang.String[]) throws java.lang.Exception;\n    Code:\n       0: invokestatic  #2                  // Method java/lang/System.currentTimeMillis:()J\n       3: lstore_1      \n       4: dconst_0      \n       5: dstore        5\n       7: dload         5\n       9: ldc2_w        #3                  // double 1.0E9d\n      12: dcmpg         \n      13: ifge          28\n      16: dload         5\n      18: dstore_3      \n      19: dload         5\n      21: dconst_1      \n      22: dadd          \n      23: dstore        5\n      25: goto          7\n      28: invokestatic  #2                  // Method java/lang/System.currentTimeMillis:()J\n      31: lstore        5\n      33: getstatic     #5                  // Field java/lang/System.out:Ljava/io/PrintStream;\n      36: new           #6                  // class java/lang/StringBuilder\n      39: dup           \n      40: invokespecial #7                  // Method java/lang/StringBuilder.\"&lt;init&gt;\":()V\n      43: ldc           #8                  // String Test1 Took: \n      45: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;\n      48: lload         5\n      50: lload_1       \n      51: lsub          \n      52: invokevirtual #10                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;\n      55: ldc           #11                 // String  msecs\n      57: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;\n      60: invokevirtual #12                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;\n      63: invokevirtual #13                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V\n      66: return        \n}\n\n\nCompiled from \"LocalTest2.java\"\npublic class LocalTest2 {\n  public LocalTest2();\n    Code:\n       0: aload_0       \n       1: invokespecial #1                  // Method java/lang/Object.\"&lt;init&gt;\":()V\n       4: return        \n\n  public static void main(java.lang.String[]) throws java.lang.Exception;\n    Code:\n       0: invokestatic  #2                  // Method java/lang/System.currentTimeMillis:()J\n       3: lstore_1      \n       4: dconst_0      \n       5: dstore_3      \n       6: dload_3       \n       7: ldc2_w        #3                  // double 1.0E9d\n      10: dcmpg         \n      11: ifge          24\n      14: dload_3       \n      15: dstore        5\n      17: dload_3       \n      18: dconst_1      \n      19: dadd          \n      20: dstore_3      \n      21: goto          6\n      24: invokestatic  #2                  // Method java/lang/System.currentTimeMillis:()J\n      27: lstore_3      \n      28: getstatic     #5                  // Field java/lang/System.out:Ljava/io/PrintStream;\n      31: new           #6                  // class java/lang/StringBuilder\n      34: dup           \n      35: invokespecial #7                  // Method java/lang/StringBuilder.\"&lt;init&gt;\":()V\n      38: ldc           #8                  // String Test1 Took: \n      40: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;\n      43: lload_3       \n      44: lload_1       \n      45: lsub          \n      46: invokevirtual #10                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;\n      49: ldc           #11                 // String  msecs\n      51: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;\n      54: invokevirtual #12                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;\n      57: invokevirtual #13                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V\n      60: return        \n}\n</code></pre>\n\n<h1><strong>UPDATED ANSWER</strong></h1>\n\n<p>It's really not easy to compare performance with all the JVM optimizations. However, it is somewhat possible. Better test and detailed results in <a href=\"https://github.com/google/caliper\" rel=\"nofollow\">Google Caliper</a></p>\n\n<ol>\n<li>Some details on blog:<a href=\"http://www.gunduru.com/post/107249109253/declaring-variables-inside-or-outside-of-a-loop\" rel=\"nofollow\">Should you declare a variable inside a loop or before the loop?</a></li>\n<li>Github Repo: <a href=\"https://github.com/gunduru/jvdt\" rel=\"nofollow\">https://github.com/gunduru/jvdt</a></li>\n<li>Test Results for double case and 100M loop (and yes all JVM details): <a href=\"https://microbenchmarks.appspot.com/runs/b1cef8d1-0e2c-4120-be61-a99faff625b4\" rel=\"nofollow\">https://microbenchmarks.appspot.com/runs/b1cef8d1-0e2c-4120-be61-a99faff625b4</a></li>\n</ol>\n\n<p><img src=\"http://i.stack.imgur.com/iLxnJ.png\" alt=\"DeclaredBefore 1,759.209 DeclaredInside 2,242.308\"></p>\n\n<ul>\n<li>DeclaredBefore 1,759.209 ns</li>\n<li>DeclaredInside 2,242.308 ns</li>\n</ul>\n\n<h2>Partial Test Code for double Declaration</h2>\n\n<p>This is not identical to the code above. If you just code a dummy loop JVM skips it, so at least you need to assign and return something. This is also recommended in Caliper docs.</p>\n\n<pre><code>@Param int size; // set automatically by framework, provided in the Main\n/**\n* Variable is declared inside the loop.\n*\n* @param reps\n* @return\n*/\npublic double timeDeclaredInside(int reps) {\n    /* dummy variable needed to workaround smart jvm */\n    double dummy = 0;\n    /* test loop */\n    for (double i = 0; i &lt;= size; i++) {\n        /* declaration and assignment */\n        double test = i;\n        /* dummy assingment to fake jvm */\n        if(i == size) {\n            dummy = test;\n        }\n    }\n    return dummy;\n}\n\n/**\n* Variable is declared before the loop.\n*\n* @param reps\n* @return\n*/\npublic double timeDeclaredBefore(int reps) {\n    /* dummy variable needed to workaround smart jvm */\n    double dummy = 0;\n    /* actual test variable */\n    double test = 0;\n    /* test loop */\n    for (double i = 0; i &lt;= size; i++) {\n        /* assignment */\n        test = i;\n        /* not actually needed here but we need consistant performance results */\n        if(i == size) {\n            dummy = test;\n        }\n    }\n    return dummy;\n}\n</code></pre>\n", "title": "Declaring variables inside or outside of a loop", "answer_id": 17360644, "link": "http://stackoverflow.com/questions/8803674/declaring-variables-inside-or-outside-of-a-loop/17360644#17360644", "tags": ["java", "optimization", "design", "while-loop"]}, {"body": "<p>Warning for almost everybody in this thread: here is a sample code where inside the loop can easily be 200 times slower on my computer with java 7 (And the memory consumption is also slightly different). But it is about allocation and not only scope.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Test\n{\n    private final static int STUFF_SIZE = 512;\n    private final static long LOOP = 10000000l;\n\n    private static class Foo\n    {\n        private long[] bigStuff = new long[STUFF_SIZE];\n\n        public Foo(long value)\n        {\n            setValue(value);\n        }\n\n        public void setValue(long value)\n        {\n            // Putting value in a random place.\n            bigStuff[(int) (value % STUFF_SIZE)] = value;\n        }\n\n        public long getValue()\n        {\n            // Retrieving whatever value.\n            return bigStuff[STUFF_SIZE / 2];\n        }\n    }\n\n    public static long test1()\n    {\n        long total = 0;\n\n        for (long i = 0; i &lt; LOOP; i++)\n        {\n            Foo foo = new Foo(i);\n            total += foo.getValue();\n        }\n\n        return total;    \n    }\n\n    public static long test2()\n    {\n        long total = 0;\n\n        Foo foo = new Foo(0);\n        for (long i = 0; i &lt; LOOP; i++)\n        {\n            foo.setValue(i);\n            total += foo.getValue();\n        }\n\n        return total;\n    }\n\n    public static void main(String[] args)\n    {\n        long start;\n\n        start = System.currentTimeMillis();\n        test1();\n        System.out.println(System.currentTimeMillis() - start);\n\n        start = System.currentTimeMillis();\n        test2();\n        System.out.println(System.currentTimeMillis() - start);\n    }\n}\n</code></pre>\n\n<p>Conclusion: depending of the size of the local variable, the difference can be huge, even with not so big variables.</p>\n\n<p>Just to say that sometimes, outside or inside the loop DOES matter.</p>\n", "title": "Declaring variables inside or outside of a loop", "answer_id": 27065039, "link": "http://stackoverflow.com/questions/8803674/declaring-variables-inside-or-outside-of-a-loop/27065039#27065039", "tags": ["java", "optimization", "design", "while-loop"]}, {"body": "<p>The <code>str</code> variable will be available and reserved some space in memory even after while executed below code.</p>\n\n<pre><code> String str;\n    while(condition){\n        str = calculateStr();\n        .....\n    }\n</code></pre>\n\n<p>The <code>str</code> variable will not be available and also the memory will be released which was allocated for <code>str</code> variable in below code.</p>\n\n<pre><code>while(condition){\n    String str = calculateStr();\n    .....\n}\n</code></pre>\n\n<p>If we followed the second one surely this will reduce our system memory and increase performance.</p>\n", "title": "Declaring variables inside or outside of a loop", "answer_id": 30095943, "link": "http://stackoverflow.com/questions/8803674/declaring-variables-inside-or-outside-of-a-loop/30095943#30095943", "tags": ["java", "optimization", "design", "while-loop"]}, {"body": "<p>I think the best resource to answer your question would be the following post:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/407255/difference-between-declaring-variables-before-or-in-loop\">Difference between declaring variables before or in loop?</a></p>\n\n<p>According to my understanding this thing would be language dependent. IIRC Java optimises this, so there isn't any difference, but JavaScript (for example) will do the whole memory allocation each time in the loop.In Java particularly I think the second would run faster when done profiling.</p>\n", "title": "Declaring variables inside or outside of a loop", "answer_id": 32501495, "link": "http://stackoverflow.com/questions/8803674/declaring-variables-inside-or-outside-of-a-loop/32501495#32501495", "tags": ["java", "optimization", "design", "while-loop"]}, {"body": "<p>One solution to this problem could be to provide a variable scope encapsulating the while loop:</p>\n\n<pre><code>{\n  // all tmp loop variables here ....\n  // ....\n  String str;\n  while(condition){\n      str = calculateStr();\n      .....\n  }\n}\n</code></pre>\n\n<p>They would be automatically de-reference when the outer scope ends.</p>\n", "title": "Declaring variables inside or outside of a loop", "answer_id": 32651951, "link": "http://stackoverflow.com/questions/8803674/declaring-variables-inside-or-outside-of-a-loop/32651951#32651951", "tags": ["java", "optimization", "design", "while-loop"]}], "question_id": 8803674}, {"body": "<p>Eclipse does not highlight matching variables for me:</p>\n\n<p><img src=\"http://i.stack.imgur.com/SFaSD.png\" alt=\"enter image description here\"></p>\n\n<p>I've already tried to change \"Mark occurrences\" via</p>\n\n<pre><code>Window -&gt; Preferences -&gt; Java -&gt; Editor -&gt; Mark Occurrences\n</code></pre>\n\n<p>but it didn't work. I am not sure why this is not working while others \nhave been able to fix the problem.</p>\n\n<p>Can anyone tell me how can I set highlighting matching variables? </p>\n\n<p>Looking for same variables with my eyes really bothering me too much.</p>\n", "tags": ["java", "eclipse"], "title": "Eclipse does not highlight matching variables", "answer_count": 12, "creation_date": 1333002159, "score": 141, "link": "http://stackoverflow.com/questions/9920080/eclipse-does-not-highlight-matching-variables", "answers": [{"body": "<p>Try:</p>\n\n<pre><code>window &gt; preferences &gt; java &gt; editor &gt; mark occurrences \n</code></pre>\n\n<p>Select all options available there.</p>\n\n<p>Also go to:</p>\n\n<pre><code>Preferences &gt; General &gt; Editors &gt; Text Editors &gt; Annotations\n</code></pre>\n\n<p>Compare the settings for 'Occurrences' and 'Write Occurrences'</p>\n\n<p>Make sure that you don't have the 'Text as higlighted' option checked for one of them.</p>\n\n<p>This should fix it.</p>\n", "title": "Eclipse does not highlight matching variables", "answer_id": 9920148, "link": "http://stackoverflow.com/questions/9920080/eclipse-does-not-highlight-matching-variables/9920148#9920148", "tags": ["java", "eclipse"]}, {"body": "<p>maybe because it not supports code highlights inside scriplets. not sure though.</p>\n\n<p>You can try using one of the eclipse plugin like <strong>'glance search'</strong> which works great.\nHere's a link for that-\n<a href=\"http://code.google.com/p/eclipse-glance/\" rel=\"nofollow\">http://code.google.com/p/eclipse-glance/</a></p>\n", "title": "Eclipse does not highlight matching variables", "answer_id": 9920155, "link": "http://stackoverflow.com/questions/9920080/eclipse-does-not-highlight-matching-variables/9920155#9920155", "tags": ["java", "eclipse"]}, {"body": "<p>For others running into this without any of the above solutions working AND you have modified the default theme, you might want to check the highlight color for occurrences.</p>\n\n<p>Preferences > General > Editors > Text Editors > Annotations</p>\n\n<p>Then select Occurrences in the Annotation Types, and change the Color Box to something other than your background color in your editor.  You can also change the Highlight to a outline box by Checking \"Text as\" and selecting \"Box\" from the drop-down box (which is easier to see various syntax colors then with the highlights)</p>\n", "title": "Eclipse does not highlight matching variables", "answer_id": 20200575, "link": "http://stackoverflow.com/questions/9920080/eclipse-does-not-highlight-matching-variables/20200575#20200575", "tags": ["java", "eclipse"]}, {"body": "<p>For <strong>PHP</strong> you can set</p>\n\n<pre><code>window &gt; preferences &gt; PHP &gt; editor &gt; mark occurrences \n</code></pre>\n\n<p>Please check first checkbox (Mark occurrences of selected element in the current file)</p>\n\n<hr>\n\n<p>And also check</p>\n\n<pre><code>Preferences &gt; General &gt; Editors &gt; Text Editors &gt; Annotations\n</code></pre>\n\n<p>'Occurrences' and 'Write Occurrences' with different style and color</p>\n", "title": "Eclipse does not highlight matching variables", "answer_id": 20560511, "link": "http://stackoverflow.com/questions/9920080/eclipse-does-not-highlight-matching-variables/20560511#20560511", "tags": ["java", "eclipse"]}, {"body": "<p>I just unchecked all, applied, checked all again, applied and it worked :) hopefully helps others.</p>\n", "title": "Eclipse does not highlight matching variables", "answer_id": 20830301, "link": "http://stackoverflow.com/questions/9920080/eclipse-does-not-highlight-matching-variables/20830301#20830301", "tags": ["java", "eclipse"]}, {"body": "<p>The only that worked for me was:</p>\n\n<pre><code>Java &gt; Editor &gt; Mark Occurrences:\nCheck \"Mark occurrences of te selected element in the current file.\"\n... and maybe all the ones below.\n</code></pre>\n", "title": "Eclipse does not highlight matching variables", "answer_id": 21611704, "link": "http://stackoverflow.com/questions/9920080/eclipse-does-not-highlight-matching-variables/21611704#21611704", "tags": ["java", "eclipse"]}, {"body": "<p>Eclipse Toolbar > Windows > Preferences > General (Right side) > Editors (Right side) > Text Editors (Right side) > Annotations (Right side)</p>\n\n<p>For Occurrences and Write Occurrences, make sure you DO have the 'Text as highlighted' option checked for all of them. See screenshot below:</p>\n\n<p><img src=\"http://i.stack.imgur.com/Lw9zl.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/akK3J.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/viQ7H.png\" alt=\"enter image description here\"></p>\n", "title": "Eclipse does not highlight matching variables", "answer_id": 24747057, "link": "http://stackoverflow.com/questions/9920080/eclipse-does-not-highlight-matching-variables/24747057#24747057", "tags": ["java", "eclipse"]}, {"body": "<p>If highlighting is not working for large files, scalability mode has to be off.\nProperties / (c/c++) / Editor / Scalability</p>\n", "title": "Eclipse does not highlight matching variables", "answer_id": 29273247, "link": "http://stackoverflow.com/questions/9920080/eclipse-does-not-highlight-matching-variables/29273247#29273247", "tags": ["java", "eclipse"]}, {"body": "<p>I wish I could have read the response by @J\u00e1n Laz\u00e1r.</p>\n\n<p>In addition to all the configurations mentioned in the accepted answer, below setting solved my misery:</p>\n\n<p><strong>For large files the scalability mode must be turned off. Enabling scalability mode will disable reference highlighting</strong>.</p>\n\n<p><img src=\"http://i.stack.imgur.com/VJygk.png\" alt=\"enter image description here\"></p>\n\n<p>PS: @Rob Hruska It would be great if this point is added in the accepted answer. Most of the readers do not bother to read the last response.</p>\n", "title": "Eclipse does not highlight matching variables", "answer_id": 29803356, "link": "http://stackoverflow.com/questions/9920080/eclipse-does-not-highlight-matching-variables/29803356#29803356", "tags": ["java", "eclipse"]}, {"body": "<p>Sometimes problems in your <code>project build path</code> can cause this, make sure you resolve it first, in my case the prolem was :</p>\n\n<p><img src=\"http://i.stack.imgur.com/gas6J.jpg\" alt=\"enter image description here\"></p>\n\n<p>And when fix it highlights come back.</p>\n", "title": "Eclipse does not highlight matching variables", "answer_id": 30051614, "link": "http://stackoverflow.com/questions/9920080/eclipse-does-not-highlight-matching-variables/30051614#30051614", "tags": ["java", "eclipse"]}, {"body": "<p>I was having the same issue and the \"make occurrences\" and \"annotations\" solutions above did not help. If you are using Maven, I had to convert the project to a Maven project (right click on it in the Package Explorer and go down to configure), then build the project. Then the syntax coloring and highlighting worked correctly.</p>\n", "title": "Eclipse does not highlight matching variables", "answer_id": 36432351, "link": "http://stackoverflow.com/questions/9920080/eclipse-does-not-highlight-matching-variables/36432351#36432351", "tags": ["java", "eclipse"]}, {"body": "<p>I had this issue with Eclipse Mars for PHP developers, 64 bit edition for Windows. I now discovered that highlighting works out-of-the-box with the 32 bit version. Even with a fresh download of the equivalent 64 bit build, highlighting does not work. So I will switch back to 32 bit (this is actually not the first problem I observe with Eclipse 64 bit).</p>\n\n<p><strong>Edit:</strong> </p>\n\n<p>I thought this was the solution, so I installed the 32 bit version in C:\\Program Files (x86) and set a shortcut in the \"Start\" menu. When I started Eclipse from there, highlighting again ceased to work. I now got it working again by deleting the .metadata directory in the workspace (i.e. resetting the workspace settings) and re-importing the projects.</p>\n", "title": "Eclipse does not highlight matching variables", "answer_id": 37189160, "link": "http://stackoverflow.com/questions/9920080/eclipse-does-not-highlight-matching-variables/37189160#37189160", "tags": ["java", "eclipse"]}], "question_id": 9920080}, {"body": "<p>I'm trying to parse a JSON string like this one</p>\n\n<pre><code>[\n   {\n      \"updated_at\":\"2012-03-02 21:06:01\",\n      \"fetched_at\":\"2012-03-02 21:28:37.728840\",\n      \"description\":null,\n      \"language\":null,\n      \"title\":\"JOHN\",\n      \"url\":\"http://rus.JOHN.JOHN/rss.php\",\n      \"icon_url\":null,\n      \"logo_url\":null,\n      \"id\":\"4f4791da203d0c2d76000035\",\n      \"modified\":\"2012-03-02 23:28:58.840076\"\n   },\n   {\n      \"updated_at\":\"2012-03-02 14:07:44\",\n      \"fetched_at\":\"2012-03-02 21:28:37.033108\",\n      \"description\":null,\n      \"language\":null,\n      \"title\":\"PETER\",\n      \"url\":\"http://PETER.PETER.lv/rss.php\",\n      \"icon_url\":null,\n      \"logo_url\":null,\n      \"id\":\"4f476f61203d0c2d89000253\",\n      \"modified\":\"2012-03-02 23:28:57.928001\"\n   }\n]\n</code></pre>\n\n<p>into a list of objects.</p>\n\n<pre><code>List&lt;channelSearchEnum&gt; lcs = (List&lt;channelSearchEnum&gt;) new Gson().fromJson( jstring , channelSearchEnum.class);\n</code></pre>\n\n<p>Here's an object class I'm using.</p>\n\n<pre><code>import com.google.gson.annotations.SerializedName;\n\npublic class channelSearchEnum {\n\n\n\n@SerializedName(\"updated_at\")\nprivate String updated_at;\n\n@SerializedName(\"fetched_at\")\nprivate String fetched_at;\n\n@SerializedName(\"description\")\nprivate String description;\n\n@SerializedName(\"language\")\nprivate String language;\n\n@SerializedName(\"title\")\nprivate String title;\n\n@SerializedName(\"url\")\nprivate String url;\n\n@SerializedName(\"icon_url\")\nprivate String icon_url;\n\n@SerializedName(\"logo_url\")\nprivate String logo_url;\n\n@SerializedName(\"id\")\nprivate String id;\n\n@SerializedName(\"modified\")\nprivate String modified;\n\npublic final String get_Updated_at() {\n    return this.updated_at;\n}\n\npublic final String get_Fetched_at() {\n    return this.fetched_at;\n}\n\npublic final String get_Description() {\n    return this.description;\n}\n\npublic final String get_Language() {\n    return this.language;\n}\n\npublic final String get_Title() {\n    return this.title;\n}\n\npublic final String get_Url() {\n    return this.url;\n}\n\npublic final String get_Icon_url() {\n    return this.icon_url;\n}\n\npublic final String get_Logo_url() {\n    return this.logo_url;\n}\n\npublic final String get_Id() {\n    return this.id;\n}\n\npublic final String get_Modified() {\n    return this.modified;\n}\n\n        }\n</code></pre>\n\n<p>But it throws me with</p>\n\n<pre><code>com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was BEGIN_ARRAY at line 1 column 2\n</code></pre>\n\n<p>Any ideas how should I fix it?</p>\n", "tags": ["java", "android", "gson"], "title": "GSON throwing &quot;Expected BEGIN_OBJECT but was BEGIN_ARRAY&quot;?", "answer_count": 5, "creation_date": 1331112268, "score": 141, "link": "http://stackoverflow.com/questions/9598707/gson-throwing-expected-begin-object-but-was-begin-array", "answers": [{"body": "<p>The problem is you're telling <code>Gson</code> you have an object of your type. You don't. You have an array of objects of your type. You can't just try and cast the result like that and expect it to magically work ;)</p>\n\n<p>The User guide for <code>Gson</code> Explains how to deal with this:</p>\n\n<p><a href=\"https://sites.google.com/site/gson/gson-user-guide\">https://sites.google.com/site/gson/gson-user-guide</a></p>\n\n<p>This will work:</p>\n\n<pre><code>channelSearchEnum[] enums = gson.fromJson(yourJson, channelSearchEnum[].class);\n</code></pre>\n\n<p>But this is better:</p>\n\n<pre><code>Type collectionType = new TypeToken&lt;Collection&lt;channelSearchEnum&gt;&gt;(){}.getType();\nCollection&lt;channelSearchEnum&gt; enums = gson.fromJson(yourJson, collectionType);\n</code></pre>\n", "title": "GSON throwing &quot;Expected BEGIN_OBJECT but was BEGIN_ARRAY&quot;?", "answer_id": 9598988, "link": "http://stackoverflow.com/questions/9598707/gson-throwing-expected-begin-object-but-was-begin-array/9598988#9598988", "tags": ["java", "android", "gson"]}, {"body": "<p>according to <a href=\"http://sites.google.com/site/gson/gson-user-guide#TOC-Collections-Examples\" rel=\"nofollow\">GSON User guide</a>, you cannot.</p>\n\n<blockquote>\n  <p><strong>Collections Limitations</strong></p>\n  \n  <p>Can serialize collection of arbitrary objects but can not deserialize from it. Because there is no way for the user to indicate the type of the resulting object</p>\n</blockquote>\n", "title": "GSON throwing &quot;Expected BEGIN_OBJECT but was BEGIN_ARRAY&quot;?", "answer_id": 9599046, "link": "http://stackoverflow.com/questions/9598707/gson-throwing-expected-begin-object-but-was-begin-array/9599046#9599046", "tags": ["java", "android", "gson"]}, {"body": "<p>The problem is that you are asking for an object of type <code>channelSearchEnum</code> but what you actually have is an object of type <code>List&lt;channelSearchEnum&gt;</code>. </p>\n\n<p>You can achieve this with:</p>\n\n<pre><code>Type collectionType = new TypeToken&lt;List&lt;channelSearchEnum&gt;&gt;(){}.getType();\nList&lt;channelSearchEnum&gt; lcs = (List&lt;channelSearchEnum&gt;) new Gson()\n               .fromJson( jstring , collectionType);\n</code></pre>\n", "title": "GSON throwing &quot;Expected BEGIN_OBJECT but was BEGIN_ARRAY&quot;?", "answer_id": 9599112, "link": "http://stackoverflow.com/questions/9598707/gson-throwing-expected-begin-object-but-was-begin-array/9599112#9599112", "tags": ["java", "android", "gson"]}, {"body": "<p>Alternative could be</p>\n\n<p>to make your response look like</p>\n\n<p><strong>myCustom_JSONResponse</strong></p>\n\n<pre><code>{\"master\":[\n   {\n      \"updated_at\":\"2012-03-02 21:06:01\",\n      \"fetched_at\":\"2012-03-02 21:28:37.728840\",\n      \"description\":null,\n      \"language\":null,\n      \"title\":\"JOHN\",\n      \"url\":\"http://rus.JOHN.JOHN/rss.php\",\n      \"icon_url\":null,\n      \"logo_url\":null,\n      \"id\":\"4f4791da203d0c2d76000035\",\n      \"modified\":\"2012-03-02 23:28:58.840076\"\n   },\n   {\n      \"updated_at\":\"2012-03-02 14:07:44\",\n      \"fetched_at\":\"2012-03-02 21:28:37.033108\",\n      \"description\":null,\n      \"language\":null,\n      \"title\":\"PETER\",\n      \"url\":\"http://PETER.PETER.lv/rss.php\",\n      \"icon_url\":null,\n      \"logo_url\":null,\n      \"id\":\"4f476f61203d0c2d89000253\",\n      \"modified\":\"2012-03-02 23:28:57.928001\"\n   }\n]\n}\n</code></pre>\n\n<p>instead of </p>\n\n<p><strong>server_JSONResponse</strong></p>\n\n<pre><code>[\n   {\n      \"updated_at\":\"2012-03-02 21:06:01\",\n      \"fetched_at\":\"2012-03-02 21:28:37.728840\",\n      \"description\":null,\n      \"language\":null,\n      \"title\":\"JOHN\",\n      \"url\":\"http://rus.JOHN.JOHN/rss.php\",\n      \"icon_url\":null,\n      \"logo_url\":null,\n      \"id\":\"4f4791da203d0c2d76000035\",\n      \"modified\":\"2012-03-02 23:28:58.840076\"\n   },\n   {\n      \"updated_at\":\"2012-03-02 14:07:44\",\n      \"fetched_at\":\"2012-03-02 21:28:37.033108\",\n      \"description\":null,\n      \"language\":null,\n      \"title\":\"PETER\",\n      \"url\":\"http://PETER.PETER.lv/rss.php\",\n      \"icon_url\":null,\n      \"logo_url\":null,\n      \"id\":\"4f476f61203d0c2d89000253\",\n      \"modified\":\"2012-03-02 23:28:57.928001\"\n   }\n]\n</code></pre>\n\n<p><strong>CODE</strong></p>\n\n<pre><code>  String server_JSONResponse =.... // the string in which you are getting your JSON Response after hitting URL\nString myCustom_JSONResponse=\"\";// in which we will keep our response after adding object element to it\n     MyClass apiResponse = new MyClass();\n\n     myCustom_JSONResponse=\"{\\\"master\\\":\"+server_JSONResponse+\"}\";\n\n\n\n    apiResponse = gson.fromJson(myCustom_JSONResponse, MyClass .class);\n</code></pre>\n\n<p>After this it will be just any other <code>GSON Parsing</code></p>\n", "title": "GSON throwing &quot;Expected BEGIN_OBJECT but was BEGIN_ARRAY&quot;?", "answer_id": 19700435, "link": "http://stackoverflow.com/questions/9598707/gson-throwing-expected-begin-object-but-was-begin-array/19700435#19700435", "tags": ["java", "android", "gson"]}, {"body": "<p>In my case JSON string:</p>\n\n<pre><code>[{\"category\":\"College Affordability\",\n  \"uid\":\"150151\",\n  \"body\":\"Ended more than $60 billion in wasteful subsidies for big banks and used the savings to put the cost of college within reach for more families.\",\n  \"url\":\"http:\\/\\/www.whitehouse.gov\\/economy\\/middle-class\\/helping middle-class-families-pay-for-college\",\n  \"url_title\":\"ending subsidies for student loan lenders\",\n  \"type\":\"Progress\",\n  \"path\":\"node\\/150385\"}]\n</code></pre>\n\n<p>and I print \"category\" and \"url_title\" in recycleview</p>\n\n<p>Datum.class</p>\n\n<pre><code>import com.google.gson.annotations.Expose;\nimport com.google.gson.annotations.SerializedName;\n\npublic class Datum {\n@SerializedName(\"category\")\n@Expose\nprivate String category;\n@SerializedName(\"uid\")\n@Expose\nprivate String uid;\n@SerializedName(\"url_title\")\n@Expose\nprivate String urlTitle;\n\n/**\n * @return The category\n */\npublic String getCategory() {\n    return category;\n}\n\n/**\n * @param category The category\n */\npublic void setCategory(String category) {\n    this.category = category;\n}\n\n/**\n * @return The uid\n */\npublic String getUid() {\n    return uid;\n}\n\n/**\n * @param uid The uid\n */\npublic void setUid(String uid) {\n    this.uid = uid;\n}\n\n/**\n * @return The urlTitle\n */\npublic String getUrlTitle() {\n    return urlTitle;\n}\n\n/**\n * @param urlTitle The url_title\n */\npublic void setUrlTitle(String urlTitle) {\n    this.urlTitle = urlTitle;\n}\n\n}\n</code></pre>\n\n<p>RequestInterface</p>\n\n<pre><code>import java.util.List;\n\nimport retrofit2.Call;\nimport retrofit2.http.GET;\n</code></pre>\n\n<p>/**\n * Created by Shweta.Chauhan on 13/07/16.\n */</p>\n\n<pre><code>public interface RequestInterface {\n\n@GET(\"facts/json/progress/all\")\nCall&lt;List&lt;Datum&gt;&gt; getJSON();\n</code></pre>\n\n<p>}</p>\n\n<p>DataAdapter</p>\n\n<pre><code>import android.content.Context;\nimport android.support.v7.widget.RecyclerView;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.TextView;\n\nimport java.util.ArrayList;\nimport java.util.List;\n</code></pre>\n\n<p>/**\n * Created by Shweta.Chauhan on 13/07/16.\n */</p>\n\n<pre><code>public class DataAdapter extends RecyclerView.Adapter&lt;DataAdapter.MyViewHolder&gt;{\n\nprivate Context context;\nprivate List&lt;Datum&gt; dataList;\n\npublic DataAdapter(Context context, List&lt;Datum&gt; dataList) {\n    this.context = context;\n    this.dataList = dataList;\n}\n\n@Override\npublic MyViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n    View view= LayoutInflater.from(parent.getContext()).inflate(R.layout.data,parent,false);\n    return new MyViewHolder(view);\n}\n\n@Override\npublic void onBindViewHolder(MyViewHolder holder, int position) {\n    holder.categoryTV.setText(dataList.get(position).getCategory());\n    holder.urltitleTV.setText(dataList.get(position).getUrlTitle());\n\n}\n\n@Override\npublic int getItemCount() {\n    return dataList.size();\n}\n\npublic class MyViewHolder extends RecyclerView.ViewHolder{\n\n    public TextView categoryTV, urltitleTV;\n\n    public MyViewHolder(View itemView) {\n        super(itemView);\n        categoryTV = (TextView) itemView.findViewById(R.id.txt_category);\n        urltitleTV = (TextView)     itemView.findViewById(R.id.txt_urltitle);\n    }\n}\n}\n</code></pre>\n\n<p>and finally MainActivity.java</p>\n\n<pre><code>import android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.support.v7.widget.LinearLayoutManager;\nimport android.support.v7.widget.RecyclerView;\nimport android.util.Log;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\n\nimport retrofit2.Call;\nimport retrofit2.Callback;\nimport retrofit2.Response;\nimport retrofit2.Retrofit;\nimport retrofit2.converter.gson.GsonConverterFactory;\n\npublic class MainActivity extends AppCompatActivity {\n\nprivate RecyclerView recyclerView;\nprivate DataAdapter dataAdapter;\nprivate List&lt;Datum&gt; dataArrayList;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    initViews();\n}\n\nprivate void initViews(){\n    recyclerView=(RecyclerView) findViewById(R.id.recycler_view);\n    recyclerView.setLayoutManager(new LinearLayoutManager(getApplicationContext()));\n    loadJSON();\n}\n\nprivate void loadJSON(){\n    dataArrayList = new ArrayList&lt;&gt;();\n    Retrofit retrofit=new Retrofit.Builder().baseUrl(\"https://www.whitehouse.gov/\").addConverterFactory(GsonConverterFactory.create()).build();\n    RequestInterface requestInterface=retrofit.create(RequestInterface.class);\n    Call&lt;List&lt;Datum&gt;&gt; call= requestInterface.getJSON();\n    call.enqueue(new Callback&lt;List&lt;Datum&gt;&gt;() {\n        @Override\n        public void onResponse(Call&lt;List&lt;Datum&gt;&gt; call, Response&lt;List&lt;Datum&gt;&gt; response) {\n            dataArrayList = response.body();\n            dataAdapter=new DataAdapter(getApplicationContext(),dataArrayList);\n            recyclerView.setAdapter(dataAdapter);\n        }\n\n        @Override\n        public void onFailure(Call&lt;List&lt;Datum&gt;&gt; call, Throwable t) {\n            Log.e(\"Error\",t.getMessage());\n        }\n    });\n}\n}\n</code></pre>\n", "title": "GSON throwing &quot;Expected BEGIN_OBJECT but was BEGIN_ARRAY&quot;?", "answer_id": 38351872, "link": "http://stackoverflow.com/questions/9598707/gson-throwing-expected-begin-object-but-was-begin-array/38351872#38351872", "tags": ["java", "android", "gson"]}], "question_id": 9598707}, {"body": "<p>I looked at the default Zip library that comes with the JDK and the Apache compression libs and I am unhappy with them for 3 reasons:</p>\n\n<ol>\n<li><p>They are bloated and have bad API design. I have to <a href=\"http://www.codejava.net/java-se/file-io/programmatically-extract-a-zip-file-using-java\">write 50 lines of boiler plate byte array output, zip input, file out streams and close relevant streams and catch exceptions and move byte buffers on my own</a>? Why can't I have a simple API that looks like this <code>Zipper.unzip(InputStream zipFile, File targetDirectory, String password = null)</code> and <code>Zipper.zip(File targetDirectory, String password = null)</code> that just works?</p></li>\n<li><p>It seems zipping unzipping destroys file meta-data and password handling is broken.</p></li>\n<li><p>Also, all the libraries I tried were 2-3x slow compared to the command line zip tools I get with UNIX?</p></li>\n</ol>\n\n<p>For me (2) and (3) are minor points but I really want a good tested library with a one-line interface.</p>\n", "tags": ["compression", "zip", "unzip", "java"], "title": "What is a good Java library to zip/unzip files?", "answer_count": 9, "creation_date": 1329466649, "score": 139, "link": "http://stackoverflow.com/questions/9324933/what-is-a-good-java-library-to-zip-unzip-files", "answers": [{"body": "<p>Did you have a look at <a href=\"http://commons.apache.org/vfs/\" rel=\"nofollow\">http://commons.apache.org/vfs/</a> ? It claims to simplify a lot of things for you. But I've never used it in a project.</p>\n\n<p>I also am not aware of Java-Native compression libs other than the JDK or Apache Compression.</p>\n\n<p>I remember once we ripped some features out of Apache Ant - they have a lot of utils for compression / decompression built in.</p>\n\n<p>Sample code with VFS would look like:</p>\n\n<pre><code>File zipFile = ...;\nFile outputDir = ...;\nFileSystemManager fsm = VFS.getManager();\nURI zip = zipFile.toURI();\nFileObject packFileObject = fsm.resolveFile(packLocation.toString());\nFileObject to = fsm.toFileObject(destDir);\nFileObject zipFS;\ntry {\n    zipFS = fsm.createFileSystem(packFileObject);\n    fsm.toFileObject(outputDir).copyFrom(zipFS, new AllFileSelector());\n} finally {\n    zipFS.close();\n}\n</code></pre>\n", "title": "What is a good Java library to zip/unzip files?", "answer_id": 9325015, "link": "http://stackoverflow.com/questions/9324933/what-is-a-good-java-library-to-zip-unzip-files/9325015#9325015", "tags": ["compression", "zip", "unzip", "java"]}, {"body": "<p>Extract zip file and all its subfolders, using only the JDK:</p>\n\n<pre><code>private void extractFolder(String zipFile,String extractFolder) \n{\n    try\n    {\n        int BUFFER = 2048;\n        File file = new File(zipFile);\n\n        ZipFile zip = new ZipFile(file);\n        String newPath = extractFolder;\n\n        new File(newPath).mkdir();\n        Enumeration zipFileEntries = zip.entries();\n\n        // Process each entry\n        while (zipFileEntries.hasMoreElements())\n        {\n            // grab a zip file entry\n            ZipEntry entry = (ZipEntry) zipFileEntries.nextElement();\n            String currentEntry = entry.getName();\n\n            File destFile = new File(newPath, currentEntry);\n            //destFile = new File(newPath, destFile.getName());\n            File destinationParent = destFile.getParentFile();\n\n            // create the parent directory structure if needed\n            destinationParent.mkdirs();\n\n            if (!entry.isDirectory())\n            {\n                BufferedInputStream is = new BufferedInputStream(zip\n                .getInputStream(entry));\n                int currentByte;\n                // establish buffer for writing file\n                byte data[] = new byte[BUFFER];\n\n                // write the current file to disk\n                FileOutputStream fos = new FileOutputStream(destFile);\n                BufferedOutputStream dest = new BufferedOutputStream(fos,\n                BUFFER);\n\n                // read and write until last byte is encountered\n                while ((currentByte = is.read(data, 0, BUFFER)) != -1) {\n                    dest.write(data, 0, currentByte);\n                }\n                dest.flush();\n                dest.close();\n                is.close();\n            }\n\n\n        }\n    }\n    catch (Exception e) \n    {\n        Log(\"ERROR: \"+e.getMessage());\n    }\n\n}\n</code></pre>\n\n<p>Zip files and all its subfolders:</p>\n\n<pre><code> private void addFolderToZip(File folder, ZipOutputStream zip, String baseName) throws IOException {\n    File[] files = folder.listFiles();\n    for (File file : files) {\n        if (file.isDirectory()) {\n            addFolderToZip(file, zip, baseName);\n        } else {\n            String name = file.getAbsolutePath().substring(baseName.length());\n            ZipEntry zipEntry = new ZipEntry(name);\n            zip.putNextEntry(zipEntry);\n            IOUtils.copy(new FileInputStream(file), zip);\n            zip.closeEntry();\n        }\n    }\n}\n</code></pre>\n", "title": "What is a good Java library to zip/unzip files?", "answer_id": 9325036, "link": "http://stackoverflow.com/questions/9324933/what-is-a-good-java-library-to-zip-unzip-files/9325036#9325036", "tags": ["compression", "zip", "unzip", "java"]}, {"body": "<p>A very nice project is <a href=\"http://truezip.java.net\">TrueZip</a>. </p>\n\n<blockquote>\n  <p>TrueZIP is a Java based plug-in framework for virtual file systems (VFS) which provides transparent access to archive files as if they were just plain directories</p>\n</blockquote>\n\n<p>For example (from the <a href=\"http://truezip.java.net/truezip-file/index.html\">website</a>):</p>\n\n<pre><code>File file = new TFile(\"archive.tar.gz/README.TXT\");\nOutputStream out = new TFileOutputStream(file);\ntry {\n   // Write archive entry contents here.\n   ...\n} finally {\n   out.close();\n}\n</code></pre>\n", "title": "What is a good Java library to zip/unzip files?", "answer_id": 9325098, "link": "http://stackoverflow.com/questions/9324933/what-is-a-good-java-library-to-zip-unzip-files/9325098#9325098", "tags": ["compression", "zip", "unzip", "java"]}, {"body": "<p>With <a href=\"https://commons.apache.org/proper/commons-io/\" rel=\"nofollow\">Apache Commons-IO</a>'s <a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/IOUtils.html\" rel=\"nofollow\"><code>IOUtils</code></a> you can do this:</p>\n\n<pre><code>java.util.zip.ZipFile zipFile = new ZipFile(file);\ntry {\n  Enumeration&lt;? extends ZipEntry&gt; entries = zipFile.entries();\n  while (entries.hasMoreElements()) {\n    ZipEntry entry = entries.nextElement();\n    File entryDestination = new File(outputDir,  entry.getName());\n    if (entry.isDirectory()) {\n        entryDestination.mkdirs();\n    } else {\n        entryDestination.getParentFile().mkdirs();\n        InputStream in = zipFile.getInputStream(entry);\n        OutputStream out = new FileOutputStream(entryDestination);\n        IOUtils.copy(in, out);\n        IOUtils.closeQuietly(in);\n        out.close();\n    }\n  }\n} finally {\n  zipFile.close();\n}\n</code></pre>\n\n<p>It's still some boilerplate code, but it has only 1 non-exotic dependency: <a href=\"http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22commons-io%22%20AND%20a%3A%22commons-io%22\" rel=\"nofollow\">Commons-IO</a></p>\n", "title": "What is a good Java library to zip/unzip files?", "answer_id": 13912353, "link": "http://stackoverflow.com/questions/9324933/what-is-a-good-java-library-to-zip-unzip-files/13912353#13912353", "tags": ["compression", "zip", "unzip", "java"]}, {"body": "<p>I know its late and there are lots of answers but this <a href=\"http://www.lingala.net/zip4j/\">zip4j</a> is one of the best libraries for zipping I have used. Its simple (no boiler code) and can easily handle password protected files.</p>\n\n<pre><code>import net.lingala.zip4j.exception.ZipException;\nimport net.lingala.zip4j.core.ZipFile;\n\n\npublic static void unzip(){\n    String source = \"some/compressed/file.zip\";\n    String destination = \"some/destination/folder\";\n    String password = \"password\";\n\n    try {\n         ZipFile zipFile = new ZipFile(source);\n         if (zipFile.isEncrypted()) {\n            zipFile.setPassword(password);\n         }\n         zipFile.extractAll(destination);\n    } catch (ZipException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>The Maven dependency is:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;net.lingala.zip4j&lt;/groupId&gt;\n    &lt;artifactId&gt;zip4j&lt;/artifactId&gt;\n    &lt;version&gt;1.3.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n", "title": "What is a good Java library to zip/unzip files?", "answer_id": 14656534, "link": "http://stackoverflow.com/questions/9324933/what-is-a-good-java-library-to-zip-unzip-files/14656534#14656534", "tags": ["compression", "zip", "unzip", "java"]}, {"body": "<p>Another option that you can check out is <strong>zt-zip</strong> available from Maven central and project page at <a href=\"https://github.com/zeroturnaround/zt-zip\">https://github.com/zeroturnaround/zt-zip</a></p>\n\n<p>It has the standard packing and unpacking functionality (on streams and on filesystem) + lots of helper methods to test for files in an archive or add/remove entries.</p>\n", "title": "What is a good Java library to zip/unzip files?", "answer_id": 16319942, "link": "http://stackoverflow.com/questions/9324933/what-is-a-good-java-library-to-zip-unzip-files/16319942#16319942", "tags": ["compression", "zip", "unzip", "java"]}, {"body": "<p>Another option is <a href=\"http://www.jcraft.com/jzlib/\" rel=\"nofollow\">JZlib</a>. In my experience, it's less \"file-centered\" than zip4J, so if you need to work on in-memory blobs rather than files, you may want to take a look at it.</p>\n", "title": "What is a good Java library to zip/unzip files?", "answer_id": 18911608, "link": "http://stackoverflow.com/questions/9324933/what-is-a-good-java-library-to-zip-unzip-files/18911608#18911608", "tags": ["compression", "zip", "unzip", "java"]}, {"body": "<p>There's a full example here for zipping and unzipping files recursively:\n<a href=\"http://developer-tips.hubpages.com/hub/Zipping-and-Unzipping-Nested-Directories-in-Java-using-Apache-Commons-Compress\" rel=\"nofollow\">http://developer-tips.hubpages.com/hub/Zipping-and-Unzipping-Nested-Directories-in-Java-using-Apache-Commons-Compress</a></p>\n", "title": "What is a good Java library to zip/unzip files?", "answer_id": 28523429, "link": "http://stackoverflow.com/questions/9324933/what-is-a-good-java-library-to-zip-unzip-files/28523429#28523429", "tags": ["compression", "zip", "unzip", "java"]}, {"body": "<p>I am super late &amp; the problem is already solved. Actually, here my intention is to help the newers with implementation.</p>\n\n<p>I have used <a href=\"http://www.lingala.net/zip4j/\" rel=\"nofollow\">zip4j</a>; download it from <a href=\"http://www.lingala.net/zip4j/download.php\" rel=\"nofollow\">here</a>, and add to your project <a href=\"https://www.genuitec.com/products/myeclipse/learning-center/javaee/adding-libraries-to-the-java-project-build-path/\" rel=\"nofollow\">build path</a>. The <code>class</code> bellow can compress and extract any file or folder, with or without password protection-</p>\n\n<pre><code>import java.io.File;\nimport net.lingala.zip4j.model.ZipParameters;\nimport net.lingala.zip4j.util.Zip4jConstants;\nimport net.lingala.zip4j.core.ZipFile;  \n\npublic class Compressor {\n    public static void zip(String targetPath, String destinationFilePath, String password) {\n        try {\n            ZipParameters parameters = new ZipParameters();\n            parameters.setCompressionMethod(Zip4jConstants.COMP_DEFLATE);\n            parameters.setCompressionLevel(Zip4jConstants.DEFLATE_LEVEL_NORMAL);\n\n            if(password.length()&gt;0){\n                parameters.setEncryptFiles(true);\n                parameters.setEncryptionMethod(Zip4jConstants.ENC_METHOD_AES);\n                parameters.setAesKeyStrength(Zip4jConstants.AES_STRENGTH_256);\n                parameters.setPassword(password);\n            }\n\n            ZipFile zipFile = new ZipFile(destinationFilePath);\n\n            File targetFile = new File(targetPath);\n            if(targetFile.isFile()){\n                zipFile.addFile(targetFile, parameters);\n            }else if(targetFile.isDirectory()){\n                zipFile.addFolder(targetFile, parameters);\n            }\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static void unzip(String targetZipFilePath, String destinationFolderPath, String password) {\n        try {\n            ZipFile zipFile = new ZipFile(targetZipFilePath);\n            if (zipFile.isEncrypted()) {\n                zipFile.setPassword(password);\n            }\n            zipFile.extractAll(destinationFolderPath);\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    //test\n    public static void main(String[] args) {\n        String targetPath = \"target\\\\Folder\\\\Path\"; //it can be a file or a folder path\n        String zipFilePath = \"zip\\\\File\\\\Path\";\n        String unzippedFolderPath = \"destination\\\\Folder\\\\Path\";\n        String password = \"your_password\"; //keep it EMPTY(\"\") for applying no password protection\n\n        Compressor.zip(targetPath, zipFilePath, password);\n        Compressor.unzip(zipFilePath, unzippedFolderPath, password);\n    }\n}\n</code></pre>\n\n<p>Hope it will help.</p>\n", "title": "What is a good Java library to zip/unzip files?", "answer_id": 29116934, "link": "http://stackoverflow.com/questions/9324933/what-is-a-good-java-library-to-zip-unzip-files/29116934#29116934", "tags": ["compression", "zip", "unzip", "java"]}], "question_id": 9324933}, {"body": "<p>I've created a simple console Java application that is built with Maven. Is there a way that the main class (which doesn't require any arguments) can be run from the command-line using a maven command like:</p>\n\n<pre><code>mvn run-app com.example.MainClass\n</code></pre>\n", "tags": ["java", "maven", "maven-2"], "title": "run main class of Maven project", "answer_count": 2, "creation_date": 1332534201, "score": 137, "link": "http://stackoverflow.com/questions/9846046/run-main-class-of-maven-project", "answers": [{"body": "<p>Try the <a href=\"http://www.mojohaus.org/exec-maven-plugin/usage.html\">maven-exec-plugin</a>. From there:</p>\n\n<pre><code>mvn exec:java -Dexec.mainClass=\"com.example.Main\"\n</code></pre>\n\n<p>This will run your class in the JVM.  You can use <code>-Dexec.args=\"arg0 arg1\"</code> to pass arguments.</p>\n\n<p>If you're doing this regularly, you can add the parameters into the pom.xml as well:</p>\n\n<pre><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n  &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n  &lt;version&gt;1.2.1&lt;/version&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;java&lt;/goal&gt;\n      &lt;/goals&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n  &lt;configuration&gt;\n    &lt;mainClass&gt;com.example.Main&lt;/mainClass&gt;\n    &lt;arguments&gt;\n      &lt;argument&gt;foo&lt;/argument&gt;\n      &lt;argument&gt;bar&lt;/argument&gt;\n    &lt;/arguments&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n", "title": "run main class of Maven project", "answer_id": 9846103, "link": "http://stackoverflow.com/questions/9846046/run-main-class-of-maven-project/9846103#9846103", "tags": ["java", "maven", "maven-2"]}, {"body": "<p>Although maven exec does the trick here, I found it pretty poor for a real test. While waiting for <a href=\"https://github.com/mrdon/maven-cli-plugin/wiki/\" rel=\"nofollow\">maven shell</a>, and hoping this could help others, I finally came out to this repo <a href=\"https://github.com/albfan/mvnexec\" rel=\"nofollow\">mvnexec</a></p>\n\n<p>Clone it, and symlink the <a href=\"https://raw.githubusercontent.com/albfan/mvnexec/master/mvnexec\" rel=\"nofollow\">script</a> somewhere in your path. I use <code>~/bin/mvnexec</code>, as I have <code>~/bin</code> in my path. I think <strong>mvnexec</strong> is a good name for the script, but is up to you to change the symlink...</p>\n\n<p>Launch it from the root of your project, where you can see src and target dirs.</p>\n\n<p>The script search for classes with main method, offering a select to choose one (Example with mavenized <a href=\"https://github.com/albfan/jmeld\" rel=\"nofollow\">JMeld</a> project)</p>\n\n<pre><code>$ mvnexec \n 1) org.jmeld.ui.JMeldComponent\n 2) org.jmeld.ui.text.FileDocument\n 3) org.jmeld.JMeld\n 4) org.jmeld.util.UIDefaultsPrint\n 5) org.jmeld.util.PrintProperties\n 6) org.jmeld.util.file.DirectoryDiff\n 7) org.jmeld.util.file.VersionControlDiff\n 8) org.jmeld.vc.svn.InfoCmd\n 9) org.jmeld.vc.svn.DiffCmd\n10) org.jmeld.vc.svn.BlameCmd\n11) org.jmeld.vc.svn.LogCmd\n12) org.jmeld.vc.svn.CatCmd\n13) org.jmeld.vc.svn.StatusCmd\n14) org.jmeld.vc.git.StatusCmd\n15) org.jmeld.vc.hg.StatusCmd\n16) org.jmeld.vc.bzr.StatusCmd\n17) org.jmeld.Main\n18) org.apache.commons.jrcs.tools.JDiff\n#? \n</code></pre>\n\n<p>If one is selected (typing number), you are prompt for arguments (you can avoid with <code>mvnexec -P</code>)</p>\n\n<p>By default it compiles project every run. but you can avoid that using <code>mvnexec -B</code></p>\n\n<p>It allows to search only in test classes <code>-M</code> or <code>--no-main</code>, or only in main classes <code>-T</code> or <code>--no-test</code>. also has a filter by name option <code>-f &lt;whatever&gt;</code></p>\n\n<p>Hope this could save you some time, for me it does.</p>\n", "title": "run main class of Maven project", "answer_id": 9922787, "link": "http://stackoverflow.com/questions/9846046/run-main-class-of-maven-project/9922787#9922787", "tags": ["java", "maven", "maven-2"]}], "question_id": 9846046}, {"body": "<p>I am trying to develop a system where there are different nodes that are run on different system or on different ports on the same system. Now all the nodes create a Socket with a target IP as the IP of a special node known as a bootstrapping node. The nodes then create their own <code>ServerSocket</code> and start listening for connections. The bootstrapping node maintains a list of Nodes and returns them on being quired. Now what I need is the node must register its IP to the bootstrapping node. I tried using <code>cli.getInetAddress()</code> once the client connects to the <code>ServerSocket</code> of bootstrapping node but that didn't work.</p>\n\n<ol>\n<li>I need the client to register its PPP IP if available;</li>\n<li>Otherwise the LAN IP if available; </li>\n<li>Otherwise it must register 127.0.0.1 assuming its the same computer.</li>\n</ol>\n\n<p>Please help me with this.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>using the code:</p>\n\n<pre><code>System.out.println(Inet4Address.getLocalHost().getHostAddress());\n</code></pre>\n\n<p>or</p>\n\n<pre><code>System.out.println(InetAddress.getLocalHost().getHostAddress());\n</code></pre>\n\n<p>My PPP Connection IP address is: 117.204.44.192 but the above returns me 192.168.1.2</p>\n\n<p><strong>EDIT2</strong></p>\n\n<p>I am using the following code:</p>\n\n<pre><code>Enumeration e = NetworkInterface.getNetworkInterfaces();\nwhile(e.hasMoreElements())\n{\n    NetworkInterface n = (NetworkInterface) e.nextElement();\n    Enumeration ee = n.getInetAddresses();\n    while (ee.hasMoreElements())\n    {\n        InetAddress i = (InetAddress) ee.nextElement();\n        System.out.println(i.getHostAddress());\n    }\n}\n</code></pre>\n\n<p>I am able to get all the IP addresses associated all <code>NetworkInterface</code>s, but how do I distinguish them??\nThis is the output I am getting:</p>\n\n<pre><code>127.0.0.1\n192.168.1.2\n192.168.56.1\n117.204.44.19\n</code></pre>\n", "tags": ["java", "sockets", "ip"], "title": "Getting the IP address of the current machine using Java", "answer_count": 15, "creation_date": 1330431974, "score": 137, "link": "http://stackoverflow.com/questions/9481865/getting-the-ip-address-of-the-current-machine-using-java", "answers": [{"body": "<p>You can use <code>java.net.InetAddress</code> API.\nTry this : </p>\n\n<pre><code>InetAddress.getLocalHost().getHostAddress();\n</code></pre>\n", "title": "Getting the IP address of the current machine using Java", "answer_id": 9481939, "link": "http://stackoverflow.com/questions/9481865/getting-the-ip-address-of-the-current-machine-using-java/9481939#9481939", "tags": ["java", "sockets", "ip"]}, {"body": "<p>You can use java's <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/net/InetAddress.html\">InetAddress</a> class for this purpose.</p>\n\n<pre><code>InetAddress IP=InetAddress.getLocalHost();\nSystem.out.println(\"IP of my system is := \"+IP.getHostAddress());\n</code></pre>\n\n<p>Output for my system = <code>IP of my system is := 10.100.98.228</code></p>\n\n<p><a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/net/InetAddress.html#getHostAddress%28%29\">getHostAddress()</a> returns </p>\n\n<blockquote>\n  <p>Returns the IP address string in textual presentation.</p>\n</blockquote>\n\n<p>OR you can also do </p>\n\n<pre><code>InetAddress IP=InetAddress.getLocalHost();\nSystem.out.println(IP.toString());\n</code></pre>\n\n<p>Output = <code>IP of my system is := RanRag-PC/10.100.98.228</code></p>\n", "title": "Getting the IP address of the current machine using Java", "answer_id": 9481944, "link": "http://stackoverflow.com/questions/9481865/getting-the-ip-address-of-the-current-machine-using-java/9481944#9481944", "tags": ["java", "sockets", "ip"]}, {"body": "<p>Use <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/net/InetAddress.html\" rel=\"nofollow\">InetAddress.getLocalHost()</a> to get the local address</p>\n\n<pre><code>import java.net.InetAddress;\n\ntry {\n  InetAddress addr = InetAddress.getLocalHost();            \n  System.out.println(addr.getHostAddress());\n} catch (UnknownHostException e) {\n}\n</code></pre>\n", "title": "Getting the IP address of the current machine using Java", "answer_id": 9481949, "link": "http://stackoverflow.com/questions/9481865/getting-the-ip-address-of-the-current-machine-using-java/9481949#9481949", "tags": ["java", "sockets", "ip"]}, {"body": "<p>This could be a bit tricky in the most general case.  </p>\n\n<p>On the face of it, <code>InetAddress.getLocalHost()</code> should give you the IP address of this host.  The problem is that a host could have lots of network interfaces, and an interface could be bound to more than one IP address.  And to top that, not all IP addresses will be reachable outside of your machine or your LAN.  For example, they could be IP addresses for virtual network devices, private network IP addresses, and so on.</p>\n\n<p>What this means is that the IP address returned by <code>InetAddress.getLocalHost()</code> might not be the right one to use.</p>\n\n<p>How can you deal with this?</p>\n\n<ul>\n<li>One approach is to use <code>NetworkInterface.getNetworkInterfaces()</code> to get all of the known network interfaces on the host, and then iterate over each NI's addresses.</li>\n<li>Another approach is to (somehow) get the externally advertized FQDN for the host, and use <code>InetAddress.getByName()</code> to look up the primary IP address.  (But how do you get it, and how do you deal with a DNS-based load balancer?)</li>\n<li>A variation of the previous is to get the preferred FQDN from a config file or a command line parameter.</li>\n<li>Another variation is to get the preferred IP address from a config file or a command line parameter.</li>\n</ul>\n\n<p>In summary, <code>InetAddress.getLocalHost()</code> will typically work, but you may need to provide an alternative method for the cases where your code is run in an environment with \"complicated\" networking.</p>\n\n<hr>\n\n<blockquote>\n  <p>I am able to get all the IP addresses associated all Network Interfaces, but how do i distinguish them?</p>\n</blockquote>\n\n<ul>\n<li>Any address in the range 127.xxx.xxx.xxx is a \"loopback\" address.  It is only visible to \"this\" host.</li>\n<li>Any address in the range 192.168.xxx.xxx is a private (aka site local) IP address.  These are reserved for use within an organization.  The same applies to 10.xxx.xxx.xxx addresses, and 172.16.xxx.xxx through 172.31.xxx.xxx.</li>\n<li>Addresses in the range 169.254.xxx.xxx are link local IP addresses.  These are reserved for use on a single network segment.</li>\n<li>Addresses in the range 224.xxx.xxx.xxx through 239.xxx.xxx.xxx are multicast addresses.</li>\n<li>The address 255.255.255.255 is the broadcast address.</li>\n<li>Anything else <em>should</em> be a valid public point-to-point IPv4 address.</li>\n</ul>\n\n<p>In fact, the InetAddress API provides methods for testing for loopback, link local, site local, multicast and broadcast addresses.  You can use these to sort out which of the IP addresses you get back is most appropriate.</p>\n", "title": "Getting the IP address of the current machine using Java", "answer_id": 9482369, "link": "http://stackoverflow.com/questions/9481865/getting-the-ip-address-of-the-current-machine-using-java/9482369#9482369", "tags": ["java", "sockets", "ip"]}, {"body": "<p><strong>EDIT 1: Updated code, since the previous link, exists no more</strong></p>\n\n<pre><code>import java.io.*;\nimport java.net.*;\n\npublic class GetMyIP {\n    public static void main(String[] args) {\n        URL url = null;\n        BufferedReader in = null;\n        String ipAddress = \"\";\n        try {\n            url = new URL(\"http://bot.whatismyipaddress.com\");\n            in = new BufferedReader(new InputStreamReader(url.openStream()));\n            ipAddress = in.readLine().trim();\n            /* IF not connected to internet, then\n             * the above code will return one empty\n             * String, we can check it's length and\n             * if length is not greater than zero, \n             * then we can go for LAN IP or Local IP\n             * or PRIVATE IP\n             */\n            if (!(ipAddress.length() &gt; 0)) {\n                try {\n                    InetAddress ip = InetAddress.getLocalHost();\n                    System.out.println((ip.getHostAddress()).trim());\n                    ipAddress = (ip.getHostAddress()).trim();\n                } catch(Exception exp) {\n                    ipAddress = \"ERROR\";\n                }\n            }\n        } catch (Exception ex) {\n            // This try will give the Private IP of the Host.\n            try {\n                InetAddress ip = InetAddress.getLocalHost();\n                System.out.println((ip.getHostAddress()).trim());\n                ipAddress = (ip.getHostAddress()).trim();\n            } catch(Exception exp) {\n                ipAddress = \"ERROR\";\n            }\n            //ex.printStackTrace();\n        }\n        System.out.println(\"IP Address: \" + ipAddress);\n    }\n}\n</code></pre>\n\n<p><strong>ACTUAL VERSION: This stopped working</strong></p>\n\n<p>Hopefully this snippet might help you to achieve this : </p>\n\n<pre><code>// Method to get the IP Address of the Host.\nprivate String getIP()\n{\n    // This try will give the Public IP Address of the Host.\n    try\n    {\n        URL url = new URL(\"http://automation.whatismyip.com/n09230945.asp\");\n        BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));\n        String ipAddress = new String();\n        ipAddress = (in.readLine()).trim();\n        /* IF not connected to internet, then\n         * the above code will return one empty\n         * String, we can check it's length and\n         * if length is not greater than zero, \n         * then we can go for LAN IP or Local IP\n         * or PRIVATE IP\n         */\n        if (!(ipAddress.length() &gt; 0))\n        {\n            try\n            {\n                InetAddress ip = InetAddress.getLocalHost();\n                System.out.println((ip.getHostAddress()).trim());\n                return ((ip.getHostAddress()).trim());\n            }\n            catch(Exception ex)\n            {\n                return \"ERROR\";\n            }\n        }\n        System.out.println(\"IP Address is : \" + ipAddress);\n\n        return (ipAddress);\n    }\n    catch(Exception e)\n    {\n        // This try will give the Private IP of the Host.\n        try\n        {\n            InetAddress ip = InetAddress.getLocalHost();\n            System.out.println((ip.getHostAddress()).trim());\n            return ((ip.getHostAddress()).trim());\n        }\n        catch(Exception ex)\n        {\n            return \"ERROR\";\n        }\n    }\n}\n</code></pre>\n", "title": "Getting the IP address of the current machine using Java", "answer_id": 9486651, "link": "http://stackoverflow.com/questions/9481865/getting-the-ip-address-of-the-current-machine-using-java/9486651#9486651", "tags": ["java", "sockets", "ip"]}, {"body": "<p>Posting here tested IP ambiguity workaround code from <a href=\"https://issues.apache.org/jira/browse/JCS-40\">https://issues.apache.org/jira/browse/JCS-40</a> (InetAddress.getLocalHost() ambiguous on Linux systems):</p>\n\n<pre><code>/**\n * Returns an &lt;code&gt;InetAddress&lt;/code&gt; object encapsulating what is most likely the machine's LAN IP address.\n * &lt;p/&gt;\n * This method is intended for use as a replacement of JDK method &lt;code&gt;InetAddress.getLocalHost&lt;/code&gt;, because\n * that method is ambiguous on Linux systems. Linux systems enumerate the loopback network interface the same\n * way as regular LAN network interfaces, but the JDK &lt;code&gt;InetAddress.getLocalHost&lt;/code&gt; method does not\n * specify the algorithm used to select the address returned under such circumstances, and will often return the\n * loopback address, which is not valid for network communication. Details\n * &lt;a href=\"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4665037\"&gt;here&lt;/a&gt;.\n * &lt;p/&gt;\n * This method will scan all IP addresses on all network interfaces on the host machine to determine the IP address\n * most likely to be the machine's LAN address. If the machine has multiple IP addresses, this method will prefer\n * a site-local IP address (e.g. 192.168.x.x or 10.10.x.x, usually IPv4) if the machine has one (and will return the\n * first site-local address if the machine has more than one), but if the machine does not hold a site-local\n * address, this method will return simply the first non-loopback address found (IPv4 or IPv6).\n * &lt;p/&gt;\n * If this method cannot find a non-loopback address using this selection algorithm, it will fall back to\n * calling and returning the result of JDK method &lt;code&gt;InetAddress.getLocalHost&lt;/code&gt;.\n * &lt;p/&gt;\n *\n * @throws UnknownHostException If the LAN address of the machine cannot be found.\n */\nprivate static InetAddress getLocalHostLANAddress() throws UnknownHostException {\n    try {\n        InetAddress candidateAddress = null;\n        // Iterate all NICs (network interface cards)...\n        for (Enumeration ifaces = NetworkInterface.getNetworkInterfaces(); ifaces.hasMoreElements();) {\n            NetworkInterface iface = (NetworkInterface) ifaces.nextElement();\n            // Iterate all IP addresses assigned to each card...\n            for (Enumeration inetAddrs = iface.getInetAddresses(); inetAddrs.hasMoreElements();) {\n                InetAddress inetAddr = (InetAddress) inetAddrs.nextElement();\n                if (!inetAddr.isLoopbackAddress()) {\n\n                    if (inetAddr.isSiteLocalAddress()) {\n                        // Found non-loopback site-local address. Return it immediately...\n                        return inetAddr;\n                    }\n                    else if (candidateAddress == null) {\n                        // Found non-loopback address, but not necessarily site-local.\n                        // Store it as a candidate to be returned if site-local address is not subsequently found...\n                        candidateAddress = inetAddr;\n                        // Note that we don't repeatedly assign non-loopback non-site-local addresses as candidates,\n                        // only the first. For subsequent iterations, candidate will be non-null.\n                    }\n                }\n            }\n        }\n        if (candidateAddress != null) {\n            // We did not find a site-local address, but we found some other non-loopback address.\n            // Server might have a non-site-local address assigned to its NIC (or it might be running\n            // IPv6 which deprecates the \"site-local\" concept).\n            // Return this non-loopback candidate address...\n            return candidateAddress;\n        }\n        // At this point, we did not find a non-loopback address.\n        // Fall back to returning whatever InetAddress.getLocalHost() returns...\n        InetAddress jdkSuppliedAddress = InetAddress.getLocalHost();\n        if (jdkSuppliedAddress == null) {\n            throw new UnknownHostException(\"The JDK InetAddress.getLocalHost() method unexpectedly returned null.\");\n        }\n        return jdkSuppliedAddress;\n    }\n    catch (Exception e) {\n        UnknownHostException unknownHostException = new UnknownHostException(\"Failed to determine LAN address: \" + e);\n        unknownHostException.initCause(e);\n        throw unknownHostException;\n    }\n}\n</code></pre>\n", "title": "Getting the IP address of the current machine using Java", "answer_id": 20418809, "link": "http://stackoverflow.com/questions/9481865/getting-the-ip-address-of-the-current-machine-using-java/20418809#20418809", "tags": ["java", "sockets", "ip"]}, {"body": "<p>Example in scala (useful in sbt file):</p>\n\n<pre class=\"lang-scala prettyprint-override\"><code>  import collection.JavaConverters._\n  import java.net._\n\n  def getIpAddress: String = {\n\n    val enumeration = NetworkInterface.getNetworkInterfaces.asScala.toSeq\n\n    val ipAddresses = enumeration.flatMap(p =&gt;\n      p.getInetAddresses.asScala.toSeq\n    )\n\n    val address = ipAddresses.find { address =&gt;\n      val host = address.getHostAddress\n      host.contains(\".\") &amp;&amp; !address.isLoopbackAddress\n    }.getOrElse(InetAddress.getLocalHost)\n\n    address.getHostAddress\n  }\n</code></pre>\n", "title": "Getting the IP address of the current machine using Java", "answer_id": 24649380, "link": "http://stackoverflow.com/questions/9481865/getting-the-ip-address-of-the-current-machine-using-java/24649380#24649380", "tags": ["java", "sockets", "ip"]}, {"body": "<pre><code>import java.net.InetAddress;\nimport java.net.NetworkInterface;\nimport java.util.Enumeration;\n\npublic class IpAddress {\n\nNetworkInterface ifcfg;\nEnumeration&lt;InetAddress&gt; addresses;\nString address;\n\npublic String getIpAddress(String host) {\n    try {\n        ifcfg = NetworkInterface.getByName(host);\n        addresses = ifcfg.getInetAddresses();\n        while (addresses.hasMoreElements()) {\n            address = addresses.nextElement().toString();\n            address = address.replace(\"/\", \"\");\n        }\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    return ifcfg.toString();\n}\n}\n</code></pre>\n", "title": "Getting the IP address of the current machine using Java", "answer_id": 24947917, "link": "http://stackoverflow.com/questions/9481865/getting-the-ip-address-of-the-current-machine-using-java/24947917#24947917", "tags": ["java", "sockets", "ip"]}, {"body": "<p>firstly import the class</p>\n\n<pre><code>import java.net.InetAddress;\n</code></pre>\n\n<p>in class</p>\n\n<pre><code>  InetAddress iAddress = InetAddress.getLocalHost();\n  String currentIp = iAddress.getHostAddress();\n  System.out.println(\"Current IP address : \" +currentIp); //gives only host address\n</code></pre>\n", "title": "Getting the IP address of the current machine using Java", "answer_id": 25257429, "link": "http://stackoverflow.com/questions/9481865/getting-the-ip-address-of-the-current-machine-using-java/25257429#25257429", "tags": ["java", "sockets", "ip"]}, {"body": "<pre><code>private static InetAddress getLocalAddress(){\n        try {\n            Enumeration&lt;NetworkInterface&gt; b = NetworkInterface.getNetworkInterfaces();\n            while( b.hasMoreElements()){\n                for ( InterfaceAddress f : b.nextElement().getInterfaceAddresses())\n                    if ( f.getAddress().isSiteLocalAddress())\n                        return f.getAddress();\n            }\n        } catch (SocketException e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n</code></pre>\n", "title": "Getting the IP address of the current machine using Java", "answer_id": 26709196, "link": "http://stackoverflow.com/questions/9481865/getting-the-ip-address-of-the-current-machine-using-java/26709196#26709196", "tags": ["java", "sockets", "ip"]}, {"body": "<p>You may try <code>isReachable()</code> method of InetAddress class to figure out which IP address is your real publicly available IP address. I think other type of addresses (site local,link local) are not reachable from outside.</p>\n\n<pre><code>while (ee.hasMoreElements())\n{\n    InetAddress i = (InetAddress) ee.nextElement();\n    System.out.println( i.getHostAddress() + i.isReachable(10*1000) );\n} \n</code></pre>\n", "title": "Getting the IP address of the current machine using Java", "answer_id": 33093380, "link": "http://stackoverflow.com/questions/9481865/getting-the-ip-address-of-the-current-machine-using-java/33093380#33093380", "tags": ["java", "sockets", "ip"]}, {"body": "<pre><code>public static String getIpAddress() {\n\n    String ipAddress = null;\n\n    try {\n        Enumeration&lt;NetworkInterface&gt; networkInterfaces = NetworkInterface.getNetworkInterfaces();\n\n        while (networkInterfaces.hasMoreElements()) {\n\n            NetworkInterface networkInterface = networkInterfaces.nextElement();\n\n            byte[] hardwareAddress = networkInterface.getHardwareAddress();\n            if (null == hardwareAddress || 0 == hardwareAddress.length || (0 == hardwareAddress[0] &amp;&amp; 0 == hardwareAddress[1] &amp;&amp; 0 == hardwareAddress[2])) continue;\n\n            Enumeration&lt;InetAddress&gt; inetAddresses = networkInterface.getInetAddresses();\n\n            if (inetAddresses.hasMoreElements()) ipAddress = inetAddresses.nextElement().toString();\n\n            break;\n        }\n    } catch (SocketException e) {\n        e.printStackTrace();\n    }\n\n    return ipAddress;\n}\n</code></pre>\n", "title": "Getting the IP address of the current machine using Java", "answer_id": 33953719, "link": "http://stackoverflow.com/questions/9481865/getting-the-ip-address-of-the-current-machine-using-java/33953719#33953719", "tags": ["java", "sockets", "ip"]}, {"body": "<p>A rather simplistic approach that seems to be working...</p>\n\n<pre><code>String getPublicIPv4() throws UnknownHostException, SocketException{\n    Enumeration&lt;NetworkInterface&gt; e = NetworkInterface.getNetworkInterfaces();\n    String ipToReturn = null;\n    while(e.hasMoreElements())\n    {\n        NetworkInterface n = (NetworkInterface) e.nextElement();\n        Enumeration&lt;InetAddress&gt; ee = n.getInetAddresses();\n        while (ee.hasMoreElements())\n        {\n            InetAddress i = (InetAddress) ee.nextElement();\n            String currentAddress = i.getHostAddress();\n            logger.trace(\"IP address \"+currentAddress+ \" found\");\n            if(!i.isSiteLocalAddress()&amp;&amp;!i.isLoopbackAddress() &amp;&amp; validate(currentAddress)){\n                ipToReturn = currentAddress;    \n            }else{\n                System.out.println(\"Address not validated as public IPv4\");\n            }\n\n        }\n    }\n\n    return ipToReturn;\n}\n\nprivate static final Pattern IPv4RegexPattern = Pattern.compile(\n        \"^(([01]?\\\\d\\\\d?|2[0-4]\\\\d|25[0-5])\\\\.){3}([01]?\\\\d\\\\d?|2[0-4]\\\\d|25[0-5])$\");\n\npublic static boolean validate(final String ip) {\n    return IPv4RegexPattern.matcher(ip).matches();\n}\n</code></pre>\n", "title": "Getting the IP address of the current machine using Java", "answer_id": 34610847, "link": "http://stackoverflow.com/questions/9481865/getting-the-ip-address-of-the-current-machine-using-java/34610847#34610847", "tags": ["java", "sockets", "ip"]}, {"body": "<p>This is a working example of the ACCEPTED answer above!\nThis NetIdentity class will store both the internal host ip, as well as the local loopback. If you're on a DNS based server, as mentioned above, you may need to add some more checks, or possible go the Configuration File Route.</p>\n\n<pre><code>import java.net.InetAddress;\nimport java.net.NetworkInterface;\nimport java.net.SocketException;\nimport java.net.UnknownHostException;\nimport java.util.Enumeration;\n\n/**\n * Class that allows a device to identify itself on the INTRANET.\n * \n * @author Decoded4620 2016\n */\npublic class NetIdentity {\n\n    private String loopbackHost = \"\";\n    private String host = \"\";\n\n    private String loopbackIp = \"\";\n    private String ip = \"\";\n    public NetIdentity(){\n\n        try{\n            Enumeration&lt;NetworkInterface&gt; interfaces = NetworkInterface.getNetworkInterfaces();\n\n            while(interfaces.hasMoreElements()){\n                NetworkInterface i = interfaces.nextElement();\n                if(i != null){\n                    Enumeration&lt;InetAddress&gt; addresses = i.getInetAddresses();\n                    System.out.println(i.getDisplayName());\n                    while(addresses.hasMoreElements()){\n                        InetAddress address = addresses.nextElement();\n                        String hostAddr = address.getHostAddress();\n\n                        // local loopback\n                        if(hostAddr.indexOf(\"127.\") == 0 ){\n                            this.loopbackIp = address.getHostAddress();\n                            this.loopbackHost = address.getHostName();\n                        }\n\n                        // internal ip addresses (behind this router)\n                        if( hostAddr.indexOf(\"192.168\") == 0 || \n                                hostAddr.indexOf(\"10.\") == 0 || \n                                hostAddr.indexOf(\"172.16\") == 0 ){\n                            this.host = address.getHostName();\n                            this.ip = address.getHostAddress();\n                        }\n\n\n                        System.out.println(\"\\t\\t-\" + address.getHostName() + \":\" + address.getHostAddress() + \" - \"+ address.getAddress());\n                    }\n                }\n            }\n        }\n        catch(SocketException e){\n\n        }\n        try{\n            InetAddress loopbackIpAddress = InetAddress.getLocalHost();\n            this.loopbackIp = loopbackIpAddress.getHostName();\n            System.out.println(\"LOCALHOST: \" + loopbackIp);\n        }\n        catch(UnknownHostException e){\n            System.err.println(\"ERR: \" + e.toString());\n        }\n    }\n\n    public String getLoopbackHost(){\n        return loopbackHost;\n    }\n\n    public String getHost(){\n        return host;\n    }\n    public String getIp(){\n        return ip;\n    }\n    public String getLoopbackIp(){\n        return loopbackIp;\n    }\n}\n</code></pre>\n\n<p>When I run this code I actually get a print out like this:</p>\n\n<pre><code>    Software Loopback Interface 1\n        -127.0.0.1:127.0.0.1 - [B@19e1023e\n        -0:0:0:0:0:0:0:1:0:0:0:0:0:0:0:1 - [B@7cef4e59\nBroadcom 802.11ac Network Adapter\n        -VIKING.yourisp.com:192.168.1.142 - [B@64b8f8f4\n        -fe80:0:0:0:81fa:31d:21c9:85cd%wlan0:fe80:0:0:0:81fa:31d:21c9:85cd%wlan0 - [B@2db0f6b2\nMicrosoft Kernel Debug Network Adapter\nIntel Edison USB RNDIS Device\nDriver for user-mode network applications\nCisco Systems VPN Adapter for 64-bit Windows\nVirtualBox Host-Only Ethernet Adapter\n        -VIKING:192.168.56.1 - [B@3cd1f1c8\n        -VIKING:fe80:0:0:0:d599:3cf0:5462:cb7%eth4 - [B@3a4afd8d\nLogMeIn Hamachi Virtual Ethernet Adapter\n        -VIKING:25.113.118.39 - [B@1996cd68\n        -VIKING:2620:9b:0:0:0:0:1971:7627 - [B@3339ad8e\n        -VIKING:fe80:0:0:0:51bf:994d:4656:8486%eth5 - [B@555590\nBluetooth Device (Personal Area Network)\n        -fe80:0:0:0:4c56:8009:2bca:e16b%eth6:fe80:0:0:0:4c56:8009:2bca:e16b%eth6 - [B@3c679bde\nBluetooth Device (RFCOMM Protocol TDI)\nIntel(R) Ethernet Connection (2) I218-V\n        -fe80:0:0:0:4093:d169:536c:7c7c%eth7:fe80:0:0:0:4093:d169:536c:7c7c%eth7 - [B@16b4a017\nMicrosoft Wi-Fi Direct Virtual Adapter\n        -fe80:0:0:0:103e:cdf0:c0ac:1751%wlan1:fe80:0:0:0:103e:cdf0:c0ac:1751%wlan1 - [B@8807e25\nVirtualBox Host-Only Ethernet Adapter-HHD Software NDIS 6.0 Filter Driver-0000\nVirtualBox Host-Only Ethernet Adapter-WFP Native MAC Layer LightWeight Filter-0000\nVirtualBox Host-Only Ethernet Adapter-HHD Software NDIS 6.0 Filter Driver-0001\nVirtualBox Host-Only Ethernet Adapter-HHD Software NDIS 6.0 Filter Driver-0002\nVirtualBox Host-Only Ethernet Adapter-VirtualBox NDIS Light-Weight Filter-0000\nVirtualBox Host-Only Ethernet Adapter-HHD Software NDIS 6.0 Filter Driver-0003\nVirtualBox Host-Only Ethernet Adapter-QoS Packet Scheduler-0000\nVirtualBox Host-Only Ethernet Adapter-HHD Software NDIS 6.0 Filter Driver-0004\nVirtualBox Host-Only Ethernet Adapter-WFP 802.3 MAC Layer LightWeight Filter-0000\nVirtualBox Host-Only Ethernet Adapter-HHD Software NDIS 6.0 Filter Driver-0005\nIntel(R) Ethernet Connection (2) I218-V-HHD Software NDIS 6.0 Filter Driver-0000\nIntel(R) Ethernet Connection (2) I218-V-WFP Native MAC Layer LightWeight Filter-0000\nIntel(R) Ethernet Connection (2) I218-V-HHD Software NDIS 6.0 Filter Driver-0001\nIntel(R) Ethernet Connection (2) I218-V-Shrew Soft Lightweight Filter-0000\nIntel(R) Ethernet Connection (2) I218-V-HHD Software NDIS 6.0 Filter Driver-0002\nIntel(R) Ethernet Connection (2) I218-V-VirtualBox NDIS Light-Weight Filter-0000\nIntel(R) Ethernet Connection (2) I218-V-HHD Software NDIS 6.0 Filter Driver-0003\nIntel(R) Ethernet Connection (2) I218-V-QoS Packet Scheduler-0000\nIntel(R) Ethernet Connection (2) I218-V-HHD Software NDIS 6.0 Filter Driver-0004\nIntel(R) Ethernet Connection (2) I218-V-WFP 802.3 MAC Layer LightWeight Filter-0000\nIntel(R) Ethernet Connection (2) I218-V-HHD Software NDIS 6.0 Filter Driver-0005\nBroadcom 802.11ac Network Adapter-WFP Native MAC Layer LightWeight Filter-0000\nBroadcom 802.11ac Network Adapter-Virtual WiFi Filter Driver-0000\nBroadcom 802.11ac Network Adapter-Native WiFi Filter Driver-0000\nBroadcom 802.11ac Network Adapter-HHD Software NDIS 6.0 Filter Driver-0003\nBroadcom 802.11ac Network Adapter-Shrew Soft Lightweight Filter-0000\nBroadcom 802.11ac Network Adapter-HHD Software NDIS 6.0 Filter Driver-0004\nBroadcom 802.11ac Network Adapter-VirtualBox NDIS Light-Weight Filter-0000\nBroadcom 802.11ac Network Adapter-HHD Software NDIS 6.0 Filter Driver-0005\nBroadcom 802.11ac Network Adapter-QoS Packet Scheduler-0000\nBroadcom 802.11ac Network Adapter-HHD Software NDIS 6.0 Filter Driver-0006\nBroadcom 802.11ac Network Adapter-WFP 802.3 MAC Layer LightWeight Filter-0000\nBroadcom 802.11ac Network Adapter-HHD Software NDIS 6.0 Filter Driver-0007\nMicrosoft Wi-Fi Direct Virtual Adapter-WFP Native MAC Layer LightWeight Filter-0000\nMicrosoft Wi-Fi Direct Virtual Adapter-Native WiFi Filter Driver-0000\nMicrosoft Wi-Fi Direct Virtual Adapter-HHD Software NDIS 6.0 Filter Driver-0002\nMicrosoft Wi-Fi Direct Virtual Adapter-Shrew Soft Lightweight Filter-0000\nMicrosoft Wi-Fi Direct Virtual Adapter-HHD Software NDIS 6.0 Filter Driver-0003\nMicrosoft Wi-Fi Direct Virtual Adapter-VirtualBox NDIS Light-Weight Filter-0000\nMicrosoft Wi-Fi Direct Virtual Adapter-HHD Software NDIS 6.0 Filter Driver-0004\nMicrosoft Wi-Fi Direct Virtual Adapter-QoS Packet Scheduler-0000\nMicrosoft Wi-Fi Direct Virtual Adapter-HHD Software NDIS 6.0 Filter Driver-0005\nMicrosoft Wi-Fi Direct Virtual Adapter-WFP 802.3 MAC Layer LightWeight Filter-0000\nMicrosoft Wi-Fi Direct Virtual Adapter-HHD Software NDIS 6.0 Filter Driver-0006\n</code></pre>\n\n<p>For my use I'm setting up a Upnp Server, it helped to understand the 'pattern' that i was looking for. Some of the objects returned are Ethernet Adapters, Network Adapters, Virtual Network Adapters, Drivers, and VPN Client Adapters. Not everything has an Address either. So you'll want to skip out on interface objects that don't.</p>\n\n<p>You can also add this to the loop for the current <code>NetworkInterface i</code></p>\n\n<pre><code>while(interfaces.hasMoreElements()){\n    Enumeration&lt;InetAddress&gt; addresses = i.getInetAddresses();\n    System.out.println(i.getDisplayName());\n    System.out.println(\"\\t- name:\" + i.getName());\n    System.out.println(\"\\t- idx:\" + i.getIndex());\n    System.out.println(\"\\t- max trans unit (MTU):\" + i.getMTU());\n    System.out.println(\"\\t- is loopback:\" + i.isLoopback());\n    System.out.println(\"\\t- is PPP:\" + i.isPointToPoint());\n    System.out.println(\"\\t- isUp:\" + i.isUp());\n    System.out.println(\"\\t- isVirtual:\" + i.isVirtual());\n    System.out.println(\"\\t- supportsMulticast:\" + i.supportsMulticast());\n}\n</code></pre>\n\n<p>And You'll see information in your output much like this:</p>\n\n<pre><code>Software Loopback Interface 1\n    - name:lo\n    - idx:1\n    - max trans unit (MTU):-1\n    - is loopback:true\n    - is PPP:false\n    - isUp:true\n    - isVirtual:false\n    - supportsMulticast:true\n        -ADRESS: [127.0.0.1(VIKING-192.168.56.1)]127.0.0.1:127.0.0.1 - [B@19e1023e\n        -ADRESS: [0:0:0:0:0:0:0:1(VIKING-192.168.56.1)]0:0:0:0:0:0:0:1:0:0:0:0:0:0:0:1 - [B@7cef4e59\nBroadcom 802.11ac Network Adapter\n    - name:wlan0\n    - idx:2\n    - max trans unit (MTU):1500\n    - is loopback:false\n    - is PPP:false\n    - isUp:true\n    - isVirtual:false\n    - supportsMulticast:true\n        -ADRESS: [VIKING.monkeybrains.net(VIKING-192.168.56.1)]VIKING.monkeybrains.net:192.168.1.142 - [B@64b8f8f4\n        -ADRESS: [fe80:0:0:0:81fa:31d:21c9:85cd%wlan0(VIKING-192.168.56.1)]fe80:0:0:0:81fa:31d:21c9:85cd%wlan0:fe80:0:0:0:81fa:31d:21c9:85cd%wlan0 - [B@2db0f6b2\nMicrosoft Kernel Debug Network Adapter\n    - name:eth0\n    - idx:3\n    - max trans unit (MTU):-1\n    - is loopback:false\n    - is PPP:false\n    - isUp:false\n    - isVirtual:false\n    - supportsMulticast:true\n</code></pre>\n", "title": "Getting the IP address of the current machine using Java", "answer_id": 35516638, "link": "http://stackoverflow.com/questions/9481865/getting-the-ip-address-of-the-current-machine-using-java/35516638#35516638", "tags": ["java", "sockets", "ip"]}, {"body": "<pre><code>import java.net.DatagramSocket;\n\ntry(final DatagramSocket socket = new DatagramSocket()){\n  socket.connect(InetAddress.getByName(\"8.8.8.8\"), 10002);\n  ip = socket.getLocalAddress().getHostAddress();\n}\n</code></pre>\n\n<p>This way works well when there are multiple network interfaces. It always returns the preferred outbound IP. The destination <code>8.8.8.8</code> is not needed to be reachable. </p>\n", "title": "Getting the IP address of the current machine using Java", "answer_id": 38342964, "link": "http://stackoverflow.com/questions/9481865/getting-the-ip-address-of-the-current-machine-using-java/38342964#38342964", "tags": ["java", "sockets", "ip"]}], "question_id": 9481865}, {"body": "<p>I am trying to parse a file that has each line with pipe delimited values.\nIt did not work correctly when I did not escape the pipe delimiter in split method, but it worked correctly after I escaped the pipe as below.</p>\n\n<pre><code>private ArrayList&lt;String&gt; parseLine(String line) {\n    ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\n    String[] list_str = line.split(\"\\\\|\"); // note the escape \"\\\\\" here\n    System.out.println(list_str.length);\n    System.out.println(line);\n    for(String s:list_str) {\n        list.add(s);\n        System.out.print(s+ \"|\");\n    }\n    return list;\n}\n</code></pre>\n\n<p>Can someone please explain why the pipe character needs to be escaped for the <code>split()</code> method?</p>\n", "tags": ["java", "regex", "string"], "title": "Why does String.split need pipe delimiter to be escaped?", "answer_count": 3, "creation_date": 1332346899, "score": 134, "link": "http://stackoverflow.com/questions/9808689/why-does-string-split-need-pipe-delimiter-to-be-escaped", "answers": [{"body": "<p>Because the syntax for that parameter to <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29\">split</a> is a regular expression, where in the '|' has a special meaning of OR, and a '\\|' means a literal '|' so the string \"\\\\|\" means the regular expression '\\|' which means match exactly the character '|'.</p>\n", "title": "Why does String.split need pipe delimiter to be escaped?", "answer_id": 9808712, "link": "http://stackoverflow.com/questions/9808689/why-does-string-split-need-pipe-delimiter-to-be-escaped/9808712#9808712", "tags": ["java", "regex", "string"]}, {"body": "<p><code>String.split</code> expects a regular expression argument.  An unescaped <code>|</code> is parsed as a regex meaning \"empty string or empty string,\" which isn't what you mean.</p>\n", "title": "Why does String.split need pipe delimiter to be escaped?", "answer_id": 9808719, "link": "http://stackoverflow.com/questions/9808689/why-does-string-split-need-pipe-delimiter-to-be-escaped/9808719#9808719", "tags": ["java", "regex", "string"]}, {"body": "<p>You can simply do this:</p>\n\n<pre><code>String[] arrayString = yourString.split(\"\\\\|\");\n</code></pre>\n", "title": "Why does String.split need pipe delimiter to be escaped?", "answer_id": 34131839, "link": "http://stackoverflow.com/questions/9808689/why-does-string-split-need-pipe-delimiter-to-be-escaped/34131839#34131839", "tags": ["java", "regex", "string"]}], "question_id": 9808689}, {"body": "<p>Java <code>boolean</code> allows values of <code>true</code> and <code>false</code> while Boolean allows <code>true</code>, <code>false</code>, and <code>null</code>. I have started to convert my <code>boolean</code>s to <code>Boolean</code>s. This can cause crashes in tests such as</p>\n\n<pre><code>Boolean set = null;\n...\nif (set) ...\n</code></pre>\n\n<p>while the test</p>\n\n<pre><code>if (set != null &amp;&amp; set) ...\n</code></pre>\n\n<p>seems contrived and error-prone.</p>\n\n<p>When, if ever, is it useful to use <code>Boolean</code>s with null values? If never, then what are the main advantages of the wrapped object?</p>\n\n<p>UPDATE:\nThere has been such a lot of valuable answers that I have summarised some of it in my own answer. I am at best an intermediate in Java so I have tried to show the things that I find useful. Note that the question is \"incorrectly phrased\" (Boolean cannot \"have a null value\") but I have left it in case others have the same misconception</p>\n", "tags": ["java", "boolean"], "title": "When should null values of Boolean be used?", "answer_count": 14, "creation_date": 1340610416, "score": 129, "link": "http://stackoverflow.com/questions/11185321/when-should-null-values-of-boolean-be-used", "answers": [{"body": "<p>There are three quick reasons:</p>\n\n<ul>\n<li>to represent Database boolean values, which may be <code>true</code>, <code>false</code> or <code>null</code></li>\n<li>to represent XML Schema's <code>xsd:boolean</code> values declared with <code>xsd:nillable=\"true\"</code></li>\n<li>to be able to use generic types: <code>List&lt;Boolean&gt;</code> - you can't use <code>List&lt;boolean&gt;</code></li>\n</ul>\n", "title": "When should null values of Boolean be used?", "answer_id": 11185387, "link": "http://stackoverflow.com/questions/11185321/when-should-null-values-of-boolean-be-used/11185387#11185387", "tags": ["java", "boolean"]}, {"body": "<p>Wrapper classes for primitives can be used where objects are required, collections are a good sample.</p>\n\n<p>Imagine you need for some reason store a sequence of <code>boolean</code> in an <code>ArrayList</code>, this can be done by boxing <code>boolean</code> in <code>Boolean</code>.</p>\n\n<p>There is a few words about this <a href=\"http://en.wikipedia.org/wiki/Primitive_wrapper_class\" rel=\"nofollow\">here</a></p>\n\n<p>From documentation:</p>\n\n<blockquote>\n  <p>As any Java programmer knows, you can\u2019t put an int (or other primitive\n  value) into a collection. Collections can only hold object references,\n  so you have to box primitive values into the appropriate wrapper class\n  (which is Integer in the case of int). When you take the object out of\n  the collection, you get the Integer that you put in; if you need an\n  int, you must unbox the Integer using the intValue method. All of this\n  boxing and unboxing is a pain, and clutters up your code. The\n  autoboxing and unboxing feature automates the process, eliminating the\n  pain and the clutter.</p>\n</blockquote>\n\n<p><a href=\"http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html\" rel=\"nofollow\">http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html</a></p>\n", "title": "When should null values of Boolean be used?", "answer_id": 11185391, "link": "http://stackoverflow.com/questions/11185321/when-should-null-values-of-boolean-be-used/11185391#11185391", "tags": ["java", "boolean"]}, {"body": "<p>I suppose in some case, you should have a mechanism to distinguish a Boolean field which already set value or not.</p>\n", "title": "When should null values of Boolean be used?", "answer_id": 11185392, "link": "http://stackoverflow.com/questions/11185321/when-should-null-values-of-boolean-be-used/11185392#11185392", "tags": ["java", "boolean"]}, {"body": "<p>I almost never use <code>Boolean</code> because its semantics are vague and obscure. Basically you have 3-state logic: true, false or unknown. Sometimes it is useful to use it when e.g. you gave user a choice between two values and the user didn't answer at all and you really want to know that information (think: NULLable database column).</p>\n\n<p>I see no reason to convert from <code>boolean</code> to <code>Boolean</code> as it introduces extra memory overhead, NPE possibility and less typing. Typically I use awkward <a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/BooleanUtils.html#isTrue%28java.lang.Boolean%29\"><code>BooleanUtils.isTrue()</code></a> to make my life a little bit easier with <code>Boolean</code>.</p>\n\n<p>The only reason for the existence of <code>Boolean</code> is the ability to have collections of <code>Boolean</code> type (generics do not allow <code>boolean</code>, as well as all other primitives).</p>\n", "title": "When should null values of Boolean be used?", "answer_id": 11185396, "link": "http://stackoverflow.com/questions/11185321/when-should-null-values-of-boolean-be-used/11185396#11185396", "tags": ["java", "boolean"]}, {"body": "<p><code>Boolean</code> wrapper is useful when you want to whether value was assigned or not apart from <code>true</code> and <code>false</code>. It has the following three states:</p>\n\n<ul>\n<li>True</li>\n<li>False</li>\n<li>Not defined which is <code>null</code></li>\n</ul>\n\n<p>Whereas <code>boolean</code> has only two states:</p>\n\n<ul>\n<li>True</li>\n<li>False</li>\n</ul>\n\n<p>The above difference will make it helpful in Lists of <code>Boolean</code> values, which can have <code>True</code>, <code>False</code> or <code>Null</code>.</p>\n", "title": "When should null values of Boolean be used?", "answer_id": 11185398, "link": "http://stackoverflow.com/questions/11185321/when-should-null-values-of-boolean-be-used/11185398#11185398", "tags": ["java", "boolean"]}, {"body": "<p>Use <code>boolean</code> rather than <code>Boolean</code> every time you can. This will avoid many <code>NullPointerException</code>s and make your code more robust.</p>\n\n<p><code>Boolean</code> is useful, for example</p>\n\n<ul>\n<li>to store booleans in a collection (List, Map, etc.)</li>\n<li>to represent a nullable boolean (coming from a nullable boolean column in a database, for example). The null value might mean \"we don't know if it's true or false\" in this context.</li>\n<li>each time a method needs an Object as argument, and you need to pass a boolean value. For example, when using reflection or methods like <code>MessageFormat.format()</code>.</li>\n</ul>\n", "title": "When should null values of Boolean be used?", "answer_id": 11185400, "link": "http://stackoverflow.com/questions/11185321/when-should-null-values-of-boolean-be-used/11185400#11185400", "tags": ["java", "boolean"]}, {"body": "<p>Main purpose for Boolean is null value. <strong>Null value says, that property is undefined</strong>, for example take database nullable column.</p>\n\n<p>If you really need to convert everyting from primitive boolean to wrapper Boolean, then you could use following to support old code:</p>\n\n<pre><code>Boolean set = Boolean.FALSE; //set to default value primitive value (false)\n...\nif (set) ...\n</code></pre>\n", "title": "When should null values of Boolean be used?", "answer_id": 11185406, "link": "http://stackoverflow.com/questions/11185321/when-should-null-values-of-boolean-be-used/11185406#11185406", "tags": ["java", "boolean"]}, {"body": "<p>The best way would be to avoid booleans completely, since every boolean implies that you have a conditional statement anywhere else in your code (see <a href=\"http://www.antiifcampaign.com/\" rel=\"nofollow\">http://www.antiifcampaign.com/</a> and this question: <a href=\"http://stackoverflow.com/questions/1937362/can-you-write-any-algorithm-without-an-if-statement\">Can you write any algorithm without an if statement?</a>).</p>\n\n<p>However, pragmatically you have to use booleans from time to time, but, as you have already found out by yourself, dealing with Booleans is more error prone and more cumbersome. So I would suggest using booleans wherever possible. Exceptions from this might be a legacy database with nullable boolean-columns, although I would try to hide that in my mapping as well.</p>\n", "title": "When should null values of Boolean be used?", "answer_id": 11185447, "link": "http://stackoverflow.com/questions/11185321/when-should-null-values-of-boolean-be-used/11185447#11185447", "tags": ["java", "boolean"]}, {"body": "<p>Wow, what on earth? Is it just me or are all these answers wrong or at least misleading?</p>\n\n<p>The Boolean class is a wrapper around the boolean primitive type. The use of this wrapper is to be able to pass a boolean in a method that accepts an object or generic. Ie vector.</p>\n\n<p>A Boolean object can NEVER have a value of null. If your <strong><em>reference</em></strong> to a Boolean is null, it simply means that your Boolean was never created. </p>\n\n<p>You might find this useful: <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Boolean.java\">http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Boolean.java</a></p>\n\n<p>A null Boolean reference should only be used to trigger similar logic to which you have any other null reference. Using it for three state logic is clumsy.</p>\n\n<p>EDIT: notice, that <code>Boolean a = true;</code> is a misleading statement. This really equals something closer to <code>Boolean a = new Boolean(true);</code>\nPlease see autoboxing here: <a href=\"http://en.wikipedia.org/wiki/Boxing_%28computer_science%29#Autoboxing\">http://en.wikipedia.org/wiki/Boxing_%28computer_science%29#Autoboxing</a></p>\n\n<p>Perhaps this is where much of the confusion comes from.</p>\n\n<p>EDIT2: Please read comments below.\nIf anyone has an idea of how to restructure my answer to incorporate this, please do so.</p>\n", "title": "When should null values of Boolean be used?", "answer_id": 11191515, "link": "http://stackoverflow.com/questions/11185321/when-should-null-values-of-boolean-be-used/11191515#11191515", "tags": ["java", "boolean"]}, {"body": "<p>ANSWER TO OWN QUESTION:\nI thought it would be useful to answer my own question as I have learnt a lot from the answers. This answer is intended to help those - like me - who do not have a complete understanding of the issues. If I use incorrect language please correct me.</p>\n\n<ul>\n<li>The null \"value\" is not a value and is fundamentally different from <code>true</code> and <code>false</code>. It is the absence of a pointer to objects. Therefore to think that Boolean is 3-valued is fundamentally wrong</li>\n<li><p>The syntax for Boolean is abbreviated and conceals the fact that the reference points to Objects:</p>\n\n<p><code>Boolean a = true;</code></p></li>\n</ul>\n\n<p>conceals the fact that <code>true</code> is an object. Other equivalent assignments might be:</p>\n\n<pre><code>Boolean a = Boolean.TRUE;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Boolean a = new Boolean(true);\n</code></pre>\n\n<ul>\n<li><p>The abbreviated syntax </p>\n\n<p><code>if (a) ...</code></p></li>\n</ul>\n\n<p>is different from most other assignments and conceals the fact that a might be an object reference or a primitive. If an object it is necessary to test for <code>null</code> to avoid NPE. For me it is psychologically easier to remember this if there is an equality test:</p>\n\n<p><code>if (a == true) ...</code></p>\n\n<p>where we might be prompted to test for null. So the shortened form is only safe when <code>a</code> is a primitive.</p>\n\n<p>For myself I now have the recommendations:</p>\n\n<ul>\n<li>Never use null for a 3-valued logic. Only use true and false.</li>\n<li>NEVER return <code>Boolean</code> from a method as it could be <code>null</code>. Only return <code>boolean</code>.</li>\n<li>Only use <code>Boolean</code> for wrapping elements in containers, or arguments to methods where objects are required</li>\n</ul>\n", "title": "When should null values of Boolean be used?", "answer_id": 11212671, "link": "http://stackoverflow.com/questions/11185321/when-should-null-values-of-boolean-be-used/11212671#11212671", "tags": ["java", "boolean"]}, {"body": "<p>There are many uses for the **null** value in the Boolean wrapper! :) </p>\n\n<p>For example, you may have in a form a field named \"newsletter\" that indicate if the user want or doesn't want a newsletter from your site. If the user doesn't select a value in this field, you may want to implement a default behaviour to that situation (send? don't send?, question again?, etc) . Clearly, not set (or not selected or **null**), is not the same that true or false.</p>\n\n<p>But, if \"not set\" doesn't apply to your model, don't change the boolean primitive ;)</p>\n", "title": "When should null values of Boolean be used?", "answer_id": 11216785, "link": "http://stackoverflow.com/questions/11185321/when-should-null-values-of-boolean-be-used/11216785#11216785", "tags": ["java", "boolean"]}, {"body": "<p>In a strict definition of a boolean element, there are only two values.  In a perfect world, that would be true.  In the real world, the element may be missing or unknown.  Typically, this involves user input.  In a screen based system, it could be forced by an edit.  In a batch world using either a database or XML input, the element could easily be missing.</p>\n\n<p>So, in the non-perfect world we live in, the Boolean object is great in that it can represent the missing or unknown state as null.  After all, computers just model the real world an should account for all possible states and handle them with throwing exceptions (mostly since there are use cases where throwing the exception would be the correct response).</p>\n\n<p>In my case, the Boolean object was the perfect answer since the input XML sometimes had the element missing and I could still get a value, assign it to a Boolean and then check for a null before trying to use a true or false test with it.</p>\n\n<p>Just my 2 cents.</p>\n", "title": "When should null values of Boolean be used?", "answer_id": 21315250, "link": "http://stackoverflow.com/questions/11185321/when-should-null-values-of-boolean-be-used/21315250#21315250", "tags": ["java", "boolean"]}, {"body": "<p>For all the good answers above, I'm just going to give a concrete example in Java servlet <code>HttpSession</code> class. Hope this example helps to clarify some question you may still have.</p>\n\n<p>If you need to store and retrieve values for a session, you use <code>setAttribute</code>(String, Object), and <code>getAttribute</code>(String, Object) method. So for a boolean value, you are forced to use the Boolean class if you want to store it in an http session. </p>\n\n<pre><code>HttpSession sess = request.getSession(false);\nBoolean isAdmin = (Boolean) sess.getAttribute(\"admin\");\nif (! isAdmin) ...\n</code></pre>\n\n<p>The last line will cause a <code>NullPointerException</code> if the attribute values is not set. (which is the reason led me to this post). So the 3 logic state is here to stay, whether you prefer to use it or not.</p>\n", "title": "When should null values of Boolean be used?", "answer_id": 31224162, "link": "http://stackoverflow.com/questions/11185321/when-should-null-values-of-boolean-be-used/31224162#31224162", "tags": ["java", "boolean"]}, {"body": "<p>Boolean can be very helpful when you need three state. Like in software  testing if Test is passed send  true ,  if failed send false and if test case interrupted send null which will denote test case not executed . </p>\n", "title": "When should null values of Boolean be used?", "answer_id": 34727558, "link": "http://stackoverflow.com/questions/11185321/when-should-null-values-of-boolean-be-used/34727558#34727558", "tags": ["java", "boolean"]}], "question_id": 11185321}, {"body": "<p>My team got handed over some server side code (in Java) that generates random tokens and I have a question regarding the same -</p>\n\n<p>The purpose of these tokens is fairly sensitive - used for session id, password reset links etc. So they do need to be cryptographically random to avoid somebody guessing them or brute force them feasibly. The token is a \"long\" so it is 64 bits long.</p>\n\n<p>The code currently uses the <code>java.util.Random</code> class to generate these tokens. The documentation ([<a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Random.html][1]\">http://docs.oracle.com/javase/7/docs/api/java/util/Random.html][1]</a>) for <code>java.util.Random</code> clearly states the following: </p>\n\n<blockquote>\n  <p>Instances of java.util.Random are not cryptographically secure. Consider instead using SecureRandom to get a cryptographically secure pseudo-random number generator for use by security-sensitive applications.</p>\n</blockquote>\n\n<p>However, the way the code is currently using <code>java.util.Random</code> is this - It instantiates the <code>java.security.SecureRandom</code> class and then uses the <code>SecureRandom.nextLong()</code> method to obtain the seed that is used for instantiating the <code>java.util.Random</code>class. Then it uses <code>java.util.Random.nextLong()</code> method to generate the token.</p>\n\n<p>So my question now - Is it still insecure given that the <code>java.util.Random</code> is being seeded using <code>java.security.SecureRandom</code>? Do I need to modify the code so that it uses <code>java.security.SecureRandom</code> exclusively to generate the tokens?</p>\n\n<p>Currently the code seed's the <code>Random</code> once at startup</p>\n", "tags": ["java", "random", "cryptography", "security"], "title": "Difference between java.util.Random and java.security.SecureRandom", "answer_count": 6, "creation_date": 1339765481, "score": 129, "link": "http://stackoverflow.com/questions/11051205/difference-between-java-util-random-and-java-security-securerandom", "answers": [{"body": "<p>If you run twice <code>java.util.Random.nextLong()</code> with the same seed, it will produce the same number. For security reasons you want to stick with <code>java.security.SecureRandom</code> because it's a lot less predictable.</p>\n\n<p>The 2 Classes are similar, I think you just need to change <code>Random</code> to <code>SecureRandom</code> with a refactoring tool and most of your existing code will work.</p>\n", "title": "Difference between java.util.Random and java.security.SecureRandom", "answer_id": 11051304, "link": "http://stackoverflow.com/questions/11051205/difference-between-java-util-random-and-java-security-securerandom/11051304#11051304", "tags": ["java", "random", "cryptography", "security"]}, {"body": "<p>If changing your existing code is an affordable task, I suggest you use the SecureRandom class as suggested in Javadoc. </p>\n\n<p>Even if you find the Random class implementation uses the SecureRandom class internally. you should not take it for granted that: </p>\n\n<ol>\n<li>Other VM implementations do the same thing. </li>\n<li>Implementation of the Random class in future versions of the JDK still use the SecureRandom class </li>\n</ol>\n\n<p>So it's a better choice to follow the documentation suggestion and go directly with SecureRandom.</p>\n", "title": "Difference between java.util.Random and java.security.SecureRandom", "answer_id": 11051332, "link": "http://stackoverflow.com/questions/11051205/difference-between-java-util-random-and-java-security-securerandom/11051332#11051332", "tags": ["java", "random", "cryptography", "security"]}, {"body": "<p>The standard Oracle JDK 7 implementation uses what's called a Linear Congruential Generator  to produce random values in <code>java.util.Random</code>. </p>\n\n<p>Taken from <code>java.util.Random</code> source code (JDK 7u2), from a comment on the method <code>protected int next(int bits)</code>, which is the one that generates the random values:</p>\n\n<blockquote>\n  <p>This is a linear congruential pseudorandom number generator, as\n    defined by D. H. Lehmer and described by Donald E. Knuth in\n    <i>The Art of Computer Programming,</i> Volume 3:\n    <i>Seminumerical Algorithms</i>, section 3.2.1.</p>\n</blockquote>\n\n<h3>Predictability of Linear Congruential Generators</h3>\n\n<p>Hugo Krawczyk wrote a pretty good paper about how these LCGs can be predicted (\"How to predict congruential generators\"). If you're lucky and interested, you may still find a free, downloadable version of it on the web. And there's plenty more research that clearly shows that you should <strong>never</strong> use an LCG for security-critical purposes. This also means that your random numbers <em>are</em> predictable right now, something you don't want for session IDs and the like.</p>\n\n<h3>How to break a Linear Congruential Generator</h3>\n\n<p>The assumption that an attacker would have to wait for the LCG to repeat after a full cycle is wrong. Even with an optimal cycle (the modulus m in its recurrence relation) it is very easy to predict future values in much less time than a full cycle. After all, it's just a bunch of modular equations that need to be solved, which becomes easy as soon as you have observed enough output values of the LCG. </p>\n\n<p>The security doesn't improve with a \"better\" seed. It simply doesn't matter if you seed with a random value generated by <code>SecureRandom</code> or even produce the value by rolling a die several times. </p>\n\n<p>An attacker will simply compute the seed from the output values observed. This takes <em>significantly less</em> time than 2^48 in the case of <code>java.util.Random</code>. Disbelievers may try out this <a href=\"http://jazzy.id.au/default/2010/09/20/cracking_random_number_generators_part_1.html\">experiment</a>, where it is shown that you can predict future <code>Random</code> outputs observing only two(!) output values in time roughly 2^16. It takes not even a second on a modern computer to predict the output of your random numbers right now.</p>\n\n<h3>Conclusion</h3>\n\n<p>Replace your current code. Use <code>SecureRandom</code> exclusively. Then at least you will have a little guarantee that the result will be hard to predict. If you want the properties of a cryptographically secure PRNG (in your case, that's what you want), then you have to go with <code>SecureRandom</code> only. Being clever about changing the way it was supposed to be used will almost always result in something less secure...</p>\n", "title": "Difference between java.util.Random and java.security.SecureRandom", "answer_id": 11052736, "link": "http://stackoverflow.com/questions/11051205/difference-between-java-util-random-and-java-security-securerandom/11052736#11052736", "tags": ["java", "random", "cryptography", "security"]}, {"body": "<p>A random has only 48 bits where as SecureRandom can have upto 128 bits. So the chances of repeating in securerandom is very small.<br><br>  <strong>Random</strong> uses the <code>system clock</code> as the seed/or to generate the seed. So they can be reproduced easily if the attacker knows the time at which the seed was generated. But <strong>SecureRandom</strong> takes <code>Random Data</code> from your <code>os</code>(they can be interval between keystrokes etc - most os collect these data store them in files -  <code>/dev/random and /dev/urandom in case of linux/solaris</code>) and uses that as the seed. <br>So if the small token size is okay(in case of Random), you can continue using your code without any changes, since you are using SecureRandom to generate the seed. But if you want larger tokens(which cannot be subject to <code>brute force attacks</code>) go with SecureRandom - <br>In case of random just <code>2^48</code> attempts are required, with todays advanced cpu's it is possible to break it in practical time. But for securerandom <code>2^128</code> attempts will be required, which will take years and years to break even with today's advanced machines.<br><br>\nSee <a href=\"http://resources.infosecinstitute.com/random-number-generation-java/\" rel=\"nofollow\"> this </a> link for more details.\n<br>\n<strong>EDIT</strong><br>\nAfter reading the links provided by @emboss, it is clear that the seed, however random it maybe, \nshould not be used with java.util.Random. It is very easy to calculate the seed by observing the output.<Br><br>\n<strong>Go for SecureRandom</strong> - Use <strong>Native PRNG</strong> (as given in the link above) because it takes random values from the <code>/dev/random</code> file for each call to <code>nextBytes()</code>. This way an attacker observing the output will not be able to make out anything unless he is controlling the contents of the <code>/dev/random</code> file(which is very unlikely) <br>\nThe <strong>sha1 prng</strong> algorithm calculates the seed only once and if your VM is running for months using the same seed, it might be cracked by an attacker who is passively observing the output.<br><br>\n<strong>NOTE</strong> - If you are calling the <code>nextBytes()</code> faster than your os is able to write random bytes(entropy) into the <code>/dev/random</code>, you might land into  trouble when using  <strong>NATIVE PRNG</strong>. In that case use a SHA1 PRNG instance of SecureRandom and every few minutes(or some interval), seed this instance with the value from <code>nextBytes()</code> of a NATIVE PRNG instance of SecureRandom. Running these two parallely will ensure that you are seeding regularly with true random values, while also not exhausting the entropy obtained by the Operating System.</p>\n", "title": "Difference between java.util.Random and java.security.SecureRandom", "answer_id": 11060526, "link": "http://stackoverflow.com/questions/11051205/difference-between-java-util-random-and-java-security-securerandom/11060526#11060526", "tags": ["java", "random", "cryptography", "security"]}, {"body": "<p>The current reference implementation of <code>java.util.Random.nextLong()</code> makes two calls to the method <code>next(int)</code> which <em>directly</em> exposes 32 bit of the current seed:</p>\n\n<pre><code>protected int next(int bits) {\n    long nextseed;\n    // calculate next seed: ...\n    // and store it in the private \"seed\" field.\n    return (int)(nextseed &gt;&gt;&gt; (48 - bits));\n}\n\npublic long nextLong() {\n    // it's okay that the bottom word remains signed.\n    return ((long)(next(32)) &lt;&lt; 32) + next(32);\n}\n</code></pre>\n\n<p>The upper 32 bit of the result of <code>nextLong()</code> are the bits of the seed at the time. Since the width of the seed is 48 bit (says the javadoc), it suffices* to iterate over the remaining 16 bit (that's only 65.536 tries) to determine the seed which produced the second 32 bit.</p>\n\n<p>Once the seed is known, all following tokens can easily be computed.</p>\n\n<p><strong>Using the output of <code>nextLong()</code> directly, partly the secret of the PNG to a degree that the entire secret can be computed with very little efford. Dangerous!</strong></p>\n\n<p>* There is some effort needed if the second 32 bit are negative, but one can find that out.</p>\n", "title": "Difference between java.util.Random and java.security.SecureRandom", "answer_id": 11140765, "link": "http://stackoverflow.com/questions/11051205/difference-between-java-util-random-and-java-security-securerandom/11140765#11140765", "tags": ["java", "random", "cryptography", "security"]}, {"body": "<p>The seed is meaningless. A good random generator differs in the chosen primenumber. Every random generator starts from a number and iterates through a 'ring'. Which means, you come from one number to the next, with the old internal value. But after a while you reach the beginning again and start all over again. So you run cycles. (the return value from a random generator is not the internal value)</p>\n\n<p>If you use a prime number for creating a ring, all numbers in that ring gets chosen, before you complete a full cycle through all possible numbers. If you take non prime numbers, not all numbers are chosen and you get shorter cycles.</p>\n\n<p>Higher prime numbers mean, longer cycles, before your returning to the first element again. So, the secure random generator just has a longer cycle, before reaching the beginning again, thats why it is safer. You can't predict the number generation as easy as with shorter cycles.</p>\n\n<p>With other words: You have to replace all.</p>\n", "title": "Difference between java.util.Random and java.security.SecureRandom", "answer_id": 11181676, "link": "http://stackoverflow.com/questions/11051205/difference-between-java-util-random-and-java-security-securerandom/11181676#11181676", "tags": ["java", "random", "cryptography", "security"]}], "question_id": 11051205}, {"body": "<p>This is a snippet of my pom file.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>....\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.4&lt;/version&gt;                        \n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;install&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            ......\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n...\n</code></pre>\n\n<p>I use it successfully with the command </p>\n\n<pre><code>mvn install\n</code></pre>\n\n<p>But, when I try to enclose it into the \"pluginManagement\" tag, the maven-dependency-plugin stops to work when I launch the install goal.\nWhy the \"pluginManagement\" tag change the build behavior ? Or should I use another goal or option ?</p>\n\n<p>Thank you in advance for any help</p>\n", "tags": ["java", "maven", "build", "pom.xml"], "title": "Maven: what is pluginManagement?", "answer_count": 4, "creation_date": 1336398188, "score": 126, "link": "http://stackoverflow.com/questions/10483180/maven-what-is-pluginmanagement", "answers": [{"body": "<blockquote>\n  <p>pluginManagement: is an element that is seen along side plugins. Plugin Management contains plugin elements in much the same way, except that rather than configuring plugin information for this particular project build, it is intended to configure project builds that inherit from this one. However, this only configures plugins that are actually referenced within the plugins element in the children. The children have every right to override pluginManagement definitions.</p>\n</blockquote>\n\n<p>From <a href=\"http://maven.apache.org/pom.html#Plugin%5FManagement\" rel=\"nofollow\">http://maven.apache.org/pom.html#Plugin%5FManagement</a></p>\n\n<p>Copied from :</p>\n\n<p><a href=\"http://stackoverflow.com/questions/1266226/maven2-problem-with-pluginmanagement-and-parent-child-relationship\">Maven2 - problem with pluginManagement and parent-child relationship</a></p>\n", "title": "Maven: what is pluginManagement?", "answer_id": 10483252, "link": "http://stackoverflow.com/questions/10483180/maven-what-is-pluginmanagement/10483252#10483252", "tags": ["java", "maven", "build", "pom.xml"]}, {"body": "<p>You still need to add </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugins&gt;\n    &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n    &lt;/plugin&gt;\n&lt;/plugins&gt;\n</code></pre>\n\n<p>in your build, because <code>pluginManagement</code> is only a way to share the same plugin configuration across all your project modules.</p>\n\n<p>From Maven documentation:</p>\n\n<blockquote>\n  <p><strong>pluginManagement</strong>: is an element that is seen along side plugins. Plugin Management contains plugin elements in much the same way, except that rather than configuring plugin information for this particular project build, it is intended to configure project builds that inherit from this one. However, this only configures plugins that are actually referenced within the plugins element in the children. The children have every right to override pluginManagement definitions.</p>\n</blockquote>\n", "title": "Maven: what is pluginManagement?", "answer_id": 10483284, "link": "http://stackoverflow.com/questions/10483180/maven-what-is-pluginmanagement/10483284#10483284", "tags": ["java", "maven", "build", "pom.xml"]}, {"body": "<p>You use pluginManagement in a parent pom to configure it in case any child pom wants to use it, but not every child plugin wants to use it. An example can be that your super pom defines some options for the maven Javadoc plugin. Not each child pom might want to use Javadoc, so you define those defaults in a pluginManagement section. The child pom that wants to use the Javadoc plugin, just defines a plugin section and will inherit the configuration from the pluginManagement definition in the parent pom.</p>\n", "title": "Maven: what is pluginManagement?", "answer_id": 10483294, "link": "http://stackoverflow.com/questions/10483180/maven-what-is-pluginmanagement/10483294#10483294", "tags": ["java", "maven", "build", "pom.xml"]}, {"body": "<p>The difference between <code>&lt;pluginManagement/&gt;</code> and <code>&lt;plugins/&gt;</code> is that:</p>\n\n<ul>\n<li><p><code>&lt;pluginManagement/&gt;</code> defines the settings for plugins that will be inherited by modules in your build. This is great for cases where you have a parent pom file.</p></li>\n<li><p><code>&lt;plugins/&gt;</code> is an actual invocation of the plugin. It may or may not be inherited from a <code>&lt;pluginManagement/&gt;</code>.</p></li>\n</ul>\n\n<p>You don't need to have a <code>&lt;pluginManagement/&gt;</code> in your project, if it's not a parent POM. However, if it's a parent pom, then in the child's pom, you need to have a declaration like:</p>\n\n<pre><code>&lt;plugins&gt;\n    &lt;plugin&gt;\n        &lt;groupId&gt;com.foo&lt;/groupId&gt;\n        &lt;artifactId&gt;bar-plugin&lt;/artifactId&gt;\n    &lt;/plugin&gt;\n&lt;/plugins&gt;\n</code></pre>\n\n<p>Notice how you aren't defining any configuration. You can inherit it from the  parent, unless you need to further adjust your invocation as per the child project's needs.</p>\n\n<p>For more speicific information, you can check:</p>\n\n<ul>\n<li><p>The Maven <a href=\"https://maven.apache.org/pom.html#Plugins\">pom.xml</a> reference: Plugins</p></li>\n<li><p>The Maven <a href=\"https://maven.apache.org/pom.html#Plugin_Management\">pom.xml</a> reference: Plugin Management</p></li>\n</ul>\n", "title": "Maven: what is pluginManagement?", "answer_id": 10483432, "link": "http://stackoverflow.com/questions/10483180/maven-what-is-pluginmanagement/10483432#10483432", "tags": ["java", "maven", "build", "pom.xml"]}], "question_id": 10483180}, {"body": "<p>I am trying to use SLF4J (with <code>log4j</code> binding) for the first time.</p>\n\n<p>I would like to configure 3 different named Loggers that can be returned by a LoggerFactory which will log different levels and push the messages to different appenders:</p>\n\n<ul>\n<li>Logger 1 \"FileLogger\" logs DEBUG and appends to <code>DailyRollingFileAppender</code></li>\n<li>Logger 2 \"TracingLogger\" logs TRACE+ and appends to a <code>JmsAppender</code></li>\n<li>Logger 3 \"ErrorLogger\" logs ERROR+ and appends to a different <code>JmsAppender</code></li>\n</ul>\n\n<p>Furthermore I want them configured programmatically (in Java, as opposed to XML or a <code>log4j.properties</code> file).</p>\n\n<p>I imagine that, normally, I would define these <code>Logger</code>s somewhere in some bootstrapping code, like an <code>init()</code> method. However, because I want to use <code>slf4j-log4j</code>, I'm confused about where I could define loggers and make them available to the classpath.</p>\n\n<p>I don't <em>believe</em> this is a violation of SLF4J's underlying purpose (as a facade), because my code using the SLF4J API won't ever know that these loggers exist. My code just makes normal calls to the SLF4J API, which then forwards them on to the log4j Loggers it finds on the classpath.</p>\n\n<p><strong>But how do I configure those log4j Loggers on the classpath...in Java?!</strong></p>\n", "tags": ["java", "logging", "log4j", "slf4j"], "title": "Configuring Log4j Loggers Programmatically", "answer_count": 2, "creation_date": 1327277534, "score": 126, "link": "http://stackoverflow.com/questions/8965946/configuring-log4j-loggers-programmatically", "answers": [{"body": "<p>You can add/remove Appender programmatically to Log4j:</p>\n\n<pre><code>  ConsoleAppender console = new ConsoleAppender(); //create appender\n  //configure the appender\n  String PATTERN = \"%d [%p|%c|%C{1}] %m%n\";\n  console.setLayout(new PatternLayout(PATTERN)); \n  console.setThreshold(Level.FATAL);\n  console.activateOptions();\n  //add appender to any Logger (here is root)\n  Logger.getRootLogger().addAppender(console);\n\n  FileAppender fa = new FileAppender();\n  fa.setName(\"FileLogger\");\n  fa.setFile(\"mylog.log\");\n  fa.setLayout(new PatternLayout(\"%d %-5p [%c{1}] %m%n\"));\n  fa.setThreshold(Level.DEBUG);\n  fa.setAppend(true);\n  fa.activateOptions();\n\n  //add appender to any Logger (here is root)\n  Logger.getRootLogger().addAppender(fa)\n  //repeat with all other desired appenders\n</code></pre>\n\n<p>I'd suggest you put it into an init() somewhere, where you are sure, that this will be executed before anything else.\nYou can then remove all existing appenders on the root logger with</p>\n\n<pre><code> Logger.getRootLogger().getLoggerRepository().resetConfiguration();\n</code></pre>\n\n<p>and start with adding your own. You need log4j in the classpath of course for this to work.</p>\n\n<p>Remark:<br>\nYou can take any <code>Logger.getLogger(...)</code> you like to add appenders. I just took the root logger because it is at the bottom of all things and will handle everything that is passed through other appenders in other categories (unless configured otherwise by setting the additivity flag).  </p>\n\n<p>If you need to know how logging works and how is decided where logs are written <a href=\"https://logging.apache.org/log4j/1.2/manual.html\">read this manual</a> for more infos about that.<br>\nIn Short:</p>\n\n<pre><code>  Logger fizz = LoggerFactory.getLogger(\"com.fizz\")\n</code></pre>\n\n<p>will give you a logger for the category \"com.fizz\".<br>\nFor the above example this means that everything logged with it will be referred to the console and file appender on the root logger.<br>\nIf you add an appender to \n      Logger.getLogger(\"com.fizz\").addAppender(newAppender)\nthen logging from <code>fizz</code> will be handled by alle the appenders from the root logger and the <code>newAppender</code>.<br>\nYou don't create Loggers with the configuration, you just provide handlers for all possible categories in your system.</p>\n", "title": "Configuring Log4j Loggers Programmatically", "answer_id": 9003191, "link": "http://stackoverflow.com/questions/8965946/configuring-log4j-loggers-programmatically/9003191#9003191", "tags": ["java", "logging", "log4j", "slf4j"]}, {"body": "<p>It sounds like you're trying to use log4j from \"both ends\" (the consumer end and the configuration end).</p>\n\n<p>If you want to code against the slf4j api but determine ahead of time (and programmatically) the configuration of the log4j Loggers that the classpath will return, you <strong>absolutely have</strong> to have some sort of logging adaptation which makes use of lazy construction.</p>\n\n<pre><code>public class YourLoggingWrapper {\n    private static boolean loggingIsInitialized = false;\n\n    public YourLoggingWrapper() {\n        // ...blah\n    }\n\n    public static void debug(String debugMsg) {\n        log(LogLevel.Debug, debugMsg);\n    }\n\n    // Same for all other log levels your want to handle.\n    // You mentioned TRACE and ERROR.\n\n    private static void log(LogLevel level, String logMsg) {\n        if(!loggingIsInitialized)\n            initLogging();\n\n        org.slf4j.Logger slf4jLogger = org.slf4j.LoggerFactory.getLogger(\"DebugLogger\");\n\n        switch(level) {\n        case: Debug:\n            logger.debug(logMsg);\n            break;\n        default:\n            // whatever\n        }\n    }\n\n    // log4j logging is lazily constructed; it gets initialized\n    // the first time the invoking app calls a log method\n    private static void initLogging() {\n        loggingIsInitialized = true;\n\n        org.apache.log4j.Logger debugLogger = org.apache.log4j.LoggerFactory.getLogger(\"DebugLogger\");\n\n        // Now all the same configuration code that @oers suggested applies...\n        // configure the logger, configure and add its appenders, etc.\n        debugLogger.addAppender(someConfiguredFileAppender);\n    }\n</code></pre>\n\n<p>With this approach, you don't need to worry about where/when your log4j loggers get configured. The first time the classpath asks for them, they get lazily constructed, passed back and made available via slf4j. Hope this helped!</p>\n", "title": "Configuring Log4j Loggers Programmatically", "answer_id": 9039954, "link": "http://stackoverflow.com/questions/8965946/configuring-log4j-loggers-programmatically/9039954#9039954", "tags": ["java", "logging", "log4j", "slf4j"]}], "question_id": 8965946}, {"body": "<p>It is said in Spring javadoc article about <code>DriverManagerDataSource</code> class, that this class is very simple and that it is recommended</p>\n\n<blockquote>\n  <p>to use a JNDI DataSource provided by the container. Such a <code>DataSource</code> can be exposed as a <code>DataSource</code> bean in a Spring ApplicationContext via <code>JndiObjectFactoryBean</code></p>\n</blockquote>\n\n<p>The question is: how to accomplish this? </p>\n\n<p>For example if I wish to have DataSource bean to access my custo mysql database, what I require then? What to write in context configuration etc?</p>\n", "tags": ["java", "spring", "tomcat", "datasource", "jndi"], "title": "How to use JNDI DataSource provided by Tomcat in Spring?", "answer_count": 7, "creation_date": 1328646348, "score": 124, "link": "http://stackoverflow.com/questions/9183321/how-to-use-jndi-datasource-provided-by-tomcat-in-spring", "answers": [{"body": "<p>Documentation: <a href=\"http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/xsd-config.html#xsd-config-body-schemas-jee-jndi-lookup\">C.2.3.1 <code>&lt;jee:jndi-lookup/&gt;</code> (simple)</a></p>\n\n<p>Example:</p>\n\n<pre><code>&lt;jee:jndi-lookup id=\"dataSource\" jndi-name=\"jdbc/MyDataSource\"/&gt;\n</code></pre>\n\n<p>You just need to find out what JNDI name your appserver has bound the datasource to. This is entirely server-specific, consult the docs on your server to find out how.</p>\n\n<p>Remember to declare the <code>jee</code> namespace at the top of your beans file, as described in <a href=\"http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/xsd-config.html#xsd-config-body-schemas-jee\">C.2.3 The jee schema</a>.</p>\n", "title": "How to use JNDI DataSource provided by Tomcat in Spring?", "answer_id": 9183375, "link": "http://stackoverflow.com/questions/9183321/how-to-use-jndi-datasource-provided-by-tomcat-in-spring/9183375#9183375", "tags": ["java", "spring", "tomcat", "datasource", "jndi"]}, {"body": "<p>Assuming you have a \"sampleDS\" datasource definition inside your tomcat configuration, you can add following lines to your <code>applicationContext.xml</code> to access the datasource using JNDI.</p>\n\n<pre><code>&lt;jee:jndi-lookup expected-type=\"javax.sql.DataSource\" id=\"springBeanIdForSampleDS\" jndi-name=\"sampleDS\"/&gt;\n</code></pre>\n\n<p>You have to define the namespace and schema location for <code>jee</code> prefix using:</p>\n\n<pre><code>xmlns:jee=\"http://www.springframework.org/schema/jee\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd\"\n</code></pre>\n", "title": "How to use JNDI DataSource provided by Tomcat in Spring?", "answer_id": 9183389, "link": "http://stackoverflow.com/questions/9183321/how-to-use-jndi-datasource-provided-by-tomcat-in-spring/9183389#9183389", "tags": ["java", "spring", "tomcat", "datasource", "jndi"]}, {"body": "<p>If using Spring's XML schema based configuration, setup in the Spring context like this:</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xmlns:jee=\"http://www.springframework.org/schema/jee\" xsi:schemaLocation=\"\n    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n    http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd\"&gt;\n...\n&lt;jee:jndi-lookup id=\"dbDataSource\"\n   jndi-name=\"jdbc/DatabaseName\"\n   expected-type=\"javax.sql.DataSource\" /&gt;\n</code></pre>\n\n<p>Alternatively, setup using simple bean configuration like this:</p>\n\n<pre><code>&lt;bean id=\"DatabaseName\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n    &lt;property name=\"jndiName\" value=\"java:comp/env/jdbc/DatabaseName\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>You can declare the JNDI resource in tomcat's server.xml using something like this:</p>\n\n<pre><code>&lt;GlobalNamingResources&gt;\n    &lt;Resource name=\"jdbc/DatabaseName\"\n              auth=\"Container\"\n              type=\"javax.sql.DataSource\"\n              username=\"dbUser\"\n              password=\"dbPassword\"\n              url=\"jdbc:postgresql://localhost/dbname\"\n              driverClassName=\"org.postgresql.Driver\"\n              initialSize=\"20\"\n              maxWaitMillis=\"15000\"\n              maxTotal=\"75\"\n              maxIdle=\"20\"\n              maxAge=\"7200000\"\n              testOnBorrow=\"true\"\n              validationQuery=\"select 1\"\n              /&gt;\n&lt;/GlobalNamingResources&gt;\n</code></pre>\n\n<p>And reference the JNDI resource from Tomcat's web context.xml like this:</p>\n\n<pre><code>  &lt;ResourceLink name=\"jdbc/DatabaseName\"\n   global=\"jdbc/DatabaseName\"\n   type=\"javax.sql.DataSource\"/&gt;\n</code></pre>\n\n<p>Reference documentation:</p>\n\n<ul>\n<li><a href=\"https://tomcat.apache.org/tomcat-8.0-doc/jndi-datasource-examples-howto.html\">Tomcat 8 JNDI Datasource HOW-TO</a></li>\n<li><a href=\"https://tomcat.apache.org/tomcat-8.0-doc/config/context.html#Resource_Links\">Tomcat 8 Context Resource Links Reference</a></li>\n<li><a href=\"http://docs.spring.io/spring/docs/4.2.3.RELEASE/spring-framework-reference/htmlsingle/#xsd-config-body-schemas-jee-jndi-lookup\">Spring 4 JEE JNDI Lookup XML Schema Reference</a></li>\n<li><a href=\"http://docs.spring.io/spring/docs/4.2.3.RELEASE/javadoc-api/org/springframework/jndi/JndiObjectFactoryBean.html\">Spring 4 JndiObjectFactoryBean Javadoc</a></li>\n</ul>\n\n<p>Edit: This answer has been updated for Tomcat 8 and Spring 4.  There have been a few property name changes for Tomcat's <em>default</em> datasource resource pool setup.</p>\n", "title": "How to use JNDI DataSource provided by Tomcat in Spring?", "answer_id": 9183486, "link": "http://stackoverflow.com/questions/9183321/how-to-use-jndi-datasource-provided-by-tomcat-in-spring/9183486#9183486", "tags": ["java", "spring", "tomcat", "datasource", "jndi"]}, {"body": "<p>With Spring's JavaConfig mechanism, you can do it like so:</p>\n\n<pre><code>@Configuration\npublic class MainConfig {\n\n    ...\n\n    @Bean\n    DataSource dataSource() {\n        DataSource dataSource = null;\n        JndiTemplate jndi = new JndiTemplate();\n        try {\n            dataSource = (DataSource) jndi.lookup(\"java:comp/env/jdbc/yourname\");\n        } catch (NamingException e) {\n            logger.error(\"NamingException for java:comp/env/jdbc/yourname\", e);\n        }\n        return dataSource;\n    }\n\n}\n</code></pre>\n", "title": "How to use JNDI DataSource provided by Tomcat in Spring?", "answer_id": 20749594, "link": "http://stackoverflow.com/questions/9183321/how-to-use-jndi-datasource-provided-by-tomcat-in-spring/20749594#20749594", "tags": ["java", "spring", "tomcat", "datasource", "jndi"]}, {"body": "<p>According to  <a href=\"http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html\" rel=\"nofollow\">Apache Tomcat 7 JNDI Datasource HOW-TO page</a> there must be a resource configuration in web.xml:</p>\n\n<pre><code>&lt;resource-ref&gt;\n  &lt;description&gt;DB Connection&lt;/description&gt;\n  &lt;res-ref-name&gt;jdbc/TestDB&lt;/res-ref-name&gt;\n  &lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;\n  &lt;res-auth&gt;Container&lt;/res-auth&gt;\n</code></pre>\n\n<p></p>\n\n<p>That works for me</p>\n", "title": "How to use JNDI DataSource provided by Tomcat in Spring?", "answer_id": 20814519, "link": "http://stackoverflow.com/questions/9183321/how-to-use-jndi-datasource-provided-by-tomcat-in-spring/20814519#20814519", "tags": ["java", "spring", "tomcat", "datasource", "jndi"]}, {"body": "<p>Another feature:\n instead of of server.xml, you can add  \"Resource\" tag in<br>\nyour_application/META-INF/Context.xml\n(according to <a href=\"http://tomcat.apache.org/tomcat-8.0-doc/jndi-resources-howto.html#context.xml_configuration\">tomcat docs</a>)\nlike this:</p>\n\n<pre><code>&lt;Context&gt;\n&lt;Resource name=\"jdbc/DatabaseName\" auth=\"Container\" type=\"javax.sql.DataSource\"\n  username=\"dbUsername\" password=\"dbPasswd\"\n  url=\"jdbc:postgresql://localhost/dbname\"\n  driverClassName=\"org.postgresql.Driver\"\n  initialSize=\"5\" maxWait=\"5000\"\n  maxActive=\"120\" maxIdle=\"5\"\n  validationQuery=\"select 1\"\n  poolPreparedStatements=\"true\"/&gt;\n&lt;/Context&gt;\n</code></pre>\n", "title": "How to use JNDI DataSource provided by Tomcat in Spring?", "answer_id": 26762051, "link": "http://stackoverflow.com/questions/9183321/how-to-use-jndi-datasource-provided-by-tomcat-in-spring/26762051#26762051", "tags": ["java", "spring", "tomcat", "datasource", "jndi"]}, {"body": "<p>In your spring class, You can inject a bean annotated like as </p>\n\n<pre><code>@Autowired\n@Qualifier(\"dbDataSource\")\nprivate DataSource dataSource;\n</code></pre>\n\n<p>and You add this in your context.xml</p>\n\n<pre><code>&lt;beans:bean id=\"dbDataSource\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n    &lt;beans:property name=\"jndiName\" value=\"java:comp/env/jdbc/MyLocalDB\"/&gt;\n&lt;/beans:bean&gt;\n</code></pre>\n\n<p>You can declare the JNDI resource in tomcat's server.xml using </p>\n\n<pre><code>&lt;Resource name=\"jdbc/TestDB\" \n  global=\"jdbc/TestDB\" \n  auth=\"Container\" \n  type=\"javax.sql.DataSource\" \n  driverClassName=\"com.mysql.jdbc.Driver\" \n  url=\"jdbc:mysql://localhost:3306/TestDB\" \n  username=\"pankaj\" \n  password=\"pankaj123\" \n\n  maxActive=\"100\" \n  maxIdle=\"20\" \n  minIdle=\"5\" \n  maxWait=\"10000\"/&gt;\n</code></pre>\n\n<p>back to context.xml de spring add this </p>\n\n<pre><code>&lt;ResourceLink name=\"jdbc/MyLocalDB\"\n                global=\"jdbc/TestDB\"\n                auth=\"Container\"\n                type=\"javax.sql.DataSource\" /&gt;\n</code></pre>\n\n<p>if, like this exmple you are injecting connection to database, make sure that MySQL jar is present in the tomcat lib directory, otherwise tomcat will not be able to create the MySQL database connection pool.</p>\n", "title": "How to use JNDI DataSource provided by Tomcat in Spring?", "answer_id": 29364912, "link": "http://stackoverflow.com/questions/9183321/how-to-use-jndi-datasource-provided-by-tomcat-in-spring/29364912#29364912", "tags": ["java", "spring", "tomcat", "datasource", "jndi"]}], "question_id": 9183321}, {"body": "<p>I have two sets, A and B, of the same type.</p>\n\n<p>I have to find if A contains any element from the set B.</p>\n\n<p>What would be the best way to do that without iterating over the sets?\nThe Set library has <code>contains(object)</code> and <code>containsAll(collection)</code>, but not <code>containsAny(collection)</code>.</p>\n", "tags": ["java"], "title": "Something like &#39;contains any&#39; for Java set?", "answer_count": 8, "creation_date": 1325570898, "score": 124, "link": "http://stackoverflow.com/questions/8708542/something-like-contains-any-for-java-set", "answers": [{"body": "<p>You can use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Set.html#retainAll%28java.util.Collection%29\" rel=\"nofollow\">retainAll</a> method and get the intersection of your two sets.</p>\n", "title": "Something like &#39;contains any&#39; for Java set?", "answer_id": 8708593, "link": "http://stackoverflow.com/questions/8708542/something-like-contains-any-for-java-set/8708593#8708593", "tags": ["java"]}, {"body": "<p>Use <code>retainAll()</code> in the Set interface. This method provides an intersection of elements common in both sets. See the API docs for more information.</p>\n", "title": "Something like &#39;contains any&#39; for Java set?", "answer_id": 8708594, "link": "http://stackoverflow.com/questions/8708542/something-like-contains-any-for-java-set/8708594#8708594", "tags": ["java"]}, {"body": "<p>I would recommend creating a <code>HashMap</code> from set A, and then iterating through set B and checking if any element of B is in A. This would run in <code>O(|A|+|B|)</code> time (as there would be no collisions), whereas <code>retainAll(Collection&lt;?&gt; c)</code> must run in <code>O(|A|*|B|)</code> time.</p>\n", "title": "Something like &#39;contains any&#39; for Java set?", "answer_id": 8708783, "link": "http://stackoverflow.com/questions/8708542/something-like-contains-any-for-java-set/8708783#8708783", "tags": ["java"]}, {"body": "<p>There's a bit rough method to do that. \nIf and only if the A set contains some B's element than the call</p>\n\n<pre><code>A.removeAll(B)\n</code></pre>\n\n<p>will modify the A set. In this situation removeAll will return true (As stated at <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/AbstractSet.html#removeAll%28java.util.Collection%29\" rel=\"nofollow\">removeAll docs</a>). But probably you don't want to modify the A set so you may think to act on a copy, like this way:</p>\n\n<pre><code>new HashSet(A).removeAll(B)\n</code></pre>\n\n<p>and the returning value will be true if the sets are not distinct, that is they have non-empty intersection.  </p>\n\n<p>Also see <a href=\"http://commons.apache.org/collections/api-2.1.1/org/apache/commons/collections/CollectionUtils.html#containsAny%28java.util.Collection,%20java.util.Collection%29\" rel=\"nofollow\">Apache Commons Collections</a></p>\n", "title": "Something like &#39;contains any&#39; for Java set?", "answer_id": 8866211, "link": "http://stackoverflow.com/questions/8708542/something-like-contains-any-for-java-set/8866211#8866211", "tags": ["java"]}, {"body": "<p>Wouldn't <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#disjoint%28java.util.Collection,%20java.util.Collection%29\"><code>Collections.disjoint(A, B)</code></a> work? From the documentation:</p>\n\n<blockquote>\n  <p>Returns <code>true</code> if the two specified collections have no elements in common.</p>\n</blockquote>\n\n<p>Thus, the method returns <code>false</code> if the collections contains any common elements.</p>\n", "title": "Something like &#39;contains any&#39; for Java set?", "answer_id": 12420133, "link": "http://stackoverflow.com/questions/8708542/something-like-contains-any-for-java-set/12420133#12420133", "tags": ["java"]}, {"body": "<p>A good way to implement containsAny for sets is using the Guava <a href=\"http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Sets.html#intersection%22\">Sets.intersection()</a>.</p>\n\n<p><code>containsAny</code> would return a <code>boolean</code>, so the call looks like:</p>\n\n<pre><code>Sets.intersection(set1, set2).isEmpty()\n</code></pre>\n\n<p>This returns true iff the sets are disjoint, otherwise false. The time complexity of this is likely slightly better than retainAll because you dont have to do any cloning to avoid modifying your original set. </p>\n", "title": "Something like &#39;contains any&#39; for Java set?", "answer_id": 15414900, "link": "http://stackoverflow.com/questions/8708542/something-like-contains-any-for-java-set/15414900#15414900", "tags": ["java"]}, {"body": "<p>Apache Commons has a method <a href=\"https://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/CollectionUtils.html#containsAny%28java.util.Collection,%20java.util.Collection%29\" rel=\"nofollow\"><code>CollectionUtils.containsAny()</code></a>.</p>\n", "title": "Something like &#39;contains any&#39; for Java set?", "answer_id": 31881422, "link": "http://stackoverflow.com/questions/8708542/something-like-contains-any-for-java-set/31881422#31881422", "tags": ["java"]}, {"body": "<p>Since Java 8: <code>setA.stream().anyMatch(setB::contains)</code></p>\n", "title": "Something like &#39;contains any&#39; for Java set?", "answer_id": 34156551, "link": "http://stackoverflow.com/questions/8708542/something-like-contains-any-for-java-set/34156551#34156551", "tags": ["java"]}], "question_id": 8708542}, {"body": "<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/10382929/unsupported-major-minor-version-51-0\">unsupported major .minor version 51.0</a>  </p>\n</blockquote>\n\n\n\n<p>I am trying to build an application, but it gives some error. My jdk version is given below:</p>\n\n<pre><code>java version \"1.6.0_30\"\nJava(TM) SE Runtime Environment (build 1.6.0_30-b12)\nJava HotSpot(TM) Client VM (build 20.5-b03, mixed mode, sharing)\n</code></pre>\n\n<p>Here is my Error Log:</p>\n\n<pre><code>Buildfile: build.xml\n\ncompile:\n     [echo] Compiling the service....\n     [echo]   ...mkdir for classes first....\n     [echo]   ...java classes next....\n     [echo]   ...mkdir for generated code next....\n     [echo]  ...generate stubs/skeletons next....\n[wscompile] command line: wscompile -d /home/vivekray/program/MTrans/WEB-INF/classes -features:wsi,documentliteral -gen:server -keep -model /home/vivekray/program/MTrans/WEB-INF/model.gz -verbose -Xprintstacktrace /home/vivekray/program/MTrans/src/config.xml -classpath /home/vivekray/program/MTrans/WEB-INF:/home/vivekray/program/MTrans/WEB-INF/classes:/home/vivekray/program/MTrans/lib/log4j-1.2.16.jar:/home/vivekray/jwsdp-2.0/jwsdp-shared/lib/mail.jar:/home/vivekray/jwsdp-2.0/jwsdp-shared/lib/activation.jar:/home/vivekray/jwsdp-2.0/jaxp/lib/jaxp-api.jar:/home/vivekray/jwsdp-2.0/jaxp/lib/endorsed/dom.jar:/home/vivekray/jwsdp-2.0/jaxp/lib/endorsed/sax.jar:/home/vivekray/jwsdp-2.0/jaxp/lib/endorsed/xalan.jar:/home/vivekray/jwsdp-2.0/jaxp/lib/endorsed/xercesImpl.jar:/home/vivekray/jwsdp-2.0/jaxrpc/lib/jaxrpc-api.jar:/home/vivekray/jwsdp-2.0/jaxrpc/lib/jaxrpc-spi.jar:/home/vivekray/jwsdp-2.0/jaxrpc/lib/jaxrpc-impl.jar:/home/vivekray/jwsdp-2.0/saaj/lib/saaj-api.jar:/home/vivekray/jwsdp-2.0/saaj/lib/saaj-impl.jar:/home/vivekray/jwsdp-2.0/jwsdp-shared/lib/relaxngDatatype.jar:/home/vivekray/jwsdp-2.0/jwsdp-shared/lib/xsdlib.jar:/home/vivekray/jwsdp-2.0/jwsdp-shared/lib/jax-qname.jar:/home/vivekray/jwsdp-2.0/apache-ant/lib/ant.jar:/home/vivekray/jwsdp-2.0/fastinfoset/lib/FastInfoset.jar:/home/vivekray/Softwares/apache-tomcat-7.0.27/lib/servlet-api.jar\n[wscompile] [creating model: mtransservice]\n[wscompile] [creating service: Mtransservice]\n\nBUILD FAILED\njava.lang.UnsupportedClassVersionError: in/cdac/mobile/computing/mtrans/MtransService : Unsupported major.minor version 51.0\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)\n    at org.apache.tools.ant.AntClassLoader.defineClassFromData(AntClassLoader.java:1146)\n    at org.apache.tools.ant.AntClassLoader.getClassFromStream(AntClassLoader.java:1324)\n    at org.apache.tools.ant.AntClassLoader.findClassInComponents(AntClassLoader.java:1388)\n    at org.apache.tools.ant.AntClassLoader.findClass(AntClassLoader.java:1341)\n    at org.apache.tools.ant.AntClassLoader.loadClass(AntClassLoader.java:1088)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:295)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)\n    at java.lang.Class.forName0(Native Method)\n    at java.lang.Class.forName(Class.java:247)\n    at com.sun.xml.rpc.processor.modeler.rmi.RmiUtils.getLoadableClassName(RmiUtils.java:78)\n    at com.sun.xml.rpc.processor.modeler.rmi.RmiUtils.getRealName(RmiUtils.java:54)\n    at com.sun.xml.rpc.processor.modeler.rmi.RmiModeler.modelPort(RmiModeler.java:676)\n    at com.sun.xml.rpc.processor.modeler.rmi.RmiModeler.buildLiteralModel(RmiModeler.java:603)\n    at com.sun.xml.rpc.processor.modeler.rmi.RmiModeler.buildModel(RmiModeler.java:457)\n    at com.sun.xml.rpc.processor.config.ModelInfo.buildModel(ModelInfo.java:88)\n    at com.sun.xml.rpc.processor.Processor.runModeler(Processor.java:63)\n    at com.sun.xml.rpc.tools.wscompile.CompileTool.run(CompileTool.java:714)\n    at com.sun.xml.rpc.util.ToolBase.run(ToolBase.java:43)\n    at com.sun.xml.rpc.tools.ant.Wscompile.execute(Wscompile.java:746)\n    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)\n    at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)\n    at org.apache.tools.ant.Task.perform(Task.java:348)\n    at org.apache.tools.ant.Target.execute(Target.java:357)\n    at org.apache.tools.ant.Target.performTasks(Target.java:385)\n    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1337)\n    at org.apache.tools.ant.Project.executeTarget(Project.java:1306)\n    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)\n    at org.apache.tools.ant.Project.executeTargets(Project.java:1189)\n    at org.apache.tools.ant.Main.runBuild(Main.java:758)\n    at org.apache.tools.ant.Main.startAnt(Main.java:217)\n    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:257)\n    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:104)\n\nTotal time: 1 second\n</code></pre>\n", "tags": ["java", "eclipse", "java-ee", "jdk1.6"], "title": "java.lang.UnsupportedClassVersionError Unsupported major.minor version 51.0", "answer_count": 7, "creation_date": 1340864596, "score": 123, "link": "http://stackoverflow.com/questions/11239086/java-lang-unsupportedclassversionerror-unsupported-major-minor-version-51-0", "answers": [{"body": "<p><code>java.lang.UnsupportedClassVersionError</code> happens because of a higher JDK during compile time and lower JDK during runtime.</p>\n", "title": "java.lang.UnsupportedClassVersionError Unsupported major.minor version 51.0", "answer_id": 11239128, "link": "http://stackoverflow.com/questions/11239086/java-lang-unsupportedclassversionerror-unsupported-major-minor-version-51-0/11239128#11239128", "tags": ["java", "eclipse", "java-ee", "jdk1.6"]}, {"body": "<p>It means that you compiled your classes under a <em>specific JDK</em>, but then try to run them under <em>older version</em> of JDK.</p>\n", "title": "java.lang.UnsupportedClassVersionError Unsupported major.minor version 51.0", "answer_id": 11239150, "link": "http://stackoverflow.com/questions/11239086/java-lang-unsupportedclassversionerror-unsupported-major-minor-version-51-0/11239150#11239150", "tags": ["java", "eclipse", "java-ee", "jdk1.6"]}, {"body": "<p>Version 51 is Java 7, you probably use the wrong JDK. Check JAVA_HOME.</p>\n\n<p><a href=\"http://www.oracle.com/technetwork/java/javase/compatibility-417013.html\">As mentioned here, under Binary Compatibility</a></p>\n", "title": "java.lang.UnsupportedClassVersionError Unsupported major.minor version 51.0", "answer_id": 11239153, "link": "http://stackoverflow.com/questions/11239086/java-lang-unsupportedclassversionerror-unsupported-major-minor-version-51-0/11239153#11239153", "tags": ["java", "eclipse", "java-ee", "jdk1.6"]}, {"body": "<p>Make sure you're using the correct SDK when compiling/running and also, make sure you use source/target 1.7.</p>\n", "title": "java.lang.UnsupportedClassVersionError Unsupported major.minor version 51.0", "answer_id": 11240551, "link": "http://stackoverflow.com/questions/11239086/java-lang-unsupportedclassversionerror-unsupported-major-minor-version-51-0/11240551#11240551", "tags": ["java", "eclipse", "java-ee", "jdk1.6"]}, {"body": "<p>These guys gave you the reason why is failing but not how to solve it. This problem may appear even if you have a jdk which matches JVM which you are trying it into.</p>\n\n<p>Project -> Properties -> Java Compiler</p>\n\n<p>Enable project specific settings.</p>\n\n<p>Then select Compiler Compliance Level to 1.6 or 1.5, build and test your app.</p>\n\n<p>Now, it should be fine.</p>\n", "title": "java.lang.UnsupportedClassVersionError Unsupported major.minor version 51.0", "answer_id": 11264876, "link": "http://stackoverflow.com/questions/11239086/java-lang-unsupportedclassversionerror-unsupported-major-minor-version-51-0/11264876#11264876", "tags": ["java", "eclipse", "java-ee", "jdk1.6"]}, {"body": "<p>I encountered the same issue, when jdk 1.7 was used to compile then jre 1.4 was used for execution. </p>\n\n<p>My solution was to set environment variable PATH by adding pathname C:\\glassfish3\\jdk7\\bin in front of the existing PATH setting. The updated value is \"C:\\glassfish3\\jdk7\\bin;C:\\Sun\\SDK\\bin\". After the update, the problem was gone. </p>\n", "title": "java.lang.UnsupportedClassVersionError Unsupported major.minor version 51.0", "answer_id": 13571887, "link": "http://stackoverflow.com/questions/11239086/java-lang-unsupportedclassversionerror-unsupported-major-minor-version-51-0/13571887#13571887", "tags": ["java", "eclipse", "java-ee", "jdk1.6"]}, {"body": "<p>Use Maven and use the <a href=\"http://maven.apache.org/plugins/maven-compiler-plugin/\" rel=\"nofollow\">maven-compiler-plugin</a> to explicitly call the actual correct version JDK javac.exe command, because Maven could be running any version; this also catches <em>the really stupid long standing bug in javac that does not spot runtime breaking class version jars and missing classes/methods/properties when compiling for earlier java versions</em>!  This later part could have easily been fixed in Java 1.5+ by adding versioning attributes to new classes, methods, and properties, or separate compiler versioning data, so is a quite stupid oversight by Sun and Oracle.</p>\n", "title": "java.lang.UnsupportedClassVersionError Unsupported major.minor version 51.0", "answer_id": 13670817, "link": "http://stackoverflow.com/questions/11239086/java-lang-unsupportedclassversionerror-unsupported-major-minor-version-51-0/13670817#13670817", "tags": ["java", "eclipse", "java-ee", "jdk1.6"]}], "question_id": 11239086}, {"body": "<p>When comparing arrays in Java, are there any differences between the following 2 statements?</p>\n\n<pre><code>array1.equals(array2);\nArrays.equals(array1, array2);\n</code></pre>\n\n<p>And if so what are they?</p>\n", "tags": ["java", "arrays", "equality"], "title": "equals vs Arrays.equals in Java", "answer_count": 7, "creation_date": 1326023606, "score": 122, "link": "http://stackoverflow.com/questions/8777257/equals-vs-arrays-equals-in-java", "answers": [{"body": "<p>It's a  famous problem: <code>.equals()</code> for arrays is badly broken, just don't use it, ever.</p>\n\n<p>That said, it's not \"broken\" as in \"someone has done it in a really wrong way\" \u2014 it's just doing what's defined and not what's usually expected. So for purists: it's perfectly fine, and that also means, <em>don't use it, ever.</em></p>\n\n<p>Now the expected behaviour for <code>equals</code> is to compare data. The default behaviour is to compare the identity, as <code>Object</code> does not have any data (for purists: yes it has, but it's not the point); assumption is, if you need <code>equals</code> in subclasses, you'll implement it. In arrays, there's no implementation for you, so you're not supposed to use it.</p>\n\n<p>So the difference is, <code>Arrays.equals(array1, array2)</code> works <em>as you would expect</em> (i.e. compares content), <code>array1.equals(array2)</code> falls back to <code>Object.equals</code> implementation, which in turn compares identity, and thus better replaced by <code>==</code> (for purists: yes I know about <code>null</code>).</p>\n\n<p>Problem is, even <code>Arrays.equals(array1, array2)</code> will bite you hard if elements of array do not implement <code>equals</code> properly. It's a very naive statement, I know, but there's a very important less-than-obvious case: consider a 2D array. </p>\n\n<p>2D array in Java is an array of arrays, and arrays' <code>equals</code> is broken (or useless if you prefer), so <code>Arrays.equals(array1, array2)</code> will not work as you expect on 2D arrays.</p>\n\n<p>Hope that helps.</p>\n", "title": "equals vs Arrays.equals in Java", "answer_id": 8777266, "link": "http://stackoverflow.com/questions/8777257/equals-vs-arrays-equals-in-java/8777266#8777266", "tags": ["java", "arrays", "equality"]}, {"body": "<p><code>array1.equals(array2)</code> is the same as <code>array1 == array2</code>, i.e. is it the same array. As @alf points out it's not what most people expect.</p>\n\n<p><code>Arrays.equals(array1, array2)</code> compares the contents of the arrays.</p>\n\n<hr>\n\n<p>Similarly <code>array.toString()</code> may not be very useful and you need to use <code>Arrays.toString(array)</code>.</p>\n", "title": "equals vs Arrays.equals in Java", "answer_id": 8777279, "link": "http://stackoverflow.com/questions/8777257/equals-vs-arrays-equals-in-java/8777279#8777279", "tags": ["java", "arrays", "equality"]}, {"body": "<p>The <code>equals()</code> of arrays is inherited from <code>Object</code>, so it does not look at the contents of the arrrays, it only considers each array equal to itself.</p>\n\n<p>The <code>Arrays.equals()</code> methods <em>do</em> compare the arrays' contents. There's overloads for all primitive types, and the one for objects uses the objects' own <code>equals()</code> methods.</p>\n", "title": "equals vs Arrays.equals in Java", "answer_id": 8777292, "link": "http://stackoverflow.com/questions/8777257/equals-vs-arrays-equals-in-java/8777292#8777292", "tags": ["java", "arrays", "equality"]}, {"body": "<p>The <code>Arrays.equals(array1, array2)</code> : </p>\n\n<p>check if both arrays contain the same number of elements, and all corresponding pairs of elements in the two arrays are equal.</p>\n\n<p>The <code>array1.equals(array2)</code> :</p>\n\n<p>compare the object to another object and return true only if the reference of the two object are equal as in the <code>Object.equals()</code></p>\n", "title": "equals vs Arrays.equals in Java", "answer_id": 8777311, "link": "http://stackoverflow.com/questions/8777257/equals-vs-arrays-equals-in-java/8777311#8777311", "tags": ["java", "arrays", "equality"]}, {"body": "<p>Arrays inherit <code>equals()</code> from <code>Object</code> and hence compare only returns true if comparing an array against itself.</p>\n\n<p>On the other hand, <code>Arrays.equals</code> compares the elements of the arrays.</p>\n\n<p>This snippet elucidates the difference:</p>\n\n<pre><code>Object o1 = new Object();\nObject o2 = new Object();\nObject[] a1 = { o1, o2 };\nObject[] a2 = { o1, o2 };\nSystem.out.println(a1.equals(a2)); // prints false\nSystem.out.println(Arrays.equals(a1, a2)); // prints true\n</code></pre>\n\n<p>See also <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#equals%28java.lang.Object%5B%5D,%20java.lang.Object%5B%5D%29\"><code>Arrays.equals()</code></a>. Another static method there may also be of interest: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#deepEquals%28java.lang.Object%5B%5D,%20java.lang.Object%5B%5D%29\"><code>Arrays.deepEquals()</code></a>.</p>\n", "title": "equals vs Arrays.equals in Java", "answer_id": 8777312, "link": "http://stackoverflow.com/questions/8777257/equals-vs-arrays-equals-in-java/8777312#8777312", "tags": ["java", "arrays", "equality"]}, {"body": "<p>Look inside the implementation of the two methods to understand them deeply:</p>\n\n<pre><code>array1.equals(array2);\n</code></pre>\n\n\n\n<pre><code>/**\n * Indicates whether some other object is \"equal to\" this one.\n * &lt;p&gt;\n * The {@code equals} method implements an equivalence relation\n * on non-null object references:\n * &lt;ul&gt;\n * &lt;li&gt;It is &lt;i&gt;reflexive&lt;/i&gt;: for any non-null reference value\n *     {@code x}, {@code x.equals(x)} should return\n *     {@code true}.\n * &lt;li&gt;It is &lt;i&gt;symmetric&lt;/i&gt;: for any non-null reference values\n *     {@code x} and {@code y}, {@code x.equals(y)}\n *     should return {@code true} if and only if\n *     {@code y.equals(x)} returns {@code true}.\n * &lt;li&gt;It is &lt;i&gt;transitive&lt;/i&gt;: for any non-null reference values\n *     {@code x}, {@code y}, and {@code z}, if\n *     {@code x.equals(y)} returns {@code true} and\n *     {@code y.equals(z)} returns {@code true}, then\n *     {@code x.equals(z)} should return {@code true}.\n * &lt;li&gt;It is &lt;i&gt;consistent&lt;/i&gt;: for any non-null reference values\n *     {@code x} and {@code y}, multiple invocations of\n *     {@code x.equals(y)} consistently return {@code true}\n *     or consistently return {@code false}, provided no\n *     information used in {@code equals} comparisons on the\n *     objects is modified.\n * &lt;li&gt;For any non-null reference value {@code x},\n *     {@code x.equals(null)} should return {@code false}.\n * &lt;/ul&gt;\n * &lt;p&gt;\n * The {@code equals} method for class {@code Object} implements\n * the most discriminating possible equivalence relation on objects;\n * that is, for any non-null reference values {@code x} and\n * {@code y}, this method returns {@code true} if and only\n * if {@code x} and {@code y} refer to the same object\n * ({@code x == y} has the value {@code true}).\n * &lt;p&gt;\n * Note that it is generally necessary to override the {@code hashCode}\n * method whenever this method is overridden, so as to maintain the\n * general contract for the {@code hashCode} method, which states\n * that equal objects must have equal hash codes.\n *\n * @param   obj   the reference object with which to compare.\n * @return  {@code true} if this object is the same as the obj\n *          argument; {@code false} otherwise.\n * @see     #hashCode()\n * @see     java.util.HashMap\n */\npublic boolean equals(Object obj) {\n    return (this == obj);\n}\n</code></pre>\n\n<p>while:</p>\n\n<pre><code>Arrays.equals(array1, array2);\n</code></pre>\n\n\n\n<pre><code>/**\n * Returns &lt;tt&gt;true&lt;/tt&gt; if the two specified arrays of Objects are\n * &lt;i&gt;equal&lt;/i&gt; to one another.  The two arrays are considered equal if\n * both arrays contain the same number of elements, and all corresponding\n * pairs of elements in the two arrays are equal.  Two objects &lt;tt&gt;e1&lt;/tt&gt;\n * and &lt;tt&gt;e2&lt;/tt&gt; are considered &lt;i&gt;equal&lt;/i&gt; if &lt;tt&gt;(e1==null ? e2==null\n * : e1.equals(e2))&lt;/tt&gt;.  In other words, the two arrays are equal if\n * they contain the same elements in the same order.  Also, two array\n * references are considered equal if both are &lt;tt&gt;null&lt;/tt&gt;.&lt;p&gt;\n *\n * @param a one array to be tested for equality\n * @param a2 the other array to be tested for equality\n * @return &lt;tt&gt;true&lt;/tt&gt; if the two arrays are equal\n */\npublic static boolean equals(Object[] a, Object[] a2) {\n    if (a==a2)\n        return true;\n    if (a==null || a2==null)\n        return false;\n\n    int length = a.length;\n    if (a2.length != length)\n        return false;\n\n    for (int i=0; i&lt;length; i++) {\n        Object o1 = a[i];\n        Object o2 = a2[i];\n        if (!(o1==null ? o2==null : o1.equals(o2)))\n            return false;\n    }\n\n    return true;\n}\n</code></pre>\n", "title": "equals vs Arrays.equals in Java", "answer_id": 8777397, "link": "http://stackoverflow.com/questions/8777257/equals-vs-arrays-equals-in-java/8777397#8777397", "tags": ["java", "arrays", "equality"]}, {"body": "<p>Sigh. Back in the 70s I was the \"system programmer\" (sysadmin) for an IBM 370 system, and my employer was a member of the IBM users group SHARE. It would sometimes happen thatsomebody submitted an APAR (bug report) on some unexpected behavior of some CMS command, and IBM would respond NOTABUG: the command does what it was designed to do (and what the documentation says).</p>\n\n<p>SHARE came up with a counter to this: BAD -- Broken As Designed. I think this might apply to this implementation of equals for arrays.</p>\n\n<p>There's nothing wrong with the implementation of Object.equals. Object has no data members, so there is nothing to compare. Two \"Object\"s are equal if and only if they are, in fact, the same Object (internally, the same address and length).</p>\n\n<p>But that logic doesn't apply to arrays. Arrays have data, and you expect comparison (via equals) to compare the data. Ideally, the way Arrays.deepEquals does, but at least the way Arrays.equals does (shallow comparison of the elements).</p>\n\n<p>So the problem is that array (as a built-in object) does not override Object.equals. String (as a named class) <em>does</em> override Object.equals and give the result you expect.</p>\n\n<p>Other answers given are correct: [...].equals([....]) simply compares the pointers and not the contents. Maybe someday somebody will correct this. Or maybe not: how many existing programs would break if [...].equals actually compared the elements? Not many, I suspect, but more than zero.</p>\n", "title": "equals vs Arrays.equals in Java", "answer_id": 36943751, "link": "http://stackoverflow.com/questions/8777257/equals-vs-arrays-equals-in-java/36943751#36943751", "tags": ["java", "arrays", "equality"]}], "question_id": 8777257}, {"body": "<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/7352493/failed-to-load-the-jni-shared-library-jdk\">Failed to Load the JNI shared Library (JDK)</a>  </p>\n</blockquote>\n\n\n\n<p>I can't open Eclipse because I get an alert that says </p>\n\n<blockquote>\n  <p>Failed to load JNI shared library C:\\Program Files (x86)\\eclipse\\jre\\bin\\client\\jvm.dll</p>\n</blockquote>\n\n<p>I've found a kind of solution on YouTube, <em><a href=\"http://www.youtube.com/watch?v=DPiOD5V74nk\">Eclipse Failed to load JNI library fix</a></em>.</p>\n\n<p>He says that you only have to download a <a href=\"http://en.wikipedia.org/wiki/Java_Virtual_Machine#Execution_environment\">JRE</a> 7 folder. Then I just have to replace\n<code>C:\\Program Files (x86)\\Java\\jre7\\bin\\server\\jvm.dll</code> with <code>C:\\Program Files (x86)\\eclipse\\jre\\bin\\client\\jvm.dll</code>.</p>\n\n<p>But where is the JRE 7 link?</p>\n", "tags": ["java", "eclipse", "jni"], "title": "Eclipse reported &quot;Failed to load JNI shared library&quot;", "answer_count": 4, "creation_date": 1337005069, "score": 121, "link": "http://stackoverflow.com/questions/10585135/eclipse-reported-failed-to-load-jni-shared-library", "answers": [{"body": "<p>First, ensure that your version of Eclipse and JDK match, either both 64-bit or both 32-bit (you can't mix-and-match 32-bit with 64-bit).</p>\n\n<p>Second, the -vm argument in <code>eclipse.ini</code> should point to the java executable. See \n<a href=\"http://wiki.eclipse.org/Eclipse.ini\">http://wiki.eclipse.org/Eclipse.ini</a> for examples.</p>\n\n<p>If you're unsure of what version (64-bit or 32-bit) of Eclipse you have installed, you can determine that a few different ways. See <a href=\"http://stackoverflow.com/questions/5103366/how-to-find-out-if-an-installed-eclipse-is-32-or-64-bit-version\">How to find out if an installed Eclipse is 32 or 64 bit version?</a></p>\n", "title": "Eclipse reported &quot;Failed to load JNI shared library&quot;", "answer_id": 10585507, "link": "http://stackoverflow.com/questions/10585135/eclipse-reported-failed-to-load-jni-shared-library/10585507#10585507", "tags": ["java", "eclipse", "jni"]}, {"body": "<p>Installing a 64-bit version of Java will solve the issue. Go to page <em><a href=\"http://www.java.com/en/download/manual.jsp\">Java Downloads for All Operating Systems</a></em></p>\n\n<p>This is a problem due to the incompatibility of the Java version and the Eclipse version\nboth should be 64 bit if you are using a 64-bit system.</p>\n", "title": "Eclipse reported &quot;Failed to load JNI shared library&quot;", "answer_id": 11010648, "link": "http://stackoverflow.com/questions/10585135/eclipse-reported-failed-to-load-jni-shared-library/11010648#11010648", "tags": ["java", "eclipse", "jni"]}, {"body": "<p><a href=\"http://en.wikipedia.org/wiki/Java_Virtual_Machine#Execution_environment\">JRE</a> 7 is probably installed in <code>Program Files\\Java</code> and NOT <code>Program Files(x86)\\Java</code>.</p>\n", "title": "Eclipse reported &quot;Failed to load JNI shared library&quot;", "answer_id": 11375281, "link": "http://stackoverflow.com/questions/10585135/eclipse-reported-failed-to-load-jni-shared-library/11375281#11375281", "tags": ["java", "eclipse", "jni"]}, {"body": "<p>Yep, in Windows 7 64 bit you have <code>C:\\Program Files</code> and <code>C:\\Program Files (x86)</code>. You can find Java folders in both of them, but you must add <code>C:\\Program Files\\Java\\jre7\\bin</code> to environment variable PATH.</p>\n", "title": "Eclipse reported &quot;Failed to load JNI shared library&quot;", "answer_id": 11428027, "link": "http://stackoverflow.com/questions/10585135/eclipse-reported-failed-to-load-jni-shared-library/11428027#11428027", "tags": ["java", "eclipse", "jni"]}], "question_id": 10585135}, {"body": "<p>Reading the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/List.html\">Java documentation for the ADT List</a> it says:</p>\n\n<blockquote>\n  <p>The List interface provides four methods for positional (indexed) access to list elements. Lists (like Java arrays) are zero based. Note that these operations may execute in time proportional to the index value for some implementations (the LinkedList class, for example). Thus, iterating over the elements in a list is typically preferable to indexing through it if the caller does not know the implementation.</p>\n</blockquote>\n\n<p>What exactly does this mean? I don't understand the conclusion which is drawn.</p>\n", "tags": ["java", "list", "iterator"], "title": "Why would iterating over a List be faster than indexing through it?", "answer_count": 5, "creation_date": 1336412296, "score": 120, "link": "http://stackoverflow.com/questions/10486507/why-would-iterating-over-a-list-be-faster-than-indexing-through-it", "answers": [{"body": "<p>The answer is implied here:</p>\n\n<blockquote>\n  <p>Note that these operations may execute in time proportional to the index value for some implementations (the LinkedList class, for example)</p>\n</blockquote>\n\n<p>A linked list doesn't have an inherent index; calling <code>.get(x)</code> will require the list implementation to find the first entry and call <code>.next()</code> x-1 times (for a O(n) or linear time access), where an array-backed list can just index into <code>backingarray[x]</code> in O(1) or constant time.  </p>\n\n<p>If you look at the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html\">JavaDoc for <code>LinkedList</code></a>, you'll see the comment</p>\n\n<blockquote>\n  <p>All of the operations perform as could be expected for a doubly-linked list. Operations that index into the list will traverse the list from the beginning or the end, whichever is closer to the specified index. </p>\n</blockquote>\n\n<p>whereas <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html\">JavaDoc for <code>ArrayList</code></a> has the corresponding</p>\n\n<blockquote>\n  <p>Resizable-array implementation of the List interface. Implements all optional list operations, and permits all elements, including null. In addition to implementing the List interface, this class provides methods to manipulate the size of the array that is used internally to store the list. (This class is roughly equivalent to Vector, except that it is unsynchronized.)</p>\n  \n  <p>The <code>size</code>, <code>isEmpty</code>, <code>get</code>, <code>set</code>, <code>iterator</code>, and <code>listIterator</code> operations run in constant time. The add operation runs in amortized constant time, that is, adding n elements requires O(n) time. All of the other operations run in linear time (roughly speaking). The constant factor is low compared to that for the <code>LinkedList</code> implementation. </p>\n</blockquote>\n\n<p>A <a href=\"http://stackoverflow.com/questions/559839/big-o-summary-for-java-collections-framework-implementations\">related question titled \"Big-O Summary for Java Collections Framework\"</a> has an answer pointing to this resource, <a href=\"http://www.coderfriendly.com/wp-content/uploads/2009/05/java_collections_v2.pdf\">\"Java Collections JDK6\"</a> which you might find helpful.  </p>\n", "title": "Why would iterating over a List be faster than indexing through it?", "answer_id": 10486550, "link": "http://stackoverflow.com/questions/10486507/why-would-iterating-over-a-list-be-faster-than-indexing-through-it/10486550#10486550", "tags": ["java", "list", "iterator"]}, {"body": "<p>To find the i-th element of a <code>LinkedList</code> the implementation goes through all elements up to the i-th.</p>\n\n<p>So</p>\n\n<pre><code>for(int i = 0; i &lt; list.length ; i++ ) {\n    Object something = list.get(i); //Slow for LinkedList\n}\n</code></pre>\n", "title": "Why would iterating over a List be faster than indexing through it?", "answer_id": 10486561, "link": "http://stackoverflow.com/questions/10486507/why-would-iterating-over-a-list-be-faster-than-indexing-through-it/10486561#10486561", "tags": ["java", "list", "iterator"]}, {"body": "<p>In a linked list, each element has a pointer to the next element:</p>\n\n<pre><code>head -&gt; item1 -&gt; item2 -&gt; item3 -&gt; etc.\n</code></pre>\n\n<p>To access <code>item3</code>, you can see clearly that you need to walk from the head through every node until you reach item3, since you cannot jump directly.</p>\n\n<p>Thus, if I wanted to print the value of each element, if I write this:</p>\n\n<pre><code>for(int i = 0; i &lt; 4; i++) {\n    System.out.println(list.get(i));\n}\n</code></pre>\n\n<p>what happens is this:</p>\n\n<pre><code>head -&gt; print head\nhead -&gt; item1 -&gt; print item1\nhead -&gt; item1 -&gt; item2 -&gt; print item2\nhead -&gt; item1 -&gt; item2 -&gt; item3 print item3\n</code></pre>\n\n<p>This is <strong>horribly inefficient</strong> because every time you are indexing it restarts from the beginning of the list and goes through every item. This means that your complexity is effectively <code>O(N^2)</code> just to traverse the list!</p>\n\n<p>If instead I did this:</p>\n\n<pre><code>for(String s: list) {\n    System.out.println(s);\n}\n</code></pre>\n\n<p>then what happens is this:</p>\n\n<pre><code>head -&gt; print head -&gt; item1 -&gt; print item1 -&gt; item2 -&gt; print item2 etc.\n</code></pre>\n\n<p>all in a single traversal, which is <code>O(N)</code>.</p>\n\n<p>Now, going to the other implementation of <code>List</code> which is <code>ArrayList</code>, that one is backed by a simple array. In that case both of the above traversals are equivalent, since an array is contiguous so it allows random jumps to arbitrary positions.</p>\n", "title": "Why would iterating over a List be faster than indexing through it?", "answer_id": 10486601, "link": "http://stackoverflow.com/questions/10486507/why-would-iterating-over-a-list-be-faster-than-indexing-through-it/10486601#10486601", "tags": ["java", "list", "iterator"]}, {"body": "<p>While the accepted answer is most certainly correct, might I point out a minor flaw. Quoting Tudor : </p>\n\n<blockquote>\n  <p>Now, going to the other implementation of List which is ArrayList,\n  that one is backed by a simple array. <strong>In that case both of the above\n  traversals are equivalent</strong>, since an array is contiguous so it allows\n  random jumps to arbitrary positions.</p>\n</blockquote>\n\n<p>This is not completely true. The truth is, that </p>\n\n<blockquote>\n  <p>With an ArrayList, a hand-written counted loop is about 3x faster</p>\n</blockquote>\n\n<p><a href=\"http://developer.android.com/guide/practices/design/performance.html#foreach\">source: Designing for Performance, Google's Android doc</a></p>\n\n<p>Note that the handwritten loop refers to the indexed iteration. I suspect its because of the iterator which is used with enhanced for loops. It produces a minor performance in penalty in a structure which is backed by a contiguous array. I also suspect this might be true for the Vector class. </p>\n\n<p>My rule is, use the enhanced for loop whenever possible, and if you really care about performance, use indexed iteration only for either ArrayLists or Vectors. In most cases, you can even ignore this- the compiler might be optimizing this in the background.</p>\n\n<p>I merely want to point out that in the context of development in Android, both the traversals of ArrayLists are <strong>not necessarily equivalent</strong>. Just food for thought.</p>\n", "title": "Why would iterating over a List be faster than indexing through it?", "answer_id": 10504693, "link": "http://stackoverflow.com/questions/10486507/why-would-iterating-over-a-list-be-faster-than-indexing-through-it/10504693#10504693", "tags": ["java", "list", "iterator"]}, {"body": "<p>Iterating over a list with an offset for the lookup, such as <code>i</code>, is analogous to <em>Shlemiel the painter's algorithm</em>.</p>\n\n<blockquote>\n  <p>Shlemiel gets a job as a street painter, painting the dotted lines\n  down the middle of the road. On the first day he takes a can of paint\n  out to the road and finishes 300 yards of the road. \"That's pretty\n  good!\" says his boss, \"you're a fast worker!\" and pays him a kopeck.</p>\n  \n  <p>The next day Shlemiel only gets 150 yards done. \"Well, that's not\n  nearly as good as yesterday, but you're still a fast worker. 150 yards\n  is respectable,\" and pays him a kopeck.</p>\n  \n  <p>The next day Shlemiel paints 30 yards of the road. \"Only 30!\" shouts\n  his boss. \"That's unacceptable! On the first day you did ten times\n  that much work! What's going on?\"</p>\n  \n  <p>\"I can't help it,\" says Shlemiel. \"Every day I get farther and farther\n  away from the paint can!\"</p>\n</blockquote>\n\n<p><a href=\"http://www.joelonsoftware.com/articles/fog0000000319.html\">Source</a>.</p>\n\n<p>This little story may make it easier to understand what is going on internally and why it is so inefficient.</p>\n", "title": "Why would iterating over a List be faster than indexing through it?", "answer_id": 10509442, "link": "http://stackoverflow.com/questions/10486507/why-would-iterating-over-a-list-be-faster-than-indexing-through-it/10509442#10509442", "tags": ["java", "list", "iterator"]}], "question_id": 10486507}, {"body": "<p>How do atomic / volatile / synchronized work internally?</p>\n\n<p>What is the difference between the following code blocks?</p>\n\n<p>Code 1</p>\n\n<pre><code>private int counter;\n\npublic int getNextUniqueIndex() {\n    return counter++; \n}\n</code></pre>\n\n<p>Code 2</p>\n\n<pre><code>private AtomicInteger counter;\n\npublic int getNextUniqueIndex() {\n    return counter.getAndIncrement();\n}\n</code></pre>\n\n<p>Code 3</p>\n\n<pre><code>private volatile int counter;\n\npublic int getNextUniqueIndex() {\n    return counter++; \n}\n</code></pre>\n\n<hr>\n\n<p>Does <code>volatile</code> work in the following way? Is</p>\n\n<pre><code>volatile int i = 0;\nvoid incIBy5() {\n    i += 5;\n}\n</code></pre>\n\n<p>equivalent to </p>\n\n<pre><code>void incIBy5() {\n    int temp;\n    synchronized(i) { temp = i }\n    synchronized(i) { i = temp + 5 }\n}\n</code></pre>\n\n<p>I think that two threads cannot enter a synchronized block at the same time... am I right? If this is true then how does <code>atomic.incrementAndGet()</code> work without <code>synchronized</code>? And is it thread-safe?</p>\n\n<p>And what is the difference between internal reading and writing to volatile variables / atomic variables? I read in some article that the thread has a local copy of the variables - what is that?</p>\n", "tags": ["java", "multithreading", "synchronization", "atomic", "volatile"], "title": "What is the difference between atomic / volatile / synchronized?", "answer_count": 6, "creation_date": 1331984801, "score": 119, "link": "http://stackoverflow.com/questions/9749746/what-is-the-difference-between-atomic-volatile-synchronized", "answers": [{"body": "<p>You are specifically asking about how they <em>internally work</em>, so here you are:</p>\n\n<h1>No synchronization</h1>\n\n<pre><code>private int counter;\n\npublic int getNextUniqueIndex() {\n  return counter++; \n}\n</code></pre>\n\n<p>It basically reads value from memory, increments it and puts back to memory. This works in single thread but nowadays, in the era of multi-core, multi-CPU, multi-level caches it won't work correctly. First of all it introduces race condition (several threads can read the value at the same time), but also visibility problems. The value might only be stored in \"<em>local</em>\" CPU memory (some cache) and not be visible for other CPUs/cores (and thus - threads). This is why many refer to <em>local copy</em> of a variable in a thread. It is very unsafe. Consider this popular but broken thread-stopping code:</p>\n\n<pre><code>private boolean stopped;\n\npublic void run() {\n    while(!stopped) {\n        //do some work\n    }\n}\n\npublic void pleaseStop() {\n    stopped = true;\n}\n</code></pre>\n\n<p>Add <code>volatile</code> to <code>stopped</code> variable and it works fine - if any other thread modifies <code>stopped</code> variable via <code>pleaseStop()</code> method, you are guaranteed to see that change immediately in working thread's <code>while(!stopped)</code> loop. BTW this is not a good way to interrupt a thread either, see: <a href=\"http://stackoverflow.com/questions/6410721\">How to stop a thread that is running forever without any use</a> and <a href=\"http://stackoverflow.com/questions/7786305\">Stopping a specific java thread</a>.</p>\n\n<h1><code>AtomicInteger</code></h1>\n\n<pre><code>private AtomicInteger counter = new AtomicInteger();\n\npublic int getNextUniqueIndex() {\n  return counter.getAndIncrement();\n}\n</code></pre>\n\n<p>The <code>AtomicInteger</code> class uses CAS (<a href=\"http://en.wikipedia.org/wiki/Compare-and-swap\">compare-and-swap</a>) low-level CPU operations (no synchronization needed!) They allow you to modify a particular variable only if the present value is equal to something else (and is returned successfully). So when you execute <code>getAndIncrement()</code> it actually runs in a loop (simplified real implementation):</p>\n\n<pre><code>int current;\ndo {\n  current = get();\n} while(!compareAndSet(current, current + 1));\n</code></pre>\n\n<p>So basically: read; try to store incremented value; if not successful (the value is no longer equal to <code>current</code>), read and try again. The <code>compareAndSet()</code> is implemented in native code (assembly).</p>\n\n<h1><code>volatile</code> without synchronization</h1>\n\n<pre><code>private volatile int counter;\n\npublic int getNextUniqueIndex() {\n  return counter++; \n}\n</code></pre>\n\n<p>This code is not correct. It fixes the visibility issue (<code>volatile</code> makes sure other threads can see change made to <code>counter</code>) but still has a race condition. This has been <a href=\"http://stackoverflow.com/questions/25168062/why-is-i-not-atomic\">explained</a> multiple times: pre/post-incrementation is not atomic.</p>\n\n<p>The only side effect of <code>volatile</code> is \"<em>flushing</em>\" caches so that all other parties see the freshest version of the data. This is too strict in most situations; that is why <code>volatile</code> is not default.</p>\n\n<h1><code>volatile</code> without synchronization (2)</h1>\n\n<pre><code>volatile int i = 0;\nvoid incIBy5() {\n  i += 5;\n}\n</code></pre>\n\n<p>The same problem as above, but even worse because <code>i</code> is not <code>private</code>. The race condition is still present. Why is it a problem? If, say, two threads run this code simultaneously, the output might be <code>+ 5</code> or <code>+ 10</code>. However, you are guaranteed to see the change.</p>\n\n<h1>Multiple independent <code>synchronized</code></h1>\n\n<pre><code>void incIBy5() {\n  int temp;\n  synchronized(i) { temp = i }\n  synchronized(i) { i = temp + 5 }\n}\n</code></pre>\n\n<p>Surprise, this code is incorrect as well. In fact, it is completely wrong. First of all you are synchronizing on <code>i</code>, which is about to be changed (moreover, <code>i</code> is a primitive, so I guess you are synchronizing on a temporary <code>Integer</code> created via autoboxing...) Completely flawed. You could also write:</p>\n\n<pre><code>synchronized(new Object()) {\n  //thread-safe, SRSLy?\n}\n</code></pre>\n\n<p>No two threads can enter the same <code>synchronized</code> block <strong>with the same lock</strong>. In this case (and similarly in your code) the lock object changes upon every execution, so <code>synchronized</code> effectively has no effect.</p>\n\n<p>Even if you have used a final variable (or <code>this</code>) for synchronization, the code is still incorrect. Two threads can first read <code>i</code> to <code>temp</code> synchronously (having the same value locally in <code>temp</code>), then the first assigns a new value to <code>i</code> (say, from 1 to 6) and the other one does the same thing (from 1 to 6).</p>\n\n<p>The synchronization must span from reading to assigning a value. Your first synchronization has no effect (reading an <code>int</code> is atomic) and the second as well. In my opinion, these are the correct forms:</p>\n\n<pre><code>void synchronized incIBy5() {\n  i += 5 \n}\n\nvoid incIBy5() {\n  synchronized(this) {\n    i += 5 \n  }\n}\n\nvoid incIBy5() {\n  synchronized(this) {\n    int temp = i;\n    i = temp + 5;\n  }\n}\n</code></pre>\n", "title": "What is the difference between atomic / volatile / synchronized?", "answer_id": 9749864, "link": "http://stackoverflow.com/questions/9749746/what-is-the-difference-between-atomic-volatile-synchronized/9749864#9749864", "tags": ["java", "multithreading", "synchronization", "atomic", "volatile"]}, {"body": "<blockquote>\n  <p>I know that two threads can not enter in Synchronize block at the same time</p>\n</blockquote>\n\n<p>Two thread cannot enter a synchronized block on the same object twice. This means that two threads can enter the same block on different objects.  This confusion can lead to code like this.</p>\n\n<pre><code>private Integer i = 0;\n\nsynchronized(i) {\n   i++;\n}\n</code></pre>\n\n<p>This will not behave as expected as it could be locking on a different object each time.</p>\n\n<blockquote>\n  <p>if this is true than How this atomic.incrementAndGet() works without Synchronize ?? and is thread safe ??</p>\n</blockquote>\n\n<p>yes. It doesn't use locking to achieve thread safety.</p>\n\n<p>If you want to know how they work in more detail, you can read the code for them.</p>\n\n<blockquote>\n  <p>And what is difference between internal reading and writing to Volatile Variable / Atomic Variable ??</p>\n</blockquote>\n\n<p>Atomic class uses volatile <strong>fields.</strong> There is no difference in the field.  The difference is the operations performed.  The Atomic classes use CompareAndSwap or CAS operations.</p>\n\n<blockquote>\n  <p>i read in some article that thread has local copy of variables what is that ??</p>\n</blockquote>\n\n<p>I can only assume that it referring to the fact that each CPU has its own cached view of memory which can be different from every other CPU.  To ensure that your CPU has a consistent view of data, you need to use thread safety techniques. </p>\n\n<p>This is only an issue when memory is shared at least one thread updates it.</p>\n", "title": "What is the difference between atomic / volatile / synchronized?", "answer_id": 9749891, "link": "http://stackoverflow.com/questions/9749746/what-is-the-difference-between-atomic-volatile-synchronized/9749891#9749891", "tags": ["java", "multithreading", "synchronization", "atomic", "volatile"]}, {"body": "<p>Declaring a variable as <strong>volatile</strong> means that modifying its value immediately affects the actual memory storage for the variable. The compiler cannot optimize away any references made to the variable. This guarantees that when one thread modifies the variable, all other threads see the new value immediately. (This is not guaranteed for non-volatile variables.)</p>\n\n<p>Declaring an <strong>atomic</strong> variable guarantees that operations made on the variable occur in an atomic fashion, i.e., that all of the substeps of the operation are completed within the thread they are executed and are not interrupted by other threads. For example, an increment-and-test operation requires the variable to be incremented and then compared to another value; an atomic operation guarantees that both of these steps will be completed as if they were a single indivisible/uninterruptible operation.</p>\n\n<p><strong>Synchronizing</strong> all accesses to a variable allows only a single thread at a time to access the variable, and forces all other threads to wait for that accessing thread to release its access to the variable. </p>\n\n<p>Synchronized access is similar to atomic access, but the atomic operations are generally implemented at a lower level of programming. Also, it is entirely possible to synchronize only some accesses to a variable and allow other accesses to be unsynchronized (e.g., synchronize all writes to a variable but none of the reads from it).</p>\n\n<p>Atomicity, synchronization, and volatility are independent attributes, but are typically used in combination to enforce proper thread cooperation for accessing variables.</p>\n\n<p><strong>Addendum</strong> <em>(April 2016)</em></p>\n\n<p>Synchronized access to a variable is usually implemented using a <em>monitor</em> or <em>semaphore</em>. These are low-level <em>mutex</em> (mutual exclusion) mechanisms that allow a thread to acquire control of a variable or block of code exclusively, forcing all other threads to wait if they also attempt to acquire the same mutex. Once the owning thread releases the mutex, another thread can acquire the mutex in turn.</p>\n\n<p><strong>Addendum</strong> <em>(July 2016)</em></p>\n\n<p>Synchronization occurs on an <em>object</em>. This means that calling a synchronized method of a class will lock the <code>this</code> object of the call. Static synchronized methods will lock the <code>Class</code> object itself.</p>\n\n<p>Likewise, entering a synchronized block requires locking the <code>this</code> object of the method.</p>\n\n<p>This means that a synchronized method (or block) can be executing in multiple threads at the same time if they are locking on <em>different</em> objects, but only one thread can execute a synchronized method (or block) at a time for any given <em>single</em> object.</p>\n", "title": "What is the difference between atomic / volatile / synchronized?", "answer_id": 28177154, "link": "http://stackoverflow.com/questions/9749746/what-is-the-difference-between-atomic-volatile-synchronized/28177154#28177154", "tags": ["java", "multithreading", "synchronization", "atomic", "volatile"]}, {"body": "<p>A volatile + synchronization is a fool proof solution for an operation(statement) to be fully atomic which includes multiple instructions to the CPU.</p>\n\n<p>Say for eg:volatile int i = 2;  i++, which is nothing but i = i + 1; which makes i as the value 3 in the memory after the execution of this statement.\nThis includes reading the existing value from memory for i(which is 2), load into the CPU accumulator register and do with the calculation by increment the existing value with one(2 + 1 = 3 in accumulator)  and then write back that incremented value back to the memory.  These operations are not atomic enough though the value is of i is volatile.  i being volatile guarantees only that a SINGLE read/write from memory is atomic and not with MULTIPLE.  Hence, we need to have synchronized also around i++  to keep it to be fool proof atomic statement.  Remember the fact that a statement includes multiple statements.</p>\n\n<p>Hope the explanation is clear enough.</p>\n", "title": "What is the difference between atomic / volatile / synchronized?", "answer_id": 32227622, "link": "http://stackoverflow.com/questions/9749746/what-is-the-difference-between-atomic-volatile-synchronized/32227622#32227622", "tags": ["java", "multithreading", "synchronization", "atomic", "volatile"]}, {"body": "<p><strong><em>volatile:</em></strong></p>\n\n<p><code>volatile</code> is a keyword. <code>volatile</code> forces all threads to get latest value of the variable from main memory instead of cache. No locking is required to access volatile variables. All threads can access volatile variable value at same time.</p>\n\n<p>Using <code>volatile</code> variables reduces the risk of memory consistency errors, because any write to a volatile variable establishes a happens-before relationship with subsequent reads of that same variable. </p>\n\n<p><em>This means that changes to a <code>volatile</code> variable are always visible to other threads</em>. What's more, it also means that <strong><em>when a thread reads a <code>volatile</code> variable, it sees not just the latest change to the volatile, but also the side effects of the code that led up the change</em></strong>.</p>\n\n<p><em>When to use: One thread modifies the data and other threads have to read latest value of data. Other threads will take some action but they won't update data</em>.</p>\n\n<p><strong><em>AtomicXXX:</em></strong></p>\n\n<p><code>AtomicXXX</code> classes support lock-free thread-safe programming on single variables. These <code>AtomicXXX</code> classes (like <code>AtomicInteger</code>) resolves memory inconsistency errors / side effects of modification of volatile variables, which have been accessed in multiple threads.  </p>\n\n<p><em>When to use: Multiple threads can read and modify data.</em> </p>\n\n<p><strong><em>synchronized:</em></strong></p>\n\n<p><code>synchronized</code> is keyword used to guard a method or code block.  By making method as synchronized has two effects:</p>\n\n<ol>\n<li><p>First, it is not possible for two invocations of <code>synchronized</code> methods on the same object to interleave. When one thread is executing a <code>synchronized</code> method for an object, all other threads that invoke <code>synchronized</code> methods for the same object block (suspend execution) until the first thread is done with the object.</p></li>\n<li><p>Second, when a <code>synchronized</code> method exits, it automatically establishes a happens-before relationship with any subsequent invocation of a <code>synchronized</code> method for the same object. This guarantees that changes to the state of the object are visible to all threads.</p></li>\n</ol>\n\n<p><em>When to use: Multiple threads can read and modify data. Your business logic not only update the data but also executes atomic operations</em> </p>\n\n<p><code>AtomicXXX</code> is equivalent of <code>volatile + synchronized</code> even though the implementation is different. <code>AmtomicXXX</code> extends <code>volatile</code> variables + <code>compareAndSet</code> methods but does not use synchronization. </p>\n\n<p>Related SE questions:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/3519664/difference-between-volatile-and-synchronized-in-java/34355995#34355995\">Difference between volatile and synchronized in Java</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/3786825/volatile-boolean-vs-atomicboolean\">Volatile boolean vs AtomicBoolean</a></p>\n\n<p>Good articles to read: ( Above content is taken from these documentation pages)</p>\n\n<p><a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html\" rel=\"nofollow\">https://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html</a></p>\n\n<p><a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html\" rel=\"nofollow\">https://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html</a></p>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/package-summary.html\" rel=\"nofollow\">https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/package-summary.html</a></p>\n", "title": "What is the difference between atomic / volatile / synchronized?", "answer_id": 37395582, "link": "http://stackoverflow.com/questions/9749746/what-is-the-difference-between-atomic-volatile-synchronized/37395582#37395582", "tags": ["java", "multithreading", "synchronization", "atomic", "volatile"]}, {"body": "<p>The Java <strong>volatile</strong> modifier is an example of a special mechanism to guarantee that communication happens between threads. When one thread writes to a volatile variable, and another thread sees that write, the first thread is telling the second about all of the contents of memory up until it performed the write to that volatile variable.</p>\n\n<p><strong>Atomic operations</strong> are performed in a single unit of task without interference from other operations. Atomic operations are necessity in multi-threaded environment to avoid data inconsistency.</p>\n", "title": "What is the difference between atomic / volatile / synchronized?", "answer_id": 38177218, "link": "http://stackoverflow.com/questions/9749746/what-is-the-difference-between-atomic-volatile-synchronized/38177218#38177218", "tags": ["java", "multithreading", "synchronization", "atomic", "volatile"]}], "question_id": 9749746}, {"body": "<p>With Mockito, I want to <code>verify()</code> a method call with <code>byte[]</code> in its argument list, but I didn't find how to write this.</p>\n\n<pre><code> myMethod( byte[] )\n</code></pre>\n\n<p>I just want something like <code>anyByteArray()</code>, how to do that with Mockito ?</p>\n", "tags": ["java", "mockito"], "title": "Mockito matcher and array of primitives", "answer_count": 6, "creation_date": 1333919791, "score": 116, "link": "http://stackoverflow.com/questions/10066590/mockito-matcher-and-array-of-primitives", "answers": [{"body": "<p>I would try <code>any(byte[].class)</code> </p>\n", "title": "Mockito matcher and array of primitives", "answer_id": 10066785, "link": "http://stackoverflow.com/questions/10066590/mockito-matcher-and-array-of-primitives/10066785#10066785", "tags": ["java", "mockito"]}, {"body": "<p>Or..</p>\n\n<pre><code>byte[] sampleTextFileAsBytes = new byte[]{anyByte()};\n</code></pre>\n", "title": "Mockito matcher and array of primitives", "answer_id": 15350371, "link": "http://stackoverflow.com/questions/10066590/mockito-matcher-and-array-of-primitives/15350371#15350371", "tags": ["java", "mockito"]}, {"body": "<p>Try this:    </p>\n\n<pre><code>AdditionalMatchers.aryEq(array);\n</code></pre>\n", "title": "Mockito matcher and array of primitives", "answer_id": 23953845, "link": "http://stackoverflow.com/questions/10066590/mockito-matcher-and-array-of-primitives/23953845#23953845", "tags": ["java", "mockito"]}, {"body": "<p>I would rather use <code>Matchers.&lt;byte[]&gt;any()</code>. This worked for me.</p>\n", "title": "Mockito matcher and array of primitives", "answer_id": 28216245, "link": "http://stackoverflow.com/questions/10066590/mockito-matcher-and-array-of-primitives/28216245#28216245", "tags": ["java", "mockito"]}, {"body": "<p>I agree with Mutanos and Alecio.\nFurther, one can check as many identical method calls as possible (verifying the subsequent calls in the production code, the order of the verify's does not matter).\nHere is the code:</p>\n\n<pre><code>import static org.mockito.AdditionalMatchers.*;\n\n    verify(mockObject).myMethod(aryEq(new byte[] { 0 }));\n    verify(mockObject).myMethod(aryEq(new byte[] { 1, 2 }));\n</code></pre>\n", "title": "Mockito matcher and array of primitives", "answer_id": 33328341, "link": "http://stackoverflow.com/questions/10066590/mockito-matcher-and-array-of-primitives/33328341#33328341", "tags": ["java", "mockito"]}, {"body": "<p>You can use Mockito.any()  when arguments are arrays also.\nI used it like this:</p>\n\n<p><a href=\"http://i.stack.imgur.com/f3k1R.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/f3k1R.png\" alt=\"enter image description here\"></a></p>\n", "title": "Mockito matcher and array of primitives", "answer_id": 38201643, "link": "http://stackoverflow.com/questions/10066590/mockito-matcher-and-array-of-primitives/38201643#38201643", "tags": ["java", "mockito"]}], "question_id": 10066590}, {"body": "<p>I was just studying OCPJP questions and I found this strange code:</p>\n\n<pre><code>public static void main(String a[]) {\n    System.out.println(Double.NaN==Double.NaN);\n    System.out.println(Double.NaN!=Double.NaN);\n}\n</code></pre>\n\n<p>When I ran the code, I got:</p>\n\n<pre><code>false\ntrue\n</code></pre>\n\n<p>How is the output <code>false</code> when we're comparing two things that look the same as each other? What does <code>NaN</code> mean?</p>\n", "tags": ["java", "floating-point", "nan", "scjp", "ocpjp"], "title": "Why does Double.NaN==Double.NaN return false?", "answer_count": 8, "creation_date": 1326286950, "score": 116, "link": "http://stackoverflow.com/questions/8819738/why-does-double-nan-double-nan-return-false", "answers": [{"body": "<p>NaN is a special value that denotes \"not a number\"; it's the result of certain invalid arithmetic operations, such as <code>sqrt(-1)</code>, and has the (sometimes annoying) property that <code>NaN != NaN</code>.</p>\n", "title": "Why does Double.NaN==Double.NaN return false?", "answer_id": 8819754, "link": "http://stackoverflow.com/questions/8819738/why-does-double-nan-double-nan-return-false/8819754#8819754", "tags": ["java", "floating-point", "nan", "scjp", "ocpjp"]}, {"body": "<p>NaN means \"Not a Number\".</p>\n\n<p><a href=\"https://docs.oracle.com/javase/specs/jls/se6/html/typesValues.html\">Java Language Specification (JLS) Third Edition says</a>:</p>\n\n<blockquote>\n  <p>An operation that overflows produces a signed infinity, an operation that underflows produces a denormalized value or a signed zero, and an operation that has no mathematically definite result produces NaN. All numeric operations with NaN as an operand produce NaN as a result. As has already been described, NaN is unordered, so a numeric comparison operation involving one or two NaNs returns <code>false</code> and any <code>!=</code> comparison involving NaN returns <code>true</code>, including <code>x!=x</code> when <code>x</code> is NaN.</p>\n</blockquote>\n", "title": "Why does Double.NaN==Double.NaN return false?", "answer_id": 8819776, "link": "http://stackoverflow.com/questions/8819738/why-does-double-nan-double-nan-return-false/8819776#8819776", "tags": ["java", "floating-point", "nan", "scjp", "ocpjp"]}, {"body": "<p>The <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#NaN\" rel=\"nofollow\">javadoc for Double.NaN</a> says it all:</p>\n\n<blockquote>\n  <p>A constant holding a Not-a-Number (NaN) value of type <code>double</code>. It is equivalent to the value returned by <code>Double.longBitsToDouble(0x7ff8000000000000L)</code>.</p>\n</blockquote>\n\n<p>Interestingly, the source for <code>Double</code> defines <code>NaN</code> thus:</p>\n\n<pre><code>public static final double NaN = 0.0d / 0.0;\n</code></pre>\n\n<p>The special behaviour you describe is hard-wired into the JVM.</p>\n", "title": "Why does Double.NaN==Double.NaN return false?", "answer_id": 8819779, "link": "http://stackoverflow.com/questions/8819738/why-does-double-nan-double-nan-return-false/8819779#8819779", "tags": ["java", "floating-point", "nan", "scjp", "ocpjp"]}, {"body": "<p>Not a number represents the result of operations whose result is not representable with a number. The most famous operation is 0/0, whose result is not known. </p>\n\n<p>For this reason, NaN is not equal to anything (including other not-a-number values). For more info, just check the wikipedia page: <a href=\"http://en.wikipedia.org/wiki/NaN\" rel=\"nofollow\">http://en.wikipedia.org/wiki/NaN</a></p>\n", "title": "Why does Double.NaN==Double.NaN return false?", "answer_id": 8819798, "link": "http://stackoverflow.com/questions/8819738/why-does-double-nan-double-nan-return-false/8819798#8819798", "tags": ["java", "floating-point", "nan", "scjp", "ocpjp"]}, {"body": "<p><strong>Why that logic</strong></p>\n\n<p><code>NaN</code> means <code>Not a Number</code>. What is not a number? Anything. You can have anything in one side and anything in the other side, so nothing guarantees that both are equals. <code>NaN</code> is calculated with <code>Double.longBitsToDouble(0x7ff8000000000000L)</code> and as you can see in the documentation of <code>longBitsToDouble</code>:</p>\n\n<blockquote>\n  <p>If the argument is any value in the range <code>0x7ff0000000000001L</code> through\n  <code>0x7fffffffffffffffL</code> or in the range <code>0xfff0000000000001L</code> through\n  <code>0xffffffffffffffffL</code>, the result is a <code>NaN</code>.</p>\n</blockquote>\n\n<p>Also, <code>NaN</code> is logically treated inside the API.</p>\n\n<hr />\n\n<p><strong>Documentation</strong></p>\n\n<pre><code>/** \n * A constant holding a Not-a-Number (NaN) value of type\n * {@code double}. It is equivalent to the value returned by\n * {@code Double.longBitsToDouble(0x7ff8000000000000L)}.\n */\npublic static final double NaN = 0.0d / 0.0;\n</code></pre>\n\n<p>By the way, <code>NaN</code> <strong><em>is</em></strong> tested as your code sample:</p>\n\n<pre><code>/**\n * Returns {@code true} if the specified number is a\n * Not-a-Number (NaN) value, {@code false} otherwise.\n *\n * @param   v   the value to be tested.\n * @return  {@code true} if the value of the argument is NaN;\n *          {@code false} otherwise.\n */\nstatic public boolean isNaN(double v) {\n    return (v != v);\n}\n</code></pre>\n\n<hr />\n\n<p><strong>Solution</strong></p>\n\n<p>What you can do is use <code>compare</code>/<code>compareTo</code>:</p>\n\n<blockquote>\n  <p><code>Double.NaN</code> is considered by this method to be equal to itself\n  and greater than all other <code>double</code> values (including \n  <code>Double.POSITIVE_INFINITY</code>).</p>\n</blockquote>\n\n<pre><code>Double.compare(Double.NaN, Double.NaN);\nDouble.NaN.compareTo(Double.NaN);\n</code></pre>\n\n<p>Or, <code>equals</code>:</p>\n\n<blockquote>\n  <p>If <code>this</code> and <code>argument</code> both represent <code>Double.NaN</code>, then\n  the <code>equals</code> method returns <code>true</code>, even though \n  <code>Double.NaN==Double.NaN</code> has the value <code>false</code>.</p>\n</blockquote>\n\n<pre><code>Double.NaN.equals(Double.NaN);\n</code></pre>\n", "title": "Why does Double.NaN==Double.NaN return false?", "answer_id": 8820168, "link": "http://stackoverflow.com/questions/8819738/why-does-double-nan-double-nan-return-false/8820168#8820168", "tags": ["java", "floating-point", "nan", "scjp", "ocpjp"]}, {"body": "<p>NaN is by definition not equal to any number including NaN.  This is part of the IEEE 754 standard and implemented by the CPU/FPU.  It is not something the JVM has to add any logic to support.</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/NaN\">http://en.wikipedia.org/wiki/NaN</a></p>\n\n<blockquote>\n  <p>A comparison with a NaN always returns an unordered result even when comparing with itself. ... The equality and inequality predicates are non-signaling so x = x returning false can be used to test if x is a quiet NaN. </p>\n</blockquote>\n\n<p>Java treats all NaN as quiet NaN.</p>\n", "title": "Why does Double.NaN==Double.NaN return false?", "answer_id": 8820592, "link": "http://stackoverflow.com/questions/8819738/why-does-double-nan-double-nan-return-false/8820592#8820592", "tags": ["java", "floating-point", "nan", "scjp", "ocpjp"]}, {"body": "<p>as per, <a href=\"http://lectures.molgen.mpg.de/AlgoStoc/ieee.html\" rel=\"nofollow\">The IEEE standard for floating point arithmetic</a> for Double Precision numbers,</p>\n\n<blockquote>\n  <p>The IEEE double precision floating point standard representation\n  requires a 64 bit word, which may be represented as numbered from 0 to\n  63, left to right</p>\n</blockquote>\n\n<p><img src=\"http://i.stack.imgur.com/Shq7w.png\" alt=\"enter image description here\">\nwhere,</p>\n\n<pre><code>S: Sign \u2013 1 bit\nE: Exponent \u2013 11 bits\nF: Fraction \u2013 52 bits \n</code></pre>\n\n<blockquote>\n  <p>If <code>E=2047</code> (all <code>E</code> are <code>1</code>) and <code>F</code> is nonzero, then <code>V=NaN</code> (\"Not a number\")</p>\n</blockquote>\n\n<p>Which means,</p>\n\n<p>If all <code>E</code> bits are 1, and if there is any non-zero bit in <code>F</code> then the number is <code>NaN</code>. </p>\n\n<p>therefore, among others, all following numbers are <code>NaN</code>,</p>\n\n<pre><code>0 11111111 0000000000000000010000000000000000000000000000000000 = NaN\n1 11111111 0000010000000000010001000000000000001000000000000000 = NaN\n1 11111111 0000010000011000010001000000000000001000000000000000 = NaN\n</code></pre>\n\n<p>In particular, you cannot test </p>\n\n<pre><code>if (x == Double.NaN) \n</code></pre>\n\n<p>to check whether a particular result equals <code>Double.NaN</code>, because all \u201cnot a number\u201d values are considered distinct. However, you can use the <code>Double.isNaN</code> method:</p>\n\n<pre><code>if (Double.isNaN(x)) // check whether x is \"not a number\"\n</code></pre>\n", "title": "Why does Double.NaN==Double.NaN return false?", "answer_id": 28239745, "link": "http://stackoverflow.com/questions/8819738/why-does-double-nan-double-nan-return-false/28239745#28239745", "tags": ["java", "floating-point", "nan", "scjp", "ocpjp"]}, {"body": "<p>It might not be a direct answer to the question.\nBut if you want to check if something is equal to <code>Double.NaN</code> you should use this:</p>\n\n<pre><code>double d = Double.NaN\nDouble.isNaN(d);\n</code></pre>\n\n<p>This will return <code>true</code></p>\n", "title": "Why does Double.NaN==Double.NaN return false?", "answer_id": 32889701, "link": "http://stackoverflow.com/questions/8819738/why-does-double-nan-double-nan-return-false/32889701#32889701", "tags": ["java", "floating-point", "nan", "scjp", "ocpjp"]}], "question_id": 8819738}, {"body": "<p>Could someone tell me the difference between javadoc <code>@see</code> and <code>{@link}</code>?  </p>\n\n<p>Or rather, when to use which of them?</p>\n", "tags": ["java", "javadoc"], "title": "Javadoc @see or {@link}?", "answer_count": 2, "creation_date": 1334095793, "score": 116, "link": "http://stackoverflow.com/questions/10097199/javadoc-see-or-link", "answers": [{"body": "<p>There are no official guidelines on this, but the facts are:</p>\n\n<ul>\n<li><code>{@link}</code> is an inline link and can be placed wherever you like</li>\n<li><code>@see</code> creates its own section</li>\n</ul>\n\n<p>In my opinion, <code>{@link}</code> is best used when you literally use a class, field, constructor or method name in your description. The user will be able to click through to the javadoc of what you've linked.</p>\n\n<p>I use the <code>@see</code> annotation in 2 cases:</p>\n\n<ul>\n<li>Something is very relevant but not mentioned in the description.</li>\n<li>I refer to the same thing multiple times in the description, and it is used as a replacement for multiple links to the same.</li>\n</ul>\n\n<p>I based this opinion on randomly checking out documentation for a great variety of things in the standard library.</p>\n", "title": "Javadoc @see or {@link}?", "answer_id": 10097249, "link": "http://stackoverflow.com/questions/10097199/javadoc-see-or-link/10097249#10097249", "tags": ["java", "javadoc"]}, {"body": "<p><code>@see</code> creates an isolated line in the Javadocs. <code>{@link}</code> is for embedding within text.</p>\n\n<p>I use <code>@see</code> when it's a related entity but I don't refer to it in the expository text. I use links within text when there's tight coupling, or (I feel) it's likely the reader would benefit from the navigation hint, e.g., you'll need to reference it directly.</p>\n", "title": "Javadoc @see or {@link}?", "answer_id": 10097505, "link": "http://stackoverflow.com/questions/10097199/javadoc-see-or-link/10097505#10097505", "tags": ["java", "javadoc"]}], "question_id": 10097199}, {"body": "<p>In a recent interview, I was asked a really strange question. The interviewer asked me how can I compute 1+2+3+...+1000 just using compiler features. This means that I am not allowed to write a program and execute it, but I should just write a program that could drive the compiler to compute this sum while compilation and print the result when compilation completes. As a hint, he told me that I may use generics and pre-processor features of the compiler. It is possible to use C++, C# or Java compiler. Any ideas???</p>\n\n<p>This question is not related to computing the sum without any loops <a href=\"http://stackoverflow.com/questions/4568645/printing-1-to-1000-without-loop-or-conditionals/4568650#4568650\">asked here</a>. In addition, It should be noted that the sum SHOULD be calculated during compilation. Printing just the result using C++ compiler directives is not acceptable. </p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Reading more about the posted answers, I found that solving problems during compilation using C++ templates is called <strong>metaprogramming</strong>. This is a technique that was discovered accidentally by Dr. Erwin Unruh,  during the process of standardizing the C++ language. You may read more about this topic on <a href=\"http://en.wikipedia.org/wiki/Template_metaprogramming\" rel=\"nofollow\">wiki page of meta-programming</a>.\nIt seems that it is possible to write the program in Java using java annotations. You may take a look at <strong><a href=\"http://stackoverflow.com/a/8815298/114029\">maress's</a></strong> answer below. </p>\n\n<p><strong>Edit 2:</strong></p>\n\n<p>A nice book about meta-programming in C++ is <a href=\"http://rads.stackoverflow.com/amzn/click/0201704315\" rel=\"nofollow\">this one</a>. Worth to take a look if interested. </p>\n\n<p><strong>Edit 3</strong></p>\n\n<p>A useful C++ meta-programming library is Boost's MPL <a href=\"http://www.boost.org/doc/libs/1_58_0/libs/mpl/doc/index.html\" rel=\"nofollow\">this link</a>.</p>\n", "tags": ["c#", "java", "c++", "compiler-construction", "metaprogramming"], "title": "How to drive C#, C++ or Java compiler to compute 1+2+3+...+1000?", "answer_count": 13, "creation_date": 1325878849, "score": 115, "link": "http://stackoverflow.com/questions/8763497/how-to-drive-c-c-or-java-compiler-to-compute-123-1000", "answers": [{"body": "<p>You can use (and mostly abuse) C++ macros/templates to do <a href=\"http://en.wikipedia.org/wiki/Template_metaprogramming\" rel=\"nofollow\">metaprogramming</a>.\nAFAIK, Java doesn't allow the same kind of thing.</p>\n", "title": "How to drive C#, C++ or Java compiler to compute 1+2+3+...+1000?", "answer_id": 8763528, "link": "http://stackoverflow.com/questions/8763497/how-to-drive-c-c-or-java-compiler-to-compute-123-1000/8763528#8763528", "tags": ["c#", "java", "c++", "compiler-construction", "metaprogramming"]}, {"body": "<p><strong>Updated</strong> Now with improved recursion depth! Works on MSVC10 and GCC without increased depth. :)</p>\n\n<hr>\n\n<p>Simple compile-time recursion + addition:</p>\n\n<pre><code>template&lt;unsigned Cur, unsigned Goal&gt;\nstruct adder{\n  static unsigned const sub_goal = (Cur + Goal) / 2;\n  static unsigned const tmp = adder&lt;Cur, sub_goal&gt;::value;\n  static unsigned const value = tmp + adder&lt;sub_goal+1, Goal&gt;::value;\n};\n\ntemplate&lt;unsigned Goal&gt;\nstruct adder&lt;Goal, Goal&gt;{\n  static unsigned const value = Goal;\n};\n</code></pre>\n\n<p>Testcode:</p>\n\n<pre><code>template&lt;unsigned Start&gt;\nstruct sum_from{\n  template&lt;unsigned Goal&gt;\n  struct to{\n    template&lt;unsigned N&gt;\n    struct equals;\n\n    typedef equals&lt;adder&lt;Start, Goal&gt;::value&gt; result;\n  };\n};\n\nint main(){\n  sum_from&lt;1&gt;::to&lt;1000&gt;::result();\n}\n</code></pre>\n\n<p>Output for GCC:</p>\n\n<blockquote>\n  <p>error: declaration of \u2018struct sum_from&lt;1u>::to&lt;1000u>::equals&lt;500500u>\u2019</p>\n</blockquote>\n\n<p><a href=\"http://ideone.com/Di7Lx\">Live example on Ideone</a>.</p>\n\n<p>Output for MSVC10:</p>\n\n<pre><code>error C2514: 'sum_from&lt;Start&gt;::to&lt;Goal&gt;::equals&lt;Result&gt;' : class has no constructors\n      with\n      [\n          Start=1,\n          Goal=1000,\n          Result=500500\n      ]\n</code></pre>\n", "title": "How to drive C#, C++ or Java compiler to compute 1+2+3+...+1000?", "answer_id": 8763548, "link": "http://stackoverflow.com/questions/8763497/how-to-drive-c-c-or-java-compiler-to-compute-123-1000/8763548#8763548", "tags": ["c#", "java", "c++", "compiler-construction", "metaprogramming"]}, {"body": "<p>In theory, you can use this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;int N&gt;\nstruct Triangle{\n  static int getVal()\n  {\n    return N + Triangle&lt;N-1&gt;::getVal();\n  }\n};\n\ntemplate&lt;&gt;\nstruct Triangle&lt;1&gt;{\n  static int getVal()\n  {\n    return 1;\n  }\n};\n\nint main(){\n   std::cout &lt;&lt; Triangle&lt;1000&gt;::getVal() &lt;&lt; std::endl;\n   return 0;\n}\n</code></pre>\n\n<p>(based on the code that Xeo posted). But GCC gives me this error:</p>\n\n<blockquote>\n  <p><code>triangle.c++:7: error: template instantiation depth exceeds maximum of 500 (use -ftemplate-depth-NN to increase the maximum) instantiating struct Triangle&lt;500&gt;</code></p>\n</blockquote>\n\n<p>plus an enormous pseudo-stacktrace.</p>\n", "title": "How to drive C#, C++ or Java compiler to compute 1+2+3+...+1000?", "answer_id": 8763623, "link": "http://stackoverflow.com/questions/8763497/how-to-drive-c-c-or-java-compiler-to-compute-123-1000/8763623#8763623", "tags": ["c#", "java", "c++", "compiler-construction", "metaprogramming"]}, {"body": "<blockquote>\n  <p>I should just write a program that could drive the compiler to compute this sum while compilation and print the result when compilation completes.</p>\n</blockquote>\n\n<p>A popular trick to print a number during compilation is trying to access a non-existent member of a template instantiated with the number you want to print:</p>\n\n<pre><code>template&lt;int&gt; struct print_n {};\n\nprint_n&lt;1000 * 1001 / 2&gt;::foobar go;\n</code></pre>\n\n<p>The compiler then says:</p>\n\n<pre><code>error: 'foobar' in 'struct print_n&lt;500500&gt;' does not name a type\n</code></pre>\n\n<p>For a more interesting example of this technique, see <a href=\"http://codegolf.stackexchange.com/questions/3184/\">Solve the eight queens problem at compile-time</a>.</p>\n", "title": "How to drive C#, C++ or Java compiler to compute 1+2+3+...+1000?", "answer_id": 8763678, "link": "http://stackoverflow.com/questions/8763497/how-to-drive-c-c-or-java-compiler-to-compute-123-1000/8763678#8763678", "tags": ["c#", "java", "c++", "compiler-construction", "metaprogramming"]}, {"body": "<p>C# example to error at compile time.</p>\n\n<pre><code>class Foo\n{\n    const char Sum = (1000 + 1) * 1000 / 2;\n}\n</code></pre>\n\n<p>Produces the following compilation error:</p>\n\n<pre><code>Constant value '500500' cannot be converted to a 'char' \n</code></pre>\n", "title": "How to drive C#, C++ or Java compiler to compute 1+2+3+...+1000?", "answer_id": 8763835, "link": "http://stackoverflow.com/questions/8763497/how-to-drive-c-c-or-java-compiler-to-compute-123-1000/8763835#8763835", "tags": ["c#", "java", "c++", "compiler-construction", "metaprogramming"]}, {"body": "<p>Here's an implementation that works under VC++ 2010. I had to break the calculations up into 3 stages since the compiler complained when the templates recursed 500+ times.</p>\n\n<pre><code>template&lt;int t_startVal, int t_baseVal = 0, int t_result = 0&gt;\nstruct SumT\n{\n    enum { result = SumT&lt;t_startVal - 1, t_baseVal, t_baseVal + t_result +\n        t_startVal&gt;::result };\n};\n\ntemplate&lt;int t_baseVal, int t_result&gt;\nstruct SumT&lt;0, t_baseVal, t_result&gt;\n{\n    enum { result = t_result };\n};\n\ntemplate&lt;int output_value&gt;\nstruct Dump\n{\n    enum { value = output_value };\n    int bad_array[0];\n};\n\nenum\n{\n    value1 = SumT&lt;400&gt;::result,                // [1,400]\n    value2 = SumT&lt;400, 400, value1&gt;::result,   // [401, 800]\n    value3 = SumT&lt;200, 800, value2&gt;::result    // [801, 1000]\n};\n\nDump&lt;value3&gt; dump;\n</code></pre>\n\n<p>When you compile this, you should see this output from the compiler something like this:</p>\n\n<pre><code>1&gt;warning C4200: nonstandard extension used : zero-sized array in struct/union\n1&gt;          Cannot generate copy-ctor or copy-assignment operator when UDT contains a \nzero-sized array\n1&gt;          templatedrivensum.cpp(33) : see reference to class template \ninstantiation 'Dump&lt;output_value&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              output_value=500500\n1&gt;          ]\n</code></pre>\n", "title": "How to drive C#, C++ or Java compiler to compute 1+2+3+...+1000?", "answer_id": 8764709, "link": "http://stackoverflow.com/questions/8763497/how-to-drive-c-c-or-java-compiler-to-compute-123-1000/8764709#8764709", "tags": ["c#", "java", "c++", "compiler-construction", "metaprogramming"]}, {"body": "<p>Since neither compiler nor language were specified in the interview question, I dare submit a solution in Haskell using GHC:</p>\n\n<pre><code>{-# LANGUAGE TemplateHaskell #-}\n{-# OPTIONS_GHC -ddump-splices #-}\nmodule Main where\n\nmain :: IO ()\nmain = print $(let x = sum [1 :: Int .. 1000] in [| x |])\n</code></pre>\n\n<p>Compile it:</p>\n\n<pre><code>$ ghc compsum.hs\n[1 of 1] Compiling Main             ( compsum.hs, compsum.o )\nLoading package ghc-prim ... linking ... done.\n&lt;snip more \"Loading package ...\" messages&gt;\nLoading package template-haskell ... linking ... done.\ncompsum.hs:6:16-56: Splicing expression\n    let x = sum [1 :: Int .. 1000] in [| x |] ======&gt; 500500\nLinking compsum ...\n</code></pre>\n\n<p>And we got a working programme also.</p>\n", "title": "How to drive C#, C++ or Java compiler to compute 1+2+3+...+1000?", "answer_id": 8764740, "link": "http://stackoverflow.com/questions/8763497/how-to-drive-c-c-or-java-compiler-to-compute-123-1000/8764740#8764740", "tags": ["c#", "java", "c++", "compiler-construction", "metaprogramming"]}, {"body": "<p>Life will be a lot easier with C++11 which adds <code>constexpr</code> functions for compile time calculation, although they're only currently support by gcc 4.6 or later.</p>\n\n<pre><code>constexpr unsigned sum(unsigned start, unsigned end) {\n    return start == end ? start :\n        sum(start, (start + end) / 2) +\n        sum((start + end) / 2 + 1, end);\n}\n\ntemplate &lt;int&gt; struct equals;\nequals&lt;sum(1,1000)&gt; x;\n</code></pre>\n\n<p>The standard only requires the compiler to support a recursion depth of 512, so it still needs to avoid linear recursion depth. Here's the output:</p>\n\n<pre><code>$ g++-mp-4.6 --std=c++0x test.cpp -c\ntest.cpp:8:25: error: aggregate 'equals&lt;500500&gt; x' has incomplete type and cannot be defined\n</code></pre>\n\n<p>Of course you can just use the formula:</p>\n\n<pre><code>constexpr unsigned sum(unsigned start, unsigned end) {\n    return (start + end) * (end - start + 1) / 2;\n}\n\n// static_assert is a C++11 assert, which checks\n// at compile time.\nstatic_assert(sum(0,1000) == 500500, \"Sum failed for 0 to 1000\");\n</code></pre>\n", "title": "How to drive C#, C++ or Java compiler to compute 1+2+3+...+1000?", "answer_id": 8768024, "link": "http://stackoverflow.com/questions/8763497/how-to-drive-c-c-or-java-compiler-to-compute-123-1000/8768024#8768024", "tags": ["c#", "java", "c++", "compiler-construction", "metaprogramming"]}, {"body": "<p>In java, i thought about using annotation processing.\nThe apt tool scans the source file before actually parsing the source file to the javac command.</p>\n\n<p>During compilation of the source files, the output will be printed out:</p>\n\n<pre><code>@Documented\n@Retention(RetentionPolicy.RUNTIME)\n@Target({ElementType.TYPE, ElementType.METHOD})\npublic @interface MyInterface {\n\n    int offset() default 0;\n\n    int last() default 100;\n}\n</code></pre>\n\n<p>The processor factory:</p>\n\n<pre><code>public class MyInterfaceAnnotationProcessorFactory implements AnnotationProcessorFactory {\n\n    public Collection&lt;String&gt; supportedOptions() {\n        System.err.println(\"Called supportedOptions.............................\");\n        return Collections.EMPTY_LIST;\n    }\n\n    public Collection&lt;String&gt; supportedAnnotationTypes() {\n        System.err.println(\"Called supportedAnnotationTypes...........................\");\n        return Collections.singletonList(\"practiceproject.MyInterface\");\n    }\n\n    public AnnotationProcessor getProcessorFor(Set&lt;AnnotationTypeDeclaration&gt; set, AnnotationProcessorEnvironment ape) {\n        System.err.println(\"Called getProcessorFor................\");\n        if (set.isEmpty()) {\n            return AnnotationProcessors.NO_OP;\n        }\n        return new MyInterfaceAnnotationProcessor(ape);\n    }\n}\n</code></pre>\n\n<p>The actual annotation processor:</p>\n\n<pre><code>public class MyInterfaceAnnotationProcessor implements AnnotationProcessor {\n\n    private AnnotationProcessorEnvironment ape;\n    private AnnotationTypeDeclaration atd;\n\n    public MyInterfaceAnnotationProcessor(AnnotationProcessorEnvironment ape) {\n        this.ape = ape;\n        atd = (AnnotationTypeDeclaration) ape.getTypeDeclaration(\"practiceproject.MyInterface\");\n    }\n\n    public void process() {\n        Collection&lt;Declaration&gt; decls = ape.getDeclarationsAnnotatedWith(atd);\n        for (Declaration dec : decls) {\n            processDeclaration(dec);\n        }\n    }\n\n    private void processDeclaration(Declaration d) {\n        Collection&lt;AnnotationMirror&gt; ams = d.getAnnotationMirrors();\n        for (AnnotationMirror am : ams) {\n            if (am.getAnnotationType().getDeclaration().equals(atd)) {\n                Map&lt;AnnotationTypeElementDeclaration, AnnotationValue&gt; values = am.getElementValues();\n                int offset = 0;\n                int last = 100;\n                for (Map.Entry&lt;AnnotationTypeElementDeclaration, AnnotationValue&gt; entry : values.entrySet()) {\n                    AnnotationTypeElementDeclaration ated = entry.getKey();\n                    AnnotationValue v = entry.getValue();\n                    String name = ated.getSimpleName();\n                    if (name.equals(\"offset\")) {\n                        offset = ((Integer) v.getValue()).intValue();\n                    } else if (name.equals(\"last\")) {\n                        last = ((Integer) v.getValue()).intValue();\n                    }\n                }\n                //find the sum\n                System.err.println(\"Sum: \" + ((last + 1 - offset) / 2) * (2 * offset + (last - offset)));\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Then we create a source file. simple class that uses MyInterface annotation:</p>\n\n<pre><code> @MyInterface(offset = 1, last = 1000)\npublic class Main {\n\n    @MyInterface\n    void doNothing() {\n        System.out.println(\"Doing nothing\");\n    }\n\n    /**\n     * @param args the command line arguments\n     */\n    public static void main(String[] args) {\n        // TODO code application logic here\n        Main m = new Main();\n        m.doNothing();\n        MyInterface my = (MyInterface) m.getClass().getAnnotation(MyInterface.class);\n        System.out.println(\"offset: \" + my.offset());\n        System.out.println(\"Last: \" + my.last());\n    }\n}\n</code></pre>\n\n<p>The annotation processor is compiled into a jar file, then the apt tool is used to compile the source file as:</p>\n\n<pre><code>apt -cp \"D:\\Variance project\\PracticeProject\\dist\\practiceproject.jar\" -factory practiceproject.annotprocess.MyInterfaceAnnotationProcessorFactory \"D:\\Variance project\\PracticeProject2\\src\\practiceproject2\\Main.java\"\n</code></pre>\n\n<p>The output of the project:</p>\n\n<pre><code>Called supportedAnnotationTypes...........................\nCalled getProcessorFor................\nSum: 5000\nSum: 500500\n</code></pre>\n", "title": "How to drive C#, C++ or Java compiler to compute 1+2+3+...+1000?", "answer_id": 8815298, "link": "http://stackoverflow.com/questions/8763497/how-to-drive-c-c-or-java-compiler-to-compute-123-1000/8815298#8815298", "tags": ["c#", "java", "c++", "compiler-construction", "metaprogramming"]}, {"body": "<p>I feel obligated to give this C code, since nobody else has yet:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\n   int x = 1+2+3+4+5+6+7+8+9+10+11+12+13+14+15+16+17+18+19+20+\n           21+22+23+24+25+26+27+28+29+30+31+32+33+34+35+36+37+38+39+40+\n           41+42+43+44+45+46+47+48+49+50+51+52+53+54+55+56+57+58+59+60+\n           61+62+63+64+65+66+67+68+69+70+71+72+73+74+75+76+77+78+79+80+\n           81+82+83+84+85+86+87+88+89+90+91+92+93+94+95+96+97+98+99+100+     \n           101+102+103+104+105+106+107+108+109+110+111+112+113+114+115+116+117+118+119+120+\n           121+122+123+124+125+126+127+128+129+130+131+132+133+134+135+136+137+138+139+140+\n           141+142+143+144+145+146+147+148+149+150+151+152+153+154+155+156+157+158+159+160+\n           161+162+163+164+165+166+167+168+169+170+171+172+173+174+175+176+177+178+179+180+\n           181+182+183+184+185+186+187+188+189+190+191+192+193+194+195+196+197+198+199+200+\n           201+202+203+204+205+206+207+208+209+210+211+212+213+214+215+216+217+218+219+220+\n           221+222+223+224+225+226+227+228+229+230+231+232+233+234+235+236+237+238+239+240+\n           241+242+243+244+245+246+247+248+249+250+251+252+253+254+255+256+257+258+259+260+\n           261+262+263+264+265+266+267+268+269+270+271+272+273+274+275+276+277+278+279+280+\n           281+282+283+284+285+286+287+288+289+290+291+292+293+294+295+296+297+298+299+300+\n           301+302+303+304+305+306+307+308+309+310+311+312+313+314+315+316+317+318+319+320+\n           321+322+323+324+325+326+327+328+329+330+331+332+333+334+335+336+337+338+339+340+\n           341+342+343+344+345+346+347+348+349+350+351+352+353+354+355+356+357+358+359+360+\n           361+362+363+364+365+366+367+368+369+370+371+372+373+374+375+376+377+378+379+380+\n           381+382+383+384+385+386+387+388+389+390+391+392+393+394+395+396+397+398+399+400+\n           401+402+403+404+405+406+407+408+409+410+411+412+413+414+415+416+417+418+419+420+\n           421+422+423+424+425+426+427+428+429+430+431+432+433+434+435+436+437+438+439+440+\n           441+442+443+444+445+446+447+448+449+450+451+452+453+454+455+456+457+458+459+460+\n           461+462+463+464+465+466+467+468+469+470+471+472+473+474+475+476+477+478+479+480+\n           481+482+483+484+485+486+487+488+489+490+491+492+493+494+495+496+497+498+499+500+\n           501+502+503+504+505+506+507+508+509+510+511+512+513+514+515+516+517+518+519+520+\n           521+522+523+524+525+526+527+528+529+530+531+532+533+534+535+536+537+538+539+540+\n           541+542+543+544+545+546+547+548+549+550+551+552+553+554+555+556+557+558+559+560+\n           561+562+563+564+565+566+567+568+569+570+571+572+573+574+575+576+577+578+579+580+\n           581+582+583+584+585+586+587+588+589+590+591+592+593+594+595+596+597+598+599+600+\n           601+602+603+604+605+606+607+608+609+610+611+612+613+614+615+616+617+618+619+620+\n           621+622+623+624+625+626+627+628+629+630+631+632+633+634+635+636+637+638+639+640+\n           641+642+643+644+645+646+647+648+649+650+651+652+653+654+655+656+657+658+659+660+\n           661+662+663+664+665+666+667+668+669+670+671+672+673+674+675+676+677+678+679+680+\n           681+682+683+684+685+686+687+688+689+690+691+692+693+694+695+696+697+698+699+700+\n           701+702+703+704+705+706+707+708+709+710+711+712+713+714+715+716+717+718+719+720+\n           721+722+723+724+725+726+727+728+729+730+731+732+733+734+735+736+737+738+739+740+\n           741+742+743+744+745+746+747+748+749+750+751+752+753+754+755+756+757+758+759+760+\n           761+762+763+764+765+766+767+768+769+770+771+772+773+774+775+776+777+778+779+780+\n           781+782+783+784+785+786+787+788+789+790+791+792+793+794+795+796+797+798+799+800+\n           801+802+803+804+805+806+807+808+809+810+811+812+813+814+815+816+817+818+819+820+\n           821+822+823+824+825+826+827+828+829+830+831+832+833+834+835+836+837+838+839+840+\n           841+842+843+844+845+846+847+848+849+850+851+852+853+854+855+856+857+858+859+860+\n           861+862+863+864+865+866+867+868+869+870+871+872+873+874+875+876+877+878+879+880+\n           881+882+883+884+885+886+887+888+889+890+891+892+893+894+895+896+897+898+899+900+\n           901+902+903+904+905+906+907+908+909+910+911+912+913+914+915+916+917+918+919+920+\n           921+922+923+924+925+926+927+928+929+930+931+932+933+934+935+936+937+938+939+940+\n           941+942+943+944+945+946+947+948+949+950+951+952+953+954+955+956+957+958+959+960+\n           961+962+963+964+965+966+967+968+969+970+971+972+973+974+975+976+977+978+979+980+\n           981+982+983+984+985+986+987+988+989+990+991+992+993+994+995+996+997+998+999+1000;\n  printf(\"%d\\n\", x);\n}\n</code></pre>\n\n<p>And all I need to do is check the assembly to find my answer!</p>\n\n<pre><code>gcc -S compile_sum.c;\ngrep \"\\$[0-9]*, *-4\" compile_sum.s\n</code></pre>\n\n<p>And I see:</p>\n\n<pre><code>movl    $500500, -4(%rbp)\n</code></pre>\n", "title": "How to drive C#, C++ or Java compiler to compute 1+2+3+...+1000?", "answer_id": 11588820, "link": "http://stackoverflow.com/questions/8763497/how-to-drive-c-c-or-java-compiler-to-compute-123-1000/11588820#11588820", "tags": ["c#", "java", "c++", "compiler-construction", "metaprogramming"]}, {"body": "<p>Using java you can do a similar thing to the C# answer:</p>\n\n<pre><code>public class Cheat {\n    public static final int x = (1000 *1001/2);\n}\n\njavac -Xprint Cheat.java\n\npublic class Cheat {\n\n  public Cheat();\n  public static final int x = 500500;\n}\n</code></pre>\n\n<p>you can do this in <a href=\"http://apocalisp.wordpress.com/2010/06/08/type-level-programming-in-scala/\" rel=\"nofollow\">scala using peano numbers</a> because you can force the compiler to do recursion but i don't think you can do the same thing in c#/java</p>\n\n<p>another solution not using -Xprint but even more dodgy</p>\n\n<pre><code>public class Cheat {\n  public static final int x = 5/(1000 *1001/2 - 500500);\n}\n\njavac -Xlint:all Cheat.java\n\nCheat.java:2: warning: [divzero] division by zero\n  public static final int x = 5/(1000 *1001/2 - 500500);\n                            ^\n1 warning\n</code></pre>\n\n<p>without using any compiler flags. since you can check for an arbitrary number of constants (not just 500500) this solution should be acceptable.</p>\n\n<pre><code>public class Cheat {\n  public static final short max = (Short.MAX_VALUE - 500500) + 1001*1000/2;\n  public static final short overflow = (Short.MAX_VALUE - 500500 + 1) + 1001*1000/2;\n\n}\n\nCheat.java:3: error: possible loss of precision\n  public static final short overflow = (Short.MAX_VALUE - 500500 + 1) + 1001*1000/2;\n                                                                  ^\n  required: short\n  found:    int\n1 error\n</code></pre>\n", "title": "How to drive C#, C++ or Java compiler to compute 1+2+3+...+1000?", "answer_id": 11924086, "link": "http://stackoverflow.com/questions/8763497/how-to-drive-c-c-or-java-compiler-to-compute-123-1000/11924086#11924086", "tags": ["c#", "java", "c++", "compiler-construction", "metaprogramming"]}, {"body": "<p>Extended from Carl Walsh's answer to actually print the result during compilation:</p>\n\n<pre><code>#define VALUE (1+2+3+4+5+6+7+8+9+10+11+12+13+14+15+16+17+18+19+20+\\\n21+22+23+24+25+26+27+28+29+30+31+32+33+34+35+36+37+38+39+40+\\\n41+42+43+44+45+46+47+48+49+50+51+52+53+54+55+56+57+58+59+60+\\\n61+62+63+64+65+66+67+68+69+70+71+72+73+74+75+76+77+78+79+80+\\\n81+82+83+84+85+86+87+88+89+90+91+92+93+94+95+96+97+98+99+100+\\\n101+102+103+104+105+106+107+108+109+110+111+112+113+114+115+116+117+118+119+120+\\\n121+122+123+124+125+126+127+128+129+130+131+132+133+134+135+136+137+138+139+140+\\\n141+142+143+144+145+146+147+148+149+150+151+152+153+154+155+156+157+158+159+160+\\\n161+162+163+164+165+166+167+168+169+170+171+172+173+174+175+176+177+178+179+180+\\\n181+182+183+184+185+186+187+188+189+190+191+192+193+194+195+196+197+198+199+200+\\\n201+202+203+204+205+206+207+208+209+210+211+212+213+214+215+216+217+218+219+220+\\\n221+222+223+224+225+226+227+228+229+230+231+232+233+234+235+236+237+238+239+240+\\\n241+242+243+244+245+246+247+248+249+250+251+252+253+254+255+256+257+258+259+260+\\\n261+262+263+264+265+266+267+268+269+270+271+272+273+274+275+276+277+278+279+280+\\\n281+282+283+284+285+286+287+288+289+290+291+292+293+294+295+296+297+298+299+300+\\\n301+302+303+304+305+306+307+308+309+310+311+312+313+314+315+316+317+318+319+320+\\\n321+322+323+324+325+326+327+328+329+330+331+332+333+334+335+336+337+338+339+340+\\\n341+342+343+344+345+346+347+348+349+350+351+352+353+354+355+356+357+358+359+360+\\\n361+362+363+364+365+366+367+368+369+370+371+372+373+374+375+376+377+378+379+380+\\\n381+382+383+384+385+386+387+388+389+390+391+392+393+394+395+396+397+398+399+400+\\\n401+402+403+404+405+406+407+408+409+410+411+412+413+414+415+416+417+418+419+420+\\\n421+422+423+424+425+426+427+428+429+430+431+432+433+434+435+436+437+438+439+440+\\\n441+442+443+444+445+446+447+448+449+450+451+452+453+454+455+456+457+458+459+460+\\\n461+462+463+464+465+466+467+468+469+470+471+472+473+474+475+476+477+478+479+480+\\\n481+482+483+484+485+486+487+488+489+490+491+492+493+494+495+496+497+498+499+500+\\\n501+502+503+504+505+506+507+508+509+510+511+512+513+514+515+516+517+518+519+520+\\\n521+522+523+524+525+526+527+528+529+530+531+532+533+534+535+536+537+538+539+540+\\\n541+542+543+544+545+546+547+548+549+550+551+552+553+554+555+556+557+558+559+560+\\\n561+562+563+564+565+566+567+568+569+570+571+572+573+574+575+576+577+578+579+580+\\\n581+582+583+584+585+586+587+588+589+590+591+592+593+594+595+596+597+598+599+600+\\\n601+602+603+604+605+606+607+608+609+610+611+612+613+614+615+616+617+618+619+620+\\\n621+622+623+624+625+626+627+628+629+630+631+632+633+634+635+636+637+638+639+640+\\\n641+642+643+644+645+646+647+648+649+650+651+652+653+654+655+656+657+658+659+660+\\\n661+662+663+664+665+666+667+668+669+670+671+672+673+674+675+676+677+678+679+680+\\\n681+682+683+684+685+686+687+688+689+690+691+692+693+694+695+696+697+698+699+700+\\\n701+702+703+704+705+706+707+708+709+710+711+712+713+714+715+716+717+718+719+720+\\\n721+722+723+724+725+726+727+728+729+730+731+732+733+734+735+736+737+738+739+740+\\\n741+742+743+744+745+746+747+748+749+750+751+752+753+754+755+756+757+758+759+760+\\\n761+762+763+764+765+766+767+768+769+770+771+772+773+774+775+776+777+778+779+780+\\\n781+782+783+784+785+786+787+788+789+790+791+792+793+794+795+796+797+798+799+800+\\\n801+802+803+804+805+806+807+808+809+810+811+812+813+814+815+816+817+818+819+820+\\\n821+822+823+824+825+826+827+828+829+830+831+832+833+834+835+836+837+838+839+840+\\\n841+842+843+844+845+846+847+848+849+850+851+852+853+854+855+856+857+858+859+860+\\\n861+862+863+864+865+866+867+868+869+870+871+872+873+874+875+876+877+878+879+880+\\\n881+882+883+884+885+886+887+888+889+890+891+892+893+894+895+896+897+898+899+900+\\\n901+902+903+904+905+906+907+908+909+910+911+912+913+914+915+916+917+918+919+920+\\\n921+922+923+924+925+926+927+928+929+930+931+932+933+934+935+936+937+938+939+940+\\\n941+942+943+944+945+946+947+948+949+950+951+952+953+954+955+956+957+958+959+960+\\\n961+962+963+964+965+966+967+968+969+970+971+972+973+974+975+976+977+978+979+980+\\\n981+982+983+984+985+986+987+988+989+990+991+992+993+994+995+996+997+998+999+1000)\n\nchar tab[VALUE];\n\nint main()\n{\n    tab = 5;\n}\n</code></pre>\n\n<p>gcc outputs:</p>\n\n<pre><code>test.c: In function 'main':\ntest.c:56:9: error: incompatible types when assigning to type 'char[500500]' fro\nm type 'int'\n</code></pre>\n", "title": "How to drive C#, C++ or Java compiler to compute 1+2+3+...+1000?", "answer_id": 13940883, "link": "http://stackoverflow.com/questions/8763497/how-to-drive-c-c-or-java-compiler-to-compute-123-1000/13940883#13940883", "tags": ["c#", "java", "c++", "compiler-construction", "metaprogramming"]}, {"body": "<p>Though this actually works with small numbers, clang++ returns me a compiler error if I am using sum_first where N > 400.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\n\ntemplate &lt;int N&gt;\nstruct sum_first\n{\n   static const int value = N + sum_first&lt;N - 1&gt;::value;\n};\n\ntemplate &lt;&gt;\nstruct sum_first&lt;0&gt;\n{\n    static const int value = 0;\n};\n\nint main()\n{\n    cout &lt;&lt; sum_first&lt;1000&gt;::value &lt;&lt; endl;\n}\n</code></pre>\n", "title": "How to drive C#, C++ or Java compiler to compute 1+2+3+...+1000?", "answer_id": 22380576, "link": "http://stackoverflow.com/questions/8763497/how-to-drive-c-c-or-java-compiler-to-compute-123-1000/22380576#22380576", "tags": ["c#", "java", "c++", "compiler-construction", "metaprogramming"]}], "question_id": 8763497}, {"body": "<p>Is there any difference between</p>\n\n<pre><code>List&lt;Map&lt;String, String&gt;&gt;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>List&lt;? extends Map&lt;String, String&gt;&gt;\n</code></pre>\n\n<p>?</p>\n\n<p>If there is no difference, what is the benefit of using <code>? extends</code>?</p>\n", "tags": ["java", "generics", "inheritance", "polymorphism"], "title": "List&lt;Map&lt;String, String&gt;&gt; vs List&lt;? extends Map&lt;String, String&gt;&gt;", "answer_count": 5, "creation_date": 1332353720, "score": 115, "link": "http://stackoverflow.com/questions/9810445/listmapstring-string-vs-list-extends-mapstring-string", "answers": [{"body": "<p>You cannot assign expressions with types such as <code>List&lt;NavigableMap&lt;String,String&gt;&gt;</code> to the first.</p>\n\n<p>(If you want to know why you can't assign <code>List&lt;String&gt;</code> to <code>List&lt;Object&gt;</code> see a <strong>zillion</strong> other questions on SO.)</p>\n", "title": "List&lt;Map&lt;String, String&gt;&gt; vs List&lt;? extends Map&lt;String, String&gt;&gt;", "answer_id": 9810468, "link": "http://stackoverflow.com/questions/9810445/listmapstring-string-vs-list-extends-mapstring-string/9810468#9810468", "tags": ["java", "generics", "inheritance", "polymorphism"]}, {"body": "<p>The difference is that, for example, a</p>\n\n<pre><code>List&lt;HashMap&lt;String,String&gt;&gt;\n</code></pre>\n\n<p>is a</p>\n\n<pre><code>List&lt;? extends Map&lt;String,String&gt;&gt;\n</code></pre>\n\n<p>but not a</p>\n\n<pre><code>List&lt;Map&lt;String,String&gt;&gt;\n</code></pre>\n\n<p>So:</p>\n\n<pre><code>void withWilds( List&lt;? extends Map&lt;String,String&gt;&gt; foo ){}\nvoid noWilds( List&lt;Map&lt;String,String&gt;&gt; foo ){}\n\nvoid main( String[] args ){\n    List&lt;HashMap&lt;String,String&gt;&gt; myMap;\n\n    withWilds( myMap ); // Works\n    noWilds( myMap ); // Compiler error\n}\n</code></pre>\n\n<p>You would think a <code>List</code> of <code>HashMap</code>s should be a <code>List</code> of <code>Map</code>s, but there's a good reason why it isn't:</p>\n\n<p>Suppose you could do:</p>\n\n<pre><code>List&lt;HashMap&lt;String,String&gt;&gt; hashMaps = new ArrayList&lt;HashMap&lt;String,String&gt;&gt;();\n\nList&lt;Map&lt;String,String&gt;&gt; maps = hashMaps; // Won't compile,\n                                          // but imagine that it could\n\nMap&lt;String,String&gt; aMap = Collections.singletonMap(\"foo\",\"bar\"); // Not a HashMap\n\nmaps.add( aMap ); // Perfectly legal (adding a Map to a List of Maps)\n\n// But maps and hashMaps are the same object, so this should be the same as\n\nhashMaps.add( aMap ); // Should be illegal (aMap is not a HashMap)\n</code></pre>\n\n<p>So this is why a <code>List</code> of <code>HashMap</code>s shouldn't be a <code>List</code> of <code>Map</code>s.</p>\n", "title": "List&lt;Map&lt;String, String&gt;&gt; vs List&lt;? extends Map&lt;String, String&gt;&gt;", "answer_id": 9810499, "link": "http://stackoverflow.com/questions/9810445/listmapstring-string-vs-list-extends-mapstring-string/9810499#9810499", "tags": ["java", "generics", "inheritance", "polymorphism"]}, {"body": "<p>As you mentioned, there could be two below versions of defining a List:</p>\n\n<ol>\n<li><code>List&lt;? extends Map&lt;String, String&gt;&gt;</code></li>\n<li><code>List&lt;?&gt;</code></li>\n</ol>\n\n<p>2 is very open. It can hold any object type. This may not be useful in case you want to have a map of a given type. In case someone accidentally puts a different type of map, for example, <code>Map&lt;String, int&gt;</code>. Your consumer method might break.</p>\n\n<p>In order to ensure that <code>List</code> can hold objects of a given type, Java generics introduced <code>? extends</code>. So in #1, the <code>List</code> can hold any object which is derived from <code>Map&lt;String, String&gt;</code> type. Adding any other type of data would throw an exception.</p>\n", "title": "List&lt;Map&lt;String, String&gt;&gt; vs List&lt;? extends Map&lt;String, String&gt;&gt;", "answer_id": 9815011, "link": "http://stackoverflow.com/questions/9810445/listmapstring-string-vs-list-extends-mapstring-string/9815011#9815011", "tags": ["java", "generics", "inheritance", "polymorphism"]}, {"body": "<p>Today, I have used this feature, so here's my very fresh real-life example. (I have changed class and method names to generic ones so they won't distract from the actual point.)</p>\n\n<p>I have a method that's meant to accept a <code>Set</code> of <code>A</code> objects that I originally wrote with this signature:</p>\n\n<pre><code>void myMethod(Set&lt;A&gt; set)\n</code></pre>\n\n<p>But it want to actually call it with <code>Set</code>s of subclasses of <code>A</code>. But this is not allowed! (The reason for that is, <code>myMethod</code> could add objects to <code>set</code> that are of type <code>A</code>, but not of the subtype that <code>set</code>'s objects are declared to be at the caller's site. So this could break the type system if it were possible.)</p>\n\n<p>Now here come generics to the rescue, because it works as intended if I use this method signature instead:</p>\n\n<pre><code>&lt;T extends A&gt; void myMethod(Set&lt;T&gt; set)\n</code></pre>\n\n<p>or shorter, if you don't need to use the actual type in the method body:</p>\n\n<pre><code>void myMethod(Set&lt;? extends A&gt; set)\n</code></pre>\n\n<p>This way, <code>set</code>'s type becomes a collection of objects of the actual subtype of <code>A</code>, so it becomes possible to use this with subclasses without endangering the type system.</p>\n", "title": "List&lt;Map&lt;String, String&gt;&gt; vs List&lt;? extends Map&lt;String, String&gt;&gt;", "answer_id": 9825518, "link": "http://stackoverflow.com/questions/9810445/listmapstring-string-vs-list-extends-mapstring-string/9825518#9825518", "tags": ["java", "generics", "inheritance", "polymorphism"]}, {"body": "<p>What I'm missing in the other answers is a reference to how this relates to co- and contravariance and sub- and supertypes (that is, polymorphism) in general and to Java in particular. This may be well understood by the OP, but just in case, here it goes:</p>\n\n<h2>Covariance</h2>\n\n<p>If you have a class <code>Automobile</code>, then <code>Car</code> and <code>Truck</code> are their subtypes. Any Car can be assigned to a variable of type Automobile, this is well-known in OO and is called polymorphism. Covariance refers to using this same principle in scenarios with generics or delegates. Java doesn't have delegates (yet), so the term applies only to generics.</p>\n\n<p>I tend to think of covariance as standard polymorphism what you would expect to work without thinking, because:</p>\n\n<pre><code>List&lt;Car&gt; cars;\nList&lt;Automobile&gt; automobiles = cars;\n// You'd expect this to work because Car is-a Automobile, but\n// throws inconvertible types compile error.\n</code></pre>\n\n<p>The reason of the error is, however, correct: <code>List&lt;Car&gt;</code> <em>does not</em> inherit from <code>List&lt;Automobile&gt;</code> and thus cannot be assigned to each other. Only the generic type parameters have an inherit relationship. One might think that the Java compiler simply isn't smart enough to properly understand your scenario there. However, you can help the compiler by giving him a hint:</p>\n\n<pre><code>List&lt;Car&gt; cars;\nList&lt;? extends Automobile&gt; automobiles = cars;   // no error\n</code></pre>\n\n<h2>Contravariance</h2>\n\n<p>The reverse of co-variance is contravariance. Where in covariance the parameter types must have a subtype relationship, in contravariance they must have a supertype relationship. This can be considered as an inheritance upper-bound: any supertype is allowed up and including the specified type:</p>\n\n<pre><code>class AutoColorComparer implements Comparator&lt;Automobile&gt;\n    public int compare(Automobile a, Automobile b) {\n        // Return comparison of colors\n    }\n</code></pre>\n\n<p>This can be used with <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29\" rel=\"nofollow\">Collections.sort</a>:</p>\n\n<pre><code>public static &lt;T&gt; void sort(List&lt;T&gt; list, Comparator&lt;? super T&gt; c)\n\n// Which you can call like this, without errors:\nList&lt;Car&gt; cars = getListFromSomewhere();\nCollections.sort(cars, new AutoColorComparer());\n</code></pre>\n\n<p>You could even call it with a comparer that compares objects and use it with any type.</p>\n\n<h2>When to use contra or co-variance?</h2>\n\n<p>A bit OT perhaps, you didn't ask, but it helps understanding answering your question. In general, when you <em>get</em> something, use covariance and when you <em>put</em> something, use contravariance. This is best explained in <a href=\"http://stackoverflow.com/a/3863471/111575\">an answer to Stack Overflow question <em>How would contravariance be used in Java generics?</em></a>.</p>\n\n<h2>So what is it then with <code>List&lt;? extends Map&lt;String, String&gt;&gt;</code></h2>\n\n<p>You use <code>extends</code>, so the rules for <em>covariance</em> applies. Here you have a list of maps and each item you store in the list must be a <code>Map&lt;string, string&gt;</code> or derive from it. The statement <code>List&lt;Map&lt;String, String&gt;&gt;</code> cannot derive from <code>Map</code>, but must be <em>a</em> <code>Map</code>.</p>\n\n<p>Hence, the following will work, because <code>TreeMap</code> inherits from <code>Map</code>:</p>\n\n<pre><code>List&lt;Map&lt;String, String&gt;&gt; mapList = new ArrayList&lt;Map&lt;String, String&gt;&gt;();\nmapList.add(new TreeMap&lt;String, String&gt;());\n</code></pre>\n\n<p>but this will not:</p>\n\n<pre><code>List&lt;? extends Map&lt;String, String&gt;&gt; mapList = new ArrayList&lt;? extends Map&lt;String, String&gt;&gt;();\nmapList.add(new TreeMap&lt;String, String&gt;());\n</code></pre>\n\n<p>and this will not work either, because it does not satisfy the covariance constraint:</p>\n\n<pre><code>List&lt;? extends Map&lt;String, String&gt;&gt; mapList = new ArrayList&lt;? extends Map&lt;String, String&gt;&gt;();\nmapList.add(new ArrayList&lt;String&gt;());   // This is NOT allowed, List does not implement Map\n</code></pre>\n\n<h2>What else?</h2>\n\n<p>This is probably obvious, but you may have already noted that using the <code>extends</code> keyword only applies to that parameter and not to the rest. I.e., the following will not compile:</p>\n\n<pre><code>List&lt;? extends Map&lt;String, String&gt;&gt; mapList = new List&lt;? extends Map&lt;String, String&gt;&gt;();\nmapList.add(new TreeMap&lt;String, Element&gt;())  // This is NOT allowed\n</code></pre>\n\n<p>Suppose you want to allow any type in the map, with a key as string, you can use <code>extend</code> on each type parameter. I.e., suppose you process XML and you want to store AttrNode, Element etc in a map, you can do something like:</p>\n\n<pre><code>List&lt;? extends Map&lt;String, ? extends Node&gt;&gt; listOfMapsOfNodes = new...;\n\n// Now you can do:\nlistOfMapsOfNodes.add(new TreeMap&lt;Sting, Element&gt;());\nlistOfMapsOfNodes.add(new TreeMap&lt;Sting, CDATASection&gt;());\n</code></pre>\n", "title": "List&lt;Map&lt;String, String&gt;&gt; vs List&lt;? extends Map&lt;String, String&gt;&gt;", "answer_id": 9908143, "link": "http://stackoverflow.com/questions/9810445/listmapstring-string-vs-list-extends-mapstring-string/9908143#9908143", "tags": ["java", "generics", "inheritance", "polymorphism"]}], "question_id": 9810445}, {"body": "<p>I'm trying to write a Java class to log in to a certain website. The data sent in the POST request to log in is</p>\n\n<p><code>user%5Blogin%5D=uesrname&amp;user%5Bpassword%5D=123456</code></p>\n\n<p>I'm curious what the <code>%5B</code> and <code>%5D</code> means in the key <strong>user login</strong>.</p>\n\n<p>How do I encode these data?</p>\n", "tags": ["java", "post", "httpwebrequest"], "title": "What does %5B and %5D in POST requests stand for?", "answer_count": 6, "creation_date": 1333297527, "score": 114, "link": "http://stackoverflow.com/questions/9966053/what-does-5b-and-5d-in-post-requests-stand-for", "answers": [{"body": "<p>They represent <code>[</code> and <code>]</code>. The encoding is called <a href=\"http://en.wikipedia.org/wiki/Percent-encoding\">\"URL encoding\"</a>.</p>\n", "title": "What does %5B and %5D in POST requests stand for?", "answer_id": 9966075, "link": "http://stackoverflow.com/questions/9966053/what-does-5b-and-5d-in-post-requests-stand-for/9966075#9966075", "tags": ["java", "post", "httpwebrequest"]}, {"body": "<p>Well it's the usual <a href=\"http://en.wikipedia.org/wiki/Url_encoding\">url encoding</a> </p>\n\n<p>So they stand for <code>[</code>, respectively <code>]</code></p>\n", "title": "What does %5B and %5D in POST requests stand for?", "answer_id": 9966082, "link": "http://stackoverflow.com/questions/9966053/what-does-5b-and-5d-in-post-requests-stand-for/9966082#9966082", "tags": ["java", "post", "httpwebrequest"]}, {"body": "<p>As per this answer over <a href=\"http://stackoverflow.com/a/5082400/1108032\">here</a>: <code>str='foo%20%5B12%5D'</code> encodes <code>foo [12]</code>:</p>\n\n<pre><code>%20 is space\n%5B is '['\nand %5D is ']'\n</code></pre>\n\n<p>This is called <a href=\"http://en.wikipedia.org/wiki/Percent-encoding\">percent encoding</a> and is used in encoding special characters in the url parameter values.</p>\n\n<p><strong>EDIT</strong> By the way as I was reading the <a href=\"https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURI#Description\">following article</a>, it just occurred to me why so many people make the same search. See the note on the bottom of the page:</p>\n\n<blockquote>\n  <p>Also note that if one wishes to follow the more recent <a href=\"http://tools.ietf.org/pdf/rfc3986.pdf\">RFC3986</a>\n  for URL's, making square brackets reserved (for IPv6) and thus not\n  encoded when forming something which could be part of a URL (such as a\n  host), the following may help.</p>\n</blockquote>\n\n<pre><code>function fixedEncodeURI (str) {\n    return encodeURI(str).replace(/%5B/g, '[').replace(/%5D/g, ']');\n}\n</code></pre>\n\n<p>Hopefully this will help people sort out their problems when they stumble upon this question.</p>\n\n\n", "title": "What does %5B and %5D in POST requests stand for?", "answer_id": 9966097, "link": "http://stackoverflow.com/questions/9966053/what-does-5b-and-5d-in-post-requests-stand-for/9966097#9966097", "tags": ["java", "post", "httpwebrequest"]}, {"body": "<p><code>[]</code> is replaced by <code>%5B%5D</code> at URL encoding time.</p>\n\n<p>For more detail refer to <a href=\"http://inside.courts.wa.gov/content/isdLegacyMaint/natural/top/5499crossplat/5501sm/5947reqdocu.htm\">http://inside.courts.wa.gov/content/isdLegacyMaint/natural/top/5499crossplat/5501sm/5947reqdocu.htm</a>.</p>\n", "title": "What does %5B and %5D in POST requests stand for?", "answer_id": 9966701, "link": "http://stackoverflow.com/questions/9966053/what-does-5b-and-5d-in-post-requests-stand-for/9966701#9966701", "tags": ["java", "post", "httpwebrequest"]}, {"body": "<p>The data would probably have been posted originally from a web form looking a bit like this (but probably much more complicated):</p>\n\n<pre><code>&lt;form action=\"http://example.com\" method=\"post\"&gt;\n\n  User login    &lt;input name=\"user[login]\"    /&gt;&lt;br /&gt;\n  User password &lt;input name=\"user[password]\" /&gt;&lt;br /&gt;\n\n  &lt;input type=\"submit\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>If the method were \"get\" instead of \"post\", clicking the submit button would take you to a URL looking a bit like this:</p>\n\n<blockquote>\n  <p><a href=\"http://example.com/?user%5Blogin%5D=username&amp;user%5Bpassword%5D=123456\" rel=\"nofollow\">http://example.com/?user%5Blogin%5D=username&amp;user%5Bpassword%5D=123456</a></p>\n</blockquote>\n\n<p>or:</p>\n\n<blockquote>\n  <p><a href=\"http://example.com/?user[login]=username&amp;user[password]=123456\" rel=\"nofollow\">http://example.com/?user[login]=username&amp;user[password]=123456</a></p>\n</blockquote>\n\n<p>The web server on the other end will likely take the <code>user[login]</code> and <code>user[password]</code> parameters, and make them into a <code>user</code> object with <code>login</code> and <code>password</code> fields containing those values.</p>\n", "title": "What does %5B and %5D in POST requests stand for?", "answer_id": 37793236, "link": "http://stackoverflow.com/questions/9966053/what-does-5b-and-5d-in-post-requests-stand-for/37793236#37793236", "tags": ["java", "post", "httpwebrequest"]}, {"body": "<p>To take a quick look, you can percent-en/decode using <a href=\"http://www.url-encode-decode.com\" rel=\"nofollow\">this online tool</a>.</p>\n", "title": "What does %5B and %5D in POST requests stand for?", "answer_id": 39039524, "link": "http://stackoverflow.com/questions/9966053/what-does-5b-and-5d-in-post-requests-stand-for/39039524#39039524", "tags": ["java", "post", "httpwebrequest"]}], "question_id": 9966053}, {"body": "<p>I understand that <code>@Component</code> annotation was introduced in spring 2.5 in order to get rid of xml bean definition by using classpath scanning.</p>\n\n<p><code>@Bean</code> was introduced in spring 3.0 and can be used with <code>@Configuration</code> in order to fully get rid of xml file and use java config instead.</p>\n\n<p>Would it have been possible to re-use the <code>@Component</code> annotation instead of introducing <code>@Bean</code> annotation? My understanding is that the final goal is to create beans in both cases.</p>\n", "tags": ["java", "spring", "annotations", "autowired"], "title": "Spring: @Component versus @Bean", "answer_count": 2, "creation_date": 1337096746, "score": 113, "link": "http://stackoverflow.com/questions/10604298/spring-component-versus-bean", "answers": [{"body": "<p><code>@Component</code> and <code>@Bean</code> do two quite different things, and shouldn't be confused.</p>\n\n<p><code>@Component</code> (and <code>@Service</code> and <code>@Repository</code>) are used to auto-detect and auto-configure beans using classpath scanning. There's an implicit one-to-one mapping between the annotated class and the bean (i.e. one bean per class). Control of wiring is quite limited with this approach, since it's purely declarative.</p>\n\n<p><code>@Bean</code> is used to <em>explicitly</em> declare a single bean, rather than letting Spring do it automatically as above.  It decouples the declaration of the bean from the class definition, and lets you create and configure beans exactly how you choose.</p>\n\n<p>To answer your question...</p>\n\n<blockquote>\n  <p>would it have been possible to re-use the <code>@Component</code> annotation instead of introducing <code>@Bean</code> annotation? </p>\n</blockquote>\n\n<p>Sure, probably; but they chose not to, since the two are quite different. Spring's already confusing enough without muddying the waters further.</p>\n", "title": "Spring: @Component versus @Bean", "answer_id": 10604537, "link": "http://stackoverflow.com/questions/10604298/spring-component-versus-bean/10604537#10604537", "tags": ["java", "spring", "annotations", "autowired"]}, {"body": "<p>Let consider I want specific implementation depending on some dynamic state.\n<code>@Bean</code> is perfect for that case.</p>\n\n<pre><code>@Bean\n@Scope(\"prototype\")\npublic SomeService someService() {\n    switch (state) {\n    case 1:\n        return new Impl1();\n    case 2:\n        return new Impl2();\n    case 3:\n        return new Impl3();\n    default:\n        return new Impl();\n    }\n}\n</code></pre>\n\n<p>However there is no way to do that with <code>@Component</code>.</p>\n", "title": "Spring: @Component versus @Bean", "answer_id": 32307013, "link": "http://stackoverflow.com/questions/10604298/spring-component-versus-bean/32307013#32307013", "tags": ["java", "spring", "annotations", "autowired"]}], "question_id": 10604298}, {"body": "<p>Oracle released Java JDK 7 on April 26 for Mac OS X.  I followed the install instructions and when I do java -version in a terminal window I get:</p>\n\n<pre><code>java version \"1.7.0_04\"\nJava(TM) SE Runtime Environment (build 1.7.0_04-b21)\nJava HotSpot(TM) 64-Bit Server VM (build 23.0-b21, mixed mode)\n</code></pre>\n\n<p>However when I do <code>mvn -version</code> in the terminal window I get:</p>\n\n<pre><code>Apache Maven 3.0.2 (r1056850; 2011-01-08 18:58:10-0600)\nJava version: 1.6.0_31, vendor: Apple Inc.\nJava home: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home\nDefault locale: en_US, platform encoding: MacRoman\nOS name: \"mac os x\", version: \"10.7.3\", arch: \"x86_64\", family: \"mac\"\n</code></pre>\n\n<p>How can I get Maven to use the Java JDK 1.7.0_04?</p>\n\n<p>Thanks for the help.</p>\n", "tags": ["java", "osx", "maven", "java-7"], "title": "After Installing Java JDK 7 For Mac OS X - mvn -version still shows java version 1.6.0_31", "answer_count": 8, "creation_date": 1335467779, "score": 110, "link": "http://stackoverflow.com/questions/10339887/after-installing-java-jdk-7-for-mac-os-x-mvn-version-still-shows-java-version", "answers": [{"body": "<p>You need to change the <code>JAVA_HOME</code> environment variable to the new JDK 1.7 location.</p>\n\n<p>Look at <a href=\"http://stackoverflow.com/questions/135688/setting-environment-variables-in-os-x\">this question</a> for possible locations where JAVA_HOME might be defined. In a terminal, type <code>which java</code> to find the path of your Java installation, and then update <code>JAVA_HOME</code> to point to that path (but exclude the trailing bin folder).</p>\n", "title": "After Installing Java JDK 7 For Mac OS X - mvn -version still shows java version 1.6.0_31", "answer_id": 10339936, "link": "http://stackoverflow.com/questions/10339887/after-installing-java-jdk-7-for-mac-os-x-mvn-version-still-shows-java-version/10339936#10339936", "tags": ["java", "osx", "maven", "java-7"]}, {"body": "<p>Finally found the answer here:</p>\n\n<p><a href=\"http://www.adam-bien.com/roller/abien/entry/java_se_development_kit_7\">http://www.adam-bien.com/roller/abien/entry/java_se_development_kit_7</a></p>\n\n<p>You should use <code>JAVA_HOME=$(/usr/libexec/java_home)</code> instead on a Mac and then set the current jdk via \"Java Preferences.app\".</p>\n\n<p>Set JAVA_HOME in ~/.profile</p>\n", "title": "After Installing Java JDK 7 For Mac OS X - mvn -version still shows java version 1.6.0_31", "answer_id": 10363924, "link": "http://stackoverflow.com/questions/10339887/after-installing-java-jdk-7-for-mac-os-x-mvn-version-still-shows-java-version/10363924#10363924", "tags": ["java", "osx", "maven", "java-7"]}, {"body": "<p>I think the problem lies partly with the java launch mechanism. I have been able to get Eclipse to run my code under Java7, but I think eclipse itself is still running under Java6. Also, I have a java program that was last compiled a year ago, and built using jarbundler-2.1.0.jar (with option jvmversion=\"1.6+\"). When I double click the .app file it runs Java6, but when I double click the .jar file inside the .app it runs Java7.</p>\n\n<p>Also, I do not use JAVA_HOME, but I still get the correct java version \"1.7.0_04\" shown in the question. JAVA_HOME seems to be a red herring. Maybe Maven needs it, but Eclipse doesn't seem to use it, and neither does launching jar files.</p>\n\n<p>And after setting Java7 in the Java Preferences tool, it does not seem to affect launching .app java files. However it does make 'java -version' from the terminal work nicely. I tried unchecking everything but the Java7 option, and then Eclipse wouldn't run at all. </p>\n", "title": "After Installing Java JDK 7 For Mac OS X - mvn -version still shows java version 1.6.0_31", "answer_id": 10378522, "link": "http://stackoverflow.com/questions/10339887/after-installing-java-jdk-7-for-mac-os-x-mvn-version-still-shows-java-version/10378522#10378522", "tags": ["java", "osx", "maven", "java-7"]}, {"body": "<p>To find the path from Java Preferences, try \n<code>/usr/libexec/java_home -X</code></p>\n\n<p>My Java7 entry looks like this:</p>\n\n<pre><code>&lt;dict&gt;\n    &lt;key&gt;JVMArch&lt;/key&gt;\n    &lt;string&gt;x86_64&lt;/string&gt;\n    &lt;key&gt;JVMBundleID&lt;/key&gt;\n    &lt;string&gt;com.oracle.java.7u04.jdk&lt;/string&gt;\n    &lt;key&gt;JVMEnabled&lt;/key&gt;\n    &lt;true/&gt;\n    &lt;key&gt;JVMHomePath&lt;/key&gt;\n    &lt;string&gt;/Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home&lt;/string&gt;\n    &lt;key&gt;JVMIsBuiltIn&lt;/key&gt;\n    &lt;false/&gt;\n    &lt;key&gt;JVMName&lt;/key&gt;\n    &lt;string&gt;Java SE 7&lt;/string&gt;\n    &lt;key&gt;JVMPlatformVersion&lt;/key&gt;\n    &lt;string&gt;1.7&lt;/string&gt;\n    &lt;key&gt;JVMVendor&lt;/key&gt;\n    &lt;string&gt;Oracle Corporation&lt;/string&gt;\n    &lt;key&gt;JVMVersion&lt;/key&gt;\n    &lt;string&gt;1.7.0_04&lt;/string&gt;\n&lt;/dict&gt;\n</code></pre>\n", "title": "After Installing Java JDK 7 For Mac OS X - mvn -version still shows java version 1.6.0_31", "answer_id": 10378603, "link": "http://stackoverflow.com/questions/10339887/after-installing-java-jdk-7-for-mac-os-x-mvn-version-still-shows-java-version/10378603#10378603", "tags": ["java", "osx", "maven", "java-7"]}, {"body": "<p>The reason Maven is still using Java 6 is that the /usr/bin/mvn script that launches it does not use the correct OS/X method for resolving the current Java version as specified in Java Preferences.  See this Maven issue for details:</p>\n\n<p><a href=\"http://jira.codehaus.org/browse/MNG-4226\" rel=\"nofollow\">http://jira.codehaus.org/browse/MNG-4226</a></p>\n\n<p>Voting it up might get it fixed; in the meantime, if you alter the /usr/bin/mvn script as shown in the comments &amp; patch on that issue you will get the desired result.</p>\n", "title": "After Installing Java JDK 7 For Mac OS X - mvn -version still shows java version 1.6.0_31", "answer_id": 11873827, "link": "http://stackoverflow.com/questions/10339887/after-installing-java-jdk-7-for-mac-os-x-mvn-version-still-shows-java-version/11873827#11873827", "tags": ["java", "osx", "maven", "java-7"]}, {"body": "<p>Ok on my machine. Yes, the Oracle installer didn't exactly do its job, and it confused me to no end after 1.6 was still running.</p>\n\n<pre><code>java run time was updated \n\njava -version\njava version \"1.7.0_25\"\nJava(TM) SE Runtime Environment (build 1.7.0_25-b15)\nJava HotSpot(TM) 64-Bit Server VM (build 23.25-b01, mixed mode)\n</code></pre>\n\n<p>but the SDK HOME is actually a sim link still pointing to 1.6</p>\n\n<p><code>/Library/Java/Home</code> in finder GetInfo points to <code>/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home</code></p>\n\n<p>in Terminal </p>\n\n<pre><code>./Home -&gt; /System/Library/Frameworks/JavaVM.framework/Home\n</code></pre>\n\n<p>Go figure.</p>\n\n<p>I found 1.7 here and I'm using that to build with: <code>/Library/Java/JavaVirtualMachines/jdk1.7.0_25.jdk/Contents/Home</code></p>\n", "title": "After Installing Java JDK 7 For Mac OS X - mvn -version still shows java version 1.6.0_31", "answer_id": 17910833, "link": "http://stackoverflow.com/questions/10339887/after-installing-java-jdk-7-for-mac-os-x-mvn-version-still-shows-java-version/17910833#17910833", "tags": ["java", "osx", "maven", "java-7"]}, {"body": "<p>In case anyone is installing Maven on a 64-bit Mac running Mac OSX 'Mavericks' save yourself some time and some hair pulling trying to get Maven installed. I was trying to follow this (which failed because the location of the java_home has changed on Mavericks:</p>\n\n<p><a href=\"http://maven.apache.org/download.cgi\">http://maven.apache.org/download.cgi</a></p>\n\n<p>I was pulling my hair out until I found this website, which recommends you Install homebrew and follow the instructions on this page: <a href=\"http://techspunky.blogspot.in/2013/10/how-to-install-maven-on-mac-osx-109.html\">http://techspunky.blogspot.in/2013/10/how-to-install-maven-on-mac-osx-109.html</a></p>\n\n<p>once complete don't panic when $ maven -version doesn't work, instead use $mvn --version as maven.apache.org/download.cgi recommended. </p>\n\n<p>It worked, but then I noticed the Java SDK Maven was using was Java version: 1.6.0_65, which is not the latest SDK I installed on the system.</p>\n\n<p>Once I set the JAVA_HOME=<code>/usr/libexec/java_home</code></p>\n\n<p>It was using the correct SDK: \nMaven home: /usr/local/Cellar/maven/3.1.1/libexec\nJava version: 1.7.0_45, vendor: Oracle Corporation\nJava home: /Library/Java/JavaVirtualMachines/jdk1.7.0_45.jdk/Contents/Home/jre\nDefault locale: en_US, platform encoding: UTF-8\nOS name: \"mac os x\", version: \"10.9\", arch: \"x86_64\", family: \"mac\"</p>\n\n<p>Success!\nbut wait...\nnext time I opened the terminal and ran mvn -v it went back to java version 1.6. WTH!</p>\n\n<p>its some sort of supposed bug from what I read use:\necho JAVA_HOME=<code>/usr/libexec/java_home -v 1.7</code> | sudo tee -a /etc/mavenrc</p>\n\n<p>and now:</p>\n\n<p>Maven home: /usr/local/Cellar/maven/3.1.1/libexec\nJava version: 1.7.0_45, vendor: Oracle Corporation\nJava home: /Library/Java/JavaVirtualMachines/jdk1.7.0_45.jdk/Contents/Home/jre\nDefault locale: en_US, platform encoding: UTF-8\nOS name: \"mac os x\", version: \"10.9\", arch: \"x86_64\", family: \"mac\"</p>\n", "title": "After Installing Java JDK 7 For Mac OS X - mvn -version still shows java version 1.6.0_31", "answer_id": 20185352, "link": "http://stackoverflow.com/questions/10339887/after-installing-java-jdk-7-for-mac-os-x-mvn-version-still-shows-java-version/20185352#20185352", "tags": ["java", "osx", "maven", "java-7"]}, {"body": "<p>The problem is that the symbolic link \"CurrentJDK\" inside the versions of JavaVm.framework points to the old jdk, so when i used the following commands to set the CurrentJDK to the latest one (1.7.0_45) it works</p>\n\n<pre><code>cd /System/Library/Frameworks/JavaVM.framework/Versions\nsudo rm CurrentJDK\nsudo ln -s /Library/Java/JavaVirtualMachines/jdk1.7.0_45.jdk/Contents CurrentJDK\n</code></pre>\n\n<p>reference: <a href=\"http://java.dzone.com/articles/installing-jdk-7-mac-os-x\">http://java.dzone.com/articles/installing-jdk-7-mac-os-x</a></p>\n", "title": "After Installing Java JDK 7 For Mac OS X - mvn -version still shows java version 1.6.0_31", "answer_id": 20740506, "link": "http://stackoverflow.com/questions/10339887/after-installing-java-jdk-7-for-mac-os-x-mvn-version-still-shows-java-version/20740506#20740506", "tags": ["java", "osx", "maven", "java-7"]}], "question_id": 10339887}, {"body": "<p>Given <code>Iterator&lt;Element&gt;</code>, how can we convert that iterator to <code>ArrayList&lt;Element&gt;</code> (or <code>List&lt;Element&gt;</code>) in the best and fastest way possible, so that we can use <code>ArrayList</code>'s operations on it such as <code>get(index)</code>, <code>add(element)</code>, etc.</p>\n", "tags": ["java", "arraylist", "iterator"], "title": "Convert Iterator to ArrayList", "answer_count": 8, "creation_date": 1334201584, "score": 104, "link": "http://stackoverflow.com/questions/10117026/convert-iterator-to-arraylist", "answers": [{"body": "<p>You can copy an iterator to a new list like this:</p>\n\n<pre><code>Iterator&lt;String&gt; iter = list.iterator();\nList&lt;String&gt; copy = new ArrayList&lt;String&gt;();\nwhile (iter.hasNext())\n    copy.add(iter.next());\n</code></pre>\n\n<p>That's assuming that the list contains strings. There really isn't a faster way to recreate a list from an iterator, you're stuck with traversing it by hand and copying each element to a new list of the appropriate type.</p>\n\n<p><strong>EDIT :</strong></p>\n\n<p>Here's a generic method for copying an iterator to a new list in a type-safe way:</p>\n\n<pre><code>public static &lt;T&gt; List&lt;T&gt; copyIterator(Iterator&lt;T&gt; iter) {\n    List&lt;T&gt; copy = new ArrayList&lt;T&gt;();\n    while (iter.hasNext())\n        copy.add(iter.next());\n    return copy;\n}\n</code></pre>\n\n<p>Use it like this:</p>\n\n<pre><code>List&lt;String&gt; list = Arrays.asList(\"1\", \"2\", \"3\");\nIterator&lt;String&gt; iter = list.iterator();\nList&lt;String&gt; copy = copyIterator(iter);\nSystem.out.println(copy);\n&gt; [1, 2, 3]\n</code></pre>\n", "title": "Convert Iterator to ArrayList", "answer_id": 10117051, "link": "http://stackoverflow.com/questions/10117026/convert-iterator-to-arraylist/10117051#10117051", "tags": ["java", "arraylist", "iterator"]}, {"body": "<pre><code>List result = new ArrayList();\nwhile (i.hasNext()){\n    result.add(i.next());\n}\n</code></pre>\n", "title": "Convert Iterator to ArrayList", "answer_id": 10117053, "link": "http://stackoverflow.com/questions/10117026/convert-iterator-to-arraylist/10117053#10117053", "tags": ["java", "arraylist", "iterator"]}, {"body": "<p>Here in this case if you want the fastest way possible then <code>for loop</code> is better.</p>\n\n<p>The iterator over a sample size of <code>10,000 runs</code> takes <code>40 ms</code> where as for loop takes <code>2 ms</code></p>\n\n<pre><code>        ArrayList&lt;String&gt; alist = new ArrayList&lt;String&gt;();  \n        long start, end;  \n\n        for (int i = 0; i &lt; 1000000; i++) {  \n            alist.add(String.valueOf(i));  \n        }  \n\n        ListIterator&lt;String&gt; it = alist.listIterator();      \n\n        start = System.currentTimeMillis();  \n        while (it.hasNext()) {  \n            String s = it.next();  \n        }  \n        end = System.currentTimeMillis();  \n\n        System.out.println(\"Iterator start: \" + start + \", end: \" + end + \", delta: \"  \n            + (end - start));  \n        start = System.currentTimeMillis();  \n        int ixx = 0;  \n        for (int i = 0; i &lt; 100000; i++) {  \n            String s = alist.get(i);  \n        }  \n\n        System.out.println(ixx);  \n        end = System.currentTimeMillis();  \n        System.out.println(\"for loop start: \" + start + \", end: \" + end + \", delta: \"  \n            + (end - start));  \n</code></pre>\n\n<p>That's assuming that the list contains strings. </p>\n", "title": "Convert Iterator to ArrayList", "answer_id": 10117128, "link": "http://stackoverflow.com/questions/10117026/convert-iterator-to-arraylist/10117128#10117128", "tags": ["java", "arraylist", "iterator"]}, {"body": "<p>Better use a library like <a href=\"http://docs.guava-libraries.googlecode.com/git-history/v11.0.2/javadoc/com/google/common/collect/Lists.html#newArrayList%28java.util.Iterator%29\">Guava</a>:</p>\n\n<pre><code>import com.google.common.collect.Lists;\n\nIterator&lt;Element&gt; myIterator = ... //some iterator\nList&lt;Element&gt; myList = Lists.newArrayList(myIterator);\n</code></pre>\n\n<p>Another Guava example:</p>\n\n<pre><code>ImmutableList.copyOf(myIterator);\n</code></pre>\n\n<p>or <a href=\"http://commons.apache.org/collections/\">Apache Commons Collections</a>:</p>\n\n<pre><code>import org.apache.commons.collections.IteratorUtils;\n\nIterator&lt;Element&gt; myIterator = ...//some iterator\n\nList&lt;Element&gt; myList = IteratorUtils.toList(myIterator);       \n</code></pre>\n", "title": "Convert Iterator to ArrayList", "answer_id": 10975386, "link": "http://stackoverflow.com/questions/10117026/convert-iterator-to-arraylist/10975386#10975386", "tags": ["java", "arraylist", "iterator"]}, {"body": "<p>use google <a href=\"http://code.google.com/p/guava-libraries/\" rel=\"nofollow\">guava</a> !</p>\n\n<pre><code>Iterable&lt;String&gt; fieldsIterable = ...\nList&lt;String&gt; fields = Lists.newArrayList(fieldsIterable);\n</code></pre>\n\n<p>++</p>\n", "title": "Convert Iterator to ArrayList", "answer_id": 12786318, "link": "http://stackoverflow.com/questions/10117026/convert-iterator-to-arraylist/12786318#12786318", "tags": ["java", "arraylist", "iterator"]}, {"body": "<p>You can also use <a href=\"http://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections/IteratorUtils.html\"><code>IteratorUtils</code></a> from Apache <a href=\"http://commons.apache.org/proper/commons-collections/\">commons-collections</a>, although it doesn't support generics:</p>\n\n<pre><code>List list = IteratorUtils.toList(iterator);\n</code></pre>\n", "title": "Convert Iterator to ArrayList", "answer_id": 15517235, "link": "http://stackoverflow.com/questions/10117026/convert-iterator-to-arraylist/15517235#15517235", "tags": ["java", "arraylist", "iterator"]}, {"body": "<p>Pretty concise solution with plain Java 8 using <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html\" rel=\"nofollow\"><code>java.util.stream</code></a>:</p>\n\n<pre><code>public static &lt;T&gt; ArrayList&lt;T&gt; toArrayList(final Iterator&lt;T&gt; iterator) {\n    return StreamSupport.stream(Spliterators.spliteratorUnknownSize(iterator, Spliterator.ORDERED), false)\n                        .collect(Collectors.toCollection(ArrayList::new));\n}\n</code></pre>\n", "title": "Convert Iterator to ArrayList", "answer_id": 23997880, "link": "http://stackoverflow.com/questions/10117026/convert-iterator-to-arraylist/23997880#23997880", "tags": ["java", "arraylist", "iterator"]}, {"body": "<p>In Java 8, you can use the new <code>forEachRemaining</code> method that's been added to the <code>Iterator</code> interface:</p>\n\n<pre><code>List&lt;Element&gt; list = new ArrayList&lt;&gt;();\niterator.forEachRemaining(list::add);\n</code></pre>\n", "title": "Convert Iterator to ArrayList", "answer_id": 28491752, "link": "http://stackoverflow.com/questions/10117026/convert-iterator-to-arraylist/28491752#28491752", "tags": ["java", "arraylist", "iterator"]}], "question_id": 10117026}, {"body": "<p>I have an activity with an <code>EditText</code> widget. Everytime this activity shows, My <code>EditText</code> get focus and Android keyboard appear. I don't want this. I don't want Android keyboard shows automatically. How I can do?</p>\n", "tags": ["java", "android", "focus", "android-keypad"], "title": "How to avoid automatically appear android keyboard when activity start", "answer_count": 11, "creation_date": 1331878350, "score": 101, "link": "http://stackoverflow.com/questions/9732761/how-to-avoid-automatically-appear-android-keyboard-when-activity-start", "answers": [{"body": "<p>I think the following may work</p>\n\n<pre><code>getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN);\n</code></pre>\n\n<p>I've used it for this sort of thing before.</p>\n", "title": "How to avoid automatically appear android keyboard when activity start", "answer_id": 9732789, "link": "http://stackoverflow.com/questions/9732761/how-to-avoid-automatically-appear-android-keyboard-when-activity-start/9732789#9732789", "tags": ["java", "android", "focus", "android-keypad"]}, {"body": "<p>Try this also - </p>\n\n<pre><code>this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);\n</code></pre>\n\n<p>Otherwise, declare in your manifest file's activity - </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;application android:icon=\"@drawable/icon\" android:label=\"@string/app_name\"&gt;\n&lt;activity android:name=\".Main\"\n          android:label=\"@string/app_name\"\n          android:windowSoftInputMode=\"stateHidden\"\n          &gt;\n</code></pre>\n", "title": "How to avoid automatically appear android keyboard when activity start", "answer_id": 9732810, "link": "http://stackoverflow.com/questions/9732761/how-to-avoid-automatically-appear-android-keyboard-when-activity-start/9732810#9732810", "tags": ["java", "android", "focus", "android-keypad"]}, {"body": "\n\n<p>Hide it for all activities using the theme</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;style name=\"MyTheme\" parent=\"Theme\"&gt;\n    &lt;item name=\"android:windowSoftInputMode\"&gt;stateHidden&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>set the theme</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;application android:theme=\"@style/MyTheme\"&gt;\n</code></pre>\n", "title": "How to avoid automatically appear android keyboard when activity start", "answer_id": 9733579, "link": "http://stackoverflow.com/questions/9732761/how-to-avoid-automatically-appear-android-keyboard-when-activity-start/9733579#9733579", "tags": ["java", "android", "focus", "android-keypad"]}, {"body": "<p>Try to declare it in menifest file</p>\n\n<pre><code>&lt;activity android:name=\".HomeActivity\"\n      android:label=\"@string/app_name\"\n      android:windowSoftInputMode=\"stateAlwaysHidden\"\n      &gt;\n</code></pre>\n", "title": "How to avoid automatically appear android keyboard when activity start", "answer_id": 22862350, "link": "http://stackoverflow.com/questions/9732761/how-to-avoid-automatically-appear-android-keyboard-when-activity-start/22862350#22862350", "tags": ["java", "android", "focus", "android-keypad"]}, {"body": "<p>If you are using API level 21, you can use editText.setShowSoftInputOnFocus(false);</p>\n", "title": "How to avoid automatically appear android keyboard when activity start", "answer_id": 29166196, "link": "http://stackoverflow.com/questions/9732761/how-to-avoid-automatically-appear-android-keyboard-when-activity-start/29166196#29166196", "tags": ["java", "android", "focus", "android-keypad"]}, {"body": "<pre><code>//to hide the soft keyboard\nInputMethodManager imm = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);\nimm.hideSoftInputFromWindow(v.getWindowToken(), 0);\n</code></pre>\n", "title": "How to avoid automatically appear android keyboard when activity start", "answer_id": 32873146, "link": "http://stackoverflow.com/questions/9732761/how-to-avoid-automatically-appear-android-keyboard-when-activity-start/32873146#32873146", "tags": ["java", "android", "focus", "android-keypad"]}, {"body": "<blockquote>\n  <p>Function to hide the keyboard.</p>\n</blockquote>\n\n<pre><code>public static void hideKeyboard(Activity activity) {\n    View view = activity.getCurrentFocus();\n\n    if (view != null) {\n        InputMethodManager inputManager = (InputMethodManager) activity.getSystemService(Context.INPUT_METHOD_SERVICE);\n\n        inputManager.hideSoftInputFromWindow(view.getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>Hide keyboard in AndroidManifext.xml file.</p>\n</blockquote>\n\n<pre><code>&lt;activity\n    android:name=\".MainActivity\"\n    android:label=\"@string/app_name\"\n    android:theme=\"@style/AppTheme\"\n    android:windowSoftInputMode=\"stateHidden\"&gt;\n</code></pre>\n", "title": "How to avoid automatically appear android keyboard when activity start", "answer_id": 34408462, "link": "http://stackoverflow.com/questions/9732761/how-to-avoid-automatically-appear-android-keyboard-when-activity-start/34408462#34408462", "tags": ["java", "android", "focus", "android-keypad"]}, {"body": "<p>Add these two properties to your parent layout (ex: Linear Layout, Relative Layout)</p>\n\n<pre><code>android:focusable=\"true\"\nandroid:focusableInTouchMode=\"true\" \n</code></pre>\n\n<p>It will do the trick :)</p>\n", "title": "How to avoid automatically appear android keyboard when activity start", "answer_id": 34448226, "link": "http://stackoverflow.com/questions/9732761/how-to-avoid-automatically-appear-android-keyboard-when-activity-start/34448226#34448226", "tags": ["java", "android", "focus", "android-keypad"]}, {"body": "<p>Just Add in AndroidManifest.xml</p>\n\n<pre><code>&lt;activity android:name=\".HomeActivity\"  android:windowSoftInputMode=\"stateHidden\"&gt;\n&lt;/activity&gt;\n</code></pre>\n", "title": "How to avoid automatically appear android keyboard when activity start", "answer_id": 34635955, "link": "http://stackoverflow.com/questions/9732761/how-to-avoid-automatically-appear-android-keyboard-when-activity-start/34635955#34635955", "tags": ["java", "android", "focus", "android-keypad"]}, {"body": "<p>This occures when you EditText is the first view to get Focus, when you activity starts.  So you can reliably solve this problem with no code simply by setting initial Focus to some other View.  You can do this in XML, no code required.</p>\n\n<p>Example:</p>\n\n<pre><code>&lt;Button\n  android:id=\"@+id/mybutton\"&gt;\n  &lt;requestFocus /&gt;\n&lt;/Button&gt;\n</code></pre>\n", "title": "How to avoid automatically appear android keyboard when activity start", "answer_id": 36036258, "link": "http://stackoverflow.com/questions/9732761/how-to-avoid-automatically-appear-android-keyboard-when-activity-start/36036258#36036258", "tags": ["java", "android", "focus", "android-keypad"]}, {"body": "<p>Best solution for me, paste your class </p>\n\n<pre><code>@Override\npublic void onResume() {\n    this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);\n    super.onResume();\n}\n\n@Override\npublic void onStart() {\n    this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);\n    super.onStart();\n}\n</code></pre>\n", "title": "How to avoid automatically appear android keyboard when activity start", "answer_id": 38784111, "link": "http://stackoverflow.com/questions/9732761/how-to-avoid-automatically-appear-android-keyboard-when-activity-start/38784111#38784111", "tags": ["java", "android", "focus", "android-keypad"]}], "question_id": 9732761}, {"body": "<p>HashMap has two important properties: size and load factor. I went through the Java documentation and it says 0.75f is the initial load factor. But I can't find the actual use of it. Can someone describe what are the different scenarios where we need to set load factor and what are some sample ideal values for different cases?</p>\n", "tags": ["java", "hashmap", "load-factor"], "title": "What is the significance of load factor in HashMap?", "answer_count": 7, "creation_date": 1338916340, "score": 101, "link": "http://stackoverflow.com/questions/10901752/what-is-the-significance-of-load-factor-in-hashmap", "answers": [{"body": "<p>From the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html\">documentation</a>:</p>\n\n<blockquote>\n  <p>The load factor is a measure of how full the hash table is allowed to get before its capacity is automatically increased</p>\n</blockquote>\n\n<p>It really depends on your particular requirements, there's no \"rule of thumb\" for specifying an initial load factor.</p>\n", "title": "What is the significance of load factor in HashMap?", "answer_id": 10901816, "link": "http://stackoverflow.com/questions/10901752/what-is-the-significance-of-load-factor-in-hashmap/10901816#10901816", "tags": ["java", "hashmap", "load-factor"]}, {"body": "<p>The <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html\">documentation</a> explains it pretty well:</p>\n\n<blockquote>\n  <p>An instance of HashMap has two parameters that affect its performance: initial capacity and load factor. The capacity is the number of buckets in the hash table, and the initial capacity is simply the capacity at the time the hash table is created. The load factor is a measure of how full the hash table is allowed to get before its capacity is automatically increased. When the number of entries in the hash table exceeds the product of the load factor and the current capacity, the hash table is rehashed (that is, internal data structures are rebuilt) so that the hash table has approximately twice the number of buckets.</p>\n  \n  <p>As a general rule, the default load factor (.75) offers a good tradeoff between time and space costs. Higher values decrease the space overhead but increase the lookup cost (reflected in most of the operations of the HashMap class, including get and put). The expected number of entries in the map and its load factor should be taken into account when setting its initial capacity, so as to minimize the number of rehash operations. If the initial capacity is greater than the maximum number of entries divided by the load factor, no rehash operations will ever occur.</p>\n</blockquote>\n\n<p>As with all performance optimizations, it is a good idea to avoid optimizing things prematurely (i.e. without hard data on where the bottlenecks are).</p>\n", "title": "What is the significance of load factor in HashMap?", "answer_id": 10901821, "link": "http://stackoverflow.com/questions/10901752/what-is-the-significance-of-load-factor-in-hashmap/10901821#10901821", "tags": ["java", "hashmap", "load-factor"]}, {"body": "<p>The load factor should not be changed from .75 , unless you have some specific optimization you are going to do. Initial capacity is the only thing you want to change, and set it according to your N value - meaning (N / 0.75) + 1, or something in that area. This will ensure that the table will always be large enough and no rehashing will occur.</p>\n", "title": "What is the significance of load factor in HashMap?", "answer_id": 10901823, "link": "http://stackoverflow.com/questions/10901752/what-is-the-significance-of-load-factor-in-hashmap/10901823#10901823", "tags": ["java", "hashmap", "load-factor"]}, {"body": "<p>Default initial capacity of the <code>HashMap</code> takes is 16 and load factor is 0.75f (i.e 75% of current map size).  The load factor represents at what level the <code>HashMap</code> capacity should be doubled. </p>\n\n<p><strong>For example</strong> product of capacity and load factor as <code>16 * 0.75 = 12</code>. This represents that after storing the 12th key \u2013 value pair into the <code>HashMap</code> , its capacity becomes 32.</p>\n", "title": "What is the significance of load factor in HashMap?", "answer_id": 19426871, "link": "http://stackoverflow.com/questions/10901752/what-is-the-significance-of-load-factor-in-hashmap/19426871#19426871", "tags": ["java", "hashmap", "load-factor"]}, {"body": "<p>Actually, from my calculations, the \"perfect\" load factor is closer to log 2 (~ 0.7). Although any load factor less than this will yield better performance. I think that .75 was probably pulled out of a hat.</p>\n\n<p>Proof:</p>\n\n<p>Chaining can be avoided and branch prediction exploited by predicting if a\nbucket is empty or not. A bucket is probably empty if the probability of it\nbeing empty exceeds .5.</p>\n\n<p>Let s represent the size and n the number of keys added. Using the binomial\ntheorem, the probability of a bucket being empty is:</p>\n\n<pre><code>P(0) = C(n, 0) * (1/s)^0 * (1 - 1/s)^(n - 0)\n</code></pre>\n\n<p>Thus, a bucket is probably empty if there are less than</p>\n\n<pre><code>log(2)/log(s/(s - 1)) keys\n</code></pre>\n\n<p>As s reaches infinity and if the number of keys added is such that\nP(0) = .5, then n/s approaches log(2) rapidly:</p>\n\n<pre><code>lim (log(2)/log(s/(s - 1)))/s as s -&gt; infinity = log(2) ~ 0.693...\n</code></pre>\n\n<p>Incidentally, the first prime number that satisfies 0 &lt; log(2)/log(p/(p - 1)) - 1 is 5.</p>\n", "title": "What is the significance of load factor in HashMap?", "answer_id": 31401836, "link": "http://stackoverflow.com/questions/10901752/what-is-the-significance-of-load-factor-in-hashmap/31401836#31401836", "tags": ["java", "hashmap", "load-factor"]}, {"body": "<p>I would pick a table size of n * 1.5 or n + (n >> 1), this would give a load factor of .66666~ without division, which is slow on most systems, especially on portable systems where there is no division in the hardware.</p>\n", "title": "What is the significance of load factor in HashMap?", "answer_id": 35422485, "link": "http://stackoverflow.com/questions/10901752/what-is-the-significance-of-load-factor-in-hashmap/35422485#35422485", "tags": ["java", "hashmap", "load-factor"]}, {"body": "<h2><strong>What is load factor ?</strong></h2>\n\n<p>The amount of capacity which is to be exhausted for the HashMap to increase its capacity ?</p>\n\n<h2><strong>Why load factor ?</strong></h2>\n\n<p>Load factor is by default 0.75 of the initial capacity (16) therefore 25% of the buckets will be free before there is an increase in the capacity &amp; this makes many new buckets with new hashcodes pointing to them to exist just after the increase in the number of buckets.</p>\n\n<h2><strong>Now why should you keep many free buckets &amp; what is the impact of keeping free buckets on the performance ?</strong></h2>\n\n<p>If you set the loading factor to say 1.0 then something very interesting might happen.</p>\n\n<p>Say you are adding an object x to your hashmap whose hashCode is 888 &amp; in your hashmap the bucket representing the hashcode is free , so the <strong>object x</strong> gets added to the bucket, but now again say if you are adding another object y whose hashCode is also 888 then your object y will get added for sure BUT at the end of the bucket (<em>because the buckets are nothing but linkedList implementation storing key,value &amp; next</em>) now this has a performance impact ! Since your <strong>object y</strong> is no longer present in the head of the bucket if you perform a lookup the time taken is not going to be <strong>O(1)</strong> this time it depend on how many items are there in the same bucket. This is called hash collision by the way &amp; this even happen when your loading factor is less than 1.</p>\n\n<h2><strong>Correlation between performance , hash collision &amp; loading factor ?</strong></h2>\n\n<p><strong>Lower load factor</strong> = more free buckets = <strong>less chances of collision</strong> = high performance = high space requirement.</p>\n\n<p><em>Correct me if i am wrong somewhere.</em></p>\n", "title": "What is the significance of load factor in HashMap?", "answer_id": 39060469, "link": "http://stackoverflow.com/questions/10901752/what-is-the-significance-of-load-factor-in-hashmap/39060469#39060469", "tags": ["java", "hashmap", "load-factor"]}], "question_id": 10901752}, {"body": "<p>I wrote the following code on immutable Strings.</p>\n\n<pre><code>public class ImmutableStrings {\n\n    public static void main(String[] args) {\n        testmethod();\n    }\n\n    private static void testmethod() {\n        String a = \"a\";\n        System.out.println(\"a 1--&gt;\" + a);\n        a = \"ty\";\n        System.out.println(\"a 2--&gt;\" + a);\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>a 1--&gt;a  \na 2--&gt;ty\n</code></pre>\n\n<p>Here the value of variable <code>a</code> has been changed (while many say that contents of the immutable objects cannot be changed). But what exactly does one mean by saying <strong><code>String</code> is immutable</strong>? Could you please clarify this topic for me?</p>\n\n<p>source : <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\">https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html</a></p>\n", "tags": ["java", "string", "immutability"], "title": "String is immutable. What exactly is the meaning?", "answer_count": 19, "creation_date": 1326168254, "score": 100, "link": "http://stackoverflow.com/questions/8798403/string-is-immutable-what-exactly-is-the-meaning", "answers": [{"body": "<p>String is immutable means that you cannot change the object itself, but you can change the reference to the object. When you called <code>a = \"ty\"</code>, you are actually changing the reference of <code>a</code> to a new object created by the String literal <code>\"ty\"</code>. Changing an object means to use its methods to change one of its fields (or the fields are public and not final, so that they can be updated from outside without accessing them via methods), for example:</p>\n\n<pre><code>Foo x = new Foo(\"the field\");\nx.setField(\"a new field\");\nSystem.out.println(x.getField()); // prints \"a new field\"\n</code></pre>\n\n<p>While in an immutable class (declared as final, to prevent modification via inheritance)(its methods cannot modify its fields, and also the fields are always private and recommended to be final), for example String, you cannot change the current String but you can return a new String, i.e:</p>\n\n<pre><code>String s = \"some text\";\ns.substring(0,4);\nSystem.out.println(s); // still printing \"some text\"\nString a = s.substring(0,4);\nSystem.out.println(a); // prints \"some\"\n</code></pre>\n", "title": "String is immutable. What exactly is the meaning?", "answer_id": 8798424, "link": "http://stackoverflow.com/questions/8798403/string-is-immutable-what-exactly-is-the-meaning/8798424#8798424", "tags": ["java", "string", "immutability"]}, {"body": "<p>You're changing what <code>a</code> <em>refers to</em>. Try this:</p>\n\n<pre><code>String a=\"a\";\nSystem.out.println(\"a 1--&gt;\"+a);\nString b=a;\na=\"ty\";\nSystem.out.println(\"a 2--&gt;\"+a);\nSystem.out.println(\"b  --&gt;\"+b);\n</code></pre>\n\n<p>You will see that the <em>object</em> to which <code>a</code> and then <code>b</code> refers has not changed.</p>\n\n<p>If you want to prevent your code from changing which object <code>a</code> refers to, try:</p>\n\n<pre><code>final String a=\"a\";\n</code></pre>\n", "title": "String is immutable. What exactly is the meaning?", "answer_id": 8798426, "link": "http://stackoverflow.com/questions/8798403/string-is-immutable-what-exactly-is-the-meaning/8798426#8798426", "tags": ["java", "string", "immutability"]}, {"body": "<p>You are not changing the object in the assignment statement, you <em>replace</em> one immutable object with another one. Object <code>String(\"a\")</code> does not change to <code>String(\"ty\")</code>, it gets discarded, and a <em>reference</em> to <code>ty</code> gets written into <code>a</code> in its stead.</p>\n\n<p>In contrast, <code>StringBuffer</code> represents a <em>mutable</em> object. You can do this:</p>\n\n<pre><code>StringBuffer b = new StringBuffer(\"Hello\");\nSystem.out.writeln(b);\nb.append(\", world!\");\nSystem.out.writeln(b);\n</code></pre>\n\n<p>Here, you did not re-assign <code>b</code>: it still points to the same object, but the <em>content</em> of that object has changed.</p>\n", "title": "String is immutable. What exactly is the meaning?", "answer_id": 8798429, "link": "http://stackoverflow.com/questions/8798403/string-is-immutable-what-exactly-is-the-meaning/8798429#8798429", "tags": ["java", "string", "immutability"]}, {"body": "<p>You are actually getting a reference to a new string, the string itself is not being changed as it is immutable.  This is relevant.</p>\n\n<p>See</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Immutable_object#Java\" rel=\"nofollow\">Immutable objects on Wikipedia</a></p>\n", "title": "String is immutable. What exactly is the meaning?", "answer_id": 8798432, "link": "http://stackoverflow.com/questions/8798403/string-is-immutable-what-exactly-is-the-meaning/8798432#8798432", "tags": ["java", "string", "immutability"]}, {"body": "<p>Only the reference is changing. First <code>a</code> was referencing to the string \"a\", and later you changed it to \"ty\". The string \"a\" remains the same.</p>\n", "title": "String is immutable. What exactly is the meaning?", "answer_id": 8798433, "link": "http://stackoverflow.com/questions/8798403/string-is-immutable-what-exactly-is-the-meaning/8798433#8798433", "tags": ["java", "string", "immutability"]}, {"body": "<p>In your example, <code>a</code> refers first to <code>\"a\"</code>, and then to <code>\"ty\"</code>. You're not mutating any <code>String</code> instance; you're just changing which <code>String</code> instance <code>a</code> refers to. For example, this:</p>\n\n<pre><code>String a = \"a\";\nString b = a; // b refers to the same String as a\na = \"b\"; // a now refers to a different instance\nSystem.out.println(b);\n</code></pre>\n\n<p>prints \"a\", because we never mutate the <code>String</code> instance that <code>b</code> points to.</p>\n", "title": "String is immutable. What exactly is the meaning?", "answer_id": 8798435, "link": "http://stackoverflow.com/questions/8798403/string-is-immutable-what-exactly-is-the-meaning/8798435#8798435", "tags": ["java", "string", "immutability"]}, {"body": "<p>In your example, the variable <code>a</code> is just a reference to an instance of a string object.  When you say <code>a = \"ty\"</code>, you are not actually changing the string object, but rather pointing the reference at an entirely different instance of the string class.</p>\n", "title": "String is immutable. What exactly is the meaning?", "answer_id": 8798436, "link": "http://stackoverflow.com/questions/8798403/string-is-immutable-what-exactly-is-the-meaning/8798436#8798436", "tags": ["java", "string", "immutability"]}, {"body": "<p>A string is a <code>char[]</code> containing a series of <a href=\"http://en.wikipedia.org/wiki/UTF-16\" rel=\"nofollow\">UTF-16 code units</a>, an <code>int</code> offset into that array, and an <code>int</code> length.</p>\n\n<p>For example.</p>\n\n<pre><code>String s\n</code></pre>\n\n<p>It creates space for a string reference.  Assigning copies references around but does not modify the objects to which those references refer.</p>\n\n<p>You should also be aware that</p>\n\n<pre><code>new String(s)\n</code></pre>\n\n<p>doesn't really do anything useful.  It merely creates another instance backed by the same array, offset, and length as <code>s</code>.  There is very rarely a reason to do this so it is considered bad practice by most Java programmers.</p>\n\n<p>Java double quoted strings like <code>\"my string\"</code> are really references to <a href=\"http://en.wikipedia.org/wiki/String_interning\" rel=\"nofollow\">interned</a> <code>String</code> instances so <code>\"bar\"</code> is a reference to the same String instance regardless of how many times it appears in your code.</p>\n\n<hr>\n\n<p>The \"hello\" creates one instance that is pooled, and the <code>new String(...)</code> creates a non-pooled instance. Try <code>System.out.println((\"hello\" == \"hello\") + \",\" + (new String(\"hello\") == \"hello\") + \",\" + (new String(\"hello\") == new String(\"hello\")));</code> and you should see <code>true,false,false</code></p>\n", "title": "String is immutable. What exactly is the meaning?", "answer_id": 8798465, "link": "http://stackoverflow.com/questions/8798403/string-is-immutable-what-exactly-is-the-meaning/8798465#8798465", "tags": ["java", "string", "immutability"]}, {"body": "<p>An immutable object is an object whose state cannot be modified after it is created. </p>\n\n<p>So <code>a = \"ABC\"</code> &lt;-- immutable object. \"a\" holds reference to the object.\nAnd, <code>a = \"DEF\"</code> &lt;-- another immutable object, \"a\" holds reference to it now.</p>\n\n<p>Once you assign a string object, that object can not be changed in memory.</p>\n\n<p>In summary, what you did is to change the reference of \"a\" to a new string object. </p>\n", "title": "String is immutable. What exactly is the meaning?", "answer_id": 8798512, "link": "http://stackoverflow.com/questions/8798403/string-is-immutable-what-exactly-is-the-meaning/8798512#8798512", "tags": ["java", "string", "immutability"]}, {"body": "<p>immutable means you can't not change the value of the same referance.every time you required to create new referance means new memory location.\nex:</p>\n\n<pre><code>String str=\"abc\";\nstr=\"bcd\";\n</code></pre>\n\n<p>here, in the above code ,in the memory there are 2 blocks for storing the value.the first for value \"abc\" and second for \"bcd\".the second value is not replace to first value.</p>\n\n<p>this is call the immutable.</p>\n", "title": "String is immutable. What exactly is the meaning?", "answer_id": 8798520, "link": "http://stackoverflow.com/questions/8798403/string-is-immutable-what-exactly-is-the-meaning/8798520#8798520", "tags": ["java", "string", "immutability"]}, {"body": "<p>If some object <code>bar</code> holds a reference to a mutable object <code>foo</code> <em>and encapsulates some of its state in mutable aspects of <code>foo</code>'s state</em>, that will allow code which can change those aspects of <code>foo</code> to change the corresponding aspects of <code>bar</code>'s state <em>without actually touching <code>bar</code> or even knowing of its existence</em>.  Generally, this means that objects which encapsulate their own state using mutable objects must ensure that no references to those objects are exposed to any code which might unexpectedly mutate them.  By contrast, if <code>bar</code> holds a reference to an object <code>moo</code> and only uses immutable aspects of <code>moo</code> <em>other than identity</em> to encapsulate its state, then <code>bar</code> can freely expose <code>moo</code> to outside code without worrying about anything the outside code might do to it.</p>\n", "title": "String is immutable. What exactly is the meaning?", "answer_id": 17429191, "link": "http://stackoverflow.com/questions/8798403/string-is-immutable-what-exactly-is-the-meaning/17429191#17429191", "tags": ["java", "string", "immutability"]}, {"body": "<p>Before proceeding further with the fuss of <em>immutability</em>, let's just take a look into the <code>String</code> class and its functionality a little before coming to conclusions about its immutability.</p>\n\n<p>This is how <code>String</code> works:</p>\n\n<pre><code>String str = \"knowledge\";\n</code></pre>\n\n<p>This, as usual, creates a string containing <code>\"knowledge\"</code> and assigns it a reference <code>str</code>. Simple enough? Lets perform some more functions:</p>\n\n<pre><code> String s = str;     // assigns a new reference to the same string \"knowledge\"\n</code></pre>\n\n<p>Lets see how the below statement works:</p>\n\n<pre><code>  str = str.concat(\" base\");\n</code></pre>\n\n<p>This appends a string <code>\" base\"</code> to <code>str</code>. But wait, how is this possible, since <code>String</code> objects are immutable? Well to your surprise, it is.</p>\n\n<p>When the above statement is executed, the VM takes the value of <code>String str</code>, i.e. <code>\"knowledge\"</code> and appends <code>\" base\"</code>, giving us the value <code>\"knowledge base\"</code>. Now, since <code>String</code>s are immutable, the VM can't assign this value to <code>str</code>, so it creates a new <code>String</code> object, gives it a value <code>\"knowledge base\"</code>, and gives it a reference <code>str</code>.</p>\n\n<p>An important point to note here is that, while the <code>String</code> object is immutable, <strong>its reference variable is not.</strong> So that's why, in the above example, the reference was made to refer to a newly formed <code>String</code> object.</p>\n\n<p>At this point in the example above, we have two <code>String</code> objects: the first one we created with value <code>\"knowledge\"</code>, pointed to by <code>s</code>, and the second one <code>\"knowledge base\"</code>, pointed to by <code>str</code>. But, technically, we have three <code>String</code> objects, the third one being the literal <code>\"base\"</code> in the <code>concat</code> statement.</p>\n\n<h1>Important Facts about String and Memory usage</h1>\n\n<p>What if we didn't have another reference <code>s</code> to <code>\"knowledge\"</code>? We would have lost that <code>String</code>. However, it still would have existed, but would be considered lost due to having no references.\nLook at one more example below</p>\n\n<pre><code>String s1 = \"java\";\ns1.concat(\" rules\");\nSystem.out.println(\"s1 refers to \"+s1);  // Yes, s1 still refers to \"java\"\n</code></pre>\n\n<p><strong>What's happening:</strong> </p>\n\n<ol>\n<li>The first line is pretty straightforward: create a new <code>String</code> <code>\"java\"</code> and refer <code>s1</code> to it.</li>\n<li>Next, the VM creates another new <code>String</code> <code>\"java rules\"</code>, but nothing\nrefers to it. So, the second <code>String</code> is instantly lost. We can't reach\nit.</li>\n</ol>\n\n<p>The reference variable <code>s1</code> still refers to the original <code>String</code> <code>\"java\"</code>.</p>\n\n<p>Almost every method, applied to a <code>String</code> object in order to modify it, creates new <code>String</code> object. So, where do these <code>String</code> objects go? Well, <em>these exist in memory, and one of the key goals of any programming language is to make efficient use of memory.</em></p>\n\n<p>As applications grow, <em>it's very common for <code>String</code> literals to occupy large area of memory, which can even cause redundancy.</em> So, in order to make Java more efficient, <strong>the JVM sets aside a special area of memory called the \"String constant pool\".</strong></p>\n\n<p>When the compiler sees a <code>String</code> literal, it looks for the <code>String</code> in the pool. If a match is found, the reference to the new literal is directed to the existing <code>String</code> and no new <code>String</code> object is created. The existing <code>String</code> simply has one more reference. Here comes the point of making <code>String</code> objects immutable:</p>\n\n<p>In the <code>String</code> constant pool, a <code>String</code> object is likely to have one or many references. <em>If several references point to same <code>String</code> without even knowing it, it would be bad if one of the references modified that <code>String</code> value. That's why <code>String</code> objects are immutable.</em></p>\n\n<p>Well, now you could say, <em>what if someone overrides the functionality of <code>String</code> class?</em> That's the reason that <strong>the <code>String</code> class is marked <code>final</code></strong> so that nobody can override the behavior of its methods.</p>\n", "title": "String is immutable. What exactly is the meaning?", "answer_id": 17942294, "link": "http://stackoverflow.com/questions/8798403/string-is-immutable-what-exactly-is-the-meaning/17942294#17942294", "tags": ["java", "string", "immutability"]}, {"body": "<pre><code>String S1=\"abc\";\nS1.concat(\"xyz\");\nSystem.out.println(\"S1 is\", + S1);\nString S2=S1.concat(\"def\");\nSystem.out.println(\"S2 is\", + S2);\n</code></pre>\n\n<p>This shows that once a string object is create it cannot be changed. EveryTime you need to create new and put in another String. S</p>\n", "title": "String is immutable. What exactly is the meaning?", "answer_id": 18779669, "link": "http://stackoverflow.com/questions/8798403/string-is-immutable-what-exactly-is-the-meaning/18779669#18779669", "tags": ["java", "string", "immutability"]}, {"body": "<p>I think the following code clears the difference:</p>\n\n<pre><code>String A = new String(\"Venugopal\");\nString B = A;\n\nA = A +\"mitul\";\n\nSystem.out.println(\"A is \" + A);\nSystem.out.println(\"B is \" + B);\n\nStringBuffer SA = new StringBuffer(\"Venugopal\");\nStringBuffer SB = SA;\n\nSA = SA.append(\"mitul\");\n\nSystem.out.println(\"SA is \" + SA);\nSystem.out.println(\"SB is \" + SB);\n</code></pre>\n", "title": "String is immutable. What exactly is the meaning?", "answer_id": 19985047, "link": "http://stackoverflow.com/questions/8798403/string-is-immutable-what-exactly-is-the-meaning/19985047#19985047", "tags": ["java", "string", "immutability"]}, {"body": "<p>Hope the below code would clarify your doubts :</p>\n\n<pre><code>public static void testString() {\n    String str = \"Hello\";\n    System.out.println(\"Before String Concat: \"+str);\n    str.concat(\"World\");\n    System.out.println(\"After String Concat: \"+str);\n    StringBuffer sb = new StringBuffer(\"Hello\");\n    System.out.println(\"Before StringBuffer Append: \"+sb);\n    sb.append(\"World\");\n    System.out.println(\"After StringBuffer Append: \"+sb);\n}\n</code></pre>\n\n<p>Before String Concat: Hello<br>\nAfter  String Concat: Hello<br>\nBefore StringBuffer Append: Hello<br>\nAfter StringBuffer Append: HelloWorld</p>\n", "title": "String is immutable. What exactly is the meaning?", "answer_id": 22602798, "link": "http://stackoverflow.com/questions/8798403/string-is-immutable-what-exactly-is-the-meaning/22602798#22602798", "tags": ["java", "string", "immutability"]}, {"body": "<p>Java <code>String</code> is immutable, <code>String</code> will Store the value in the form of object. so if u assign the value <code>String a=\"a\";</code> it will create an object and the value is stored in that and again if you are assigning value <code>a=\"ty\"</code> means it will create an another object store the value in that, if you want to understand clearly, check the <code>has code</code> for the <code>String</code>.</p>\n", "title": "String is immutable. What exactly is the meaning?", "answer_id": 23148898, "link": "http://stackoverflow.com/questions/8798403/string-is-immutable-what-exactly-is-the-meaning/23148898#23148898", "tags": ["java", "string", "immutability"]}, {"body": "<p>String  is immutable meant  that the content of the String Object can't be changeable</p>\n\n<p>if you want to modify the content use StringBuffer instead of String which is mutable</p>\n", "title": "String is immutable. What exactly is the meaning?", "answer_id": 24550671, "link": "http://stackoverflow.com/questions/8798403/string-is-immutable-what-exactly-is-the-meaning/24550671#24550671", "tags": ["java", "string", "immutability"]}, {"body": "<p>see here </p>\n\n<pre><code>class ImmutableStrings {\n\n    public static void main(String[] args) {\n        testmethod();\n    }\n\n    private static void testmethod() {\n    String a=\"a\";\n    System.out.println(\"a 1--&gt;\"+a);\n    System.out.println(\"a 1 address--&gt;\"+a.hashCode());\n\n    a = \"ty\";\n    System.out.println(\"a 2--&gt;\"+a);\n\n       System.out.println(\"a 2 address--&gt;\"+a.hashCode());\n    }\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>a 1--&gt;a\na 1 address--&gt;97\na 2--&gt;ty\na 2 address--&gt;3717\n</code></pre>\n\n<p>This indicates that whenever you are modifying the content of immutable string object <code>a</code> a new object will be created. i.e you are not allowed to change the content of immutable object. that's why the address are different for both the object.</p>\n", "title": "String is immutable. What exactly is the meaning?", "answer_id": 26098790, "link": "http://stackoverflow.com/questions/8798403/string-is-immutable-what-exactly-is-the-meaning/26098790#26098790", "tags": ["java", "string", "immutability"]}, {"body": "<p>Probably every answer provided above is right, but my answer is specific to use of <code>hashCode()</code> method, to prove the points like, String... once created can't be modified and modifications will results in new value at different memory location.</p>\n\n<pre><code>public class ImmutabilityTest {\n\n    private String changingRef = \"TEST_STRING\";\n\n    public static void main(String a[]) {\n\n        ImmutabilityTest dn = new ImmutabilityTest();\n\n        System.out.println(\"ChangingRef for TEST_STRING OLD : \"\n                + dn.changingRef.hashCode());\n\n        dn.changingRef = \"NEW_TEST_STRING\";\n        System.out.println(\"ChangingRef for NEW_TEST_STRING : \"\n                + dn.changingRef.hashCode());\n\n        dn.changingRef = \"TEST_STRING\";\n        System.out.println(\"ChangingRef for TEST_STRING BACK : \"\n                + dn.changingRef.hashCode());\n\n        dn.changingRef = \"NEW_TEST_STRING\";\n        System.out.println(\"ChangingRef for NEW_TEST_STRING BACK : \"\n                + dn.changingRef.hashCode());\n\n        String str = new String(\"STRING1\");\n        System.out.println(\"String Class STRING1 : \" + str.hashCode());\n\n        str = new String(\"STRING2\");\n        System.out.println(\"String Class STRING2 : \" + str.hashCode());\n\n        str = new String(\"STRING1\");\n        System.out.println(\"String Class STRING1 BACK : \" + str.hashCode());\n\n        str = new String(\"STRING2\");\n        System.out.println(\"String Class STRING2 BACK : \" + str.hashCode());\n\n    }\n}\n</code></pre>\n\n<h1>OUTPUT</h1>\n\n<pre><code>ChangingRef for TEST_STRING OLD : 247540830\nChangingRef for NEW_TEST_STRING : 970356767\nChangingRef for TEST_STRING BACK : 247540830\nChangingRef for NEW_TEST_STRING BACK : 970356767\nString Class STRING1 : -1163776448\nString Class STRING2 : -1163776447\nString Class STRING1 BACK : -1163776448\nString Class STRING2 BACK : -1163776447\n</code></pre>\n", "title": "String is immutable. What exactly is the meaning?", "answer_id": 27733088, "link": "http://stackoverflow.com/questions/8798403/string-is-immutable-what-exactly-is-the-meaning/27733088#27733088", "tags": ["java", "string", "immutability"]}], "question_id": 8798403}, {"body": "<p>Trying to remove all letters and characters that are not 0-9 and a period.  Im using Character.isDigit() but it also removes decimal, how can I also keep the decimal.</p>\n", "tags": ["java", "string", "character", "decimal"], "title": "Java String remove all non numeric characters", "answer_count": 5, "creation_date": 1335709526, "score": 99, "link": "http://stackoverflow.com/questions/10372862/java-string-remove-all-non-numeric-characters", "answers": [{"body": "<p>Try this code:</p>\n\n<pre><code>String str = \"a12.334tyz.78x\";\nstr = str.replaceAll(\"[^\\\\d.]\", \"\");\n</code></pre>\n\n<p>Now <code>str</code> will contain <code>\"12.334.78\"</code>.</p>\n", "title": "Java String remove all non numeric characters", "answer_id": 10372905, "link": "http://stackoverflow.com/questions/10372862/java-string-remove-all-non-numeric-characters/10372905#10372905", "tags": ["java", "string", "character", "decimal"]}, {"body": "<p>I would use a regex.</p>\n\n<pre><code>String text = \"-jaskdh2367sd.27askjdfh23\";\nString digits = text.replaceAll(\"[^0-9.]\", \"\");\nSystem.out.println(digits);\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>2367.2723\n</code></pre>\n\n<p>You might like to keep <code>-</code> as well for negative numbers.</p>\n", "title": "Java String remove all non numeric characters", "answer_id": 10372914, "link": "http://stackoverflow.com/questions/10372862/java-string-remove-all-non-numeric-characters/10372914#10372914", "tags": ["java", "string", "character", "decimal"]}, {"body": "<p>With guava:</p>\n\n<pre><code>String input = \"abx123.5\";\nString result = CharMatcher.inRange('0', '9').or(CharMatcher.is('.')).retainFrom(input);\n</code></pre>\n\n<p>see <a href=\"http://code.google.com/p/guava-libraries/wiki/StringsExplained\">http://code.google.com/p/guava-libraries/wiki/StringsExplained</a></p>\n", "title": "Java String remove all non numeric characters", "answer_id": 10372933, "link": "http://stackoverflow.com/questions/10372862/java-string-remove-all-non-numeric-characters/10372933#10372933", "tags": ["java", "string", "character", "decimal"]}, {"body": "<pre><code>String phoneNumberstr = \"Tel: 00971-557890-999\";\nString numberRefined = phoneNumberstr.replaceAll(\"[^\\\\d-]\", \"\");\n</code></pre>\n\n<p>result: 0097-557890-999</p>\n\n<p>if you also do not need \"-\" in String you can do like this:</p>\n\n<pre><code>String phoneNumberstr = \"Tel: 00971-55 7890 999\";      \nString numberRefined = phoneNumberstr.replaceAll(\"[^0-9]\", \"\");\n</code></pre>\n\n<p>result: 0097557890999</p>\n", "title": "Java String remove all non numeric characters", "answer_id": 28696359, "link": "http://stackoverflow.com/questions/10372862/java-string-remove-all-non-numeric-characters/28696359#28696359", "tags": ["java", "string", "character", "decimal"]}, {"body": "<p><strong>Simple way without using Regex:</strong></p>\n\n<p>Adding an extra character check for dot <code>'.'</code> will solve the requirement:</p>\n\n<pre><code>public static String getOnlyNumerics(String str) {\n    if (str == null) {\n        return null;\n    }\n    StringBuffer strBuff = new StringBuffer();\n    char c;\n    for (int i = 0; i &lt; str.length() ; i++) {\n        c = str.charAt(i);\n        if (Character.isDigit(c) || c == '.') {\n            strBuff.append(c);\n        }\n    }\n    return strBuff.toString();\n}\n</code></pre>\n", "title": "Java String remove all non numeric characters", "answer_id": 37437464, "link": "http://stackoverflow.com/questions/10372862/java-string-remove-all-non-numeric-characters/37437464#37437464", "tags": ["java", "string", "character", "decimal"]}], "question_id": 10372862}, {"body": "<p>The Java official documentation states:</p>\n\n<p>The string <code>\"boo:and:foo\"</code>, for example, yields the following results with these expressions \nRegex   Result\n:   </p>\n\n<pre><code>{ \"boo\", \"and\", \"foo\" }\"\n</code></pre>\n\n<p>And that's the way I need it to work. However, if I run this:</p>\n\n<pre><code>public static void main(String[] args){\n        String test = \"A|B|C||D\";\n\n        String[] result = test.split(\"|\");\n\n        for(String s : result){\n            System.out.println(\"&gt;\"+s+\"&lt;\");\n        }\n    }\n</code></pre>\n\n<p>it prints:</p>\n\n<pre><code>&gt;&lt;\n&gt;A&lt;\n&gt;|&lt;\n&gt;B&lt;\n&gt;|&lt;\n&gt;C&lt;\n&gt;|&lt;\n&gt;|&lt;\n&gt;D&lt;\n</code></pre>\n\n<p>Which is far from what I would expect:</p>\n\n<pre><code>&gt;A&lt;\n&gt;B&lt;\n&gt;C&lt;\n&gt;&lt;\n&gt;D&lt;\n</code></pre>\n\n<p>Why is this happening?</p>\n\n<p>Thanks in advance</p>\n", "tags": ["java", "regex", "string"], "title": "Splitting a Java String by the pipe symbol using split(&quot;|&quot;)", "answer_count": 5, "creation_date": 1338282602, "score": 99, "link": "http://stackoverflow.com/questions/10796160/splitting-a-java-string-by-the-pipe-symbol-using-split", "answers": [{"body": "<p>You need </p>\n\n<pre><code>test.split(\"\\\\|\");\n</code></pre>\n\n<p><code>split</code> uses regular expression and in <em>regex</em> <code>|</code> is metacharacter representing <code>OR</code> operator. You need to escape that character using <code>\\</code> (written in String as <code>\"\\\\\"</code> since <code>\\</code> is also metacharacter in String literals and require another <code>\\</code> to escape it).</p>\n\n<p>You can also use </p>\n\n<pre><code>test.split(Pattern.quote(\"|\"));\n</code></pre>\n\n<p>and let <code>Pattern.quote</code> create escaped version of regex representing <code>|</code>.</p>\n", "title": "Splitting a Java String by the pipe symbol using split(&quot;|&quot;)", "answer_id": 10796174, "link": "http://stackoverflow.com/questions/10796160/splitting-a-java-string-by-the-pipe-symbol-using-split/10796174#10796174", "tags": ["java", "regex", "string"]}, {"body": "<p>the split() method takes a regular expression as an argument</p>\n", "title": "Splitting a Java String by the pipe symbol using split(&quot;|&quot;)", "answer_id": 18333369, "link": "http://stackoverflow.com/questions/10796160/splitting-a-java-string-by-the-pipe-symbol-using-split/18333369#18333369", "tags": ["java", "regex", "string"]}, {"body": "<p>Use proper escaping: <code>string.split(\"\\\\|\")</code></p>\n\n<p>Or the helper <code>Regexp.quote()</code> which has been created for exactly this purpose: </p>\n\n<pre><code>string.split(Regexp.quote(\"|\"))\n</code></pre>\n\n<p>which works with arbitrary input strings. Very useful when you need to quote / escape user input.</p>\n", "title": "Splitting a Java String by the pipe symbol using split(&quot;|&quot;)", "answer_id": 21025279, "link": "http://stackoverflow.com/questions/10796160/splitting-a-java-string-by-the-pipe-symbol-using-split/21025279#21025279", "tags": ["java", "regex", "string"]}, {"body": "<p>You could also use the apache library and do this:</p>\n\n<pre><code>StringUtils.split(test, \"|\");\n</code></pre>\n", "title": "Splitting a Java String by the pipe symbol using split(&quot;|&quot;)", "answer_id": 33983509, "link": "http://stackoverflow.com/questions/10796160/splitting-a-java-string-by-the-pipe-symbol-using-split/33983509#33983509", "tags": ["java", "regex", "string"]}, {"body": "<p>Use this code:</p>\n\n<pre><code>public static void main(String[] args) {\n    String test = \"A|B|C||D\";\n\n    String[] result = test.split(\"\\\\|\");\n\n    for (String s : result) {\n        System.out.println(\"&gt;\" + s + \"&lt;\");\n    }\n}\n</code></pre>\n", "title": "Splitting a Java String by the pipe symbol using split(&quot;|&quot;)", "answer_id": 39266797, "link": "http://stackoverflow.com/questions/10796160/splitting-a-java-string-by-the-pipe-symbol-using-split/39266797#39266797", "tags": ["java", "regex", "string"]}], "question_id": 10796160}, {"body": "<p>A standard spring web application (created by Roo or \"Spring MVC Project\" Template) create a web.xml with <code>ContextLoaderListener</code> and <code>DispatcherServlet</code>. <strong>Why do they not only use the <code>DispatcherServlet</code> and make it to load the complete configuration?</strong></p>\n\n<p>I understand that the ContextLoaderListener should be used to load the stuff that is not web relevant and the DispatcherServlet is used to load the web relevant stuff (Controllers,...). And this result in two contexts: a parent and a child context.</p>\n\n<p>Background:</p>\n\n<p>I was doing it this standard way for several years.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;context-param&gt;\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;classpath*:META-INF/spring/applicationContext*.xml&lt;/param-value&gt;\n&lt;/context-param&gt;\n\n&lt;!-- Creates the Spring Container shared by all Servlets and Filters --&gt;\n&lt;listener&gt;\n    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n\n&lt;!-- Handles Spring requests --&gt;\n&lt;servlet&gt;\n    &lt;servlet-name&gt;roo&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;WEB-INF/spring/webmvc-config.xml&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n</code></pre>\n\n<p>This often caused problems with the two contexts and the dependencies between them. In the past I was always able to find a solution, and I have the strong feeling that this makes the software structure/architecture always better. But now I am facing a <a href=\"http://stackoverflow.com/questions/8534222/how-to-bridge-spring-application-context-events-to-an-other-context\">problem with the events of the both contexts</a>. </p>\n\n<p>-- However this makes my rethink this two context pattern, and I am asking myself: why should I bring myself into this trouble, why not loading all spring configuration files with one <code>DispatcherServlet</code> and removing the <code>ContextLoaderListener</code> completely. (I still will to have different configuration files, but only one context.)</p>\n\n<p>Is there any reason not to remove the <code>ContextLoaderListener</code>?</p>\n", "tags": ["java", "spring", "servlets", "dependency-injection"], "title": "ContextLoaderListener or not?", "answer_count": 3, "creation_date": 1327570547, "score": 99, "link": "http://stackoverflow.com/questions/9016122/contextloaderlistener-or-not", "answers": [{"body": "<p>In your case, no, there's no reason to keep the <code>ContextLoaderListener</code> and <code>applicationContext.xml</code>. If your app works fine with just the servlet's context, that stick with that, it's simpler.</p>\n\n<p>Yes, the generally-encouraged pattern is to keep non-web stuff in the webapp-level context, but it's nothing more than a weak convention.</p>\n\n<p>The only compelling reasons to use the webapp-level context are:</p>\n\n<ul>\n<li>If you have multiple <code>DispatcherServlet</code> that need to share services</li>\n<li>If you have legacy/non-Spring servlets that need access to Spring-wired services</li>\n<li>If you have servlet filters that hook into the webapp-level context (e.g. Spring Security's <code>DelegatingFilterProxy</code>, <code>OpenEntityManagerInViewFilter</code>, etc)</li>\n</ul>\n\n<p>None of these apply to you, so the extra complexity is unwarranted.</p>\n\n<p>Just be careful when adding background tasks to the servlet's context, like scheduled tasks, JMS connections, etc. If you forget to add <code>&lt;load-on-startup&gt;</code> to your <code>web.xml</code>, then these tasks won't be started until the first access of the servlet.</p>\n", "title": "ContextLoaderListener or not?", "answer_id": 9016202, "link": "http://stackoverflow.com/questions/9016122/contextloaderlistener-or-not/9016202#9016202", "tags": ["java", "spring", "servlets", "dependency-injection"]}, {"body": "<p>I want to share what I've done on my Spring-MVC application:</p>\n\n<ol>\n<li><p>On the <code>we-mvc-config.xml</code> I added just the classes annotated with @Controller:</p>\n\n<pre><code>&lt;context:component-scan base-package=\"com.shunra.vcat\"&gt;\n    &lt;context:include-filter expression=\"org.springframework.stereotype.Controller\" type=\"annotation\"/&gt;\n&lt;/context:component-scan&gt;\n</code></pre></li>\n<li><p>On the <code>applicationContext.xml</code> files I added all the rest:</p>\n\n<pre><code>&lt;context:component-scan base-package=\"com.shunra.vcat\"&gt;\n    &lt;context:exclude-filter expression=\"org.springframework.stereotype.Controller\" type=\"annotation\"/&gt;\n&lt;/context:component-scan&gt;\n</code></pre></li>\n</ol>\n", "title": "ContextLoaderListener or not?", "answer_id": 14032213, "link": "http://stackoverflow.com/questions/9016122/contextloaderlistener-or-not/14032213#14032213", "tags": ["java", "spring", "servlets", "dependency-injection"]}, {"body": "<p>You can configure the application context the other way around as well. E.g. in order to make the <strong>OpenEntityManagerInViewFilter</strong> work. Setup the <strong>ContextLoaderListener</strong> and then configure your DispatcherServlet with:</p>\n\n<pre><code>&lt;servlet&gt;\n    &lt;servlet-name&gt;spring-mvc&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;&lt;/param-value&gt;\n    &lt;/init-param&gt;\n&lt;/servlet&gt;\n</code></pre>\n\n<p>Just make sure that the <strong>contextConfigLocation</strong> parameter value is empty.</p>\n", "title": "ContextLoaderListener or not?", "answer_id": 20253173, "link": "http://stackoverflow.com/questions/9016122/contextloaderlistener-or-not/20253173#20253173", "tags": ["java", "spring", "servlets", "dependency-injection"]}], "question_id": 9016122}, {"body": "<p>I'm trying to display a text using the code below.\nThe problem is that the text is not centered horizontally.\nWhen I set the coordinates for <code>drawText</code>, it sets the bottom of the text at this position. I would like the text to be drawn so that the text is centered also horizontally.</p>\n\n<p>This is a picture to display my problem further:</p>\n\n<p><a href=\"http://i.stack.imgur.com/vEJNb.png\"><img src=\"http://i.stack.imgur.com/vEJNbm.png\" alt=\"Screenshot\"></a></p>\n\n<pre><code>@Override\nprotected void onDraw(Canvas canvas) {\n    // TODO Auto-generated method stub\n    super.onDraw(canvas);\n    //canvas.drawRGB(2, 2, 200);\n    Paint textPaint = new Paint();\n    textPaint.setARGB(200, 254, 0, 0);\n    textPaint.setTextAlign(Align.CENTER);\n    textPaint.setTypeface(font);\n    textPaint.setTextSize(300);\n    canvas.drawText(\"Hello\", canvas.getWidth()/2, canvas.getHeight()/2  , textPaint);\n}\n</code></pre>\n", "tags": ["java", "android", "android-activity", "android-canvas", "drawtext"], "title": "Android Center text on canvas", "answer_count": 6, "creation_date": 1340197995, "score": 98, "link": "http://stackoverflow.com/questions/11120392/android-center-text-on-canvas", "answers": [{"body": "<p>Try the following:</p>\n\n<pre><code> int xPos = (canvas.getWidth() / 2);\n int yPos = (int) ((canvas.getHeight() / 2) - ((textPaint.descent() + textPaint.ascent()) / 2)) ; \n //((textPaint.descent() + textPaint.ascent()) / 2) is the distance from the baseline to the center.\n\n canvas.drawText(\"Hello\", xPos, yPos, textPaint);\n</code></pre>\n", "title": "Android Center text on canvas", "answer_id": 11121873, "link": "http://stackoverflow.com/questions/11120392/android-center-text-on-canvas/11121873#11121873", "tags": ["java", "android", "android-activity", "android-canvas", "drawtext"]}, {"body": "<p>Align vertically is difficult because text descent and ascent happened, lots of guys used <strong>Paint.getTextBounds()</strong> to retrieve the TextWidth and TextHeight, but it doesn't make the text center very much. Here we can use <strong>Paint.measureText()</strong> to calculate the TextWidth, the TextHeight we simply do subtracting with descent and ascent, then we got the most approach TextSize, the following work is fairly easy for each other.</p>\n\n<pre><code>// the Paint instance(should be assign as a field of class).\nPaint mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);\nmPaint.setTextSize(getResources().getDimension(R.dimen.btn_textsize));\n\n// the display area.\nRect areaRect = new Rect(0, 0, 240, 60);\n\n// draw the background style (pure color or image)\nmPaint.setColor(Color.BLACK);\nyourCanvas.drawRect(areaRect, mPaint);\n\nString pageTitle = \"\u6587\u5b57\u5c0f\u8bf4\";\n\nRectF bounds = new RectF(areaRect);\n// measure text width\nbounds.right = mPaint.measureText(pageTitle, 0, pageTitle.length());\n// measure text height\nbounds.bottom = mPaint.descent() - mPaint.ascent();\n\nbounds.left += (areaRect.width() - bounds.right) / 2.0f;\nbounds.top += (areaRect.height() - bounds.bottom) / 2.0f;\n\nmPaint.setColor(Color.WHITE);\nyourCanvas.drawText(pageTitle, bounds.left, bounds.top - mPaint.ascent(), mPaint);\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/68eYh.png\" alt=\"screen shot by the code\"></p>\n\n<p>By the way, we highly recommend use <strong>RectF</strong> rather than <strong>Rect</strong> because the positions need more accurate values, in my experience, RectF done the top&amp;bottom deviation just one pixel on xhdpi device, Rect would be two more.</p>\n", "title": "Android Center text on canvas", "answer_id": 21951682, "link": "http://stackoverflow.com/questions/11120392/android-center-text-on-canvas/21951682#21951682", "tags": ["java", "android", "android-activity", "android-canvas", "drawtext"]}, {"body": "<p>I find that the best solution for centering text is as follows:</p>\n\n<pre><code>textPaint.setTextAlign(Paint.Align.CENTER);\n//textPaint is the Paint object being used to draw the text (it must be initialized beforehand)\nfloat textY=center.y;\nfloat textX=center.x; \n// in this case, center.x and center.y represent the coordinates of the center of the rectangle in which the text is being placed\ncanvas.drawText(text,textX,textY,textPaint);    `\n</code></pre>\n", "title": "Android Center text on canvas", "answer_id": 31186520, "link": "http://stackoverflow.com/questions/11120392/android-center-text-on-canvas/31186520#31186520", "tags": ["java", "android", "android-activity", "android-canvas", "drawtext"]}, {"body": "<p>Center with <strong>Paint.getTextBounds()</strong>:</p>\n\n<p><a href=\"http://i.stack.imgur.com/WVwFw.png\"><img src=\"http://i.stack.imgur.com/WVwFw.png\" alt=\"enter image description here\"></a></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>private Rect r = new Rect();\n\nprivate void drawCenter(Canvas canvas, Paint paint, String text) {\n    canvas.getClipBounds(r);\n    int cHeight = r.height();\n    int cWidth = r.width();\n    paint.setTextAlign(Paint.Align.LEFT);\n    paint.getTextBounds(text, 0, text.length(), r);\n    float x = cWidth / 2f - r.width() / 2f - r.left;\n    float y = cHeight / 2f + r.height() / 2f - r.bottom;\n    canvas.drawText(text, x, y, paint);\n}\n</code></pre>\n\n<ul>\n<li><p><strong>Paint.Align.CENTER</strong> doesn't mean that the reference point of the text is vertically centered. The reference point is always on the baseline. So, why not use <strong>Paint.Align.LEFT</strong>? You have to calculate the reference point anyway.</p></li>\n<li><p><strong>Paint.descent()</strong> has the disadvantage, that it doesn't consider the real text. <strong>Paint.descent()</strong> retrieves the same value, regardless of whether the text contains letters with descents or not. That's why I use <strong>r.bottom</strong> instead.</p></li>\n<li><p>I have had some <a href=\"http://stackoverflow.com/questions/32106170/get-size-of-canvas-before-api-16\">problems</a> with <strong>Canvas.getHeight()</strong> if API &lt; 16. That's why I use <strong>Canvas.getClipBounds(Rect)</strong> instead. (Do not use <strong>Canvas.getClipBounds().getHeight()</strong> as it allocates memory for a <strong>Rect</strong>.)</p></li>\n<li><p>For reasons of performance, you should allocate objects before they are used in <strong>onDraw()</strong>. As <strong>drawCenter()</strong> will be called within <strong>onDraw()</strong> the object <strong>Rect r</strong> is preallocated as a field here. </p></li>\n</ul>\n\n<hr>\n\n<p>I tried to put the code of the two top answers into my own code (August 2015) and made a screenshot to compare the results:</p>\n\n<p><a href=\"http://i.stack.imgur.com/VsiQc.png\"><img src=\"http://i.stack.imgur.com/VsiQc.png\" alt=\"text centered three versions\"></a></p>\n\n<p>The text should be centered within the red filled rectangle. My code produces the white text, the other two codes produces altogether the gray text (they are actually the same, overlapping). The gray text is a little bit too low and two much on the right.</p>\n\n<p>This is how I made the test:</p>\n\n<pre><code>import android.app.Activity;\nimport android.content.Context;\nimport android.content.pm.ActivityInfo;\nimport android.graphics.Canvas;\nimport android.graphics.Color;\nimport android.graphics.Paint;\nimport android.graphics.Rect;\nimport android.graphics.RectF;\nimport android.graphics.Typeface;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.FrameLayout;\n\nclass MyView extends View {\n\n    private static String LABEL = \"long\";\n    private static float TEXT_HEIGHT_RATIO = 0.82f;\n\n    private FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(0, 0);\n    private Rect r = new Rect();\n    private Paint paint = new Paint();\n    private Paint rectPaint = new Paint();\n\n    public MyView(Context context) {\n        super(context);\n    }\n\n    private void drawTextBounds(Canvas canvas, Rect rect, int x, int y) {\n        rectPaint.setColor(Color.rgb(0, 0, 0));\n        rectPaint.setStyle(Paint.Style.STROKE);\n        rectPaint.setStrokeWidth(3f);\n        rect.offset(x, y);\n        canvas.drawRect(rect, rectPaint);\n    }\n\n    // andreas1724 (white color):\n    private void draw1(Canvas canvas, Paint paint, String text) {\n        paint.setTextAlign(Paint.Align.LEFT);\n        paint.setColor(Color.rgb(255, 255, 255));\n        canvas.getClipBounds(r);\n        int cHeight = r.height();\n        int cWidth = r.width();\n        paint.getTextBounds(text, 0, text.length(), r);\n        float x = cWidth / 2f - r.width() / 2f - r.left;\n        float y = cHeight / 2f + r.height() / 2f - r.bottom;\n        canvas.drawText(text, x, y, paint);\n        drawTextBounds(canvas, r, (int) x, (int) y);\n    }\n\n    // Arun George (light green color):\n    private void draw2(Canvas canvas, Paint textPaint, String text) {\n        textPaint.setTextAlign(Paint.Align.CENTER);\n        textPaint.setColor(Color.argb(100, 0, 255, 0));\n        int xPos = (canvas.getWidth() / 2);\n        int yPos = (int) ((canvas.getHeight() / 2) - ((textPaint.descent() + textPaint.ascent()) / 2));\n        canvas.drawText(text, xPos, yPos, textPaint);\n    }\n\n    // VinceStyling (light blue color):\n    private void draw3(Canvas yourCanvas, Paint mPaint, String pageTitle) {\n        mPaint.setTextAlign(Paint.Align.LEFT);\n        mPaint.setColor(Color.argb(100, 0, 0, 255));\n        r = yourCanvas.getClipBounds();\n        RectF bounds = new RectF(r);\n        bounds.right = mPaint.measureText(pageTitle, 0, pageTitle.length());\n        bounds.bottom = mPaint.descent() - mPaint.ascent();\n        bounds.left += (r.width() - bounds.right) / 2.0f;\n        bounds.top += (r.height() - bounds.bottom) / 2.0f;\n        yourCanvas.drawText(pageTitle, bounds.left, bounds.top - mPaint.ascent(), mPaint);\n    }\n\n    @Override\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\n        super.onSizeChanged(w, h, oldw, oldh);\n        int margin = 10;\n        int width = w - 2 * margin;\n        int height = h - 2 * margin;\n        params.width = width;\n        params.height = height;\n        params.leftMargin = margin;\n        params.topMargin = margin;\n        setLayoutParams(params);\n        paint.setTextSize(height * TEXT_HEIGHT_RATIO);\n        paint.setAntiAlias(true);\n        paint.setTypeface(Typeface.create(Typeface.SERIF, Typeface.BOLD_ITALIC));\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n        canvas.drawColor(Color.rgb(255, 0, 0));\n        draw1(canvas, paint, LABEL);\n        draw2(canvas, paint, LABEL);\n        draw3(canvas, paint, LABEL);\n    }\n}\n\npublic class MainActivity extends Activity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setRequestedOrientation (ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);\n        FrameLayout container = new FrameLayout(this);\n        container.setLayoutParams(new ViewGroup.LayoutParams(\n                ViewGroup.LayoutParams.MATCH_PARENT,\n                ViewGroup.LayoutParams.MATCH_PARENT));\n        container.addView(new MyView(this));\n        setContentView(container);\n    }\n}\n</code></pre>\n", "title": "Android Center text on canvas", "answer_id": 32081250, "link": "http://stackoverflow.com/questions/11120392/android-center-text-on-canvas/32081250#32081250", "tags": ["java", "android", "android-activity", "android-canvas", "drawtext"]}, {"body": "<p>I create a method to simplify this:</p>\n\n<pre><code>    public static void drawCenterText(String text, RectF rectF, Canvas canvas, Paint paint) {\n    Paint.Align align = paint.getTextAlign();\n    float x;\n    float y;\n    //x\n    if (align == Paint.Align.LEFT) {\n        x = rectF.centerX() - paint.measureText(text) / 2;\n    } else if (align == Paint.Align.CENTER) {\n        x = rectF.centerX();\n    } else {\n        x = rectF.centerX() + paint.measureText(text) / 2;\n    }\n    //y\n    metrics = paint.getFontMetrics();\n    float acent = Math.abs(metrics.ascent);\n    float descent = Math.abs(metrics.descent);\n    y = rectF.centerY() + (acent - descent) / 2f;\n    canvas.drawText(text, x, y, paint);\n\n    Log.e(\"ghui\", \"top:\" + metrics.top + \",ascent:\" + metrics.ascent\n            + \",dscent:\" + metrics.descent + \",leading:\" + metrics.leading + \",bottom\" + metrics.bottom);\n}\n</code></pre>\n\n<p>rectF is the area you want draw the text,That's it.\n<a href=\"http://ghui.me/post/2015/10/draw_center_text/\" rel=\"nofollow\">Details</a></p>\n", "title": "Android Center text on canvas", "answer_id": 33198654, "link": "http://stackoverflow.com/questions/11120392/android-center-text-on-canvas/33198654#33198654", "tags": ["java", "android", "android-activity", "android-canvas", "drawtext"]}, {"body": "<p>Your code is drawing the center of the baseline of the text, at the center of the view.  In order to center the text at some point, x, y, you need to calculate the center of the text, and put <em>that</em> at the point.</p>\n\n<p>This method will draw text centered at the point x, y.  If you pass it the center of your view, it will draw the text centered.</p>\n\n<pre><code>private void drawTextCentered(String text, int x, int y, Paint paint, Canvas canvas) {\n    int xPos = x - (int)(paint.measureText(text)/2);\n    int yPos = (int) (y - ((textPaint.descent() + textPaint.ascent()) / 2)) ;\n\n    canvas.drawText(text, xPos, yPos, textPaint);\n}\n</code></pre>\n", "title": "Android Center text on canvas", "answer_id": 38415380, "link": "http://stackoverflow.com/questions/11120392/android-center-text-on-canvas/38415380#38415380", "tags": ["java", "android", "android-activity", "android-canvas", "drawtext"]}], "question_id": 11120392}, {"body": "<p>In my app I want to save a copy of a certain file with a different name (which I get from user)</p>\n\n<p>Do I really need to open the contents of the file and write it to another file?</p>\n\n<p>What is the best way to do so?</p>\n", "tags": ["java", "android"], "title": "How to make a copy of a file in android?", "answer_count": 6, "creation_date": 1329307185, "score": 97, "link": "http://stackoverflow.com/questions/9292954/how-to-make-a-copy-of-a-file-in-android", "answers": [{"body": "<p>To copy a file and save it to your destination path you can use the method below.</p>\n\n<pre><code>public void copy(File src, File dst) throws IOException {\n    InputStream in = new FileInputStream(src);\n    OutputStream out = new FileOutputStream(dst);\n\n    // Transfer bytes from in to out\n    byte[] buf = new byte[1024];\n    int len;\n    while ((len = in.read(buf)) &gt; 0) {\n        out.write(buf, 0, len);\n    }\n    in.close();\n    out.close();\n}\n</code></pre>\n", "title": "How to make a copy of a file in android?", "answer_id": 9293885, "link": "http://stackoverflow.com/questions/9292954/how-to-make-a-copy-of-a-file-in-android/9293885#9293885", "tags": ["java", "android"]}, {"body": "<p>Alternatively, you can use <a href=\"https://developer.android.com/reference/java/nio/channels/FileChannel.html\">FileChannel</a> to copy a file. It <em>might</em> be faster than the byte copy method when copying a large file. <a href=\"https://stackoverflow.com/questions/8076472/filechannel-map-integer-max-value-limit-error\" title=\"FileChannel.map Integer.MAX_VALUE limit error\">You can't use it if your file is bigger than 2GB though.</a></p>\n\n<pre><code>public void copy(File src, File dst) throws IOException {\n    FileInputStream inStream = new FileInputStream(src);\n    FileOutputStream outStream = new FileOutputStream(dst);\n    FileChannel inChannel = inStream.getChannel();\n    FileChannel outChannel = outStream.getChannel();\n    inChannel.transferTo(0, inChannel.size(), outChannel);\n    inStream.close();\n    outStream.close();\n}\n</code></pre>\n", "title": "How to make a copy of a file in android?", "answer_id": 21286928, "link": "http://stackoverflow.com/questions/9292954/how-to-make-a-copy-of-a-file-in-android/21286928#21286928", "tags": ["java", "android"]}, {"body": "<p>Here is a solution that actually closes the input/output streams if an error occurs while copying. This solution utilizes apache Commons IO IOUtils methods for both copying and handling the closing of streams.</p>\n\n<pre><code>    public void copyFile(File src, File dst)  {\n        InputStream in = null;\n        OutputStream out = null;\n        try {\n            in = new FileInputStream(src);\n            out = new FileOutputStream(dst);\n            IOUtils.copy(in, out);\n        } catch (IOException ioe) {\n            Log.e(LOGTAG, \"IOException occurred.\", ioe);\n        } finally {\n            IOUtils.closeQuietly(out);\n            IOUtils.closeQuietly(in);\n        }\n    }\n</code></pre>\n", "title": "How to make a copy of a file in android?", "answer_id": 27723053, "link": "http://stackoverflow.com/questions/9292954/how-to-make-a-copy-of-a-file-in-android/27723053#27723053", "tags": ["java", "android"]}, {"body": "<p>These worked nice for me</p>\n\n<pre><code>public static void copyFileOrDirectory(String srcDir, String dstDir) {\n\n    try {\n        File src = new File(srcDir);\n        File dst = new File(dstDir, src.getName());\n\n        if (src.isDirectory()) {\n\n            String files[] = src.list();\n            int filesLength = files.length;\n            for (int i = 0; i &lt; filesLength; i++) {\n                String src1 = (new File(src, files[i]).getPath());\n                String dst1 = dst.getPath();\n                copyFileOrDirectory(src1, dst1);\n\n            }\n        } else {\n            copyFile(src, dst);\n        }\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n\npublic static void copyFile(File sourceFile, File destFile) throws IOException {\n    if (!destFile.getParentFile().exists())\n        destFile.getParentFile().mkdirs();\n\n    if (!destFile.exists()) {\n        destFile.createNewFile();\n    }\n\n    FileChannel source = null;\n    FileChannel destination = null;\n\n    try {\n        source = new FileInputStream(sourceFile).getChannel();\n        destination = new FileOutputStream(destFile).getChannel();\n        destination.transferFrom(source, 0, source.size());\n    } finally {\n        if (source != null) {\n            source.close();\n        }\n        if (destination != null) {\n            destination.close();\n        }\n    }\n}\n</code></pre>\n", "title": "How to make a copy of a file in android?", "answer_id": 29685580, "link": "http://stackoverflow.com/questions/9292954/how-to-make-a-copy-of-a-file-in-android/29685580#29685580", "tags": ["java", "android"]}, {"body": "<p>It might be too late for an answer but the most convenient way is using </p>\n\n<p><code>FileUtils</code>'s</p>\n\n<p><code>static void copyFile(File srcFile, File destFile)</code></p>\n\n<p>e.g. this is what I did</p>\n\n<p>`</p>\n\n<pre><code>private String copy(String original, int copyNumber){\n    String copy_path = path + \"_copy\" + copyNumber;\n        try {\n            FileUtils.copyFile(new File(path), new File(copy_path));\n            return copy_path;\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n</code></pre>\n\n<p>`</p>\n", "title": "How to make a copy of a file in android?", "answer_id": 30948757, "link": "http://stackoverflow.com/questions/9292954/how-to-make-a-copy-of-a-file-in-android/30948757#30948757", "tags": ["java", "android"]}, {"body": "<p>If you have root permission you can copy using below code:</p>\n\n<pre><code>void copyFile_dd(){\n    try {           \n        Process su;\n\n        su = Runtime.getRuntime().exec(\"su\");\n\n        String cmd = \"dd if=/mnt/sdcard/test.dat of=/mnt/sdcard/test1.dat \\n\"+ \"exit\\n\";\n        su.getOutputStream().write(cmd.getBytes());\n\n        if ((su.waitFor() != 0)) {\n            throw new SecurityException();\n        }\n\n    } catch (Exception e) {\n        e.printStackTrace();\n        //throw new SecurityException();\n    }\n}\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>void copyFile_cat(){\n    try {           \n        Process su;\n\n        su = Runtime.getRuntime().exec(\"su\");\n\n        String cmd = \"cat /mnt/sdcard/test.dat &gt; /mnt/sdcard/test2.dat \\n\"+ \"exit\\n\";\n        su.getOutputStream().write(cmd.getBytes());\n\n        if ((su.waitFor() != 0)) {\n            throw new SecurityException();\n        }\n\n    } catch (Exception e) {\n        e.printStackTrace();\n        //throw new SecurityException();\n    }\n}\n</code></pre>\n", "title": "How to make a copy of a file in android?", "answer_id": 38243111, "link": "http://stackoverflow.com/questions/9292954/how-to-make-a-copy-of-a-file-in-android/38243111#38243111", "tags": ["java", "android"]}], "question_id": 9292954}, {"body": "<p>So since Eclipse juno is based on 4.2 instead of 3.7, what is the easiest way to upgrade to it, short of installing a separate copy of juno and re-installing all my existing plugins from 3.7 into it?</p>\n\n<p>There doesnt seem to be a straightforward upgrade path mentioned on eclipse.org.</p>\n", "tags": ["java", "eclipse"], "title": "Easiest way to upgrade eclipse 3.7 to 4.2 (Juno)", "answer_count": 4, "creation_date": 1340979317, "score": 96, "link": "http://stackoverflow.com/questions/11263423/easiest-way-to-upgrade-eclipse-3-7-to-4-2-juno", "answers": [{"body": "<p>Eclipse can barely update from 3.7.1 to 3.7.2, never mind from 3.7 to 4.2.</p>\n\n<p>You're taking the life of your development environment in your hands if you try to make that much of an upgrade to an existing Eclipse development environment.  I don't know about you, but my development environment is too important to risk upgrading.</p>\n\n<p><strong>Always</strong> create a new Eclipse directory and new Eclipse workspaces when you want to change your development environment.</p>\n\n<p>Unzip Eclipse 4.2 to a new directory, and add your plug-ins one at a time.  You can use Bananeweizen's method to copy the Eclipse 3.7 plug-ins, or you can add them manually.  It's probably a good idea to see if the plug-ins you use have been upgraded for Eclipse 4.2.</p>\n\n<p>Create a new Eclipse 4.2 workspace, and copy your project code from your Eclipse 3.7 workspace.  If you discover a problem later, you can fall back to Eclipse 3.7 and your Eclipse 3.7 workspaces.  </p>\n\n<p>When you have an Eclipse 4.2 environment that works, zip it back up and keep the zip file so you can restore your Eclipse 4.2 environment in the event your Eclipse gets corrupted.  </p>\n\n<p><strong>Never ever think of changing your working environment.</strong></p>\n", "title": "Easiest way to upgrade eclipse 3.7 to 4.2 (Juno)", "answer_id": 11264210, "link": "http://stackoverflow.com/questions/11263423/easiest-way-to-upgrade-eclipse-3-7-to-4-2-juno/11264210#11264210", "tags": ["java", "eclipse"]}, {"body": "<p>Download the <strong>platform runtime</strong> binary from <a href=\"http://download.eclipse.org/eclipse/downloads/drops4/R-4.2-201206081400/\">http://download.eclipse.org/eclipse/downloads/drops4/R-4.2-201206081400/</a>. That is basically an \"Eclipse without plugins\". Run it (on a fresh workspace), select <strong>File -> Import -> Installation -> From existing Installation</strong> and point the wizard to your existing 3.7 directory. Check \"Install latest versions\", hit finish.</p>\n\n<p>That will install the latest versions of the plugins found in your 3.7 installation into your 4.2 installation. Sadly most people don't know this feature and install each plugin manually when upgrading.</p>\n\n<p>Bonus anwser: With the same wizard you can also export the list of installed features into a file that you can share with colleagues, so you have all installed the same plugins.</p>\n", "title": "Easiest way to upgrade eclipse 3.7 to 4.2 (Juno)", "answer_id": 11264964, "link": "http://stackoverflow.com/questions/11263423/easiest-way-to-upgrade-eclipse-3-7-to-4-2-juno/11264964#11264964", "tags": ["java", "eclipse"]}, {"body": "<p>i just added <a href=\"http://download.eclipse.org/releases/juno/\">http://download.eclipse.org/releases/juno/</a> to Window -> Pref -> Install/Update -> Available Software Sites</p>\n\n<p>after that you can update your software at Help -> check for updates</p>\n\n<p>seems to work fine for me</p>\n", "title": "Easiest way to upgrade eclipse 3.7 to 4.2 (Juno)", "answer_id": 14925208, "link": "http://stackoverflow.com/questions/11263423/easiest-way-to-upgrade-eclipse-3-7-to-4-2-juno/14925208#14925208", "tags": ["java", "eclipse"]}, {"body": "<p>Took me 2 minutes to migrate (longest part is the download ;)):</p>\n\n<ul>\n<li><p>Download the last release of eclipse : <a href=\"http://download.eclipse.org/eclipse/downloads/\">http://download.eclipse.org/eclipse/downloads/</a></p></li>\n<li><p>Extract the archive, launch the new version and select your existing workspace</p></li>\n<li><p>From the menu File -> Import </p>\n\n<ul>\n<li><p>Select Install/From existing installation</p></li>\n<li><p>It will let you choose which extension you want to keep (still compatible)</p></li>\n</ul></li>\n</ul>\n\n<p>Note: I tested this manipulation from an Eclipse 4.2 to 4.3. I'm adding this answer because I think this solution is fast, easy and safe compared to the other answer. </p>\n", "title": "Easiest way to upgrade eclipse 3.7 to 4.2 (Juno)", "answer_id": 18120071, "link": "http://stackoverflow.com/questions/11263423/easiest-way-to-upgrade-eclipse-3-7-to-4-2-juno/18120071#18120071", "tags": ["java", "eclipse"]}], "question_id": 11263423}, {"body": "<p>You can set the initial size for an ArrayList by doing</p>\n\n<pre><code>ArrayList&lt;Integer&gt; arr=new ArrayList&lt;Integer&gt;(10);\n</code></pre>\n\n<p>However, you can't do</p>\n\n<pre><code>arr.add(5, 10);\n</code></pre>\n\n<p>because it causes an out of bounds exception.</p>\n\n<p>What is the use of setting an initial size if you can't access the space you allocated?</p>\n\n<p>The add function is defined as <code>add(int index, Object element)</code> so I am not adding to index 10.</p>\n", "tags": ["java", "arraylist", "indexoutofboundsexception"], "title": "Initial size for the ArrayList", "answer_count": 11, "creation_date": 1326812161, "score": 96, "link": "http://stackoverflow.com/questions/8896758/initial-size-for-the-arraylist", "answers": [{"body": "<p>10 is the initial capacity of the AL, not the size (which is 0). You should mention the initial capacity to some high value when you are going to have a lots of elements, because it avoids the overhead of expanding the capacity as you keep adding elements.</p>\n", "title": "Initial size for the ArrayList", "answer_id": 8896795, "link": "http://stackoverflow.com/questions/8896758/initial-size-for-the-arraylist/8896795#8896795", "tags": ["java", "arraylist", "indexoutofboundsexception"]}, {"body": "<p>You're confusing the size of the array list with its capacity:</p>\n\n<ul>\n<li>the <strong>size</strong> is the number of elements in the list;</li>\n<li>the <strong>capacity</strong> is how many elements the list can potentially accommodate without reallocating its internal structures.</li>\n</ul>\n\n<p>When you call <code>new ArrayList&lt;Integer&gt;(10)</code>, you are setting the list's initial <em>capacity</em>, not its size. In other words, when constructed in this manner, the array list starts its life empty.</p>\n\n<p>One way to add ten elements to the array list is by using a loop:</p>\n\n<pre><code>for (int i = 0; i &lt; 10; i++) {\n  arr.add(0);\n}\n</code></pre>\n\n<p>Having done this, you can now modify elements at indices 0..9.</p>\n", "title": "Initial size for the ArrayList", "answer_id": 8896824, "link": "http://stackoverflow.com/questions/8896758/initial-size-for-the-arraylist/8896824#8896824", "tags": ["java", "arraylist", "indexoutofboundsexception"]}, {"body": "<p>Right now there are no elements in your list so you cannot add to index 5 of the list when it does not exist. You are confusing the capacity of the list with its current size. </p>\n\n<p>Just call:</p>\n\n<pre><code>arr.add(10)\n</code></pre>\n\n<p>to add the Integer to your ArrayList</p>\n", "title": "Initial size for the ArrayList", "answer_id": 8896860, "link": "http://stackoverflow.com/questions/8896758/initial-size-for-the-arraylist/8896860#8896860", "tags": ["java", "arraylist", "indexoutofboundsexception"]}, {"body": "<p><strong>Capacity</strong> of an <code>ArrayList</code> isn't the same as its <strong>size</strong>. <strong>Size</strong> is equal to the number of elements contained in the <code>ArrayList</code> (and any other <code>List</code> implementation).</p>\n\n<p>The <strong>capacity</strong> is just the length of the underlying array which is used to internaly store the elements of the <code>ArrayList</code>, and is always greater or equal to the <strong>size</strong> of the list.</p>\n\n<p>When calling <code>set(index, element)</code> on the list, the <code>index</code> relates to the actual number of the list elements (=size) (which is zero in your code, therefore the <code>AIOOBE</code> is thrown), not to the array length (=capacity) (which is an implementation detail specific to the <code>ArrayList</code>).</p>\n\n<p>The <code>set</code> method is common to all <code>List</code> implementations, such as <code>LinkedList</code>, which isn't actually implemented by an array, but as a linked chain of entries.</p>\n\n<p><strong>Edit</strong>: You actually use the <code>add(index, element)</code> method, not <code>set(index, element)</code>, but the principle is the same here.</p>\n", "title": "Initial size for the ArrayList", "answer_id": 8896940, "link": "http://stackoverflow.com/questions/8896758/initial-size-for-the-arraylist/8896940#8896940", "tags": ["java", "arraylist", "indexoutofboundsexception"]}, {"body": "<p>I guess an exact answer to your question would be:</p>\n\n<p>Setting an intial size on an ArrayList reduces the nr. of times internal memory re-allocation has to occur.\nThe list is backed by an array. If you specify i.e. initial capacity 0, already at the first insertion of an element the internal array would have to be resized.\nIf you have an approximate idea of how many elements your list would hold, setting the initial capacity would reduce the nr. of memory re-allocations happening while you use the list.</p>\n", "title": "Initial size for the ArrayList", "answer_id": 8897021, "link": "http://stackoverflow.com/questions/8896758/initial-size-for-the-arraylist/8897021#8897021", "tags": ["java", "arraylist", "indexoutofboundsexception"]}, {"body": "<p>Although your arraylist has a capacity of 10, the real list has no elements here. The add method is used to insert a element to the real list. Since it has no elements, you can't insert an element to the index of 5.</p>\n", "title": "Initial size for the ArrayList", "answer_id": 21696044, "link": "http://stackoverflow.com/questions/8896758/initial-size-for-the-arraylist/21696044#21696044", "tags": ["java", "arraylist", "indexoutofboundsexception"]}, {"body": "<p>If you want a list with a predefined size you can also use:</p>\n\n<pre><code>List&lt;Integer&gt; arr = Arrays.asList(new Integer[10]);\n</code></pre>\n", "title": "Initial size for the ArrayList", "answer_id": 23586315, "link": "http://stackoverflow.com/questions/8896758/initial-size-for-the-arraylist/23586315#23586315", "tags": ["java", "arraylist", "indexoutofboundsexception"]}, {"body": "<p>If you want to add the elements with index, you could instead use an array.</p>\n\n<pre><code>    String [] test = new String[length];\n    test[0] = \"add\";\n</code></pre>\n", "title": "Initial size for the ArrayList", "answer_id": 25288064, "link": "http://stackoverflow.com/questions/8896758/initial-size-for-the-arraylist/25288064#25288064", "tags": ["java", "arraylist", "indexoutofboundsexception"]}, {"body": "<p>If you want to add 10 items to your <code>ArrayList</code> you may try that:</p>\n\n<pre><code>for (int i = 0; i &lt; 10; i++)\n    arr.add(i);\n</code></pre>\n\n<p>If you have already declare an array size variable you would use the variable <code>size</code> instead of number '10'</p>\n", "title": "Initial size for the ArrayList", "answer_id": 26323928, "link": "http://stackoverflow.com/questions/8896758/initial-size-for-the-arraylist/26323928#26323928", "tags": ["java", "arraylist", "indexoutofboundsexception"]}, {"body": "<p>ArrayList myList = new ArrayList(10);</p>\n\n<pre><code>//  myList.add(3, \"DDD\");\n//  myList.add(9, \"III\");\n    myList.add(0, \"AAA\");\n    myList.add(1, \"BBB\");\n\n    for(String item:myList){\n        System.out.println(\"inside list : \"+item);\n    }\n</code></pre>\n\n<p>/*Declare the initial capasity of arraylist is nothing but saving shifting time in internally; when we add the element internally it check the capasity to increase the capasity, you could add the element at 0 index initially then 1 and so on. */</p>\n", "title": "Initial size for the ArrayList", "answer_id": 28989021, "link": "http://stackoverflow.com/questions/8896758/initial-size-for-the-arraylist/28989021#28989021", "tags": ["java", "arraylist", "indexoutofboundsexception"]}, {"body": "<p>if you want to use Collections.fill(list, obj); in order to fill the list with a repeated object alternatively you can use</p>\n\n<pre><code>ArrayList&lt;Integer&gt; arr=new ArrayList&lt;Integer&gt;(Collections.nCopies(10, 0));\n</code></pre>\n\n<p>the line copies 10 times 0 in to your ArrayList</p>\n", "title": "Initial size for the ArrayList", "answer_id": 36518805, "link": "http://stackoverflow.com/questions/8896758/initial-size-for-the-arraylist/36518805#36518805", "tags": ["java", "arraylist", "indexoutofboundsexception"]}], "question_id": 8896758}, {"body": "<p>In Java, what would the fastest way to iterate over all the chars in a String, this:</p>\n\n<pre><code>String str = \"a really, really long string\";\nfor (int i = 0, n = str.length(); i &lt; n; i++) {\n    char c = str.charAt(i);\n}\n</code></pre>\n\n<p>Or this:</p>\n\n<pre><code>char[] chars = str.toCharArray();\nfor (int i = 0, n = chars.length; i &lt; n; i++) {\n    char c = chars[i];\n}\n</code></pre>\n\n<p><strong>EDIT :</strong></p>\n\n<p>What I'd like to know is if the cost of repeatedly calling the <code>charAt</code> method during a long iteration ends up being either less than or greater than the cost of performing a single call to <code>toCharArray</code> at the beginning and then directly accessing the array during the iteration.</p>\n\n<p>It'd be great if someone could provide a robust benchmark for different string lengths, having in mind JIT warm-up time, JVM start-up time, etc. and not just the difference between two calls to <code>System.currentTimeMillis()</code>.</p>\n", "tags": ["java", "string", "performance", "char", "iteration"], "title": "Fastest way to iterate over all the chars in a String", "answer_count": 8, "creation_date": 1326801733, "score": 94, "link": "http://stackoverflow.com/questions/8894258/fastest-way-to-iterate-over-all-the-chars-in-a-string", "answers": [{"body": "<p>The first one using <code>str.charAt</code> should be faster.</p>\n\n<p>If you dig inside the source code of <code>String</code> class, we can see that <code>charAt</code> is implemented as follows:</p>\n\n<pre><code>public char charAt(int index) {\n    if ((index &lt; 0) || (index &gt;= count)) {\n        throw new StringIndexOutOfBoundsException(index);\n    }\n    return value[index + offset];\n}\n</code></pre>\n\n<p>Here, all it does is index an array and return the value.</p>\n\n<p>Now, if we see the implementation of <code>toCharArray</code>, we will find the below:</p>\n\n<pre><code>public char[] toCharArray() {\n    char result[] = new char[count];\n    getChars(0, count, result, 0);\n    return result;\n}\n\npublic void getChars(int srcBegin, int srcEnd, char dst[], int dstBegin) {\n    if (srcBegin &lt; 0) {\n        throw new StringIndexOutOfBoundsException(srcBegin);\n    }\n    if (srcEnd &gt; count) {\n        throw new StringIndexOutOfBoundsException(srcEnd);\n    }\n    if (srcBegin &gt; srcEnd) {\n        throw new StringIndexOutOfBoundsException(srcEnd - srcBegin);\n    }\n    System.arraycopy(value, offset + srcBegin, dst, dstBegin,\n         srcEnd - srcBegin);\n}\n</code></pre>\n\n<p>As you see, it is doing a <code>System.arraycopy</code> which is definitely going to be a tad slower than not doing it.</p>\n", "title": "Fastest way to iterate over all the chars in a String", "answer_id": 8894348, "link": "http://stackoverflow.com/questions/8894258/fastest-way-to-iterate-over-all-the-chars-in-a-string/8894348#8894348", "tags": ["java", "string", "performance", "char", "iteration"]}, {"body": "<p>I'm pretty sure that the first one will be faster.</p>\n\n<p>In the second one, you added another operation to cast the string into char... You lost a couple of time here...</p>\n", "title": "Fastest way to iterate over all the chars in a String", "answer_id": 8894352, "link": "http://stackoverflow.com/questions/8894258/fastest-way-to-iterate-over-all-the-chars-in-a-string/8894352#8894352", "tags": ["java", "string", "performance", "char", "iteration"]}, {"body": "<p>The second one causes a new char array to be created, and all chars from the String to be copied to this new char array, so I would guess that the first one is faster (and less memory-hungry).</p>\n", "title": "Fastest way to iterate over all the chars in a String", "answer_id": 8894354, "link": "http://stackoverflow.com/questions/8894258/fastest-way-to-iterate-over-all-the-chars-in-a-string/8894354#8894354", "tags": ["java", "string", "performance", "char", "iteration"]}, {"body": "<p>Looks like niether is faster or slower</p>\n\n<pre><code>    public static void main(String arguments[]) {\n\n\n        //Build a long string\n        StringBuilder sb = new StringBuilder();\n        for(int j = 0; j &lt; 10000; j++) {\n            sb.append(\"a really, really long string\");\n        }\n        String str = sb.toString();\n        for (int testscount = 0; testscount &lt; 10; testscount ++) {\n\n\n            //Test 1\n            long start = System.currentTimeMillis();\n            for(int c = 0; c &lt; 10000000; c++) {\n                for (int i = 0, n = str.length(); i &lt; n; i++) {\n                    char chr = str.charAt(i);\n                    doSomethingWithChar(chr);//To trick JIT optimistaion\n                }\n            }\n\n            System.out.println(\"1: \" + (System.currentTimeMillis() - start));\n\n            //Test 2\n            start = System.currentTimeMillis();\n            char[] chars = str.toCharArray();\n            for(int c = 0; c &lt; 10000000; c++) {\n                for (int i = 0, n = chars.length; i &lt; n; i++) {\n                    char chr = chars[i];\n                    doSomethingWithChar(chr);//To trick JIT optimistaion\n                }\n            }\n            System.out.println(\"2: \" + (System.currentTimeMillis() - start));\n            System.out.println();\n        }\n\n\n    }\n\n\n    public static void doSomethingWithChar(char chr) {\n        int newInt = chr &lt;&lt; 2;\n    }\n</code></pre>\n\n<p>For long strings I'll chose the first one. Why copy around long strings?\nDocumentations says:</p>\n\n<blockquote>\n  <p>public char[] toCharArray()\n  Converts this string to a new character array. </p>\n  \n  <p>Returns:\n  a newly allocated character array whose length is the length of this string and whose contents are initialized to contain the character sequence represented by this string.</p>\n</blockquote>\n\n<p><strong>//Edit 1</strong> </p>\n\n<p>I've changed the test to trick JIT optimisation.</p>\n\n<p><strong>//Edit 2</strong></p>\n\n<p>Repeat test 10 times to let JVM warm up.</p>\n\n<p><strong>//Edit 3</strong></p>\n\n<p>Conclusions:</p>\n\n<p>First of all <code>str.toCharArray();</code> copies entire string in memory. It can be memory consuming for long strings. Method <code>String.charAt( )</code> looks up char in char array inside String class checking index before.\nIt looks like for short enough Strings first method (i.e. <code>chatAt</code> method) is a bit slower due to this index check. But if the String is long enough, copying whole char array gets slower, and the first method is faster. The longer the string is, the slower <code>toCharArray</code> performs. Try to change limit in <code>for(int j = 0; j &lt; 10000; j++)</code> loop to see it.\nIf we let JVM warm up code runs faster, but proportions are the same.</p>\n\n<p>After all it's just micro-optimisation.</p>\n", "title": "Fastest way to iterate over all the chars in a String", "answer_id": 8894356, "link": "http://stackoverflow.com/questions/8894258/fastest-way-to-iterate-over-all-the-chars-in-a-string/8894356#8894356", "tags": ["java", "string", "performance", "char", "iteration"]}, {"body": "<p>This is just micro-optimisation that you shouldn't worry about.</p>\n\n<pre><code>char[] chars = str.toCharArray();\n</code></pre>\n\n<p>returns you a copy of <code>str</code> character arrays (in JDK, it returns a copy of characters by calling <code>System.arrayCopy</code>).</p>\n\n<p>Other than that, <code>str.charAt()</code> only checks if the index is indeed in bounds and returns a character within the array index.</p>\n\n<p>The first one doesn't create additional memory in JVM.</p>\n", "title": "Fastest way to iterate over all the chars in a String", "answer_id": 8894384, "link": "http://stackoverflow.com/questions/8894258/fastest-way-to-iterate-over-all-the-chars-in-a-string/8894384#8894384", "tags": ["java", "string", "performance", "char", "iteration"]}, {"body": "<p>UPDATE: Before you try this ever in a production environment (not advised), read this first: <a href=\"http://www.javaspecialists.eu/archive/Issue237.html\">http://www.javaspecialists.eu/archive/Issue237.html</a>\nStarting from Java 9, the solution as described won't work anymore, because now Java will store strings as byte[] by default.</p>\n\n<p>It all depends on the length of the <code>String</code> being inspected. If, as the question says, it is for <strong>long</strong> strings, the fastest way to inspect the string is to use reflection to access the backing <code>char[]</code> of the string.</p>\n\n<p>A fully randomized benchmark with JDK 8 (win32 and win64) on an 64 AMD Phenom II 4 core 955 @ 3.2 GHZ (in both client mode and server mode) with 9 different techniques (see below!) shows that using <code>String.charAt(n)</code> is the fastest for small strings and that using <code>reflection</code> to access the String backing array is almost twice as fast for large strings.</p>\n\n<h1>THE EXPERIMENT</h1>\n\n<ul>\n<li><p>9 different optimization techniques are tried.</p></li>\n<li><p>All string contents are randomized</p></li>\n<li><p>The test are done for string sizes in multiples of two starting with 0,1,2,4,8,16 etc.</p></li>\n<li><p>The tests are done 1,000 times per string size</p></li>\n<li><p>The tests are shuffled into random order each time. In other words, the tests are done in random order every time they are done, over 1000 times over.</p></li>\n<li><p>The entire test suite is done forwards, and backwards, to show the effect of JVM warmup on optimization and times.</p></li>\n<li><p>The entire suite is done twice, once in <code>-client</code> mode and the other in <code>-server</code> mode.</p></li>\n</ul>\n\n<h1>CONCLUSIONS</h1>\n\n<h2>-client mode (32 bit)</h2>\n\n<p>For strings <strong>1 to 256 characters in length</strong>, calling <code>string.charAt(i)</code> wins with an average processing of 13.4 million to 588 million characters per second.</p>\n\n<p>Also, it is overall 5.5% faster (client) and 13.9% (server) like this:</p>\n\n<pre><code>    for (int i = 0; i &lt; data.length(); i++) {\n        if (data.charAt(i) &lt;= ' ') {\n            doThrow();\n        }\n    }\n</code></pre>\n\n<p>than like this with a local final length variable:</p>\n\n<pre><code>    final int len = data.length();\n    for (int i = 0; i &lt; len; i++) {\n        if (data.charAt(i) &lt;= ' ') {\n            doThrow();\n        }\n    }\n</code></pre>\n\n<p>For long strings, <strong>512 to 256K characters length</strong>, using reflection to access the String's backing array is fastest. <strong>This technique is almost twice as fast</strong> as String.charAt(i) (178% faster). The average speed over this range was 1.111 billion characters per second.</p>\n\n<p>The Field must be obtained ahead of time and then it can be re-used in the library on different strings. Interestingly, unlike the code above, with Field access, it is 9% faster to have a local final length variable than to use 'chars.length' in the loop check. Here is how Field access can be setup as fastest:</p>\n\n<pre><code>   final Field field = String.class.getDeclaredField(\"value\");\n   field.setAccessible(true);\n\n   try {\n       final char[] chars = (char[]) field.get(data);\n       final int len = chars.length;\n       for (int i = 0; i &lt; len; i++) {\n           if (chars[i] &lt;= ' ') {\n               doThrow();\n           }\n       }\n       return len;\n   } catch (Exception ex) {\n       throw new RuntimeException(ex);\n   }\n</code></pre>\n\n<h2>Special comments on -server mode</h2>\n\n<p>Field access starting winning after 32 character length strings in server mode on a 64 bit Java machine on my AMD 64 machine. That was not seen until 512 characters length in client mode.</p>\n\n<p>Also worth noting I think, when I was running JDK 8 (32 bit build) in server mode, the overall performance was 7% slower for both large and small strings. This was with build 121 Dec 2013 of JDK 8 early release. So, for now, it seems that 32 bit server mode is slower than 32 bit client mode.</p>\n\n<p>That being said ... it seems the only server mode that is worth invoking is on a 64 bit machine. Otherwise it actually hampers performance.</p>\n\n<p>For 32 bit build running in <code>-server mode</code> on an AMD64, I can say this:</p>\n\n<ol>\n<li>String.charAt(i) is the clear winner overall. Although between sizes 8 to 512 characters there were winners among 'new' 'reuse' and 'field'.</li>\n<li>String.charAt(i) is 45% faster in client mode</li>\n<li>Field access is twice as fast for large Strings in client mode.</li>\n</ol>\n\n<p>Also worth saying, String.chars() (Stream and the parallel version) are a bust. Way slower than any other way. The <code>Streams</code> API is a rather slow way to perform general string operations. </p>\n\n<h2>Wish List</h2>\n\n<p>Java String could have predicate accepting optimized methods such as contains(predicate), forEach(consumer), forEachWithIndex(consumer). Thus, without the need for the user to know the length or repeat calls to String methods, these could help parsing libraries <code>beep-beep beep</code> speedup.</p>\n\n<p>Keep dreaming :)</p>\n\n<p>Happy Strings!</p>\n\n<p>~SH</p>\n\n<h2>The test used the following 9 methods of testing the string for the presence of whitespace:</h2>\n\n<p>\"charAt1\" -- CHECK THE STRING CONTENTS THE USUAL WAY:</p>\n\n<pre><code>int charAtMethod1(final String data) {\n    final int len = data.length();\n    for (int i = 0; i &lt; len; i++) {\n        if (data.charAt(i) &lt;= ' ') {\n            doThrow();\n        }\n    }\n    return len;\n}\n</code></pre>\n\n<p>\"charAt2\" -- SAME AS ABOVE BUT USE String.length() INSTEAD OF MAKING A FINAL LOCAL int FOR THE LENGTh</p>\n\n<pre><code>int charAtMethod2(final String data) {\n    for (int i = 0; i &lt; data.length(); i++) {\n        if (data.charAt(i) &lt;= ' ') {\n            doThrow();\n        }\n    }\n    return data.length();\n}\n</code></pre>\n\n<p>\"stream\" -- USE THE NEW JAVA-8 String's IntStream AND PASS IT A PREDICATE TO DO THE CHECKING</p>\n\n<pre><code>int streamMethod(final String data, final IntPredicate predicate) {\n    if (data.chars().anyMatch(predicate)) {\n        doThrow();\n    }\n    return data.length();\n}\n</code></pre>\n\n<p>\"streamPara\" -- SAME AS ABOVE, BUT OH-LA-LA - GO PARALLEL!!!</p>\n\n<pre><code>// avoid this at all costs\nint streamParallelMethod(final String data, IntPredicate predicate) {\n    if (data.chars().parallel().anyMatch(predicate)) {\n        doThrow();\n    }\n    return data.length();\n}\n</code></pre>\n\n<p>\"reuse\" -- REFILL A REUSABLE char[] WITH THE STRINGS CONTENTS</p>\n\n<pre><code>int reuseBuffMethod(final char[] reusable, final String data) {\n    final int len = data.length();\n    data.getChars(0, len, reusable, 0);\n    for (int i = 0; i &lt; len; i++) {\n        if (reusable[i] &lt;= ' ') {\n            doThrow();\n        }\n    }\n    return len;\n}\n</code></pre>\n\n<p>\"new1\" -- OBTAIN A NEW COPY OF THE char[] FROM THE STRING</p>\n\n<pre><code>int newMethod1(final String data) {\n    final int len = data.length();\n    final char[] copy = data.toCharArray();\n    for (int i = 0; i &lt; len; i++) {\n        if (copy[i] &lt;= ' ') {\n            doThrow();\n        }\n    }\n    return len;\n}\n</code></pre>\n\n<p>\"new2\" -- SAME AS ABOVE, BUT USE \"FOR-EACH\"</p>\n\n<pre><code>int newMethod2(final String data) {\n    for (final char c : data.toCharArray()) {\n        if (c &lt;= ' ') {\n            doThrow();\n        }\n    }\n    return data.length();\n}\n</code></pre>\n\n<p>\"field1\" -- FANCY!! OBTAIN FIELD FOR ACCESS TO THE STRING'S INTERNAL char[]</p>\n\n<pre><code>int fieldMethod1(final Field field, final String data) {\n    try {\n        final char[] chars = (char[]) field.get(data);\n        final int len = chars.length;\n        for (int i = 0; i &lt; len; i++) {\n            if (chars[i] &lt;= ' ') {\n                doThrow();\n            }\n        }\n        return len;\n    } catch (Exception ex) {\n        throw new RuntimeException(ex);\n    }\n}\n</code></pre>\n\n<p>\"field2\" -- SAME AS ABOVE, BUT USE \"FOR-EACH\"</p>\n\n<pre><code>int fieldMethod2(final Field field, final String data) {\n    final char[] chars;\n    try {\n        chars = (char[]) field.get(data);\n    } catch (Exception ex) {\n        throw new RuntimeException(ex);\n    }\n    for (final char c : chars) {\n        if (c &lt;= ' ') {\n            doThrow();\n        }\n    }\n    return chars.length;\n}\n</code></pre>\n\n<h1>COMPOSITE RESULTS FOR CLIENT <code>-client</code> MODE (forwards and backwards tests combined)</h1>\n\n<p>Note: that the -client mode with Java 32 bit and -server mode with Java 64 bit are the same as below on my AMD64 machine.</p>\n\n<pre><code>Size     WINNER  charAt1 charAt2  stream streamPar   reuse    new1    new2  field1  field2\n1        charAt    77.0     72.0   462.0     584.0   127.5    89.5    86.0   159.5   165.0\n2        charAt    38.0     36.5   284.0   32712.5    57.5    48.3    50.3    89.0    91.5\n4        charAt    19.5     18.5   458.6    3169.0    33.0    26.8    27.5    54.1    52.6\n8        charAt     9.8      9.9   100.5    1370.9    17.3    14.4    15.0    26.9    26.4\n16       charAt     6.1      6.5    73.4     857.0     8.4     8.2     8.3    13.6    13.5\n32       charAt     3.9      3.7    54.8     428.9     5.0     4.9     4.7     7.0     7.2\n64       charAt     2.7      2.6    48.2     232.9     3.0     3.2     3.3     3.9     4.0\n128      charAt     2.1      1.9    43.7     138.8     2.1     2.6     2.6     2.4     2.6\n256      charAt     1.9      1.6    42.4      90.6     1.7     2.1     2.1     1.7     1.8\n512      field1     1.7      1.4    40.6      60.5     1.4     1.9     1.9     1.3     1.4\n1,024    field1     1.6      1.4    40.0      45.6     1.2     1.9     2.1     1.0     1.2\n2,048    field1     1.6      1.3    40.0      36.2     1.2     1.8     1.7     0.9     1.1\n4,096    field1     1.6      1.3    39.7      32.6     1.2     1.8     1.7     0.9     1.0\n8,192    field1     1.6      1.3    39.6      30.5     1.2     1.8     1.7     0.9     1.0\n16,384   field1     1.6      1.3    39.8      28.4     1.2     1.8     1.7     0.8     1.0\n32,768   field1     1.6      1.3    40.0      26.7     1.3     1.8     1.7     0.8     1.0\n65,536   field1     1.6      1.3    39.8      26.3     1.3     1.8     1.7     0.8     1.0\n131,072  field1     1.6      1.3    40.1      25.4     1.4     1.9     1.8     0.8     1.0\n262,144  field1     1.6      1.3    39.6      25.2     1.5     1.9     1.9     0.8     1.0\n</code></pre>\n\n<h1>COMPOSITE RESULTS FOR SERVER <code>-server</code> MODE (forwards and backwards tests combined)</h1>\n\n<p>Note: this is the test for Java 32 bit running in server mode on an AMD64. The server mode for Java 64 bit was the same as Java 32 bit in client mode except that Field access starting winning after 32 characters size.</p>\n\n<pre><code>Size     WINNER  charAt1 charAt2  stream streamPar   reuse    new1    new2  field1  field2\n1        charAt     74.5    95.5   524.5     783.0    90.5   102.5    90.5   135.0   151.5\n2        charAt     48.5    53.0   305.0   30851.3    59.3    57.5    52.0    88.5    91.8\n4        charAt     28.8    32.1   132.8    2465.1    37.6    33.9    32.3    49.0    47.0\n8          new2     18.0    18.6    63.4    1541.3    18.5    17.9    17.6    25.4    25.8\n16         new2     14.0    14.7   129.4    1034.7    12.5    16.2    12.0    16.0    16.6\n32         new2      7.8     9.1    19.3     431.5     8.1     7.0     6.7     7.9     8.7\n64        reuse      6.1     7.5    11.7     204.7     3.5     3.9     4.3     4.2     4.1\n128       reuse      6.8     6.8     9.0     101.0     2.6     3.0     3.0     2.6     2.7\n256      field2      6.2     6.5     6.9      57.2     2.4     2.7     2.9     2.3     2.3\n512       reuse      4.3     4.9     5.8      28.2     2.0     2.6     2.6     2.1     2.1\n1,024    charAt      2.0     1.8     5.3      17.6     2.1     2.5     3.5     2.0     2.0\n2,048    charAt      1.9     1.7     5.2      11.9     2.2     3.0     2.6     2.0     2.0\n4,096    charAt      1.9     1.7     5.1       8.7     2.1     2.6     2.6     1.9     1.9\n8,192    charAt      1.9     1.7     5.1       7.6     2.2     2.5     2.6     1.9     1.9\n16,384   charAt      1.9     1.7     5.1       6.9     2.2     2.5     2.5     1.9     1.9\n32,768   charAt      1.9     1.7     5.1       6.1     2.2     2.5     2.5     1.9     1.9\n65,536   charAt      1.9     1.7     5.1       5.5     2.2     2.4     2.4     1.9     1.9\n131,072  charAt      1.9     1.7     5.1       5.4     2.3     2.5     2.5     1.9     1.9\n262,144  charAt      1.9     1.7     5.1       5.1     2.3     2.5     2.5     1.9     1.9\n</code></pre>\n\n<h1>FULL RUNNABLE PROGRAM CODE</h1>\n\n<p>(to test on Java 7 and earlier, remove the two streams tests)</p>\n\n<pre><code>import java.lang.reflect.Field;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Random;\nimport java.util.function.IntPredicate;\n\n/**\n * @author Saint Hill &lt;http://stackoverflow.com/users/1584255/saint-hill&gt;\n */\npublic final class TestStrings {\n\n    // we will not test strings longer than 512KM\n    final int MAX_STRING_SIZE = 1024 * 256;\n\n    // for each string size, we will do all the tests\n    // this many times\n    final int TRIES_PER_STRING_SIZE = 1000;\n\n    public static void main(String[] args) throws Exception {\n        new TestStrings().run();\n    }\n\n    void run() throws Exception {\n\n        // double the length of the data until it reaches MAX chars long\n        // 0,1,2,4,8,16,32,64,128,256 ... \n        final List&lt;Integer&gt; sizes = new ArrayList&lt;&gt;();\n        for (int n = 0; n &lt;= MAX_STRING_SIZE; n = (n == 0 ? 1 : n * 2)) {\n            sizes.add(n);\n        }\n\n        // CREATE RANDOM (FOR SHUFFLING ORDER OF TESTS)\n        final Random random = new Random();\n\n        System.out.println(\"Rate in nanoseconds per character inspected.\");\n        System.out.printf(\"==== FORWARDS (tries per size: %s) ==== \\n\", TRIES_PER_STRING_SIZE);\n\n        printHeadings(TRIES_PER_STRING_SIZE, random);\n\n        for (int size : sizes) {\n            reportResults(size, test(size, TRIES_PER_STRING_SIZE, random));\n        }\n\n        // reverse order or string sizes\n        Collections.reverse(sizes);\n\n        System.out.println(\"\");\n        System.out.println(\"Rate in nanoseconds per character inspected.\");\n        System.out.printf(\"==== BACKWARDS (tries per size: %s) ==== \\n\", TRIES_PER_STRING_SIZE);\n\n        printHeadings(TRIES_PER_STRING_SIZE, random);\n\n        for (int size : sizes) {\n            reportResults(size, test(size, TRIES_PER_STRING_SIZE, random));\n\n        }\n    }\n\n    ///\n    ///\n    ///  METHODS OF CHECKING THE CONTENTS\n    ///  OF A STRING. ALWAYS CHECKING FOR\n    ///  WHITESPACE (CHAR &lt;=' ')\n    ///  \n    ///\n    // CHECK THE STRING CONTENTS\n    int charAtMethod1(final String data) {\n        final int len = data.length();\n        for (int i = 0; i &lt; len; i++) {\n            if (data.charAt(i) &lt;= ' ') {\n                doThrow();\n            }\n        }\n        return len;\n    }\n\n    // SAME AS ABOVE BUT USE String.length()\n    // instead of making a new final local int \n    int charAtMethod2(final String data) {\n        for (int i = 0; i &lt; data.length(); i++) {\n            if (data.charAt(i) &lt;= ' ') {\n                doThrow();\n            }\n        }\n        return data.length();\n    }\n\n    // USE new Java-8 String's IntStream\n    // pass it a PREDICATE to do the checking\n    int streamMethod(final String data, final IntPredicate predicate) {\n        if (data.chars().anyMatch(predicate)) {\n            doThrow();\n        }\n        return data.length();\n    }\n\n    // OH LA LA - GO PARALLEL!!!\n    int streamParallelMethod(final String data, IntPredicate predicate) {\n        if (data.chars().parallel().anyMatch(predicate)) {\n            doThrow();\n        }\n        return data.length();\n    }\n\n    // Re-fill a resuable char[] with the contents\n    // of the String's char[]\n    int reuseBuffMethod(final char[] reusable, final String data) {\n        final int len = data.length();\n        data.getChars(0, len, reusable, 0);\n        for (int i = 0; i &lt; len; i++) {\n            if (reusable[i] &lt;= ' ') {\n                doThrow();\n            }\n        }\n        return len;\n    }\n\n    // Obtain a new copy of char[] from String\n    int newMethod1(final String data) {\n        final int len = data.length();\n        final char[] copy = data.toCharArray();\n        for (int i = 0; i &lt; len; i++) {\n            if (copy[i] &lt;= ' ') {\n                doThrow();\n            }\n        }\n        return len;\n    }\n\n    // Obtain a new copy of char[] from String\n    // but use FOR-EACH\n    int newMethod2(final String data) {\n        for (final char c : data.toCharArray()) {\n            if (c &lt;= ' ') {\n                doThrow();\n            }\n        }\n        return data.length();\n    }\n\n    // FANCY!\n    // OBTAIN FIELD FOR ACCESS TO THE STRING'S\n    // INTERNAL CHAR[]\n    int fieldMethod1(final Field field, final String data) {\n        try {\n            final char[] chars = (char[]) field.get(data);\n            final int len = chars.length;\n            for (int i = 0; i &lt; len; i++) {\n                if (chars[i] &lt;= ' ') {\n                    doThrow();\n                }\n            }\n            return len;\n        } catch (Exception ex) {\n            throw new RuntimeException(ex);\n        }\n    }\n\n    // same as above but use FOR-EACH\n    int fieldMethod2(final Field field, final String data) {\n        final char[] chars;\n        try {\n            chars = (char[]) field.get(data);\n        } catch (Exception ex) {\n            throw new RuntimeException(ex);\n        }\n        for (final char c : chars) {\n            if (c &lt;= ' ') {\n                doThrow();\n            }\n        }\n        return chars.length;\n    }\n\n    /**\n     *\n     * Make a list of tests. We will shuffle a copy of this list repeatedly\n     * while we repeat this test.\n     *\n     * @param data\n     * @return\n     */\n    List&lt;Jobber&gt; makeTests(String data) throws Exception {\n        // make a list of tests\n        final List&lt;Jobber&gt; tests = new ArrayList&lt;Jobber&gt;();\n\n        tests.add(new Jobber(\"charAt1\") {\n            int check() {\n                return charAtMethod1(data);\n            }\n        });\n\n        tests.add(new Jobber(\"charAt2\") {\n            int check() {\n                return charAtMethod2(data);\n            }\n        });\n\n        tests.add(new Jobber(\"stream\") {\n            final IntPredicate predicate = new IntPredicate() {\n                public boolean test(int value) {\n                    return value &lt;= ' ';\n                }\n            };\n\n            int check() {\n                return streamMethod(data, predicate);\n            }\n        });\n\n        tests.add(new Jobber(\"streamPar\") {\n            final IntPredicate predicate = new IntPredicate() {\n                public boolean test(int value) {\n                    return value &lt;= ' ';\n                }\n            };\n\n            int check() {\n                return streamParallelMethod(data, predicate);\n            }\n        });\n\n        // Reusable char[] method\n        tests.add(new Jobber(\"reuse\") {\n            final char[] cbuff = new char[MAX_STRING_SIZE];\n\n            int check() {\n                return reuseBuffMethod(cbuff, data);\n            }\n        });\n\n        // New char[] from String\n        tests.add(new Jobber(\"new1\") {\n            int check() {\n                return newMethod1(data);\n            }\n        });\n\n        // New char[] from String\n        tests.add(new Jobber(\"new2\") {\n            int check() {\n                return newMethod2(data);\n            }\n        });\n\n        // Use reflection for field access\n        tests.add(new Jobber(\"field1\") {\n            final Field field;\n\n            {\n                field = String.class.getDeclaredField(\"value\");\n                field.setAccessible(true);\n            }\n\n            int check() {\n                return fieldMethod1(field, data);\n            }\n        });\n\n        // Use reflection for field access\n        tests.add(new Jobber(\"field2\") {\n            final Field field;\n\n            {\n                field = String.class.getDeclaredField(\"value\");\n                field.setAccessible(true);\n            }\n\n            int check() {\n                return fieldMethod2(field, data);\n            }\n        });\n\n        return tests;\n    }\n\n    /**\n     * We use this class to keep track of test results\n     */\n    abstract class Jobber {\n\n        final String name;\n        long nanos;\n        long chars;\n        long runs;\n\n        Jobber(String name) {\n            this.name = name;\n        }\n\n        abstract int check();\n\n        final double nanosPerChar() {\n            double charsPerRun = chars / runs;\n            long nanosPerRun = nanos / runs;\n            return charsPerRun == 0 ? nanosPerRun : nanosPerRun / charsPerRun;\n        }\n\n        final void run() {\n            runs++;\n            long time = System.nanoTime();\n            chars += check();\n            nanos += System.nanoTime() - time;\n        }\n    }\n\n    // MAKE A TEST STRING OF RANDOM CHARACTERS A-Z\n    private String makeTestString(int testSize, char start, char end) {\n        Random r = new Random();\n        char[] data = new char[testSize];\n        for (int i = 0; i &lt; data.length; i++) {\n            data[i] = (char) (start + r.nextInt(end));\n        }\n        return new String(data);\n    }\n\n    // WE DO THIS IF WE FIND AN ILLEGAL CHARACTER IN THE STRING\n    public void doThrow() {\n        throw new RuntimeException(\"Bzzzt -- Illegal Character!!\");\n    }\n\n    /**\n     * 1. get random string of correct length 2. get tests (List&lt;Jobber&gt;) 3.\n     * perform tests repeatedly, shuffling each time\n     */\n    List&lt;Jobber&gt; test(int size, int tries, Random random) throws Exception {\n        String data = makeTestString(size, 'A', 'Z');\n        List&lt;Jobber&gt; tests = makeTests(data);\n        List&lt;Jobber&gt; copy = new ArrayList&lt;&gt;(tests);\n        while (tries-- &gt; 0) {\n            Collections.shuffle(copy, random);\n            for (Jobber ti : copy) {\n                ti.run();\n            }\n        }\n        // check to make sure all char counts the same\n        long runs = tests.get(0).runs;\n        long count = tests.get(0).chars;\n        for (Jobber ti : tests) {\n            if (ti.runs != runs &amp;&amp; ti.chars != count) {\n                throw new Exception(\"Char counts should match if all correct algorithms\");\n            }\n        }\n        return tests;\n    }\n\n    private void printHeadings(final int TRIES_PER_STRING_SIZE, final Random random) throws Exception {\n        System.out.print(\"  Size\");\n        for (Jobber ti : test(0, TRIES_PER_STRING_SIZE, random)) {\n            System.out.printf(\"%9s\", ti.name);\n        }\n        System.out.println(\"\");\n    }\n\n    private void reportResults(int size, List&lt;Jobber&gt; tests) {\n        System.out.printf(\"%6d\", size);\n        for (Jobber ti : tests) {\n            System.out.printf(\"%,9.2f\", ti.nanosPerChar());\n        }\n        System.out.println(\"\");\n    }\n}\n</code></pre>\n", "title": "Fastest way to iterate over all the chars in a String", "answer_id": 11876086, "link": "http://stackoverflow.com/questions/8894258/fastest-way-to-iterate-over-all-the-chars-in-a-string/11876086#11876086", "tags": ["java", "string", "performance", "char", "iteration"]}, {"body": "<p><em>Just for curiosity and to compare with Saint Hill's answer.</em></p>\n\n<p>If you need to process heavy data you should not use JVM in client mode. Client mode is not made for optimizations. </p>\n\n<p>Let's compare results of @Saint Hill benchmarks using a JVM in Client mode and Server mode.</p>\n\n<pre><code>Core2Quad Q6600 G0 @ 2.4GHz\nJavaSE 1.7.0_40\n</code></pre>\n\n<p>See also: <a href=\"http://stackoverflow.com/questions/198577/real-differences-between-java-server-and-java-client\">Real differences between &quot;java -server&quot; and &quot;java -client&quot;?</a></p>\n\n<hr>\n\n<p><strong>CLIENT MODE:</strong></p>\n\n<pre><code>len =      2:    111k charAt(i),  105k cbuff[i],   62k new[i],   17k field access.   (chars/ms) \nlen =      4:    285k charAt(i),  166k cbuff[i],  114k new[i],   43k field access.   (chars/ms) \nlen =      6:    315k charAt(i),  230k cbuff[i],  162k new[i],   69k field access.   (chars/ms) \nlen =      8:    333k charAt(i),  275k cbuff[i],  181k new[i],   85k field access.   (chars/ms) \nlen =     12:    342k charAt(i),  342k cbuff[i],  222k new[i],  117k field access.   (chars/ms) \nlen =     16:    363k charAt(i),  347k cbuff[i],  275k new[i],  152k field access.   (chars/ms) \nlen =     20:    363k charAt(i),  392k cbuff[i],  289k new[i],  180k field access.   (chars/ms) \nlen =     24:    375k charAt(i),  428k cbuff[i],  311k new[i],  205k field access.   (chars/ms) \nlen =     28:    378k charAt(i),  474k cbuff[i],  341k new[i],  233k field access.   (chars/ms) \nlen =     32:    376k charAt(i),  492k cbuff[i],  340k new[i],  251k field access.   (chars/ms) \nlen =     64:    374k charAt(i),  551k cbuff[i],  374k new[i],  367k field access.   (chars/ms) \nlen =    128:    385k charAt(i),  624k cbuff[i],  415k new[i],  509k field access.   (chars/ms) \nlen =    256:    390k charAt(i),  675k cbuff[i],  436k new[i],  619k field access.   (chars/ms) \nlen =    512:    394k charAt(i),  703k cbuff[i],  439k new[i],  695k field access.   (chars/ms) \nlen =   1024:    395k charAt(i),  718k cbuff[i],  462k new[i],  742k field access.   (chars/ms) \nlen =   2048:    396k charAt(i),  725k cbuff[i],  471k new[i],  767k field access.   (chars/ms) \nlen =   4096:    396k charAt(i),  727k cbuff[i],  459k new[i],  780k field access.   (chars/ms) \nlen =   8192:    397k charAt(i),  712k cbuff[i],  446k new[i],  772k field access.   (chars/ms) \n</code></pre>\n\n<hr>\n\n<p><strong>SERVER MODE:</strong></p>\n\n<pre><code>len =      2:     86k charAt(i),   41k cbuff[i],   46k new[i],   80k field access.   (chars/ms) \nlen =      4:    571k charAt(i),  250k cbuff[i],   97k new[i],  222k field access.   (chars/ms) \nlen =      6:    666k charAt(i),  333k cbuff[i],  125k new[i],  315k field access.   (chars/ms) \nlen =      8:    800k charAt(i),  400k cbuff[i],  181k new[i],  380k field access.   (chars/ms) \nlen =     12:    800k charAt(i),  521k cbuff[i],  260k new[i],  545k field access.   (chars/ms) \nlen =     16:    800k charAt(i),  592k cbuff[i],  296k new[i],  640k field access.   (chars/ms) \nlen =     20:    800k charAt(i),  666k cbuff[i],  408k new[i],  800k field access.   (chars/ms) \nlen =     24:    800k charAt(i),  705k cbuff[i],  452k new[i],  800k field access.   (chars/ms) \nlen =     28:    777k charAt(i),  736k cbuff[i],  368k new[i],  933k field access.   (chars/ms) \nlen =     32:    800k charAt(i),  780k cbuff[i],  571k new[i],  969k field access.   (chars/ms) \nlen =     64:    800k charAt(i),  901k cbuff[i],  800k new[i],  1306k field access.   (chars/ms) \nlen =    128:    1084k charAt(i),  888k cbuff[i],  633k new[i],  1620k field access.   (chars/ms) \nlen =    256:    1122k charAt(i),  966k cbuff[i],  729k new[i],  1790k field access.   (chars/ms) \nlen =    512:    1163k charAt(i),  1007k cbuff[i],  676k new[i],  1910k field access.   (chars/ms) \nlen =   1024:    1179k charAt(i),  1027k cbuff[i],  698k new[i],  1954k field access.   (chars/ms) \nlen =   2048:    1184k charAt(i),  1043k cbuff[i],  732k new[i],  2007k field access.   (chars/ms) \nlen =   4096:    1188k charAt(i),  1049k cbuff[i],  742k new[i],  2031k field access.   (chars/ms) \nlen =   8192:    1157k charAt(i),  1032k cbuff[i],  723k new[i],  2048k field access.   (chars/ms) \n</code></pre>\n\n<hr>\n\n<p><strong>CONCLUSION:</strong></p>\n\n<p>As you can see, server mode is much faster.</p>\n", "title": "Fastest way to iterate over all the chars in a String", "answer_id": 19756921, "link": "http://stackoverflow.com/questions/8894258/fastest-way-to-iterate-over-all-the-chars-in-a-string/19756921#19756921", "tags": ["java", "string", "performance", "char", "iteration"]}, {"body": "<p>Despite @Saint Hill's answer if you consider the time complexity of <strong>str.toCharArray()</strong>, </p>\n\n<p>the first one is faster even for very large strings. You can run the code below to see it for yourself.</p>\n\n<pre><code>        char [] ch = new char[1_000_000_00];\n    String str = new String(ch); // to create a large string\n\n    // ---&gt; from here\n    long currentTime = System.nanoTime();\n    for (int i = 0, n = str.length(); i &lt; n; i++) {\n        char c = str.charAt(i);\n    }\n    // ---&gt; to here\n    System.out.println(\"str.charAt(i):\"+(System.nanoTime()-currentTime)/1000000.0 +\" (ms)\");\n\n    /**\n     *   ch = str.toCharArray() itself takes lots of time   \n     */\n    // ---&gt; from here\n    currentTime = System.nanoTime();\n    ch = str.toCharArray();\n    for (int i = 0, n = str.length(); i &lt; n; i++) {\n        char c = ch[i];\n    }\n    // ---&gt; to  here\n    System.out.println(\"ch = str.toCharArray() + c = ch[i] :\"+(System.nanoTime()-currentTime)/1000000.0 +\" (ms)\");\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>str.charAt(i):5.492102 (ms)\nch = str.toCharArray() + c = ch[i] :79.400064 (ms)\n</code></pre>\n", "title": "Fastest way to iterate over all the chars in a String", "answer_id": 22676782, "link": "http://stackoverflow.com/questions/8894258/fastest-way-to-iterate-over-all-the-chars-in-a-string/22676782#22676782", "tags": ["java", "string", "performance", "char", "iteration"]}], "question_id": 8894258}, {"body": "<p>I have a date in java stored as Java Date type.</p>\n\n<p>I also have a gregorian calender created date. The gregorian calendar date has no parameters and therefore is an instance of todays date (and time?).</p>\n\n<p>With the java date I want to be able to get the year, month, day, hour, minute, and seconds from the java date type and compare the the gregoriancalendar date.</p>\n\n<p>I saw that at the moment the java date is stored as a long and the only methods available seem to just write the long as a formatted date string. Is there a way to access Year, month day etc?</p>\n\n<p>I saw that the getYear(), getMonth(), etc. methods for Date type have been deprecated. I was wondering how best to use the Java Date instance I have with the GregorianCalendar date.</p>\n\n<p>My end goal is to do a date calculation so that I can check that the java date is within so many hours, minutes etc of todays date and time.</p>\n\n<p>I am still a newbie to Java and am getting a bit puzzled by this.</p>\n", "tags": ["java", "date", "compatibility"], "title": "I want to get Year,Month, Day etc from Java Date to compare with Gregorian Calendar date in Java. Is this possible?", "answer_count": 5, "creation_date": 1330385767, "score": 94, "link": "http://stackoverflow.com/questions/9474121/i-want-to-get-year-month-day-etc-from-java-date-to-compare-with-gregorian-calen", "answers": [{"body": "<p>Use something like:</p>\n\n<pre><code>    Date date; // your date\n    Calendar cal = Calendar.getInstance();\n    cal.setTime(date);\n    int year = cal.get(Calendar.YEAR);\n    int month = cal.get(Calendar.MONTH);\n    int day = cal.get(Calendar.DAY_OF_MONTH);\n    // etc.\n</code></pre>\n\n<p>Beware, months start at 0, not 1.</p>\n", "title": "I want to get Year,Month, Day etc from Java Date to compare with Gregorian Calendar date in Java. Is this possible?", "answer_id": 9474172, "link": "http://stackoverflow.com/questions/9474121/i-want-to-get-year-month-day-etc-from-java-date-to-compare-with-gregorian-calen/9474172#9474172", "tags": ["java", "date", "compatibility"]}, {"body": "<p>Or you could do something like this. It will explain how \"Date\" class works. </p>\n\n<pre><code>    String currentDateString = \"02/27/2012 17:00:00\";\n    SimpleDateFormat sd = new SimpleDateFormat(\"mm/dd/yyyy HH:mm:ss\");\n    Date currentDate = sd.parse(currentDateString);\n\n    String yourDateString = \"02/28/2012 15:00:00\";\n    SimpleDateFormat yourDateFormat = new SimpleDateFormat(\n            \"mm/dd/yyyy HH:mm:ss\");\n\n    Date yourDate = yourDateFormat.parse(yourDateString);\n\n    if (yourDate.after(currentDate)) {\n        System.out.println(\"After\");\n    } else if(yourDate.equals(currentDate){\n        System.out.println(\"Same\");\n    }else{\n                    System.out.println(\"Before\");\n            }\n</code></pre>\n", "title": "I want to get Year,Month, Day etc from Java Date to compare with Gregorian Calendar date in Java. Is this possible?", "answer_id": 9474246, "link": "http://stackoverflow.com/questions/9474121/i-want-to-get-year-month-day-etc-from-java-date-to-compare-with-gregorian-calen/9474246#9474246", "tags": ["java", "date", "compatibility"]}, {"body": "<pre><code>    Date date = new Date();\n\n    SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"EEEE\");\n\n    System.out.println(\"DAY \"+simpleDateFormat.format(date).toUpperCase());\n\n    simpleDateFormat = new SimpleDateFormat(\"MMMM\");\n    System.out.println(\"MONTH \"+simpleDateFormat.format(date).toUpperCase());\n\n    simpleDateFormat = new SimpleDateFormat(\"YYYY\");\n    System.out.println(\"YEAR \"+simpleDateFormat.format(date).toUpperCase());\n</code></pre>\n", "title": "I want to get Year,Month, Day etc from Java Date to compare with Gregorian Calendar date in Java. Is this possible?", "answer_id": 29514020, "link": "http://stackoverflow.com/questions/9474121/i-want-to-get-year-month-day-etc-from-java-date-to-compare-with-gregorian-calen/29514020#29514020", "tags": ["java", "date", "compatibility"]}, {"body": "<pre><code>private boolean isSameDay(Date date1, Date date2) {\n    Calendar calendar1 = Calendar.getInstance();\n    calendar1.setTime(date1);\n    Calendar calendar2 = Calendar.getInstance();\n    calendar2.setTime(date2);\n    boolean sameYear = calendar1.get(Calendar.YEAR) == calendar2.get(Calendar.YEAR);\n    boolean sameMonth = calendar1.get(Calendar.MONTH) == calendar2.get(Calendar.MONTH);\n    boolean sameDay = calendar1.get(Calendar.DAY_OF_MONTH) == calendar2.get(Calendar.DAY_OF_MONTH);\n    return (sameDay &amp;&amp; sameMonth &amp;&amp; sameYear);\n}\n</code></pre>\n", "title": "I want to get Year,Month, Day etc from Java Date to compare with Gregorian Calendar date in Java. Is this possible?", "answer_id": 30910782, "link": "http://stackoverflow.com/questions/9474121/i-want-to-get-year-month-day-etc-from-java-date-to-compare-with-gregorian-calen/30910782#30910782", "tags": ["java", "date", "compatibility"]}, {"body": "<p>With Java 8 and later, you can convert the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/Date.html\">Date</a> object to a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\">LocalDate</a> object and then easily get the year, month and day.</p>\n\n<pre><code>Date date = new Date();\nLocalDate localDate = date.toInstant().atZone(ZoneId.systemDefault()).toLocalDate();\nint year  = localDate.getYear();\nint month = localDate.getMonthValue();\nint day   = localDate.getDayOfMonth();\n</code></pre>\n\n<p>Note that <code>getMonthValue()</code> returns an int value from 1 to 12.</p>\n", "title": "I want to get Year,Month, Day etc from Java Date to compare with Gregorian Calendar date in Java. Is this possible?", "answer_id": 32363174, "link": "http://stackoverflow.com/questions/9474121/i-want-to-get-year-month-day-etc-from-java-date-to-compare-with-gregorian-calen/32363174#32363174", "tags": ["java", "date", "compatibility"]}], "question_id": 9474121}, {"body": "<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/147468/why-should-the-interface-for-a-java-class-be-prefered\">Why should the interface for a Java class be prefered?</a>  </p>\n</blockquote>\n\n\n\n<p>When should I use </p>\n\n<pre><code>List&lt;Object&gt; list = new ArrayList&lt;Object&gt;;\n</code></pre>\n\n<p><code>ArrayList</code> inherits from <code>List</code>, so if some features in <code>ArrayList</code> aren't in <code>List</code>, then I will have lost some of the features of <code>ArrayList</code>, right? And the compiler will notice an error when trying to access these methods?</p>\n\n<p>Thanks! :)</p>\n", "tags": ["java", "list", "interface", "polymorphism"], "title": "Polymorphism: Why use &quot;List list = new ArrayList&quot; instead of &quot;ArrayList list = new ArrayList&quot;?", "answer_count": 8, "creation_date": 1332602281, "score": 94, "link": "http://stackoverflow.com/questions/9852831/polymorphism-why-use-list-list-new-arraylist-instead-of-arraylist-list-n", "answers": [{"body": "<p>This is called programming to interface. This will be helpful in case if you wish to move to some other implementation of List in the future. If you want some methods in <code>ArrayList</code> then you would need to program to the implementation that is <code>ArrayList a = new ArrayList()</code>.</p>\n", "title": "Polymorphism: Why use &quot;List list = new ArrayList&quot; instead of &quot;ArrayList list = new ArrayList&quot;?", "answer_id": 9852861, "link": "http://stackoverflow.com/questions/9852831/polymorphism-why-use-list-list-new-arraylist-instead-of-arraylist-list-n/9852861#9852861", "tags": ["java", "list", "interface", "polymorphism"]}, {"body": "<p>This enables you to write something like:</p>\n\n<pre><code>void doSomething() {\n    List&lt;String&gt;list = new ArrayList&lt;String&gt;();\n    //do something\n}\n</code></pre>\n\n<p>Later on, you might want to change it to:</p>\n\n<pre><code>void doSomething() {\n    List&lt;String&gt;list = new LinkedList&lt;String&gt;();\n    //do something\n}\n</code></pre>\n\n<p>without having to change the rest of the method.</p>\n\n<p>However, if you want to use a <code>CopyOnWriteArrayList</code> for example, you would need to declare it as such, and not as a List <em>if you wanted to use its extra methods</em> (addIfAbsent for example):</p>\n\n<pre><code>void doSomething() {\n    CopyOnWriteArrayList&lt;String&gt;list = new CopyOnWriteArrayList&lt;String&gt;();\n    //do something, for example:\n    list.addIfAbsent(\"abc\");\n}\n</code></pre>\n", "title": "Polymorphism: Why use &quot;List list = new ArrayList&quot; instead of &quot;ArrayList list = new ArrayList&quot;?", "answer_id": 9852913, "link": "http://stackoverflow.com/questions/9852831/polymorphism-why-use-list-list-new-arraylist-instead-of-arraylist-list-n/9852913#9852913", "tags": ["java", "list", "interface", "polymorphism"]}, {"body": "<p>I use that construction whenever I don't want to add complexity to the problem. It's just a list, no need to say what kind of List it is, as it doesn't matter to the problem. I often use Collection for most of my solutions, as, in the end, most of the times, for the rest of the software, what really matters is the content it holds, and I don't want to add new objects to the Collection.</p>\n\n<p>Futhermore, you use that construction when you think that you may want to change the implemenation of list you are using. Let's say you were using the construction with an ArrayList, and your problem wasn't thread safe. Now, you want to make it thread safe, and for part of your solution, you change to use a Vector, for example. As for the other uses of that list won't matter if it's a AraryList or a Vector, just a List, no new modifications will be needed.</p>\n", "title": "Polymorphism: Why use &quot;List list = new ArrayList&quot; instead of &quot;ArrayList list = new ArrayList&quot;?", "answer_id": 9852919, "link": "http://stackoverflow.com/questions/9852831/polymorphism-why-use-list-list-new-arraylist-instead-of-arraylist-list-n/9852919#9852919", "tags": ["java", "list", "interface", "polymorphism"]}, {"body": "<p>The main reason you'd do this is to decouple your code from a specific implementation of the interface. When you write your code like this:</p>\n\n<pre><code>List list = new ArrayList();  \n</code></pre>\n\n<p>the rest of your code only knows that data is of type <code>List</code>, which is preferable because it allows you to switch between different implementations of the <code>List</code> interface with ease.</p>\n\n<p>For instance, say you were writing a fairly large 3rd party library, and say that you decided to implement the core of your library with a <code>LinkedList</code>. If your library relies heavily on accessing elements in these lists, then eventually you'll find that you've made a poor design decision; you'll realize that you should have used an <code>ArrayList</code> (which gives O(1) access time) instead of a <code>LinkedList</code> (which gives O(n) access time). Assuming you have been programming to an interface, making such a change is easy. You would simply change the instance of <code>List</code> from,</p>\n\n<pre><code>List list = new LinkedList();\n</code></pre>\n\n<p>to</p>\n\n<pre><code>List list = new ArrayList();  \n</code></pre>\n\n<p>and you know that this will work because you have written your code to follow the contract provided by the <code>List</code> interface. </p>\n\n<p>On the other hand, if you had implemented the core of your library using <code>LinkedList list = new LinkedList()</code>, making such a change wouldn't be as easy, as there is no guarantee that the rest of your code doesn't make use of methods specific to the <code>LinkedList</code> class.</p>\n\n<p>All in all, the choice is simply a matter of design... but this kind of design is very important (especially when working on large projects), as it will allow you to make implementation-specific changes later without breaking existing code.</p>\n", "title": "Polymorphism: Why use &quot;List list = new ArrayList&quot; instead of &quot;ArrayList list = new ArrayList&quot;?", "answer_id": 9853116, "link": "http://stackoverflow.com/questions/9852831/polymorphism-why-use-list-list-new-arraylist-instead-of-arraylist-list-n/9853116#9853116", "tags": ["java", "list", "interface", "polymorphism"]}, {"body": "<p>In general you want to program against an interface. This allows you to exchange the implementation at any time.\nThis is very useful especially when you get passed an implementation you don't know.</p>\n\n<p>However, there are certain situations where you prefer to use the concrete implementation.\nFor example when serialize in GWT. </p>\n", "title": "Polymorphism: Why use &quot;List list = new ArrayList&quot; instead of &quot;ArrayList list = new ArrayList&quot;?", "answer_id": 9853189, "link": "http://stackoverflow.com/questions/9852831/polymorphism-why-use-list-list-new-arraylist-instead-of-arraylist-list-n/9853189#9853189", "tags": ["java", "list", "interface", "polymorphism"]}, {"body": "<p>This is also helpful when exposing a public interface. If you have a method like this,</p>\n\n<pre><code>public ArrayList getList();\n</code></pre>\n\n<p>Then you decide to change it to,</p>\n\n<pre><code>public LinkedList getList();\n</code></pre>\n\n<p>Anyone who was doing <code>ArrayList list = yourClass.getList()</code> will need to change their code. On the other hand, if you do,</p>\n\n<pre><code>public List getList();\n</code></pre>\n\n<p>Changing the implementation doesn't change anything for the users of your API.</p>\n", "title": "Polymorphism: Why use &quot;List list = new ArrayList&quot; instead of &quot;ArrayList list = new ArrayList&quot;?", "answer_id": 9854270, "link": "http://stackoverflow.com/questions/9852831/polymorphism-why-use-list-list-new-arraylist-instead-of-arraylist-list-n/9854270#9854270", "tags": ["java", "list", "interface", "polymorphism"]}, {"body": "<p>I guess the core of your question is why to  <code>program to an interface, not to an implementation</code> </p>\n\n<p>Simply because an interface gives you more abstraction, and makes the code\nmore flexible and resilient to changes, because you can use different\nimplementations of the same interface(in this case you may want to change your List implementation to a linkedList instead of an ArrayList ) without changing its client.</p>\n", "title": "Polymorphism: Why use &quot;List list = new ArrayList&quot; instead of &quot;ArrayList list = new ArrayList&quot;?", "answer_id": 9861123, "link": "http://stackoverflow.com/questions/9852831/polymorphism-why-use-list-list-new-arraylist-instead-of-arraylist-list-n/9861123#9861123", "tags": ["java", "list", "interface", "polymorphism"]}, {"body": "<p>I think @tsatiz's answer is mostly right (programming to an interface rather than an implementation). However, <strong>by programming to the interface you won't lose any functionality</strong>. Let me explain.  <br /><br />\nIf you declare your variable as a <code><code>List&lt;type&gt; list = new ArrayList&lt;type&gt;</code></code> you do not actually lose <em>any</em> functionality of the ArrayList. All you need to do is to cast your <code>list</code> down to an <code>ArrayList</code>. Here's an example:<br/></p>\n\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;();\n((ArrayList&lt;String&gt;) list).ensureCapacity(19);\n</code></pre>\n\n<p>Ultimately I think tsatiz is correct as once you cast to an ArrayList you're no longer coding to an interface. However, it's still a good practice to initially code to an interface and, if it later becomes necessary, code to an implementation if you must.</p>\n\n<p>Hope that helps!</p>\n", "title": "Polymorphism: Why use &quot;List list = new ArrayList&quot; instead of &quot;ArrayList list = new ArrayList&quot;?", "answer_id": 9895776, "link": "http://stackoverflow.com/questions/9852831/polymorphism-why-use-list-list-new-arraylist-instead-of-arraylist-list-n/9895776#9895776", "tags": ["java", "list", "interface", "polymorphism"]}], "question_id": 9852831}, {"body": "<p>What's the difference between java.lang.String 's <code>replace()</code> and <code>replaceAll()</code> methods, \nother than later uses regex? For simple substitutions like, replace <code>.</code> with <code>/</code>  , \nis there any difference?</p>\n", "tags": ["java", "string", "replace"], "title": "Difference between String replace() and replaceAll()", "answer_count": 8, "creation_date": 1338441898, "score": 94, "link": "http://stackoverflow.com/questions/10827872/difference-between-string-replace-and-replaceall", "answers": [{"body": "<p>In <code>java.lang.String</code>, the <code>replace</code> method either takes a pair of char's or a pair of <code>CharSequence</code>'s (of which String is a subclass, so it'll happily take a pair of String's). The <code>replace</code> method will replace all occurrences of a char or <code>CharSequence</code>. On the other hand, both <code>String</code> arguments to <code>replaceFirst</code> and <code>replaceAll</code> are regular expressions (regex). Using the wrong function can lead to subtle bugs. </p>\n", "title": "Difference between String replace() and replaceAll()", "answer_id": 10827900, "link": "http://stackoverflow.com/questions/10827872/difference-between-string-replace-and-replaceall/10827900#10827900", "tags": ["java", "string", "replace"]}, {"body": "<p>Q: What's the difference between java.lang.String 's replace() and replaceAll() methods , other than later uses regex . </p>\n\n<p>A: Just the regex.  They both \"replace all\" :)</p>\n\n<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html\" rel=\"nofollow\">http://docs.oracle.com/javase/6/docs/api/java/lang/String.html</a></p>\n\n<p>PS:</p>\n\n<p>There's also a \"replaceFirst()\" (which takes a regex)</p>\n", "title": "Difference between String replace() and replaceAll()", "answer_id": 10827912, "link": "http://stackoverflow.com/questions/10827872/difference-between-string-replace-and-replaceall/10827912#10827912", "tags": ["java", "string", "replace"]}, {"body": "<p>The <code>replace()</code> method is overloaded to accept both a primitive <code>char</code> and a <code>CharSequence</code> as arguments.</p>\n\n<p>Now as far as the performance is concerned, the <code>replace()</code> method is a bit faster than <code>replaceAll()</code> because the later first compiles the regex pattern and then matches before finally replacing whereas the former simply matches for the provided argument and replaces.</p>\n\n<p>Since we know the regex pattern matching is a bit more complex and consequently slower, then preferring <code>replace()</code> over <code>replaceAll()</code> is suggested whenever possible.</p>\n\n<p>For example, for simple substitutions like you mentioned, it is better to use:</p>\n\n<pre><code>replace('.', '\\\\');\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>replaceAll(\"\\\\.\", \"\\\\\\\\\");\n</code></pre>\n\n<p>Note: the above conversion method arguments are system-dependent.</p>\n", "title": "Difference between String replace() and replaceAll()", "answer_id": 10827945, "link": "http://stackoverflow.com/questions/10827872/difference-between-string-replace-and-replaceall/10827945#10827945", "tags": ["java", "string", "replace"]}, {"body": "<p>replace works on char data type but replaceAll works on String datatype and both replace the all occurrences of first argument with second argument.</p>\n", "title": "Difference between String replace() and replaceAll()", "answer_id": 10827970, "link": "http://stackoverflow.com/questions/10827872/difference-between-string-replace-and-replaceall/10827970#10827970", "tags": ["java", "string", "replace"]}, {"body": "<p>Old thread I know but I am sort of new to Java and discover one of it's strange things. I have used <code>String.replaceAll()</code> but get unpredictable results.</p>\n\n<p>Something like this mess up the string:</p>\n\n<pre><code>sUrl = sUrl.replaceAll( \"./\", \"//\").replaceAll( \"//\", \"/\");\n</code></pre>\n\n<p>So I designed this function to get around the weird problem:</p>\n\n<pre><code>//String.replaceAll does not work OK, that's why this function is here\npublic String strReplace( String s1, String s2, String s ) \n{\n    if((( s == null ) || (s.length() == 0 )) || (( s1 == null ) || (s1.length() == 0 )))\n     { return s; }\n\n   while( (s != null) &amp;&amp; (s.indexOf( s1 ) &gt;= 0) )\n    { s = s.replace( s1, s2 ); }\n  return s;\n}\n</code></pre>\n\n<p>Which make you able to do:</p>\n\n<pre><code>sUrl=this.strReplace(\"./\", \"//\", sUrl );\nsUrl=this.strReplace( \"//\", \"/\", sUrl );\n</code></pre>\n", "title": "Difference between String replace() and replaceAll()", "answer_id": 22578124, "link": "http://stackoverflow.com/questions/10827872/difference-between-string-replace-and-replaceall/22578124#22578124", "tags": ["java", "string", "replace"]}, {"body": "<pre><code>String replace(char oldChar, char newChar)\n</code></pre>\n\n<p>Returns a new string resulting from replacing all occurrences of oldChar in this string with newChar.</p>\n\n<pre><code>String replaceAll(String regex, String replacement\n</code></pre>\n\n<p>Replaces each substring of this string that matches the given regular expression with the given replacement.</p>\n", "title": "Difference between String replace() and replaceAll()", "answer_id": 29961730, "link": "http://stackoverflow.com/questions/10827872/difference-between-string-replace-and-replaceall/29961730#29961730", "tags": ["java", "string", "replace"]}, {"body": "<p><code>replace()</code> method doesn't uses regex pattern whereas <code>replaceAll()</code> method uses regex pattern. So <code>replace()</code> performs faster than <code>replaceAll()</code>.</p>\n", "title": "Difference between String replace() and replaceAll()", "answer_id": 30749407, "link": "http://stackoverflow.com/questions/10827872/difference-between-string-replace-and-replaceall/30749407#30749407", "tags": ["java", "string", "replace"]}, {"body": "<ol>\n<li>Both replace() and replaceAll() accepts two arguments and replaces all occurrences of the first substring(first argument) in a string with the second substring (second argument).</li>\n<li>replace() accepts a pair of char or charsequence and replaceAll() accepts a pair of regex.</li>\n<li><p>It is not true that replace() works faster than replaceAll() since both uses the same code in its implementation</p>\n\n<p>Pattern.compile(regex).matcher(this).replaceAll(replacement);</p></li>\n</ol>\n\n<p>Now the question is when to use replace and when to use replaceAll().\nWhen you want to replace a substring with another substring regardless of its place of occurrence in the string use replace(). But if you have some particular preference or condition like replace only those substrings at the beginning or end of a string use replaceAll(). Here are some examples to prove my point:</p>\n\n<pre><code>String str = new String(\"==qwerty==\").replaceAll(\"^==\", \"?\"); \\\\str: \"?qwerty==\"\nString str = new String(\"==qwerty==\").replaceAll(\"==$\", \"?\"); \\\\str: \"==qwerty?\"\nString str = new String(\"===qwerty==\").replaceAll(\"(=)+\", \"?\"); \\\\str: \"?qwerty?\"\n</code></pre>\n", "title": "Difference between String replace() and replaceAll()", "answer_id": 35449197, "link": "http://stackoverflow.com/questions/10827872/difference-between-string-replace-and-replaceall/35449197#35449197", "tags": ["java", "string", "replace"]}], "question_id": 10827872}, {"body": "<pre><code>    String s = \"hello\";\n    String backup_of_s = s;\n    s = \"bye\";\n</code></pre>\n\n<p>At this point, the backup variable still contains the original value \"hello\" (this is because of String's immutability right?).</p>\n\n<p>But is it really <strong>safe</strong> to copy Strings with this method (which is of course not safe to copy regular mutable objects), or is better to write this? :</p>\n\n<pre><code>    String s = \"hello\";\n    String backup_of_s = new String(s);\n    s = \"bye\";\n</code></pre>\n\n<p>In other words, what's the difference (if any) between these two snippets?</p>\n\n<hr>\n\n<p><strong>EDIT - the reason why the first snippet is safe:</strong></p>\n\n<p>Let me just explain things with a little more detail, based on the good answers already provided (which were essentially focused on the question of difference of performance between the 2 snippets):</p>\n\n<p>Strings are immutable in Java, which means that a String object cannot be modified after its construction.\nHence,</p>\n\n<p><code>String s = \"hello\";</code> creates a new String instance and assigns its address to <code>s</code> (<code>s</code> being a reference to the instance/object)</p>\n\n<p><code>String backup_of_s = s;</code> creates a new variable <code>backup_of_s</code> and initializes it so that it references the object currently referenced by <code>s</code>.</p>\n\n<p>Note: String immutability guarantees that this object will not be modified: our backup is safe</p>\n\n<p>Note 2: Java garbage collection mechanism guarantees that this object will not be destroyed as long as it is referenced by at least one variable (<code>backup_of_s</code> in this case)</p>\n\n<p>Finally, <code>s = \"bye\";</code> creates another String instance (because of immutability, it's the only way), and modifies the <code>s</code> variable so that it now references the new object.</p>\n", "tags": ["java"], "title": "How should I copy Strings in Java?", "answer_count": 5, "creation_date": 1337112226, "score": 91, "link": "http://stackoverflow.com/questions/10607990/how-should-i-copy-strings-in-java", "answers": [{"body": "<p>Since strings are immutable, both versions are safe. The latter, however, is less efficient (it creates an extra object and in some cases copies the character data).</p>\n\n<p>With this in mind, the first version should be preferred.</p>\n", "title": "How should I copy Strings in Java?", "answer_id": 10608003, "link": "http://stackoverflow.com/questions/10607990/how-should-i-copy-strings-in-java/10608003#10608003", "tags": ["java"]}, {"body": "<p>Your second version is less efficient because it creates an extra string object when there is simply no need to do so.</p>\n\n<p>Immutability means that your first version behaves the way you expect and is thus the approach to be preferred.</p>\n", "title": "How should I copy Strings in Java?", "answer_id": 10608017, "link": "http://stackoverflow.com/questions/10607990/how-should-i-copy-strings-in-java/10608017#10608017", "tags": ["java"]}, {"body": "<p>Strings are <a href=\"http://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html\">immutable objects</a> so you can copy them just coping the reference to them, because the object  referenced can't change ... </p>\n\n<p>So you can copy as in your first example without any problem : </p>\n\n<pre><code>String s = \"hello\";\nString backup_of_s = s;\ns = \"bye\";\n</code></pre>\n", "title": "How should I copy Strings in Java?", "answer_id": 10608047, "link": "http://stackoverflow.com/questions/10607990/how-should-i-copy-strings-in-java/10608047#10608047", "tags": ["java"]}, {"body": "<pre><code>String str1=\"this is a string\";\nString str2=str1.clone();\n</code></pre>\n\n<p>How about copy like this?\nI think to get a new copy is better, so that the data of <code>str1</code> won't be affected when <code>str2</code> is reference and modified in futher action.</p>\n", "title": "How should I copy Strings in Java?", "answer_id": 16440996, "link": "http://stackoverflow.com/questions/10607990/how-should-i-copy-strings-in-java/16440996#16440996", "tags": ["java"]}, {"body": "<p>Second case is also inefficient in terms of String pool, you have to explicitly call intern() on return reference to make it intern. </p>\n", "title": "How should I copy Strings in Java?", "answer_id": 23053847, "link": "http://stackoverflow.com/questions/10607990/how-should-i-copy-strings-in-java/23053847#23053847", "tags": ["java"]}], "question_id": 10607990}, {"body": "<p>I have a database table containing dates </p>\n\n<pre><code> (`date` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00'). \n</code></pre>\n\n<p>I'm using MySQL. From the program sometimes data is passed without the date to the database. So, the date value is auto assigned to <code>0000-00-00 00:00:00</code>\nwhen the table data is called with the date column it gives error</p>\n\n<pre><code>...'0000-00-00 00:00:00' can not be represented as java.sql.Timestamp.......\n</code></pre>\n\n<p>I tried to pass null value to the date when inserting data, but it gets assign to the current time.</p>\n\n<p>Is there any way I can get the <code>ResultSet</code> without changing the table structure</p>\n\n<p>thanks in advance</p>\n", "tags": ["java", "mysql", "jdbc", "timestamp"], "title": "&#39;0000-00-00 00:00:00&#39; can not be represented as java.sql.Timestamp error", "answer_count": 8, "creation_date": 1340265023, "score": 90, "link": "http://stackoverflow.com/questions/11133759/0000-00-00-000000-can-not-be-represented-as-java-sql-timestamp-error", "answers": [{"body": "<p>There was no year 0000 and there is no month 00 or day 00.  I suggest you try </p>\n\n<pre><code>0001-01-01 00:00:00\n</code></pre>\n\n<p>While a year 0 has been defined in some standards, it is more likely to be confusing than useful IMHO.</p>\n", "title": "&#39;0000-00-00 00:00:00&#39; can not be represented as java.sql.Timestamp error", "answer_id": 11133790, "link": "http://stackoverflow.com/questions/11133759/0000-00-00-000000-can-not-be-represented-as-java-sql-timestamp-error/11133790#11133790", "tags": ["java", "mysql", "jdbc", "timestamp"]}, {"body": "<p>Instead of using fake dates like <code>0000-00-00 00:00:00</code> or <code>0001-01-01 00:00:00</code> (the latter should be accepted as it is a valid date), change your database schema, to allow <code>NULL</code> values.</p>\n\n<pre><code>ALTER TABLE table_name MODIFY COLUMN date TIMESTAMP NULL\n</code></pre>\n", "title": "&#39;0000-00-00 00:00:00&#39; can not be represented as java.sql.Timestamp error", "answer_id": 11133879, "link": "http://stackoverflow.com/questions/11133759/0000-00-00-000000-can-not-be-represented-as-java-sql-timestamp-error/11133879#11133879", "tags": ["java", "mysql", "jdbc", "timestamp"]}, {"body": "<p>You can use this JDBC URL directly in your data source configuration:</p>\n\n<blockquote>\n  <p>jdbc:mysql://yourserver:3306/yourdatabase?zeroDateTimeBehavior=convertToNull</p>\n</blockquote>\n", "title": "&#39;0000-00-00 00:00:00&#39; can not be represented as java.sql.Timestamp error", "answer_id": 11133893, "link": "http://stackoverflow.com/questions/11133759/0000-00-00-000000-can-not-be-represented-as-java-sql-timestamp-error/11133893#11133893", "tags": ["java", "mysql", "jdbc", "timestamp"]}, {"body": "<p>I wrestled with this problem and implemented the URL concatenation solution contributed by @Kushan in the accepted answer above. It worked in my local MySql instance. But when I deployed my Play/Scala app to Heroku it no longer would work. Heroku also concatenates several args to the DB URL that they provide users, and this solution, because of Heroku's use concatenation of \"?\" before their own set of args, will not work. However I found a different solution which seems to work equally well.</p>\n\n<pre><code>SET sql_mode = 'NO_ZERO_DATE';\n</code></pre>\n\n<p>I put this in my table descriptions and it solved the problem of\n    '0000-00-00 00:00:00' can not be represented as java.sql.Timestamp</p>\n", "title": "&#39;0000-00-00 00:00:00&#39; can not be represented as java.sql.Timestamp error", "answer_id": 14348917, "link": "http://stackoverflow.com/questions/11133759/0000-00-00-000000-can-not-be-represented-as-java-sql-timestamp-error/14348917#14348917", "tags": ["java", "mysql", "jdbc", "timestamp"]}, {"body": "<p>Whether or not the \"date\" '0000-00-00\" is a valid \"date\" is irrelevant to the question.\n\"Just change the database\" is seldom a viable solution.</p>\n\n<p>Facts: </p>\n\n<ul>\n<li>MySQL allows a date with the value of zeros.</li>\n<li>This \"feature\" enjoys widespread use with other languages.</li>\n</ul>\n\n<p>So, if I \"just change the database\", thousands of lines of PHP code will break.</p>\n\n<p>Java programmers need to accept the MySQL zero-date <em>and</em> they need to put a zero date back into the database, when other languages rely on this \"feature\".</p>\n\n<p>A programmer connecting to MySQL needs to handle null and 0000-00-00 as well as valid dates.  Changing 0000-00-00 to null is not a viable option, because then you can no longer determine if the date was expected to be 0000-00-00 for writing back to the database.</p>\n\n<p>For 0000-00-00, I suggest checking the date value as a string, then changing it to (\"y\",1), or (\"yyyy-MM-dd\",0001-01-01), or into any invalid MySQL date (less than year 1000, iirc). MySQL has another \"feature\": low dates are automatically converted to 0000-00-00.</p>\n\n<p>I realize my suggestion is a kludge.  But so is MySQL's date handling.\nAnd two kludges don't make it right.  The fact of the matter is, many programmers will have to handle MySQL zero-dates <em>forever</em>.</p>\n", "title": "&#39;0000-00-00 00:00:00&#39; can not be represented as java.sql.Timestamp error", "answer_id": 14873802, "link": "http://stackoverflow.com/questions/11133759/0000-00-00-000000-can-not-be-represented-as-java-sql-timestamp-error/14873802#14873802", "tags": ["java", "mysql", "jdbc", "timestamp"]}, {"body": "<p>Append the following statement to the JDBC-mysql protocol:</p>\n\n<pre><code>?zeroDateTimeBehavior=convertToNull&amp;autoReconnect=true&amp;characterEncoding=UTF-8&amp;characterSetResults=UTF-8\n</code></pre>\n\n<p>for example:</p>\n\n<pre><code>jdbc:mysql://localhost/infra?zeroDateTimeBehavior=convertToNull&amp;autoReconnect=true&amp;characterEncoding=UTF-8&amp;characterSetResults=UTF-8\n</code></pre>\n", "title": "&#39;0000-00-00 00:00:00&#39; can not be represented as java.sql.Timestamp error", "answer_id": 24074505, "link": "http://stackoverflow.com/questions/11133759/0000-00-00-000000-can-not-be-represented-as-java-sql-timestamp-error/24074505#24074505", "tags": ["java", "mysql", "jdbc", "timestamp"]}, {"body": "<p>As an exteme turnaround, when you cannot do an alter to your date column or to update the values, or while these modifications take place, you can do a select using a case/when.</p>\n\n<pre><code>SELECT CASE ModificationDate WHEN '0000-00-00 00:00:00' THEN '1970-01-01 01:00:00' ELSE ModificationDate END AS ModificationDate FROM Project WHERE projectId=1;\n</code></pre>\n", "title": "&#39;0000-00-00 00:00:00&#39; can not be represented as java.sql.Timestamp error", "answer_id": 31923527, "link": "http://stackoverflow.com/questions/11133759/0000-00-00-000000-can-not-be-represented-as-java-sql-timestamp-error/31923527#31923527", "tags": ["java", "mysql", "jdbc", "timestamp"]}, {"body": "<p>just cast the field as char</p>\n\n<p>Eg: cast(updatedate) as char as updatedate</p>\n", "title": "&#39;0000-00-00 00:00:00&#39; can not be represented as java.sql.Timestamp error", "answer_id": 37607492, "link": "http://stackoverflow.com/questions/11133759/0000-00-00-000000-can-not-be-represented-as-java-sql-timestamp-error/37607492#37607492", "tags": ["java", "mysql", "jdbc", "timestamp"]}], "question_id": 11133759}, {"body": "<p>Maybe my question is a newbie one, but I can not really understand the circumstances under which I would use <a href=\"/questions/tagged/junit\" class=\"post-tag\" title=\"show questions tagged 'junit'\" rel=\"tag\">junit</a>?</p>\n\n<p>Whether I write simple applications or larger ones I test them with the <code>System.out</code> statements and it seams quite easy to me. </p>\n\n<p>Why create test-classes with JUnit, unnecessary folders in the project if we still have to call the same methods, check what they return and we then have an overhead of annotating everything? </p>\n\n<p>Why not write a class and test it at once with <code>System.out</code> but not create Test-classes?</p>\n\n<p>PS. I have never worked on large projects I am just learning. </p>\n\n<p>So what is the purpose?</p>\n", "tags": ["java", "unit-testing", "junit", "tdd"], "title": "Why use JUnit for testing?", "answer_count": 10, "creation_date": 1338598445, "score": 90, "link": "http://stackoverflow.com/questions/10858990/why-use-junit-for-testing", "answers": [{"body": "<p>That's not testing, that's \"looking manually at output\" (known in the biz as LMAO). More formally it's known as \"looking manually for abnormal output\" (LMFAO). <sup>(See note below)</sup></p>\n\n<p>Any time you change code, you must run the app and LMFAO for all code affected by those changes. Even in small projects, this is problematic and error-prone.</p>\n\n<p>Now scale up to 50k, 250k, 1m LOC or more, and LMFAO any time you make a code change. Not only is it unpleasant, it's impossible: you've scaled up the combinations of inputs, outputs, flags, conditions, and it's difficult to exercise all possible branches.</p>\n\n<p>Worse, LMFAO might mean visiting pages upon pages of web app, running reports, poring over millions of log lines across dozens of files and machines, reading generated and delivered emails, checking text messages, checking the path of a robot, filling a bottle of soda, aggregating data from a hundred web services, checking the audit trail of a financial transaction...  you get the idea. \"Output\" doesn't mean a few lines of text, \"output\" means aggregate system behavior.</p>\n\n<p><img src=\"http://willjessop4.files.wordpress.com/2010/01/sad_panda.jpg\" width=\"200\"/></p>\n\n<p>Lastly, unit and behavior tests <em>define</em> system behavior. Tests can be run by a continuous integration server and checked for correctness. Sure, so can <code>System.out</code>s, but the CI server isn't going to know if one of them is wrong&ndash;and if it does, they're unit tests, and you might as well use a framework.</p>\n\n<p>No matter how good we think we are, humans aren't good unit test frameworks or CI servers.</p>\n\n<hr>\n\n<p>Note: As pointed out (rudely) in the comments, LMAO <em>is</em> testing, but in a <em>very</em> limited sense. It isn't repeatable in any meaningful way across an entire project or as part of a process. It's akin to developing incrementally in a REPL, but never formalizing those incremental tests.</p>\n", "title": "Why use JUnit for testing?", "answer_id": 10859000, "link": "http://stackoverflow.com/questions/10858990/why-use-junit-for-testing/10859000#10859000", "tags": ["java", "unit-testing", "junit", "tdd"]}, {"body": "<p>The main advantage of JUnit is that it is automated rather than you manually having to check with your print outs. Each test you write stays with your system. This means that if you make a change that has an unexpected side effect your test will catch it and fail rather than you having to remember to manually test everything after each change.</p>\n", "title": "Why use JUnit for testing?", "answer_id": 10859002, "link": "http://stackoverflow.com/questions/10858990/why-use-junit-for-testing/10859002#10859002", "tags": ["java", "unit-testing", "junit", "tdd"]}, {"body": "<p>When you test using something like System.out, you're only testing a small subset of possible use-cases. This is not very thorough when you're dealing with systems  that could accept a near infinite amount of different inputs.</p>\n\n<p>Unit tests are designed to allow you to quickly run tests on your application using a very large and diverse set of different data inputs. Additionally, the best unit tests also account for boundary cases, such as the data inputs that lie right on the edge of what is considered valid.  </p>\n\n<p>For a human being to test all of these different inputs could take weeks whereas it could take minutes for a machine.</p>\n\n<p>Think of it like this:  You're also not \"testing\" something that will be static. Your application is most likely going through constant changes. Therefore, these unit tests are designed to run at different points in the compile or deployment cycle. Perhaps the biggest advantage is this:  </p>\n\n<p>If you break something in your code, you'll know about it <em>right now</em>, not after you deployed, not when a QA tester catches a bug, not when your clients have cancelled. You'll also have a better chance of fixing the glitch <em>immediately</em>, since it's clear that the thing that broke the part of the code in question most likely happened since your last compile. Thus, the amount of investigative work required to fix the problem is greatly reduced.</p>\n", "title": "Why use JUnit for testing?", "answer_id": 10859005, "link": "http://stackoverflow.com/questions/10858990/why-use-junit-for-testing/10859005#10859005", "tags": ["java", "unit-testing", "junit", "tdd"]}, {"body": "<p>We write tests to verify the correctness of a program's behaviour.</p>\n\n<p>Verifying the correctness of a program's behaviour by inspecting the content of output statements using your <strong>eyes</strong> is a <em>manual</em>, or more specifically, a <em>visual</em> process. </p>\n\n<p>You could argue  that </p>\n\n<blockquote>\n  <p><em>visual inspection works</em>, I check that the code does what it's meant to\n  do, for these scenarios and once I can see it's correct we're good to\n  go.</p>\n</blockquote>\n\n<p>Now first up, it's great to that you are interested in whether or not the code works correctly. That's a good thing. You're ahead of the curve! Sadly, there are problems with this as an approach.</p>\n\n<p>The first problem with visual inspection is that you're a bad welding accident away from never being able to check your code's correctness again.</p>\n\n<p>The second problem is that the pair of eyes used is tightly coupled with the brain of the owner of the eyes. If the author of the code also owns the eyes used in the visual inspection process, the process of verifying correctness has a dependency on the knowledge about the program internalised in the visual inspector's brain. </p>\n\n<p>It is difficult for a new pair of eyes to come in and verify the correctness of the code simply because they are not partnered up with brain of the original coder. The owner of the second pair of eyes will have to <em>converse</em> with original author of the code in order to fully understand the code in question. Conversation as a means of sharing knowledge is notoriously unreliable. A point which is moot if the Original Coder is unavailable to the new pair eyes. In that instance  the new pair of eyes has to read the original code. </p>\n\n<p>Reading other people's code that is not covered by unit tests is more difficult than reading code that has associated unit tests. At best reading other peoples code is tricky work, at its worst this is the most turgid task in software engineering. There's a reason that employers, when advertising job vacancies, stress that a project is a greenfield (or brand new) one. Writing code from scratch is easier than modifying existing code and thereby makes the advertised job appear more attractive to potential employees.</p>\n\n<p>With unit testing we divide code up into its component parts. For each component we then set out our stall stating how the program <em>should behave</em>. Each unit test tells a story of how that part of the program should act in a specific scenario. Each unit test is like a clause in a contract that describes what should happen from the client code's point of view.</p>\n\n<p>This then means that a new pair of eyes has <strong>two</strong> strands of <strong>live and accurate</strong> documentation on the code in question. </p>\n\n<p>First they have the code itself, the implementation, <em>how the code was done</em>; second they have all of the knowledge that the original coder described in a set of formal statements that tell the story of how this code <em>is supposed to behave.</em> </p>\n\n<p>Unit tests capture and formally describe the knowledge that the original author possessed when they implemented the class. The provide a description of how that class behaves when used by a client.</p>\n\n<p>You are correct to question the usefulness of doing this because it is possible to write unit tests that are useless, do not cover all of the code in question, become stale or out of date and so on. How do we ensure that unit tests not only mimics but improves upon the process of a knowledgeable, conscientious author visually inspecting their code's output statements at runtime? Write the unit test first then write the code to make that test pass. When you are finished, let the computers run the tests, they're fast they are great at doing repetitive tasks they are ideally suited to the job. </p>\n\n<p>Ensure test quality by reviewing them each time you touch off the code they test and run the tests for each build. If a test fails, fix it immediately.</p>\n\n<p>We automate the process of running tests so that they are run each time we do a build of the project. We also automate the generation of code coverage reports that details what percentage of code that is covered and exercised by tests. We strive for high percentages. Some companies will prevent code changes from being checked in to source code control if they do not have sufficient unit tests written to describe any changes in behaviour to the code. Typically a second pair of eyes will review code changes in conjunction with the author of the changes. The reviewer will go through the changes ensure that the changes understandable and sufficiently covered by tests. So the review process is manual, but when the tests (unit and integration tests and possibly user acceptance tests) pass this manual review process the become part of the automatic build process. These are run each time a change is checked in. A <a href=\"/questions/tagged/continuous-integration\" class=\"post-tag\" title=\"show questions tagged 'continuous-integration'\" rel=\"tag\">continuous-integration</a> server carries out this task as part of the build process.</p>\n\n<p>Tests that are automatically run, maintain the integrity of the code's behaviour and help to <strong>prevent future changes to the code base from breaking the code</strong>.</p>\n\n<p>Finally, providing tests allows you to aggressively <a href=\"http://en.wikipedia.org/wiki/Code_refactoring\">re-factor code</a> because you can make big code improvements safe in the knowledge that your changes do not break existing tests.</p>\n\n<p>There is a caveat to <a href=\"http://en.wikipedia.org/wiki/Test-driven_development\">Test Driven Development</a> and that is that you have to write code with an eye to making it testable. This involves coding to interfaces and using techniques such as Dependency Injection to instantiate collaborating objects. Check out the work of <a href=\"http://en.wikipedia.org/wiki/Kent_Beck\">Kent Beck</a> who describes TDD very well. Look up <a href=\"http://stackoverflow.com/questions/1970806/coding-to-interfaces/1970833#1970833\">coding to interfaces</a> and study <a href=\"/questions/tagged/design-patterns\" class=\"post-tag\" title=\"show questions tagged 'design-patterns'\" rel=\"tag\">design-patterns</a></p>\n", "title": "Why use JUnit for testing?", "answer_id": 10862819, "link": "http://stackoverflow.com/questions/10858990/why-use-junit-for-testing/10862819#10862819", "tags": ["java", "unit-testing", "junit", "tdd"]}, {"body": "<p>I added some other System.out can NOT do:</p>\n\n<ul>\n<li><p>Make each test cases independent  (It's important) </p>\n\n<p>JUnit can do it: each time new test case instance will be created and <code>@Before</code> is called.</p></li>\n<li><p>Separate testing code from source</p>\n\n<p>JUnit can do it. </p></li>\n<li><p>Integration with CI</p>\n\n<p>JUnit can do it with Ant and Maven.</p></li>\n<li><p>Arrange and combine test cases easily</p>\n\n<p>JUnit can do <code>@Ignore</code> and test suite.</p></li>\n<li><p>Easy to check result</p>\n\n<p>JUnit offers many Assert methods (<code>assertEquals</code>, <code>assertSame</code>...) </p></li>\n<li><p>Mock and stub make you focus on the test module. </p>\n\n<p>JUnit can do: Using mock and stub make you setup correct fixture, and focus on the test module logic.</p></li>\n</ul>\n", "title": "Why use JUnit for testing?", "answer_id": 10867053, "link": "http://stackoverflow.com/questions/10858990/why-use-junit-for-testing/10867053#10867053", "tags": ["java", "unit-testing", "junit", "tdd"]}, {"body": "<p>JUnit is a unit testing framework for the Java Programming Language. It is important in the test driven development, and is one of a family of unit testing frameworks collectively known as xUnit.</p>\n\n<p>JUnit promotes the idea of \"first testing then coding\", which emphasis on setting up the test data for a piece of code which can be tested first and then can be implemented . This approach is like \"test a little, code a little, test a little, code a little...\" which increases programmer productivity and stability of program code that reduces programmer stress and the time spent on debugging.</p>\n\n<p>Features\nJUnit is an open source framework which is used for writing &amp; running tests.</p>\n\n<p>Provides Annotation to identify the test methods.</p>\n\n<p>Provides Assertions for testing expected results.</p>\n\n<p>Provides Test runners for running tests.</p>\n\n<p>JUnit tests allow you to write code faster which increasing quality</p>\n\n<p>JUnit is elegantly simple. It is less complex &amp; takes less time.</p>\n\n<p>JUnit tests can be run automatically and they check their own results and provide immediate feedback. There's no need to manually comb through a report of test results.</p>\n\n<p>JUnit tests can be organized into test suites containing test cases and even other test suites.</p>\n\n<p>Junit shows test progress in a bar that is green if test is going fine and it turns red when a test fails.</p>\n", "title": "Why use JUnit for testing?", "answer_id": 14850818, "link": "http://stackoverflow.com/questions/10858990/why-use-junit-for-testing/14850818#14850818", "tags": ["java", "unit-testing", "junit", "tdd"]}, {"body": "<p>Unit tests ensure that code works as intended. They are also very helpful to ensure that the code still works as intended in case you have to change it later to build new functionalities to fix a bug. Having a high test coverage of your code allows you to continue developing features without having to perform lots of manual tests. </p>\n\n<p>Your manual approach by <code>System.out</code> is good but not the best one.This is one time testing that you perform. In real world, requirements keep on changing and most of the time you make a lot of modificaiotns to existing functions and classes. So\u2026 not every time you test the already written piece of code.</p>\n\n<p>there are also some more advanced features are in JUnit like like</p>\n\n<p><strong>Assert statements</strong></p>\n\n<p>JUnit provides methods to test for certain conditions, these methods typically start with asserts and allow you to specify the error message, the expected and the actual result</p>\n\n<p>Some of these methods are</p>\n\n<ol>\n<li><strong>fail(String)</strong> - Let the method fail. Might be used to check that a certain part of the code is not reached. Or to have failing test before the test code is implemented. </li>\n<li><strong>assertTrue(true) / assertTrue(false)</strong> -Will always be true / false. Can be used to predefine a test result, if the test is not yet implemented.</li>\n<li><strong>assertTrue([message], boolean condition)</strong> - Checks that the boolean condition is true.</li>\n<li><strong>assertsEquals([String message], expected, actual)</strong> -Tests that two values are the same. Note: for arrays the reference is checked not the content of the arrays. </li>\n<li><strong>assertsEquals([String message], expected, actual, tolerance)</strong> -Test that float or double values match. The tolerance is the number of decimals which must be the same. </li>\n<li><strong>assertNull([message], object)</strong> -Checks that the object is null</li>\n</ol>\n\n<p>and so on</p>\n\n<p><strong>JUnit Testsuite</strong>  By this you can combine all you test in one suite and exicute them as a single unit. here i am giving you a simple example </p>\n\n<pre><code>import org.junit.runner.RunWith;\nimport org.junit.runners.Suite;\nimport org.junit.runners.Suite.SuiteClasses;\n\n@RunWith(Suite.class)\n@SuiteClasses({ MyClassTest.class, MySecondClassTest.class })\npublic class AllTests {\n\n  } \n</code></pre>\n", "title": "Why use JUnit for testing?", "answer_id": 15082268, "link": "http://stackoverflow.com/questions/10858990/why-use-junit-for-testing/15082268#15082268", "tags": ["java", "unit-testing", "junit", "tdd"]}, {"body": "<p>JUNIT is the method that is usually accepted by java developer.\nWhere they can provide similar expected input to the function and decide accordingly that written code is perfectly written or if test case fails then different approach may also need to implement.\nJUNIT will make development fast and will ensure the 0 defects in the function. </p>\n", "title": "Why use JUnit for testing?", "answer_id": 25867431, "link": "http://stackoverflow.com/questions/10858990/why-use-junit-for-testing/25867431#25867431", "tags": ["java", "unit-testing", "junit", "tdd"]}, {"body": "<p>I have slightly different perspective of why JUnit is needed. </p>\n\n<p>You can actually write all test cases yourself but it's cumbersome. Here are the problems:</p>\n\n<ol>\n<li><p>Instead of <code>System.out</code> we can add <code>if(value1.equals(value2))</code> and return 0 or -1 or error message. In this case, we need a \"main\" test class which runs all these methods and checks results and maintains which test cases failed and which are passed.</p></li>\n<li><p>If you want to add some more tests you need to add them to this \"main\" test class as well. Changes to existing code. If you want to auto detect test cases from test classes, then you need to use reflection.</p></li>\n<li><p>All your tests and your main class to run tests are not detected by eclipse and you need to write custom debug/run configurations to run these tests. You still don't see those pretty green/red colored outputs though. </p></li>\n</ol>\n\n<p>Here is what JUnit is doing:</p>\n\n<ol>\n<li><p>It has <code>assertXXX()</code> methods which are useful for printing helpful error messages from the conditions and communicating results to \"main\" class.</p></li>\n<li><p>\"main\" class is called runner which is provided by JUnit, so we don't have to write any. And it detects the test methods automatically by reflection. If you add new tests with <code>@Test</code> annotation then they are automatically detected.</p></li>\n<li><p>JUnit has eclipse integration and maven/gradle integration as well, so it is easy to run tests and you will not have to write custom run configurations.</p></li>\n</ol>\n\n<p>I'm not an expert in JUnit, so that's what I understood as of now, will add more in future.</p>\n", "title": "Why use JUnit for testing?", "answer_id": 38058104, "link": "http://stackoverflow.com/questions/10858990/why-use-junit-for-testing/38058104#38058104", "tags": ["java", "unit-testing", "junit", "tdd"]}, {"body": "<p>You cannot write any test case without using testing framework or else you will have to write your testing framewok to give justice to your test cases.\nHere are some info about JUnit Framework apart from that you can use TestNG framework .</p>\n\n<p>What is Junit?</p>\n\n<p>Junit is widely used testing framework along with Java Programming Language. You can use this automation framework for both unit testing and UI testing.It helps us define the flow of execution of our code with different Annotations. Junit is built on idea of \"first testing and then coding\" which helps us to increase productivity of test cases and stability of the code.</p>\n\n<p>Important Features of Junit Testing - </p>\n\n<ol>\n<li>It is open source testing framework allowing users to write and run test cases effectively.</li>\n<li>Provides various types of annotations to identify test methods.</li>\n<li>Provides different Types of Assertions  to verify the results of test case execution.</li>\n<li>It also gives test runners for running tests effectively.</li>\n<li>It is very simple and hence saves time.</li>\n<li>It provides ways to organize your test cases in form of test suits.</li>\n<li>It gives test case results in simple and elegant way.</li>\n<li>You can integrate Jnuit with Eclipse ,Android Studio,Maven &amp; Ant</li>\n</ol>\n", "title": "Why use JUnit for testing?", "answer_id": 39482959, "link": "http://stackoverflow.com/questions/10858990/why-use-junit-for-testing/39482959#39482959", "tags": ["java", "unit-testing", "junit", "tdd"]}], "question_id": 10858990}, {"body": "<p>I'm confused. After stumbling upon <a href=\"http://stackoverflow.com/questions/625433/how-to-convert-milliseconds-to-x-mins-x-seconds-in-java\">this</a> thread, I tried to figure out how to format a countdown timer that had the format <code>hh:mm:ss</code>.</p>\n\n<p>Here's my attempt - </p>\n\n<pre><code>//hh:mm:ss\nString.format(\"%02d:%02d:%02d\", \n    TimeUnit.MILLISECONDS.toHours(millis),\n    TimeUnit.MILLISECONDS.toMinutes(millis) - \n    TimeUnit.MINUTES.toMinutes(TimeUnit.MILLISECONDS.toHours(millis)),\n    TimeUnit.MILLISECONDS.toSeconds(millis) - \n    TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millis)));   \n</code></pre>\n\n<p>So, when I try a value like <code>3600000ms</code>, I get <code>01:59:00</code>, which is wrong since it should be <code>01:00:00</code>. Obviously there's something wrong with my logic, but at the moment, I cannot see what it is!</p>\n\n<p>Can anyone help?</p>\n\n<p><strong>Edit -</strong></p>\n\n<p>Fixed it. Here's the right way to format milliseconds to <code>hh:mm:ss</code> format -</p>\n\n<pre><code>//hh:mm:ss\nString.format(\"%02d:%02d:%02d\", \n    TimeUnit.MILLISECONDS.toHours(millis),\n    TimeUnit.MILLISECONDS.toMinutes(millis) - \n    TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millis)),\n    TimeUnit.MILLISECONDS.toSeconds(millis) - \n    TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millis))));\n</code></pre>\n\n<p>The problem was this <code>TimeUnit.MINUTES.toMinutes(TimeUnit.MILLISECONDS.toHours(millis))</code>. It should have been this <code>TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millis))</code> instead.</p>\n", "tags": ["java", "time-format", "countdowntimer"], "title": "How to convert milliseconds to &quot;hh:mm:ss&quot; format?", "answer_count": 13, "creation_date": 1327622518, "score": 86, "link": "http://stackoverflow.com/questions/9027317/how-to-convert-milliseconds-to-hhmmss-format", "answers": [{"body": "<p>The generic method for this is fairly simple:</p>\n\n<pre><code>public static String convertSecondsToHMmSs(long seconds) {\n    long s = seconds % 60;\n    long m = (seconds / 60) % 60;\n    long h = (seconds / (60 * 60)) % 24;\n    return String.format(\"%d:%02d:%02d\", h,m,s);\n}\n</code></pre>\n", "title": "How to convert milliseconds to &quot;hh:mm:ss&quot; format?", "answer_id": 9027362, "link": "http://stackoverflow.com/questions/9027317/how-to-convert-milliseconds-to-hhmmss-format/9027362#9027362", "tags": ["java", "time-format", "countdowntimer"]}, {"body": "<p>You were <em>really</em> close:</p>\n\n<pre><code>String.format(\"%02d:%02d:%02d\", \nTimeUnit.MILLISECONDS.toHours(millis),\nTimeUnit.MILLISECONDS.toMinutes(millis) -  \nTimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millis)), // The change is in this line\nTimeUnit.MILLISECONDS.toSeconds(millis) - \nTimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millis)));   \n</code></pre>\n\n<p>You were converting hours to millisseconds using <em>minutes</em> instead of <em>hours</em>.</p>\n\n<p>BTW, I like your use of the <code>TimeUnit</code> API :)</p>\n\n<p>Here's some test code:</p>\n\n<pre><code>public static void main(String[] args) throws ParseException {\n    long millis = 3600000;\n    String hms = String.format(\"%02d:%02d:%02d\", TimeUnit.MILLISECONDS.toHours(millis),\n            TimeUnit.MILLISECONDS.toMinutes(millis) - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millis)),\n            TimeUnit.MILLISECONDS.toSeconds(millis) - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millis)));\n    System.out.println(hms);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>01:00:00\n</code></pre>\n\n<hr>\n\n<p>I realised that my code above can be greatly simplified by using a modulus division instead of subtraction:</p>\n\n<pre><code>String hms = String.format(\"%02d:%02d:%02d\", TimeUnit.MILLISECONDS.toHours(millis),\n    TimeUnit.MILLISECONDS.toMinutes(millis) % TimeUnit.HOURS.toMinutes(1),\n    TimeUnit.MILLISECONDS.toSeconds(millis) % TimeUnit.MINUTES.toSeconds(1));\n</code></pre>\n\n<p>Still using the <code>TimeUnit</code> API for all magic values, and gives exactly the same output.</p>\n", "title": "How to convert milliseconds to &quot;hh:mm:ss&quot; format?", "answer_id": 9027379, "link": "http://stackoverflow.com/questions/9027317/how-to-convert-milliseconds-to-hhmmss-format/9027379#9027379", "tags": ["java", "time-format", "countdowntimer"]}, {"body": "<p>Well, you could try something like this, :</p>\n\n<pre><code>public String getElapsedTimeHoursMinutesSecondsString() {       \n     long elapsedTime = getElapsedTime();  \n     String format = String.format(\"%%0%dd\", 2);  \n     elapsedTime = elapsedTime / 1000;  \n     String seconds = String.format(format, elapsedTime % 60);  \n     String minutes = String.format(format, (elapsedTime % 3600) / 60);  \n     String hours = String.format(format, elapsedTime / 3600);  \n     String time =  hours + \":\" + minutes + \":\" + seconds;  \n     return time;  \n }  \n</code></pre>\n\n<p>to convert milliseconds to a time value </p>\n", "title": "How to convert milliseconds to &quot;hh:mm:ss&quot; format?", "answer_id": 9027382, "link": "http://stackoverflow.com/questions/9027317/how-to-convert-milliseconds-to-hhmmss-format/9027382#9027382", "tags": ["java", "time-format", "countdowntimer"]}, {"body": "<pre><code>DateFormat df = new SimpleDateFormat(\"HH:mm:ss\");\nString formatted = df.format(aDateObject);\n</code></pre>\n", "title": "How to convert milliseconds to &quot;hh:mm:ss&quot; format?", "answer_id": 9027387, "link": "http://stackoverflow.com/questions/9027317/how-to-convert-milliseconds-to-hhmmss-format/9027387#9027387", "tags": ["java", "time-format", "countdowntimer"]}, {"body": "<p>If you are using apache commons:</p>\n\n<pre><code>DurationFormatUtils.formatDuration(timeInMS, \"HH:mm:ss,SSS\");\n</code></pre>\n", "title": "How to convert milliseconds to &quot;hh:mm:ss&quot; format?", "answer_id": 16324477, "link": "http://stackoverflow.com/questions/9027317/how-to-convert-milliseconds-to-hhmmss-format/16324477#16324477", "tags": ["java", "time-format", "countdowntimer"]}, {"body": "<p>I tried as shown in the first answer. It works, but minus brought me into confusion. My answer by Groovy:</p>\n\n<pre><code>import static java.util.concurrent.TimeUnit.*\n\n...\n\nprivate static String formatElapsedTime(long millis) {\n\n    int hrs = MILLISECONDS.toHours(millis) % 24\n    int min = MILLISECONDS.toMinutes(millis) % 60\n    int sec = MILLISECONDS.toSeconds(millis) % 60\n    int mls = millis % 1000\n\n    sprintf( '%02d:%02d:%02d (%03d)', [hrs, min, sec, mls])\n}\n</code></pre>\n", "title": "How to convert milliseconds to &quot;hh:mm:ss&quot; format?", "answer_id": 17861341, "link": "http://stackoverflow.com/questions/9027317/how-to-convert-milliseconds-to-hhmmss-format/17861341#17861341", "tags": ["java", "time-format", "countdowntimer"]}, {"body": "<p><strong>Test results for the 4 implementations</strong></p>\n\n<p>Having to do a lot of formatting for huge data, needed the best performance, so here are the (surprising) results:</p>\n\n<p>for (int i = 0; i &lt; 1000000; i++) {\n    FUNCTION_CALL\n}</p>\n\n<p>Durations:</p>\n\n<ul>\n<li>combinationFormatter: <strong>196</strong> millis</li>\n<li>formatDuration: <strong>272</strong> millis</li>\n<li>apacheFormat: 754 millis</li>\n<li><p>formatTimeUnit: 2216 millis</p>\n\n<pre><code>public static String apacheFormat(long millis) throws ParseException {\n    return DurationFormatUtils.formatDuration(millis, \"HH:mm:ss\");\n}\n\npublic static String formatTimeUnit(long millis) throws ParseException {\nString formatted = String.format(\n        \"%02d:%02d:%02d\",\n        TimeUnit.MILLISECONDS.toHours(millis),\n        TimeUnit.MILLISECONDS.toMinutes(millis)\n                - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millis)),\n        TimeUnit.MILLISECONDS.toSeconds(millis)\n                - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millis)));\n    return formatted;\n}\n\npublic static String formatDuration(final long millis) {\n    long seconds = (millis / 1000) % 60;\n    long minutes = (millis / (1000 * 60)) % 60;\n    long hours = millis / (1000 * 60 * 60);\n\n    StringBuilder b = new StringBuilder();\n    b.append(hours == 0 ? \"00\" : hours &lt; 10 ? String.valueOf(\"0\" + hours) : \n    String.valueOf(hours));\n    b.append(\":\");\n    b.append(minutes == 0 ? \"00\" : minutes &lt; 10 ? String.valueOf(\"0\" + minutes) :     \n    String.valueOf(minutes));\n    b.append(\":\");\n    b.append(seconds == 0 ? \"00\" : seconds &lt; 10 ? String.valueOf(\"0\" + seconds) : \n    String.valueOf(seconds));\n    return b.toString();\n}\n\npublic static String combinationFormatter(final long millis) {\n    long seconds = TimeUnit.MILLISECONDS.toSeconds(millis)\n            - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millis));\n    long minutes = TimeUnit.MILLISECONDS.toMinutes(millis)\n            - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millis));\n    long hours = TimeUnit.MILLISECONDS.toHours(millis);\n\n    StringBuilder b = new StringBuilder();\n    b.append(hours == 0 ? \"00\" : hours &lt; 10 ? String.valueOf(\"0\" + hours) : \n    String.valueOf(hours));\n    b.append(\":\");\n    b.append(minutes == 0 ? \"00\" : minutes &lt; 10 ? String.valueOf(\"0\" + minutes) : \n    String.valueOf(minutes));\n        b.append(\":\");\n    b.append(seconds == 0 ? \"00\" : seconds &lt; 10 ? String.valueOf(\"0\" + seconds) : \n    String.valueOf(seconds));\n    return b.toString(); \n }\n</code></pre></li>\n</ul>\n", "title": "How to convert milliseconds to &quot;hh:mm:ss&quot; format?", "answer_id": 21701635, "link": "http://stackoverflow.com/questions/9027317/how-to-convert-milliseconds-to-hhmmss-format/21701635#21701635", "tags": ["java", "time-format", "countdowntimer"]}, {"body": "<pre><code>// New date object from millis\nDate date = new Date(millis);\n// formattter \nSimpleDateFormat formatter= new SimpleDateFormat(\"HH:mm:ss\");\n// Pass date object\nString formatted = df.format(date );\n</code></pre>\n", "title": "How to convert milliseconds to &quot;hh:mm:ss&quot; format?", "answer_id": 24327049, "link": "http://stackoverflow.com/questions/9027317/how-to-convert-milliseconds-to-hhmmss-format/24327049#24327049", "tags": ["java", "time-format", "countdowntimer"]}, {"body": "<p>The code below does the conversion in both way </p>\n\n<p>23:59:58:999 to 86398999</p>\n\n<p>and than</p>\n\n<p>86398999 to 23:59:58:999</p>\n\n<hr>\n\n<pre><code>import java.util.concurrent.TimeUnit;\n\npublic class TimeUtility {\n\n    public static void main(String[] args) {\n\n        long currentDateTime = System.currentTimeMillis();\n\n        String strTest = \"23:59:58:999\";\n        System.out.println(strTest);\n\n        long l = strToMilli(strTest);\n        System.out.println(l);\n        l += 1;\n        String str = milliToString(l);\n        System.out.println(str);\n    }\n\n    /**\n     * convert a time string into the equivalent long milliseconds\n     *\n     * @param strTime string fomratted as HH:MM:SS:MSMS i.e. \"23:59:59:999\"\n     * @return long integer like 86399999\n     */\n    public static long strToMilli(String strTime) {\n        long retVal = 0;\n        String hour = strTime.substring(0, 2);\n        String min = strTime.substring(3, 5);\n        String sec = strTime.substring(6, 8);\n        String milli = strTime.substring(9, 12);\n        int h = Integer.parseInt(hour);\n        int m = Integer.parseInt(min);\n        int s = Integer.parseInt(sec);\n        int ms = Integer.parseInt(milli);\n\n        String strDebug = String.format(\"%02d:%02d:%02d:%03d\", h, m, s, ms);\n        //System.out.println(strDebug);\n        long lH = h * 60 * 60 * 1000;\n        long lM = m * 60 * 1000;\n        long lS = s * 1000;\n\n        retVal = lH + lM + lS + ms;\n        return retVal;\n    }\n\n    /**\n     * convert time in milliseconds to the corresponding string, in case of day\n     * rollover start from scratch 23:59:59:999 + 1 = 00:00:00:000\n     *\n     * @param millis the number of milliseconds corresponding to tim i.e.\n     *               34137999 that can be obtained as follows;\n     *               &lt;p&gt;\n     *               long lH = h * 60 * 60 * 1000; //hour to milli\n     *               &lt;p&gt;\n     *               long lM = m * 60 * 1000; // minute to milli\n     *               &lt;p&gt;\n     *               long lS = s * 1000; //seconds to milli\n     *               &lt;p&gt;\n     *               millis = lH + lM + lS + ms;\n     * @return a string formatted as HH:MM:SS:MSMS i.e. \"23:59:59:999\"\n     */\n    private static String milliToString(long millis) {\n\n        long hrs = TimeUnit.MILLISECONDS.toHours(millis) % 24;\n        long min = TimeUnit.MILLISECONDS.toMinutes(millis) % 60;\n        long sec = TimeUnit.MILLISECONDS.toSeconds(millis) % 60;\n        //millis = millis - (hrs * 60 * 60 * 1000); //alternative way\n        //millis = millis - (min * 60 * 1000);\n        //millis = millis - (sec * 1000);\n        //long mls = millis ;\n        long mls = millis % 1000;\n        String toRet = String.format(\"%02d:%02d:%02d:%03d\", hrs, min, sec, mls);\n        //System.out.println(toRet);\n        return toRet;\n    }\n}\n</code></pre>\n", "title": "How to convert milliseconds to &quot;hh:mm:ss&quot; format?", "answer_id": 29315679, "link": "http://stackoverflow.com/questions/9027317/how-to-convert-milliseconds-to-hhmmss-format/29315679#29315679", "tags": ["java", "time-format", "countdowntimer"]}, {"body": "<p>I used this:</p>\n\n<pre><code>String.format(\"%1$tH:%1$tM:%1$tS\", millis);\n</code></pre>\n\n<p>Source:\n<a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html\" rel=\"nofollow\">http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html</a></p>\n", "title": "How to convert milliseconds to &quot;hh:mm:ss&quot; format?", "answer_id": 33247218, "link": "http://stackoverflow.com/questions/9027317/how-to-convert-milliseconds-to-hhmmss-format/33247218#33247218", "tags": ["java", "time-format", "countdowntimer"]}, {"body": "<p>Going by Bohemian's answer we need need not use TimeUnit to find a known value.\nMuch more optimal code would be</p>\n\n<pre><code>String hms = String.format(\"%02d:%02d:%02d\", millisLeft/(3600*1000),\n                    millisLeft/(60*1000) % 60,\n                    millisLeft/1000 % 60);\n</code></pre>\n\n<p>Hope it helps</p>\n", "title": "How to convert milliseconds to &quot;hh:mm:ss&quot; format?", "answer_id": 37000428, "link": "http://stackoverflow.com/questions/9027317/how-to-convert-milliseconds-to-hhmmss-format/37000428#37000428", "tags": ["java", "time-format", "countdowntimer"]}, {"body": "<pre><code>        String string = String.format(\"%02d:%02d:%02d.%03d\",\n            TimeUnit.MILLISECONDS.toHours(millisecend), TimeUnit.MILLISECONDS.toMinutes(millisecend) - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millisecend)),\n            TimeUnit.MILLISECONDS.toSeconds(millisecend) - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millisecend)), millisecend - TimeUnit.SECONDS.toMillis(TimeUnit.MILLISECONDS.toSeconds(millisecend)));\n</code></pre>\n\n<p>Format: 00:00:00.000</p>\n\n<p>Example: 615605 Millisecend</p>\n\n<p>00:10:15.605</p>\n", "title": "How to convert milliseconds to &quot;hh:mm:ss&quot; format?", "answer_id": 38474616, "link": "http://stackoverflow.com/questions/9027317/how-to-convert-milliseconds-to-hhmmss-format/38474616#38474616", "tags": ["java", "time-format", "countdowntimer"]}, {"body": "<pre><code> public String millsToDateFormat(long mills) {\n\n    Date date = new Date(mills);\n    DateFormat formatter = new SimpleDateFormat(\"HH:mm:ss\");\n    String dateFormatted = formatter.format(date);\n    return dateFormatted; //note that it will give you the time in GMT+0\n}\n</code></pre>\n", "title": "How to convert milliseconds to &quot;hh:mm:ss&quot; format?", "answer_id": 39393400, "link": "http://stackoverflow.com/questions/9027317/how-to-convert-milliseconds-to-hhmmss-format/39393400#39393400", "tags": ["java", "time-format", "countdowntimer"]}], "question_id": 9027317}, {"body": "<pre><code>Integer i = ...\n\nswitch (i){\n    case null:\n        doSomething0();\n        break;    \n    }\n</code></pre>\n\n<p>In the code above I cant use null in switch case statement. How can I do this differently?\nI can't use <code>default</code> because then I want to do something else.</p>\n", "tags": ["java", "switch-statement"], "title": "How to use null in switch", "answer_count": 9, "creation_date": 1335438267, "score": 86, "link": "http://stackoverflow.com/questions/10332132/how-to-use-null-in-switch", "answers": [{"body": "<p>You can't. You can use primitives (int, char, short, byte) and String (Strings in java 7 only) in switch. primitives can't be null.<br>\nCheck <code>i</code> in separate condition before switch.</p>\n", "title": "How to use null in switch", "answer_id": 10332154, "link": "http://stackoverflow.com/questions/10332132/how-to-use-null-in-switch/10332154#10332154", "tags": ["java", "switch-statement"]}, {"body": "<p><code>switch(i)</code> will throw a NullPointerException if i is <code>null</code>, because it will try to unbox the <code>Integer</code> into an <code>int</code>. So <code>case null</code>, which happens to be illegal, would never have been reached anyway.</p>\n\n<p>You need to check that i is not null before the <code>switch</code> statement.</p>\n", "title": "How to use null in switch", "answer_id": 10332157, "link": "http://stackoverflow.com/questions/10332132/how-to-use-null-in-switch/10332157#10332157", "tags": ["java", "switch-statement"]}, {"body": "<p>You have to make a </p>\n\n<pre><code>if (i == null) {\n   doSomething0();\n} else {\n   switch (i) {\n   }\n}\n</code></pre>\n", "title": "How to use null in switch", "answer_id": 10332164, "link": "http://stackoverflow.com/questions/10332132/how-to-use-null-in-switch/10332164#10332164", "tags": ["java", "switch-statement"]}, {"body": "<p>This is not possible with a <code>switch</code> statement in Java. Check for <code>null</code> before the <code>switch</code>:</p>\n\n<pre><code>if (i == null) {\n    doSomething0();\n} else {\n    switch (i) {\n    case 1:\n        // ...\n        break;\n    }\n}\n</code></pre>\n\n<p>You can't use arbitrary objects in <code>switch</code> statements<sup>*</sup>. The reason that the compiler doesn't complain about <code>switch (i)</code> where <code>i</code> is an <code>Integer</code> is because Java auto-unboxes the <code>Integer</code> to an <code>int</code>. As assylias already said, the unboxing will throw a <code>NullPointerException</code> when <code>i</code> is <code>null</code>.</p>\n\n<p><sup>*</sup> Since Java 7 you can use <code>String</code> in <code>switch</code> statements.</p>\n", "title": "How to use null in switch", "answer_id": 10332167, "link": "http://stackoverflow.com/questions/10332132/how-to-use-null-in-switch/10332167#10332167", "tags": ["java", "switch-statement"]}, {"body": "<p>Java docs clearly stated that:</p>\n\n<p>The prohibition against using null as a switch label prevents one from writing code that can never be executed. If the switch expression is of a reference type, such as a boxed primitive type or an enum, a run-time error will occur if the expression evaluates to null at run-time.</p>\n\n<p>You must have to verify for null before Swithch statement execution. </p>\n\n<pre><code>if (i == null)\n</code></pre>\n\n<p>See <a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html\">The Switch Statement</a></p>\n\n<pre><code>case null: // will never be executed, therefore disallowed.\n</code></pre>\n", "title": "How to use null in switch", "answer_id": 10332283, "link": "http://stackoverflow.com/questions/10332132/how-to-use-null-in-switch/10332283#10332283", "tags": ["java", "switch-statement"]}, {"body": "<pre><code>switch ((i != null) ? i : DEFAULT_VALUE) {\n        //...\n}\n</code></pre>\n", "title": "How to use null in switch", "answer_id": 30601080, "link": "http://stackoverflow.com/questions/10332132/how-to-use-null-in-switch/30601080#30601080", "tags": ["java", "switch-statement"]}, {"body": "<p>Given:</p>\n\n<pre><code>public enum PersonType {\n    COOL_GUY(1),\n    JERK(2);\n\n    private final int typeId;\n    private PersonType(int typeId) {\n        this.typeId = typeId;\n    }\n\n    public final int getTypeId() {\n        return typeId;\n    }\n\n    public static PersonType findByTypeId(int typeId) {\n        for (PersonType type : values()) {\n            if (type.typeId == typeId) {\n                return type;\n            }\n        }\n        return null;\n    }\n}\n</code></pre>\n\n<p>For me, this typically aligns with a look-up table in a database (for rarely-updated tables only).</p>\n\n<p>However, when I try to use <code>findByTypeId</code> in a switch statement (from, most likely, user input)...</p>\n\n<pre><code>int userInput = 3;\nPersonType personType = PersonType.findByTypeId(userInput);\nswitch(personType) {\ncase COOL_GUY:\n    // Do things only a cool guy would do.\n    break;\ncase JERK:\n    // Push back. Don't enable him.\n    break;\ndefault:\n    // I don't know or care what to do with this mess.\n}\n</code></pre>\n\n<p>...as others have stated, this results in an NPE @ <code>switch(personType) {</code>. One work-around (i.e., \"solution\") I started implementing was to add an <code>UNKNOWN(-1)</code> type.</p>\n\n<pre><code>public enum PersonType {\n    UNKNOWN(-1),\n    COOL_GUY(1),\n    JERK(2);\n    ...\n    public static PersonType findByTypeId(int id) {\n        ...\n        return UNKNOWN;\n    }\n}\n</code></pre>\n\n<p>Now, you don't have to do null-checking where it counts and you can choose to, or not to, handle <code>UNKNOWN</code> types. (NOTE: <code>-1</code> is an unlikely identifier in a business scenario, but obviously choose something that makes sense for your use-case).</p>\n", "title": "How to use null in switch", "answer_id": 32916356, "link": "http://stackoverflow.com/questions/10332132/how-to-use-null-in-switch/32916356#32916356", "tags": ["java", "switch-statement"]}, {"body": "<blockquote>\n  <p>A switch works with the byte, short, char, and int primitive data\n  types. It also works with enumerated types (discussed in Enum Types),\n  the String class, and a few special classes that wrap certain\n  primitive types: Character, Byte, Short, and Integer (discussed in\n  Numbers and Strings).</p>\n  \n  <p>Since null has no type, and is not an instance of anything, it will\n  not work with a switch statement.</p>\n</blockquote>\n\n<ol>\n<li><p>Simple if statement inside switch: </p>\n\n<pre><code>//if 'i' different from 'null' return 'i' else return 'DEFAULT'\nswitch(i != null ? i : DEFAULT) {       \n\n   case DEFAULT: \n\n        break;\n}\n</code></pre></li>\n<li><p>Or if you switch on String:</p>\n\n<pre><code> String i = null;\n // equal to -&gt; value != null ? value.toString() \n i = String.valueOf(i); : \"null\";\n switch(i) {\n case \"null\": \n       break;\n }\n</code></pre></li>\n<li><p>Last solution without null checking:</p></li>\n</ol>\n\n<p><strong>Yes!!! I love to use TRY / CATCH  or THROW new Exception as IF / ELSE replacement :)</strong> </p>\n\n<pre><code>    Integer i = null;\n\n    try{\n    switch (i) {}\n    } catch(NullPointerException npx) {\n       // VM implementation specific message -&gt;\n       // Caused by: java.lang.NullPointerException: \n       // Attempt to invoke virtual method \n       // 'int java.lang.Integer.intValue()' on a null object reference\n\n        // you need to ensure child method don't throw  npx \n        // or throws some other exception in replacement of npx \n        if(npx.getMessage().indexOf(\"java.lang.Integer.intValue()\")&gt;=0) {\n            // handle null\n        }\n    }\n</code></pre>\n\n<p><strong>edit - in reply:</strong></p>\n\n<p><em>For your last solution: Don't program Python in Java. \u2013 glglgl Feb 15 at 14:33</em></p>\n\n<p><em>...I meant to say: In Python, exceptions are considered as a normal flow control method (EAFP). In Java, they are considered as what their name says: exceptions. They are quite expensive and should be used with care. Unlike in Python, use TRY / CATCH or THROW new Exception as IF / ELSE replacement is not good here. \u2013 glglgl</em></p>\n\n<h1>Programming with Exceptions</h1>\n\n<blockquote>\n  <p>Exceptions can be used to help write robust <strong>^1</strong> programs. They provide an organized and structured approach to robustness. Without exceptions, a program can become cluttered with if statements that test for various possible error conditions. With exceptions, it becomes possible to write a clean implementation of an algorithm that will handle all the normal cases. The exceptional cases can be handled elsewhere, in a catch clause of a try statement.</p>\n</blockquote>\n\n<p>When a program encounters an exceptional condition and has no way of handling it immediately, the program can throw an exception. In some cases, it makes sense to throw an exception belonging to one of Java's predefined classes, such as IllegalArgumentException or IOException. However, if there is no standard class that adequately represents the exceptional condition, the programmer can define a new exception class. The new class must extend the standard class Throwable or one of its subclasses. In general, if the programmer does not want to require mandatory exception handling, the new class will extend RuntimeException (or one of its subclasses). To create a new checked exception class, which does require mandatory handling, the programmer can extend one of the other subclasses of Exception or can extend Exception itself.</p>\n\n<p>Here, for example, is a class that extends Exception, and therefore requires mandatory exception handling when it is used:</p>\n\n<pre><code>public class ParseError extends Exception {\n   public ParseError(String message) {\n         // Create a ParseError object containing\n         // the given message as its error message.\n      super(message);\n   }\n}\n</code></pre>\n\n<p><strong>^1</strong> one place where correctness and robustness are important -- and especially difficult -- is in the processing of input data, whether that data is typed in by the user, read from a file, or received over a network. </p>\n\n<p><strong>even better here i can gave you an example for android app:</strong></p>\n\n<pre><code>/**\n * start catcher on main thread loop\n *\n * @param context - app or any other context\n * @param handler - handler to post any background thread exceptions to ui thread\n */\npublic static void startCatcher(Context context, Handler handler) {\n    /** grab app default exception handler */\n    Thread.UncaughtExceptionHandler systemUncaughtHandler = Thread.getDefaultUncaughtExceptionHandler();\n    /** the following handler is used to catch exceptions thrown in background threads */\n    LogsExceptionHandler logsExceptionHandler = new LogsExceptionHandler(context, systemUncaughtHandler, handler);\n    /** set to app our handler as default one */\n    Thread.setDefaultUncaughtExceptionHandler(logsExceptionHandler);\n    /** loop while any exception in main looper */\n    while (true) try {\n        /** start message que loop */\n        App.log.info(\"Starting crash catch Looper\");\n        Looper.loop();\n        /** if we exit unexpectedly set app default handler to initial one */\n        Thread.setDefaultUncaughtExceptionHandler(systemUncaughtHandler);\n        /** and throw Runtime exception */\n        throw new RuntimeException(\"Main thread loop unexpectedly exited\");\n        /** catch */\n    } catch (LogsExceptionHandler.BackgroundException e) {\n        /** log and start exit hook same as for main ui caught exception */\n        String message = \"Caught the exception in the background thread \" + e.getThreadName() + \", TID: \" + e.getTid() + \" cause: \" + e.getCause();\n        App.log.debug(message);\n        logsExceptionHandler.startHook(e);\n    } catch (Throwable e) {\n        /** log and start exit hook for caught exception */\n        App.log.debug(\"Caught the exception in the UI thread, e: {}\", e);\n        logsExceptionHandler.startHook(e);\n    }\n}\n</code></pre>\n", "title": "How to use null in switch", "answer_id": 34843946, "link": "http://stackoverflow.com/questions/10332132/how-to-use-null-in-switch/34843946#34843946", "tags": ["java", "switch-statement"]}, {"body": "<p>Some libraries attempt to offer alternatives to the builtin java <code>switch</code> statement. <a href=\"http://www.javaslang.io\" rel=\"nofollow\">Javaslang</a> is one of them, they generalize it to pattern matching.</p>\n\n<p>Here is an example from <a href=\"http://www.javaslang.io/javaslang-docs/#_pattern_matching\" rel=\"nofollow\">their documentation</a>:</p>\n\n<pre><code>String s = Match(i).of(\n    Case(is(1), \"one\"),\n    Case(is(2), \"two\"),\n    Case($(), \"?\")\n);\n</code></pre>\n\n<p>You can use any predicate, but they offer many of them out of the box, and <code>is(null)</code> is perfectly legal. I find this a more elegant solution than the alternatives, but this requires java8 and a dependency on the javaslang library...</p>\n", "title": "How to use null in switch", "answer_id": 37460538, "link": "http://stackoverflow.com/questions/10332132/how-to-use-null-in-switch/37460538#37460538", "tags": ["java", "switch-statement"]}], "question_id": 10332132}, {"body": "<p>I've recently been looking through my warnings in Eclipse and come across this one:</p>\n\n<p><img src=\"http://i.stack.imgur.com/6itZv.png\" alt=\"static warning\"></p>\n\n<p>It will give a compiler warning if the method can be declared as static.</p>\n\n<p><strong>[edit]</strong> Exact quote within the Eclipse help, with stress on private and final:</p>\n\n<blockquote>\n  <p>When enabled, the compiler will issue an error or a warning for\n  methods which are <strong>private</strong> or <strong>final</strong> and which refer only to static\n  members.</p>\n</blockquote>\n\n<p>Yes I know I can turn it off, but I want to <strong>know the reason for turning it on?</strong></p>\n\n<p><strong>Why would it be a good thing to declare every method possible as static?</strong></p>\n\n<p>Will this give any performance benefits? (in a mobile domain)</p>\n\n<p>Pointing out a method as static, I suppose is showing that you don't use any instance variables therefore could be moved to a utils style class?</p>\n\n<p>At the end of the day should I just turn this off 'ignore' or should I fix the 100+ warnings it has given me?</p>\n\n<p>Do you think this is just extra keywords that <em>dirty</em> the code, as the compiler will just inlines these methods anyway? (kind of like you don't declare every variable you can final <em>but you could</em>). </p>\n", "tags": ["java", "optimization", "coding-style", "static"], "title": "What is the gain from declaring a method as static", "answer_count": 9, "creation_date": 1340869472, "score": 86, "link": "http://stackoverflow.com/questions/11240178/what-is-the-gain-from-declaring-a-method-as-static", "answers": [{"body": "<p>Whenever you write a method, you fulfill a contract in a given scope. The narrower the scope is, the smaller the chance is that you write a bug.</p>\n\n<p>When a method is static, you can't access non-static members; hence, your scope is narrower. So, if you don't need <strong><em>and will never need (even in subclasses)</em></strong> non-static members to fulfill your contract, why give access to these fields to your method? Declaring the method <code>static</code> in this case will let the compiler check that you don't use members that you do not intend to use.</p>\n\n<p>And moreover, it will help people reading your code understand the nature of the contract.</p>\n\n<p>That's why it's considered good to declare a method <code>static</code> when it's actually implementing a static contract.</p>\n\n<hr>\n\n<p><strong>Edit from comments: (tx owlstead)</strong></p>\n\n<p>In some cases, your method only means something relative to an instance of your class, and it happens that its implementation doesn't actually use any non-static field or instance. In such cases, you would not mark the method <code>static</code>.</p>\n\n<p>Examples of where you would not use the <code>static</code> keyword: </p>\n\n<ul>\n<li>An extension hook which does nothing (but could do something with instance data in a subclass)</li>\n<li>A very simple default behavior meant to be customisable in a subclass.</li>\n<li>Event handler implementation: implementation will vary with the class of the event handler but will not use any property of the event handler instance.</li>\n</ul>\n", "title": "What is the gain from declaring a method as static", "answer_id": 11240227, "link": "http://stackoverflow.com/questions/11240178/what-is-the-gain-from-declaring-a-method-as-static/11240227#11240227", "tags": ["java", "optimization", "coding-style", "static"]}, {"body": "<p>There is no concept with optimization here.</p>\n\n<p>A <code>static</code> method is <code>static</code> because you explicitly declare that method doesn't rely on any instance the enclosing class just because it doesn't need to. So that Eclipse warning, as stated in documentation:</p>\n\n<blockquote>\n  <p>When enabled, the compiler will issue an error or a warning for methods which are private or final and which refer only to static members.</p>\n</blockquote>\n\n<p>If you don't need any instance variable and your method is private (can't be called from outside) or final (can't be overriden) then there is no reason to let it be a normal method instead that a static one. A static method is inherently safer even just because you are allowed to do less things with it (it doesn't need any instance, you don't have any implicit <code>this</code> object).</p>\n", "title": "What is the gain from declaring a method as static", "answer_id": 11240271, "link": "http://stackoverflow.com/questions/11240178/what-is-the-gain-from-declaring-a-method-as-static/11240271#11240271", "tags": ["java", "optimization", "coding-style", "static"]}, {"body": "<p>The methods you can declare as static are the ones that don't require instantiation, such as </p>\n\n<pre><code>public class MyClass\n{\n    public static string InvertText(string text)\n    {\n        return text.Invert();\n    }\n}\n</code></pre>\n\n<p>Which you can then in return call out in any other class without instanciating that class.</p>\n\n<pre><code>public class MyClassTwo\n{\n    public void DoSomething()\n    {\n        var text = \"hello world\";\n        Console.Write(MyClass.InvertText(text));\n    }\n}\n</code></pre>\n\n<p>... But that's something you probably already know. It doesn't give you any real benefits per se, other than making it more clear that the method doesn't use any instance variables.</p>\n\n<p>In other words, you can most safely just turn it off completely. If you know you will never use a method in other classes (in which case it should just be private), you don't need it to be static at all. </p>\n", "title": "What is the gain from declaring a method as static", "answer_id": 11240286, "link": "http://stackoverflow.com/questions/11240178/what-is-the-gain-from-declaring-a-method-as-static/11240286#11240286", "tags": ["java", "optimization", "coding-style", "static"]}, {"body": "<p>I've no info on the performance, I suppose it is marginally better at most, since the code does not need to do dynamic dispatch based on the type. </p>\n\n<p>However, a much stronger argument against refactoring into static methods is that currently using static is considered bad practice. Static methods / variables do not integrate well into an object oriented language and also, hard to test properly. This is the reason why some newer languages forego the concept of static methods/variables altogether, or try to internalize it into the language in a way that plays better with OO (eg Objects in Scala).</p>\n\n<p>Most of the time, you need static methods to implement functions that are only using parameters as an input and producing an output using that (eg utility/helper functions) In modern languages, there is a first class Function concept that allows that, so static is not needed. Java 8 will have lambda expressions integrated, so we are moving into this direction already.</p>\n", "title": "What is the gain from declaring a method as static", "answer_id": 11240304, "link": "http://stackoverflow.com/questions/11240178/what-is-the-gain-from-declaring-a-method-as-static/11240304#11240304", "tags": ["java", "optimization", "coding-style", "static"]}, {"body": "<p>See Samuel's answer on how the scope of the method changes.\nI guess, this is the main aspect of making a method static.</p>\n\n<p>You also asked about performance:</p>\n\n<p>There might be a tiny performance gain, because a call to a static method\ndoes not need the implicit \"this\" reference as parameter.</p>\n\n<p>However, this performance impact is really tiny. Therefore, it's all about the scope.</p>\n", "title": "What is the gain from declaring a method as static", "answer_id": 11240338, "link": "http://stackoverflow.com/questions/11240178/what-is-the-gain-from-declaring-a-method-as-static/11240338#11240338", "tags": ["java", "optimization", "coding-style", "static"]}, {"body": "<p>Well, the Eclipse documentation says about the warning in question:</p>\n\n<blockquote>\n  <p><strong>Method can be static</strong></p>\n  \n  <p>When enabled, the compiler will issue an error or a warning for\n  methods which are private or final and which refer only to static\n  members</p>\n</blockquote>\n\n<p>I think it pretty much says it all. If the method is private and final and only refers to static members, the method in question might just as well be declared static and by this, make evident that we only intend to access static content from it.</p>\n\n<p>I honestly don't think there is any other mysterious reason behind it.</p>\n", "title": "What is the gain from declaring a method as static", "answer_id": 11318188, "link": "http://stackoverflow.com/questions/11240178/what-is-the-gain-from-declaring-a-method-as-static/11318188#11318188", "tags": ["java", "optimization", "coding-style", "static"]}, {"body": "<p><strong>1.</strong> Declaring method <code>static</code> gives slight performance benefit, but what is more useful, it allows using it without having an object instance at hand (think of for example about factory method or getting a singleton). It also serves the documentational purpose of telling the nature of the method. This documentational purpose should not be ignored, as it gives immediate hint about the nature of the method to the readers of the code and users of the API and also serves as a tool of thinking for the original programmer - being explicit about the intended meaning helps you also think straight and produce better quality code (I think based on my personal experience, but people are different). For example, it is logical and hence desirable to distinguish between methods operating on a type and methods acting on an instance of the type (as pointed out by <a href=\"http://stackoverflow.com/a/169868/709646\">Jon Skeet in his comment to a C# question</a>). </p>\n\n<p>Yet another use case for <code>static</code> methods is to mimic procedural programming interface. Think of <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/System.html\" rel=\"nofollow\"><code>java.lang.System.println()</code></a> class and the methods and attributes therein. The class <code>java.lang.System</code> is used like a grouping name space rather than an instantiable object.</p>\n\n<p><strong>2.</strong> How can Eclipse (or any other programmed or other kind of - biocomposable or non-biocomposable - entity) know for sure which method could be declared as static? Even if a base class is not accessing instance variables or calling non-static methods, by the mechanism of inheritance the things can change. Only if the method cannot be overridden by inheriting subclass, can we claim with 100% certainty that the method really can be declared <code>static</code>. Overriding a method is impossible exactly in the two cases of being </p>\n\n<ol>\n<li><code>private</code> (no subclass can use it directly and does not even in principle know about it), or</li>\n<li><code>final</code> (even if accessible by the subclass, there is no way to change the method to refer to instance data or functions).</li>\n</ol>\n\n<p>Hence the logic of the Eclipse option.</p>\n\n<p><strong>3.</strong> The original poster also asks: \"<em>Pointing out a method as static, I suppose is showing that you don't use any instance variables therefore could be moved to a utils style class?</em>\" This is a very good point. Sometimes this kind of design change is indicated by the warning.</p>\n\n<p>It is very useful an option, which I would personally make sure to enable, were I to use Eclipse and were I to program in Java.</p>\n", "title": "What is the gain from declaring a method as static", "answer_id": 11322850, "link": "http://stackoverflow.com/questions/11240178/what-is-the-gain-from-declaring-a-method-as-static/11322850#11322850", "tags": ["java", "optimization", "coding-style", "static"]}, {"body": "<p>From the Android Performance guidelines: </p>\n\n<blockquote>\n  <p>Prefer Static Over Virtual If you don't need to access an object's\n  fields, make your method static. Invocations will be about 15%-20%\n  faster. It's also good practice, because you can tell from the method\n  signature that calling the method can't alter the object's state.</p>\n</blockquote>\n\n<p><a href=\"http://developer.android.com/training/articles/perf-tips.html#PreferStatic\" rel=\"nofollow\">http://developer.android.com/training/articles/perf-tips.html#PreferStatic</a></p>\n", "title": "What is the gain from declaring a method as static", "answer_id": 17703624, "link": "http://stackoverflow.com/questions/11240178/what-is-the-gain-from-declaring-a-method-as-static/17703624#17703624", "tags": ["java", "optimization", "coding-style", "static"]}, {"body": "<p>I was missing some numbers for the speed differences. So I tried to benchmark them which turned out to be not so easy: <a href=\"https://stackoverflow.com/questions/24882946/java-loop-gets-slower-after-some-runs-jits-fault?noredirect=1#comment38666050_24882946\">Java loop gets slower after some runs / JIT&#39;s fault?</a></p>\n\n<p>I finally used Caliper and the results are the same as running my tests by hand:</p>\n\n<p><strong>There is no measurable difference for static/dynamic calls.</strong> At least not for Linux/AMD64/Java7.</p>\n\n<p>The Caliper Results are here: <a href=\"https://microbenchmarks.appspot.com/runs/1426eac9-36ca-48f0-980f-0106af064e8f#r:scenario.benchmarkSpec.methodName,scenario.vmSpec.options.CMSLargeCoalSurplusPercent,scenario.vmSpec.options.CMSLargeSplitSurplusPercent,scenario.vmSpec.options.CMSSmallCoalSurplusPercent,scenario.vmSpec.options.CMSSmallSplitSurplusPercent,scenario.vmSpec.options.FLSLargestBlockCoalesceProximity,scenario.vmSpec.options.G1ConcMarkStepDurationMillis\" rel=\"nofollow\">https://microbenchmarks.appspot.com/runs/1426eac9-36ca-48f0-980f-0106af064e8f#r:scenario.benchmarkSpec.methodName,scenario.vmSpec.options.CMSLargeCoalSurplusPercent,scenario.vmSpec.options.CMSLargeSplitSurplusPercent,scenario.vmSpec.options.CMSSmallCoalSurplusPercent,scenario.vmSpec.options.CMSSmallSplitSurplusPercent,scenario.vmSpec.options.FLSLargestBlockCoalesceProximity,scenario.vmSpec.options.G1ConcMarkStepDurationMillis</a></p>\n\n<p>and my own results are:</p>\n\n<pre><code>Static: 352 ms\nDynamic: 353 ms\nStatic: 348 ms\nDynamic: 349 ms\nStatic: 349 ms\nDynamic: 348 ms\nStatic: 349 ms\nDynamic: 344 ms\n</code></pre>\n\n<p>The Caliper Test class was:</p>\n\n<pre><code>public class TestPerfomanceOfStaticMethodsCaliper extends Benchmark {\n\n    public static void main( String [] args ){\n\n        CaliperMain.main( TestPerfomanceOfStaticMethodsCaliper.class, args );\n    }\n\n    public int timeAddDynamic( long reps ){\n        int r=0;\n        for( int i = 0; i &lt; reps; i++ ) {\n            r |= addDynamic( 1, i );\n        }\n        return r;\n    }\n\n    public int timeAddStatic( long reps ){\n        int r=0;\n        for( int i = 0; i &lt; reps; i++ ) {\n            r |= addStatic( 1, i );\n        }\n        return r;\n    }\n\n    public int addDynamic( int a, int b ){\n\n        return a+b;\n    }\n\n    private static int addStatic( int a, int b ){\n\n        return a+b;\n    }\n\n}\n</code></pre>\n\n<p>And my own Test class was:</p>\n\n<pre><code>public class TestPerformanceOfStaticVsDynamicCalls {\n\n    private static final int RUNS = 1_000_000_000;\n\n    public static void main( String [] args ) throws Exception{\n\n        new TestPerformanceOfStaticVsDynamicCalls().run();\n    }\n\n    private void run(){\n\n        int r=0;\n        long start, end;\n\n        for( int loop = 0; loop&lt;10; loop++ ){\n\n            // Benchmark\n\n            start = System.currentTimeMillis();\n            for( int i = 0; i &lt; RUNS; i++ ) {\n                r += addStatic( 1, i );\n            }\n            end = System.currentTimeMillis();\n            System.out.println( \"Static: \" + ( end - start ) + \" ms\" );\n\n            start = System.currentTimeMillis();\n            for( int i = 0; i &lt; RUNS; i++ ) {\n                r += addDynamic( 1, i );\n            }\n            end = System.currentTimeMillis();\n            System.out.println( \"Dynamic: \" + ( end - start ) + \" ms\" );\n\n            // Do something with r to keep compiler happy\n            System.out.println( r );\n\n        }\n\n    }\n\n    private int addDynamic( int a, int b ){\n\n        return a+b;\n    }\n\n    private static int addStatic( int a, int b ){\n\n        return a+b;\n    }\n\n}\n</code></pre>\n", "title": "What is the gain from declaring a method as static", "answer_id": 24892394, "link": "http://stackoverflow.com/questions/11240178/what-is-the-gain-from-declaring-a-method-as-static/24892394#24892394", "tags": ["java", "optimization", "coding-style", "static"]}], "question_id": 11240178}, {"body": "<p>I am new to Mockito.</p>\n\n<p>Given the class below, how can I use Mockito to verify that <code>someMethod</code> was invoked exactly once after <code>foo</code> was invoked?</p>\n\n<pre><code>public class Foo\n{\n    public void foo(){\n        Bar bar = new Bar();\n        bar.someMethod();\n    }\n}\n</code></pre>\n\n<p>I would like to make the following verification call,</p>\n\n<pre><code>verify(bar, times(1)).someMethod();\n</code></pre>\n\n<p>where <code>bar</code> is a mocked instance of <code>Bar</code>.</p>\n", "tags": ["java", "unit-testing", "junit", "mockito"], "title": "Mockito : how to verify method was called on an object created within a method?", "answer_count": 6, "creation_date": 1332515371, "score": 86, "link": "http://stackoverflow.com/questions/9841623/mockito-how-to-verify-method-was-called-on-an-object-created-within-a-method", "answers": [{"body": "<p>The classic response is, \"You don't.\"  You test the public API of <code>Foo</code>, not its internals.</p>\n\n<p>Is there any behavior of the <code>Foo</code> object (or, less good, some other object in the environment) that is affected by <code>foo()</code>?  If so, test that.  And if not, what does the method do?</p>\n", "title": "Mockito : how to verify method was called on an object created within a method?", "answer_id": 9841748, "link": "http://stackoverflow.com/questions/9841623/mockito-how-to-verify-method-was-called-on-an-object-created-within-a-method/9841748#9841748", "tags": ["java", "unit-testing", "junit", "mockito"]}, {"body": "<p><a href=\"http://en.wikipedia.org/wiki/Dependency_injection\">Dependency Injection</a></p>\n\n<p>If you inject the Bar instance, or a factory that is used for creating the Bar instance (or one of the other 483 ways of doing this), you'd have the access necessary to do perform the test.</p>\n\n<p>Factory Example:</p>\n\n<p>Given a Foo class written like this: </p>\n\n<pre><code>public class Foo {\n  private BarFactory barFactory;\n\n  public Foo(BarFactory factory) {\n    this.barFactory = factory;\n  }\n\n  public void foo() {\n    Bar bar = this.barFactory.createBar();\n    bar.someMethod();\n  }\n}\n</code></pre>\n\n<p>in your test method you can inject a BarFactory like this:</p>\n\n<pre><code>@Test\npublic void testDoFoo() {\n  Bar bar = mock(Bar.class);\n  BarFactory myFactory = new BarFactory() {\n    public void createBar() { return bar;}\n  };\n\n  Foo foo = new Foo(myFactory);\n  foo.foo();\n\n  verify(bar, times(1)).someMethod();\n}\n</code></pre>\n\n<p>Bonus: This is an example of how TDD can drive the design of your code.</p>\n", "title": "Mockito : how to verify method was called on an object created within a method?", "answer_id": 9841929, "link": "http://stackoverflow.com/questions/9841623/mockito-how-to-verify-method-was-called-on-an-object-created-within-a-method/9841929#9841929", "tags": ["java", "unit-testing", "junit", "mockito"]}, {"body": "<p>Yes, if you really want / need to do it you can use PowerMock. This should be considered a last resort. With PowerMock you can cause it to return a mock from the call to the constructor. Then do the verify on the mock. That said, csturtz's is the \"right\" answer.</p>\n\n<p>Here is the link to <a href=\"http://code.google.com/p/powermock/wiki/MockConstructor\" rel=\"nofollow\">Mock construction of new objects</a></p>\n", "title": "Mockito : how to verify method was called on an object created within a method?", "answer_id": 9843132, "link": "http://stackoverflow.com/questions/9841623/mockito-how-to-verify-method-was-called-on-an-object-created-within-a-method/9843132#9843132", "tags": ["java", "unit-testing", "junit", "mockito"]}, {"body": "<p>If you don't want to use DI or Factories. You can refactor your class in a little tricky way:</p>\n\n<pre><code>public class Foo {\n    private Bar bar;\n\n    public void foo(Bar bar){\n        this.bar = (bar != null) ? bar : new Bar();\n        bar.someMethod();\n        this.bar = null;  // for simulating local scope\n    }\n}\n</code></pre>\n\n<p>And your test class:</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class FooTest {\n    @Mock Bar barMock;\n    Foo foo;\n\n    @Test\n    public void testFoo() {\n       foo = new Foo();\n       foo.foo(barMock);\n       verify(barMock, times(1)).someMethod();\n    }\n}\n</code></pre>\n\n<p>Then the class that is calling your foo method will do it like this:</p>\n\n<pre><code>public class thirdClass {\n\n   public void someOtherMethod() {\n      Foo myFoo = new Foo();\n      myFoo.foo(null);\n   }\n}\n</code></pre>\n\n<p>As you can see when calling the method this way, you don't need to import the Bar class in any other class that is calling your foo method which is maybe something you want.</p>\n\n<p>Of course the downside is that you are allowing the caller to set the Bar Object. </p>\n\n<p>Hope it helps.</p>\n", "title": "Mockito : how to verify method was called on an object created within a method?", "answer_id": 20670241, "link": "http://stackoverflow.com/questions/9841623/mockito-how-to-verify-method-was-called-on-an-object-created-within-a-method/20670241#20670241", "tags": ["java", "unit-testing", "junit", "mockito"]}, {"body": "<p>Solution for your example code using  <code>PowerMockito.whenNew</code></p>\n\n<ul>\n<li>mockito-all 1.10.8</li>\n<li>powermock-core 1.6.1</li>\n<li>powermock-module-junit4 1.6.1</li>\n<li>powermock-api-mockito 1.6.1</li>\n<li>junit 4.12</li>\n</ul>\n\n<p><strong>FooTest.java</strong></p>\n\n<pre><code>package foo;\n\nimport org.junit.After;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.Mock;\nimport org.mockito.Mockito;\nimport org.powermock.api.mockito.PowerMockito;\nimport org.powermock.core.classloader.annotations.PrepareForTest;\nimport org.powermock.modules.junit4.PowerMockRunner;\n\n//Both @PrepareForTest and @RunWith are needed for `whenNew` to work \n@RunWith(PowerMockRunner.class)\n@PrepareForTest({ Foo.class })\npublic class FooTest {\n\n    // Class Under Test\n    Foo cut;\n\n    @Mock\n    Bar barMock;\n\n    @Before\n    public void setUp() throws Exception {\n        cut = new Foo();\n\n    }\n\n    @After\n    public void tearDown() {\n        cut = null;\n\n    }\n\n    @Test\n    public void testFoo() throws Exception {\n\n        // Setup\n        PowerMockito.whenNew(Bar.class).withNoArguments()\n                .thenReturn(this.barMock);\n\n        // Test\n        cut.foo();\n\n        // Validations\n        Mockito.verify(this.barMock, Mockito.times(1)).someMethod();\n\n    }\n\n}\n</code></pre>\n\n<p><strong>JUnit Output</strong>\n<a href=\"http://i.stack.imgur.com/gHdue.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/gHdue.png\" alt=\"JUnit Output\"></a></p>\n", "title": "Mockito : how to verify method was called on an object created within a method?", "answer_id": 34750185, "link": "http://stackoverflow.com/questions/9841623/mockito-how-to-verify-method-was-called-on-an-object-created-within-a-method/34750185#34750185", "tags": ["java", "unit-testing", "junit", "mockito"]}, {"body": "<p>I think Mockito <code>@InjectMocks</code> is the way to go. </p>\n\n<p>Depending on your intention you can use:</p>\n\n<ol>\n<li>Constructor injection</li>\n<li>Property setter injection</li>\n<li>Field injection</li>\n</ol>\n\n<p>More info in <a href=\"http://site.mockito.org/mockito/docs/current/org/mockito/InjectMocks.html\" rel=\"nofollow\">docs</a></p>\n\n<p>Below is an example with field injection:</p>\n\n<p>Classes:</p>\n\n<pre><code>public class Foo\n{\n    private Bar bar = new Bar();\n\n    public void foo() \n    {\n        bar.someMethod();\n    }\n}\n\npublic class Bar\n{\n    public void someMethod()\n    {\n         //something\n    }\n}\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class FooTest\n{\n    @Mock\n    Bar bar;\n\n    @InjectMocks\n    Foo foo;\n\n    @Test\n    public void FooTest()\n    {\n        doNothing().when( bar ).someMethod();\n        foo.foo();\n        verify(bar, times(1)).someMethod();\n    }\n}\n</code></pre>\n", "title": "Mockito : how to verify method was called on an object created within a method?", "answer_id": 36541291, "link": "http://stackoverflow.com/questions/9841623/mockito-how-to-verify-method-was-called-on-an-object-created-within-a-method/36541291#36541291", "tags": ["java", "unit-testing", "junit", "mockito"]}], "question_id": 9841623}, {"body": "<p>I have a String with an unknown length that looks something like this</p>\n\n<pre><code>\"dog, cat, bear, elephant, ..., giraffe\"\n</code></pre>\n\n<p>What would be the optimal way to divide this string at the commas so each word could become an element of an ArrayList?</p>\n\n<p>For example</p>\n\n<pre><code>List&lt;String&gt; strings = new ArrayList&lt;Strings&gt;();\n// Add the data here so strings.get(0) would be equal to \"dog\",\n// strings.get(1) would be equal to \"cat\" and so forth.\n</code></pre>\n", "tags": ["java", "string", "split"], "title": "How to split a comma-separated string?", "answer_count": 8, "creation_date": 1337240621, "score": 85, "link": "http://stackoverflow.com/questions/10631715/how-to-split-a-comma-separated-string", "answers": [{"body": "<p>You could do this:</p>\n\n<pre><code>String str = \"...\";\nList&lt;String&gt; elephantList = Arrays.asList(str.split(\",\"));\n</code></pre>\n\n<p>Basically the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29\"><code>.split()</code></a> method will split the string according to (in this case) delimiter you are passing and will return an array of strings. </p>\n\n<p>However, you seem to be after a List of Strings rather than an array, so the array must be turned into a list by using the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList%28T...%29\"><code>Arrays.asList()</code></a> utility. Just as an FYI you could also do something like so:</p>\n\n<pre><code>String str = \"...\";\nArrayList&lt;String&gt; elephantList = Arrays.asList(str.split(\",\"));\n</code></pre>\n\n<p>But it is usually better practice to program to an interface rather than to an actual concrete implementation, so I would recommend the 1st option.</p>\n", "title": "How to split a comma-separated string?", "answer_id": 10631738, "link": "http://stackoverflow.com/questions/10631715/how-to-split-a-comma-separated-string/10631738#10631738", "tags": ["java", "string", "split"]}, {"body": "<p>Well, you want to <strong>split</strong>, right?</p>\n\n<pre><code>String animals = \"dog, cat, bear, elephant, giraffe\";\n\nString[] animalsArray = animals.split(\",\");\n</code></pre>\n\n<p>If you want to additionally get rid of whitespaces around items:</p>\n\n<pre><code>String[] animalsArray = animals.split(\"\\\\s*,\\\\s*\");\n</code></pre>\n", "title": "How to split a comma-separated string?", "answer_id": 10631740, "link": "http://stackoverflow.com/questions/10631715/how-to-split-a-comma-separated-string/10631740#10631740", "tags": ["java", "string", "split"]}, {"body": "<p>A small improvement: above solutions will not remove leading or trailing spaces in the actual String. It's better to call trim before calling split.\nInstead of this,</p>\n\n<pre><code> String[] animalsArray = animals.split(\"\\\\s*,\\\\s*\");\n</code></pre>\n\n<p>use</p>\n\n<pre><code> String[] animalsArray = animals.trim().split(\"\\\\s*,\\\\s*\");\n</code></pre>\n", "title": "How to split a comma-separated string?", "answer_id": 20518948, "link": "http://stackoverflow.com/questions/10631715/how-to-split-a-comma-separated-string/20518948#20518948", "tags": ["java", "string", "split"]}, {"body": "<p>First you can split names like this</p>\n\n<pre><code>String animals = \"dog, cat, bear, elephant,giraffe\";\n\nString animals_list[] = animals.split(\",\");\n</code></pre>\n\n<p>to Access your animals </p>\n\n<pre><code>String animal1 = animals_list[0];\nString animal2 = animals_list[1];\nString animal3 = animals_list[2];\nString animal4 = animals_list[3];\n</code></pre>\n\n<p>And also you want to remove white spaces and comma around animal names</p>\n\n<pre><code>String animals_list[] = animals.split(\"\\\\s*,\\\\s*\");\n</code></pre>\n", "title": "How to split a comma-separated string?", "answer_id": 29963826, "link": "http://stackoverflow.com/questions/10631715/how-to-split-a-comma-separated-string/29963826#29963826", "tags": ["java", "string", "split"]}, {"body": "<p>There is a function called <code>replaceAll()</code> that can remove all whitespaces by replacing them with whatever you want. As an example</p>\n\n<pre><code>String str=\"  15. 9 4;16.0 1\"\nString firstAndSecond[]=str.replaceAll(\"\\\\s\",\"\").split(\";\");\nSystem.out.println(\"First:\"+firstAndSecond[0]+\", Second:\"+firstAndSecond[1]);\n</code></pre>\n\n<p>will give you:</p>\n\n<pre><code>First:15.94, Second:16.01\n</code></pre>\n", "title": "How to split a comma-separated string?", "answer_id": 30270403, "link": "http://stackoverflow.com/questions/10631715/how-to-split-a-comma-separated-string/30270403#30270403", "tags": ["java", "string", "split"]}, {"body": "<p>For completeness, using the <a href=\"https://code.google.com/p/guava-libraries/\" rel=\"nofollow\">Guava</a> library, you'd do:   <code>Splitter.on(\",\").split(\u201cdog,cat,fox\u201d)</code></p>\n\n<p>Another example:</p>\n\n<pre><code>String animals = \"dog,cat, bear,elephant , giraffe ,  zebra  ,walrus\";\nList&lt;String&gt; l = Lists.newArrayList(Splitter.on(\",\").trimResults().split(animals));\n// -&gt; [dog, cat, bear, elephant, giraffe, zebra, walrus]\n</code></pre>\n\n<p><code>Splitter.split()</code> returns an Iterable, so if you need a List, wrap it in <code>Lists.newArrayList()</code> as above. Otherwise just go with the Iterable, for example: </p>\n\n<pre><code>for (String animal : Splitter.on(\",\").trimResults().split(animals)) {\n    // ...\n}\n</code></pre>\n\n<p>Note how <code>trimResults()</code> handles all your trimming needs without having to <a href=\"http://stackoverflow.com/a/20518948/56285\">tweak regexes for corner cases</a>, as with <code>String.split()</code>.</p>\n\n<p>If your project uses Guava already, this should be your preferred solution. See Splitter documentation in <a href=\"https://code.google.com/p/guava-libraries/wiki/StringsExplained#Splitter\" rel=\"nofollow\">Guava User Guide</a> or the <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Splitter.html\" rel=\"nofollow\">javadocs</a> for more configuration options.</p>\n", "title": "How to split a comma-separated string?", "answer_id": 32362691, "link": "http://stackoverflow.com/questions/10631715/how-to-split-a-comma-separated-string/32362691#32362691", "tags": ["java", "string", "split"]}, {"body": "<p>You can split it and make an array then access like array</p>\n\n<pre><code>String names = \"prappo,prince,ahsan\";\nString[] namesList = names.split(\",\");\n</code></pre>\n\n<p>you can access like </p>\n\n<pre><code>String name1 = names[0];\nString name2 = names[1];\n</code></pre>\n\n<p>or using loop </p>\n\n<pre><code>for(String name : namesList){\nSystem.out.println(name);\n}\n</code></pre>\n\n<p>hope it will help you .</p>\n", "title": "How to split a comma-separated string?", "answer_id": 35111885, "link": "http://stackoverflow.com/questions/10631715/how-to-split-a-comma-separated-string/35111885#35111885", "tags": ["java", "string", "split"]}, {"body": "<p>Remove all white spaces and create an <em>fixed-size</em> or <em>immutable</em> List (See <code>asList</code> <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList(T...)\" rel=\"nofollow\">API docs</a>)</p>\n\n<pre><code>final String str = \"dog, cat, bear, elephant, ..., giraffe\";\nList&lt;String&gt; list = Arrays.asList(str.replaceAll(\"\\\\s\", \"\").split(\",\"));\n// result: [dog, cat, bear, elephant, ..., giraffe]\n</code></pre>\n\n<p>It is possible to also use <code>replaceAll(\\\\s+\", \"\")</code> but maximum efficiency depends on the use case. (see @GurselKoca <a href=\"http://stackoverflow.com/questions/5455794/removing-whitespace-from-strings-in-java#answer-5455809\">answer</a> to <strong>Removing whitespace from strings in Java</strong>)</p>\n", "title": "How to split a comma-separated string?", "answer_id": 39418896, "link": "http://stackoverflow.com/questions/10631715/how-to-split-a-comma-separated-string/39418896#39418896", "tags": ["java", "string", "split"]}], "question_id": 10631715}, {"body": "<p>Here are the brief definitions of encapsulation and abstraction.</p>\n\n<p>Abstraction:</p>\n\n<blockquote>\n  <p>The process of abstraction in Java is used to hide certain details and\n  only show the essential features of the object. In other words, \n               it deals with the outside view of an object (interface).  The only good example i see for this  across different sites is\n  interface.</p>\n</blockquote>\n\n<p>Encapsulation:</p>\n\n<blockquote>\n  <p>Its basically about hiding the state of object with the help of\n  modifiers like private,public,protected etc. we expose the state thru\n  public methods only if require.</p>\n</blockquote>\n\n<p>What we achieve with modifiers like <code>private</code>, <code>public</code> also hides unnecessary details from out side world which is nothing but also a abstraction concept</p>\n\n<p>So, from above explanation looks like encapsulation is a part of abstraction or we can say it's a subset of abstraction. But why then encapsulation term is invented when we could deal it with abstraction only? I am sure there should be some major difference which distinguishes them but most of material on net says almost same thing for both of them.</p>\n\n<p>Though this question has been raised on this forum earlier too but I am posting it again with specific doubts. Some replies also says abstraction is a concept and encapsulation is implementation. But I don't buy this - If it is true, then I can think these two different concepts are provided to confuse us.</p>\n", "tags": ["java", "oop"], "title": "Encapsulation vs Abstraction?", "answer_count": 10, "creation_date": 1327234027, "score": 85, "link": "http://stackoverflow.com/questions/8960918/encapsulation-vs-abstraction", "answers": [{"body": "<p><strong>Encapsulation</strong> is a strategy used as part of abstraction. Encapsulation refers to the state of objects - objects encapsulate their state and hide it from the outside; outside users of the class interact with it through its methods, but cannot access the classes state directly. So the class <em>abstracts</em> away the implementation details related to its state.</p>\n\n<p><strong>Abstraction</strong> is a more generic term, it can also be achieved by (amongst others) subclassing. For example, the interface <code>List</code> in the standard library is an abstraction for a sequence of items, indexed by their position, concrete examples of a <code>List</code> are an <code>ArrayList</code> or a <code>LinkedList</code>. Code that interacts with a <code>List</code> abstracts over the detail of which kind of a list it is using.</p>\n\n<p>Abstraction is often not possible without hiding underlying state by encapsulation - if a class exposes its internal state, it can't change its inner workings, and thus cannot be abstracted.</p>\n", "title": "Encapsulation vs Abstraction?", "answer_id": 8960961, "link": "http://stackoverflow.com/questions/8960918/encapsulation-vs-abstraction/8960961#8960961", "tags": ["java", "oop"]}, {"body": "<blockquote>\n  <p>encapsulation is a part of abstraction or we can say its a subset of\n  abstraction</p>\n</blockquote>\n\n<p>They are different concepts.  </p>\n\n<ul>\n<li><p>Abstraction is the process of refining away all the\nunneeded/unimportant attributes of an object and keep only the\ncharacteristics best suitable for your domain.  </p>\n\n<p>E.g. for a person: you decide to keep first and last name and SSN.\nAge, height, weight etc are ignored as irrelevant.  </p>\n\n<p>Abstraction is where your design starts.</p></li>\n<li>Encapsulation is the next step where it recognizes operations suitable on the\nattributes you accepted to keep during the abstraction process. It is\nthe association of the data with the operation that act upon them.<br>\nI.e. data and methods are bundled together.</li>\n</ul>\n", "title": "Encapsulation vs Abstraction?", "answer_id": 8961003, "link": "http://stackoverflow.com/questions/8960918/encapsulation-vs-abstraction/8961003#8961003", "tags": ["java", "oop"]}, {"body": "<p><strong>Abstraction</strong> is the concept of describing something in simpler terms, i.e abstracting away the details, in order to focus on what is important (This is also seen in abstract art, for example, where the artist focuses on the building blocks of images, such as colour or shapes).  The same idea translates to OOP by using an inheritance hierarchy, where more abstract concepts are at the top and more concrete ideas, at the bottom, build upon their abstractions.  At its most abstract level there is no implementation details at all and perhaps very few commonalities, which are added as the abstraction decreases.</p>\n\n<p>As an example, at the top might be an interface with a single method, then the next level, provides several abstract classes, which may or may not fill in some of the details about the top level, but branches by adding their own abstract methods, then for each of these abstract classes are concrete classes providing implementations of all the remaining methods.</p>\n\n<p><strong>Encapsulation</strong> is a <em>technique</em>.  It may or may not be for aiding in abstraction, but it is certainly about information hiding and/or organisation. It demands data and functions be grouped in some way - of course good OOP practice demands that they should be grouped by abstraction.  However, there are other uses which just aid in maintainability etc.</p>\n", "title": "Encapsulation vs Abstraction?", "answer_id": 8961062, "link": "http://stackoverflow.com/questions/8960918/encapsulation-vs-abstraction/8961062#8961062", "tags": ["java", "oop"]}, {"body": "<p>Abstraction is a very general term, and abstraction in software is not limited to object-oriented languages. A dictionary definition: \"the act of considering something as a general quality or characteristic, apart from concrete realities, specific objects, or actual instances\".</p>\n\n<p>Assembly language can be thought of as an abstraction of machine code -- assembly expresses the essential details and structure of the machine code, but frees you from having to think about the opcodes used, the layout of the code in memory, making jumps go to the right address, etc.</p>\n\n<p>Your operating system's API is an abstraction of the underlying machine. Your compiler provides a layer of abstraction which shields you from the details of assembly language. The TCP/IP stack built into your operating system abstracts away the details of transmitting bits over a network. If you go down all the way to the raw silicon, the people who designed your CPU did so using circuit diagrams written in terms of \"diodes\" and \"transistors\", which are abstractions of how electrons travel through semiconductor crystals.</p>\n\n<p>In software, <em>everything</em> is an abstraction. We build programs which simulate or model some aspect of reality, but by necessity our models always abstract away some details of the \"real thing\". We build layer on layer on layer of abstractions, because it is the only way we get anything done. (Imagine you were trying to make, say, a sudoku solver, and you had to design it using only semiconductor crystals. \"OK, I need a piece of N-type silicon here...\")</p>\n\n<p>In comparison, \"encapsulation\" is a very specific and limited term. Some of the other answers to this question have already given good definitions for it.</p>\n", "title": "Encapsulation vs Abstraction?", "answer_id": 8961115, "link": "http://stackoverflow.com/questions/8960918/encapsulation-vs-abstraction/8961115#8961115", "tags": ["java", "oop"]}, {"body": "<p><strong>NOTE:</strong> I am sharing this. It is not mean that here is not good answer but because I easily understood.</p>\n\n<p><strong>Answer:</strong></p>\n\n<p>When a class is conceptualized, what are the properties we can have in it given the context. If we are designing a class Animal in the context of a zoo, it is important that we have an attribute as animalType to describe domestic or wild. This attribute may not make sense when we design the class in a different context.</p>\n\n<p>Similarly, what are the behaviors we are going to have in the class? Abstraction is also applied here. What is necessary to have here and what will be an overdose? Then we cut off some information from the class. This process is applying abstraction.</p>\n\n<p>When we ask for difference between encapsulation and abstraction, I would say, <a href=\"http://javapapers.com/core-java/java-encapsulation/\" rel=\"nofollow\"><strong>encapsulation</strong></a> uses abstraction as a concept. So then, is it only encapsulation. No, abstraction is even a concept applied as part of inheritance and polymorphism.</p>\n\n<p><a href=\"http://javapapers.com/core-java/java-abstraction/\" rel=\"nofollow\"><strong>Go</strong></a> here for more explanation about this topic.</p>\n", "title": "Encapsulation vs Abstraction?", "answer_id": 18426743, "link": "http://stackoverflow.com/questions/8960918/encapsulation-vs-abstraction/18426743#18426743", "tags": ["java", "oop"]}, {"body": "<p>This is how I understood it:</p>\n\n<p>In Object oriented programming, we have something called <em>classes</em>. What are they for? They are to store some state and to store some methods to change that state i.e., they are <strong><em>encapsulating</em></strong> state and its methods. </p>\n\n<p>It(class) does not care about the visibility of its own or of its contents. If we <em>choose to hide</em> the state or some methods, it is <strong><em>information hiding</em></strong>.</p>\n\n<p>Now, take the scenario of an <em>inheritance</em>. We have a base class and a couple of derived (inherited) classes. So, what is the base class doing here? It is <strong>abstracting</strong> out some things from the derived classes.</p>\n\n<p>All of them are different, right? But, we mix them up to write good object oriented programs. Hope it helps :)</p>\n", "title": "Encapsulation vs Abstraction?", "answer_id": 22727063, "link": "http://stackoverflow.com/questions/8960918/encapsulation-vs-abstraction/22727063#22727063", "tags": ["java", "oop"]}, {"body": "<p>Encapsulation is <strong>hiding</strong> <strong>unnecessary</strong> data in a capsule or unit</p>\n\n<p>Abstraction is <strong>showing</strong> <strong>essential</strong> feature of an object</p>\n\n<p>Encapsulation is used to hide its member from outside class and interface.Using access modifiers provided in c#.like public,private,protected etc.\nexample:</p>\n\n<pre><code>Class Learn\n{\n  private int a;         // by making it private we are hiding it from other\n  private void show()   //class to access it\n  {\n   console.writeline(a);\n  }\n}\n</code></pre>\n\n<p>Here we have wrap data in a unit or capsule i.e Class.</p>\n\n<blockquote>\n  <p>Abstraction is just opposite of Encapsulation.</p>\n</blockquote>\n\n<p>Abstraction is used to show important and relevant data to user.\nbest real world example\nIn a mobile phone, you see their different types of functionalities as camera, mp3 player, calling function, recording function, multimedia etc. It is abstraction, because you are seeing only relevant information instead of their internal engineering.</p>\n\n<pre><code> abstract class MobilePhone\n    {\n        public void Calling();       //put necessary or essential data\n        public void SendSMS();       //calling n sms are main in mobile\n    }\n\n    public class BlackBerry : MobilePhone   // inherited main feature\n    {\n        public void FMRadio();            //added new\n        public void MP3();\n        public void Camera();\n        public void Recording();\n\n    }\n</code></pre>\n", "title": "Encapsulation vs Abstraction?", "answer_id": 29693285, "link": "http://stackoverflow.com/questions/8960918/encapsulation-vs-abstraction/29693285#29693285", "tags": ["java", "oop"]}, {"body": "<p>Lets try to understand in a different way.</p>\n\n<p>What may happen if Abstraction is not there and What may happen if Encapsulation is not there.</p>\n\n<p>If Abstraction is not there, then you can say the object is use less.  You cannot identify the object nor can you access any functionality of it.  Take a example of a TV, if you do not have an option to power on, change channel, increase or decrease volume etc., then what's the use of TV and how do you use it ?</p>\n\n<p>If Encapsulation is not there or not being implemented  properly, then you may misuse the object. There by data/components may get misused. Take the same example of TV, If there is no encapsulation done to the volume of TV, then the volume controller may be misused by making it come below or go beyond its limit (0-40/50).</p>\n", "title": "Encapsulation vs Abstraction?", "answer_id": 32679987, "link": "http://stackoverflow.com/questions/8960918/encapsulation-vs-abstraction/32679987#32679987", "tags": ["java", "oop"]}, {"body": "<p><strong>Encapsulation</strong> - the process of hiding components of the class to prevent direct access from the outside. It is achieved by using \"private\" modifier to prevent direct access to some class members (data field or method) from other classes or objects meanwhile providing access to these private members by public members (Interface). That make the class members protected as human organs hidden/encapsulated under the skin or some shield.</p>\n\n<p><strong>Abstraction</strong> - A principle must be followed in writing OOP program that say \"you must include in the class only components that are interesting in the task of the program\". For example: the object student has a lot of characters as a human: name, age, weight, hair color, eye color, etc. But, when you create a class in OOP to work with students you should include only those characters that really matter for student database: name, age, specialty, level, marks ... etc.\nin C++ you can create abstract class by using the modifier \"virtual\" with any methods in the class and that will make it unusable in direct but you can derive other classes from it and create implementation for its members with adding required members based on the task.</p>\n", "title": "Encapsulation vs Abstraction?", "answer_id": 34240560, "link": "http://stackoverflow.com/questions/8960918/encapsulation-vs-abstraction/34240560#34240560", "tags": ["java", "oop"]}, {"body": "<p>Encapsulation protects to collapse the internal behaviour of object/instance from external entity. So, a control should be provided to confirm that the data which is being supplied is not going to harm the internal system of instance/object to survive its existance.</p>\n\n<p>Good example, Divider is a class which has two instance variable dividend and divisor and a method getDividedValue.</p>\n\n<p>Can you please think, if the divisor is set to 0 then internal system/behaviour (getDivided ) will break.</p>\n\n<p>So, the object internal behaviour could be protected by throwing exception through a method.</p>\n", "title": "Encapsulation vs Abstraction?", "answer_id": 38152127, "link": "http://stackoverflow.com/questions/8960918/encapsulation-vs-abstraction/38152127#38152127", "tags": ["java", "oop"]}], "question_id": 8960918}, {"body": "<p>When I make my own Android custom class, I <code>extend</code> its native class. Then when I want to override the base method, I always call <code>super()</code> method, just like I always do in <code>onCreate</code>, <code>onStop</code>, etc.</p>\n\n<p>And I thought this is it, as from the very beginning Android team advised us to always call <code>super</code> on every method override.</p>\n\n<p>But, in <strong>many books</strong> I can see that developers, more experienced than myself, often omit calling <code>super</code> and I really doubt they do it as a lack of knowledge. For example, look at this basic <a href=\"http://en.wikipedia.org/wiki/Simple_API_for_XML\">SAX</a> parser class where <code>super</code> is omitted in <code>startElement</code>, <code>characters</code> and <code>endElement</code>:</p>\n\n<pre><code>public class SAXParser extends DefaultHandler{\n    public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {\n        if(qName.equalsIgnoreCase(\"XXY\")) {\n            //do something\n        }\n    }\n\n    public void characters(char[] ch, int start, int length) throws SAXException {\n        //do something\n    }\n\n    public void endElement(String uri, String localName, String qName) throws SAXException {\n        if(qName.equalsIgnoreCase(\"XXY\")) {\n            //do something\n        }else () {\n            //do something\n        }\n    }\n}\n</code></pre>\n\n<p>If you try to create any override method via Eclipse or any other IDE, <code>super</code> will always be created as a part of automated process.</p>\n\n<p>This was just a simple example. Books are <strong>full of similar code</strong>.</p>\n\n<p>How do they know when you must call <code>super</code> and when you can omit it calling?</p>\n\n<p>PS. Do not bind to this specific example. It was just an example randomly picked from many examples.</p>\n\n<p>(This may sound like a beginner question, but I am really confused.)</p>\n", "tags": ["java", "android", "override"], "title": "When NOT to call super() method when overriding?", "answer_count": 6, "creation_date": 1334918977, "score": 85, "link": "http://stackoverflow.com/questions/10244785/when-not-to-call-super-method-when-overriding", "answers": [{"body": "<p>By calling the <code>super</code> method, you're not <em>overriding</em> the behavior of the method, you're <em>extending</em> it. </p>\n\n<p>A call to <code>super</code> will perform any logic the class you're extending has defined for that method. Take into account that it might be important the moment when you call <code>super</code>'s implementation in your method overriding. For instance: </p>\n\n<pre><code>public class A { \n    public void save() { \n         // Perform save logic\n    }\n}\n\npublic class B extends A {\n    private Object b;\n    @Override\n    public void save() { \n        super.save(); // Performs the save logic for A\n        save(b); // Perform additional save logic\n    }\n}\n</code></pre>\n\n<p>A call to <code>B.save()</code> will perform the <code>save()</code> logic for both <code>A</code> and <code>B</code>, in this particular order. If you weren't calling <code>super.save()</code> inside <code>B.save()</code>, <code>A.save()</code> wouldn't be called. And if you called <code>super.save()</code> after <code>save(b)</code>, <code>A.save()</code> would be effectively performed afterwards <code>B.save()</code>.</p>\n\n<p>If you want to <em>override</em> <code>super</code>'s behavior (that is, fully ignore its implementation and provide it all yourself), you shouldn't be calling <code>super</code>.</p>\n\n<p>In the <code>SAXParser</code> example you provide, the <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/org/xml/sax/helpers/DefaultHandler.java#271\">implementations</a> of <code>DefaultHandler</code> for those methods are just empty, so that subclasses can override them and provide a behavior for those methods. In the <a href=\"http://docs.oracle.com/javase/6/docs/api/org/xml/sax/helpers/DefaultHandler.html#startElement%28java.lang.String,%20java.lang.String,%20java.lang.String,%20org.xml.sax.Attributes%29\">javadoc</a> for this method this is also pointed out.</p>\n\n<pre><code>public void startElement (String uri, String localName,\n    String qName, Attributes attributes) throws SAXException {\n    // no op\n}\n</code></pre>\n\n<p>About the <code>super()</code> default call in code generated by IDEs, as <code>@barsju</code> pointed out in his comment, in each constructor there's an implicit call to <code>super()</code> (even if you don't write it in your code), which means, in that context, a call to <code>super</code>'s default constructor. The <code>IDE</code> just writes it down for you, but it would also get called if you removed it. Also notice that when implementing constructors, <code>super()</code> or any of its variants with arguments (i.e. <code>super(x,y,z)</code>) can only be called <em>at the very beginning</em> of the method.</p>\n", "title": "When NOT to call super() method when overriding?", "answer_id": 10244841, "link": "http://stackoverflow.com/questions/10244785/when-not-to-call-super-method-when-overriding/10244841#10244841", "tags": ["java", "android", "override"]}, {"body": "<p>Well <strong>Xavi</strong> gave a better answer.. but you probably might be knowing what does <code>super()</code> do when called in a overridden method... it ads what have you done with the default behaviour.. </p>\n\n<p>e.g:</p>\n\n<pre><code>onDraw() \n</code></pre>\n\n<p>method in view class when overridden.. you draw something before saying super.onDraw() it appears once the view is fully drawn.. so here calling <code>super</code> is necessary since android has some critically important things to do (like onCreate())</p>\n\n<p>but at the same time</p>\n\n<pre><code>onLongClick()\n</code></pre>\n\n<p>when you override this you don't want to call super because it brings up a dialog with list of options for a EditText or any other similar view.. Thats the basic diff.. you have choice to leave it some times.. but for other methods like <code>onCreate() , onStop()</code> you should let the OS handle it..</p>\n", "title": "When NOT to call super() method when overriding?", "answer_id": 10244957, "link": "http://stackoverflow.com/questions/10244785/when-not-to-call-super-method-when-overriding/10244957#10244957", "tags": ["java", "android", "override"]}, {"body": "<p>I didn't get your question clearly, but if you are asking about why not calling the <code>super</code> method:</p>\n\n<p>There is a reason for calling the <code>super</code> method: if there is no zero argument constructor in the parent class then it is not possible to make a child class for that, so either you need to keep a no argument constructor in the parent class or you need to define <code>super()</code> calling statement with <code>argument(how much argument constructor you have used in super class)</code> at the top of the child class constructor. </p>\n\n<p>I hope this helps. If not, let me know.</p>\n", "title": "When NOT to call super() method when overriding?", "answer_id": 10245044, "link": "http://stackoverflow.com/questions/10244785/when-not-to-call-super-method-when-overriding/10245044#10245044", "tags": ["java", "android", "override"]}, {"body": "<p>The test you should do in your head is:</p>\n\n<p>\"Do I want all of the functionality of this method done for me, and then do something afterwards?\" If yes, then you want to call <code>super()</code>, and then finish your method. This will be true for \"important\" methods such as <code>onDraw()</code>, which handles lots of things in the background.</p>\n\n<p>If you only want some of the functionality (as with most methods that you will override) then you probably don't want to call <code>super()</code>.</p>\n", "title": "When NOT to call super() method when overriding?", "answer_id": 10245278, "link": "http://stackoverflow.com/questions/10244785/when-not-to-call-super-method-when-overriding/10245278#10245278", "tags": ["java", "android", "override"]}, {"body": "<blockquote>\n  <p>How do they know when you must call super and when you can omit it calling?</p>\n</blockquote>\n\n<p>Usually, if a special API method has a critical meaning to the underlying framework context life cycle, it will always be explicitly stated and highlighted in the API documentation, like the <a href=\"http://developer.android.com/reference/android/app/Activity.html#onCreate%28android.os.Bundle%29\"><code>Activity.onCreate()</code> API documentation</a>. Moreover, if the API follows a robust design, it should throw some exceptions to alert the consumer developer at project compile time, and make sure it will not generate a fault at run time.</p>\n\n<p>If this is not explicitly stated in the API documentation, then it is quite safe for the consumer developer to assume the API method is not mandatory to call when overriding it. It is up to the consumer developer to decide whether to use the default behavior (call the <code>super</code> method) or completely override it.</p>\n\n<p>If the condition is permitted (I love open-source software), the consumer developer can always check out the API source code and see how the method is actually written under the hood. Check out <a href=\"http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/app/Activity.java#Activity.onCreate%28android.os.Bundle%29\"><code>Activity.onCreate()</code> source</a> and <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/org/xml/sax/helpers/DefaultHandler.java#DefaultHandler.startElement%28java.lang.String%2Cjava.lang.String%2Cjava.lang.String%2Corg.xml.sax.Attributes%29\"><code>DefaultHandler.startElement()</code> source</a> for example.</p>\n", "title": "When NOT to call super() method when overriding?", "answer_id": 10245720, "link": "http://stackoverflow.com/questions/10244785/when-not-to-call-super-method-when-overriding/10245720#10245720", "tags": ["java", "android", "override"]}, {"body": "<p>I implemented a constraint array list like</p>\n\n<pre><code>public class ConstraintArrayList&lt;T&gt; extends ArrayList&lt;T&gt; {\n  ConstraintArrayList(Constraint&lt;T&gt; cons) {this.cons = cons;}\n  @Override\n  public boolean add(T element) {\n    if (cons.accept(element))\n      return super.add(element);\n    return false;\n  }\n}\n</code></pre>\n\n<p>If you look at the code, it simply does some pre-checking before actually letting the super class perform the actual addition of element to the list.\nThis tells one of the two fold reasons for method overriding:</p>\n\n<ol>\n<li>Extensibility where you want to extend what the super class can do</li>\n<li>Specificity where you want to add specific behaviour through polymorphism such as in the common Animal kingdom example of move semantics where the way birds move (fly) and frogs move (hop) are specific to each sub class.</li>\n</ol>\n", "title": "When NOT to call super() method when overriding?", "answer_id": 10303909, "link": "http://stackoverflow.com/questions/10244785/when-not-to-call-super-method-when-overriding/10303909#10303909", "tags": ["java", "android", "override"]}], "question_id": 10244785}, {"body": "<p>Is there a token in java that skips the rest of the for loop?\nSomething like <a href=\"http://msdn.microsoft.com/en-us/library/801hyx6f.aspx\">VB's Continue</a> in java.</p>\n", "tags": ["java", "for-loop"], "title": "GoTo Next Iteration in For Loop in java", "answer_count": 6, "creation_date": 1340384967, "score": 84, "link": "http://stackoverflow.com/questions/11160952/goto-next-iteration-in-for-loop-in-java", "answers": [{"body": "<pre><code>continue;\n</code></pre>\n\n<p><code>continue;</code> key word would start the next iteration upon invocation </p>\n\n<p><strong>For Example</strong></p>\n\n<pre><code>for(int i= 0 ; i &lt; 5; i++){\n if(i==2){\n  continue;\n }\nSystem.out.print(i);\n}\n</code></pre>\n\n<p>This will print</p>\n\n<pre><code>0134\n</code></pre>\n\n<hr>\n\n<p><strong>See</strong></p>\n\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html\">Document</a></li>\n</ul>\n", "title": "GoTo Next Iteration in For Loop in java", "answer_id": 11160969, "link": "http://stackoverflow.com/questions/11160952/goto-next-iteration-in-for-loop-in-java/11160969#11160969", "tags": ["java", "for-loop"]}, {"body": "<p>Use the <code>continue</code> keyword. Read <a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html\" rel=\"nofollow\">here</a>.</p>\n\n<blockquote>\n  <p>The continue statement skips the current iteration of a for, while , or do-while loop.</p>\n</blockquote>\n", "title": "GoTo Next Iteration in For Loop in java", "answer_id": 11160980, "link": "http://stackoverflow.com/questions/11160952/goto-next-iteration-in-for-loop-in-java/11160980#11160980", "tags": ["java", "for-loop"]}, {"body": "<p>use <a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html\" rel=\"nofollow\">continue</a> keyword .</p>\n\n<p><strong>EX:</strong></p>\n\n<pre><code>for(int i = 0; i &lt; 10; i++){\n  if(i == 5){\n    continue;\n   }\n}\n</code></pre>\n", "title": "GoTo Next Iteration in For Loop in java", "answer_id": 11161001, "link": "http://stackoverflow.com/questions/11160952/goto-next-iteration-in-for-loop-in-java/11161001#11161001", "tags": ["java", "for-loop"]}, {"body": "<p>Try this,</p>\n\n<p><code>1. If you want to skip a particular iteration, use continue.</code></p>\n\n<p><code>2. If you want to break out of the immediate loop use break</code> </p>\n\n<p><code>3  If there are 2 loop, outer and inner.... and you want to break out of both the loop from</code>  <code>the inner loop, use break with label.</code></p>\n\n<p>eg:</p>\n\n<p><strong>continue</strong></p>\n\n<pre><code>for(int i=0 ; i&lt;5 ; i++){\n\n    if (i==2){\n\n      continue;\n    }\n }\n</code></pre>\n\n<p>eg:</p>\n\n<p><strong>break</strong></p>\n\n<pre><code>for(int i=0 ; i&lt;5 ; i++){\n\n        if (i==2){\n\n          break;\n        }\n     }\n</code></pre>\n\n<p>eg:</p>\n\n<p><strong>break with label</strong></p>\n\n<pre><code>lab1: for(int j=0 ; j&lt;5 ; j++){\n     for(int i=0 ; i&lt;5 ; i++){\n\n        if (i==2){\n\n          break lab1;\n        }\n     }\n  }\n</code></pre>\n", "title": "GoTo Next Iteration in For Loop in java", "answer_id": 11161011, "link": "http://stackoverflow.com/questions/11160952/goto-next-iteration-in-for-loop-in-java/11161011#11161011", "tags": ["java", "for-loop"]}, {"body": "<p>As mentioned in all other answers, the keyword <code>continue</code> will skip to the end of the current iteration.</p>\n\n<p>Additionally you can label your loop starts and then use <code>continue [labelname];</code> or <code>break [labelname];</code> to control what's going on in nested loops:</p>\n\n<pre><code>loop1: for (int i = 1; i &lt; 10; i++) {\n    loop2: for (int j = 1; j &lt; 10; j++) {\n        if (i + j == 10)\n            continue loop1;\n\n        System.out.print(j);\n    }\n    System.out.println();\n}\n</code></pre>\n", "title": "GoTo Next Iteration in For Loop in java", "answer_id": 11161140, "link": "http://stackoverflow.com/questions/11160952/goto-next-iteration-in-for-loop-in-java/11161140#11161140", "tags": ["java", "for-loop"]}, {"body": "<p><strong>If you want to skip current iteration, use <code>continue;</code>.</strong></p>\n\n<pre><code>for(int i = 0; i &lt; 5; i++){\n    if (i == 2){\n        continue;\n    }\n }\n</code></pre>\n\n<p><strong>Need to break out of the whole loop? Use <code>break;</code></strong></p>\n\n<pre><code>for(int i = 0; i &lt; 5; i++){\n    if (i == 2){\n        break;\n    }\n}\n</code></pre>\n\n<p><strong>If you need to break out of more than one loop use <code>break someLabel;</code></strong></p>\n\n<pre><code>outerLoop:                                           // Label the loop\nfor(int j = 0; j &lt; 5; j++){\n     for(int i = 0; i &lt; 5; i++){\n        if (i==2){\n          break outerLoop;\n        }\n     }\n  }\n</code></pre>\n\n<p>*Note that in this case you are not marking a point in code to jump to, you are labeling the loop! So after the break the code will continue right after the loop!</p>\n\n<p><strong>When you need to skip one iteration in nested loops use <code>continue someLabel;</code>, but you can also combine them all.</strong></p>\n\n<pre><code>outerLoop:\nfor(int j = 0; j &lt; 10; j++){\n     innerLoop:\n     for(int i = 0; i &lt; 10; i++){\n        if (i + j == 2){\n          continue innerLoop;\n        }\n        if (i + j == 4){\n          continue outerLoop;\n        }\n        if (i + j == 6){\n          break innerLoop;\n        }\n        if (i + j == 8){\n          break outerLoop;\n        }\n     }\n  }\n</code></pre>\n", "title": "GoTo Next Iteration in For Loop in java", "answer_id": 19599319, "link": "http://stackoverflow.com/questions/11160952/goto-next-iteration-in-for-loop-in-java/19599319#19599319", "tags": ["java", "for-loop"]}], "question_id": 11160952}, {"body": "<pre><code>Iterator ite = Set.iterator();\nIterator ite = List.iterator();\n\nListIterator listite = List.listIterator();\n</code></pre>\n\n<p>We can use <code>Iterator</code> to traverse a <code>Set</code> or a <code>List</code> or a <code>Map</code>. But <code>ListIterator</code> can only be used to traverse a <code>List</code>, it can't traverse a <code>Set</code>. Why?</p>\n\n<p>I know that the main difference is that with iterator we can travel in only one direction but with <code>ListIterator</code> we can travel both directions. Are there any other differences? And any advantages of <code>ListIterator</code> over <code>Iterator</code>?</p>\n", "tags": ["java", "list", "iterator", "set", "listiterator"], "title": "Difference between Iterator and Listiterator?", "answer_count": 5, "creation_date": 1339408923, "score": 84, "link": "http://stackoverflow.com/questions/10977992/difference-between-iterator-and-listiterator", "answers": [{"body": "<p>The differences are listed in the Javadoc for <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/ListIterator.html\">ListIterator</a></p>\n\n<p>You can</p>\n\n<ul>\n<li>iterate backwards</li>\n<li>obtain the iterator at any point.</li>\n<li>add a new value at any point.</li>\n<li>set a new value at that point.</li>\n</ul>\n", "title": "Difference between Iterator and Listiterator?", "answer_id": 10978066, "link": "http://stackoverflow.com/questions/10977992/difference-between-iterator-and-listiterator/10978066#10978066", "tags": ["java", "list", "iterator", "set", "listiterator"]}, {"body": "<p>There are two differences:</p>\n\n<ol>\n<li><p>We can use Iterator to traverse Set and List and also Map type of Objects. While a ListIterator can be used to traverse for List-type Objects, but not for Set-type of Objects.</p>\n\n<p>That is, we can get a Iterator object by using Set and List, see here:</p>\n\n<p>By using Iterator we can retrieve the elements from Collection Object in forward direction only.</p>\n\n<p>Methods in Iterator:</p>\n\n<ol>\n<li><code>hasNext()</code></li>\n<li><code>next()</code></li>\n<li><code>remove()</code></li>\n</ol>\n\n<pre><code>Iterator iterator = Set.iterator();\nIterator iterator = List.iterator();</code></pre></li>\n<li><p>But we get ListIterator object only from the List interface, see here:</p>\n\n<p>where as a ListIterator allows you to traverse in either directions (Both forward and backward). So it has two more methods like <code>hasPrevious()</code> and  <code>previous()</code> other than  those of Iterator. Also, we can get indexes of the next or previous elements (using <code>nextIndex()</code>  and <code>previousIndex()</code> respectively )</p>\n\n<p>Methods in ListIterator:</p>\n\n<ol>\n<li>hasNext()</li>\n<li>next()</li>\n<li>previous()</li>\n<li>hasPrevious()</li>\n<li>remove()</li>\n<li>nextIndex()</li>\n<li>previousIndex()</li>\n</ol>\n\n<pre><code>ListIterator listiterator = List.listIterator();</code></pre>\n\n<p>i.e., we can't get ListIterator object from Set interface.</p></li>\n</ol>\n", "title": "Difference between Iterator and Listiterator?", "answer_id": 17939167, "link": "http://stackoverflow.com/questions/10977992/difference-between-iterator-and-listiterator/17939167#17939167", "tags": ["java", "list", "iterator", "set", "listiterator"]}, {"body": "<p>Iterator is the super class of ListIterator.</p>\n\n<p>Here is the difference between them:</p>\n\n<ol>\n<li>With iterator you can move only forward, but with List Iterator you can move back word also while reading the elements.</li>\n<li>With List Iterator you can obtain the index at any point while traversing, which is not possible with iterators.</li>\n<li>With iterator you can check only for next element available or not, but in list iterator you can check previous and next elements.</li>\n<li>With list iterator you can add new element at any point of time, while traversing. Not possible with iterator.</li>\n<li>With list iterator you can modify an element while traversing, which is not possible with iterator.</li>\n</ol>\n\n<p><strong>Iterator look and feel:</strong></p>\n\n<pre><code> public interface Iterator&lt;E&gt; {\n    boolean hasNext();\n    E next();\n    void remove(); //optional--&gt;use only once with next(), \n                         dont use it when u use for:each\n    }\n</code></pre>\n\n<p><strong>ListIterator look and feel:</strong></p>\n\n<pre><code>public interface ListIterator&lt;E&gt; extends Iterator&lt;E&gt; {\n    boolean hasNext();\n    E next();\n    boolean hasPrevious();\n    E previous();\n    int nextIndex();\n    int previousIndex();\n    void remove(); //optional\n    void set(E e); //optional\n    void add(E e); //optional\n}\n</code></pre>\n", "title": "Difference between Iterator and Listiterator?", "answer_id": 20516662, "link": "http://stackoverflow.com/questions/10977992/difference-between-iterator-and-listiterator/20516662#20516662", "tags": ["java", "list", "iterator", "set", "listiterator"]}, {"body": "<p><strong>Iterator And ListIterator Difference</strong></p>\n\n<ol>\n<li>We can use Iterator to traverse Set and List and also Map type of Objects. But List Iterator can be used to traverse for List type Objects, but not for Set type of Objects.</li>\n</ol>\n\n<p>That is, we can get a Iterrator object by using Set and List, see here :</p>\n\n<p>Iterator ite = Set.iterator();\nIterator ite = List.iterator();</p>\n\n<p>But we get List Iterator object only from List interface, see here :</p>\n\n<p>ListIterator listite = List.listIterator();</p>\n\n<p>i.e., we can't get List Iterator object from Set interface. </p>\n\n<ol>\n<li><p>By using Iterator we can retrieve the elements from Collection Object in forward direction only.</p>\n\n<ul>\n<li>where as List Iterator, which allows you to traverse in either directions. That is List Iterators traverse two directions. So it has another methods hasPrevious() &amp; previous() other than Iterator.</li>\n</ul></li>\n</ol>\n", "title": "Difference between Iterator and Listiterator?", "answer_id": 24584503, "link": "http://stackoverflow.com/questions/10977992/difference-between-iterator-and-listiterator/24584503#24584503", "tags": ["java", "list", "iterator", "set", "listiterator"]}, {"body": "<p>Advantages of <code>ListIterator</code> over <code>Iterator</code> is we can <strong>add element at any point of time while traversing</strong> a list using ListIterator.</p>\n", "title": "Difference between Iterator and Listiterator?", "answer_id": 36146276, "link": "http://stackoverflow.com/questions/10977992/difference-between-iterator-and-listiterator/36146276#36146276", "tags": ["java", "list", "iterator", "set", "listiterator"]}], "question_id": 10977992}, {"body": "<p>I am new to hibernate and need to use 1-Many and Many-1 relation. It is a bi-directional relationship in my objects, so that I can traverse from either direction. mappedBy is the recommended way to go about it. However, I couldn't understand it. Can someone please explain it to me, </p>\n\n<ul>\n<li>what is the recommended way to use it ?</li>\n<li>what purpose does it solve ?</li>\n</ul>\n\n<p>For the sake of my example, here are my classes with annotations:</p>\n\n<ul>\n<li><code>Airline</code> <strong>OWNS many</strong> <code>AirlineFlights</code></li>\n<li><strong>Many</strong> <code>AirlineFlights</code> belong to <strong>ONE</strong> <code>Airline</code></li>\n</ul>\n\n<p><strong>Airline</strong>:</p>\n\n<pre><code>@Entity \n@Table(name=\"Airline\")\npublic class Airline {\n    private Integer idAirline;\n    private String name;\n\n    private String code;\n\n    private String aliasName;\n    private Set&lt;AirlineFlight&gt; airlineFlights = new HashSet&lt;AirlineFlight&gt;(0);\n\n    public Airline(){}\n\n    public Airline(String name, String code, String aliasName, Set&lt;AirlineFlight&gt; flights) {\n        setName(name);\n        setCode(code);\n        setAliasName(aliasName);\n        setAirlineFlights(flights);\n    }\n\n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    @Column(name=\"IDAIRLINE\", nullable=false)\n    public Integer getIdAirline() {\n        return idAirline;\n    }\n\n    private void setIdAirline(Integer idAirline) {\n        this.idAirline = idAirline;\n    }\n\n    @Column(name=\"NAME\", nullable=false)\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = DAOUtil.convertToDBString(name);\n    }\n\n    @Column(name=\"CODE\", nullable=false, length=3)\n    public String getCode() {\n        return code;\n    }\n    public void setCode(String code) {\n        this.code = DAOUtil.convertToDBString(code);\n    }\n\n    @Column(name=\"ALIAS\", nullable=true)\n    public String getAliasName() {\n        return aliasName;\n    }\n    public void setAliasName(String aliasName) {\n        if(aliasName != null)\n            this.aliasName = DAOUtil.convertToDBString(aliasName);\n    }\n\n    @OneToMany(fetch=FetchType.LAZY, cascade = {CascadeType.ALL})\n    @JoinColumn(name=\"IDAIRLINE\")\n    public Set&lt;AirlineFlight&gt; getAirlineFlights() {\n        return airlineFlights;\n    }\n\n    public void setAirlineFlights(Set&lt;AirlineFlight&gt; flights) {\n        this.airlineFlights = flights;\n    }\n}\n</code></pre>\n\n<p><strong>AirlineFlights:</strong></p>\n\n<pre><code>@Entity\n@Table(name=\"AirlineFlight\")\npublic class AirlineFlight {\n    private Integer idAirlineFlight;\n    private Airline airline;\n    private String flightNumber;\n\n    public AirlineFlight(){}\n\n    public AirlineFlight(Airline airline, String flightNumber) {\n        setAirline(airline);\n        setFlightNumber(flightNumber);\n    }\n\n    @Id\n    @GeneratedValue(generator=\"identity\")\n    @GenericGenerator(name=\"identity\", strategy=\"identity\")\n    @Column(name=\"IDAIRLINEFLIGHT\", nullable=false)\n    public Integer getIdAirlineFlight() {\n        return idAirlineFlight;\n    }\n    private void setIdAirlineFlight(Integer idAirlineFlight) {\n        this.idAirlineFlight = idAirlineFlight;\n    }\n\n    @ManyToOne(fetch=FetchType.LAZY)\n    @JoinColumn(name=\"IDAIRLINE\", nullable=false)\n    public Airline getAirline() {\n        return airline;\n    }\n    public void setAirline(Airline airline) {\n        this.airline = airline;\n    }\n\n    @Column(name=\"FLIGHTNUMBER\", nullable=false)\n    public String getFlightNumber() {\n        return flightNumber;\n    }\n    public void setFlightNumber(String flightNumber) {\n        this.flightNumber = DAOUtil.convertToDBString(flightNumber);\n    }\n}\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Database schema:</p>\n\n<p>AirlineFlights has the idAirline as ForeignKey and Airline has no idAirlineFlights. This makes, AirlineFlights as the owner/identifying entity ?</p>\n\n<p>Theoretically, I would like airline to be the owner of airlineFlights.</p>\n\n<p><img src=\"http://i.stack.imgur.com/gQvDs.png\" alt=\"enter image description here\"></p>\n", "tags": ["java", "hibernate", "java-ee", "hibernate-mapping"], "title": "Can someone please explain mappedBy in hibernate?", "answer_count": 2, "creation_date": 1328165191, "score": 83, "link": "http://stackoverflow.com/questions/9108224/can-someone-please-explain-mappedby-in-hibernate", "answers": [{"body": "<p>MappedBy signals hibernate that the key for the relationship is on the other side.</p>\n\n<p>This means that although you link 2 tables together, only 1 of those tables has a foreign key constraint to the other one. MappedBy allows you to still link from the table not containing the constraint to the other table.</p>\n", "title": "Can someone please explain mappedBy in hibernate?", "answer_id": 9108618, "link": "http://stackoverflow.com/questions/9108224/can-someone-please-explain-mappedby-in-hibernate/9108618#9108618", "tags": ["java", "hibernate", "java-ee", "hibernate-mapping"]}, {"body": "<p>By specifying the <code>@JoinColumn</code> on both models you don't have a two way relationship.  You have two one way relationships, and a very confusing mapping of it at that.  You're telling both models that they \"own\" the IDAIRLINE column.  Really only one of them actually should!  The 'normal' thing is to take the <code>@JoinColumn</code> off of the <code>@OneToMany</code> side entirely, and instead add mappedBy to the <code>@OneToMany</code>.</p>\n\n<pre><code>@OneToMany(fetch=FetchType.LAZY, cascade = {CascadeType.ALL}, mappedBy=\"airline\")\npublic Set&lt;AirlineFlight&gt; getAirlineFlights() {\n    return airlineFlights;\n}\n</code></pre>\n\n<p>That tells Hibernate \"Go look over on the bean property named 'airline' on the thing I have a collection of to find the configuration.\"</p>\n", "title": "Can someone please explain mappedBy in hibernate?", "answer_id": 9108623, "link": "http://stackoverflow.com/questions/9108224/can-someone-please-explain-mappedby-in-hibernate/9108623#9108623", "tags": ["java", "hibernate", "java-ee", "hibernate-mapping"]}], "question_id": 9108224}, {"body": "<p>Recently, I decided to start learning about java web services and when I started to search a tutorial for java web-services in google, I found out that there are many types of webservices XML based, SOAP based, also RESTful webservices. </p>\n\n<p>Also, I found that there is a JAX-WS specification for xml based web-services, and JAX-RS specification for creating RESTful webservices. </p>\n\n<p>Q1) I got confused, it would be great if anybody can help me understanding the difference between these different type of webservices, so that I can decide which one to learn first.</p>\n\n<p>Q2) Also, I want to learn in-depth about creating different types of web-services in java. Is there any tutorial or resources which can give an insight to each kind of webservice and a comparison between them.  </p>\n\n<p>Q3) based on what scenarios and conditions should I decide that I want to create an xml based web-service rather than a SOAP service or I should go with RESTful service.</p>\n\n<p>Thanks a lot in advance, your opinions and suggestions would be very helpful for me.</p>\n", "tags": ["java", "web-services"], "title": "I need to learn Web Services in Java. What are the different types in it? Need best tutorial links for the same", "answer_count": 4, "creation_date": 1336764844, "score": 83, "link": "http://stackoverflow.com/questions/10557514/i-need-to-learn-web-services-in-java-what-are-the-different-types-in-it-need-b", "answers": [{"body": "<p><strong>Q1)</strong> Here are couple things to read or google more :</p>\n\n<p><a href=\"http://stackoverflow.com/questions/2131965/main-difference-between-soap-and-restful-web-services-in-java\">main difference between SOAP and RESTful web services in java</a>\n<a href=\"http://www.ajaxonomy.com/2008/xml/web-services-part-1-soap-vs-rest\">http://www.ajaxonomy.com/2008/xml/web-services-part-1-soap-vs-rest</a></p>\n\n<p>It's up to you what do you want to learn first. I'd recommend you take a look at the <a href=\"http://stackoverflow.com/questions/tagged/cxf\">CXF</a> framework. You can build both rest/soap services.</p>\n\n<p><strong>Q2)</strong> Here are couple of good tutorials for soap (I had them bookmarked) :</p>\n\n<p><a href=\"http://united-coders.com/phillip-steffensen/developing-a-simple-soap-webservice-using-spring-301-and-apache-cxf-226\">http://united-coders.com/phillip-steffensen/developing-a-simple-soap-webservice-using-spring-301-and-apache-cxf-226</a></p>\n\n<p><a href=\"http://www.benmccann.com/blog/web-services-tutorial-with-apache-cxf/\">http://www.benmccann.com/blog/web-services-tutorial-with-apache-cxf/</a></p>\n\n<p><a href=\"http://www.mastertheboss.com/web-interfaces/337-apache-cxf-interceptors.html\">http://www.mastertheboss.com/web-interfaces/337-apache-cxf-interceptors.html</a></p>\n\n<p>Best way to learn is not just reading tutorials. But you would first go trough tutorials to get a basic idea so you can see that you're able to produce something(or not) and that would get you motivated.</p>\n\n<p>SO is great way to learn particular technology (or more), people ask lot of wierd questions, and there are ever weirder answers. But overall you'll learn about ways to solve issues on other way. Maybe you didn't know of that way, maybe you couldn't thought of it by yourself. </p>\n\n<p>Subscribe to couple of tags that are interesting to you and be persistent, ask good questions and try to give good answers and I guarantee you that you'll learn this as time passes (if you're persistent that is).</p>\n\n<p><strong>Q3)</strong> You will have to answer this one yourself. First by deciding what you're going to build, after all you will need to think of some mini project or something and take it from there. </p>\n\n<p>If you decide to use CXF as your framework for building either REST/SOAP services I'd recommend you look up this book <code>Apache CXF Web Service Development</code>. \nIt's fantastic, not hard to read and not too big either (win win).</p>\n", "title": "I need to learn Web Services in Java. What are the different types in it? Need best tutorial links for the same", "answer_id": 10557768, "link": "http://stackoverflow.com/questions/10557514/i-need-to-learn-web-services-in-java-what-are-the-different-types-in-it-need-b/10557768#10557768", "tags": ["java", "web-services"]}, {"body": "<ol>\n<li><a href=\"http://en.wikipedia.org/wiki/SOAP\">SOAP Web Services</a> are standard-based and supported by almost every software platform: They rely heavily in XML and have support for transactions, security, asynchronous messages and many other issues. It\u2019s a pretty big and complicated standard, but covers almost every messaging situation. On the other side, <a href=\"http://en.wikipedia.org/wiki/Representational_state_transfer\">RESTful services</a> relies of HTTP protocol and verbs (GET, POST, PUT, DELETE) to interchange messages in any format, preferable JSON and XML. It\u2019s a pretty simple and elegant architectural approach.</li>\n<li>As in every topic in the Java World, there are several libraries to build/consume Web Services. In the SOAP Side you have the <a href=\"http://docs.oracle.com/javaee/5/tutorial/doc/bnayl.html\">JAX-WS standard</a> and <a href=\"http://axis.apache.org/axis/\">Apache Axis</a>, and in REST you can use <a href=\"http://www.restlet.org/\">Restlets</a> or <a href=\"http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch18s02.html\">Spring REST Facilities</a> among other libraries.</li>\n</ol>\n\n<p>With question 3, <a href=\"http://www.infoq.com/articles/rest-soap-when-to-use-each\">this article</a> states that RESTful Services are appropiate in this scenarios:</p>\n\n<ul>\n<li>If you have limited bandwidth</li>\n<li>If your operations are stateless: No information is preserved from one invocation to the next one, and each request is treated independently. </li>\n<li>If your clients require caching.</li>\n</ul>\n\n<p>While SOAP is the way to go when:</p>\n\n<ul>\n<li>If you require asynchronous processing </li>\n<li>If you need formal contract/Interfaces </li>\n<li>In your service operations are stateful: For example, you store information/data on a request and use that stored data on the next one.</li>\n</ul>\n", "title": "I need to learn Web Services in Java. What are the different types in it? Need best tutorial links for the same", "answer_id": 10558036, "link": "http://stackoverflow.com/questions/10557514/i-need-to-learn-web-services-in-java-what-are-the-different-types-in-it-need-b/10558036#10558036", "tags": ["java", "web-services"]}, {"body": "<p>The SOAP WS supports both remote procedure call (i.e. RPC) and message oriented middle-ware (MOM) integration styles. The Restful Web Service supports only RPC integration style.</p>\n\n<p>The SOAP WS is transport protocol neutral. Supports multiple protocols like HTTP(S),  Messaging, TCP, UDP SMTP, etc. The REST is transport protocol specific. Supports only HTTP or HTTPS protocols.</p>\n\n<p>The SOAP WS permits only XML data format.You define operations, which tunnels through the POST. The focus is on accessing the named operations and exposing the application logic as a service. The REST permits multiple data formats like XML, JSON data, text, HTML, etc. Any browser can be used because the REST approach uses the standard GET, PUT, POST, and DELETE Web operations. The focus is on accessing the named resources and exposing the data as a service. REST has AJAX support. It can use the XMLHttpRequest object. Good for stateless CRUD (Create, Read, Update, and Delete) operations.\n         GET - represent()\n         POST - acceptRepresention()\n         PUT - storeRepresention()\n         DELETE - removeRepresention() </p>\n\n<p>SOAP based reads cannot be cached. REST based reads can be cached. Performs and scales better.\nSOAP WS supports both SSL security and WS-security, which adds some enterprise security features like maintaining security right up to the point where it is needed, maintaining identities through intermediaries and not just point to point SSL only, securing different parts of the message with different security algorithms, etc. The REST supports only point-to-point SSL security. The SSL encrypts the whole message, whether all of it is sensitive or not.\nThe SOAP has comprehensive support for both ACID based  transaction management  for short-lived transactions and compensation based transaction management for long-running transactions. It also supports two-phase commit across distributed resources. The REST supports transactions, but it  is neither ACID compliant nor can provide two phase commit across distributed transactional resources as it is limited by its HTTP protocol.</p>\n\n<p>The SOAP has success or retry logic built in and provides end-to-end reliability even through SOAP intermediaries. REST does not have a standard messaging system, and expects clients invoking the service to deal with communication failures by retrying.</p>\n\n<p><strong>source</strong> <a href=\"http://java-success.blogspot.in/2012/02/java-web-services-interview-questions.html\">http://java-success.blogspot.in/2012/02/java-web-services-interview-questions.html</a></p>\n", "title": "I need to learn Web Services in Java. What are the different types in it? Need best tutorial links for the same", "answer_id": 13927094, "link": "http://stackoverflow.com/questions/10557514/i-need-to-learn-web-services-in-java-what-are-the-different-types-in-it-need-b/13927094#13927094", "tags": ["java", "web-services"]}, {"body": "<p>If your application often uses http protocol then REST is best because of its light weight,\nand knowing that your application uses only http protocol choosing SOAP is not so good because it heavy,Better to make decision on web service selection based on the protocols we use in our applications.</p>\n", "title": "I need to learn Web Services in Java. What are the different types in it? Need best tutorial links for the same", "answer_id": 15621399, "link": "http://stackoverflow.com/questions/10557514/i-need-to-learn-web-services-in-java-what-are-the-different-types-in-it-need-b/15621399#15621399", "tags": ["java", "web-services"]}], "question_id": 10557514}, {"body": "<p>Is there a way to use FileOutputStream in a way that if a file (String filename) does not exist, then it will create it?</p>\n\n<pre><code>FileOutputStream oFile = new FileOutputStream(\"score.txt\", false);\n</code></pre>\n", "tags": ["java", "file", "file-io", "new-operator", "fileoutputstream"], "title": "Java FileOutputStream Create File if not exists", "answer_count": 7, "creation_date": 1331222328, "score": 82, "link": "http://stackoverflow.com/questions/9620683/java-fileoutputstream-create-file-if-not-exists", "answers": [{"body": "<p>It will throw a <code>FileNotFoundException</code> if the file doesn't exist and cannot be created (<a href=\"http://docs.oracle.com/javase/6/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.lang.String,%20boolean%29\" rel=\"nofollow\">doc</a>), but it will create it if it can. To be sure you probably should first test that the file exists before you create the <code>FileOutputStream</code> (and create with <code>createNewFile()</code> if it doesn't):</p>\n\n<pre><code>File yourFile = new File(\"score.txt\");\nyourFile.createNewFile(); // if file already exists will do nothing \nFileOutputStream oFile = new FileOutputStream(yourFile, false); \n</code></pre>\n", "title": "Java FileOutputStream Create File if not exists", "answer_id": 9620718, "link": "http://stackoverflow.com/questions/9620683/java-fileoutputstream-create-file-if-not-exists/9620718#9620718", "tags": ["java", "file", "file-io", "new-operator", "fileoutputstream"]}, {"body": "<pre><code>File f = new File(\"Test.txt\");\nif(!f.exists())\n    f.createNewFile();\n</code></pre>\n\n<p>Pass this <code>f</code> to your <code>FileOutputStream</code> constructor.</p>\n", "title": "Java FileOutputStream Create File if not exists", "answer_id": 9620779, "link": "http://stackoverflow.com/questions/9620683/java-fileoutputstream-create-file-if-not-exists/9620779#9620779", "tags": ["java", "file", "file-io", "new-operator", "fileoutputstream"]}, {"body": "<p>You can potentially get a <code>FileNotFoundException</code> if the file does not exist.</p>\n\n<p>Java documentation says:</p>\n\n<blockquote>\n  <p>Whether or not a file is available or may be created depends upon the\n  underlying platform\n  <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/FileOutputStream.html\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/java/io/FileOutputStream.html</a></p>\n</blockquote>\n\n<p>If you're using Java 7 you can use the java.nio package:</p>\n\n<blockquote>\n  <p>The options parameter specifies how the the file is created or opened... it opens the file for writing, creating the file if it doesn't exist...</p>\n  \n  <p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html</a></p>\n</blockquote>\n", "title": "Java FileOutputStream Create File if not exists", "answer_id": 9620827, "link": "http://stackoverflow.com/questions/9620683/java-fileoutputstream-create-file-if-not-exists/9620827#9620827", "tags": ["java", "file", "file-io", "new-operator", "fileoutputstream"]}, {"body": "<p>You can create an empty file whether it exists or not ...</p>\n\n<pre><code>new FileOutputStream(\"score.txt\", false).close();\n</code></pre>\n\n<p>if you want to leave the file if it exists ...</p>\n\n<pre><code>new FileOutputStream(\"score.txt\", true).close();\n</code></pre>\n\n<p>You will only get a FileNotFoundException if you try to create the file in a directory which doesn't exist. </p>\n", "title": "Java FileOutputStream Create File if not exists", "answer_id": 9621189, "link": "http://stackoverflow.com/questions/9620683/java-fileoutputstream-create-file-if-not-exists/9621189#9621189", "tags": ["java", "file", "file-io", "new-operator", "fileoutputstream"]}, {"body": "<p>Before creating a file, it need to create all the directories.</p>\n\n<p>Use <code>yourFile.getParentFile().mkdirs()</code></p>\n", "title": "Java FileOutputStream Create File if not exists", "answer_id": 32402390, "link": "http://stackoverflow.com/questions/9620683/java-fileoutputstream-create-file-if-not-exists/32402390#32402390", "tags": ["java", "file", "file-io", "new-operator", "fileoutputstream"]}, {"body": "<p><a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/FileUtils.html\" rel=\"nofollow\">FileUtils</a> from apache commons is a pretty good way to achieve this in a single line.</p>\n\n<pre><code>FileOutputStream s = FileUtils.openOutputStream(\"/home/nikhil/somedir/file.txt\")\n</code></pre>\n\n<p>This will create parent folders if do not exist and create a file if not exists and throw a exception if file object is a directory or cannot be written to. This is equivalent to:</p>\n\n<pre><code>File file = new File(\"/home/nikhil/somedir/file.txt\");\nfile.getParentFile().mkdirs(); // Will create parent directories if not exists\nfile.createNewFile();\nFileOutputStream s = new FileOutputStream(file,false);\n</code></pre>\n\n<p>All the above operations will throw an exception if the current user is not permitted to do the operation.</p>\n", "title": "Java FileOutputStream Create File if not exists", "answer_id": 38284744, "link": "http://stackoverflow.com/questions/9620683/java-fileoutputstream-create-file-if-not-exists/38284744#38284744", "tags": ["java", "file", "file-io", "new-operator", "fileoutputstream"]}, {"body": "<p>Create file if not exist. If file exits, clear its content:</p>\n\n<pre><code>/**\n * Create file if not exist.\n *\n * @param path For example: \"D:\\foo.xml\"\n */\npublic static void createFile(String path) {\n    try {\n        File file = new File(path);\n        if (!file.exists()) {\n            file.createNewFile();\n        } else {\n            FileOutputStream writer = new FileOutputStream(path);\n            writer.write((\"\").getBytes());\n            writer.close();\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n", "title": "Java FileOutputStream Create File if not exists", "answer_id": 39030833, "link": "http://stackoverflow.com/questions/9620683/java-fileoutputstream-create-file-if-not-exists/39030833#39030833", "tags": ["java", "file", "file-io", "new-operator", "fileoutputstream"]}], "question_id": 9620683}, {"body": "<p>I just want to convert file to input stream, how can I do that?</p>\n\n<p>e.g </p>\n\n<pre><code>FileInputStream fis = new FileInputStream(\"c://filename\");\nInputStream is = ?; \nfis.close();  \nreturn is;\n</code></pre>\n\n<p>my question is how to convert fileinputstream to inputstream, so that i can close fis.</p>\n\n<p>or there is any other way to convert the file to inputstream?\nThank you in advance</p>\n", "tags": ["java", "fileinputstream"], "title": "file to inputstream", "answer_count": 5, "creation_date": 1340108051, "score": 82, "link": "http://stackoverflow.com/questions/11100677/file-to-inputstream", "answers": [{"body": "<p>You would typically first read from the input stream and then close it. You can wrap the FileInputStream in another InputStream (or Reader). It will be automatically closed when you close the wrapping stream/reader.</p>\n\n<p>If this is a method returning an InputStream to the caller, then it is the caller's responsibility to close the stream when finished with it. If you close it in your method, the caller will not be able to use it.</p>\n\n<p>To answer some of your comments...</p>\n\n<p>To send the contents InputStream to a remote consumer, you would write the content of the InputStream to an OutputStream, and then close both streams.</p>\n\n<p>The remote consumer does not know anything about the stream objects you have created. He just receives the content, in an InputStream which he will create, read from and close.</p>\n", "title": "file to inputstream", "answer_id": 11100701, "link": "http://stackoverflow.com/questions/11100677/file-to-inputstream/11100701#11100701", "tags": ["java", "fileinputstream"]}, {"body": "<p>FileInputStream <em>is</em> an inputStream.</p>\n\n<pre><code>FileInputStream fis = new FileInputStream(\"c://filename\");\nInputStream is = fis;\nfis.close();  \nreturn is;\n</code></pre>\n\n<p>Of course, <strong>this will not do what you want it to do</strong>;  the stream you return has already been closed.  Just return the FileInputStream and be done with it.  The calling code should close it.</p>\n", "title": "file to inputstream", "answer_id": 11100707, "link": "http://stackoverflow.com/questions/11100677/file-to-inputstream/11100707#11100707", "tags": ["java", "fileinputstream"]}, {"body": "<pre><code>InputStream is = new FileInputStream(\"c://filename\");\nreturn is;\n</code></pre>\n", "title": "file to inputstream", "answer_id": 11100735, "link": "http://stackoverflow.com/questions/11100677/file-to-inputstream/11100735#11100735", "tags": ["java", "fileinputstream"]}, {"body": "<p>If you wrap one stream into another, you don't close intermediate streams, and very important: You don't close them before finishing using the outer streams. Because you would close the outer stream too.</p>\n", "title": "file to inputstream", "answer_id": 11100757, "link": "http://stackoverflow.com/questions/11100677/file-to-inputstream/11100757#11100757", "tags": ["java", "fileinputstream"]}, {"body": "<pre><code>    InputStream is;\n\n    try {\n        is = new FileInputStream(\"c://filename\");\n\n        is.close(); \n    } catch (FileNotFoundException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n\n    return is;\n</code></pre>\n", "title": "file to inputstream", "answer_id": 11100814, "link": "http://stackoverflow.com/questions/11100677/file-to-inputstream/11100814#11100814", "tags": ["java", "fileinputstream"]}], "question_id": 11100677}, {"body": "<p>First I'll state that I'm much more familiar with enums in C# and it seems like enums in java is a quite mess.</p>\n\n<p>As you can see, I'm trying to use a switch statement @ enums in my next example but I always get an error no matter what I'm doing.</p>\n\n<p><strong>The error I receive is:</strong></p>\n\n<blockquote>\n  <p>The qualified case label <code>SomeClass.AnotherClass.MyEnum.VALUE_A</code> must be replaced with the unqualified enum constant <code>VALUE_A</code></p>\n</blockquote>\n\n<p>The thing is I <em>quite</em> understand the error but I can't just write the VALUE_A since the enum is located in another sub-class. Is there a way to solve this problem? And why is it happening in Java?</p>\n\n<pre><code>//Main Class\npublic class SomeClass {\n\n    //Sub-Class\n    public static class AnotherClass {\n        public enum MyEnum {\n            VALUE_A, VALUE_B\n        }    \n        public MyEnum myEnum;\n    }\n\n    public void someMethod() { \n        MyEnum enumExample //...\n\n        switch (enumExample) {\n            case AnotherClass.MyEnum.VALUE_A: { &lt;-- error on this line\n                //..\n                break;\n            }\n        }\n    }\n}\n</code></pre>\n", "tags": ["java", "enums", "switch-statement"], "title": "Java: using switch statement with enum under subclass", "answer_count": 4, "creation_date": 1334487578, "score": 81, "link": "http://stackoverflow.com/questions/10161408/java-using-switch-statement-with-enum-under-subclass", "answers": [{"body": "<p>Java infers automatically the type of the elements in <code>case</code>, so the labels must be unqualified.</p>\n\n<pre><code>int i;\nswitch(i) {\n   case 5: // &lt;- integer is expected\n}\nMyEnum e;\nswitch (e) {\n   case VALUE_A: // &lt;- an element of the enumeration is expected\n}\n</code></pre>\n", "title": "Java: using switch statement with enum under subclass", "answer_id": 10161441, "link": "http://stackoverflow.com/questions/10161408/java-using-switch-statement-with-enum-under-subclass/10161441#10161441", "tags": ["java", "enums", "switch-statement"]}, {"body": "<p>Change it to this:</p>\n\n<pre><code>switch (enumExample) {\n    case VALUE_A: {\n        //..\n        break;\n    }\n}\n</code></pre>\n\n<p>The clue is in the error. You don't need to qualify <code>case</code> labels with the enum type, just its value.</p>\n", "title": "Java: using switch statement with enum under subclass", "answer_id": 10161455, "link": "http://stackoverflow.com/questions/10161408/java-using-switch-statement-with-enum-under-subclass/10161455#10161455", "tags": ["java", "enums", "switch-statement"]}, {"body": "<p>Write <code>someMethod()</code> in this way:</p>\n\n<pre><code>public void someMethod() {\n\n    SomeClass.AnotherClass.MyEnum enumExample = SomeClass.AnotherClass.MyEnum.VALUE_A;\n\n    switch (enumExample) {\n    case VALUE_A:\n        break;\n    }\n\n}\n</code></pre>\n\n<p>In switch statement you must use the constant name only.</p>\n", "title": "Java: using switch statement with enum under subclass", "answer_id": 10161479, "link": "http://stackoverflow.com/questions/10161408/java-using-switch-statement-with-enum-under-subclass/10161479#10161479", "tags": ["java", "enums", "switch-statement"]}, {"body": "<p>this should do:</p>\n\n<pre><code>//Main Class\npublic class SomeClass {\n\n    //Sub-Class\n    public static class AnotherClass {\n        public enum MyEnum {\n            VALUE_A, VALUE_B\n        }    \n        public MyEnum myEnum;\n    }\n\n    public void someMethod() { \n        AnotherClass.MyEnum enumExample = AnotherClass.MyEnum.VALUE_A; //...\n\n        switch (enumExample) {\n            case VALUE_A: { //&lt;-- error on this line\n            //..\n            break;\n            }\n        }\n    }\n}\n</code></pre>\n", "title": "Java: using switch statement with enum under subclass", "answer_id": 10161488, "link": "http://stackoverflow.com/questions/10161408/java-using-switch-statement-with-enum-under-subclass/10161488#10161488", "tags": ["java", "enums", "switch-statement"]}], "question_id": 10161408}, {"body": "<p>I am using <code>HTTPURLConnection</code> to connect to a web service. I know how to use <code>HTTPURLConnection</code> but I want to understand how it works. Basically, I want to know the following:</p>\n\n<ul>\n<li>On which point does <code>HTTPURLConnection</code> try to establish a connection to the given URL?</li>\n<li>On which point can I know that I was able to successfully establish a connection?</li>\n<li>Are establishing a connection and sending the actual request done in one step/method call? What method is it?</li>\n<li>Can you explain the function of <code>getOutputStream</code> and <code>getInputStream</code> in layman's term? I notice that when the server I'm trying to connect to is down, I get an <code>Exception</code> at <code>getOutputStream</code>. Does it mean that <code>HTTPURLConnection</code> will only start to establish a connection when I invoke <code>getOutputStream</code>? How about the <code>getInputStream</code>? Since I'm only able to get the response at <code>getInputStream</code>, then does it mean that I didn't send any request at <code>getOutputStream</code> yet but simply establishes a connection? Do <code>HttpURLConnection</code> go back to the server to request for response when I invoke <code>getInputStream</code>?</li>\n<li>Am I correct to say that <code>openConnection</code> simply creates a new connection object but does not establish any connection yet?</li>\n<li>How can I measure the read overhead and connect overhead?</li>\n</ul>\n", "tags": ["java", "inputstream", "httpurlconnection", "outputstream", "urlconnection"], "title": "Can you explain the HttpURLConnection connection process?", "answer_count": 4, "creation_date": 1334200969, "score": 81, "link": "http://stackoverflow.com/questions/10116961/can-you-explain-the-httpurlconnection-connection-process", "answers": [{"body": "<pre><code>String message = URLEncoder.encode(\"my message\", \"UTF-8\");\n\ntry {\n    // instantiate the URL object with the target URL of the resource to\n    // request\n    URL url = new URL(\"http://www.example.com/comment\");\n\n    // instantiate the HttpURLConnection with the URL object - A new\n    // connection is opened every time by calling the openConnection\n    // method of the protocol handler for this URL.\n    // 1. This is the point where the connection is opened.\n    HttpURLConnection connection = (HttpURLConnection) url\n            .openConnection();\n    // set connection output to true\n    connection.setDoOutput(true);\n    // instead of a GET, we're going to send using method=\"POST\"\n    connection.setRequestMethod(\"POST\");\n\n    // instantiate OutputStreamWriter using the output stream, returned\n    // from getOutputStream, that writes to this connection.\n    // 2. This is the point where you'll know if the connection was\n    // successfully established. If an I/O error occurs while creating\n    // the output stream, you'll see an IOException.\n    OutputStreamWriter writer = new OutputStreamWriter(\n            connection.getOutputStream());\n\n    // write data to the connection. This is data that you are sending\n    // to the server\n    // 3. No. Sending the data is conducted here. We established the\n    // connection with getOutputStream\n    writer.write(\"message=\" + message);\n\n    // Closes this output stream and releases any system resources\n    // associated with this stream. At this point, we've sent all the\n    // data. Only the outputStream is closed at this point, not the\n    // actual connection\n    writer.close();\n    // if there is a response code AND that response code is 200 OK, do\n    // stuff in the first if block\n    if (connection.getResponseCode() == HttpURLConnection.HTTP_OK) {\n        // OK\n\n        // otherwise, if any other status code is returned, or no status\n        // code is returned, do stuff in the else block\n    } else {\n        // Server returned HTTP error code.\n    }\n} catch (MalformedURLException e) {\n    // ...\n} catch (IOException e) {\n    // ...\n}\n</code></pre>\n\n<p>The first 3 answers to your questions are listed as inline comments, beside each method, in the example HTTP POST above. </p>\n\n<p>From <a href=\"http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html#getOutputStream%28%29\">getOutputStream</a>:</p>\n\n<blockquote>\n  <p>Returns an output stream that writes to this connection.</p>\n</blockquote>\n\n<p>Basically, I think you have a good understanding of how this works, so let me just reiterate in layman's terms. <code>getOutputStream</code> basically opens a <strike>connection</strike> stream, with the intention of writing data to the server. In the above code example \"message\" could be a comment that we're sending to the server that represents a comment left on a post. When you see <code>getOutputStream</code>, you're opening the <strike>connection</strike> stream for writing, but you don't actually write any data until you call <code>writer.write(\"message=\" + message);</code>.</p>\n\n<p>From <a href=\"http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html#getInputStream%28%29\">getInputStream()</a>:</p>\n\n<blockquote>\n  <p>Returns an input stream that reads from this open connection. A SocketTimeoutException can be thrown when reading from the returned input stream if the read timeout expires before data is available for read.</p>\n</blockquote>\n\n<p><code>getInputStream</code> does the opposite. Like <code>getOutputStream</code>, it also opens a <strike>connection</strike> stream, but the intent is to read data from the server, not write to it. If the connection or stream-opening fails, you'll see a <code>SocketTimeoutException</code>.</p>\n\n<blockquote>\n  <p>How about the getInputStream? Since I'm only able to get the response at getInputStream, then does it mean that I didn't send any request at getOutputStream yet but simply establishes a connection?</p>\n</blockquote>\n\n<p>Keep in mind that sending a request and sending data are two different operations. When you invoke <strike>getOutputStream or getInputStream</strike> <code>url.openConnection()</code>, you send a request to the server to establish a connection. There is a handshake that occurs where the server sends back an acknowledgement to you that the connection is established. It is then at that point in time that you're prepared to send or receive data. Thus, you do not need to call getOutputStream to <strike>establish a connection</strike> open a stream, unless your purpose for making the request is to send data.</p>\n\n<p>In layman's terms, making a <code>getInputStream</code> request is the equivalent of making a phone call to your friend's house to say \"Hey, is it okay if I come over and borrow that pair of vice grips?\" and your friend establishes the handshake by saying, \"Sure! Come and get it\". Then, at that point, the connection is made, you walk to your friend's house, knock on the door, request the vice grips, and walk back to your house.</p>\n\n<p>Using a similar example for <code>getOutputStream</code> would involve calling your friend and saying \"Hey, I have that money I owe you, can I send it to you\"? Your friend, needing money and sick inside that you kept it for so long, says \"Sure, come on over you cheap bastard\". So you walk to your friend's house and \"POST\" the money to him. He then kicks you out and you walk back to your house.</p>\n\n<p>Now, continuing with the layman's example, let's look at some Exceptions. If you called your friend and he wasn't home, that could be a 500 error. If you called and got a disconnected number message because your friend is tired of you borrowing money all the time, that's a 404 page not found. If your phone is dead because you didn't pay the bill, that could be an IOException. (NOTE: This section may not be 100% correct. It's intended to give you a general idea of what's happening in layman's terms.)</p>\n\n<p><strong>Question #5:</strong></p>\n\n<p><strike>Yes, you are correct that openConnection simply creates a new connection object but does not establish it. The connection is established when you call either getInputStream or getOutputStream.</strike></p>\n\n<p><code>openConnection</code> creates a new connection object. From the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#openConnection%28%29\">URL.openConnection javadocs</a>:</p>\n\n<blockquote>\n  <p>A new connection is opened every time by calling the openConnection method of the protocol handler for this URL.</p>\n</blockquote>\n\n<p>The connection is established when you call openConnection, and the InputStream, OutputStream, or both, are called when you instantiate them.</p>\n\n<p><strong>Question #6</strong>:</p>\n\n<p>To measure the overhead, I generally wrap some very simple timing code around the entire connection block, like so:</p>\n\n<pre><code>long start = System.currentTimeMillis();\nlog.info(\"Time so far = \" + new Long(System.currentTimeMillis() - start) );\n\n// run the above example code here\nlog.info(\"Total time to send/receive data = \" + new Long(System.currentTimeMillis() - start) );\n</code></pre>\n\n<p>I'm sure there are more advanced methods for measuring the request time and overhead, but this generally is sufficient for my needs.</p>\n\n<p>For information on closing connections, which you didn't ask about, see <a href=\"http://stackoverflow.com/questions/272910/in-java-when-does-a-url-connection-close\">In Java when does a URL connection close?</a>.</p>\n", "title": "Can you explain the HttpURLConnection connection process?", "answer_id": 10117254, "link": "http://stackoverflow.com/questions/10116961/can-you-explain-the-httpurlconnection-connection-process/10117254#10117254", "tags": ["java", "inputstream", "httpurlconnection", "outputstream", "urlconnection"]}, {"body": "<p>Tim Bray presented a concise step-by-step, stating that openConnection() does not establish an actual connection. Rather, an actual HTTP connection is not established until you call methods such as getInputStream() or getOutputStream().</p>\n\n<p><a href=\"http://www.tbray.org/ongoing/When/201x/2012/01/17/HttpURLConnection\">http://www.tbray.org/ongoing/When/201x/2012/01/17/HttpURLConnection</a></p>\n", "title": "Can you explain the HttpURLConnection connection process?", "answer_id": 17665696, "link": "http://stackoverflow.com/questions/10116961/can-you-explain-the-httpurlconnection-connection-process/17665696#17665696", "tags": ["java", "inputstream", "httpurlconnection", "outputstream", "urlconnection"]}, {"body": "<blockquote>\n  <p>On which point does HTTPURLConnection try to establish a connection to the given URL?</p>\n</blockquote>\n\n<p>On the port named in the URL if any, otherwise 80 for HTTP and 443 for HTTPS. I believe this is documented.</p>\n\n<blockquote>\n  <p>On which point can I know that I was able to successfully establish a connection?</p>\n</blockquote>\n\n<p>When you call getInputStream() or getOutputStream() or getResponseCode() without getting an exception.</p>\n\n<blockquote>\n  <p>Are establishing a connection and sending the actual request done in one step/method call? What method is it?</p>\n</blockquote>\n\n<p>No and none.</p>\n\n<blockquote>\n  <p>Can you explain the function of getOutputStream and getInputStream in layman's term?</p>\n</blockquote>\n\n<p>Either of them first connects if necessary, then returns the required stream.</p>\n\n<blockquote>\n  <p>I notice that when the server I'm trying to connect to is down, I get an Exception at getOutputStream. Does it mean that HTTPURLConnection will only start to establish a connection when I invoke getOutputStream? How about the getInputStream? Since I'm only able to get the response at getInputStream, then does it mean that I didn't send any request at getOutputStream yet but simply establishes a connection? Do HttpURLConnection go back to the server to request for response when I invoke getInputStream?</p>\n</blockquote>\n\n<p>See above.</p>\n\n<blockquote>\n  <p>Am I correct to say that openConnection simply creates a new connection object but does not establish any connection yet?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <p>How can I measure the read overhead and connect overhead?</p>\n</blockquote>\n\n<p>Connect: take the time getInoutStream() or getOutputStream() takes to return, whichever you call first. Read: time from starting first read to getting the EOS.</p>\n", "title": "Can you explain the HttpURLConnection connection process?", "answer_id": 17665771, "link": "http://stackoverflow.com/questions/10116961/can-you-explain-the-httpurlconnection-connection-process/17665771#17665771", "tags": ["java", "inputstream", "httpurlconnection", "outputstream", "urlconnection"]}, {"body": "<p><em>On which point does HTTPURLConnection try to establish a connection to the given URL?</em></p>\n\n<p>It's worth clarifying, there's the <em>'UrlConnection' instance</em> and then there's the underlying <em>Tcp/Ip/SSL socket connection</em>, 2 different concepts.  The 'UrlConnection' or 'HttpUrlConnection' instance is synonymous with a single HTTP page request, and is created when you call url.openConnection().   But if you do multiple url.openConnection()'s from the one 'url' instance then if you're lucky, they'll reuse the same Tcp/Ip socket and SSL handshaking stuff...which is good if you're doing lots of page requests to the same server, especially good if you're using SSL where the overhead of establishing the socket is very high.</p>\n\n<p>See:\n<a href=\"http://stackoverflow.com/questions/3460990/httpurlconnection-implementation\">HttpURLConnection implementation</a></p>\n", "title": "Can you explain the HttpURLConnection connection process?", "answer_id": 18603760, "link": "http://stackoverflow.com/questions/10116961/can-you-explain-the-httpurlconnection-connection-process/18603760#18603760", "tags": ["java", "inputstream", "httpurlconnection", "outputstream", "urlconnection"]}], "question_id": 10116961}, {"body": "<p>Swing components have multiple methods related to updates of screen layout, in particular:</p>\n\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/awt/Container.html#validate--\"><code>validate()</code></a></li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/awt/Container.html#invalidate--\"><code>invalidate()</code></a></li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/javax/swing/JComponent.html#revalidate--\"><code>revalidate()</code></a></li>\n</ul>\n\n<p>The Java documentation defines these somewhat from a technical perspective, but it's not particularly clear how they are meant to be used.</p>\n\n<p>What is the difference between these, and in what circumstances should you use one rather than the others?</p>\n", "tags": ["java", "swing", "user-interface"], "title": "Difference between validate(), revalidate() and invalidate() in Swing GUI", "answer_count": 2, "creation_date": 1330571636, "score": 81, "link": "http://stackoverflow.com/questions/9510125/difference-between-validate-revalidate-and-invalidate-in-swing-gui", "answers": [{"body": "<p>Just IMHO. Not sure it's 100% correct.</p>\n\n<p><code>invalidate()</code> marks the container as invalid. Means the content is somehow wrong and must be relayed out. But it's just a kind of mark/flag. It's possible that multiple invalid containers must be refreshed later.</p>\n\n<p><code>validate()</code> performs relayout. It means invalid content is asked for all the sizes and all the subcomponents' sizes are set to proper values by <code>LayoutManager</code>.</p>\n\n<p><code>revalidate()</code> is just sum of both. It marks the container as invalid and performs layout of the container.</p>\n", "title": "Difference between validate(), revalidate() and invalidate() in Swing GUI", "answer_id": 9511578, "link": "http://stackoverflow.com/questions/9510125/difference-between-validate-revalidate-and-invalidate-in-swing-gui/9511578#9511578", "tags": ["java", "swing", "user-interface"]}, {"body": "<p><code>validate()</code> : In Swing when you create Component, it is not <code>valid</code> i.e. it's valid property is <code>false</code>. A component is said to be valid, when it's width, height, location and stuff has been determined. This is usually done by calling their <code>validate()</code> method, directly or indirectly. When we call <code>validate()</code> on containers, it will validate the container (if it is invalid) by calling its <code>doLayout()</code> method, which typically will invoke the <code>LayoutManager</code>. Now each child placed on this container will be validated recursively, so that the entire tree will be laid out and will become valid.</p>\n\n<p><code>revalidate()</code> : <code>revalidate()</code> is to be called when you change an attribute that would affect their width/height and call repaint() when you change an attribute that would affect their appearance.\nFor Example, If your <code>JFrame</code> contains a <code>JPanel</code>, now at certain point of time you removed that <code>JPanel</code> and inserted a new one in it's place, depending on the contents of the newly placed <code>JPanel</code>, the size of the components inside the <code>JPanel</code> as well as <code>The CONTAINER</code> itself (by virtue of the layout manager used by it), changes. Which pushes it to the invalidate state. So in order to validate this change, you have to explicitly call <code>revalidate()</code>.</p>\n\n<p><code>invalidate()</code> : This thing is something, I had never used, so might be not much of the info I can give. But seems like the scenario presented above, can give a bit of hint, as to what happens in <code>invalidate()</code>. </p>\n", "title": "Difference between validate(), revalidate() and invalidate() in Swing GUI", "answer_id": 9511880, "link": "http://stackoverflow.com/questions/9510125/difference-between-validate-revalidate-and-invalidate-in-swing-gui/9511880#9511880", "tags": ["java", "swing", "user-interface"]}], "question_id": 9510125}, {"body": "<p>I just figured out about array lists and I need a few pointers.\nI dont know how to find the length of an array list I think you might need to use <code>blank.length();</code> but Im not sure.</p>\n\n<p>I made an array list</p>\n\n<pre><code>ArrayList&lt;String&gt; myList = new ArrayList&lt;String&gt;();\n</code></pre>\n\n<p>but how do i write code to print out the size of myList. </p>\n", "tags": ["java"], "title": "How to find the length of an array list?", "answer_count": 2, "creation_date": 1331444031, "score": 80, "link": "http://stackoverflow.com/questions/9652732/how-to-find-the-length-of-an-array-list", "answers": [{"body": "<p>The size member function.</p>\n\n<pre><code>myList.size();\n</code></pre>\n\n<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html\">http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html</a></p>\n", "title": "How to find the length of an array list?", "answer_id": 9652745, "link": "http://stackoverflow.com/questions/9652732/how-to-find-the-length-of-an-array-list/9652745#9652745", "tags": ["java"]}, {"body": "<pre><code>System.out.println(myList.size());\n</code></pre>\n\n<blockquote>\n  <p>=> 0</p>\n</blockquote>\n\n<pre><code>myList.add(\"newString\");\nSystem.out.println(myList.size());\n</code></pre>\n\n<blockquote>\n  <p>=> 1</p>\n</blockquote>\n", "title": "How to find the length of an array list?", "answer_id": 9652753, "link": "http://stackoverflow.com/questions/9652732/how-to-find-the-length-of-an-array-list/9652753#9652753", "tags": ["java"]}], "question_id": 9652732}, {"body": "<p>How can one restart and start Tomcat 6  on Ubuntu from the command line with a default installation?</p>\n", "tags": ["java", "tomcat", "ubuntu"], "title": "How to restart tomcat 6 in ubuntu", "answer_count": 1, "creation_date": 1335018212, "score": 80, "link": "http://stackoverflow.com/questions/10259738/how-to-restart-tomcat-6-in-ubuntu", "answers": [{"body": "<p>if you are using extracted tomcat then,</p>\n\n<p><code>startup.sh</code> and <code>shutdown.sh</code> are two script located in TOMCAT/bin/ to start and shutdown tomcat, You could use that</p>\n\n<p>if tomcat is installed then</p>\n\n<pre><code>/etc/init.d/tomcat5.5 start\n/etc/init.d/tomcat5.5 stop\n/etc/init.d/tomcat5.5 restart\n</code></pre>\n", "title": "How to restart tomcat 6 in ubuntu", "answer_id": 10259772, "link": "http://stackoverflow.com/questions/10259738/how-to-restart-tomcat-6-in-ubuntu/10259772#10259772", "tags": ["java", "tomcat", "ubuntu"]}], "question_id": 10259738}, {"body": "<p>I am using trying to use the <code>toString(int[])</code> method, but I think I am doing it wrong:</p>\n\n<p><a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#toString%28int%5B%5D%29\">http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#toString(int[])</a></p>\n\n<p>My code:</p>\n\n<pre><code>int[] array = new int[lnr.getLineNumber() + 1];\nint i = 0;\n\nSystem.out.println(array.toString());\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>[I@23fc4bec\n</code></pre>\n\n<p>Also I tried printing like this, but:</p>\n\n<pre><code>System.out.println(new String().toString(array));  // **error on next line**\nThe method toString() in the type String is not applicable for the arguments (int[])\n</code></pre>\n\n<p><strong>I took this code out of bigger and more complex code, but I can add it if needed. But this should give general information.</strong></p>\n\n<p>I am looking for output, like in Oracle's documentation:</p>\n\n<blockquote>\n  <p>The string representation consists of a list of the array's elements, enclosed in square brackets (\"[]\"). Adjacent elements are separated by the characters \", \" (a comma followed by a space). </p>\n</blockquote>\n", "tags": ["java", "arrays", "tostring"], "title": "How to convert an int array to String with toString method in Java", "answer_count": 8, "creation_date": 1338930166, "score": 79, "link": "http://stackoverflow.com/questions/10904911/how-to-convert-an-int-array-to-string-with-tostring-method-in-java", "answers": [{"body": "<pre><code>System.out.println(array.toString());\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>System.out.println(Arrays.toString(array));\n</code></pre>\n", "title": "How to convert an int array to String with toString method in Java", "answer_id": 10904953, "link": "http://stackoverflow.com/questions/10904911/how-to-convert-an-int-array-to-string-with-tostring-method-in-java/10904953#10904953", "tags": ["java", "arrays", "tostring"]}, {"body": "<p>What you want is the <code>Arrays.toString(int[])</code> method:</p>\n\n<pre><code>import java.util.Arrays;\n\nint[] array = new int[lnr.getLineNumber() + 1];\nint i = 0;\n\n..      \n\nSystem.out.println(Arrays.toString(array));\n</code></pre>\n\n<p>There is a static <code>Arrays.toString</code> helper method for every different primitive java type; the one for <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString(int[])\"><code>int[]</code> says this</a>:</p>\n\n<blockquote>\n<pre><code>public static String toString(int[] a)\n</code></pre>\n  \n  <p>Returns a string representation of the contents of the specified array. The string representation consists of a list of the array's elements, enclosed in square brackets (<code>\"[]\"</code>). Adjacent elements are separated by the characters <code>\", \"</code> (a comma followed by a space). Elements are converted to strings as by <code>String.valueOf(int)</code>. Returns <code>\"null\"</code> if <code>a</code> is null.</p>\n</blockquote>\n", "title": "How to convert an int array to String with toString method in Java", "answer_id": 10904956, "link": "http://stackoverflow.com/questions/10904911/how-to-convert-an-int-array-to-string-with-tostring-method-in-java/10904956#10904956", "tags": ["java", "arrays", "tostring"]}, {"body": "<p>The toString method on an array only prints out the memory address, which you are getting.\nYou have to loop though the array and print out each item by itself</p>\n\n<pre><code>for(int i : array) {\n System.println(i);\n}\n</code></pre>\n", "title": "How to convert an int array to String with toString method in Java", "answer_id": 10904969, "link": "http://stackoverflow.com/questions/10904911/how-to-convert-an-int-array-to-string-with-tostring-method-in-java/10904969#10904969", "tags": ["java", "arrays", "tostring"]}, {"body": "<p>You can use <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#toString%28int%5B%5D%29\" rel=\"nofollow\">java.util.Arrays</a>:</p>\n\n<pre><code>String res = Arrays.toString(array);\nSystem.out.println(res);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n</code></pre>\n", "title": "How to convert an int array to String with toString method in Java", "answer_id": 10905058, "link": "http://stackoverflow.com/questions/10904911/how-to-convert-an-int-array-to-string-with-tostring-method-in-java/10905058#10905058", "tags": ["java", "arrays", "tostring"]}, {"body": "<p>Using the utility I describe <a href=\"http://stackoverflow.com/questions/10900869/how-do-i-write-a-method-which-would-work-on-both-lists-and-arrays/10901267#10901267\">here</a>, you can have a more control over the string representation you get for your array.</p>\n\n<pre><code>String[] s = { \"hello\", \"world\" };\nRichIterable&lt;String&gt; r = RichIterable.from(s);\nr.mkString();                 // gives \"hello, world\"\nr.mkString(\" | \");            // gives \"hello | world\"\nr.mkString(\"&lt; \", \", \", \" &gt;\"); // gives \"&lt; hello, world &gt;\"\n</code></pre>\n", "title": "How to convert an int array to String with toString method in Java", "answer_id": 10908919, "link": "http://stackoverflow.com/questions/10904911/how-to-convert-an-int-array-to-string-with-tostring-method-in-java/10908919#10908919", "tags": ["java", "arrays", "tostring"]}, {"body": "<p>This function returns a array of int in the string form like \"6097321041141011026\"</p>\n\n<pre><code>private String IntArrayToString(byte[] array) {\n        String strRet=\"\";\n        for(int i : array) {\n            strRet+=Integer.toString(i);\n        }\n        return strRet;\n    }\n</code></pre>\n", "title": "How to convert an int array to String with toString method in Java", "answer_id": 28789975, "link": "http://stackoverflow.com/questions/10904911/how-to-convert-an-int-array-to-string-with-tostring-method-in-java/28789975#28789975", "tags": ["java", "arrays", "tostring"]}, {"body": "<p>Here's an example of going from a list of strings, to a single string, back to a list of strings. </p>\n\n<p>Compiling:</p>\n\n<pre><code>$ javac test.java\n$ java test\n</code></pre>\n\n<p>Running:</p>\n\n<pre><code>[abc, def, ghi, jkl, mno]\n\nabc\ndef\nghi\njkl\nmno\n</code></pre>\n\n<p>Source code:</p>\n\n<pre><code>import java.util.*;\npublic class test {\n\n    public static void main(String[] args) {\n            List&lt;String&gt; listOfStrings= new ArrayList&lt;String&gt;();\n            listOfStrings.add(\"abc\");\n            listOfStrings.add(\"def\");\n            listOfStrings.add(\"ghi\");\n            listOfStrings.add(\"jkl\");\n            listOfStrings.add(\"mno\");\n            String singleString = listOfStrings.toString();\n            List&lt;String&gt; resultStringList = Arrays.asList(singleString.substring(0, singleString.length() - 1).substring(1).split(\"[\\\\s,]+\"));\n            for (String string : resultStringList) {\n                    System.out.println(string);\n            }\n\n    }\n</code></pre>\n\n<p>}</p>\n", "title": "How to convert an int array to String with toString method in Java", "answer_id": 32752048, "link": "http://stackoverflow.com/questions/10904911/how-to-convert-an-int-array-to-string-with-tostring-method-in-java/32752048#32752048", "tags": ["java", "arrays", "tostring"]}, {"body": "<p>Very much agreed with @Patrik M, but the thing with Arrays.toString is that it includes <strong>\"[\"</strong> and <strong>\"]\"</strong> and <strong>\",\"</strong> in the output. So I'll simply use a regex to remove them from outout like this</p>\n\n<pre><code>String strOfInts = Arrays.toString(intArray).replaceAll(\"\\\\[|\\\\]|,|\\\\s\", \"\");\n</code></pre>\n\n<p>and now you have a String which can be parsed back to <code>java.lang.Number</code>, for example, </p>\n\n<pre><code>long veryLongNumber = Long.parseLong(intStr);\n</code></pre>\n", "title": "How to convert an int array to String with toString method in Java", "answer_id": 34070570, "link": "http://stackoverflow.com/questions/10904911/how-to-convert-an-int-array-to-string-with-tostring-method-in-java/34070570#34070570", "tags": ["java", "arrays", "tostring"]}], "question_id": 10904911}], "quota_max": 300, "page_size": 100, "quota_remaining": 270, "page": 1}