{"has_more": true, "items": [{"body": "<p>I generated two matrices of <code>1000</code> x <code>1000</code>:</p>\n\n<p>First Matrix: <code>O</code> and <code>#</code>.<br>\nSecond Matrix: <code>O</code> and <code>B</code>.</p>\n\n<p>Using the following code, the first matrix took 8.52 seconds to complete:</p>\n\n<pre><code>Random r = new Random();\nfor (int i = 0; i &lt; 1000; i++) {\n    for (int j = 0; j &lt; 1000; j++) {\n        if(r.nextInt(4) == 0) {\n            System.out.print(\"O\");\n        } else {\n            System.out.print(\"#\");\n        }\n    }\n\n   System.out.println(\"\");\n }\n</code></pre>\n\n<p>With this code, the second matrix took 259.152 seconds to complete:</p>\n\n<pre><code>Random r = new Random();\nfor (int i = 0; i &lt; 1000; i++) {\n    for (int j = 0; j &lt; 1000; j++) {\n        if(r.nextInt(4) == 0) {\n            System.out.print(\"O\");\n        } else {\n            System.out.print(\"B\"); //only line changed\n        }\n    }\n\n    System.out.println(\"\");\n}\n</code></pre>\n\n<p>What is the reason behind the dramatically different run times?</p>\n\n<hr>\n\n<p>As suggested in the comments, printing only <code>System.out.print(\"#\");</code> takes 7.8871 seconds, whereas <code>System.out.print(\"B\");</code> gives <code>still printing...</code>.</p>\n\n<p>As others who pointed out that it works for them normally, I tried <a href=\"http://ideone.com\">Ideone.com</a> for instance, and both pieces of code execute at the same speed.</p>\n\n<p>Test Conditions:</p>\n\n<ul>\n<li>I ran this test from Netbeans 7.2, with the output into its console</li>\n<li>I used <code>System.nanoTime()</code> for measurements</li>\n</ul>\n", "tags": ["java", "performance", "system.out"], "title": "Why is printing &quot;B&quot; dramatically slower than printing &quot;#&quot;?", "answers": [{"body": "<p><em>Pure speculation</em> is that you're using a terminal that attempts to do <a href=\"http://en.wikipedia.org/wiki/Word_wrap\">word-wrapping</a> rather than character-wrapping, and treats <code>B</code> as a word character but <code>#</code> as a non-word character. So when it reaches the end of a line and searches for a place to break the line, it sees a <code>#</code> almost immediately and happily breaks there; whereas with the <code>B</code>, it has to keep searching for longer, and may have more text to wrap (which may be expensive on some terminals, e.g., outputting backspaces, then outputting spaces to overwrite the letters being wrapped).</p>\n\n<p>But that's pure speculation.</p>\n", "title": "Why is printing &quot;B&quot; dramatically slower than printing &quot;#&quot;?", "tags": ["java", "performance", "system.out"], "link": "http://stackoverflow.com/questions/21947452/why-is-printing-b-dramatically-slower-than-printing/21947627#21947627", "question_id": 21947452, "answer_id": 21947627}, {"body": "<p>I performed tests on Eclipse vs Netbeans 8.0.2, both with Java version 1.8;\nI used <code>System.nanoTime()</code> for measurements.</p>\n\n<h2>Eclipse:</h2>\n\n<p>I got the <strong>same time on both cases</strong> - around <strong>1.564 seconds</strong>.</p>\n\n<h2>Netbeans:</h2>\n\n<ul>\n<li>Using \"#\": <strong>1.536 seconds</strong></li>\n<li>Using \"B\": <strong>44.164 seconds</strong></li>\n</ul>\n\n<p>So, it looks like Netbeans has bad performance on print to console.</p>\n\n<p>After more research I realized that the problem is <a href=\"http://en.wikipedia.org/wiki/Line_wrap_and_word_wrap\">line-wrapping</a> of the max buffer of Netbeans (it's not restricted to <code>System.out.println</code> command), demonstrated by this code:</p>\n\n<pre><code>for (int i = 0; i &lt; 1000; i++) {\n    long t1 = System.nanoTime();\n    System.out.print(\"BBB......BBB\"); \\\\&lt;-contain 1000 \"B\"\n    long t2 = System.nanoTime();\n    System.out.println(t2-t1);\n    System.out.println(\"\");\n}\n</code></pre>\n\n<p>The time results are less then 1 millisecond every iteration except <strong>every fifth iteration</strong>, when the time result is around 225 millisecond. Something like (in nanoseconds):</p>\n\n<pre><code>BBB...31744\nBBB...31744\nBBB...31744\nBBB...31744\nBBB...226365807\nBBB...31744\nBBB...31744\nBBB...31744\nBBB...31744\nBBB...226365807\n.\n.\n.\n</code></pre>\n\n<p>And so on..</p>\n\n<h2>Summary:</h2>\n\n<ol>\n<li>Eclipse works perfectly with \"B\"</li>\n<li>Netbeans has a line-wrapping problem that can be solved (because the problem does not occur in eclipse)(without adding space after B (\"B \")).</li>\n</ol>\n", "title": "Why is printing &quot;B&quot; dramatically slower than printing &quot;#&quot;?", "tags": ["java", "performance", "system.out"], "link": "http://stackoverflow.com/questions/21947452/why-is-printing-b-dramatically-slower-than-printing/29434641#29434641", "question_id": 21947452, "answer_id": 29434641}], "creation_date": 1393026343, "score": 1877, "link": "http://stackoverflow.com/questions/21947452/why-is-printing-b-dramatically-slower-than-printing", "question_id": 21947452}, {"body": "<p>I updated Eclipse with the new SDK tools (rev 23) but now when Eclipse starts I receive the error:</p>\n\n<blockquote>\n  <p>This Android SDK requires Android Developer Toolkit version 23.0.0 or above. Current version is 22.6.3.v201404151837-1123206. Please update ADT to the latest version.</p>\n</blockquote>\n\n<p>No updates were found with <strong>\"Check for updates\"</strong>. If I try <strong>\"Install new software\"</strong>, I can see the version 23, but I can't upgrade due to the following error:</p>\n\n<pre><code>Cannot complete the install because of a conflicting dependency.\nSoftware being installed: Android Development Tools 23.0.0.1245622 (com.android.ide.eclipse.adt.feature.feature.group 23.0.0.1245622)\nSoftware currently installed: Android Developer Tools 22.2.1.v201309180102-833290 (com.android.ide.eclipse.adt.package.product 22.2.1.v201309180102-833290)\nOnly one of the following can be installed at once: \n    ADT Package 22.6.3.v201404151837-1123206 (com.android.ide.eclipse.adt.package 22.6.3.v201404151837-1123206)\n    ADT Package 23.0.0.1245622 (com.android.ide.eclipse.adt.package 23.0.0.1245622)\nCannot satisfy dependency:\n    From: Android Development Tools 23.0.0.1245622 (com.android.ide.eclipse.adt.feature.feature.group 23.0.0.1245622)\n    To: com.android.ide.eclipse.adt.package [23.0.0.1245622]\nCannot satisfy dependency:\n    From: Android Development Tools 22.6.3.v201404151837-1123206 (com.android.ide.eclipse.adt.feature.group 22.6.3.v201404151837-1123206)\n    To: com.android.ide.eclipse.adt.package [22.6.3.v201404151837-1123206]\nCannot satisfy dependency:\n    From: ADT Package 22.2.1.v201309180102-833290 (com.android.ide.eclipse.adt.package.feature.group 22.2.1.v201309180102-833290)\n    To: com.android.ide.eclipse.adt.feature.group 22.2.0\nCannot satisfy dependency:\n    From: Android Developer Tools 22.2.1.v201309180102-833290 (com.android.ide.eclipse.adt.package.product 22.2.1.v201309180102-833290)\n    To: com.android.ide.eclipse.adt.package.feature.group [22.2.1.v201309180102-833290]\n</code></pre>\n\n<p>After download of the last ADT from the web site, it seems there's another problem.\nWith SDK Tools rev. 23 proguard is not installed, the folder SDK <code>dir/tools/proguard</code> is missing and other tools are missing. This version contains several bugs.</p>\n", "tags": ["java", "android", "eclipse", "adt"], "title": "Update Eclipse with Android development tools v. 23", "answers": [{"body": "<p><strong>UPDATE</strong>: Google has released ADT v23.0.2. This solved many problems of previous ADT version 23.</p>\n\n<p>Step-by-step:</p>\n\n<ul>\n<li>Help -> Install New Software...</li>\n<li>For \"Work with\", select the Android source <code>https://dl-ssl.google.com/android/eclipse</code>\n<img src=\"http://i.stack.imgur.com/gkxdA.png\" alt=\"Work with Android source\"></li>\n<li>Tick ADT v23.0 for installation, then click \"Next\"</li>\n<li>Eclipse will show \"Install Remediation Page\" since there is conflict with previous version. (If it does not, see below.) Select \"Update my installation to be compatible with items being installed\" to uninstall the old version and install the new one. After that, proceed with the usual steps\n<img src=\"http://i.stack.imgur.com/CYZHN.png\" alt=\"Install remediation page\"></li>\n</ul>\n\n<p>Note: When I installed the new version of ADT, I didn't include the new version of \"Android Native Development Tools\" package. Instead, I installed the rest of packages first, and then installed \"Android Native Development Tools\". For a reason, if I try to install all the new packages including \"Android Native Development Tools\", the installation fails.</p>\n\n<p>UPDATE: If there is no \"Remediation page\", <a href=\"http://stackoverflow.com/a/9097282/755804\">the only way to remove the ADT plugin from Eclipse is to go to <code>Help &gt; About Eclipse &gt; Installation Details</code> and uninstall from there</a> But there is a risk of uninstalling eclipse itself.</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24437737#24437737", "question_id": 24437564, "answer_id": 24437737}, {"body": "<p>For me it helped to delete Android 4.4W which is also API 20 and might be a cause for the conflict. So only install Android 4.4W or Android L until they fix it.</p>\n\n<p>And (again this might only be for me) it only works in Android Studio not in Eclipse ...</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24437803#24437803", "question_id": 24437564, "answer_id": 24437803}, {"body": "<p>I have done following to resolve an issue.</p>\n\n<ol>\n<li><p>Go to <a href=\"http://developer.android.com/sdk/installing/installing-adt.html\">http://developer.android.com/sdk/installing/installing-adt.html</a> and download the latest ADT ZIP file (at the bottom of page).</p></li>\n<li><p>Go to <strong>Eclipse -> help -> About Eclipse -> Installation details</strong></p></li>\n<li><p>Delete <strong>Android DDM, Android Development Tools, Hierarchy Viewer, Native Development Tools, TraceView, etc, 22.X version</strong>.</p></li>\n<li><p>Help -> Install New Software -> Add -> Archive - > Select the downloaded ZIP file in step 1.</p></li>\n<li><p>Select all the latest version of all 23 which I have deleted in step 3 and accept the license agreement.</p></li>\n</ol>\n\n<p>Restart Eclipse, and it fixes my issue.</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24438136#24438136", "question_id": 24437564, "answer_id": 24438136}, {"body": "<p>On ADT bundled Eclipse I had to first uninstall the ADT and then do a fresh install.\nTo remove the ADT plugin from Eclipse go to Help > About Eclipse > Installation Details.\nSelect ADT plug-in, then click Uninstall.\nAfter uninstallation install ADT from Help > Install new software.</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24438977#24438977", "question_id": 24437564, "answer_id": 24438977}, {"body": "<p><strong>DO NOT DO THIS</strong></p>\n\n<p><strong>Warning: Please see the comments below this answer. These steps have had a negative impact for many people.</strong></p>\n\n<ol>\n<li>Click Help / Install new software...</li>\n<li>Click on What is \"already installed\" (as in picture below)</li>\n<li>In the new window you can uninstall the old ADT (uninstall Android Development Tools, Android DDMS, Android Hierarchy Viewer, Android TraceView, Android Native Development Tools and Tracer for OpenGL ES)</li>\n<li>Restart Eclipse</li>\n<li>Then again click on Help / Install New Software</li>\n<li>Choose ADT... Install </li>\n</ol>\n\n<p>I hope it helps!</p>\n\n<p><img src=\"http://i.stack.imgur.com/NnOi3.jpg\" alt=\"Picture Demonstration\"></p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24439028#24439028", "question_id": 24437564, "answer_id": 24439028}, {"body": "<p>I had to delete ADT and install it again.</p>\n\n<p><strong>However be warned</strong>, this caused me and one other person to have an annotations.jar missing errors in the Java Build path for certain projects, probably because it was trying to look for an old SDK, so upgrading projects is the next step I have to take.</p>\n\n<p>The errors relate to libraries mostly, Google Play Services, Facebook SDK, ActionBarCompat.</p>\n\n<p>For this step, you uninstall ADT, then put the URL back in to download them. The url is: <code>https://dl-ssl.google.com/android/eclipse</code></p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24439206#24439206", "question_id": 24437564, "answer_id": 24439206}, {"body": "<p>None of the other answers worked for me using the ADT bundle published on developer.android.com. </p>\n\n<p>I ended up downloading the latest version of Eclipse (<strong>not the ADT bundle</strong>) and then installing the ADT plugin via Help > Install new software > entering <code>https://dl-ssl.google.com/android/eclipse</code> (mentioned by @RED_). </p>\n\n<p>I also had to update my workspace to point to my previous workspace, and most things seemed to be restored.</p>\n\n<p>On a side note: this seems like a good time to migrate to Android Studio...</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24440091#24440091", "question_id": 24437564, "answer_id": 24440091}, {"body": "<p>I found a solution for the problem with \"conflicting dependency\". I don't have the same page of Daniel D\u00edaz's response, but a page show \"conflicting dependency\", and I can't make anything.</p>\n\n<p>The problem is that I'm not the owner of the file. Eclipse was installed in other session (on OS&nbsp;X). I have the right to read and write the Eclipse file, but I'm not the owner. Make a \"chown\" command on all Eclipse files to solve the problem. After, I have the same result as Daniel Diaz. </p>\n\n<p>I hope this helps someone.</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24442754#24442754", "question_id": 24437564, "answer_id": 24442754}, {"body": "<ul>\n<li>Just uninstall previous ADT.</li>\n<li>Go to About Eclipse -> Installation Details</li>\n<li>Uninstall all plugins which Id start with com.andoird.ide</li>\n<li>Install ADT again from the update site.</li>\n</ul>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24447821#24447821", "question_id": 24437564, "answer_id": 24447821}, {"body": "<p>If you install a new <a href=\"http://en.wikipedia.org/wiki/Eclipse_%28software%29\" rel=\"nofollow\">Eclipse</a> version it will work.\nHere's what I did:</p>\n\n<ol>\n<li>Installed the new Eclipse version, Luna</li>\n<li>Made a backup of the current workspace.</li>\n<li>Ran the new Eclipse, Luna, and updated the workspace</li>\n<li>Installed the <a href=\"http://developer.android.com/sdk/installing/installing-adt.html\" rel=\"nofollow\">ADT plugin</a> (Help -> Install New Software)</li>\n<li>Restarted Eclipse</li>\n<li>Done</li>\n</ol>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24448503#24448503", "question_id": 24437564, "answer_id": 24448503}, {"body": "<p><strong>NOTE: Use this approach with caution because this might break your eclipse installation.</strong> <em>(see comments)</em></p>\n\n<p>This might help you if you installed the ADT plugin <strong>manually</strong> But if you are using the eclipse from the <a href=\"https://developer.android.com/sdk/installing/index.html?pkg=adt\">Eclipse ADT Bundle</a> the below steps could break your eclipse and you may not be able to use the eclipse again!</p>\n\n<p>Go to </p>\n\n<blockquote>\n  <p>Help --> About Eclipse SDK --> Installation Details..</p>\n</blockquote>\n\n<p>Now you will see all <code>22.0</code> version and then click <code>Uninstall</code> button at bottom</p>\n\n<p>After uninstallation goto </p>\n\n<blockquote>\n  <p>Help --> Install New Software -->\n  <a href=\"http://dl-ssl.google.com/android/eclipse/\">http://dl-ssl.google.com/android/eclipse/</a></p>\n</blockquote>\n\n<p>then install all the things now it is ready</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24448709#24448709", "question_id": 24437564, "answer_id": 24448709}, {"body": "<p>After trying the approaches in other answers without success, I just installed a new bundle from <a href=\"http://developer.android.com/sdk/installing/index.html?pkg=adt\" rel=\"nofollow\">http://developer.android.com/sdk/installing/index.html?pkg=adt</a> and that worked fine.</p>\n\n<p>Do the following:</p>\n\n<ol>\n<li>As you don't want to re-download all the platforms again, copy the existing one from <em>/OLD_ANDROID_SDK_PATH/sdk/platforms</em> to <em>/NEW_ANDROID_SDK_PATH/sdk/platforms</em>.</li>\n<li>When opening the new Eclipse from the recent downloaded bundle, make sure you reuse the previous 'workspace' folder. That will ensure that all your previous settings will be remembered.</li>\n<li>After opening the new Eclipse on the previous workspace, please check if the used Android SDK is pointing to the new one (Eclipse preferences -> Android). It might be pointing to the old one, as you've reused the previews workspace settings.</li>\n</ol>\n\n<p>With these steps, you should't have to reconfigure everything, and you won't need to spend time troubleshooting this <strong>BUG</strong> on this upgrade from Google Developers.</p>\n\n<p>Good luck! ;-)</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24448771#24448771", "question_id": 24437564, "answer_id": 24448771}, {"body": "<p>After hours of struggling with this issue I finally decided to get rid of the update. I'm posting this just in case you want to go back to version 22.6.2:</p>\n\n<ol>\n<li>Open the SDK Manager</li>\n<li>Leave everything unchecked but the first option (the one with ADT version 23)</li>\n<li>Delete that package</li>\n<li>Restart Eclipse</li>\n</ol>\n\n<p>Hope this helps</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24450223#24450223", "question_id": 24437564, "answer_id": 24450223}, {"body": "<p>What I have just found is that you need to update your ADT plugin in your Eclipse (whether stand alone or ADT Bundle) before updating your build tool.</p>\n\n<p>If your Eclipse installation points to the most recent Build Tool and your Eclipse is having ADT 22.x, it will show those errors.</p>\n\n<p><strong>What worked for me: (on Ubuntu 14.04 64-bit)</strong>  </p>\n\n<ul>\n<li>Installed an older version of Eclipse and ADT (from the Bundle)</li>\n<li>This copy of Eclipse was pointing to an older SDK verion with old build tools (before 20)</li>\n<li>Updated the ADT to v23 (via archive, in my case)</li>\n<li>Pointed Eclipse to the latest version of build tools.</li>\n</ul>\n\n<p>You may not have an older copy of Eclipse and Build tools, in that case you can uninstall latest build tool from SDK Manager and install the older copy.<br>\nOnce everything starts working fine, do the above steps.</p>\n\n<p>I am trying to upload older copies of such bundles somewhere on the Internet, will update the links here, once I am done uploading.</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24450781#24450781", "question_id": 24437564, "answer_id": 24450781}, {"body": "<p>If Eclipse gives an error after uninstalling the ADT plugin from your Eclipse installation, try to edit file <code>config.ini</code> in the Eclipse folder -> configuration. Find:</p>\n\n<pre><code>eclipse.application=\n</code></pre>\n\n<p>And change it to:</p>\n\n<pre><code>eclipse.application=org.eclipse.ui.ide.workbench\n</code></pre>\n\n<p>I hope it works for you too.</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24453171#24453171", "question_id": 24437564, "answer_id": 24453171}, {"body": "<p>Only helped:</p>\n\n<ol>\n<li>Fresh Eclipse installation (<a href=\"http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/lunar\">http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/lunar</a>)</li>\n<li>Help --> Install New Software --> <a href=\"https://dl-ssl.google.com/android/eclipse/\">https://dl-ssl.google.com/android/eclipse/</a></li>\n</ol>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24454988#24454988", "question_id": 24437564, "answer_id": 24454988}, {"body": "<p><a href=\"http://code.google.com/p/android/issues/detail?id=72419\">Google response</a>:</p>\n\n<p><strong>This is a packaging bug. The entire proguard file is missing. We'll have an update asap, but until then just copy it over from a previous version of the tools:</strong></p>\n\n<ul>\n<li><a href=\"http://dl.google.com/android/android-sdk_r22.6.2-linux.tgz\">http://dl.google.com/android/android-sdk_r22.6.2-linux.tgz</a></li>\n<li><a href=\"http://dl.google.com/android/android-sdk_r22.6.2-windows.zip\">http://dl.google.com/android/android-sdk_r22.6.2-windows.zip</a></li>\n<li><a href=\"http://dl.google.com/android/android-sdk_r22.6.2-macosx.zip\">http://dl.google.com/android/android-sdk_r22.6.2-macosx.zip</a></li>\n</ul>\n\n<p>and copy over the following files:</p>\n\n<ul>\n<li>tools/hprof-conv </li>\n<li>tools/support/annotations.jar </li>\n<li>tools/proguard</li>\n</ul>\n\n<p>So at the end if you started from a new ADT copy by hand the files :)</p>\n\n<p><strong>Edit:</strong> with the latest ADT release, the bundle should now work with auto-update, so <strong>install these new versions</strong>:</p>\n\n<ul>\n<li>linux 64 bit vm: <a href=\"http://dl.google.com/android/adt/adt-bundle-linux-x86_64-20140702.zip\">http://dl.google.com/android/adt/adt-bundle-linux-x86_64-20140702.zip</a></li>\n<li>linux 32 bit vm: <a href=\"http://dl.google.com/android/adt/adt-bundle-linux-x86-20140702.zip\">http://dl.google.com/android/adt/adt-bundle-linux-x86-20140702.zip</a></li>\n<li>mac: <a href=\"http://dl.google.com/android/adt/adt-bundle-mac-x86_64-20140702.zip\">http://dl.google.com/android/adt/adt-bundle-mac-x86_64-20140702.zip</a></li>\n<li>win32: <a href=\"http://dl.google.com/android/adt/adt-bundle-windows-x86-20140702.zip\">http://dl.google.com/android/adt/adt-bundle-windows-x86-20140702.zip</a></li>\n<li>win64: <a href=\"http://dl.google.com/android/adt/adt-bundle-windows-x86_64-20140702.zip\">http://dl.google.com/android/adt/adt-bundle-windows-x86_64-20140702.zip</a></li>\n</ul>\n\n<p><strong>Don't try to upgrade from previous version</strong> because it doesn\u2019t work at all.\nIf you have got problems with zipalign, it's now under build-tools and no more under tools/ so you can do a symbolic link or just copy it into the expected folder.</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24455640#24455640", "question_id": 24437564, "answer_id": 24455640}, {"body": "<p>I was updating my build server today and came across the same issue. It has been reported here:\n<a href=\"https://code.google.com/p/android/issues/detail?id=72419\">https://code.google.com/p/android/issues/detail?id=72419</a></p>\n\n<p>The fix is in progress and the work around according to the project manager is:</p>\n\n<blockquote>\n  <p>Please wait for an updated version within a day or two. Until then, your workaround is to do download one of</p>\n  \n  <p><a href=\"http://dl.google.com/android/android-sdk_r22.6.2-linux.tgz\">http://dl.google.com/android/android-sdk_r22.6.2-linux.tgz</a></p>\n  \n  <p><a href=\"http://dl.google.com/android/android-sdk_r22.6.2-windows.zip\">http://dl.google.com/android/android-sdk_r22.6.2-windows.zip</a></p>\n  \n  <p><a href=\"http://dl.google.com/android/android-sdk_r22.6.2-macosx.zip\">http://dl.google.com/android/android-sdk_r22.6.2-macosx.zip</a></p>\n  \n  <p>and copy over the following files:</p>\n\n<pre><code>    tools/hprof-conv\n    tools/support/annotations.jar\n    tools/proguard\n</code></pre>\n</blockquote>\n\n<p>[edit]\nzipalign was missing for me too, check to see if you need to copy this as well</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24456942#24456942", "question_id": 24437564, "answer_id": 24456942}, {"body": "<p>I was getting the same \"conflicting dependency\" error on Mac OS X 10.9.3 and simply upgrading was not an option.  What finally worked was downloading the latest <strong><em>Eclipse ADT bundle</em></strong> zip file from developer.android.com, extracting it and moving only \"eclipse\" folder to the place where my old eclipse folder was. (extracting the Eclipse ADT bundle zip file will give you \"eclipse\" and \"sdk\" folders).</p>\n\n<p>If you decide to go the same route, first make sure you know what your Workspace path is. This can be found in Preferences.  Then rename your old \"eclipse\" directory (not Eclipse.app) to something like eclipse-22.6.3, then move extracted \"eclipse\" folder into its place. Run new Eclipse.app inside, and when it asks you about Workspace, just enter the same path as you noted above.  Or it can also be set later in Preferences.</p>\n\n<p>Maybe worth adding is that to re-enable <strong>Android SDK Manager</strong> and <strong>Android Virtual Device Manager</strong> choose <em>Window -> Customize Perspective -> Command Groups Availability</em> and select <strong>Android SDK and AVD Manager</strong>. This will add these 2 items to the \"Window\" menu item for the current perspective (Java).</p>\n\n<p>I didn't move the extracted \"sdk\" folder, because I already had sdk folder in the same directory as eclipse, which I have already updated to the latest Android tools. But if it makes you feel safer, you can also rename your old sdk folder (for backup purposes) and move the freshly extracted one into its place.</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24465160#24465160", "question_id": 24437564, "answer_id": 24465160}, {"body": "<p>It works for me :)</p>\n\n<p>If for some reason you installed an ADT preview and need to <strong>revert back</strong> to the current stable, you can't use the dialog to install \"new\" software since what you want is actually an older one. Instead do this:</p>\n\n<ul>\n<li>Open Help > About Eclipse... on Windows or Linux. On Mac, use the app's menu > About...</li>\n<li>Click the \"Installation Details\" button.</li>\n<li>Select the \"Installation History\" tab.</li>\n<li>Select one of the previous configurations.</li>\n<li>Click the \"Revert\" button at the bottom.</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/w3CR9.png\" alt=\"enter image description here\"></p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24480207#24480207", "question_id": 24437564, "answer_id": 24480207}, {"body": "<p>WARNING</p>\n\n<p>There is now an update for ADT 23.0.1, but the Windows and Linux scripts are messed up, so wait with the upgrade!</p>\n\n<p>You could check for example tools/proguard/bin/*.sh in <a href=\"http://dl.google.com/android/android-sdk_r23.0.1-windows.zip\" rel=\"nofollow\">http://dl.google.com/android/android-sdk_r23.0.1-windows.zip</a>.</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24500955#24500955", "question_id": 24437564, "answer_id": 24500955}, {"body": "<p>There is a new update available.</p>\n\n<ul>\n<li>Update your Android SDK Tool to 23.0.1</li>\n<li>Update your Eclipse. Go to <em>Help</em> -> <em>Check for update</em></li>\n<li>Then restart your Eclipse</li>\n</ul>\n\n<p>This will fix the empty src &amp; layout issue.</p>\n\n<p><img src=\"http://i.stack.imgur.com/ZGEDD.png\" alt=\"Enter image description here\"></p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24503051#24503051", "question_id": 24437564, "answer_id": 24503051}, {"body": "<p>Download the ADT v23 plugin from Google and install it as local archive from the downloaded zip file in Eclipse.</p>\n\n<p><a href=\"http://developer.android.com/sdk/installing/installing-adt.html#Download\" rel=\"nofollow\">http://developer.android.com/sdk/installing/installing-adt.html#Download</a></p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24523437#24523437", "question_id": 24437564, "answer_id": 24523437}, {"body": "<p>I simply went to my Android resources folder on my C:/ drive (C:/Android) deleted the 'eclipse' folder and all its contents. Downloaded Android Developer Tools once more and just moved over the 'eclipse' folder.</p>\n\n<p>Started up and everything was fine, I had updated to version 23.</p>\n\n<p>Hopefully this helps, possibly not suitable for everyone as some of you have Eclipse modifications but for someone who, like me, wanted a quick fix and get back to developing this seemed to be the easiest path.</p>\n\n<p>Regards.</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24526658#24526658", "question_id": 24437564, "answer_id": 24526658}, {"body": "<p>There is no way to update an existing ADT bundle that you might have downloaded.</p>\n\n<p>You can do one of two options:</p>\n\n<ol>\n<li><p>Install Eclipse from eclipse.org and install ADT by pointing to the update site: <a href=\"https://dl-ssl.google.com/android/eclipse\" rel=\"nofollow\">https://dl-ssl.google.com/android/eclipse</a></p></li>\n<li><p>Download bundles from:</p>\n\n<ul>\n<li><p>Linux 64 bit VM: <a href=\"http://dl.google.com/android/adt/adt-bundle-linux-x86_64-20140702.zip\" rel=\"nofollow\">http://dl.google.com/android/adt/adt-bundle-linux-x86_64-20140702.zip</a></p></li>\n<li><p>Linux 32 bit VM: <a href=\"http://dl.google.com/android/adt/adt-bundle-linux-x86-20140702.zip\" rel=\"nofollow\">http://dl.google.com/android/adt/adt-bundle-linux-x86-20140702.zip</a></p></li>\n<li><p>Mac: <a href=\"http://dl.google.com/android/adt/adt-bundle-mac-x86_64-20140702.zip\" rel=\"nofollow\">http://dl.google.com/android/adt/adt-bundle-mac-x86_64-20140702.zip</a></p></li>\n<li><p>Windows 32 bit: <a href=\"http://dl.google.com/android/adt/adt-bundle-windows-x86-20140702.zip\" rel=\"nofollow\">http://dl.google.com/android/adt/adt-bundle-windows-x86-20140702.zip</a></p></li>\n<li><p>Windows 64 bit: <a href=\"http://dl.google.com/android/adt/adt-bundle-windows-x86_64-20140702.zip\" rel=\"nofollow\">http://dl.google.com/android/adt/adt-bundle-windows-x86_64-20140702.zip</a></p></li>\n</ul></li>\n</ol>\n\n<p>Starting with ADT bundle 23.0.2, you should be able to update to future versions of ADT.</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24549211#24549211", "question_id": 24437564, "answer_id": 24549211}, {"body": "<p>I faced the same problem and solved it. You need to uninstall the Android plugin entirely from within Eclipse (from the \"about\" section..), including trace view..</p>\n\n<p>Then added the ADT Plugin again (<a href=\"https://dl-ssl.google.com/android/eclipse/\" rel=\"nofollow\">https://dl-ssl.google.com/android/eclipse/</a>) and install it.</p>\n\n<p>The problem is solved!</p>\n\n<p>I guess it's a bug with the SDK manager or ADT Plugin update mechanism...</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24549723#24549723", "question_id": 24437564, "answer_id": 24549723}, {"body": "<p>There is a lot of confusion going around in this thread. There are two solutions depending on how you installed ADT.</p>\n\n<ol>\n<li><p>If you installed the ADT plugin manually then I believe you can use the \"Delete ADT\" -> \"Install New Software\" approach.</p></li>\n<li><p>If you are using the ADT Bundle then do not follow that solution! You will break Eclipse. Here is an update from a Google member - read #18: </p>\n\n<p><a href=\"https://code.google.com/p/android/issues/detail?id=72912\" rel=\"nofollow\">https://code.google.com/p/android/issues/detail?id=72912</a></p></li>\n</ol>\n\n<p>You must download a new version of the ADT-Bundle (yep, it's frustrating!).</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24556377#24556377", "question_id": 24437564, "answer_id": 24556377}, {"body": "<p>I have followed instructions found here and tried to fix my old Eclipse + SDK + ADT, but with no luck. The basic problem keeps beeing the same; I still get the error message:</p>\n\n<blockquote>\n  <p>This Android SDK requires Android Developer Toolkit version 23.0.0 or above. Current version is 22.6.3.v201404151837-1123206. Please update ADT to the latest version.</p>\n</blockquote>\n\n<p>But my eclipse can't find updates and can't install ADT 23 as new software. So I can't compile my old project in my workspace.</p>\n\n<p>I tested a fresh eclipode bundle for Windows&nbsp;8, followed instructions found from Android's developers page, step by step, and it worked fine. So it seems that the Windows Eclipse build is not broken. But I wan't use my Linux installation, my old Ubuntu 10. It seems obvious, that to getting the Linux Eclipse environment working again, I must install a new Eclipse bundle, my old Eclipse won't ever see updates for ADT 23 to get things working. Again, these intructions are for Linux developers that wan't to get their old workspace projects working again without changes in the developing environment, except you must install a new Eclipse bundle, but after that your projects will work as well as before the version 23 SDK/ADT-mess.</p>\n\n<ol>\n<li>If you are an Android developer you want to be sure, that you developing environment won't be messed up. Backup:\n<ul>\n<li>~./android (Here are your developer keys)</li>\n<li>Your old SDK dirrectory</li>\n<li>Your workspace</li>\n</ul></li>\n<li>Download the Eclipse bundle, <a href=\"http://developer.android.com/sdk/index.html\" rel=\"nofollow\">Get the Android SDK</a>.</li>\n<li>Follow instructions, create directory <code>~/Development</code> and unzip bundle there. You get Eclipse and SDK directories.</li>\n<li>Start Eclipse from that directory</li>\n<li>Eclipse asks for a workspace. You can give it the old one.</li>\n<li>In Eclipse settings set SDK as downloaded SDK.</li>\n<li>Start Android SDK manager and download tools, Android versions you use and extras said in the Android developer tool page instructions</li>\n<li>You should now be ready to compile your old projects again, but for me it was not that simple. My old projects had errors. So open problems windows and you get to know that annotation.jar is missing. So you must copy <code>annotations.jar</code> from your old SDK, from, the backup you made, or from the older <code>sdk.zip</code> explained in this thread to &lt;new SDK>/tools/support/annotations.jar</li>\n</ol>\n\n<p>After that I could use my old workspace in Ubuntu and compile and launch applications to Android devices. It was that simple. Thanks Google ;-(</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24600853#24600853", "question_id": 24437564, "answer_id": 24600853}, {"body": "<p>There are many possible answers to this question, I think it all depends on what your environment and installation procedure is. I'm running into the same issue as stated multiple times above. Cannot install ADT 23 because of conflict dependency.</p>\n\n<p>This is my environment:</p>\n\n<p>I'm running Windows 7 64-bit with Eclipse 4.2.2. I installed ADT through Help -> Install New Software. </p>\n\n<p>My solution:</p>\n\n<p>Help -> About Eclipse -> Uninstall -> ALL_ANDROID. Then I simply installed each of the ADT 23 tools through the \"Install New Software\". </p>\n\n<p>Note: This is with the LATEST ADT release.</p>\n\n<p>Hope this helps!</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24726143#24726143", "question_id": 24437564, "answer_id": 24726143}, {"body": "<p>I am using Eclipse Kepler and this is how i solved my problem.</p>\n\n<p>Goto Help -> Install new software -> Click Add.</p>\n\n<p>In the popup, give any name (i named it as Eclipse ADT Plugin), and in the link's place, use <a href=\"https://dl-ssl.google.com/android/eclipse/\" rel=\"nofollow\">https://dl-ssl.google.com/android/eclipse/</a></p>\n\n<p>Once you click OK, you will be displayed with new packages that will be installed and old packages that will be deleted. Don't worry about these packages. Click ok.</p>\n\n<p>New packages will be installed and this should solve your problem.</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24749910#24749910", "question_id": 24437564, "answer_id": 24749910}, {"body": "<p>It's working to uninstall the old Files, but you don't have to restart Eclipse. After the uninstall process, install the new software and then restart Eclipse. </p>\n\n<p>It was quite simple and works for me. </p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24752656#24752656", "question_id": 24437564, "answer_id": 24752656}, {"body": "<ul>\n<li><p>I solved these problem by deleting the Adt Bundle Which was shown\nerror.</p></li>\n<li><p>Then <em>Extract</em> the new adt bundle to solve these problem.After that just updated the Android 4.4.2(API 19) in Android Sdk Manager.</p></li>\n<li><p>you are getting these <code>error</code> because of updating the <code>Android Sdk\nTools 22.6.2</code>.Below I shown the  Screenshot of it.</p>\n\n<p><img src=\"http://i.stack.imgur.com/xZOlr.png\" alt=\"enter image description here\"></p></li>\n<li><p>Install everything as shown in the screenshot itself.Then these\nproblem will not occur again.</p></li>\n</ul>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24754659#24754659", "question_id": 24437564, "answer_id": 24754659}, {"body": "<p><a href=\"http://bazalabs.com/solution-for-the-update-problem-of-android-developer-toolkit-version-23-0-0-or-above/\" rel=\"nofollow\">solution</a></p>\n\n<p>This is solution is the correct way of how you should change the files and keep your Eclipse ADT and not downloading a new one. Hope it helps everyone.</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24762403#24762403", "question_id": 24437564, "answer_id": 24762403}, {"body": "<p>This is what they are saying about this:</p>\n\n<p><strong>Ok, guys, sorry about all this trouble, and we apologize for the messed up releases. Here's the summary:</strong></p>\n\n<ul>\n<li>There is no way to update an existing ADT bundle that you might have downloaded.</li>\n<li><p>You can do one of two options:</p>\n\n<ol>\n<li><p>Install eclipse from eclipse.org and install ADT by pointing to the update site: <a href=\"https://dl-ssl.google.com/android/eclipse\">https://dl-ssl.google.com/android/eclipse</a></p></li>\n<li><p>Download bundles from here:</p></li>\n</ol></li>\n</ul>\n\n<p>linux 64 bit vm: <a href=\"http://dl.google.com/android/adt/adt-bundle-linux-x86_64-20140702.zip\">http://dl.google.com/android/adt/adt-bundle-linux-x86_64-20140702.zip</a>\nlinux 32 bit vm: <a href=\"http://dl.google.com/android/adt/adt-bundle-linux-x86-20140702.zip\">http://dl.google.com/android/adt/adt-bundle-linux-x86-20140702.zip</a>\nmac: <a href=\"http://dl.google.com/android/adt/adt-bundle-mac-x86_64-20140702.zip\">http://dl.google.com/android/adt/adt-bundle-mac-x86_64-20140702.zip</a>\nwin32: <a href=\"http://dl.google.com/android/adt/adt-bundle-windows-x86-20140702.zip\">http://dl.google.com/android/adt/adt-bundle-windows-x86-20140702.zip</a>\nwin64: <a href=\"http://dl.google.com/android/adt/adt-bundle-windows-x86_64-20140702.zip\">http://dl.google.com/android/adt/adt-bundle-windows-x86_64-20140702.zip</a></p>\n\n<p>Starting with ADT bundle 23.0.2, you should be able to update to future versions of ADT.</p>\n\n<p><strong>Source:</strong>  <a href=\"https://code.google.com/p/android/issues/detail?id=72912\">https://code.google.com/p/android/issues/detail?id=72912</a></p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24777848#24777848", "question_id": 24437564, "answer_id": 24777848}, {"body": "<p>The answers already provided display how much the solution depends on your particular environment. I initially tried upgrading a Windows 8.1 machine; when that failed I tried upgrading a Vista PC. When that failed, I tried Android Studio on the Win 8.1. The problems that we all are encountering are resulting in different solutions because of version conflicts between O/S, Eclipse, Java and, of course, the Google debacle.</p>\n\n<p>Here's what I did:\nI gave up on the bundle. For Vista I installed Eclipse 4.3.2 (Kepler) and downloaded the SDK installer which loaded 23.0.2. Already had jdk1.6 installed. Only gotcha left was to use the SDK manager to download my minimum platform (API 8) - V20 isn't that far backward compatible. But at least now I am not totally dead in the water.</p>\n\n<p>For Windows 8.1 Android Studio seemed to install. But when I tried to install my Project, it stopped when it complained that google-play-services_lib was not included. I had not been using it, so it appears this is a requirement of Android Studio. Really?</p>\n\n<p>So I went back to Eclipse. I had installed Luna and jdk8u5 but then tried to revert to what worked for Vista. jdk1.6 is not available from Oracle so I had to download 1.7 and hope. Downloaded the SDK which again got 23.0.2. So far so good. </p>\n\n<p>Problem then was installer-r23.0.2-windows apparently is hardwired to find JDK at 'C:\\Windows\\system32\\java.exe':[2]. I set the PATH to jdk1.7.0_65\\bin and set JAVA_HOME environment variable to it also. Neither worked. Installer still choked on java8 in Windows\\System32.</p>\n\n<p>So I renamed C:\\Windows\\System32\\java.exe to disable it and the installer-r23 found C:\\Program Files\\Java\\jre8\\bin\\java.exe. The installer completed successfully. Why it didn't like the same file (V8.0.5.13) in Windows\\System 32 is a mystery to me but maybe a clue to someone.</p>\n\n<p>Still had to download API 8, but I thought I was operational on the 8.1 machine too.</p>\n\n<p>Except for getting Eclipse to recognize my Motorola RazrM as a USB-attached device. That required going to the Win8.1 DeviceManager and updating the Mot Composite ADB Interface in ADB Interface. That required a download of the Motorola Device Manager. Still the phone did not appear in the Eclipse Devices View. It was waiting for a new confirmation on the phone that apparently has been added to the latest ADT. While I needed to upgrade the driver on my Samsung 10.1 tablet, it had not added the connection request confirmation.</p>\n\n<p>Finally, the nightmares were over. My biggest problem appears to have been leaping to the latest versions - and then trying to regress when 23.0 broke. I think I learned a hard lesson. But, really, does it have to be this hard???</p>\n\n<p>Hope this helps. </p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24828896#24828896", "question_id": 24437564, "answer_id": 24828896}, {"body": "<p>Complete Procedure to <strong>download ADT , configure it in eclipse and fixing dependency issues</strong>:</p>\n\n<p><strong>Download ADT:-</strong></p>\n\n<ol>\n<li><p>Open this link : <a href=\"https://dl-ssl.google.com/android/eclipse/\" rel=\"nofollow\">https://dl-ssl.google.com/android/eclipse/</a></p></li>\n<li><p>Download ADT-23.0.2.zip which is the latest version in zip folder and don't unzip it.</p></li>\n</ol>\n\n<p><strong>Configure ADT in eclipse:-</strong></p>\n\n<ol>\n<li>Open Eclipse -> Go to Help -> Install New Software... </li>\n<li>Click on ADD button on the right.</li>\n<li>Add Repository dialog will open.</li>\n<li>In Name : write ADT Plugin</li>\n<li>In Location : give path of ADT zipped folder which you have downloaded by clicking on <strong>Archive..</strong> button.</li>\n</ol>\n\n<p>**An error may come as Duplicate location , to solve it follow the below steps:</p>\n\n<p>1.1 Close the current diolog box.</p>\n\n<p>1.2 Click on <strong>Available software sites</strong> link. and select the entry which has same location as you have added zipped file or ADT Plugin entry. After selecting , remove it.</p>\n\n<p>1.3 Then again , come to the previous ADD dialog.</p>\n\n<p>1.4 Again, add Name and Location in Add Repository dialog box.</p>\n\n<p><strong>Select all the options in Development Tools and Click on Next to install the ADT completely.</strong></p>\n\n<p><strong>Fixing dependency issues in ADT :</strong> After all the above steps , dependency issues may come to solve it follow the following steps:</p>\n\n<ol>\n<li><p>Click on <strong>Already installed</strong> in Install dialog box.</p></li>\n<li><p>Click on Installed Software Tab , now select all the development tools of previous version looking at versions and uninstall them.</p></li>\n</ol>\n\n<p>Now all the issues of Dependency issues would evaporate and follow the Next , Next wizard to install:)</p>\n\n<p><strong>All the best. It will definitely help.</strong></p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/24990730#24990730", "question_id": 24437564, "answer_id": 24990730}, {"body": "<p><strong>How to update from 22.xx.x to 23.0.2 (My solution).  This will beat the <em>dependency issues</em></strong></p>\n\n<p>I was suffering from this issue for days, and I have tried every single solution on this link, but no luck. </p>\n\n<p>I finally figured out a solution that actually works!</p>\n\n<p>Please note that this solution works in Windows 7 (64bit).</p>\n\n<p>It should probably work for other Windows operation system.</p>\n\n<p>I am just trying to help, so please don't down-vote me if it doesn't work for your situation.</p>\n\n<p>Here we go:</p>\n\n<p><strong>1</strong> - download the latest ADT bundle from</p>\n\n<p><a href=\"http://developer.android.com/sdk/index.html#download\" rel=\"nofollow\">http://developer.android.com/sdk/index.html#download</a></p>\n\n<p><strong>2</strong> - unzip it and open \"eclipse\" folder --> \"plugins\" folder</p>\n\n<p><strong>3</strong> - Now go to your old eclipse and open \"eclipse\" folder --> \"plugins\" folder, and copy everything inside.</p>\n\n<p><strong>4</strong> - Now paste them into the \"plugins\" folder of the (NEW ECLIPSE), but DO NOT overwrite anything.</p>\n\n<p><strong>5</strong> - While inside of the \"plugins\" folder of your new eclipse, do the search. Type in 22. (notice 22 with a dot) and hit enter.</p>\n\n<p><strong>6</strong> - The search result will show up all the files or folders with .....22.6...... For example,</p>\n\n<p>com.android.ide.eclipse.adt_<strong>22.6.2</strong>.v201403212031-1085508</p>\n\n<p><strong>7</strong> - Highlight all of these files/folders and hit delete key.</p>\n\n<p><strong>8</strong> - Make sure to update your old API/SDK to the latest version and load this sdk directory to work with your new eclipse.</p>\n\n<p><strong>or</strong></p>\n\n<p>You can watch this video, which shows you how to move all your SDK/API to your new SDK folder. Please give him credit for making this video.</p>\n\n<p>Link: <a href=\"https://www.youtube.com/watch?v=jPZpJdnbbN0\" rel=\"nofollow\">https://www.youtube.com/watch?v=jPZpJdnbbN0</a></p>\n\n<p>I have not tried to update from any other ADT versions, but I think it should work for any old ADT versions too....</p>\n\n<p><strong><em>Don't forget to backup stuff before attempting.</em></strong></p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/25049891#25049891", "question_id": 24437564, "answer_id": 25049891}, {"body": "<p>I did this to solve the same issue (in OS X):</p>\n\n<ol>\n<li>Help > Install New Software > Add or select this repository \"<a href=\"http://download.eclipse.org/eclipse/updates/4.3\" rel=\"nofollow\">http://download.eclipse.org/eclipse/updates/4.3</a>\" </li>\n<li>Under \"Eclipse platform\" select the newest version of Eclipse.</li>\n<li>The installer will ask if you want to uninstall the ADT, click finish.</li>\n<li>Restart Eclipse and install ONLY the ADT 23 using this repository: <a href=\"https://dl-ssl.google.com/android/eclipse\" rel=\"nofollow\">https://dl-ssl.google.com/android/eclipse</a>.</li>\n<li>Restart Eclipse and install DDMS, Hierarchy Viewer, Trace View etc.</li>\n<li>Restart Eclipse again.</li>\n</ol>\n\n<p>Hope it helps.</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/25212793#25212793", "question_id": 24437564, "answer_id": 25212793}, {"body": "<p>You need to uninstall the old version and install 23</p>\n\n<p>uninstall:\nHelp > about Eclipse SDK > Installation Details \nselect Android related packages to uninstall</p>\n\n<p>And then install V23.</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/25216079#25216079", "question_id": 24437564, "answer_id": 25216079}, {"body": "<p>This worked for me. I kept upgrading to version 23.02 (or 23.03 if presented) using a new install of ADT bundle, and migrating the your original workspace across and add the patches. <strong>This is the procedure for ADT Bundle only.</strong></p>\n\n<p>(Backup your workspace first)</p>\n\n<p>1/ install latest adt bundle from google. (For some reason using Googles download page just goes around in a loop on Chrome!?!)</p>\n\n<ul>\n<li>linux 64 bit vm:<a href=\"http://dl.google.com/android/adt/adt-bundle-linux-x86_64-20140702.zip\" rel=\"nofollow\">http://dl.google.com/android/adt/adt-bundle-linux-x86_64-20140702.zip</a></li>\n<li>linux 32 bit vm:<a href=\"http://dl.google.com/android/adt/adt-bundle-linux-x86-20140702.zip\" rel=\"nofollow\">http://dl.google.com/android/adt/adt-bundle-linux-x86-20140702.zip</a>    </li>\n<li>mac:<a href=\"http://dl.google.com/android/adt/adt-bundle-mac-x86_64-20140702.zip\" rel=\"nofollow\">http://dl.google.com/android/adt/adt-bundle-mac-x86_64-20140702.zip</a></li>\n<li>win32:<a href=\"http://dl.google.com/android/adt/adt-bundle-windows-x86-20140702.zip\" rel=\"nofollow\">http://dl.google.com/android/adt/adt-bundle-windows-x86-20140702.zip</a></li>\n<li>win64:<a href=\"http://dl.google.com/android/adt/adt-bundle-windows-x86_64-20140702.zip\" rel=\"nofollow\">http://dl.google.com/android/adt/adt-bundle-windows-x86_64-20140702.zip</a></li>\n</ul>\n\n<p>2/ download the patch from here:</p>\n\n<ul>\n<li>linux <a href=\"http://dl.google.com/android/android-sdk_r22.6.2-linux.tgz\" rel=\"nofollow\">http://dl.google.com/android/android-sdk_r22.6.2-linux.tgz</a></li>\n<li>Windoze <a href=\"http://dl.google.com/android/android-sdk_r22.6.2-windows.zip\" rel=\"nofollow\">http://dl.google.com/android/android-sdk_r22.6.2-windows.zip</a></li>\n<li>Mac <a href=\"http://dl.google.com/android/android-sdk_r22.6.2-macosx.zip\" rel=\"nofollow\">http://dl.google.com/android/android-sdk_r22.6.2-macosx.zip</a></li>\n</ul>\n\n<p>3/ Apply the patch as per <a href=\"https://code.google.com/p/android/issues/detail?id=72419#c12\" rel=\"nofollow\">Googles (poorly described) instructions</a></p>\n\n<p><i><br>...and copy over the following files:</p>\n\n<p>tools/hprof-conv<br>\ntools/support/annotations.jar<br>\ntools/proguard<br></i></p>\n\n<p>Which means => Copy the file only of tools/hprof-conv<br>\nWhich means => Copy the file only of tools/support/annotations.jar<br>\nWhich means => Copy the directory and all contents for tools/proguard<br></p>\n\n<p>3/ Point your old workspace to the new install on startup.\n(Projects will still come up with errors, don't worry)</p>\n\n<p>4/ select Help-> Install new software, select update site, and select version 23.03 when prompted.</p>\n\n<ul>\n<li>Check the update sites, and edit the one for google from https => http like this:\n<img src=\"http://i.stack.imgur.com/EcT2N.jpg\" alt=\"Change to &quot;http&quot;\">. This seems to make Eclipse Updater build a new update profile that avoided download errors. You might also get \"unsigned\" prompt warning prompts from Windoze but just \"Allow Access\" to prevent blocking.</li>\n</ul>\n\n<p>5/ If you still get errors on references to \"android.R\", this is because you may not have the appropriate \"platform build tools\". Check the \"Android SDK Manager\" for which build tools you have like this:\n<img src=\"http://i.stack.imgur.com/hq6Bc.jpg\" alt=\"enter image description here\">\nAlso check your \"Android\" build for the project to make sure you have the compatible Android API.</p>\n\n<p>Version 23.02 should be downloaded, and your projects should now compile. </p>\n\n<p>Google have abandoned all the UI trimmings for Eclipse ADT (ie you'll see the Juno splash). I thought this would be a problem but it seems ok. I think it shows how desperate Google were to get the fix out. Given that Android studio is not far away Google don't want invest any more time into ADT. I suppose this is what you get with \"free\" software. Hopefully the adults are back in charge now, and Google Studio won't be such a disaster.</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/25357091#25357091", "question_id": 24437564, "answer_id": 25357091}, {"body": "<p>Based on win7.\nEclipse \nVersion: 4.2.2\nBuild id: M20130204-1200</p>\n\n<p>For those who broke Eclipse after trying to uninstall ADT plugin.</p>\n\n<p>You need to remove all <em>android</em> folder/jars from plugin folder and features folder.</p>\n\n<p>Then check your config.ini in /configuration. Probably you have these lines:</p>\n\n<pre><code>eclipse.product=\n</code></pre>\n\n<p>...</p>\n\n<pre><code>eclipse.application=\n</code></pre>\n\n<p>change them like this:</p>\n\n<pre><code>eclipse.product=org.eclipse.platform.ide\neclipse.application=org.eclipse.ui.ide.workbench\n</code></pre>\n\n<p>Maybe needed to run your eclipse from command line:</p>\n\n<pre><code>eclipsec.exe -clean.\n</code></pre>\n\n<p>Then I could install the newest ADT plugin, without needing to download whole eclipse packages and loosing all configuration/plugins.</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/25423839#25423839", "question_id": 24437564, "answer_id": 25423839}, {"body": "<p>I found these instructions in a comment.</p>\n\n<p>Download the newest version of ADT and use your existing workspace.  This is actually the least pain-full upgrade you'll ever do.  It didn't mess with the .android folder so I still had my original debug key.  Only things missing were a couple of add ons I hardly ever use and they are easily installed into the new version.  </p>\n\n<p>Note don't install into your existing adt folder create a new folder so you can still fall back if the new install doesn't work.</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/26237056#26237056", "question_id": 24437564, "answer_id": 26237056}, {"body": "<p>The prefect answers is. Enter the follow path,copy all of them\n<code>Macintosh HD \u25b8 \u5e94\u7528\u7a0b\u5e8f \u25b8 adt-bundle-mac \u25b8 sdk \u25b8 platform-tools</code>\nthen parse into  <code>Macintosh HD \u25b8 \u5e94\u7528\u7a0b\u5e8f \u25b8 adt-bundle-mac \u25b8 sdk \u25b8 tools</code>,\nlast,edit the line <code>plugin.version=23.0.0</code> of file <code>Macintosh HD \u25b8 \u5e94\u7528\u7a0b\u5e8f \u25b8 adt-bundle-mac \u25b8 sdk \u25b8 tools \u25b8plugin.prop</code> ,such as <code>plugin.version=21.0.0</code>.\n  restart eclipse.everything is all-right.</p>\n", "title": "Update Eclipse with Android development tools v. 23", "tags": ["java", "android", "eclipse", "adt"], "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23/27496105#27496105", "question_id": 24437564, "answer_id": 27496105}], "creation_date": 1403806906, "score": 543, "link": "http://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23", "question_id": 24437564}, {"body": "<p>Searching the web, it is not clear if Java 8 is supported for Android development or not.</p>\n\n<p>Before I download/setup Java 8, can some one point me at any \"official\" documentation that say Java 8 is or is not supported for Android development.</p>\n", "tags": ["java", "android", "java-8", "android-gradle", "build.gradle"], "title": "Is it possible to use Java 8 for Android development?", "answers": [{"body": "<p>I think it is too early to say if Java 8 is suitable for Android development, officially Android needs the Java 6 JDK as mentioned at the bottom of this page: <a href=\"https://developer.android.com/sdk/installing/installing-adt.html\">https://developer.android.com/sdk/installing/installing-adt.html</a></p>\n\n<p>If you installed the Java 8 JDK, then give it a try, if any problems appears try to set the compiler as 1.6 in Eclipse from window menu \u2192 <strong>Preferences</strong> \u2192 <strong>Java</strong> \u2192 <strong>Compiler</strong>.\nBy the way, this is works for me with Java 7:</p>\n\n<p><img src=\"http://i.stack.imgur.com/SCTyV.png\" alt=\"Eclipse Preferences -&gt; Java -&gt; Compiler\"></p>\n\n<h1>Update:</h1>\n\n<p>According to the <a href=\"http://developer.android.com/sdk/installing/index.html?pkg=studio\">Installing Android Studio</a> web page, to build apps for Android 5.0 and higher, JDK 7 is required:</p>\n\n<blockquote>\n  <p>Before you set up Android Studio, be sure you have installed JDK 6 or higher (the JRE alone is not sufficient)\u2014JDK 7 is required when developing for Android 5.0 and higher. To check if you have JDK installed (and which version), open a terminal and type <code>javac -version</code>. If the JDK is not available or the version is lower than 6, <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html\">go download JDK</a>.</p>\n</blockquote>\n\n<h1>Update 2:</h1>\n\n<p>Officially:</p>\n\n<blockquote>\n  <p>Java 7 or higher is required if you are targeting Android 5.0 and\n  higher.</p>\n</blockquote>\n\n<p>this is implicit announce that Java 8 will work too, this is mentioned in eclipse plugin ADT page, but not mentioned in Android studio page or not updated yet. </p>\n\n<p>Unofficially: install multiple JDK and try.</p>\n\n<p><a href=\"http://developer.android.com/tools/sdk/eclipse-adt.html\">eclipse plugin ADT page:</a> </p>\n\n<p><a href=\"http://developer.android.com/sdk/index.html#Requirements\">Android studio page:</a></p>\n\n<h1>Java 8:</h1>\n\n<p>Now it is possible to use some features of java 8 using the new toolchain called <a href=\"http://tools.android.com/tech-docs/jackandjill\">Jack &amp; Jill</a>, as mentioned in <a href=\"https://youtu.be/B08iLAtS3AQ?t=28m14s\">GOOGLE I/O 2016</a> , but still does not support all java 8 features.\nFor a how-to see <a href=\"https://developer.android.com/preview/j8-jack.html\">Java 8 Language Features | Android Developers</a>.</p>\n", "title": "Is it possible to use Java 8 for Android development?", "tags": ["java", "android", "java-8", "android-gradle", "build.gradle"], "link": "http://stackoverflow.com/questions/23318109/is-it-possible-to-use-java-8-for-android-development/23318269#23318269", "question_id": 23318109, "answer_id": 23318269}, {"body": "<p>Android does not support Java 8. It only supports up to Java 7 (if you have kitkat) and still it doesn't have invokedynamic, only the new syntax sugar.</p>\n\n<p>If you want to use lambdas, one of the major features of Java 8 in Android, you can use <a href=\"https://github.com/evant/gradle-retrolambda\">gradle-retrolamba</a>. It's a gradle build dependency that integrates retrolambda, a tool that converts Java 8 bytecode back to Java 6/7. Basically, if you set the compiler in Android Studio to compile Java 8 bytecode, thus allowing lambdas, it'll convert it back to Java 6/7 bytecode which then in turn gets converted to dalvik bytecode. It's a hack for if you want to try out some JDK 8 features in Android in lieu of official support.</p>\n", "title": "Is it possible to use Java 8 for Android development?", "tags": ["java", "android", "java-8", "android-gradle", "build.gradle"], "link": "http://stackoverflow.com/questions/23318109/is-it-possible-to-use-java-8-for-android-development/23318644#23318644", "question_id": 23318109, "answer_id": 23318644}, {"body": "<p>Android uses a Java that branches off of Java 6.</p>\n\n<p>As of Android SDK version 19, you can use Java 7 features <a href=\"http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Using-sourceCompatibility-1.7\">by doing this</a>.  No full support for Java 8 (yet).</p>\n", "title": "Is it possible to use Java 8 for Android development?", "tags": ["java", "android", "java-8", "android-gradle", "build.gradle"], "link": "http://stackoverflow.com/questions/23318109/is-it-possible-to-use-java-8-for-android-development/26476839#26476839", "question_id": 23318109, "answer_id": 26476839}, {"body": "<p>You can indeed use <code>gradle-retrolamba</code> gradle build dependency to use Java 8 for Android Development.</p>\n\n<p>Below is the complete guide that I have recently followed to run lambda expressions for Android development. The original source of this guide is mentioned at the end.</p>\n\n<blockquote>\n  <p>In this guide, a method for bringing some <strong>Java 8</strong> features into\n  Android Development Tools will be demonstrated, specifically aiming at\n  <em>Eclipse IDE</em>. However, steps which will be described throughout this guide might also be adapted to Google\u2019s new uprising development\n  environment, Android Studio. It is based on the community edition of\n  popular IntelliJ Idea IDE by JetBrains and it has recently been\n  upgraded to its \u2018beta\u2019 version by Google in early July 2014, slightly\n  before this guide was written. Eclipse will remain as the prominent\n  development environment, at least for a while, and considering the\n  fact that most Android projects have been developed using Eclipse, a\n  method for bringing new Java 8 features like lambda expressions into\n  ADT seems to be quite useful for developers.</p>\n  \n  <p>Android Development is based on a custom Java implementation called\n  Apache Harmony Project which was terminated back in 2011. The most\n  commonly used Java syntax in Android Development is Java 6 (v1.6) and\n  Java 7 (v1.7) is also partially supported on the KitKat edition\n  (Android 4.4.+). Therefore, Java 8 features like lambda expressions\n  cannot be used directly in the Android App Development without\n  applying some tweaks into the development tools. Luckily, these\n  constructs are basically some \u2018syntactic sugar\u2019 enhancements which\n  give developers the shortcomings of things like \u2018anonymous classes\u2019\n  and they can be translated into Java 6 or Java 7 classes.</p>\n  \n  <p>A recent approach for translating a Java 8 source code into lower Java\n  versions is called <strong>RetroLambda</strong>. This library makes developers run\n  Java 8 code with lambda expressions on Java 7 or even lower.\n  Unfortunately, Java 8 features other than lambda expressions are not\n  supported by RetroLambda for now but the concept of lambda expressions\n  is the biggest leap on Java 8 platform and it\u2019s a great tool for\n  Android developers anyway. </p>\n  \n  <p>Details about this library can be found on its GitHub page:</p>\n  \n  <p><a href=\"https://github.com/orfjackal/retrolambda#getting-started\">https://github.com/orfjackal/retrolambda#getting-started</a></p>\n  \n  <p>Also, a Gradle plugin for RetroLambda created by another developer\n  allows Gradle-based builds to be implemented in Java or Android\n  Projects. However, the developer only mentions about integrating this\n  plugin into Android Studio environment. Details can be found on its\n  GitHub page:</p>\n  \n  <p><a href=\"https://github.com/evant/gradle-retrolambda\">https://github.com/evant/gradle-retrolambda</a></p>\n  \n  <p>Using these infrastructures within an Eclipse-based development\n  environment cannot be approached directly but it\u2019s doable and will be\n  demonstrated throughout this guide.</p>\n</blockquote>\n\n<h2><strong>Preparation</strong></h2>\n\n<p>This guide assumes that the reader has a basic understanding of Android Development and it is based on ADT version 22.6.2 because recent ADT version 23.0.2 seems to have problems like layout folder creation. Details about this issue can be found under the following link:</p>\n\n<p><a href=\"http://code.google.com/p/android/issues/detail?id=72591\">http://code.google.com/p/android/issues/detail?id=72591</a></p>\n\n<p>Steps in this guide will be given for a <em>Windows 8.1, 64-bit</em> development machine but they can easily be adapted to other platforms. The new build system <code>Gradle</code> will be used for build/clean processes and its installation procedure will also be provided. Also, both <code>JDK 8</code> and <code>JDK 7</code> must coexist on the development machine. Steps given below must be followed to install them:</p>\n\n<ul>\n<li>Go to JDK 8 early access preview page <a href=\"http://jdk8.java.net\">http://jdk8.java.net</a></li>\n<li>Download JDK 8u20 and install it. JRE 8 installation is not necessary and it can be skipped</li>\n<li>Go to JDK 7 latest stable release page <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html\">http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html</a></li>\n<li>Download JDK 7u65 and install it. JRE 7 installation is again not necessary and it can be skipped</li>\n<li>Add JDK 8 home folder and JDK 8 <code>bin</code> folder to your <code>%PATH%</code> variable</li>\n<li>Create a new environment variable <code>JAVA_HOME</code> with the value of the path of JDK 8 home folder</li>\n<li>Create a new environment variable <code>JAVA8_HOME</code> again with the value of the path of JDK 8 home folder</li>\n<li>Create a new environment variable <code>JAVA7_HOME</code> with the value of the path of JDK 7 home folder</li>\n<li>Open a terminal window and run <code>java -version</code> command and verify that Java 8 is up and running</li>\n<li>Run <code>javac -version</code> command in the same window and verify that JDK 8 Java compiler is also up and running</li>\n</ul>\n\n<p>Now, ADT-22.6.2 must be downloaded from the following link:</p>\n\n<p><a href=\"http://dl.google.com/android/adt/22.6.2/adt-bundle-windows-x86_64-20140321.zip\">http://dl.google.com/android/adt/22.6.2/adt-bundle-windows-x86_64-20140321.zip</a></p>\n\n<ul>\n<li>Download ADT and unzip its contents into a folder, e.g. <code>D:\\adt</code></li>\n<li>Define a new environment variable called <code>ANDROID_HOME</code> with the value of the path of your ADT installation folder, e.g. <code>D:\\adt\\sdk</code></li>\n<li>Add your <code>Andoid SDK Platform Tools</code> and <code>Andoid SDK Tools</code> folders, e.g. <code>D:\\adt\\sdk\\tools</code> and <code>D:\\adt\\sdk\\platform-tools</code>, to your <code>%PATH%</code> variable</li>\n<li>Create a shortcut to Eclipse IDE if you like. It is located under your ADT installation folder, e.g. <code>D:\\adt\\eclipse</code></li>\n<li>Run Eclipse IDE and create a workspace, e.g. <code>D:\\adt\\workspace</code></li>\n<li>Click on the <code>Android SDK Manager</code> button which is located on the toolbar</li>\n<li>Select <code>Android SDK Build tools Rev. 19.1</code> and <code>Android Support Library</code> only. Un-select everything else and install these two packages.</li>\n</ul>\n\n<p>If everything goes well, ADT will be up and running.</p>\n\n<p><strong>The installation of the following tools is also highly recommended:</strong></p>\n\n<ul>\n<li><p>Eclipse Kepler Java 8 Support: It makes Eclipse recognize new Java 8 syntax extensions and makes you get rid of annoying <code>red dots</code> in your Java code editor. It might be installed through <code>Help -&gt; Install New Software</code> in Eclipse. Enter <a href=\"http://download.eclipse.org/eclipse/updates/4.3-P-builds/\">http://download.eclipse.org/eclipse/updates/4.3-P-builds/</a> into the <code>Work with</code> field and continue to install it.</p></li>\n<li><p>Nodeclipse/Enide Gradle: It is mainly used to highlight Groovy language keywords. Groovy is used as the DSL for Gradle build scripts. This plugin can be installed through <code>Eclipse Marketplace</code>. However, Eclipse within ADT-22.6.2 does not come along with <code>Eclipse Marketplace Client</code>. Therefore, you will first need to install <code>Eclipse Marketplace Client</code> by means of <code>Install New Software</code> tool in Eclipse. Enter http//:download.eclipse.org/mpc/kepler/ into the <code>Work with</code> field and continue to install it. After installing <code>Eclipse Marketplace Client</code>, you may search for <code>Nodeclipse/Enide Gradle</code> in the <code>Eclipse Marketplace Client</code> and install it.</p></li>\n<li><p>Genymotion Virtual Device: It is a great replacement of the default <code>Android Virtual Device</code> which comes along with ADT. AVD is annoyingly cumbersome and it keeps on crashing for no reason. Genymotion makes you prepare Android VD's using <code>CyanogenMod</code> images which are executed by <em>Oracle VirtualBox</em>. Its single user license is for free and it can be downloaded from <a href=\"http://www.genymotion.com\">http://www.genymotion.com</a>. Only a login is required and it can also be integrated into Eclipse. Details can be found under:</p></li>\n</ul>\n\n<p><a href=\"https://cloud.genymotion.com/page/doc/#collapse8\">https://cloud.genymotion.com/page/doc/#collapse8</a></p>\n\n<p>Below is a screenshot of an Android 4.3 based CyanogenMod virtual device,</p>\n\n<p><img src=\"http://i.stack.imgur.com/iow9j.png\" alt=\"enter image description here\"></p>\n\n<p>It might be considered as a fully-fledge Android device running on a x86 or x64 based personal computer. In order to use Google services like <code>Google PlayStore</code> on this virtual device, a <code>gapps</code> image for the Android version that it uses must be flashed onto the device. A proper <code>gapps</code> image for the device might be downloaded from CyanogenMod website:</p>\n\n<p><a href=\"http://wiki.cyanogenmod.org/w/Google_Apps\">http://wiki.cyanogenmod.org/w/Google_Apps</a></p>\n\n<p>Gradle installation is optional since it is also provided by Android SDK itself but its separate installation is highly recommended. Installation of it might be conducted by following these steps:</p>\n\n<ul>\n<li><p>Go to Gradle web site: <a href=\"http://www.gradle.org/\">http://www.gradle.org/</a></p></li>\n<li><p>Click <code>Downloads</code></p></li>\n<li>Under <code>Previous Releases</code> choose version 1.10 and download either gradle-1.10-all.zip or gradle-1.10-bin.zip</li>\n<li>Unzip its contents into a folder, e.g. <code>D:\\adt\\gradle</code></li>\n<li>Define a new environment variable called <code>GRADLE_HOME</code> with the value of the path of your Gradle installation folder, e.g. <code>D:\\adt\\gradle</code></li>\n<li>Add your Gradle binaries folder, e.g. <code>D:\\adt\\gradle\\bin</code>, to your <code>%PATH%</code> variable</li>\n<li>Open a terminal window and run <code>gradle -v</code> command and verify that it`s up and running\nIf you have come up to this point successfully then it means that you are ready to create your first Android App using Java 8 features.</li>\n</ul>\n\n<h2><strong>Demo App</strong></h2>\n\n<p>A simple app will be created to demonstrate the usage of the tools which were described in the previous section. \nYou may simply follow the steps given below to get an insight on using lambda expressions in Android Developer Tools:</p>\n\n<ul>\n<li>Run Eclipse IDE and create a new Android App by selecting <code>File -&gt; New -&gt; Other -&gt; Android -&gt; Android Application Project</code></li>\n<li>Fill in the form that comes up as shown below:</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/JVoe4.png\" alt=\"enter image description here\"></p>\n\n<ul>\n<li>Simply click the <code>Next</code> button on the following forms and click the <code>Finish</code> button on the last one. Wait till ADT finishes loading up the project</li>\n<li>Right-click on the project and select <code>New -&gt; Folder</code> and name it <code>builders</code></li>\n<li>Right-click on the <code>gen (Generated Java Files)</code> folder and delete it. Gradle will generate the same files for us soon and we will add them into the project<code>s build path. The</code>gen` folder created by the default Ant builder is no longer needed and the artifacts under that folder will be obsolete</li>\n<li><p>Create following batch files under the <code>builders</code> folder:</p>\n\n<ul>\n<li>gradle_build.cmd</li>\n<li>gradle_post_build.cmd</li>\n<li>gradle_clean.cmd</li>\n</ul></li>\n<li><p>Fill in these batch files as follows:</p></li>\n</ul>\n\n<p><strong>gradle_build.cmd:</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/8cUqV.png\" alt=\"enter image description here\"></p>\n\n<p><strong>gradle_post_build.cmd:</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/5zYJt.png\" alt=\"enter image description here\"></p>\n\n<p><strong>gradle_clean.cmd:</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/YBqEe.png\" alt=\"enter image description here\"></p>\n\n<ul>\n<li>Un-select <code>Project -&gt; Build Automatically</code> menu option</li>\n<li>Right-click on the project and select <code>Properties -&gt; Builders</code> and un-select all default builders provided by ADT</li>\n<li>Click the <code>New</code> button in the same window and select <code>Program</code> and click <code>OK</code></li>\n<li>New builder configuration window will appear. Fill in its tabs as follows:</li>\n</ul>\n\n<p><strong><code>Main</code> Tab of the new Builder Configuration</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/w1Rw4.png\" alt=\"enter image description here\"></p>\n\n<p><strong><code>Refresh</code> Tab of the new Builder Configuration</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/YpGL5.png\" alt=\"enter image description here\"></p>\n\n<p><strong><code>Environment</code> Tab of the new Builder Configuration</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/0OSHU.png\" alt=\"enter image description here\"></p>\n\n<p><strong><code>Build Options</code> Tab of the new Builder Configuration</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/5BoyE.png\" alt=\"enter image description here\"></p>\n\n<ul>\n<li>Create the second builder called <code>Gradle_Post_Build</code> that uses <code>gradle_post_build.cmd</code> as its program. All other settings of this builder must exactly be the same with the previously created builder. This builder will be responsible for copying the artifacts created by the build process into the <code>bin</code> folder.</li>\n<li>Create the third builder called <code>Gradle_Cleaner</code> that uses <code>gradle_clean.cmd</code> as its program. Only <code>Run the builder</code> setting in the final tab must be set as <code>During a Clean</code>. All other settings of this builder must exactly be the same with the first builder. This builder will be responsible for cleaning the artifacts created by the build process as the name suggests.</li>\n</ul>\n\n<p><strong>New Builders of the <code>HelloLambda</code> Project</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/0DC3V.png\" alt=\"enter image description here\"></p>\n\n<ul>\n<li>Right-click on the project and select <code>Export</code></li>\n<li>Select <code>Android -&gt; Generate Gradle Build Files</code> and click <code>Next</code></li>\n<li>Select the project in the next window and click <code>Finish</code></li>\n<li>Go to your project's root folder and delete the files <code>gradlew</code> and <code>gradlew.bat</code>. Also delete <code>gradle</code> folder</li>\n<li>Switch back to Eclipse and select <code>Project -&gt; Clean</code> menu option. Fill in the form that shows up as follows:</li>\n</ul>\n\n<p><strong><code>Clean Project</code> Window</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/Yn4Sz.png\" alt=\"enter image description here\"></p>\n\n<ul>\n<li>Click <code>OK</code> and wait till the cleaning process completes</li>\n<li>Add the Java code snippet given below right after the call to <code>setContentView</code> function in your <code>MainActivity</code> class:</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/XqeCX.png\" alt=\"enter image description here\"></p>\n\n<ul>\n<li>Change the beginning of the <code>build.gradle</code> file till the <code>sourceCompatibility</code> section as follows:</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/GSS1F.png\" alt=\"enter image description here\"></p>\n\n<ul>\n<li>Right-click on the project and select <code>Properties -&gt; Java Compiler</code> option and set all compliance levels to Java 8. This will make Eclipse recognize new Java 8 constructs like lambda expressions.</li>\n<li>Click <code>No</code> in the notification window</li>\n<li>Right-click on the project and select <code>Build project</code>. Eclipse will start building the project.</li>\n</ul>\n\n<p><strong>Build Process</strong>\n<img src=\"http://i.stack.imgur.com/1JNEM.png\" alt=\"enter image description here\"></p>\n\n<ul>\n<li><p>Right-click on the project and go to <code>Properties -&gt; Java Build Path</code>. Add the following folders to the build path (also shown in below image):</p>\n\n<ul>\n<li><code>build\\source\\buildConfig\\debug</code></li>\n<li><code>build\\source\\r\\debug</code></li>\n</ul></li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/q5Yiv.png\" alt=\"enter image description here\"></p>\n\n<p>Eclipse will now be able to recognize <code>R.java</code> and <code>buildConfig.java</code> files and it will not display any <code>red dots</code> which denote errors related to the resource files of the project.</p>\n\n<ul>\n<li>Create a new <code>Run Configuration</code> for your Android target platform by right-clicking on the project and then selecting <code>Run As -&gt; Run Configurations</code>. For instance, this demo application looks like shown below on the Genymotion VD:</li>\n</ul>\n\n<h2><strong>HelloLambda Application</strong></h2>\n\n<p><img src=\"http://i.stack.imgur.com/9paAZ.png\" alt=\"enter image description here\"></p>\n\n<p>You may observe in the <code>LogCat</code> window that the code snippet with a simple lambda expression works properly</p>\n\n<p><img src=\"http://i.stack.imgur.com/6lYDI.png\" alt=\"enter image description here\"></p>\n\n<p>Source: <a href=\"https://hakanyamanyar.wordpress.com/2014/07/08/using-java-8-lambda-expressions-in-android-developer-tools/\">Using Java 8 Lambda Expressions in Android Developer Tools</a></p>\n", "title": "Is it possible to use Java 8 for Android development?", "tags": ["java", "android", "java-8", "android-gradle", "build.gradle"], "link": "http://stackoverflow.com/questions/23318109/is-it-possible-to-use-java-8-for-android-development/28394024#28394024", "question_id": 23318109, "answer_id": 28394024}, {"body": "<h1>Update</h1>\n\n<p>Now it is possible </p>\n\n<p>But you will need to have your device rom run on java 1.8 to run it.</p>\n\n<p>add these lines to build_gradle </p>\n\n<pre><code> compileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n}\n</code></pre>\n\n<hr>\n\n<p>Java 8 seem to be the running java engine of Android studio 2.0, \nBut it still does not accept the syntax of java 8 after I checked, and you cannot chose a compiler from android studio now. However, you can use the scala plugin if you need functional programming mechanism in your android client. </p>\n\n<p><a href=\"http://i.stack.imgur.com/XVIKB.png\"><img src=\"http://i.stack.imgur.com/XVIKB.png\" alt=\"enter image description here\"></a></p>\n", "title": "Is it possible to use Java 8 for Android development?", "tags": ["java", "android", "java-8", "android-gradle", "build.gradle"], "link": "http://stackoverflow.com/questions/23318109/is-it-possible-to-use-java-8-for-android-development/33918771#33918771", "question_id": 23318109, "answer_id": 33918771}, {"body": "<p>We Can Use Java 8 using:</p>\n\n\n\n<ol>\n<li><p>In build.gradle (Project: myProject) add following</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>classpath 'me.tatarka:gradle-retrolambda:x.x.x' //x.x.x is recent version\n</code></pre></li>\n<li><p>In build.gradle (Module: myModule) add following</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>apply plugin: 'me.tatarka.retrolambda'\n\ncompileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n}\n</code></pre></li>\n</ol>\n", "title": "Is it possible to use Java 8 for Android development?", "tags": ["java", "android", "java-8", "android-gradle", "build.gradle"], "link": "http://stackoverflow.com/questions/23318109/is-it-possible-to-use-java-8-for-android-development/34395563#34395563", "question_id": 23318109, "answer_id": 34395563}, {"body": "<p>When I asked this question almost 2 years ago the answer really was \u201cofficially\u201d no,  but as pointed out by ekcr1's answer you can get one of the most highly anticipated features (lambdas) to work if you  use retrolamba.  At the time I was still using eclipse, as Android Studio was in \u201cpreview\u201d mode,  so I never did pursue this path.</p>\n\n<p>Today, I think the \u201cofficial\u201d answer is still no,  and while retrolamba still seems like a good way to go, there is another option for those willing to go down a somewhat \u201cunofficial\u201d  route can take, namely Kotlin.</p>\n\n<p>Today Kotlin reached 1.0.0.  For those not familiar with Kotlin,  more info can be found at their website found here:</p>\n\n<p><a href=\"https://kotlinlang.org\">https://kotlinlang.org</a></p>\n\n<p>or watch this utube video of a talk given by Jake Wharton</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=A2LukgT2mKc\">https://www.youtube.com/watch?v=A2LukgT2mKc</a></p>\n", "title": "Is it possible to use Java 8 for Android development?", "tags": ["java", "android", "java-8", "android-gradle", "build.gradle"], "link": "http://stackoverflow.com/questions/23318109/is-it-possible-to-use-java-8-for-android-development/35421762#35421762", "question_id": 23318109, "answer_id": 35421762}, {"body": "<p>Android OFFICIALLY supports Java 8 as of Android N. </p>\n\n<p><a href=\"http://android-developers.blogspot.com/2016/03/first-preview-of-android-n-developer.html\">Feature announcements are here</a>, the Java 8 language announcement is:</p>\n\n<blockquote>\n  <p><strong>Improved Java 8 language support</strong> - We\u2019re excited to bring Java 8 language features to Android. With Android's Jack compiler, you can\n  now use many popular Java 8 language features, including lambdas and\n  more, on Android versions as far back as Gingerbread. The new features\n  help reduce boilerplate code. For example, lambdas can replace\n  anonymous inner classes when providing event listeners. Some Java 8\n  language features --like default and static methods, streams, and\n  functional interfaces -- are also now available on N and above. With\n  Jack, we\u2019re looking forward to tracking the Java language more closely\n  while maintaining backward compatibility.</p>\n</blockquote>\n", "title": "Is it possible to use Java 8 for Android development?", "tags": ["java", "android", "java-8", "android-gradle", "build.gradle"], "link": "http://stackoverflow.com/questions/23318109/is-it-possible-to-use-java-8-for-android-development/35900034#35900034", "question_id": 23318109, "answer_id": 35900034}, {"body": "<p>As of <strong><a href=\"http://android-developers.blogspot.com/2016/03/first-preview-of-android-n-developer.html\">Android N preview</a></strong> release Android support <strong>limited</strong> features of <strong>Java 8</strong> see <a href=\"https://developer.android.com/preview/j8-jack.html\">Java 8 Language Features</a></p>\n\n<blockquote>\n  <p>To start using these features, you need to download and set up <a href=\"http://tools.android.com/recent/androidstudio21previewnowavailableforandroidnpreview\">Android\n  Studio 2.1</a>  and the Android N Preview SDK, which includes the\n  required <a href=\"https://source.android.com/source/jack.html\">Jack</a> toolchain and updated Android Plugin for Gradle. If you\n  haven't yet installed the Android N Preview SDK, see <a href=\"https://developer.android.com/preview/setup-sdk.html\">Set Up to Develop\n  for Android N</a>.</p>\n</blockquote>\n\n<p><strong>Supported Java 8 Language Features and APIs</strong></p>\n\n<blockquote>\n  <p>Android does not currently support all Java 8 language features.\n  However, the following features are now available when developing apps\n  targeting the Android N Preview:</p>\n</blockquote>\n\n<p><a href=\"https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html\">Default and static interface methods</a></p>\n\n<p><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\">Lambda expressions</a> (also available on API level 23 and lower)</p>\n\n<p><a href=\"https://docs.oracle.com/javase/tutorial/java/annotations/repeating.html\">Repeatable annotations</a></p>\n\n<p><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\">Method References</a> (also available on API level 23 and lower)</p>\n\n<p>There are some additional Java 8 features which Android support, you can see complete detail from <a href=\"https://developer.android.com/preview/j8-jack.html#supported-features\">Java 8 Language Features</a></p>\n\n<p><strong>Update</strong></p>\n\n<blockquote>\n  <p>Note: The Android N bases its implementation of lambda expressions on\n  anonymous classes. This approach allows them to be backwards\n  compatible and executable on earlier versions of Android. To test\n  lambda expressions on earlier versions, remember to go to your\n  build.gradle file, and set compileSdkVersion and targetSdkVersion to\n  23 or lower.</p>\n</blockquote>\n\n<p><em>Note: Answer last updated on May 6 2016</em></p>\n", "title": "Is it possible to use Java 8 for Android development?", "tags": ["java", "android", "java-8", "android-gradle", "build.gradle"], "link": "http://stackoverflow.com/questions/23318109/is-it-possible-to-use-java-8-for-android-development/35907821#35907821", "question_id": 23318109, "answer_id": 35907821}, {"body": "<p>To start using <strong>Java 8 Language</strong>  you need to download and set up Android Studio 2.1 (preview) and the Android N Preview SDK, which includes the required Jack toolchain and updated Android Plugin for Gradle.</p>\n\n<blockquote>\n  <p>Using the new Java 8 language features is not a requirement for developing apps that target the Android N platform. If you don't want to write code with Java 8 language features, you can keep your project's source and target compatibility values set to Java 7, but you still must compile with JDK 8 to build against the Android N platform.</p>\n  \n  <p><strong>Android does not currently support all Java 8 language features.</strong></p>\n</blockquote>\n\n<p><strong>Known Issues:</strong>\nInstant Run, introduced in Android Studio 2.0 (Beta), does not currently work with Jack and will be disabled while using the new toolchain.</p>\n", "title": "Is it possible to use Java 8 for Android development?", "tags": ["java", "android", "java-8", "android-gradle", "build.gradle"], "link": "http://stackoverflow.com/questions/23318109/is-it-possible-to-use-java-8-for-android-development/35916359#35916359", "question_id": 23318109, "answer_id": 35916359}, {"body": "<p>Latest news:</p>\n\n<p>Google announce that with Android N and Android Studio 2.1+, platform will support Java 8. Also stable version of studio 2.1 was released. </p>\n\n<p>At last we can use lambda expressions. No more list filter in for loop. Horeeey.</p>\n", "title": "Is it possible to use Java 8 for Android development?", "tags": ["java", "android", "java-8", "android-gradle", "build.gradle"], "link": "http://stackoverflow.com/questions/23318109/is-it-possible-to-use-java-8-for-android-development/36883704#36883704", "question_id": 23318109, "answer_id": 36883704}, {"body": "<p>I wrote a <a href=\"http://stackoverflow.com/a/30440855/4230345\">similar answer</a> to a <a href=\"http://stackoverflow.com/questions/30421389/android-studio-lambda-does-not-work/30440855#30440855_\">similar question</a> on Stack Overflow, but here is part of that answer.</p>\n\n<h2>Android Studio 2.1:</h2>\n\n<p>The new version of Android Studio (2.1) has support for Java 8 features. Here is an extract from the <a href=\"http://android-developers.blogspot.co.uk/2016/04/android-studio-21-supports-android-n.html\" rel=\"nofollow\">Android Developers blogspot post</a>:</p>\n\n<blockquote>\n  <p>... Android Studio 2.1 release includes support for the new <a href=\"https://source.android.com/source/jack.html\" rel=\"nofollow\">Jack compiler</a> and support for <a href=\"http://developer.android.com/intl/zh-cn/preview/j8-jack.html?utm_campaign=android_discussion_studiondeveloperpreview_042616&amp;utm_source=anddev&amp;utm_medium=blog\" rel=\"nofollow\">Java 8</a>. </p>\n  \n  <p>...</p>\n  \n  <p>To use Java 8 language features when developing with the N Developer Preview, you need to use the Jack compiler. The New Project Wizard [File\u2192 New\u2192 Project] generates the correct configurations for projects targeting the N.</p>\n</blockquote>\n\n<hr>\n\n<h2>Prior to Android Studio 2.1:</h2>\n\n<p>Android does not support Java 1.8 yet (it only supports up to 1.7), so you cannot use Java 8 features like lambdas.</p>\n\n<p><a href=\"http://stackoverflow.com/a/23318644/4230345\">This answer gives more detail on Android Studio's compatibility</a>; it states:</p>\n\n<blockquote>\n  <p>If you want to use lambdas, one of the major features of Java 8 in Android, you can use gradle-retrolamba</p>\n</blockquote>\n\n<p>If you want to know more about using <code>gradle-retrolambda</code>, <a href=\"http://stackoverflow.com/a/28394024/4230345\">this answer gives a lot of detail on doing that</a>.</p>\n", "title": "Is it possible to use Java 8 for Android development?", "tags": ["java", "android", "java-8", "android-gradle", "build.gradle"], "link": "http://stackoverflow.com/questions/23318109/is-it-possible-to-use-java-8-for-android-development/36897453#36897453", "question_id": 23318109, "answer_id": 36897453}, {"body": "<p>Add this config build.gradle and sync gradle:</p>\n\n<pre><code>android {\n    ...\n    defaultConfig {\n        ...\n        jackOptions {\n            enabled true\n        }\n    }\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n        // or\n        //sourceCompatibility 1.8\n        //targetCompatibility 1.8\n    }\n}\n</code></pre>\n", "title": "Is it possible to use Java 8 for Android development?", "tags": ["java", "android", "java-8", "android-gradle", "build.gradle"], "link": "http://stackoverflow.com/questions/23318109/is-it-possible-to-use-java-8-for-android-development/39508219#39508219", "question_id": 23318109, "answer_id": 39508219}], "creation_date": 1398559243, "score": 428, "link": "http://stackoverflow.com/questions/23318109/is-it-possible-to-use-java-8-for-android-development", "question_id": 23318109}, {"body": "<p>We all know that <code>String</code> is immutable in Java, but check the following code:</p>\n\n<pre><code>String s1 = \"Hello World\";  \nString s2 = \"Hello World\";  \nString s3 = s1.substring(6);  \nSystem.out.println(s1); // Hello World  \nSystem.out.println(s2); // Hello World  \nSystem.out.println(s3); // World  \n\nField field = String.class.getDeclaredField(\"value\");  \nfield.setAccessible(true);  \nchar[] value = (char[])field.get(s1);  \nvalue[6] = 'J';  \nvalue[7] = 'a';  \nvalue[8] = 'v';  \nvalue[9] = 'a';  \nvalue[10] = '!';  \n\nSystem.out.println(s1); // Hello Java!  \nSystem.out.println(s2); // Hello Java!  \nSystem.out.println(s3); // World  \n</code></pre>\n\n<p>Why does this program operate like this? And why is the value of <code>s1</code> and <code>s2</code> changed, but not <code>s3</code>?</p>\n", "tags": ["java", "string", "reflection", "immutability"], "title": "Is a Java string really immutable?", "answers": [{"body": "<p>You are using reflection to access the \"implementation details\" of string object. Immutability is the feature of the public interface of an object.</p>\n", "title": "Is a Java string really immutable?", "tags": ["java", "string", "reflection", "immutability"], "link": "http://stackoverflow.com/questions/20945049/is-a-java-string-really-immutable/20945098#20945098", "question_id": 20945049, "answer_id": 20945098}, {"body": "<p>You are using reflection to circumvent the immutability of String - it's a form of \"attack\".</p>\n\n<p>There are lots of examples you can create like this (eg <a href=\"http://stackoverflow.com/questions/14060078/is-void-really-uninstantiable\">you can even instantiate a <code>Void</code> object</a> too), but it doesn't mean that String is not \"immutable\".</p>\n\n<p>There are use cases where this type of code may be used to your advantage and be \"good coding\", such as <a href=\"http://stackoverflow.com/questions/17151382/safely-using-string-for-passwords-by-using-reflection-to-scrub-contents-prior-to\">clearing passwords from memory at the earliest possible moment (before GC)</a>.</p>\n\n<p>Depending on the security manager, you may not be able to execute your code.</p>\n", "title": "Is a Java string really immutable?", "tags": ["java", "string", "reflection", "immutability"], "link": "http://stackoverflow.com/questions/20945049/is-a-java-string-really-immutable/20945108#20945108", "question_id": 20945049, "answer_id": 20945108}, {"body": "<p><code>String</code> is immutable* but this only means you cannot change it using its public API. </p>\n\n<p>What you are doing here is circumventing the normal API, using reflection. The same way, you can change the values of enums, change the lookup table used in Integer autoboxing etc.</p>\n\n<p>Now, the reason <code>s1</code> and <code>s2</code> change value, is that they both refer to the same interned string. The compiler does this (as mentioned by other answers). </p>\n\n<p>The reason <code>s3</code> does <em>not</em> was actually a bit surprising to me, as I thought it would share the <code>value</code> array (<a href=\"http://java-performance.info/changes-to-string-java-1-7-0_06/\">it did in earlier version of Java</a>, before Java 7u6). However, looking at the source code of <code>String</code>, we can see that the <code>value</code> character array for a substring is actually copied (using <code>Arrays.copyOfRange(..)</code>). This is why it goes unchanged.</p>\n\n<p>You can install a <code>SecurityManager</code>, to avoid malicious code to do such things. But keep in mind that some libraries depend on using these kind of reflection tricks (typically ORM tools, AOP libraries etc).</p>\n\n<p>*) I initially wrote that <code>String</code>s aren't really immutable, just \"effective immutable\". This might be misleading in the current implementation of <code>String</code>, where the <code>value</code> array is indeed marked <code>private final</code>. It's still worth noting, though, that there is no way to declare an array in Java as immutable, so care must be taken not to expose it outside its class, even with the proper access modifiers.</p>\n\n<hr>\n\n<p>As this topic seems overwhelmingly popular, here's some suggested further reading: <a href=\"http://www.javaspecialists.eu/talks/oslo09/ReflectionMadness.pdf\">Heinz Kabutz's Reflection Madness talk</a> from JavaZone 2009, which covers a lot of the issues in the OP, along with other reflection... well... madness. </p>\n\n<p>It covers why this is sometimes useful. And why, most of the time, you should avoid it. :-)</p>\n", "title": "Is a Java string really immutable?", "tags": ["java", "string", "reflection", "immutability"], "link": "http://stackoverflow.com/questions/20945049/is-a-java-string-really-immutable/20945113#20945113", "question_id": 20945049, "answer_id": 20945113}, {"body": "<p>String immutability is from the interface perspective. You are using reflection to bypass the interface and directly modify the internals of the String instances.</p>\n\n<p><code>s1</code> and <code>s2</code> are both changed because they are both assigned to the same \"intern\" String instance. You can find out a bit more about that part from <a href=\"http://javatechniques.com/blog/string-equality-and-interning/\">this article</a> about string equality and interning.  You might be surprised to find out that in your sample code, <code>s1 == s2</code> returns <code>true</code>!</p>\n", "title": "Is a Java string really immutable?", "tags": ["java", "string", "reflection", "immutability"], "link": "http://stackoverflow.com/questions/20945049/is-a-java-string-really-immutable/20945157#20945157", "question_id": 20945049, "answer_id": 20945157}, {"body": "<p>Visibility modifiers and final (i.e. immutability) are not a measurement against malicious code in Java; they are merely tools to protect against mistakes and to make the code more maintainable (one of the big selling points of the system). That is why you can access internal implementation details like the backing char array for <code>String</code>s via reflection.</p>\n\n<p>The second effect you see is that all <code>String</code>s change while it looks like you only change <code>s1</code>. It is a certain property of Java String literals that they are automatically interned, i.e. cached. Two String literals with the same value will actually be the same object. When you create a String with <code>new</code> it will not be interned automatically and you will not see this effect.</p>\n\n<p><code>#substring</code> until recently (Java 7u6) worked in a similar way, which would have explained the behaviour in the original version of your question. It didn't create a new backing char array but reused the one from the original String; it just created a new String object that used an offset and a length to present only a part of that array. This generally worked as Strings are immutable - unless you circumvent that. This property of <code>#substring</code> also meant that the whole original String couldn't be garbage collected when a shorter substring created from it still existed.</p>\n\n<p>As of current Java and your current version of the question there is no strange behaviour of <code>#substring</code>.</p>\n", "title": "Is a Java string really immutable?", "tags": ["java", "string", "reflection", "immutability"], "link": "http://stackoverflow.com/questions/20945049/is-a-java-string-really-immutable/20945259#20945259", "question_id": 20945049, "answer_id": 20945259}, {"body": "<p>In Java, if two string primitive variables are initialized to the same literal, it assigns the same reference to both variables:</p>\n\n<pre><code>String Test1=\"Hello World\";\nString Test2=\"Hello World\";\nSystem.out.println(test1==test2); // true\n</code></pre>\n\n<blockquote>\n  <p><img src=\"http://i.stack.imgur.com/WhdYU.png\" alt=\"initialization\"></p>\n</blockquote>\n\n<p>That is the reason the comparison returns true. The third string is created using <code>substring()</code> which makes a new string instead of pointing to the same.</p>\n\n<blockquote>\n  <p><img src=\"http://i.stack.imgur.com/AcNr9.png\" alt=\"sub string\"></p>\n</blockquote>\n\n<p>When you access a string using reflection, you get the actual pointer:</p>\n\n<pre><code>Field field = String.class.getDeclaredField(\"value\");\nfield.setAccessible(true);\n</code></pre>\n\n<p>So change to this will change the string holding a pointer to it, but as <code>s3</code> is created with a new string due to <code>substring()</code> it would not change.</p>\n\n<blockquote>\n  <p><img src=\"http://i.stack.imgur.com/Cv3m9.png\" alt=\"change\"></p>\n</blockquote>\n", "title": "Is a Java string really immutable?", "tags": ["java", "string", "reflection", "immutability"], "link": "http://stackoverflow.com/questions/20945049/is-a-java-string-really-immutable/20945268#20945268", "question_id": 20945049, "answer_id": 20945268}, {"body": "<p>Which version of Java are you using? From Java 1.7.0_06, Oracle has changed the internal representation of String, especially the substring. </p>\n\n<p>Quoting from <a href=\"http://www.infoq.com/news/2013/12/Oracle-Tunes-Java-String\" rel=\"nofollow\" title=\"Oracle Tunes Java's Internal String Representation\">Oracle Tunes Java's Internal String Representation</a>:</p>\n\n<blockquote>\n  <p>In the new paradigm, the String offset and count fields have been removed, so substrings no longer share the underlying char [] value. </p>\n</blockquote>\n\n<p>With this change, it may happen without reflection (???).</p>\n", "title": "Is a Java string really immutable?", "tags": ["java", "string", "reflection", "immutability"], "link": "http://stackoverflow.com/questions/20945049/is-a-java-string-really-immutable/20949917#20949917", "question_id": 20945049, "answer_id": 20949917}, {"body": "<p>According to the concept of pooling, all the String variables containing the same value will point to the same memory address. Therefore s1 and s2, both containing the same value of \u201cHello World\u201d, will point towards the same memory location (say M1).</p>\n\n<p>On the other hand, s3 contains \u201cWorld\u201d, hence it will point to a different memory allocation (say M2).</p>\n\n<p>So now what's happening is that the value of S1 is being changed (by using the char [ ] value). So the value at the memory location M1 pointed both by s1 and s2 has been changed.</p>\n\n<p>Hence as a result, memory location M1 has been modified which causes change in the value of s1 and s2.</p>\n\n<p>But the value of location M2 remains unaltered, hence s3 contains the same original value.</p>\n", "title": "Is a Java string really immutable?", "tags": ["java", "string", "reflection", "immutability"], "link": "http://stackoverflow.com/questions/20945049/is-a-java-string-really-immutable/20950428#20950428", "question_id": 20945049, "answer_id": 20950428}, {"body": "<p>String is immutable, but through reflection you're allowed to change the String class. You've just redefined the String class as mutable in real-time. You could redefine methods to be public or private or static if you wanted.</p>\n", "title": "Is a Java string really immutable?", "tags": ["java", "string", "reflection", "immutability"], "link": "http://stackoverflow.com/questions/20945049/is-a-java-string-really-immutable/20959594#20959594", "question_id": 20945049, "answer_id": 20959594}, {"body": "<p>There are really two questions here:</p>\n\n<ol>\n<li>Are strings really immutable?</li>\n<li>Why is s3 not changed?</li>\n</ol>\n\n<p>To point 1: Except for ROM there is no immutable memory in your computer. Nowadays even ROM is sometimes writable. There is always some code somewhere (whether it's the kernel or native code sidestepping your managed environment) that can write to your memory address. So, in \"reality\", no they are not <strong>absolutely</strong> immutable.</p>\n\n<p>To point 2: This is because substring is probably allocating a new string instance, which is likely copying the array. It is possible to implement substring in such a way that it won't do a copy, but that doesn't mean it does. There are tradeoffs involved.</p>\n\n<p>For example, should holding a reference to <code>reallyLargeString.substring(reallyLargeString.length - 2)</code> cause a large amount of memory to be held alive, or only a few bytes?</p>\n\n<p>That depends on how substring is implemented. A deep copy will keep less memory alive, but it will run slightly slower. A shallow copy will keep more memory alive, but it will be faster. Using a deep copy can also reduce heap fragmentation, as the string object and its buffer can be allocated in one block, as opposed to 2 separate heap allocations.</p>\n\n<p>In any case, it looks like your JVM chose to use deep copies for substring calls.</p>\n", "title": "Is a Java string really immutable?", "tags": ["java", "string", "reflection", "immutability"], "link": "http://stackoverflow.com/questions/20945049/is-a-java-string-really-immutable/20968146#20968146", "question_id": 20945049, "answer_id": 20968146}, {"body": "<p>The reason s3 does not actually change is because in Java when you do a substring the value character array for a substring is internally copied (using Arrays.copyOfRange()).</p>\n\n<p>s1 and s2 are the same because in Java they both refer to the same interned string. It's by design in Java.</p>\n", "title": "Is a Java string really immutable?", "tags": ["java", "string", "reflection", "immutability"], "link": "http://stackoverflow.com/questions/20945049/is-a-java-string-really-immutable/20972058#20972058", "question_id": 20945049, "answer_id": 20972058}, {"body": "<p>To add to the @haraldK's answer - this is a security hack which could lead to a serious impact in the app. </p>\n\n<p>First thing is a modification to a constant string stored in a String Pool. When string is declared as a <code>String s = \"Hello World\";</code>, it's being places into a special object pool for further potential reusing. The issue is that compiler will place a reference to the modified version at compile time and once the user modifies the string stored in this pool at runtime, all references in code will point to the modified version. This would result into a following bug:</p>\n\n<pre><code>System.out.println(\"Hello World\"); \n</code></pre>\n\n<p>Will print:</p>\n\n<pre><code>Hello Java!\n</code></pre>\n\n<p>There was another issue I experienced when I was implementing a heavy computation over such risky strings. There was a bug which happened in like 1 out of 1000000 times during the computation which made the result undeterministic. I was able to find the problem by switching off the JIT - I was always getting the same result with JIT turned off. My guess is that the reason was this String security hack which broke some of the JIT optimization contracts.</p>\n", "title": "Is a Java string really immutable?", "tags": ["java", "string", "reflection", "immutability"], "link": "http://stackoverflow.com/questions/20945049/is-a-java-string-really-immutable/20974227#20974227", "question_id": 20945049, "answer_id": 20974227}, {"body": "<p>[Disclaimer this is a deliberately opinionated style of answer as I feel a more \"don't do this at home kids\" answer is warranted] </p>\n\n<p>The sin is the line <code>field.setAccessible(true);</code> which says to violate the public api by allowing access to a private field. Thats a giant security hole which can be locked down by configuring a security manager. </p>\n\n<p>The phenomenon in the question are implementation details which you would never see when not using that dangerous line of code to violate the access modifiers via reflection. Clearly two (normally) immutable strings can share the same char array. Whether a substring shares the same array depends on whether it can and whether the developer thought to share it. Normally these are invisible implementation details which you should not have to know unless you shoot the access modifier through the head with that line of code. </p>\n\n<p>It is simply not a good idea to rely upon such details which cannot be experienced without violating the access modifiers using reflection. The owner of that class only supports the normal public API and is free to make implementation changes in the future. </p>\n\n<p>Having said all that the line of code is really very useful when you have a gun held you your head forcing you to do such dangerous things. Using that back door is usually a code smell that you need to upgrade to better library code where you don't have to sin. Another common use of that dangerous line of code is to write a \"voodoo framework\" (orm, injection container, ...). Many folks get religious about such frameworks (both for and against them) so I will avoid inviting a flame war by saying nothing other than the vast majority of programmers don't have to go there. </p>\n", "title": "Is a Java string really immutable?", "tags": ["java", "string", "reflection", "immutability"], "link": "http://stackoverflow.com/questions/20945049/is-a-java-string-really-immutable/21008747#21008747", "question_id": 20945049, "answer_id": 21008747}, {"body": "<p>Strings are created in permanent area of the JVM heap memory. So yes, it's really immutable and cannot be changed after being created.\nBecause in the JVM, there are three types of heap memory:\n 1. Young generation\n 2. Old generation\n 3. Permanent generation.</p>\n\n<p>When any object are created, it goes into the young generation heap area and PermGen area reserved for String pooling.</p>\n\n<p>Here is more detail you can go and grab more information from:\n<em><a href=\"http://javarevisited.blogspot.com/2011/04/garbage-collection-in-java.html#more\" rel=\"nofollow\">How Garbage Collection works in Java </a></em>.</p>\n", "title": "Is a Java string really immutable?", "tags": ["java", "string", "reflection", "immutability"], "link": "http://stackoverflow.com/questions/20945049/is-a-java-string-really-immutable/36216059#36216059", "question_id": 20945049, "answer_id": 36216059}], "creation_date": 1388993211, "score": 328, "link": "http://stackoverflow.com/questions/20945049/is-a-java-string-really-immutable", "question_id": 20945049}, {"body": "<p>I am developing an application, and everytime I run it, I get the message:</p>\n\n<blockquote>\n  <p>Unfortunately, MyApp has stopped.</p>\n</blockquote>\n\n<p>What can I do to solve this?</p>\n\n<hr/>\n\n<p><em>About this question - obviously inspired by <a href=\"http://stackoverflow.com/questions/3988788/what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors\">What is a stack trace, and how can I use it to debug my application errors?</a>, there are lots of questions stating that their application has crashed, without any further detail. This question aims to instruct novice Android programmers on how to try and fix their problems themselves, or ask the right questions.</em></p>\n", "tags": ["java", "android"], "title": "Unfortunately MyApp has stopped. How can I solve this?", "answers": [{"body": "<p><em>This answer describes the process of retrieving the stack trace. Already have the stack trace? Read up on stack traces in \"<a href=\"http://stackoverflow.com/questions/3988788/what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors\">What is a stack trace, and how can I use it to debug my application errors?</a>\"</em></p>\n\n<h1>The Problem</h1>\n\n<p>Your application quit because an uncaught <code>RuntimeException</code> was thrown.<br>\nThe most common of these is the <code>NullPointerException</code>.</p>\n\n<h1>How to solve it?</h1>\n\n<p>Every time an Android application crashes (or any Java application for that matter), a <code>Stack trace</code> is written to the console (in this case, logcat). This stack trace contains vital information for solving your problem.</p>\n\n<h2>Android Studio</h2>\n\n<p><img src=\"http://i.stack.imgur.com/ZL3Y8.png\" alt=\"Finding the stack trace in Android Studio\"></p>\n\n<p>In the bottom bar of the window, click on the <code>Android</code> button. Alternatively, you can press <kbd>alt</kbd>+<kbd>6</kbd>. Make sure your emulator or device is selected in the <code>Devices</code> panel. Next, try to find the stack trace, which is shown in red. There may be a lot of stuff logged into logcat, so you may need to scroll a bit. An easy way to find the stack trace is to clear the logcat (using the recycle bin on the right), and let the app crash again.</p>\n\n<h2>Eclipse</h2>\n\n<p><img src=\"http://i.stack.imgur.com/6qdhO.png\" alt=\"Finding the stack trace in Eclipse\"></p>\n\n<p>In the top right corner, click the <code>DDMS</code> button. If it is not there, you might need to add it first using the <code>Open Perspective</code> button to the left of the <code>Java</code> button. You will find the logcat pane at the bottom. First, make sure your device is selected in the topleft <code>devices</code> panel. Next, try to find the stack trace, which is shown in red. Again, there may be a lot of stuff logged into logcat, so you may need to scroll a bit. An easy way to find the stack trace here is to clear the logcat (using the <code>clear log</code> button on the top right), and let the app crash again. You should also click on the package name of your app, if it is not already selected. This will filter out only the log message made by your app.</p>\n\n<h1>I have found the stack trace, now what?</h1>\n\n<p>Yay! You're halfway to solving your problem.<br>\nYou only need to find out what exactly made your application crash, by analyzing the stack trace.</p>\n\n<p>Read up on stack traces in \"<a href=\"http://stackoverflow.com/questions/3988788/what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors\">What is a stack trace, and how can I use it to debug my application errors?</a>\"</p>\n\n<h1>I still can't solve my problem!</h1>\n\n<p>If you've found your <code>Exception</code> and the line where it occurred, and still cannot figure out how to fix it, don't hesitate to ask a question on StackOverflow.  </p>\n\n<p>Try to be as concise as possible: post the stack trace, and the <em>relevant</em> code (e.g. a few lines up to the line which threw the <code>Exception</code>).</p>\n", "title": "Unfortunately MyApp has stopped. How can I solve this?", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/23353173/unfortunately-myapp-has-stopped-how-can-i-solve-this/23353174#23353174", "question_id": 23353173, "answer_id": 23353174}, {"body": "<p>First you check which point your app has crashed (<code>Unfortunately, MyApp has stopped.</code>). For this you can use <code>Log.e(\"TAG\",\"Message\");</code>, using this line you can see you app log in logcat.</p>\n\n<p>After that you find which point your app has stopped its very easy to solve at your side. </p>\n", "title": "Unfortunately MyApp has stopped. How can I solve this?", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/23353173/unfortunately-myapp-has-stopped-how-can-i-solve-this/29116807#29116807", "question_id": 23353173, "answer_id": 29116807}, {"body": "<p>You can also get this error message on its own, without any stack trace or any further error message.</p>\n\n<p>In this case you need to make sure your Android manifest is configured correctly (including any manifest merging happening from a library and any activity that would come from a library), and pay particular attention to the first activity displayed in your application in your manifest files.</p>\n", "title": "Unfortunately MyApp has stopped. How can I solve this?", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/23353173/unfortunately-myapp-has-stopped-how-can-i-solve-this/29192526#29192526", "question_id": 23353173, "answer_id": 29192526}, {"body": "<p>You can use Google's ADB tool to get Logcat file to analyze the issue.</p>\n\n<pre><code>adb logcat &gt; logcat.txt\n</code></pre>\n\n<p>open logcat.txt file and search for your application name. There should be information why it failed,The Line number ,Class name and ...</p>\n", "title": "Unfortunately MyApp has stopped. How can I solve this?", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/23353173/unfortunately-myapp-has-stopped-how-can-i-solve-this/29200956#29200956", "question_id": 23353173, "answer_id": 29200956}, {"body": "<p>Just check the error in log cat. </p>\n\n<p>You get the log cat option from in eclipse:</p>\n\n<blockquote>\n  <p>window->show view->others->Android->Logcat</p>\n</blockquote>\n\n<p>Log cat contains error.</p>\n\n<p>Other wise you can also check the error by executing an application in debug mode.\nFirstly set breakpoint after that by doing:</p>\n\n<blockquote>\n  <p>right click on project->debug as->Android application</p>\n</blockquote>\n", "title": "Unfortunately MyApp has stopped. How can I solve this?", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/23353173/unfortunately-myapp-has-stopped-how-can-i-solve-this/30778896#30778896", "question_id": 23353173, "answer_id": 30778896}, {"body": "<p>check your logcat message. \nand see your menifest file. there should be something missing like defining the activity, user permission, etc.</p>\n", "title": "Unfortunately MyApp has stopped. How can I solve this?", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/23353173/unfortunately-myapp-has-stopped-how-can-i-solve-this/31114928#31114928", "question_id": 23353173, "answer_id": 31114928}, {"body": "<p>You have to check the <code>Stack trace</code></p>\n\n<p><strong>How to do that?</strong></p>\n\n<p>on Your IDE Check the windows form LOGCAT </p>\n\n<p>If you cant see the logcat windows go to this path and open it </p>\n\n<pre><code>window-&gt;show view-&gt;others-&gt;Android-&gt;Logcat\n</code></pre>\n\n<p>if you are using Google-Api go to this path </p>\n\n<p><em>adb logcat > logcat.txt</em></p>\n", "title": "Unfortunately MyApp has stopped. How can I solve this?", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/23353173/unfortunately-myapp-has-stopped-how-can-i-solve-this/31378800#31378800", "question_id": 23353173, "answer_id": 31378800}, {"body": "<p>You can use any of these tools:</p>\n\n<blockquote>\n  <ol>\n  <li><p>adb logcat</p></li>\n  <li><p>adb logcat > logs.txt (you can use editors to open and search errors.)</p></li>\n  <li><p>eclipse logcat (If not visible in eclipse, Go to Windows->Show View->Others->Android->LogCat)</p></li>\n  <li>Android Debug Monitor or Android Device Monitor(type command <strong>monitor</strong> or open through UI)</li>\n  </ol>\n</blockquote>\n\n<p><a href=\"http://i.stack.imgur.com/4RoQc.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/4RoQc.png\" alt=\"enter image description here\"></a></p>\n\n<blockquote>\n  <ol start=\"5\">\n  <li>Android Studio</li>\n  </ol>\n</blockquote>\n\n<p>I suggest to use <strong>Android Debug Monitor</strong>, it is good. Because eclipse hangs when too many logs are there, and through adb logcat filter and all difficult.</p>\n", "title": "Unfortunately MyApp has stopped. How can I solve this?", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/23353173/unfortunately-myapp-has-stopped-how-can-i-solve-this/33492207#33492207", "question_id": 23353173, "answer_id": 33492207}, {"body": "<p>Use the <strong>LogCat</strong> and try to find what is causing the app to crash.</p>\n\n<p>To see Logcat if you use <strong>Android Studio</strong> then Press <strong>ALT + 6</strong>\nor</p>\n\n<p>if you use <strong>Eclipse</strong> then \n<strong>Window -> Open Perspective -> Other - LogCat</strong> </p>\n\n<p>Go to the LogCat, from the drop down menu select error. This will contain all the required information to help you debug. If that doesn't help, post the LogCat as an edit to your question and somebody will help you out.</p>\n", "title": "Unfortunately MyApp has stopped. How can I solve this?", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/23353173/unfortunately-myapp-has-stopped-how-can-i-solve-this/37235752#37235752", "question_id": 23353173, "answer_id": 37235752}, {"body": "<p>Let me share a basic Logcat analysis for when you meet a Force Close (when app stops working).</p>\n\n<p><strong>DOCS</strong></p>\n\n<p>Basic tool from Android to collect/analyse logs is the logcat. </p>\n\n<p><a href=\"https://developer.android.com/studio/command-line/logcat.html\" rel=\"nofollow\">HERE</a> is the Android's page about logcat</p>\n\n<p>If you use android Studio, you can also check this <a href=\"https://developer.android.com/studio/debug/index.html#systemLogView\" rel=\"nofollow\">LINK</a>.</p>\n\n<p><strong>Capturing</strong></p>\n\n<p>Basically, you can MANUALLY capture logcat with following command (or just check AndroidMonitor window in AndroidStudio):</p>\n\n<pre><code>adb logcat\n</code></pre>\n\n<p>There's a lot of parameters you can add to command which helps you to filter and display the message that you want... This is personal...  I always use the command below to get the message timestamp:</p>\n\n<pre><code>adb logcat -v time\n</code></pre>\n\n<p>You can redirect the output to a file and analyze it in a Text Editor.</p>\n\n<p><strong>Analyzing</strong></p>\n\n<p>If you app is Crashing, you'll get something like:</p>\n\n<pre><code>07-09 08:29:13.474 21144-21144/com.example.khan.abc D/AndroidRuntime: Shutting down VM\n07-09 08:29:13.475 21144-21144/com.example.khan.abc E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.khan.abc, PID: 21144\n    java.lang.NullPointerException: Attempt to invoke virtual method 'void android.support.v4.app.FragmentActivity.onBackPressed()' on a null object reference\n     at com.example.khan.abc.AudioFragment$1.onClick(AudioFragment.java:125)\n     at android.view.View.performClick(View.java:4848)\n     at android.view.View$PerformClick.run(View.java:20262)\n     at android.os.Handler.handleCallback(Handler.java:815)\n     at android.os.Handler.dispatchMessage(Handler.java:104)\n     at android.os.Looper.loop(Looper.java:194)\n     at android.app.ActivityThread.main(ActivityThread.java:5631)\n     at java.lang.reflect.Method.invoke(Native Method)\n     at java.lang.reflect.Method.invoke(Method.java:372)\n     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:959)\n     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:754)\n07-09 08:29:15.195 21144-21144/com.example.khan.abc I/Process: Sending signal. PID: 21144 SIG: 9\n</code></pre>\n\n<p>This part of the log shows you a lot of information:</p>\n\n<ul>\n<li>When the issue happened: <code>07-09 08:29:13.475</code></li>\n</ul>\n\n<p>It is important to check when the issue happened... You may find several errors in a log... you must be sure that you are checking the proper messages :)</p>\n\n<ul>\n<li>Which app crashed: <code>com.example.khan.abc</code></li>\n</ul>\n\n<p>This way, you know which app crashed (to be sure that you are checking the logs about your message)</p>\n\n<ul>\n<li>Which ERROR: <code>java.lang.NullPointerException</code></li>\n</ul>\n\n<p>A NULL Pointer Exception error</p>\n\n<ul>\n<li>Detailed info about the error: <code>Attempt to invoke virtual method 'void android.support.v4.app.FragmentActivity.onBackPressed()' on a null object reference</code></li>\n</ul>\n\n<p>You tried to call method <code>onBackPressed()</code> from a <code>FragmentActivity</code> object. However, that object was <code>null</code> when you did it.</p>\n\n<ul>\n<li><p>Stack Trace: Stack Trace shows you the method invocation order... Sometimes, the error happens in the calling method (and not in the called method).</p>\n\n<p>at com.example.khan.abc.AudioFragment$1.onClick(AudioFragment.java:125)</p></li>\n</ul>\n\n<p>Error happened in file <code>com.example.khan.abc.AudioFragment.java</code>, inside <code>onClick()</code> method at line: <code>125</code> (stacktrace shows the line that error happened)</p>\n\n<p>It was called by:</p>\n\n<pre><code>at android.view.View.performClick(View.java:4848)\n</code></pre>\n\n<p>Which was called by:</p>\n\n<pre><code>at android.view.View$PerformClick.run(View.java:20262)\n</code></pre>\n\n<p>which was called by:</p>\n\n<pre><code>at android.os.Handler.handleCallback(Handler.java:815)\n</code></pre>\n\n<p>etc....</p>\n\n<p><strong>Overview</strong></p>\n\n<p>This was just an overview... Not all logs are simple etc... It is just to share the idea and provide a entry-level information to you... </p>\n\n<p>I hope I could help you someway...\nRegards</p>\n", "title": "Unfortunately MyApp has stopped. How can I solve this?", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/23353173/unfortunately-myapp-has-stopped-how-can-i-solve-this/38364939#38364939", "question_id": 23353173, "answer_id": 38364939}, {"body": "<p>Don't forget to add your all activity name in manifest file...\nand run the project again.</p>\n\n<p>i hope this may help you.</p>\n", "title": "Unfortunately MyApp has stopped. How can I solve this?", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/23353173/unfortunately-myapp-has-stopped-how-can-i-solve-this/38523370#38523370", "question_id": 23353173, "answer_id": 38523370}, {"body": "<p><strong>Alternative Solution for Unfortunately App has stopped.</strong></p>\n\n<p>[![enter image description here][1]][1]</p>\n\n<p>We get this message whenever our <strong>App forced closed by any exceptions</strong> that is <strong>not handled</strong> in android or in our application.</p>\n\n<p>So we just need to take care of it when we are writing the code that will save a lots of time in tracking any type of exceptions in android.</p>\n\n<p><strong>Steps to track the exceptions in App :-</strong> </p>\n\n<p><strong>1.Open the Logcat and view the Exception.</strong></p>\n\n<p>If you cant see the logcat windows go to this path and open it</p>\n\n<pre><code>window-&gt;show view-&gt;others-&gt;Android-&gt;Logcat \n</code></pre>\n\n<p>We Use the LogCat and try to find, what is causing the app to crash.</p>\n\n<p><strong>2. Try to handle the exception</strong> which is shown in the logcat, and also check the other case's which may cause the exception .</p>\n\n<p><strong>3.</strong> <strong>Add an Uncaught Exception Handler</strong> in your Application to haldle all other exception . </p>\n\n<p><strong>I).Create a class MyExceptionHandler which implementsThread.UncaughtExceptionHandler</strong> </p>\n\n<pre><code>public class MyExceptionHandler implements\n    Thread.UncaughtExceptionHandler {\nprivate final Context myContext;\nprivate final Class&lt;?&gt; myActivityClass;\n\npublic MyExceptionHandler(Context context, Class&lt;?&gt; c) {\n\n    myContext = context;\n    myActivityClass = c;\n}\n\npublic void uncaughtException(Thread thread, Throwable exception) {\n    StringWriter stackTrace = new StringWriter();\n    exception.printStackTrace(new PrintWriter(stackTrace));\n    System.err.println(stackTrace);\n    // You can use LogCat too\n    Intent intent = new Intent(myContext, myActivityClass);\n    myContext.startActivity(intent);\n    //for restarting the Activity\n    Process.killProcess(Process.myPid());\n    System.exit(0);\n}\n</code></pre>\n\n<p>}</p>\n\n<p><strong>II).Handle exception in any class or activity or fragment.</strong></p>\n\n<pre><code>//We need to Caught the Unwanted exception whihc is not handled by Android:\n  Thread.setDefaultUncaughtExceptionHandler(new MyExceptionHandler(this, SplashScreen.class));\n</code></pre>\n\n<p>It will restart the same Activity again if the app got crashed.</p>\n", "title": "Unfortunately MyApp has stopped. How can I solve this?", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/23353173/unfortunately-myapp-has-stopped-how-can-i-solve-this/38823591#38823591", "question_id": 23353173, "answer_id": 38823591}], "creation_date": 1398729314, "score": 327, "link": "http://stackoverflow.com/questions/23353173/unfortunately-myapp-has-stopped-how-can-i-solve-this", "question_id": 23353173}, {"body": "<p>Are there any crucial differences between Oracle and Open JDK? </p>\n\n<p>For example are the garbage collection and other JVM parameters the same? Does GC work differently between the two?</p>\n", "tags": ["java", "openjdk"], "title": "Differences between Oracle JDK and Open JDK and garbage collection", "answers": [{"body": "<p>Nothing crucial. The openjdk project is mostly based on hotspot source code donated by Sun.</p>\n\n<p>Moreover, openjdk was selected to be the <a href=\"https://blogs.oracle.com/henrik/entry/moving_to_openjdk_as_the\">reference implementation for java 7</a>, and is maintained by Oracle engineers.</p>\n\n<p>There's a more detailed answer to your question <a href=\"http://stackoverflow.com/questions/11547458/what-is-differences-between-jvm-jdk-jre-openjdk\">here</a>, which links to <a href=\"https://blogs.oracle.com/henrik/entry/java_7_questions_answers\">this</a> blog post:</p>\n\n<blockquote>\n  <p><strong>Q</strong>: What is the difference between the source code found in the OpenJDK\n  repository, and the code you use to build the Oracle JDK?</p>\n  \n  <p><strong>A</strong>: It is very close - our build process for Oracle JDK releases builds \n  on OpenJDK 7 by adding just a couple of pieces, like the deployment code,\n  which includes Oracle's implementation of the Java Plugin and Java\n  WebStart, as well as some closed source third party components like a\n  graphics rasterizer, some open source third party components, like\n  Rhino, and a few bits and pieces here and there, like additional\n  documentation or third party fonts. Moving forward, our intent is to\n  open source all pieces of the Oracle JDK except those that we consider\n  commercial features such as JRockit Mission Control (not yet available\n  in Oracle JDK), and replace encumbered third party components with\n  open source alternatives to achieve closer parity between the code\n  bases.</p>\n</blockquote>\n", "title": "Differences between Oracle JDK and Open JDK and garbage collection", "tags": ["java", "openjdk"], "link": "http://stackoverflow.com/questions/22358071/differences-between-oracle-jdk-and-open-jdk-and-garbage-collection/22358234#22358234", "question_id": 22358071, "answer_id": 22358234}, {"body": "<p>Both openjdk and oracle jdk are created and maintained currently by Oracle only.</p>\n\n<p>openjdk and oracle jdk are implementations of same Java specification passed the TCK(Java Technology Certification Kit).</p>\n\n<p>Most of the vendors of JDK are written on top of openjdk by doing few tweaks  to [Mostly to replace licensed proprietary parts / replace with more performatic items that only work on specific OS] components without breaking the TCK compatibility.</p>\n\n<p>Many vendors implemented Java specification and got TCK passed. For example IBM J9 , Azul Zulu , Azul Zing , Oracle JDK.</p>\n\n<p>Almost every existing JDK is derived from openjdk.</p>\n\n<p>As suggested by many, licensing is a change between JDK's.</p>\n\n<p>Ref: <a href=\"https://en.wikipedia.org/wiki/List_of_Java_virtual_machines#Proprietary_implementations\" rel=\"nofollow\">https://en.wikipedia.org/wiki/List_of_Java_virtual_machines#Proprietary_implementations</a></p>\n", "title": "Differences between Oracle JDK and Open JDK and garbage collection", "tags": ["java", "openjdk"], "link": "http://stackoverflow.com/questions/22358071/differences-between-oracle-jdk-and-open-jdk-and-garbage-collection/38685948#38685948", "question_id": 22358071, "answer_id": 38685948}], "creation_date": 1394642192, "score": 251, "link": "http://stackoverflow.com/questions/22358071/differences-between-oracle-jdk-and-open-jdk-and-garbage-collection", "question_id": 22358071}, {"body": "<p>The following code does work how I need it to, but it's ugly, excessive or a number of other things. I've looked at formulas and attempted to write a few solutions, but I end up with a similar amount of statements.</p>\n\n<p>Is there a type of math formula that would benefit me in this instance or are 16 if statements acceptable?</p>\n\n<p>To explain the code, it's for a kind of simultaneous-turn-based game.. two players have four action buttons each and the results come from an array (0-3), but the variables 'one' &amp; 'two' can be assigned anything if this helps. The result is, 0 = neither win, 1 = p1 wins, 2 = p2 wins, 3 = both win.</p>\n\n<pre><code>public int fightMath(int one, int two) {\n\n    if(one == 0 &amp;&amp; two == 0) { result = 0; }\n    else if(one == 0 &amp;&amp; two == 1) { result = 0; }\n    else if(one == 0 &amp;&amp; two == 2) { result = 1; }\n    else if(one == 0 &amp;&amp; two == 3) { result = 2; }\n    else if(one == 1 &amp;&amp; two == 0) { result = 0; }\n    else if(one == 1 &amp;&amp; two == 1) { result = 0; }\n    else if(one == 1 &amp;&amp; two == 2) { result = 2; }\n    else if(one == 1 &amp;&amp; two == 3) { result = 1; }\n    else if(one == 2 &amp;&amp; two == 0) { result = 2; }\n    else if(one == 2 &amp;&amp; two == 1) { result = 1; }\n    else if(one == 2 &amp;&amp; two == 2) { result = 3; }\n    else if(one == 2 &amp;&amp; two == 3) { result = 3; }\n    else if(one == 3 &amp;&amp; two == 0) { result = 1; }\n    else if(one == 3 &amp;&amp; two == 1) { result = 2; }\n    else if(one == 3 &amp;&amp; two == 2) { result = 3; }\n    else if(one == 3 &amp;&amp; two == 3) { result = 3; }\n\n    return result;\n}\n</code></pre>\n", "tags": ["java", "math", "if-statement", "formula"], "title": "Too many &#39;if&#39; statements?", "answers": [{"body": "<p>Try it with <strong>switch casing.</strong>..</p>\n\n<p>Take a look <a href=\"http://www.dummies.com/how-to/content/switch-statements-in-java.html\">here</a> or <a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html\">here</a> for more info about it</p>\n\n<pre><code>switch (expression)\n{ \n  case constant:\n        statements;\n        break;\n  [ case constant-2:\n        statements;\n        break;  ] ...\n  [ default:\n        statements;\n        break;  ] ...\n}\n</code></pre>\n\n<p>You can <strong>add multiple conditions</strong>(not simultaneously) to it and even <strong>have a default option</strong> where no other cases have been satisfied.</p>\n\n<p><strong>PS: Only if one condition is to be satisfied..</strong></p>\n\n<p>If 2 conditions arise simultaneously.. I don't think switch can be used.\nBut you can reduce your code here.</p>\n\n<p><a href=\"http://stackoverflow.com/questions/5086322/java-switch-statement-multiple-cases\">Java switch statement multiple cases</a></p>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22501293#22501293", "question_id": 22501230, "answer_id": 22501293}, {"body": "<p>You may use a <a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html\" rel=\"nofollow\">switch case</a> instead of mutiple <code>if</code></p>\n\n<p>Also to mention that since you have two variables then you have to merge the two variables to use them in switch</p>\n\n<p>Check this <a href=\"http://stackoverflow.com/questions/15222918/java-switch-statement-to-handle-two-variables\">Java switch statement to handle two variables?</a></p>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22501296#22501296", "question_id": 22501230, "answer_id": 22501296}, {"body": "<p>Instead do something like this</p>\n\n<pre><code>   public int fightMath(int one, int two) {\n    return Calculate(one,two)\n\n    }\n\n\n    private int Calculate(int one,int two){\n\n    if (one==0){\n        if(two==0){\n     //return value}\n    }else if (one==1){\n   // return value as per condtiion\n    }\n\n    }\n</code></pre>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22501429#22501429", "question_id": 22501230, "answer_id": 22501429}, {"body": "<p>If you cannot come up with a formula, you can use a table for such a limited number of outcomes:</p>\n\n<pre><code>final int[][] result = new int[][] {\n  { 0, 0, 1, 2 },\n  { 0, 0, 2, 1 },\n  { 2, 1, 3, 3 },\n  { 1, 2, 3, 3 }\n};\nreturn result[one][two];\n</code></pre>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22501430#22501430", "question_id": 22501230, "answer_id": 22501430}, {"body": "<p>You can create matrix which contains results </p>\n\n<pre><code>int[][] results = {{0, 0, 1, 2}, {0, 0, 2, 1},{2, 1, 3, 3},{2, 1, 3, 3}};\n</code></pre>\n\n<p>When you want to get value you will use </p>\n\n<pre><code>public int fightMath(int one, int two) {\n  return this.results[one][two]; \n}\n</code></pre>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22501452#22501452", "question_id": 22501230, "answer_id": 22501452}, {"body": "<p>As I draw a table between one/two and the result, I see one pattern, </p>\n\n<pre><code>if(one&lt;2 &amp;&amp; two &lt;2) result=0; return;\n</code></pre>\n\n<p>The above would cut down atleast 3 if statements. I don't see a set pattern nor I am able to glean much from the code given - but if such logic can be derived, it would cut down a number of if statements.</p>\n\n<p>Hope this helps.</p>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22501779#22501779", "question_id": 22501230, "answer_id": 22501779}, {"body": "<p>To be quite honest, everyone has their own style of code. I wouldn't have thought performance would be affected too much. If you understand this better than using a switch case version, then carry on using this.</p>\n\n<p>You could nest the ifs , so potentially there would be a slight performance increase for your last if checks as it wouldn't have gone through as many if statements. But in your context of a basic java course it probably won't benefit.</p>\n\n<pre><code>else if(one == 3 &amp;&amp; two == 3) { result = 3; }\n</code></pre>\n\n<p>So, instead of...</p>\n\n<pre><code>if(one == 0 &amp;&amp; two == 0) { result = 0; }\nelse if(one == 0 &amp;&amp; two == 1) { result = 0; }\nelse if(one == 0 &amp;&amp; two == 2) { result = 1; }\nelse if(one == 0 &amp;&amp; two == 3) { result = 2; }\n</code></pre>\n\n<p>You'd do...</p>\n\n<pre><code>if(one == 0) \n{ \n    if(two == 0) { result = 0; }\n    else if(two == 1) { result = 0; }\n    else if(two == 2) { result = 1; }\n    else if(two == 3) { result = 2; }\n}\n</code></pre>\n\n<p>And just reformat it as you'd prefer.</p>\n\n<p>This doesn't make the code look better, but potentially speeds it up a little I believe.</p>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22501941#22501941", "question_id": 22501230, "answer_id": 22501941}, {"body": "<p>Thanks to @Joe Harper as I ended up using a variation of his answer. To slim it down further as 2 results per 4 were the same I slimmed it down further.</p>\n\n<p>I may come back to this at some point, but if there's no major resistance caused by multiple <code>if</code>-statements then I'll keep this for now. I will look into the table matrix and switch statement solutions further.</p>\n\n<pre><code>public int fightMath(int one, int two) {\n\n    if       (one == 0) {\n\n        if       (two == 2) {\n            result = 1;\n        } else if(two == 3) {\n            result = 2;\n        } else {\n            result = 0; }\n\n    } else if(one == 1) {\n        if       (two == 2) {\n            result = 2;\n        } else if(two == 3) {\n            result = 1;\n        } else {\n            result = 0; }\n\n    } else if(one == 2) {\n\n        if       (two == 0) {\n            result = 2;\n        } else if(two == 1) {\n            result = 1;\n        } else {\n            result = 3; }\n\n    } else if(one == 3) {\n\n        if       (two == 0) {\n            result = 1;\n        } else if(two == 1) {\n            result = 2;\n        } else {\n            result = 3; }\n    }\n\n    return result;\n}\n</code></pre>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22506289#22506289", "question_id": 22501230, "answer_id": 22506289}, {"body": "<p>Other people have already suggested my initial idea, the matrix method, but in addition to consolidating the if statements you can avoid some of what you have by making sure the arguments supplied are in the expected range and by using in-place returns (some coding standards I've seen enforce one-point-of-exit for functions, but I've found that multiple returns are very useful for avoiding arrow coding and with the prevalence of exceptions in Java there's not much point in strictly enforcing such a rule anyway as any uncaught exception thrown inside the method is a possible point of exit anyway). Nesting switch statements is a possibility, but for the small range of values you're checking here I find if statements to be more compact and not likely to result in much of a performance difference, especially if your program is turn-based rather than real-time.</p>\n\n<pre><code>public int fightMath(int one, int two) {\n    if (one &gt; 3 || one &lt; 0 || two &gt; 3 || two &lt; 0) {\n        throw new IllegalArgumentException(\"Result is undefined for arguments outside the range [0, 3]\");\n    }\n\n    if (one &lt;= 1) {\n        if (two &lt;= 1) return 0;\n        if (two - one == 2) return 1;\n        return 2; // two can only be 3 here, no need for an explicit conditional\n    }\n\n    // one &gt;= 2\n    if (two &gt;= 2) return 3;\n    if (two == 1) return 1;\n    return 2; // two can only be 0 here\n}\n</code></pre>\n\n<p>This does end up being less readable than it might otherwise be due to the irregularity of parts of the input->result mapping. I favor the matrix style instead due to its simplicity and how you can set up the matrix to make sense visually (though that is in part influenced by my memories of Karnaugh maps):</p>\n\n<pre><code>int[][] results = {{0, 0, 1, 2},\n                   {0, 0, 2, 1},\n                   {2, 1, 3, 3},\n                   {2, 1, 3, 3}};\n</code></pre>\n\n<hr>\n\n<p>Update: Given your mention of blocking/hitting, here's a more radical change to the function that utilizes propertied/attribute-holding enumerated types for inputs and the result and also modifies the result a little to account for blocking, which should result in a more readable function.</p>\n\n<pre><code>enum MoveType {\n    ATTACK,\n    BLOCK;\n}\n\nenum MoveHeight {\n    HIGH,\n    LOW;\n}\n\nenum Move {\n    // Enum members can have properties/attributes/data members of their own\n    ATTACK_HIGH(MoveType.ATTACK, MoveHeight.HIGH),\n    ATTACK_LOW(MoveType.ATTACK, MoveHeight.LOW),\n    BLOCK_HIGH(MoveType.BLOCK, MoveHeight.HIGH),\n    BLOCK_LOW(MoveType.BLOCK, MoveHeight.LOW);\n\n    public final MoveType type;\n    public final MoveHeight height;\n\n    private Move(MoveType type, MoveHeight height) {\n        this.type = type;\n        this.height = height;\n    }\n\n    /** Makes the attack checks later on simpler. */\n    public boolean isAttack() {\n        return this.type == MoveType.ATTACK;\n    }\n}\n\nenum LandedHit {\n    NEITHER,\n    PLAYER_ONE,\n    PLAYER_TWO,\n    BOTH;\n}\n\nLandedHit fightMath(Move one, Move two) {\n    // One is an attack, the other is a block\n    if (one.type != two.type) {\n        // attack at some height gets blocked by block at same height\n        if (one.height == two.height) return LandedHit.NEITHER;\n\n        // Either player 1 attacked or player 2 attacked; whoever did\n        // lands a hit\n        if (one.isAttack()) return LandedHit.PLAYER_ONE;\n        return LandedHit.PLAYER_TWO;\n    }\n\n    // both attack\n    if (one.isAttack()) return LandedHit.BOTH;\n\n    // both block\n    return LandedHit.NEITHER;\n}\n</code></pre>\n\n<p>You don't even have to change the function itself if you want to add blocks/attacks of more heights, just the enums; adding additional types of moves will probably require modification of the function, though. Also, <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html\"><code>EnumSet</code>s</a> might be more extensible than using extra enums as properties of the main enum, e.g. <code>EnumSet&lt;Move&gt; attacks = EnumSet.of(Move.ATTACK_HIGH, Move.ATTACK_LOW, ...);</code> and then <code>attacks.contains(move)</code> rather than <code>move.type == MoveType.ATTACK</code>, though using <code>EnumSet</code>s will probably be slightly slower than direct equals checks.</p>\n\n<hr>\n\n<p>For the case where a successful block results in a counter, you can replace <code>if (one.height == two.height) return LandedHit.NEITHER;</code> with</p>\n\n<pre><code>if (one.height == two.height) {\n    // Successful block results in a counter against the attacker\n    if (one.isAttack()) return LandedHit.PLAYER_TWO;\n    return LandedHit.PLAYER_ONE;\n}\n</code></pre>\n\n<p>Also, replacing some of the <code>if</code> statements with usage of the ternary operator (<code>boolean_expression ? result_if_true : result_if_false</code>) could make the code more compact (for example, the code in the preceding block would become <code>return one.isAttack() ? LandedHit.PLAYER_TWO : LandedHit.PLAYER_ONE;</code>), but that can lead to harder-to-read oneliners so I wouldn't recommend it for more complex branching.</p>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22507048#22507048", "question_id": 22501230, "answer_id": 22507048}, {"body": "<p>Why not using an array?</p>\n\n<p>I will start from the beginning. I see a pattern, the values goes from 0 to 3 and you want catch all possible values. This is your table:</p>\n\n<pre><code>0 &amp; 0 = 0\n0 &amp; 1 = 0\n0 &amp; 2 = 1\n0 &amp; 3 = 2\n1 &amp; 0 = 0\n1 &amp; 1 = 0\n1 &amp; 2 = 2\n1 &amp; 3 = 1\n2 &amp; 0 = 2\n2 &amp; 1 = 1\n2 &amp; 2 = 3\n2 &amp; 3 = 3\n3 &amp; 0 = 2\n3 &amp; 1 = 1\n3 &amp; 2 = 3\n3 &amp; 3 = 3\n</code></pre>\n\n<p>when we look at this same table binary we see the following results:</p>\n\n<pre><code>00 &amp; 00 = 00\n00 &amp; 01 = 00\n00 &amp; 10 = 01\n00 &amp; 11 = 10\n01 &amp; 00 = 00\n01 &amp; 01 = 00\n01 &amp; 10 = 10\n01 &amp; 11 = 01\n10 &amp; 00 = 10\n10 &amp; 01 = 01\n10 &amp; 10 = 11\n10 &amp; 11 = 11\n11 &amp; 00 = 10\n11 &amp; 01 = 01\n11 &amp; 10 = 11\n11 &amp; 11 = 11\n</code></pre>\n\n<p>Now maybe you already see some pattern but when I combine value one and two I see that you're using all values 0000, 0001, 0010,..... 1110 and 1111. Now let's combine value one and two to make a single 4 bit integer. </p>\n\n<pre><code>0000 = 00\n0001 = 00\n0010 = 01\n0011 = 10\n0100 = 00\n0101 = 00\n0110 = 10\n0111 = 01\n1000 = 10\n1001 = 01\n1010 = 11\n1011 = 11\n1100 = 10\n1101 = 01\n1110 = 11\n1111 = 11\n</code></pre>\n\n<p>When we translate this back into decimal values we see an very possible array of values where the one and two combined could be used as index:</p>\n\n<pre><code>0 = 0\n1 = 0\n2 = 1\n3 = 2\n4 = 0\n5 = 0\n6 = 2\n7 = 1\n8 = 2\n9 = 1\n10 = 3\n11 = 3\n12 = 2\n13 = 1\n14 = 3\n15 = 3\n</code></pre>\n\n<p>The array is then {0, 0, 1, 2, 0, 0, 2, 1, 2, 1, 3, 3, 2, 1, 3, 3} which where it's index is simply one and two combined.</p>\n\n<p>I'm not a Java programmer but you can get rid of all if statements and just write it down as something like this:</p>\n\n<pre><code>int[] myIntArray = {0, 0, 1, 2, 0, 0, 2, 1, 2, 1, 3, 3, 2, 1, 3, 3};\nresult = myIntArray[one * 4 + two]; \n</code></pre>\n\n<p>Don't know if a bit shift of 2 is faster than multiplication. But it could be worth the try. </p>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22508836#22508836", "question_id": 22501230, "answer_id": 22508836}, {"body": "<p>This uses a little bit of bitmagic (you're already doing it by holding two bits of information (low/high &amp; attack/block) in a single integer):</p>\n\n<p><s>I haven't run it, only typed it here, please doublecheck.</s> The idea surely works.\n<b>EDIT:</b> It is now tested for every input, works fine.</p>\n\n<pre><code>public int fightMath(int one, int two) {\n    if(one&lt;2 &amp;&amp; two&lt;2){ //both players blocking\n        return 0; // nobody hits\n    }else if(one&gt;1 &amp;&amp; two&gt;1){ //both players attacking\n        return 3; // both hit\n    }else{ // some of them attack, other one blocks\n        int different_height = (one ^ two) &amp; 1; // is 0 if they are both going for the same height - i.e. blocker wins, and 1 if height is different, thus attacker wins\n        int attacker = one&gt;1?1:0; // is 1 if one is the attacker, two is the blocker, and 0 if one is the blocker, two is the attacker\n        return (attacker ^ different_height) + 1;\n    }\n}\n</code></pre>\n\n<p>Or should I suggest to separate the two bits of information into separate variables?\nCode based mostly on bit operations like this above is usually really hard to maintain.</p>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22509356#22509356", "question_id": 22501230, "answer_id": 22509356}, {"body": "<p>I don't like any of the solutions presented except for JAB's.  <strong>None of the others make it easy to read the code and understand what is being computed</strong>. </p>\n\n<p>Here's how I would write this code -- I only know C#, not Java, but you get the picture:</p>\n\n<pre><code>const bool t = true;\nconst bool f = false;\nstatic readonly bool[,] attackResult = {\n    { f, f, t, f }, \n    { f, f, f, t },\n    { f, t, t, t },\n    { t, f, t, t }\n};\n[Flags] enum HitResult \n{ \n    Neither = 0,\n    PlayerOne = 1,\n    PlayerTwo = 2,\n    Both = PlayerOne | PlayerTwo\n}\nstatic HitResult ResolveAttack(int one, int two)\n{\n    return \n        (attackResult[one, two] ? HitResult.PlayerOne : HitResult.Neither) | \n        (attackResult[two, one] ? HitResult.PlayerTwo : HitResult.Neither);\n}    \n</code></pre>\n\n<p>Now it is much more clear what is being computed here: this emphasizes that we are computing who gets hit by what attack, and returning both results.</p>\n\n<p>However this could be even better; that Boolean array is somewhat opaque. I like the table lookup approach but I would be inclined to write it in such a way that made it clear what the intended game semantics were. That is, rather than \"an attack of zero and a defense of one results in no hit\", instead find a way to make the code more clearly imply \"a low kick attack and a low block defense results in no hit\".  <strong>Make the code reflect the business logic of the game.</strong></p>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22511214#22511214", "question_id": 22501230, "answer_id": 22511214}, {"body": "<p>Since your data set is so small, you can compress everything into 1 long integer and turn it into a formula</p>\n\n<pre><code>public int fightMath(int one,int two)\n{\n   return (int)(0xF9F66090L &gt;&gt; (2*(one*4 + two)))%4;\n}\n</code></pre>\n\n<h3>More bitwise variant:</h3>\n\n<p>This makes use of the fact everything is a multiple of 2</p>\n\n<pre><code>public int fightMath(int one,int two)\n{\n   return (0xF9F66090 &gt;&gt; ((one &lt;&lt; 3) | (two &lt;&lt; 1))) &amp; 0x3;\n}\n</code></pre>\n\n<h3>The Origin of the Magic Constant</h3>\n\n<p>What can I say? The world needs magic, sometimes the possibility of something calls for its creation. </p>\n\n<p>The essence of the function that solves OP's problem is a map from 2 numbers (one,two), domain {0,1,2,3} to the range {0,1,2,3}.  Each of the answers has approached how to implement that map.</p>\n\n<p>Also, you can see in a number of the answers a restatement of the problem as a map of 1 2-digit base 4 number N(one,two) where one is digit 1, two is digit 2, and N = 4*one + two; N = {0,1,2,...,15} -- sixteen different values, that's important. The output of the function is one 1-digit base 4 number {0,1,2,3} -- 4 different values, also important.</p>\n\n<p>Now, a 1-digit base 4 number can be expressed as a 2-digit base 2 number;  {0,1,2,3} = {00,01,10,11}, and so each output can be encoded with only 2 bits.  From above, there are only 16 different outputs possible, so 16*2 = 32 bits is all that is necessary to encode the entire map; this can all fit into 1 integer.</p>\n\n<p>The constant M is an encoding of the map m where m(0) is encoded in bits M[0:1], m(1) is encoded in bits M[2:3], and m(n) is encoded in bits M[n*2:n*2+1].</p>\n\n<p>All that remains is indexing and returning the right part of the constant, in this case you can shift M right 2*N times and take the 2 least significant bits, that is (M >> 2*N) &amp; 0x3.  The expressions (one &lt;&lt; 3) and (two &lt;&lt; 1) are just multiplying things out while noting that 2*x = x &lt;&lt; 1 and 8*x = x &lt;&lt; 3.</p>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22511429#22511429", "question_id": 22501230, "answer_id": 22511429}, {"body": "<p>I don't have experience with Java so there might be some typos. Please consider the code as pseudo-code.</p>\n\n<p>I'd go with a simple switch. For that, you'd need a single number evaluation. However, for this case, since <code>0 &lt;= one &lt; 4 &lt;= 9</code> and <code>0 &lt;= two &lt; 4 &lt;= 9</code>, we can convert both ints to a simple int by multiplying <code>one</code> by 10 and adding <code>two</code>. Then use a switch in the resulting number like this:</p>\n\n<pre><code>public int fightMath(int one, int two) {\n    // Convert one and two to a single variable in base 10\n    int evaluate = one * 10 + two;\n\n    switch(evaluate) {\n        // I'd consider a comment in each line here and in the original code\n        // for clarity\n        case 0: result = 0; break;\n        case 1: result = 0; break;\n        case 1: result = 0; break;\n        case 2: result = 1; break;\n        case 3: result = 2; break;\n        case 10: result = 0; break;\n        case 11: result = 0; break;\n        case 12: result = 2; break;\n        case 13: result = 1; break;\n        case 20: result = 2; break;\n        case 21: result = 1; break;\n        case 22: result = 3; break;\n        case 23: result = 3; break;\n        case 30: result = 1; break;\n        case 31: result = 2; break;\n        case 32: result = 3; break;\n        case 33: result = 3; break;\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>There's another short method that I just want to point out as a theoretical code. However I wouldn't use it because it has some extra complexity that you don't normally want to deal with. The extra complexity comes from the <em>base 4</em>, because the counting is 0, 1, 2, 3, 10, 11, 12, 13, 20, ...</p>\n\n<pre><code>public int fightMath(int one, int two) {\n    // Convert one and two to a single variable in base 4\n    int evaluate = one * 4 + two;\n\n    allresults = new int[] { 0, 0, 1, 2, 0, 0, 2, 1, 2, 1, 3, 3, 1, 2, 3, 3 };\n\n    return allresults[evaluate];\n}\n</code></pre>\n\n<p>Really just additional note, in case I'm missing something from Java. In PHP I'd do:</p>\n\n<pre><code>function fightMath($one, $two) {\n    // Convert one and two to a single variable in base 4\n    $evaluate = $one * 10 + $two;\n\n    $allresults = array(\n         0 =&gt; 0,  1 =&gt; 0,  2 =&gt; 1,  3 =&gt; 2,\n        10 =&gt; 0, 11 =&gt; 0, 12 =&gt; 2, 13 =&gt; 1,\n        20 =&gt; 2, 21 =&gt; 1, 22 =&gt; 3, 23 =&gt; 3,\n        30 =&gt; 1, 31 =&gt; 2, 32 =&gt; 3, 33 =&gt; 3 );\n\n    return $allresults[$evaluate];\n}\n</code></pre>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22513458#22513458", "question_id": 22501230, "answer_id": 22513458}, {"body": "<p>Since you prefer nested <code>if</code> conditionals , here's another way.<br>\nNote that it doesn't use the <code>result</code> member and it doesn't change any state.</p>\n\n<pre><code>public int fightMath(int one, int two) {\n    if (one == 0) {\n      if (two == 0) { return 0; }\n      if (two == 1) { return 0; }\n      if (two == 2) { return 1; }\n      if (two == 3) { return 2; }\n    }   \n    if (one == 1) {\n      if (two == 0) { return 0; }\n      if (two == 1) { return 0; }\n      if (two == 2) { return 2; }\n      if (two == 3) { return 1; }\n    }\n    if (one == 2) {\n      if (two == 0) { return 2; }\n      if (two == 1) { return 1; }\n      if (two == 2) { return 3; }\n      if (two == 3) { return 3; }\n    }\n    if (one == 3) {\n      if (two == 0) { return 1; }\n      if (two == 1) { return 2; }\n      if (two == 2) { return 3; }\n      if (two == 3) { return 3; }\n    }\n    return DEFAULT_RESULT;\n}\n</code></pre>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22515309#22515309", "question_id": 22501230, "answer_id": 22515309}, {"body": "<p>I hope I understand the logic correctly. How about something like:</p>\n\n<pre><code>public int fightMath (int one, int two)\n{\n    int oneHit = ((one == 3 &amp;&amp; two != 1) || (one == 2 &amp;&amp; two != 0)) ? 1 : 0;\n    int twoHit = ((two == 3 &amp;&amp; one != 1) || (two == 2 &amp;&amp; one != 0)) ? 2 : 0;\n\n    return oneHit+twoHit;\n}\n</code></pre>\n\n<p>Checking one hit high or one hit low is not blocked and the same for player two. </p>\n\n<p>Edit: Algorithm was not fully understood, \"hit\" awarded when blocking which I did not realize (Thx elias):</p>\n\n<pre><code>public int fightMath (int one, int two)\n{\n    int oneAttack = ((one == 3 &amp;&amp; two != 1) || (one == 2 &amp;&amp; two != 0)) ? 1 : (one &gt;= 2) ? 2 : 0;\n    int twoAttack = ((two == 3 &amp;&amp; one != 1) || (two == 2 &amp;&amp; one != 0)) ? 2 : (two &gt;= 2) ? 1 : 0;\n\n    return oneAttack | twoAttack;\n}\n</code></pre>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22522197#22522197", "question_id": 22501230, "answer_id": 22522197}, {"body": "<p>Let's see what we know</p>\n\n<p>1: your answers are symmetrical for P1 (player one) and P2 (player two). This makes sense for a fighting game but is also something you can take advantage of to improve your logic.</p>\n\n<p>2: 3 beats 0 beats 2 beats 1 beats 3. The only cases not covered by these cases are combinations of 0 vs 1 and 2 vs 3. To put it another way the unique victory table looks like this: 0 beats 2, 1 beats 3, 2 beats 1, 3 beats 0. </p>\n\n<p>3: If 0/1 go up against each other then there's a hitless draw but if 2/3 go up against each then both hit</p>\n\n<p>First, let us build a one-way function telling us if we won:</p>\n\n<pre><code>// returns whether we beat our opponent\npublic boolean doesBeat(int attacker, int defender) {\n  int[] beats = {2, 3, 1, 0};\n  return defender == beats[attacker];\n}\n</code></pre>\n\n<p>We can then use this function to compose the final result:</p>\n\n<pre><code>// returns the overall fight result\n// bit 0 = one hits\n// bit 1 = two hits\npublic int fightMath(int one, int two)\n{\n  // Check to see whether either has an outright winning combo\n  if (doesBeat(one, two))\n    return 1;\n\n  if (doesBeat(two, one))\n    return 2;\n\n  // If both have 0/1 then its hitless draw but if both have 2/3 then they both hit.\n  // We can check this by seeing whether the second bit is set and we need only check\n  // one's value as combinations where they don't both have 0/1 or 2/3 have already\n  // been dealt with \n  return (one &amp; 2) ? 3 : 0;\n}\n</code></pre>\n\n<p>While this is arguably more complex and probably slower than the table lookup offered in many answers I believe it is a superior method because it actually encapsulates the logic of your code and describes it to anyone who's reading your code. I think this makes it a better implementation.</p>\n\n<p>(It's been a while since I did any Java so apologies if the syntax is off, hopefully it is still intelligible if I've got it slightly wrong)</p>\n\n<p>By the way, 0-3 clearly <em>mean</em> something; they're not arbitrary values so it would help to name them.</p>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22531932#22531932", "question_id": 22501230, "answer_id": 22531932}, {"body": "<p>The first thing that occurred to me was essentially the same answer given by Francisco Presencia, but optimized somewhat:</p>\n\n<pre><code>public int fightMath(int one, int two)\n{\n    switch (one*10 + two)\n    {\n    case  0:\n    case  1:\n    case 10:\n    case 11:\n        return 0;\n    case  2:\n    case 13:\n    case 21:\n    case 30:\n        return 1;\n    case  3:\n    case 12:\n    case 20:\n    case 31:\n        return 2;\n    case 22:\n    case 23:\n    case 32:\n    case 33:\n        return 3;\n    }\n}\n</code></pre>\n\n<p>You could further optimize it by making the last case (for 3) the default case:</p>\n\n<pre><code>    //case 22:\n    //case 23:\n    //case 32:\n    //case 33:\n    default:\n        return 3;\n</code></pre>\n\n<p>The advantage of this method is that it is easier to see which values for <code>one</code> and <code>two</code> correspond to which return values than some of the other suggested methods.</p>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22541274#22541274", "question_id": 22501230, "answer_id": 22541274}, {"body": "<p>I personally like to cascade ternary operators:</p>\n\n<pre><code>int result = condition1\n    ? result1\n    : condition2\n    ? result2\n    : condition3\n    ? result3\n    : resultElse;\n</code></pre>\n\n<p>But in your case, you can use:</p>\n\n<pre><code>final int[] result = new int[/*16*/] {\n    0, 0, 1, 2,\n    0, 0, 2, 1,\n    2, 1, 3, 3,\n    1, 2, 3, 3\n};\n\npublic int fightMath(int one, int two) {\n    return result[one*4 + two];\n}\n</code></pre>\n\n<p>Or, you can notice a pattern in bits:</p>\n\n<pre><code>one   two   result\n\nsection 1: higher bits are equals =&gt;\nboth result bits are equals to that higher bits\n\n00    00    00\n00    01    00\n01    00    00\n01    01    00\n10    10    11\n10    11    11\n11    10    11\n11    11    11\n\nsection 2: higher bits are different =&gt;\nlower result bit is inverse of lower bit of 'two'\nhigher result bit is lower bit of 'two'\n\n00    10    01\n00    11    10\n01    10    10\n01    11    01\n10    00    10\n10    01    01\n11    00    01\n11    01    10\n</code></pre>\n\n<p>So you can use magic:</p>\n\n<pre><code>int fightMath(int one, int two) {\n    int b1 = one &amp; 2, b2 = two &amp; 2;\n    if (b1 == b2)\n        return b1 | (b1 &gt;&gt; 1);\n\n    b1 = two &amp; 1;\n\n    return (b1 &lt;&lt; 1) | (~b1);\n}\n</code></pre>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22543548#22543548", "question_id": 22501230, "answer_id": 22543548}, {"body": "<p>A good point would be to define the rules as text, you can easier derive the correct formula then. This is extracted from laalto's nice array representation:</p>\n\n<pre><code>{ 0, 0, 1, 2 },\n{ 0, 0, 2, 1 },\n{ 2, 1, 3, 3 },\n{ 1, 2, 3, 3 }\n</code></pre>\n\n<p>And here we go with some general comments, but you should describe them in rule terms:</p>\n\n<pre><code>if(one&lt;2) // left half\n{\n    if(two&lt;2) // upper left half\n    {\n        result = 0; //neither hits\n    }\n    else // lower left half\n    {\n        result = 1+(one+two)%2; //p2 hits if sum is even\n    }\n}\nelse // right half\n{\n    if(two&lt;2) // upper right half\n    {\n        result = 1+(one+two+1)%2; //p1 hits if sum is even\n    }\n    else // lower right half\n    {\n        return 3; //both hit\n    }\n}\n</code></pre>\n\n<p>You could of course crunch this down to less code, but it is generally a good idea to understand what you code rather than finding a compact solution.</p>\n\n<pre><code>if((one&lt;2)&amp;&amp;(two&lt;2)) result = 0; //top left\nelse if((one&gt;1)&amp;&amp;(two&gt;1)) result = 3; //bottom right\nelse result = 1+(one+two+((one&gt;1)?1:0))%2; //no idea what that means\n</code></pre>\n\n<p>Some explanation on the complicated p1/p2 hits would be great, looks interesting!</p>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22547226#22547226", "question_id": 22501230, "answer_id": 22547226}, {"body": "<pre><code>((two&amp;2)*(1+((one^two)&amp;1))+(one&amp;2)*(2-((one^two)&amp;1)))/2\n</code></pre>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22553284#22553284", "question_id": 22501230, "answer_id": 22553284}, {"body": "<p>Here's a fairly concise version, similar to <a href=\"http://stackoverflow.com/a/22507048/474189\">JAB's response</a>. This utilises a map to store which moves triumph over others.</p>\n\n<pre><code>public enum Result {\n  P1Win, P2Win, BothWin, NeitherWin;\n}\n\npublic enum Move {\n  BLOCK_HIGH, BLOCK_LOW, ATTACK_HIGH, ATTACK_LOW;\n\n  static final Map&lt;Move, List&lt;Move&gt;&gt; beats = new EnumMap&lt;Move, List&lt;Move&gt;&gt;(\n      Move.class);\n\n  static {\n    beats.put(BLOCK_HIGH, new ArrayList&lt;Move&gt;());\n    beats.put(BLOCK_LOW, new ArrayList&lt;Move&gt;());\n    beats.put(ATTACK_HIGH, Arrays.asList(ATTACK_LOW, BLOCK_LOW));\n    beats.put(ATTACK_LOW, Arrays.asList(ATTACK_HIGH, BLOCK_HIGH));\n  }\n\n  public static Result compare(Move p1Move, Move p2Move) {\n    boolean p1Wins = beats.get(p1Move).contains(p2Move);\n    boolean p2Wins = beats.get(p2Move).contains(p1Move);\n\n    if (p1Wins) {\n      return (p2Wins) ? Result.BothWin : Result.P1Win;\n    }\n    if (p2Wins) {\n      return (p1Wins) ? Result.BothWin : Result.P2Win;\n    }\n\n    return Result.NeitherWin;\n  }\n} \n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>System.out.println(Move.compare(Move.ATTACK_HIGH, Move.BLOCK_LOW));\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>P1Win\n</code></pre>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22615213#22615213", "question_id": 22501230, "answer_id": 22615213}, {"body": "<p>I'd use a Map, either a HashMap or a TreeMap</p>\n\n<p>Especially if the parameters are not on the form <code>0 &lt;= X &lt; N</code></p>\n\n<p>Like a set of random positive integers ..</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>public class MyMap\n{\n    private TreeMap&lt;String,Integer&gt; map;\n\n    public MyMap ()\n    {\n        map = new TreeMap&lt;String,Integer&gt; ();\n    }\n\n    public void put (int key1, int key2, Integer value)\n    {\n        String key = (key1+\":\"+key2);\n\n        map.put(key, new Integer(value));\n    }\n\n    public Integer get (int key1, int key2)\n    {\n        String key = (key1+\":\"+key2);\n\n        return map.get(key);\n    }\n}\n</code></pre>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22652252#22652252", "question_id": 22501230, "answer_id": 22652252}, {"body": "<p><strong>The shortest and still readable solution:</strong></p>\n\n<pre><code>static public int fightMath(int one, int two)\n{\n    if (one &lt; 2 &amp;&amp; two &lt; 2) return 0;\n    if (one &gt; 1 &amp;&amp; two &gt; 1) return 3;\n    int n = (one + two) % 2;\n    return one &lt; two ? 1 + n : 2 - n;\n}\n</code></pre>\n\n<p><strong>or even shorter:</strong></p>\n\n<pre><code>static public int fightMath(int one, int two)\n{\n    if (one / 2 == two / 2) return (one / 2) * 3;\n    return 1 + (one + two + one / 2) % 2;\n}\n</code></pre>\n\n<p>Doesn't contain any \"magic\" numbers ;)\nHope it helps.</p>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22661955#22661955", "question_id": 22501230, "answer_id": 22661955}, {"body": "<ol>\n<li>Use constants or enums to make the code more readable</li>\n<li>Try to split the code into more functions</li>\n<li>Try to use the symmetry of the problem</li>\n</ol>\n\n<p>Here is a suggestion how this could look like, but using an ints here is still kind of ugly:</p>\n\n<pre><code>static final int BLOCK_HIGH = 0;\nstatic final int BLOCK_LOW = 1;\nstatic final int ATTACK_HIGH = 2;\nstatic final int ATTACK_LOW = 3;\n\npublic static int fightMath(int one, int two) {\n    boolean player1Wins = handleAttack(one, two);\n    boolean player2Wins = handleAttack(two, one);\n    return encodeResult(player1Wins, player2Wins); \n}\n\n\n\nprivate static boolean handleAttack(int one, int two) {\n     return one == ATTACK_HIGH &amp;&amp; two != BLOCK_HIGH\n        || one == ATTACK_LOW &amp;&amp; two != BLOCK_LOW\n        || one == BLOCK_HIGH &amp;&amp; two == ATTACK_HIGH\n        || one == BLOCK_LOW &amp;&amp; two == ATTACK_LOW;\n\n}\n\nprivate static int encodeResult(boolean player1Wins, boolean player2Wins) {\n    return (player1Wins ? 1 : 0) + (player2Wins ? 2 : 0);\n}\n</code></pre>\n\n<p>It would be nicer to use a structured type for the input and the output. The input actually has two fields: the position and the type (block or attack). The output also has two fields: player1Wins and player2Wins. Encoding this into a single integer makes it harder to read the code.</p>\n\n<pre><code>class PlayerMove {\n    PlayerMovePosition pos;\n    PlayerMoveType type;\n}\n\nenum PlayerMovePosition {\n    HIGH,LOW\n}\n\nenum PlayerMoveType {\n    BLOCK,ATTACK\n}\n\nclass AttackResult {\n    boolean player1Wins;\n    boolean player2Wins;\n\n    public AttackResult(boolean player1Wins, boolean player2Wins) {\n        this.player1Wins = player1Wins;\n        this.player2Wins = player2Wins;\n    }\n}\n\nAttackResult fightMath(PlayerMove a, PlayerMove b) {\n    return new AttackResult(isWinningMove(a, b), isWinningMove(b, a));\n}\n\nboolean isWinningMove(PlayerMove a, PlayerMove b) {\n    return a.type == PlayerMoveType.ATTACK &amp;&amp; !successfulBlock(b, a)\n            || successfulBlock(a, b);\n}\n\nboolean successfulBlock(PlayerMove a, PlayerMove b) {\n    return a.type == PlayerMoveType.BLOCK \n            &amp;&amp; b.type == PlayerMoveType.ATTACK \n            &amp;&amp; a.pos == b.pos;\n}\n</code></pre>\n\n<p>Unfortunately, Java is not very good at expressing those kinds of data-types.</p>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22734753#22734753", "question_id": 22501230, "answer_id": 22734753}, {"body": "<p><code>static int val(int i, int u){\n    int q = (i &amp; 1) ^ (u &amp; 1);\n    return ((i &gt;&gt; 1) &lt;&lt; (1 ^ q))|((u &gt;&gt; 1) &lt;&lt; q);\n}</code></p>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/22851859#22851859", "question_id": 22501230, "answer_id": 22851859}, {"body": "<p>why don't you use <a href=\"http://www.informit.com/articles/article.aspx?p=1398607&amp;seqNum=2\" rel=\"nofollow\">Strategy pattern</a> to avoid lots of <code>if</code> <code>else</code> statements </p>\n", "title": "Too many &#39;if&#39; statements?", "tags": ["java", "math", "if-statement", "formula"], "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements/30595116#30595116", "question_id": 22501230, "answer_id": 30595116}], "creation_date": 1395221095, "score": 244, "link": "http://stackoverflow.com/questions/22501230/too-many-if-statements", "question_id": 22501230}, {"body": "<p>Have project created by maven integration in eclipse. All work fine, but in work space in all jsp files have this:</p>\n\n<pre><code>The superclass \"javax.servlet.http.HttpServlet\" was not found on the Java Build Path\n</code></pre>\n\n<p>to first string where place:</p>\n\n<pre><code>&lt;%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\"\n    pageEncoding=\"UTF-8\"%&gt;\n</code></pre>\n\n<p>When create basic dynamic web project and JSP in - all fine, no errors.</p>\n", "tags": ["java", "eclipse", "jsp", "maven", "web"], "title": "The superclass &quot;javax.servlet.http.HttpServlet&quot; was not found on the Java Build Path", "answers": [{"body": "<p>Include <code>servlet-api-3.1.jar</code> in your dependencies.</p>\n\n<ul>\n<li><p><strong>Maven</strong></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n    &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n    &lt;version&gt;3.1.0&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre></li>\n<li><p><strong>Gradle</strong></p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>configurations {\n    provided\n}\nsourceSets {\n    main { compileClasspath += configurations.provided }\n}\ndependencies {\n    provided 'javax.servlet:javax.servlet-api:3.1.0'\n}\n</code></pre></li>\n</ul>\n", "title": "The superclass &quot;javax.servlet.http.HttpServlet&quot; was not found on the Java Build Path", "tags": ["java", "eclipse", "jsp", "maven", "web"], "link": "http://stackoverflow.com/questions/22756153/the-superclass-javax-servlet-http-httpservlet-was-not-found-on-the-java-build/22756202#22756202", "question_id": 22756153, "answer_id": 22756202}, {"body": "<p>Select Project->Properties->Project Facets->Target Runtimes->VmWare Server\nWrked for me.</p>\n", "title": "The superclass &quot;javax.servlet.http.HttpServlet&quot; was not found on the Java Build Path", "tags": ["java", "eclipse", "jsp", "maven", "web"], "link": "http://stackoverflow.com/questions/22756153/the-superclass-javax-servlet-http-httpservlet-was-not-found-on-the-java-build/24102549#24102549", "question_id": 22756153, "answer_id": 24102549}, {"body": "<p>Project->Properties->Target Runtimes->Apache Tomcat</p>\n\n<p>worked for me.   There is no Target Runtimes under Facets.  (I'm on Juno.)</p>\n", "title": "The superclass &quot;javax.servlet.http.HttpServlet&quot; was not found on the Java Build Path", "tags": ["java", "eclipse", "jsp", "maven", "web"], "link": "http://stackoverflow.com/questions/22756153/the-superclass-javax-servlet-http-httpservlet-was-not-found-on-the-java-build/25064342#25064342", "question_id": 22756153, "answer_id": 25064342}, {"body": "<p>As this is unanswered, I am guessing something other than Maven dependencies are wrong with the ops build.</p>\n\n<p>While not using Maven, I have the same problem from time to time when re-creating my development environment from svn, and I always forget why and have to figure it out. Unfortunately it seems this is a problem with Eclipse. </p>\n\n<p>I am able to remove all such errors from once working projects by picking just one of the dynamic web projects, or just tomcat dependent projects, and move a dependency in the build order. This seems to force all projects to rebuild properly and all of the errors are then resolved.</p>\n\n<p>Right click on a web project, select \"build Path\" -> \"Configure Build Path\".\nGo to the tab \"Order and Export\", then pick a library or jar entry and move it up or down. I used the JRE System Library and moved it to the top.</p>\n\n<p>Click OK, and all that red goes away!</p>\n", "title": "The superclass &quot;javax.servlet.http.HttpServlet&quot; was not found on the Java Build Path", "tags": ["java", "eclipse", "jsp", "maven", "web"], "link": "http://stackoverflow.com/questions/22756153/the-superclass-javax-servlet-http-httpservlet-was-not-found-on-the-java-build/25065054#25065054", "question_id": 22756153, "answer_id": 25065054}, {"body": "<p>If you are not using Maven, just drop the javax.servlet-api.jar in your project lib folder.</p>\n", "title": "The superclass &quot;javax.servlet.http.HttpServlet&quot; was not found on the Java Build Path", "tags": ["java", "eclipse", "jsp", "maven", "web"], "link": "http://stackoverflow.com/questions/22756153/the-superclass-javax-servlet-http-httpservlet-was-not-found-on-the-java-build/25108272#25108272", "question_id": 22756153, "answer_id": 25108272}, {"body": "<p>Add a runtime first and select project properties then check server name from 'Runtimes' tab as shown in image.</p>\n\n<p><img src=\"http://i.stack.imgur.com/U46s9.png\" alt=\"Select runtime from Project Facets as shown in image\"></p>\n", "title": "The superclass &quot;javax.servlet.http.HttpServlet&quot; was not found on the Java Build Path", "tags": ["java", "eclipse", "jsp", "maven", "web"], "link": "http://stackoverflow.com/questions/22756153/the-superclass-javax-servlet-http-httpservlet-was-not-found-on-the-java-build/25266076#25266076", "question_id": 22756153, "answer_id": 25266076}, {"body": "<p><strong>Include servlet-api.jar from your server lib folder.</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/3KBnz.png\" alt=\"enter image description here\"></p>\n\n<p><strong>Do this step</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/TA1v4.png\" alt=\"enter image description here\"></p>\n\n<p><strong>What is it?</strong></p>\n\n<p>The servlet-api jar is a library which contains the interfaces and classes of the Servlet API specification. The servlet-api jar contains only the interface (the API) of the Servlet Specification, so you can use it to develop your web application.</p>\n\n<p><strong>Where can you get it?</strong></p>\n\n<p>It is provided at the link below:</p>\n\n<p><a href=\"http://download.oracle.com/otndocs/jcp/servlet-3.0-fr-eval-oth-JSpec/\" rel=\"nofollow\">http://download.oracle.com/otndocs/jcp/servlet-3.0-fr-eval-oth-JSpec/</a></p>\n\n<p><strong>Where it is contained/bundled</strong></p>\n\n<p>Servlet-api.jar is part of the Java EE download so you can develop your web applications (you could not compile your <code>FirstServlet</code> class if the Java EE would not contain it).</p>\n\n<p>Servlet containers (like Tomcat, JBoss, GlassFish etc.) also contain the servlet-api.jar else they would not be able to run your web application, and moreover they also contain the implementation of the interfaces that are part of the Servlet API.</p>\n\n<p>The name is not always the same though, and it might not even exist as a separate jar, the Servlet API classes might be bundled in another jar.</p>\n\n<p>You can however download a separate jar file containing only the Servlet API if you just want to develop a web application for a Servlet container, or if you want to create/write your own Servlet API implementation. Look at here:</p>\n\n<p><a href=\"http://download.oracle.com/otndocs/jcp/servlet-3.0-fr-eval-oth-JSpec/\" rel=\"nofollow\">http://download.oracle.com/otndocs/jcp/servlet-3.0-fr-eval-oth-JSpec/</a></p>\n\n<p><strong>Portability</strong></p>\n\n<p>You can compile your web application if you have the Servlet API, no matter where it comes from. After you compiled your web app, you can optionally pack it into a WAR file (WAR=Web ARchive) which is simply a zip file containing your static files, your compiled java classes and configuration files like <code>web.xml</code> etc. And you will be able to run your compiled web application in any Servlet containers.</p>\n", "title": "The superclass &quot;javax.servlet.http.HttpServlet&quot; was not found on the Java Build Path", "tags": ["java", "eclipse", "jsp", "maven", "web"], "link": "http://stackoverflow.com/questions/22756153/the-superclass-javax-servlet-http-httpservlet-was-not-found-on-the-java-build/25904823#25904823", "question_id": 22756153, "answer_id": 25904823}, {"body": "<p>Project->Properties->Target Runtimes->Apache Tomcat</p>\n\n<p>worked for me. There is no Target Runtimes under Facets. (I'm on Luna.)</p>\n", "title": "The superclass &quot;javax.servlet.http.HttpServlet&quot; was not found on the Java Build Path", "tags": ["java", "eclipse", "jsp", "maven", "web"], "link": "http://stackoverflow.com/questions/22756153/the-superclass-javax-servlet-http-httpservlet-was-not-found-on-the-java-build/26122621#26122621", "question_id": 22756153, "answer_id": 26122621}, {"body": "<p>Just add this dependencies to your pom.xml:</p>\n\n<pre><code> &lt;dependency&gt;\n    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n    &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n    &lt;version&gt;3.0.1&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n  &lt;/dependency&gt;\n\n  &lt;dependency&gt;\n   &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n   &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;\n   &lt;version&gt;2.2.1&lt;/version&gt;\n   &lt;scope&gt;provided&lt;/scope&gt;\n  &lt;/dependency&gt;\n</code></pre>\n", "title": "The superclass &quot;javax.servlet.http.HttpServlet&quot; was not found on the Java Build Path", "tags": ["java", "eclipse", "jsp", "maven", "web"], "link": "http://stackoverflow.com/questions/22756153/the-superclass-javax-servlet-http-httpservlet-was-not-found-on-the-java-build/28683062#28683062", "question_id": 22756153, "answer_id": 28683062}, {"body": "<p>Adding the tomcat server in the server runtime will do the job :</p>\n\n<p>Project Properties-> Java Build Path-> Add Library -> Select \"Server Runtime\" from the list-> Next->Select \"Apache Tomcat\"-> Finish</p>\n", "title": "The superclass &quot;javax.servlet.http.HttpServlet&quot; was not found on the Java Build Path", "tags": ["java", "eclipse", "jsp", "maven", "web"], "link": "http://stackoverflow.com/questions/22756153/the-superclass-javax-servlet-http-httpservlet-was-not-found-on-the-java-build/28735245#28735245", "question_id": 22756153, "answer_id": 28735245}, {"body": "<p><strong>in case of jboss......</strong>\nright click on project-->build java path-->add external jars . then browse to...\njboss-folder-->common-->lib-->servlet-api.jar </p>\n\n<p>.\n.\nclick ok , refresh project &amp; run it .....</p>\n", "title": "The superclass &quot;javax.servlet.http.HttpServlet&quot; was not found on the Java Build Path", "tags": ["java", "eclipse", "jsp", "maven", "web"], "link": "http://stackoverflow.com/questions/22756153/the-superclass-javax-servlet-http-httpservlet-was-not-found-on-the-java-build/29053564#29053564", "question_id": 22756153, "answer_id": 29053564}, {"body": "<p><strong>Adding the tomcat server in the server runtime will do the job :</strong></p>\n\n<pre><code>Project Properties-&gt; Target Runtimes-&gt;  Select your Server from the list  \"JBoss Runtime \"-&gt; Finish\n</code></pre>\n\n<blockquote>\n  <p>in case of Apache you can select Apache Runtime.</p>\n</blockquote>\n\n<p><img src=\"http://i.stack.imgur.com/9yBnq.png\" alt=\"enter image description here\"></p>\n", "title": "The superclass &quot;javax.servlet.http.HttpServlet&quot; was not found on the Java Build Path", "tags": ["java", "eclipse", "jsp", "maven", "web"], "link": "http://stackoverflow.com/questions/22756153/the-superclass-javax-servlet-http-httpservlet-was-not-found-on-the-java-build/30161602#30161602", "question_id": 22756153, "answer_id": 30161602}, {"body": "<p>and if nothing works by whatever reason build it from command line - </p>\n\n<p>ant -Dj2ee.server.home=D:\\apache-tomcat-8.0.23 clean</p>\n\n<p>ant -Dj2ee.server.home=D:\\apache-tomcat-8.0.23 compile</p>\n\n<p>ant -Dj2ee.server.home=D:\\apache-tomcat-8.0.23 dist</p>\n", "title": "The superclass &quot;javax.servlet.http.HttpServlet&quot; was not found on the Java Build Path", "tags": ["java", "eclipse", "jsp", "maven", "web"], "link": "http://stackoverflow.com/questions/22756153/the-superclass-javax-servlet-http-httpservlet-was-not-found-on-the-java-build/30592708#30592708", "question_id": 22756153, "answer_id": 30592708}, {"body": "<p>These steps can really help you:</p>\n\n<p>1- If you didn't install any server you have to do these step:</p>\n\n<pre><code>Window &gt; Preferences &gt; Expend Server &gt; Runtime environment &gt; \nAdd &gt; choose a name than choose apache server path that you already installed on your pc. \n(you can press download and install too )  &gt; Finish &gt; OK\n</code></pre>\n\n<p>Ref#   <a href=\"http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jst.server.ui.doc.user%2Ftopics%2Ftwtomprf.html\" rel=\"nofollow\">for more info click here</a></p>\n\n<p>2- Add the tomcat server:</p>\n\n<pre><code>Project Properties-&gt; Java Build Path-&gt; Add Library -&gt; Select \"Server Runtime\" from the list-&gt; Next-&gt;Select \"Apache Tomcat\"-&gt; Finish\n</code></pre>\n\n<p>Ref#  <a href=\"http://stackoverflow.com/questions/26936848/the-superclass-javax-servlet-http-httpservlet-was-not-found-on-the-java-build?answertab=active#tab-top\">This answer</a></p>\n\n<p>I hope I could help you :))</p>\n", "title": "The superclass &quot;javax.servlet.http.HttpServlet&quot; was not found on the Java Build Path", "tags": ["java", "eclipse", "jsp", "maven", "web"], "link": "http://stackoverflow.com/questions/22756153/the-superclass-javax-servlet-http-httpservlet-was-not-found-on-the-java-build/31876250#31876250", "question_id": 22756153, "answer_id": 31876250}, {"body": "<p><strong>For Ant Project</strong> :</p>\n\n<p>Make sure, you have servlet-api.jar in lib folder.</p>\n\n<p><strong>For Maven Project :</strong></p>\n\n<p>Make sure, you have dependency added in POM.xml</p>\n\n<p>\n  javax.servlet\n  javax.servlet-api\n  3.1.0\n  provided\n</p>\n\n<p><strong>Other way to do is</strong>: Update the project facets to pick up the right server.</p>\n\n<p>Check this box in this location:-\nProject->Properties->Target Runtimes->Apache Tomcat (Any server)</p>\n", "title": "The superclass &quot;javax.servlet.http.HttpServlet&quot; was not found on the Java Build Path", "tags": ["java", "eclipse", "jsp", "maven", "web"], "link": "http://stackoverflow.com/questions/22756153/the-superclass-javax-servlet-http-httpservlet-was-not-found-on-the-java-build/33632479#33632479", "question_id": 22756153, "answer_id": 33632479}], "creation_date": 1396252116, "score": 233, "link": "http://stackoverflow.com/questions/22756153/the-superclass-javax-servlet-http-httpservlet-was-not-found-on-the-java-build", "question_id": 22756153}, {"body": "<p>Pictures:</p>\n\n<p><img src=\"http://i.imgur.com/J6SWWBb.png\" alt=\"Command Prompt showing versions\">\n<em>Command Prompt showing versions</em></p>\n\n<p><img src=\"http://i.imgur.com/Xj8mCUp.png\" alt=\"Picture of error\">\n<em>Picture of error</em></p>\n\n<h2>Hello.java</h2>\n\n<pre><code>import java.applet.Applet;\nimport java.awt.*;\npublic class Hello extends Applet {\n   // Java applet to draw \"Hello World\"\n   public void paint (Graphics page) {\n      page.drawString (\"Hello World!\", 50, 50);\n   }\n}\n</code></pre>\n\n<h2>Hello.html</h2>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;HTML&gt;\n&lt;HEAD&gt;\n&lt;TITLE&gt;HelloWorld Applet&lt;/TITLE&gt;\n&lt;/HEAD&gt;\n&lt;BODY&gt;\n&lt;APPLET CODE=\"Hello.class\" WIDTH=300 HEIGHT=150&gt;\n&lt;/APPLET&gt;\n&lt;/BODY&gt;\n&lt;/HTML&gt;\n</code></pre>\n\n<h2>Error</h2>\n\n<pre><code>Hello : Unsupported major.minor version 52.0\n</code></pre>\n\n<p>Does anyone know what the problem may be?</p>\n", "tags": ["java", "applet", "version", "unsupported-class-version"], "title": "Unsupported major.minor version 52.0", "answers": [{"body": "<p>The <em>smart</em> way to fix that problem is to compile using the latest SDK and use the <a href=\"http://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html#BHCJDCID\">cross compilation options</a> when compiling.  To use the options <em>completely correctly</em> requires the <code>rt.jar</code> of a JRE (<strong>not JDK</strong>) of the target version.</p>\n\n<p>Given the nature of that applet, it looks like it could be compiled for use with Java 1.1.</p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/22496754#22496754", "question_id": 22489398, "answer_id": 22496754}, {"body": "<p>I had the same problem... an JDK and Plug -In version conflict.</p>\n\n<p>I compiled using 1.8 ... the latest one, and that message started to appear.\nSo i've searched for the JRE 7 (<a href=\"http://www.oracle.com/technetwork/java/javase/downloads/server-jre7-downloads-1931105.html\">http://www.oracle.com/technetwork/java/javase/downloads/server-jre7-downloads-1931105.html</a>).. and installed it... again...\nNow 1.8 and 1.7 in the same computer.</p>\n\n<p>Using Netbeans , and compiling, targeting to version 1.7, fixed my problem.</p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/23958989#23958989", "question_id": 22489398, "answer_id": 23958989}, {"body": "<p>If you're using NetBeans IDE right click on the project and  choose <em>Properties</em> go to <em>sources</em>, and you can change the Source/Binary Format to a lower jdk. </p>\n\n<p><img src=\"http://i.stack.imgur.com/6O2jL.png\" alt=\"enter image description here\"></p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/25870667#25870667", "question_id": 22489398, "answer_id": 25870667}, {"body": "<p>You will need to change your compiler compliance level back to 1.7 in your IDE. This can be done in the prefences settings of your IDE for example in Eclipse go to Windows ---> Prefences then select Java and expand it then select Compiler and change the compliance level to 1.7. Am sure this will work from there</p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/26890767#26890767", "question_id": 22489398, "answer_id": 26890767}, {"body": "<p>This occurred to me when I installed fresh Java 1.8 but left old command line interpreter open. It had old path and kept on executing the app with Java 1.7 whereas project was already built with Java 1.8.</p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/28465838#28465838", "question_id": 22489398, "answer_id": 28465838}, {"body": "<p><strong>You must run and compile your application with the same version of Java.</strong></p>\n\n<p>If you're using Eclipse you should do 2 things:</p>\n\n<ol>\n<li><p>In Eclipse, click on <em>\"Window > Preferences\"</em>, and in the window that appears, on the left side, under <em>\"Java\"</em>, click on <em>\"Installed JREs\"</em>, click on <em>\"Add...\"</em> and navigate to the folder that contains the JDK. </p></li>\n<li><p>Right-click on your project and click on <em>\"Properties\"</em>, in the window that appears, on the left side, click on <em>\"Java Compiler\"</em> and uncheck <em>\"Use compliance from execution environment  on the Java Build Path\"</em>, this allows you to choose in the the list <em>\"Compiler compilance level\"</em> the same version that you set in the previous step.</p></li>\n</ol>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/29176500#29176500", "question_id": 22489398, "answer_id": 29176500}, {"body": "<p>You may want to check your Run Configurations setting if you're using Eclipse Luna and already completed all steps mentioned above.</p>\n\n<p>There could be several possibilities that cause this error. The root cause is mismatch of the project require compilation in JDK1.8/JRE8 while the environment compiler is JDK1.7/JRE7.</p>\n\n<p>You can check <a href=\"http://chinteongtan.blogspot.com/2015/04/java-runtime-exception-unsupported.html\" rel=\"nofollow\">my blog post</a> to go through all your settings are correct.</p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/29641359#29641359", "question_id": 22489398, "answer_id": 29641359}, {"body": "<p>You need to use jdk1.7.0 rather than jdk1.8.0. </p>\n\n<p>To make sure it, you need to delete jdk1.8.0 on your computer. </p>\n\n<p>If you use mac, you need to delete: </p>\n\n<p>/Library/Java/JavaVirtualMachines/jdk.jdk </p>\n\n<p>/Library/PreferencePanes/JavaControlPanel.prefPane </p>\n\n<p>/Library/Internet Plug-Ins/JavaAppletPlugin.plugin </p>\n\n<p>Then, you need to reinstall jdk1.7.0, and you will succeed to generate the .jar file.</p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/30638542#30638542", "question_id": 22489398, "answer_id": 30638542}, {"body": "<p>I had Java 1.7 &amp; 1.8 installed (with SBT 2.4 that requires Java 1.8).\nEven though my project was linked to Java 1.8, I had to change the JAVA_HOME environment variable to point 1.8.\nFinally, problem solved.</p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/30897713#30897713", "question_id": 22489398, "answer_id": 30897713}, {"body": "<p>None of these answers helped me, but I found a solution.<br>\nI had a webproject used in Wildfly 8.2, built with Maven, source and target was set to 1.8 on maven-compiler-plugin, as well as all Eclipse and Maven settings were set to Java 1.8.\nThe problem was that Wildfly 8.2 cannot handle Java 1.8, so I had to set everything to 1.7 and it worked.</p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/30955042#30955042", "question_id": 22489398, "answer_id": 30955042}, {"body": "<p>You need to upgrade your java version to java 8.</p>\n\n<p>Downloading Latest Java Archive</p>\n\n<p>Download latest Java SE Development Kit 8 release from its official download page or use following commands to download from shell.</p>\n\n<p>For 64Bit</p>\n\n<pre><code> # cd /opt/\n\n # wget --no-cookies --no-check-certificate --header \"Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2F; oraclelicense=accept-securebackup-cookie\" \"http://download.oracle.com/otn-pub/java/jdk/8u51-b16/jdk-8u51-linux-x64.tar.gz\"\n\n # tar xzf jdk-8u51-linux-x64.tar.gz\n</code></pre>\n\n<p>For 32Bit</p>\n\n<pre><code> # cd /opt/\n\n # wget --no-cookies --no-check-certificate --header \"Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2F; oraclelicense=accept-securebackup-cookie\" \"http://download.oracle.com/otn-pub/java/jdk/8u51-b16/jdk-8u51-linux-i586.tar.gz\"\n\n  # tar xzf jdk-8u51-linux-i586.tar.gz\n</code></pre>\n\n<p>Note: If Above wget command doesn\u2019t not work for you watch this example video to download java source archive using terminal.</p>\n\n<p>Install Java with Alternatives</p>\n\n<p>After extracting archive file use alternatives command to install it. alternatives command is available in chkconfig package.</p>\n\n<pre><code> # cd /opt/jdk1.8.0_51/\n\n # alternatives --install /usr/bin/java java /opt/jdk1.8.0_51/bin/java 2\n\n # alternatives --config java\n</code></pre>\n\n<p>At this point JAVA 8 has been successfully installed on your system. We also recommend to setup javac and jar commands path using alternatives</p>\n\n<pre><code> # alternatives --install /usr/bin/jar jar /opt/jdk1.8.0_51/bin/jar 2\n\n # alternatives --install /usr/bin/javac javac /opt/jdk1.8.0_51/bin/javac 2\n\n # alternatives --set jar /opt/jdk1.8.0_51/bin/jar\n\n # alternatives --set javac /opt/jdk1.8.0_51/bin/javac \n</code></pre>\n\n<p>Check Installed Java Version</p>\n\n<p>Check the installed version of java using following command.</p>\n\n<pre><code>root@tecadmin ~# java -version\n\njava version \"1.8.0_51\"\nJava(TM) SE Runtime Environment (build 1.8.0_51-b16)\nJava HotSpot(TM) 64-Bit Server VM (build 25.51-b03, mixed mode)\n</code></pre>\n\n<p>Configuring Environment Variables</p>\n\n<p>Most of java based application\u2019s uses environment variables to work. Set the Java environment variables using following commands</p>\n\n<p>Setup JAVA_HOME Variable</p>\n\n<pre><code> # export JAVA_HOME=/opt/jdk1.8.0_51\nSetup JRE_HOME Variable\n\n # export JRE_HOME=$JAVA_HOME/jre\nSetup PATH Variable\n\n # export PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH\n</code></pre>\n\n<p>Note that the change to the PATH variable put the new Java bin folders first so that they override any existing java/bins in the path.  It is a bit sloppy to leave two java/bin folders in your path so you should be advised to clean those up as a separate task.</p>\n\n<p>Also put all above environment variables in /etc/environment file for auto loading on system boot.</p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/32178062#32178062", "question_id": 22489398, "answer_id": 32178062}, {"body": "<p>Thanks everyone for solution.</p>\n\n<p>I could solve my same problem using below solution.</p>\n\n<p>In my project, I added jar which were created in Java8. And my project was referring to JRE 7. When i changed project JRE to 8. My problem solved.</p>\n\n<p>Steps:\nIn eclipse, right click on project name in project explorer > build path > Libraries > click on jre version > click edit > installed JRE > add > standerd VM > select JRE home click-path (path should be localePath\\java\\jdk1.8.0_25\\jre) > provide name > save > select same JRE for project > finish > ok\nRefresh/build project once > try to run your java file. it should work.</p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/32268949#32268949", "question_id": 22489398, "answer_id": 32268949}, {"body": "<p>If you are using eclipse, make sure your Project->properties->java build path->libraries->JRE system library matches to your project requirements. (As shown in the image)\n<a href=\"http://i.stack.imgur.com/VrV5R.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/VrV5R.png\" alt=\"enter image description here\"></a></p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/32677660#32677660", "question_id": 22489398, "answer_id": 32677660}, {"body": "<p>If you are using Intellij go to Project Structure (Ctrl+Alt+Shift+S), and you can change the your projects JDK.</p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/33214427#33214427", "question_id": 22489398, "answer_id": 33214427}, {"body": "<p>Just want to add this. I had this problem today. Adjusted the settings in my project, rebuilt, and same problem. I had (incorrectly) assumed that changing the settings in my project (Eclipse) would cause the projects on which my project depends to be recompiled also. \nAdjusting the settings to all of the projects up the dependency tree solved the problem.</p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/34199900#34199900", "question_id": 22489398, "answer_id": 34199900}, {"body": "<p>The issue is because of Java version mismatch. Referring to the <a href=\"https://en.wikipedia.org/wiki/Java_class_file\">Wikipedia Java Class Reference</a> :</p>\n\n<ul>\n<li>J2SE 8 = 52</li>\n<li>J2SE 7 = 51 </li>\n<li>J2SE 6.0 = 50  </li>\n<li>J2SE 5.0 = 49</li>\n<li>JDK 1.4 = 48</li>\n<li>JDK 1.3 = 47</li>\n<li>JDK 1.2 = 46</li>\n<li>JDK 1.1 = 45</li>\n</ul>\n\n<p>These are the reported major numbers. The error regarding the unsupported major.minor version is because <strong>during compile time you are using a higher JDK and a lower JDK during runtime</strong>.</p>\n\n<p>Thus, the 'major.minor version 52.0' error is possibly because the jar is compiled in jdk 1.8, but you are trying to run it in jdk 1.7 environment. To solve this, it's always better to have the jdk and jre pointed to the same version.</p>\n\n<p>In Intellij, </p>\n\n<ol start=\"2\">\n<li>Go to Maven Settings -> Maven -> Importing. Set the JDK for importer to 1.8</li>\n<li>Go to Maven Settings -> Maven -> Runner. Set the JRE to 1.8</li>\n<li>Go to File -> Project Structure -> SDKs. Make sure the JDK home path is set to 1.8</li>\n</ol>\n\n<p>Restart Intellij</p>\n\n<p>Another approach which might help is by instructing IDEA which JDK version to start up with.</p>\n\n<p>Go to : <strong>/Applications/IntelliJ\\ IDEA\\ 15\\ CE.app/Contents/Info.plist</strong>\nand replace the JVM version with :</p>\n\n<pre><code>&lt;key&gt;JVMVersion&lt;/key&gt;\n&lt;string&gt;1.8*&lt;/string&gt;\n</code></pre>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/35866015#35866015", "question_id": 22489398, "answer_id": 35866015}, {"body": "<p>If you have problem in Android Studio and you have installed Android N, change Android rendering version with older one and the problem will disappear.</p>\n\n<p><a href=\"http://i.stack.imgur.com/mn0Nk.png\"><img src=\"http://i.stack.imgur.com/mn0Nk.png\" alt=\"enter image description here\"></a></p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/35917239#35917239", "question_id": 22489398, "answer_id": 35917239}, {"body": "<p>I ran into this issue in Eclipse on Mac OS X Mavericks. I tried many answers on SO .. finally, after a full day I <strong><em>installed a fresh version of the Android SDK (and updated Eclipse Project->Properties->Android to use the new path)</em></strong>.  I had to get SDK updates, but only pulling down only those updates I thought were necessary, avoiding API I was not working with those APIs (like like Wear and TV) .. <strong><em>and that did the trick</em></strong>.  Apparently, it seems I had corrupted my SDK somewhere along the way.  </p>\n\n<p>btw .. I did see the error re-surface with one project in my workspace, but it seemed related to an import of appcompat-7, which I was not using.  After rm-ing that project, so far haven't seen the issue resurface.</p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/36076755#36076755", "question_id": 22489398, "answer_id": 36076755}, {"body": "<p>If you are using Linux and you have different versions of Java installed, use the following command:</p>\n\n<p>sudo update-alternatives --config java</p>\n\n<p>This will give a quick way of switching between the Java versions installed on the system. By choosing Java 8 i will solve your problem</p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/36411559#36411559", "question_id": 22489398, "answer_id": 36411559}, {"body": "<p>It happens when you compile your projects on <code>higher version</code> of java(say jdk 1.8) and then run it on a <code>lower version</code> (say jdk 1.7).</p>\n\n<p>If you have JRE-1.7 library in your project path then ,</p>\n\n<p>1.Right click on <em>project</em></p>\n\n<p>2.Go to <em>Properties</em> </p>\n\n<p>3.Select <em>Project Facets</em></p>\n\n<p>4.Find Java in rows and then choose <em>version</em> (say 1.7) if using JRE-1.7</p>\n\n<p>5.Click <em>Apply</em> and run your project.</p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/36950742#36950742", "question_id": 22489398, "answer_id": 36950742}, {"body": "<p>Just go to <a href=\"http://java.com/en/download/\" rel=\"nofollow\">http://java.com/en/download/</a> and update your version of JRE</p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/37058272#37058272", "question_id": 22489398, "answer_id": 37058272}, {"body": "<p>all you need to do to solve the problem is... to make sure your version of java is same for both compile and running. no matter what tools or ide you are using.</p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/37078605#37078605", "question_id": 22489398, "answer_id": 37078605}, {"body": "<p>Unsupported major.minor version 52.0 comes when you are trying to run a class compiled using Java 1.8 compiler into a lower JRE version e.g. JRE 1.7 or JRE 1.6. Simplest way to fix this error is install the latest Java release i.e. Java 8 and run your program.</p>\n\n<p>Read more: <a href=\"http://javarevisited.blogspot.com/2015/05/fixing-unsupported-majorminor-version.html#ixzz4AVD4Evgv\" rel=\"nofollow\">http://javarevisited.blogspot.com/2015/05/fixing-unsupported-majorminor-version.html#ixzz4AVD4Evgv</a></p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/37609396#37609396", "question_id": 22489398, "answer_id": 37609396}, {"body": "<p>If your JDK version are right. Another reason may cause this error is that your Android Studio is in a low version but your gradle version are too high. <code>Upgrade your IDE to a newer version</code> may help this.</p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/37894047#37894047", "question_id": 22489398, "answer_id": 37894047}, {"body": "<p>Upgrade your Andorra version to JDK 1.8\nThis is a version miss match that your compiler is looking for java version 8 and you have java version 7.\nYou can run an app build in version 7 in version 8, but you can't do vice versa because when it comes to higher levels ,versions are embedded with more features, enhancements rather than previous versions\n<a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\" rel=\"nofollow\">Download JDK version from this link</a></p>\n\n<p>And set your JDK path for this</p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/38144697#38144697", "question_id": 22489398, "answer_id": 38144697}, {"body": "<p>I solved mine by removing old versions of JRE and installed JRE 8</p>\n", "title": "Unsupported major.minor version 52.0", "tags": ["java", "applet", "version", "unsupported-class-version"], "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0/38291448#38291448", "question_id": 22489398, "answer_id": 38291448}], "creation_date": 1395171648, "score": 222, "link": "http://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0", "question_id": 22489398}, {"body": "<p>I've looked everywhere and can't find a solid answer. According to the documentation, Java throws a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/StackOverflowError.html\">java.lang.StackOverflowError</a> error under the following circumstance:</p>\n\n<blockquote>\n  <p>Thrown when a stack overflow occurs because an application recurses too deeply.</p>\n</blockquote>\n\n<p>But this raises two questions:</p>\n\n<ul>\n<li>Aren't there other ways for a stack overflow to occur, not only through recursion?</li>\n<li>Does the StackOverflowError happen before the JVM actually overflows the stack or after?</li>\n</ul>\n\n<p>To elaborate on the second question:</p>\n\n<p>When Java throws the StackOverflowError, can you safely assume that the stack did not write into the heap? If you shrink the size of the stack or heap in a try/catch on a function that throws a stack overflow, can you continue working? Is this documented anywhere?</p>\n\n<p>Answers I am not looking for:</p>\n\n<ul>\n<li>A StackOverflow happens because of bad recursion.</li>\n<li>A StackOverflow happens when the heap meets the stack.</li>\n</ul>\n", "tags": ["java", "jvm", "stack-overflow"], "title": "What actually causes a Stack Overflow error?", "answers": [{"body": "<p>It seems you're thinking that a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/StackOverflowError.html\">stackoverflow error</a> is like a buffer overflow exception in native programs, when there is a risk of writing into memory that had not been allocated for the buffer, and thus to corrupt some other memory locations. It's not the case at all.</p>\n\n<p>JVM has a given memory allocated for each stack of each thread, and if an attempt to call a method happens to fill this memory, JVM throws an error. Just like it would do if you were trying to write at index N of an array of length N. No memory corruption can happen. The stack can not write into the heap.</p>\n\n<p>A StackOverflowError is to the stack what an OutOfMemoryError is to the heap: it simply signals that there is no more memory available.</p>\n\n<h2><a href=\"http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.3\">Description from Virtual Machine Errors (\u00a76.3)</a></h2>\n\n<blockquote>\n  <p><strong>StackOverflowError</strong>: The Java Virtual Machine implementation has run out of stack space for a thread, typically because the thread is doing an unbounded number of recursive invocations as a result of a fault in the executing program.</p>\n</blockquote>\n", "title": "What actually causes a Stack Overflow error?", "tags": ["java", "jvm", "stack-overflow"], "link": "http://stackoverflow.com/questions/22182669/what-actually-causes-a-stack-overflow-error/22182774#22182774", "question_id": 22182669, "answer_id": 22182774}, {"body": "<p>A StackOverflow happens when a function call is made and the stack is full.</p>\n\n<p>Just like an ArrayOutOfBoundException. It cannot corrupt anything, in fact it is very possible to catch it and recover from it.</p>\n\n<p>It usually happens as the result of an uncontrolled recursion, but it can also be caused by simply have a very deep stack of functions call.</p>\n", "title": "What actually causes a Stack Overflow error?", "tags": ["java", "jvm", "stack-overflow"], "link": "http://stackoverflow.com/questions/22182669/what-actually-causes-a-stack-overflow-error/22182830#22182830", "question_id": 22182669, "answer_id": 22182830}, {"body": "<blockquote>\n  <p>Aren't there other ways for a stack overflow to occur, not only through recursion?</p>\n</blockquote>\n\n<p>Sure. Just keep calling methods, without ever returning. You'll need a lot of methods, though, unless you allow recursion. Actually, it doesn't make a difference: a stack frame is a stack frame, whether it is one of a recursive method or not is the same.</p>\n\n<p>The answer to your second question is: The stackoverflow is detected when the JVM tries to allocate the stack frame for the next call, and finds it is not possible. So, nothing will be overwritten.</p>\n", "title": "What actually causes a Stack Overflow error?", "tags": ["java", "jvm", "stack-overflow"], "link": "http://stackoverflow.com/questions/22182669/what-actually-causes-a-stack-overflow-error/22182840#22182840", "question_id": 22182669, "answer_id": 22182840}, {"body": "<p>There is no \"StackOverFlowException\". What you mean is \"StackOverFlowError\".</p>\n\n<p>Yes you can continue working if you catch it because the stack is cleared when you do that but that would be a bad and ugly option.</p>\n\n<p>When exactly the error is thrown ? - When you call a method and the JVM verifies if there is enough memory to do it. Of course, the error is thrown if it's not possible.</p>\n\n<ul>\n<li>No, that is the only way you can get that error: getting your stack full. But not only through recursion, also calling methods that infinitely call other methods. It's a very specific error so no.</li>\n<li>It is thrown before the stack is full, exactly when you verify it. Where would you put the data if there is no space available ? Overriding others ? Naah.</li>\n</ul>\n", "title": "What actually causes a Stack Overflow error?", "tags": ["java", "jvm", "stack-overflow"], "link": "http://stackoverflow.com/questions/22182669/what-actually-causes-a-stack-overflow-error/22183172#22183172", "question_id": 22182669, "answer_id": 22183172}, {"body": "<blockquote>\n  <p>Aren't there other ways for a stack overflow to occur, not only\n  through recursion?</p>\n</blockquote>\n\n<p>Challenge accepted :) <code>StackOverflowError</code> <s>without recursion</s> (challenge failed, see comments):</p>\n\n<pre><code>public class Test\n{\n    final static int CALLS = 710;\n\n    public static void main(String[] args)\n    {\n        final Functor[] functors = new Functor[CALLS];\n        for (int i = 0; i &lt; CALLS; i++)\n        {\n            final int finalInt = i;\n            functors[i] = new Functor()\n            {\n                @Override\n                public void fun()\n                {\n                    System.out.print(finalInt + \" \");\n                    if (finalInt != CALLS - 1)\n                    {\n                        functors[finalInt + 1].fun();\n                    }\n                }\n            };\n        }\n        // Let's get ready to ruuuuuuumble!\n        functors[0].fun(); // Sorry, couldn't resist to not comment in such moment. \n    }\n\n    interface Functor\n    {\n        void fun();\n    }\n}\n</code></pre>\n\n<p>Compile with standard <code>javac Test.java</code> and run with <code>java -Xss104k Test 2&gt; out</code>. After that, <code>more out</code> will tell you:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.StackOverflowError\n</code></pre>\n\n<hr>\n\n<h2>Second try.</h2>\n\n<p>Now the idea is even simpler. Primitives in Java can be stored on the stack. So, let's declare a lot of doubles, like <code>double a1,a2,a3...</code>. This script can write, compile and run <a href=\"http://pastebin.com/TAV0rMC2\" rel=\"nofollow\">the code</a> for us:</p>\n\n<pre><code>#!/bin/sh\n\nVARIABLES=4000\nNAME=Test\nFILE=$NAME.java\nSOURCE=\"public class $NAME{public static void main(String[] args){double \"\nfor i in $(seq 1 $VARIABLES);\ndo\n    SOURCE=$SOURCE\"a$i,\"\ndone\nSOURCE=$SOURCE\"b=0;System.out.println(b);}}\"\necho $SOURCE &gt; $FILE\njavac $FILE\njava -Xss104k $NAME\n</code></pre>\n\n<p>And... I got something unexpected:</p>\n\n<pre><code>#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00007f4822f9d501, pid=4988, tid=139947823249152\n#\n# JRE version: 6.0_27-b27\n# Java VM: OpenJDK 64-Bit Server VM (20.0-b12 mixed mode linux-amd64 compressed oops)\n# Derivative: IcedTea6 1.12.6\n# Distribution: Ubuntu 10.04.1 LTS, package 6b27-1.12.6-1ubuntu0.10.04.2\n# Problematic frame:\n# V  [libjvm.so+0x4ce501]  JavaThread::last_frame()+0xa1\n#\n# An error report file with more information is saved as:\n# /home/adam/Desktop/test/hs_err_pid4988.log\n#\n# If you would like to submit a bug report, please include\n# instructions how to reproduce the bug and visit:\n#   https://bugs.launchpad.net/ubuntu/+source/openjdk-6/\n#\nAborted\n</code></pre>\n\n<p>It's 100% repetitive. This is related to your second question:</p>\n\n<blockquote>\n  <p>Does the StackOverflowError happen before the JVM actually overflows\n  the stack or after?</p>\n</blockquote>\n\n<p>So, in case of OpenJDK 20.0-b12 we can see that JVM firstly exploded. But it seems like a bug, maybe someone can confirm that in comments please, because I'm not sure. Should I report this? Maybe it's already fixed in some newer version... According to <a href=\"http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.5.2\" rel=\"nofollow\">JVM specification link</a> (given by <a href=\"http://stackoverflow.com/users/571407/jb-nizet\">JB Nizet</a> in a comment) JVM should throw a <code>StackOverflowError</code>, not die:</p>\n\n<blockquote>\n  <p>If the computation in a thread requires a larger Java Virtual Machine\n  stack than is permitted, the Java Virtual Machine throws a\n  StackOverflowError.</p>\n</blockquote>\n\n<hr>\n\n<h2>Third try.</h2>\n\n<pre><code>public class Test {\n    Test test = new Test();\n\n    public static void main(String[] args) {\n        new Test();\n    }\n}\n</code></pre>\n\n<p>We want to create new <code>Test</code> object. So, its (implicit) constructor will be called. But, just before that, all the members of <code>Test</code> are initialized. So, <code>Test test = new Test()</code> is executed first...</p>\n\n<p>We want to create new <code>Test</code> object...</p>\n\n<p>Update: Bad luck, this is recursion, I asked question about that <a href=\"http://stackoverflow.com/questions/27551338/is-instantiating-a-member-of-class-test-within-class-test-a-recursion/27554794#27554794\">here</a>.</p>\n", "title": "What actually causes a Stack Overflow error?", "tags": ["java", "jvm", "stack-overflow"], "link": "http://stackoverflow.com/questions/22182669/what-actually-causes-a-stack-overflow-error/22183286#22183286", "question_id": 22182669, "answer_id": 22183286}, {"body": "<p>There are two main places that things can be stored in Java. The first is the Heap, that's used for dynamically allocated objects. <code>new</code>.</p>\n\n<p>In addition each running thread gets its own stack, and it gets an amount of memory allocated to that stack.</p>\n\n<p>When you call a method then data is pushed into the stack to record the method call, the parameters being passed in, and any local variables being allocated. A method with five local variables and three parameters will use more stack space than a <code>void doStuff()</code> method with no local variables will.</p>\n\n<p>The main advantages of the stack are that there is no memory fragmentation, everything for one method call is allocated on the top of the stack, and that returning from methods is easy. To return from a method you just unwind the stack back to the previous method, set any value needed for the return value and you are done.</p>\n\n<p>Because the stack is a fixed size per thread, (note that the Java Spec does not require a fixed size, but most JVM implementations at the time of writing use a fixed size) and because space on the stack is needed whenever you make a method call hopefully it should now be clear why it can run out and what can cause it to run out. There isn't a fixed number of method calls, there isn't anything specific about recursion, you get the exception which you try to call a method and there isn't enough memory.</p>\n\n<p>Of course the size of stacks is set high enough that it is highly unlikely to happen in regular code. In recursive code though it can be quite easy to recurse to huge depths, and at that point you start running into this error.</p>\n", "title": "What actually causes a Stack Overflow error?", "tags": ["java", "jvm", "stack-overflow"], "link": "http://stackoverflow.com/questions/22182669/what-actually-causes-a-stack-overflow-error/22193393#22193393", "question_id": 22182669, "answer_id": 22193393}, {"body": "<blockquote>\n  <p>But this raises two questions:</p>\n  \n  <ol>\n  <li>Aren't there other ways for a stack overflow to occur, not only through recursion? </li>\n  <li>Does the StackOverflowError happen before the JVM actually overflows the stack or after?</li>\n  </ol>\n</blockquote>\n\n<ol>\n<li><p>It can also occur when we are Allocating size greater than stack's limit (for eg. <code>int x[10000000];</code>).</p></li>\n<li><p>Answer to second is </p></li>\n</ol>\n\n<p>Each thread has its own stack that holds a frame for each method executing on that thread. So the currently executing method is at the top of the stack. A new frame is created and added (pushed) to the top of stack for every method invocation. The frame is removed (popped) when the method returns normally or if an uncaught exception is thrown during the method invocation. The stack is not directly manipulated, except to push and pop frame objects, and therefore the frame objects may be allocated in the Heap and the memory does not need to be contiguous.</p>\n\n<p>So by considering stack in a Thread we can conclude.</p>\n\n<p>A stack can be a dynamic or fixed size. If a thread requires a larger stack than allowed a <code>StackOverflowError</code> is thrown. If a thread requires a new frame and there isn\u2019t enough memory to allocate it then an <code>OutOfMemoryError</code> is thrown.</p>\n\n<p>you can get description for JVM <a href=\"http://blog.jamesdbloom.com/JVMInternals.html\" rel=\"nofollow\">here</a></p>\n", "title": "What actually causes a Stack Overflow error?", "tags": ["java", "jvm", "stack-overflow"], "link": "http://stackoverflow.com/questions/22182669/what-actually-causes-a-stack-overflow-error/22196578#22196578", "question_id": 22182669, "answer_id": 22196578}, {"body": "<p><code>StackOverflowError</code> occurs due to an application recurses too deeply (This is not an answer you are expecting).  </p>\n\n<p>Now other things to happen to <code>StackOverflowError</code> is keep calling methods from methods till you get <code>StackOverflowError</code>, but nobody can program to get <code>StackOverflowError</code> and even if those programmer are doing so then they are not following coding standards for <a href=\"http://programmers.stackexchange.com/a/182170\">cyclomatic complixity</a> that every programmer has to understand while programming. Such reason for 'StackOverflowError' will require much time to rectify it.</p>\n\n<p>But unknowingly coding one line or two line which causes <code>StackOverflowError</code> is understandable and JVM throws that and we can rectify it instantly. <a href=\"http://stackoverflow.com/a/21303499/1115584\">Here</a> is my answer with picture for some other question.</p>\n", "title": "What actually causes a Stack Overflow error?", "tags": ["java", "jvm", "stack-overflow"], "link": "http://stackoverflow.com/questions/22182669/what-actually-causes-a-stack-overflow-error/22222274#22222274", "question_id": 22182669, "answer_id": 22222274}, {"body": "<p>The most common cause of StackOverFlowError is excessively deep or infinite recursion.</p>\n\n<p>For instance:</p>\n\n<pre><code>public int yourMethod(){\n       yourMethod();//infinite recursion\n}\n</code></pre>\n\n<p>In Java:</p>\n\n<p>There are <code>two</code> areas in memory the  heap and stack. The <code>stack memory</code> is used to store local variables and function call, while <code>heap memory</code> is used to store objects in Java.</p>\n\n<p>If there is no memory left in stack for storing function call or local variable, JVM will throw <code>java.lang.StackOverFlowError</code></p>\n\n<p>while if there is no more heap space for creating object, JVM will throw <code>java.lang.OutOfMemoryError</code></p>\n", "title": "What actually causes a Stack Overflow error?", "tags": ["java", "jvm", "stack-overflow"], "link": "http://stackoverflow.com/questions/22182669/what-actually-causes-a-stack-overflow-error/22223113#22223113", "question_id": 22182669, "answer_id": 22223113}, {"body": "<p>In c# you can achieve stack overflow in a different manner, by wrongly defining object properties.\nFor example :</p>\n\n<pre><code>private double hours;\n\npublic double Hours\n        {\n            get { return Hours; }\n            set { Hours = value; }\n        }\n</code></pre>\n\n<p>As you can see this will forever keep on returning Hours with an uppercase H , which in itself will return Hours and so and so on.</p>\n\n<p>A stack overflow will often occur also because of running out of memory or when using managed languages because your language manager (CLR, JRE) will detect that your code got stuck in an infinite loop.</p>\n", "title": "What actually causes a Stack Overflow error?", "tags": ["java", "jvm", "stack-overflow"], "link": "http://stackoverflow.com/questions/22182669/what-actually-causes-a-stack-overflow-error/22336360#22336360", "question_id": 22182669, "answer_id": 22336360}], "creation_date": 1393965962, "score": 204, "link": "http://stackoverflow.com/questions/22182669/what-actually-causes-a-stack-overflow-error", "question_id": 22182669}, {"body": "<p>One of the most useful features of Java 8 are the new <code>default</code> methods on interfaces. There are essentially two reasons (there may be others) why they have been introduced:</p>\n\n<ul>\n<li>Providing actual default implementations. Example: <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html#remove--\"><code>Iterator.remove()</code></a></li>\n<li>Allowing for JDK API evolution. Example: <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html#forEach-java.util.function.Consumer-\"><code>Iterable.forEach()</code></a></li>\n</ul>\n\n<p>From an API designer's perspective, I would have liked to be able to use other modifiers on interface methods, e.g. <code>final</code>. This would be useful when adding convenience methods, preventing \"accidental\" overrides in implementing classes:</p>\n\n<pre><code>interface Sender {\n\n    // Convenience method to send an empty message\n    default final void send() {\n        send(null);\n    }\n\n    // Implementations should only implement this method\n    void send(String message);\n}\n</code></pre>\n\n<p>The above is already common practice if <code>Sender</code> were a class:</p>\n\n<pre><code>abstract class Sender {\n\n    // Convenience method to send an empty message\n    final void send() {\n        send(null);\n    }\n\n    // Implementations should only implement this method\n    abstract void send(String message);\n}\n</code></pre>\n\n<p>Now, <code>default</code> and <code>final</code> are obviously contradicting keywords, but the default keyword itself <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2012-August/005393.html\">would not have been strictly required</a>, so I'm assuming that this contradiction is deliberate, to reflect the subtle differences between <em>\"class methods with body\"</em> (just methods) and <em>\"interface methods with body\"</em> (default methods), i.e. differences which I have not yet understood.</p>\n\n<p>At some point of time, support for modifiers like <code>static</code> and <code>final</code> on interface methods was not yet fully explored, <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2011-December/004430.html\">citing Brian Goetz</a>:</p>\n\n<blockquote>\n  <p>The other part is how far we're going to go to support class-building \n  tools in interfaces, such as final methods, private methods, protected \n  methods, static methods, etc.  The answer is: we don't know yet</p>\n</blockquote>\n\n<p>Since that time in late 2011, obviously, support for <code>static</code> methods in interfaces was added. Clearly, this added a lot of value to the JDK libraries themselves, such as with <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#comparing-java.util.function.Function-\"><code>Comparator.comparing()</code></a>.</p>\n\n<h3>Question:</h3>\n\n<p>What is the reason <code>final</code> (and also <code>static final</code>) never made it to Java 8 interfaces?</p>\n", "tags": ["java", "language-design", "java-8", "default-method", "jsr335"], "title": "Why is &quot;final&quot; not allowed in Java 8 interface methods?", "answers": [{"body": "<p>It will be hard to find and identify \"THE\" answer, for the resons mentioned in the comments from @EJP : There are roughly 2 (+/- 2) people in the world who can give the definite answer <em>at all</em>. And in doubt, the answer might just be something like \"Supporting final default methods did not seem to be worth the effort of restructuring the internal call resolution mechanisms\". This is speculation, of course, but it is at least backed by subtle evidences, like this <a href=\"http://mail.openjdk.java.net/pipermail/core-libs-dev/2013-February/014467.html\">Statement (by one of the two persons) in the OpenJDK mailing list</a>:</p>\n\n<blockquote>\n  <p>\"I suppose if \"final default\" methods were allowed, they might need rewriting from internal invokespecial to user-visible invokeinterface.\"</p>\n</blockquote>\n\n<p>and trivial facts like that a method is simply not <em>considered</em> to be a (really) final method when it is a <code>default</code> method, as currently implemented in the <a href=\"http://hg.openjdk.java.net/jdk8/build/hotspot/file/87ee5ee27509/src/share/vm/oops/method.cpp#l512\">Method::is_final_method</a> method in the OpenJDK. </p>\n\n<p>Further really \"authorative\" information is indeed hard to find, even with excessive websearches and by reading commit logs. I thought that it might be related to potential ambiguities during the resolution of interface method calls with the <code>invokeinterface</code> instruction and and class method calls, corresponding to the <code>invokevirtual</code> instruction: For the <code>invokevirtual</code> instruction, there may be a simple <strong>vtable</strong> lookup, because the method must either be inherited from a superclass, or implemented by the class directly. In contrast to that, an <code>invokeinterface</code> call must examine the respective call site to find out <em>which</em> interface this call actually refers to (this is explained in more detail in the <a href=\"https://wikis.oracle.com/display/HotSpotInternals/InterfaceCalls\">InterfaceCalls</a> page of the HotSpot Wiki). However, <code>final</code> methods do either not get inserted into the <strong>vtable</strong> at all, or replace existing entries in the <strong>vtable</strong> (see <a href=\"http://hg.openjdk.java.net/jdk8/build/hotspot/file/87ee5ee27509/src/share/vm/oops/klassVtable.cpp#l333\">klassVtable.cpp. Line 333</a>), and similarly, default methods are replacing existing entries in the <strong>vtable</strong> (see <a href=\"http://hg.openjdk.java.net/jdk8/build/hotspot/file/87ee5ee27509/src/share/vm/oops/klassVtable.cpp#l202\">klassVtable.cpp, Line 202</a>). So the <em>actual</em> reason (and thus, the answer) must be hidden deeper inside the (rather complex) method call resolution mechanisms, but maybe these references will nevertheless be considered as being helpful, be it only for others that manage to derive the actual answer from that.</p>\n", "title": "Why is &quot;final&quot; not allowed in Java 8 interface methods?", "tags": ["java", "language-design", "java-8", "default-method", "jsr335"], "link": "http://stackoverflow.com/questions/23453287/why-is-final-not-allowed-in-java-8-interface-methods/23456085#23456085", "question_id": 23453287, "answer_id": 23456085}, {"body": "<p>I wouldn't think it is neccessary to specify <code>final</code> on a convienience interface method, I can agree though that it <em>may</em> be helpful, but seemingly the costs have outweight the benefits.</p>\n\n<p>What you are supposed to do, either way, is to write proper javadoc for the default method, showing exactly what the method is and is not allowed to do. In that way the classes implementing the interface \"are not allowed\" to change the implementation, though there are no guarantees.</p>\n\n<p>Anyone could write a <code>Collection</code> that adheres to the interface and then does things in the methods that are absolutely counter intuitive, there is no way to shield yourself from that, other than writing extensive unit tests.</p>\n", "title": "Why is &quot;final&quot; not allowed in Java 8 interface methods?", "tags": ["java", "language-design", "java-8", "default-method", "jsr335"], "link": "http://stackoverflow.com/questions/23453287/why-is-final-not-allowed-in-java-8-interface-methods/23456294#23456294", "question_id": 23453287, "answer_id": 23456294}, {"body": "<p>In the lambda mailing list <a href=\"https://www.google.com/#q=default+methods+modifiers+site:http:%2F%2Fmail.openjdk.java.net%2Fpipermail%2Flambda-dev%2F\">there are plenty of discussions about it</a>. One of those that seems to contain a lot of discussion about all that stuff is the following: On <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2012-August/005444.html\">Varied interface method visibility (was Final defenders)</a>.</p>\n\n<p>In this discussion, Talden, the author of the <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2012-August/005437.html\">original question</a> asks something very similar to your question:</p>\n\n<blockquote>\n  <p>The decision to make all interface members public was indeed an\n  unfortunate decision.  That any use of interface in internal design\n  exposes implementation private details is a big one.</p>\n  \n  <p>It's a tough one to fix without adding some obscure or compatibility\n  breaking nuances to the language. A compatibility break of that\n  magnitude and potential subtlety would seen unconscionable so a\n  solution has to exist that doesn't break existing code.</p>\n  \n  <p>Could reintroducing the 'package' keyword as an access-specifier be\n  viable.  It's absence of a specifier in an interface would imply\n  public-access and the absence of a specifier in a class implies\n  package-access. Which specifiers make sense in an interface is unclear\n  - especially if, to minimise the knowledge burden on developers, we have to ensure that access-specifiers mean the same thing in both\n  class and interface if they're present.</p>\n  \n  <p>In the absence of default methods I'd have speculated that the\n  specifier of a member in an interface has to be at least as visible as\n  the interface itself (so the interface can actually be implemented in\n  all visible contexts) - with default methods that's not so certain.</p>\n  \n  <p>Has there been any clear communication as to whether this is even a\n  possible in-scope discussion? If not, should it be held elsewhere.</p>\n</blockquote>\n\n<p>Eventually <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2012-August/005444.html\">Brian Goetz's answer</a> was:</p>\n\n<blockquote>\n  <p>Yes, this is already being explored.  </p>\n  \n  <p>However, let me set some realistic expectations -- language / VM\n  features have a long lead time, even trivial-seeming ones like this. \n  The time for proposing new language feature ideas for Java SE 8 has\n  pretty much passed.</p>\n</blockquote>\n\n<p>So, most likely it was never implemented because it was never part of the scope. It was never proposed in time to be considered.</p>\n\n<p>In another heated discussion <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2012-August/005390.html\">about final defender methods</a> on the subject, <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2012-August/005443.html\">Brian said again</a>:</p>\n\n<blockquote>\n  <p>And you have gotten exactly what you wished for.  That's exactly what\n  this feature adds -- multiple inheritance of behavior.  Of course we\n  understand that people will use them as traits.  And we've worked hard\n  to ensure that the the model of inheritance they offer is simple and\n  clean enough that people can get good results doing so in a broad\n  variety of situations.  We have, at the same time, chosen not to push\n  them beyond the boundary of what works simply and cleanly, and that\n  leads to \"aw, you didn't go far enough\" reactions in some case.  But\n  really, most of this thread seems to be grumbling that the glass is\n  merely 98% full.  I'll take that 98% and get on with it!</p>\n</blockquote>\n\n<p>So this reinforces my theory that it simply was not part of the scope or part of their design. What they did was to provide enough functionality to deal with the issues of API evolution.</p>\n", "title": "Why is &quot;final&quot; not allowed in Java 8 interface methods?", "tags": ["java", "language-design", "java-8", "default-method", "jsr335"], "link": "http://stackoverflow.com/questions/23453287/why-is-final-not-allowed-in-java-8-interface-methods/23458190#23458190", "question_id": 23453287, "answer_id": 23458190}, {"body": "<p>This question is, to some degree, related to <a href=\"http://stackoverflow.com/questions/23453568/what-is-the-reason-why-synchronized-is-not-allowed-in-java-8-interface-methods/23463334#23463334\">What is the reason why \u201csynchronized\u201d is not allowed in Java 8 interface methods?</a></p>\n\n<p>The key thing to understand about default methods is that the primary design goal is <em>interface evolution</em>, not \"turn interfaces into (mediocre) traits\".  While there's some overlap between the two, and we tried to be accomodating to the latter where it didn't get in the way of the former, these questions are best understood when viewed in this light.  (Note too that class methods <em>are</em> going to be different from interface methods, no matter what the intent, by virtue of the fact that interface methods can be multiply inherited.)</p>\n\n<p>The basic idea of a default method is: it is an interface method with a default implementation, and a derived class can provide a more specific implementation.  And because the design center was interface evolution, it was a critical design goal that default methods be able to be added to interfaces <em>after the fact</em> in a source-compatible and binary-compatible manner.  </p>\n\n<p>The too-simple answer to \"why not final default methods\" is that then the body would then not simply be the default implementation, it would be the only implementation.  While that's a little too simple an answer, it gives us a clue that the question is already heading in a questionable direction.</p>\n\n<p>Another reason why final interface methods are questionable is that they create impossible problems for implementors.  For example, supposing you have:</p>\n\n<pre><code>interface A { \n    default void foo() { ... }\n}\n\ninterface B { \n}\n\nclass C implements A, B { \n}\n</code></pre>\n\n<p>Here, everything is good; C inherits foo() from A.  Now supposing B is changed to have a foo method, with a default:</p>\n\n<pre><code>interface B { \n    default void foo() { ... }\n}\n</code></pre>\n\n<p>Now, when we go to recompile C, the compiler will tell us that it doesn't know what behavior to inherit for <code>foo()</code>, so C has to override it (and could choose to delegate to <code>A.super.foo()</code> if it wanted to retain the same behavior.)  But what if B had made its default final, and A is not under the control of the author of C?  Now C is irretrievably broken; it can't compile without overriding <code>foo()</code>, but it can't override <code>foo()</code> if it was final in <code>B</code>.  </p>\n\n<p>This is just one example, but the point is that final methods are really a tool that makes more sense in the world of single-inheritance classes (generally which couple state to behavior), than to interfaces which merely contribute behavior and can be multiply inherited.  It's too hard to reason about \"what other interfaces might be mixed into the eventual implementor\", and allowing an interface method to be final would likely cause these problems (and they would blow up not on the person who wrote the interface, but on the poor user who tries to implement it.)  </p>\n\n<p>Another reason to disallow them is that they wouldn't mean what you think they mean.  A default implementation is only considered if the class (or its superclasses) don't provide a declaration (concrete or abstract) of the method.  If a default method were final, but a superclass already implemented the method, the default would be ignored, which is probably not what the default author was expecting when declaring it final.  (This inheritance behavior is a reflection of the design center for default methods -- interface evolution.  It should be possible to add a default method (or a default implementation to an existing interface method) to existing interfaces that already have implementations, without changing the behavior of existing classes that implement the interface, guaranteeing that classes that already worked before default methods were added will work the same way in the presence of default methods.)</p>\n", "title": "Why is &quot;final&quot; not allowed in Java 8 interface methods?", "tags": ["java", "language-design", "java-8", "default-method", "jsr335"], "link": "http://stackoverflow.com/questions/23453287/why-is-final-not-allowed-in-java-8-interface-methods/23476994#23476994", "question_id": 23453287, "answer_id": 23476994}], "creation_date": 1399184721, "score": 201, "link": "http://stackoverflow.com/questions/23453287/why-is-final-not-allowed-in-java-8-interface-methods", "question_id": 23453287}, {"body": "<p>What is the easiest/shortest way to convert a Java 8 <code>Stream</code> into an array?</p>\n", "tags": ["java", "arrays", "java-8", "java-stream"], "title": "How to Convert a Java 8 Stream to an Array?", "answers": [{"body": "<p>You can use the overloaded version of <code>toArray</code>, as the following:</p>\n\n<pre><code>Stream&lt;String&gt; stream = ...;\nString[] stringArray = stream.toArray(size -&gt; new String[size]);\n</code></pre>\n\n<p>The purpose of the <code>IntFunction&lt;A[]&gt; generator</code> is to convert an integer, the size of the array, to a new array.</p>\n\n<p>Example code:</p>\n\n<pre><code>Stream&lt;String&gt; streamString = Stream.of(\"a\", \"b\", \"c\");\nString[] stringArray = streamString.toArray(size -&gt; new String[size]);\nArrays.stream(stringArray).forEach(System.out::println);\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>a\nb\nc\n</code></pre>\n\n<p>Another option is to use a method reference to the string array constructor, this one is a bit more tricky. Usage is easy:</p>\n\n<pre><code>String[] stringArray = streamString.toArray(String[]::new);\n</code></pre>\n\n<p>What it does, is find a method that takes in an integer (the size) as argument, and returns a <code>String[]</code>, which is exactly what (one of the overloads of) <code>new String[]</code> does.</p>\n", "title": "How to Convert a Java 8 Stream to an Array?", "tags": ["java", "arrays", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/23079003/how-to-convert-a-java-8-stream-to-an-array/23079174#23079174", "question_id": 23079003, "answer_id": 23079174}], "creation_date": 1397552413, "score": 193, "link": "http://stackoverflow.com/questions/23079003/how-to-convert-a-java-8-stream-to-an-array", "question_id": 23079003}, {"body": "<p>What is the best way to convert a <code>java.util.Date</code> object to the new JDK 8/JSR-310 <code>java.time.LocalDate</code>?</p>\n\n<pre><code>Date input = new Date();\nLocalDate date = ???\n</code></pre>\n", "tags": ["java", "datetime", "java-8", "java-time"], "title": "Convert java.util.Date to java.time.LocalDate", "answers": [{"body": "<p>Short answer:</p>\n\n<pre><code>Date input = new Date();\nLocalDate date = input.toInstant().atZone(ZoneId.systemDefault()).toLocalDate();\n</code></pre>\n\n<p>Explanation:</p>\n\n<p>Despite its name, <code>java.util.Date</code> represents an instant on the time-line, not a \"date\". The actual data stored within the object is a <code>long</code> count of milliseconds since 1970-01-01T00:00Z (midnight at the start of 1970 GMT/UTC).</p>\n\n<p>The equivalent class to <code>java.util.Date</code> in JSR-310 is <code>Instant</code>, thus there is a convenient method <code>toInstant()</code> to provide the conversion:</p>\n\n<pre><code>Date input = new Date();\nInstant instant = input.toInstant();\n</code></pre>\n\n<p>A <code>java.util.Date</code> instance has no concept of time-zone. This might seem strange if you call <code>toString()</code> on a <code>java.util.Date</code>, because the <code>toString</code> is relative to a time-zone. However that method actually uses Java's default time-zone on the fly to provide the string. The time-zone is not part of the actual state of <code>java.util.Date</code>.</p>\n\n<p>An <code>Instant</code> also does not contain any information about the time-zone. Thus, to convert from an <code>Instant</code> to a local date it is necessary to specify a time-zone. This might be the default zone - <code>ZoneId.systemDefault()</code> - or it might be a time-zone that your application controls, such as a time-zone from user preferences. Use the <code>atZone()</code> method to apply the time-zone:</p>\n\n<pre><code>Date input = new Date();\nInstant instant = input.toInstant();\nZonedDateTime zdt = instant.atZone(ZoneId.systemDefault());\n</code></pre>\n\n<p>A <code>ZonedDateTime</code> contains state consisting of the local date and time, time-zone and the offset from GMT/UTC. As such the date - <code>LocalDate</code> - can be easily extracted using <code>toLocalDate()</code>:</p>\n\n<pre><code>Date input = new Date();\nInstant instant = input.toInstant();\nZonedDateTime zdt = instant.atZone(ZoneId.systemDefault());\nLocalDate date = zdt.toLocalDate();\n</code></pre>\n", "title": "Convert java.util.Date to java.time.LocalDate", "tags": ["java", "datetime", "java-8", "java-time"], "link": "http://stackoverflow.com/questions/21242110/convert-java-util-date-to-java-time-localdate/21242111#21242111", "question_id": 21242110, "answer_id": 21242111}, {"body": "<p>If you're using Java 8, @JodaStephen's answer is obviously the best.  However, if you're working with the <a href=\"http://www.threeten.org/threetenbp/\">JSR-310 backport</a>, you unfortunately have to do something like this:</p>\n\n<pre><code>Date input = new Date();\nCalendar cal = Calendar.getInstance();\ncal.setTime(input);\nLocalDate date = LocalDate.of(cal.get(Calendar.YEAR),\n        cal.get(Calendar.MONTH) + 1,\n        cal.get(Calendar.DAY_OF_MONTH));\n</code></pre>\n", "title": "Convert java.util.Date to java.time.LocalDate", "tags": ["java", "datetime", "java-8", "java-time"], "link": "http://stackoverflow.com/questions/21242110/convert-java-util-date-to-java-time-localdate/26597701#26597701", "question_id": 21242110, "answer_id": 26597701}, {"body": "<p>Better way is:</p>\n\n<pre><code>Date date = ...;\nInstant.ofEpochMilli(date.getTime()).atZone(ZoneId.systemDefault()).toLocalDate()\n</code></pre>\n\n<p>Advantages of this version:</p>\n\n<ul>\n<li><p>works regardless the input is an instance of <code>java.util.Date</code> or it's subclass <code>java.sql.Date</code> (unlike @JodaStephen's way). This is common with JDBC originated data. <code>java.sql.Date.toInstant()</code> always throws an exception.</p></li>\n<li><p>it's the same for JDK8 and JDK7 with JSR-310 backport</p></li>\n</ul>\n\n<p>I personally use an utility class (but this is not backport-compatible):</p>\n\n<pre><code>/**\n * Utilities for conversion between the old and new JDK date types \n * (between {@code java.util.Date} and {@code java.time.*}).\n * \n * &lt;p&gt;\n * All methods are null-safe.\n */\npublic class DateConvertUtils {\n\n    /**\n     * Calls {@link #asLocalDate(Date, ZoneId)} with the system default time zone.\n     */\n    public static LocalDate asLocalDate(java.util.Date date) {\n        return asLocalDate(date, ZoneId.systemDefault());\n    }\n\n    /**\n     * Creates {@link LocalDate} from {@code java.util.Date} or it's subclasses. Null-safe.\n     */\n    public static LocalDate asLocalDate(java.util.Date date, ZoneId zone) {\n        if (date == null)\n            return null;\n\n        if (date instanceof java.sql.Date)\n            return ((java.sql.Date) date).toLocalDate();\n        else\n            return Instant.ofEpochMilli(date.getTime()).atZone(zone).toLocalDate();\n    }\n\n    /**\n     * Calls {@link #asLocalDateTime(Date, ZoneId)} with the system default time zone.\n     */\n    public static LocalDateTime asLocalDateTime(java.util.Date date) {\n        return asLocalDateTime(date, ZoneId.systemDefault());\n    }\n\n    /**\n     * Creates {@link LocalDateTime} from {@code java.util.Date} or it's subclasses. Null-safe.\n     */\n    public static LocalDateTime asLocalDateTime(java.util.Date date, ZoneId zone) {\n        if (date == null)\n            return null;\n\n        if (date instanceof java.sql.Timestamp)\n            return ((java.sql.Timestamp) date).toLocalDateTime();\n        else\n            return Instant.ofEpochMilli(date.getTime()).atZone(zone).toLocalDateTime();\n    }\n\n    /**\n     * Calls {@link #asUtilDate(Object, ZoneId)} with the system default time zone.\n     */\n    public static java.util.Date asUtilDate(Object date) {\n        return asUtilDate(date, ZoneId.systemDefault());\n    }\n\n    /**\n     * Creates a {@link java.util.Date} from various date objects. Is null-safe. Currently supports:&lt;ul&gt;\n     * &lt;li&gt;{@link java.util.Date}\n     * &lt;li&gt;{@link java.sql.Date}\n     * &lt;li&gt;{@link java.sql.Timestamp}\n     * &lt;li&gt;{@link java.time.LocalDate}\n     * &lt;li&gt;{@link java.time.LocalDateTime}\n     * &lt;li&gt;{@link java.time.ZonedDateTime}\n     * &lt;li&gt;{@link java.time.Instant}\n     * &lt;/ul&gt;\n     * \n     * @param zone Time zone, used only if the input object is LocalDate or LocalDateTime.\n     * \n     * @return {@link java.util.Date} (exactly this class, not a subclass, such as java.sql.Date)\n     */\n    public static java.util.Date asUtilDate(Object date, ZoneId zone) {\n        if (date == null)\n            return null;\n\n        if (date instanceof java.sql.Date || date instanceof java.sql.Timestamp)\n            return new java.util.Date(((java.util.Date) date).getTime());\n        if (date instanceof java.util.Date)\n            return (java.util.Date) date;\n        if (date instanceof LocalDate)\n            return java.util.Date.from(((LocalDate) date).atStartOfDay(zone).toInstant());\n        if (date instanceof LocalDateTime)\n            return java.util.Date.from(((LocalDateTime) date).atZone(zone).toInstant());\n        if (date instanceof ZonedDateTime)\n            return java.util.Date.from(((ZonedDateTime) date).toInstant());\n        if (date instanceof Instant)\n            return java.util.Date.from((Instant) date);\n\n        throw new UnsupportedOperationException(\"Don't know hot to convert \" + date.getClass().getName() + \" to java.util.Date\");\n    }\n\n    /**\n     * Creates an {@link Instant} from {@code java.util.Date} or it's subclasses. Null-safe.\n     */\n    public static Instant asInstant(Date date) {\n        if (date == null)\n            return null;\n        else\n            return Instant.ofEpochMilli(date.getTime());\n    }\n\n    /**\n     * Calls {@link #asZonedDateTime(Date, ZoneId)} with the system default time zone.\n     */\n    public static ZonedDateTime asZonedDateTime(Date date) {\n        return asZonedDateTime(date, ZoneId.systemDefault());\n    }\n\n    /**\n     * Creates {@link ZonedDateTime} from {@code java.util.Date} or it's subclasses. Null-safe.\n     */\n    public static ZonedDateTime asZonedDateTime(Date date, ZoneId zone) {\n        if (date == null)\n            return null;\n        else\n            return asInstant(date).atZone(zone);\n    }\n\n}\n</code></pre>\n\n<p>The <code>asLocalDate()</code> method here is null-safe, uses <code>toLocalDate()</code>, if input is <code>java.sql.Date</code> (it may be overriden by the JDBC driver to avoid timezone problems or unnecessary calculations), otherwise uses the abovementioned method.</p>\n", "title": "Convert java.util.Date to java.time.LocalDate", "tags": ["java", "datetime", "java-8", "java-time"], "link": "http://stackoverflow.com/questions/21242110/convert-java-util-date-to-java-time-localdate/27378709#27378709", "question_id": 21242110, "answer_id": 27378709}, {"body": "<pre><code>LocalDate ld = new java.sql.Date( new java.util.Date().getTime() ).toLocalDate();\n</code></pre>\n", "title": "Convert java.util.Date to java.time.LocalDate", "tags": ["java", "datetime", "java-8", "java-time"], "link": "http://stackoverflow.com/questions/21242110/convert-java-util-date-to-java-time-localdate/27408638#27408638", "question_id": 21242110, "answer_id": 27408638}, {"body": "<pre><code>LocalDate localDate = LocalDate.parse( new SimpleDateFormat(\"yyyy-MM-dd\").format(date) );\n</code></pre>\n", "title": "Convert java.util.Date to java.time.LocalDate", "tags": ["java", "datetime", "java-8", "java-time"], "link": "http://stackoverflow.com/questions/21242110/convert-java-util-date-to-java-time-localdate/29189811#29189811", "question_id": 21242110, "answer_id": 29189811}, {"body": "<p>I have had problems with @JodaStephen's implementation on JBoss EAP 6. So, I rewrote the conversion following Oracle's Java Tutorial in <a href=\"http://docs.oracle.com/javase/tutorial/datetime/iso/legacy.html\" rel=\"nofollow\">http://docs.oracle.com/javase/tutorial/datetime/iso/legacy.html</a>.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    Date input = new Date();\n    GregorianCalendar gregorianCalendar = (GregorianCalendar) Calendar.getInstance();\n    gregorianCalendar.setTime(input);\n    ZonedDateTime zonedDateTime = gregorianCalendar.toZonedDateTime();\n    zonedDateTime.toLocalDate();\n</code></pre>\n", "title": "Convert java.util.Date to java.time.LocalDate", "tags": ["java", "datetime", "java-8", "java-time"], "link": "http://stackoverflow.com/questions/21242110/convert-java-util-date-to-java-time-localdate/32125924#32125924", "question_id": 21242110, "answer_id": 32125924}], "creation_date": 1390244802, "score": 169, "link": "http://stackoverflow.com/questions/21242110/convert-java-util-date-to-java-time-localdate", "question_id": 21242110}, {"body": "<p>In Java 8, I can easily write: </p>\n\n<pre><code>interface Interface1 {\n    default void method1() {\n        synchronized (this) {\n            // Something\n        }\n    }\n\n    static void method2() {\n        synchronized (Interface1.class) {\n            // Something\n        }\n    }\n}\n</code></pre>\n\n<p>I will get the full synchronisation semantics that I can use also in classes. I cannot, however, use the <code>synchronized</code> modifier on method declarations:</p>\n\n<pre><code>interface Interface2 {\n    default synchronized void method1() {\n        //  ^^^^^^^^^^^^ Modifier 'synchronized' not allowed here\n    }\n\n    static synchronized void method2() {\n        // ^^^^^^^^^^^^ Modifier 'synchronized' not allowed here\n    }\n}\n</code></pre>\n\n<p>Now, one can argue that the two interfaces behave the same way except that <code>Interface2</code> establishes a <em>contract</em> on <code>method1()</code> and on <code>method2()</code>, which is a bit stronger than what <code>Interface1</code> does. Of course, we might also argue that <code>default</code> implementations should not make any assumptions about concrete implementation state, or that such a keyword simply wouldn't pull its weight.</p>\n\n<h3>Question:</h3>\n\n<p>What is the reason why the JSR-335 expert group decided not to support <code>synchronized</code> on interface methods?</p>\n\n<hr>\n\n<p><strong>Note, before this question is eagerly closed</strong>: To fit Stack Overflow's Q&amp;A format: I'm looking for authoritative citations only, not speculation. An authoritative answer to this question will likely help many future visitors of this question, so please <em>do not close it eagerly</em>.</p>\n", "tags": ["java", "java-8", "synchronized", "default-method", "jsr335"], "title": "What is the reason why \u201csynchronized\u201d is not allowed in Java 8 interface methods?", "answers": [{"body": "<p>This was a deliberate decision, rather than an omission (as has been suggested elsewhere.)  While at first it might seem obvious that one would want to support the <code>synchronized</code> modifier on default methods, it turns out that doing so would be dangerous, and so was prohibited.  </p>\n\n<p>Synchronized methods are a shorthand for a method which behaves as if the entire body is enclosed in a <code>synchronized</code> block whose lock object is the receiver.  It might seem sensible to extend this semantics to default methods as well; after all, they are instance methods with a receiver too.  (Note that <code>synchronized</code> methods are entirely a syntactic optimization; they're not needed, they're just more compact than the corresponding <code>synchronized</code> block.  There's a reasonable argument to be made that this was a premature syntactic optimization in the first place, and that synchronized methods cause more problems than they solve, but that ship sailed a long time ago.)  </p>\n\n<p>So, why are they dangerous?  Synchronization is about locking.  Locking is about coordinating shared access to mutable state.  Each object should have a synchronization policy that determines which locks guard which state variables.  (See <a href=\"http://amzn.to/1jyE5Kx\">Java Concurrency in Practice</a>, section 2.4.)  </p>\n\n<p>Many objects use as their synchronization policy the <em>Java Monitor Pattern</em> (JCiP 4.1), in which an object's state is guarded by its intrinsic lock.  There is nothing magic or special about this pattern, but it is convenient, and the use of the <code>synchronized</code> keyword on methods implicitly assumes this pattern.  </p>\n\n<p>It is the class that owns the state that gets to determine that object's synchronization policy.  But interfaces do not own the state of the objects into which they are mixed in.  So using a synchronized method in an interface assumes a particular synchronization policy, but one which you have no reasonable basis for assuming, so it might well be the case that the use of synchronization provides no additional thread safety whatsoever (you might be synchronizing on the wrong lock).  This would give you the false sense of confidence that you have done something about thread safety, and no error message tells you that you're assuming the wrong synchronization policy.  </p>\n\n<p>It is already hard enough to consistently maintain a synchronization policy for a single source file; it is even harder to ensure that a subclass correctly adhere to the synchronization policy defined by its superclass.  Trying to do so between such loosely coupled classes (an interface and the possibly many classes which implement it) would be nearly impossible and highly error-prone.  </p>\n\n<p>Given all those arguments against, what would be the argument for?  It seems they're mostly about making interfaces behave more like traits.  While this is an understandable desire, the design center for default methods is interface evolution, not \"Traits--\".  Where the two could be consistently achieved, we strove to do so, but where one is in conflict with the other, we had to choose in favor of the primary design goal.  </p>\n", "title": "What is the reason why \u201csynchronized\u201d is not allowed in Java 8 interface methods?", "tags": ["java", "java-8", "synchronized", "default-method", "jsr335"], "link": "http://stackoverflow.com/questions/23453568/what-is-the-reason-why-synchronized-is-not-allowed-in-java-8-interface-methods/23463334#23463334", "question_id": 23453568, "answer_id": 23463334}], "creation_date": 1399187160, "score": 168, "link": "http://stackoverflow.com/questions/23453568/what-is-the-reason-why-synchronized-is-not-allowed-in-java-8-interface-methods", "question_id": 23453568}, {"body": "<p>I have no idea why these lines of code return different values:</p>\n\n<pre><code>System.out.println(Integer.valueOf(\"127\")==Integer.valueOf(\"127\"));\nSystem.out.println(Integer.valueOf(\"128\")==Integer.valueOf(\"128\"));\nSystem.out.println(Integer.parseInt(\"128\")==Integer.valueOf(\"128\"));\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>true\nfalse\ntrue\n</code></pre>\n\n<p>Why does the first one return <code>true</code> and the second one return <code>false</code>? Is there something different that I don't know between <code>127</code> and <code>128</code>? (Of course I know that <code>127</code> &lt; <code>128</code>.) </p>\n\n<p>Also, why does the third one return <code>true</code>?</p>\n\n<p>I have read the answer <a href=\"http://stackoverflow.com/questions/508665/difference-between-parseint-and-valueof-in-java\">of this question</a>, but I still didn't get how it can return <code>true</code>, and why the code in second line returns <code>false</code>.</p>\n", "tags": ["java", "integer", "comparison"], "title": "Why do == comparisons with Integer.valueOf(String) give different results for 127 and 128?", "answers": [{"body": "<p>There's a striking difference here.</p>\n\n<p><code>valueOf</code> is returning an <code>Integer</code> object, which may have its values cached between -128 and 127.  This is why the first value returns <code>true</code> - it's cached - and the second value returns <code>false</code> - 128 isn't a cached value, so you're getting two separate <code>Integer</code> instances.</p>\n\n<p><strong>It is important to note</strong> that you are comparing references with <code>Integer#valueOf</code>, and if you are comparing a value that is larger than what the cache supports, it will <strong>not</strong> evaluate to <code>true</code>, even if the parsed values are equivalent (case in point:  <code>Integer.valueOf(128) == Integer.valueOf(128)</code>).  You <em>must</em> use <code>equals()</code> instead.</p>\n\n<p><code>parseInt</code> is returning a primitive <code>int</code>.  This is why the third value returns <code>true</code> - <code>128 == 128</code> is evaluated, and is of course, <code>true</code>.</p>\n\n<p>Now, a fair bit happens to make that third result <code>true</code>:</p>\n\n<ul>\n<li><p><a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.21.1\">An unboxing conversion occurs</a> with respect to the equivalence operator you're using and the datatypes you have - namely, <code>int</code> and <code>Integer</code>.  You're getting an <code>Integer</code> from <code>valueOf</code> on the right hand side, of course.</p></li>\n<li><p>After the conversion, you're comparing two primitive <code>int</code> values.  Comparison happens just as you would expect it to with respect to primitives, so you wind up comparing <code>128</code> and <code>128</code>.</p></li>\n</ul>\n", "title": "Why do == comparisons with Integer.valueOf(String) give different results for 127 and 128?", "tags": ["java", "integer", "comparison"], "link": "http://stackoverflow.com/questions/20877086/why-do-comparisons-with-integer-valueofstring-give-different-results-for-12/20877115#20877115", "question_id": 20877086, "answer_id": 20877115}, {"body": "<p>Integer objects caches between -128 and 127 of 256 Integer</p>\n\n<p>You should not compare object references with <strong>==</strong> or <strong>!=</strong>. You should use .<strong>equals(..)</strong> instead, or better - use the primitive int rather than Integer.</p>\n\n<p><strong>parseInt</strong>: Parses the string argument as a signed decimal integer. The characters in the string must all be decimal digits, except that the first character may be an ASCII minus sign '-' ('\\u002D') to indicate a negative value. The resulting integer value is returned, exactly as if the argument and the radix 10 were given as arguments to the parseInt(java.lang.String, int) method.</p>\n\n<p><strong>valueOf</strong>\nReturns an Integer object holding the value extracted from the specified String when parsed with the radix given by the second argument. The first argument is interpreted as representing a signed integer in the radix specified by the second argument, exactly as if the arguments were given to the parseInt(java.lang.String, int) method. The result is an Integer object that represents the integer value specified by the string.</p>\n\n<p>equivalent to </p>\n\n<pre><code>new Integer(Integer.parseInt(s, radix))\n</code></pre>\n\n<p>radix - the radix to be used in interpreting s</p>\n\n<p>so if you equal <code>Integer.valueOf()</code> for the integer inbetween </p>\n\n<p>-128 to 127 it returns true in your condition</p>\n\n<p>for  <code>lesser than</code> -128 and <code>greater than</code> 127 it gives <code>false</code></p>\n", "title": "Why do == comparisons with Integer.valueOf(String) give different results for 127 and 128?", "tags": ["java", "integer", "comparison"], "link": "http://stackoverflow.com/questions/20877086/why-do-comparisons-with-integer-valueofstring-give-different-results-for-12/20877161#20877161", "question_id": 20877086, "answer_id": 20877161}, {"body": "<p>The <code>Integer</code> class has a static cache, that stores 256 special <code>Integer</code> objects - one for every value between -128 and 127.  With that in mind, consider the difference between these three.</p>\n\n<pre><code>new Integer(123);\n</code></pre>\n\n<p>This (obviously) makes a brand new <code>Integer</code> object.</p>\n\n<pre><code>Integer.parseInt(\"123\");\n</code></pre>\n\n<p>This returns an <code>int</code> primitive value after parsing the <code>String</code>.</p>\n\n<pre><code>Integer.valueOf(\"123\");\n</code></pre>\n\n<p>This is more complex than the others.  It starts off by parsing the <code>String</code>.  Then, if the value is between -128 and 127, it returns the corresponding object from the static cache.  If the value is outside of this range, then it invokes <code>new Integer()</code> and passes in the value, so that you get a new object.</p>\n\n<p>Now, consider the three expressions in the question.</p>\n\n<pre><code>Integer.valueOf(\"127\")==Integer.valueOf(\"127\");\n</code></pre>\n\n<p>This returns true, because the <code>Integer</code> whose value is 127 is retrieved twice from the static cache, and compared to itself.  There's only one <code>Integer</code> object involved, so this returns <code>true</code>.</p>\n\n<pre><code>Integer.valueOf(\"128\")==Integer.valueOf(\"128\");\n</code></pre>\n\n<p>This returns <code>false</code>, because 128 is not in the static cache.  So a new <code>Integer</code> is created for each side of the equality.  Since there are two different <code>Integer</code> objects, and <code>==</code> for objects only returns <code>true</code> if both sides are the exact same object, this is going to be <code>false</code>.</p>\n\n<pre><code>Integer.parseInt(\"128\")==Integer.valueOf(\"128\");\n</code></pre>\n\n<p>This is comparing the primitive <code>int</code> value 128 on the left, with a newly created <code>Integer</code> object on the right.  But because it doesn't make sense to compare an <code>int</code> to an <code>Integer</code>, Java will auto-unbox the <code>Integer</code> before doing the comparison; so you end up comparing an <code>int</code> to an <code>int</code>.  Since the primitive 128 is equal to itself, this returns <code>true</code>.</p>\n", "title": "Why do == comparisons with Integer.valueOf(String) give different results for 127 and 128?", "tags": ["java", "integer", "comparison"], "link": "http://stackoverflow.com/questions/20877086/why-do-comparisons-with-integer-valueofstring-give-different-results-for-12/20877283#20877283", "question_id": 20877086, "answer_id": 20877283}, {"body": "<p>Take care of returning values from these methods. The <strong>valueOf</strong> method returns Integer instance:</p>\n\n<pre><code>public static Integer valueOf(int i)\n</code></pre>\n\n<p>The <strong>parseInt</strong> method returns integer value (primitive type):</p>\n\n<pre><code>public static int parseInt(String s) throws NumberFormatException\n</code></pre>\n\n<p>Explanation for comparison:</p>\n\n<blockquote>\n  <p>In order to save memory, two instances of the\n  wrapper objects , will always be == when their\n  primitive values are the same:</p>\n  \n  <ul>\n  <li>Boolean</li>\n  <li>Byte</li>\n  <li>Character from \\u0000 to \\u007f (7f is 127 in decimal)</li>\n  <li>Short and Integer from -128 to 127</li>\n  </ul>\n  \n  <p>When == is used to compare a primitive to a wrapper, the wrapper will be\n  unwrapped and the comparison will be primitive to primitive.</p>\n</blockquote>\n\n<p>In your situation (according to the above rules):</p>\n\n<pre><code>Integer.valueOf(\"127\")==Integer.valueOf(\"127\")\n</code></pre>\n\n<p>This expresion compares references to the same object because it contains Integer value between -128 and 127 so it returns true.</p>\n\n<pre><code>Integer.valueOf(\"128\")==Integer.valueOf(\"128\")\n</code></pre>\n\n<p>This expresion compares references to different objects because they contain Integer values not in &lt;-128, 127> so it returns false.</p>\n\n<pre><code>Integer.parseInt(\"128\")==Integer.valueOf(\"128\")\n</code></pre>\n\n<p>This expresion compares primitive value (left hand side) and reference to the object (right hand side)\nso right hand side will be unwrapped and his primitive type will be compared to the left so it returns true. </p>\n", "title": "Why do == comparisons with Integer.valueOf(String) give different results for 127 and 128?", "tags": ["java", "integer", "comparison"], "link": "http://stackoverflow.com/questions/20877086/why-do-comparisons-with-integer-valueofstring-give-different-results-for-12/20879606#20879606", "question_id": 20877086, "answer_id": 20879606}, {"body": "<p>To complement the given answers, also take note of the following:</p>\n\n<pre><code>public class Test { \n    public static void main(String... args) { \n        Integer a = new Integer(129);\n        Integer b = new Integer(129);\n        System.out.println(a == b);\n    }\n}\n</code></pre>\n\n<p>This code will also print: <code>false</code></p>\n\n<p>As user <a href=\"http://stackoverflow.com/users/103206/jay\">Jay</a> has claimed in a comment for the accepted answer, care must be taken when using operator <code>==</code> on objects, here you're checking if both references are the same, which is not, because they are different objets, although they represent the very same value. To compare objects, you should use the <code>equals</code>  method instead:</p>\n\n<pre><code>Integer a = new Integer(128);\nInteger b = new Integer(128);\nSystem.out.println(a.equals(b));\n</code></pre>\n\n<p>This will print: <code>true</code></p>\n\n<p>You may ask, <em>But then why the first line printed <code>true</code>?</em>. Checking the source code for the <code>Integer.valueOf</code> method, you can see the following:</p>\n\n<pre><code>public static Integer valueOf(String s) throws NumberFormatException {\n    return Integer.valueOf(parseInt(s, 10));\n}\n\npublic static Integer valueOf(int i) {\n    assert IntegerCache.high &gt;= 127;\n    if (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)\n        return IntegerCache.cache[i + (-IntegerCache.low)];\n    return new Integer(i);\n}\n</code></pre>\n\n<p>If the param is an integer between <code>IntegerCache.low</code> (defaulted to -128) and <code>IntegerCache.high</code> (calculated at runtime with minimum value 127) then a pre-allocated (cached) object is returned. So when you use 127 as parameter, you're getting two references to same cached object and getting <code>true</code> in the comparison of the references.</p>\n", "title": "Why do == comparisons with Integer.valueOf(String) give different results for 127 and 128?", "tags": ["java", "integer", "comparison"], "link": "http://stackoverflow.com/questions/20877086/why-do-comparisons-with-integer-valueofstring-give-different-results-for-12/20889556#20889556", "question_id": 20877086, "answer_id": 20889556}], "creation_date": 1388641768, "score": 162, "link": "http://stackoverflow.com/questions/20877086/why-do-comparisons-with-integer-valueofstring-give-different-results-for-12", "question_id": 20877086}, {"body": "<p>I am using Eclipse Luna with the m2e plug-in. When I search for dependencies, I get the following warning (also see the screenshot after):</p>\n\n<blockquote>\n  <p>Index downloads are disabled, search result may be incomplete.</p>\n</blockquote>\n\n<p><img src=\"http://i.stack.imgur.com/1HgVO.png\" alt=\"enter image description here\"></p>\n\n<p>How can I enable index downloads?</p>\n", "tags": ["java", "eclipse", "maven"], "title": "How do I enable index downloads in Eclipse for Maven dependency search?", "answers": [{"body": "<ol>\n<li>In Eclipse, click on <strong>Windows > Preferences</strong>, and then choose <strong>Maven</strong> in the left side.</li>\n<li>Check the box \"<strong>Download repository index updates on startup</strong>\".\n\n<ul>\n<li>Optionally, check the boxes <strong>Download Artifact Sources</strong> and <strong>Download Artifact JavaDoc</strong>.</li>\n</ul></li>\n<li>Click <strong>OK</strong>. The warning won't appear anymore.</li>\n<li>Restart Eclipse.</li>\n</ol>\n\n<p><img src=\"http://i.stack.imgur.com/iLj4H.png\" alt=\"http://i.imgur.com/IJ2T3vc.png\"></p>\n", "title": "How do I enable index downloads in Eclipse for Maven dependency search?", "tags": ["java", "eclipse", "maven"], "link": "http://stackoverflow.com/questions/24252256/how-do-i-enable-index-downloads-in-eclipse-for-maven-dependency-search/24494049#24494049", "question_id": 24252256, "answer_id": 24494049}, {"body": "<p>Tick 'Full Index Enabled' and then 'Rebuild Index' of the central repository in 'Global Repositories' under <code>Window &gt; Show View &gt; Other &gt; Maven &gt; Maven Repositories</code>, and it should work.</p>\n\n<p>The rebuilding may take a long time depending on the speed of your internet connection, but eventually it works.</p>\n", "title": "How do I enable index downloads in Eclipse for Maven dependency search?", "tags": ["java", "eclipse", "maven"], "link": "http://stackoverflow.com/questions/24252256/how-do-i-enable-index-downloads-in-eclipse-for-maven-dependency-search/24855210#24855210", "question_id": 24252256, "answer_id": 24855210}], "creation_date": 1402953024, "score": 161, "link": "http://stackoverflow.com/questions/24252256/how-do-i-enable-index-downloads-in-eclipse-for-maven-dependency-search", "question_id": 24252256}, {"body": "<p>Is it possible to specify a custom thread pool for Java 8 <a href=\"http://docs.oracle.com/javase/tutorial/collections/streams/parallelism.html\">parallel stream</a>? I can not find it anywhere. </p>\n\n<p>Imagine that I have a server application and I would like to use parallel streams. But the application is large and multi-threaded so I want to compartmentalize it. I do not want a slow running task in one module of the applicationblock tasks from another module.</p>\n\n<p>If I can not use different thread pools for different modules, it means I can not safely use parallel streams in most of real world situations.</p>\n\n<p>Try the following example. There are some CPU intensive tasks executed in separate threads.\nThe tasks leverage parallel streams. The first task is broken, so each step takes 1 second (simulated by thread sleep). The issue is that other threads get stuck and wait for the broken task to finish. This is contrived example, but imagine a servlet app and someone submitting a long running task to the shared fork join pool. </p>\n\n<pre><code>public class ParallelTest {\n    public static void main(String[] args) throws InterruptedException {\n        ExecutorService es = Executors.newCachedThreadPool();\n\n        es.execute(() -&gt; runTask(1000)); //incorrect task\n        es.execute(() -&gt; runTask(0));\n        es.execute(() -&gt; runTask(0));\n        es.execute(() -&gt; runTask(0));\n        es.execute(() -&gt; runTask(0));\n        es.execute(() -&gt; runTask(0));\n\n\n        es.shutdown();\n        es.awaitTermination(60, TimeUnit.SECONDS);\n    }\n\n    private static void runTask(int delay) {\n        range(1, 1_000_000).parallel().filter(ParallelTest::isPrime).peek(i -&gt; Utils.sleep(delay)).max()\n                .ifPresent(max -&gt; System.out.println(Thread.currentThread() + \" \" + max));\n    }\n\n    public static boolean isPrime(long n) {\n        return n &gt; 1 &amp;&amp; rangeClosed(2, (long) sqrt(n)).noneMatch(divisor -&gt; n % divisor == 0);\n    }\n}\n</code></pre>\n", "tags": ["java", "concurrency", "parallel-processing", "java-8", "java-stream"], "title": "Custom thread pool in Java 8 parallel stream", "answers": [{"body": "<p>The parallel streams use the default ForkJoinPool which <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html\">by default has one less threads as you have processors</a>, as returned by <code>Runtime.getRuntime().availableProcessors()</code> (so parallel streams use all your processors because they also use the main thread):</p>\n\n<blockquote>\n  <p>For applications that require separate or custom pools, a ForkJoinPool may be constructed with a given target parallelism level; by default, equal to the number of available processors.</p>\n</blockquote>\n\n<p>To change the way parallel streams are executed, you can either</p>\n\n<ul>\n<li>submit the parallel stream execution to your own ForkJoinPool: <code>yourFJP.submit(() -&gt; stream.parallel().forEach(soSomething));</code> or</li>\n<li>you can change the size of the common pool using system properties: <code>System.setProperty(\"java.util.concurrent.ForkJoinPool.common.parallelism\", \"20\")</code> for a target parallelism of 20 threads.</li>\n</ul>\n\n<hr>\n\n<p>Example of the latter on my machine which has 8 processors. If I run the following program:</p>\n\n<pre><code>long start = System.currentTimeMillis();\nIntStream s = IntStream.range(0, 20);\n//System.setProperty(\"java.util.concurrent.ForkJoinPool.common.parallelism\", \"20\");\ns.parallel().forEach(i -&gt; {\n    try { Thread.sleep(100); } catch (Exception ignore) {}\n    System.out.print((System.currentTimeMillis() - start) + \" \");\n});\n</code></pre>\n\n<p>The output is:</p>\n\n<blockquote>\n  <p>215 216 216 216 216 216 216 216 315 316 316 316 316 316 316 316 415 416 416 416</p>\n</blockquote>\n\n<p>So you can see that the parallel stream processes 8 items at a time, i.e. it uses 8 threads. However if I uncomment the commented line, the output is:</p>\n\n<blockquote>\n  <p>215 215 215 215 215 216 216 216 216 216 216 216 216 216 216 216 216 216 216 216</p>\n</blockquote>\n\n<p>This time the parallel stream has used 20 threads and all 20 elements in the stream have been processed comcurrently.</p>\n", "title": "Custom thread pool in Java 8 parallel stream", "tags": ["java", "concurrency", "parallel-processing", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/21163108/custom-thread-pool-in-java-8-parallel-stream/21172732#21172732", "question_id": 21163108, "answer_id": 21172732}, {"body": "<p>There actually is a trick how to execute a parallel operation in a specific fork-join pool. If you execute it as a task in a fork-join pool, it stays there and does not use the common one.  </p>\n\n<pre><code>ForkJoinPool forkJoinPool = new ForkJoinPool(2);\nforkJoinPool.submit(() -&gt;\n    //parallel task here, for example\n    IntStream.range(1, 1_000_000).parallel().filter(PrimesPrint::isPrime).collect(toList())\n).get();\n</code></pre>\n\n<p>The trick is based on <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinTask.html#fork--\">ForkJoinTask.fork</a> which specifies: \"Arranges to asynchronously execute this task in the pool the current task is running in, if applicable, or using the ForkJoinPool.commonPool() if not inForkJoinPool()\"</p>\n", "title": "Custom thread pool in Java 8 parallel stream", "tags": ["java", "concurrency", "parallel-processing", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/21163108/custom-thread-pool-in-java-8-parallel-stream/22269778#22269778", "question_id": 21163108, "answer_id": 22269778}, {"body": "<p>Alternatively to the trick of triggering the parallel computation inside your own forkJoinPool you can also pass that pool to the CompletableFuture.supplyAsync method like in:</p>\n\n<pre><code>ForkJoinPool forkJoinPool = new ForkJoinPool(2);\nCompletableFuture&lt;List&lt;Integer&gt;&gt; primes = CompletableFuture.supplyAsync(() -&gt;\n    //parallel task here, for example\n    range(1, 1_000_000).parallel().filter(PrimesPrint::isPrime).collect(toList()), \n    forkJoinPool\n);\n</code></pre>\n", "title": "Custom thread pool in Java 8 parallel stream", "tags": ["java", "concurrency", "parallel-processing", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/21163108/custom-thread-pool-in-java-8-parallel-stream/27752931#27752931", "question_id": 21163108, "answer_id": 27752931}, {"body": "<p>To measure the actual number of used threads, you can check <code>Thread.activeCount()</code>:</p>\n\n<pre><code>    Runnable r = () -&gt; IntStream\n            .range(-42, +42)\n            .parallel()\n            .map(i -&gt; Thread.activeCount())\n            .max()\n            .ifPresent(System.out::println);\n\n    ForkJoinPool.commonPool().submit(r).join();\n    new ForkJoinPool(42).submit(r).join();\n</code></pre>\n\n<p>This can produce on a 4-core CPU an output like:</p>\n\n<pre><code>5 // common pool\n23 // custom pool\n</code></pre>\n\n<p>Without <code>.parallel()</code> it gives:</p>\n\n<pre><code>3 // common pool\n4 // custom pool\n</code></pre>\n", "title": "Custom thread pool in Java 8 parallel stream", "tags": ["java", "concurrency", "parallel-processing", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/21163108/custom-thread-pool-in-java-8-parallel-stream/34930831#34930831", "question_id": 21163108, "answer_id": 34930831}, {"body": "<p>Until now, I used the solutions described in the answers of this question. Now, I came up with a little library called <a href=\"https://github.com/ferstl/parallel-stream-support\" rel=\"nofollow\">Parallel Stream Support</a> for that:</p>\n\n<pre><code>ForkJoinPool pool = new ForkJoinPool(NR_OF_THREADS);\nParallelIntStreamSupport.range(1, 1_000_000, pool)\n    .filter(PrimesPrint::isPrime)\n    .collect(toList())\n</code></pre>\n\n<p>But as @PabloMatiasGomez pointed out in the comments, there are drawbacks regarding the splitting mechanism of parallel streams which depends heavily on the size of the common pool. See <a href=\"http://stackoverflow.com/questions/28985704/parallel-stream-from-a-hashset-doesnt-run-in-parallel\">Parallel stream from a HashSet doesn&#39;t run in parallel</a> .</p>\n\n<p>I am using this solution only to have separate pools for different types of work but I can not set the size of the common pool to 1 even if I don't use it.</p>\n", "title": "Custom thread pool in Java 8 parallel stream", "tags": ["java", "concurrency", "parallel-processing", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/21163108/custom-thread-pool-in-java-8-parallel-stream/38859532#38859532", "question_id": 21163108, "answer_id": 38859532}, {"body": "<p>Using a ForkJoinPool and submit for a parallel stream does not reliably use all threads. If you look at this ( <a href=\"http://stackoverflow.com/questions/28985704/parallel-stream-from-a-hashset-doesnt-run-in-parallel\">Parallel stream from a HashSet doesn&#39;t run in parallel</a> ) and this ( <a href=\"http://stackoverflow.com/questions/36947336/why-does-the-parallel-stream-not-use-all-the-threads-of-the-forkjoinpool\">Why does the parallel stream not use all the threads of the ForkJoinPool?</a> ), you'll see the reasoning.</p>\n\n<p>Short version: if ForkJoinPool/submit does not work for you, use </p>\n\n<pre><code>System.setProperty(\"java.util.concurrent.ForkJoinPool.common.parallelism\", \"10\");\n</code></pre>\n", "title": "Custom thread pool in Java 8 parallel stream", "tags": ["java", "concurrency", "parallel-processing", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/21163108/custom-thread-pool-in-java-8-parallel-stream/39172410#39172410", "question_id": 21163108, "answer_id": 39172410}], "creation_date": 1389878797, "score": 161, "link": "http://stackoverflow.com/questions/21163108/custom-thread-pool-in-java-8-parallel-stream", "question_id": 21163108}, {"body": "<p>I want to do some programming with the latest JavaFX, which requires Java 8. I'm using IntelliJ 13 CE and Mac OS X 9 Mavericks. I ran Oracle's Java 8 installer, and the files look like they ended up at </p>\n\n<pre><code>/Library/Java/JavaVirtualMachines/jdk1.8.0_05.jdk\n</code></pre>\n\n<p>but previous versions are at </p>\n\n<pre><code>/System/Library/Java/JavaFrameworks/jdk1.6....\n</code></pre>\n\n<p>Not sure why the latest installer puts this in <code>/Library</code> instead of <code>/System/Library</code> (nor what the difference is). But <code>/usr/libexec/java_home</code> doesn't find 1.8, so all the posts I've found on how to set your current java version don't work. I've tried adding a symbolic link to make it look like 1.8 is in the <code>/System/Library...</code> path, but it doesn't help. <code>/usr/libexec/java_home -V</code> still only lists the old java 1.6.</p>\n\n<p>Ironically, the \"Java\" control panel under System Preferences shows only java 1.8!</p>\n\n<p>Why doesn't Oracle's installer put it where it really goes? And how can I work around this problem?</p>\n", "tags": ["java", "osx-mavericks"], "title": "How to install java 8 on Mac", "answers": [{"body": "<p>I also had the same problem. But after little hit and trial, I was able to resolve the issue.</p>\n\n<p>Try removing 1.6 sdk by sudo rm and restart your mac.</p>\n\n<p>Download again the .dmg file. Chances are that the .dmg installer you downloaded, might be corrupt. Install again.</p>\n\n<p>Run following command after  installation. It gives path for jdk 8.\n/usr/libexec/java_home -v 1.8</p>\n\n<p>Also you can run and see jdk 8 folder. The files may be hidden.\nls -al /Library/Java/JavaVirtualMachines/</p>\n", "title": "How to install java 8 on Mac", "tags": ["java", "osx-mavericks"], "link": "http://stackoverflow.com/questions/24342886/how-to-install-java-8-on-mac/24833265#24833265", "question_id": 24342886, "answer_id": 24833265}, {"body": "<p>Don't rely on Oracle to install Java properly on your mac.</p>\n\n<p>Use <a href=\"http://brew.sh/\">HomeBrew</a>:</p>\n\n<pre><code>brew update\nbrew cask install java\n</code></pre>\n\n<p>If you want to manage multiple versions of Java on your mac, consider using <a href=\"http://www.jenv.be/\">jenv</a>.</p>\n", "title": "How to install java 8 on Mac", "tags": ["java", "osx-mavericks"], "link": "http://stackoverflow.com/questions/24342886/how-to-install-java-8-on-mac/28635465#28635465", "question_id": 24342886, "answer_id": 28635465}, {"body": "<p>I have applications that use both Java 7 and 8 and have to go back and forth all the time.</p>\n\n<p>I use this script written by Johan:</p>\n\n<p><a href=\"http://www.jayway.com/2014/01/15/how-to-switch-jdk-version-on-mac-os-x-maverick/\">http://www.jayway.com/2014/01/15/how-to-switch-jdk-version-on-mac-os-x-maverick/</a></p>\n\n<p>You can now set it at startup or call the script afterwards.<br>\nInstall the JDK for Mac.</p>\n\n<p><strong>Java 7</strong></p>\n\n<p><a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html\">http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html</a></p>\n\n<p><strong>Java 8</strong></p>\n\n<p><a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></p>\n", "title": "How to install java 8 on Mac", "tags": ["java", "osx-mavericks"], "link": "http://stackoverflow.com/questions/24342886/how-to-install-java-8-on-mac/30022259#30022259", "question_id": 24342886, "answer_id": 30022259}, {"body": "<p>on <strong>El Capitan</strong>, after installing the brew...</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>$ brew update\n### $ brew tap caskroom/cask ### NOT NEEDED ANYMORE\n$ brew cask install java\n</code></pre>\n", "title": "How to install java 8 on Mac", "tags": ["java", "osx-mavericks"], "link": "http://stackoverflow.com/questions/24342886/how-to-install-java-8-on-mac/32811065#32811065", "question_id": 24342886, "answer_id": 32811065}, {"body": "<p>An option that I am starting to really like for running applications on my local computer is to use Docker. You can simply run your application within the official JDK container - meaning that you don't have to worry about getting everything set up on your local machine (or worry about running multiple different versions of the JDK for different apps etc)</p>\n\n<p>Although this might not help you with your current installation issues, it is a solution which means you can side-step the minefield of issues related with trying to get Java running correctly on your dev machine!</p>\n\n<p><strong>The benefits are:</strong></p>\n\n<ol>\n<li>No need to set up any version of Java on your local machine (you'll just run Java within a container which you pull from Docker Hub)</li>\n<li>Very easy to switch to different versions of Java by simply changing the tag on the container.</li>\n<li>Project dependencies are installed within the container - so if you mess up your config you can simply nuke the container and start again.  </li>\n</ol>\n\n<p><strong>A very simple example:</strong> </p>\n\n<p>Create a <code>Dockerfile</code>:</p>\n\n<pre><code>FROM java:8\nCOPY . /usr/src/myapp\nWORKDIR /usr/src/myapp\n</code></pre>\n\n<ul>\n<li>Here we are specifying the Java container running version 8 of the SDK (<code>java:8</code> - to use Java 7, you could just specify: <code>java:7</code>) </li>\n<li>We are mapping the local directory with the directory: <code>/usr/src/myapp</code> inside the container</li>\n</ul>\n\n<p>Create a <code>docker-compose.yml</code> file:</p>\n\n<pre><code>version: \"2\"\n\nservices:\n  java:\n    build: .\n    volumes:\n      - .:/usr/src/myapp\n</code></pre>\n\n<p>Now, assume we have this Java file: </p>\n\n<p><strong>HelloWorld.java</strong></p>\n\n<pre><code>public class HelloWorld {\n    public static void main(String[] args) {        \n        System.out.println(\"Hello, World\");\n    }\n}\n</code></pre>\n\n<p>So we have the following file structure:</p>\n\n<pre><code>.\n|_ Dockerfile\n|_ docker-compose.yml\n|_ HelloWorld.java\n</code></pre>\n\n<p>You can do various Java things like:</p>\n\n<p><strong>compile:</strong></p>\n\n<pre><code>docker-compose run --rm java javac HelloWorld.java \n</code></pre>\n\n<ul>\n<li>You should note that the HelloWorld.class shows up in your current directory (this is cause we've mapped the current directory to the location inside the container where our code exists</li>\n</ul>\n\n<p><strong>run:</strong></p>\n\n<pre><code>docker-compose run --rm java java HelloWorld \n</code></pre>\n\n<ul>\n<li>Note: the first time you run this it will fetch the image etc. This will take a while - it only happens the first time</li>\n<li><code>docker-compose run</code> - runs a command from within the container</li>\n<li><code>-rm</code> tells docker to remove the container once the command is finished running</li>\n<li><code>java</code> is the name of the service/container (from our docker-compose file) against which this command will run</li>\n<li>the rest of the line is the command to run inside the container.</li>\n</ul>\n\n<p>This is quite a cool way of dealing with running different versions of Java for different apps without making a complete mess of your local setup :).</p>\n\n<p>Here is a slightly more complex example which has <a href=\"https://github.com/TangentSolutions/Spring-REST-Seed\">Maven and a simple Spring app</a></p>\n\n<p><strong>Disclaimer:</strong></p>\n\n<ul>\n<li>I haven't really tried this within an IDE like IntelliJ - so not entirely sure how that aspect of things would work. <a href=\"https://blog.jetbrains.com/idea/2015/03/docker-support-in-intellij-idea-14-1/\">Though it looks like docker support is coming</a></li>\n<li>Here is a significantly more complex example running <a href=\"https://github.com/rohitghatol/spring-boot-microservices\">Microservices with Spring Boot, Zuul and Docker</a></li>\n</ul>\n", "title": "How to install java 8 on Mac", "tags": ["java", "osx-mavericks"], "link": "http://stackoverflow.com/questions/24342886/how-to-install-java-8-on-mac/36623215#36623215", "question_id": 24342886, "answer_id": 36623215}, {"body": "<p>Using brew</p>\n\n<pre><code>brew install Caskroom/cask/java\n</code></pre>\n", "title": "How to install java 8 on Mac", "tags": ["java", "osx-mavericks"], "link": "http://stackoverflow.com/questions/24342886/how-to-install-java-8-on-mac/37033444#37033444", "question_id": 24342886, "answer_id": 37033444}, {"body": "<p>Below steps worked for me.</p>\n\n<p>1) Uninstall all jdks</p>\n\n<p>In the Terminal window Copy and Paste the command below:</p>\n\n<pre><code>sudo rm -fr /Library/Internet\\ Plug-Ins/JavaAppletPlugin.plugin\n\nsudo rm -fr /Library/PreferencePanes/JavaControlPanel.prefpane\n</code></pre>\n\n<p>2) Install APPLE jdk.</p>\n\n<p><a href=\"https://support.apple.com/kb/DL1572?locale=en_US\" rel=\"nofollow\">https://support.apple.com/kb/DL1572?locale=en_US</a></p>\n\n<p>3) Download latest JDK from Oracle and install it , for me it was JDK 1.82</p>\n\n<p><a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html\" rel=\"nofollow\">http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html</a></p>\n\n<p>Thats all it will work like a charm. </p>\n", "title": "How to install java 8 on Mac", "tags": ["java", "osx-mavericks"], "link": "http://stackoverflow.com/questions/24342886/how-to-install-java-8-on-mac/37525596#37525596", "question_id": 24342886, "answer_id": 37525596}], "creation_date": 1403363112, "score": 160, "link": "http://stackoverflow.com/questions/24342886/how-to-install-java-8-on-mac", "question_id": 24342886}, {"body": "<p>I have an interface which returns <code>java.lang.Iterable&lt;T&gt;</code>.</p>\n\n<p>I would like to manipulate that result using the Java 8 Stream API.</p>\n\n<p>However Iterable can't \"Stream\". </p>\n\n<p>Any better idea how to use streams (without converting Iterable to List)?</p>\n", "tags": ["java", "java-8", "java-stream", "iterable"], "title": "Convert Iterable to Stream using Java 8 JDK", "answers": [{"body": "<p>You can easily create a <code>Stream</code> out of an <code>Iterable</code> or <code>Iterator</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;T&gt; Stream&lt;T&gt; stream(Iterable&lt;T&gt; iterable) {\n    return StreamSupport.stream(\n        Spliterators.spliteratorUnknownSize(\n            iterable.iterator(),\n            Spliterator.ORDERED\n        ),\n        false\n    );\n}\n</code></pre>\n", "title": "Convert Iterable to Stream using Java 8 JDK", "tags": ["java", "java-8", "java-stream", "iterable"], "link": "http://stackoverflow.com/questions/23932061/convert-iterable-to-stream-using-java-8-jdk/23932216#23932216", "question_id": 23932061, "answer_id": 23932216}, {"body": "<p>There's a much better answer than using <code>spliteratorUnknownSize</code> directly, which is both easier and gets a better result.  <code>Iterable</code> has a <code>spliterator()</code> method, so you should just use that to get your spliterator.  In the worst case, its the same code (the default implementation uses <code>spliteratorUnknownSize</code>), but in the more common case, where your <code>Iterable</code> is already a collection, you'll get a better spliterator, and therefore better stream performance (maybe even good parallelism.)  Its also less code: </p>\n\n<pre><code>StreamSupport.stream(iterable.spliterator(), false)\n             .filter(...)\n             .moreStreamOps(...);\n</code></pre>\n\n<p>As you can see, getting a stream from an Iterable (see <a href=\"http://stackoverflow.com/questions/23114015/why-does-iterablet-not-provide-stream-and-parallelstream-methods?rq=1\">Why does Iterable&lt;T&gt; not provide stream() and parallelStream() methods?</a>) is not very painful.  </p>\n", "title": "Convert Iterable to Stream using Java 8 JDK", "tags": ["java", "java-8", "java-stream", "iterable"], "link": "http://stackoverflow.com/questions/23932061/convert-iterable-to-stream-using-java-8-jdk/23936723#23936723", "question_id": 23932061, "answer_id": 23936723}, {"body": "<p>I would like to suggest using <a href=\"https://github.com/jOOQ/jOOL\" rel=\"nofollow\">JOOL</a> library, it hides spliterator magic behind the Seq.seq(iterable) call and also provides a whole bunch of additional useful functionality.</p>\n", "title": "Convert Iterable to Stream using Java 8 JDK", "tags": ["java", "java-8", "java-stream", "iterable"], "link": "http://stackoverflow.com/questions/23932061/convert-iterable-to-stream-using-java-8-jdk/33549645#33549645", "question_id": 23932061, "answer_id": 33549645}, {"body": "<p>I've created this class:</p>\n\n<pre><code>public class Streams {\n    /**\n     * Converts Iterable to stream\n     */\n    public static &lt;T&gt; Stream&lt;T&gt;  streamOf(final Iterable&lt;T&gt; iterable) {\n        return toStream(iterable, false);\n    }\n\n    /**\n     * Converts Iterable to parallel stream\n     */\n    public static &lt;T&gt; Stream&lt;T&gt; parallelStreamOf(final Iterable&lt;T&gt; iterable) {\n        return toStream(iterable, true);\n    }\n\n    private static &lt;T&gt; Stream&lt;T&gt; toStream(final Iterable&lt;T&gt; iterable, final boolean isParallel) {\n        return StreamSupport.stream(iterable.spliterator(), isParallel);\n    }\n}\n</code></pre>\n\n<p>I think it's perfectly readable because you don't have to think about spliterators and booleans (isParallel).</p>\n", "title": "Convert Iterable to Stream using Java 8 JDK", "tags": ["java", "java-8", "java-stream", "iterable"], "link": "http://stackoverflow.com/questions/23932061/convert-iterable-to-stream-using-java-8-jdk/36766889#36766889", "question_id": 23932061, "answer_id": 36766889}], "creation_date": 1401362188, "score": 147, "link": "http://stackoverflow.com/questions/23932061/convert-iterable-to-stream-using-java-8-jdk", "question_id": 23932061}, {"body": "<p>I'm playing with lambdas in Java 8 and I came across warning <code>local variables referenced from a lambda expression must be final or effectively final</code>. I know that when I use variables inside anonymous class they must be final in outer class, but still - what is the difference between <em>final</em> and <em>effectively final</em>?</p>\n", "tags": ["java", "lambda", "inner-classes", "final", "java-8"], "title": "Difference between final and effectively final", "answers": [{"body": "<blockquote>\n  <p>... starting in Java SE 8, a local class can access local variables and parameters of the enclosing block that are final or effectively final. <strong>A variable or parameter whose value is never changed after it is initialized is effectively final.</strong></p>\n</blockquote>\n\n<p>For example, suppose that the variable numberLength is not declared final, and you add the marked assignment statement in the PhoneNumber constructor:</p>\n\n<pre><code>PhoneNumber(String phoneNumber) {\n    numberLength = 7;   // &lt;== assignment to numberLength\n    String currentNumber = phoneNumber.replaceAll(\n        regularExpression, \"\");\n    if (currentNumber.length() == numberLength)\n        formattedPhoneNumber = currentNumber;\n    else\n        formattedPhoneNumber = null;\n}\n</code></pre>\n\n<p>Because of this assignment statement, the variable numberLength is not effectively final anymore. <strong>As a result, the Java compiler generates an error message similar to \"local variables referenced from an inner class must be final or effectively final\"</strong> where the inner class PhoneNumber tries to access the numberLength variable:</p>\n\n<p><a href=\"http://codeinventions.blogspot.in/2014/07/difference-between-final-and.html\">http://codeinventions.blogspot.in/2014/07/difference-between-final-and.html</a></p>\n\n<p><a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/localclasses.html\">http://docs.oracle.com/javase/tutorial/java/javaOO/localclasses.html</a></p>\n", "title": "Difference between final and effectively final", "tags": ["java", "lambda", "inner-classes", "final", "java-8"], "link": "http://stackoverflow.com/questions/20938095/difference-between-final-and-effectively-final/20938132#20938132", "question_id": 20938095, "answer_id": 20938132}, {"body": "<p>According to the <a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/localclasses.html#accessing-members-of-an-enclosing-class\" rel=\"nofollow\">docs</a>:</p>\n\n<blockquote>\n  <p>A variable or parameter whose value is never changed after it is initialized is effectively final.</p>\n</blockquote>\n\n<p>Basically, if the compiler finds a variable does not appear in assignments outside of its initialization, then the variable is considered <em>effectively final</em>.</p>\n\n<p>For example, consider some class:</p>\n\n<pre><code>public class Foo {\n\n    public void baz(int bar) {\n        // While the next line is commented, bar is effectively final\n        // and while it is uncommented, the assignment means it is not\n        // effectively final.\n\n        // bar = 2;\n    }\n}\n</code></pre>\n", "title": "Difference between final and effectively final", "tags": ["java", "lambda", "inner-classes", "final", "java-8"], "link": "http://stackoverflow.com/questions/20938095/difference-between-final-and-effectively-final/20938195#20938195", "question_id": 20938095, "answer_id": 20938195}, {"body": "<pre><code>public class LambdaScopeTest {\n    public int x = 0;        \n    class FirstLevel {\n        public int x = 1;    \n        void methodInFirstLevel(int x) {\n\n            // The following statement causes the compiler to generate\n            // the error \"local variables referenced from a lambda expression\n            // must be final or effectively final\" in statement A:\n            //\n            // x = 99; \n\n        }\n    }    \n}\n</code></pre>\n\n<p>As others have said, a variable or parameter whose value is never changed after it is initialized is effectively final. In the above code, if you change the value of <code>x</code> in inner class <code>FirstLevel</code> then the compiler will give you the error message:</p>\n\n<blockquote>\n  <p>Local variables referenced from a lambda expression must be final or effectively final.</p>\n</blockquote>\n", "title": "Difference between final and effectively final", "tags": ["java", "lambda", "inner-classes", "final", "java-8"], "link": "http://stackoverflow.com/questions/20938095/difference-between-final-and-effectively-final/20938364#20938364", "question_id": 20938095, "answer_id": 20938364}, {"body": "<p>I find the simplest way to explain \"effectively final\" is to imagine adding the <code>final</code> modifier to a variable declaration. If, with this change, the program continues to behave in the same way, both at compile time and at run time, then that variable is effectively final.</p>\n\n<p>[Edit: Henno Vermeulen, in a comment below, points out a minor exception to this rule. The rule is still very simple and useful, but syntax rules mean it isn't universally applicable.] </p>\n", "title": "Difference between final and effectively final", "tags": ["java", "lambda", "inner-classes", "final", "java-8"], "link": "http://stackoverflow.com/questions/20938095/difference-between-final-and-effectively-final/20940888#20940888", "question_id": 20938095, "answer_id": 20940888}, {"body": "<blockquote>\n  <p>However, starting in Java SE 8, a local class can access local variables and parameters of the >enclosing block that are final or effectively final.</p>\n</blockquote>\n\n<p>This didn't start on Java 8, I use this since long time.\nThis code used (before java 8) to be legal:</p>\n\n<pre><code>String str = \"\"; //&lt;-- not accesible from anonymous classes implementation\nfinal String strFin = \"\"; //&lt;-- accesible \nbutton.addActionListener(new ActionListener() {\n    @Override\n    public void actionPerformed(ActionEvent e) {\n         String ann = str; // &lt;---- error, must be final (IDE's gives the hint);\n         String ann = strFin; // &lt;---- legal;\n         String str = \"legal statement on java 7,\"\n                +\"Java 8 doesn't allow this, it thinks that I'm trying to use the str declared before the anonymous impl.\"; \n         //we are forced to use another name than str\n    }\n);\n</code></pre>\n", "title": "Difference between final and effectively final", "tags": ["java", "lambda", "inner-classes", "final", "java-8"], "link": "http://stackoverflow.com/questions/20938095/difference-between-final-and-effectively-final/25650441#25650441", "question_id": 20938095, "answer_id": 25650441}, {"body": "<p>When a lambda expression uses an assigned local variable from its enclosing space there is an important restriction. A lambda expression may only use local variable whose value doesn't change. That restriction is referred as \"<strong>variable capture</strong>\" which is described as; <em>lambda expression capture values, not variables</em>. <br/>\nThe local variables that a lambda expression may use are known as \"<strong>effectively final</strong>\". <br/>\nAn effectively final variable is one whose value does not change after it is first assigned. There is no need to explicitly declare such a variable as final, although doing so would not be an error.<br/>\nLet's see it with an example, we have a local variable i which is initialized with the value 7, with in the lambda expression we are trying to change that value by assigning a new value to i. This will result in compiler error - \"<em>Local variable i defined in an enclosing scope must be final or effectively final</em>\"</p>\n\n<pre><code>@FunctionalInterface\ninterface IFuncInt {\n    int func(int num1, int num2);\n    public String toString();\n}\n\npublic class LambdaVarDemo {\n\n    public static void main(String[] args){             \n        int i = 7;\n        IFuncInt funcInt = (num1, num2) -&gt; {\n            i = num1 + num2;\n            return i;\n        };\n    }   \n}\n</code></pre>\n\n<p>Read more here - <a href=\"http://netjs.blogspot.in/2015/06/lambda-expression-and-variable-scope.html\" rel=\"nofollow\">http://netjs.blogspot.in/2015/06/lambda-expression-and-variable-scope.html</a></p>\n", "title": "Difference between final and effectively final", "tags": ["java", "lambda", "inner-classes", "final", "java-8"], "link": "http://stackoverflow.com/questions/20938095/difference-between-final-and-effectively-final/32123550#32123550", "question_id": 20938095, "answer_id": 32123550}, {"body": "<p>From a article by 'Brian Goetz',</p>\n\n<blockquote>\n  <p>'Effectively final' is a variable which would not give compiler error\n  if it were to be appended by 'final'</p>\n</blockquote>\n\n<p><a href=\"http://cr.openjdk.java.net/~briangoetz/lambda/lambda-state-final.html\">lambda-state-final- Brian Goetz</a></p>\n", "title": "Difference between final and effectively final", "tags": ["java", "lambda", "inner-classes", "final", "java-8"], "link": "http://stackoverflow.com/questions/20938095/difference-between-final-and-effectively-final/33726267#33726267", "question_id": 20938095, "answer_id": 33726267}, {"body": "<p>A variable is <strong>final</strong> or <strong>effectively final</strong> when <strong>it's initialized once</strong> and it's never <strong>mutated</strong> in its owner class. And we <strong>can't initialize</strong> it in <strong>loops</strong> or <strong>inner classes</strong>.</p>\n\n<p><strong>Final</strong>:</p>\n\n<pre><code>final int number;\nnumber = 23;\n</code></pre>\n\n<p><strong>Effectively Final</strong>:</p>\n\n<pre><code>int number;\nnumber = 34;\n</code></pre>\n", "title": "Difference between final and effectively final", "tags": ["java", "lambda", "inner-classes", "final", "java-8"], "link": "http://stackoverflow.com/questions/20938095/difference-between-final-and-effectively-final/34137804#34137804", "question_id": 20938095, "answer_id": 34137804}], "creation_date": 1388950231, "score": 147, "link": "http://stackoverflow.com/questions/20938095/difference-between-final-and-effectively-final", "question_id": 20938095}, {"body": "<p>I am working on a Android application and created a model with a large number of variables. Since I am planning to add getters and setters for all of them.</p>\n\n<p>Is there a shortcut in Android Studio for automatically generating the getters and setters in a given class?</p>\n", "tags": ["java", "android", "android-studio", "keyboard-shortcuts"], "title": "How to automatically generate getters and setters in Android Studio", "answers": [{"body": "<p>Using <kbd>Alt</kbd>+ <kbd>Insert</kbd> in the editor, you may easily generate getter and setter methods for any fields of your class.</p>\n\n<p><img src=\"http://i.stack.imgur.com/0SOIV.png\" alt=\"enter image description here\"></p>\n\n<p>and then using shift or control button, select all the variables you need to add getters and setters</p>\n", "title": "How to automatically generate getters and setters in Android Studio", "tags": ["java", "android", "android-studio", "keyboard-shortcuts"], "link": "http://stackoverflow.com/questions/23897215/how-to-automatically-generate-getters-and-setters-in-android-studio/23897216#23897216", "question_id": 23897215, "answer_id": 23897216}, {"body": "<p>In OSX, <kbd>\u2318</kbd>+<kbd>N</kbd> by default.</p>\n\n<p>Right-click and choose \"Generate...\" to see current mapping. You can select multiple fields for which to generate getters/setters with one step.</p>\n\n<p>See <a href=\"http://www.jetbrains.com/idea/webhelp/generating-getters-and-setters.html\" rel=\"nofollow\">http://www.jetbrains.com/idea/webhelp/generating-getters-and-setters.html</a></p>\n", "title": "How to automatically generate getters and setters in Android Studio", "tags": ["java", "android", "android-studio", "keyboard-shortcuts"], "link": "http://stackoverflow.com/questions/23897215/how-to-automatically-generate-getters-and-setters-in-android-studio/25672624#25672624", "question_id": 23897215, "answer_id": 25672624}, {"body": "<p>This answer deals with your question but is not exactly <em>an answer</em> to it. =) It's an interesting library I found out recently and I want to share with you.</p>\n\n<hr>\n\n<p><a href=\"http://projectlombok.org/index.html\" rel=\"nofollow\">Project Lombok</a> can generate common methods, such as getters, setters, equals() and hashCode(), toString(), for your classes automatically. It replaces them with annotations reducing boilerplate code. To see an example of code written using Lombok watch a video on the main page or read <a href=\"http://projectlombok.org/features/Data.html\" rel=\"nofollow\">this article</a>.</p>\n\n<p>Example:</p>\n\n<pre><code>import lombok.Getter;\nimport lombok.Setter;\n\npublic class Profile {\n\n  @Getter @Setter\n  private String username;\n\n  @Getter @Setter\n  private String password;\n\n}\n</code></pre>\n\n<p>Android development with Lombok is possible. Lombok should be a compile-time only dependency, as otherwise the entirety of Lombok will end up in your DEX files, wasting precious space. Gradle snippet:</p>\n\n<pre><code>dependencies {\n    provided 'org.projectlombok:lombok:1.14.+'\n}\n</code></pre>\n\n<p>There are plugins for IDEs (they are needed to support Lombok features at development time). Also there is <a href=\"https://github.com/mg6maciej/hrisey\" rel=\"nofollow\">Hrisey</a> library which is based on Lombok. Simply put, it's Lombok + Parcellable support.</p>\n", "title": "How to automatically generate getters and setters in Android Studio", "tags": ["java", "android", "android-studio", "keyboard-shortcuts"], "link": "http://stackoverflow.com/questions/23897215/how-to-automatically-generate-getters-and-setters-in-android-studio/27463911#27463911", "question_id": 23897215, "answer_id": 27463911}, {"body": "<p>Right click on <code>Editor</code> then Select <code>Source -&gt; Generate Getters and Setters</code> or press <code>Alt</code> + <code>Shift</code> + <code>S</code>\n<img src=\"http://i.stack.imgur.com/HbrV0.png\" alt=\"enter image description here\"></p>\n", "title": "How to automatically generate getters and setters in Android Studio", "tags": ["java", "android", "android-studio", "keyboard-shortcuts"], "link": "http://stackoverflow.com/questions/23897215/how-to-automatically-generate-getters-and-setters-in-android-studio/27719943#27719943", "question_id": 23897215, "answer_id": 27719943}, {"body": "<p>Just in case someone is working with Eclipse</p>\n\n<p>Windows 8.1 OS | Eclipse Idle Luna</p>\n\n<p>Declare top level variable  <code>private String username</code> Eclipse kindly generate a warning on the left of your screen click that warning and couple of suggestions show up, then select generate.<img src=\"http://i.stack.imgur.com/9RlKt.png\" alt=\"enter image description here\">  </p>\n", "title": "How to automatically generate getters and setters in Android Studio", "tags": ["java", "android", "android-studio", "keyboard-shortcuts"], "link": "http://stackoverflow.com/questions/23897215/how-to-automatically-generate-getters-and-setters-in-android-studio/29535740#29535740", "question_id": 23897215, "answer_id": 29535740}, {"body": "<p>As noted <a href=\"https://code.google.com/p/android/issues/detail?id=60539\" rel=\"nofollow\">here</a>, you can also customise the getter/setter generation to take prefixes and suffixes (e.g. m for instance variables) into account. Go to <code>File-&gt;Settings</code> and expand <code>Code Style</code>, select <code>Java</code>, and add your prefixes/suffixes under the <code>Code Generation</code> tab.</p>\n", "title": "How to automatically generate getters and setters in Android Studio", "tags": ["java", "android", "android-studio", "keyboard-shortcuts"], "link": "http://stackoverflow.com/questions/23897215/how-to-automatically-generate-getters-and-setters-in-android-studio/30423695#30423695", "question_id": 23897215, "answer_id": 30423695}, {"body": "<p>use code=>generate=>getter() and setter() dialog  ,select all the variables ,generate all the getter(),setter() methods at one time.</p>\n", "title": "How to automatically generate getters and setters in Android Studio", "tags": ["java", "android", "android-studio", "keyboard-shortcuts"], "link": "http://stackoverflow.com/questions/23897215/how-to-automatically-generate-getters-and-setters-in-android-studio/34506608#34506608", "question_id": 23897215, "answer_id": 34506608}, {"body": "<p><strong>Android Studio &amp; OSx</strong> :</p>\n\n<p>Press <kbd>cmd</kbd>+<kbd>n</kbd> > <kbd>Generate</kbd> > <kbd>Getter and Setter</kbd></p>\n\n<p><strong>Android Studio &amp; Windows</strong> :</p>\n\n<p>Press <kbd>Alt</kbd> + <kbd>Insert</kbd> > <kbd>Generate</kbd> > <kbd>Getter and Setter</kbd></p>\n", "title": "How to automatically generate getters and setters in Android Studio", "tags": ["java", "android", "android-studio", "keyboard-shortcuts"], "link": "http://stackoverflow.com/questions/23897215/how-to-automatically-generate-getters-and-setters-in-android-studio/35282992#35282992", "question_id": 23897215, "answer_id": 35282992}, {"body": "<p>You can use <code>AndroidAccessors</code> Plugin of <code>Android Studio</code> to generate getter and setter without m as prefix to methods </p>\n\n<p>Ex: mId;\n Will generate <code>getId()</code> and <code>setId()</code> instead of  <code>getmId()</code> and <code>setmId()</code></p>\n\n<p><a href=\"http://i.stack.imgur.com/vtE8z.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/vtE8z.png\" alt=\"plugin screenshot\"></a></p>\n", "title": "How to automatically generate getters and setters in Android Studio", "tags": ["java", "android", "android-studio", "keyboard-shortcuts"], "link": "http://stackoverflow.com/questions/23897215/how-to-automatically-generate-getters-and-setters-in-android-studio/36759835#36759835", "question_id": 23897215, "answer_id": 36759835}, {"body": "<p>Android Studio &amp; Windows :</p>\n\n<pre><code>fn + alt + insert\n</code></pre>\n\n<p><a href=\"http://i.stack.imgur.com/MbzMZ.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/MbzMZ.png\" alt=\"enter image description here\"></a></p>\n", "title": "How to automatically generate getters and setters in Android Studio", "tags": ["java", "android", "android-studio", "keyboard-shortcuts"], "link": "http://stackoverflow.com/questions/23897215/how-to-automatically-generate-getters-and-setters-in-android-studio/38854892#38854892", "question_id": 23897215, "answer_id": 38854892}, {"body": "<p>You can generate getter and setter by following steps:</p>\n\n<ul>\n<li>Declare variables first.\n\n<li>click on <kbd>ALT</kbd>+<kbd>Insert</kbd> on keyboard placing cursor down to variable declaration part\n<li>now select constructor and press <kbd>Ctrl</kbd>+<kbd>A</kbd> on keyboard and click on <kbd>Enter</kbd> to create constructor.\n<li>Now again placing cursor at next line of constructor closing brace , click <kbd>ALT</kbd>+<kbd>INSERT</kbd> and select getter and setter and again press <kbd>CTRL</kbd>+<kbd>A</kbd> to select all variables and hit <kbd>Enter</kbd>.\n\n</ul>\n\n<p>That's it. Happy coding!!</p>\n", "title": "How to automatically generate getters and setters in Android Studio", "tags": ["java", "android", "android-studio", "keyboard-shortcuts"], "link": "http://stackoverflow.com/questions/23897215/how-to-automatically-generate-getters-and-setters-in-android-studio/38975466#38975466", "question_id": 23897215, "answer_id": 38975466}, {"body": "<p>Use <kbd>Ctrl</kbd>+<kbd>Enter</kbd> on Mac to get list of options to generate setter, getter, constructor etc</p>\n\n<p><a href=\"http://i.stack.imgur.com/FCgB8.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/FCgB8.png\" alt=\"enter image description here\"></a></p>\n", "title": "How to automatically generate getters and setters in Android Studio", "tags": ["java", "android", "android-studio", "keyboard-shortcuts"], "link": "http://stackoverflow.com/questions/23897215/how-to-automatically-generate-getters-and-setters-in-android-studio/39201756#39201756", "question_id": 23897215, "answer_id": 39201756}], "creation_date": 1401218033, "score": 139, "link": "http://stackoverflow.com/questions/23897215/how-to-automatically-generate-getters-and-setters-in-android-studio", "question_id": 23897215}, {"body": "<p>In an attempt to fully understand how to solve Java's multiple inheritance problems I have a classic question that I need clarified.</p>\n\n<p>Lets say I have class <code>Animal</code> this has sub classes <code>Bird</code> and <code>Horse</code> and I need to make a class <code>Pegasus</code> that extends from <code>Bird</code> and <code>Horse</code> since <code>Pegasus</code> is both a bird and a horse.</p>\n\n<p>I think this is the classic diamond problem. From what I can understand the classic way to solve this is to make the <code>Animal</code>, <code>Bird</code> and <code>Horse</code> classes interfaces and implement <code>Pegasus</code> from them. </p>\n\n<p>I was wondering if there was another way to solve the problem in which I can still create objects for birds and horses. If there was a way to be able to create animals also that would be great but not necessary.</p>\n", "tags": ["java", "oop", "multiple-inheritance", "diamond-problem", "multiple-interface-implem"], "title": "Java Multiple Inheritance", "answers": [{"body": "<p>You could create interfaces for animal classes (class in the biological meaning), such as <code>public interface Equidae</code> for horses and <code>public interface Avialae</code> for birds (I'm no biologist, so the terms may be wrong).</p>\n\n<p>Then you can still create a </p>\n\n<pre><code>public class Bird implements Avialae {\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>public class Horse implements Equidae {}\n</code></pre>\n\n<p>and also</p>\n\n<pre><code>public class Pegasus implements Avialae, Equidae {}\n</code></pre>\n\n<hr>\n\n<h3>Adding from the comments:</h3>\n\n<p>In order to reduce duplicate code, you could create an abstract class that contains most of the common code of the animals you want to implement.</p>\n\n<pre><code>public abstract class AbstractHorse implements Equidae {}\n\npublic class Horse extends AbstractHorse {}\n\npublic class Pegasus extends AbstractHorse implements Avialae {}\n</code></pre>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>I'd like to add one more detail. As <a href=\"http://stackoverflow.com/questions/21824402/java-multiple-inheritance/21824485#comment33030508_21824485\">Brian remarks</a>, this is something the OP already knew. </p>\n\n<p>However, I want to emphasize, that I suggest to bypass the \"multi-inheritance\" problem with interfaces and that I don't recommend to use interfaces that represent already a concrete type (such as Bird) but more a behavior (others refer to duck-typing, which is good, too, but I mean just: the biological class of birds, Avialae). I also don't recommend to use interface names starting with a capital 'I', such as <code>IBird</code>, which just tells nothing about why you need an interface. That's the difference to the question: construct the inheritance hierarchy using interfaces, use abstract classes when useful, implement concrete classes where needed and use delegation if appropriate.</p>\n", "title": "Java Multiple Inheritance", "tags": ["java", "oop", "multiple-inheritance", "diamond-problem", "multiple-interface-implem"], "link": "http://stackoverflow.com/questions/21824402/java-multiple-inheritance/21824485#21824485", "question_id": 21824402, "answer_id": 21824485}, {"body": "<p>Technically speaking, you can only extend one class at a time and implement multiple interfaces, but when laying hands on software engineering, I would rather suggest a problem specific solution not generally answerable. By the way, it is good OO practice, <em>not</em> to extend concrete classes/only extend abstract classes to prevent unwanted inheritance behavior - there is no such thing as an \"animal\" and no use of an animal object but only concrete animals.</p>\n", "title": "Java Multiple Inheritance", "tags": ["java", "oop", "multiple-inheritance", "diamond-problem", "multiple-interface-implem"], "link": "http://stackoverflow.com/questions/21824402/java-multiple-inheritance/21824548#21824548", "question_id": 21824402, "answer_id": 21824548}, {"body": "<p>Interfaces don't simulate multiple inheritance. Java creators considered multiple inheritance wrong, so there is no such thing in Java.</p>\n\n<p>If you want to combine the functionality of two classes into one - use object composition. I.e.</p>\n\n<pre><code>public class Main {\n    private Component1 component1 = new Component1();    \n    private Component2 component2 = new Component2();\n}\n</code></pre>\n\n<p>And if you want to expose certain methods, define them and let them delegate the call to the corresponding controller.</p>\n\n<p>Here interfaces may come handy - if <code>Component1</code> implements interface <code>Interface1</code> and <code>Component2</code> implements <code>Interface2</code>, you can define</p>\n\n<pre><code>class Main implements Interface1, Interface2\n</code></pre>\n\n<p>So that you can use objects interchangeably where the context allows it.</p>\n\n<p>So in my point of view, you can't get into diamond problem.</p>\n", "title": "Java Multiple Inheritance", "tags": ["java", "oop", "multiple-inheritance", "diamond-problem", "multiple-interface-implem"], "link": "http://stackoverflow.com/questions/21824402/java-multiple-inheritance/21824614#21824614", "question_id": 21824402, "answer_id": 21824614}, {"body": "<p>Ehm, your class can be the subclass for only 1 other, but still, you can have as many interfaces implemented, as you wish. </p>\n\n<p>A Pegasus is in fact a horse (it is a special case of a horse), which is able to fly (which is the \"skill\" of this special horse). From the other hand, you can say, the Pegasus is a bird, which can walk, and is 4legged - it all depends, how it is easier for you to write the code.</p>\n\n<p>Like in your case you can say:</p>\n\n<pre><code>abstract class Animal {\n   private Integer hp = 0; \n   public void eat() { \n      hp++;\u00a0\n   }\n}\ninterface AirCompatible { \n   public void fly(); \n}\nclass Bird extends Animal implements AirCompatible { \n   @Override\n   public void fly() {  \n       //Do something useful\n   }\n} \nclass Horse extends Animal {\n   @Override\n   public void eat() { \n      hp+=2;\u00a0\n   }\n\n}\nclass Pegasus extends Horse implements AirCompatible {\n   //now every time when your Pegasus eats, will receive +2 hp  \n   @Override\n   public void fly() {  \n       //Do something useful\n   }\n}\n</code></pre>\n", "title": "Java Multiple Inheritance", "tags": ["java", "oop", "multiple-inheritance", "diamond-problem", "multiple-interface-implem"], "link": "http://stackoverflow.com/questions/21824402/java-multiple-inheritance/21824628#21824628", "question_id": 21824402, "answer_id": 21824628}, {"body": "<p>you can have an interface hierarchy and then extend your classes from selected interfaces :</p>\n\n<pre><code>public interface IAnimal {\n}\n\npublic interface IBird implements IAnimal {\n}\n\npublic  interface IHorse implements IAnimal {\n}\n\npublic interface IPegasus implements IBird,IHorse{\n}\n</code></pre>\n\n<p>and then define your classes as needed,  by extending a specific interface :</p>\n\n<pre><code>public class Bird implements IBird {\n}\n\npublic class Horse implements IHorse{\n}\n\npublic class Pegasus implements IPegasus {\n}\n</code></pre>\n", "title": "Java Multiple Inheritance", "tags": ["java", "oop", "multiple-inheritance", "diamond-problem", "multiple-interface-implem"], "link": "http://stackoverflow.com/questions/21824402/java-multiple-inheritance/21824634#21824634", "question_id": 21824402, "answer_id": 21824634}, {"body": "<p>I have a stupid idea:</p>\n\n<pre><code>public class Pegasus {\n    private Horse horseFeatures; \n    private Bird birdFeatures; \n\n   public Pegasus(Horse horse, Bird bird) {\n     this.horseFeatures = horse;\n     this.birdFeatures = bird;\n   }\n\n  public void jump() {\n    horseFeatures.jump();\n  }\n\n  public void fly() {\n    birdFeatures.fly();\n  }\n}\n</code></pre>\n", "title": "Java Multiple Inheritance", "tags": ["java", "oop", "multiple-inheritance", "diamond-problem", "multiple-interface-implem"], "link": "http://stackoverflow.com/questions/21824402/java-multiple-inheritance/21824834#21824834", "question_id": 21824402, "answer_id": 21824834}, {"body": "<p>May I suggest the concept of <a href=\"http://en.wikipedia.org/wiki/Duck_typing\">Duck-typing</a>?</p>\n\n<p>Most likely you would tend to make the Pegasus extend a Bird and a Horse interface but duck typing actually suggests that you should rather inherit <em>behaviour</em>. As already stated in the comments, a pegasus is not a bird but it can fly. So your Pegasus should rather inherit a <code>Flyable</code>-interface and lets say a <code>Gallopable</code>-interface.</p>\n\n<p>This kind of concept is utilized in the <a href=\"http://programmers.stackexchange.com/questions/203210/is-context-inheritance-as-shown-by-head-first-design-patterns-duck-example-ir\">Strategy Pattern</a>. The given example actually shows you how a duck inherits the <code>FlyBehaviour</code> and <code>QuackBehaviour</code> and still there can be ducks, e.g. the <code>RubberDuck</code>, which can't fly. They could have also made the <code>Duck</code> extend a <code>Bird</code>-class but then they would have given up some flexibility, because every <code>Duck</code> would be able to fly, even the poor <code>RubberDuck</code>.</p>\n", "title": "Java Multiple Inheritance", "tags": ["java", "oop", "multiple-inheritance", "diamond-problem", "multiple-interface-implem"], "link": "http://stackoverflow.com/questions/21824402/java-multiple-inheritance/21824978#21824978", "question_id": 21824402, "answer_id": 21824978}, {"body": "<p>I think it depends very much on your needs, and how your animal classes are to be used in your code.</p>\n\n<p>If you want to be able to make use of methods and features of your Horse and Bird implementations inside your Pegasus class, then you could implement Pegasus as a <a href=\"http://en.wikipedia.org/wiki/Composite_pattern\">composition</a> of a Bird and a Horse:</p>\n\n<pre><code>public class Animals {\n\n    public interface Animal{\n        public int getNumberOfLegs();\n        public boolean canFly();\n        public boolean canBeRidden();\n    }\n\n    public interface Bird extends Animal{\n        public void doSomeBirdThing();\n    }\n    public interface Horse extends Animal{\n        public void doSomeHorseThing();\n    }\n    public interface Pegasus extends Bird,Horse{\n\n    }\n\n    public abstract class AnimalImpl implements Animal{\n        private final int numberOfLegs;\n\n        public AnimalImpl(int numberOfLegs) {\n            super();\n            this.numberOfLegs = numberOfLegs;\n        }\n\n        @Override\n        public int getNumberOfLegs() {\n            return numberOfLegs;\n        }\n    }\n\n    public class BirdImpl extends AnimalImpl implements Bird{\n\n        public BirdImpl() {\n            super(2);\n        }\n\n        @Override\n        public boolean canFly() {\n            return true;\n        }\n\n        @Override\n        public boolean canBeRidden() {\n            return false;\n        }\n\n        @Override\n        public void doSomeBirdThing() {\n            System.out.println(\"doing some bird thing...\");\n        }\n\n    }\n\n    public class HorseImpl extends AnimalImpl implements Horse{\n\n        public HorseImpl() {\n            super(4);\n        }\n\n        @Override\n        public boolean canFly() {\n            return false;\n        }\n\n        @Override\n        public boolean canBeRidden() {\n            return true;\n        }\n\n        @Override\n        public void doSomeHorseThing() {\n            System.out.println(\"doing some horse thing...\");\n        }\n\n    }\n\n    public class PegasusImpl implements Pegasus{\n\n        private final Horse horse = new HorseImpl();\n        private final Bird bird = new BirdImpl();\n\n\n        @Override\n        public void doSomeBirdThing() {\n            bird.doSomeBirdThing();\n        }\n\n        @Override\n        public int getNumberOfLegs() {\n            return horse.getNumberOfLegs();\n        }\n\n        @Override\n        public void doSomeHorseThing() {\n            horse.doSomeHorseThing();\n        }\n\n\n        @Override\n        public boolean canFly() {\n            return true;\n        }\n\n        @Override\n        public boolean canBeRidden() {\n            return true;\n        }\n    }\n}\n</code></pre>\n\n<p>Another possibility is to use an <a href=\"http://en.wikipedia.org/wiki/Entity_component_system\">Entity-Component-System</a> approach instead of inheritance for defining your animals. Of course this means, that you will not have individual Java classes of the animals, but instead they are only defined by their components.</p>\n\n<p>Some pseudo code for an Entity-Component-System approach could look like this:</p>\n\n<pre><code>public void createHorse(Entity entity){\n    entity.setComponent(NUMER_OF_LEGS, 4);\n    entity.setComponent(CAN_FLY, false);\n    entity.setComponent(CAN_BE_RIDDEN, true);\n    entity.setComponent(SOME_HORSE_FUNCTIONALITY, new HorseFunction());\n}\n\npublic void createBird(Entity entity){\n    entity.setComponent(NUMER_OF_LEGS, 2);\n    entity.setComponent(CAN_FLY, true);\n    entity.setComponent(CAN_BE_RIDDEN, false);\n    entity.setComponent(SOME_BIRD_FUNCTIONALITY, new BirdFunction());\n}\n\npublic void createPegasus(Entity entity){\n    createHorse(entity);\n    createBird(entity);\n    entity.setComponent(CAN_BE_RIDDEN, true);\n}\n</code></pre>\n", "title": "Java Multiple Inheritance", "tags": ["java", "oop", "multiple-inheritance", "diamond-problem", "multiple-interface-implem"], "link": "http://stackoverflow.com/questions/21824402/java-multiple-inheritance/21825111#21825111", "question_id": 21824402, "answer_id": 21825111}, {"body": "<p>There are two fundamental approaches to combining objects together:</p>\n\n<ul>\n<li>The first is <strong>Inheritance</strong>. As you have already identified the limitations of inheritance mean that you cannot do what you need here.</li>\n<li>The second is <strong>Composition</strong>. Since inheritance has failed you need to use composition.</li>\n</ul>\n\n<p>The way this works is that you have an Animal object. Within that object you then add further objects that give the properties and behaviors that you require.</p>\n\n<p>For example:</p>\n\n<ul>\n<li><strong>Bird</strong> extends <strong>Animal</strong> implements <strong>IFlier</strong></li>\n<li><strong>Horse</strong> extends <strong>Animal</strong> implements <strong>IHerbivore, IQuadruped</strong></li>\n<li><strong>Pegasus</strong> extends <strong>Animal</strong> implements <strong>IHerbivore, IQuadruped, IFlier</strong></li>\n</ul>\n\n<p>Now <code>IFlier</code> just looks like this:</p>\n\n<pre><code> interface IFlier {\n     Flier getFlier();\n }\n</code></pre>\n\n<p>So <code>Bird</code> looks like this:</p>\n\n<pre><code> class Bird extends Animal implements IFlier {\n      Flier flier = new Flier();\n      public Flier getFlier() { return flier; }\n }\n</code></pre>\n\n<p>Now you have all the advantages of Inheritance. You can re-use code. You can have a collection of IFliers, and can use all the other advantages of polymorphism, etc.</p>\n\n<p>However you also have all the flexibility from Composition. You can apply as many different interfaces and composite backing class as you like to each type of <code>Animal</code> - with as much control as you need over how each bit is set up.</p>\n\n<p><strong>Strategy Pattern alternative approach to composition</strong></p>\n\n<p>An alternative approach depending on what and how you are doing is to have the <code>Animal</code> base class contain an internal collection to keep the list of different behaviors. In that case you end up using something closer to the Strategy Pattern. That does give advantages in terms of simplifying the code (for example <code>Horse</code> doesn't need to know anything about <code>Quadruped</code> or <code>Herbivore</code>) but if you don't also do the interface approach you lose a lot of the advantages of polymorphism, etc.</p>\n", "title": "Java Multiple Inheritance", "tags": ["java", "oop", "multiple-inheritance", "diamond-problem", "multiple-interface-implem"], "link": "http://stackoverflow.com/questions/21824402/java-multiple-inheritance/21825368#21825368", "question_id": 21824402, "answer_id": 21825368}, {"body": "<p>Java does not have a Multiple inheritance problem, since it does not have multiple inheritance. This is by design, in order to solve the real multiple inheritance problem (The diamond problem).</p>\n\n<p>There are different strategies for mitigating the problem. The most immediately achievable one being the Composite object that Pavel suggests (essentially how C++ handles it). I don't know if multiple inheritence via C3 linearization (or similar) is on the cards for Java's future, but I doubt it.</p>\n\n<p>If your question is academic, then the correct solution is that Bird and Horse are more concrete, and it is false to assume that a Pegasus is simply a Bird and a Horse combined. It would be more correct to say that a Pegasus has certain intrinsic properties in common with Birds and Horses (that is they have maybe common ancestors). This can be sufficiently modeled as Moritz' answer points out.</p>\n", "title": "Java Multiple Inheritance", "tags": ["java", "oop", "multiple-inheritance", "diamond-problem", "multiple-interface-implem"], "link": "http://stackoverflow.com/questions/21824402/java-multiple-inheritance/21825376#21825376", "question_id": 21824402, "answer_id": 21825376}, {"body": "<p>In Java 8, which is still in the development phase as of Februrary 2014, you could use <a href=\"http://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html\">default methods</a> to achieve a sort of C++-like multiple inheritance.\nYou could also have a look at <a href=\"http://zeroturnaround.com/rebellabs/java-8-explained-default-methods/\">this tutorial</a> which shows a few examples that should be easier to start working with than the official documentation.</p>\n", "title": "Java Multiple Inheritance", "tags": ["java", "oop", "multiple-inheritance", "diamond-problem", "multiple-interface-implem"], "link": "http://stackoverflow.com/questions/21824402/java-multiple-inheritance/21825940#21825940", "question_id": 21824402, "answer_id": 21825940}, {"body": "<p>As you will already be aware, multiple inheritance of classes in Java is not possible, but it's possible with interfaces. You may also want to consider using the composition design pattern.</p>\n\n<p>I wrote a very comprehensive article on composition a few years ago...</p>\n\n<p><a href=\"http://codereview.stackexchange.com/questions/14542/multiple-inheritance-and-composition-with-java-and-c-updated\">http://codereview.stackexchange.com/questions/14542/multiple-inheritance-and-composition-with-java-and-c-updated</a></p>\n", "title": "Java Multiple Inheritance", "tags": ["java", "oop", "multiple-inheritance", "diamond-problem", "multiple-interface-implem"], "link": "http://stackoverflow.com/questions/21824402/java-multiple-inheritance/21829872#21829872", "question_id": 21824402, "answer_id": 21829872}, {"body": "<p>It is safe to keep a horse in a stable with a half door, as a horse cannot get over a half door.   Therefore I setup a horse housing service that accepts any item of type horse and puts it in a stable with a half door.</p>\n\n<p>So is a horse like animal that can fly even a horse?</p>\n\n<p>I used to think a lot about multiple inheritance, however now that I have been programming for over 15 years, I no longer care about implementing multiple inheritance.</p>\n\n<p>More often than not, when I have tried to cope with a design that pointed toward multiple inheritance, I have later come to release that I had miss understood the problem domain.</p>\n\n<p>OR</p>\n\n<blockquote>\n  <p><a href=\"http://lostechies.com/derickbailey/2009/02/11/solid-development-principles-in-motivational-pictures/\">If it looks like a duck and quacks like a duck but it needs\n  batteries, you probably have the wrong abstraction</a>.</p>\n</blockquote>\n", "title": "Java Multiple Inheritance", "tags": ["java", "oop", "multiple-inheritance", "diamond-problem", "multiple-interface-implem"], "link": "http://stackoverflow.com/questions/21824402/java-multiple-inheritance/21853996#21853996", "question_id": 21824402, "answer_id": 21853996}, {"body": "<p>To solve the problem of mutiple inheritance in Java &rarr; interface is used</p>\n\n<p><a href=\"http://www.tutorial4us.com/Download/Hyderabad%20notes/K%20V%20Rao/K%20V%20Rao%20Core%20Java%20PDF%202.pdf\" rel=\"nofollow\"><em>J2EE (core JAVA) Notes By Mr. K.V.R Page 51</em></a></p>\n\n<blockquote>\n  <p>Day - 27</p>\n  \n  <ol>\n  <li><strong>Interfaces are basically used to develop user defined data types.</strong></li>\n  <li><strong>With respect to interfaces we can achieve the concept of multiple inheritances.</strong></li>\n  <li>With interfaces we can achieve the concept of polymorphism, dynamic binding and hence we can improve the performance of a JAVA program in\n  turns of memory space and execution time.</li>\n  </ol>\n  \n  <p>An interface is a construct which contains the collection of purely\n  undefined methods or an interface is a collection of purely abstract\n  methods.</p>\n  \n  <p>[...]</p>\n  \n  <p>Day - 28:</p>\n  \n  <p><strong>Syntax-1 for reusing the features of interface(s) to class:</strong></p>\n\n<pre><code>[abstract] class &lt;clsname&gt; implements &lt;intf 1&gt;,&lt;intf 2&gt;.........&lt;intf n&gt;\n{\n    variable declaration;\n    method definition or declaration;\n};\n</code></pre>\n  \n  <p>In the above syntax clsname represents name of the class which is\n  inheriting the features from \u2018n\u2019 number of interfaces. \u2018Implements\u2019 is\n  a keyword which is used to inherit the features of    interface(s) to a\n  derived class.</p>\n  \n  <p>[...]</p>\n  \n  <p>Syntax-2 inheriting \u2018n\u2019 number of interfaces to another interface:</p>\n\n<pre><code>interface &lt;intf 0 name&gt; extends &lt;intf 1&gt;,&lt;intf 2&gt;.........&lt;intf n&gt;\n{     \n    variable declaration cum initialization;\n    method declaration;\n};\n</code></pre>\n  \n  <p>[...]</p>\n  \n  <p>Syntax-3:</p>\n\n<pre><code>[abstract] class &lt;derived class name&gt; extends &lt;base class name&gt; implements &lt;intf 1&gt;,&lt;intf 2&gt;.........&lt;intf n&gt;\n{\n  variable declaration;\n  method definition or declaration;\n};\n</code></pre>\n</blockquote>\n", "title": "Java Multiple Inheritance", "tags": ["java", "oop", "multiple-inheritance", "diamond-problem", "multiple-interface-implem"], "link": "http://stackoverflow.com/questions/21824402/java-multiple-inheritance/21888353#21888353", "question_id": 21824402, "answer_id": 21888353}, {"body": "<p>To reduce the complexity and simplify the language, multiple inheritance is not supported in java.</p>\n\n<p>Consider a scenario where A, B and C are three classes. The C class inherits A and B classes. If A and B classes have same method and you call it from child class object, there will be ambiguity to call method of A or B class.</p>\n\n<p>Since compile time errors are better than runtime errors, java renders compile time error if you inherit 2 classes. So whether you have same method or different, there will be compile time error now.</p>\n\n<pre><code>class A {  \n    void msg() {\n        System.out.println(\"From A\");\n    }  \n}\n\nclass B {  \n    void msg() {\n        System.out.println(\"From B\");\n    }  \n}\n\nclass C extends A,B { // suppose if this was possible\n    public static void main(String[] args) {  \n        C obj = new C();  \n        obj.msg(); // which msg() method would be invoked?  \n    }\n} \n</code></pre>\n", "title": "Java Multiple Inheritance", "tags": ["java", "oop", "multiple-inheritance", "diamond-problem", "multiple-interface-implem"], "link": "http://stackoverflow.com/questions/21824402/java-multiple-inheritance/28698472#28698472", "question_id": 21824402, "answer_id": 28698472}], "creation_date": 1392626813, "score": 130, "link": "http://stackoverflow.com/questions/21824402/java-multiple-inheritance", "question_id": 21824402}, {"body": "<p>Note: this question originates from a dead link which was a previous SO question, but here goes...</p>\n\n<p>See this code (note: I do know that this code won't \"work\" and that <code>Integer::compare</code> should be used -- I just extracted it from the linked question):</p>\n\n<pre><code>final ArrayList &lt;Integer&gt; list \n    = IntStream.rangeClosed(1, 20).boxed().collect(Collectors.toList());\n\nSystem.out.println(list.stream().max(Integer::max).get());\nSystem.out.println(list.stream().min(Integer::min).get());\n</code></pre>\n\n<p>According to the javadoc of <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#min-java.util.Comparator-\"><code>.min()</code></a> and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#max-java.util.Comparator-\"><code>.max()</code></a>, the argument of both should be a <code>Comparator</code>. Yet here the method references are to static methods of the <a href=\"http://download.java.net/jdk8/docs/api/java/lang/Integer.html\"><code>Integer</code></a> class.</p>\n\n<p>So, why does this compile at all?</p>\n", "tags": ["java", "java-8", "java-stream"], "title": "Java 8 stream&#39;s .min() and .max(): why does this compile?", "answers": [{"body": "<p>This works because <code>Integer::min</code> resolves to an implementation of the <code>Comparable&lt;Integer&gt;</code> interface.</p>\n\n<p>The method reference of <code>Integer::min</code> resolves to <code>Integer.min(int a, int b)</code>, resolved to <code>IntBinaryOperator</code>, and presumably autoboxing occurs somewhere making it a <code>BinaryOperator&lt;Integer&gt;</code>.</p>\n\n<p>And the <code>min()</code> resp <code>max()</code> methods of the <code>Stream&lt;Integer&gt;</code> ask the <code>Comparable&lt;Integer&gt;</code> interface to be implemented.<br>\nNow this resolves to the single method <code>Integer compareTo(Integer o1, Integer o2)</code>. Which is of type <code>BinaryOperator&lt;Integer&gt;</code>.</p>\n\n<p>And thus the magic has happened as both methods are a <code>BinaryOperator&lt;Integer&gt;</code>.</p>\n", "title": "Java 8 stream&#39;s .min() and .max(): why does this compile?", "tags": ["java", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22561614/java-8-streams-min-and-max-why-does-this-compile/22561687#22561687", "question_id": 22561614, "answer_id": 22561687}, {"body": "<p><code>Comparator</code> is a <em>functional interface</em>, and <code>Integer::max</code> complies with that interface (after autoboxing/unboxing is taken into consideration). It takes two <code>int</code> values and returns an <code>int</code> - just as you'd expect a <code>Comparator&lt;Integer&gt;</code> to (again, squinting to ignore the Integer/int difference).</p>\n\n<p>However, I wouldn't expect it to do the right thing, given that <code>Integer.max</code> doesn't comply with the <em>semantics</em> of <code>Comparator.compare</code>. And indeed it doesn't really work in general. For example, make one small change:</p>\n\n<pre><code>for (int i = 1; i &lt;= 20; i++)\n    list.add(-i);\n</code></pre>\n\n<p>... and now the <code>max</code> value is -20 and the <code>min</code> value is -1.</p>\n\n<p>Instead, both calls should use <code>Integer::compare</code>:</p>\n\n<pre><code>System.out.println(list.stream().max(Integer::compare).get());\nSystem.out.println(list.stream().min(Integer::compare).get());\n</code></pre>\n", "title": "Java 8 stream&#39;s .min() and .max(): why does this compile?", "tags": ["java", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22561614/java-8-streams-min-and-max-why-does-this-compile/22561690#22561690", "question_id": 22561614, "answer_id": 22561690}, {"body": "<p>Let me explain what is happening here, because it isn't obvious!</p>\n\n<p>First, <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#max-java.util.Comparator-\"><code>Stream.max()</code></a> accepts an instance of <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html\"><code>Comparator</code></a> so that items in the stream can be compared against each other to find the minimum or maximum, in some optimal order that you don't need to worry too much about.</p>\n\n<p>So the question is, of course, why is <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#max-int-int-\"><code>Integer::max</code></a> accepted?  After all it's not a comparator!</p>\n\n<p>The answer is in the way that the new lambda functionality works in Java 8.  It relies on a concept which is informally known as \"single abstract method\" interfaces, or \"SAM\" interfaces.  The idea is that any interface with one abstract method can be automatically implemented by any lambda - or method reference - whose method signature is a match for the one method on the interface.  So examining the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html\"><code>Comparator</code></a> interface (simple version):</p>\n\n<pre><code>public Comparator&lt;T&gt; {\n    int compare(T o1, T o2);\n}\n</code></pre>\n\n<p>If a method is looking for a <code>Comparator&lt;Integer&gt;</code>, then it's essentially looking for this signature:</p>\n\n<pre><code>int xxx(Integer o1, Integer o2);\n</code></pre>\n\n<p>I use \"xxx\" <strong>because the method name is not used for matching purposes</strong>.</p>\n\n<p>Therefore, both <code>Integer.min(int a, int b)</code> and <code>Integer.max(int a, int b)</code> are close enough that autoboxing will allow this to appear as a <code>Comparator&lt;Integer&gt;</code> in a method context.</p>\n", "title": "Java 8 stream&#39;s .min() and .max(): why does this compile?", "tags": ["java", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22561614/java-8-streams-min-and-max-why-does-this-compile/22561853#22561853", "question_id": 22561614, "answer_id": 22561853}, {"body": "<p>Apart from the information given by David M. Lloyd one could add that the mechanism that allows this is called <em>target typing</em>.</p>\n\n<p>The idea is that the type the compiler assigns to a lambda expressions or a method references does not depend only on the expression itself, but also on where it is used.</p>\n\n<p>The target of an expression is the variable to which its result is assigned or the parameter to which its result is passed.</p>\n\n<p>Lambda expressions and method references are assigned a type which matches the type of their target, if such a type can be found.</p>\n\n<p>See the <a href=\"http://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html\" rel=\"nofollow\">Type Inference section</a> in the Java Tutorial for more information.</p>\n", "title": "Java 8 stream&#39;s .min() and .max(): why does this compile?", "tags": ["java", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22561614/java-8-streams-min-and-max-why-does-this-compile/22809146#22809146", "question_id": 22561614, "answer_id": 22809146}], "creation_date": 1395412273, "score": 130, "link": "http://stackoverflow.com/questions/22561614/java-8-streams-min-and-max-why-does-this-compile", "question_id": 22561614}, {"body": "<p>I've just started playing with Java 8 lambdas and I'm trying to implement some of the things that I'm used to in functional languages.</p>\n\n<p>For example, most functional languages have some kind of find function that operates on sequences, or lists that returns the first element, for which the predicate is <code>true</code>. The only way I can see to achieve this in Java 8 is:</p>\n\n<pre><code>lst.stream()\n    .filter(x -&gt; x &gt; 5)\n    .findFirst()\n</code></pre>\n\n<p>However this seems inefficient to me, as the filter will scan the whole list, at least to my understanding (which could be wrong). Is there a better way?  </p>\n", "tags": ["java", "java-8", "java-stream"], "title": "Java 8 find first element by predicate", "answers": [{"body": "<p>No, filter does not scan the whole stream. It's an intermediate operation, which returns a lazy stream (actually all intermediate operations return a lazy stream). To convince you, you can simply do the following test:</p>\n\n<pre><code>List&lt;Integer&gt; list = Arrays.asList(1, 10, 3, 7, 5);\nint a = list.stream()\n            .peek(num -&gt; System.out.println(\"will filter \" + num))\n            .filter(x -&gt; x &gt; 5)\n            .findFirst()\n            .get();\nSystem.out.println(a);\n</code></pre>\n\n<p>Which outputs:</p>\n\n<pre><code>will filter 1\nwill filter 10\n10\n</code></pre>\n\n<p>You see that only the two first elements of the stream are actually processed.</p>\n\n<p>So you can go with your approach which is perfectly fine.</p>\n", "title": "Java 8 find first element by predicate", "tags": ["java", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/23696317/java-8-find-first-element-by-predicate/23696571#23696571", "question_id": 23696317, "answer_id": 23696571}, {"body": "<blockquote>\n  <p>However this seems inefficient to me, as the filter will scan the whole list</p>\n</blockquote>\n\n<p>No it won't - it will \"break\" as soon as the first element satisfying the predicate is found. You can read more about laziness in the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html\">stream package javadoc</a>, in particular (emphasis mine):</p>\n\n<blockquote>\n  <p>Many stream operations, such as filtering, mapping, or duplicate removal, can be implemented lazily, exposing opportunities for optimization. For example, \"find the first String with three consecutive vowels\" need not examine all the input strings. Stream operations are divided into intermediate (Stream-producing) operations and terminal (value- or side-effect-producing) operations. <strong><em>Intermediate operations are always lazy.</em></strong></p>\n</blockquote>\n", "title": "Java 8 find first element by predicate", "tags": ["java", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/23696317/java-8-find-first-element-by-predicate/23696598#23696598", "question_id": 23696317, "answer_id": 23696598}], "creation_date": 1400246899, "score": 129, "link": "http://stackoverflow.com/questions/23696317/java-8-find-first-element-by-predicate", "question_id": 23696317}, {"body": "<p>I am wondering why the <code>Iterable</code> interface does not provide the <code>stream()</code> and <code>parallelStream()</code> methods. Consider the following class:</p>\n\n<pre><code>public class Hand implements Iterable&lt;Card&gt; {\n    private final List&lt;Card&gt; list = new ArrayList&lt;&gt;();\n    private final int capacity;\n\n    //...\n\n    @Override\n    public Iterator&lt;Card&gt; iterator() {\n        return list.iterator();\n    }\n}\n</code></pre>\n\n<p>It is an implementation of a <em>Hand</em> as you can have cards in your hand while playing a Trading Card Game.</p>\n\n<p>Essentially it wraps a <code>List&lt;Card&gt;</code>, ensures a maximum capacity and offers some other useful features. It is better as implementing it directly as a <code>List&lt;Card&gt;</code>.</p>\n\n<p>Now, for convienience I thought it would be nice to implement <code>Iterable&lt;Card&gt;</code>, such that you can use enhanced for-loops if you want to loop over it. (My <code>Hand</code> class also provides a <code>get(int index)</code> method, hence the <code>Iterable&lt;Card&gt;</code> is justified in my opinion.)</p>\n\n<p>The <code>Iterable</code> interface provides the following (left out javadoc):</p>\n\n<pre><code>public interface Iterable&lt;T&gt; {\n    Iterator&lt;T&gt; iterator();\n\n    default void forEach(Consumer&lt;? super T&gt; action) {\n        Objects.requireNonNull(action);\n        for (T t : this) {\n            action.accept(t);\n        }\n    }\n\n    default Spliterator&lt;T&gt; spliterator() {\n        return Spliterators.spliteratorUnknownSize(iterator(), 0);\n    }\n}\n</code></pre>\n\n<p>Now can you obtain a stream with:</p>\n\n<pre><code>Stream&lt;Hand&gt; stream = StreamSupport.stream(hand.spliterator(), false);\n</code></pre>\n\n<p>So onto the real question:</p>\n\n<ul>\n<li>Why does <code>Iterable&lt;T&gt;</code> not provide a default methods that implement <code>stream()</code> and <code>parallelStream()</code>, I see nothing that would make this impossible or unwanted?</li>\n</ul>\n\n<p>A related question I found is the following though: <a href=\"http://stackoverflow.com/questions/20129762/why-does-streamt-not-implement-iterablet\">Why does Stream&lt;T&gt; not implement Iterable&lt;T&gt;?</a><br>\nWhich is oddly enough suggesting it to do it somewhat the other way around.</p>\n", "tags": ["java", "java-8"], "title": "Why does Iterable&lt;T&gt; not provide stream() and parallelStream() methods?", "answers": [{"body": "<p>I did an investigation in several of the project lambda mailing lists and I think I found a few interesting discussions.</p>\n\n<p>I have not found a satisfactory explanation so far. After reading all this I concluded it was just an omission. But you can see here that it was discussed several times over the years during the design of the API.</p>\n\n<p><strong>Lambda Libs Spec Experts</strong></p>\n\n<p>I found a discussion about this in the <a href=\"http://mail.openjdk.java.net/mailman/listinfo/lambda-libs-spec-experts\" rel=\"nofollow\">Lambda Libs Spec Experts mailing list</a>:</p>\n\n<p>Under <a href=\"http://mail.openjdk.java.net/pipermail/lambda-libs-spec-experts/2013-March/001528.html\" rel=\"nofollow\">Iterable/Iterator.stream()</a> Sam Pullara said:</p>\n\n<blockquote>\n  <p>I was working with Brian on seeing how limit/substream\n  functionality[1] might be implemented and he suggested conversion to\n  Iterator was the right way to go about it. I had thought about that\n  solution but didn't find any obvious way to take an iterator and turn\n  it into a stream. It turns out it is in there, you just need to first\n  convert the iterator to a spliterator and then convert the spliterator\n  to a stream. So this brings me to revisit the whether we should have\n  these hanging off one of Iterable/Iterator directly or both.</p>\n  \n  <p>My suggestion is to at least have it on Iterator so you can move\n  cleanly between the two worlds and it would also be easily\n  discoverable rather than having to do:</p>\n  \n  <p>Streams.stream(Spliterators.spliteratorUnknownSize(iterator,\n  Spliterator.ORDERED))</p>\n</blockquote>\n\n<p>And then <a href=\"http://mail.openjdk.java.net/pipermail/lambda-libs-spec-experts/2013-March/001530.html\" rel=\"nofollow\">Brian Goetz responded</a>:</p>\n\n<blockquote>\n  <p>I think Sam's point was that there are plenty of library classes that\n  give you an Iterator but don't let you necessarily write your own\n  spliterator.  So all you can do is call\n  stream(spliteratorUnknownSize(iterator)).  Sam is suggesting that we\n  define Iterator.stream() to do that for you.  </p>\n  \n  <p>I would like to keep the stream() and spliterator() methods as being\n  for library writers / advanced users.</p>\n</blockquote>\n\n<p><a href=\"http://mail.openjdk.java.net/pipermail/lambda-libs-spec-experts/2013-March/001533.html\" rel=\"nofollow\">And later</a></p>\n\n<blockquote>\n  <p>\"Given that writing a Spliterator is easier than writing an Iterator,\n  I would prefer to just write a Spliterator instead of an Iterator (Iterator is so 90s :)\"</p>\n  \n  <p>You're missing the point, though.  There are zillions of classes out\n  there that <em>already</em> hand you an Iterator.  And many of them are not\n  spliterator-ready.</p>\n</blockquote>\n\n<p><strong>Previous Discussions in Lambda Mailing List</strong></p>\n\n<p>This may not be the answer you are looking for but in the <a href=\"http://mail.openjdk.java.net/mailman/listinfo/lambda-dev\" rel=\"nofollow\">Project Lambda mailing list</a> this was briefly discussed. Perhaps this helps to foster a broader discussion on the subject.</p>\n\n<p>In the words of Brian Goetz under <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2012-December/007131.html\" rel=\"nofollow\">Streams from Iterable</a>:</p>\n\n<blockquote>\n  <p>Stepping back...</p>\n  \n  <p>There are lots of ways to create a Stream.  The more information you \n  have about how to describe the elements, the more functionality and \n  performance the streams library can give you.  In order of least to\n  most  information, they are:</p>\n  \n  <p>Iterator</p>\n  \n  <p>Iterator + size</p>\n  \n  <p>Spliterator</p>\n  \n  <p>Spliterator that knows its size</p>\n  \n  <p>Spliterator that knows its size, and further knows that all sub-splits\n  know their size.</p>\n  \n  <p>(Some may be surprised to find that we can extract parallelism even\n  from  a dumb iterator in cases where Q (work per element) is\n  nontrivial.)</p>\n  \n  <p>If Iterable had a stream() method, it would just wrap an Iterator with\n  a  Spliterator, with no size information.  But, most things that are \n  Iterable <em>do</em> have size information.  Which means we're serving up \n  deficient streams.  That's not so good.</p>\n  \n  <p>One downside of the API practice outlined by Stephen here, of\n  accepting  Iterable instead of Collection, is that you are forcing\n  things through a  \"small pipe\" and therefore discarding size\n  information when it might be  useful.  That's fine if all you're doing\n  to do is forEach it, but if you  want to do more, its better if you\n  can preserve all the information you  want.</p>\n  \n  <p>The default provided by Iterable would be a crappy one indeed -- it \n  would discard size even though the vast majority of Iterables do know \n  that information.</p>\n</blockquote>\n\n<p><strong>Contradiction?</strong></p>\n\n<p>Although, it looks like the discussion is based on the changes that the Expert Group did to the initial design of Streams which was initially based on iterators.</p>\n\n<p>Even so, it is interesting to notice that in a interface like Collection, the stream method is defined as:</p>\n\n<pre><code>default Stream&lt;E&gt; stream() {\n   return StreamSupport.stream(spliterator(), false);\n}\n</code></pre>\n\n<p>Which could be the exact the same code being used in the Iterable interface. </p>\n\n<p>So, this is why I said this answer is probably not satisfactory, but still interesting for the discussion.</p>\n\n<p><strong>Evidence of Refactoring</strong></p>\n\n<p>Continuing with the analysis in the mailing list, it looks like the splitIterator method was originally in the Collection interface, and at some point in 2013 they moved it up to Iterable.</p>\n\n<p><a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2013-July/010419.html\" rel=\"nofollow\">Pull splitIterator up from Collection to Iterable</a>.</p>\n\n<p><strong>Conclusion/Theories?</strong></p>\n\n<p>Then chances are that the lack of the method in Iterable is just an omission, since it looks like they should have moved the stream method as well when they moved the splitIterator up from Collection to Iterable.</p>\n\n<p>If there are other reasons those are not evident. Somebody else has other theories?</p>\n", "title": "Why does Iterable&lt;T&gt; not provide stream() and parallelStream() methods?", "tags": ["java", "java-8"], "link": "http://stackoverflow.com/questions/23114015/why-does-iterablet-not-provide-stream-and-parallelstream-methods/23114500#23114500", "question_id": 23114015, "answer_id": 23114500}, {"body": "<p>This was not an omission; there was detailed discussion on the EG list in June of 2013.  </p>\n\n<p>The definitive discussion of the Expert Group is rooted at <a href=\"http://mail.openjdk.java.net/pipermail/lambda-libs-spec-experts/2013-June/001910.html\">this thread</a>.</p>\n\n<p>While it seemed \"obvious\" (even to the Expert Group, initially) that <code>stream()</code> seemed to make sense on <code>Iterable</code>, the fact that <code>Iterable</code> was so general became a problem, because the obvious signature:</p>\n\n<pre><code>Stream&lt;T&gt; stream()\n</code></pre>\n\n<p>was not always what you were going to want. Some things that were <code>Iterable&lt;Integer&gt;</code> would rather have their stream method return an <code>IntStream</code>, for example.  But putting the <code>stream()</code> method this high up in the hierarchy would make that impossible.  So instead, we made it really easy to make a <code>Stream</code> from an <code>Iterable</code>, by providing a <code>spliterator()</code> method. The implementation of <code>stream()</code> in <code>Collection</code> is just:</p>\n\n<pre><code>default Stream&lt;E&gt; stream() {\n    return StreamSupport.stream(spliterator(), false);\n}\n</code></pre>\n\n<p>Any client can get the stream they want from an <code>Iterable</code> with:</p>\n\n<pre><code>Stream s = StreamSupport.stream(iter.spliterator(), false);\n</code></pre>\n\n<p>In the end we concluded that adding <code>stream()</code> to <code>Iterable</code> would be a mistake.</p>\n", "title": "Why does Iterable&lt;T&gt; not provide stream() and parallelStream() methods?", "tags": ["java", "java-8"], "link": "http://stackoverflow.com/questions/23114015/why-does-iterablet-not-provide-stream-and-parallelstream-methods/23177907#23177907", "question_id": 23114015, "answer_id": 23177907}, {"body": "<p>If you know the size you could use <code>java.util.Collection</code> which provides the <code>stream()</code> method:</p>\n\n<pre><code>public class Hand extends AbstractCollection&lt;Card&gt; {\n   private final List&lt;Card&gt; list = new ArrayList&lt;&gt;();\n   private final int capacity;\n\n   //...\n\n   @Override\n   public Iterator&lt;Card&gt; iterator() {\n       return list.iterator();\n   }\n\n   @Override\n   public int size() {\n      return list.size();\n   }\n}\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>new Hand().stream().map(...)\n</code></pre>\n\n<p>I faced the same problem and was surprised that my <code>Iterable</code> implementation could be very easily extended to an <code>AbstractCollection</code> implementation by simply adding the <code>size()</code> method (luckily I had the size of the collection :-)</p>\n\n<p>You should also consider to override <code>Spliterator&lt;E&gt; spliterator()</code>.</p>\n", "title": "Why does Iterable&lt;T&gt; not provide stream() and parallelStream() methods?", "tags": ["java", "java-8"], "link": "http://stackoverflow.com/questions/23114015/why-does-iterablet-not-provide-stream-and-parallelstream-methods/32874755#32874755", "question_id": 23114015, "answer_id": 32874755}], "creation_date": 1397662684, "score": 127, "link": "http://stackoverflow.com/questions/23114015/why-does-iterablet-not-provide-stream-and-parallelstream-methods", "question_id": 23114015}, {"body": "<p>I was trying to look how my app looks in material design and I would like to use the new cards lib.\nMy Problem is, that it's giving me this error within my gradle file and I need to fix that.</p>\n\n<pre><code>Error:compileSdkVersion android-L requires compiling with JDK 7\n</code></pre>\n\n<p>I downloaded <code>jdk-7u60-macosx-x64.dmg</code>and installed it. <code>java -version</code>in Terminal is showing me that 1.7 is installed:</p>\n\n<pre><code>java version \"1.7.0_60\"\nJava(TM) SE Runtime Environment (build 1.7.0_60-b19)\nJava HotSpot(TM) 64-Bit Server VM (build 24.60-b09, mixed mode)\n</code></pre>\n\n<p>well</p>\n\n<pre><code>ls -l `which java`\n</code></pre>\n\n<p>is giving me:</p>\n\n<pre><code>/usr/bin/java -&gt; /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java\n</code></pre>\n\n<p><code>.../current/...</code> doesn't have a <code>.../home</code>. I found the <code>.../home</code> here:</p>\n\n<pre><code>/System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Home\n</code></pre>\n\n<p>And set the path to the \"SDK location\" Preferences in Android Studio under \"JDK location\". But it's not working -- it seems that it still can't find JDK 7.</p>\n\n<p>I'm using Mac OSX 10.9.3 and Android Studio (Beta) 0.8.1.</p>\n", "tags": ["java", "android", "osx", "android-studio"], "title": "Android Studio needs JDK 7 for Android-L mac", "answers": [{"body": "<p>I haven't moved over to Android Studio, yet. I've used it for a few tests and really like it. Just haven't been able to switch over yet. I've had this sort of issue in Eclipse and that's obviously a different solution, but looking through one of my test projects, this appears to be how you go about it:</p>\n\n<p>Open your project and go to File->Settings.</p>\n\n<p>Under the Project Settings, expand Compiler and go to the Java Compiler option. You want to use javac and set the project bytecode version to 1.7.</p>\n\n<p>Hopefully that'll do it.</p>\n", "title": "Android Studio needs JDK 7 for Android-L mac", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/24472020/android-studio-needs-jdk-7-for-android-l-mac/24472123#24472123", "question_id": 24472020, "answer_id": 24472123}, {"body": "<p>Setting the directory to:\n<code>/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home</code>\nin JDK settings solved my issue. I had the same problem getting started up. Hope this helps!</p>\n", "title": "Android Studio needs JDK 7 for Android-L mac", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/24472020/android-studio-needs-jdk-7-for-android-l-mac/24475898#24475898", "question_id": 24472020, "answer_id": 24475898}, {"body": "<p>@megapoff answer is correct . But I face little difficulty to fix it . So here is the detail solution step-by-step </p>\n\n<p><strong>For Mac</strong> </p>\n\n<ol>\n<li>Download the DMG file of JDK-7  <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html\">from here</a></li>\n<li>Click on DMG and follow the instructions . It will install and configure JDK-7 on mac .</li>\n<li>Now in your android studio go to File->Project Structure -> SDK Location . </li>\n<li><p>In <strong>JDK location</strong> click on browse and go to <code>/-&gt;Library-&gt;Java-&gt;JavaVirtualMachines-&gt;jdk1.7.0_60.jdk-&gt;Contents-&gt;Home</code></p>\n\n<p>Note :- Its Not <code>/System/Library</code> it's <code>/Library</code></p></li>\n<li><p>click Apply and OK ....\nBingo ..... Build the project again .....</p></li>\n</ol>\n", "title": "Android Studio needs JDK 7 for Android-L mac", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/24472020/android-studio-needs-jdk-7-for-android-l-mac/24680375#24680375", "question_id": 24472020, "answer_id": 24680375}, {"body": "<p>The other answers are very correct but I want to be more concise and clear. To prevent others from visiting this page multiple times unnecessarily.</p>\n\n<p>Important* Old Path is /System/Library/Java... and New Path is /Library/Java... (Not under the System directory)</p>\n\n<p>Replace old path: /System/Library/Java/JavaVirtualMachines/jdk1.6.0_0.jdk/Contents/Home</p>\n\n<p>Set your new path: /Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk/Contents/Home</p>\n", "title": "Android Studio needs JDK 7 for Android-L mac", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/24472020/android-studio-needs-jdk-7-for-android-l-mac/27513917#27513917", "question_id": 24472020, "answer_id": 27513917}, {"body": "<p>For jdk-7u79-macosx-x64.dmg just Setting the directory to\n/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home</p>\n\n<p>Not in \n/System/Library/Java/JavaVirtualMachines/jdk1.7.0_60.jdk/Contents/Home</p>\n\n<p>Both are different</p>\n", "title": "Android Studio needs JDK 7 for Android-L mac", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/24472020/android-studio-needs-jdk-7-for-android-l-mac/29986974#29986974", "question_id": 24472020, "answer_id": 29986974}, {"body": "<p>Instead of looking for the folder inside :\n<strong><code>/System/Library/Java/JavaVirtualMachines/</code></strong></p>\n\n<p><a href=\"http://i.stack.imgur.com/Uv1iT.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/Uv1iT.png\" alt=\"enter image description here\"></a></p>\n\n<p>We have to look into :</p>\n\n<p><strong><code>/Library/Java/JavaVirtualMachines/</code></strong></p>\n\n<p><a href=\"http://i.stack.imgur.com/EYhR6.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/EYhR6.png\" alt=\"enter image description here\"></a></p>\n", "title": "Android Studio needs JDK 7 for Android-L mac", "tags": ["java", "android", "osx", "android-studio"], "link": "http://stackoverflow.com/questions/24472020/android-studio-needs-jdk-7-for-android-l-mac/36391038#36391038", "question_id": 24472020, "answer_id": 36391038}], "creation_date": 1404000145, "score": 122, "link": "http://stackoverflow.com/questions/24472020/android-studio-needs-jdk-7-for-android-l-mac", "question_id": 24472020}, {"body": "<p>I am new to java programming and I am trying to start learning on a Mac. One of the things I needed was to install Java 1.7, which I did successfully, but when I do <code>java -version</code>, it still shows 1.6 version.</p>\n\n<p>I've been looking for an answer for the past 3 hours and I have tried everything I was able to find on the Internet, and I am running out of ideas. Any help would be appreciated.</p>\n\n<p>update:\nAlso tried to install Java for OS X 2013-005 but that didn't work. What else can I try?</p>\n", "tags": ["java", "osx"], "title": "How to set or change the default Java (JDK) version on OS X?", "answers": [{"body": "<p>It is a little bit tricky, but try to follow the steps described in <a href=\"http://stackoverflow.com/questions/19533528/installing-java-on-os-x-10-9-mavericks\">Installing Java on OS X 10.9 (Mavericks)</a>. Basically, you gonna have to update your alias to <code>java</code>.</p>\n\n<p>Step by step:</p>\n\n<p>After installing JDK 1.7, you will need to do the <code>sudo ln -snf</code> in order to change the link to current <code>java</code>. To do so, open Terminal and issue the command:</p>\n\n<pre><code>sudo ln -nsf /Library/Java/JavaVirtualMachines/jdk1.7.0_51.jdk/Contents \\\n/System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK\n</code></pre>\n\n<p>Note that the directory <code>jdk1.7.0_51.jdk</code> may change depending on the SDK version you have installed.</p>\n\n<p>Now, you need to set <code>JAVA_HOME</code> to point to where <code>jdk_1.7.0_xx.jdk</code> was installed. Open again the Terminal and type:</p>\n\n<pre><code>export JAVA_HOME=\"/Library/Java/JavaVirtualMachines/jdk1.7.0_51.jdk/Contents/Home\"\n</code></pre>\n\n<p>You can add the <code>export JAVA_HOME</code> line above in your <code>.bashrc</code> file to have java permanently in your Terminal</p>\n", "title": "How to set or change the default Java (JDK) version on OS X?", "tags": ["java", "osx"], "link": "http://stackoverflow.com/questions/21964709/how-to-set-or-change-the-default-java-jdk-version-on-os-x/21964736#21964736", "question_id": 21964709, "answer_id": 21964736}, {"body": "<p>First run <code>/usr/libexec/java_home -V</code> which will output something like the following:</p>\n\n<pre><code>Matching Java Virtual Machines (3):\n1.8.0_05, x86_64:   \"Java SE 8\" /Library/Java/JavaVirtualMachines/jdk1.8.0_05.jdk/Contents/Home\n1.6.0_65-b14-462, x86_64:   \"Java SE 6\" /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home\n1.6.0_65-b14-462, i386: \"Java SE 6\" /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home\n\n/Library/Java/JavaVirtualMachines/jdk1.8.0_05.jdk/Contents/Home\n</code></pre>\n\n<p>Pick the version you want to be the default (<code>1.6.0_65-b14-462</code> for arguments sake) then:</p>\n\n<pre><code>export JAVA_HOME=`/usr/libexec/java_home -v 1.6.0_65-b14-462`\n</code></pre>\n\n<p>or you can specify just the major version, if it's unique, like</p>\n\n<pre><code>export JAVA_HOME=`/usr/libexec/java_home -v 1.8`\n</code></pre>\n\n<p>Now when you run <code>java -version</code> you will see:</p>\n\n<pre><code>java version \"1.6.0_65\"\nJava(TM) SE Runtime Environment (build 1.6.0_65-b14-462-11M4609)\nJava HotSpot(TM) 64-Bit Server VM (build 20.65-b04-462, mixed mode)\n</code></pre>\n\n<p>Just add the <code>export JAVA_HOME\u2026</code> line to your shell\u2019s init file.</p>\n", "title": "How to set or change the default Java (JDK) version on OS X?", "tags": ["java", "osx"], "link": "http://stackoverflow.com/questions/21964709/how-to-set-or-change-the-default-java-jdk-version-on-os-x/24657630#24657630", "question_id": 21964709, "answer_id": 24657630}, {"body": "<p>This tool will do the work for you: </p>\n\n<p><a href=\"http://www.guigarage.com/2013/02/change-java-version-on-mac-os/\" rel=\"nofollow\">http://www.guigarage.com/2013/02/change-java-version-on-mac-os/</a></p>\n\n<p>It's a simple JavaOne that can be used to define the current Java Version. The version can be used in a shell that is opened after a version was selected in the tool.</p>\n", "title": "How to set or change the default Java (JDK) version on OS X?", "tags": ["java", "osx"], "link": "http://stackoverflow.com/questions/21964709/how-to-set-or-change-the-default-java-jdk-version-on-os-x/26336488#26336488", "question_id": 21964709, "answer_id": 26336488}, {"body": "<p>From the Apple's official <a href=\"https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/java_home.1.html\" rel=\"nofollow\">java_home(1) man page</a>:</p>\n\n<pre><code>**USAGE**\n\n   /usr/libexec/java_home  helps  users  set a $JAVA_HOME in their login rc files, or provides a way for\n   command-line Java tools to use the most appropriate JVM which can satisfy a minimum version or archi-\n   tecture  requirement.  The --exec argument can invoke tools in the selected $JAVA_HOME/bin directory,\n   which is useful for starting Java command-line tools from launchd plists without hardcoding the  full\n   path to the Java command-line tool.\n\n   Usage for bash-style shells:\n          $ export JAVA_HOME=`/usr/libexec/java_home`\n\n   Usage for csh-style shells:\n          % setenv JAVA_HOME `/usr/libexec/java_home`\n</code></pre>\n", "title": "How to set or change the default Java (JDK) version on OS X?", "tags": ["java", "osx"], "link": "http://stackoverflow.com/questions/21964709/how-to-set-or-change-the-default-java-jdk-version-on-os-x/26995738#26995738", "question_id": 21964709, "answer_id": 26995738}, {"body": "<p>If you have multiple versions and you want to run something by using a specific version, use this example:</p>\n\n<pre><code>/usr/libexec/java_home -v 1.7.0_75 --exec java -jar you-file.jar\n</code></pre>\n", "title": "How to set or change the default Java (JDK) version on OS X?", "tags": ["java", "osx"], "link": "http://stackoverflow.com/questions/21964709/how-to-set-or-change-the-default-java-jdk-version-on-os-x/28296654#28296654", "question_id": 21964709, "answer_id": 28296654}, {"body": "<p>Use jenv is an easy way.</p>\n\n<p>1.Install jenv</p>\n\n<pre>    curl -s get.jenv.io | bash</pre>\n\n<p>2.Config jenv</p>\n\n<pre>\n    cd ~/.jenv/candidates/\n    mkdir java\n    cd java\n    mkdir 1.7\n    mkdir 1.8\n</pre>\n\n<p>3.Symlink the jdk path</p>\n\n<pre>\n    ln -s /Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk/Contents/Home/bin ~/.jenv/candidates/java/1.7\n    ln -s /Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/bin ~/.jenv/candidates/java/1.8\n</pre>\n\n<p>4.You are all set</p>\n\n<p>switch command: </p>\n\n<blockquote>\n  <p>jenv use java 1.8</p>\n</blockquote>\n\n<p>set default: </p>\n\n<blockquote>\n  <p>jenv default java 1.7</p>\n</blockquote>\n", "title": "How to set or change the default Java (JDK) version on OS X?", "tags": ["java", "osx"], "link": "http://stackoverflow.com/questions/21964709/how-to-set-or-change-the-default-java-jdk-version-on-os-x/30521236#30521236", "question_id": 21964709, "answer_id": 30521236}, {"body": "<p>A small fish function based on /usr/libexec/java_home</p>\n\n<pre><code>function jhome\n    set JAVA_HOME (/usr/libexec/java_home $argv)\n    echo \"JAVA_HOME:\" $JAVA_HOME\n    echo \"java -version:\"\n    java -version\nend\n</code></pre>\n\n<p>If you don't use fish, you can do something similar in bash:</p>\n\n<pre><code>#!/bin/bash\n\njhome () {\n  export JAVA_HOME=`/usr/libexec/java_home $@`\n  echo \"JAVA_HOME:\" $JAVA_HOME\n  echo \"java -version:\"\n  java -version\n}\n</code></pre>\n\n<p>Then to switch between javas do:</p>\n\n<pre><code>$&gt; jhome           #switches to latest java\n$&gt; jhome -v 1.7    #switches to java 1.7\n$&gt; jhome -v 1.6    #switches to java 1.6\n</code></pre>\n\n<p>ref: <a href=\"https://gist.github.com/kenglxn/1843d552dff4d4233271\">https://gist.github.com/kenglxn/1843d552dff4d4233271</a></p>\n", "title": "How to set or change the default Java (JDK) version on OS X?", "tags": ["java", "osx"], "link": "http://stackoverflow.com/questions/21964709/how-to-set-or-change-the-default-java-jdk-version-on-os-x/30875847#30875847", "question_id": 21964709, "answer_id": 30875847}], "creation_date": 1393134367, "score": 114, "link": "http://stackoverflow.com/questions/21964709/how-to-set-or-change-the-default-java-jdk-version-on-os-x", "question_id": 21964709}, {"body": "<p>When trying to run gradle, I get the following error:</p>\n\n<pre><code># gradle\n\nERROR: JAVA_HOME is set to an invalid directory: /usr/lib/jvm/default-java\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\n</code></pre>\n\n<p>However, when I check the JAVA_HOME variable I get:</p>\n\n<pre><code># echo $JAVA_HOME \n/usr/lib/jvm/java-7-oracle\n</code></pre>\n\n<p>My JAVA_HOME is defined in .bashrc and I have double checked that it is set as the source.</p>\n\n<p>Running <code>java -version</code> also confirms that JAVA_HOME is set correctly and is on the PATH.</p>\n\n<pre><code># java -version\njava version \"1.7.0_51\"\nJava(TM) SE Runtime Environment (build 1.7.0_51-b13)\nJava HotSpot(TM) 64-Bit Server VM (build 24.51-b03, mixed mode)\n</code></pre>\n\n<p>I have also checked that <code>/usr/bin/java</code> symlinks to <code>/etc/alternatives/java</code> which in turn correctly symlinks to <code>/usr/lib/jvm/java-7-oracle/jre/bin/java</code></p>\n\n<p>Additionally I've checked that there are no duplicate JAVA_HOME definitions in <code>.bash_profile</code> or <code>/etc/profile</code>. </p>\n\n<p>So my question is how/why does Gradle find <code>/usr/lib/jvm/default-java</code>, and more importantly how do I point it to the correct directory? </p>\n\n<p>Other programs which require the JDK work fine, so I think its a Gradle issue. I've also tried reinstalling Gradle which made no difference.</p>\n\n<p>I'm running 64bit Xubuntu (Ubuntu 13.10 base)</p>\n", "tags": ["java", "linux", "gradle", "environment-variables"], "title": "Gradle finds wrong JAVA_HOME even though it&#39;s correctly set", "answers": [{"body": "<p>Did you <code>export</code> your <code>JAVA_HOME</code>?  Without export, the setting will not be propagated to the commands started inside of that shell.  Also, <code>java -version</code> does not use <code>JAVA_HOME</code>, rather it uses the first <code>java</code> found in your path.  Make sure your <code>.bashrc</code> looks something like this:</p>\n\n<pre><code>JAVA_HOME=/path/to/java/home\nexport JAVA_HOME\n</code></pre>\n", "title": "Gradle finds wrong JAVA_HOME even though it&#39;s correctly set", "tags": ["java", "linux", "gradle", "environment-variables"], "link": "http://stackoverflow.com/questions/22307516/gradle-finds-wrong-java-home-even-though-its-correctly-set/22307652#22307652", "question_id": 22307516, "answer_id": 22307652}, {"body": "<p>Turns out that the particular Gradle binary I downloaded from the Ubuntu 13.10 repository <em>itself</em> tries to export JAVA_HOME. Thanks to <a href=\"http://stackoverflow.com/users/516433/lucas\">Lucas</a> for suggesting this.</p>\n\n<p><code>/usr/bin/gradle</code> line 70:</p>\n\n<pre><code>export JAVA_HOME=/usr/lib/jvm/default-java\n</code></pre>\n\n<p>Commenting this line out solves the problem, and Gradle finds the correct path to the Java binary. </p>\n\n<p>If you just download the binary from their <a href=\"http://www.gradle.org/downloads\">website</a> it does not have this problem, \nIt's an issue with the Ubuntu repo version. <a href=\"http://stackoverflow.com/questions/19522020/running-gradle-on-ubuntu-13-10\">There also seem to be some other issues with 13.10 version.</a></p>\n", "title": "Gradle finds wrong JAVA_HOME even though it&#39;s correctly set", "tags": ["java", "linux", "gradle", "environment-variables"], "link": "http://stackoverflow.com/questions/22307516/gradle-finds-wrong-java-home-even-though-its-correctly-set/22309017#22309017", "question_id": 22307516, "answer_id": 22309017}, {"body": "<p>add a symbolic link </p>\n\n<pre><code>sudo ln -s /usr/lib/jvm/java-7-oracle /usr/lib/jvm/default-java\n</code></pre>\n", "title": "Gradle finds wrong JAVA_HOME even though it&#39;s correctly set", "tags": ["java", "linux", "gradle", "environment-variables"], "link": "http://stackoverflow.com/questions/22307516/gradle-finds-wrong-java-home-even-though-its-correctly-set/22656646#22656646", "question_id": 22307516, "answer_id": 22656646}, {"body": "<p>For me this error was due to the reason <strong>Gradle</strong> as installed as <strong>sudo</strong> and I was trying as default user to run Gradle.</p>\n\n<p>Try:</p>\n\n<pre><code>sudo gradle -version\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sudo gradle -v\n</code></pre>\n", "title": "Gradle finds wrong JAVA_HOME even though it&#39;s correctly set", "tags": ["java", "linux", "gradle", "environment-variables"], "link": "http://stackoverflow.com/questions/22307516/gradle-finds-wrong-java-home-even-though-its-correctly-set/28173680#28173680", "question_id": 22307516, "answer_id": 28173680}, {"body": "<p>For me an explicit set on the arguments section of the external tools configuration in Eclipse was the problem.</p>\n\n<p><img src=\"http://i.stack.imgur.com/0UByl.png\" alt=\"enter image description here\"></p>\n", "title": "Gradle finds wrong JAVA_HOME even though it&#39;s correctly set", "tags": ["java", "linux", "gradle", "environment-variables"], "link": "http://stackoverflow.com/questions/22307516/gradle-finds-wrong-java-home-even-though-its-correctly-set/30274759#30274759", "question_id": 22307516, "answer_id": 30274759}, {"body": "<p>I had a problem with this too. It said wrong directory when it was correct. So I just created a local variable with the name of JAVA_HOME omitting the final /bin/java. It worked fine for me.</p>\n", "title": "Gradle finds wrong JAVA_HOME even though it&#39;s correctly set", "tags": ["java", "linux", "gradle", "environment-variables"], "link": "http://stackoverflow.com/questions/22307516/gradle-finds-wrong-java-home-even-though-its-correctly-set/30276458#30276458", "question_id": 22307516, "answer_id": 30276458}, {"body": "<p>You can also go to the bin folder inside your gradle installation folder and correct the JAVA_HOME parameter in gradle.bat file.\nIn my case, my JAVA_HOME was set to c:\\Program files\\java\\bin\nThe JAVA_HOME in gradle.bat was set to %JAVA_HOME%\\bin\\java.exe.</p>\n\n<p>I corrected the JAVA_HOME in gradle.bat and it worked.</p>\n\n<p>Thank you!!!</p>\n", "title": "Gradle finds wrong JAVA_HOME even though it&#39;s correctly set", "tags": ["java", "linux", "gradle", "environment-variables"], "link": "http://stackoverflow.com/questions/22307516/gradle-finds-wrong-java-home-even-though-its-correctly-set/30403346#30403346", "question_id": 22307516, "answer_id": 30403346}, {"body": "<p>I faced this issue when I run the following command on Ubuntu:</p>\n\n<pre><code>ionic build android\n</code></pre>\n\n<p>To solve this issue, I did the following steps:</p>\n\n<pre><code>ln -sf /usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java /usr/lib/jvm/default-java\n</code></pre>\n\n<p>Add JAVA_HOME to /etc/environment:</p>\n\n<pre><code>vi /etc/environment\n</code></pre>\n\n<p>Add:</p>\n\n<pre><code>JAVA_HOME=\"/usr/lib/jvm/default-java\"\n</code></pre>\n\n<p>After saving, read it:</p>\n\n<pre><code>source /etc/environment\n</code></pre>\n\n<p>Finally, you can run build command.</p>\n", "title": "Gradle finds wrong JAVA_HOME even though it&#39;s correctly set", "tags": ["java", "linux", "gradle", "environment-variables"], "link": "http://stackoverflow.com/questions/22307516/gradle-finds-wrong-java-home-even-though-its-correctly-set/36245278#36245278", "question_id": 22307516, "answer_id": 36245278}, {"body": "<pre><code>sudo ln -s /usr/lib/jvm/java-7-oracle/jre /usr/lib/jvm/default-java\n</code></pre>\n\n<p>Create a symbolic link to the default-java directory.</p>\n\n<p>You can find your java directory by</p>\n\n<pre><code>readlink -f $(which java) \n# outputs: /usr/lib/jvm/java-7-oracle/jre/bin/java\n# Remove the last `/bin/java` and use it in above symbolic link command.\n</code></pre>\n", "title": "Gradle finds wrong JAVA_HOME even though it&#39;s correctly set", "tags": ["java", "linux", "gradle", "environment-variables"], "link": "http://stackoverflow.com/questions/22307516/gradle-finds-wrong-java-home-even-though-its-correctly-set/36587088#36587088", "question_id": 22307516, "answer_id": 36587088}, {"body": "<p>I had the same problem, but I didnt find export command in line 70 in gradle file for the latest version 2.13, but I understand a silly mistake there, that is following, </p>\n\n<p>If you don't find line 70 with export command in gradle file in your gradle folder/bin/ , then check your ~/.bashrc, if you find  <code>export JAVA_HOME==/usr/lib/jvm/java-7-openjdk-amd64/bin/java</code>, then remove <code>/bin/java</code> from this line, like <code>JAVA_HOME==/usr/lib/jvm/java-7-openjdk-amd64</code>, and it in path>>> instead of this <code>export PATH=$PATH:$HOME/bin:JAVA_HOME/</code>, it will be <code>export PATH=$PATH:$HOME/bin:JAVA_HOME/bin/java</code>. Then run <code>source ~/.bashrc</code>.</p>\n\n<p>The reason is, if you check your gradle file, you will find in line 70 (if there's no export command) or in line 75,</p>\n\n<blockquote>\n<pre><code>JAVACMD=\"$JAVA_HOME/bin/java\"\n    fi\n    if [ ! -x \"$JAVACMD\" ] ; then\n        die \"ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME\n</code></pre>\n  \n  <p>That means  <code>/bin/java</code> is already there, so it needs to be substracted from <code>JAVA_HOME</code> path.</p>\n</blockquote>\n\n<p>That happened in my case.</p>\n", "title": "Gradle finds wrong JAVA_HOME even though it&#39;s correctly set", "tags": ["java", "linux", "gradle", "environment-variables"], "link": "http://stackoverflow.com/questions/22307516/gradle-finds-wrong-java-home-even-though-its-correctly-set/37413791#37413791", "question_id": 22307516, "answer_id": 37413791}], "creation_date": 1394473657, "score": 107, "link": "http://stackoverflow.com/questions/22307516/gradle-finds-wrong-java-home-even-though-its-correctly-set", "question_id": 22307516}, {"body": "<p>Java 8 added a new API for working with dates and times (JSR 310).</p>\n\n<p>I have date and time as string (e.g. <code>\"2014-04-08 12:30\"</code>). How can I obtain a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html\"><code>LocalDateTime</code></a> instance from the given string?</p>\n\n<p>After I finished working with the <code>LocalDateTime</code> object: How can I then convert the <code>LocalDateTime</code> instance back to a string with the same format as shown above?</p>\n", "tags": ["java", "datetime", "java-8", "java-time"], "title": "How to parse/format dates with LocalDateTime? (Java 8)", "answers": [{"body": "<p><strong>Parsing date and time</strong></p>\n\n<p>To create a <code>LocalDateTime</code> object from a string you can use the static <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html#parse-java.lang.CharSequence-\"><code>LocalDateTime.parse()</code></a> method. It takes a string and a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\"><code>DateTimeFormatter</code></a> as parameter. The <code>DateTimeFormatter</code> is used to specify the date/time pattern.</p>\n\n<pre><code>String str = \"1986-04-08 12:30\";\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm\");\nLocalDateTime dateTime = LocalDateTime.parse(str, formatter);\n</code></pre>\n\n<p><strong>Formatting date and time</strong></p>\n\n<p>To create a formatted string out a <code>LocalDateTime</code> object you can use the <code>format()</code> method.</p>\n\n<pre><code>DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm\");\nLocalDateTime dateTime = LocalDateTime.of(1986, Month.APRIL, 8, 12, 30);\nString formattedDateTime = dateTime.format(formatter); // \"1986-04-08 12:30\"\n</code></pre>\n\n<p>Note that there are some commonly used date/time formats predefined as constants in <code>DateTimeFormatter</code>. For example: Using <code>DateTimeFormatter.ISO_DATE_TIME</code> to format the <code>LocalDateTime</code> instance from above would result in the string <code>\"1986-04-08T12:30:00\"</code>.</p>\n\n<p>The <code>parse()</code> and <code>format()</code> methods are available for all date/time related objects (e.g. <code>LocalDate</code> or <code>ZonedDateTime</code>)</p>\n", "title": "How to parse/format dates with LocalDateTime? (Java 8)", "tags": ["java", "datetime", "java-8", "java-time"], "link": "http://stackoverflow.com/questions/22463062/how-to-parse-format-dates-with-localdatetime-java-8/22463063#22463063", "question_id": 22463062, "answer_id": 22463063}, {"body": "<p>You can also use <code>LocalDate.parse()</code> or <code>LocalDateTime.parse()</code> on a <code>String</code> without providing it with a pattern, if the <code>String</code> is in <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_LOCAL_DATE_TIME\">ISO-8601 format</a>.</p>\n\n<p>for example,</p>\n\n<pre><code>String strDate = \"2015-08-04\";\nLocalDate aLD = LocalDate.parse(strDate);\nSystem.out.println(\"Date: \" + aLD);\n\nString strDatewithTime = \"2015-08-04T10:11:30\";\nLocalDateTime aLDT = LocalDateTime.parse(strDatewithTime);\nSystem.out.println(\"Date with Time: \" + aLDT);\n</code></pre>\n\n<p><strong>Output</strong>,</p>\n\n<pre><code>Date: 2015-08-04\nDate with Time: 2015-08-04T10:11:30\n</code></pre>\n\n<p>and use <code>DateTimeFormatter</code> only if you have to deal with other date patterns,\nFor example, <strong><em>dd MMM uuuu</em></strong> represents the day of the month (two digits), three letters of the name of the month (Jan, Feb, Mar,...), and a four-digit year:</p>\n\n<pre><code>DateTimeFormatter dTF = DateTimeFormatter.ofPattern(\"dd MMM uuuu\");\nString anotherDate = \"04 Aug 2015\";\nLocalDate lds = LocalDate.parse(anotherDate, dTF);\nSystem.out.println(anotherDate + \" parses to \" + lds);\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>04 Aug 2015 parses to 2015-08-04\n</code></pre>\n\n<p>also remember that the <code>DateTimeFormatter</code> object is bidirectional; it can both parse input and format output.</p>\n\n<pre><code>String strDate = \"2015-08-04\";\nLocalDate aLD = LocalDate.parse(strDate);\nDateTimeFormatter dTF = DateTimeFormatter.ofPattern(\"dd MMM uuuu\");\nSystem.out.println(aLD + \" formats as \" + dTF.format(aLD));\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>2015-08-04 formats as 04 Aug 2015\n</code></pre>\n\n<p>(see complete <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#patterns\">list of Patterns for Formatting and Parsing DateFormatter</a>)</p>\n\n<pre><code>  Symbol  Meaning                     Presentation      Examples\n  ------  -------                     ------------      -------\n   G       era                         text              AD; Anno Domini; A\n   u       year                        year              2004; 04\n   y       year-of-era                 year              2004; 04\n   D       day-of-year                 number            189\n   M/L     month-of-year               number/text       7; 07; Jul; July; J\n   d       day-of-month                number            10\n\n   Q/q     quarter-of-year             number/text       3; 03; Q3; 3rd quarter\n   Y       week-based-year             year              1996; 96\n   w       week-of-week-based-year     number            27\n   W       week-of-month               number            4\n   E       day-of-week                 text              Tue; Tuesday; T\n   e/c     localized day-of-week       number/text       2; 02; Tue; Tuesday; T\n   F       week-of-month               number            3\n\n   a       am-pm-of-day                text              PM\n   h       clock-hour-of-am-pm (1-12)  number            12\n   K       hour-of-am-pm (0-11)        number            0\n   k       clock-hour-of-am-pm (1-24)  number            0\n\n   H       hour-of-day (0-23)          number            0\n   m       minute-of-hour              number            30\n   s       second-of-minute            number            55\n   S       fraction-of-second          fraction          978\n   A       milli-of-day                number            1234\n   n       nano-of-second              number            987654321\n   N       nano-of-day                 number            1234000000\n\n   V       time-zone ID                zone-id           America/Los_Angeles; Z; -08:30\n   z       time-zone name              zone-name         Pacific Standard Time; PST\n   O       localized zone-offset       offset-O          GMT+8; GMT+08:00; UTC-08:00;\n   X       zone-offset 'Z' for zero    offset-X          Z; -08; -0830; -08:30; -083015; -08:30:15;\n   x       zone-offset                 offset-x          +0000; -08; -0830; -08:30; -083015; -08:30:15;\n   Z       zone-offset                 offset-Z          +0000; -0800; -08:00;\n\n   p       pad next                    pad modifier      1\n\n   '       escape for text             delimiter\n   ''      single quote                literal           '\n   [       optional section start\n   ]       optional section end\n   #       reserved for future use\n   {       reserved for future use\n   }       reserved for future use\n</code></pre>\n", "title": "How to parse/format dates with LocalDateTime? (Java 8)", "tags": ["java", "datetime", "java-8", "java-time"], "link": "http://stackoverflow.com/questions/22463062/how-to-parse-format-dates-with-localdatetime-java-8/28324294#28324294", "question_id": 22463062, "answer_id": 28324294}, {"body": "<p>Both answers above explain very well the question regarding string patterns. However, just in case you are working with <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow\">ISO 8061</a> there is no need to apply <code>DateTimeFormatter</code> since LocalDateTime is already prepared for it:</p>\n\n<p><strong>Convert LocalDateTime to Time Zone ISO8061 String</strong></p>\n\n<pre><code>LocalDateTime ldt = LocalDateTime.now(); \nZonedDateTime zdt = ldt.atZone(ZoneOffset.UTC); //you might use a different zone\nString iso8061 = zdt.toString();\n</code></pre>\n\n<p><strong>Convert from ISO8061 String back to a LocalDateTime</strong></p>\n\n<pre><code>String iso8061 = \"2016-02-14T18:32:04.150Z\";\nZonedDateTime zdt = ZonedDateTime.parse(iso8061);\nLocalDateTime ldt = zdt.toLocalDateTime();\n</code></pre>\n", "title": "How to parse/format dates with LocalDateTime? (Java 8)", "tags": ["java", "datetime", "java-8", "java-time"], "link": "http://stackoverflow.com/questions/22463062/how-to-parse-format-dates-with-localdatetime-java-8/35397804#35397804", "question_id": 22463062, "answer_id": 35397804}], "creation_date": 1395082802, "score": 102, "link": "http://stackoverflow.com/questions/22463062/how-to-parse-format-dates-with-localdatetime-java-8", "question_id": 22463062}, {"body": "<p>How can I detect I am in Release mode or Debug mode in android? </p>\n", "tags": ["java", "android"], "title": "Detect if I am in release or debug mode in android", "answers": [{"body": "<p>Try the following:</p>\n\n<pre><code>boolean isDebuggable =  ( 0 != ( getApplicationInfo().flags &amp; ApplicationInfo.FLAG_DEBUGGABLE ) );\n</code></pre>\n\n<p>It is taken from bundells post from <a href=\"http://stackoverflow.com/questions/7085644/how-to-check-if-apk-is-signed-or-debug-build\">here</a></p>\n", "title": "Detect if I am in release or debug mode in android", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/23844667/detect-if-i-am-in-release-or-debug-mode-in-android/23844693#23844693", "question_id": 23844667, "answer_id": 23844693}, {"body": "<p>The simplest, and best long-term solution, is to use <code>BuildConfig.DEBUG</code>. This is a <code>boolean</code> value that will be <code>true</code> for a debug build, <code>false</code> otherwise:</p>\n\n<pre><code>if (BuildConfig.DEBUG) {\n  // do something for a debug build\n}\n</code></pre>\n\n<p>There have been reports that this value is not 100% reliable from Eclipse-based builds, though I personally have not encountered a problem, so I cannot say how much of an issue it really is.</p>\n\n<p>If you are using Android Studio, or if you are using Gradle from the command line, you can add your own stuff to <code>BuildConfig</code> or otherwise tweak the <code>debug</code> and <code>release</code> build types to help distinguish these situations at runtime.</p>\n\n<p>The solution from Illegal Argument is based on the value of the <code>android:debuggable</code> flag in the manifest. If that is how you wish to distinguish a \"debug\" build from a \"release\" build, then by definition, that's the best solution. However, bear in mind that going forward, the <code>debuggable</code> flag is really an independent concept from what Gradle/Android Studio consider a \"debug\" build to be. Any build type can elect to set the <code>debuggable</code> flag to whatever value that makes sense for that developer and for that build type.</p>\n", "title": "Detect if I am in release or debug mode in android", "tags": ["java", "android"], "link": "http://stackoverflow.com/questions/23844667/detect-if-i-am-in-release-or-debug-mode-in-android/23844716#23844716", "question_id": 23844667, "answer_id": 23844716}], "creation_date": 1400932192, "score": 102, "link": "http://stackoverflow.com/questions/23844667/detect-if-i-am-in-release-or-debug-mode-in-android", "question_id": 23844667}, {"body": "<p>In Java 8, you can use a method reference to filter a stream, for example:</p>\n\n<pre><code>Stream&lt;String&gt; s = ...;\nint emptyStrings = s.filter(String::isEmpty).count();\n</code></pre>\n\n<p>Is there a way to create a method reference that is the negation of an existing one, i.e. something like:</p>\n\n<pre><code>int nonEmptyStrings = s.filter(not(String::isEmpty)).count();\n</code></pre>\n\n<p>I could create the <code>not</code> method like below but I was wondering if the JDK offered something similar.</p>\n\n<pre><code>static &lt;T&gt; Predicate&lt;T&gt; not(Predicate&lt;T&gt; p) { return o -&gt; !p.test(o); }\n</code></pre>\n", "tags": ["java", "predicate", "java-8", "negate"], "title": "How to negate a method reference predicate", "answers": [{"body": "<p>Shouldn't <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/function/Predicate.html#negate--\" rel=\"nofollow\"><code>Predicate#negate</code></a> be what you are looking for?</p>\n", "title": "How to negate a method reference predicate", "tags": ["java", "predicate", "java-8", "negate"], "link": "http://stackoverflow.com/questions/21488056/how-to-negate-a-method-reference-predicate/21488231#21488231", "question_id": 21488056, "answer_id": 21488231}, {"body": "<p>There is no way to compose a method reference that is the opposite of a current method reference. However, it is not too troublesome to do it some other ways.</p>\n\n<p>The opposite of this:</p>\n\n<pre><code>Stream&lt;String&gt; s = ...;\nint emptyStrings = s.filter(String::isEmpty).count();\n</code></pre>\n\n<p>is this:</p>\n\n<pre><code>Stream&lt;String&gt; s = ...;\nint notEmptyStrings = s.filter( it -&gt; !it.isEmpty() ).count();\n</code></pre>\n\n<p>or make a predicate and reuse it:</p>\n\n<pre><code>Predicate&lt;String&gt; notEmpty = (String it) -&gt; !it.isEmpty();\n\nStream&lt;String&gt; s = ...;\nint notEmptyStrings = s.filter(notEmpty).count();\n</code></pre>\n\n<p>or if having a collection or array, just use a for-loop which is simple, has less overhead, and *might be **faster:</p>\n\n<pre><code>int notEmpty = 0;\nfor(String s : list) if(!s.isEmpty()) notEmpty++;\n</code></pre>\n\n<p>*If you want to know what is faster, then use JMH <a href=\"http://openjdk.java.net/projects/code-tools/jmh\" rel=\"nofollow\">http://openjdk.java.net/projects/code-tools/jmh</a>, and avoid hand benchmark code unless it avoids all JVM optimizations \u2014 see <a href=\"http://stackoverflow.com/questions/22658322/java-8-performance-of-streams-vs-collections\">Java 8: performance of Streams vs Collections</a></p>\n\n<p>**I am getting flak for suggesting that the for-loop technique is faster. It eliminates a stream creation, it eliminates using another method call (negative function for predicate), and it eliminates a temporary accumulator list/counter. So a few things that are saved by the last construct that might make it faster. </p>\n\n<p>I do think it is simpler and nicer though, even if not faster. If the job calls for a hammer and a nail, don't bring in a chainsaw and glue! I know some of you take issue with that.</p>\n\n<p>wish-list: I would like to see Java <code>Stream</code> functions evolve a bit now that Java users are more familiar with them. For example, the 'count' method in Stream could accept a <code>Predicate</code> so that this can be done directly like this:</p>\n\n<pre><code>Stream&lt;String&gt; s = ...;\nint notEmptyStrings = s.count(it -&gt; !it.isEmpty());\n\nor\n\nList&lt;String&gt; list = ...;\nint notEmptyStrings = lists.count(it -&gt; !it.isEmpty());\n</code></pre>\n", "title": "How to negate a method reference predicate", "tags": ["java", "predicate", "java-8", "negate"], "link": "http://stackoverflow.com/questions/21488056/how-to-negate-a-method-reference-predicate/21506889#21506889", "question_id": 21488056, "answer_id": 21506889}, {"body": "<p>I'm planning to static import the following to allow for the method reference to be used inline: </p>\n\n<pre><code>public static &lt;T&gt; Predicate&lt;T&gt; not(Predicate&lt;T&gt; t) {\n    return t.negate();\n}\n</code></pre>\n\n<p>e.g.</p>\n\n<pre><code>Stream&lt;String&gt; s = ...;\nlong nonEmptyStrings = s.filter(not(String::isEmpty)).count();\n</code></pre>\n", "title": "How to negate a method reference predicate", "tags": ["java", "predicate", "java-8", "negate"], "link": "http://stackoverflow.com/questions/21488056/how-to-negate-a-method-reference-predicate/22492361#22492361", "question_id": 21488056, "answer_id": 22492361}, {"body": "<p>Building on other's answers and personal experience:</p>\n\n<pre><code>Predicate&lt;String&gt; blank = String::isEmpty;\ncontent.stream()\n       .filter(blank.negate())\n</code></pre>\n", "title": "How to negate a method reference predicate", "tags": ["java", "predicate", "java-8", "negate"], "link": "http://stackoverflow.com/questions/21488056/how-to-negate-a-method-reference-predicate/29401301#29401301", "question_id": 21488056, "answer_id": 29401301}, {"body": "<p>Another option is to utilize lambda casting in non-ambiguous contexts into one class:</p>\n\n<pre><code>public static class Lambdas {\n    public static &lt;T&gt; Predicate&lt;T&gt; as(Predicate&lt;T&gt; predicate){\n        return predicate;\n    }\n\n    public static &lt;T&gt; Consumer&lt;T&gt; as(Consumer&lt;T&gt; consumer){\n        return consumer;\n    }\n\n    public static &lt;T&gt; Supplier&lt;T&gt; as(Supplier&lt;T&gt; supplier){\n        return supplier;\n    }\n\n    public static &lt;T, R&gt; Function&lt;T, R&gt; as(Function&lt;T, R&gt; function){\n        return function;\n    }\n\n}\n</code></pre>\n\n<p>... and then static import the utility class:</p>\n\n<pre><code>stream.filter(as(String::isEmpty).negate())\n</code></pre>\n", "title": "How to negate a method reference predicate", "tags": ["java", "predicate", "java-8", "negate"], "link": "http://stackoverflow.com/questions/21488056/how-to-negate-a-method-reference-predicate/30475342#30475342", "question_id": 21488056, "answer_id": 30475342}, {"body": "<p><code>Predicate</code> has methods <code>and</code>, <code>or</code> and <code>negate</code>.</p>\n\n<p>However, <code>String::isEmpty</code> is not a <code>Predicate</code>. It could as well be <code>Function&lt;String, Boolean&gt;</code> or <code>MyProprietaryClass</code>. The type information is inferred from the variable or the call.</p>\n\n<p>So, you need to cast a method reference explicitly (as @axtavt mentioned):</p>\n\n<pre><code>((Predicate&lt;String&gt;) String::isEmpty).negate()\n</code></pre>\n\n<p>But it's absolutely ugly and <code>Predicate</code> seems to use lambdas under the hood anyway. So I think you are better off writing a lambda or even your own <code>not(Predicate)</code> method (e.g. in utility, static import).</p>\n", "title": "How to negate a method reference predicate", "tags": ["java", "predicate", "java-8", "negate"], "link": "http://stackoverflow.com/questions/21488056/how-to-negate-a-method-reference-predicate/30506585#30506585", "question_id": 21488056, "answer_id": 30506585}, {"body": "<p>I have written a complete utility class (inspired by Askar's proposal) that can take Java 8 lambda expression and turn them (if applicable) into any typed standard Java 8 lambda defined in the package <code>java.util.function</code>. You can for example do:</p>\n\n<ul>\n<li><code>asPredicate(String::isEmpty).negate()</code></li>\n<li><code>asBiPredicate(String::equals).negate()</code></li>\n</ul>\n\n<p>Because there would be numerous ambiguities if all the static methods would be named just <code>as()</code>, I opted to call the method \"as\" followed by the returned type. This gives us full control of the lambda interpretation. Below is the first part of the (somewhat large) utility class revealing the pattern used. </p>\n\n<p>Have a look at the <a href=\"https://gist.github.com/minborg/0bcaaf77945788722991\" rel=\"nofollow\">complete class here</a> (at gist).</p>\n\n<pre><code>public class FunctionCastUtil {\n\n    public static &lt;T, U&gt; BiConsumer&lt;T, U&gt; asBiConsumer(BiConsumer&lt;T, U&gt; biConsumer) {\n        return biConsumer;\n    }\n\n    public static &lt;T, U, R&gt; BiFunction&lt;T, U, R&gt; asBiFunction(BiFunction&lt;T, U, R&gt; biFunction) {\n        return biFunction;\n    }\n\n     public static &lt;T&gt; BinaryOperator&lt;T&gt; asBinaryOperator(BinaryOperator&lt;T&gt; binaryOperator) {\n        return binaryOperator;\n    }\n\n    ... and so on...\n}\n</code></pre>\n", "title": "How to negate a method reference predicate", "tags": ["java", "predicate", "java-8", "negate"], "link": "http://stackoverflow.com/questions/21488056/how-to-negate-a-method-reference-predicate/35074360#35074360", "question_id": 21488056, "answer_id": 35074360}, {"body": "<p>You can use <a href=\"http://www.eclipse.org/collections/javadoc/7.0.0/org/eclipse/collections/impl/block/factory/Predicates.html\" rel=\"nofollow\">Predicates</a> from <a href=\"http://www.eclipse.org/collections/\" rel=\"nofollow\">Eclipse Collections</a></p>\n\n<pre><code>MutableList&lt;String&gt; strings = Lists.mutable.empty();\nint nonEmptyStrings = strings.count(Predicates.not(String::isEmpty));\n</code></pre>\n\n<p>If you can't change the strings from <code>List</code>:</p>\n\n<pre><code>List&lt;String&gt; strings = new ArrayList&lt;&gt;();\nint nonEmptyStrings = ListAdapter.adapt(strings).count(Predicates.not(String::isEmpty));\n</code></pre>\n\n<p>If you only need a negation of <code>String.isEmpty()</code> you can also use <code>StringPredicates.notEmpty()</code>.</p>\n\n<p>Note: I am a contributor to Eclipse Collections.</p>\n", "title": "How to negate a method reference predicate", "tags": ["java", "predicate", "java-8", "negate"], "link": "http://stackoverflow.com/questions/21488056/how-to-negate-a-method-reference-predicate/36242382#36242382", "question_id": 21488056, "answer_id": 36242382}], "creation_date": 1391195048, "score": 96, "link": "http://stackoverflow.com/questions/21488056/how-to-negate-a-method-reference-predicate", "question_id": 21488056}, {"body": "<p>I have a simple program:</p>\n\n<pre><code>public class Mathz {\n    static int i = 1;\n    public static void main(String[] args) {    \n        while (true){\n            i = i + i;\n            System.out.println(i);\n        }\n    }\n}\n</code></pre>\n\n<p>When I run this program, all I see is <code>0</code> for <code>i</code> in my output. I would have expected the first time round we would have <code>i = 1 + 1</code>, followed by <code>i = 2 + 2</code>, followed by <code>i = 4 + 4</code> etc.</p>\n\n<p>Is this due to the fact that as soon as we try to re-declare <code>i</code> on the left hand-side, its value gets reset to <code>0</code>?</p>\n\n<p>If anyone can point me into the finer details of this that would be great.</p>\n\n<p>Change the <code>int</code> to <code>long</code> and it seems to be printing numbers as expected. I'm surprised at how fast it hits the max 32-bit value!</p>\n", "tags": ["java", "math", "variable-assignment"], "title": "Why does i = i + i give me 0?", "answers": [{"body": "<p>The issue is due to integer overflow.</p>\n\n<p>In 32-bit twos-complement arithmetic:</p>\n\n<p><code>i</code> does indeed start out having power-of-two values, but then overflow behaviors start once you get to 2<sup>30</sup>:</p>\n\n<blockquote>\n  <p>2<sup>30</sup> + 2<sup>30</sup> = -2<sup>31</sup></p>\n  \n  <p>-2<sup>31</sup> + -2<sup>31</sup> = 0</p>\n</blockquote>\n\n<p>...in <code>int</code> arithmetic.</p>\n", "title": "Why does i = i + i give me 0?", "tags": ["java", "math", "variable-assignment"], "link": "http://stackoverflow.com/questions/24173463/why-does-i-i-i-give-me-0/24173494#24173494", "question_id": 24173463, "answer_id": 24173494}, {"body": "<p>No, it does not print only zeros.</p>\n\n<p>Change it to this and you will see what happens.</p>\n\n<pre><code>    int k = 50;\n    while (true){\n        i = i + i;\n        System.out.println(i);\n        k--;\n        if (k&lt;0) break;\n    }\n</code></pre>\n\n<p>What happens is called overflow.</p>\n", "title": "Why does i = i + i give me 0?", "tags": ["java", "math", "variable-assignment"], "link": "http://stackoverflow.com/questions/24173463/why-does-i-i-i-give-me-0/24173496#24173496", "question_id": 24173463, "answer_id": 24173496}, {"body": "<p>It is correct, but after 31 iterations, 1073741824 + 1073741824 doesn't calculate correctly and after that prints only 0.</p>\n\n<p>You can refactor to use BigInteger, so your infinite loop will work correctly.</p>\n\n<pre><code>public class Mathz {\n    static BigInteger i = new BigInteger(\"1\");\n\n    public static void main(String[] args) {    \n\n        while (true){\n            i = i.add(i);\n            System.out.println(i);\n        }\n    }\n}\n</code></pre>\n", "title": "Why does i = i + i give me 0?", "tags": ["java", "math", "variable-assignment"], "link": "http://stackoverflow.com/questions/24173463/why-does-i-i-i-give-me-0/24173545#24173545", "question_id": 24173463, "answer_id": 24173545}, {"body": "<h2>Introduction</h2>\n\n<p>The problem is integer overflow. If it overflows, it goes back to the minimum value and continues from there. If it underflows, it goes back to the maximum value and continues from there.  The image below is of an Odometer. I use this to explain overflows. It's a mechanical overflow but a good example still. </p>\n\n<p>In an Odometer, the <code>max digit = 9</code>, so going beyond the maximum means <code>9 + 1</code>, which carries over and gives a <code>0</code> ; However there is no higher digit to change to a <code>1</code>, so the counter resets to <code>zero</code>. You get the idea - \"integer overflows\" come to mind now.</p>\n\n<p><img src=\"http://i.stack.imgur.com/3FPJL.jpg\" alt=\"\"> <img src=\"http://i.stack.imgur.com/zcG4U.gif\" alt=\"enter image description here\"> <img src=\"http://i.stack.imgur.com/Bt39x.jpg\" alt=\"enter image description here\"></p>\n\n<blockquote>\n  <p>The largest decimal literal of type int is 2147483647 (2<sup>31</sup>-1). All\n  decimal literals from 0 to 2147483647 may appear anywhere an int\n  literal may appear, but the literal 2147483648 may appear only as the\n  operand of the unary negation operator -.</p>\n  \n  <p>If an integer addition overflows, then the result is the low-order\n  bits of the mathematical sum as represented in some sufficiently large\n  two's-complement format. If overflow occurs, then the sign of the\n  result is not the same as the sign of the mathematical sum of the two\n  operand values.</p>\n</blockquote>\n\n<p>Thus, <code>2147483647 + 1</code> overflows and wraps around to <code>-2147483648</code>. Hence <code>int i=2147483647 + 1</code> would be overflowed, which isn't equal to <code>2147483648</code>. Also, you say \"it always prints 0\". It does not, because <strong><a href=\"http://ideone.com/WHrQIW\">http://ideone.com/WHrQIW</a></strong>. Below, these 8 numbers show the point at which it pivots and overflows. It then starts to print 0s. Also, don't be surprised how fast it calculates, the machines of today are rapid. </p>\n\n<pre><code>268435456\n536870912\n1073741824\n-2147483648\n0\n0\n0\n0\n</code></pre>\n\n<h2>Why integer overflow \"wraps around\"</h2>\n\n<p><img src=\"http://i.stack.imgur.com/FmPNG.jpg\" alt=\"\">\n                          <sup><i> <a href=\"http://pages.cs.wisc.edu/~willb/cs302/spring-07/why-integer-overflow-cl.pdf\">Original PDF</a> </i></sup></p>\n", "title": "Why does i = i + i give me 0?", "tags": ["java", "math", "variable-assignment"], "link": "http://stackoverflow.com/questions/24173463/why-does-i-i-i-give-me-0/24173592#24173592", "question_id": 24173463, "answer_id": 24173592}, {"body": "<p>For debugging such cases it is good to reduce the number of iterations in the loop. Use this instead of your <code>while(true)</code>:</p>\n\n<pre><code>for(int r = 0; r&lt;100; r++)\n</code></pre>\n\n<p>You can then see that it starts with 2 and is doubling the value until it is causing an overflow.</p>\n", "title": "Why does i = i + i give me 0?", "tags": ["java", "math", "variable-assignment"], "link": "http://stackoverflow.com/questions/24173463/why-does-i-i-i-give-me-0/24173982#24173982", "question_id": 24173463, "answer_id": 24173982}, {"body": "<pre><code>static int i = 1;\n    public static void main(String[] args) throws InterruptedException {\n        while (true){\n            i = i + i;\n            System.out.println(i);\n            Thread.sleep(100);\n        }\n    }\n</code></pre>\n\n<p>out put: </p>\n\n<pre><code>2\n4\n8\n16\n32\n64\n...\n1073741824\n-2147483648\n0\n0\n\nwhen sum &gt; Integer.MAX_INT then assign i = 0;\n</code></pre>\n", "title": "Why does i = i + i give me 0?", "tags": ["java", "math", "variable-assignment"], "link": "http://stackoverflow.com/questions/24173463/why-does-i-i-i-give-me-0/24180808#24180808", "question_id": 24173463, "answer_id": 24180808}, {"body": "<p>The largest decimal literal of type <code>int</code> is <b>2147483648</b> (=2<sup>31</sup>). All decimal literals from<b> 0 to 2147483647</b> may appear anywhere an int literal may appear, but the literal <b>2147483648</b> may appear only as the operand of the unary negation operator -.</p>\n\n<p>If an integer addition overflows, then the result is the low-order bits of the mathematical sum as represented in some sufficiently large two's-complement format. If overflow occurs, then the sign of the result is not the same as the sign of the mathematical sum of the two operand values.</p>\n", "title": "Why does i = i + i give me 0?", "tags": ["java", "math", "variable-assignment"], "link": "http://stackoverflow.com/questions/24173463/why-does-i-i-i-give-me-0/24183502#24183502", "question_id": 24173463, "answer_id": 24183502}, {"body": "<p>Since I don't have enough reputation I cannot post the picture of the output for the same program in C with controlled output, u can try yourself and see that it actually prints 32 times and then as explained due to overflow <b>i=1073741824 + 1073741824</b> changes to <b>\n-2147483648</b> and one more further addition is out of range of int and turns to <b><kbd>Zero</kbd></b> .</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n\nint main()\n{\nstatic int i = 1;\n\n    while (true){\n        i = i + i;\n      printf(\"\\n%d\",i);\n      _getch();\n    }\n      return 0;\n}\n</code></pre>\n", "title": "Why does i = i + i give me 0?", "tags": ["java", "math", "variable-assignment"], "link": "http://stackoverflow.com/questions/24173463/why-does-i-i-i-give-me-0/24187596#24187596", "question_id": 24173463, "answer_id": 24187596}, {"body": "<p>The value of <code>i</code> is stored in memory using a fixed quantity of binary digits. When a number needs more digits than are available, only the lowest digits are stored (the highest digits get lost).</p>\n\n<p>Adding <code>i</code> to itself is the same as multiplying <code>i</code> by two. Just like multiplying a number by ten in decimal notation can be performed by sliding each digit to the left and putting a zero on the right, multiplying a number by two in binary notation can be performed the same way. This adds one digit on the right, so a digit gets lost on the left.</p>\n\n<p>Here the starting value is 1, so if we use 8 digits to store <code>i</code> (for example),</p>\n\n<ul>\n<li>after 0 iterations, the value is <code>00000001</code></li>\n<li>after 1 iteration , the value is <code>00000010</code></li>\n<li>after 2 iterations, the value is <code>00000100</code></li>\n</ul>\n\n<p>and so on, until the final non-zero step</p>\n\n<ul>\n<li>after 7 iterations, the value is <code>10000000</code></li>\n<li>after 8 iterations, the value is <code>00000000</code></li>\n</ul>\n\n<p>No matter how many binary digits are allocated to store the number, and no matter what the starting value is, eventually all of the digits will be lost as they are pushed off to the left. After that point, continuing to double the number will not change the number - it will still be represented by all zeroes.</p>\n", "title": "Why does i = i + i give me 0?", "tags": ["java", "math", "variable-assignment"], "link": "http://stackoverflow.com/questions/24173463/why-does-i-i-i-give-me-0/24194900#24194900", "question_id": 24173463, "answer_id": 24194900}, {"body": "<p>The reason why you don't see the lower numbers is because by the time it starts writing to the output it is already past the range of int, some due to ABCD analysis / JIT some due to the slow nature of Java...</p>\n\n<p><a href=\"http://reverseblade.blogspot.com/2009/02/c-versus-c-versus-java-performance.html\" rel=\"nofollow\">http://reverseblade.blogspot.com/2009/02/c-versus-c-versus-java-performance.html</a> </p>\n\n<p>I bet if you added a memory barrier or call to  'sleep' or declare the int as <code>volatile</code> you would see more numbers in the lower range.</p>\n", "title": "Why does i = i + i give me 0?", "tags": ["java", "math", "variable-assignment"], "link": "http://stackoverflow.com/questions/24173463/why-does-i-i-i-give-me-0/24216213#24216213", "question_id": 24173463, "answer_id": 24216213}, {"body": "<p>I'll use an 8-bit number for illustration because it can be completely detailed in a short space.  Hex numbers begin with 0x, while binary numbers begin with 0b.</p>\n\n<p>The max value for an 8-bit unsigned integer is 255 (0xFF or 0b11111111).\nIf you add 1, you would typically expect to get: 256 (0x100 or 0b100000000).\nBut since that's too many bits (9), that's over the max, so the first part just gets dropped, leaving you with 0 effectively (0x(1)00 or 0b(1)00000000, but with the 1 dropped).</p>\n\n<p>So when your program runs, you get:</p>\n\n<pre><code>1 = 0x01 = 0b1\n2 = 0x02 = 0b10\n4 = 0x04 = 0b100\n8 = 0x08 = 0b1000\n16 = 0x10 = 0b10000\n32 = 0x20 = 0b100000\n64 = 0x40 = 0b1000000\n128 = 0x80 = 0b10000000\n256 = 0x00 = 0b00000000 (wraps to 0)\n0 + 0 = 0 = 0x00 = 0b00000000\n0 + 0 = 0 = 0x00 = 0b00000000\n0 + 0 = 0 = 0x00 = 0b00000000\n...\n</code></pre>\n", "title": "Why does i = i + i give me 0?", "tags": ["java", "math", "variable-assignment"], "link": "http://stackoverflow.com/questions/24173463/why-does-i-i-i-give-me-0/24232261#24232261", "question_id": 24173463, "answer_id": 24232261}], "creation_date": 1402524723, "score": 95, "link": "http://stackoverflow.com/questions/24173463/why-does-i-i-i-give-me-0", "question_id": 24173463}, {"body": "<p>In Java 8 how can I filter a collection using the <code>Stream</code> API by checking the distinctness of a property of each object?</p>\n\n<p>For example I have a list of <code>Person</code> object and I want to remove people with the same name,</p>\n\n<pre><code>persons.stream().distinct();\n</code></pre>\n\n<p>Will use the default equality check for a <code>Person</code> object, so I need something like,</p>\n\n<pre><code>persons.stream().distinct(p -&gt; p.getName());\n</code></pre>\n\n<p>Unfortunately the <code>distinct()</code> method has no such overload. Without modifying the equality check inside the <code>Person</code> class is it possible to do this succinctly?</p>\n", "tags": ["java", "java-8", "java-collections-api"], "title": "Java 8 Distinct by property", "answers": [{"body": "<p>You can wrap the person objects into another class, that only compares the names of the persons. Afterwards, you unwrap the wrapped objects to get a person stream again. The stream operations might look as follows:</p>\n\n<pre><code>persons.stream()\n    .map(Wrapper::new)\n    .distinct()\n    .map(Wrapper::unwrap)\n    ...;\n</code></pre>\n\n<p>The class <code>Wrapper</code> might look as follows:</p>\n\n<pre><code>class Wrapper {\n    private final Person person;\n    public Wrapper(Person person) {\n        this.person = person;\n    }\n    public Person unwrap() {\n        return person;\n    }\n    public boolean equals(Object other) {\n        if (other instanceof Wrapper) {\n            return ((Wrapper) other).person.getName().equals(person.getName());\n        } else {\n            return false;\n        }\n    }\n    public int hashCode() {\n        return person.getName().hashCode();\n    }\n}\n</code></pre>\n", "title": "Java 8 Distinct by property", "tags": ["java", "java-8", "java-collections-api"], "link": "http://stackoverflow.com/questions/23699371/java-8-distinct-by-property/23699499#23699499", "question_id": 23699371, "answer_id": 23699499}, {"body": "<p>An alternative would be to place the persons in a map using the name as a key:</p>\n\n<pre><code>persons.collect(toMap(Person::getName, p -&gt; p, (p, q) -&gt; p)).values();\n</code></pre>\n\n<p>Note that the Person that is kept, in case of a duplicate name, will be the first encontered.</p>\n", "title": "Java 8 Distinct by property", "tags": ["java", "java-8", "java-collections-api"], "link": "http://stackoverflow.com/questions/23699371/java-8-distinct-by-property/23701589#23701589", "question_id": 23699371, "answer_id": 23701589}, {"body": "<p>The easiest way to implement this is to jump on the sort feature as it already provides an optional <code>Comparator</code> which can be created using an element\u2019s property. Then you have to filter duplicates out which can be done using a statefull <code>Predicate</code> which uses the fact that for a sorted stream all equal elements are adjacent:</p>\n\n<pre><code>Comparator&lt;Person&gt; c=Comparator.comparing(Person::getName);\nstream.sorted(c).filter(new Predicate&lt;Person&gt;() {\n    Person previous;\n    public boolean test(Person p) {\n      if(previous!=null &amp;&amp; c.compare(previous, p)==0)\n        return false;\n      previous=p;\n      return true;\n    }\n})./* more stream operations here */;\n</code></pre>\n\n<p>Of course, a statefull <code>Predicate</code> is not thread-safe, however if that\u2019s your need you can move this logic into a <code>Collector</code> and let the stream take care of the thread-safety when using your <code>Collector</code>. This depends on what you want to do with the stream of distinct elements which you didn\u2019t tell us in your question.</p>\n", "title": "Java 8 Distinct by property", "tags": ["java", "java-8", "java-collections-api"], "link": "http://stackoverflow.com/questions/23699371/java-8-distinct-by-property/23733628#23733628", "question_id": 23699371, "answer_id": 23733628}, {"body": "<p>I finally figured out a nice way to do this. Consider <code>distinct</code> to be a <em>stateful filter</em>. Write function that returns a predicate that also maintains state about what it's seen previously, and returns whether the given element was seen for the first time:</p>\n\n<pre><code>public static &lt;T&gt; Predicate&lt;T&gt; distinctByKey(Function&lt;? super T, ?&gt; keyExtractor) {\n    Map&lt;Object,Boolean&gt; seen = new ConcurrentHashMap&lt;&gt;();\n    return t -&gt; seen.putIfAbsent(keyExtractor.apply(t), Boolean.TRUE) == null;\n}\n</code></pre>\n\n<p>Then you can write:</p>\n\n<pre><code>persons.stream().filter(distinctByKey(p -&gt; p.getName());\n</code></pre>\n\n<p>Note: this is essentially the same as <a href=\"http://stackoverflow.com/a/27872086/1441122\">my answer</a> to this question:<a href=\"http://stackoverflow.com/questions/27870136/java-lambda-stream-distinct-on-arbitrary-key\">Java Lambda Stream Distinct() on arbitrary key?</a></p>\n", "title": "Java 8 Distinct by property", "tags": ["java", "java-8", "java-collections-api"], "link": "http://stackoverflow.com/questions/23699371/java-8-distinct-by-property/27872852#27872852", "question_id": 23699371, "answer_id": 27872852}, {"body": "<p>There's a simpler approach using a TreeSet with a custom comparator.</p>\n\n<pre><code>persons.stream()\n    .collect(Collectors.toCollection(\n      () -&gt; new TreeSet&lt;Person&gt;((p1, p2) -&gt; p1.getName().compareTo(p2.getName())) \n));\n</code></pre>\n", "title": "Java 8 Distinct by property", "tags": ["java", "java-8", "java-collections-api"], "link": "http://stackoverflow.com/questions/23699371/java-8-distinct-by-property/27905405#27905405", "question_id": 23699371, "answer_id": 27905405}, {"body": "<p>Building on @josketres's answer, I created a generic utility method:</p>\n\n<p>You could make this more Java 8-friendly by creating a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collector.html\" rel=\"nofollow\">Collector</a>.</p>\n\n<pre><code>public static &lt;T&gt; Set&lt;T&gt; removeDuplicates(Collection&lt;T&gt; input, Comparator&lt;T&gt; comparer) {\n    return input.stream()\n            .collect(toCollection(() -&gt; new TreeSet&lt;&gt;(comparer)));\n}\n\n\n@Test\npublic void removeDuplicatesWithDuplicates() {\n    ArrayList&lt;C&gt; input = new ArrayList&lt;&gt;();\n    Collections.addAll(input, new C(7), new C(42), new C(42));\n    Collection&lt;C&gt; result = removeDuplicates(input, (c1, c2) -&gt; Integer.compare(c1.value, c2.value));\n    assertEquals(2, result.size());\n    assertTrue(result.stream().anyMatch(c -&gt; c.value == 7));\n    assertTrue(result.stream().anyMatch(c -&gt; c.value == 42));\n}\n\n@Test\npublic void removeDuplicatesWithoutDuplicates() {\n    ArrayList&lt;C&gt; input = new ArrayList&lt;&gt;();\n    Collections.addAll(input, new C(1), new C(2), new C(3));\n    Collection&lt;C&gt; result = removeDuplicates(input, (t1, t2) -&gt; Integer.compare(t1.value, t2.value));\n    assertEquals(3, result.size());\n    assertTrue(result.stream().anyMatch(c -&gt; c.value == 1));\n    assertTrue(result.stream().anyMatch(c -&gt; c.value == 2));\n    assertTrue(result.stream().anyMatch(c -&gt; c.value == 3));\n}\n\nprivate class C {\n    public final int value;\n\n    private C(int value) {\n        this.value = value;\n    }\n}\n</code></pre>\n", "title": "Java 8 Distinct by property", "tags": ["java", "java-8", "java-collections-api"], "link": "http://stackoverflow.com/questions/23699371/java-8-distinct-by-property/30843698#30843698", "question_id": 23699371, "answer_id": 30843698}, {"body": "<p>We can also use <a href=\"https://github.com/ReactiveX/RxJava\">RxJava</a> (very powerful <a href=\"http://reactivex.io/\">reactive extension</a> library)</p>\n\n<pre><code>Observable.from(persons).distinct(Person::getName)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Observable.from(persons).distinct(p -&gt; p.getName())\n</code></pre>\n", "title": "Java 8 Distinct by property", "tags": ["java", "java-8", "java-collections-api"], "link": "http://stackoverflow.com/questions/23699371/java-8-distinct-by-property/31038932#31038932", "question_id": 23699371, "answer_id": 31038932}, {"body": "<p>You can use the <code>distinct(HashingStrategy)</code> method in <a href=\"https://github.com/eclipse/eclipse-collections\" rel=\"nofollow\">Eclipse Collections</a>.</p>\n\n<pre><code>List&lt;Person&gt; persons = ...;\nMutableList&lt;Person&gt; distinct =\n    ListIterate.distinct(persons, HashingStrategies.fromFunction(Person::getName));\n</code></pre>\n\n<p>If you can refactor <code>persons</code> to implement an Eclipse Collections interface, you can call the method directly on the list.</p>\n\n<pre><code>MutableList&lt;Person&gt; persons = ...;\nMutableList&lt;Person&gt; distinct =\n    persons.distinct(HashingStrategies.fromFunction(Person::getName));\n</code></pre>\n\n<p><a href=\"https://github.com/eclipse/eclipse-collections/blob/master/eclipse-collections-api/src/main/java/org/eclipse/collections/api/block/HashingStrategy.java\" rel=\"nofollow\">HashingStrategy</a> is simply a strategy interface that allows you to define custom implementations of equals and hashcode.</p>\n\n<pre><code>public interface HashingStrategy&lt;E&gt;\n{\n    int computeHashCode(E object);\n    boolean equals(E object1, E object2);\n}\n</code></pre>\n\n<p>Note: I am a committer for Eclipse Collections.</p>\n", "title": "Java 8 Distinct by property", "tags": ["java", "java-8", "java-collections-api"], "link": "http://stackoverflow.com/questions/23699371/java-8-distinct-by-property/34731808#34731808", "question_id": 23699371, "answer_id": 34731808}], "creation_date": 1400254812, "score": 93, "link": "http://stackoverflow.com/questions/23699371/java-8-distinct-by-property", "question_id": 23699371}, {"body": "<p>The new Java 8 stream framework and friends make for some very concise java code, but I have come across a seemingly-simple situation that is tricky to do concisely.</p>\n\n<p>Consider a <code>List&lt;Thing&gt; things</code> and method <code>Optional&lt;Other&gt; resolve(Thing thing)</code>. I want to map the <code>Thing</code>s to <code>Optional&lt;Other&gt;</code>s and get the first <code>Other</code>. The obvious solution would be to use <code>things.stream().flatMap(this::resolve).findFirst()</code>, but <code>flatMap</code> requires that you return a stream, and <code>Optional</code> doesn't have a <code>stream()</code> method (or is it a <code>Collection</code> or provide a method to convert it to or view it as a <code>Collection</code>).</p>\n\n<p>The best I can come up with is this:</p>\n\n<pre><code>things.stream()\n    .map(this::resolve)\n    .filter(Optional::isPresent)\n    .map(Optional::get)\n    .findFirst();\n</code></pre>\n\n<p>But that seems awfully long-winded for what seems like a very common case. Anyone have a better idea?</p>\n", "tags": ["java", "lambda", "java-8"], "title": "Using Java 8&#39;s Optional with Stream::flatMap", "answers": [{"body": "<p>Most likely You are doing it wrong.</p>\n\n<p>Java 8 Optional is not meant to be used in this manner. It is usually only reserved for terminal stream operations that may or may not return a value, like find for example.</p>\n\n<p>In your case it might be better to first try to find a cheap way to filter out those items that are resolvable and then get the first item as an optional and resolve it as a last operation. Better yet - instead of filtering, find the first resolvable item and resolve it.</p>\n\n<pre><code>things.filter(Thing::isResolvable)\n      .findFirst()\n      .flatMap(this::resolve)\n      .get();\n</code></pre>\n\n<p>Rule of thumb is that you should strive to reduce number of items in the stream before you transform them to something else. YMMV of course.</p>\n", "title": "Using Java 8&#39;s Optional with Stream::flatMap", "tags": ["java", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/22725537/using-java-8s-optional-with-streamflatmap/22725767#22725767", "question_id": 22725537, "answer_id": 22725767}, {"body": "<p>Yes, this does seem to be a small hole in the API, in that it's somewhat inconvenient to turn an Optional into a zero-or-one length Stream. You could do this:</p>\n\n<pre><code>Optional&lt;Other&gt; result =\n    things.stream()\n          .map(this::resolve)\n          .flatMap(o -&gt; o.isPresent() ? Stream.of(o.get()) : Stream.empty())\n          .findFirst();\n</code></pre>\n\n<p>Having the ternary operator inside the flatMap is a bit cumbersome, though, so it might be better to write a little helper function to do this:</p>\n\n<pre><code>/**\n * Turns an Optional&lt;T&gt; into a Stream&lt;T&gt; of length zero or one depending upon\n * whether a value is present.\n */\nstatic &lt;T&gt; Stream&lt;T&gt; streamopt(Optional&lt;T&gt; opt) {\n    if (opt.isPresent())\n        return Stream.of(opt.get());\n    else\n        return Stream.empty();\n}\n\nOptional&lt;Other&gt; result =\n    things.stream()\n          .flatMap(t -&gt; streamopt(resolve(t)))\n          .findFirst();\n</code></pre>\n\n<p>Here, I've inlined the call to resolve() instead of having a separate map() operation, but this is a matter of taste.</p>\n\n<p><strong>UPDATE 2015-02-25</strong></p>\n\n<p><code>Optional.stream</code> has been added to JDK 9: see <a href=\"https://bugs.openjdk.java.net/browse/JDK-8050820\">JDK-8050820</a> and <a href=\"http://hg.openjdk.java.net/jdk9/jdk9/jdk/rev/ed38ff66f7dd\">changeset</a>. This enables the example to be rewritten as follows, without the need of any helper method:</p>\n\n<pre><code>Optional&lt;Other&gt; result =\n    things.stream()\n          .map(this::resolve)\n          .flatMap(Optional::stream)\n          .findFirst();\n</code></pre>\n", "title": "Using Java 8&#39;s Optional with Stream::flatMap", "tags": ["java", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/22725537/using-java-8s-optional-with-streamflatmap/22726869#22726869", "question_id": 22725537, "answer_id": 22726869}, {"body": "<p>You cannot do it more concise as you are already doing.</p>\n\n<p>You claim that you do not want <code>.filter(Optional::isPresent)</code> <em>and</em> <code>.map(Optional::get)</code>.</p>\n\n<p>This has been resolved by the method @StuartMarks describes, however as a result you now map it to an <code>Optional&lt;T&gt;</code>, so now you need to use <code>.flatMap(this::streamopt)</code> and a <code>get()</code> in the end.</p>\n\n<p>So it still consists of two statements and you can now get exceptions with the new method! Because, what if every optional is empty? Then the <code>findFirst()</code> will return an empty optional and your <code>get()</code> will fail!</p>\n\n<p>So what you have:</p>\n\n<pre><code>things.stream()\n    .map(this::resolve)\n    .filter(Optional::isPresent)\n    .map(Optional::get)\n    .findFirst();\n</code></pre>\n\n<p><strong>is</strong> actually the best way to accomplish what you want, and that is you want to save the result as a <code>T</code>, not as an <code>Optional&lt;T&gt;</code>.</p>\n\n<p>I took the liberty of creating a <code>CustomOptional&lt;T&gt;</code> class that wraps the <code>Optional&lt;T&gt;</code> and provides an extra method, <code>flatStream()</code>. Note that you cannot extend <code>Optional&lt;T&gt;</code>:</p>\n\n<pre><code>class CustomOptional&lt;T&gt; {\n    private final Optional&lt;T&gt; optional;\n\n    private CustomOptional() {\n        this.optional = Optional.empty();\n    }\n\n    private CustomOptional(final T value) {\n        this.optional = Optional.of(value);\n    }\n\n    private CustomOptional(final Optional&lt;T&gt; optional) {\n        this.optional = optional;\n    }\n\n    public Optional&lt;T&gt; getOptional() {\n        return optional;\n    }\n\n    public static &lt;T&gt; CustomOptional&lt;T&gt; empty() {\n        return new CustomOptional&lt;&gt;();\n    }\n\n    public static &lt;T&gt; CustomOptional&lt;T&gt; of(final T value) {\n        return new CustomOptional&lt;&gt;(value);\n    }\n\n    public static &lt;T&gt; CustomOptional&lt;T&gt; ofNullable(final T value) {\n        return (value == null) ? empty() : of(value);\n    }\n\n    public T get() {\n        return optional.get();\n    }\n\n    public boolean isPresent() {\n        return optional.isPresent();\n    }\n\n    public void ifPresent(final Consumer&lt;? super T&gt; consumer) {\n        optional.ifPresent(consumer);\n    }\n\n    public CustomOptional&lt;T&gt; filter(final Predicate&lt;? super T&gt; predicate) {\n        return new CustomOptional&lt;&gt;(optional.filter(predicate));\n    }\n\n    public &lt;U&gt; CustomOptional&lt;U&gt; map(final Function&lt;? super T, ? extends U&gt; mapper) {\n        return new CustomOptional&lt;&gt;(optional.map(mapper));\n    }\n\n    public &lt;U&gt; CustomOptional&lt;U&gt; flatMap(final Function&lt;? super T, ? extends CustomOptional&lt;U&gt;&gt; mapper) {\n        return new CustomOptional&lt;&gt;(optional.flatMap(mapper.andThen(cu -&gt; cu.getOptional())));\n    }\n\n    public T orElse(final T other) {\n        return optional.orElse(other);\n    }\n\n    public T orElseGet(final Supplier&lt;? extends T&gt; other) {\n        return optional.orElseGet(other);\n    }\n\n    public &lt;X extends Throwable&gt; T orElseThrow(final Supplier&lt;? extends X&gt; exceptionSuppier) throws X {\n        return optional.orElseThrow(exceptionSuppier);\n    }\n\n    public Stream&lt;T&gt; flatStream() {\n        if (!optional.isPresent()) {\n            return Stream.empty();\n        }\n        return Stream.of(get());\n    }\n\n    public T getTOrNull() {\n        if (!optional.isPresent()) {\n            return null;\n        }\n        return get();\n    }\n\n    @Override\n    public boolean equals(final Object obj) {\n        return optional.equals(obj);\n    }\n\n    @Override\n    public int hashCode() {\n        return optional.hashCode();\n    }\n\n    @Override\n    public String toString() {\n        return optional.toString();\n    }\n}\n</code></pre>\n\n<p>You will see that I added <code>flatStream()</code>, as here:</p>\n\n<pre><code>public Stream&lt;T&gt; flatStream() {\n    if (!optional.isPresent()) {\n        return Stream.empty();\n    }\n    return Stream.of(get());\n}\n</code></pre>\n\n<p>Used as:</p>\n\n<pre><code>String result = Stream.of(\"a\", \"b\", \"c\", \"de\", \"fg\", \"hij\")\n        .map(this::resolve)\n        .flatMap(CustomOptional::flatStream)\n        .findFirst()\n        .get();\n</code></pre>\n\n<p>You <em>still</em> will need to return a <code>Stream&lt;T&gt;</code> here, as you cannot return <code>T</code>, because if <code>!optional.isPresent()</code>, then <code>T == null</code> if you declare it such, but then your <code>.flatMap(CustomOptional::flatStream)</code> would attempt to add <code>null</code> to a stream and that is not possible.</p>\n\n<p>As example:</p>\n\n<pre><code>public T getTOrNull() {\n    if (!optional.isPresent()) {\n        return null;\n    }\n    return get();\n}\n</code></pre>\n\n<p>Used as:</p>\n\n<pre><code>String result = Stream.of(\"a\", \"b\", \"c\", \"de\", \"fg\", \"hij\")\n        .map(this::resolve)\n        .map(CustomOptional::getTOrNull)\n        .findFirst()\n        .get();\n</code></pre>\n\n<p>Will now throw a <code>NullPointerException</code> inside the stream operations.</p>\n\n<h1>Conclusion</h1>\n\n<p>The method you used, is actually the best method.</p>\n", "title": "Using Java 8&#39;s Optional with Stream::flatMap", "tags": ["java", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/22725537/using-java-8s-optional-with-streamflatmap/22735184#22735184", "question_id": 22725537, "answer_id": 22735184}, {"body": "<p>I'm adding this second answer based on a proposed edit by user <a href=\"http://stackoverflow.com/users/3475600/srborlongan\">srborlongan</a> to <a href=\"http://stackoverflow.com/a/22726869/1441122\">my other answer</a>. I think the technique proposed was interesting, but it wasn't really suitable as an edit to my answer. Others agreed and the proposed edit was voted down. (I wasn't one of the voters.) The technique has merit, though. It would have been best if srborlongan had posted his/her own answer. This hasn't happened yet, and I didn't want the technique to be lost in the mists of the StackOverflow rejected edit history, so I decided to surface it as a separate answer myself.</p>\n\n<p>Basically the technique is to use some of the <code>Optional</code> methods in a clever way to avoid having to use a ternary operator (<code>? :</code>) or an if/else statement.</p>\n\n<p>My inline example would be rewritten this way:</p>\n\n<pre><code>Optional&lt;Other&gt; result =\n    things.stream()\n          .map(this::resolve)\n          .flatMap(o -&gt; o.map(Stream::of).orElseGet(Stream::empty))\n          .findFirst();\n</code></pre>\n\n<p>An my example that uses a helper method would be rewritten this way:</p>\n\n<pre><code>/**\n * Turns an Optional&lt;T&gt; into a Stream&lt;T&gt; of length zero or one depending upon\n * whether a value is present.\n */\nstatic &lt;T&gt; Stream&lt;T&gt; streamopt(Optional&lt;T&gt; opt) {\n    return opt.map(Stream::of)\n              .orElseGet(Stream::empty);\n}\n\nOptional&lt;Other&gt; result =\n    things.stream()\n          .flatMap(t -&gt; streamopt(resolve(t)))\n          .findFirst();\n</code></pre>\n\n<p><strong>COMMENTARY</strong></p>\n\n<p>Let's compare the original vs modified versions directly:</p>\n\n<pre><code>// original\n.flatMap(o -&gt; o.isPresent() ? Stream.of(o.get()) : Stream.empty())\n\n// modified\n.flatMap(o -&gt; o.map(Stream::of).orElseGet(Stream::empty))\n</code></pre>\n\n<p>The original is a straightforward if workmanlike approach: we get an <code>Optional&lt;Other&gt;</code>; if it has a value, we return a stream containing that value, and if it has no value, we return an empty stream. Pretty simple and easy to explain.</p>\n\n<p>The modification is clever and has the advantage that it avoids conditionals. (I know that some people dislike the ternary operator. If misused it can indeed make code hard to understand.) However, sometimes things can be too clever. The modified code also starts off with an <code>Optional&lt;Other&gt;</code>. Then it calls <code>Optional.map</code> which is defined as follows:</p>\n\n<blockquote>\n  <p>If a value is present, apply the provided mapping function to it, and if the result is non-null, return an Optional describing the result. Otherwise return an empty Optional.</p>\n</blockquote>\n\n<p>The <code>map(Stream::of)</code> call returns an <code>Optional&lt;Stream&lt;Other&gt;&gt;</code>. If a value was present in the input Optional, the returned Optional contains a Stream that contains the single Other result. But if the value was not present, the result is an empty Optional.</p>\n\n<p>Next, the call to <code>orElseGet(Stream::empty)</code> returns a value of type <code>Stream&lt;Other&gt;</code>. If its input value is present, it gets the value, which is the single-element <code>Stream&lt;Other&gt;</code>. Otherwise (if the input value is absent) it returns an empty <code>Stream&lt;Other&gt;</code>. So the result is correct, the same as the original conditional code.</p>\n\n<p>In the comments discussing on my answer, regarding the rejected edit, I had described this technique as \"more concise but also more obscure\". I stand by this. It took me a while to figure out what it was doing, and it also took me a while to write up the above description of what it was doing. The key subtlety is the transformation from <code>Optional&lt;Other&gt;</code> to <code>Optional&lt;Stream&lt;Other&gt;&gt;</code>. Once you grok this it makes sense, but it wasn't obvious to me.</p>\n\n<p>I'll acknowledge, though, that things that are initially obscure can become idiomatic over time. It might be that this technique ends up being the best way in practice, at least until <code>Optional.stream</code> gets added (if it ever does).</p>\n\n<p><strong>UPDATE:</strong> <code>Optional.stream</code> has been added to JDK 9.</p>\n", "title": "Using Java 8&#39;s Optional with Stream::flatMap", "tags": ["java", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/22725537/using-java-8s-optional-with-streamflatmap/22822592#22822592", "question_id": 22725537, "answer_id": 22822592}, {"body": "<p>A slightly shorter version using <code>reduce</code>:</p>\n\n<pre><code>things.stream()\n  .map(this::resolve)\n  .reduce(Optional.empty(), (a, b) -&gt; a.isPresent() ? a : b );\n</code></pre>\n\n<p>You could also move the reduce function to a static utility method and then it becomes:</p>\n\n<pre><code>  .reduce(Optional.empty(), Util::firstPresent );\n</code></pre>\n", "title": "Using Java 8&#39;s Optional with Stream::flatMap", "tags": ["java", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/22725537/using-java-8s-optional-with-streamflatmap/27215810#27215810", "question_id": 22725537, "answer_id": 27215810}, {"body": "<p>If you don't mind to use a third party library you may use <a href=\"http://javaslang.com\" rel=\"nofollow\">Javaslang</a>. It is like Scala, but implemented in Java.</p>\n\n<p>It comes with a complete immutable collection library that is very similar to that known from Scala. These collections replace Java's collections and Java 8's Stream. It also has its own implementation of Option.</p>\n\n<pre><code>import javaslang.collection.Stream;\nimport javaslang.control.Option;\n\nStream&lt;Option&lt;String&gt;&gt; options = Stream.of(Option.some(\"foo\"), Option.none(), Option.some(\"bar\"));\n\n// = Stream(\"foo\", \"bar\")\nStream&lt;String&gt; strings = options.flatMap(o -&gt; o);\n</code></pre>\n\n<p>Here is a solution for the example of the initial question:</p>\n\n<pre><code>import javaslang.collection.Stream;\nimport javaslang.control.Option;\n\npublic class Test {\n\n    void run() {\n\n        // = Stream(Thing(1), Thing(2), Thing(3))\n        Stream&lt;Thing&gt; things = Stream.of(new Thing(1), new Thing(2), new Thing(3));\n\n        // = Some(Other(2))\n        Option&lt;Other&gt; others = things.flatMap(this::resolve).headOption();\n    }\n\n    Option&lt;Other&gt; resolve(Thing thing) {\n        Other other = (thing.i % 2 == 0) ? new Other(i + \"\") : null;\n        return Option.of(other);\n    }\n\n}\n\nclass Thing {\n    final int i;\n    Thing(int i) { this.i = i; }\n    public String toString() { return \"Thing(\" + i + \")\"; }\n}\n\nclass Other {\n    final String s;\n    Other(String s) { this.s = s; }\n    public String toString() { return \"Other(\" + s + \")\"; }\n}\n</code></pre>\n\n<p>Disclaimer: I'm the creator of Javaslang.</p>\n", "title": "Using Java 8&#39;s Optional with Stream::flatMap", "tags": ["java", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/22725537/using-java-8s-optional-with-streamflatmap/35160464#35160464", "question_id": 22725537, "answer_id": 35160464}, {"body": "<p>As my <a href=\"http://stackoverflow.com/a/22725767/1712\">previous answer</a> appeared not to be very popular, I will give this another go.</p>\n\n<h2>A short answer:</h2>\n\n<p>You are mostly on a right track. The shortest code to get to your desired output I could come up with is this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>things.stream()\n      .map(this::resolve)\n      .filter(Optional::isPresent)\n      .findFirst()\n      .flatMap( Function.identity() );\n</code></pre>\n\n<p>This will fit all your requirements: </p>\n\n<ol>\n<li>It will find first response that resolves to a nonempty <code>Optional&lt;Result&gt;</code></li>\n<li>It calls <code>this::resolve</code> lazily as needed</li>\n<li><code>this::resolve</code> will not be called after first non-empty result</li>\n<li>It will return <code>Optional&lt;Result&gt;</code></li>\n</ol>\n\n<h2>Longer answer</h2>\n\n<p>The only modification compared to OP initial version was that I removed <code>.map(Optional::get)</code> before call to <code>.findFirst()</code> and added <code>.flatMap(o -&gt; o)</code> as the last call in the chain.</p>\n\n<p>This has a nice effect of getting rid of the double-Optional, whenever stream finds an actual result.</p>\n\n<p>You can't really go any shorter than this in Java. </p>\n\n<p>The alternative snippet of code using the more conventional <code>for</code> loop technique is going to be about same number of lines of code and have more or less same order and number of operations you need to perform:</p>\n\n<ol>\n<li>Calling <code>this.resolve</code>, </li>\n<li>filtering based on <code>Optional.isPresent</code> </li>\n<li>returning the result and</li>\n<li>some way of dealing with negative result (when nothing was found)</li>\n</ol>\n\n<p>Just to prove that my solution works as advertised, I wrote a small test program:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class StackOverflow {\n\n    public static void main( String... args ) {\n        try {\n            final int integer = Stream.of( args )\n                    .peek( s -&gt; System.out.println( \"Looking at \" + s ) )\n                    .map( StackOverflow::resolve )\n                    .filter( Optional::isPresent )\n                    .findFirst()\n                    .flatMap( o -&gt; o )\n                    .orElseThrow( NoSuchElementException::new )\n                    .intValue();\n\n            System.out.println( \"First integer found is \" + integer );\n        }\n        catch ( NoSuchElementException e ) {\n            System.out.println( \"No integers provided!\" );\n        }\n    }\n\n    private static Optional&lt;Integer&gt; resolve( String string ) {\n        try {\n            return Optional.of( Integer.valueOf( string ) );\n        }\n        catch ( NumberFormatException e )\n        {\n            System.out.println( '\"' + string + '\"' + \" is not an integer\");\n            return Optional.empty();\n        }\n    }\n\n}\n</code></pre>\n\n<p>(It does have few extra lines for debugging and verifying that only as many calls to resolve as needed...)</p>\n\n<p>Executing this on a command line, I got the following results:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ java StackOferflow a b 3 c 4\nLooking at a\n\"a\" is not an integer\nLooking at b\n\"b\" is not an integer\nLooking at 3\nFirst integer found is 3\n</code></pre>\n", "title": "Using Java 8&#39;s Optional with Stream::flatMap", "tags": ["java", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/22725537/using-java-8s-optional-with-streamflatmap/36334855#36334855", "question_id": 22725537, "answer_id": 36334855}], "creation_date": 1396053721, "score": 93, "link": "http://stackoverflow.com/questions/22725537/using-java-8s-optional-with-streamflatmap", "question_id": 22725537}, {"body": "<p>I've written a factory to produce <code>java.sql.Connection</code> objects:</p>\n\n<pre><code>public class MySQLDatabaseConnectionFactory implements DatabaseConnectionFactory {\n\n    @Override public Connection getConnection() {\n        try {\n            return DriverManager.getConnection(...);\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n\n<p>I'd like to validate the parameters passed to <code>DriverManager.getConnection</code>, but I don't know how to mock a static method. I'm using JUnit 4 and Mockito for my test cases. Is there a good way to mock/verify this specific use-case?</p>\n", "tags": ["java", "unit-testing", "mocking", "mockito"], "title": "Mocking static methods with Mockito", "answers": [{"body": "<p>To mock static method you should use a Powermock look at:\n<a href=\"http://code.google.com/p/powermock/wiki/MockStatic\" rel=\"nofollow\">http://code.google.com/p/powermock/wiki/MockStatic</a>.\nMockito <a href=\"https://code.google.com/p/mockito/wiki/FAQ#What_are_the_limitations_of_Mockito\" rel=\"nofollow\">doesn't provide</a> this functionality.</p>\n\n<p>You can read nice a article about mockito here:\n<a href=\"http://refcardz.dzone.com/refcardz/mockito\" rel=\"nofollow\">http://refcardz.dzone.com/refcardz/mockito</a></p>\n", "title": "Mocking static methods with Mockito", "tags": ["java", "unit-testing", "mocking", "mockito"], "link": "http://stackoverflow.com/questions/21105403/mocking-static-methods-with-mockito/21111644#21111644", "question_id": 21105403, "answer_id": 21111644}, {"body": "<p>As mentioned before you can not mock static methods with mockito. </p>\n\n<p>If changing your testing framework is not an option you can do the following:</p>\n\n<p>Create an interface for DriverManager, mock this interface, inject it via some kind of dependency injection and verify on that mock. </p>\n", "title": "Mocking static methods with Mockito", "tags": ["java", "unit-testing", "mocking", "mockito"], "link": "http://stackoverflow.com/questions/21105403/mocking-static-methods-with-mockito/21114773#21114773", "question_id": 21105403, "answer_id": 21114773}, {"body": "<p>Use <a href=\"https://github.com/jayway/powermock/wiki/MockitoUsage\">PowerMockito</a> on top of Mockito.</p>\n\n<p>Example code:</p>\n\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest(DriverManager.class)\npublic class Mocker {\n\n    @Test\n    public void testName() throws Exception {\n\n        //given\n        PowerMockito.mockStatic(DriverManager.class);\n        BDDMockito.given(DriverManager.getConnection(...)).willReturn(...);\n\n        //when\n        sut.execute();\n\n        //then\n        PowerMockito.verifyStatic();\n        DriverManager.getConnection(...);\n\n    }\n</code></pre>\n\n<p>More information:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/4482315/why-does-mockito-not-mock-static-methods\">Why does Mockito not mock static methods?</a></li>\n</ul>\n", "title": "Mocking static methods with Mockito", "tags": ["java", "unit-testing", "mocking", "mockito"], "link": "http://stackoverflow.com/questions/21105403/mocking-static-methods-with-mockito/21116014#21116014", "question_id": 21105403, "answer_id": 21116014}, {"body": "<p>The typical strategy for doging static methods that you have no way of avoiding using is by creating wrapped objects and using the wrapper objects instead.</p>\n\n<p>The wrapper objects become facades to the real static classes, and you do not test those.</p>\n\n<p>A wrapper object could be something like</p>\n\n<pre><code>public class Slf4jMdcWrapper {\n    public static final Slf4jMdcWrapper SINGLETON = new Slf4jMdcWrapper();\n\n    public String myApisToTheSaticMethodsInSlf4jMdcStaticUtilityClass() {\n        return MDC.getWhateverIWant();\n    }\n}\n</code></pre>\n\n<p>Finally, your class under test can use this singleton object by for example \nhaving a default constructor for real life use:</p>\n\n<pre><code>public class SomeClassUnderTest {\n    final Slf4jMdcWrapper myMockableObject;\n\n    /** constructor used by CDI or whatever real life use case */\n    public myClassUnderTestContructor() {\n        this.myMockableObject = Slf4jMdcWrapper.SINGLETON;\n    }\n\n    /** constructor used in tests*/\n    myClassUnderTestContructor(Slf4jMdcWrapper myMock) {\n        this.myMockableObject = myMock;\n    }\n}\n</code></pre>\n\n<p>And here you have a class that can easily be tested because you do not use directly a class with static methods.</p>\n\n<p>If you are using CDI and can make use of Inject annotation than it is even easier.\nJust make your Wrapper bean @ApplicationScoped bean, get that thing injected as collborator you do not even need messy constructors for testing, and go on with the mocking.</p>\n", "title": "Mocking static methods with Mockito", "tags": ["java", "unit-testing", "mocking", "mockito"], "link": "http://stackoverflow.com/questions/21105403/mocking-static-methods-with-mockito/29841824#29841824", "question_id": 21105403, "answer_id": 29841824}, {"body": "<p>You can do it with a little bit of refactoring:</p>\n\n<pre><code>public class MySQLDatabaseConnectionFactory implements DatabaseConnectionFactory {\n\n    @Override public Connection getConnection() {\n        try {\n            return _getConnection(...some params...);\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    //method to forward parameters, enabling mocking, extension, etc\n    Connection _getConnection(...some params...) throws SQLException {\n        return DriverManager.getConnection(...some params...);\n    }\n}\n</code></pre>\n\n<p>Then you can extend your class <code>MySQLDatabaseConnectionFactory</code> to return a mocked connection, do assertions on the parameters, etc.</p>\n\n<p>The extended class can reside within the test case, if it's located in the same package (which I encourage you to do)</p>\n\n<pre><code>public class MockedConnectionFactory extends MySQLDatabaseConnectionFactory {\n\n    Connection _getConnection(...some params...) throws SQLException {\n        if (some param != something) throw new InvalidParameterException();\n\n        //consider mocking some methods with when(yourMock.something()).thenReturn(value)\n        return Mockito.mock(Connection.class);\n    }\n}\n</code></pre>\n", "title": "Mocking static methods with Mockito", "tags": ["java", "unit-testing", "mocking", "mockito"], "link": "http://stackoverflow.com/questions/21105403/mocking-static-methods-with-mockito/31975820#31975820", "question_id": 21105403, "answer_id": 31975820}], "creation_date": 1389668933, "score": 93, "link": "http://stackoverflow.com/questions/21105403/mocking-static-methods-with-mockito", "question_id": 21105403}, {"body": "<p>This problem sounds similar to a <a href=\"http://stackoverflow.com/questions/13959128/avd-manager-cannot-create-android-virtual-device\">few</a> <a href=\"http://stackoverflow.com/questions/14003009/android-virtual-device-manager-cannot-create-avd\">others</a>, except in my case the OK button is not grey-ed out. But for those who would rather not click the links...</p>\n\n<p>Trying to create or edit an AVD from within Eclipse, after entering my settings, the \"OK\" button seems to be \"clickable\", but when I click it absolutely nothing happens. <img src=\"http://i.stack.imgur.com/trEo8.png\" alt=\"clickable but useless\"></p>\n\n<p>I've made sure I have the appropriate system images installed, and that the target platform matches the API being used. Clearly a CPU has been chosen, skin set, etc... all the things that would make the OK button greyed out, which it's not.</p>\n\n<p>I can create/edit AVDs if I run the AVD manager from <em>outside</em> eclipse, so this isn't the end of the world, but I feel there's a solution to this particular problem and I want to help solve it.</p>\n\n<p>I've tried running eclipse as an administrator (that's what stopped the AVD manager from crashing outside of eclipse). I've tried just waiting around, or clicking multiple times. Looking at the Task Manager, no new processes begin when I click OK, nor does eclipse's CPU or RAM usage increase at all. The \"Edit Android Virtual Device\" window doesn't even go away.</p>\n\n<p>Any clues?</p>\n\n<p>(Running Indigo with the ADT plugin, btw, not the bundled version, which failed to work in a different way. Java 1.6.0 45. Windows 8, unfortunately. Plenty of RAM etc)</p>\n", "tags": ["java", "android", "eclipse", "adt", "avd"], "title": "Cannot create or edit Android Virtual Devices (AVD) from Eclipse, ADT 22.6", "answers": [{"body": "<h2><strong>THIS IS A POSSIBLE WORKAROUND FOR BUGS IN ADT 22.6.0 ONLY, THESE BUGS SUBSEQUENTLY FIXED IN FOLLOWING BUILDS</strong></h2>\n\n<p><strong>Download and install new ADT v22.6.1 from <a href=\"http://dl.google.com/android/ADT-22.6.1.zip\">here (zip)</a> or use SDK manager to update</strong></p>\n\n<p>Seems like some bug from Google side, this problem found after <strong>\"ADT 22.6\"</strong> update. Widely reported on <strong>\"Android Open Source Project - Issue Tracker\"</strong> and nobody properly answered it yet.</p>\n\n<p>However I was partially successful to create an AVD by opening <strong>\"AVD manager.exe\"</strong> from <strong>\"Android SDK\"</strong> for creating new AVD try to open directly AVD Manager.exe in SDK folder.</p>\n\n<p>May be we have to wait for any conformation from <strong>Android community</strong></p>\n\n<p>Worked for me, sort of.. .</p>\n\n<p><strong>(Windows 8.1 Pro 64 Bit, Java JDK 1.7 Update 25, Eclipse Standard Kepler Service Release 1, Android Development Toolkit 22.6.0.v201403010043-1049357)</strong></p>\n\n<p><strong>Update 1</strong></p>\n\n<p>Further research revealed that launching <strong>AVD Manager</strong> from <strong>SDK Manager (Tools --> Manage AVDs...)</strong> also works without any problems.</p>\n\n<p><strong>Update 2</strong></p>\n\n<p>More bad news is AVD creation not working from <strong>command line tool</strong> too.</p>\n\n<p><strong>Update 3</strong></p>\n\n<p>Assuming some parameter passed during launching <strong>AVD manager</strong> from <strong>Eclipse</strong> causes these problems</p>\n\n<p><strong>Update 4</strong></p>\n\n<p>Updated <strong>Java</strong> to <strong>JDK 1.7 Update 51</strong> and <strong>Eclipse Standard SDK</strong> to <strong>Kepler Service Release 2</strong> their latest and no resolution to the problems. Also tested under <strong>Debian</strong> and same results obtained.</p>\n\n<p><strong>Update 5</strong></p>\n\n<p>At <a href=\"https://code.google.com/p/android/issues/detail?id=66661\"><strong>https://code.google.com/p/android/issues/detail?id=66661</strong></a> android project members conforms the problems and promises to fix by upcoming versions of ADT (22.6.1 - 22.6.3). At the mean time I would suggest to roll-back <strong>ADT</strong> to a lower version <a href=\"https://dl.google.com/android/ADT-22.3.0.zip\"><strong>version 22.3.0</strong></a> </p>\n\n<p>To uninstall current ADT go to </p>\n\n<p><strong>Help --> About Eclipse --> Installation Details --> Android Development Tools --> Uninstall</strong></p>\n\n<p>I may suggest uninstalling whole packages from Android <strong>(DDMS, Hierarchy Viewer, NDT, Traceview, OpenGL ES..etc..)</strong> to avoid any possible compatibility issues and install a fresh new ADT from above link through <strong>archive installation method</strong>.</p>\n\n<p>Hope this will solve this problem temporarily. And wait for new release of ADT <a href=\"http://developer.android.com/tools/sdk/eclipse-adt.html\">here</a>. </p>\n\n<p><strong>Update 6</strong></p>\n\n<p>New <strong>ADT</strong>, <strong>version 22.6.1</strong> is out now which will solve these problems</p>\n", "title": "Cannot create or edit Android Virtual Devices (AVD) from Eclipse, ADT 22.6", "tags": ["java", "android", "eclipse", "adt", "avd"], "link": "http://stackoverflow.com/questions/22190076/cannot-create-or-edit-android-virtual-devices-avd-from-eclipse-adt-22-6/22198007#22198007", "question_id": 22190076, "answer_id": 22198007}, {"body": "<p>Give some value for your sd card. May be something like 100 or 200</p>\n", "title": "Cannot create or edit Android Virtual Devices (AVD) from Eclipse, ADT 22.6", "tags": ["java", "android", "eclipse", "adt", "avd"], "link": "http://stackoverflow.com/questions/22190076/cannot-create-or-edit-android-virtual-devices-avd-from-eclipse-adt-22-6/22202941#22202941", "question_id": 22190076, "answer_id": 22202941}, {"body": "<p>For those posting that we need to set the sdcard size: I tried that and many other settings, and none of that helps. I get the NoClassDefFound Exception mentioned by mogilka, in the Error view. No configuration settings are going to fix that. It seems a bad update was pushed</p>\n", "title": "Cannot create or edit Android Virtual Devices (AVD) from Eclipse, ADT 22.6", "tags": ["java", "android", "eclipse", "adt", "avd"], "link": "http://stackoverflow.com/questions/22190076/cannot-create-or-edit-android-virtual-devices-avd-from-eclipse-adt-22-6/22205719#22205719", "question_id": 22190076, "answer_id": 22205719}, {"body": "<p>To elaborate on the statement \"I can create/edit AVDs if I run the AVD manager from outside eclipse\" in the OP:</p>\n\n<p>Run the following on the command line</p>\n\n<pre><code>&lt;android-sdk-location&gt;/tools/android avd (on Linux in this case)\n</code></pre>\n\n<p>This launches the same AVD window you see when you click the AVD Manager icon in the eclipse toolbar. But this instance of the AVD manager does not have the bug, and you can create and run emulators as you did before the bug was introduced.</p>\n", "title": "Cannot create or edit Android Virtual Devices (AVD) from Eclipse, ADT 22.6", "tags": ["java", "android", "eclipse", "adt", "avd"], "link": "http://stackoverflow.com/questions/22190076/cannot-create-or-edit-android-virtual-devices-avd-from-eclipse-adt-22-6/22206532#22206532", "question_id": 22190076, "answer_id": 22206532}, {"body": "<p>INFO:</p>\n\n<p>I WAS able to create an AVD successfully after clicking OK several times and modifying some of my settings as a test.</p>\n\n<p>I tried yashwanth krishnan solution and tried to open the AVD Manageer.exe directly without success. The manager will not open directly for me on Windows 8 x64. It tries to open, then shuts down immediately...</p>\n", "title": "Cannot create or edit Android Virtual Devices (AVD) from Eclipse, ADT 22.6", "tags": ["java", "android", "eclipse", "adt", "avd"], "link": "http://stackoverflow.com/questions/22190076/cannot-create-or-edit-android-virtual-devices-avd-from-eclipse-adt-22-6/22212753#22212753", "question_id": 22190076, "answer_id": 22212753}, {"body": "<p>I met this issue too . The issue occurs in the latest version 22.6 which was released in March . Meanwhile I did the testing in 22.3 , the issue was not found .</p>\n\n<p>So that I suggest that rollback the ADT to 22.3 and wait the new fix for 22.6</p>\n", "title": "Cannot create or edit Android Virtual Devices (AVD) from Eclipse, ADT 22.6", "tags": ["java", "android", "eclipse", "adt", "avd"], "link": "http://stackoverflow.com/questions/22190076/cannot-create-or-edit-android-virtual-devices-avd-from-eclipse-adt-22-6/22239935#22239935", "question_id": 22190076, "answer_id": 22239935}, {"body": "<p>I banged my head on this for several hours until I found out that the default location was C:\\username path\\SDKs or something, where Android was installed on my system to D:\\sdks\\android_sdk_windows. So, changing the Eclipse Android directory to D:\\sdks\\android_sdk_windows fixed it. </p>\n\n<p>I also heard that it may help things if you install the Android SDK to a path without spaces. </p>\n\n<p>Hope this helps someone keep some hair.</p>\n", "title": "Cannot create or edit Android Virtual Devices (AVD) from Eclipse, ADT 22.6", "tags": ["java", "android", "eclipse", "adt", "avd"], "link": "http://stackoverflow.com/questions/22190076/cannot-create-or-edit-android-virtual-devices-avd-from-eclipse-adt-22-6/22340451#22340451", "question_id": 22190076, "answer_id": 22340451}, {"body": "<p><strong>Update and Solution:</strong> AsYashwanth Krishnan said, The bug in question is now fixed in later versions. I tried ADT 222.6.1 and ADT 22.6.2 , and they did not suffer from the bug of not not being able to create or edit Android Virtual Devices. The direct solution is to update you ADT to latest version, The workaround written below is left only for historical purposes.</p>\n\n<p><strong>Historical Workaround</strong> As @Yashwanth Krishnan said, this is a bug in ADT plugin 22.6; so best workaround is to rollback. for those asking how to rollback, here is a step-by-step guide:</p>\n\n<p>First: Uninstall ADT plugin and all related plugins for android:\nhelp->about\n<img src=\"http://i.stack.imgur.com/2Q3LS.png\" alt=\"enter image description here\">\nInstallation details\n<img src=\"http://i.stack.imgur.com/Lv6qE.png\" alt=\"enter image description here\">\nSelect android plugins and press uninstall button\n<img src=\"http://i.stack.imgur.com/QiGgT.png\" alt=\"enter image description here\">\n<img src=\"http://i.stack.imgur.com/hKwK1.png\" alt=\"enter image description here\">\n<img src=\"http://i.stack.imgur.com/rCEQZ.png\" alt=\"enter image description here\">\n<img src=\"http://i.stack.imgur.com/JngiA.png\" alt=\"enter image description here\">\nRestart </p>\n\n<p>Second: Download ADT 22.3.0 Archive from <a href=\"https://dl.google.com/android/ADT-22.3.0.zip\" rel=\"nofollow\">https://dl.google.com/android/ADT-22.3.0.zip</a></p>\n\n<p>and install it\n<img src=\"http://i.stack.imgur.com/xKIu6.png\" alt=\"enter image description here\">\nadd repository from archive on local disk\n<img src=\"http://i.stack.imgur.com/wLbqw.png\" alt=\"enter image description here\">\n<img src=\"http://i.stack.imgur.com/c7g5S.png\" alt=\"enter image description here\">\n<img src=\"http://i.stack.imgur.com/9n4g6.png\" alt=\"enter image description here\">\nSelect android plugins\n<img src=\"http://i.stack.imgur.com/egcGy.png\" alt=\"enter image description here\"></p>\n", "title": "Cannot create or edit Android Virtual Devices (AVD) from Eclipse, ADT 22.6", "tags": ["java", "android", "eclipse", "adt", "avd"], "link": "http://stackoverflow.com/questions/22190076/cannot-create-or-edit-android-virtual-devices-avd-from-eclipse-adt-22-6/22394891#22394891", "question_id": 22190076, "answer_id": 22394891}, {"body": "<p>Today I ran into the same problem after installing Maven.  I messed around with different Path settings to get it to work and I ran into issues.  I was also trying to install the google server for GCM.  Somewhere in what I was doing I corrupted the Android Virtual Device Manager.  I searched S.O. for an answer, then I decided to follow the first rule of TechSupport.  I reinstalled the tool kit! </p>\n\n<p>I went into the SDK manager and I uninstalled the tools (by clicking the Tool checkbox).  It took several minutes to delete them all.  Then I reinstalled the Tools which took about ten minutes.  I rebooted Eclipse and the AVD and worked just like it did yesterday!</p>\n\n<p>This time it only took a total of twenty minutes to fix.  </p>\n", "title": "Cannot create or edit Android Virtual Devices (AVD) from Eclipse, ADT 22.6", "tags": ["java", "android", "eclipse", "adt", "avd"], "link": "http://stackoverflow.com/questions/22190076/cannot-create-or-edit-android-virtual-devices-avd-from-eclipse-adt-22-6/22419919#22419919", "question_id": 22190076, "answer_id": 22419919}, {"body": "<p>Per the <a href=\"http://developer.android.com/tools/sdk/eclipse-adt.html\" rel=\"nofollow\">release notes</a>, this problem has been resolved in revision 22.6.1, which is now available for download.</p>\n\n<p>Updated your Android SDK Tools to 22.6.1 in Eclipse by selecting <code>Window</code> > <code>Android SDK Manager</code> and follow the prompts to install the update.</p>\n\n<p>After that update finishes, select <code>Help</code> > <code>Check for Updates</code> and follow the prompts to update the appropriate Eclipse components.</p>\n\n<p>After completing these updates, I tested the AVD functionality and it appears to be working properly.</p>\n", "title": "Cannot create or edit Android Virtual Devices (AVD) from Eclipse, ADT 22.6", "tags": ["java", "android", "eclipse", "adt", "avd"], "link": "http://stackoverflow.com/questions/22190076/cannot-create-or-edit-android-virtual-devices-avd-from-eclipse-adt-22-6/22499432#22499432", "question_id": 22190076, "answer_id": 22499432}, {"body": "<p>i just copied the avds from a different system as descriped here: \n<a href=\"http://stackoverflow.com/questions/4575167/android-how-to-copy-the-emulator-to-a-friend-for-testing\">Android - How to copy the emulator to a friend for testing</a></p>\n", "title": "Cannot create or edit Android Virtual Devices (AVD) from Eclipse, ADT 22.6", "tags": ["java", "android", "eclipse", "adt", "avd"], "link": "http://stackoverflow.com/questions/22190076/cannot-create-or-edit-android-virtual-devices-avd-from-eclipse-adt-22-6/22510495#22510495", "question_id": 22190076, "answer_id": 22510495}, {"body": "<h2>1 minute solution</h2>\n\n<p>I used a quick workaround where I cloned a device that already existed. The <code>Clone</code> button worked and I was able to successfully edit the clone.</p>\n\n<h2>Steps:</h2>\n\n<h2>Select a Device by Google</h2>\n\n<p><img src=\"http://i.stack.imgur.com/5mlmn.png\" alt=\"enter image description here\"></p>\n\n<h2>Click the \"Clone...\" button</h2>\n\n<p><img src=\"http://i.stack.imgur.com/DP7c0.png\" alt=\"enter image description here\"></p>\n\n<h2>A window will pop up, click \"Clone device\"</h2>\n\n<p><img src=\"http://i.stack.imgur.com/h5qDT.png\" alt=\"dddd\"></p>\n\n<h2>Select the newly cloned Device, it should say \"... by User\"</h2>\n\n<p><img src=\"http://i.stack.imgur.com/gbbL0.png\" alt=\"enter image description here\"></p>\n\n<h2>Click the \"Edit\" button on the side</h2>\n\n<p><img src=\"http://i.stack.imgur.com/SLtFo.png\" alt=\"enter image description here\"></p>\n\n<h2>There you have it, you now have your own custom virtual device</h2>\n\n<p><img src=\"http://i.stack.imgur.com/fjhE2.png\" alt=\"enter image description here\"></p>\n", "title": "Cannot create or edit Android Virtual Devices (AVD) from Eclipse, ADT 22.6", "tags": ["java", "android", "eclipse", "adt", "avd"], "link": "http://stackoverflow.com/questions/22190076/cannot-create-or-edit-android-virtual-devices-avd-from-eclipse-adt-22-6/24727052#24727052", "question_id": 22190076, "answer_id": 24727052}, {"body": "<p>I faced the similar issue. I am using 23.0.2 version of android SDK. </p>\n\n<p>\"OK\" button was disabled, but then I went to the path where android SDK was installed. In my case:</p>\n\n<pre><code>C:\\Program Files\\Android\\android-sdk\\\n</code></pre>\n\n<p>and executed AVD-Manager.exe by right clicking and selecting <strong>Run as an Administrator</strong>, and it worked like a charm. </p>\n", "title": "Cannot create or edit Android Virtual Devices (AVD) from Eclipse, ADT 22.6", "tags": ["java", "android", "eclipse", "adt", "avd"], "link": "http://stackoverflow.com/questions/22190076/cannot-create-or-edit-android-virtual-devices-avd-from-eclipse-adt-22-6/26060805#26060805", "question_id": 22190076, "answer_id": 26060805}, {"body": "<p>Sometimes the AVD cannot be created because of this following error while starting:\nx86 emulation currently requires hardware acceleration!</p>\n\n<p>I was also facing this same issue. If u are facing the same, then it can be resolved by opening SDK Manager -> Under Extra -> Installed \"Intel x86 Emulator Accelerator (HAXM Installer). Then when creating the AVD, select the proper CPU. This should work. :-)</p>\n", "title": "Cannot create or edit Android Virtual Devices (AVD) from Eclipse, ADT 22.6", "tags": ["java", "android", "eclipse", "adt", "avd"], "link": "http://stackoverflow.com/questions/22190076/cannot-create-or-edit-android-virtual-devices-avd-from-eclipse-adt-22-6/26346578#26346578", "question_id": 22190076, "answer_id": 26346578}], "creation_date": 1394000284, "score": 93, "link": "http://stackoverflow.com/questions/22190076/cannot-create-or-edit-android-virtual-devices-avd-from-eclipse-adt-22-6", "question_id": 22190076}, {"body": "<p>I'm surprised at how it is possible to continue execution even after a <code>StackOverflowError</code> has occurred in Java.</p>\n\n<p>I know that <code>StackOverflowError</code> is a sublass of the class Error.\nThe class Error is decumented as \"a subclass of Throwable that indicates serious problems that a reasonable application should not try to catch.\"</p>\n\n<p>This sounds more like a recommendation than a rule, subtending that catching a Error like a StackOverflowError is in fact permitted and it's up to the programmer's reasonability not to do so. And see, I tested this code and it terminates normally.</p>\n\n<pre><code>public class Test\n{\n    public static void main(String[] args)\n    {\n        try {\n            foo();\n        } catch (StackOverflowError e) {\n            bar();\n        }\n        System.out.println(\"normal termination\");\n    }\n\n    private static void foo() {\n        System.out.println(\"foo\");\n        foo();\n    }\n\n    private static void bar() {\n        System.out.println(\"bar\");\n    }\n}\n</code></pre>\n\n<p>How can this be? I think by the time the StackOverflowError is thrown, the stack should be so full that there is no room for calling another function. Is the error handling block running in a different stack, or what is going on here?</p>\n", "tags": ["java", "stack-overflow"], "title": "Why is it possible to recover from a StackOverflowError?", "answers": [{"body": "<p>When the StackOverflowError is thrown, the stack is full. However, when it's <em>caught</em>, all those <code>foo</code> calls have been popped from the stack. <code>bar</code> can run normally because the stack is no longer overflowing with <code>foo</code>s. (Note that I don't think the JLS guarantees you can recover from a stack overflow like this.)</p>\n", "title": "Why is it possible to recover from a StackOverflowError?", "tags": ["java", "stack-overflow"], "link": "http://stackoverflow.com/questions/22128485/why-is-it-possible-to-recover-from-a-stackoverflowerror/22128531#22128531", "question_id": 22128485, "answer_id": 22128531}, {"body": "<p>When the stack overflows and <code>StackOverflowError</code> is thrown, the usual exception handling unwinds the stack. Unwinding the stack means:</p>\n\n<ul>\n<li>abort the execution of the currently active function</li>\n<li>delete its stack frame, proceed with the calling function</li>\n<li>abort the execution of the caller</li>\n<li>delete its stack frame, proceed with the calling function</li>\n<li>and so on...</li>\n</ul>\n\n<p>... until the exception is caught. This is normal (in fact, necessary) and independent of which exception is thrown and why. Since you catch the exception outside of the first call to <code>foo()</code>, the thousands of <code>foo</code> stack frames that filled the stack have all been unwound and most of the stack is free to be used again.</p>\n", "title": "Why is it possible to recover from a StackOverflowError?", "tags": ["java", "stack-overflow"], "link": "http://stackoverflow.com/questions/22128485/why-is-it-possible-to-recover-from-a-stackoverflowerror/22128534#22128534", "question_id": 22128485, "answer_id": 22128534}, {"body": "<p>When the StackOverFlow occurs, the JVM will pop down to the catch, freeing the stack.<p>\nIn you example, it get rids of all the stacked foo.</p>\n", "title": "Why is it possible to recover from a StackOverflowError?", "tags": ["java", "stack-overflow"], "link": "http://stackoverflow.com/questions/22128485/why-is-it-possible-to-recover-from-a-stackoverflowerror/22128538#22128538", "question_id": 22128485, "answer_id": 22128538}, {"body": "<p>Because the stack doesn't actually overflow.  A better name might be AttemptToOverflowStack.  Basically what it means is that the last attempt to adjust the stack frame errs because there isn't enough free space left on the stack. The stack could actually have lots of space left, just not enough space.  So, whatever operation would have depended upon the call succeeding (typically a method invocation), never gets exectued and all that is left is for the program to deal with that fact.  Which means that it is really no different from any other exception.  In fact, you could catch the exception in the function that is making the call.</p>\n", "title": "Why is it possible to recover from a StackOverflowError?", "tags": ["java", "stack-overflow"], "link": "http://stackoverflow.com/questions/22128485/why-is-it-possible-to-recover-from-a-stackoverflowerror/22131880#22131880", "question_id": 22128485, "answer_id": 22131880}], "creation_date": 1393768496, "score": 92, "link": "http://stackoverflow.com/questions/22128485/why-is-it-possible-to-recover-from-a-stackoverflowerror", "question_id": 22128485}, {"body": "<p>I have a little problem.</p>\n\n<p><strong>The Problem:</strong><br>\nI am trying to build a gradle of my Android Project on Jenkins and now I am standing on this problem i can't resolve. \nDuring the Building I have this Error message:</p>\n\n<pre><code>:Client:mergeDebugResources\n/var/lib/jenkins/workspace/LMA-Client/Client/build/exploded-aar/com.google.android.gms/play-services/3.1.59/res/drawable-hdpi/common_signin_btn_text_focus_light.9.png: \nError: Cannot run program \"/opt/android-sdk/build-tools/19.0.1/aapt\": java.io.IOException: error=2, No such file or directory\n:Client:mergeDebugResources FAILED\n</code></pre>\n\n<p>You can imagine that this aapt... yep its there and the png... its there too, so the mistake must be somewhere else.</p>\n\n<p><strong>The Solution?</strong><br>\nNow I googled 1-2 hours around, surfed on this great Website and what I found is that if Jenkins runs on a 64-bit system, I need to install the ia32-libs. Like that:</p>\n\n<pre><code>sudo apt-get install ia32-libs\n</code></pre>\n\n<p>now I tried that, and I couldn't install it:</p>\n\n<pre><code>The following packages have unmet dependencies:\n ia32-libs : Depends: ia32-libs-multiarch\n</code></pre>\n\n<p>so I tried to install <em>\"ia32-libs-multiarch\"</em>, but again:</p>\n\n<pre><code>The following packages have unmet dependencies:\n ia32-libs-multiarch:i386 : Depends: libgphoto2-2:i386 but it is not going to be installed\n                            Depends: libsane:i386 but it is not going to be installed\nE: Unable to correct problems, you have held broken packages.\n</code></pre>\n\n<p><strong>Finally</strong><br>\nso finally im standing here and asking me: is that really the solution? And why should I install this thing? And how? So please help me, I think I am not far away from the answer.\n<br></p>\n", "tags": ["java", "android", "jenkins", "gradle", "aapt"], "title": "&quot;aapt&quot; IOException error=2, No such file or directory&quot; why can&#39;t I build my gradle on jenkins?", "answers": [{"body": "<p>I had the following similar error on Ubuntu 13.10:</p>\n\n<p><code>Cannot run program \"/usr/local/android-sdk-linux/build-tools/19.0.3/aapt\": error=2, No such file or directory</code></p>\n\n<p>And <a href=\"http://stackoverflow.com/a/18930424/514483\">this answer</a> fixed it for me:</p>\n\n<blockquote>\n  <p>To get aapt working (this fixed my issues with the avd as well) just install these two packages:</p>\n\n<pre><code>sudo apt-get install lib32stdc++6 lib32z1\n</code></pre>\n</blockquote>\n", "title": "&quot;aapt&quot; IOException error=2, No such file or directory&quot; why can&#39;t I build my gradle on jenkins?", "tags": ["java", "android", "jenkins", "gradle", "aapt"], "link": "http://stackoverflow.com/questions/22701405/aapt-ioexception-error-2-no-such-file-or-directory-why-cant-i-build-my-grad/23201209#23201209", "question_id": 22701405, "answer_id": 23201209}, {"body": "<p>For Arch 64 users, you must first <a href=\"https://wiki.archlinux.org/index.php/Multilib\">enable multilib</a> for pacman, then install the 32-bit packages:</p>\n\n<pre><code>sudo pacman -Syv lib32-libstdc++5 lib32-zlib\n</code></pre>\n", "title": "&quot;aapt&quot; IOException error=2, No such file or directory&quot; why can&#39;t I build my gradle on jenkins?", "tags": ["java", "android", "jenkins", "gradle", "aapt"], "link": "http://stackoverflow.com/questions/22701405/aapt-ioexception-error-2-no-such-file-or-directory-why-cant-i-build-my-grad/30067006#30067006", "question_id": 22701405, "answer_id": 30067006}, {"body": "<p>I installed <em>ndk</em> in the <em>sdk manager</em> and it worked.</p>\n", "title": "&quot;aapt&quot; IOException error=2, No such file or directory&quot; why can&#39;t I build my gradle on jenkins?", "tags": ["java", "android", "jenkins", "gradle", "aapt"], "link": "http://stackoverflow.com/questions/22701405/aapt-ioexception-error-2-no-such-file-or-directory-why-cant-i-build-my-grad/32260571#32260571", "question_id": 22701405, "answer_id": 32260571}, {"body": "<p>For Fedora users:</p>\n\n<pre><code>sudo dnf install zlib.i686 libstdc++.i686\n</code></pre>\n", "title": "&quot;aapt&quot; IOException error=2, No such file or directory&quot; why can&#39;t I build my gradle on jenkins?", "tags": ["java", "android", "jenkins", "gradle", "aapt"], "link": "http://stackoverflow.com/questions/22701405/aapt-ioexception-error-2-no-such-file-or-directory-why-cant-i-build-my-grad/39148570#39148570", "question_id": 22701405, "answer_id": 39148570}], "creation_date": 1395963320, "score": 91, "link": "http://stackoverflow.com/questions/22701405/aapt-ioexception-error-2-no-such-file-or-directory-why-cant-i-build-my-grad", "question_id": 22701405}, {"body": "<p>I'm working on Open Network Video Interface Forum-Java project and following the steps described in the <a href=\"http://www.openipcam.com/files/ONVIF/ONVIF_WG-APG-Application_Programmer%27s_Guide.pdf\" rel=\"nofollow\">ONVIF Application Programmer's Guide</a>.</p>\n\n<p>I have generated sources from the <code>wsdls</code> provided in ONVIF site. I'm able to retrieve the live stream URI using the <code>media.wsdl</code>. Now I have an issue with recording. The codes that I have tried is given below:</p>\n\n<pre><code>RecordingService recording_ervice = new RecordingService();\nRecordingPort record_port = recording_ervice.getRecordingPort();\n\n\nBindingProvider bindingProvider = (BindingProvider) record_port;\n\n// Add a security handler for the credentials\nfinal Binding binding = bindingProvider.getBinding();\nList&lt;Handler&gt; handlerList = binding.getHandlerChain();\nif (handlerList == null) {\n    handlerList = new ArrayList&lt;Handler&gt;();\n}\n\nhandlerList.add(new RecordStream.SecurityHandler());\n// binding.setHandlerChain(handlerList);\n\n// Set the actual web services address instead of the mock service\nMap&lt;String, Object&gt; requestContext = bindingProvider.getRequestContext();\n\nrequestContext.put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, \"http://\" + deviceip + \"/onvif/media_service\");\nrequestContext.put(BindingProvider.USERNAME_PROPERTY, user);\nrequestContext.put(BindingProvider.PASSWORD_PROPERTY, pass);\n\nRecordings recordings = record_port.getRecordings();\n</code></pre>\n\n<p>The above code on run gives an error as:</p>\n\n<pre><code>Exception in thread \"main\" javax.xml.ws.soap.SOAPFaultException: Method 'ns11:GetServiceCapabilities' not implemented: method name or namespace not recognized\n</code></pre>\n\n<p>I also tried with media service, then the error is:</p>\n\n<pre><code>Exception in thread \"main\" com.sun.xml.internal.ws.client.ClientTransportException: The server sent HTTP status code 405: Method Not Allowed\n</code></pre>\n", "tags": ["java", "networking", "recording", "ip-camera", "onvif"], "title": "Issue with recording from the Open ONVIF (Network Video Interface Forum ) device", "answers": [{"body": "<p>When you tried with the media source, you requested an unauthorized action apparently since the server returned Error code 405. Either the method is prohibited from use, or you need a credential to use the method.</p>\n\n<p>As for <code>Exception in thread \"main\" javax.xml.ws.soap.SOAPFaultException: Method 'ns11:GetServiceCapabilities' not implemented: method name or namespace not recognized</code>, @Sigismondo is right about the fact that most ip cameras don't support it. You will need an alternative recording method(literal and pun) to record from an ip camera. </p>\n", "title": "Issue with recording from the Open ONVIF (Network Video Interface Forum ) device", "tags": ["java", "networking", "recording", "ip-camera", "onvif"], "link": "http://stackoverflow.com/questions/20986661/issue-with-recording-from-the-open-onvif-network-video-interface-forum-device/25255130#25255130", "question_id": 20986661, "answer_id": 25255130}, {"body": "<p>You are using <code>http://\" + deviceip + \"/onvif/media_service</code> to reach the Recording service, but this is a <a href=\"http://www.onvif.org/onvif/ver10/media/wsdl/media.wsdl\" rel=\"nofollow\">media.wsdl</a> service. So when you try to call getRecordings on the media service it seems normal you receive an error.</p>\n\n<p>The url for <a href=\"http://www.onvif.org/onvif/ver10/recording.wsdl\" rel=\"nofollow\">recording.wsdl</a> service should be <code>http://\" + deviceip + \"/onvif/recording_service</code>.</p>\n\n<p>In order to get the corect URL to reach the recording service you should request it from the GetCapabilities method of the <a href=\"http://www.onvif.org/ver10/device/wsdl/devicemgmt.wsdl\" rel=\"nofollow\">devicemgmt.wsdl</a> service. </p>\n", "title": "Issue with recording from the Open ONVIF (Network Video Interface Forum ) device", "tags": ["java", "networking", "recording", "ip-camera", "onvif"], "link": "http://stackoverflow.com/questions/20986661/issue-with-recording-from-the-open-onvif-network-video-interface-forum-device/25354001#25354001", "question_id": 20986661, "answer_id": 25354001}, {"body": "<p><strong>HTTP 405 - Resource not allowed</strong> usually occurs in IIS.\nThis problem occurs if the following conditions are true:</p>\n\n<ul>\n<li><p>You do not specify the file name. For example, you do not specify\nhttp ://Server/Web/...</p></li>\n<li><p>The Scripting Object Model (SOM) is enabled.</p></li>\n<li>A DTC event is called.</li>\n</ul>\n\n<p>So, when the SOM is enabled a <strong>&lt; form ></strong> tag is inserted in the page the tag is invalid means it does not contain any action.</p>\n", "title": "Issue with recording from the Open ONVIF (Network Video Interface Forum ) device", "tags": ["java", "networking", "recording", "ip-camera", "onvif"], "link": "http://stackoverflow.com/questions/20986661/issue-with-recording-from-the-open-onvif-network-video-interface-forum-device/25400253#25400253", "question_id": 20986661, "answer_id": 25400253}], "creation_date": 1389152871, "score": 88, "link": "http://stackoverflow.com/questions/20986661/issue-with-recording-from-the-open-onvif-network-video-interface-forum-device", "question_id": 20986661}, {"body": "<p>I'm looking at the docs for the <code>IntStream</code>, and I see an <code>toArray</code> method, but no way to go directly to a <code>List&lt;Integer&gt;</code></p>\n\n<p>Surely there is a way to convert a <code>Stream</code> to a <code>List</code>?</p>\n", "tags": ["java", "java-8"], "title": "How do I convert a Java 8 IntStream to a List?", "answers": [{"body": "<p><code>IntStream.boxed</code> turns an <code>IntStream</code> into a <code>Stream&lt;Integer&gt;</code>, which you can then <code>collect</code> into a list:</p>\n\n<pre><code>theIntStream.boxed().collect(Collectors.toList())\n</code></pre>\n", "title": "How do I convert a Java 8 IntStream to a List?", "tags": ["java", "java-8"], "link": "http://stackoverflow.com/questions/23674624/how-do-i-convert-a-java-8-intstream-to-a-list/23674719#23674719", "question_id": 23674624, "answer_id": 23674719}, {"body": "<p>You can use primitive collections available in <a href=\"http://www.eclipse.org/collections/\" rel=\"nofollow\">Eclipse Collections</a> and avoid boxing.</p>\n\n<pre><code>MutableIntList list = \n    IntStream.range(1, 5)\n    .collect(IntArrayList::new, MutableIntList::add, MutableIntList::addAll);\n</code></pre>\n\n<p>Note: I am a contributor to Eclipse Collections.</p>\n", "title": "How do I convert a Java 8 IntStream to a List?", "tags": ["java", "java-8"], "link": "http://stackoverflow.com/questions/23674624/how-do-i-convert-a-java-8-intstream-to-a-list/36242338#36242338", "question_id": 23674624, "answer_id": 36242338}], "creation_date": 1400147002, "score": 87, "link": "http://stackoverflow.com/questions/23674624/how-do-i-convert-a-java-8-intstream-to-a-list", "question_id": 23674624}, {"body": "<p>You'll quickly realize that JDK8 is a lot more strict (by default) when it comes to Javadoc. (<a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/javadoc/whatsnew-8.html\">link</a> - see last bullet point)</p>\n\n<p>If you never generate any Javadoc then of course you'll not experience any problems but things like Maven release process and possibly your CI builds will suddenly fail where they worked just fine with JDK7. Anything that checks the exit value of the Javadoc tool will now fail. JDK8 Javadoc is probably also more verbose in terms of <code>warnings</code> compared to JDK7 but that's not the scope here. We are talking about <code>errors</code>!</p>\n\n<p>This question exist to collect proposals on what to do about it. What is the best approach ?  Should these errors be fixed once and for all in the source code files? If you have a huge code base this might be a lot of work. What other options exist ?</p>\n\n<p>You are also welcome to comment with stories of what now fails that would previously pass.</p>\n\n<h2>Horror stories of what now fails</h2>\n\n<h3>wsimport tools</h3>\n\n<p><code>wsimport</code> tool is a code generator for creating web service consumers. It is included in the JDK. Even if you use the <code>wsimport</code> tool from JDK8 it will nevertheless produce source code <a href=\"http://stackoverflow.com/questions/24495579/jdk8-not-working-with-jdk8-ws-client\">that cannot be compiled with the javadoc compiler from JDK8</a>.</p>\n\n<h3>@author tag</h3>\n\n<p>I'm opening up source code files 3-4 years old and see this:</p>\n\n<pre><code>/**\n * My very best class\n * @author John &lt;john.doe@mine.com&gt; \n */\n</code></pre>\n\n<p>This now fails because of the &lt; character. Strictly speaking this is justified, but not very forgiving.</p>\n\n<h3>HTML tables</h3>\n\n<p>HTML Tables in your Javadoc?  Consider this valid HTML:</p>\n\n<pre><code>/**\n *\n * &lt;table&gt;\n *   &lt;tr&gt;\n *      &lt;td&gt;Col1&lt;/td&gt;&lt;td&gt;Col2&lt;/td&gt;&lt;td&gt;Col3&lt;/td&gt;\n *   &lt;/tr&gt;\n * &lt;/table&gt;\n */\n</code></pre>\n\n<p>This now fails with error message <code>no summary or caption for table</code>. One quick fix is to do like this:</p>\n\n<pre><code>/**\n *\n * &lt;table summary=\"\"&gt;\n *   &lt;tr&gt;\n *      &lt;td&gt;Col1&lt;/td&gt;&lt;td&gt;Col2&lt;/td&gt;&lt;td&gt;Col3&lt;/td&gt;\n *   &lt;/tr&gt;\n * &lt;/table&gt;\n */\n</code></pre>\n\n<p>but why this has to be a stop-the-world error from Javadoc tool beats me??</p>\n\n<h2>Things that now fail for more obvious reasons</h2>\n\n<ol>\n<li>Invalid links, e.g. <code>{@link notexist}</code></li>\n<li>Malformed HTML, e.g. <code>always returns &lt;code&gt;true&lt;code&gt; if ...</code></li>\n</ol>\n\n<h2>UPDATE</h2>\n\n<p>Links:</p>\n\n<p>Excellent <a href=\"http://blog.joda.org/2014/02/turning-off-doclint-in-jdk-8-javadoc.html\">blog on the subject</a> by <a href=\"https://www.blogger.com/profile/01454237967846880639\">Stephen Colebourne</a>.</p>\n", "tags": ["java", "maven", "java-8"], "title": "How to work around the stricter Java 8 Javadoc when using Maven", "answers": [{"body": "<p>If you are using the maven javadoc plugin, you can use the <code>failOnError</code> option to prevent it from stopping if it finds any html errors:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\n  &lt;configuration&gt;\n    &lt;failOnError&gt;false&lt;/failOnError&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>Or you can deactivate the strict html options completely with:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n      &lt;additionalparam&gt;-Xdoclint:none&lt;/additionalparam&gt;\n    &lt;/configuration&gt;\n  &lt;/plugin&gt;\n&lt;/plugins&gt;\n</code></pre>\n\n<p>For more <a href=\"http://blog.joda.org/2014/02/turning-off-doclint-in-jdk-8-javadoc.html\">info</a>.</p>\n", "title": "How to work around the stricter Java 8 Javadoc when using Maven", "tags": ["java", "maven", "java-8"], "link": "http://stackoverflow.com/questions/22528767/how-to-work-around-the-stricter-java-8-javadoc-when-using-maven/22529222#22529222", "question_id": 22528767, "answer_id": 22529222}, {"body": "<p>For now, the easiest way I know to <em>work around the stricter Java 8 Javadoc when using Maven</em> is deactivating it.</p>\n\n<p>Since the parameter <code>-Xdoclint:none</code> only exists in Java 8, defining this parameter breaks the build for any other Java. To prevent this, we can create a profile that will be active only for Java 8, making sure our solution works regardless of the Java version.</p>\n\n<pre><code>&lt;profiles&gt;\n    &lt;profile&gt;\n        &lt;id&gt;disable-java8-doclint&lt;/id&gt;\n        &lt;activation&gt;\n            &lt;jdk&gt;[1.8,)&lt;/jdk&gt;\n        &lt;/activation&gt;\n        &lt;properties&gt;\n            &lt;additionalparam&gt;-Xdoclint:none&lt;/additionalparam&gt;\n        &lt;/properties&gt;\n    &lt;/profile&gt;\n&lt;/profiles&gt;\n</code></pre>\n\n<p>Just add that to your POM and you're good to go.</p>\n", "title": "How to work around the stricter Java 8 Javadoc when using Maven", "tags": ["java", "maven", "java-8"], "link": "http://stackoverflow.com/questions/22528767/how-to-work-around-the-stricter-java-8-javadoc-when-using-maven/34808603#34808603", "question_id": 22528767, "answer_id": 34808603}], "creation_date": 1395308237, "score": 86, "link": "http://stackoverflow.com/questions/22528767/how-to-work-around-the-stricter-java-8-javadoc-when-using-maven", "question_id": 22528767}, {"body": "<p>When using <strong>external iteration</strong> over an <code>Iterable</code> we use <code>break</code> or <code>return</code> from enhanced for-each loop as:</p>\n\n<pre><code>for (SomeObject obj : someObjects) {\n   if (some_condition_met) {\n      break; // or return obj\n   }\n}\n</code></pre>\n\n<p>How can we <code>break</code> or <code>return</code> using the <strong>internal iteration</strong> in Java8 Lambda expression like:</p>\n\n<pre><code>someObjects.forEach(obj -&gt; {\n   //what to do here?\n})\n</code></pre>\n", "tags": ["java", "foreach", "lambda", "java-8"], "title": "How to break or return from Java8 Lambda forEach?", "answers": [{"body": "<p><em>Either</em> you need to use a method which uses a predicate indicating whether to keep going (so it has the break instead) <em>or</em> you need to throw an exception - which is a very ugly approach, of course.</p>\n\n<p>So you could write a <code>forEachConditional</code> method like this:</p>\n\n<pre><code>public static &lt;T&gt; void forEachConditional(Iterable&lt;T&gt; source,\n                                          Predicate&lt;T&gt; action) {\n    for (T item : source) {\n        if (!action.test(item)) {\n            break;\n        }\n    }\n}\n</code></pre>\n\n<p>Rather than <code>Predicate&lt;T&gt;</code>, you might want to define your own functional interface with the same general method (something taking a <code>T</code> and returning a <code>bool</code>) but with names that indicate the expectation more clearly - <code>Predicate&lt;T&gt;</code> isn't ideal here.</p>\n", "title": "How to break or return from Java8 Lambda forEach?", "tags": ["java", "foreach", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/23308193/how-to-break-or-return-from-java8-lambda-foreach/23308206#23308206", "question_id": 23308193, "answer_id": 23308206}, {"body": "<p>If you need this, you shouldn't use <code>forEach</code>, but one of the other methods available on streams; which one, depends on what your goal is.</p>\n\n<p>For example, if the goal of this loop is to find the first element which matches some predicate:</p>\n\n<pre><code>Optional&lt;SomeObject&gt; result =\n    someObjects.stream().filter(obj -&gt; some_condition_met).findFirst();\n</code></pre>\n\n<p>(Note: This will not iterate the whole collection, because streams are lazily evaluated - it will stop at the first object that matches the condition).</p>\n\n<p>If you just want to know if there's an element in the collection for which the condition is true, you could use <code>anyMatch</code>:</p>\n\n<pre><code>boolean result = someObjects.stream().anyMatch(obj -&gt; some_condition_met);\n</code></pre>\n", "title": "How to break or return from Java8 Lambda forEach?", "tags": ["java", "foreach", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/23308193/how-to-break-or-return-from-java8-lambda-foreach/23308251#23308251", "question_id": 23308193, "answer_id": 23308251}, {"body": "<p>Below you find the solution I used in a project. Instead <code>forEach</code> just use <code>allMatch</code>:</p>\n\n<pre><code>someObjects.allMatch(obj -&gt; {\n    return !some_condition_met;\n});\n</code></pre>\n", "title": "How to break or return from Java8 Lambda forEach?", "tags": ["java", "foreach", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/23308193/how-to-break-or-return-from-java8-lambda-foreach/26648598#26648598", "question_id": 23308193, "answer_id": 26648598}, {"body": "<p>For maximal performance in parallel operations use <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#findAny--\" rel=\"nofollow\">findAny</a>() which is similar to findFirst().</p>\n\n<pre><code>Optional&lt;SomeObject&gt; result =\n    someObjects.stream().filter(obj -&gt; some_condition_met).findAny();\n</code></pre>\n\n<p>However If a stable result is desired, use findFirst() instead.</p>\n\n<p>Also note that matching patterns (anyMatch()/allMatch) will return only boolean, you will not get matched object.</p>\n", "title": "How to break or return from Java8 Lambda forEach?", "tags": ["java", "foreach", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/23308193/how-to-break-or-return-from-java8-lambda-foreach/27242349#27242349", "question_id": 23308193, "answer_id": 27242349}, {"body": "<p>You can use java8 + <a href=\"https://github.com/ReactiveX/RxJava\" rel=\"nofollow\">rxjava</a>.</p>\n\n<pre><code>//import java.util.stream.IntStream;\n//import rx.Observable;\n\n    IntStream intStream  = IntStream.range(1,10000000);\n    Observable.from(() -&gt; intStream.iterator())\n            .takeWhile(n -&gt; n &lt; 10)\n            .forEach(n-&gt; System.out.println(n));\n</code></pre>\n", "title": "How to break or return from Java8 Lambda forEach?", "tags": ["java", "foreach", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/23308193/how-to-break-or-return-from-java8-lambda-foreach/30603313#30603313", "question_id": 23308193, "answer_id": 30603313}, {"body": "<p>I have achieved by something like this </p>\n\n<pre><code>  private void doSomething() {\n            List&lt;Action&gt; actions = actionRepository.findAll();\n            boolean actionHasFormFields = actions.stream().anyMatch(actionHasMyFieldsPredicate());\n            if (actionHasFormFields){\n                context.addError(someError);\n            }\n        }\n    }\n\n    private Predicate&lt;Action&gt; actionHasMyFieldsPredicate(){\n        return action -&gt; action.getMyField1() != null;\n    }\n</code></pre>\n", "title": "How to break or return from Java8 Lambda forEach?", "tags": ["java", "foreach", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/23308193/how-to-break-or-return-from-java8-lambda-foreach/31023295#31023295", "question_id": 23308193, "answer_id": 31023295}, {"body": "<p>This <strong>is</strong> possible for <code>forEach()</code>. The solution is not nice, but it <strong>is</strong> possible.</p>\n\n<p><em>WARNING</em>: You should not use it for controlling business logic, but purely for handling an exceptional situation which occurs during the execution of the <code>forEach()</code>. Such as a resource suddenly stops being accessible, one of the processed objects is violating a contract (e.g. contract says that all the elements in the stream must not be <code>null</code> but suddenly and unexpectedly one of them is <code>null</code>) etc.</p>\n\n<p>According to the documentation for <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html#forEach-java.util.function.Consumer-\" rel=\"nofollow\"><code>Iterable.forEach()</code></a>:</p>\n\n<blockquote>\n  <p>Performs the given action for each element of the <code>Iterable</code> <strong>until</strong> all elements have been processed or <strong>the action throws an exception</strong>... Exceptions thrown by the action are relayed to the caller.</p>\n</blockquote>\n\n<p>So you throw an exception which will immediately break the internal loop.</p>\n\n<p>The code will be something like this - <strong>I cannot say I like it</strong> but it works. You create your own class <code>BreakException</code> which extends <code>RuntimeException</code>.</p>\n\n<pre><code>try {\n    someObjects.forEach(obj -&gt; {\n        // some useful code here\n        if(some_exceptional_condition_met) {\n            throw new BreakException();\n       }\n    }\n}\ncatch (BreakException e) {\n    // here you know that your condition has been met at least once\n}\n</code></pre>\n\n<p>Notice that the <code>try...catch</code> is <em>not</em> around the lambda expression, but rather around the whole <code>forEach()</code> method. To make it more visible, see the following transcription of the code which shows it more clearly:</p>\n\n<pre><code>Consumer&lt;? super SomeObject&gt; action = obj -&gt; {\n    // some useful code here\n    if(some_exceptional_condition_met) {\n        throw new BreakException();\n    }\n});\n\ntry {\n    someObjects.forEach(action);\n}\ncatch (BreakException e) {\n    // here you know that your condition has been met at least once\n}\n</code></pre>\n", "title": "How to break or return from Java8 Lambda forEach?", "tags": ["java", "foreach", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/23308193/how-to-break-or-return-from-java8-lambda-foreach/32566745#32566745", "question_id": 23308193, "answer_id": 32566745}, {"body": "<p>A return in a lambda equals a continue in a for-each, but there is no equivalent to a break. You can just do a return to continue:</p>\n\n<pre><code>someObjects.forEach(obj -&gt; {\n   if (some_condition_met) {\n      return;\n   }\n})\n</code></pre>\n", "title": "How to break or return from Java8 Lambda forEach?", "tags": ["java", "foreach", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/23308193/how-to-break-or-return-from-java8-lambda-foreach/36843825#36843825", "question_id": 23308193, "answer_id": 36843825}], "creation_date": 1398498463, "score": 85, "link": "http://stackoverflow.com/questions/23308193/how-to-break-or-return-from-java8-lambda-foreach", "question_id": 23308193}, {"body": "<p>While searching through the Java Language Specification to answer <a href=\"http://stackoverflow.com/questions/23093470/java-order-of-initialization-and-instantiation#23093470\">this question</a>, I learned <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-12.html#jls-12.4\" rel=\"nofollow\">that</a></p>\n\n<blockquote>\n  <p>Before a class is initialized, its direct superclass must be\n  initialized, <strong>but interfaces implemented by the class are not\n  initialized.</strong> Similarly, the superinterfaces of an interface are not\n  initialized before the interface is initialized.</p>\n</blockquote>\n\n<p>For my own curiosity, I tried it and, really, the interface <code>InterfaceType</code> was not initialized.</p>\n\n<pre><code>public class Example {\n    public static void main(String[] args) throws Exception {\n        InterfaceType foo = new InterfaceTypeImpl();\n        foo.method();\n    }\n}\n\nclass InterfaceTypeImpl implements InterfaceType {\n    @Override\n    public void method() {\n        System.out.println(\"implemented method\");\n    }\n}\n\nclass ClassInitializer {\n    static {\n        System.out.println(\"static initializer\");\n    }\n}\n\ninterface InterfaceType {\n    public static final ClassInitializer init = new ClassInitializer();\n\n    public void method();\n}\n</code></pre>\n\n<p>This program prints</p>\n\n<pre><code>implemented method\n</code></pre>\n\n<p>However, if the interface declares a <code>default</code> method, then initialization does occur. Consider the <code>InterfaceType</code> interface given as</p>\n\n<pre><code>interface InterfaceType {\n    public static final ClassInitializer init = new ClassInitializer();\n\n    public default void method() {\n        System.out.println(\"default method\");\n    }\n}\n</code></pre>\n\n<p>then the same program above would print</p>\n\n<pre><code>static initializer\nimplemented method\n</code></pre>\n\n<p>In other words, the <code>static</code> field of the interface is initialized (<a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-12.html#jls-12.4\" rel=\"nofollow\">step 9 in the Detailed Initialization Procedure</a>) and the <code>static</code> initializer of the type being initialized is executed. This means that the interface was initialized. </p>\n\n<p>I could not find anything in the JLS to indicate that this should happen. Don't get me wrong, I understand that this should happen in case the implementing class doesn't provide an implementation for the method, but what if it does? Is this condition missing from the Java Language Specification, did I miss something, or am I interpreting it wrongly?</p>\n", "tags": ["java", "interface", "java-8", "default-method"], "title": "When is an interface with a default method initialized?", "answers": [{"body": "<p>The interface is not initialized because the constant field <code>InterfaceType.init</code> , which is being initialized by non constant value (method call), is not used anywhere.</p>\n\n<p>It is known at compile time that constant field of interface is not used anywhere, and the interface is not containing any default method (In java-8) so there is no need to initialize or load the interface.</p>\n\n<p>Interface will be initialized in following cases, </p>\n\n<ul>\n<li>constant field is used in your code. </li>\n<li>Interface contains a default method (Java 8)</li>\n</ul>\n\n<p>In case of <strong>Default Methods</strong>, You are implementing <code>InterfaceType</code>. So, If <code>InterfaceType</code> will contain any default methods, It will be <strong>INHERITED (used)</strong> in implementing class. And Initialization will be into the picture.</p>\n\n<p>But, If you are accessing constant field of interface (which is initialized in normal way), The interface initialization is not required.</p>\n\n<p>Consider following code.</p>\n\n<pre><code>public class Example {\n    public static void main(String[] args) throws Exception {\n        InterfaceType foo = new InterfaceTypeImpl();\n        System.out.println(InterfaceType.init);\n        foo.method();\n    }\n}\n\nclass InterfaceTypeImpl implements InterfaceType {\n    @Override\n    public void method() {\n        System.out.println(\"implemented method\");\n    }\n}\n\nclass ClassInitializer {\n    static {\n        System.out.println(\"static initializer\");\n    }\n}\n\ninterface InterfaceType {\n    public static final ClassInitializer init = new ClassInitializer();\n\n    public void method();\n}\n</code></pre>\n\n<p>In above case, Interface will be initialized and loaded because you are using the field <code>InterfaceType.init</code>.</p>\n\n<p>I am not giving the default method example as you already given that in your question.</p>\n\n<p>Java language specification and example is given in <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-12.html#jls-12.4.1\"><strong>JLS 12.4.1</strong></a> (Example does not contain default methods.) </p>\n\n<hr>\n\n<p>I can not find JLS for Default methods, there may be two possibilities</p>\n\n<ul>\n<li>Java people forgot to consider the case of default method. (Specification Doc bug.)</li>\n<li>They just refer the default methods as non-constant member of\ninterface. (But mentioned no where, again Specification Doc bug.)</li>\n</ul>\n", "title": "When is an interface with a default method initialized?", "tags": ["java", "interface", "java-8", "default-method"], "link": "http://stackoverflow.com/questions/23096084/when-is-an-interface-with-a-default-method-initialized/23101310#23101310", "question_id": 23096084, "answer_id": 23101310}, {"body": "<p>This is a very interesting issue!</p>\n\n<p>It seems like <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-12.html#jls-12.4.1\">JLS section 12.4.1</a> ought to cover this definitively. However, the behavior of Oracle JDK and OpenJDK (javac and HotSpot) differs from what's specified here. In particular, the Example 12.4.1-3 from this section covers interface initialization. The example as follows:</p>\n\n<pre><code>interface I {\n    int i = 1, ii = Test.out(\"ii\", 2);\n}\ninterface J extends I {\n    int j = Test.out(\"j\", 3), jj = Test.out(\"jj\", 4);\n}\ninterface K extends J {\n    int k = Test.out(\"k\", 5);\n}\nclass Test {\n    public static void main(String[] args) {\n        System.out.println(J.i);\n        System.out.println(K.j);\n    }\n    static int out(String s, int i) {\n        System.out.println(s + \"=\" + i);\n        return i;\n    }\n}\n</code></pre>\n\n<p>Its expected output is:</p>\n\n<pre><code>1\nj=3\njj=4\n3\n</code></pre>\n\n<p>and indeed I get the expected output. However, if a default method is added to interface <code>I</code>,</p>\n\n<pre><code>interface I {\n    int i = 1, ii = Test.out(\"ii\", 2);\n    default void method() { } // causes initialization!\n}\n</code></pre>\n\n<p>the output changes to:</p>\n\n<pre><code>1\nii=2\nj=3\njj=4\n3\n</code></pre>\n\n<p>which clearly indicates that interface <code>I</code> is being initialized where it wasn't before! The mere presence of the default method is enough to trigger the initialization. The default method doesn't have to be called or overridden or even mentioned, nor does the presence of an abstract method trigger initialization.</p>\n\n<p>My speculation is that the HotSpot implementation wanted to avoid adding class/interface initialization checking into the critical path of the <code>invokevirtual</code> call. Prior to Java 8 and default methods, <code>invokevirtual</code> could never end up executing code in an interface, so this didn't arise. One might think this is  part of the class/interface preparation stage (<a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-12.html#jls-12.3.2\">JLS 12.3.2</a>) which initializes things like method tables. But perhaps this went too far and accidentally did full initialization instead.</p>\n\n<p>I've <a href=\"http://mail.openjdk.java.net/pipermail/compiler-dev/2014-April/008733.html\">raised this question</a> on the OpenJDK compiler-dev mailing list. There's been a <a href=\"http://mail.openjdk.java.net/pipermail/compiler-dev/2014-April/008734.html\">reply from Alex Buckley</a> (editor of the JLS) in which he raises more questions directed at the JVM and lambda implementation teams. He also notes that there's a bug in the spec here where it says \"T is a class and a static method declared by T is invoked\" should also apply if T is an interface. So, it might be that there are both specification and HotSpot bugs here.</p>\n\n<p><strong><em>Disclosure</strong>: I work for Oracle on OpenJDK. If people think this gives me an unfair advantage at getting the bounty attached to this question, I'm willing to be flexible about it.</em> </p>\n", "title": "When is an interface with a default method initialized?", "tags": ["java", "interface", "java-8", "default-method"], "link": "http://stackoverflow.com/questions/23096084/when-is-an-interface-with-a-default-method-initialized/23231065#23231065", "question_id": 23096084, "answer_id": 23231065}, {"body": "<p>I'll try to make a case that an interface initialization should not cause any side-channel side effects that the subtypes depend on, therefore, whether this is a bug or not, or whichever way the Java fixes it, it should not matter to the application in which order interfaces are initialized.</p>\n\n<p>In the case of a <code>class</code>, it is well accepted that it can cause side effects that subclasses depend on. For example</p>\n\n<pre><code>class Foo{\n    static{\n        Bank.deposit($1000);\n...\n</code></pre>\n\n<p>Any subclass of <code>Foo</code> would expect that they'll see $1000 in the bank, anywhere in the subclass code. Therefore the superclass is initialized prior to the subclass.</p>\n\n<p>Shouldn't we do the same thing for superintefaces as well? Unfortunately, the order of superinterfaces are not supposed to be significant, therefore there is no well defined order in which to initialize them.</p>\n\n<p>So we better not establish this kind of side effects in interface initializations. After all, <code>interface</code> is not meant for these features (static fields/methods) we pile on for convenience. </p>\n\n<p>Therefore if we follow that principle, it'll be no concern to us in which order interfaces are initialized. </p>\n", "title": "When is an interface with a default method initialized?", "tags": ["java", "interface", "java-8", "default-method"], "link": "http://stackoverflow.com/questions/23096084/when-is-an-interface-with-a-default-method-initialized/23231551#23231551", "question_id": 23096084, "answer_id": 23231551}, {"body": "<p>The <a href=\"http://hg.openjdk.java.net/jdk8/build/hotspot/file/87ee5ee27509/src/share/vm/oops/instanceKlass.cpp#l855\" rel=\"nofollow\">instanceKlass.cpp</a> file from the OpenJDK contains the initialization method <code>InstanceKlass::initialize_impl</code> that corresponds to the <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-12.html#jls-12.4.2\" rel=\"nofollow\">Detailed Initialization Procedure</a> in the JLS, which is analogously found in the <a href=\"http://docs.oracle.com/javase/specs/jvms/se8/html/jvms-5.html#jvms-5.5\" rel=\"nofollow\">Initialization</a> section in the JVM Spec.</p>\n\n<p>It contains a new step that is not mentioned in the JLS and not in the JVM book that is referred to in the code:</p>\n\n<pre><code>// refer to the JVM book page 47 for description of steps\n...\n\nif (this_oop-&gt;has_default_methods()) {\n  // Step 7.5: initialize any interfaces which have default methods\n  for (int i = 0; i &lt; this_oop-&gt;local_interfaces()-&gt;length(); ++i) {\n    Klass* iface = this_oop-&gt;local_interfaces()-&gt;at(i);\n    InstanceKlass* ik = InstanceKlass::cast(iface);\n    if (ik-&gt;has_default_methods() &amp;&amp; ik-&gt;should_be_initialized()) {\n      ik-&gt;initialize(THREAD);\n    ....\n    }\n  }\n}\n</code></pre>\n\n<p>So this initialization has been implemented <em>explicitly</em> as a new <strong>Step 7.5</strong>. This indicates that this implementation followed some specification, but it seems that the written specification on the website has not been updated accordingly.</p>\n\n<p>EDIT: As a reference, the commit (from October 2012!) where the respective step has been included in the implementation: <a href=\"http://hg.openjdk.java.net/jdk8/build/hotspot/rev/4735d2c84362\" rel=\"nofollow\">http://hg.openjdk.java.net/jdk8/build/hotspot/rev/4735d2c84362</a> </p>\n\n<p>EDIT2: Coincidentally, I found this <a href=\"http://cr.openjdk.java.net/~kamg/default_methods_in_hotspot.txt\" rel=\"nofollow\">Document about default methods in hotspot</a> which contains an interesting side note at the end:</p>\n\n<blockquote>\n  <p>3.7 Miscellaneous</p>\n  \n  <p>Because interfaces now have bytecode in them, we must initialize them at the\n  time that an implementing class is initialized. </p>\n</blockquote>\n", "title": "When is an interface with a default method initialized?", "tags": ["java", "interface", "java-8", "default-method"], "link": "http://stackoverflow.com/questions/23096084/when-is-an-interface-with-a-default-method-initialized/23240269#23240269", "question_id": 23096084, "answer_id": 23240269}], "creation_date": 1397602962, "score": 85, "link": "http://stackoverflow.com/questions/23096084/when-is-an-interface-with-a-default-method-initialized", "question_id": 23096084}, {"body": "<p>I was going through this question <a href=\"http://stackoverflow.com/questions/685300/is-there-a-way-to-override-class-variables-in-java\">Is there a way to override class variables in Java?</a>\nThe first comment with 36 upvotes was:</p>\n\n<blockquote>\n  <p>If you ever see a <code>protected static</code>, run.</p>\n</blockquote>\n\n<p>Can anyone explain why is a <code>protected static</code> frowned upon?</p>\n", "tags": ["java", "oop", "inheritance", "static", "protected"], "title": "Why we should not use protected static in java", "answers": [{"body": "<p>It's more a stylistic thing than a direct problem. It suggests that you haven't properly thought through what is going on with the class.</p>\n\n<p>Think about what <code>static</code> means:</p>\n\n<blockquote>\n  <p>This variable exists at class level, it does not exist separately for each instance and <strong>it does not have an independent existence in classes which extend me</strong>.</p>\n</blockquote>\n\n<p>Think about what <code>protected</code> means:</p>\n\n<blockquote>\n  <p>This variable can be seen by this class, classes in the same package <strong>and classes which extend me</strong>.</p>\n</blockquote>\n\n<p>The two meanings are not exactly mutually exclusive but it is pretty close.</p>\n\n<p>The only case I can see where you might use the two together is if you had an abstract class that was designed to be extended and the extending class could then modify the behavior using constants defined in the original. Even then it's a very feeble reason though as you would still almost certainly be better having the constants as public. That just makes everything cleaner and allows the people sub classing more flexibility.</p>\n\n<p>To expand and explain the first point - try this example code:</p>\n\n<pre><code>public class Program {\n    public static void main (String[] args) throws java.lang.Exception {\n        System.out.println(new Test2().getTest());\n        Test.test = \"changed\";\n        System.out.println(new Test2().getTest());\n    }\n}\n\nabstract class Test {\n    protected static String test = \"test\";\n}\n\nclass Test2 extends Test {\n    public String getTest() {\n        return test;\n    }\n}\n</code></pre>\n\n<p>You will see the results:</p>\n\n<pre><code>test\nchanged\n</code></pre>\n\n<p>Try it yourself at: <a href=\"https://ideone.com/KM8u8O\">https://ideone.com/KM8u8O</a></p>\n\n<p>The class <code>Test2</code> is able to access the static member <code>test</code> from <code>Test</code> without needing to qualify the name - but it does not inherit or get its own copy. It is looking at the exact same variable.</p>\n", "title": "Why we should not use protected static in java", "tags": ["java", "oop", "inheritance", "static", "protected"], "link": "http://stackoverflow.com/questions/24289070/why-we-should-not-use-protected-static-in-java/24289231#24289231", "question_id": 24289070, "answer_id": 24289231}, {"body": "<p>Static members are not inherited, and protected members are only visible to subclasses (and of course the containing class), so a <code>protected static</code> has the same visibility as <code>static</code>, suggesting a misunderstanding by the coder. </p>\n", "title": "Why we should not use protected static in java", "tags": ["java", "oop", "inheritance", "static", "protected"], "link": "http://stackoverflow.com/questions/24289070/why-we-should-not-use-protected-static-in-java/24289258#24289258", "question_id": 24289070, "answer_id": 24289258}, {"body": "<p>I don't see a particular reason why this should be frowned upon. There may always be alternatives to achieve the same behavior, and it will depend on the actual achitecture whether these alternatives are \"better\" than a protected static method or not. But one example where a protected static method would be reasonable, at least, could be the following:</p>\n\n<p>(Edited to split into separate packages, to make the use of <code>protected</code> clearer)</p>\n\n<pre><code>package a;\nimport java.util.List;\n\npublic abstract class BaseClass\n{\n    public Integer compute(List&lt;Integer&gt; list)\n    {\n        return computeDefaultA(list)+computeDefaultB(list);\n    }\n\n    protected static Integer computeDefaultA(List&lt;Integer&gt; list)\n    {\n        return 12;\n    }\n    protected static Integer computeDefaultB(List&lt;Integer&gt; list)\n    {\n        return 34;\n    }\n}\n</code></pre>\n\n<p>Derived from that:</p>\n\n<pre><code>package a.b;\n\nimport java.util.List;\n\nimport a.BaseClass;\n\nabstract class ExtendingClassA extends BaseClass\n{\n    @Override\n    public Integer compute(List&lt;Integer&gt; list)\n    {\n        return computeDefaultA(list)+computeOwnB(list);\n    }\n\n    private static Integer computeOwnB(List&lt;Integer&gt; list)\n    {\n        return 56;\n    }\n}\n</code></pre>\n\n<p>Another derived class:</p>\n\n<pre><code>package a.b;\n\nimport java.util.List;\n\nimport a.BaseClass;\n\nabstract class ExtendingClassB extends BaseClass\n{\n    @Override\n    public Integer compute(List&lt;Integer&gt; list)\n    {\n        return computeOwnA(list)+computeDefaultB(list);\n    }\n\n    private static Integer computeOwnA(List&lt;Integer&gt; list)\n    {\n        return 78;\n    }\n}\n</code></pre>\n\n<p>The <code>protected static</code> modifier can certainly be justified here:</p>\n\n<ul>\n<li>The methods can be <code>static</code>, because they do not depend on instance variables. They are not intended to be used directly as a polymorphic method, but rather are \"utility\" methods that offer default <em>implementations</em> that are part of a more complex computation, and serve as \"building blocks\" of the actual implementation.</li>\n<li>The methods should not be <code>public</code>, because they are an implementation detail. And they can't be <code>private</code> because they should be called by the extending classes. They also can't have \"default\" visibility, because then they will not be accessible for the extending classes in other packages.</li>\n</ul>\n\n<p>(EDIT: One could assume that the original comment only referred to <em>fields</em>, and not to <em>methods</em> - then, however, it was too general)</p>\n", "title": "Why we should not use protected static in java", "tags": ["java", "oop", "inheritance", "static", "protected"], "link": "http://stackoverflow.com/questions/24289070/why-we-should-not-use-protected-static-in-java/24289499#24289499", "question_id": 24289070, "answer_id": 24289499}, {"body": "<p>Protected is used so that it can be used in subclasses. There is no logic in defining a protected static when using in the context of concrete classes as you can access the same variable is a static way.However the complier will give a warning to access the super class static variable in a static way.</p>\n", "title": "Why we should not use protected static in java", "tags": ["java", "oop", "inheritance", "static", "protected"], "link": "http://stackoverflow.com/questions/24289070/why-we-should-not-use-protected-static-in-java/24289729#24289729", "question_id": 24289070, "answer_id": 24289729}, {"body": "<p>It's frowned upon because it's contradictive.</p>\n\n<p>Making a variable <code>protected</code> implies it will be used <em>within the package</em> or it will be <em>inherited within a subclass</em>.</p>\n\n<p>Making the variable <code>static</code> makes it a member of the class, <strong>eliminating the intentions of inheriting it</strong>. This leaves only the intention of being used <em>within a package</em>, and we have <code>package-private</code> for that (no modifier).</p>\n\n<p>The only situation I could find this useful for is if you were declaring a class that should be used to launch the application (like JavaFX's <code>Application#launch</code>, and only wanted to be able to launch from a subclass. If doing so, ensure the method is also <code>final</code> to disallow <a href=\"https://docs.oracle.com/javase/tutorial/java/IandI/override.html\" rel=\"nofollow\">hiding</a>. But this is not \"the norm\", and was probably implemented to prevent adding more complexity by adding a new way to launch applications.</p>\n\n<p>To see the access levels of each modifier, see this: <a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html\" rel=\"nofollow\">The Java Tutorials - Controlling Access to Members of a Class</a></p>\n", "title": "Why we should not use protected static in java", "tags": ["java", "oop", "inheritance", "static", "protected"], "link": "http://stackoverflow.com/questions/24289070/why-we-should-not-use-protected-static-in-java/24289761#24289761", "question_id": 24289070, "answer_id": 24289761}, {"body": "<p>Actually there is nothing fundamentally wrong with <code>protected static</code>. If you really want a static variable or method that is visible for the package and all subclasses of the declaring class then go ahead and make it <code>protected static</code>.</p>\n\n<p>Some people generally avoid to use <code>protected</code> for various reasons and some people think non-final <code>static</code> variables should be avoided by all means (I personally sympathize with the latter to some degree), so I guess the combination of <code>protected</code> and <code>static</code> must look <em>bad^2</em> to those that belong to both groups.</p>\n", "title": "Why we should not use protected static in java", "tags": ["java", "oop", "inheritance", "static", "protected"], "link": "http://stackoverflow.com/questions/24289070/why-we-should-not-use-protected-static-in-java/24296172#24296172", "question_id": 24289070, "answer_id": 24296172}, {"body": "<p>There is nothing wrong with having <code>protected static</code>. One thing a lot of people are overlooking is that you may want to write test cases for static methods that you don't want to expose under normal circumstances. I've noticed this is particularly useful for writing tests for static method in utility classes.</p>\n", "title": "Why we should not use protected static in java", "tags": ["java", "oop", "inheritance", "static", "protected"], "link": "http://stackoverflow.com/questions/24289070/why-we-should-not-use-protected-static-in-java/38207415#38207415", "question_id": 24289070, "answer_id": 38207415}], "creation_date": 1403104145, "score": 81, "link": "http://stackoverflow.com/questions/24289070/why-we-should-not-use-protected-static-in-java", "question_id": 24289070}, {"body": "<p>I'm using <a href=\"http://sourceforge.net/projects/jnca/\" rel=\"nofollow\">jnca</a> library to collect netflow records sent by a router. The version of the netflow record sent by the router is version 9. </p>\n\n<p>When the netflow packet is observed from the wireshark could find out that the flowset with the template id 263 contains the data about initiator  octets and responder  octets which can be used to determine the number of bytes associated with a flow. \n<img src=\"https://lh3.googleusercontent.com/-gJuF-7LVNSo/UwRGYGkX_5I/AAAAAAAAAYk/gNFHIlTYNnM/w534-h413-no/Selection_019.png\" alt=\"wireshark record\"></p>\n\n<p>But the problem is these values cannot be obtained by the jcna. It shows always zero for the octets. </p>\n\n<pre><code>currOffset = t.getTypeOffset(FieldDefinition.InBYTES_32);\ncurrLen = t.getTypeLen(FieldDefinition.InBYTES_32);\nif (currOffset &gt;= 0 &amp;&amp; currLen &gt; 0) {\n    dOctets = Util.to_number(buf, off + currOffset, currLen) * t.getSamplingRate();\n}\n</code></pre>\n\n<p>This is the code segments which is used to get the dOctets. This returns zero even for the template ID 263. </p>\n\n<p>Bet when it's calculated with respect to the netflow template id 263 it gives the correct data. (gives the initiator octets and to get responder octet 46 should be replaced with 50 as the length of the particular record is 4 bytes)</p>\n\n<pre><code>dOctets = Util.to_number(buf, off + 46, 4)\n</code></pre>\n\n<p>46 is where the Initiator Octets record lies in the that particular netflow packet.(got using the wireshark record.)</p>\n\n<p>Is it a problem with jnca? Hope somebody who's familiar with jcna can give me some help on this. </p>\n", "tags": ["java", "cisco", "netflow"], "title": "Netflow record can&#39;t get octets (jnca)", "answers": [{"body": "<p>I'm sorry for obvious answer but I'm tired to see this question on the top of the all Java questions for months.\nTo get JNCA just go to their <a href=\"http://sourceforge.net/projects/jnca/\" rel=\"nofollow\">project</a> which has only 25 downloads total and run it.</p>\n", "title": "Netflow record can&#39;t get octets (jnca)", "tags": ["java", "cisco", "netflow"], "link": "http://stackoverflow.com/questions/21872422/netflow-record-cant-get-octets-jnca/30293471#30293471", "question_id": 21872422, "answer_id": 30293471}], "creation_date": 1392789990, "score": 79, "link": "http://stackoverflow.com/questions/21872422/netflow-record-cant-get-octets-jnca", "question_id": 21872422}, {"body": "<p>I have an INTELIJ(v12) android project successfully imported to AndroidStudio(v0.4.0). It works perfectly if I don't change anything in manifest. When I want to change the launcher activity and run, it outputs with the following error:</p>\n\n<pre><code>Launching application: com.trackingeng/LandingActivity.\nDEVICE SHELL COMMAND: am start -D -n \"com.trackingeng/LandingActivity\"  \n    -a android.intent.action.MAIN -c android.intent.category.LAUNCHER\nStarting: Intent { act=android.intent.action.MAIN  \n    cat=[android.intent.category.LAUNCHER] cmp=com.trackingeng/LandingActivity }\nError type 3\nError: Activity class {com.trackingeng/LandingActivity} does not exist.\n</code></pre>\n\n<p>When I click <strong>Sync Project with Gradle files</strong> it outputs:</p>\n\n<pre><code>Project Sync\nThe project 'TrackingEng' is not a Gradle-based project\n</code></pre>\n\n<p>Anyone has faced this problem? Any ideas?</p>\n\n<p>Run settings:\n<img src=\"http://i.stack.imgur.com/mbMmP.jpg\" alt=\"enter image description here\"></p>\n", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "title": "Error type 3 Error: Activity class {} does not exist", "answers": [{"body": "<p>I faced a similar problem after refactoring.<br>\nThis is what i did to resolve this issue:</p>\n\n<ol>\n<li>Cleaned the Project</li>\n<li>Deleted the <code>Build</code> directory</li>\n<li>Restarted Android Studio</li>\n<li>Rebuild the Project</li>\n<li>Run</li>\n</ol>\n\n<p>And everything worked fine!<br>\nI think the key is to <strong>restart your IDE</strong>.  </p>\n\n<p>Hope this helps you or anyone else!</p>\n\n<p><strong>Edit:</strong><br>\nIf above steps doesn't work for you, then <code>deleting gradle cache</code> seems be a solution, as pointed out by @Yasitha.  </p>\n\n<p><strong>UPDATE for Android Studio 2.1 and up</strong></p>\n\n<p>When running Android Studio 2.1 and up you can also encounter this issue when you have the instant run option enabled in your preferences (is enabled by default). </p>\n\n<p>To disable this option go to <code>Preferences</code> option in the <code>Android Studio</code> top menu and look for <code>Instant Run</code> so you can uncheck the first checkbox on that screen.</p>\n\n<p><a href=\"http://i.stack.imgur.com/sYyyt.png\"><img src=\"http://i.stack.imgur.com/sYyyt.png\" alt=\"enter image description here\"></a></p>\n\n<p>Anyway that fixed it for me. Originally pointed out by user @yusufonder. I discovered this was the issue since gradle install still worked.</p>\n", "title": "Error type 3 Error: Activity class {} does not exist", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist/24241687#24241687", "question_id": 20915266, "answer_id": 24241687}, {"body": "<h2>Try changing the name of the Activity in your <code>AndroidManifest.xml</code> file.</h2>\n\n<p>Right now it says:</p>\n\n<pre><code>&lt;activity android:name=\"LandingActivity\" &gt;\n</code></pre>\n\n<p>Try either <strong>adding a period</strong> to the beginning of the Activity's name:</p>\n\n<pre><code>&lt;activity android:name=\".LandingActivity\" &gt;\n</code></pre>\n\n<p>Or <strong>adding the package name</strong> to the beginning of the Activity's name:</p>\n\n<pre><code>&lt;activity android:name=\"com.trackingeng.LandingActivity\" &gt;\n</code></pre>\n\n<p><em>It also may be a problem that your package name has only two components separated by periods (your package name is \"com.trackingeng\"; a more standard package name would be \"com.trackingeng.app\")</em></p>\n", "title": "Error type 3 Error: Activity class {} does not exist", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist/24742469#24742469", "question_id": 20915266, "answer_id": 24742469}, {"body": "<p>I had the same error after renaming/refactoring. What I did was add the <code>applicationId</code> property attribute to my build.gradle file, and set its value to the application package. </p>\n", "title": "Error type 3 Error: Activity class {} does not exist", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist/25633115#25633115", "question_id": 20915266, "answer_id": 25633115}, {"body": "<p>This happens when you do the following</p>\n\n<ul>\n<li>connect your device/emulator </li>\n<li>run the app from Android Studio (AS)</li>\n<li>use/test the app and uninstall it from the device while it is still\nconnected to your computer </li>\n<li>try to run the app again from AS</li>\n</ul>\n\n<p>AS thinks you still have the app in your device.</p>\n\n<p>tl;dr - To resolve this, you can simply disconnect your device after uninstalling the app and reconnect it.</p>\n", "title": "Error type 3 Error: Activity class {} does not exist", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist/26313730#26313730", "question_id": 20915266, "answer_id": 26313730}, {"body": "<p>I had the same issue and I solved it refactoring my activity launcher, just change the class name and it works.</p>\n", "title": "Error type 3 Error: Activity class {} does not exist", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist/28635229#28635229", "question_id": 20915266, "answer_id": 28635229}, {"body": "<p>Even I had the same problem but none of the above solutions worked for me.\nThe problem was that, I had froze the particular app which I was trying to run via Titanium Backup due to which I got the above error. I tried both in Eclipse and Android Studio.</p>\n\n<p>After the realization I just unistalled the app and then ran it again again.</p>\n\n<p>Problem Solved :-)</p>\n", "title": "Error type 3 Error: Activity class {} does not exist", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist/31872023#31872023", "question_id": 20915266, "answer_id": 31872023}, {"body": "<p>For me, the problem was that <code>AndroidStudio</code> <em>thought</em> that the app was still on the device.</p>\n\n<p>To fix it:</p>\n\n<ol>\n<li><p><strong>restart the <code>adb</code> daemon</strong>; in a terminal or command prompt, enter:</p>\n\n<pre><code>adb kill-server\nadb start-server\n</code></pre></li>\n<li><p>try to launch your app.</p></li>\n<li><p>if it still doesn't work, check out <a href=\"http://stackoverflow.com/a/36372901/2898715\">this answer</a>.</p></li>\n</ol>\n\n<p>make sure the <code>platform-tools</code> of the <em>Android SDK</em> is added to your <em>system path variables</em>!</p>\n", "title": "Error type 3 Error: Activity class {} does not exist", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist/34384589#34384589", "question_id": 20915266, "answer_id": 34384589}, {"body": "<p>i just go to Build > Rebuild Project and my problem is solved</p>\n", "title": "Error type 3 Error: Activity class {} does not exist", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist/34651586#34651586", "question_id": 20915266, "answer_id": 34651586}, {"body": "<p>None of the above worked for me.  I had a version of the app on the device that could not be uninstalled as it was corrupt somehow.  I had to factory reset the device.  Not too bothered cause it was a just a dev device</p>\n", "title": "Error type 3 Error: Activity class {} does not exist", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist/36336149#36336149", "question_id": 20915266, "answer_id": 36336149}, {"body": "<p>May be helpful for someone:--</p>\n\n<p>If testing on device, sometimes uninstall of the app is not properly done. We can verify the same from :-</p>\n\n<ol>\n<li>Go to Settings.</li>\n<li>Apps</li>\n<li>Select your App (and you can verify, its not uninstalled properly)</li>\n<li>Open the overflow menu from top right and do \"uninstall for all users\"</li>\n</ol>\n\n<p>And done.</p>\n", "title": "Error type 3 Error: Activity class {} does not exist", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist/36372901#36372901", "question_id": 20915266, "answer_id": 36372901}, {"body": "<p>I would face this problem when uninstalling the app via the device (i.e. dragging the app to the \"Uninstall\" option). But here is the proper way to uninstall:</p>\n\n<p>Use the <code>./gradlew uninstallAll</code> command. This will prevent the <code>Error: Activity class {HomeActivity} does not exist.</code> error.</p>\n", "title": "Error type 3 Error: Activity class {} does not exist", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist/36521856#36521856", "question_id": 20915266, "answer_id": 36521856}, {"body": "<p>I'd like to share the trick that helped in my case. I uninstalled the application from the device and nothing of <code>clean/rebuild/Android Studio restart</code> operations didn't help. </p>\n\n<p>Since Android Studio thinks that the application is still installed on the device and doesn't deploy it, you can force the installation using the ADB:</p>\n\n<pre><code>adb install -r &lt;your_application_from.apk&gt;\n</code></pre>\n\n<p>where <code>-r</code> means reinstall the app, keeping its data.</p>\n", "title": "Error type 3 Error: Activity class {} does not exist", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist/36700343#36700343", "question_id": 20915266, "answer_id": 36700343}, {"body": "<p>As others have noted, this problem can be caused by an attached device/emulator while uninstalling the app and AS connection still exists.  On my end, I just delete all the <strong>build</strong> folders (under app and project dirs) in the project, and relaunch the application on the device/emulator.</p>\n", "title": "Error type 3 Error: Activity class {} does not exist", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist/37035761#37035761", "question_id": 20915266, "answer_id": 37035761}, {"body": "<p>I face the similar Problem please follow the below steps.<br>\nit will help you:</p>\n\n<p>1- Clean your Project<br>\n2- Delete your build directory<br>\n3- Restart your Android Studio<br>\n4- Rebuild the project<br>\n5- it will run successfully.  </p>\n\n<p>Thanks</p>\n", "title": "Error type 3 Error: Activity class {} does not exist", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist/37066313#37066313", "question_id": 20915266, "answer_id": 37066313}, {"body": "<p>I took reference from @jayeffkay's comment.</p>\n\n<p>It works for me after I deleted the gradle cache files located in </p>\n\n<blockquote>\n  <p>/your_proj_directory/.gradle/2.10</p>\n</blockquote>\n\n<p>2.10 is the gradle version used in my case.</p>\n", "title": "Error type 3 Error: Activity class {} does not exist", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist/37269445#37269445", "question_id": 20915266, "answer_id": 37269445}, {"body": "<p>I also faced the same problem somewhere in the past. <em>Such problems actually occurs when we do some refactoring like - renaming, moving files within the project etc.</em> Renaming and Moving files require changes in the gradle file so whenever you rename or move some file just clean the project:</p>\n\n<blockquote>\n  <p>Build -> Clean Project</p>\n</blockquote>\n\n<p>Cleaning the project just removes the <strong>.class</strong> files and recompiles the project. Basically, it forces a project rebuild. </p>\n\n<p>Sometimes such types of errors did not cleaned on cleaning project then try to uninstall the app from the device (either it is emulator or physical one) and run the app again. Hope this will help you, it helps me 50% times.</p>\n\n<p><strong>Note:-</strong> <em>Whenever you got any error just don't go to google, Clean the project if this not work do what you want to google.</em></p>\n", "title": "Error type 3 Error: Activity class {} does not exist", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist/37560426#37560426", "question_id": 20915266, "answer_id": 37560426}, {"body": "<p>I had same issue. My problem fixed when I disabled instant run for Android Studio 2.1.1</p>\n", "title": "Error type 3 Error: Activity class {} does not exist", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist/37606782#37606782", "question_id": 20915266, "answer_id": 37606782}, {"body": "<p>I had Error type 3. I managed to fix it by adding the following code below in AndroidMainfest.xml.</p>\n\n<pre><code>    &lt;activity android:name=\".GameActivity\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n            &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n</code></pre>\n", "title": "Error type 3 Error: Activity class {} does not exist", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist/37951233#37951233", "question_id": 20915266, "answer_id": 37951233}, {"body": "<p>I think another reason that issue happen is that it is not fully deleted for all users on the device.</p>\n\n<p>Go to Settings -> Apps - > Your Apps -> Click to the 3 dots on the top right -> Uninstall for all users</p>\n\n<p>It works for me. It happen especially you change the icons of the app or messing around with the AndroidManifest.xml file.</p>\n", "title": "Error type 3 Error: Activity class {} does not exist", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist/38755357#38755357", "question_id": 20915266, "answer_id": 38755357}, {"body": "<p>I faced this problem lately, and tried all suggestions above, and problem was not saved. Finally I changed a NDK, and problem was solved...</p>\n", "title": "Error type 3 Error: Activity class {} does not exist", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist/38841774#38841774", "question_id": 20915266, "answer_id": 38841774}, {"body": "<p>For me it was a very specific problem, I've got a <strong>Lg g5</strong> to test my application on, and to reset my apps data I uninstalled it on the phone, but the phone has a \"nice\" feature to don't uninstall apps immediatly so you might can reinstall them within one day.\nSo the app was installed but not usable(<strong>disabled</strong>) after removing the app from the phone completely it worked.</p>\n", "title": "Error type 3 Error: Activity class {} does not exist", "tags": ["java", "android", "intellij-idea", "android-manifest", "android-studio"], "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist/39195473#39195473", "question_id": 20915266, "answer_id": 39195473}], "creation_date": 1388795742, "score": 77, "link": "http://stackoverflow.com/questions/20915266/error-type-3-error-activity-class-does-not-exist", "question_id": 20915266}, {"body": "<p>I want to convert <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\"><code>java.time.LocalDate</code></a> into <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Date.html\"><code>java.util.Date</code></a> type. Because I want to set the date into <code>JDateChooser</code>. Or is there any date chooser that supports <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\"><code>java.time</code></a> dates?</p>\n", "tags": ["java", "java-8", "java-time"], "title": "Convert java.time.LocalDate into java.util.Date type", "answers": [{"body": "<pre><code>Date date = Date.from(localDate.atStartOfDay(ZoneId.systemDefault()).toInstant());\n</code></pre>\n\n<p>That assumes your date chooser uses the system default timezone to transform dates into strings.</p>\n", "title": "Convert java.time.LocalDate into java.util.Date type", "tags": ["java", "java-8", "java-time"], "link": "http://stackoverflow.com/questions/22929237/convert-java-time-localdate-into-java-util-date-type/22929420#22929420", "question_id": 22929237, "answer_id": 22929420}, {"body": "<p>In order to create a <em>java.util.Date</em> from a <em>java.time.LocalDate</em>, you have to</p>\n\n<ul>\n<li>add a time to the <em>LocalDate</em></li>\n<li>interpret the date and time within a time zone</li>\n<li>get the number of seconds / milliseconds since <em>epoch</em></li>\n<li>create a <em>java.util.Date</em></li>\n</ul>\n\n<p>The code might look as follows:</p>\n\n<pre><code>LocalDate localDate = ...;\nDate date = new Date(localDate.atStartOfDay(ZoneId.of(\"America/New_York\")).toEpochSecond() * 1000);\n</code></pre>\n", "title": "Convert java.time.LocalDate into java.util.Date type", "tags": ["java", "java-8", "java-time"], "link": "http://stackoverflow.com/questions/22929237/convert-java-time-localdate-into-java-util-date-type/22929435#22929435", "question_id": 22929237, "answer_id": 22929435}, {"body": "<p>java.time has the Temporal interface which you can use to create Instant objects from most of the the time classes. Instant represents milliseconds on the timeline in the Epoch - the base reference for all other dates and times.</p>\n\n<p>We need to convert the Date into a ZonedDateTime, with a Time and a Zone, to do the conversion:</p>\n\n<pre><code>LocalDate ldate = ...;\nInstant instant = Instant.from(ldate.atStartOfDay(ZoneId.of(\"GMT\")));\nDate date = Date.from(instant);\n</code></pre>\n", "title": "Convert java.time.LocalDate into java.util.Date type", "tags": ["java", "java-8", "java-time"], "link": "http://stackoverflow.com/questions/22929237/convert-java-time-localdate-into-java-util-date-type/27247511#27247511", "question_id": 22929237, "answer_id": 27247511}, {"body": "<p>Here's a utility class I use to convert the newer <code>java.time</code> classes to <code>java.util.Date</code> objects and vice versa: </p>\n\n<pre><code>import java.time.Instant;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.time.ZoneId;\nimport java.util.Date;\n\npublic class DateUtils {\n\n  public static Date asDate(LocalDate localDate) {\n    return Date.from(localDate.atStartOfDay().atZone(ZoneId.systemDefault()).toInstant());\n  }\n\n  public static Date asDate(LocalDateTime localDateTime) {\n    return Date.from(localDateTime.atZone(ZoneId.systemDefault()).toInstant());\n  }\n\n  public static LocalDate asLocalDate(Date date) {\n    return Instant.ofEpochMilli(date.getTime()).atZone(ZoneId.systemDefault()).toLocalDate();\n  }\n\n  public static LocalDateTime asLocalDateTime(Date date) {\n    return Instant.ofEpochMilli(date.getTime()).atZone(ZoneId.systemDefault()).toLocalDateTime();\n  }\n}\n</code></pre>\n\n<p>Edited based on @Oliv comment.</p>\n", "title": "Convert java.time.LocalDate into java.util.Date type", "tags": ["java", "java-8", "java-time"], "link": "http://stackoverflow.com/questions/22929237/convert-java-time-localdate-into-java-util-date-type/27323328#27323328", "question_id": 22929237, "answer_id": 27323328}, {"body": "<p>You can use <code>java.sql.Date.valueOf()</code> method as:</p>\n\n<pre><code>Date date = java.sql.Date.valueOf(localDate);\n</code></pre>\n\n<p>No need to add time and time zone info here because they are taken implicitly.<br>\nSee <a href=\"http://stackoverflow.com/questions/33066904/simpliest-java8-localdate-to-java-util-date-conversion-and-vice-versa\">Simpliest java8 LocalDate to java.util.Date conversion and vice versa?</a></p>\n", "title": "Convert java.time.LocalDate into java.util.Date type", "tags": ["java", "java-8", "java-time"], "link": "http://stackoverflow.com/questions/22929237/convert-java-time-localdate-into-java-util-date-type/28564046#28564046", "question_id": 22929237, "answer_id": 28564046}, {"body": "<p>This works for me:</p>\n\n<pre><code>java.util.Date d = new SimpleDateFormat(\"yyyy-MM-dd\").parse(localDate.toString());\n</code></pre>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#toString--\" rel=\"nofollow\">https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#toString--</a></p>\n", "title": "Convert java.time.LocalDate into java.util.Date type", "tags": ["java", "java-8", "java-time"], "link": "http://stackoverflow.com/questions/22929237/convert-java-time-localdate-into-java-util-date-type/29188014#29188014", "question_id": 22929237, "answer_id": 29188014}, {"body": "<pre><code>public static Date convertToTimeZone(Date date, String tzFrom, String tzTo) {\n    return Date.from(LocalDateTime.ofInstant(date.toInstant(), ZoneId.of(tzTo)).atZone(ZoneId.of(tzFrom)).toInstant());\n} \n</code></pre>\n", "title": "Convert java.time.LocalDate into java.util.Date type", "tags": ["java", "java-8", "java-time"], "link": "http://stackoverflow.com/questions/22929237/convert-java-time-localdate-into-java-util-date-type/35453686#35453686", "question_id": 22929237, "answer_id": 35453686}, {"body": "<p>LGoodDatePicker natively uses the java.time package (aka Java 8 time, or JSR-310). More specifically, LGoodDatePicker uses a \"java.time.LocalDate\" to store the date chooser values. It is a good date chooser component. There are some screenshots and a demo at the project homepage. </p>\n\n<p>The project page is here:<br>\n<a href=\"https://github.com/LGoodDatePicker/LGoodDatePicker\" rel=\"nofollow\">https://github.com/LGoodDatePicker/LGoodDatePicker</a></p>\n", "title": "Convert java.time.LocalDate into java.util.Date type", "tags": ["java", "java-8", "java-time"], "link": "http://stackoverflow.com/questions/22929237/convert-java-time-localdate-into-java-util-date-type/35521443#35521443", "question_id": 22929237, "answer_id": 35521443}, {"body": "<p>Simple</p>\n\n<pre><code>public Date convertFrom(LocalDate date) {\n    return java.sql.Timestamp.valueOf(date.atStartOfDay());\n}\n</code></pre>\n", "title": "Convert java.time.LocalDate into java.util.Date type", "tags": ["java", "java-8", "java-time"], "link": "http://stackoverflow.com/questions/22929237/convert-java-time-localdate-into-java-util-date-type/36001898#36001898", "question_id": 22929237, "answer_id": 36001898}], "creation_date": 1396938586, "score": 77, "link": "http://stackoverflow.com/questions/22929237/convert-java-time-localdate-into-java-util-date-type", "question_id": 22929237}, {"body": "<p>How can I elegantly serialize a lambda?</p>\n\n<p>For example, the code below throws a <code>NotSerializableException</code>. How can I fix it without creating a <code>SerializableRunnable</code> \"dummy\" interface?</p>\n\n<pre><code>public static void main(String[] args) throws Exception {\n    File file = Files.createTempFile(\"lambda\", \"ser\").toFile();\n    try (ObjectOutput oo = new ObjectOutputStream(new FileOutputStream(file))) {\n        Runnable r = () -&gt; System.out.println(\"Can I be serialized?\");\n        oo.writeObject(r);\n    }\n\n    try (ObjectInput oi = new ObjectInputStream(new FileInputStream(file))) {\n        Runnable  r = (Runnable) oi.readObject();\n        r.run();\n    }\n}\n</code></pre>\n", "tags": ["java", "serialization", "lambda", "java-8"], "title": "How to serialize a lambda?", "answers": [{"body": "<p>Java 8 introduces the possibility to <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.16\">cast an object to an intersection of types by adding multiple bounds</a>. In the case of serialization, it is therefore possible to write:</p>\n\n<pre><code>Runnable r = (Runnable &amp; Serializable)() -&gt; System.out.println(\"Serializable!\");\n</code></pre>\n\n<p>And the lambda automagically becomes serializable.</p>\n", "title": "How to serialize a lambda?", "tags": ["java", "serialization", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/22807912/how-to-serialize-a-lambda/22808112#22808112", "question_id": 22807912, "answer_id": 22808112}, {"body": "<p>The same construction can be used for method references. For example this code:</p>\n\n<pre><code>import java.io.Serializable;\n\npublic class Test {\n    static Object bar(String s) {\n        return \"make serializable\";\n    }\n\n    void m () {\n        SAM s1 = (SAM &amp; Serializable) Test::bar;\n        SAM s2 = (SAM &amp; Serializable) t -&gt; \"make serializable\";\n    }\n\n    interface SAM {\n        Object action(String s);\n    }\n}\n</code></pre>\n\n<p>defines a lambda expression and a method reference with a serializable target type.</p>\n", "title": "How to serialize a lambda?", "tags": ["java", "serialization", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/22807912/how-to-serialize-a-lambda/23851076#23851076", "question_id": 22807912, "answer_id": 23851076}], "creation_date": 1396432928, "score": 77, "link": "http://stackoverflow.com/questions/22807912/how-to-serialize-a-lambda", "question_id": 22807912}, {"body": "<p>I understand that with <code>.stream()</code>, I can use chain operations like <code>.filter()</code> or use parallel stream. But what is difference between them if I need to execute small operations (for example, printing the elements of the list)?</p>\n\n<pre><code>collection.stream().forEach(System.out::println);\ncollection.forEach(System.out::println);\n</code></pre>\n", "tags": ["java", "collections", "java-8", "java-stream"], "title": "What is difference between Collection.stream().forEach() and Collection.forEach()?", "answers": [{"body": "<p>There is no difference between the two you have mentioned, atleast conceptually, the <code>Collection.forEach()</code> is just a shorthand.</p>\n\n<p>Internally the <code>stream()</code> version has somewhat more overhead due to object creation, but looking at the running time it neither has an overhead there.</p>\n\n<p>Both implementations end up iterating over the <code>collection</code> contents once, and <em>during</em> the iteration print out the element.</p>\n", "title": "What is difference between Collection.stream().forEach() and Collection.forEach()?", "tags": ["java", "collections", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/23218874/what-is-difference-between-collection-stream-foreach-and-collection-foreach/23219402#23219402", "question_id": 23218874, "answer_id": 23219402}, {"body": "<p>For simple cases such as the one illustrated, they are mostly the same. However, there are a number of subtle differences that might be significant.</p>\n\n<p>One issue is with ordering. With <code>Stream.forEach</code>, the order is <strong>undefined</strong>. It's unlikely to occur with sequential streams, still, it's within the specification for <code>Stream.forEach</code> to execute in some arbitrary order. This does occur frequently in parallel streams. By contrast, <code>Iterable.forEach</code> is always executed in the iteration order of the <code>Iterable</code>, if one is specified.</p>\n\n<p>Another issue is with side effects. The action specified in <code>Stream.forEach</code> is required to be <strong>non-interfering</strong>. (See the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#NonInterference\">java.util.stream package doc</a>.) <code>Iterable.forEach</code> potentially has fewer restrictions. For the collections in <code>java.util</code>, <code>Iterable.forEach</code> will generally use that collection's <code>Iterator</code>, most of which are designed to be <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html#fail-fast\">fail-fast</a> and which will throw <code>ConcurrentModificationException</code> if the collection is structurally modified during the iteration. However, modifications that aren't structural <strong>are</strong> allowed during iteration. For example, the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html\">ArrayList class documentation</a> says \"merely setting the value of an element is not a structural modification.\" Thus, the action for <code>ArrayList.forEach</code> is allowed to set values in the underlying <code>ArrayList</code> without problems.</p>\n\n<p>The concurrent collections are yet again different. Instead of fail-fast, they are designed to be <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/package-summary.html#Weakly\">weakly consistent</a>. The full definition is at that link. Briefly, though, consider <code>ConcurrentLinkedDeque</code>. The action passed to its <code>forEach</code> method <strong>is</strong> allowed to modify the underlying deque, even structurally, and <code>ConcurrentModificationException</code> is never thrown. However, the modification that occurs might or might not be visible in this iteration. (Hence the \"weak\" consistency.)</p>\n\n<p>Still another difference is visible if <code>Iterable.forEach</code> is iterating over a synchronized collection. On such a collection, <code>Iterable.forEach</code> takes the collection's lock once and holds it across all the calls to the action method. The <code>Stream.forEach</code> call uses the collection's spliterator, which does not lock, and which relies on the prevailing rule of non-interference. The collection backing the stream could be modified during iteration, and if it is, a <code>ConcurrentModificationException</code> or inconsistent behavior could result.</p>\n", "title": "What is difference between Collection.stream().forEach() and Collection.forEach()?", "tags": ["java", "collections", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/23218874/what-is-difference-between-collection-stream-foreach-and-collection-foreach/23232560#23232560", "question_id": 23218874, "answer_id": 23232560}], "creation_date": 1398167964, "score": 77, "link": "http://stackoverflow.com/questions/23218874/what-is-difference-between-collection-stream-foreach-and-collection-foreach", "question_id": 23218874}, {"body": "<p>I want to manipulate a Microsoft Access database (.accdb or .mdb file) from my Java project. I don't want to use the JDBC-ODBC Bridge and the Access ODBC driver from Microsoft because:</p>\n\n<ul>\n<li>the JDBC-ODBC Bridge has been removed from Java SE 8 and is not supported (ref: <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/jdbc/bridge.html\">here</a>),</li>\n<li>the JDBC-ODBC Bridge does not work properly with the Access ODBC driver when text includes Unicode characters with code points above U+00FF (ref: <a href=\"http://stackoverflow.com/a/20982205/2144390\">here</a>), so such a setup would not be able to handle characters such as Greek, Russian, Chinese, Arabic, etc.,</li>\n<li>the Access ODBC driver from Microsoft only works in Windows, and </li>\n<li>there are separate 32-bit and 64-bit versions of the Access Database Engine (and ODBC driver) which can be a nuisance for deployment.</li>\n</ul>\n\n<p>I have seen other answers mentioning a JDBC driver for Access databases named <a href=\"http://ucanaccess.sourceforge.net/site.html\">UCanAccess</a>. How can I set up my Java project to use this approach?</p>\n\n<p>(Answers suggesting better ways of working with Access databases from Java would also be most welcome.)</p>\n", "tags": ["java", "eclipse", "ms-access", "netbeans-7", "ucanaccess"], "title": "Manipulating an Access database from Java without ODBC", "answers": [{"body": "<p><a href=\"http://ucanaccess.sourceforge.net/site.html\">UCanAccess</a> is a pure Java JDBC driver that allows us to read from and write to Access databases without using ODBC. It uses two other packages, <a href=\"http://jackcess.sourceforge.net/\">Jackcess</a> and <a href=\"http://hsqldb.org/\">HSQLDB</a>, to perform these tasks. The following is a brief overview of how to get it set up.</p>\n\n<p>&nbsp;</p>\n\n<h2>Option 1: Using Maven</h2>\n\n<p>If your project uses <a href=\"https://maven.apache.org/index.html\">Maven</a> you can simply include UCanAccess via the following coordinates:</p>\n\n<p><strong>groupId:</strong> net.sf.ucanaccess<br>\n<strong>artifactId:</strong> ucanaccess</p>\n\n<p>&nbsp;</p>\n\n<h2>Option 2: Manually adding the JARs to your project</h2>\n\n<p>As mentioned above, UCanAccess requires Jackcess and HSQLDB. Jackcess in turn has its own <a href=\"http://jackcess.sourceforge.net/dependencies.html\">dependencies</a>. So to use UCanAccess you will need to include the following components:</p>\n\n<p><a href=\"http://ucanaccess.sourceforge.net/site.html\">UCanAccess</a> (ucanaccess-x.x.x.jar)<br>\n<a href=\"http://hsqldb.org/\">HSQLDB</a> (hsqldb.jar, version 2.2.5 or newer)<br>\n<a href=\"http://jackcess.sourceforge.net/\">Jackcess</a> (jackcess-2.x.x.jar)<br>\n<a href=\"http://commons.apache.org/proper/commons-lang/\">commons-lang</a> (commons-lang-2.6.jar, or newer 2.x version)<br>\n<a href=\"http://commons.apache.org/proper/commons-logging/\">commons-logging</a> (commons-logging-1.1.1.jar, or newer 1.x version)</p>\n\n<p>Fortunately, UCanAccess includes all of the required JAR files in its distribution file. When you unzip it you will see something like</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ucanaccess-3.0.3.jar  \n  /lib/\n    commons-lang-2.6.jar  \n    commons-logging-1.1.1.jar  \n    hsqldb.jar  \n    jackcess-2.1.3.jar\n</code></pre>\n\n<p>All you need to do is add all <strong>five (5)</strong> JARs to your project.</p>\n\n<blockquote>\n  <p>NOTE: Do <strong>not</strong> add <code>loader/ucanload.jar</code> to your build path if you are adding the other five (5) JAR files. The <code>UcanloadDriver</code> class is only used in special circumstances and requires a different setup. See the related answer <a href=\"http://stackoverflow.com/a/34469789/2144390\">here</a> for details.</p>\n</blockquote>\n\n<p><strong>Eclipse:</strong> Right-click the project in Package Explorer and choose <code>Build Path &gt; Configure Build Path...</code>. Click the \"Add External JARs...\" button to add each of the five (5) JARs. When you are finished your Java Build Path should look something like this</p>\n\n<p><a href=\"http://i.stack.imgur.com/ZP3X3.png\"><img src=\"http://i.stack.imgur.com/ZP3X3.png\" alt=\"BuildPath.png\"></a></p>\n\n<p><strong>NetBeans:</strong> Expand the tree view for your project, right-click the \"Libraries\" folder and choose \"Add JAR/Folder...\", then browse to the JAR file. </p>\n\n<p><img src=\"http://i.stack.imgur.com/dVN3d.png\" alt=\"nbAddJar.png\"></p>\n\n<p>After adding all five (5) JAR files the \"Libraries\" folder should look something like this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/e5FKa.png\" alt=\"nbLibraries.png\"></p>\n\n<p><strong>IntelliJ IDEA:</strong> Choose <code>File &gt; Project Structure...</code> from the main menu. In the \"Libraries\" pane click the \"Add\" (<code>+</code>) button and add the five (5) JAR files. Once that is done the project should look something like this:</p>\n\n<p><a href=\"http://i.stack.imgur.com/AnOp5.png\"><img src=\"http://i.stack.imgur.com/AnOp5.png\" alt=\"IntelliJ.png\"></a></p>\n\n<p>&nbsp;</p>\n\n<h2>That's it!</h2>\n\n<p>Now \"U Can Access\" data in .accdb and .mdb files using code like this</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// assumes...\n//     import java.sql.*;\nConnection conn=DriverManager.getConnection(\n        \"jdbc:ucanaccess://C:/__tmp/test/zzz.accdb\");\nStatement s = conn.createStatement();\nResultSet rs = s.executeQuery(\"SELECT [LastName] FROM [Clients]\");\nwhile (rs.next()) {\n    System.out.println(rs.getString(1));\n}\n</code></pre>\n\n<p>&nbsp;</p>\n\n<h2>Disclosure</h2>\n\n<p>At the time of writing this Q&amp;A I had no involvement in or affiliation with the UCanAccess project; I just used it. I have since become a contributor to the project.</p>\n", "title": "Manipulating an Access database from Java without ODBC", "tags": ["java", "eclipse", "ms-access", "netbeans-7", "ucanaccess"], "link": "http://stackoverflow.com/questions/21955256/manipulating-an-access-database-from-java-without-odbc/21955257#21955257", "question_id": 21955256, "answer_id": 21955257}], "creation_date": 1393077331, "score": 75, "link": "http://stackoverflow.com/questions/21955256/manipulating-an-access-database-from-java-without-odbc", "question_id": 21955256}, {"body": "<p>In Java 8, there is a new method <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/CharSequence.html#chars--\"><code>String.chars()</code></a> which returns a stream of <code>int</code>s (<code>IntStream</code>) that represent the character codes. I guess many people would expect a stream of <code>char</code>s here instead. What was the motivation to design the API this way?</p>\n", "tags": ["java", "string", "java-8"], "title": "Why is String.chars() a stream of ints in Java 8?", "answers": [{"body": "<p>As others have already mentioned, the design decision behind this was to prevent the explosion of methods and classes.</p>\n\n<p>Still, personally I think this was a very bad decision, and there should, given they do not want to make <code>CharStream</code>, which is reasonable, different methods instead of <code>chars()</code>, I would think of:</p>\n\n<ul>\n<li><code>Stream&lt;Character&gt; chars()</code>, that gives a stream of boxes characters, which will have some light performance penalty.</li>\n<li><code>IntStream unboxedChars()</code>, which would to be used for performance code.</li>\n</ul>\n\n<p><strong>However</strong>, instead of focusing on <em>why</em> it is done this way currently, I think this answer should focus on showing a way to do it with the API that we have gotten with Java 8.</p>\n\n<p>In Java 7 I would have done it like this:</p>\n\n<pre><code>for (int i = 0; i &lt; hello.length(); i++) {\n    System.out.println(hello.charAt(i));\n}\n</code></pre>\n\n<p>And I think a reasonable method to do it in Java 8 is the following:</p>\n\n<pre><code>hello.chars()\n        .mapToObj(i -&gt; (char)i)\n        .forEach(System.out::println);\n</code></pre>\n\n<p>Here I obtain an <code>IntStream</code> and map it to an object via the lambda <code>i -&gt; (char)i</code>, this will automatically box it into a <code>Stream&lt;Character&gt;</code>, and then we can do what we want, and still use method references as a plus.</p>\n\n<p><strong>Be aware</strong> though that you <em>must</em> do <code>mapToObj</code>, if you forget and use <code>map</code>, then nothing will complain, but you will still end up with an <code>IntStream</code>, and you might be left off wondering why it prints the integer values instead of the strings representing the characters.</p>\n\n<p><strong>Other ugly alternatives for Java 8:</strong></p>\n\n<p>By remaining in an <code>IntStream</code> and wanting to print them ultimately, you cannot use method references anymore for printing:</p>\n\n<pre><code>hello.chars()\n        .forEach(i -&gt; System.out.println((char)i));\n</code></pre>\n\n<p>Moreover, using method references to your own method do not work anymore! Consider the following:</p>\n\n<pre><code>private void print(char c) {\n    System.out.println(c);\n}\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>hello.chars()\n        .forEach(this::print);\n</code></pre>\n\n<p>This will give a compile error, as there possibly is a lossy conversion.</p>\n\n<p><strong>Conclusion:</strong></p>\n\n<p>The API was designed this way because of not wanting to add <code>CharStream</code>, I personally think that the method should return a <code>Stream&lt;Character&gt;</code>, and the workaround currently is to use <code>mapToObj(i -&gt; (char)i)</code> on an <code>IntStream</code> to be able to work properly with them.</p>\n", "title": "Why is String.chars() a stream of ints in Java 8?", "tags": ["java", "string", "java-8"], "link": "http://stackoverflow.com/questions/22435833/why-is-string-chars-a-stream-of-ints-in-java-8/22436638#22436638", "question_id": 22435833, "answer_id": 22436638}, {"body": "<p>The <a href=\"http://stackoverflow.com/a/22436638/1441122\">answer from skiwi</a> covered many of the major points already. I'll fill in a bit more background.</p>\n\n<p>The design of any API is a series of tradeoffs. In Java, one of the difficult issues is dealing with design decisions that were made long ago.</p>\n\n<p>Primitives have been in Java since 1.0. They make Java an \"impure\" object-oriented language, since the primitives are not objects. The addition of primitives was, I believe, a pragmatic decision to improve performance at the expense of object-oriented purity.</p>\n\n<p>This is a tradeoff we're still living with today, nearly 20 years later. The autoboxing feature added in Java 5 mostly eliminated the need to clutter source code with boxing and unboxing method calls, but the overhead is still there. In many cases it's not noticeable. However, if you were to perform boxing or unboxing within an inner loop, you'd see that it can impose significant CPU and garbage collection overhead.</p>\n\n<p>When designing the Streams API, it was clear that we had to support primitives. The boxing/unboxing overhead would kill any performance benefit from parallelism. We didn't want to support <strong>all</strong> of the primitives, though, since that would have added a huge amount of clutter to the API. (Can you really see a use for a <code>ShortStream</code>?) \"All\" or \"none\" are comfortable places for a design to be, yet neither was acceptable. So we had to find a reasonable value of \"some\". We ended up with primitive specializations for <code>int</code>, <code>long</code>, and <code>double</code>. (Personally I would have left out <code>int</code> but that's just me.)</p>\n\n<p>For <code>CharSequence.chars()</code> we considered returning <code>Stream&lt;Character&gt;</code> (an early prototype might have implemented this) but it was rejected because of boxing overhead. Considering that a String has <code>char</code> values as primitives, it would seem to be a mistake to impose boxing unconditionally when the caller would probably just do a bit of processing on the value and unbox it right back into a string.</p>\n\n<p>We also considered a <code>CharStream</code> primitive specialization, but its use would seem to be quite narrow compared to the amount of bulk it would add to the API. It didn't seem worthwhile to add it.</p>\n\n<p>The penalty this imposes on callers is that they have to know that the <code>IntStream</code> contains <code>char</code> values represented as <code>ints</code> and that casting must be done at the proper place. This is doubly confusing because there are overloaded API calls like <code>PrintStream.print(char)</code> and <code>PrintStream.print(int)</code> that differ markedly in their behavior. An additional point of confusion possibly arises because the <code>codePoints()</code> call also returns an <code>IntStream</code> but the values it contains are quite different.</p>\n\n<p>So, this boils down to choosing pragmatically among several alternatives:</p>\n\n<ol>\n<li><p>We could provide no primitive specializations, resulting in a simple, elegant, consistent API, but which imposes a high performance and GC overhead;</p></li>\n<li><p>we could provide a complete set of primitive specializations, at the cost of cluttering up the API and imposing a maintenance burden on JDK developers; or</p></li>\n<li><p>we could provide a subset of primitive specializations, giving a moderately sized, high performing API that imposes a relatively small burden on callers in a fairly narrow range of use cases (char processing).</p></li>\n</ol>\n\n<p>We chose the last one.</p>\n", "title": "Why is String.chars() a stream of ints in Java 8?", "tags": ["java", "string", "java-8"], "link": "http://stackoverflow.com/questions/22435833/why-is-string-chars-a-stream-of-ints-in-java-8/22497858#22497858", "question_id": 22435833, "answer_id": 22497858}], "creation_date": 1394966556, "score": 74, "link": "http://stackoverflow.com/questions/22435833/why-is-string-chars-a-stream-of-ints-in-java-8", "question_id": 22435833}, {"body": "<p>I've tried to google this, but had no luck.</p>\n\n<p>I have a very big switch, and some cases are <em>obviously more common</em> than others.</p>\n\n<p>So I would like to know if the order is really held as it is and the \"upper\" cases get tested before the \"lower\", therefore being evaluated faster.</p>\n\n<p>I'd like to keep my order, but if it hurts speed, then reordering the branches would be a good idea.</p>\n\n<p>For illustration:</p>\n\n<pre><code>switch (mark) {\n        case Ion.NULL:\n            return null;\n\n        case Ion.BOOLEAN:\n            return readBoolean();\n\n        case Ion.BYTE:\n            return readByte();\n\n        case Ion.CHAR:\n            return readChar();\n\n        case Ion.SHORT:\n            return readShort();\n\n        case Ion.INT:\n            return readInt();\n\n        case Ion.LONG:\n            return readLong();\n\n        case Ion.FLOAT:\n            return readFloat();\n\n        case Ion.DOUBLE:\n            return readDouble();\n\n        case Ion.STRING:\n            return readString();\n\n        case Ion.BOOLEAN_ARRAY:\n            return readBooleans();\n\n        case Ion.BYTE_ARRAY:\n            return readBytes();\n\n        case Ion.CHAR_ARRAY:\n            return readChars();\n\n        case Ion.SHORT_ARRAY:\n            return readShorts();\n\n        case Ion.INT_ARRAY:\n            return readInts();\n\n        case Ion.LONG_ARRAY:\n            return readLongs();\n\n        case Ion.FLOAT_ARRAY:\n            return readFloats();\n\n        case Ion.DOUBLE_ARRAY:\n            return readDoubles();\n\n        case Ion.STRING_ARRAY:\n            return readStrings();\n\n        default:\n            throw new CorruptedDataException(\"Invalid mark: \" + mark);\n    }\n</code></pre>\n", "tags": ["java", "switch-statement"], "title": "Does switch case order affect speed?", "answers": [{"body": "<p>Reordering a switch statement does not have any effect.</p>\n\n<p>Looking at the Java bytecode spec, a <code>switch</code> can either be compiled to a <code>lookupswitch</code> or a <code>tableswitch</code> instruction, switching on an <code>int</code>.  A <code>lookupswitch</code> is always compiled with the possible values in sorted order, so reordering the constants in the code will never matter, and a <code>tableswitch</code> just has an array of the possible jumps relative to a specified offset, so it, too, never cares about the original order.</p>\n\n<p>See <a href=\"http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.lookupswitch\">http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.lookupswitch</a> and <a href=\"http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.tableswitch\">http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.tableswitch</a> for details.</p>\n", "title": "Does switch case order affect speed?", "tags": ["java", "switch-statement"], "link": "http://stackoverflow.com/questions/23204580/does-switch-case-order-affect-speed/23204827#23204827", "question_id": 23204580, "answer_id": 23204827}], "creation_date": 1398109019, "score": 74, "link": "http://stackoverflow.com/questions/23204580/does-switch-case-order-affect-speed", "question_id": 23204580}, {"body": "<p>Having been using <code>Java 8</code> now for 6+ months or so, I'm pretty happy with the new API changes. One area I'm still not confident in is when to use <code>Optional</code>. I seem to swing between wanting to use it everywhere something may be <code>null</code>, and nowhere at all.</p>\n\n<p>There seem to be a lot of situations when I could use it, and I'm never sure if it adds benefit (IE readability / null safety) or just causes additional overhead. </p>\n\n<p>So, I have a few examples, and I'd be interested in the community's thoughts on whether <code>Optional</code> adds benefit. </p>\n\n<p>1 - As a public method return type when the method could return <code>null</code>:</p>\n\n<pre><code>public Optional&lt;Foo&gt; findFoo(String id);\n</code></pre>\n\n<p>2 - As a method parameter when the param may be <code>null</code>:</p>\n\n<pre><code>public Foo doSomething(String id, Optional&lt;Bar&gt; barOptional);\n</code></pre>\n\n<p>3 - As an optional member of a bean:</p>\n\n<pre><code>public class Book {\n\n  private List&lt;Pages&gt; pages;\n  private Optional&lt;Index&gt; index;\n\n}\n</code></pre>\n\n<p>4 - In <code>Collections</code>: </p>\n\n<p>In general I don't think:</p>\n\n<pre><code>List&lt;Optional&lt;Foo&gt;&gt;\n</code></pre>\n\n<p>adds anything - especially since one can use <code>filter()</code> to remove <code>null</code> values etc, but are there any good uses for <code>Optional</code> in collections?</p>\n\n<p>Any cases I've missed?</p>\n", "tags": ["java", "design", "java-8", "optional"], "title": "Uses for Optional", "answers": [{"body": "<p>Seems <code>Optional</code> is only useful if the type T in Optional is a primitive type like <code>int</code>, <code>long</code>, <code>char</code>, etc. For \"real\" classes, it does not make sense to me as you can use a <code>null</code> value anyway.</p>\n\n<p>I think it was taken from here (or from another similar language concept).</p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx\" rel=\"nofollow\"><code>Nullable&lt;T&gt;</code></a></p>\n\n<p>In C# this <code>Nullable&lt;T&gt;</code> was introduced long ago to wrap value types.</p>\n", "title": "Uses for Optional", "tags": ["java", "design", "java-8", "optional"], "link": "http://stackoverflow.com/questions/23454952/uses-for-optional/23455008#23455008", "question_id": 23454952, "answer_id": 23455008}, {"body": "<p>Personally, I prefer to use @NotNull and @Nullable checks as these are largely compile time (can have some runtime checks) This has lower overhead in terms of code readability and runtime performance.  It is not as rigorous as using Optional, however this lack of rigour should be backed by decent unit tests.</p>\n\n<pre><code>public @Nullable Foo findFoo(@NotNull String id);\n\npublic @NotNull Foo doSomething(@NotNull String id, @Nullable Bar barOptional);\n\npublic class Book {\n\n  private List&lt;Pages&gt; pages;\n  private @Nullable Index index;\n\n}\n\nList&lt;@Nullable Foo&gt; list = ..\n</code></pre>\n\n<p>This works with Java 5 and no need to wrap and unwrap values. (or create wrapper objects)</p>\n", "title": "Uses for Optional", "tags": ["java", "design", "java-8", "optional"], "link": "http://stackoverflow.com/questions/23454952/uses-for-optional/23455046#23455046", "question_id": 23454952, "answer_id": 23455046}, {"body": "<p>I think the Guava Optional and their wiki page puts it quite well:</p>\n\n<blockquote>\n  <p>Besides the increase in readability that comes from giving null a name, the biggest advantage of Optional is its idiot-proof-ness. It forces you to actively think about the absent case if you want your program to compile at all, since you have to actively unwrap the Optional and address that case. Null makes it disturbingly easy to simply forget things, and though FindBugs helps, we don't think it addresses the issue nearly as well. </p>\n  \n  <p>This is especially relevant when you're returning values that may or may not be \"present.\" You (and others) are far more likely to forget that other.method(a, b) could return a null value than you're likely to forget that a could be null when you're implementing other.method. Returning Optional makes it impossible for callers to forget that case, since they have to unwrap the object themselves for their code to compile.\n    -- (Source: <a href=\"https://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained\">Guava Wiki - Using and Avoiding null - What's the point?</a>)</p>\n</blockquote>\n\n<p><code>Optional</code> adds some overhead, but I think its clear advantage is to make it <em>explicit</em> \nthat an object might be absent and it enforces that programmers handle the situation. It prevents that someone forgets the beloved <code>!= null</code> check.</p>\n\n<p>Taking the example of <a href=\"http://stackoverflow.com/a/23455046/1153530\">2</a>, I think it is far more explicit code to write:</p>\n\n<pre><code>if(soundcard.isPresent()){\n  System.out.println(soundcard.get());\n}\n</code></pre>\n\n<p>than </p>\n\n<pre><code>if(soundcard != null){\n  System.out.println(soundcard);\n}\n</code></pre>\n\n<p>For me, the <code>Optional</code> better captures the fact that there is no soundcard present.</p>\n\n<p>My 2\u00a2 about your points:</p>\n\n<ol>\n<li><code>public Optional&lt;Foo&gt; findFoo(String id);</code> - I am not sure about this. Maybe I would return a <code>Result&lt;Foo&gt;</code> which might be <em>empty</em> or contain a <code>Foo</code>. It is a similar concept, but not really an <code>Optional</code>. </li>\n<li><code>public Foo doSomething(String id, Optional&lt;Bar&gt; barOptional);</code> - I would prefer @Nullable and a findbugs check, as in <a href=\"http://stackoverflow.com/a/23455046/1153530\">Peter Lawrey's answer</a> - see also <a href=\"https://plus.google.com/+JordanLewiser/posts/ayfR8F56PGy\">this discussion</a>.</li>\n<li>Your book example - I am not sure if I would use the Optional internally, that might depend on the complexity. For the \"API\" of a book, I would use an <code>Optional&lt;Index&gt; getIndex()</code> to explicitly indicate that the book might not have an index.</li>\n<li>I would not use it in collections, rather not allowing null values in collections</li>\n</ol>\n\n<p>In general, I would try to minimize passing around <code>null</code>s. (Once burnt...) \nI think it is worth to find the appropriate abstractions and indicate to the fellow programmers what a certain return value actually represents.</p>\n", "title": "Uses for Optional", "tags": ["java", "design", "java-8", "optional"], "link": "http://stackoverflow.com/questions/23454952/uses-for-optional/23455933#23455933", "question_id": 23454952, "answer_id": 23455933}, {"body": "<p>The main point of <code>Optional</code> is to provide a means for a function returning a value to indicate the absence of a return value. See <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2012-September/005952.html\">this discussion</a>. This allows the caller to continue a chain of fluent method calls.</p>\n\n<p>This most closely matches use case <strong>#1</strong> in the OP's question. Although, <em>absence of a value</em> is a more precise formulation than <em>null</em> since something like <code>IntStream.findFirst</code> could never return null.</p>\n\n<p>For use case <strong>#2</strong>, passing an optional argument to a method, this could be made to work, but it's rather clumsy. Suppose you have a method that takes a string followed by an optional second string. Accepting an <code>Optional</code> as the second arg would result in code like this:</p>\n\n<pre><code>foo(\"bar\", Optional.of(\"baz\"));\nfoo(\"bar\", Optional.empty());\n</code></pre>\n\n<p>Even accepting null is nicer:</p>\n\n<pre><code>foo(\"bar\", \"baz\");\nfoo(\"bar\", null);\n</code></pre>\n\n<p>Probably the best is to have an overloaded method that accepts a single string argument and provides a default for the second:</p>\n\n<pre><code>foo(\"bar\", \"baz\");\nfoo(\"bar\");\n</code></pre>\n\n<p>This does have limitations, but it's much nicer than either of the above.</p>\n\n<p>Use cases <strong>#3</strong> and <strong>#4</strong>, having an <code>Optional</code> in a class field or in a data structure, is considered a misuse of the API. First, it goes against the main design goal of <code>Optional</code> as stated at the top. Second, it doesn't add any value.</p>\n\n<p>There are three ways to deal with the absence of a value in an <code>Optional</code>: to provide a substitute value, to call a function to provide a substitute value, or to throw an exception. If you're storing into a field, you'd do this at initialization or assignment time. If you're adding values into a list, as the OP mentioned, you have the additional choice of simply not adding the value, thereby \"flattening\" out absent values.</p>\n\n<p>I'm sure somebody could come up with some contrived cases where they really want to store an <code>Optional</code> in a field or a collection, but in general, it is best to avoid doing this.</p>\n", "title": "Uses for Optional", "tags": ["java", "design", "java-8", "optional"], "link": "http://stackoverflow.com/questions/23454952/uses-for-optional/23464794#23464794", "question_id": 23454952, "answer_id": 23464794}, {"body": "<p>Here is an interesting usage (I believe) for... Tests.</p>\n\n<p>I intend to heavily test one of my projects and I therefore build assertions; only there are things I have to verify and others I don't.</p>\n\n<p>I therefore build things to assert and use an assert to verify them, like this:</p>\n\n<pre><code>public final class NodeDescriptor&lt;V&gt;\n{\n    private final Optional&lt;String&gt; label;\n    private final List&lt;NodeDescriptor&lt;V&gt;&gt; children;\n\n    private NodeDescriptor(final Builder&lt;V&gt; builder)\n    {\n        label = Optional.fromNullable(builder.label);\n        final ImmutableList.Builder&lt;NodeDescriptor&lt;V&gt;&gt; listBuilder\n            = ImmutableList.builder();\n        for (final Builder&lt;V&gt; element: builder.children)\n            listBuilder.add(element.build());\n        children = listBuilder.build();\n    }\n\n    public static &lt;E&gt; Builder&lt;E&gt; newBuilder()\n    {\n        return new Builder&lt;E&gt;();\n    }\n\n    public void verify(@Nonnull final Node&lt;V&gt; node)\n    {\n        final NodeAssert&lt;V&gt; nodeAssert = new NodeAssert&lt;V&gt;(node);\n        nodeAssert.hasLabel(label);\n    }\n\n    public static final class Builder&lt;V&gt;\n    {\n        private String label;\n        private final List&lt;Builder&lt;V&gt;&gt; children = Lists.newArrayList();\n\n        private Builder()\n        {\n        }\n\n        public Builder&lt;V&gt; withLabel(@Nonnull final String label)\n        {\n            this.label = Preconditions.checkNotNull(label);\n            return this;\n        }\n\n        public Builder&lt;V&gt; withChildNode(@Nonnull final Builder&lt;V&gt; child)\n        {\n            Preconditions.checkNotNull(child);\n            children.add(child);\n            return this;\n        }\n\n        public NodeDescriptor&lt;V&gt; build()\n        {\n            return new NodeDescriptor&lt;V&gt;(this);\n        }\n    }\n}\n</code></pre>\n\n<p>In the NodeAssert class, I do this:</p>\n\n<pre><code>public final class NodeAssert&lt;V&gt;\n    extends AbstractAssert&lt;NodeAssert&lt;V&gt;, Node&lt;V&gt;&gt;\n{\n    NodeAssert(final Node&lt;V&gt; actual)\n    {\n        super(Preconditions.checkNotNull(actual), NodeAssert.class);\n    }\n\n    private NodeAssert&lt;V&gt; hasLabel(final String label)\n    {\n        final String thisLabel = actual.getLabel();\n        assertThat(thisLabel).overridingErrorMessage(\n            \"node's label is null! I didn't expect it to be\"\n        ).isNotNull();\n        assertThat(thisLabel).overridingErrorMessage(\n            \"node's label is not what was expected!\\n\"\n            + \"Expected: '%s'\\nActual  : '%s'\\n\", label, thisLabel\n        ).isEqualTo(label);\n        return this;\n    }\n\n    NodeAssert&lt;V&gt; hasLabel(@Nonnull final Optional&lt;String&gt; label)\n    {\n        return label.isPresent() ? hasLabel(label.get()) : this;\n    }\n}\n</code></pre>\n\n<p>Which means the assert really only triggers if I want to check the label!</p>\n", "title": "Uses for Optional", "tags": ["java", "design", "java-8", "optional"], "link": "http://stackoverflow.com/questions/23454952/uses-for-optional/23465693#23465693", "question_id": 23454952, "answer_id": 23465693}, {"body": "<p>I'm late to the game but for what it's worth, I want to add my 2 Cents. They go against the <a href=\"http://blog.codefx.org/jdk/dev/design-optional/\">design goal of <code>Optional</code></a>, which is well summarized by <a href=\"http://stackoverflow.com/a/23464794/2525313\">Stuart Marks's answer</a>, but I'm still convinced of their validity (obviously).</p>\n\n<h2>Use Optional Everywhere</h2>\n\n<h3>In General</h3>\n\n<p>I wrote an entire <a href=\"http://blog.codefx.org/techniques/intention-revealing-code-java-8-optional/\">blog post about using <code>Optional</code></a> but it basically comes down to this:</p>\n\n<ul>\n<li>design your classes to avoid optionality wherever feasibly possible</li>\n<li>in all remaining cases, the default should be to use <code>Optional</code> instead of <code>null</code></li>\n<li>possibly make exceptions for:\n\n<ul>\n<li>local variables</li>\n<li>return values and arguments to private methods</li>\n<li>performance critical code blocks (no guesses, use a profiler)</li>\n</ul></li>\n</ul>\n\n<p>The first two exceptions can reduce the perceived overhead of wrapping and unwrapping references in <code>Optional</code>. They are chosen such that a null can never legally pass a boundary from one instance into another.</p>\n\n<p>Note that this will almost never allow <code>Optional</code>s in collections which is almost as bad as <code>null</code>s. Just don't do it. ;)</p>\n\n<h3>Regarding your questions</h3>\n\n<ol>\n<li>Yes.</li>\n<li>If overloading is no option, yes.</li>\n<li>If other approaches (subclassing, decorating, ...) are no option, yes.</li>\n<li>Please no!</li>\n</ol>\n\n<h2>Advantages</h2>\n\n<p>Doing this reduces the presence of <code>null</code>s in your code base, although it does not eradicate them. But that is not even the main point. There are other important advantages:</p>\n\n<h3>Clarifies Intent</h3>\n\n<p>Using <code>Optional</code> clearly expresses that the variable is, well, optional. Any reader of your code or consumer of your API will be beaten over the head with the fact that there might be nothing there and that a check is necessary before accessing the value.</p>\n\n<h3>Removes Uncertainty</h3>\n\n<p>Without <code>Optional</code> the meaning of a <code>null</code> occurrence is unclear. It could be a legal representation of a state (see <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#get-java.lang.Object-\"><code>Map.get</code></a>) or an implementation error like a missing or failed initialization.</p>\n\n<p>This changes dramatically with the persistent use of <code>Optional</code>. Here, already the occurrence of <code>null</code> signifies the presence of a bug. (Because if the value were allowed to be missing, an <code>Optional</code> would have been used.) This makes debugging a null pointer exception much easier as the question of the meaning of this <code>null</code> is already answered.</p>\n\n<h3>More Null Checks</h3>\n\n<p>Now that nothing can be <code>null</code> anymore, this can be enforced everywhere. Whether with annotations, assertions or plain checks, you never have to think about whether this argument or that return type can be null. It can't!</p>\n\n<h2>Disadvantages</h2>\n\n<p>Of course, there is no silver bullet...</p>\n\n<h3>Performance</h3>\n\n<p>Wrapping values (especially primitives) into an extra instance can degrade performance. In tight loops this might become noticeable or even worse.</p>\n\n<p>Note that the compiler might be able to circumvent the extra reference for short lived lifetimes of <code>Optional</code>s. In Java 10 <a href=\"http://cr.openjdk.java.net/~jrose/values/values-0.html\">value types</a> might further reduce or remove the penalty.</p>\n\n<h3>Serialization</h3>\n\n<p><a href=\"http://blog.codefx.org/jdk/dev/why-isnt-optional-serializable/\"><code>Optional</code> is not serializable</a> but a <a href=\"http://blog.codefx.org/jdk/serialize-optional/\">workaround</a> is not overly complicated.</p>\n\n<h3>Invariance</h3>\n\n<p>Due to the invariance of generic types in Java, certain operations become cumbersome when the actual value type is pushed into a generic type argument. An example is given <a href=\"http://blog.jooq.org/2014/03/28/java-8-friday-optional-will-remain-an-option-in-java/\">here (see \"Parametric polymorphism\")</a>.</p>\n", "title": "Uses for Optional", "tags": ["java", "design", "java-8", "optional"], "link": "http://stackoverflow.com/questions/23454952/uses-for-optional/27071576#27071576", "question_id": 23454952, "answer_id": 27071576}, {"body": "<p>There are already several resources about this feature:</p>\n\n<ul>\n<li><a href=\"http://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html\" rel=\"nofollow\">Tired of Null Pointer Exceptions? Consider Using Java SE 8's Optional</a></li>\n<li><a href=\"http://en.wikipedia.org/wiki/Option_type\" rel=\"nofollow\">Option type</a>: \"a polymorphic type that represents encapsulation of an optional value\"</li>\n<li><a href=\"http://java.dzone.com/articles/java-8-optional-how-use-it\" rel=\"nofollow\">Java 8 Optional: How to Use it</a></li>\n<li><a href=\"http://blog.codefx.org/jdk/dev/design-optional/\" rel=\"nofollow\">The Design of Optional</a></li>\n<li><a href=\"http://fr.slideshare.net/mariofusco/monadic-java\" rel=\"nofollow\">Monadic Java</a></li>\n<li><a href=\"http://www.oraclejavamagazine-digital.com/javamagazine_open/20140304#pg51\" rel=\"nofollow\">Processing data with Java SE 8 Streams</a></li>\n</ul>\n", "title": "Uses for Optional", "tags": ["java", "design", "java-8", "optional"], "link": "http://stackoverflow.com/questions/23454952/uses-for-optional/28746886#28746886", "question_id": 23454952, "answer_id": 28746886}, {"body": "<p>My problem with <code>Optional</code> is that you define a constraint on a type whereas your constraint is on your attribute.</p>\n\n<p>Using <code>Optional</code> changes the type of your attribute...it's bad.\nI would prefer  something that \"mark\" my attribute as an  optional attribute.</p>\n\n<p>I prefer annotations even if I understand that I cannot do exactly what we do with <code>Optional</code>.</p>\n", "title": "Uses for Optional", "tags": ["java", "design", "java-8", "optional"], "link": "http://stackoverflow.com/questions/23454952/uses-for-optional/30364943#30364943", "question_id": 23454952, "answer_id": 30364943}, {"body": "<p>Java SE 8 introduces a new class called java.util.Optional,</p>\n\n<p>You can create an empty Optional or Optional with null value.</p>\n\n<pre><code>Optional&lt;String&gt; emptyOptional= Optional.empty(); \n</code></pre>\n\n<p>And here is an Optional with a non-null value:</p>\n\n<pre><code>String valueString = new String(\"TEST\");\nOptional&lt;String &gt; optinalValueString = Optional.of(valueString );\n</code></pre>\n\n<p><strong>Do Something If a Value Is Present</strong></p>\n\n<p>Now that you have an Optional object, you can access the methods available to explicitly deal with the presence or absence of values. Instead of having to remember to do a null check, as follows:</p>\n\n<pre><code>String nullString = null;\nif(nullString != null){\n  System.out.println(nullString );\n}\n</code></pre>\n\n<p>You can use the ifPresent() method, as follows:</p>\n\n<pre><code>Optional&lt;String&gt; optinalString= null;\noptinalString.ifPresent(System.out::println);\n\n\n\npackage optinalTest;\n\nimport java.util.Optional;\n\npublic class OptionalTest {\n\n    public Optional&lt;String&gt; getOptionalNullString() {\n        return null;\n//      return Optional.of(\"TESt\");\n    }\n\n    public static void main(String[] args) {\n\n        OptionalTest optionalTest = new OptionalTest();\n\n        Optional&lt;Optional&lt;String&gt;&gt; optionalNullString =    Optional.ofNullable(optionalTest.getOptionalNullString());\n        if (optionalNullString.isPresent()) {\n\n            System.out.println(optionalNullString.get());\n\n        }\n\n    }\n}\n</code></pre>\n", "title": "Uses for Optional", "tags": ["java", "design", "java-8", "optional"], "link": "http://stackoverflow.com/questions/23454952/uses-for-optional/36044154#36044154", "question_id": 23454952, "answer_id": 36044154}, {"body": "<p>From <a href=\"http://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html\" rel=\"nofollow\">Oracle tutorial</a>:</p>\n\n<blockquote>\n  <p>The purpose of Optional is not to replace every single null reference in your codebase but rather to help design better APIs in which\u2014just by reading the signature of a method\u2014users can tell whether to expect an optional value. In addition, Optional forces you to actively unwrap an Optional to deal with the absence of a value; as a result, you protect your code against unintended null pointer exceptions.</p>\n</blockquote>\n", "title": "Uses for Optional", "tags": ["java", "design", "java-8", "optional"], "link": "http://stackoverflow.com/questions/23454952/uses-for-optional/37539959#37539959", "question_id": 23454952, "answer_id": 37539959}], "creation_date": 1399198057, "score": 73, "link": "http://stackoverflow.com/questions/23454952/uses-for-optional", "question_id": 23454952}, {"body": "<p><strong>Before Java 8</strong> when we split on empty string like </p>\n\n<pre><code>String[] tokens = \"abc\".split(\"\");\n</code></pre>\n\n<p>split mechanism would split in places marked with <code>|</code></p>\n\n<pre><code>|a|b|c|\n</code></pre>\n\n<p>because empty space <code>\"\"</code> exists before and after each character. So as result it would generate at first this array</p>\n\n<pre><code>[\"\", \"a\", \"b\", \"c\", \"\"]\n</code></pre>\n\n<p>and later will <a href=\"http://stackoverflow.com/a/29972465/1393766\">remove trailing empty strings</a> (because we didn't explicitly provide negative value to <code>limit</code> argument) so it will finally return </p>\n\n<pre><code>[\"\", \"a\", \"b\", \"c\"]\n</code></pre>\n\n<hr>\n\n<p><strong>In Java 8</strong> split mechanism seems to have changed. Now when we use </p>\n\n<pre><code>\"abc\".split(\"\")\n</code></pre>\n\n<p>we will get <code>[\"a\", \"b\", \"c\"]</code> array instead of <code>[\"\", \"a\", \"b\", \"c\"]</code> so it looks like empty strings at start are also removed. But this theory fails because for instance</p>\n\n<pre><code>\"abc\".split(\"a\")\n</code></pre>\n\n<p>is returning array with empty string at start <code>[\"\", \"bc\"]</code>. </p>\n\n<p>Can someone explain what is going on here and how rules of split for this cases have changed in Java&nbsp;8?</p>\n", "tags": ["java", "regex", "split", "java-8"], "title": "Why in Java 8 split sometimes removes empty strings at start of result array?", "answers": [{"body": "<p>There was a slight change in the docs for <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-int-\"><code>split()</code></a> from Java 7 to Java 8. Specifically, the following statement was added:</p>\n\n<blockquote>\n  <p>When there is a positive-width match at the beginning of this string then an empty leading substring is included at the beginning of the resulting array. <strong>A zero-width match at the beginning however never produces such empty leading substring.</strong></p>\n</blockquote>\n\n<p><sup>(emphasis mine)</sup></p>\n\n<p>The empty string split generates a zero-width match at the beginning, so an empty string is not included at the start of the resulting array in accordance with what is specified above. By contrast, your second example which splits on <code>\"a\"</code> generates a <em>positive</em>-width match at the start of the string, so an empty string is in fact included at the start of the resulting array.</p>\n", "title": "Why in Java 8 split sometimes removes empty strings at start of result array?", "tags": ["java", "regex", "split", "java-8"], "link": "http://stackoverflow.com/questions/22718744/why-in-java-8-split-sometimes-removes-empty-strings-at-start-of-result-array/22718899#22718899", "question_id": 22718744, "answer_id": 22718899}, {"body": "<p>This has been specified in the documentation of <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-int-\"><code>split(String regex, limit)</code></a>.</p>\n\n<blockquote>\n  <p>When there is a positive-width match at the beginning of this string\n  then an empty leading substring is included at the beginning of the\n  resulting array. A zero-width match at the beginning however never\n  produces such empty leading substring.</p>\n</blockquote>\n\n<p>In <code>\"abc\".split(\"\")</code> you  got a zero-width match at the beginning so the leading empty substring is not included in the resulting array. </p>\n\n<p>However in your second snippet when you split on <code>\"a\"</code> you got a positive width match (1 in this case), so the empty leading substring is included as expected.</p>\n\n<p>(Removed irrelevant source code)</p>\n", "title": "Why in Java 8 split sometimes removes empty strings at start of result array?", "tags": ["java", "regex", "split", "java-8"], "link": "http://stackoverflow.com/questions/22718744/why-in-java-8-split-sometimes-removes-empty-strings-at-start-of-result-array/22718904#22718904", "question_id": 22718744, "answer_id": 22718904}, {"body": "<p>The behavior of <code>String.split</code> (which calls <code>Pattern.split</code>) changes between Java 7 and Java 8.</p>\n\n<h1>Documentation</h1>\n\n<p>Comparing between the documentation of <code>Pattern.split</code> in <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#split%28java.lang.CharSequence,%20int%29\">Java 7</a> and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#split-java.lang.CharSequence-int-\">Java 8</a>, we observe the following clause being added:</p>\n\n<blockquote>\n  <p>When there is a positive-width match at the beginning of the input sequence then an empty leading substring is included at the beginning of the resulting array. A zero-width match at the beginning however never produces such empty leading substring.</p>\n</blockquote>\n\n<p>The same clause is also added to <code>String.split</code> in <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-int-\">Java 8</a>, compared to <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#split%28java.lang.CharSequence,%20int%29\">Java 7</a>.</p>\n\n<h1>Reference implementation</h1>\n\n<p>Let us compare the code of <code>Pattern.split</code> of the reference implemetation in Java 7 and Java 8. The code is retrieved from grepcode, for version 7u40-b43 and 8-b132.</p>\n\n<h2>Java 7</h2>\n\n<pre><code>public String[] split(CharSequence input, int limit) {\n    int index = 0;\n    boolean matchLimited = limit &gt; 0;\n    ArrayList&lt;String&gt; matchList = new ArrayList&lt;&gt;();\n    Matcher m = matcher(input);\n\n    // Add segments before each match found\n    while(m.find()) {\n        if (!matchLimited || matchList.size() &lt; limit - 1) {\n            String match = input.subSequence(index, m.start()).toString();\n            matchList.add(match);\n            index = m.end();\n        } else if (matchList.size() == limit - 1) { // last one\n            String match = input.subSequence(index,\n                                             input.length()).toString();\n            matchList.add(match);\n            index = m.end();\n        }\n    }\n\n    // If no match was found, return this\n    if (index == 0)\n        return new String[] {input.toString()};\n\n    // Add remaining segment\n    if (!matchLimited || matchList.size() &lt; limit)\n        matchList.add(input.subSequence(index, input.length()).toString());\n\n    // Construct result\n    int resultSize = matchList.size();\n    if (limit == 0)\n        while (resultSize &gt; 0 &amp;&amp; matchList.get(resultSize-1).equals(\"\"))\n            resultSize--;\n    String[] result = new String[resultSize];\n    return matchList.subList(0, resultSize).toArray(result);\n}\n</code></pre>\n\n<h2>Java 8</h2>\n\n<pre><code>public String[] split(CharSequence input, int limit) {\n    int index = 0;\n    boolean matchLimited = limit &gt; 0;\n    ArrayList&lt;String&gt; matchList = new ArrayList&lt;&gt;();\n    Matcher m = matcher(input);\n\n    // Add segments before each match found\n    while(m.find()) {\n        if (!matchLimited || matchList.size() &lt; limit - 1) {\n            if (index == 0 &amp;&amp; index == m.start() &amp;&amp; m.start() == m.end()) {\n                // no empty leading substring included for zero-width match\n                // at the beginning of the input char sequence.\n                continue;\n            }\n            String match = input.subSequence(index, m.start()).toString();\n            matchList.add(match);\n            index = m.end();\n        } else if (matchList.size() == limit - 1) { // last one\n            String match = input.subSequence(index,\n                                             input.length()).toString();\n            matchList.add(match);\n            index = m.end();\n        }\n    }\n\n    // If no match was found, return this\n    if (index == 0)\n        return new String[] {input.toString()};\n\n    // Add remaining segment\n    if (!matchLimited || matchList.size() &lt; limit)\n        matchList.add(input.subSequence(index, input.length()).toString());\n\n    // Construct result\n    int resultSize = matchList.size();\n    if (limit == 0)\n        while (resultSize &gt; 0 &amp;&amp; matchList.get(resultSize-1).equals(\"\"))\n            resultSize--;\n    String[] result = new String[resultSize];\n    return matchList.subList(0, resultSize).toArray(result);\n}\n</code></pre>\n\n<p>The addition of the following code in Java 8 excludes the zero-length match at the beginning of the input string, which explains the behavior above.</p>\n\n<pre><code>            if (index == 0 &amp;&amp; index == m.start() &amp;&amp; m.start() == m.end()) {\n                // no empty leading substring included for zero-width match\n                // at the beginning of the input char sequence.\n                continue;\n            }\n</code></pre>\n\n<h1>Maintaining compatibility</h1>\n\n<h2>Following behavior in Java 8 and above</h2>\n\n<p>To make <code>split</code> behaves consistently across versions and compatible with the behavior in Java 8:</p>\n\n<ol>\n<li>If your regex <strong>can</strong> match zero-length string, just add <code>(?!\\A)</code> at <strong>the end</strong> of the regex and wrap the original regex in non-capturing group <code>(?:...)</code> (if necessary).</li>\n<li>If your regex <strong>can't</strong> match zero-length string, you don't need to do anything.</li>\n<li>If you don't know whether the regex can match zero-length string or not, do both the actions in step 1.</li>\n</ol>\n\n<p><code>(?!\\A)</code> checks that the string does not end at the beginning of the string, which implies that the match is an empty match at the beginning of the string.</p>\n\n<h2>Following behavior in Java 7 and prior</h2>\n\n<p>There is no general solution to make <code>split</code> backward-compatible with Java 7 and prior, short of replacing all instance of <code>split</code> to point to your own custom implementation.</p>\n", "title": "Why in Java 8 split sometimes removes empty strings at start of result array?", "tags": ["java", "regex", "split", "java-8"], "link": "http://stackoverflow.com/questions/22718744/why-in-java-8-split-sometimes-removes-empty-strings-at-start-of-result-array/27477312#27477312", "question_id": 22718744, "answer_id": 27477312}], "creation_date": 1396025431, "score": 73, "link": "http://stackoverflow.com/questions/22718744/why-in-java-8-split-sometimes-removes-empty-strings-at-start-of-result-array", "question_id": 22718744}, {"body": "<p><em>This is a canonical question for a problem frequently posted on StackOverflow.</em></p>\n\n<p>I'm following a tutorial. I've created a new activity using a wizard. I get <code>NullPointerException</code> when attempting to call a method on <code>View</code>s obtained with <code>findViewById()</code> in my activity <code>onCreate()</code>.</p>\n\n<p>Activity <code>onCreate()</code>:</p>\n\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    View something = findViewById(R.id.something);\n    something.setOnClickListener(new View.OnClickListener() { ... }); // NPE HERE\n\n    if (savedInstanceState == null) {\n        getSupportFragmentManager().beginTransaction()\n                .add(R.id.container, new PlaceholderFragment()).commit();\n    }\n}\n</code></pre>\n\n<p>Layout XML (<code>fragment_main.xml</code>):</p>\n\n<pre><code>&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:paddingBottom=\"@dimen/activity_vertical_margin\"\n    android:paddingLeft=\"@dimen/activity_horizontal_margin\"\n    android:paddingRight=\"@dimen/activity_horizontal_margin\"\n    android:paddingTop=\"@dimen/activity_vertical_margin\"\n    tools:context=\"packagename.MainActivity$PlaceholderFragment\" &gt;\n\n    &lt;View\n        android:layout_width=\"100dp\"\n        android:layout_height=\"100dp\"\n        android:id=\"@+id/something\" /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n", "tags": ["java", "android", "android-fragments", "nullpointerexception"], "title": "NullPointerException accessing views in onCreate()", "answers": [{"body": "<p>The tutorial is probably outdated, attempting to create an activity-based UI instead of the fragment-based UI preferred by wizard-generated code.</p>\n\n<p>The view is in the fragment layout (<code>fragment_main.xml</code>)  and not in the activity layout (<code>activity_main.xml</code>). <code>onCreate()</code> is too early in the lifecycle to find it in the activity view hierarchy, and a <code>null</code> is returned. Invoking a method on <code>null</code> causes the NPE.</p>\n\n<p>The preferred solution is to move the code to the fragment <code>onCreateView()</code>, calling <code>findViewById()</code> on the inflated fragment layout <code>rootView</code>:</p>\n\n<pre><code>@Override\npublic View onCreateView(LayoutInflater inflater, ViewGroup container,\n    Bundle savedInstanceState) {\n  View rootView = inflater.inflate(R.layout.fragment_main, container,\n      false);\n\n  View something = rootView.findViewById(R.id.something); // not activity findViewById()\n  something.setOnClickListener(new View.OnClickListener() { ... });\n\n  return rootView;\n}\n</code></pre>\n\n<p>As a side note, the fragment layout will eventually be a part of the activity view hierarchy and discoverable with activity <code>findViewById()</code> but only after the fragment transaction has been run. Pending fragment transactions get executed in <code>super.onStart()</code> after <code>onCreate()</code>.</p>\n", "title": "NullPointerException accessing views in onCreate()", "tags": ["java", "android", "android-fragments", "nullpointerexception"], "link": "http://stackoverflow.com/questions/23653778/nullpointerexception-accessing-views-in-oncreate/23653779#23653779", "question_id": 23653778, "answer_id": 23653779}, {"body": "<p>Since you have declared your View in the <code>fragment_main.xml</code>,move that piece of code where you get the NPE in the <code>onCreateView()</code> method of the fragment.\nThis should solve the issue.</p>\n", "title": "NullPointerException accessing views in onCreate()", "tags": ["java", "android", "android-fragments", "nullpointerexception"], "link": "http://stackoverflow.com/questions/23653778/nullpointerexception-accessing-views-in-oncreate/24408838#24408838", "question_id": 23653778, "answer_id": 24408838}, {"body": "<p>Agreed, this is a typical error because people often don't really understand how Fragments work when they begin working on Android development. To alleviate confusion, I created a simple example code that I originally posted on <a href=\"http://stackoverflow.com/questions/24526296/application-is-stopped-in-android-emulator/24527201#24527201\">Application is stopped in android emulator</a> , but I posted it here as well.</p>\n\n<p>An example is the following:</p>\n\n<pre><code>public class ContainerActivity extends FragmentActivity implements ExampleFragment.Callback\n{\n    @Override\n    public void onCreate(Bundle saveInstanceState)\n    {\n        super.onCreate(saveInstanceState);\n        this.setContentView(R.layout.activity_container);\n        if (saveInstanceState == null)\n        {               \n             getSupportFragmentManager().beginTransaction()\n                .add(R.id.activity_container_container, new ExampleFragment())\n                .addToBackStack(null)\n             .commit();\n        }\n        getSupportFragmentManager().addOnBackStackChangedListener(new OnBackStackChangedListener()\n        {\n            public void onBackStackChanged()\n            {\n                int backCount = getSupportFragmentManager().getBackStackEntryCount();\n                if (backCount == 0)\n                {\n                    finish();\n                }\n            }\n        });\n    }\n\n    @Override\n    public void exampleFragmentCallback()\n    {\n        Toast.makeText(this, \"Hello!\", Toast.LENGTH_LONG).show();\n    }\n}\n</code></pre>\n\n<p>activity_container.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\" &gt;\n\n    &lt;FrameLayout\n        android:id=\"@+id/activity_container_container\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\" /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>ExampleFragment:</p>\n\n<pre><code>public class ExampleFragment extends Fragment implements View.OnClickListener\n{\n    public static interface Callback\n    {\n        void exampleFragmentCallback();\n    }\n\n    private Button btnOne;\n    private Button btnTwo;\n    private Button btnThree;\n\n    private Callback callback;\n\n    @Override\n    public void onAttach(Activity activity)\n    {\n        super.onAttach(activity);\n        try\n        {\n            this.callback = (Callback) activity;\n        }\n        catch (ClassCastException e)\n        {\n            Log.e(this.getClass().getSimpleName(), \"Activity must implement Callback interface.\", e);\n            throw e;\n        }\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)\n    {\n        View rootView = inflater.inflate(R.layout.fragment_example, container, false);\n\n        btnOne = (Button) rootView.findViewById(R.id.example_button_one);\n        btnTwo = (Button) rootView.findViewById(R.id.example_button_two);\n        btnThree = (Button) rootView.findViewById(R.id.example_button_three);\n\n        btnOne.setOnClickListener(this);\n        btnTwo.setOnClickListener(this);\n        btnThree.setOnClickListener(this);\n        return rootView;\n    }\n\n    @Override\n    public void onClick(View v)\n    {\n        if (btnOne == v)\n        {\n            Toast.makeText(getActivity(), \"One.\", Toast.LENGTH_LONG).show();\n        }\n        else if (btnTwo == v)\n        {\n            Toast.makeText(getActivity(), \"Two.\", Toast.LENGTH_LONG).show();\n        }\n        else if (btnThree == v)\n        {\n            callback.exampleFragmentCallback();\n        }\n    }\n}\n</code></pre>\n\n<p>fragment_example.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\" &gt;\n\n        &lt;Button\n            android:id=\"@+id/example_button_one\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_alignParentTop=\"true\"\n            android:layout_centerHorizontal=\"true\"\n            android:layout_marginTop=\"30dp\"\n            android:text=\"@string/hello\" \n            android:layout_marginLeft=\"20dp\"\n            android:layout_marginRight=\"20dp\"/&gt;\n\n        &lt;Button\n            android:id=\"@+id/example_button_two\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_alignLeft=\"@+id/example_button_one\"\n            android:layout_alignRight=\"@+id/example_button_one\"\n            android:layout_below=\"@+id/example_button_one\"\n            android:layout_marginTop=\"30dp\"\n            android:text=\"@string/hello\" /&gt;\n\n        &lt;Button\n            android:id=\"@+id/example_button_three\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_alignLeft=\"@+id/example_button_two\"\n            android:layout_alignRight=\"@+id/example_button_two\"\n            android:layout_below=\"@+id/example_button_two\"\n            android:layout_marginTop=\"30dp\"\n            android:text=\"@string/hello\" /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>And that should be a valid example, it shows how you can use an Activity to display a Fragment, and handle events in that Fragment. And also how to communicate with the containing Activity.</p>\n", "title": "NullPointerException accessing views in onCreate()", "tags": ["java", "android", "android-fragments", "nullpointerexception"], "link": "http://stackoverflow.com/questions/23653778/nullpointerexception-accessing-views-in-oncreate/24527530#24527530", "question_id": 23653778, "answer_id": 24527530}, {"body": "<p>Try <strong><code>OnStart()</code></strong> method and just use </p>\n\n<pre><code>View view = getView().findViewById(R.id.something);\n</code></pre>\n\n<p>or Declare any View using <code>getView().findViewById</code> method in <strong><code>onStart()</code></strong> </p>\n\n<p>Declare click listener on view by <code>anyView.setOnClickListener(this);</code></p>\n", "title": "NullPointerException accessing views in onCreate()", "tags": ["java", "android", "android-fragments", "nullpointerexception"], "link": "http://stackoverflow.com/questions/23653778/nullpointerexception-accessing-views-in-oncreate/25564062#25564062", "question_id": 23653778, "answer_id": 25564062}, {"body": "<p>Add the following in your <strong>activity_main.xml</strong></p>\n\n<pre><code>&lt;fragment\n    android:id=\"@+id/myFragment\"\n    android:name=\"packagename.MainActivity$PlaceholderFragment\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\" &gt;\n&lt;/fragment&gt;\n</code></pre>\n", "title": "NullPointerException accessing views in onCreate()", "tags": ["java", "android", "android-fragments", "nullpointerexception"], "link": "http://stackoverflow.com/questions/23653778/nullpointerexception-accessing-views-in-oncreate/25736544#25736544", "question_id": 23653778, "answer_id": 25736544}, {"body": "<p>in the posted code above in the question there is a problem :\nyou are using R.layout.activity_main in oncreate method, but the xml files name is \"fragment_main.xml\" , means you are trying to get the view of fragment_main.xml file which is not being shown so it gives null pointer exception. change the code like :</p>\n\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.fragment_main);// your xml layout ,where the views are\n\n    View something = findViewById(R.id.something);\n    something.setOnClickListener(new View.OnClickListener() { ... }); // NPE HERE\n\n    if (savedInstanceState == null) {\n        getSupportFragmentManager().beginTransaction()\n                .add(R.id.container, new PlaceholderFragment()).commit();\n    }\n}\n</code></pre>\n", "title": "NullPointerException accessing views in onCreate()", "tags": ["java", "android", "android-fragments", "nullpointerexception"], "link": "http://stackoverflow.com/questions/23653778/nullpointerexception-accessing-views-in-oncreate/28760722#28760722", "question_id": 23653778, "answer_id": 28760722}, {"body": "<p>You are trying to access UI elements in the onCreate() but , it is too early to access them , since in fragment views can be created in onCreateView() method. \nAnd onActivityCreated() method is reliable to handle any actions on them, since activity is fully loaded in this state.</p>\n", "title": "NullPointerException accessing views in onCreate()", "tags": ["java", "android", "android-fragments", "nullpointerexception"], "link": "http://stackoverflow.com/questions/23653778/nullpointerexception-accessing-views-in-oncreate/34421774#34421774", "question_id": 23653778, "answer_id": 34421774}, {"body": "<p>I've got the same NullPointerException initializing a listener after calling findViewById onCreate and onCreateView methods.</p>\n\n<p>But when I've used the <strong>onActivityCreated</strong>(Bundle savedInstanceState) {...} it works. So, I could access the GroupView and set my listener.</p>\n\n<p>I hope it be helpful.</p>\n", "title": "NullPointerException accessing views in onCreate()", "tags": ["java", "android", "android-fragments", "nullpointerexception"], "link": "http://stackoverflow.com/questions/23653778/nullpointerexception-accessing-views-in-oncreate/35636809#35636809", "question_id": 23653778, "answer_id": 35636809}], "creation_date": 1400067883, "score": 73, "link": "http://stackoverflow.com/questions/23653778/nullpointerexception-accessing-views-in-oncreate", "question_id": 23653778}, {"body": "<p>I've been studying Java String for a while. The following questions are based on the below posts  </p>\n\n<p><a href=\"http://www.ntu.edu.sg/home/ehchua/programming/java/J3d_String.html\">Java String is special</a><br>\n<a href=\"http://stackoverflow.com/questions/1552301/immutability-of-strings-in-java\">Immutability of String in java</a>  </p>\n\n<ol>\n<li><p>Immutability: \nNow, going by the immutability, the String class has been designed so that the values in the <em>common pool</em> can be reused in other places/variables. This holds good if the <code>String</code> was created as  </p>\n\n<p><code>String a = \"Hello World!\";</code>\n However, if I create String like  </p>\n\n<p><code>String b = new String(\"Hello World!\");</code>\nwhy is this immutable as well? (or is it?). Since this has a dedicated heap memory, I should be able to modify this without affecting any other variable. So by design, was there any other reason why <code>String</code> as a whole is considered immutable? Or is my above assumption wrong?</p></li>\n<li><p>Second thing I wanted to ask was about the <em>common string pool</em>. If I create a string object as  </p>\n\n<p><code>String c = \"\";</code>\nis an empty entry created in the pool?</p></li>\n</ol>\n\n<p>Is there any post already on these? If so, could someone share the link?  </p>\n", "tags": ["java", "string", "immutability"], "title": "Is &quot;new String()&quot; immutable as well?", "answers": [{"body": "<p>The Java libraries are heavily optimized around the constraint that any <code>String</code> object is immutable, regardless of how that object is constructed. Even if you create your <code>b</code> using <code>new</code>, other code that you pass that instance to will treat the value as immutable. This is an example of the Value Object pattern, and all of the advantages (thread-safety, no need to make private copies) apply.</p>\n\n<p>The empty string <code>\"\"</code> is a legitimate <code>String</code> object just like anything else, it just happens to have no internal contents, and since all compile-time constant strings are interned, I'll virtually guarantee that some runtime library has already caused it to be added to the pool.</p>\n", "title": "Is &quot;new String()&quot; immutable as well?", "tags": ["java", "string", "immutability"], "link": "http://stackoverflow.com/questions/21375659/is-new-string-immutable-as-well/21375710#21375710", "question_id": 21375659, "answer_id": 21375710}, {"body": "<h2>String is immutable irrespective of how it is instantiated</h2>\n\n<p>1) Short answer is <em>yes</em>, <code>new String()</code> is immutable too. </p>\n\n<p>Because every possible <em>mutable operation</em> (like <code>replace</code>,<code>toLowerCase</code> etcetra) that you perform on <code>String</code> <em>does not affect the original</em> <code>String</code> instance and returns you a <em>new instance</em>.</p>\n\n<p>You may check this in Javadoc for <code>String</code>. Each <code>public</code> method of <code>String</code> that is exposed returns a new <code>String</code> instance and does not alter the present instance on which you called the method.</p>\n\n<p>This is very helpful in Multi-threaded environment as you don't have to think about mutability (<em>someone will change the value</em>) every time you pass or share the <code>String</code> around. <code>String</code> can easily be the most used data type, so the designers have blessed us all to not think about mutability everytime and saved us a lot of pain.</p>\n\n<h2>Immutability allowed String pool or caching</h2>\n\n<p>It is because of immutability property that the internal pool of string was possible, as when same String value is required at some other place then that immutable reference is returned. If <code>String</code> would have been mutable then it would not have been possible to share <code>String</code>s like this to save memory.</p>\n\n<p>String immutablity was not because of pooling, but immutability has more benefits attached to it.</p>\n\n<p>String interning or pooling is an example of <a href=\"http://en.wikipedia.org/wiki/Flyweight_pattern\">Flyweight Design pattern</a></p>\n\n<p>2) Yes it will be interned like any other <code>String</code> as a blank <code>String</code> is also as much a <code>String</code> as other <code>String</code> instances.</p>\n\n<p>References:</p>\n\n<ul>\n<li><a href=\"http://javarevisited.blogspot.in/2010/10/why-string-is-immutable-in-java.html\">Immutability benefits of String</a></li>\n</ul>\n", "title": "Is &quot;new String()&quot; immutable as well?", "tags": ["java", "string", "immutability"], "link": "http://stackoverflow.com/questions/21375659/is-new-string-immutable-as-well/21375716#21375716", "question_id": 21375659, "answer_id": 21375716}, {"body": "<p><code>new String()</code> is an expression that produces a <code>String</code> ... and a <code>String</code> is immutable, no matter how it is produced.</p>\n\n<p><sup>(Asking if <code>new String()</code> is mutable or not is nonsensical.  It is program code, not a value.  But I take it that that is not what you really meant.)</sup></p>\n\n<hr>\n\n<blockquote>\n  <p>If I create a string object as <code>String c = \"\";</code> is an empty entry created in the pool?</p>\n</blockquote>\n\n<p>Yes; that is, an entry is created for the empty string. There is nothing special about an empty <code>String</code>.</p>\n\n<p><sup>(To be pedantic, the pool entry for <code>\"\"</code> gets created long before your code is executed.  In fact, it is created when your code is loaded ... or possibly even earlier than that.)</sup></p>\n\n<hr>\n\n<blockquote>\n  <p>So, I was wanted to know whether the new heap object is immutable as well, ...</p>\n</blockquote>\n\n<p>Yes it is.  But the immutability is a fundamental property of String objects.  All <code>String</code> objects.</p>\n\n<p>You see, the <code>String</code> API simply does not provide <em>any</em> methods for changing a <code>String</code>.  So (apart from some dangerous and foolish<sup>1</sup> tricks using reflection), you can't mutate a <code>String</code>.</p>\n\n<blockquote>\n  <p>and if so what was the purpose?. </p>\n</blockquote>\n\n<p>The reason that Java <code>String</code> is designed as an immutable class is simplicity.  It makes it easier to write correct programs, and read / reason about other people's code if the core string class provides an immutable interface.  (Or at least, that is the rationale for this design decision, as I understand it.)</p>\n\n<blockquote>\n  <p>Going by the answer, I gather that other references to the same variable is one of the reasons. Please let me know if I am right in understanding this.</p>\n</blockquote>\n\n<p>No.  It is more fundamental than that.  Simply, all <code>String</code> objects are immutable.  There is no complicated special case reasoning required to understand this.  It just >>is&lt;&lt;.</p>\n\n<p>For the record, if you want a mutable \"string-like\" object in Java, you can use <code>StringBuilder</code> or <code>StringBuffer</code>.  But these are different types to String.</p>\n\n<hr>\n\n<p><sup>1 - The reason these tricks are (IMO) dangerous and foolish is that they affect the values of strings that are potentially shared by other parts of your application via the string pool.  This can cause chaos ... in ways that the next guy maintaining your code has little chance of tracking down.</sup></p>\n", "title": "Is &quot;new String()&quot; immutable as well?", "tags": ["java", "string", "immutability"], "link": "http://stackoverflow.com/questions/21375659/is-new-string-immutable-as-well/21375718#21375718", "question_id": 21375659, "answer_id": 21375718}, {"body": "<p>1) The immutable part isn't <em>because</em> of the pool; it just makes the pool possible in the first place. Strings are often passed as arguments to other functions or even shared with other threads; Making Strings immutable was a design decision to make reasoning in such situations easier. So <em>yes</em> - <code>String</code>s in Java are always immutable, no matter how you create them (note that it's possible to have mutable strings in java - just not with the <code>String</code> class).</p>\n\n<p>2) Yes. Probably. I'm not actually 100% sure, but that should be the case.</p>\n", "title": "Is &quot;new String()&quot; immutable as well?", "tags": ["java", "string", "immutability"], "link": "http://stackoverflow.com/questions/21375659/is-new-string-immutable-as-well/21375728#21375728", "question_id": 21375659, "answer_id": 21375728}, {"body": "<p>String is immutable means that you cannot change the object itself no matter how you created it.And as for the second question: yes it will create an entry.</p>\n", "title": "Is &quot;new String()&quot; immutable as well?", "tags": ["java", "string", "immutability"], "link": "http://stackoverflow.com/questions/21375659/is-new-string-immutable-as-well/21375735#21375735", "question_id": 21375659, "answer_id": 21375735}, {"body": "<p>From the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html\" rel=\"nofollow\">Java Oracle documentation</a>:</p>\n\n<blockquote>\n  <p>Strings are constant; <strong>their values cannot be changed after they are\n  created</strong>. </p>\n</blockquote>\n\n<p>And again:</p>\n\n<blockquote>\n  <p>String buffers support mutable strings. Because String\n  objects are immutable they can be shared.</p>\n</blockquote>\n\n<p>Generally speaking: \"all primitive\" (or related) object are immutable (please, accept my lack of formalism).</p>\n\n<p>Related post on Stack&nbsp;Overflow:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/1552301/immutability-of-strings-in-java\">Immutability of Strings in Java</a></li>\n<li><a href=\"http://stackoverflow.com/questions/18634966/is-java-string-immutable?lq=1\">Is Java String immutable?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/40480/is-java-pass-by-reference?lq=1\">Is Java &quot;pass-by-reference&quot;?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/20945049/is-a-java-string-really-immutable?lq=1\">Is a Java string really immutable?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/8798403/string-is-immutable-what-exactly-is-the-meaning\">String is immutable. What exactly is the meaning?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/16828237/what-the-reason-behind-making-string-immutable-in-java?lq=1\">what the reason behind making string immutable in java?</a></li>\n</ul>\n\n<p><strong>About the object pool</strong>: object pool is a java optimization which is NOT related to immutable as well.</p>\n", "title": "Is &quot;new String()&quot; immutable as well?", "tags": ["java", "string", "immutability"], "link": "http://stackoverflow.com/questions/21375659/is-new-string-immutable-as-well/21375809#21375809", "question_id": 21375659, "answer_id": 21375809}, {"body": "<p>This isn't strictly an answer to your question, but if behind your question is a wish to have mutable strings that you can manipulate, you should check out the <code>StringBuilder</code> class, which implements many of the exact same methods that <code>String</code> has but also adds methods to change the current contents.</p>\n\n<p>Once you've built your string in such a way that you're content with it, you simply call <code>toString()</code> on it in order to convert it to an ordinary <code>String</code> that you can pass to library routines and other functions that only take <code>String</code>s.</p>\n\n<p>Also, both <code>StringBuilder</code> and <code>String</code> implements the <code>CharSequence</code> interface, so if you want to write functions in your own code that can use both mutable and immutable strings, you can declare them to take any <code>CharSequence</code> object.</p>\n", "title": "Is &quot;new String()&quot; immutable as well?", "tags": ["java", "string", "immutability"], "link": "http://stackoverflow.com/questions/21375659/is-new-string-immutable-as-well/21375818#21375818", "question_id": 21375659, "answer_id": 21375818}, {"body": "<p>1) Immutability: String will be immutable if you create it using new or other way for security reasons</p>\n\n<p>2) Yes there will be a empty entry in the string pool.</p>\n\n<p>You can better understand the concept using the code</p>\n\n<pre><code>    String s1 = new String(\"Test\");\n    String s2 = new String(\"Test\");\n    String s3 = \"Test\";\n    String s4 = \"Test\";\n\n    System.out.println(s1==s2);//false\n    System.out.println(s1==s3);//false\n    System.out.println(s2==s3);//false\n    System.out.println(s4==s3);//true\n</code></pre>\n\n<p>Hope this will help your query. You can always check the source code for String class in case of better understanding Link : <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java\" rel=\"nofollow\">http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java</a></p>\n", "title": "Is &quot;new String()&quot; immutable as well?", "tags": ["java", "string", "immutability"], "link": "http://stackoverflow.com/questions/21375659/is-new-string-immutable-as-well/21376210#21376210", "question_id": 21375659, "answer_id": 21376210}, {"body": "<p>1-<strong>String</strong> is <strong>immutable</strong>.See this:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/20945049/is-a-java-string-really-immutable\">Is a Java string really immutable?</a></p>\n\n<p>So you can create it with many way.</p>\n\n<p>2-Short answer: <strong>Yes</strong> will be empty.</p>\n", "title": "Is &quot;new String()&quot; immutable as well?", "tags": ["java", "string", "immutability"], "link": "http://stackoverflow.com/questions/21375659/is-new-string-immutable-as-well/21377671#21377671", "question_id": 21375659, "answer_id": 21377671}, {"body": "<p><strong>It's the other way around, actually.</strong></p>\n\n<blockquote>\n  <p><em>[...] the <code>String</code> class has been designed so that the values in the common pool can be reused in other places/variables.</em></p>\n</blockquote>\n\n<p>No, the <code>String</code> class is immutable so that you can safely reference an instance of it, without worrying about it being modified from another part of your program. This is why pooling is possible in the first place.</p>\n\n<p>So, consider this:</p>\n\n<pre><code>// this string literal is interned and referenced by 'a'\nString a = \"Hello World!\";\n\n// creates a new instance by copying characters from 'a'\nString b = new String(a);\n</code></pre>\n\n<p>Now, what happens if you simply create a reference to your newly created <code>b</code> variable?</p>\n\n<pre><code>// 'c' now points to the same instance as 'b'\nString c = b;\n</code></pre>\n\n<p>Imagine that you pass <code>c</code> (or, more specifically, the object it is referencing) to a method on a different thread, and continue working with the same instance on your main thread. And now imagine what would happen if strings were mutable.</p>\n\n<p><strong>Why is this the case anyway?</strong></p>\n\n<p>If nothing else, it's because immutable objects make multithreading much simpler, and usually even faster. If you share a mutable object (that would be any stateful object, with mutable private/public fields or properties) between different threads, you need to take special care to ensure synchronized access (mutexes, semaphores). Even with this, you need special care to ensure atomicity in all your operations. Multithreading is hard.</p>\n\n<p>Regarding the performance implications, note that quite often copying the entire string into a new instance, in order to change even a single character, is actually faster than inducing an expensive context switch due to synchronization constructs needed to ensure thread-safe access. And as you've mentioned, immutability also offers interning possibilities, which means it can actually help reduce memory usage.</p>\n\n<p>It's generally a pretty good idea to <a href=\"http://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html\" rel=\"nofollow\">make as much stuff immutable as your can</a>.</p>\n", "title": "Is &quot;new String()&quot; immutable as well?", "tags": ["java", "string", "immutability"], "link": "http://stackoverflow.com/questions/21375659/is-new-string-immutable-as-well/21377747#21377747", "question_id": 21375659, "answer_id": 21377747}, {"body": "<p>Strings created will always be immutable regardless of how they are created.</p>\n\n<p>Answers to your questions:</p>\n\n<ol>\n<li><p>The only difference is:<br>\nWhen string is created like -- <code>{String a = \"Hello World!\";}</code> then only <strong>one object</strong> gets created.<br>\nAnd when it is created like -- <code>{String b = new String(\"Hello World!\");}</code> then <strong>two objects</strong> get created. The first one, because you have used <strong>'new'</strong> keyword and the second one because of the <strong>String</strong> property.</p></li>\n<li><p>Yes, for sure. There will be an empty entry created in the pool.</p></li>\n</ol>\n", "title": "Is &quot;new String()&quot; immutable as well?", "tags": ["java", "string", "immutability"], "link": "http://stackoverflow.com/questions/21375659/is-new-string-immutable-as-well/21378321#21378321", "question_id": 21375659, "answer_id": 21378321}, {"body": "<p>String is immutable because it does not provide you with a mean to modify it. It is design to avoid any tampering (it is final, the underlying array is not supposed to be touched ...).</p>\n\n<p>Identically, Integer is immutable, because there is no way to modify it.</p>\n\n<p>It does not matter how you create it.</p>\n", "title": "Is &quot;new String()&quot; immutable as well?", "tags": ["java", "string", "immutability"], "link": "http://stackoverflow.com/questions/21375659/is-new-string-immutable-as-well/21390042#21390042", "question_id": 21375659, "answer_id": 21390042}, {"body": "<p>Immutability is not a feature of <code>new</code>, it is a feature of the class <code>String</code>. It has no mutator methods, so it immutable.</p>\n", "title": "Is &quot;new String()&quot; immutable as well?", "tags": ["java", "string", "immutability"], "link": "http://stackoverflow.com/questions/21375659/is-new-string-immutable-as-well/21390547#21390547", "question_id": 21375659, "answer_id": 21390547}, {"body": "<pre><code> String A = \"Test\"\n String B = \"Test\"\n</code></pre>\n\n<p>Now String <code>B called</code>\"Test\".toUpperCase()<code>which change the same object into</code>\"TEST\"<code>, so</code>A<code>will also be</code>\"TEST\"` which is not desirable.</p>\n", "title": "Is &quot;new String()&quot; immutable as well?", "tags": ["java", "string", "immutability"], "link": "http://stackoverflow.com/questions/21375659/is-new-string-immutable-as-well/22088695#22088695", "question_id": 21375659, "answer_id": 22088695}, {"body": "<p>Note that in your example, the reference is changed and not the object it refers to, i.e. <code>b</code> as a reference may be changed and refer to a new object. But that new object is immutable, which means its contents will not be changed \"after\" calling the constructor.</p>\n\n<p>You can change a string using <code>b=b+\"x\";</code> or <code>b=new String(b);</code>, and the content of variable <code>a</code> seem to change, but don't confuse immutability of a reference (here variable <code>b</code>) and the object it is referring to (think of pointers in C). The object that the reference is pointing to will remain unchanged after its creation.</p>\n\n<p>If you need to change a string by changing the contents of the object (instead of changing the reference), you can use <code>StringBuffer</code>, which is a mutable version of String.</p>\n", "title": "Is &quot;new String()&quot; immutable as well?", "tags": ["java", "string", "immutability"], "link": "http://stackoverflow.com/questions/21375659/is-new-string-immutable-as-well/28965709#28965709", "question_id": 21375659, "answer_id": 28965709}], "creation_date": 1390809756, "score": 71, "link": "http://stackoverflow.com/questions/21375659/is-new-string-immutable-as-well", "question_id": 21375659}, {"body": "<p>I can add streams or extra elements, like this:</p>\n\n<pre><code>Stream stream = Stream.concat(stream1, Stream.concat(stream2, Stream.of(element));\n</code></pre>\n\n<p>And I can add new stuff as I go, like this:</p>\n\n<pre><code>Stream stream = Stream.concat(\n                       Stream.concat(\n                              stream1.filter(x -&gt; x!=0), stream2)\n                              .filter(x -&gt; x!=1),\n                                  Stream.of(element))\n                                  .filter(x -&gt; x!=2);\n</code></pre>\n\n<p>But this is ugly, because <code>concat</code> is static. If <code>concat</code> were an instance method, the above examples would be much easier to read:</p>\n\n<pre><code> Stream stream = stream1.concat(stream2).concat(element);\n</code></pre>\n\n<p>And</p>\n\n<pre><code> Stream stream = stream1\n                 .filter(x -&gt; x!=0)\n                 .concat(stream2)\n                 .filter(x -&gt; x!=1)\n                 .concat(element)\n                 .filter(x -&gt; x!=2);\n</code></pre>\n\n<p>My question is:</p>\n\n<p>1) Is there any good reason why <code>concat</code> is static? Or is there some equivalent instance method I'm missing?</p>\n\n<p>2) In any case, is there a better way of doing this?</p>\n", "tags": ["java", "concat", "java-8", "java-stream"], "title": "Adding two Java 8 streams, or an extra element to a stream", "answers": [{"body": "<p>Unfortunately this answer is probably of little or no help whatsoever, but I did a forensics analysis of the Java Lambda Mailing list to see if I could find the cause of this design. This is what I found out.</p>\n\n<p><strong>In the beginning there was an instance method for Stream.concat(Stream)</strong></p>\n\n<p>In the mailing list I can clearly see the method was originally implemented as an instance method, as you can read in <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2012-September/005901.html\" rel=\"nofollow\">this thread</a> by Paul Sandoz, about the concat operation.</p>\n\n<p>In it they discuss the issues that could arise from those cases in which the stream could be infinite and what concatenation would mean in those cases, but I do not think that was the reason for the modification.</p>\n\n<p>You see in <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2012-November/006735.html\" rel=\"nofollow\">this other thread</a> that some early users of the JDK 8 questioned about the behavior of the concat instance method when used with null arguments.</p>\n\n<p>This <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2012-October/006250.html\" rel=\"nofollow\">other thread</a> reveals, though, that the design of the concat method was under discussion.</p>\n\n<p><strong>Refactored to Streams.concat(Stream,Stream)</strong></p>\n\n<p>But without any explanation, suddenly, the methods were changed to static methods, as you can see in <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2013-July/010660.html\" rel=\"nofollow\">this thread about combining streams</a>. This is perhaps the only mail thread that sheds a bit of light about this change, but it was not clear enough for me to determine the reason for the refactoring. But we can see they <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2012-November/006887.html\" rel=\"nofollow\">did a commit</a> in which they suggested to move the <code>concat</code> method out of <code>Stream</code> and into the helper class <code>Streams</code>. </p>\n\n<p><strong>Refactored to Stream.concat(Stream,Stream)</strong></p>\n\n<p>Later, <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2013-June/010249.html\" rel=\"nofollow\">it was moved again</a> from <code>Streams</code> to <code>Stream</code>, but yet again, no explanation for that.</p>\n\n<p>So, bottom line, the reason for the design is not entirely clear for me and I could not find a good explanation. I guess you could still ask the question in the mailing list.</p>\n\n<p><strong>Some Alternatives for Stream Concatenation</strong></p>\n\n<p>This <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2013-July/010647.html\" rel=\"nofollow\">other thread by Michael Hixson</a> discusses/asks about other ways to combine/concat streams</p>\n\n<blockquote>\n  <ol>\n  <li><p>To combine two streams, I should do this:</p>\n\n<pre><code>Stream.concat(s1, s2)\n</code></pre>\n  \n  <p>not this:</p>\n\n<pre><code>Stream.of(s1, s2).flatMap(x -&gt; x)\n</code></pre>\n  \n  <p>... right?</p></li>\n  <li><p>To combine more than two streams, I should do this:</p>\n\n<pre><code>Stream.of(s1, s2, s3, ...).flatMap(x -&gt; x)\n</code></pre>\n  \n  <p>not this:</p>\n\n<pre><code>Stream.of(s1, s2, s3, ...).reduce(Stream.empty(), Stream::concat)\n</code></pre>\n  \n  <p>... right?</p></li>\n  </ol>\n</blockquote>\n", "title": "Adding two Java 8 streams, or an extra element to a stream", "tags": ["java", "concat", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22740464/adding-two-java-8-streams-or-an-extra-element-to-a-stream/22741520#22741520", "question_id": 22740464, "answer_id": 22741520}, {"body": "<p>If you add <em>static imports</em> for <em>Stream.concat</em> and <em>Stream.of</em>, the first example could be written as follows:</p>\n\n<pre><code>Stream&lt;Foo&gt; stream = concat(stream1, concat(stream2, of(element)));\n</code></pre>\n\n<p>It's a bad idea to import <em>static methods</em> with names, that are used for different purposes. So it might be better to create your own <em>static methods</em> with more meaningful names. However, for demonstration I will stick with this name.</p>\n\n<pre><code>public static &lt;T&gt; Stream&lt;T&gt; concat(Stream&lt;? extends T&gt; lhs, Stream&lt;? extends T&gt; rhs) {\n    return Stream.concat(lhs, rhs);\n}\npublic static &lt;T&gt; Stream&lt;T&gt; concat(Stream&lt;? extends T&gt; lhs, T rhs) {\n    return Stream.concat(lhs, Stream.of(rhs));\n}\n</code></pre>\n\n<p>With these to static methods (optionally in combination with static imports), the two examples could be written as follows:</p>\n\n<pre><code>Stream&lt;Foo&gt; stream = concat(stream1, concat(stream2, element));\n\nStream&lt;Foo&gt; stream = concat(\n                         concat(stream1.filter(x -&gt; x!=0), stream2).filter(x -&gt; x!=1),\n                         element)\n                     .filter(x -&gt; x!=2);\n</code></pre>\n\n<p>The code is now significantly shorter. However, I agree that the readability hasn't improved. So I have another solution.</p>\n\n<hr>\n\n<p>In a lot of situations, <em>Collectors</em> can be used to <em>extend</em> the functionality of streams. With the two <em>Collectors</em> at the bottom, the two examples could be written as follows:</p>\n\n<pre><code>Stream&lt;Foo&gt; stream = stream1.collect(concat(stream2)).collect(concat(element));\n\nStream&lt;Foo&gt; stream = stream1\n                     .filter(x -&gt; x!=0)\n                     .collect(concat(stream2))\n                     .filter(x -&gt; x!=1)\n                     .collect(concat(element))\n                     .filter(x -&gt; x!=2);\n</code></pre>\n\n<p>The only difference between your desired syntax and the syntax above is, that you have to replace <em>concat(...)</em> with <em>collect(concat(...))</em>. The two static methods can be implemented as follows (optionally used in combination with static imports):</p>\n\n<pre><code>private static &lt;T,A,R,S&gt; Collector&lt;T,?,S&gt; combine(Collector&lt;T,A,R&gt; collector, Function&lt;? super R, ? extends S&gt; function) {\n    return Collector.of(\n        collector.supplier(),\n        collector.accumulator(),\n        collector.combiner(),\n        collector.finisher().andThen(function));\n}\npublic static &lt;T&gt; Collector&lt;T,?,Stream&lt;T&gt;&gt; concat(Stream&lt;? extends T&gt; other) {\n    return combine(Collectors.toList(),\n        list -&gt; Stream.concat(list.stream(), other));\n}\npublic static &lt;T&gt; Collector&lt;T,?,Stream&lt;T&gt;&gt; concat(T element) {\n    return concat(Stream.of(element));\n}\n</code></pre>\n\n<hr>\n\n<p>Of course there is a drawback with this solution that should be mentioned. <em>collect</em> is a final operation that consumes all elements of the stream. On top of that, the collector <em>concat</em> creates an intermediate <em>ArrayList</em> each time it is used in the chain. Both operations can have a significant impact on the behaviour of your program. However, if <em>readability</em> is more important than <em>performance</em>, it might still be a very helpful approach.</p>\n", "title": "Adding two Java 8 streams, or an extra element to a stream", "tags": ["java", "concat", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22740464/adding-two-java-8-streams-or-an-extra-element-to-a-stream/22741679#22741679", "question_id": 22740464, "answer_id": 22741679}, {"body": "<p>My <a href=\"https://github.com/amaembo/streamex\">StreamEx</a> library extends the functionality of Stream API. In particular it offers methods like <a href=\"http://amaembo.github.io/streamex/javadoc/javax/util/streamex/StreamEx.html#append-java.util.stream.Stream-\">append</a> and <a href=\"http://amaembo.github.io/streamex/javadoc/javax/util/streamex/StreamEx.html#prepend-java.util.stream.Stream-\">prepend</a> which solve this issue (internally they use <code>concat</code>). These methods can accept either another stream or collection or varargs array. Using my library your problem can be solved this way (note that <code>x != 0</code> look strange for non-primitive stream):</p>\n\n<pre><code>Stream&lt;Integer&gt; stream = StreamEx.of(stream1)\n             .filter(x -&gt; !x.equals(0))\n             .append(stream2)\n             .filter(x -&gt; !x.equals(1))\n             .append(element)\n             .filter(x -&gt; !x.equals(2));\n</code></pre>\n\n<p>By the way there's also a shortcut for your <code>filter</code> operation:</p>\n\n<pre><code>Stream&lt;Integer&gt; stream = StreamEx.of(stream1).without(0)\n                                 .append(stream2).without(1)\n                                 .append(element).without(2);\n</code></pre>\n", "title": "Adding two Java 8 streams, or an extra element to a stream", "tags": ["java", "concat", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22740464/adding-two-java-8-streams-or-an-extra-element-to-a-stream/31941880#31941880", "question_id": 22740464, "answer_id": 31941880}, {"body": "<p>Just do:</p>\n\n<pre><code>Stream.of(stream1, stream2, Stream.of(element)).flatMap(identity());\n</code></pre>\n\n<p>where <code>identity()</code> is a static import of <code>Function.identity()</code>.</p>\n\n<p>Concatenating multiple streams into one stream is the same as flattening a stream.</p>\n\n<p>However, unfortunately, for some reason there is no <code>flatten()</code> method on <code>Stream</code>, so you have to use <code>flatMap()</code> with the identity function.</p>\n", "title": "Adding two Java 8 streams, or an extra element to a stream", "tags": ["java", "concat", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22740464/adding-two-java-8-streams-or-an-extra-element-to-a-stream/37436520#37436520", "question_id": 22740464, "answer_id": 37436520}], "creation_date": 1396155781, "score": 71, "link": "http://stackoverflow.com/questions/22740464/adding-two-java-8-streams-or-an-extra-element-to-a-stream", "question_id": 22740464}, {"body": "<p>Following the question <a href=\"http://stackoverflow.com/q/19414734/2083523\">Understanding Spring @Autowired usage</a> I wanted to create a complete knowledge base for the other option of spring wiring, the <code>@Configuration</code> class.</p>\n\n<p>Let's assume I have a spring XML file that looks like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\"&gt;\n\n  &lt;import resource=\"another-application-context.xml\"/&gt;\n\n  &lt;bean id=\"someBean\" class=\"stack.overflow.spring.configuration.SomeClassImpl\"&gt;\n    &lt;constructor-arg value=\"${some.interesting.property}\" /&gt;\n  &lt;/bean&gt;\n\n  &lt;bean id=\"anotherBean\" class=\"stack.overflow.spring.configuration.AnotherClassImpl\"&gt;\n    &lt;constructor-arg ref=\"someBean\"/&gt;\n    &lt;constructor-arg ref=\"beanFromSomewhereElse\"/&gt;\n  &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>How can I use <code>@Configuration</code> instead? Does it have any affect on the code itself?</p>\n", "tags": ["java", "spring", "configuration", "autowired"], "title": "Converting spring XML file to spring @Configuration class", "answers": [{"body": "<p>(Disclaimer - this answer is based on my <a href=\"http://avietzioni.blogspot.co.il/2014/05/so-long-spring-xmls-configuration-class.html\">blog post</a>)</p>\n\n<h2>Migrating XML to <code>@Configuration</code></h2>\n\n<p>It is possible to migrate the xml to a <code>@Configuration</code> in a few steps:</p>\n\n<ol>\n<li><p>Create a <code>@Configuration</code> annotated class:</p>\n\n<pre><code>@Configuration\npublic class MyApplicationContext {\n\n}\n</code></pre></li>\n<li><p>For each <code>&lt;bean&gt;</code> tag create a method annotated with <code>@Bean</code>:</p>\n\n<pre><code>@Configuration\npublic class MyApplicationContext {\n\n  @Bean(name = \"someBean\")\n  public SomeClass getSomeClass() {\n    return new SomeClassImpl(someInterestingProperty); // We still need to inject someInterestingProperty\n  }\n\n  @Bean(name = \"anotherBean\")\n  public AnotherClass getAnotherClass() {\n    return new AnotherClassImpl(getSomeClass(), beanFromSomewhereElse); // We still need to inject beanFromSomewhereElse\n  }\n}\n</code></pre></li>\n<li><p>In order to import <code>beanFromSomewhereElse</code> we need to import it's definition. It can be defined in an XML and the we'll use <code>@ImportResource</code>:</p>\n\n<pre><code>@ImportResource(\"another-application-context.xml\")\n@Configuration\npublic class MyApplicationContext {\n  ...  \n}\n</code></pre>\n\n<p>If the bean is defined in another <code>@Configuration</code> class we can use the <code>@Import</code> annotation:</p>\n\n<pre><code>@Import(OtherConfiguration.class)\n@Configuration\npublic class MyApplicationContext {\n  ...\n}\n</code></pre></li>\n<li><p>After we imported other XMLs or <code>@Configuration</code> classes, we can use the beans they declare in our context by declaring a private member to the <code>@Configuration</code> class as follows:</p>\n\n<pre><code>@Autowired\n@Qualifier(value = \"beanFromSomewhereElse\")\nprivate final StrangeBean beanFromSomewhereElse;\n</code></pre>\n\n<p>Or use it directly as parameter in the method which defines the bean that depends on this <code>beanFromSomewhereElse</code> using <code>@Qualifier</code> as follows:</p>\n\n<pre><code>@Bean(name = \"anotherBean\")\npublic AnotherClass getAnotherClass(@Qualifier (value = \"beanFromSomewhereElse\") final StrangeBean beanFromSomewhereElse) {\n  return new AnotherClassImpl(getSomeClass(), beanFromSomewhereElse);\n}\n</code></pre></li>\n<li><p>Importing properties is very similar to importing bean from another xml or <code>@Configuration</code> class. Instead of using <code>@Qualifier</code> we'll use <code>@Value</code> with properties as follows:</p>\n\n<pre><code>@Autowired\n@Value(\"${some.interesting.property}\")\nprivate final String someInterestingProperty;\n</code></pre>\n\n<p>This can be used with <strong>SpEL</strong> expressions as well.</p></li>\n<li><p>In order to allow spring to treat such classes as beans containers we need to mark this in our main xml by putting this tag in the context: </p>\n\n<pre><code>&lt;context:annotation-config/&gt;\n</code></pre>\n\n<p>You can now import <code>@Configuration</code> classes exactly the same as you would create a simple bean:</p>\n\n<pre><code>&lt;bean class=\"some.package.MyApplicationContext\"/&gt;\n</code></pre>\n\n<p>There are ways to avoid spring XMLs altogether but they are not in the scope of this answer. You can find out one of these options in my <a href=\"http://avietzioni.blogspot.co.il/2014/05/so-long-spring-xmls-configuration-class.html\">blog post</a> on which I'm basing my answer.</p></li>\n</ol>\n\n<hr>\n\n<h2>The advantages and disadvantages of using this method</h2>\n\n<p>Basically I find this method of declaring beans much more comfortable than using XMLs due to a few advantages I see:</p>\n\n<ol>\n<li><strong>Typos</strong> - <code>@Configuration</code> classes are compiled and typos just won't allow compilations</li>\n<li><strong>Fail fast (compile time)</strong> - If you forget to inject a bean you'll fail on compile time and not on run-time as with XMLs</li>\n<li><strong>Easier to navigate in IDE</strong> - between constructors of beans to understand the dependency tree.</li>\n<li><strong>Possible to easily debug configuration startup</strong></li>\n</ol>\n\n<p>The disadvantages are not many as I see them but there are a few which I could think of:</p>\n\n<ol>\n<li><strong>Abuse</strong> - Code is easier to abuse than XMLs</li>\n<li>With XMLs you can defined dependencies based on classes that are not available during compile time but are provided during run-time. With <code>@Configuration</code> classes you must have the classes available at compile time. Usually that's not an issue, but there are cases it may be.</li>\n</ol>\n\n<p>Bottom line: It is perfectly fine to combine XMLs, <code>@Configuration</code> and <a href=\"http://stackoverflow.com/q/19414734/2083523\">annotations</a> in your application context. Spring doesn't care about the method a bean was declared with.</p>\n", "title": "Converting spring XML file to spring @Configuration class", "tags": ["java", "spring", "configuration", "autowired"], "link": "http://stackoverflow.com/questions/24014919/converting-spring-xml-file-to-spring-configuration-class/24014920#24014920", "question_id": 24014919, "answer_id": 24014920}], "creation_date": 1401797578, "score": 71, "link": "http://stackoverflow.com/questions/24014919/converting-spring-xml-file-to-spring-configuration-class", "question_id": 24014919}, {"body": "<p>While investigating for a <a href=\"http://stackoverflow.com/q/23748186/507519\">little debate</a> w.r.t. using <code>\"\" + n</code> and <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#toString%28int%29\"><code>Integer.toString(int)</code></a> to convert an integer primitive to a string I wrote this <a href=\"http://openjdk.java.net/projects/code-tools/jmh/\">JMH</a> microbenchmark:</p>\n\n<pre><code>@Fork(1)\n@OutputTimeUnit(TimeUnit.MILLISECONDS)\n@State(Scope.Benchmark)\npublic class IntStr {\n    protected int counter;\n\n\n    @GenerateMicroBenchmark\n    public String integerToString() {\n        return Integer.toString(this.counter++);\n    }\n\n    @GenerateMicroBenchmark\n    public String stringBuilder0() {\n        return new StringBuilder().append(this.counter++).toString();\n    }\n\n    @GenerateMicroBenchmark\n    public String stringBuilder1() {\n        return new StringBuilder().append(\"\").append(this.counter++).toString();\n    }\n\n    @GenerateMicroBenchmark\n    public String stringBuilder2() {\n        return new StringBuilder().append(\"\").append(Integer.toString(this.counter++)).toString();\n    }\n\n    @GenerateMicroBenchmark\n    public String stringFormat() {\n        return String.format(\"%d\", this.counter++);\n    }\n\n    @Setup(Level.Iteration)\n    public void prepareIteration() {\n        this.counter = 0;\n    }\n}\n</code></pre>\n\n<p>I ran it with the default JMH options with both Java VMs that exist on my Linux machine (up-to-date Mageia 4 64-bit, Intel i7-3770 CPU, 32GB RAM). The first JVM was the one supplied with Oracle JDK\n8u5 64-bit:</p>\n\n<pre><code>java version \"1.8.0_05\"\nJava(TM) SE Runtime Environment (build 1.8.0_05-b13)\nJava HotSpot(TM) 64-Bit Server VM (build 25.5-b02, mixed mode)\n</code></pre>\n\n<p>With this JVM I got pretty much what I expected:</p>\n\n<pre><code>Benchmark                    Mode   Samples         Mean   Mean error    Units\nb.IntStr.integerToString    thrpt        20    32317.048      698.703   ops/ms\nb.IntStr.stringBuilder0     thrpt        20    28129.499      421.520   ops/ms\nb.IntStr.stringBuilder1     thrpt        20    28106.692     1117.958   ops/ms\nb.IntStr.stringBuilder2     thrpt        20    20066.939     1052.937   ops/ms\nb.IntStr.stringFormat       thrpt        20     2346.452       37.422   ops/ms\n</code></pre>\n\n<p>I.e. using the <code>StringBuilder</code> class is slower due to the additional overhead of creating the <code>StringBuilder</code> object and appending an empty string. Using <code>String.format(String, ...)</code> is even slower, by an order of magnitude or so.</p>\n\n<p>The distribution-provided compiler, on the other hand, is based on OpenJDK 1.7:</p>\n\n<pre><code>java version \"1.7.0_55\"\nOpenJDK Runtime Environment (mageia-2.4.7.1.mga4-x86_64 u55-b13)\nOpenJDK 64-Bit Server VM (build 24.51-b03, mixed mode)\n</code></pre>\n\n<p>The results here were <em>interesting</em>:</p>\n\n<pre><code>Benchmark                    Mode   Samples         Mean   Mean error    Units\nb.IntStr.integerToString    thrpt        20    31249.306      881.125   ops/ms\nb.IntStr.stringBuilder0     thrpt        20    39486.857      663.766   ops/ms\nb.IntStr.stringBuilder1     thrpt        20    41072.058      484.353   ops/ms\nb.IntStr.stringBuilder2     thrpt        20    20513.913      466.130   ops/ms\nb.IntStr.stringFormat       thrpt        20     2068.471       44.964   ops/ms\n</code></pre>\n\n<p>Why does <code>StringBuilder.append(int)</code> appear so much faster with this JVM? Looking at the <code>StringBuilder</code> class source code revealed nothing particularly interesting - the method in question is almost identical to <code>Integer#toString(int)</code>. Interestingly enough, appending the result of <code>Integer.toString(int)</code> (the <code>stringBuilder2</code> microbenchmark) does not appear to be faster.</p>\n\n<p>Is this performance discrepancy an issue with the testing harness? Or does my OpenJDK JVM contain optimizations that would affect this particular code (anti)-pattern?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>For a more straight-forward comparison, I installed Oracle JDK 1.7u55:</p>\n\n<pre><code>java version \"1.7.0_55\"\nJava(TM) SE Runtime Environment (build 1.7.0_55-b13)\nJava HotSpot(TM) 64-Bit Server VM (build 24.55-b03, mixed mode)\n</code></pre>\n\n<p>The results are similar to those of OpenJDK:</p>\n\n<pre><code>Benchmark                    Mode   Samples         Mean   Mean error    Units\nb.IntStr.integerToString    thrpt        20    32502.493      501.928   ops/ms\nb.IntStr.stringBuilder0     thrpt        20    39592.174      428.967   ops/ms\nb.IntStr.stringBuilder1     thrpt        20    40978.633      544.236   ops/ms\n</code></pre>\n\n<p>It seems that this is a more general Java 7 vs Java 8 issue. Perhaps Java 7 had more aggressive string optimizations?</p>\n\n<p><strong>EDIT 2</strong>:</p>\n\n<p>For completeness, here are the string-related VM options for both of these JVMs:</p>\n\n<p>For Oracle JDK 8u5:</p>\n\n<pre><code>$ /usr/java/default/bin/java -XX:+PrintFlagsFinal 2&gt;/dev/null | grep String\n     bool OptimizeStringConcat                      = true            {C2 product}\n     intx PerfMaxStringConstLength                  = 1024            {product}\n     bool PrintStringTableStatistics                = false           {product}\n    uintx StringTableSize                           = 60013           {product}\n</code></pre>\n\n<p>For OpenJDK 1.7:</p>\n\n<pre><code>$ java -XX:+PrintFlagsFinal 2&gt;/dev/null | grep String\n     bool OptimizeStringConcat                      = true            {C2 product}        \n     intx PerfMaxStringConstLength                  = 1024            {product}           \n     bool PrintStringTableStatistics                = false           {product}           \n    uintx StringTableSize                           = 60013           {product}           \n     bool UseStringCache                            = false           {product}   \n</code></pre>\n\n<p>The <code>UseStringCache</code> option was removed in Java 8 with no replacement, so I doubt that makes any difference. The rest of the options appear to have the same settings.</p>\n\n<p><strong>EDIT 3:</strong></p>\n\n<p>A side-by-side comparison of the source code of the <code>AbstractStringBuilder</code>, <code>StringBuilder</code> and <code>Integer</code> classes from the <code>src.zip</code> file of reveals nothing noteworty. Apart from a whole lot of cosmetic and documentation changes, <code>Integer</code> now has some support for unsigned integers and <code>StringBuilder</code> has been slightly refactored to share more code with <code>StringBuffer</code>. None of these changes seem to affect the code paths used by <code>StringBuilder#append(int)</code>, although I may have missed something.</p>\n\n<p>A comparison of the assembly code generated for <code>IntStr#integerToString()</code> and <code>IntStr#stringBuilder0()</code> is far more interesting. The basic layout of the code generated for <code>IntStr#integerToString()</code> was similar for both JVMs, although Oracle JDK 8u5 seemed to be more aggressive w.r.t. inlining some calls within the <code>Integer#toString(int)</code> code. There was a clear correspondence with the Java source code, even for someone with minimal assembly experience.</p>\n\n<p>The assembly code for <code>IntStr#stringBuilder0()</code>, however, was radically different. The code generated by Oracle JDK 8u5 was once again directly related to the Java source code - I could easily recognise the same layout. On the contrary, the code generated by OpenJDK 7 was almost unrecognisable to the untrained eye (like mine). The <code>new StringBuilder()</code> call was seemingly removed, as was the creation of the array in the <code>StringBuilder</code> constructor. Additionaly, the disassembler plugin was not able to provide as many references to the source code as it did in JDK 8.</p>\n\n<p>I assume that this is either the result of a much more aggressive optimization pass in OpenJDK 7, or more probably the result of inserting hand-written low-level code for certain <code>StringBuilder</code> operations. I am unsure why this optimization does not happen in my JVM 8 implementation or why the same optimizations were not implemented for <code>Integer#toString(int)</code> in JVM 7. I guess someone familiar with the related parts of the JRE source code would have to answer these questions...</p>\n", "tags": ["java", "performance", "java-7", "java-8", "jmh"], "title": "Why is StringBuilder#append(int) faster in Java 7 than in Java 8?", "answers": [{"body": "<p>I think this has to do with the <code>CompileThreshold</code> flag which controls when the byte code is compiled into machine code by JIT. </p>\n\n<p>The Oracle JDK has a default count of 10,000 as document at <a href=\"http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html\">http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html</a>.</p>\n\n<p>Where OpenJDK I couldn't find a latest document on this flag; but some mail threads suggest a much lower threshold: <a href=\"http://mail.openjdk.java.net/pipermail/hotspot-compiler-dev/2010-November/004239.html\">http://mail.openjdk.java.net/pipermail/hotspot-compiler-dev/2010-November/004239.html</a></p>\n\n<p>Also, try turn on / off the Oracle JDK flags like <code>-XX:+UseCompressedStrings</code> and <code>-XX:+OptimizeStringConcat</code>. I am not sure if those flags are turned on by default on OpenJDK though. Could someone please suggest.</p>\n\n<p>One experiement you can do, is to firstly run the program by a lot of times, say, 30,000 loops, do a System.gc() and then try to look at the performance. I believe they would yield the same.</p>\n\n<p>And I assume your GC setting is the same too. Otherwise you are allocating a lot of objects and the GC might well be the major part of your run time.</p>\n", "title": "Why is StringBuilder#append(int) faster in Java 7 than in Java 8?", "tags": ["java", "performance", "java-7", "java-8", "jmh"], "link": "http://stackoverflow.com/questions/23756966/why-is-stringbuilderappendint-faster-in-java-7-than-in-java-8/23757454#23757454", "question_id": 23756966, "answer_id": 23757454}, {"body": "<p><strong>TL;DR:</strong> Side effects in <code>append</code> apparently break StringConcat optimizations.</p>\n\n<p>Very good analysis in the original question and updates! </p>\n\n<p>For completeness, below are a few missing steps:</p>\n\n<ul>\n<li><p>See through the <code>-XX:+PrintInlining</code> for both 7u55 and 8u5. In 7u55, you will see something like this:</p>\n\n<blockquote>\n<pre><code> @ 16   org.sample.IntStr::inlineSideEffect (25 bytes)   force inline by CompilerOracle\n   @ 4   java.lang.StringBuilder::&lt;init&gt; (7 bytes)   inline (hot)\n   @ 18   java.lang.StringBuilder::append (8 bytes)   already compiled into a big method\n   @ 21   java.lang.StringBuilder::toString (17 bytes)   inline (hot)\n</code></pre>\n</blockquote>\n\n<p>...and in 8u5: </p>\n\n<blockquote>\n<pre><code> @ 16   org.sample.IntStr::inlineSideEffect (25 bytes)   force inline by CompilerOracle\n   @ 4   java.lang.StringBuilder::&lt;init&gt; (7 bytes)   inline (hot)\n     @ 3   java.lang.AbstractStringBuilder::&lt;init&gt; (12 bytes)   inline (hot)\n       @ 1   java.lang.Object::&lt;init&gt; (1 bytes)   inline (hot)\n   @ 18   java.lang.StringBuilder::append (8 bytes)   inline (hot)\n     @ 2   java.lang.AbstractStringBuilder::append (62 bytes)   already compiled into a big method\n   @ 21   java.lang.StringBuilder::toString (17 bytes)   inline (hot)\n     @ 13   java.lang.String::&lt;init&gt; (62 bytes)   inline (hot)\n       @ 1   java.lang.Object::&lt;init&gt; (1 bytes)   inline (hot)\n       @ 55   java.util.Arrays::copyOfRange (63 bytes)   inline (hot)\n         @ 54   java.lang.Math::min (11 bytes)   (intrinsic)\n         @ 57   java.lang.System::arraycopy (0 bytes)   (intrinsic)\n</code></pre>\n</blockquote>\n\n<p>You might notice that 7u55 version is shallower, and it looks like nothing is called after <code>StringBuilder</code> methods -- this is a good indication the string optimizations are in effect. Indeed, if you run 7u55 with <code>-XX:-OptimizeStringConcat</code>, the subcalls will reappear, and performance drops to 8u5 levels.</p></li>\n<li><p>OK, so we need to figure out why 8u5 does not do the same optimization. Grep <a href=\"http://hg.openjdk.java.net/jdk9/jdk9/hotspot\">http://hg.openjdk.java.net/jdk9/jdk9/hotspot</a> for \"StringBuilder\" to figure out where VM handles the StringConcat optimization; this will get you into <code>src/share/vm/opto/stringopts.cpp</code></p></li>\n<li><p><code>hg log src/share/vm/opto/stringopts.cpp</code> to figure out the latest changes there. One of the candidates would be:</p>\n\n<blockquote>\n<pre><code>changeset:   5493:90abdd727e64\nuser:        iveresov\ndate:        Wed Oct 16 11:13:15 2013 -0700\nsummary:     8009303: Tiered: incorrect results in VM tests stringconcat...\n</code></pre>\n</blockquote></li>\n<li><p>Look for the review threads on OpenJDK mailing lists (easy enough to google for changeset summary): <a href=\"http://mail.openjdk.java.net/pipermail/hotspot-compiler-dev/2013-October/012084.html\">http://mail.openjdk.java.net/pipermail/hotspot-compiler-dev/2013-October/012084.html</a></p></li>\n<li><p>Spot \"String concat optimization optimization collapses the pattern [...] into a single allocation of a string and forming the result directly. All possible deopts that may happen in the optimized code restart this pattern from the beginning (starting from the StringBuffer allocation). <strong>That means that the whole pattern must me side-effect free.</strong>\" Eureka?</p></li>\n<li><p>Write out the contrasting benchmark:</p>\n\n<blockquote>\n<pre><code>@Fork(5)\n@Warmup(iterations = 5)\n@Measurement(iterations = 5)\n@BenchmarkMode(Mode.AverageTime)\n@OutputTimeUnit(TimeUnit.NANOSECONDS)\n@State(Scope.Benchmark)\npublic class IntStr {\n    private int counter;\n\n    @GenerateMicroBenchmark\n    public String inlineSideEffect() {\n        return new StringBuilder().append(counter++).toString();\n    }\n\n    @GenerateMicroBenchmark\n    public String spliceSideEffect() {\n        int cnt = counter++;\n        return new StringBuilder().append(cnt).toString();\n    }\n}\n</code></pre>\n</blockquote></li>\n<li><p>Measure it on JDK 7u55, seeing the same performance for inlined/spliced side effects:</p>\n\n<blockquote>\n<pre><code>Benchmark                       Mode   Samples         Mean   Mean error    Units\no.s.IntStr.inlineSideEffect     avgt        25       65.460        1.747    ns/op\no.s.IntStr.spliceSideEffect     avgt        25       64.414        1.323    ns/op\n</code></pre>\n</blockquote></li>\n<li><p>Measure it on JDK 8u5, seeing the performance degradation with the inlined effect:</p>\n\n<blockquote>\n<pre><code>Benchmark                       Mode   Samples         Mean   Mean error    Units\no.s.IntStr.inlineSideEffect     avgt        25       84.953        2.274    ns/op\no.s.IntStr.spliceSideEffect     avgt        25       65.386        1.194    ns/op\n</code></pre>\n</blockquote></li>\n<li><p>Submit the bug report (<a href=\"https://bugs.openjdk.java.net/browse/JDK-8043677\">https://bugs.openjdk.java.net/browse/JDK-8043677</a>) to discuss this behavior with VM guys. The rationale for original fix is rock solid, it is interesting however if we can/should get back this optimization in some trivial cases like these.</p></li>\n<li><p>???</p></li>\n<li><p>PROFIT.</p></li>\n</ul>\n\n<p>And yeah, I should post the results for the benchmark which moves the increment from the <code>StringBuilder</code> chain, doing it before the entire chain. Also, switched to average time, and ns/op. This is JDK 7u55:</p>\n\n<blockquote>\n<pre><code>Benchmark                      Mode   Samples         Mean   Mean error    Units\no.s.IntStr.integerToString     avgt        25      153.805        1.093    ns/op\no.s.IntStr.stringBuilder0      avgt        25      128.284        6.797    ns/op\no.s.IntStr.stringBuilder1      avgt        25      131.524        3.116    ns/op\no.s.IntStr.stringBuilder2      avgt        25      254.384        9.204    ns/op\no.s.IntStr.stringFormat        avgt        25     2302.501      103.032    ns/op\n</code></pre>\n</blockquote>\n\n<p>And this is 8u5:</p>\n\n<blockquote>\n<pre><code>Benchmark                      Mode   Samples         Mean   Mean error    Units\no.s.IntStr.integerToString     avgt        25      153.032        3.295    ns/op\no.s.IntStr.stringBuilder0      avgt        25      127.796        1.158    ns/op\no.s.IntStr.stringBuilder1      avgt        25      131.585        1.137    ns/op\no.s.IntStr.stringBuilder2      avgt        25      250.980        2.773    ns/op\no.s.IntStr.stringFormat        avgt        25     2123.706       25.105    ns/op\n</code></pre>\n</blockquote>\n\n<p><code>stringFormat</code> is actually a bit faster in 8u5, and all other tests are the same. This solidifies the hypothesis the side-effect breakage in SB chains in the major culprit in the original question.</p>\n", "title": "Why is StringBuilder#append(int) faster in Java 7 than in Java 8?", "tags": ["java", "performance", "java-7", "java-8", "jmh"], "link": "http://stackoverflow.com/questions/23756966/why-is-stringbuilderappendint-faster-in-java-7-than-in-java-8/23792043#23792043", "question_id": 23756966, "answer_id": 23792043}], "creation_date": 1400580831, "score": 71, "link": "http://stackoverflow.com/questions/23756966/why-is-stringbuilderappendint-faster-in-java-7-than-in-java-8", "question_id": 23756966}, {"body": "<p>In this question <a href=\"http://stackoverflow.com/questions/10699265/how-can-i-efficiently-select-a-standard-library-container-in-c11\">How can I efficiently select a Standard Library container in C++11?</a> is a handy flow chart to use when choosing C++ collections.</p>\n\n<p>I thought that this was a useful resource for people who are not sure which collection they should be using so I tried to find a similar flow chart for Java and was not able to do so.</p>\n\n<p>What resources and \"cheat sheets\" are available to help people choose the right Collection to use when programming in Java? How do people know what List, Set and Map implementations they should use?</p>\n", "tags": ["java", "algorithm", "arraylist", "collections", "hashmap"], "title": "What Java Collection should I use?", "answers": [{"body": "<p>Since I couldn't find a similar flowchart I decided to make one myself.</p>\n\n<p>This flow chart does not try and cover things like synchronized access, thread safety etc or the legacy collections, but it does cover the 3 standard <strong>Set</strong>s, 3 standard <strong>Map</strong>s and 2 standard <strong>List</strong>s.</p>\n\n<p><img src=\"http://i.stack.imgur.com/aSDsG.png\" alt=\"enter image description here\"></p>\n\n<p><sub>This image was created for this answer and is licensed under a <a href=\"http://creativecommons.org/licenses/by/4.0/\">Creative Commons Attribution 4.0 International License.</a> The simplest attribution is by linking to either this question or this answer.</sub></p>\n\n<p><strong>Other resources</strong></p>\n\n<p>The main other useful reference to people is probably the following page from the oracle documentation which describes each <a href=\"http://docs.oracle.com/javase/tutorial/collections/implementations/index.html\">Collection</a>.</p>\n\n<p><strong>HashSet vs TreeSet</strong></p>\n\n<p>There is a detailed discussion of when to use <code>HashSet</code> or <code>TreeSet</code> here:\n<a href=\"http://stackoverflow.com/questions/1463284/hashset-vs-treeset\">Hashset vs Treeset</a></p>\n\n<p><strong>ArrayList vs LinkedList</strong></p>\n\n<p>Detailed discussion: <a href=\"http://stackoverflow.com/questions/322715/when-to-use-linkedlist-over-arraylist\">When to use LinkedList over ArrayList?</a></p>\n", "title": "What Java Collection should I use?", "tags": ["java", "algorithm", "arraylist", "collections", "hashmap"], "link": "http://stackoverflow.com/questions/21974361/what-java-collection-should-i-use/21974362#21974362", "question_id": 21974361, "answer_id": 21974362}, {"body": "<p>Even simpler picture is here. Intentionally simplified!</p>\n\n<ol>\n<li><p><strong>Collection</strong> is anything holding data called \"elements\" (of the same type). Nothing more specific is assumed.</p></li>\n<li><p><strong>List</strong> is an <em>indexed</em> collection of data where each element has an index. Something like the array, but more flexible.</p>\n\n<p>Data in the list keep the order of insertion.</p></li>\n<li><p><strong>Set</strong> is a <em>bag of elements</em>, each elements just once (the elements are distinguished using their <code>equals()</code> method.</p>\n\n<p>Data in the set are stored mostly just to know <em>what</em> data are there.</p></li>\n<li><p><strong>Map</strong> is something like the List, but instead of accessing the elements by their integer index, you access them by their <em>key</em>, which is any object. Like the array in PHP :)</p>\n\n<p>Data in the map are searchable by their key.</p>\n\n<p>The main <em>difference between the Set and the Map</em> is that in the Set you <em>search</em> data <em>by themselves</em>, whilst in the map <em>by their key</em>.</p></li>\n</ol>\n", "title": "What Java Collection should I use?", "tags": ["java", "algorithm", "arraylist", "collections", "hashmap"], "link": "http://stackoverflow.com/questions/21974361/what-java-collection-should-i-use/23785269#23785269", "question_id": 21974361, "answer_id": 23785269}, {"body": "<p>It is simple: if you need to store values with keys mapped to them go for the Map interface, otherwise use List for values which may be duplicated and finally use the Set interface if you don\u2019t want duplicated values in your collection. </p>\n\n<p>Here is the complete explanation <a href=\"http://javatutorial.net/choose-the-right-java-collection\" rel=\"nofollow\">http://javatutorial.net/choose-the-right-java-collection</a> , including flowchart etc</p>\n", "title": "What Java Collection should I use?", "tags": ["java", "algorithm", "arraylist", "collections", "hashmap"], "link": "http://stackoverflow.com/questions/21974361/what-java-collection-should-i-use/26699133#26699133", "question_id": 21974361, "answer_id": 26699133}, {"body": "<h1>Summary of the major non-concurrent, non-synchronized collections</h1>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html\"><strong><code>Collection</code></strong></a>: An interface representing an unordered \"bag\" of items, called \"elements\". The \"next\" element is undefined (random).</p>\n\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Set.html\"><strong><code>Set</code></strong></a>: An interface representing a <code>Collection</code> with no duplicates.\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html\"><strong><code>HashSet</code></strong></a>: A <code>Set</code> backed by a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html\"><code>Hashtable</code></a>. Fastest and smallest memory usage, when ordering is unimportant.</li>\n<li><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html\"><strong><code>LinkedHashSet</code></strong></a>: A <code>HashSet</code> with the addition of a linked list to associate elements in <em>insertion order</em>. The \"next\" element is the next-most-recently inserted element.</li>\n<li><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html\"><strong><code>TreeSet</code></strong></a>: A <code>Set</code> where elements are ordered by a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html\"><code>Comparator</code></a> (typically <a href=\"http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html\">natural ordering</a>). Slowest and largest memory usage, but necessary for comparator-based ordering.</li>\n<li><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html\"><strong><code>EnumSet</code></strong></a>: An extremely fast and efficient <code>Set</code> customized for a single enum type.</li>\n</ul></li>\n<li><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/List.html\"><strong><code>List</code></strong></a>: An interface representing an <code>Collection</code> whose elements are ordered and each have a numeric index representing its position, where zero is the first element, and <code>(length - 1)</code> is the last.\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html\"><strong><code>ArrayList</code></strong></a>: A <code>List</code> backed by an array, where the array has a length (called \"capacity\") that is at least as large as the number of elements (the list's \"size\"). When size exceeds capacity (when the <code>(capacity + 1)-th</code> element is added), the array is recreated with a new capacity of <code>(new length * 1.5)</code>--this recreation is fast, since it uses <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy(java.lang.Object,%20int,%20java.lang.Object,%20int,%20int)\"><code>System.arrayCopy()</code></a>. Deleting and inserting/adding elements requires all neighboring elements (to the right) be shifted into or out of that space. Accessing any element is fast, as it only requires the calculation <code>(element-zero-address * desired-index * element-size)</code> to find it's location. <a href=\"http://stackoverflow.com/questions/322715/when-to-use-linkedlist-over-arraylist\">In most situations</a>, an <code>ArrayList</code> is preferred over a <code>LinkedList</code>.</li>\n<li><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html\"><strong><code>LinkedList</code></strong></a>: A <code>List</code> backed by a set of objects, each linked to its \"previous\" and \"next\" neighbors. A <code>LinkedList</code> is also a <code>Queue</code> and <code>Deque</code>. Accessing elements is done starting at the first or last element, and traversing until the desired index is reached. Insertion and deletion, <em>once the desired index is reached via traversal</em> is a trivial matter of re-mapping only the immediate-neighbor links to point to the new element or bypass the now-deleted element.</li>\n</ul></li>\n<li><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Map.html\"><strong><code>Map</code></strong></a>: An interface representing an <code>Collection</code> where each element has an identifying \"key\"--each element is a key-value pair.\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html\"><strong><code>HashMap</code></strong></a>: A <code>Map</code> where keys are unordered, and backed by a <code>Hashtable</code>.</li>\n<li><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/LinkedhashMap.html\"><strong><code>LinkedhashMap</code></strong></a>: Keys are ordered by <em>insertion order</em>.</li>\n<li><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html\"><strong><code>TreeMap</code></strong></a>: A <code>Map</code> where keys are ordered by a <code>Comparator</code> (typically natural ordering).</li>\n</ul></li>\n<li><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html\"><strong><code>Queue</code></strong></a>: An interface that represents a <code>Collection</code> where elements are, typically, added to one end, and removed from the other (FIFO: first-in, first-out).</li>\n<li><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Stack.html\"><strong><code>Stack</code></strong></a>: An interface that represents a <code>Collection</code> where elements are, typically, both added (pushed) and removed (popped) from the same end (LIFO: last-in, first-out).</li>\n<li><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Deque.html\"><strong><code>Deque</code></strong></a>: Pronounced \"deck\". A linked list that is typically only added to and read from either end (not the middle).</li>\n</ul>\n\n<p>Basic collection diagrams:</p>\n\n<p><img src=\"http://i.imgur.com/JLerzPu.jpg\" alt=\"diagram\"></p>\n\n<p>Comparing the insertion of an element with an <code>ArrayList</code> and <code>LinkedList</code>:</p>\n\n<p><img src=\"http://i.imgur.com/lpG6P0U.png\" alt=\"diagram\"></p>\n", "title": "What Java Collection should I use?", "tags": ["java", "algorithm", "arraylist", "collections", "hashmap"], "link": "http://stackoverflow.com/questions/21974361/what-java-collection-should-i-use/29067137#29067137", "question_id": 21974361, "answer_id": 29067137}], "creation_date": 1393188780, "score": 68, "link": "http://stackoverflow.com/questions/21974361/what-java-collection-should-i-use", "question_id": 21974361}, {"body": "<p>I'd like to use </p>\n\n<pre><code>java.util.Optional.orElseThrow()\n</code></pre>\n\n<p>with an Exception type that asks for a constructor parameter. Something like this:</p>\n\n<pre><code>orElseThrow(MyException::new(someArgument)) // obviously NOT working\n</code></pre>\n\n<p>Is there a way to create a Supplier that passes my argument value in?</p>\n", "tags": ["java", "java-8", "java-stream"], "title": "Java 8 method references: provide a Supplier capable of supplying a parameterized result", "answers": [{"body": "<p>Sure.  <code>orElseThrow(() -&gt; new MyException(someArgument))</code>.</p>\n", "title": "Java 8 method references: provide a Supplier capable of supplying a parameterized result", "tags": ["java", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22917138/java-8-method-references-provide-a-supplier-capable-of-supplying-a-parameterize/22917186#22917186", "question_id": 22917138, "answer_id": 22917186}, {"body": "<p>It appears that you can throw only RuntimeException from the method <code>orElseThrow</code>.  Otherwise you will get an error message like  <code>MyException cannot be converted to java.lang.RuntimeException</code></p>\n", "title": "Java 8 method references: provide a Supplier capable of supplying a parameterized result", "tags": ["java", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22917138/java-8-method-references-provide-a-supplier-capable-of-supplying-a-parameterize/28450253#28450253", "question_id": 22917138, "answer_id": 28450253}], "creation_date": 1396885665, "score": 66, "link": "http://stackoverflow.com/questions/22917138/java-8-method-references-provide-a-supplier-capable-of-supplying-a-parameterize", "question_id": 22917138}, {"body": "<p>I am playing around with lazy functional operations in Java SE 8, and I want to <code>map</code> an index <code>i</code> to a pair / tuple <code>(i, value[i])</code>, then <code>filter</code> based on the second <code>value[i]</code> element, and finally output just the indices.</p>\n\n<p>Must I still suffer this: <a href=\"http://stackoverflow.com/questions/156275/what-is-the-equivalent-of-the-c-pairl-r-in-java\">What is the equivalent of the C++ Pair&lt;L,R&gt; in Java?</a> in the bold new era of lambdas and streams?</p>\n\n<p><strong>Update:</strong> I presented a rather simplified example, which has a neat solution offered by @dkatzel in one of the answers below. However, it does <em>not</em> generalize. Therefore, let me add a more general example:</p>\n\n<pre><code>package com.example.test;\n\nimport java.util.ArrayList;\nimport java.util.stream.IntStream;\n\npublic class Main {\n\n  public static void main(String[] args) {\n    boolean [][] directed_acyclic_graph = new boolean[][]{\n        {false,  true, false,  true, false,  true},\n        {false, false, false,  true, false,  true},\n        {false, false, false,  true, false,  true},\n        {false, false, false, false, false,  true},\n        {false, false, false, false, false,  true},\n        {false, false, false, false, false, false}\n    };\n\n    System.out.println(\n        IntStream.range(0, directed_acyclic_graph.length)\n        .parallel()\n        .mapToLong(i -&gt; IntStream.range(0, directed_acyclic_graph[i].length)\n            .filter(j -&gt; directed_acyclic_graph[j][i])\n            .count()\n        )\n        .filter(n -&gt; n == 0)\n        .collect(() -&gt; new ArrayList&lt;Long&gt;(), (c, e) -&gt; c.add(e), (c1, c2) -&gt; c1.addAll(c2))\n    );\n  }\n\n}\n</code></pre>\n\n<p>This gives <strong>incorrect</strong> output of <code>[0, 0, 0]</code> which corresponds to the <em>counts</em> for the three columns that are all <code>false</code>. What I need are the <em>indices</em> of these three columns. The correct output should be <code>[0, 2, 4]</code>. How can I get this result?</p>\n", "tags": ["java", "lambda", "functional-programming", "java-8", "java-stream"], "title": "Does Java SE 8 have Pairs or Tuples?", "answers": [{"body": "<p>Sadly, Java 8 did not introduce pairs or tuples. You can always use <a href=\"http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/tuple/package-summary.html\">org.apache.commons.lang3.tuple</a> of course (which personally I do use in combination with Java 8) or you can create your own wrappers. Or use Maps. Or stuff like that, as is explained in the <a href=\"http://stackoverflow.com/a/156685/2382246\">accepted answer</a> to that question you linked to.</p>\n", "title": "Does Java SE 8 have Pairs or Tuples?", "tags": ["java", "lambda", "functional-programming", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/24328679/does-java-se-8-have-pairs-or-tuples/24329071#24329071", "question_id": 24328679, "answer_id": 24329071}, {"body": "<p>Since you only care about the indexes, you don't need to map to tuples at all.  Why not just write a filter that uses the looks up elements in your array?</p>\n\n<pre><code>     int[] value =  ...\n\n\nIntStream.range(0, value.length)\n            .filter(i -&gt; value[i] &gt; 30)  //or whatever filter you want\n            .forEach(i -&gt; System.out.println(i));\n</code></pre>\n", "title": "Does Java SE 8 have Pairs or Tuples?", "tags": ["java", "lambda", "functional-programming", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/24328679/does-java-se-8-have-pairs-or-tuples/24330226#24330226", "question_id": 24328679, "answer_id": 24330226}, {"body": "<p><strong>UPDATE:</strong> This answer is in response to the original question, <em>Does Java SE 8 have Pairs or Tuples?</em> (And implicitly, if not, why not?) The OP has updated the question with a more complete example, but it seems like it can be solved without using any kind of Pair structure. [Note from OP: here is <a href=\"http://stackoverflow.com/questions/24328679/does-java-se-8-have-pairs-or-tuples/24339157#24339157\">the other correct answer</a>.]</p>\n\n<hr>\n\n<p>The short answer is no. You either have to roll your own or bring in one of the several libraries that implements it.</p>\n\n<p>Having a <code>Pair</code> class in Java SE was proposed and rejected at least once. See <a href=\"http://mail.openjdk.java.net/pipermail/core-libs-dev/2010-March/003973.html\">this discussion thread</a> on one of the OpenJDK mailing lists. The tradeoffs are not obvious. On the one hand, there are many Pair implementations in other libraries and in application code. That demonstrates a need, and adding such a class to Java SE will increase reuse and sharing. On the other hand, having a Pair class adds to the temptation of creating complicated data structures out of Pairs and collections without creating the necessary types and abstractions. (That's a paraphrase of <a href=\"http://mail.openjdk.java.net/pipermail/core-libs-dev/2010-March/003995.html\">Kevin Bourillion's message</a> from that thread.)</p>\n\n<p>I recommend everybody read that entire email thread. It's remarkably insightful and has no flamage. It's quite convincing. When it started I thought, \"Yeah, there should be a Pair class in Java SE\" but by the time the thread reached its end I had changed my mind.</p>\n\n<p>Note however that JavaFX has the <a href=\"http://docs.oracle.com/javafx/2/api/javafx/util/Pair.html\">javafx.util.Pair</a> class. JavaFX's APIs evolved separately from the Java SE APIs.</p>\n\n<p>As one can see from the linked question <a href=\"http://stackoverflow.com/questions/156275/what-is-the-equivalent-of-the-c-pairl-r-in-java\">What is the equivalent of the C++ Pair in Java?</a> there is quite a large design space surrounding what is apparently such a simple API. Should the objects be immutable? Should they be serializable? Should they be comparable? Should the class be final or not? Should the two elements be ordered? Should it be an interface or a class? Why stop at pairs? Why not triples, quads, or N-tuples?</p>\n\n<p>And of course there is the inevitable naming bikeshed for the elements:</p>\n\n<ul>\n<li>(a, b)</li>\n<li>(first, second)</li>\n<li>(left, right)</li>\n<li>(car, cdr)</li>\n<li>(foo, bar)</li>\n<li>etc.</li>\n</ul>\n\n<p>One big issue that has hardly been mentioned is the relationship of Pairs to primitives. If you have an <code>(int x, int y)</code> datum that represents a point in 2D space, representing this as <code>Pair&lt;Integer, Integer&gt;</code> consumes <strong>three objects</strong> instead of two 32-bit words. Furthermore, these objects must reside on the heap and will incur GC overhead.</p>\n\n<p>It would seem clear that, like Streams, it would be essential for there to be primitive specializations for Pairs. Do we want to see:</p>\n\n<pre><code>Pair\nObjIntPair\nObjLongPair\nObjDoublePair\nIntObjPair\nIntIntPair\nIntLongPair\nIntDoublePair\nLongObjPair\nLongIntPair\nLongLongPair\nLongDoublePair\nDoubleObjPair\nDoubleIntPair\nDoubleLongPair\nDoubleDoublePair\n</code></pre>\n\n<p>Even an <code>IntIntPair</code> would still require one object on the heap.</p>\n\n<p>These are, of course, reminiscent of the proliferation of functional interfaces in the <code>java.util.function</code> package in Java SE 8. If you don't want a bloated API, which ones would you leave out? You could also argue that this isn't enough, and that specializations for, say, <code>Boolean</code> should be added as well.</p>\n\n<p>My feeling is that if Java had added a Pair class long ago, it would have been simple, or even simplistic, and it wouldn't have satisfied many of the use cases we are envisioning now. Consider that if Pair had been added in the JDK 1.0 time frame, it probably would have been mutable! (Look at java.util.Date.) Would people have been happy with that? My guess is that if there were a Pair class in Java, it would be kinda-sort-not-really-useful and everybody will still be rolling their own to satisfy their needs, there would be various Pair and Tuple implementations in external libraries, and people would still be arguing/discussing about how to fix Java's Pair class. In other words, kind of in the same place we're at today.</p>\n\n<p>Meanwhile, some work is going on to address the fundamental issue, which is better support in the JVM (and eventually the Java language) for <em>value types</em>. See this <a href=\"http://cr.openjdk.java.net/~jrose/values/values-0.html\">State of the Values</a> document. This is preliminary, speculative work, and it covers only issues from the JVM perspective, but it already has a fair amount of thought behind it. Of course there are no guarantees that this will get into Java 9, or ever get in anywhere, but it does show the current direction of thinking on this topic.</p>\n", "title": "Does Java SE 8 have Pairs or Tuples?", "tags": ["java", "lambda", "functional-programming", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/24328679/does-java-se-8-have-pairs-or-tuples/24336841#24336841", "question_id": 24328679, "answer_id": 24336841}, {"body": "<p>It appears that the full example can be solved without the use of any kind of Pair structure. The key is to filter on the column indexes, with the predicate checking the entire column, instead of mapping the column indexes to the number of <code>false</code> entries in that column.</p>\n\n<p>The code that does this is here:</p>\n\n<pre><code>    System.out.println(\n        IntStream.range(0, acyclic_graph.length)\n            .filter(i -&gt; IntStream.range(0, acyclic_graph.length)\n                                  .noneMatch(j -&gt; acyclic_graph[j][i]))\n            .boxed()\n            .collect(toList()));\n</code></pre>\n\n<p>This results in output of <code>[0, 2, 4]</code> which is I think the correct result requested by the OP.</p>\n\n<p>Also note the <code>boxed()</code> operation that boxes the <code>int</code> values into <code>Integer</code> objects. This enables one to use the pre-existing <code>toList()</code> collector instead having to write out collector functions that do the boxing themselves.</p>\n", "title": "Does Java SE 8 have Pairs or Tuples?", "tags": ["java", "lambda", "functional-programming", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/24328679/does-java-se-8-have-pairs-or-tuples/24339157#24339157", "question_id": 24328679, "answer_id": 24339157}], "creation_date": 1403271639, "score": 66, "link": "http://stackoverflow.com/questions/24328679/does-java-se-8-have-pairs-or-tuples", "question_id": 24328679}, {"body": "<p>When building a java 8 project with maven, for example <em>$ mvn clean package</em></p>\n\n<p>I get this message:</p>\n\n<blockquote>\n  <p>Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=128m; support was removed in 8.0</p>\n</blockquote>\n\n<p>How to remove this message?</p>\n", "tags": ["java", "maven"], "title": "Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize", "answers": [{"body": "<p><a href=\"http://www.oracle.com/technetwork/java/javase/8-compatibility-guide-2156366.html\">Compatibility Guide for JDK 8</a> says that in Java 8 the command line flag <code>MaxPermSize</code> has been removed. The reason is that the permanent generation was removed from the hotspot heap and was moved to native memory.\nSo in order to remove this message\nedit <strong>MAVEN_OPTS</strong> Environment User Variable:</p>\n\n<p><strong>Java 7</strong></p>\n\n<pre><code>MAVEN_OPTS -Xmx512m -XX:MaxPermSize=128m\n</code></pre>\n\n<p><strong>Java 8</strong></p>\n\n<pre><code>MAVEN_OPTS -Xmx512m\n</code></pre>\n", "title": "Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/22634644/java-hotspottm-64-bit-server-vm-warning-ignoring-option-maxpermsize/22634689#22634689", "question_id": 22634644, "answer_id": 22634689}, {"body": "<p>The JDK 8 HotSpot JVM is now using native memory for the representation of class metadata and is called Metaspace.</p>\n\n<p>The permanent generation has been removed. The PermSize and  MaxPermSize are ignored and a warning is issued if they are present on the command line.</p>\n", "title": "Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/22634644/java-hotspottm-64-bit-server-vm-warning-ignoring-option-maxpermsize/22634880#22634880", "question_id": 22634644, "answer_id": 22634880}, {"body": "<p>In JBoss EAP 6.4, right click on the server and open launch configuration under VM argument you will find </p>\n\n<pre><code>{-Dprogram.name=JBossTools: jboss-eap\" -server -Xms1024m -Xmx1024m -XX:MaxPermSize=256m}\n</code></pre>\n\n<p>update it to</p>\n\n<pre><code>{-Dprogram.name=JBossTools: JBoss 6.4\" -server -Xms512m -Xmx512m}\n</code></pre>\n\n<p>this will solve your problem.</p>\n", "title": "Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/22634644/java-hotspottm-64-bit-server-vm-warning-ignoring-option-maxpermsize/32150635#32150635", "question_id": 22634644, "answer_id": 32150635}, {"body": "<p>-XX:MaxPermSize=size\nSets the maximum permanent generation space size (in bytes). This option was deprecated in JDK 8, and superseded by the -XX:MaxMetaspaceSize option.</p>\n\n<p>-XX:PermSize=size\nSets the space (in bytes) allocated to the permanent generation that triggers a garbage collection if it is exceeded. This option was deprecated un JDK 8, and superseded by the -XX:MetaspaceSize option.</p>\n", "title": "Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/22634644/java-hotspottm-64-bit-server-vm-warning-ignoring-option-maxpermsize/32365351#32365351", "question_id": 22634644, "answer_id": 32365351}, {"body": "<p>I got similar message when running command line mvn (version 3.3.3) on Linux with Java 8.\nBy opening maven script /$MAVEN-HOME/bin/mvn, found the following line</p>\n\n<pre><code>MAVEN_OPTS=\"$(concat_lines \"$MAVEN_PROJECTBASEDIR/.mvn/jvm.config\") $MAVEN_OPTS\"\n</code></pre>\n\n<p>Where $MAVEN_PROJECTBASEDIR by default is your home directory.\nSo two places you can take a look, first is file $MAVEN_PROJECTBASEDIR/.mvn/jvm.config if it exists. Secondly look at files possibly set up the environment variable MAVEN_OPTS. Candidate files are .bashrc, .bash_profile, .profile and those files included by them such as /etc/profile, /etc/bash.bashrc</p>\n\n<p>I located</p>\n\n<pre><code>export MAVEN_OPTS=\"-Xmx512m -XX:MaxPermSize=256m\"\n</code></pre>\n\n<p>in .bashrc in my system, change it to</p>\n\n<pre><code>export MAVEN_OPTS=\"-Xmx512m\"\n</code></pre>\n\n<p>issue resolved</p>\n", "title": "Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize", "tags": ["java", "maven"], "link": "http://stackoverflow.com/questions/22634644/java-hotspottm-64-bit-server-vm-warning-ignoring-option-maxpermsize/34247173#34247173", "question_id": 22634644, "answer_id": 34247173}], "creation_date": 1395750546, "score": 66, "link": "http://stackoverflow.com/questions/22634644/java-hotspottm-64-bit-server-vm-warning-ignoring-option-maxpermsize", "question_id": 22634644}, {"body": "<p>This program compiles fine in Java 7 (or in Java 8 with <code>-source 7</code>), but fails to compile with Java 8:</p>\n\n<pre><code>interface Iface&lt;T&gt; {}\nclass Impl implements Iface&lt;Impl&gt; {}\n\nclass Acceptor&lt;T extends Iface&lt;T&gt;&gt; {\n    public Acceptor(T obj) {}\n}\n\npublic class Main {\n    public static void main(String[] args) {\n        Acceptor&lt;?&gt; acceptor = new Acceptor&lt;&gt;(new Impl());\n    }\n}\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>Main.java:10: error: incompatible types: cannot infer type arguments for Acceptor&lt;&gt;\n        Acceptor&lt;?&gt; acceptor = new Acceptor&lt;&gt;(new Impl());\n                                           ^\n    reason: inference variable T has incompatible bounds\n      equality constraints: Impl\n      upper bounds: Iface&lt;CAP#1&gt;,Iface&lt;T&gt;\n  where T is a type-variable:\n    T extends Iface&lt;T&gt; declared in class Acceptor\n  where CAP#1 is a fresh type-variable:\n    CAP#1 extends Iface&lt;CAP#1&gt; from capture of ?\n1 error\n</code></pre>\n\n<p>In other words, this is a <em>backwards</em> source incompatibility between Java 7 and 8. I've gone through <a href=\"http://www.oracle.com/technetwork/java/javase/8-compatibility-guide-2156366.html#A999198\">Incompatibilities between Java SE 8 and Java SE 7</a> list but did not found anything that would fit my problem.</p>\n\n<p>So, is this a bug?</p>\n\n<p>Environment:</p>\n\n<pre><code>$ /usr/lib/jvm/java-8-oracle/bin/java -version\njava version \"1.8.0\"\nJava(TM) SE Runtime Environment (build 1.8.0-b132)\nJava HotSpot(TM) 64-Bit Server VM (build 25.0-b70, mixed mode)\n</code></pre>\n", "tags": ["java", "generics", "type-inference", "java-8"], "title": "Why does this Java 8 program not compile?", "answers": [{"body": "<p>The Java Language Specification changed significantly regarding <em>type inference</em>. In JLS7, <em>type inference</em> was described in <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.7\">\u00a715.12.2.7</a> and <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.8\">\u00a715.12.2.8</a>, whereas in JLS8, there is a whole chapter dedicated to <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-18.html\">Chapter 18. Type Inference</a>.</p>\n\n<p>The rules are quite complex, both in JLS7 and JLS8. It's difficult to tell the differences, but obviously there are differences, as is evident from section <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-18.html#jls-18.5.2\">\u00a718.5.2</a>:</p>\n\n<blockquote>\n  <p>This inference strategy is different than the Java SE 7 Edition of The Java Language Specification [..].</p>\n</blockquote>\n\n<p>However, the intention of the change was to be backwards compatible. See the last paragraph of section <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-18.html#jls-18.5.2\">\u00a718.5.2</a>:</p>\n\n<blockquote>\n  <p>[..] The strategy allows for reasonable outcomes in typical use cases, and is backwards compatible with the algorithm in the Java SE 7 Edition of The Java Language Specification.</p>\n</blockquote>\n\n<p>I can't tell whether that's true or not. However, there are some interesting variations of your code, that do not show the problem. For example, the following statement compiles without errors:</p>\n\n<pre><code>new Acceptor&lt;&gt;(new Impl());\n</code></pre>\n\n<p>In this case, there is no <em>target type</em>. That means the <em>Class Instance Create Expression</em> is not a <em>poly expressions</em>, and the rules for <em>type inference</em> are simpler. See <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-18.html#jls-18.5.2\">\u00a718.5.2</a>:</p>\n\n<blockquote>\n  <p>If the invocation is not a poly expression, let the bound set B<sub>3</sub> be the same as B<sub>2</sub>.</p>\n</blockquote>\n\n<p>That's also the reason, why the following statement works.</p>\n\n<pre><code>Acceptor&lt;?&gt; acceptor = (Acceptor&lt;?&gt;) new Acceptor&lt;&gt;(new Impl());\n</code></pre>\n\n<p>Although there is a type in the context of the expression, it doesn't count as <em>target type</em>. If a <em>class instance creation expression</em> does not happen in either an <em>assignment expression</em> or an <em>invocation expression</em>, then it can't be a <em>poly expression</em>. See <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.9\">\u00a715.9</a>:</p>\n\n<blockquote>\n  <p>A class instance creation expression is a poly expression (\u00a715.2) if it uses the diamond form for type arguments to the class, and it appears in an assignment context or an invocation context (\u00a75.2, \u00a75.3). Otherwise, it is a standalone expression.</p>\n</blockquote>\n\n<p>Coming back to your statement. The relevant part of the JLS8 is again <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-18.html#jls-18.5.2\">\u00a718.5.2</a>. However, I can't tell you if the following statement is correct according to the JLS8, of if the compiler is right with the error message. But at least, you got some alternatives and pointers for further information.</p>\n\n<pre><code>Acceptor&lt;?&gt; acceptor = new Acceptor&lt;&gt;(new Impl());\n</code></pre>\n", "title": "Why does this Java 8 program not compile?", "tags": ["java", "generics", "type-inference", "java-8"], "link": "http://stackoverflow.com/questions/23063474/why-does-this-java-8-program-not-compile/23069490#23069490", "question_id": 23063474, "answer_id": 23069490}, {"body": "<p>Type inference was changed in Java 8. Now, type inference looks at both the target type and the parameter types, for both constructors and methods. Consider the following:</p>\n\n<pre><code>interface Iface {}\nclass Impl implements Iface {}\nclass Impl2 extends Impl {}\n\nclass Acceptor&lt;T&gt; {\n    public Acceptor(T obj) {}\n}\n\n&lt;T&gt; T foo(T a) { return a; }\n</code></pre>\n\n<p>The following is now ok in Java 8 (but not in Java 7):</p>\n\n<pre><code>Acceptor&lt;Impl&gt; a = new Acceptor&lt;&gt;(new Impl2());\n\n// Java 8 cleverly infers Acceptor&lt;Impl&gt;\n// While Java 7 infers Acceptor&lt;Impl2&gt; (causing an error)\n</code></pre>\n\n<p>This, of course, gives an error in both: </p>\n\n<pre><code>Acceptor&lt;Impl&gt; a = new Acceptor&lt;Impl2&gt;(new Impl2());\n</code></pre>\n\n<p>This also is ok in Java 8:</p>\n\n<pre><code>Acceptor&lt;Impl&gt; a = foo (new Acceptor&lt;&gt;(new Impl2())); \n\n// Java 8 infers Acceptor&lt;Impl&gt; even in this case\n// While Java 7, again, infers Acceptor&lt;Impl2&gt;\n//   and gives: incompatible types: Acceptor&lt;Impl2&gt; cannot be converted to Acceptor&lt;Impl&gt;\n</code></pre>\n\n<p>The following gives an error in both, but the error is different:</p>\n\n<pre><code>Acceptor&lt;Impl&gt; a = foo (new Acceptor&lt;Impl2&gt;(new Impl2()));\n\n// Java 7:\n// incompatible types: Acceptor&lt;Impl2&gt; cannot be converted to Acceptor&lt;Impl&gt;\n\n// Java 8:\n// incompatible types: inferred type does not conform to upper bound(s)\n//     inferred: Acceptor&lt;Impl2&gt;\n//     upper bound(s): Acceptor&lt;Impl&gt;,java.lang.Object\n</code></pre>\n\n<p>Clearly, Java 8 made the type inference system smarter. Does this cause incompatibilities? Generally, no. Because of type erasure, it doesn't actually matter what types were inferred, as long as the program compiles. Does Java 8 compile all Java 7 programs? It should, but you brought up a case where it does not.</p>\n\n<p>What seems to be happening is that Java 8 is not handling wildcards well. Instead of considering them as a lack of a constraint, it seems to be treating them as a restrictive constraint that it can't satisfy. I'm not sure if it's following the letter of the JLS, but I'd call this a bug at least in spirit.</p>\n\n<p>FYI, this does work (note that my <code>Acceptor</code> doesn't have the type constraints that yours does):</p>\n\n<pre><code>Acceptor&lt;?&gt; a = new Acceptor&lt;&gt;(new Impl2());\n</code></pre>\n\n<p>Do note that your example is using a wildcard type outside of a method parameter (which is inadvisable), I wonder if the same issue will happen in more typical code that uses the diamond operator in method calls. (Probably.)</p>\n", "title": "Why does this Java 8 program not compile?", "tags": ["java", "generics", "type-inference", "java-8"], "link": "http://stackoverflow.com/questions/23063474/why-does-this-java-8-program-not-compile/23146899#23146899", "question_id": 23063474, "answer_id": 23146899}, {"body": "<p>Thanks for the report. This looks like a bug. I will take care of it and probably add a better answer once we have more information about why this is happening. I have filed this bug entry <a href=\"https://bugs.openjdk.java.net/browse/JDK-8043926\">JDK-8043926</a>, to track it.</p>\n", "title": "Why does this Java 8 program not compile?", "tags": ["java", "generics", "type-inference", "java-8"], "link": "http://stackoverflow.com/questions/23063474/why-does-this-java-8-program-not-compile/23838350#23838350", "question_id": 23063474, "answer_id": 23838350}], "creation_date": 1397487619, "score": 66, "link": "http://stackoverflow.com/questions/23063474/why-does-this-java-8-program-not-compile", "question_id": 23063474}, {"body": "<p>I was testing out some new features of Java 8 and copied the example into my IDE (Eclipse originally, then IntelliJ) as shown here:\n<a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/examples/RosterTest.java\">http://docs.oracle.com/javase/tutorial/java/javaOO/examples/RosterTest.java</a></p>\n\n<p>Eclipse offered no support whatsoever for lambda expressions, and IntelliJ kept reporting an error \"Lambda expressions not supported at this language level\".  I would like to know if this is a problem with my install, the code, or support.</p>\n", "tags": ["java", "intellij-idea", "lambda", "java-8"], "title": "Java &quot;lambda expressions not supported at this language level&quot;", "answers": [{"body": "<p>Actually, Eclipse support for Java 8 is available: see <a href=\"https://wiki.eclipse.org/JDT_Core/Java8#Installation_instructions\" rel=\"nofollow\">here</a> and <a href=\"http://waynebeaton.wordpress.com/2014/03/18/official-eclipse-support-for-java-8/\" rel=\"nofollow\">here</a>.</p>\n\n<ul>\n<li>For Kepler, it is available as a \"feature patch\" against SR2 (i.e. Eclipse 4.3.2)</li>\n<li>For Luna (Eclipse 4.4) it will be in the standard release.  (<a href=\"http://wiki.eclipse.org/Luna/Simultaneous_Release_Plan#Schedule\" rel=\"nofollow\">release schedule</a>)</li>\n</ul>\n", "title": "Java &quot;lambda expressions not supported at this language level&quot;", "tags": ["java", "intellij-idea", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/22703412/java-lambda-expressions-not-supported-at-this-language-level/22703573#22703573", "question_id": 22703412, "answer_id": 22703573}, {"body": "<p>In IntelliJ IDEA:</p>\n\n<p>In <code>File Menu</code> \u2192 <code>Project Structure</code> \u2192 <code>Project</code>, change <code>Project Language Level</code> to <code>8.0 - Lambdas, type annotations etc.</code></p>\n", "title": "Java &quot;lambda expressions not supported at this language level&quot;", "tags": ["java", "intellij-idea", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/22703412/java-lambda-expressions-not-supported-at-this-language-level/22704620#22704620", "question_id": 22703412, "answer_id": 22704620}, {"body": "<p>As Stephen C pointed out, Eclipse Kepler (4.3) has Java 8 support when the patch is installed (installation instructions <a href=\"https://wiki.eclipse.org/JDT/Eclipse_Java_8_Support_For_Kepler\" rel=\"nofollow\">here</a>)</p>\n\n<p>Once installed, you\u2019ll need to tell your projects to use java 8. First add the JDK to eclipse:</p>\n\n<ul>\n<li>Go to Window -> Preferences</li>\n<li>Go to Java -> Installed JREs</li>\n<li>Add Standard VM, and point to the location of the JRE</li>\n<li>Then go to Compiler</li>\n<li>Set Compiler compliance level to 1.8</li>\n</ul>\n\n<p>Then tell the project to use JDK 1.8:</p>\n\n<ul>\n<li>Go to Project -> preferences</li>\n<li>Go to Java Compiler</li>\n<li>Enable project specific settings</li>\n<li>Set Compiler compliance level to 1.8</li>\n</ul>\n", "title": "Java &quot;lambda expressions not supported at this language level&quot;", "tags": ["java", "intellij-idea", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/22703412/java-lambda-expressions-not-supported-at-this-language-level/22707128#22707128", "question_id": 22703412, "answer_id": 22707128}, {"body": "<p>For intellij 13, \nSimply change the <strong>language level</strong> itself to <code>8.0</code> with following navigation. </p>\n\n<p><code>\nFile\n|\n|\n---------Project Structure\n          |\n          |-----------Project language level\n</code></p>\n\n<p><img src=\"http://i.stack.imgur.com/Cg5hw.png\" alt=\"java8\"></p>\n\n<p><strong>After changes everything looks good</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/vFiGS.png\" alt=\"lamba\"></p>\n", "title": "Java &quot;lambda expressions not supported at this language level&quot;", "tags": ["java", "intellij-idea", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/22703412/java-lambda-expressions-not-supported-at-this-language-level/29323668#29323668", "question_id": 22703412, "answer_id": 29323668}, {"body": "<p>You should change source code Language Level also on the Source tab (Modules part). Here screen: <a href=\"http://take.ms/KHXYQ\">Change Language Level</a></p>\n", "title": "Java &quot;lambda expressions not supported at this language level&quot;", "tags": ["java", "intellij-idea", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/22703412/java-lambda-expressions-not-supported-at-this-language-level/30522340#30522340", "question_id": 22703412, "answer_id": 30522340}, {"body": "<p>To compile with Java 8 (lambdas etc) in IntelliJ IDEA 15;</p>\n\n<ul>\n<li><p><code>CTRL + ALT + SHIFT + S</code> or File / Project Structure</p></li>\n<li><p>Open Project tab</p></li>\n<li><p>Set Project SDK to compatible java version (1.8)</p></li>\n<li><p>Set Project language level to 8 </p></li>\n<li><p>Open Modules tab</p></li>\n<li><p>Set Language level to 8, click OK </p></li>\n<li><p><code>CTRL + ALT + S</code> or File / Settings</p></li>\n<li><p>Build, Execution, Deployment / Compiler / Java Compiler</p></li>\n<li><p>Change Target bytecode version to 1.8, click OK</p></li>\n</ul>\n", "title": "Java &quot;lambda expressions not supported at this language level&quot;", "tags": ["java", "intellij-idea", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/22703412/java-lambda-expressions-not-supported-at-this-language-level/34645282#34645282", "question_id": 22703412, "answer_id": 34645282}, {"body": "<p>In intellij 14, following settings worked for me.\n<a href=\"http://i.stack.imgur.com/bucbD.png\" rel=\"nofollow\">Intellij14 Settings</a></p>\n", "title": "Java &quot;lambda expressions not supported at this language level&quot;", "tags": ["java", "intellij-idea", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/22703412/java-lambda-expressions-not-supported-at-this-language-level/34669230#34669230", "question_id": 22703412, "answer_id": 34669230}, {"body": "<p>Even after applying above defined project specific settings on IntelliJ as well as Eclipse, it was still failing for me !</p>\n\n<p><strong>what worked for me was addition of maven plugin with source and target with 1.8 setting in POM XML:</strong></p>\n\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.0.2&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                        &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n                        &lt;mainClass&gt;com.abc.sparkcore.JavaWordCount&lt;/mainClass&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;copy&lt;/id&gt;\n                    &lt;phase&gt;install&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n&lt;outputDirectory&gt;${project.build.directory}/lib&lt;/outputDirectory&gt;\n                    &lt;/configuration&gt;   \n     &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt; \n</code></pre>\n", "title": "Java &quot;lambda expressions not supported at this language level&quot;", "tags": ["java", "intellij-idea", "lambda", "java-8"], "link": "http://stackoverflow.com/questions/22703412/java-lambda-expressions-not-supported-at-this-language-level/38962258#38962258", "question_id": 22703412, "answer_id": 38962258}], "creation_date": 1395975877, "score": 65, "link": "http://stackoverflow.com/questions/22703412/java-lambda-expressions-not-supported-at-this-language-level", "question_id": 22703412}, {"body": "<p>I have an issue with the following code, which I isolated to the most closed form, I am using Java 8, which is almost ready for launch (18 March 2014), so I expect no serious issues in the implementation itself, so it may/must be my own code:</p>\n\n<p><strong>Note: The code is written in Java 8, which has all kinds of new features, including <code>default</code> method implementation in interfaces.</strong></p>\n\n<pre><code>public abstract class Drawable implements DrawableInterface {    \n\n}\n</code></pre>\n\n<hr>\n\n<pre><code>interface DrawableInterface {\n    default public boolean isShadowReceiver() {\n        return false;\n    }\n\n    default public boolean isShadowCaster() {\n        return false;\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>public interface ShadowDrawable extends DrawableInterface {\n    @Override\n    default public boolean isShadowReceiver() {\n        return true;\n    }\n\n    @Override\n    default public boolean isShadowCaster() {\n        return true;\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>public class Box extends Drawable implements ShadowDrawable {\n\n}\n</code></pre>\n\n<hr>\n\n<pre><code>public class IsolatedBug {\n    private final Box box;\n\n    private final List&lt;Drawable&gt; drawables;\n\n    public IsolatedBug() {\n        this.box = new Box();\n        this.drawables = new ArrayList&lt;&gt;();\n\n        drawables.add(box);\n        drawables.forEach(drawable -&gt; System.out.println(drawable + \" C=\" + drawable.isShadowCaster() + \"/R=\" + drawable.isShadowReceiver()));\n    }\n\n    private void init() throws InterruptedException {\n        while (true) {\n            drawables.forEach(drawable -&gt; System.out.println(drawable + \" C=\" + drawable.isShadowCaster() + \"/R=\" + drawable.isShadowReceiver()));\n            Thread.sleep(100);\n        }\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        new IsolatedBug().init();\n    }\n}\n</code></pre>\n\n<p>The code in itself may not make most sense, but that is because I have stripped a load of other irrelevant methods.</p>\n\n<p>However, when you observe the output, you see something strange, at a certain point, for me personally after 30 seconds, I see the following:</p>\n\n<blockquote>\n  <p>isolatedbug.Box@5acf9800 C=true/R=true<br>\n  isolatedbug.Box@5acf9800 C=true/R=true<br>\n  isolatedbug.Box@5acf9800 C=true/R=true<br>\n  isolatedbug.Box@5acf9800 C=true/R=true<br>\n  isolatedbug.Box@5acf9800 C=false/R=false<br>\n  isolatedbug.Box@5acf9800 C=false/R=false<br>\n  isolatedbug.Box@5acf9800 C=false/R=false<br>\n  isolatedbug.Box@5acf9800 C=false/R=false<br>\n  isolatedbug.Box@5acf9800 C=false/R=false<br>\n  isolatedbug.Box@5acf9800 C=false/R=false  </p>\n</blockquote>\n\n<p>The time when it switches from <code>true</code> to <code>false</code>, seems to depend on the number of calls the method, as with longer sleeps in between, it takes longer to switch.</p>\n\n<p>I am running this, for full information on Windows 8 64-bit, with as <code>java -version</code>:</p>\n\n<blockquote>\n  <p>java version \"1.8.0\"<br>\n  Java(TM) SE Runtime Environment (build 1.8.0-b129)<br>\n  Java HotSpot(TM) 64-Bit Server VM (build 25.0-b69, mixed mode)  </p>\n</blockquote>\n\n<p>Can anyone explain to me what is going on?<br>\nI'd also appreciate if others with Java 8 -any build-, could run and see if they have the same issue.</p>\n\n<p>Some more information after using this code:</p>\n\n<pre><code>  Properties p = System.getProperties();\n  p.list(System.out);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>-- listing properties --\njava.runtime.name=Java(TM) SE Runtime Environment\nsun.boot.library.path=C:\\Program Files\\Java\\jdk1.8.0\\jre\\bin\njava.vm.version=25.0-b69\njava.vm.vendor=Oracle Corporation\njava.vendor.url=http://java.oracle.com/\npath.separator=;\njava.vm.name=Java HotSpot(TM) 64-Bit Server VM\nfile.encoding.pkg=sun.io\nuser.script=\nuser.country=NL\nsun.java.launcher=SUN_STANDARD\nsun.os.patch.level=\njava.vm.specification.name=Java Virtual Machine Specification\nuser.dir=C:\\Users\\Frank\\Dropbox\\NetbeansProjec...\njava.runtime.version=1.8.0-b129\njava.awt.graphicsenv=sun.awt.Win32GraphicsEnvironment\njava.endorsed.dirs=C:\\Program Files\\Java\\jdk1.8.0\\jre\\li...\nos.arch=amd64\njava.io.tmpdir=C:\\Users\\Frank\\AppData\\Local\\Temp\\\nline.separator=\n\njava.vm.specification.vendor=Oracle Corporation\nuser.variant=\nos.name=Windows 8.1\nsun.jnu.encoding=Cp1252\njava.library.path=C:\\Program Files\\Java\\jdk1.8.0\\bin;C:...\njava.specification.name=Java Platform API Specification\njava.class.version=52.0\nsun.management.compiler=HotSpot 64-Bit Tiered Compilers\nos.version=6.3\nuser.home=C:\\Users\\Frank\nuser.timezone=\njava.awt.printerjob=sun.awt.windows.WPrinterJob\nfile.encoding=UTF-8\njava.specification.version=1.8\nuser.name=Beheerder\njava.class.path=C:\\Users\\Frank\\Dropbox\\NetbeansProjec...\njava.vm.specification.version=1.8\nsun.arch.data.model=64\njava.home=C:\\Program Files\\Java\\jdk1.8.0\\jre\nsun.java.command=isolatedbug.IsolatedBug\njava.specification.vendor=Oracle Corporation\nuser.language=nl\nawt.toolkit=sun.awt.windows.WToolkit\njava.vm.info=mixed mode\njava.version=1.8.0\njava.ext.dirs=C:\\Program Files\\Java\\jdk1.8.0\\jre\\li...\nsun.boot.class.path=C:\\Program Files\\Java\\jdk1.8.0\\jre\\li...\njava.vendor=Oracle Corporation\nfile.separator=\\\njava.vendor.url.bug=http://bugreport.sun.com/bugreport/\nsun.cpu.endian=little\nsun.io.unicode.encoding=UnicodeLittle\nsun.desktop=windows\nsun.cpu.isalist=amd64\n</code></pre>\n\n<p>I have also checked the <code>-Xint</code> VM option, when this has been used, it returns <code>true</code> as expected.</p>\n\n<p>So the conclusion seems to be that in my particular use case, the interpreted and JIT compiled/inlined variants of the code are not the same and hence it is a possibility that after the interpreted code is compiled it switches from interpreted to compiled and thus clarifying the switch in output.</p>\n\n<p>Adding the <code>-Xint</code> option to the actual program in which the bug occured, has also fixed the issue there.</p>\n\n<p><strong>The official bug report has been accepted: <a href=\"https://bugs.openjdk.java.net/browse/JDK-8036100?page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel\">JIRA Bug JDK-8036100</a></strong></p>\n", "tags": ["java", "inheritance", "interface", "java-8"], "title": "Default method returns true for a while, and then returns false? (Possible JVM bug)", "answers": [{"body": "<p>This is a known bug in Java8.</p>\n\n<p>See this Jira: <a href=\"https://bugs.openjdk.java.net/browse/JDK-8031695\">CHA ignores default methods during analysis leading to incorrect code generation</a></p>\n\n<p><a href=\"http://johnthecodingarchitect.blogspot.ca/2014/01/major-bug-with-java-8-default-methods.html\">This blog entry is enlightening</a>....</p>\n\n<h2>Update / Summary:</h2>\n\n<ul>\n<li>issue identified before b127, and fixed in b127 ( <a href=\"https://bugs.openjdk.java.net/browse/JDK-8031695\">JDK-8031695</a> )</li>\n<li>issue reappeared (or a similar issue appeared) in b129 ( <a href=\"https://bugs.openjdk.java.net/browse/JDK-8036100\">JDK-8036100</a> )</li>\n<li>issue has been 'worked around' (<a href=\"http://hg.openjdk.java.net/hsx/hotspot-main/hotspot/rev/e46f2ee62e78\">disable the optimization that was failing</a>) in b132 ( <a href=\"https://jdk8.java.net/download.html\">available here</a> )</li>\n<li>issue also logged for a 'proper' fix for later ( <a href=\"https://bugs.openjdk.java.net/browse/JDK-8036153\">JDK-8036153</a> )</li>\n</ul>\n\n<hr>\n\n<h2>Previous Notes</h2>\n\n<p>I have reproduced this issue with:</p>\n\n<p>Claims that this issue is resolved in b127 are confusing since I see it clearly in b129 (unless I am confused about the JVM version conventions...)</p>\n\n<blockquote>\n<pre><code>C:\\Java8\\jdk-1.8.0_01\\bin&gt;java -version\njava version \"1.8.0\"\nJava(TM) SE Runtime Environment (build 1.8.0-b129)\nJava HotSpot(TM) 64-Bit Server VM (build 25.0-b69, mixed mode)\n\nC:\\Java8\\jdk-1.8.0_01\\bin&gt;\n</code></pre>\n</blockquote>\n\n<p>Adding System.out.println(System.getProperties());</p>\n\n<blockquote>\n<pre><code>{\njava.runtime.name=Java(TM) SE Runtime Environment, \njava.runtime.version=1.8.0-b129, \njava.vm.specification.name=Java Virtual Machine Specification, \njava.vm.name=Java HotSpot(TM) 64-Bit Server VM, \njava.vm.version=25.0-b69, \njava.vm.vendor=Oracle Corporation, \njava.vendor.url=http://java.oracle.com/, \njava.vm.specification.version=1.8, \njava.specification.name=Java Platform API Specification, \njava.specification.version=1.8, \njava.specification.vendor=Oracle Corporation, \njava.class.version=52.0, \nsun.boot.library.path=C:\\Java8\\jdk-1.8.0_01\\jre\\bin, \nsun.java.launcher=SUN_STANDARD, \nsun.os.patch.level=Service Pack 1, \njava.endorsed.dirs=C:\\Java8\\jdk-1.8.0_01\\jre\\lib\\endorsed, \nos.arch=amd64, \njava.vm.specification.vendor=Oracle Corporation, \nos.name=Windows 7, \nsun.jnu.encoding=Cp1252, \njava.library.path=C:\\Java8\\jdk-1.8.0_01\\bin;......, \nsun.management.compiler=HotSpot 64-Bit Tiered Compilers, \nos.version=6.1, \nfile.encoding=UTF-8, \nsun.java.command=fromso.IsolatedBug, \njava.home=C:\\Java8\\jdk-1.8.0_01\\jre, \nsun.arch.data.model=64, \nuser.language=en, \njava.ext.dirs=C:\\Java8\\jdk-1.8.0_01\\jre\\lib\\ext;C:\\windows\\Sun\\Java\\lib\\ext,\n\nsun.boot.class.path=C:\\Java8\\jdk-1.8.0_01\\jre\\lib\\resources.jar;......,\njava.vendor=Oracle Corporation, \nfile.separator=\\, \njava.vendor.url.bug=http://bugreport.sun.com/bugreport/, \nsun.io.unicode.encoding=UnicodeLittle, \nsun.cpu.endian=little, \nsun.desktop=windows, \nsun.cpu.isalist=amd64\n}\n</code></pre>\n</blockquote>\n", "title": "Default method returns true for a while, and then returns false? (Possible JVM bug)", "tags": ["java", "inheritance", "interface", "java-8"], "link": "http://stackoverflow.com/questions/22096052/default-method-returns-true-for-a-while-and-then-returns-false-possible-jvm-b/22096371#22096371", "question_id": 22096052, "answer_id": 22096371}], "creation_date": 1393592787, "score": 64, "link": "http://stackoverflow.com/questions/22096052/default-method-returns-true-for-a-while-and-then-returns-false-possible-jvm-b", "question_id": 22096052}, {"body": "<p>I just downloaded the Android Studio. While trying to run it, I had to modify the environment variable and add</p>\n\n<blockquote>\n  <p>JAVA_HOME</p>\n</blockquote>\n\n<p>and </p>\n\n<blockquote>\n  <p>C:\\Progra~2\\Java\\jdk1.6.0_22</p>\n</blockquote>\n\n<p>Once I finished that hurdle, now I am receiving another error:</p>\n\n<pre><code>The environment variable JAVA_HOME (with the value of *C:\\Progra~2\\Java\\jdk1.6.0_22*) does not point to a valid JVM installation.\n</code></pre>\n\n<p>I looked through other similar questions and I was asked to check the version, so I did the following in CMD:</p>\n\n<pre><code>C:\\Users\\Andre&gt;java -version\njava version \"1.6.0_22\"\nJava(TM) SE Runtime Environment (build 1.6.0_22-b04)\nJava HotSpot(TM) Client VM (build 17.1-b03, mixed mode, sharing)\n\nC:\\Users\\Andre&gt;javac -version\njavac 1.6.0_22\n</code></pre>\n\n<p>From the results it seems like I have JVM.</p>\n\n<p>I also tried these paths for JAVA_HOME, I closed and reopened a new CMD window each time</p>\n\n<pre><code>C:\\Program Files (x86)\\Java\\jre7\nC:\\Program Files (x86)\\Java\\jre6\nC:\\Program Files (x86)\\Java\\jdk1.6.0_22\nC:\\Program Files (x86)\\Java\\jre7\\bin\nC:\\Program Files (x86)\\Java\\jre6\\bin\nC:\\Program Files (x86)\\Java\\jdk1.6.0_22\\bin\n</code></pre>\n", "tags": ["java", "android", "jvm", "environment-variables", "java-home"], "title": "Installing Android Studio, does not point to a valid JVM installation error", "answers": [{"body": "<p>2 suggested solutions</p>\n\n<ol>\n<li><p>Upgrade JDK to 1.7 </p></li>\n<li><p>Make sure the 32-bit or 64 bit versions match on both sides</p></li>\n</ol>\n", "title": "Installing Android Studio, does not point to a valid JVM installation error", "tags": ["java", "android", "jvm", "environment-variables", "java-home"], "link": "http://stackoverflow.com/questions/21119021/installing-android-studio-does-not-point-to-a-valid-jvm-installation-error/21119146#21119146", "question_id": 21119021, "answer_id": 21119146}, {"body": "<p>Point your <code>JAVA_HOME</code> variable to <code>C:\\Program Files\\Java\\jdk1.8.0_xx\\</code> where \"xx\" is the update number (make sure this matches your actual directory name). Do not include <code>bin\\javaw.exe</code> in the pathname.</p>\n\n<p>NOTE: You can access the Environment Variables GUI from the CLI by entering <code>rundll32 sysdm.cpl,EditEnvironmentVariables</code>. Be sure to put the 'JAVA_HOME' path variable in the <code>System variables</code> rather than the user variables. If the path variable is in <code>User</code> the Android Studio will <strong>not</strong> find the path.</p>\n", "title": "Installing Android Studio, does not point to a valid JVM installation error", "tags": ["java", "android", "jvm", "environment-variables", "java-home"], "link": "http://stackoverflow.com/questions/21119021/installing-android-studio-does-not-point-to-a-valid-jvm-installation-error/24077997#24077997", "question_id": 21119021, "answer_id": 24077997}, {"body": "<p>Follow @abs solution</p>\n\n<p>If you still continue to get the error even after setting the JAVA_HOME variable\nCopy the studio folder to your C drive and then run the studio.exe or studio64.exe depending upon your java versio</p>\n", "title": "Installing Android Studio, does not point to a valid JVM installation error", "tags": ["java", "android", "jvm", "environment-variables", "java-home"], "link": "http://stackoverflow.com/questions/21119021/installing-android-studio-does-not-point-to-a-valid-jvm-installation-error/26860128#26860128", "question_id": 21119021, "answer_id": 26860128}, {"body": "<p>It is absolutely possible that all other answers work for people but for me this path worked:</p>\n\n<p>Leave your JDK path under <code>JAVA_HOME</code> System Variable as it is given here. Do not append bin or another path. It worked for me.</p>\n\n<pre><code>C:\\Program Files\\Java\\jdk1.8.0_11\\\n</code></pre>\n\n<p>Otherwise I am getting this error:</p>\n\n<pre><code>Installing Android Studio, does not point to a valid JVM installation error\n</code></pre>\n", "title": "Installing Android Studio, does not point to a valid JVM installation error", "tags": ["java", "android", "jvm", "environment-variables", "java-home"], "link": "http://stackoverflow.com/questions/21119021/installing-android-studio-does-not-point-to-a-valid-jvm-installation-error/27725349#27725349", "question_id": 21119021, "answer_id": 27725349}, {"body": "<p>Recently I am working with the 1.8.0_25 JDK version on Windows 8.1 and I had the same problem with this. But as PankaJ Jakhar said</p>\n\n<p>The real solution for me was pretty simple:</p>\n\n<ol>\n<li>Add the JAVA_HOME variable to the system ones, not on the user ones.</li>\n<li><p>The path I introduced for this variable was:</p>\n\n<pre><code>C:\\Program Files\\Java\\jdk1.8.0_25\\\n</code></pre></li>\n</ol>\n\n<p>And it works for me!</p>\n", "title": "Installing Android Studio, does not point to a valid JVM installation error", "tags": ["java", "android", "jvm", "environment-variables", "java-home"], "link": "http://stackoverflow.com/questions/21119021/installing-android-studio-does-not-point-to-a-valid-jvm-installation-error/28096794#28096794", "question_id": 21119021, "answer_id": 28096794}, {"body": "<p>I am using 64-bit Windows. After battling with various settings I followed these steps:</p>\n\n<ul>\n<li>Thru Add/Remove Programs I uninstalled all Java(s)</li>\n<li>Removed JAVA_HOME variable from environment</li>\n<li>Removed Java folder reference from PATH environment variable</li>\n<li>Downloaded and installed 64-bit Java SDK</li>\n<li>Added JAVA_HOME variable in system variables and assigned it the value C:\\Program Files\\Java\\jdk1.8.0_31</li>\n</ul>\n\n<p>In the last step please note that its the parent Folder and not the \\bin sub-folder</p>\n\n<p>It started working.</p>\n\n<p>Hope that helps</p>\n", "title": "Installing Android Studio, does not point to a valid JVM installation error", "tags": ["java", "android", "jvm", "environment-variables", "java-home"], "link": "http://stackoverflow.com/questions/21119021/installing-android-studio-does-not-point-to-a-valid-jvm-installation-error/28600899#28600899", "question_id": 21119021, "answer_id": 28600899}, {"body": "<p>Don't include bin folder while coping the path for Java_home.</p>\n", "title": "Installing Android Studio, does not point to a valid JVM installation error", "tags": ["java", "android", "jvm", "environment-variables", "java-home"], "link": "http://stackoverflow.com/questions/21119021/installing-android-studio-does-not-point-to-a-valid-jvm-installation-error/28784970#28784970", "question_id": 21119021, "answer_id": 28784970}, {"body": "<p>I had this problem as well, and I must have tried 20 different path adding solutions before I worked it out. Someone mentioned it above almost as a side note, but this was exactly my issue: </p>\n\n<p>make sure you are running a 64-bit version of java. </p>\n", "title": "Installing Android Studio, does not point to a valid JVM installation error", "tags": ["java", "android", "jvm", "environment-variables", "java-home"], "link": "http://stackoverflow.com/questions/21119021/installing-android-studio-does-not-point-to-a-valid-jvm-installation-error/29835069#29835069", "question_id": 21119021, "answer_id": 29835069}, {"body": "<p>In my case, it started hapenning after I updated to Android Studio 1.2.\nTo fix it I just had to <strong>remove \"\\bin\" from my JAVA_HOME variable</strong>.</p>\n", "title": "Installing Android Studio, does not point to a valid JVM installation error", "tags": ["java", "android", "jvm", "environment-variables", "java-home"], "link": "http://stackoverflow.com/questions/21119021/installing-android-studio-does-not-point-to-a-valid-jvm-installation-error/30039267#30039267", "question_id": 21119021, "answer_id": 30039267}, {"body": "<p>My problem was different to any of the above as far as I can tell.\nI had a working version 1.1 of Android Studio and upgraded to 1.2\nThen I got the JAVA_HOME error when starting 1.2</p>\n\n<p>The problem was that my JAVA_HOME was set to \"C:\\Program Files\\Java\\jdk1.8.0_20\"\nwith quotation marks included. I haven't put them there to quote the string, the quotation marks were in the Variable Value field. It appears that 1.1 is happy with the quotes being there but 1.2 is not.</p>\n\n<p>Removing quotes removed the error and 1.2 now opens fine</p>\n", "title": "Installing Android Studio, does not point to a valid JVM installation error", "tags": ["java", "android", "jvm", "environment-variables", "java-home"], "link": "http://stackoverflow.com/questions/21119021/installing-android-studio-does-not-point-to-a-valid-jvm-installation-error/30136677#30136677", "question_id": 21119021, "answer_id": 30136677}, {"body": "<p>Updated android studio to 1.2.1. Even though I was getting the same error. Nothing worked, finally replaced JAVA_HOME with JDK_HOME and it did the magic.</p>\n", "title": "Installing Android Studio, does not point to a valid JVM installation error", "tags": ["java", "android", "jvm", "environment-variables", "java-home"], "link": "http://stackoverflow.com/questions/21119021/installing-android-studio-does-not-point-to-a-valid-jvm-installation-error/30198528#30198528", "question_id": 21119021, "answer_id": 30198528}, {"body": "<p>Try using the above options \nBut this one worked for me.\nmy JAVA_HOME looked like this \nC:\\Program Files\\Java\\jdk1.7.0_21;F:\\Software\\apache-ant-1.9.4-bin\\apache-ant-1.9.4\\bin\nOnly keeping the JAVA path in the JAVA_HOME \nRemove any additional path if you had given\nC:\\Program Files\\Java\\jdk1.7.0_21</p>\n", "title": "Installing Android Studio, does not point to a valid JVM installation error", "tags": ["java", "android", "jvm", "environment-variables", "java-home"], "link": "http://stackoverflow.com/questions/21119021/installing-android-studio-does-not-point-to-a-valid-jvm-installation-error/30537850#30537850", "question_id": 21119021, "answer_id": 30537850}, {"body": "<p>In my case it was because of an invisible character at the beginning of the path:</p>\n\n<p><a href=\"http://i.stack.imgur.com/xD1Aa.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/xD1Aa.png\" alt=\"enter image description here\"></a></p>\n", "title": "Installing Android Studio, does not point to a valid JVM installation error", "tags": ["java", "android", "jvm", "environment-variables", "java-home"], "link": "http://stackoverflow.com/questions/21119021/installing-android-studio-does-not-point-to-a-valid-jvm-installation-error/32336658#32336658", "question_id": 21119021, "answer_id": 32336658}, {"body": "<p>i think you are doing every thing fine just remove \";\" from the last of java_home variable. every thing will work fine.</p>\n", "title": "Installing Android Studio, does not point to a valid JVM installation error", "tags": ["java", "android", "jvm", "environment-variables", "java-home"], "link": "http://stackoverflow.com/questions/21119021/installing-android-studio-does-not-point-to-a-valid-jvm-installation-error/33450577#33450577", "question_id": 21119021, "answer_id": 33450577}, {"body": "<p>1) Just remove \\bin from Java_home environmental Variable.\n   This worked for me .<br>\n2) Also make sure you are using the correct versions of android studio and Java    (32/64 bit)</p>\n", "title": "Installing Android Studio, does not point to a valid JVM installation error", "tags": ["java", "android", "jvm", "environment-variables", "java-home"], "link": "http://stackoverflow.com/questions/21119021/installing-android-studio-does-not-point-to-a-valid-jvm-installation-error/33728363#33728363", "question_id": 21119021, "answer_id": 33728363}, {"body": "<p>I had to put backslash at the end of path and it worked for me.</p>\n\n<p>Earlier I was using</p>\n\n<blockquote>\n  <p>C:\\Program Files\\Java\\jdk1.7.0_79</p>\n</blockquote>\n\n<p>just by putting \"\\\" at the end, worked for me. Now the value of the <strong>JAVA_HOME</strong> variable is</p>\n\n<blockquote>\n  <p>C:\\Program Files\\Java\\jdk1.7.0_79\\</p>\n</blockquote>\n", "title": "Installing Android Studio, does not point to a valid JVM installation error", "tags": ["java", "android", "jvm", "environment-variables", "java-home"], "link": "http://stackoverflow.com/questions/21119021/installing-android-studio-does-not-point-to-a-valid-jvm-installation-error/34008623#34008623", "question_id": 21119021, "answer_id": 34008623}, {"body": "<p>Most probably the issue happens because of the incompatability of 32 bit and 64 bit excecutables. Suppose if you have installed 32 bit Android Studio by mistake and you will be downloading a 64 bit JDK. In this case 32 bit Android Studio will not be able to pick up the 64 bit JDK. This was the issue I faced. So I followed the below simple steps to make it working,</p>\n\n<ol>\n<li>Downloaded 32 bit JDK(you can also download 64 bit Android Studio if you do not want to change the 64 bit JDK)</li>\n<li>Right click MyComputer > Advanced System Settings > under 'Advanced tab' > Environment variables > Under System Variables > Add JAVA_HOME as key and your jdk(eg:C:\\Program Files (x86)\\Java\\jdk1.7.0_79) location as value.</li>\n<li>Save it and launch Android Studio. You are good to go now. </li>\n</ol>\n", "title": "Installing Android Studio, does not point to a valid JVM installation error", "tags": ["java", "android", "jvm", "environment-variables", "java-home"], "link": "http://stackoverflow.com/questions/21119021/installing-android-studio-does-not-point-to-a-valid-jvm-installation-error/36708122#36708122", "question_id": 21119021, "answer_id": 36708122}, {"body": "<p>Using <code>c:/Program Files/Java/jre1.8.0_73/ instead of C:/Program Files/Java/jdk1.8.0_73</code> as <code>JAVA_HOME</code> variable solved the problem for me. Android studio now launches without problems. </p>\n", "title": "Installing Android Studio, does not point to a valid JVM installation error", "tags": ["java", "android", "jvm", "environment-variables", "java-home"], "link": "http://stackoverflow.com/questions/21119021/installing-android-studio-does-not-point-to-a-valid-jvm-installation-error/36823054#36823054", "question_id": 21119021, "answer_id": 36823054}], "creation_date": 1389717945, "score": 63, "link": "http://stackoverflow.com/questions/21119021/installing-android-studio-does-not-point-to-a-valid-jvm-installation-error", "question_id": 21119021}, {"body": "<p>Running a simple Java program on our production machine, I noticed that this program eats up more 10G virt. I know that virtual memory is not that relevant, but at least I would like to understand why this is needed.</p>\n\n<pre><code>public class Main {\n  public static void main(String[] args) {\n        System.out.println(\"Hello World!\");\n        try {\n                Thread.sleep(10000);\n        } catch(InterruptedException e) {\n                /* ignored */\n        }\n  }\n}\n</code></pre>\n\n<p>Heres what <code>top</code> is saying when i run that little program:</p>\n\n<pre><code>  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND\n18764 myuser    20   0 10.2g  20m 8128 S  1.7  0.1   0:00.05 java\n</code></pre>\n\n<p>Does anyone know why this is happening?</p>\n\n<p>uname -a says:</p>\n\n<pre><code>Linux m4fxhpsrm1dg 2.6.32-358.18.1.el6.x86_64 #1 SMP Fri Aug 2 17:04:38 EDT 2013 x86_64 x86_64 x86_64 GNU/Linux\n</code></pre>\n\n<p>On an older 32bit-linux machine the same program consumes only about 1G virt. The old machine has 4GB RAM, the new one 32GB.</p>\n", "tags": ["java", "memory-management", "jvm", "64bit", "virtual-memory"], "title": "A simple &quot;Hello World&quot; needs 10G virtual memory on a 64-bit machine vs 1G at 32-bit?", "answers": [{"body": "<p>The <a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/vm/gc-ergonomics.html\">default sizes for initial heap and maximum heap</a> are defined as a percentage of the machine's physical memory, of which a production server nowadays tends to have <em>a whole lot</em>.</p>\n\n<p>You can choose both via the <a href=\"http://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html\">-Xms and -Xmx command line options</a>.</p>\n", "title": "A simple &quot;Hello World&quot; needs 10G virtual memory on a 64-bit machine vs 1G at 32-bit?", "tags": ["java", "memory-management", "jvm", "64bit", "virtual-memory"], "link": "http://stackoverflow.com/questions/23385471/a-simple-hello-world-needs-10g-virtual-memory-on-a-64-bit-machine-vs-1g-at-32/23385472#23385472", "question_id": 23385471, "answer_id": 23385472}, {"body": "<p>It's not your program using up that memory, it's the Java VM reserving that memory, regardless of which program is loaded.</p>\n", "title": "A simple &quot;Hello World&quot; needs 10G virtual memory on a 64-bit machine vs 1G at 32-bit?", "tags": ["java", "memory-management", "jvm", "64bit", "virtual-memory"], "link": "http://stackoverflow.com/questions/23385471/a-simple-hello-world-needs-10g-virtual-memory-on-a-64-bit-machine-vs-1g-at-32/23385475#23385475", "question_id": 23385471, "answer_id": 23385475}, {"body": "<p>Virtual memory really doesn't matter to you.</p>\n\n<p>The basic difference between 32-bit and 64-bit is that the address space in 64-bit is incredibly large. If 10 GiB looks like a lot to you, note that .NET on 64-bit can use TiBs of memory like this. Yet on 32-bit, .NET is much more conservative (and so is JVM) - the address space is 4 GiB <em>total</em> - that's not a lot.</p>\n\n<p>But it's irrelevant - it doesn't matter. It's just a thing that greatly simplifies programming, and has no negative effect on the host OS whatsoever. It creates a continuous address space for the VM to use, which means that you don't have to fragment the heap (or worse, the stack, where it's more or less impossible - but those tend to be only a MiB or so) as you get to require more \"real\" memory. When you finally commit the virtual memory, it becomes slightly more real - at that point, it more or less has to be backed by <em>some</em> data storage - be it the page (swap) file or physical RAM.</p>\n\n<p>The point is, the physical location of the memory isn't necessarily continuous, but that's done outside of your reach, and the mapping is generally very fast. On the other hand, having to, say, index an array, that's actually fragmented over 10 different virtual address memory blocks, that's (completely unnecessary) work.</p>\n\n<p>So there you have it - virtual memory is almost free on 64-bit. The basic approach is \"if it's there, use it\". You're not limiting the other applications, and it saves you quite a bit of work if you <em>do</em> actually end up using it. But until that point comes, you've only got a reservation. It doesn't translate to any physical memory at all. You don't pay for the friends that might come tonight and sit at your table, but you still have the space for them to sit if they do come - and only when they finally come do you actually get \"charged\".</p>\n\n<p>See this question for more information about the way Java behaves on different machines and with different versions: <a href=\"http://stackoverflow.com/questions/2915276/what-is-the-default-maximum-heap-size-for-suns-jvm-from-java-se-6\">http://stackoverflow.com/questions/2915276/what-is-the-default-maximum-heap-size-for-suns-jvm-from-java-se-6</a>\nThe maximum heap size also determines the amount of virtual memory reserved, because the heap has to be a continuous address space. If it weren't pre-reserved, it could happen that the heap could not expand to this maximum value, because someone else reserved a region of address space in the place the heap has to expand.</p>\n", "title": "A simple &quot;Hello World&quot; needs 10G virtual memory on a 64-bit machine vs 1G at 32-bit?", "tags": ["java", "memory-management", "jvm", "64bit", "virtual-memory"], "link": "http://stackoverflow.com/questions/23385471/a-simple-hello-world-needs-10g-virtual-memory-on-a-64-bit-machine-vs-1g-at-32/23385476#23385476", "question_id": 23385471, "answer_id": 23385476}, {"body": "<p>It turns out that on a modern computer architecture that uses virtual memory addressing (where the \"memory space\" an application sees does not actually relate to memory that's <em>actually</em> physically allocated), it really doesn't matter how much of this virtual \"memory space\" is given to an application upon startup.  It doesn't mean that this much memory has been allocated by the system.</p>\n\n<p>If an application sees a virtual address space 10GB large all it signals to the app is that it <em>may</em> use memory addresses up to 10GB if it wants.  However, memory is not actually allocated in physical RAM until it is actually written to, and this is done on a page-by-page basis, where a page is a 4kB section of memory.  The virtual address space, is just that - completely virtual until actually used.</p>\n\n<p>Let's say an application is given 10GB of address space and it starts using some of it.  As a \"fresh\" - previously untouched - page of this virtual memory is first written to, the system will, on a low level, \"map\" this virtual page to a section of physical memory, then write it.  But that application itself does not have to worry about such details, it just acts as if it has full access to a virtual area of memory.</p>\n\n<p>In the case of Java applications, it's not the application itself but Java that is allocated that address space, and Java simply requests a huge address space by default - the amount it requests is calculated relative to the physical memory size, but not because it has any need to be conservative, but just for practicality - an application is <em>probably</em> not going to want enough heap size to totally bring a server to its knees, so it's operating on the assumption it won't.  As I said above this does not mean that this much is \"allocated\" or that the system has had to expend many resources doing so.</p>\n", "title": "A simple &quot;Hello World&quot; needs 10G virtual memory on a 64-bit machine vs 1G at 32-bit?", "tags": ["java", "memory-management", "jvm", "64bit", "virtual-memory"], "link": "http://stackoverflow.com/questions/23385471/a-simple-hello-world-needs-10g-virtual-memory-on-a-64-bit-machine-vs-1g-at-32/23385477#23385477", "question_id": 23385471, "answer_id": 23385477}, {"body": "<p>Your program is NOT using so much memory. JVM / OS is reserving that memory i.e, the limit UPTO WHICH your program can use. Also, like one of the answer clearly mentions. 32 bit and 64 bit have got nothing to do with this. 32 bit means you can access upto 2^32 physical memory locations. and 64 bit means upto 2^64.</p>\n", "title": "A simple &quot;Hello World&quot; needs 10G virtual memory on a 64-bit machine vs 1G at 32-bit?", "tags": ["java", "memory-management", "jvm", "64bit", "virtual-memory"], "link": "http://stackoverflow.com/questions/23385471/a-simple-hello-world-needs-10g-virtual-memory-on-a-64-bit-machine-vs-1g-at-32/23385535#23385535", "question_id": 23385471, "answer_id": 23385535}, {"body": "<p>Imagine you're in the document storage business. You have a small facility in the middle of the city that stores boxes of papers, and a much larger warehouse outside of town with 1000 times the space. Every box has a label on it identifying its contents. </p>\n\n<p>The in-city facility is main memory. The warehouse is disk space.</p>\n\n<p>A 10GB virtual memory allocation for a new process doesn't mean finding room for 10 billion boxes for a new customer. It means <em>printing 10 billion labels</em> for boxes with contiguous ID numbers on them. </p>\n", "title": "A simple &quot;Hello World&quot; needs 10G virtual memory on a 64-bit machine vs 1G at 32-bit?", "tags": ["java", "memory-management", "jvm", "64bit", "virtual-memory"], "link": "http://stackoverflow.com/questions/23385471/a-simple-hello-world-needs-10g-virtual-memory-on-a-64-bit-machine-vs-1g-at-32/23394620#23394620", "question_id": 23385471, "answer_id": 23394620}, {"body": "<p>This is not the amount of physical memory the application is actually using. A virtual memory used by all processes can be orders of magnitude more than the amount of physical RAM on the machine, without any obvious problems. </p>\n", "title": "A simple &quot;Hello World&quot; needs 10G virtual memory on a 64-bit machine vs 1G at 32-bit?", "tags": ["java", "memory-management", "jvm", "64bit", "virtual-memory"], "link": "http://stackoverflow.com/questions/23385471/a-simple-hello-world-needs-10g-virtual-memory-on-a-64-bit-machine-vs-1g-at-32/23396725#23396725", "question_id": 23385471, "answer_id": 23396725}], "creation_date": 1398765567, "score": 63, "link": "http://stackoverflow.com/questions/23385471/a-simple-hello-world-needs-10g-virtual-memory-on-a-64-bit-machine-vs-1g-at-32", "question_id": 23385471}, {"body": "<p>Is it possible to check if a <code>float</code> is a positive zero (0.0) or a negative zero (-0.0)?</p>\n\n<p>I've converted the <code>float</code> to a <code>String</code> and checked if the first <code>char</code> is a <code>'-'</code>, but are there any other ways?</p>\n", "tags": ["java", "floating-point", "zero"], "title": "How do I check if a zero is positive or negative?", "answers": [{"body": "<p>Yes, divide by it. <code>1 / +0.0f</code> is <code>+Infinity</code>, but <code>1 / -0.0f</code> is <code>-Infinity</code>. It's easy to find out which one it is with a simple comparison, so you get:</p>\n\n<pre><code>if (1 / x &gt; 0)\n    // +0 here\nelse\n    // -0 here\n</code></pre>\n\n<p>(this assumes that <code>x</code> can only be one of the two zeroes)</p>\n", "title": "How do I check if a zero is positive or negative?", "tags": ["java", "floating-point", "zero"], "link": "http://stackoverflow.com/questions/22409102/how-do-i-check-if-a-zero-is-positive-or-negative/22409227#22409227", "question_id": 22409102, "answer_id": 22409227}, {"body": "<p>You can use <code>Float.floatToIntBits</code> to convert it to an <code>int</code> and look at the bit pattern:</p>\n\n<pre><code>float f = -0.0f;\n\nif (Float.floatToIntBits(f) == 0x80000000) {\n    System.out.println(\"Negative zero\");\n}\n</code></pre>\n", "title": "How do I check if a zero is positive or negative?", "tags": ["java", "floating-point", "zero"], "link": "http://stackoverflow.com/questions/22409102/how-do-i-check-if-a-zero-is-positive-or-negative/22409270#22409270", "question_id": 22409102, "answer_id": 22409270}, {"body": "<p>Definitly not the best aproach. Checkout the function</p>\n\n<pre><code>Float.floatToRawIntBits(f);\n</code></pre>\n\n<p>Doku:</p>\n\n<pre><code>/**\n * Returns a representation of the specified floating-point value\n * according to the IEEE 754 floating-point \"single format\" bit\n * layout, preserving Not-a-Number (NaN) values.\n *\n * &lt;p&gt;Bit 31 (the bit that is selected by the mask\n * {@code 0x80000000}) represents the sign of the floating-point\n * number.\n ...\n public static native int floatToRawIntBits(float value);\n</code></pre>\n", "title": "How do I check if a zero is positive or negative?", "tags": ["java", "floating-point", "zero"], "link": "http://stackoverflow.com/questions/22409102/how-do-i-check-if-a-zero-is-positive-or-negative/22409376#22409376", "question_id": 22409102, "answer_id": 22409376}, {"body": "<p>The approach used by <code>Math.min</code> is similar to what Jesper proposes but a little clearer:</p>\n\n<pre><code>private static int negativeZeroFloatBits = Float.floatToRawIntBits(-0.0f);\n\nfloat f = -0.0f;\nboolean isNegativeZero = (Float.floatToRawIntBits(f) == negativeZeroFloatBits);\n</code></pre>\n", "title": "How do I check if a zero is positive or negative?", "tags": ["java", "floating-point", "zero"], "link": "http://stackoverflow.com/questions/22409102/how-do-i-check-if-a-zero-is-positive-or-negative/22501695#22501695", "question_id": 22409102, "answer_id": 22501695}, {"body": "<p>When a float is negative (including <code>-0.0</code> and <code>-inf</code>), it uses the same sign bit as a negative int. This means you can compare the integer representation to <code>0</code>, eliminating the need to know or compute the integer representation of <code>-0.0</code>:</p>\n\n<pre><code>if(f == 0.0) {\n  if(Float.floatToIntBits(f) &lt; 0) {\n    //negative zero\n  } else {\n    //positive zero\n  }\n}\n</code></pre>\n\n<p>That has an extra branch over the accepted answer, but I think it's more readable without a hex constant.</p>\n\n<p>If your goal is just to treat -0 as a negative number, you could leave out the outer <code>if</code> statement:</p>\n\n<pre><code>if(Float.floatToIntBits(f) &lt; 0) {\n  //any negative float, including -0.0 and -inf\n} else {\n  //any non-negative float, including +0.0, +inf, and NaN\n}\n</code></pre>\n", "title": "How do I check if a zero is positive or negative?", "tags": ["java", "floating-point", "zero"], "link": "http://stackoverflow.com/questions/22409102/how-do-i-check-if-a-zero-is-positive-or-negative/22549445#22549445", "question_id": 22409102, "answer_id": 22549445}, {"body": "<p>Not sure about Java, but in other languages, for example C/C++ the most appropriate way would be:</p>\n\n<pre><code>inline bool IsNegativeZero(float fl)\n{\n    return (fl &amp; 0x80000000);\n}\n\ninline bool IsPozitiveZero(float fl)\n{\n    return (fl &amp; 0x00000000);\n}\n</code></pre>\n\n<p>This way works, because IEEE-754 describes that MSB (most significant bit) of float number determines if it positive or negative, other bits indicates value.</p>\n\n<hr>\n\n<p>I call it the most appropriate because it is requires least CPU cycles to check it.</p>\n", "title": "How do I check if a zero is positive or negative?", "tags": ["java", "floating-point", "zero"], "link": "http://stackoverflow.com/questions/22409102/how-do-i-check-if-a-zero-is-positive-or-negative/22659603#22659603", "question_id": 22409102, "answer_id": 22659603}, {"body": "<p><a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Double.html#equals-java.lang.Object-\"><code>Double.equals</code></a> distinguishes \u00b10.0 in Java. (There's also <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Float.html#equals-java.lang.Object-\"><code>Float.equals</code></a>.)</p>\n\n<p>I'm a bit surprised no-one has mentioned these, as they seem to me clearer than any method given so far!</p>\n", "title": "How do I check if a zero is positive or negative?", "tags": ["java", "floating-point", "zero"], "link": "http://stackoverflow.com/questions/22409102/how-do-i-check-if-a-zero-is-positive-or-negative/33501556#33501556", "question_id": 22409102, "answer_id": 33501556}, {"body": "<p>For negative:    </p>\n\n<pre><code>new Double(-0.0).equals(new Double(value));\n</code></pre>\n\n<p>For positive:    </p>\n\n<pre><code>new Double(0.0).equals(new Double(value));\n</code></pre>\n", "title": "How do I check if a zero is positive or negative?", "tags": ["java", "floating-point", "zero"], "link": "http://stackoverflow.com/questions/22409102/how-do-i-check-if-a-zero-is-positive-or-negative/35616929#35616929", "question_id": 22409102, "answer_id": 35616929}], "creation_date": 1394810409, "score": 63, "link": "http://stackoverflow.com/questions/22409102/how-do-i-check-if-a-zero-is-positive-or-negative", "question_id": 22409102}, {"body": "<p>Having come across the concept of immutable objects recently, I would like to know the best practices for controlling access to the state. Even though the object oriented part of my brain makes me want to cower in fear at the sight of public members, I see no technical issues with something like this:</p>\n\n<pre><code>public class Foo {\n    public final int x;\n    public final int y;\n\n    public Foo( int x, int y) {\n        this.x = x;\n        this.y = y;\n    }\n}\n</code></pre>\n\n<p>I would feel more comfortable declaring the fields as <code>private</code> and providing getter methods for each but this seems overly complex when the state is explicitly read only.</p>\n\n<p>What is the best practice for providing access to the state of an immutable object?</p>\n", "tags": ["java", "immutability", "value-objects"], "title": "Is it okay to expose the state of an Immutable object?", "answers": [{"body": "<p>It depends entirely on how you're going to use the object. Public fields aren't inherently evil, it's just bad to default everything to being public. For example the java.awt.Point class makes its x and y fields public, and they aren't even final. Your example seems like a fine use of public fields, but then again you might not want to expose all of the internal fields of another immutable object. There is no catch-all rule.</p>\n", "title": "Is it okay to expose the state of an Immutable object?", "tags": ["java", "immutability", "value-objects"], "link": "http://stackoverflow.com/questions/21910769/is-it-okay-to-expose-the-state-of-an-immutable-object/21910859#21910859", "question_id": 21910769, "answer_id": 21910859}, {"body": "<p>If your object is of local-enough usage that you don't care about the issues of breaking API changes for it in the future, there is no need to tack getters on top of the instance variables. But this is a general subject, not specific to immutable objects.</p>\n\n<p>The advantage of using getters comes from one extra layer of indirection, which <em>may</em> come in handy if you are designing an object which will be widely used, and whose utility will extend into unforseeable future.</p>\n", "title": "Is it okay to expose the state of an Immutable object?", "tags": ["java", "immutability", "value-objects"], "link": "http://stackoverflow.com/questions/21910769/is-it-okay-to-expose-the-state-of-an-immutable-object/21910881#21910881", "question_id": 21910769, "answer_id": 21910881}, {"body": "<p>Regardless of immutability, you're still exposing the <em>implementation</em> of this class. At some stage you'll want to change the implementation (or perhaps produce various derivations e.g. using the Point example, you may want a similar Point class using polar coordinates), and your client code is exposed to this.</p>\n\n<p>The above pattern may well be useful, but I'd generally restrict it to very localised instances (e.g. passing <em>tuples</em> of information around - I tend to find that objects of seemingly unrelated info, however, either are bad encapsulations, or that the info <em>is</em> related, and my tuple transforms into a fully-fledged object)</p>\n", "title": "Is it okay to expose the state of an Immutable object?", "tags": ["java", "immutability", "value-objects"], "link": "http://stackoverflow.com/questions/21910769/is-it-okay-to-expose-the-state-of-an-immutable-object/21910916#21910916", "question_id": 21910769, "answer_id": 21910916}, {"body": "<p>I use a lot constructions very similar to the one you put in the question, sometimes there are things that can be better modeled with a (sometimes inmutable) data-strcuture than with a class. </p>\n\n<p>All depends, if you are modeling an object, an object its defined by its behaviors, in this case never expose internal properties. Other times you are modeling a data-structure, and java has no special construct for data-structures, its fine to use a class and make public all the properties, and if you want immutability final and public off course.</p>\n\n<p>For example, robert martin has one chapter about this in the great book Clean Code, a must read in my opinion.</p>\n", "title": "Is it okay to expose the state of an Immutable object?", "tags": ["java", "immutability", "value-objects"], "link": "http://stackoverflow.com/questions/21910769/is-it-okay-to-expose-the-state-of-an-immutable-object/21910959#21910959", "question_id": 21910769, "answer_id": 21910959}, {"body": "<p>I know only one prop to have getters for final properties. It is the case when you'd like to have access to the properties over an interface.</p>\n\n<pre><code>    public interface Point {\n       int getX();\n       int getY();\n    }\n\n    public class Foo implements Point {...}\n    public class Foo2 implements Point {...}\n</code></pre>\n\n<p>Otherwise the public final fields are OK.</p>\n", "title": "Is it okay to expose the state of an Immutable object?", "tags": ["java", "immutability", "value-objects"], "link": "http://stackoverflow.com/questions/21910769/is-it-okay-to-expose-the-state-of-an-immutable-object/21911084#21911084", "question_id": 21910769, "answer_id": 21911084}, {"body": "<p>Just want to reflect <a href=\"http://docs.oracle.com/javase/tutorial/reflect/\" rel=\"nofollow\">reflection</a>:</p>\n\n<pre><code>Foo foo = new Foo(0, 1);  // x=0, y=1\nField fieldX = Foo.class.getField(\"x\");\nfieldX.setAccessible(true);\nfieldX.set(foo, 5);\nSystem.out.println(foo.x);   // 5!\n</code></pre>\n\n<p>So, is <code>Foo</code> still immutable? :)</p>\n", "title": "Is it okay to expose the state of an Immutable object?", "tags": ["java", "immutability", "value-objects"], "link": "http://stackoverflow.com/questions/21910769/is-it-okay-to-expose-the-state-of-an-immutable-object/21911164#21911164", "question_id": 21910769, "answer_id": 21911164}, {"body": "<p>I have thought the same in the past but usually end up making variables private and using getters and setters so that later on I'll still have the option of making changes to the implementation while keeping the same interface.</p>\n\n<p>This did remind me of something I read recently in \"Clean Code\" by Robert C. Martin.  In chapter 6 he gives a slightly different perspective.  For example, on page 95 he states </p>\n\n<blockquote>\n  <p>\"Objects hide their data behind abstractions and expose functions that operate on that data.  Data structure expose their data and have no meaningful functions.\"</p>\n</blockquote>\n\n<p>And on page 100:</p>\n\n<blockquote>\n  <p>The quasi-encapsulation of beans seems to make some OO purists feel better but usually provides no other benefit.</p>\n</blockquote>\n\n<p>Based on the code sample, the Foo class would seem to be a data structure.  So based on what I understood from the discussion in Clean Code (which is more than just the two quotes I gave), the purpose of the class is to expose data, not functionality, and having getters and setters probably does not do much good.</p>\n\n<p>Again, in my experience, I have usually gone ahead and used the \"bean\" approach of private data with getters and setters.  But then again, no one ever asked me to write a book about how to write better code so maybe Martin has something to say.</p>\n", "title": "Is it okay to expose the state of an Immutable object?", "tags": ["java", "immutability", "value-objects"], "link": "http://stackoverflow.com/questions/21910769/is-it-okay-to-expose-the-state-of-an-immutable-object/21911416#21911416", "question_id": 21910769, "answer_id": 21911416}, {"body": "<p><strong>The big thing to keep in mind is that function calls provide a universal interface.</strong> Any object can interact with other objects using function calls. All you have to do is define the right signatures, and away you go. The only catch is that you have to interact solely through these function calls, which often works well but can be clunky in some cases.</p>\n\n<p><strong>The main reason to expose state variables directly would be to be able to use primitive operators directly on these fields.</strong> When done well, this can enhance readability and convenience: for example, adding Complex numbers with <code>+</code>, or accessing a keyed collection with <code>[]</code>. The benefits of this can be surprising, provided that your use of the syntax follows traditional conventions.</p>\n\n<p><strong>The catch is that operators are not a universal interface.</strong> Only a very specific set of built-in types can use them, these can only be used in the ways that the language expects, and you cannot define any new ones. And so, once you've defined your public interface using primitives, you've locked yourself into using that primitive, and only that primitive (and other things that can be easily cast to it). To use anything else, you have to dance around that primitive every time you interact with it, and that kills you from a DRY perspective: things can get very fragile very quickly.</p>\n\n<p><strong>Some languages make operators into a universal interface, but Java doesn't.</strong> This is not an indictment of Java: its designers chose deliberately not to include operator overloading, and they had good reasons to do so. Even when you're working with objects that seem to fit well with the traditional meanings of operators, making them work in a way that actually makes sense can be surprisingly nuanced, and if you don't absolutely nail it, you're going to pay for that later. It is often much easier to make a function-based interface readable and usable than to go through that process, and you often even wind up with a better result than if you'd used operators.</p>\n\n<p><strong>There <em>were</em> tradeoffs involved in that decision, however.</strong> There <em>are</em> times when an operator-based interface really does work better than a function-based one, but without operator overloading, that option just isn't available. Trying to shoehorn operators in anyway will lock you into some design decisions that you probably don't really want to be set in stone. The Java designers thought that this tradeoff was worthwhile, and they might even have been correct about that. But decisions like this don't come without some fallout, and this kind of situation is where the fallout hits.</p>\n\n<p><strong>In short, the problem isn't exposing your implementation, <em>per se</em>. The problem is locking yourself into that implementation.</strong></p>\n", "title": "Is it okay to expose the state of an Immutable object?", "tags": ["java", "immutability", "value-objects"], "link": "http://stackoverflow.com/questions/21910769/is-it-okay-to-expose-the-state-of-an-immutable-object/21916263#21916263", "question_id": 21910769, "answer_id": 21916263}, {"body": "<p>Actually, it breaks encapsulation to expose any property of an object in any way -- every property is an implementation detail. Just because everybody does this doesn't make it right. Using accessors and mutators (getters and setters) doesn't make it any better. Rather, the CQRS patterns should be used to maintain encapsulation.</p>\n", "title": "Is it okay to expose the state of an Immutable object?", "tags": ["java", "immutability", "value-objects"], "link": "http://stackoverflow.com/questions/21910769/is-it-okay-to-expose-the-state-of-an-immutable-object/21919682#21919682", "question_id": 21910769, "answer_id": 21919682}, {"body": "<p>In cases where the <em>only purpose</em> is to couple two values to each other under a meaningful name, you may even consider to skip defining any constructors and keep the elements changeable:</p>\n\n<pre><code>public class Sculpture {\n    public int weight = 0;\n    public int price = 0;\n}\n</code></pre>\n\n<p>This has the advantage, to minimize the risk to confuse the parameter order when instantiating the class. The restricted changeability, if needed, can be achieved by taking the whole container under <code>private</code> control.</p>\n", "title": "Is it okay to expose the state of an Immutable object?", "tags": ["java", "immutability", "value-objects"], "link": "http://stackoverflow.com/questions/21910769/is-it-okay-to-expose-the-state-of-an-immutable-object/21929227#21929227", "question_id": 21910769, "answer_id": 21929227}, {"body": "<p>An object with public final fields that get loaded from public constructor parameters effectively portrays itself as being a simple data holder.  While such data holders aren't particularly \"OOP-ish\", they are useful for allowing a single field, variable, parameter, or return value to encapsulate multiple values.  If the purpose of a type is to serve as a simple means of gluing a few values together, such a data holder is often the best representation in a framework without real value types.</p>\n\n<p>Consider the question of what you would like to have happen if some method <code>Foo</code> wants to give a caller a <code>Point3d</code> which encapsulates \"X=5, Y=23, Z=57\", and it happens to have a reference to a <code>Point3d</code> where X=5, Y=23, and Z=57.  If the thing Foo has is known to be a simple immutable data holder, then Foo should simply give the caller a reference to it.  If, however, it might be something else (e.g. <em>it might contain additional information beyond X, Y, and Z</em>), then Foo should create a new simple data holder containing \"X=5, Y=23, Z=57\" and give the caller a reference to that.</p>\n\n<p>Having <code>Point3d</code> be sealed and expose its contents as public final fields will imply that methods like Foo may assume it's a simple immutable data holder and may safely share references to instances of it.  If code exists that make such assumptions, it may be difficult or impossible to change <code>Point3d</code> to be anything other than a simple immutable data holder without breaking such code.  On the other hand, code which assumes <code>Point3d</code> is a simple immutable data holder can be much simpler and more efficient than code which has to deal with the possibility of it being something else.</p>\n", "title": "Is it okay to expose the state of an Immutable object?", "tags": ["java", "immutability", "value-objects"], "link": "http://stackoverflow.com/questions/21910769/is-it-okay-to-expose-the-state-of-an-immutable-object/21942405#21942405", "question_id": 21910769, "answer_id": 21942405}, {"body": "<p>You see this style a lot in Scala, but there is a crucial difference between these languages: Scala follows the <a href=\"http://en.wikipedia.org/wiki/Uniform_access_principle\" rel=\"nofollow\">Uniform Access Principle</a>, but Java doesn't. That means your design is fine as long as your class doesn't change, but it can break in several ways when you need to adapt your functionality:</p>\n\n<ul>\n<li>you need to extract an interface or super class (e.g. your class represents complex numbers, and you want to have a sibling class with polar coordinate representation, too)</li>\n<li>you need to inherit from your class, and information becomes redundant (e.g. <code>x</code> can be calculated from additional data of the sub-class) </li>\n<li>you need to test for constraints (e.g. <code>x</code> must be non-negative for some reason)</li>\n</ul>\n\n<p>Also note that you can't use this style for mutable members (like the infamous <code>java.util.Date</code>). Only with getters you have a chance to make a defensive copy, or to change representation (e.g. storing the <code>Date</code> information as <code>long</code>) </p>\n", "title": "Is it okay to expose the state of an Immutable object?", "tags": ["java", "immutability", "value-objects"], "link": "http://stackoverflow.com/questions/21910769/is-it-okay-to-expose-the-state-of-an-immutable-object/21946098#21946098", "question_id": 21910769, "answer_id": 21946098}, {"body": "<p>The class that you have developed, should be fine in its current incarnation. The issues usually come in play when somebody tries to change this class or inherit from it. </p>\n\n<p>For example, after seeing above code, somebody thinks of adding another member variable instance of class Bar.</p>\n\n<pre><code>public class Foo {\n    public final int x;\n    public final int y;\n    public final Bar z;\n\n    public Foo( int x, int y, Bar z) {\n        this.x = x;\n        this.y = y;\n    }\n}\n\npublic class Bar {\n    public int age; //Oops this is not final, may be a mistake but still\n    public Bar(int age) {\n        this.age = age;\n    }\n}\n</code></pre>\n\n<p>In above code, the instance of Bar cannot be changed but externally, anybody can update the value of Bar.age.</p>\n\n<p>The best practice is to mark all fields as private, have getters for the fields. If you are returning an object or collection, make sure to return unmodifiable version.</p>\n\n<p>Immunatability is essential for concurrent programming.</p>\n", "title": "Is it okay to expose the state of an Immutable object?", "tags": ["java", "immutability", "value-objects"], "link": "http://stackoverflow.com/questions/21910769/is-it-okay-to-expose-the-state-of-an-immutable-object/22029865#22029865", "question_id": 21910769, "answer_id": 22029865}], "creation_date": 1392906599, "score": 63, "link": "http://stackoverflow.com/questions/21910769/is-it-okay-to-expose-the-state-of-an-immutable-object", "question_id": 21910769}, {"body": "<p>I get the following exception:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread \"main\" org.hibernate.LazyInitializationException: could not initialize proxy - no Session\n    at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:167)\n    at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:215)\n    at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:190)\n    at sei.persistence.wf.entities.Element_$$_jvstc68_47.getNote(Element_$$_jvstc68_47.java)\n    at JSON_to_XML.createBpmnRepresantation(JSON_to_XML.java:139)\n    at JSON_to_XML.main(JSON_to_XML.java:84)\n</code></pre>\n\n<p>when I try to call from main the following lines:</p>\n\n<pre><code>Model subProcessModel = getModelByModelGroup(1112);\nSystem.out.println(subProcessModel.getElement().getNote());\n</code></pre>\n\n<p>I implemented the <code>getModelByModelGroup(int modelgroupid)</code> method firstly like this :</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    public static Model getModelByModelGroup(int modelGroupId, boolean openTransaction) {\n\n        Session session = SessionFactoryHelper.getSessionFactory().getCurrentSession();     \n        Transaction tx = null;\n\n        if (openTransaction)\n            tx = session.getTransaction();\n\n        String responseMessage = \"\";\n\n        try {\n            if (openTransaction)            \n                tx.begin();\n            Query query = session.createQuery(\"from Model where modelGroup.id = :modelGroupId\");\n            query.setParameter(\"modelGroupId\", modelGroupId);\n            @SuppressWarnings(\"unchecked\")\n            List&lt;Model&gt; modelList = (List&lt;Model&gt;)query.list(); \n            Model model = null;\n            // Cerco il primo Model che \u00e8 in esercizio: idwf_model_type = 3\n            for (Model m : modelList)\n                if (m.getModelType().getId() == 3) {\n                    model = m;\n                    break;\n                }\n\n            if (model == null) {\n                Object[] arrModels = modelList.toArray();\n                if (arrModels.length == 0) \n                    throw new Exception(\"Non esiste \");\n\n                model = (Model)arrModels[0];\n            }\n\n            if (openTransaction)\n                tx.commit();\n            return model;\n\n        } catch(Exception ex) {\n            if (openTransaction)\n                tx.rollback();\n            ex.printStackTrace();\n            if (responseMessage.compareTo(\"\") == 0)\n                responseMessage = \"Error\" + ex.getMessage();\n            return null;        \n        }\n</code></pre>\n\n<p>and got the exception. Then a friend suggested me to always test the session and get the current session to avoid this error. So i did this:</p>\n\n<pre><code>public static Model getModelByModelGroup(int modelGroupId) {\n\n        Session session = null;\n        boolean openSession = session == null;\n        Transaction tx = null;\n        if (openSession){\n          session = SessionFactoryHelper.getSessionFactory().getCurrentSession();   \n            tx = session.getTransaction();\n        }\n        String responseMessage = \"\";\n\n        try {\n            if (openSession)            \n                tx.begin();\n            Query query = session.createQuery(\"from Model where modelGroup.id = :modelGroupId\");\n            query.setParameter(\"modelGroupId\", modelGroupId);\n            @SuppressWarnings(\"unchecked\")\n            List&lt;Model&gt; modelList = (List&lt;Model&gt;)query.list(); \n            Model model = null;\n            for (Model m : modelList)\n                if (m.getModelType().getId() == 3) {\n                    model = m;\n                    break;\n                }\n\n            if (model == null) {\n                Object[] arrModels = modelList.toArray();\n                if (arrModels.length == 0) \n                    throw new RuntimeException(\"Non esiste\");\n\n                model = (Model)arrModels[0];\n\n            if (openSession)\n                tx.commit();\n            return model;\n\n        } catch(RuntimeException ex) {\n            if (openSession)\n                tx.rollback();\n            ex.printStackTrace();\n            if (responseMessage.compareTo(\"\") == 0)\n                responseMessage = \"Error\" + ex.getMessage();\n            return null;        \n        }\n\n    }\n</code></pre>\n\n<p>but still get the same error. \nI have been reading a lot for this error and found some possible solutions. One of them was to set lazyLoad to false but I am not allowed to do this thats why i was suggested to control the session</p>\n", "tags": ["java", "hibernate", "session"], "title": "org.hibernate.LazyInitializationException - could not initialize proxy - no Session", "answers": [{"body": "<p>What is wrong here is that your session management configuration is set to close session when you commit transaction. Check if you have something like:</p>\n\n<pre><code>&lt;property name=\"current_session_context_class\"&gt;thread&lt;/property&gt; \n</code></pre>\n\n<p>in your configuration.</p>\n\n<p>In order to overcome this problem you could change the configuration of session factory or open another session and only than ask for those lazy loaded objects. But what I would suggest here is to initialize this lazy collection in getModelByModelGroup itself and call:</p>\n\n<pre><code>Hibernate.initialize(subProcessModel.getElement());\n</code></pre>\n\n<p>when you are still in active session.</p>\n\n<p>And one last thing. A friendly advice. You have something like this in your method:</p>\n\n<pre><code>            for (Model m : modelList)\n            if (m.getModelType().getId() == 3) {\n                model = m;\n                break;\n            }\n</code></pre>\n\n<p>Please insted of this code just filter those models with type id equal to 3 in the query statement just couple of lines above. </p>\n\n<p>Some more reading:</p>\n\n<p><a href=\"http://www.coderanch.com/t/428509/ORM/databases/committing-transaction-closes-session\">session factory configuration</a></p>\n\n<p><a href=\"http://forum.zkoss.org/question/45772/hibernate-problem-session-is-closed/\">problem with closed session</a></p>\n", "title": "org.hibernate.LazyInitializationException - could not initialize proxy - no Session", "tags": ["java", "hibernate", "session"], "link": "http://stackoverflow.com/questions/21574236/org-hibernate-lazyinitializationexception-could-not-initialize-proxy-no-sess/21575368#21575368", "question_id": 21574236, "answer_id": 21575368}, {"body": "<p>you could also solved it by adding lazy=false into   into your *.hbm.xml file or you can init your object in Hibernate.init(Object) when you get object from db</p>\n", "title": "org.hibernate.LazyInitializationException - could not initialize proxy - no Session", "tags": ["java", "hibernate", "session"], "link": "http://stackoverflow.com/questions/21574236/org-hibernate-lazyinitializationexception-could-not-initialize-proxy-no-sess/25056258#25056258", "question_id": 21574236, "answer_id": 25056258}, {"body": "<p>You can try to set </p>\n\n<pre><code>&lt;property name=\"hibernate.enable_lazy_load_no_trans\"&gt;true&lt;/property&gt;\n</code></pre>\n\n<p>in hibernate.cfg.xml or persistence.xml</p>\n\n<p>The problem to keep in mind with this property are well explained <a href=\"http://stackoverflow.com/a/25367976/1212327\">here</a></p>\n", "title": "org.hibernate.LazyInitializationException - could not initialize proxy - no Session", "tags": ["java", "hibernate", "session"], "link": "http://stackoverflow.com/questions/21574236/org-hibernate-lazyinitializationexception-could-not-initialize-proxy-no-sess/27303504#27303504", "question_id": 21574236, "answer_id": 27303504}, {"body": "<p>I encountered the same issue. I think another way to fix this is that you can change the query to join fetch your Element from Model as follows:</p>\n\n<pre><code>Query query = session.createQuery(\"from Model m join fetch m.element where modelGroup.id = :modelGroupId\")\n</code></pre>\n", "title": "org.hibernate.LazyInitializationException - could not initialize proxy - no Session", "tags": ["java", "hibernate", "session"], "link": "http://stackoverflow.com/questions/21574236/org-hibernate-lazyinitializationexception-could-not-initialize-proxy-no-sess/29601232#29601232", "question_id": 21574236, "answer_id": 29601232}, {"body": "<p>uses session.get(*.class, id); but do not load function</p>\n", "title": "org.hibernate.LazyInitializationException - could not initialize proxy - no Session", "tags": ["java", "hibernate", "session"], "link": "http://stackoverflow.com/questions/21574236/org-hibernate-lazyinitializationexception-could-not-initialize-proxy-no-sess/32214318#32214318", "question_id": 21574236, "answer_id": 32214318}, {"body": "<p>If you using Spring mark the class as <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/transaction/annotation/Transactional.html\">@Transactional</a>, then Spring will handle session management.</p>\n\n<pre><code>@Transactional\npublic class My Class {\n    ...\n}\n</code></pre>\n\n<p>By using <code>@Transactional</code>, many important aspects such as transaction propagation are handled automatically. In this case if another transactional method is called the method will have the option of joining the ongoing transaction avoiding the \"no session\" exception.</p>\n", "title": "org.hibernate.LazyInitializationException - could not initialize proxy - no Session", "tags": ["java", "hibernate", "session"], "link": "http://stackoverflow.com/questions/21574236/org-hibernate-lazyinitializationexception-could-not-initialize-proxy-no-sess/32276916#32276916", "question_id": 21574236, "answer_id": 32276916}, {"body": "<p>There are several good answers here that handle this error in a broad scope. I ran into a specific situation with Spring Security which had a quick, although probably not optimal, fix.</p>\n\n<p>During user authorization (immediately after logging in and passing authentication) I was testing a user entity for a specific authority in a custom class that extends SimpleUrlAuthenticationSuccessHandler.</p>\n\n<p>My user entity implements UserDetails and has a Set of lazy loaded Roles which threw the \"org.hibernate.LazyInitializationException - could not initialize proxy - no Session\" exception. Changing that Set from \"fetch=FetchType.LAZY\" to \"fetch=FetchType.EAGER\" fixed this for me.</p>\n", "title": "org.hibernate.LazyInitializationException - could not initialize proxy - no Session", "tags": ["java", "hibernate", "session"], "link": "http://stackoverflow.com/questions/21574236/org-hibernate-lazyinitializationexception-could-not-initialize-proxy-no-sess/36001361#36001361", "question_id": 21574236, "answer_id": 36001361}, {"body": "<p>Do the following changes in <strong>servlet-context.xml</strong></p>\n\n<pre><code>    &lt;beans:property name=\"hibernateProperties\"&gt;\n        &lt;beans:props&gt;\n\n            &lt;beans:prop key=\"hibernate.enable_lazy_load_no_trans\"&gt;true&lt;/beans:prop&gt;\n\n        &lt;/beans:props&gt;\n    &lt;/beans:property&gt;\n</code></pre>\n", "title": "org.hibernate.LazyInitializationException - could not initialize proxy - no Session", "tags": ["java", "hibernate", "session"], "link": "http://stackoverflow.com/questions/21574236/org-hibernate-lazyinitializationexception-could-not-initialize-proxy-no-sess/36511384#36511384", "question_id": 21574236, "answer_id": 36511384}, {"body": "<p>This exception because of when you call <code>session.getEntityById()</code>, the session will be closed. So you need to re-attach the entity to the session. Or Easy solution is just configure <code>default-lazy=\"false\"</code>  to your <code>entity.hbm.xml</code> or if you are using annotations just add <code>@Proxy(lazy=false)</code> to your entity class.</p>\n", "title": "org.hibernate.LazyInitializationException - could not initialize proxy - no Session", "tags": ["java", "hibernate", "session"], "link": "http://stackoverflow.com/questions/21574236/org-hibernate-lazyinitializationexception-could-not-initialize-proxy-no-sess/39372379#39372379", "question_id": 21574236, "answer_id": 39372379}, {"body": "<p><a href=\"https://vladmihalcea.com/2016/09/13/the-best-way-to-handle-the-lazyinitializationexception/\" rel=\"nofollow\">The best way to handle the <code>LazyInitializationException</code></a> is to use the <code>JOIN FETCH</code> directive:</p>\n\n<pre><code>Query query = session.createQuery(\n    \"from Model m \" +\n    \"join fetch m.modelType \" +\n    \"where modelGroup.id = :modelGroupId\"\n);\n</code></pre>\n\n<p>Anyway, DO NOT use the following Anti-Patterns as suggested by some of the answers:</p>\n\n<ul>\n<li><a href=\"https://vladmihalcea.com/2016/05/30/the-open-session-in-view-anti-pattern/\" rel=\"nofollow\">Open Session in View</a></li>\n<li><a href=\"https://vladmihalcea.com/2016/09/05/the-hibernate-enable_lazy_load_no_trans-anti-pattern/\" rel=\"nofollow\"><code>hibernate.enable_lazy_load_no_trans</code></a></li>\n</ul>\n\n<p>Sometimes, a <a href=\"https://vladmihalcea.com/2016/09/13/the-best-way-to-handle-the-lazyinitializationexception/\" rel=\"nofollow\">DTO projection</a> is a better choice than fetching entities, and this way, you won't get any <code>LazyInitializationException</code>.</p>\n", "title": "org.hibernate.LazyInitializationException - could not initialize proxy - no Session", "tags": ["java", "hibernate", "session"], "link": "http://stackoverflow.com/questions/21574236/org-hibernate-lazyinitializationexception-could-not-initialize-proxy-no-sess/39465150#39465150", "question_id": 21574236, "answer_id": 39465150}], "creation_date": 1391595141, "score": 63, "link": "http://stackoverflow.com/questions/21574236/org-hibernate-lazyinitializationexception-could-not-initialize-proxy-no-sess", "question_id": 21574236}, {"body": "<p>Since the method <code>Assert.assertEquals</code> is deprecated, which method are we supposed to use now? </p>\n\n<p>The following code:</p>\n\n<pre><code>String arg1 = \"test\";\nString arg2 = \"me\";\n\nAssert.assertEquals(arg1, arg2);\n</code></pre>\n\n<p>Gives the following warnings:</p>\n\n<blockquote>\n  <p>Multiple markers at this line</p>\n  \n  <ul>\n  <li>The method assertEquals(String, String) from the type Assert is deprecated</li>\n  <li>The type Assert is deprecated</li>\n  </ul>\n</blockquote>\n", "tags": ["java", "junit"], "title": "Warning: The method assertEquals from the type Assert is deprecated", "answers": [{"body": "<p>You're using <code>junit.framework.Assert</code> instead of <code>org.junit.Assert</code>.</p>\n", "title": "Warning: The method assertEquals from the type Assert is deprecated", "tags": ["java", "junit"], "link": "http://stackoverflow.com/questions/22541455/warning-the-method-assertequals-from-the-type-assert-is-deprecated/22544894#22544894", "question_id": 22541455, "answer_id": 22544894}, {"body": "<p>If you are using org.junit.Assert.assertEquals(float expected,float actual) but still encounter this deprecate warning, it is because currently junit prefer a third parameter rather than just two float variables input.</p>\n\n<p>The third parameter is delta:\npublic static void assertEquals(double expected,\n                                double actual,\n                                double delta)\nfor more information, please refer this problem: <a href=\"http://stackoverflow.com/questions/5686755/meaning-of-epsilon-argument-of-assertequals-for-double-values\">Meaning of epsilon argument of assertEquals for double values</a></p>\n", "title": "Warning: The method assertEquals from the type Assert is deprecated", "tags": ["java", "junit"], "link": "http://stackoverflow.com/questions/22541455/warning-the-method-assertequals-from-the-type-assert-is-deprecated/35118893#35118893", "question_id": 22541455, "answer_id": 35118893}], "creation_date": 1395338498, "score": 62, "link": "http://stackoverflow.com/questions/22541455/warning-the-method-assertequals-from-the-type-assert-is-deprecated", "question_id": 22541455}, {"body": "<p>I just purchased a brand new MacBook Pro. This is my first MAC ever and I'm still trying to get the hang of navigating my way around. Anyways... I'm also new to Java and I've been practicing on my Windows PC before it permanently died. Now that I'm on this MAC, I installed my JDK and now I need to set the JAVA_HOME environment variable. I have no idea what to do.</p>\n\n<p>I tried following some of these guides and didn't get very far.</p>\n\n<p><a href=\"http://www.mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/\">http://www.mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/</a>\n<a href=\"http://www.youtube.com/watch?v=aCEPrODy68o\">http://www.youtube.com/watch?v=aCEPrODy68o</a></p>\n\n<p>And I'm very sure this one made me create a now useless file:\nyoutube.com/watch?v=-cASjkF94dc</p>\n\n<p>I was able to locate the terminal and I think I created some multiple files. I'm getting messages like this:</p>\n\n<p>(1) Another program may be editing the same file.\n    If this is the case, be careful not to end up with two\n    different instances of the same file when making changes.\n    Quit, or continue with caution.</p>\n\n<p>(2) An edit session for this file crashed.\n    If this is the case, use \":recover\" or \"vim -r /Users/Erwin/.bash_profile\"\n    to recover the changes (see \":help recovery\").\n    If you did this already, delete the swap file \"/Users/Erwin/.bash_profile.sw\np\"\n    to avoid this message.</p>\n\n<p>Can some Mac expert out there help me in fixing this and setting Java environment step by step?</p>\n", "tags": ["java", "osx-mavericks"], "title": "Setting JAVA_HOME environment variable on MAC OSX 10.9", "answers": [{"body": "<p>Literally all you have to do is:</p>\n\n<pre><code>echo export \"JAVA_HOME=\\$(/usr/libexec/java_home)\" &gt;&gt; ~/.bash_profile\n</code></pre>\n\n<p>and restart your shell.</p>\n\n<p>If you have multiple JDK versions installed and you want it to be a specific one, you can use the <code>-v</code> flag to <code>java_home</code> like so:</p>\n\n<pre><code>echo export \"JAVA_HOME=\\$(/usr/libexec/java_home -v 1.7)\" &gt;&gt; ~/.bash_profile\n</code></pre>\n", "title": "Setting JAVA_HOME environment variable on MAC OSX 10.9", "tags": ["java", "osx-mavericks"], "link": "http://stackoverflow.com/questions/22842743/setting-java-home-environment-variable-on-mac-osx-10-9/22842806#22842806", "question_id": 22842743, "answer_id": 22842806}, {"body": "<p>I did it by putting</p>\n\n<pre><code>export JAVA_HOME=`/usr/libexec/java_home`\n</code></pre>\n\n<p>(backtics) in my .bashrc.  See my comment on Adrian's answer.</p>\n", "title": "Setting JAVA_HOME environment variable on MAC OSX 10.9", "tags": ["java", "osx-mavericks"], "link": "http://stackoverflow.com/questions/22842743/setting-java-home-environment-variable-on-mac-osx-10-9/26456579#26456579", "question_id": 22842743, "answer_id": 26456579}, {"body": "<p>I got it working by adding to ~/.profile. Somehow after updating to El Capitan beta, it didnt work even though JAVA_HOME was defined in .bash_profile.</p>\n\n<p>If there are any El Capitan beta users, try adding to .profile</p>\n", "title": "Setting JAVA_HOME environment variable on MAC OSX 10.9", "tags": ["java", "osx-mavericks"], "link": "http://stackoverflow.com/questions/22842743/setting-java-home-environment-variable-on-mac-osx-10-9/31603196#31603196", "question_id": 22842743, "answer_id": 31603196}], "creation_date": 1396540177, "score": 60, "link": "http://stackoverflow.com/questions/22842743/setting-java-home-environment-variable-on-mac-osx-10-9", "question_id": 22842743}, {"body": "<p>This is the error that is thrown when trying to run my web app:</p>\n\n<pre><code>[INFO] WARNING: Nested in org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private javax.sql.DataSource org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.dataSource; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration$NonEmbeddedConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public javax.sql.DataSource org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$NonEmbeddedConfiguration.dataSource()] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath.:\n    [INFO] org.springframework.beans.factory.BeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath.\n    [INFO]  at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.getDriverClassName(DataSourceProperties.java:91)\n    [INFO]  at org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$NonEmbeddedConfiguration.dataSource(DataSourceAutoConfiguration.java:100)\n    [INFO]  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    [INFO]  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    [INFO]  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    [INFO]  at java.lang.reflect.Method.invoke(Method.java:606)\n    [INFO]  at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)\n    [INFO]  at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:166)\n    [INFO]  at org.springframework.beans.factory.support.ConstructorResolver$3.run(ConstructorResolver.java:580)\n    [INFO]  at java.security.AccessController.doPrivileged(Native Method)\n    [INFO]  at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:577)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1094)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:989)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:504)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\n    [INFO]  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\n    [INFO]  at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1017)\n    [INFO]  at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:960)\n    [INFO]  at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:858)\n    [INFO]  at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:480)\n    [INFO]  at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)\n    [INFO]  at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:289)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1185)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\n    [INFO]  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\n    [INFO]  at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:370)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1094)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:989)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:504)\n    [INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:304)\n    [INFO]  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:300)\n    [INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:195)\n    [INFO]  at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:973)\n    [INFO]  at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:750)\n    [INFO]  at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:482)\n    [INFO]  at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:683)\n    [INFO]  at org.springframework.boot.SpringApplication.run(SpringApplication.java:313)\n    [INFO]  at org.springframework.boot.builder.SpringApplicationBuilder.run(SpringApplicationBuilder.java:142)\n    [INFO]  at org.springframework.boot.legacy.context.web.SpringBootContextLoaderListener.initWebApplicationContext(SpringBootContextLoaderListener.java:60)\n    [INFO]  at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)\n    [INFO]  at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)\n    [INFO]  at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)\n    [INFO]  at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)\n    [INFO]  at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)\n    [INFO]  at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)\n    [INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\n    [INFO]  at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)\n    [INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\n    [INFO]  at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)\n    [INFO]  at org.mortbay.jetty.Server.doStart(Server.java:224)\n    [INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\n    [INFO]  at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:249)\n    [INFO]  at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:306)\n    [INFO]  at com.google.appengine.tools.development.AutomaticInstanceHolder.startUp(AutomaticInstanceHolder.java:26)\n    [INFO]  at com.google.appengine.tools.development.AbstractModule.startup(AbstractModule.java:79)\n    [INFO]  at com.google.appengine.tools.development.Modules.startup(Modules.java:88)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerImpl.doStart(DevAppServerImpl.java:254)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerImpl.access$000(DevAppServerImpl.java:47)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:212)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerImpl$1.run(DevAppServerImpl.java:210)\n    [INFO]  at java.security.AccessController.doPrivileged(Native Method)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:210)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:277)\n    [INFO]  at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerMain.run(DevAppServerMain.java:219)\n    [INFO]  at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:210)\n</code></pre>\n\n<p>I believe I have the right combination of <code>datanucleus-appengine</code> and <code>datanucleus</code> jars:</p>\n\n<blockquote>\n  <p>2.1: Requires DataNucleus 3.1.x (core, api-jdo, api-jpa, enhancer). Requires SDK 1.6.4+ Note that this release of Datanucleus is no longer\n  supported by the DataNucleus project</p>\n</blockquote>\n\n<p><strong>JPA App Config:</strong></p>\n\n<pre><code>@Configuration\n@EnableJpaRepositories(\"demo.core.entity\")\n@EnableTransactionManagement\nclass JpaApplicationConfig {\n    private static final Logger logger = Logger\n            .getLogger(JpaApplicationConfig.class.getName());\n    @Bean\n    public AbstractEntityManagerFactoryBean entityManagerFactory() {\n        logger.info(\"Loading Entity Manager...\");\n        LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\n        factory.setPersistenceUnitName(\"transactions-optional\");\n        return factory;\n    }\n    @Bean\n    public PlatformTransactionManager transactionManager() {\n        logger.info(\"Loading Transaction Manager...\");\n        JpaTransactionManager txManager = new JpaTransactionManager();\n        txManager.setEntityManagerFactory(entityManagerFactory().getObject());\n        return txManager;\n    }\n    @Bean\n    public PersistenceExceptionTranslator persistenceExceptionTranslator() {\n        return new OpenJpaDialect();\n    }\n}\n</code></pre>\n\n<p><strong>Application.java</strong></p>\n\n<pre><code>@Configuration\n@ComponentScan\n@EnableAutoConfiguration\n@RestController\npublic class Application {\n\n    private static final EntityManagerFactory INSTANCE =\n            Persistence.createEntityManagerFactory(\"transactions-optional\");\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n    @RequestMapping(\"/\")\n    public String home() {\n        return \"Hello World\";\n    }\n\n}\n</code></pre>\n\n<p><strong>POM:</strong></p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"...\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.demohq&lt;/groupId&gt;\n    &lt;artifactId&gt;demo-boot&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;name&gt;demo-boot&lt;/name&gt;\n    &lt;description&gt;Demo project&lt;/description&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.1.0.BUILD-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-legacy&lt;/artifactId&gt;\n            &lt;version&gt;1.1.0.BUILD-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!--&lt;dependency&gt;--&gt;\n            &lt;!--&lt;groupId&gt;net.kindleit&lt;/groupId&gt;--&gt;\n            &lt;!--&lt;artifactId&gt;gae-runtime&lt;/artifactId&gt;--&gt;\n            &lt;!--&lt;version&gt;${gae.version}&lt;/version&gt;--&gt;\n            &lt;!--&lt;type&gt;pom&lt;/type&gt;--&gt;\n            &lt;!--&lt;scope&gt;provided&lt;/scope&gt;--&gt;\n        &lt;!--&lt;/dependency&gt;--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!--&lt;dependency&gt;--&gt;\n            &lt;!--&lt;groupId&gt;org.hsqldb&lt;/groupId&gt;--&gt;\n            &lt;!--&lt;artifactId&gt;hsqldb&lt;/artifactId&gt;--&gt;\n            &lt;!--&lt;scope&gt;runtime&lt;/scope&gt;--&gt;\n        &lt;!--&lt;/dependency&gt;--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\n            &lt;artifactId&gt;appengine-api-labs&lt;/artifactId&gt;\n            &lt;version&gt;${gae.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\n            &lt;artifactId&gt;appengine-api-stubs&lt;/artifactId&gt;\n            &lt;version&gt;${gae.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\n            &lt;artifactId&gt;appengine-testing&lt;/artifactId&gt;\n            &lt;version&gt;${gae.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- DataNucleus --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\n            &lt;artifactId&gt;datanucleus-api-jpa&lt;/artifactId&gt;\n            &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\n            &lt;artifactId&gt;datanucleus-core&lt;/artifactId&gt;\n            &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\n            &lt;artifactId&gt;datanucleus-enhancer&lt;/artifactId&gt;\n            &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.appengine.orm&lt;/groupId&gt;\n            &lt;artifactId&gt;datanucleus-appengine&lt;/artifactId&gt;\n            &lt;version&gt;${datanucleus.version}&lt;/version&gt;\n            &lt;!-- Need to exclude the enhancer since it interfere with the enhancer plugin. --&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\n                    &lt;artifactId&gt;datanucleus-enhancer&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.jdo&lt;/groupId&gt;\n            &lt;artifactId&gt;jdo-api&lt;/artifactId&gt;\n            &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.geronimo.specs&lt;/groupId&gt;\n            &lt;artifactId&gt;geronimo-jpa_2.0_spec&lt;/artifactId&gt;\n            &lt;version&gt;1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- OpenJPA --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.openjpa&lt;/groupId&gt;\n            &lt;artifactId&gt;openjpa-persistence&lt;/artifactId&gt;\n            &lt;version&gt;2.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n    &lt;/dependencies&gt;\n\n    &lt;properties&gt;\n        &lt;start-class&gt;demo.Application&lt;/start-class&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;java.version&gt;1.7&lt;/java.version&gt;\n        &lt;m2eclipse.wtp.contextRoot&gt;/&lt;/m2eclipse.wtp.contextRoot&gt;\n        &lt;datanucleus.jpa.version&gt;3.1.1&lt;/datanucleus.jpa.version&gt;\n        &lt;datanucleus.version&gt;2.1.2&lt;/datanucleus.version&gt;\n        &lt;gae.version&gt;1.8.8&lt;/gae.version&gt;\n        &lt;gae.home&gt;${settings.localRepository}/com/google/appengine/appengine-java-sdk/${gae.version}/appengine-java-sdk/appengine-java-sdk-${gae.version}&lt;/gae.home&gt;\n        &lt;gae.application.version&gt;test&lt;/gae.application.version&gt;\n        &lt;!--&lt;org.springframework-version&gt;4.0.5.RELEASE&lt;/org.springframework-version&gt;--&gt;\n    &lt;/properties&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;!--\n            &lt;plugin&gt;\n                &lt;groupId&gt;net.kindleit&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-gae-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.9.6&lt;/version&gt;\n                &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;net.kindleit&lt;/groupId&gt;\n                        &lt;artifactId&gt;gae-runtime&lt;/artifactId&gt;\n                        &lt;version&gt;${gae.version}&lt;/version&gt;\n                        &lt;type&gt;pom&lt;/type&gt;\n                    &lt;/dependency&gt;\n                &lt;/dependencies&gt;\n            &lt;/plugin&gt;\n            --&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.google.appengine&lt;/groupId&gt;\n                &lt;artifactId&gt;appengine-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${gae.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;enableJarClasses&gt;false&lt;/enableJarClasses&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;goals&gt;gae:deploy&lt;/goals&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\n                &lt;artifactId&gt;tomcat6-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;path&gt;/&lt;/path&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-datanucleus-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;api&gt;JPA&lt;/api&gt;\n                    &lt;!--&lt;mappingIncludes&gt;**/entity/*.class&lt;/mappingIncludes&gt;--&gt;\n                    &lt;verbose&gt;true&lt;/verbose&gt;\n                &lt;/configuration&gt;\n                &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;\n                        &lt;artifactId&gt;datanucleus-core&lt;/artifactId&gt;\n                        &lt;version&gt;${datanucleus.jpa.version}&lt;/version&gt;\n                    &lt;/dependency&gt;\n                &lt;/dependencies&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;enhance&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;profiles&gt;\n        &lt;!-- We can configure our integration server to activate this profile and \n            perform gae:deploy, thus uploading latest snapshot to the http://1.latest.&lt;applicationName&gt;.appspot.com \n            automatically --&gt;\n        &lt;profile&gt;\n            &lt;id&gt;integration-build&lt;/id&gt;\n            &lt;properties&gt;\n                &lt;gae.application.version&gt;stage&lt;/gae.application.version&gt;\n            &lt;/properties&gt;\n        &lt;/profile&gt;\n\n        &lt;!-- This profile will activate automatically during release and upload \n            application to the http://2.latest.&lt;applicationName&gt;.appspot.com (We might \n            want to set the 2nd version as our applications Default version to be accessible \n            at http://&lt;applicationName&gt;.appspot.com) --&gt;\n        &lt;profile&gt;\n            &lt;id&gt;release-build&lt;/id&gt;\n            &lt;activation&gt;\n                &lt;property&gt;\n                    &lt;name&gt;performRelease&lt;/name&gt;\n                    &lt;value&gt;true&lt;/value&gt;\n                &lt;/property&gt;\n            &lt;/activation&gt;\n\n            &lt;properties&gt;\n                &lt;!-- During release, set application version in appengine-web.xml to \n                    2 --&gt;\n                &lt;gae.application.version&gt;release&lt;/gae.application.version&gt;\n            &lt;/properties&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;http://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;http://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;http://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/pluginRepository&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;http://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>I wonder what could be missing in my app? I followed the instruction from here <a href=\"http://stackoverflow.com/questions/15359784/using-spring-data-jpa-on-google-appengine\">Using Spring Data JPA on Google Appengine</a></p>\n", "tags": ["java", "google-app-engine", "jpa", "spring-data", "spring-boot"], "title": "Spring Boot - Cannot determine embedded database driver class for database type NONE", "answers": [{"body": "<p>You haven't provided Spring Boot with enough information to auto-configure a <code>DataSource</code>. To do so, you'll need to add some properties to <code>application.properties</code> with the <code>spring.datasource</code> prefix. Take a look at <a href=\"https://github.com/spring-projects/spring-boot/blob/master/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jdbc/DataSourceProperties.java\">DataSourceProperties</a> to see all of the properties that you can set. </p>\n\n<p>You'll need to provide the appropriate url and driver class name:</p>\n\n<pre><code>spring.datasource.url = \u2026\nspring.datasource.driver-class-name = \u2026\n</code></pre>\n", "title": "Spring Boot - Cannot determine embedded database driver class for database type NONE", "tags": ["java", "google-app-engine", "jpa", "spring-data", "spring-boot"], "link": "http://stackoverflow.com/questions/24074749/spring-boot-cannot-determine-embedded-database-driver-class-for-database-type/24086178#24086178", "question_id": 24074749, "answer_id": 24086178}, {"body": "<p>Now that I look closer, I think that the DataSource problem is a red-herring. Boot's Hibernate auto-configuration is being triggered and that's what causing a DataSource to be required. Hibernate's on the classpath because you've got a dependency on <code>spring-boot-starter-data-jpa</code> which pulls in <code>hibernate-entitymanager</code>.</p>\n\n<p>Update your <code>spring-boot-starter-data-jpa</code> dependency to exclude Hibernate:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n", "title": "Spring Boot - Cannot determine embedded database driver class for database type NONE", "tags": ["java", "google-app-engine", "jpa", "spring-data", "spring-boot"], "link": "http://stackoverflow.com/questions/24074749/spring-boot-cannot-determine-embedded-database-driver-class-for-database-type/24087111#24087111", "question_id": 24074749, "answer_id": 24087111}, {"body": "<p>I solved this by adding the following to my pom file.</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n        &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;version&gt;1.3.156&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n", "title": "Spring Boot - Cannot determine embedded database driver class for database type NONE", "tags": ["java", "google-app-engine", "jpa", "spring-data", "spring-boot"], "link": "http://stackoverflow.com/questions/24074749/spring-boot-cannot-determine-embedded-database-driver-class-for-database-type/25340415#25340415", "question_id": 24074749, "answer_id": 25340415}, {"body": "<p>In my case , I put it a maven dependency for org.jasig.cas in my pom that triggered a hibernate dependency and that caused Spring Boot to look for a datasource to auto-configure hibernate persistence.\nI solved it by adding the com.h2database maven dependency as suggested by user672009. Thanks guys!</p>\n", "title": "Spring Boot - Cannot determine embedded database driver class for database type NONE", "tags": ["java", "google-app-engine", "jpa", "spring-data", "spring-boot"], "link": "http://stackoverflow.com/questions/24074749/spring-boot-cannot-determine-embedded-database-driver-class-for-database-type/27814926#27814926", "question_id": 24074749, "answer_id": 27814926}, {"body": "<p>From the Spring manual (<a href=\"http://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-sql.html#boot-features-embedded-database-support\">http://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-sql.html#boot-features-embedded-database-support</a>):</p>\n\n<blockquote>\n  <p>Spring Boot can auto-configure embedded H2, HSQL and Derby databases. You don\u2019t need to provide any connection URLs, simply include a build dependency to the embedded database that you want to use.</p>\n  \n  <p>For example, typical POM dependencies would be:</p>\n</blockquote>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\n    &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>For me leaving out the spring-boot-starter-data-jpa dependency and just using the spring-boot-starter-jdbc dependency worked like a charm, as long as I had h2 (or hsqldb) included as dependencies.</p>\n", "title": "Spring Boot - Cannot determine embedded database driver class for database type NONE", "tags": ["java", "google-app-engine", "jpa", "spring-data", "spring-boot"], "link": "http://stackoverflow.com/questions/24074749/spring-boot-cannot-determine-embedded-database-driver-class-for-database-type/28950546#28950546", "question_id": 24074749, "answer_id": 28950546}, {"body": "<p>I don't if it is too late to answer. \nI could solve this issue by excluding DataSourceAutoConfiguration from spring boot.</p>\n", "title": "Spring Boot - Cannot determine embedded database driver class for database type NONE", "tags": ["java", "google-app-engine", "jpa", "spring-data", "spring-boot"], "link": "http://stackoverflow.com/questions/24074749/spring-boot-cannot-determine-embedded-database-driver-class-for-database-type/30875876#30875876", "question_id": 24074749, "answer_id": 30875876}, {"body": "<p>I'd the same problem and excluding the DataSourceAutoConfiguration solved the problem. </p>\n\n<pre><code>@SpringBootApplication\n@EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})\npublic class RecommendationEngineWithCassandraApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(RecommendationEngineWithCassandraApplication.class, args);\n    }\n}\n</code></pre>\n", "title": "Spring Boot - Cannot determine embedded database driver class for database type NONE", "tags": ["java", "google-app-engine", "jpa", "spring-data", "spring-boot"], "link": "http://stackoverflow.com/questions/24074749/spring-boot-cannot-determine-embedded-database-driver-class-for-database-type/32095553#32095553", "question_id": 24074749, "answer_id": 32095553}, {"body": "<p>Doing below works. \n@EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})</p>\n\n<p>But If I wanted to have dataSource, I should not do the above configuration. \nThe below link says that we need to all the properties in application.properties file. All the properties should start with \n<code>spring.datasource.*</code></p>\n\n<p><a href=\"http://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html\" rel=\"nofollow\">http://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html</a></p>\n", "title": "Spring Boot - Cannot determine embedded database driver class for database type NONE", "tags": ["java", "google-app-engine", "jpa", "spring-data", "spring-boot"], "link": "http://stackoverflow.com/questions/24074749/spring-boot-cannot-determine-embedded-database-driver-class-for-database-type/32720979#32720979", "question_id": 24074749, "answer_id": 32720979}, {"body": "<p>This worked for me (1.3.0.M5) :</p>\n\n<pre><code>import org.springframework.boot.autoconfigure.jdbc.*;\nimport org.springframework.boot.autoconfigure.orm.jpa.*;\n\n@Configuration\n@EnableAutoConfiguration(exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class})\n//\npublic class Application {\n</code></pre>\n\n<p>Exclude both classes.</p>\n\n<p>It did not work with</p>\n\n<pre><code>@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class})\n</code></pre>\n", "title": "Spring Boot - Cannot determine embedded database driver class for database type NONE", "tags": ["java", "google-app-engine", "jpa", "spring-data", "spring-boot"], "link": "http://stackoverflow.com/questions/24074749/spring-boot-cannot-determine-embedded-database-driver-class-for-database-type/33085173#33085173", "question_id": 24074749, "answer_id": 33085173}, {"body": "<p>As this is one of the first topics returned in google for this error, I'll post what I did in case someone face the same issue..\nI didn't want to exclude <code>DataSourceAutoConfiguration</code> neither use a memory database.. </p>\n\n<p>In my case I was setting the parameters as the other repliers said but the <code>application.properties</code> file was inside the wrong folder.. lol</p>\n\n<p>So in case nothing like this works, check if the file is inside <code>src/main/resources</code>! In my case it was inside <code>src/main/resources/static</code></p>\n", "title": "Spring Boot - Cannot determine embedded database driver class for database type NONE", "tags": ["java", "google-app-engine", "jpa", "spring-data", "spring-boot"], "link": "http://stackoverflow.com/questions/24074749/spring-boot-cannot-determine-embedded-database-driver-class-for-database-type/33451297#33451297", "question_id": 24074749, "answer_id": 33451297}, {"body": "<p>Answer is very simple, SpringBoot will look for Embeddable database driver, If you didn't configure in any of your configuration in form of XML or Annotations, it will throws this exception.\nMake the changes in your annotation like this\n<pre><code>@EnableAutoConfiguration(exclude=DataSourceAutoConfiguration.class)</pre></code> this will exclude the DataSourceAutoConfiguration.\nAnd the Perfect Simple Coding completion would be work if you have properly configured your class.\n<pre><code>\n    <code>@Controller</code>\n    <code>@EnableAutoConfiguration(exclude=DataSourceAutoConfiguration.class)</code>\n     <code>public class SimpleController {</code>\n      <code>@RequestMapping(\"/\")</code>\n      <code>@ResponseBody</code>\n       <code>String home() {</code>\n        <code>return \"Hello World!\";</code>\n       <code>}public static void main(String[] args) throws Exception {</code>\n        <code>SpringApplication.run(SimpleController.class, args);</code>\n       <code>}</code>\n    <code>}</code></pre></code></p>\n", "title": "Spring Boot - Cannot determine embedded database driver class for database type NONE", "tags": ["java", "google-app-engine", "jpa", "spring-data", "spring-boot"], "link": "http://stackoverflow.com/questions/24074749/spring-boot-cannot-determine-embedded-database-driver-class-for-database-type/34918484#34918484", "question_id": 24074749, "answer_id": 34918484}, {"body": "<p>You can download the derby-10.10.1.1.jar from the <a href=\"http://mvnrepository.com/artifact/org.apache.derby/derby/10.10.1.1\" rel=\"nofollow\">Maven Repository</a> and place it in your WEB-INF/lib folder, like this Application/WEB-INF/lib/derby-10.10.1.1.jar.\nYour embedded AnnotationConfigEmbeddedWebApplicationContext will pickup the database driver and your webserver will start running without any issues :-)</p>\n", "title": "Spring Boot - Cannot determine embedded database driver class for database type NONE", "tags": ["java", "google-app-engine", "jpa", "spring-data", "spring-boot"], "link": "http://stackoverflow.com/questions/24074749/spring-boot-cannot-determine-embedded-database-driver-class-for-database-type/34921106#34921106", "question_id": 24074749, "answer_id": 34921106}, {"body": "<p>I solve my problem just adding <strong>@AutoConfigureTestDatabase(replace=Replace.NONE)</strong></p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@DataJpaTest\n@AutoConfigureTestDatabase(replace=Replace.NONE)\npublic class TestClienteRepository {\n\n}\n</code></pre>\n", "title": "Spring Boot - Cannot determine embedded database driver class for database type NONE", "tags": ["java", "google-app-engine", "jpa", "spring-data", "spring-boot"], "link": "http://stackoverflow.com/questions/24074749/spring-boot-cannot-determine-embedded-database-driver-class-for-database-type/38806026#38806026", "question_id": 24074749, "answer_id": 38806026}, {"body": "<p>If you are using Gradle, include right jar of driver as below:</p>\n\n<pre><code>compile(\"org.mongodb:mongo-java-driver:3.3.0\")\n</code></pre>\n\n<p>Or if using Maven then do it in Maven style, it should solve your problem.</p>\n", "title": "Spring Boot - Cannot determine embedded database driver class for database type NONE", "tags": ["java", "google-app-engine", "jpa", "spring-data", "spring-boot"], "link": "http://stackoverflow.com/questions/24074749/spring-boot-cannot-determine-embedded-database-driver-class-for-database-type/39314301#39314301", "question_id": 24074749, "answer_id": 39314301}], "creation_date": 1402032284, "score": 60, "link": "http://stackoverflow.com/questions/24074749/spring-boot-cannot-determine-embedded-database-driver-class-for-database-type", "question_id": 24074749}, {"body": "<p>I am attempting to run a Java application on a cluster computing environment (IBM LSF running CentOS release 6.2 Final) that can provide me with up to 1TB of RAM space.</p>\n\n<p>I could create a JVM with up to 300GB of maximum memory (Xmx), although I need more than that (I can provide details, if requested). </p>\n\n<p>However, it seems to be impossible to create a JVM with more than 300GB of maximum memory using the Xmx option. To be more specific, I get the classic error message:</p>\n\n<blockquote>\n  <p>Error occurred during initialization of VM. </p>\n  \n  <p>Could not reserve enough space for object heap.</p>\n</blockquote>\n\n<p>The details of my (64-bit) JVM are below:</p>\n\n<blockquote>\n  <p>OpenJDK Runtime Environment (IcedTea6 1.10.6) (rhel-1.43.1.10.6.el6_2-x86_64)</p>\n  \n  <p>OpenJDK 64-Bit Server VM (build 20.0-b11, mixed mode)</p>\n</blockquote>\n\n<p>I've also tried with a Java 7 64-bit JVM but I've had exactly the same problem.</p>\n\n<p>Moreover, I tried to create a JVM to run a HelloWorld.jar, but still JVM creation fails if you ask for more than -Xmx300G, so I don't think it has anything to do with the specific application.</p>\n\n<hr>\n\n<p>Does anyone have any idea why I cannot create a JVM with more than 300G of max memory?</p>\n\n<p>Can anyone please suggest a solution/workaround?</p>\n", "tags": ["java", "memory-management", "jvm", "cluster-computing"], "title": "64-bit JVM limited to 300GB of memory?", "answers": [{"body": "<p>If you have a look at the <a href=\"http://www.oracle.com/technetwork/java/hotspotfaq-138619.html\">FAQ section</a> of Java HotSpot VM, its mentioned that on 64-bit VMs, there are only 64 address bits to work with and hence the maximum Java heap size is dependent on the amount of physical memory &amp; swap space present on the system.</p>\n\n<p>If you calculate theoretically then you can have a memory of <strong>18446744073709551616 MB</strong>, but there are above limitation to it.</p>\n\n<p>You have to use <code>-Xmx</code> command to define maximum heap size for JVM, <a href=\"http://www.oracle.com/technetwork/java/hotspotfaq-138619.html#gc_heap_32bit\">By default</a>, Java uses 64 + 30% = 83.2MB on 64-bit JVMs.</p>\n\n<p>I tried below command on my machine and it looked to work fine.</p>\n\n<pre><code>java -Xmx500g com.test.TestClass\n</code></pre>\n\n<p><em>I also tried to define maximum heap in terabytes but it doesn't work.</em></p>\n", "title": "64-bit JVM limited to 300GB of memory?", "tags": ["java", "memory-management", "jvm", "cluster-computing"], "link": "http://stackoverflow.com/questions/22711247/64-bit-jvm-limited-to-300gb-of-memory/22713816#22713816", "question_id": 22711247, "answer_id": 22713816}, {"body": "<p>I can think of a couple of possible explanations:</p>\n\n<ul>\n<li><p>Other applications on your system are using so much memory that there isn't 300Gb <em>available right now</em>.</p></li>\n<li><p>There could be a resource limit on the per-process memory size.  You can check this using <code>ulimit</code>.  (Note that according to <a href=\"http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7112912\">this bug</a>, you will get the error message if the per-process resource limit stops the JVM allocating the heap regions.)</p></li>\n<li><p>It is also possible that this is an \"over commit\" issue; e.g. if your application is running in a virtual and the system as a whole cannot meet the demand because there is too much competition from other virtuals.</p></li>\n</ul>\n\n<hr>\n\n<p>A couple of the other ideas suggested are (IMO) unlikely:</p>\n\n<ul>\n<li><p>Switching the JRE is unlikely to make any difference.  I've never heard or seen of arbitrary memory limits in specific 64 bit JVMs.</p></li>\n<li><p>It is unlikely to be due to not having enough <em>contiguous</em> memory.  Certainly contiguous physical memory is not required.  The only possibility might be contiguous space on the swap device, but I don't recall that being an issue for typical Linux OSes.</p></li>\n</ul>\n\n<hr>\n\n<blockquote>\n  <p>Can anyone please suggest a solution/workaround?</p>\n</blockquote>\n\n<ul>\n<li><p>Check the <code>ulimit</code>.</p></li>\n<li><p>Write a tiny C program that attempts to <code>malloc</code> lots of memory and see how much that can allocate before it fails.</p></li>\n<li><p>Ask the system (or hypervisor) administrator for help.</p></li>\n</ul>\n", "title": "64-bit JVM limited to 300GB of memory?", "tags": ["java", "memory-management", "jvm", "cluster-computing"], "link": "http://stackoverflow.com/questions/22711247/64-bit-jvm-limited-to-300gb-of-memory/22715301#22715301", "question_id": 22711247, "answer_id": 22715301}, {"body": "<p>Run ulimit -a as the JVM Process's user and verify that your kernel isn't limiting your max memory size.  You may need to edit /etc/security/limit.conf</p>\n", "title": "64-bit JVM limited to 300GB of memory?", "tags": ["java", "memory-management", "jvm", "cluster-computing"], "link": "http://stackoverflow.com/questions/22711247/64-bit-jvm-limited-to-300gb-of-memory/22715342#22715342", "question_id": 22711247, "answer_id": 22715342}, {"body": "<p>According to <a href=\"http://scicomp.stackexchange.com/questions/10778/does-ibm-lsf-facilitate-parallel-computing\">this discussion</a>, LSF does not pool node memory into a single shared space. You are using something else for that. Read that something's documentation, because it is possible it cannot do what you are asking it to do. In particular, it may not be able to allocate a single <em>contiguous</em> region of memory that spans all the nodes. Usually that's not necessary, as an application will make many calls to malloc. But the JVM, to simplify things for itself, wants to allocate (or reserve)  a single contiguous region for the entire heap by effectively calling malloc just once. Or it could be something else related to whatever you are using to emulate a giant shared memory machine.</p>\n", "title": "64-bit JVM limited to 300GB of memory?", "tags": ["java", "memory-management", "jvm", "cluster-computing"], "link": "http://stackoverflow.com/questions/22711247/64-bit-jvm-limited-to-300gb-of-memory/22801163#22801163", "question_id": 22711247, "answer_id": 22801163}, {"body": "<p><em>(edited, see added section on swap space)</em></p>\n\n<h3>SHMMAX and SHMALL</h3>\n\n<p>Since you are using CentOS, you may have run into a similar issue about the <code>SHMMAX</code> and <code>SHMALL</code> kernel setting as described <a href=\"http://seriousbirder.com/blogs/centos-6-setting-shmmax-and-shmall-kernel-paramaters/\">here for configuring the Oracle DB</a>. Under that same link is an example calculation for getting and setting the correct <code>SHMALL</code> setting.</p>\n\n<h3>Contiguous memory</h3>\n\n<p>Certain users have already reported that not enough contiguous memory is available, others have said it is irrelevant. </p>\n\n<p>I am not certain whether the JVM on CentOS requires a contiguous block of memory. <a href=\"http://support.sas.com/kb/37/277.html\">According to SAS</a>, fragmented memory can prevent your JVM to startup with a large max <code>Xmx</code> or start <code>Xms</code> memory setting, but other claims on the internet say it doesn't matter. I tried to proof or unproof that claim on my 48GB Windows workstation, but managed to start the JVM with an initial and max setting of 40GB. I am pretty sure that no contiguous block of that size was available, but JVMs on different OS's may behave differently, because the memory management can be different per OS (i.e., Windows typically hides the physical addresses for individual processes).</p>\n\n<h3>Finding the largest contiguous memory block</h3>\n\n<p>Use <code>/proc/meminfo</code> to find the largest contiguous memory block available, see the value under <code>VmAllocChunk</code>. <a href=\"https://www.centos.org/docs/5/html/5.1/Deployment_Guide/s2-proc-meminfo.html\">Here's a guide and explanation</a> of all values. If the value you see there is smaller than 300GB, try a value that falls right under the value of <code>VmAllocChunk</code>.</p>\n\n<p>However, usually this number is higher than the physically available memory (because it is the <em>virtual</em> memory value available), it may give you a false positive. It is the value you can reserve, but once you start using it, it may require swapping. You should therefore also check the <code>MemFree</code> and the <code>Inactive</code> values. Conversely, you can also look at the whole list and see what values do not surpass 300GB.</p>\n\n<h3>Other tuning options you can check for 64 bit JVM</h3>\n\n<p>I am not sure why you seem to hit a memory limit issue at 300GB. For a moment I thought you might have hit a maximum of pages. With the default of 4kB, 300GB gives <code>78,643,200</code> pages. Doesn't look like some well-known magical number. If, for instance, <code>2^24</code> is the maximum, then <code>16,777,216</code> pages, or 64GB should be your theoretical allocatable maximum.</p>\n\n<p>However, suppose for the sake of argument that you need larger pages (which is, as it turns out, better for performance of large memory Java applications), you should <a href=\"https://access.redhat.com/site/documentation/en-US/JBoss_Enterprise_Application_Platform/5/html/Performance_Tuning_Guide/sect-Performance_Tuning_Guide-Java_Virtual_Machine_Tuning-Large_Page_Memory.html\">consult this manpage on JBoss</a>, which explains how to use <code>-XX:+UseLargePages</code> and set <code>kernel.shmmax</code> (there it is again), <code>vm.nr_hugepages</code> and <code>vm.huge_tlb_shm_group</code> (not sure the latter is required).</p>\n\n<h3>Stress your system</h3>\n\n<p>Others have suggested this already as well. To find out that the problem lies with the JVM and not with the OS, you should stresstest it. One tool you could use is <a href=\"http://www.stresslinux.org/sl/\">Stresslinux</a>. <a href=\"http://www.linux.com/learn/tutorials/613523%3astresslinux-torture-tests-your-hardware\">In this tutorial</a>, you find some options you can use. Of particular interest to you is the following command:</p>\n\n<pre><code>stress --vm 2 --vm-bytes 300G --timeout 30s --verbose\n</code></pre>\n\n<p>If that command fails, or locks your system, you know that the OS is limiting the use of that amount of memory. If it succeeds, we should try to tweak the JVM such that it can use the available memory.</p>\n\n<h3>EDIT Apr6: check swap space</h3>\n\n<p>It is not uncommon that systems with very large internal memory sizes, use little or no swap space. For many applications this may not be a problem, but the JVM requires the swap available swap space to be larger than the requested memory size. According to <a href=\"http://bugs.java.com/bugdatabase/view_bug.do?bug_id=4697804\">this bug report</a>, the JVM will try to increase the swap space itself, however, as some answers in <a href=\"http://stackoverflow.com/questions/4401396/could-not-reserve-enough-space-for-object-heap/16461785#16461785\">this SO thread suggested</a>, the JVM may not always be capable of doing so.</p>\n\n<p>Hence: check the currently available swap space with <code>cat /proc/swaps # free</code> and, if it is smaller than 300GB, follow <a href=\"http://www.centos.org/docs/5/html/Deployment_Guide-en-US/s1-swap-adding.html\">the instructions on this CentOS manpage</a> to increase the swap space for your system.</p>\n\n<p>Note 1: we can deduct from <a href=\"http://bugs.java.com/bugdatabase/view_bug.do?bug_id=4719001\">bugreport #4719001</a> that a <em>contiguous</em> block of available swap space is not a necessity. But if you are unsure, <a href=\"http://www.centos.org/docs/5/html/Deployment_Guide-en-US/s1-swap-adding.html\">remove all swap space and recreate it</a>, which should remove any fragmentation.</p>\n\n<p>Note 2: I have seen several posts like <a href=\"http://stackoverflow.com/questions/6642184/could-not-reserve-enough-space-for-object-heap-to-start-jvm\">this one</a> reporting <code>0MB</code> swap space <em>and</em> being able to run the JVM. That is probably due to the fact that the JVM increases the swap space itself. Still doesn't hurt to try to increase the swap space by hand to find out whether it fixes your issue.</p>\n\n<h3>Premature conclusion</h3>\n\n<p>I realize that non of the above is an out-of-the-box answer to your question. I hope it gives you some pointers though to what you can try to get your JVM working. You might also try other JVM's, if the problem turns out to be a limit of the JVM you are currently using, but from what I have read so far, no limit should be imposed for 64 bit JVM's. </p>\n\n<p>That you get the error right on initialization of the JVM leads me to believe that the problem is not with the JVM, but with the OS not being able to comply to the reservation of the 300GB of memory.</p>\n\n<p>My own tests showed that the JVM can access all virtual memory, and doesn't care about the amount of physical memory available. It would be odd if the virtual memory is lower than the physical memory, but the <code>VmAllocChunk</code> setting should give you a hint in that direction (it is usually much larger).</p>\n", "title": "64-bit JVM limited to 300GB of memory?", "tags": ["java", "memory-management", "jvm", "cluster-computing"], "link": "http://stackoverflow.com/questions/22711247/64-bit-jvm-limited-to-300gb-of-memory/22838143#22838143", "question_id": 22711247, "answer_id": 22838143}], "creation_date": 1396005093, "score": 59, "link": "http://stackoverflow.com/questions/22711247/64-bit-jvm-limited-to-300gb-of-memory", "question_id": 22711247}, {"body": "<p>I'm not able to split values from this string: </p>\n\n<p><code>\"Food 1 | Service 3 | Atmosphere 3 | Value for money 1 \"</code></p>\n\n<p>Here's my current code:</p>\n\n<pre><code>String rat_values = \"Food 1 | Service 3 | Atmosphere 3 | Value for money 1 \";\nString[] value_split = rat_values.split(\"|\");\n</code></pre>\n\n<h3>Output</h3>\n\n<blockquote>\n  <p>[, F, o, o, d,  , 1,  , |,  , S, e, r, v, i, c, e,  , 3,  , |,  , A, t, m, o, s, p, h, e, r, e,  , 3,  , |,  , V, a, l, u, e,  , f, o, r,  , m, o, n, e, y,  , 1,  ]</p>\n</blockquote>\n\n<h3>Expected output</h3>\n\n<blockquote>\n  <p>Food 1<br>\n  Service 3<br>\n  Atmosphere 3<br>\n  Value for money 1</p>\n</blockquote>\n", "tags": ["java", "regex"], "title": "Splitting string with pipe character (&quot;|&quot;)", "answers": [{"body": "<p><code>|</code> is a metacharacter in regex.  You'd need to escape it:</p>\n\n<pre><code>String[] value_split = rat_values.split(\"\\\\|\");\n</code></pre>\n", "title": "Splitting string with pipe character (&quot;|&quot;)", "tags": ["java", "regex"], "link": "http://stackoverflow.com/questions/21524642/splitting-string-with-pipe-character/21524670#21524670", "question_id": 21524642, "answer_id": 21524670}, {"body": "<p>split takes regex as a parameter.<code>|</code> has special meaning in regex.. use <code>\\\\|</code> instead of <code>|</code> to escape it.</p>\n", "title": "Splitting string with pipe character (&quot;|&quot;)", "tags": ["java", "regex"], "link": "http://stackoverflow.com/questions/21524642/splitting-string-with-pipe-character/21524682#21524682", "question_id": 21524642, "answer_id": 21524682}, {"body": "<p>Or.. <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29\"><code>Pattern#quote</code></a>:</p>\n\n<pre><code>String[] value_split = rat_values.split(Pattern.quote(\"|\"));\n</code></pre>\n\n<p>This is happening because <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29\"><code>String#split</code></a> accepts a <em>regex</em>:</p>\n\n<p><code>|</code> has a <a href=\"http://www.regular-expressions.info/characters.html\">special meaning in regex</a>.</p>\n\n<p><code>quote</code> will return a String representation for the <em>regex</em>.</p>\n", "title": "Splitting string with pipe character (&quot;|&quot;)", "tags": ["java", "regex"], "link": "http://stackoverflow.com/questions/21524642/splitting-string-with-pipe-character/21524694#21524694", "question_id": 21524642, "answer_id": 21524694}, {"body": "<pre><code>String rat_values = \"Food 1 | Service 3 | Atmosphere 3 | Value for money 1 \";\n    String[] value_split = rat_values.split(\"\\\\|\");\n    for (String string : value_split) {\n\n        System.out.println(string);\n\n    }\n</code></pre>\n", "title": "Splitting string with pipe character (&quot;|&quot;)", "tags": ["java", "regex"], "link": "http://stackoverflow.com/questions/21524642/splitting-string-with-pipe-character/21524709#21524709", "question_id": 21524642, "answer_id": 21524709}, {"body": "<h2>Using Pattern.quote()</h2>\n\n<pre><code>String[] value_split = rat_values.split(Pattern.quote(\"|\"));\n\n//System.out.println(Arrays.toString(rat_values.split(Pattern.quote(\"|\")))); //(FOR GETTING OUTPUT)\n</code></pre>\n\n<h2>Using Escape characters(for metacharacters)</h2>\n\n<pre><code>String[] value_split = rat_values.split(\"\\\\|\");\n//System.out.println(Arrays.toString(rat_values.split(\"\\\\|\"))); //(FOR GETTING OUTPUT)\n</code></pre>\n\n<h2>Using StringTokenizer(For avoiding regular expression issues)</h2>\n\n<pre><code>public static String[] splitUsingTokenizer(String Subject, String Delimiters) \n{\n     StringTokenizer StrTkn = new StringTokenizer(Subject, Delimiters);\n     ArrayList&lt;String&gt; ArrLis = new ArrayList&lt;String&gt;(Subject.length());\n     while(StrTkn.hasMoreTokens())\n     {\n       ArrLis.add(StrTkn.nextToken());\n     }\n     return ArrLis.toArray(new String[0]);\n}\n</code></pre>\n\n<h2>Using Pattern class(java.util.regex.Pattern)</h2>\n\n<pre><code>Arrays.asList(Pattern.compile(\"\\\\|\").split(rat_values))\n//System.out.println(Arrays.asList(Pattern.compile(\"\\\\|\").split(rat_values))); //(FOR GETTING OUTPUT)\n</code></pre>\n\n<h2>Output</h2>\n\n<pre><code>[Food 1 ,  Service 3 ,  Atmosphere 3 ,  Value for money 1 ]\n</code></pre>\n", "title": "Splitting string with pipe character (&quot;|&quot;)", "tags": ["java", "regex"], "link": "http://stackoverflow.com/questions/21524642/splitting-string-with-pipe-character/21524819#21524819", "question_id": 21524642, "answer_id": 21524819}], "creation_date": 1391422742, "score": 58, "link": "http://stackoverflow.com/questions/21524642/splitting-string-with-pipe-character", "question_id": 21524642}, {"body": "<pre><code>Execution default of goal \norg.springframework.boot:spring-boot-maven-plugin:1.0.1.RELEASE:repackage \nfailed: \nUnable to find a single main class from the following candidates\n</code></pre>\n\n<p>My project has more than one class with a <code>main</code> method. How do I tell the Spring Boot Maven plugin which of the classes it should use as the main class?</p>\n", "tags": ["java", "spring", "maven", "executable-jar", "spring-boot"], "title": "How do I tell Spring Boot which main class to use for the executable jar?", "answers": [{"body": "<p>Add your start class in your pom:</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;!-- The main class to start by executing java -jar --&gt;\n    &lt;start-class&gt;com.mycorp.starter.HelloWorldApplication&lt;/start-class&gt;\n&lt;/properties&gt;\n</code></pre>\n", "title": "How do I tell Spring Boot which main class to use for the executable jar?", "tags": ["java", "spring", "maven", "executable-jar", "spring-boot"], "link": "http://stackoverflow.com/questions/23217002/how-do-i-tell-spring-boot-which-main-class-to-use-for-the-executable-jar/23217203#23217203", "question_id": 23217002, "answer_id": 23217203}, {"body": "<p>If you do NOT use the spring-boot-starter-parent pom, then from the <a href=\"http://docs.spring.io/spring-boot/docs/1.0.1.RELEASE/reference/html/build-tool-plugins-maven-plugin.html#build-tool-plugins-maven-packaging-optional-params\">Spring documentation</a>:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;1.1.3.RELEASE&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;mainClass&gt;my.package.MyStartClass&lt;/mainClass&gt;\n        &lt;layout&gt;ZIP&lt;/layout&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;repackage&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n", "title": "How do I tell Spring Boot which main class to use for the executable jar?", "tags": ["java", "spring", "maven", "executable-jar", "spring-boot"], "link": "http://stackoverflow.com/questions/23217002/how-do-i-tell-spring-boot-which-main-class-to-use-for-the-executable-jar/24606025#24606025", "question_id": 23217002, "answer_id": 24606025}, {"body": "<p>I used gradle wrapper <code>gradlew</code> instead <code>gradle</code> and worked for me.</p>\n", "title": "How do I tell Spring Boot which main class to use for the executable jar?", "tags": ["java", "spring", "maven", "executable-jar", "spring-boot"], "link": "http://stackoverflow.com/questions/23217002/how-do-i-tell-spring-boot-which-main-class-to-use-for-the-executable-jar/30104022#30104022", "question_id": 23217002, "answer_id": 30104022}, {"body": "<p>For those using Gradle (instead of Maven) :</p>\n\n<pre><code>springBoot {\n    mainClass = \"com.example.Main\"\n}\n</code></pre>\n", "title": "How do I tell Spring Boot which main class to use for the executable jar?", "tags": ["java", "spring", "maven", "executable-jar", "spring-boot"], "link": "http://stackoverflow.com/questions/23217002/how-do-i-tell-spring-boot-which-main-class-to-use-for-the-executable-jar/31040641#31040641", "question_id": 23217002, "answer_id": 31040641}, {"body": "<p>If you're using spring-boot-starter-parent in your pom, you simply add the following to your pom:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>Then do your mvn package.</p>\n\n<p>See <a href=\"http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/html/getting-started-first-application.html#getting-started-first-application-executable-jar\" rel=\"nofollow\">this Spring docs page</a>.</p>\n\n<p>A very important aspect here is to mention that the directory structure has to be src/main/java/nameofyourpackage </p>\n", "title": "How do I tell Spring Boot which main class to use for the executable jar?", "tags": ["java", "spring", "maven", "executable-jar", "spring-boot"], "link": "http://stackoverflow.com/questions/23217002/how-do-i-tell-spring-boot-which-main-class-to-use-for-the-executable-jar/31631812#31631812", "question_id": 23217002, "answer_id": 31631812}, {"body": "<p>I had renamed my project and it was still finding the old <code>Application</code> class on the build path. I removed it in the 'build' folder and all was fine.</p>\n", "title": "How do I tell Spring Boot which main class to use for the executable jar?", "tags": ["java", "spring", "maven", "executable-jar", "spring-boot"], "link": "http://stackoverflow.com/questions/23217002/how-do-i-tell-spring-boot-which-main-class-to-use-for-the-executable-jar/32889903#32889903", "question_id": 23217002, "answer_id": 32889903}], "creation_date": 1398162681, "score": 58, "link": "http://stackoverflow.com/questions/23217002/how-do-i-tell-spring-boot-which-main-class-to-use-for-the-executable-jar", "question_id": 23217002}, {"body": "<p>I have found this great solution for rounding:</p>\n\n<pre><code>static Double round(Double d, int precise) {\n    BigDecimal bigDecimal = new BigDecimal(d);\n    bigDecimal = bigDecimal.setScale(precise, RoundingMode.HALF_UP);\n    return bigDecimal.doubleValue();\n}\n</code></pre>\n\n<p>However, the results are confusing:</p>\n\n<pre><code>System.out.println(round(2.655d,2)); // -&gt; 2.65\nSystem.out.println(round(1.655d,2)); // -&gt; 1.66\n</code></pre>\n\n<p>Why is it giving this output? I'm using jre 1.7.0_45.</p>\n", "tags": ["java", "floating-point"], "title": "Round a double in Java", "answers": [{"body": "<p>As said in <a href=\"http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#BigDecimal%28double%29\" rel=\"nofollow\">API</a></p>\n\n<blockquote>\n  <ol>\n  <li><p>The results of this constructor can be somewhat unpredictable. One might assume that writing new BigDecimal(0.1) in Java creates a\n  BigDecimal which is exactly equal to 0.1 (an unscaled value of 1, with\n  a scale of 1), but it is actually equal to\n  0.1000000000000000055511151231257827021181583404541015625. This is because 0.1 cannot be represented exactly as a double (or, for that\n  matter, as a binary fraction of any finite length). Thus, the value\n  that is being passed in to the constructor is not exactly equal to\n  0.1, appearances notwithstanding. </p></li>\n  <li><p>The String constructor, on the other hand, is perfectly predictable: writing new BigDecimal(\"0.1\") creates a BigDecimal which\n  is exactly equal to 0.1, as one would expect. Therefore, it is\n  generally recommended that the String constructor be used in\n  preference to this one.</p></li>\n  <li><p>When a double must be used as a source for a BigDecimal, note that this constructor provides an exact conversion; it does not give the\n  same result as converting the double to a String using the\n  Double.toString(double) method and then using the BigDecimal(String)\n  constructor. To get that result, use the static valueOf(double)\n  method.</p></li>\n  </ol>\n</blockquote>\n\n<p>It's because of cannot represent double value exactly. So you have to use <code>BigDecimal bigDecimal = BigDecimal.valueOf(d);</code> instead of <code>BigDecimal bigDecimal = new BigDecimal(d);</code></p>\n", "title": "Round a double in Java", "tags": ["java", "floating-point"], "link": "http://stackoverflow.com/questions/22036885/round-a-double-in-java/22037068#22037068", "question_id": 22036885, "answer_id": 22037068}, {"body": "<p>Decimal numbers can't be represented exactly in double.</p>\n\n<p>So 2.655 ends up being this:\n2.65499999999999980460074766597</p>\n\n<p>whereas 1.655 ends up being this:\n1.655000000000000026645352591</p>\n", "title": "Round a double in Java", "tags": ["java", "floating-point"], "link": "http://stackoverflow.com/questions/22036885/round-a-double-in-java/22037083#22037083", "question_id": 22036885, "answer_id": 22037083}, {"body": "<p>Rounding a <code>double</code> resp <code>Double</code> in itself does not make much sense, as a <code>double</code> datatype <strong>cannot</strong> be rounded (easily, or at all?).</p>\n\n<p>What you are doing is:</p>\n\n<ol>\n<li>Take a <code>Double d</code> as input and a <code>int precise</code> number of digits behind the seperator.</li>\n<li>Create a <code>BigDecimal</code> from that <code>d</code>.</li>\n<li>Round the <code>BigDecimal</code> correctly.</li>\n<li>Return the <code>double</code> value of that <code>BigDecimal</code>, which has no <em>rounding</em> applied to it anymore.</li>\n</ol>\n\n<p>You can go two ways:</p>\n\n<ol>\n<li>You can return a <code>BigDecimal</code> that represents the rounded double, and later decide what you do with it.</li>\n<li>You can return a <code>String</code> representing the rounded <code>BigDecimal</code>.</li>\n</ol>\n\n<p>Either of those ways will make sense.</p>\n", "title": "Round a double in Java", "tags": ["java", "floating-point"], "link": "http://stackoverflow.com/questions/22036885/round-a-double-in-java/22037089#22037089", "question_id": 22036885, "answer_id": 22037089}, {"body": "<p><a href=\"http://ideone.com/Hq4TuE\">This test case</a> ends up pretty self-explanatory:</p>\n\n<pre><code>public static void main (String[] args) throws java.lang.Exception\n{\n    System.out.println(\"Rounded: \" + round(2.655d,2)); // -&gt; 2.65\n    System.out.println(\"Rounded: \" + round(1.655d,2)); // -&gt; 1.66\n}\n\npublic static Double round(Double d, int precise)\n{       \n    BigDecimal bigDecimal = new BigDecimal(d);\n    System.out.println(\"Before round: \" + bigDecimal.toPlainString());\n    bigDecimal = bigDecimal.setScale(precise, RoundingMode.HALF_UP);\n    System.out.println(\"After round: \" + bigDecimal.toPlainString());\n    return bigDecimal.doubleValue();\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Before round: 2.654999999999999804600747665972448885440826416015625\nAfter round: 2.65\nRounded: 2.65\n\nBefore round: 1.6550000000000000266453525910037569701671600341796875\nAfter round: 1.66\nRounded: 1.66\n</code></pre>\n\n<p>A dirty hack to fix it would be to <a href=\"http://ideone.com/OwItNM\">round in two steps</a>:</p>\n\n<pre><code>static Double round(Double d, int precise)\n{\n    BigDecimal bigDecimal = new BigDecimal(d);\n    System.out.println(\"Before round: \" + bigDecimal.toPlainString());\n    bigDecimal = bigDecimal.setScale(15, RoundingMode.HALF_UP);\n    System.out.println(\"Hack round: \" + bigDecimal.toPlainString());\n    bigDecimal = bigDecimal.setScale(precise, RoundingMode.HALF_UP);\n    System.out.println(\"After round: \" + bigDecimal.toPlainString());\n    return bigDecimal.doubleValue();\n}\n</code></pre>\n\n<p>Here, <code>15</code> is a bit under the maximum number of digits a double can represent in base 10. Output:</p>\n\n<pre><code>Before round: 2.654999999999999804600747665972448885440826416015625\nHack round: 2.655000000000000\nAfter round: 2.66\nRounded: 2.66\n\nBefore round: 1.6550000000000000266453525910037569701671600341796875\nHack round: 1.655000000000000\nAfter round: 1.66\nRounded: 1.66\n</code></pre>\n", "title": "Round a double in Java", "tags": ["java", "floating-point"], "link": "http://stackoverflow.com/questions/22036885/round-a-double-in-java/22037109#22037109", "question_id": 22036885, "answer_id": 22037109}, {"body": "<p>You have to replace</p>\n\n<pre><code>BigDecimal bigDecimal = new BigDecimal(d);\n</code></pre>\n\n<p>with</p>\n\n<pre><code>BigDecimal bigDecimal = BigDecimal.valueOf(d);\n</code></pre>\n\n<p>and you will get the expected results:</p>\n\n<pre><code>2.66\n1.66\n</code></pre>\n\n<p>Explanation from Java API:</p>\n\n<p><strong>BigDecimal.valueOf(double val)</strong> - uses the double's canonical string representation provided by the Double.toString() method. This is preferred way to convert a double (or float) into a BigDecimal.</p>\n\n<p><strong>new BigDecimal(double val</strong>) - uses the exact decimal representation of the double's binary floating-point value and thus results of this constructor can be somewhat unpredictable.</p>\n", "title": "Round a double in Java", "tags": ["java", "floating-point"], "link": "http://stackoverflow.com/questions/22036885/round-a-double-in-java/22037110#22037110", "question_id": 22036885, "answer_id": 22037110}, {"body": "<p>You may try to change your program like this:-</p>\n\n<pre><code>static Double round(Double d, int precise) \n{\nBigDecimal bigDecimal = BigDecimal.valueOf(d);\nbigDecimal = bigDecimal.setScale(precise, RoundingMode.HALF_UP);\nreturn bigDecimal.doubleValue();\n}\n</code></pre>\n\n<p><strong><a href=\"http://ideone.com/sVHWjL\" rel=\"nofollow\">Sample Ideone</a></strong></p>\n\n<pre><code>Success  time: 0.07 memory: 381184 signal:0\nRounded: 2.66\nRounded: 1.66\n\nSuccess  time: 0.07 memory: 381248 signal:0\nRounded: 2.66\nRounded: 1.66\n</code></pre>\n\n<p><strong>Reason why you are getting the expected result with <code>BigDecimal.valueOf</code> and not with <code>new BigDecimal</code></strong>, in the words of <a href=\"http://stackoverflow.com/questions/7186204/bigdecimal-to-use-new-or-valueof/7186298#7186298\">Joachim Sauer</a>:</p>\n\n<blockquote>\n  <p><code>BigDecimal.valueOf(double)</code> will use the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#toString%28double%29\" rel=\"nofollow\">canonical String representation</a> of the double value passed in to instantiate the BigDecimal object. In other words: The value of the <code>BigDecimal</code> object will be what you see when you do <code>System.out.println(d)</code>.</p>\n  \n  <p>If you use <code>new BigDecimal(d)</code> however, then the BigDecimal will try to represent the double value as accurately as possible. This will usually result in a lot more digits being stored than you want.</p>\n</blockquote>\n\n<p>Hence resulting in some <strong>confusion</strong> which you are watching in your program.</p>\n\n<p>From the Java Doc:</p>\n\n<blockquote>\n  <p><strong><a href=\"http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#valueOf%28double%29\" rel=\"nofollow\">BigDecimal.valueOf(double val)</a></strong> - Translates a double into a BigDecimal, using the double's canonical string representation\n  provided by the Double.toString(double) method.</p>\n  \n  <p><strong><a href=\"http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#valueOf%28double%29\" rel=\"nofollow\">new BigDecimal(double val)</a></strong> - </p>\n  \n  <p>Translates a double into a BigDecimal which is the exact decimal\n  representation of the double's binary floating-point value. The scale\n  of the returned BigDecimal is the smallest value such that (10scale \u00d7\n  val) is an integer. Notes:</p>\n  \n  <ul>\n  <li>The results of this constructor can be somewhat unpredictable. One    might assume that writing new BigDecimal(0.1) in Java creates a<br>\n  BigDecimal which is exactly equal to 0.1 (an unscaled value of 1,<br>\n  with a scale of 1), but it is actually equal to\n  0.1000000000000000055511151231257827021181583404541015625. This is because 0.1 cannot be represented exactly as a double (or, for that<br>\n  matter, as a binary fraction of any finite length). Thus, the value<br>\n  that is being passed in to the constructor is not exactly equal to\n  0.1, appearances notwithstanding.</li>\n  <li>The String constructor, on the other hand, is perfectly predictable:    writing new BigDecimal(\"0.1\") creates a BigDecimal\n  which is exactly    equal to 0.1, as one would expect. Therefore, it\n  is generally    recommended that the String constructor be used in\n  preference to this    one.</li>\n  <li>When a double must be used as a source for a BigDecimal, note that    this constructor provides an exact conversion; it does not give the<br>\n  same result as converting the double to a String using the<br>\n  Double.toString(double) method and then using the BigDecimal(String)<br>\n  constructor. To get that result, use the static valueOf(double)<br>\n  method.</li>\n  </ul>\n</blockquote>\n", "title": "Round a double in Java", "tags": ["java", "floating-point"], "link": "http://stackoverflow.com/questions/22036885/round-a-double-in-java/22037280#22037280", "question_id": 22036885, "answer_id": 22037280}], "creation_date": 1393406544, "score": 57, "link": "http://stackoverflow.com/questions/22036885/round-a-double-in-java", "question_id": 22036885}, {"body": "<p>I read a <a href=\"https://twitter.com/dibblego/status/419232648674828288\">tweet</a> today that said:</p>\n\n<blockquote>\n  <p>It's funny when Java users complain about type erasure, which is the only thing Java got right, while ignoring all the things it got wrong.</p>\n</blockquote>\n\n<p>Thus my question is: </p>\n\n<blockquote>\n  <p>Are there benefits from Java's type erasure? What are the technical or programming style benefits it (possibly) offers other than the JVM implementations preference for backwards compatibility and runtime performance?</p>\n</blockquote>\n", "tags": ["java", "type-erasure"], "title": "What are the benefits of Java&#39;s types erasure?", "answers": [{"body": "<p>One good thing is that there was no need to change JVM when generics were introduced. Java implements generics at compiler level only.</p>\n", "title": "What are the benefits of Java&#39;s types erasure?", "tags": ["java", "type-erasure"], "link": "http://stackoverflow.com/questions/20918650/what-are-the-benefits-of-javas-types-erasure/20918678#20918678", "question_id": 20918650, "answer_id": 20918678}, {"body": "<p>avoids c++-like code bloat because the same code is used for multiple types; however, type erasure requires virtual dispatch whereas the c++-code-bloat approach can do non-virtually dispatched generics</p>\n", "title": "What are the benefits of Java&#39;s types erasure?", "tags": ["java", "type-erasure"], "link": "http://stackoverflow.com/questions/20918650/what-are-the-benefits-of-javas-types-erasure/20918690#20918690", "question_id": 20918650, "answer_id": 20918690}, {"body": "<p>A subsequent post by the same user in the same conversation:</p>\n\n<blockquote>\n  <p>new T is a broken program. It is isomorphic to the claim \"all propositions are true.\" I am not big into this.</p>\n</blockquote>\n\n<p>(This was in response to a statement by another user, namely that \"it seems in some situations 'new T' would be better\", the idea being that <code>new T()</code> is impossible due to type erasure. (This is debatable &mdash; even if <code>T</code> were available at runtime, it could be an abstract class or interface, or it could be <code>Void</code>, or it could lack a no-arg constructor, or its no-arg constructor could be private (e.g., because it's supposed to be a singleton class), or its no-arg constructor could specify a checked exception that the generic method does not catch or specify &mdash; but that was the premise. Regardless, it's true that without erasure you could at least write <code>T.class.newInstance()</code>, which handles those issues.))</p>\n\n<p>This view, that types are isomorphic to propositions, suggests that the user has a background in formal type theory. (S)he very likely does not like \"dynamic types\" or \"runtime-types\" and would prefer a Java without downcasts and <code>instanceof</code> and reflection and so on. (Think of a language like Standard ML, which has a very rich (static) type system and whose dynamic semantics do not depend on any type information whatsoever.)</p>\n\n<p>It's worth keeping in mind, by the way, that the user is trolling: while (s)he likely sincerely prefers (statically) typed languages, (s)he is <em>not</em> sincerely trying to persuade others of that view. Rather, the main purpose of the original tweet was to mock those who disagree, and after some of those disagree-ers chimed in, the user posted follow-up tweets such as \"the reason java has type erasure is that Wadler et al know what they are doing, unlike users of java\". Unfortunately, this makes it hard to find out what (s)he's actually thinking; but fortunately, it also likely means that it's not very important to do so. People with actual depth to their views don't generally resort to trolls that are <em>quite</em> this content-free.</p>\n", "title": "What are the benefits of Java&#39;s types erasure?", "tags": ["java", "type-erasure"], "link": "http://stackoverflow.com/questions/20918650/what-are-the-benefits-of-javas-types-erasure/20918709#20918709", "question_id": 20918650, "answer_id": 20918709}, {"body": "<p>Types are a construct used for writing programs in a manner that allows the compiler to check the correctness of a program. A type is a proposition on a value - the compiler verifies that this proposition is true. </p>\n\n<p>During the execution of a program, there should be no need for type information - this has already been verified by the compiler. The compiler should be free to discard this information in order to perform optimisations on the code - make it run faster, generate a smaller binary etc. Erasure of type parameters facilitates this.</p>\n\n<p>Java breaks static typing by allowing type information to be queried at runtime - reflection, instanceof etc. This allows you to construct programs that cannot be statically verified - they bypass the type system. It also misses opportunities for static optimisation. </p>\n\n<p>The fact that type parameters are erased prevents some instances of these incorrect programs to be constructed, however, more incorrect programs would be disallowed if more type information was erased and the reflection and instanceof facilities were removed.</p>\n\n<p>Erasure is important for upholding the property of \"parametricity\" of a data type. Say I have a type \"List\" parameterised over component type T. i.e. List&lt;T&gt;. That type is a proposition that this List type works identically for any type T. The fact that T is an abstract, unbounded type parameter means that we know nothing about this type, therefore are prevented from doing anything special for special cases of T. </p>\n\n<p>e.g. say I have a List xs = asList(\"3\"). I add an element: xs.add(\"q\"). I end up with [\"3\",\"q\"].\nSince this is parametric, I can assume that List xs = asList(7); xs.add(8) ends up with [7,8]\nI know from the type that it doesn't do one thing for String and one thing for Int.</p>\n\n<p>Furthermore, I know that the List.add function can not invent values of T out of thin air. I know that if my asList(\"3\") has a \"7\" added to it, the only possible answers would be constructed out of the values \"3\" and \"7\". There is no possibility of a \"2\" or \"z\" being added to the list because the function would be unable to construct it. Neither of these other values would be sensible to add, and parametricity prevents these incorrect programs from being constructed.</p>\n\n<p>Basically, erasure prevents some means of violating parametricity, thus eliminating possibilities of incorrect programs, which is the goal of static typing.</p>\n", "title": "What are the benefits of Java&#39;s types erasure?", "tags": ["java", "type-erasure"], "link": "http://stackoverflow.com/questions/20918650/what-are-the-benefits-of-javas-types-erasure/21840800#21840800", "question_id": 20918650, "answer_id": 21840800}, {"body": "<p>The reason type erasure is a good thing is that the things it makes impossible are harmful. Preventing the inspection of type arguments at runtime makes understanding and reasoning about programs easier.</p>\n\n<p>An observation that I found somewhat counter-intuitive is that when function signatures are <em>more</em> generic, they become easier to understand. This is because the number of possible implementations is reduced. Consider a method with this signature, which we somehow know has no side effects:</p>\n\n<pre><code>public List&lt;Integer&gt; XXX(final List&lt;Integer&gt; l);\n</code></pre>\n\n<p>What are the possible implementations of this function? Very many. You can tell very little about what this function does. It could be reversing the input list. It could be pairing ints together, summing them and returning a list half the size. There are many other possibilities that could be imagined. Now consider:</p>\n\n<pre><code>public &lt;T&gt; List&lt;T&gt; XXX(final List&lt;T&gt; l);\n</code></pre>\n\n<p>How many implementations of this function are there? Since the implementation cannot know the type of the elements, a huge number of implementations can now be excluded: elements cannot be combined, or added to the list or filtered out, et al. We are limited to things like: identity (no change to the list), dropping elements, or reversing the list. This function is easier to reason about based on its signature alone.</p>\n\n<p>Except\u2026 in Java you can always cheat the type system. Because the implementation of that generic method can use stuff like <code>instanceof</code> checks and/or casts to arbitrary types, our reasoning based on the type signature can be easily rendered useless. The function <em>could</em> inspect the type of the elements and do any number of things based on the result. If these runtime hacks are allowed, parameterised method signatures become much less useful to us.</p>\n\n<p>If Java did not have type erasure (that is, type arguments were reified at runtime) then this would simply allow <em>more</em> reasoning-impairing shenanigans of this kind. In the above example, the implementation can only violate the expectations set by the type signature if the list has at least one element; but if <code>T</code> was reified, it could do so even if the list were empty. Reified types would just increase the (already very many) possibilities for impeding our understanding of the code.</p>\n\n<p>Type erasure makes the language less \"powerful\". But some forms of \"power\" are actually harmful.</p>\n", "title": "What are the benefits of Java&#39;s types erasure?", "tags": ["java", "type-erasure"], "link": "http://stackoverflow.com/questions/20918650/what-are-the-benefits-of-javas-types-erasure/21841463#21841463", "question_id": 20918650, "answer_id": 21841463}, {"body": "<h1>Type Erasure Is Good</h1>\n\n<h2>Let's stick to the facts</h2>\n\n<p>A lot of the answers thus far are overly concerned with the Twitter user.  It's helpful to keep focused on the messages and not the messenger.  There is a fairly consistent message with even just the excerpts mentioned thus far:</p>\n\n<blockquote>\n  <p>It's funny when Java users complain about type erasure, which is the only thing Java got right, while ignoring all the things it got wrong.</p>\n  \n  <p>I get huge benefits (e.g. parametricity) and nil cost (alleged cost is a limit of imagination).</p>\n  \n  <p>new T is a broken program. It is isomorphic to the claim \"all propositions are true.\"  I am not big into this.</p>\n</blockquote>\n\n<h2>A goal: reasonable programs</h2>\n\n<p>These tweets reflect a perspective that is not interested in whether we can make the machine do <em>something</em>, but more whether we can reason that the machine will do something we actually want.  Good reasoning is a proof.  Proofs can be specified in formal notation or something less formal.  Regardless of the specification language, they must be clear and rigorous.  Informal specifications are not impossible to structure correctly, but are often flawed in practical programming.  We end up with remediations like automated and exploratory tests to make up for the problems we have with informal reasoning.  This is not to say that testing is intrinsically a bad idea, but the quoted Twitter user is suggesting that there is a much better way.</p>\n\n<p>So our goal is to have correct programs that we can reason about clearly and rigorously in a way that corresponds with how the machine will actually execute the program.  This, though, is not the only goal.  We also want our logic to have a degree of expressivity.  For example, there's only so much we can express with propositional logic.  It's nice to have universal (\u2200) and existential (\u2203) quantification from something like first-order logic.</p>\n\n<h2>Using type systems for reasoning</h2>\n\n<p>These goals can be very nicely addressed by type systems.  This is especially clear because of the <a href=\"http://en.wikipedia.org/wiki/Curry%E2%80%93Howard_correspondence\">Curry-Howard correspondence</a>.  This correspondence is often expressed with the following analogy:  types are to programs as theorems are to proofs.</p>\n\n<p>This correspondence is somewhat profound.  We can take logical expressions, and translate them through the correspondence to types.  Then if we have a program with the same type signature that compiles, we have proven that the logical expression is universally true (a tautology).  This is because the correspondence is two-way.  The transformation between the type/program and the theorem/proof worlds are mechanical, and can in many cases be automated.</p>\n\n<p>Curry-Howard plays nicely into what we'd like to do with specifications for a program.</p>\n\n<h2>Are type systems useful in Java?</h2>\n\n<p>Even with an understanding of Curry-Howard, some people find it easy to dismiss the value of a type system, when it</p>\n\n<ol>\n<li>is extremely hard to work with</li>\n<li>corresponds (through Curry-Howard) to a logic with limited expressivity</li>\n<li>is broken (which gets to the characterization of systems as \"weak\" or \"strong\").</li>\n</ol>\n\n<p>Regarding the first point, perhaps IDEs make Java's type system easy enough to work with (that's highly subjective).</p>\n\n<p>Regarding the second point, Java happens to <em>almost</em> correspond to a first-order logic.  Generics give use the type system equivalent of universal quantification.  Unfortunately, wildcards only give us a small fraction of existential quantification.  But universal quantification is pretty good start.  It's nice to be able to say that functions for <code>List&lt;A&gt;</code> work universally for <em>all possible</em> lists because A is completely unconstrained.  This leads to what the Twitter user is talking about with respect to \"parametricity.\"</p>\n\n<p>An often-cited paper about parametricity is Philip Wadler's <a href=\"http://ttic.uchicago.edu/~dreyer/course/papers/wadler.pdf\"><em>Theorems for free!</em></a>.  What's interesting about this paper is that from just the type signature alone, we can prove some very interesting invariants.  If we were to write automated tests for these invariants we would be very much wasting our time.  For example, for <code>List&lt;A&gt;</code>, from the type signature alone for <code>flatten</code></p>\n\n<pre><code>&lt;A&gt; List&lt;A&gt; flatten(List&lt;List&lt;A&gt;&gt; nestedLists);\n</code></pre>\n\n<p>we can reason that</p>\n\n<pre><code>flatten(nestedList.map(l -&gt; l.map(any_function)))\n    \u2261 flatten(nestList).map(any_function)\n</code></pre>\n\n<p>That's a simple example, and you can probably reason about it informally, but it's even nicer when we get such proofs formally for free from the type system and checked by the compiler.</p>\n\n<h2>Not erasing can lead to abuses</h2>\n\n<p>From the perspective of language implementation, Java's generics (which correspond to universal types) play very heavily into the parametricity used to get proofs about what our programs do.   This gets to the third problem mentioned.  All these gains of proof and correctness require a sound type system implemented without defects.  Java definitely has some language features that allow us to shatter our reasoning.  These include but are not limited to:</p>\n\n<ul>\n<li>side-effects with an external system</li>\n<li>reflection</li>\n</ul>\n\n<p>Non-erased generics are in many ways related to reflection.  Without erasure there's runtime information that's carried with the implementation that we can use to design our algorithms.  What this means is that statically, when we reason about programs, we don't have the full picture.  Reflection severely threatens the correctness of any proofs we reason about statically.  It's no coincidence reflection also leads to a variety of tricky defects.</p>\n\n<p>So what are ways that non-erased generics might be \"useful?\"  Let's consider the usage mentioned in the tweet:</p>\n\n<pre><code>&lt;T&gt; T broken { return new T(); }\n</code></pre>\n\n<p>What happens if T doesn't have a no-arg constructor?  In some languages what you get is null.  Or perhaps you skip the null value and go straight to raising an exception (which null values seem to lead to anyway).  Because our language is Turing complete, it's impossible to reason about which calls to <code>broken</code> will involve \"safe\" types with no-arg constructors and which ones won't.  We've lost the certainty that our program works universally.</p>\n\n<h2>Erasing means we've reasoned (so let's erase)</h2>\n\n<p>So if we want to reason about our programs, we're strongly advised to not employ language features that strongly threaten our reasoning.  Once we do that, then why not just drop the types at runtime?  They're not needed.  We can get some efficiency and simplicity with the satisfaction that no casts will fail or that methods might be missing upon invocation.</p>\n\n<p>Erasing encourages reasoning.</p>\n", "title": "What are the benefits of Java&#39;s types erasure?", "tags": ["java", "type-erasure"], "link": "http://stackoverflow.com/questions/20918650/what-are-the-benefits-of-javas-types-erasure/21843984#21843984", "question_id": 20918650, "answer_id": 21843984}, {"body": "<p>An additional point none of the other answers seem to have considered: if you really need generics with run-time typing, <em>you can implement it yourself</em> like this:</p>\n\n<pre><code>public class GenericClass&lt;T&gt;\n{\n     private Class&lt;T&gt; targetClass;\n     public GenericClass(Class&lt;T&gt; targetClass)\n     {\n          this.targetClass = targetClass;\n     }\n</code></pre>\n\n<p>This class is then able to do all the things that would be achievable by default if Java did not use erasure: it can allocate new <code>T</code>s (assuming <code>T</code> has a constructor that matches the pattern it expects to use), or arrays of <code>T</code>s, it can dynamically test at run time if a particular object is a <code>T</code> and change behaviour depending on that, and so on.</p>\n\n<p>For example:</p>\n\n<pre><code>     public T newT () { \n         try {\n             return targetClass.newInstance(); \n         } catch(/* I forget which exceptions can be thrown here */) { ... }\n     }\n\n     private T value;\n     /** @throws ClassCastException if object is not a T */\n     public void setValueFromObject (Object object) {\n         value = targetClass.cast(object);\n     }\n}\n</code></pre>\n", "title": "What are the benefits of Java&#39;s types erasure?", "tags": ["java", "type-erasure"], "link": "http://stackoverflow.com/questions/20918650/what-are-the-benefits-of-javas-types-erasure/21860328#21860328", "question_id": 20918650, "answer_id": 21860328}, {"body": "<p>The one thing I don't see considered here at all is that OOP's <em>runtime polymorphism</em> is fundamentally dependent on the reification of types at runtime. When a language whose backbone is held in place by refied types introduces a major extension to its type system and bases it on type erasure, cognitive dissonance is the inevitable outcome. This is precisely what happened to the Java community; it is why type erasure has attracted so much controversy, and ultimately why there are <a href=\"http://www.theserverside.com/news/2240205870/Forget-about-JavaOne-Lets-talk-about-the-feature-list-for-Java-9\">plans to undo it in a future release of Java</a>. Finding something <em>funny</em> in that complaint of Java users betrays either an honest misunderstanding of the spirit of Java, or a consciously deprecating joke.</p>\n\n<p>The claim \"erasure is the only thing Java got right\" implies the claim that \"all languages based on dynamic dispatch against the runtime type of function argument are fundamentally flawed\". Although certainly a legitimate claim on its own, and one which can even be considered as valid criticism of all OOP languages including Java, it cannot lodge itself as a pivotal point from which to evaluate and criticise features <em>within the context of Java</em>, where runtime polymorphism is axiomatic.</p>\n\n<p>In summary, while one may validly state \"type erasure is the way to go in language design\", positions supporting type erasure within Java are misplaced simply because <em>it is much, much too late for that</em> and had already been so even at the historical moment when Oak was embraced by Sun and renamed to Java.</p>\n\n<hr>\n\n<hr>\n\n<p>As to whether static typing itself is the proper direction in the design of programming languages, this fits into a much wider philosophical context of what we think constitutes the activity of <em>programming</em>. One school of thought, clearly deriving from the classical tradition of mathematics, sees programs as instances of one mathematical concept or other (propositions, functions, etc.), but there is an entirely different class of approaches, which see programming as a way to talk to the machine and explain what we want from it. In this view the program is a dynamic,  organically growing entity, a dramatic opposite of the carefully erected aedifice of a statically typed program. </p>\n\n<p>It would seem natural to regard the dynamic languages as being a step in that direction: the consistency of the program emerges from the bottom up, with no <em>a priori</em> constrants which would impose it in a top-down manner. This paradigm can be seen as a step towards modeling  the process whereby we, the humans, become what we are through development and learning.</p>\n", "title": "What are the benefits of Java&#39;s types erasure?", "tags": ["java", "type-erasure"], "link": "http://stackoverflow.com/questions/20918650/what-are-the-benefits-of-javas-types-erasure/21967342#21967342", "question_id": 20918650, "answer_id": 21967342}, {"body": "<p><sub>(Although I already wrote an answer here, revisiting this question two years later I realize there is another, completely different way of answering it, so I'm leaving the previous answer intact and adding this one.)</sub></p>\n\n<hr>\n\n<p>It is highly arguable whether the process done on Java Generics deserves the name \"type erasure\". Since generic types are not erased but replaced with their raw counterparts, a better choice seems to be \"type mutilation\".</p>\n\n<p>The quintessential feature of type erasure in its commonly understood sense is forcing the runtime to stay within the boundaries of the static type system by making it \"blind\" to the structure of the data it accesses. This gives full power to the compiler and allows it to prove theorems based on static types alone. It also helps the programmer by constraining the code's degrees of freedom, giving more power to simple reasoning.</p>\n\n<p>Java's type erasure does not achieve that&mdash;it cripples the compiler, like in this example:</p>\n\n<pre><code>void doStuff(List&lt;Integer&gt; collection) { \n}\n\nvoid doStuff(List&lt;String&gt; collection) // ERROR: a method cannot have \n                   // overloads which only differ in type parameters\n</code></pre>\n\n<p>(The above two declarations collapse into the same method signature after erasure.)</p>\n\n<p>On the flip side, the runtime can still inspect the type of an object and reason about it, but since its insight into the true type is crippled by erasure, static type violations are trivial to achieve and hard to prevent.</p>\n\n<p>To make things even more convoluted, the original and erased type signatures co-exist and are considered in parallel during compilation. This is because the whole process is not about removing type information from the runtime, but about shoehorning a generic type system into a legacy raw type system to maintain backwards compatibility. This gem is a classic example:</p>\n\n<pre><code>public static &lt;T extends Object &amp; Comparable&lt;? super T&gt;&gt; T max(Collection&lt;? extends T&gt; coll)\n</code></pre>\n\n<p>(The redundant <code>extends Object</code> had to be added to preserve backward compatibility of the erased signature.)</p>\n\n<p>Now, with that in mind, let us revisit the quote:</p>\n\n<blockquote>\n  <p>It's funny when Java users complain about type erasure, which is the only thing Java got right</p>\n</blockquote>\n\n<p>What <em>exactly</em> did Java get right? Is it the word itself, regardless of meaning? For contrast take a look at the humble <code>int</code> type: no runtime type check is ever performed, or even possible, and the execution is always perfectly type-safe. <em>That's</em> what type erasure looks like when done right: you don't even know it's there.</p>\n", "title": "What are the benefits of Java&#39;s types erasure?", "tags": ["java", "type-erasure"], "link": "http://stackoverflow.com/questions/20918650/what-are-the-benefits-of-javas-types-erasure/37940514#37940514", "question_id": 20918650, "answer_id": 37940514}], "creation_date": 1388823630, "score": 56, "link": "http://stackoverflow.com/questions/20918650/what-are-the-benefits-of-javas-types-erasure", "question_id": 20918650}, {"body": "<p>I've been reading some articles about the new adoption of Gradle as the standard build system for Android apps. Well, coming from standard Java development I usually depend on <em>jar</em> files in order to build my project. However it seems that Android has also <em>aar</em> packages, which are the equivalent to the <em>dll</em> files in a Windows OS, as mentioned <a href=\"http://blog.glassdiary.com/post/67134169807/how-to-share-android-archive-library-aar-across\">here</a>:</p>\n\n<blockquote>\n  <p>First, you have to realize that the Android platform does not allow application-level \u201cshared libraries\u201d. In the \u201ctraditional\u201d programming language platforms, C, C++, Java, you name it, we have this mechanism of sharing runtime libraries. (E.g., DLL on Windows, DSO on Unix, Jar on JVM, etc.). On Android, however, you cannot do that, unless you are Google or a handset manufacturer (See Footnote 1 below). As an application developer, this can be a fundamental limitation. \u201cSharing\u201d or \u201creusing\u201d codes, both at build time and run time, is a very important part of software engineering practice. This is rather hard (not impossible, just harder) on Android because of the aforementioned limitation.</p>\n</blockquote>\n\n<p>However, I have some doubts around this concept. I mean, when should a developer be interested including <em>aar</em> dependencies in its application? Are this dependencies tightened to a SDK minimum version?</p>\n\n<p>For example, in one project I access a COM port, which I use <a href=\"https://developer.android.com/tools/sdk/ndk/index.html\">NDK precompiled</a> <em>.so</em> libraries for. Do I have to create an aar if I want to share this utility?</p>\n", "tags": ["java", "android", "jar", "aar"], "title": "Android Archive Library (aar) vs standard jar", "answers": [{"body": "<p><code>AAR</code> files are more similar to <code>Jar</code>s than to <code>Dll</code>s for the following reason:</p>\n\n<blockquote>\n  <p><code>Dll</code>s can be shared across applications where as <code>AAR</code>s and jars are\n  packaged in with your app.</p>\n</blockquote>\n\n<p><code>AAR</code>s vs <code>Jar</code>s:</p>\n\n<blockquote>\n  <p>The main difference between a <code>Jar</code> and a <code>AAR</code> is that <code>AAR</code>s include\n  resources such as <code>layouts, drawables</code> etc. This makes it a lot easier\n  to create self-contained visual components. For example if you have\n  multiple apps that use the same login screen, with <code>Jar</code>s you could\n  share classes but not the layout, styles, etc., you still had to\n  duplicate them. With <code>AAR</code>s everything is bundled in one neat package.</p>\n</blockquote>\n\n<p>In conclusion, <code>AAR</code>s are a big step in the right direction.</p>\n\n<p><strong>Note:</strong><br/> Similar attempts were made with <code>apk-lib</code>s but they are now obsolete as <code>AAR</code>s are much better.</p>\n", "title": "Android Archive Library (aar) vs standard jar", "tags": ["java", "android", "jar", "aar"], "link": "http://stackoverflow.com/questions/23915619/android-archive-library-aar-vs-standard-jar/23916544#23916544", "question_id": 23915619, "answer_id": 23916544}], "creation_date": 1401290320, "score": 56, "link": "http://stackoverflow.com/questions/23915619/android-archive-library-aar-vs-standard-jar", "question_id": 23915619}, {"body": "<p>I'm using Square's <a href=\"https://github.com/square/tape\">Tape</a> library to queue uploads of data to the server. </p>\n\n<p>The queue is stored in File in JSON format. When the app starts I init the queue and start uploading (i.e if on Wifi)  However on some devices on users I'm seeing <code>EOFException</code> with <code>'null'</code> message (logged in crashlytics). </p>\n\n<p>The error occurs when creating a <code>FileObjectQueue</code> object from an existing file - from the debug info gather the actual file is ~1MB. </p>\n\n<p>Any ideas what's causing this or how to prevent it? - maybe I need to dust up on my java.io.</p>\n\n<p><strong>Edit: using Tape v1.2.1</strong></p>\n\n<pre><code>Caused by: java.io.EOFException\nat java.io.RandomAccessFile.readFully(RandomAccessFile.java:419)\nat java.io.RandomAccessFile.readInt(RandomAccessFile.java:439)\nat com.squareup.tape.QueueFile.readElement(:182)\nat com.squareup.tape.QueueFile.readHeader(:162)\nat com.squareup.tape.QueueFile.(:110)\nat com.squareup.tape.FileObjectQueue.(:35)\nat com.myapp.queue.MyUploadTaskQueue.create(:125)\n</code></pre>\n\n<p><strong>Updated</strong> - Also seeing this error since upgrading to 1.2.2</p>\n\n<pre><code>Caused by: java.io.IOException: File is corrupt; length stored in header is 0.\n       at com.squareup.tape.QueueFile.readHeader(:165)\n       at com.squareup.tape.QueueFile.&lt;init&gt;(:117)\n       at com.squareup.tape.FileObjectQueue.&lt;init&gt;(:35)\n</code></pre>\n", "tags": ["java", "android", "exception", "square-tape"], "title": "EOFException when reading QueueFile tape", "answers": [{"body": "<p>The EOFException shows that End Of File has been reached, that is, there are no more bytes to read. This exception is just another way to signal that there is nothing more to read, whereas other methods return a value, like -1. As you can see in your error stack trace, the methods throwing the exception are read methods; <code>java.io.RandomAccessFile.readFully(RandomAccessFile.java:419)</code> and <code>com.squareup.tape.QueueFile.readHeader(:165)</code>. As such, it can't be \"prevented\" unless you don't read all the bytes (which you typically want to), just catch it like so; <code>catch(EOFException e) { /* ignore */ }</code> :)\n<a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/EOFException.html\" rel=\"nofollow\">https://docs.oracle.com/javase/7/docs/api/java/io/EOFException.html</a></p>\n", "title": "EOFException when reading QueueFile tape", "tags": ["java", "android", "exception", "square-tape"], "link": "http://stackoverflow.com/questions/22861931/eofexception-when-reading-queuefile-tape/30225920#30225920", "question_id": 22861931, "answer_id": 30225920}], "creation_date": 1396611918, "score": 56, "link": "http://stackoverflow.com/questions/22861931/eofexception-when-reading-queuefile-tape", "question_id": 22861931}, {"body": "<p>I am trying to use Java 8 <code>Stream</code>s to find elements in a <code>LinkedList</code>. I want to guarantee, however, that there is 1 and only 1 match to the filter criteria.</p>\n\n<p>Take this code:</p>\n\n<pre><code>public static void main(String[] args) {\n\n    LinkedList&lt;User&gt; users = new LinkedList&lt;&gt;();\n    users.add(new User(1, \"User1\"));\n    users.add(new User(2, \"User2\"));\n    users.add(new User(3, \"User3\"));\n\n    User match = users.stream().filter((user) -&gt; user.getId() == 1).findAny().get();\n    System.out.println(match.toString());\n}\n\nstatic class User {\n\n    @Override\n    public String toString() {\n        return id + \" - \" + username;\n    }\n\n    int id;\n    String username;\n\n    public User() {\n    }\n\n    public User(int id, String username) {\n        this.id = id;\n        this.username = username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public int getId() {\n        return id;\n    }\n}\n</code></pre>\n\n<p>This code finds a <code>User</code> based on their ID. But there are no guarantees how many <code>User</code>s matched the filter.</p>\n\n<p>Changing the filter line to:</p>\n\n<pre><code>User match = users.stream().filter((user) -&gt; user.getId() &lt; 0).findAny().get();\n</code></pre>\n\n<p>Will throw a <code>NoSuchElementException</code> (good!)</p>\n\n<p>I would like it to throw an error if there are multiple matches, though. Is there a way to do this?</p>\n", "tags": ["java", "lambda", "java-8", "java-stream"], "title": "Filter Java Stream to 1 and only 1 element", "answers": [{"body": "<p>Technically there's an ugly 'workaround' that involves <code>peek()</code> and an <code>AtomicInteger</code>, but really you shouldn't be using that.</p>\n\n<p>What I do in these cases is just collecting it in a list, like this:</p>\n\n<pre><code>LinkedList&lt;User&gt; users = new LinkedList&lt;&gt;();\nusers.add(new User(1, \"User1\"));\nusers.add(new User(2, \"User2\"));\nusers.add(new User(3, \"User3\"));\nList&lt;User&gt; resultUserList = users.stream()\n        .filter(user -&gt; user.getId() == 1)\n        .collect(Collectors.toList());\nif (resultUserList.size() != 1) {\n    throw new IllegalStateException();\n}\nUser resultUser = resultUserList.get(0);\n</code></pre>\n\n<p>I am not aware of a way to do this in the API, meanwhile I will work on another example involving a custom element.</p>\n\n<p><strong>Update</strong>, You should create your own <code>Collector</code> for this:</p>\n\n<pre><code>public static &lt;T&gt; Collector&lt;T, List&lt;T&gt;, T&gt; singletonCollector() {\n    return Collector.of(\n            ArrayList::new,\n            List::add,\n            (left, right) -&gt; { left.addAll(right); return left; },\n            list -&gt; {\n                if (list.size() != 1) {\n                    throw new IllegalStateException();\n                }\n                return list.get(0);\n            }\n    );\n}\n</code></pre>\n\n<p>What it does is:</p>\n\n<ul>\n<li>It mimicks the <code>Collectors.toList()</code> collector.</li>\n<li>It applies an extra finisher at the end, that throws an exception, or if no exception, returns the first element of the list.</li>\n</ul>\n\n<p>Used as:</p>\n\n<pre><code>User resultUser = users.stream()\n        .filter(user -&gt; user.getId() &gt; 0)\n        .collect(singletonCollector());\n</code></pre>\n\n<p>You can then customize this <code>singletonCollector</code> as much as you want, for example give the exception as argument in the constructor, tweak it to allow two values, and more.</p>\n\n<p><strong>New update</strong>, I revised my old answer once more for <code>singletonCollector()</code>, it can actually be obtained like this:</p>\n\n<pre><code>public static &lt;T&gt; Collector&lt;T, ?, T&gt; singletonCollector() {\n    return Collectors.collectingAndThen(\n            Collectors.toList(),\n            list -&gt; {\n                if (list.size() != 1) {\n                    throw new IllegalStateException();\n                }\n                return list.get(0);\n            }\n    );\n}\n</code></pre>\n", "title": "Filter Java Stream to 1 and only 1 element", "tags": ["java", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22694884/filter-java-stream-to-1-and-only-1-element/22695031#22695031", "question_id": 22694884, "answer_id": 22695031}, {"body": "<p>The exception is thrown by <code>Optional#get</code>, but if you have more than one element that won't help. You could collect the users in a collection that only accepts one item, for example:</p>\n\n<pre><code>User match = users.stream().filter((user) -&gt; user.getId() &gt; 1)\n                  .collect(toCollection(() -&gt; new ArrayBlockingQueue&lt;User&gt;(1)))\n                  .poll();\n</code></pre>\n\n<p>which throws a <code>java.lang.IllegalStateException: Queue full</code>, but that feels too hacky.</p>\n\n<p>Or you could use a reduction combined with an optional:</p>\n\n<pre><code>User match = Optional.ofNullable(users.stream().filter((user) -&gt; user.getId() &gt; 1)\n                .reduce(null, (u, v) -&gt; {\n                    if (u != null &amp;&amp; v != null)\n                        throw new IllegalStateException(\"More than one ID found\");\n                    else return u == null ? v : u;\n                })).get();\n</code></pre>\n\n<p>The reduction essentially returns:</p>\n\n<ul>\n<li>null if no user is found</li>\n<li>the user if only one is found</li>\n<li>throws an exception if more than one is found</li>\n</ul>\n\n<p>The result is then wrapped in an optional.</p>\n\n<p>But the simplest solution would probably be to just collect to a collection, check that its size is 1 and get the only element.</p>\n", "title": "Filter Java Stream to 1 and only 1 element", "tags": ["java", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22694884/filter-java-stream-to-1-and-only-1-element/22695141#22695141", "question_id": 22694884, "answer_id": 22695141}, {"body": "<p>You could roll your own Collector for this:</p>\n\n<pre><code>&lt;E&gt; Collector&lt;E, ?, Optional&lt;E&gt;&gt; getOnly() {\n  return Collector.of(\n    AtomicReference::new,\n    (ref, e) -&gt; {\n      if (!ref.compareAndSet(null, e)) {\n         throw new IllegalArgumentException(\"Multiple values\");\n      }\n    },\n    (ref1, ref2) -&gt; {\n      if (ref1.get() == null) {\n        return ref2;\n      } else if (ref2.get() != null) {\n        throw new IllegalArgumentException(\"Multiple values\");\n      } else {\n        return ref1;\n      }\n    },\n    ref -&gt; Optional.ofNullable(ref.get()),\n    Collector.Characteristics.UNORDERED);\n}\n</code></pre>\n\n<p>...or using your own <code>Holder</code> type instead of <code>AtomicReference</code>.  You can reuse that <code>Collector</code> as much as you like.</p>\n", "title": "Filter Java Stream to 1 and only 1 element", "tags": ["java", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22694884/filter-java-stream-to-1-and-only-1-element/22695424#22695424", "question_id": 22694884, "answer_id": 22695424}, {"body": "<p>Have you tried this</p>\n\n<blockquote>\n<pre><code>    long c = users.stream().filter((user) -&gt; user.getId() == 1).count();\n    if(c&gt;1){\n        throw new IllegalStateException();\n    }\n</code></pre>\n</blockquote>\n\n<pre><code>long count()\nReturns the count of elements in this stream. This is a special case of a reduction and is equivalent to:\n\n     return mapToLong(e -&gt; 1L).sum();\n\nThis is a terminal operation.\n</code></pre>\n", "title": "Filter Java Stream to 1 and only 1 element", "tags": ["java", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22694884/filter-java-stream-to-1-and-only-1-element/22706286#22706286", "question_id": 22694884, "answer_id": 22706286}, {"body": "<p>Wow, such complexity! :-) The other answers that involve writing a custom Collector are probably more efficient (such as <a href=\"http://stackoverflow.com/a/22695424/1441122\">Louis Wasserman's</a>, +1), but if you want brevity, I'd suggest the following:</p>\n\n<pre><code>List&lt;User&gt; result = users.stream()\n    .filter(user -&gt; user.getId() == 1)\n    .limit(2)\n    .collect(Collectors.toList());\n</code></pre>\n\n<p>Then verify the size of the result list.</p>\n", "title": "Filter Java Stream to 1 and only 1 element", "tags": ["java", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22694884/filter-java-stream-to-1-and-only-1-element/22717262#22717262", "question_id": 22694884, "answer_id": 22717262}, {"body": "<p>The \"escape hatch\" operation that lets you do weird things that are not otherwise supported by streams is to ask for an <code>Iterator</code>:</p>\n\n<pre><code>Iterator&lt;T&gt; it = users.stream().filter((user) -&gt; user.getId() &lt; 0).iterator();\nif (!it.hasNext()) \n    throw new NoSuchElementException();\nelse {\n    result = it.next();\n    if (it.hasNext())\n        throw new TooManyElementsException();\n}\n</code></pre>\n\n<p>Guava has a convenience method to take an <code>Iterator</code> and get the only element, throwing if there are zero or multiple elements, which could replace the bottom n-1 lines here.</p>\n", "title": "Filter Java Stream to 1 and only 1 element", "tags": ["java", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22694884/filter-java-stream-to-1-and-only-1-element/23848844#23848844", "question_id": 22694884, "answer_id": 23848844}, {"body": "<p>An alternative is to use reduction:\n(this example uses strings but could easily apply to any object type including <code>User</code>)</p>\n\n<pre><code>List&lt;String&gt; list = ImmutableList.of(\"one\", \"two\", \"three\", \"four\", \"five\", \"two\");\nString match = list.stream().filter(\"two\"::equals).reduce(thereCanBeOnlyOne()).get();\n//throws NoSuchElementException if there are no matching elements - \"zero\"\n//throws RuntimeException if duplicates are found - \"two\"\n//otherwise returns the match - \"one\"\n...\n\n//Reduction operator that throws RuntimeException if there are duplicates\nprivate static &lt;T&gt; BinaryOperator&lt;T&gt; thereCanBeOnlyOne()\n{\n    return (a, b) -&gt; {throw new RuntimeException(\"Duplicate elements found: \" + a + \" and \" + b);};\n}\n</code></pre>\n\n<p>So for the case with <code>User</code> you would have:</p>\n\n<pre><code>User match = users.stream().filter((user) -&gt; user.getId() &lt; 0).reduce(thereCanBeOnlyOne()).get();\n</code></pre>\n", "title": "Filter Java Stream to 1 and only 1 element", "tags": ["java", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22694884/filter-java-stream-to-1-and-only-1-element/30204384#30204384", "question_id": 22694884, "answer_id": 30204384}, {"body": "<p>For the sake of completeness, here is the \u2018one-liner\u2019 corresponding to @prunge\u2019s excellent answer:</p>\n\n<pre><code>User user1 = users.stream()\n        .filter(user -&gt; user.getId() == 1)\n        .reduce((a, b) -&gt; {\n            throw new IllegalStateException(\"Multiple elements: \" + a + \", \" + b);\n        })\n        .get();\n</code></pre>\n\n<p>This obtains the sole matching element from the stream, throwing</p>\n\n<ul>\n<li><code>NoSuchElementException</code> in case the stream is empty, or</li>\n<li><code>IllegalStateException</code> in case the stream contains more than one matching element.</li>\n</ul>\n\n<p>A variation of this approach avoids throwing an exception early and instead represents the result as an <code>Optional</code> containing either the sole element, or nothing (empty) if there are zero or multiple elements:</p>\n\n<pre><code>Optional&lt;User&gt; user1 = users.stream()\n        .filter(user -&gt; user.getId() == 1)\n        .collect(Collectors.reducing((a, b) -&gt; null));\n</code></pre>\n", "title": "Filter Java Stream to 1 and only 1 element", "tags": ["java", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22694884/filter-java-stream-to-1-and-only-1-element/34663949#34663949", "question_id": 22694884, "answer_id": 34663949}, {"body": "<p>You could use sort. It seems to skip single element. Using simple array here for demonstration.</p>\n\n<pre><code>//Exception will be thrown from the comparator\nList&lt;Integer&gt; i = Arrays.asList(1, 1, 2, 3);\n\ni.stream().filter(x -&gt; x == 1).sorted((a, b) -&gt; {\n       throw new IllegalStateException(\"At least two elements!\");\n}).findAny().get();\n</code></pre>\n\n<p>EDIT: I have not found <em>guarantee</em> from the java.util.Stream API that  the sorted function will skip collection with just one element. Maybe it is reasonable to assume such behaviour when test with single element skips the sorted function. Also, there should be no reason to call comparator with the same element as arguments.</p>\n", "title": "Filter Java Stream to 1 and only 1 element", "tags": ["java", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22694884/filter-java-stream-to-1-and-only-1-element/34664685#34664685", "question_id": 22694884, "answer_id": 34664685}, {"body": "<p>We can use <a href=\"https://github.com/ReactiveX/RxJava\" rel=\"nofollow\">RxJava</a> (very powerful <a href=\"http://reactivex.io/\" rel=\"nofollow\">reactive extension</a> library)</p>\n\n<pre><code>LinkedList&lt;User&gt; users = new LinkedList&lt;&gt;();\nusers.add(new User(1, \"User1\"));\nusers.add(new User(2, \"User2\"));\nusers.add(new User(3, \"User3\"));\n\nUser userFound =  Observable.from(users)\n                  .filter((user) -&gt; user.getId() == 1)\n                  .single().toBlocking().first();\n</code></pre>\n\n<p>The <em>single</em> <a href=\"http://reactivex.io/documentation/operators.html\" rel=\"nofollow\">operator</a> throws an exception if no user or more then one user is found. </p>\n", "title": "Filter Java Stream to 1 and only 1 element", "tags": ["java", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22694884/filter-java-stream-to-1-and-only-1-element/34665668#34665668", "question_id": 22694884, "answer_id": 34665668}, {"body": "<p>If you don't mind using a 3rd party library, <a href=\"http://static.javadoc.io/com.aol.cyclops/cyclops-sequence-api/7.1.0/com/aol/cyclops/sequence/SequenceM.html\" rel=\"nofollow\">SequenceM</a> from <a href=\"https://github.com/aol/cyclops/tree/master/cyclops-streams\" rel=\"nofollow\">cyclops-streams</a> (and <a href=\"http://static.javadoc.io/com.aol.simplereact/simple-react/0.99.6/com/aol/simple/react/stream/traits/LazyFutureStream.html\" rel=\"nofollow\">LazyFutureStream</a> from <a href=\"https://github.com/aol/simple-react\" rel=\"nofollow\">simple-react</a>) both a have single &amp; singleOptional operators. </p>\n\n<p>singleOptional throws an exception if there are 0 or more than 1 elements in the Stream, otherwise it returns the single value.</p>\n\n<pre><code> String result = SequenceM.of(\"x\")\n                          .single();\n\n SequenceM.of().single(); // NoSuchElementException\n\n SequenceM.of(1,2,3).single(); // NoSuchElementException\n\n\n String result = LazyFutureStream.fromStream(Stream.of(\"x\"))\n                          .single();\n</code></pre>\n\n<p>singleOptional return Optional.empty if there are no values or more than one value in the Stream.</p>\n\n<pre><code>  Optional&lt;String&gt; result = SequenceM.fromStream(Stream.of(\"x\"))\n                          .singleOptional(); \n  //Optional[\"x\"]\n\n  Optional&lt;String&gt; result = SequenceM.of().singleOptional(); \n  // Optional.empty\n\n  Optional&lt;String&gt; result =  SequenceM.of(1,2,3).singleOptional(); \n  // Optional.empty\n</code></pre>\n\n<p>Disclosure - I am the author of both libraries.</p>\n", "title": "Filter Java Stream to 1 and only 1 element", "tags": ["java", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22694884/filter-java-stream-to-1-and-only-1-element/34715168#34715168", "question_id": 22694884, "answer_id": 34715168}, {"body": "<p>As <code>Collectors.toMap(keyMapper, valueMapper)</code> uses a throwing merger to handle multiple entries with the same key it is easy:</p>\n\n<pre><code>List&lt;User&gt; users = new LinkedList&lt;&gt;();\nusers.add(new User(1, \"User1\"));\nusers.add(new User(2, \"User2\"));\nusers.add(new User(3, \"User3\"));\n\nint id = 1;\nUser match = Optional.ofNullable(users.stream()\n  .filter(user -&gt; user.getId() == id)\n  .collect(Collectors.toMap(User::getId, Function.identity()))\n  .get(id)).get();\n</code></pre>\n\n<p>You will get a <code>IllegalStateException</code> for duplicate keys. But at the end I am not sure if the code would not be even more readable using an <code>if</code>.</p>\n", "title": "Filter Java Stream to 1 and only 1 element", "tags": ["java", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/22694884/filter-java-stream-to-1-and-only-1-element/39385411#39385411", "question_id": 22694884, "answer_id": 39385411}], "creation_date": 1395941132, "score": 55, "link": "http://stackoverflow.com/questions/22694884/filter-java-stream-to-1-and-only-1-element", "question_id": 22694884}, {"body": "<p>I'm using Java, and I have a String which is JSON:</p>\n\n<pre><code>{\n\"name\" : \"abc\" ,\n\"email id \" : [\"abc@gmail.com\",\"def@gmail.com\",\"ghi@gmail.com\"]\n}\n</code></pre>\n\n<p>And I have a Map in Java:</p>\n\n<pre><code>Map&lt;String, Object&gt; retMap = new HashMap&lt;String, Object&gt;();\n</code></pre>\n\n<p>I want to store all the data from the JSONObject in that HashMap.</p>\n\n<p>Can anyone provide code for this?  I want to use the 'org.json' library.</p>\n", "tags": ["java", "json", "dictionary"], "title": "Convert a JSON String to a HashMap", "answers": [{"body": "<p>You can use google gson library to convert json object.</p>\n\n<p><a href=\"https://code.google.com/p/google-gson/\" rel=\"nofollow\">https://code.google.com/p/google-gson/</a>\u200e</p>\n\n<p>Other librarys like Jackson are also available.</p>\n\n<p>This won't convert it to a map. But you can do all things which you want.</p>\n", "title": "Convert a JSON String to a HashMap", "tags": ["java", "json", "dictionary"], "link": "http://stackoverflow.com/questions/21720759/convert-a-json-string-to-a-hashmap/21720816#21720816", "question_id": 21720759, "answer_id": 21720816}, {"body": "<p>Using <a href=\"https://code.google.com/p/google-gson/\">GSon</a>, you can do the following:</p>\n\n<pre><code>Map&lt;String, Object&gt; retMap = new Gson().fromJson(jsonString, new TypeToken&lt;HashMap&lt;String, Object&gt;&gt;() {}.getType());\n</code></pre>\n", "title": "Convert a JSON String to a HashMap", "tags": ["java", "json", "dictionary"], "link": "http://stackoverflow.com/questions/21720759/convert-a-json-string-to-a-hashmap/21720953#21720953", "question_id": 21720759, "answer_id": 21720953}, {"body": "<p>I wrote this code some days back by recursion.</p>\n\n<pre><code>public static Map&lt;String, Object&gt; jsonToMap(JSONObject json) throws JSONException {\n    Map&lt;String, Object&gt; retMap = new HashMap&lt;String, Object&gt;();\n\n    if(json != JSONObject.NULL) {\n        retMap = toMap(json);\n    }\n    return retMap;\n}\n\npublic static Map&lt;String, Object&gt; toMap(JSONObject object) throws JSONException {\n    Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();\n\n    Iterator&lt;String&gt; keysItr = object.keys();\n    while(keysItr.hasNext()) {\n        String key = keysItr.next();\n        Object value = object.get(key);\n\n        if(value instanceof JSONArray) {\n            value = toList((JSONArray) value);\n        }\n\n        else if(value instanceof JSONObject) {\n            value = toMap((JSONObject) value);\n        }\n        map.put(key, value);\n    }\n    return map;\n}\n\npublic static List&lt;Object&gt; toList(JSONArray array) throws JSONException {\n    List&lt;Object&gt; list = new ArrayList&lt;Object&gt;();\n    for(int i = 0; i &lt; array.length(); i++) {\n        Object value = array.get(i);\n        if(value instanceof JSONArray) {\n            value = toList((JSONArray) value);\n        }\n\n        else if(value instanceof JSONObject) {\n            value = toMap((JSONObject) value);\n        }\n        list.add(value);\n    }\n    return list;\n}\n</code></pre>\n", "title": "Convert a JSON String to a HashMap", "tags": ["java", "json", "dictionary"], "link": "http://stackoverflow.com/questions/21720759/convert-a-json-string-to-a-hashmap/24012023#24012023", "question_id": 21720759, "answer_id": 24012023}, {"body": "<p>Here is Vikas's code ported to JSR 353:</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.Map;\n\nimport javax.json.JsonArray;\nimport javax.json.JsonException;\nimport javax.json.JsonObject;\n\npublic class JsonUtils {\n    public static Map&lt;String, Object&gt; jsonToMap(JsonObject json) {\n        Map&lt;String, Object&gt; retMap = new HashMap&lt;String, Object&gt;();\n\n        if(json != JsonObject.NULL) {\n            retMap = toMap(json);\n        }\n        return retMap;\n    }\n\n    public static Map&lt;String, Object&gt; toMap(JsonObject object) throws JsonException {\n        Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();\n\n        Iterator&lt;String&gt; keysItr = object.keySet().iterator();\n        while(keysItr.hasNext()) {\n            String key = keysItr.next();\n            Object value = object.get(key);\n\n            if(value instanceof JsonArray) {\n                value = toList((JsonArray) value);\n            }\n\n            else if(value instanceof JsonObject) {\n                value = toMap((JsonObject) value);\n            }\n            map.put(key, value);\n        }\n        return map;\n    }\n\n    public static List&lt;Object&gt; toList(JsonArray array) {\n        List&lt;Object&gt; list = new ArrayList&lt;Object&gt;();\n        for(int i = 0; i &lt; array.size(); i++) {\n            Object value = array.get(i);\n            if(value instanceof JsonArray) {\n                value = toList((JsonArray) value);\n            }\n\n            else if(value instanceof JsonObject) {\n                value = toMap((JsonObject) value);\n            }\n            list.add(value);\n        }\n        return list;\n    }\n}\n</code></pre>\n", "title": "Convert a JSON String to a HashMap", "tags": ["java", "json", "dictionary"], "link": "http://stackoverflow.com/questions/21720759/convert-a-json-string-to-a-hashmap/27679348#27679348", "question_id": 21720759, "answer_id": 27679348}, {"body": "<p><strong>Converting a JSON String to Map</strong></p>\n\n<pre><code>public static Map&lt;String, Object&gt; jsonString2Map( String jsonString ) throws JSONException{\n        Map&lt;String, Object&gt; keys = new HashMap&lt;String, Object&gt;(); \n\n        org.json.JSONObject jsonObject = new org.json.JSONObject( jsonString ); // HashMap\n        Iterator&lt;?&gt; keyset = jsonObject.keys(); // HM\n\n        while (keyset.hasNext()) {\n            String key =  (String) keyset.next();\n            Object value = jsonObject.get(key);\n            System.out.print(\"\\n Key : \"+key);\n            if ( value instanceof org.json.JSONObject ) {\n                System.out.println(\"Incomin value is of JSONObject : \");\n                keys.put( key, jsonString2Map( value.toString() ));\n            }else if ( value instanceof org.json.JSONArray) {\n                org.json.JSONArray jsonArray = jsonObject.getJSONArray(key);\n                //JSONArray jsonArray = new JSONArray(value.toString());\n                keys.put( key, jsonArray2List( jsonArray ));\n            } else {\n                keyNode( value);\n                keys.put( key, value );\n            }\n        }\n        return keys;\n    }\n</code></pre>\n\n<p><strong>Converting JSON Array to List</strong></p>\n\n<pre><code>public static List&lt;Object&gt; jsonArray2List( JSONArray arrayOFKeys ) throws JSONException{\n        System.out.println(\"Incoming value is of JSONArray : =========\");\n        List&lt;Object&gt; array2List = new ArrayList&lt;Object&gt;();\n        for ( int i = 0; i &lt; arrayOFKeys.length(); i++ )  {\n            if ( arrayOFKeys.opt(i) instanceof JSONObject ) {\n                Map&lt;String, Object&gt; subObj2Map = jsonString2Map(arrayOFKeys.opt(i).toString());\n                array2List.add(subObj2Map);\n            }else if ( arrayOFKeys.opt(i) instanceof JSONArray ) {\n                List&lt;Object&gt; subarray2List = jsonArray2List((JSONArray) arrayOFKeys.opt(i));\n                array2List.add(subarray2List);\n            }else {\n                keyNode( arrayOFKeys.opt(i) );\n                array2List.add( arrayOFKeys.opt(i) );\n            }\n        }\n        return array2List;      \n    }\n</code></pre>\n\n<p><strong>Display JSON of Any Format</strong></p>\n\n<pre><code>public static void displayJSONMAP( Map&lt;String, Object&gt; allKeys ) throws Exception{\n        Set&lt;String&gt; keyset = allKeys.keySet(); // HM$keyset\n        if (! keyset.isEmpty()) {\n            Iterator&lt;String&gt; keys = keyset.iterator(); // HM$keysIterator\n            while (keys.hasNext()) {\n                String key = keys.next();\n                Object value = allKeys.get( key );\n                if ( value instanceof Map ) {\n                    System.out.println(\"\\n Object Key : \"+key);\n                        displayJSONMAP(jsonString2Map(value.toString()));                   \n                }else if ( value instanceof List ) {\n                    System.out.println(\"\\n Array Key : \"+key);\n                    JSONArray jsonArray = new JSONArray(value.toString());\n                    jsonArray2List(jsonArray);\n                }else {\n                    System.out.println(\"key : \"+key+\" value : \"+value);\n                }\n            }\n        }   \n\n    }\n</code></pre>\n\n<p><a href=\"http://stackoverflow.com/questions/19760138/parsing-json-in-java-without-knowing-json-format/31984993#31984993\">Google.gson</a> to HashMap.</p>\n", "title": "Convert a JSON String to a HashMap", "tags": ["java", "json", "dictionary"], "link": "http://stackoverflow.com/questions/21720759/convert-a-json-string-to-a-hashmap/32219975#32219975", "question_id": 21720759, "answer_id": 32219975}, {"body": "<p>The following parser reads a file, parses it into a generic <code>JsonElement</code>, using Google's <code>JsonParser.parse</code> method, and then converts all the items in the generated JSON into a native Java <code>List&lt;object&gt;</code> or <code>Map&lt;String, Object&gt;</code>.</p>\n\n<p><strong><em>Note</strong>: The code below is based off of <a href=\"http://stackoverflow.com/users/2915208/vikas-gupta\">Vikas Gupta</a>'s <a href=\"http://stackoverflow.com/a/24012023/1762224\">answer</a>.</em></p>\n\n<h1>GsonParser.java</h1>\n\n<pre><code>import java.io.FileNotFoundException;\nimport java.io.InputStreamReader;\nimport java.io.UnsupportedEncodingException;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Map.Entry;\n\nimport com.google.gson.GsonBuilder;\nimport com.google.gson.JsonArray;\nimport com.google.gson.JsonElement;\nimport com.google.gson.JsonObject;\nimport com.google.gson.JsonParser;\nimport com.google.gson.JsonPrimitive;\n\npublic class GsonParser {\n    public static void main(String[] args) {\n        try {\n            print(loadJsonArray(\"data_array.json\", true));\n            print(loadJsonObject(\"data_object.json\", true));\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static void print(Object object) {\n        System.out.println(new GsonBuilder().setPrettyPrinting().create().toJson(object).toString());\n    }\n\n    public static Map&lt;String, Object&gt; loadJsonObject(String filename, boolean isResource)\n            throws UnsupportedEncodingException, FileNotFoundException, JsonIOException, JsonSyntaxException, MalformedURLException {\n        return jsonToMap(loadJson(filename, isResource).getAsJsonObject());\n    }\n\n    public static List&lt;Object&gt; loadJsonArray(String filename, boolean isResource)\n            throws UnsupportedEncodingException, FileNotFoundException, JsonIOException, JsonSyntaxException, MalformedURLException {\n        return jsonToList(loadJson(filename, isResource).getAsJsonArray());\n    }\n\n    private static JsonElement loadJson(String filename, boolean isResource) throws UnsupportedEncodingException, FileNotFoundException, JsonIOException, JsonSyntaxException, MalformedURLException {\n        return new JsonParser().parse(new InputStreamReader(FileLoader.openInputStream(filename, isResource), \"UTF-8\"));\n    }\n\n    public static Object parse(JsonElement json) {\n        if (json.isJsonObject()) {\n            return jsonToMap((JsonObject) json);\n        } else if (json.isJsonArray()) {\n            return jsonToList((JsonArray) json);\n        }\n\n        return null;\n    }\n\n    public static Map&lt;String, Object&gt; jsonToMap(JsonObject jsonObject) {\n        if (jsonObject.isJsonNull()) {\n            return new HashMap&lt;String, Object&gt;();\n        }\n\n        return toMap(jsonObject);\n    }\n\n    public static List&lt;Object&gt; jsonToList(JsonArray jsonArray) {\n        if (jsonArray.isJsonNull()) {\n            return new ArrayList&lt;Object&gt;();\n        }\n\n        return toList(jsonArray);\n    }\n\n    private static final Map&lt;String, Object&gt; toMap(JsonObject object) {\n        Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();\n\n        for (Entry&lt;String, JsonElement&gt; pair : object.entrySet()) {\n            map.put(pair.getKey(), toValue(pair.getValue()));\n        }\n\n        return map;\n    }\n\n    private static final List&lt;Object&gt; toList(JsonArray array) {\n        List&lt;Object&gt; list = new ArrayList&lt;Object&gt;();\n\n        for (JsonElement element : array) {\n            list.add(toValue(element));\n        }\n\n        return list;\n    }\n\n    private static final Object toPrimitive(JsonPrimitive value) {\n        if (value.isBoolean()) {\n            return value.getAsBoolean();\n        } else if (value.isString()) {\n            return value.getAsString();\n        } else if (value.isNumber()){\n            return value.getAsNumber();\n        }\n\n        return null;\n    }\n\n    private static final Object toValue(JsonElement value) {\n        if (value.isJsonNull()) {\n            return null;\n        } else if (value.isJsonArray()) {\n            return toList((JsonArray) value);\n        } else if (value.isJsonObject()) {\n            return toMap((JsonObject) value);\n        } else if (value.isJsonPrimitive()) {\n            return toPrimitive((JsonPrimitive) value);\n        }\n\n        return null;\n    }\n}\n</code></pre>\n\n<h1>FileLoader.java</h1>\n\n<pre><code>import java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.io.Reader;\nimport java.io.UnsupportedEncodingException;\nimport java.net.MalformedURLException;\nimport java.net.URISyntaxException;\nimport java.net.URL;\nimport java.util.Scanner;\n\npublic class FileLoader {\n    public static Reader openReader(String filename, boolean isResource) throws UnsupportedEncodingException, FileNotFoundException, MalformedURLException {\n        return openReader(filename, isResource, \"UTF-8\");\n    }\n\n    public static Reader openReader(String filename, boolean isResource, String charset) throws UnsupportedEncodingException, FileNotFoundException, MalformedURLException {\n        return new InputStreamReader(openInputStream(filename, isResource), charset);\n    }\n\n    public static InputStream openInputStream(String filename, boolean isResource) throws FileNotFoundException, MalformedURLException {\n        if (isResource) {\n            return FileLoader.class.getClassLoader().getResourceAsStream(filename);\n        }\n\n        return new FileInputStream(load(filename, isResource));\n    }\n\n    public static String read(String path, boolean isResource) throws IOException {\n        return read(path, isResource, \"UTF-8\");\n    }\n\n    public static String read(String path, boolean isResource, String charset) throws IOException {\n        return read(pathToUrl(path, isResource), charset);\n    }\n\n    @SuppressWarnings(\"resource\")\n    protected static String read(URL url, String charset) throws IOException {\n        return new Scanner(url.openStream(), charset).useDelimiter(\"\\\\A\").next();\n    }\n\n    protected static File load(String path, boolean isResource) throws MalformedURLException {\n        return load(pathToUrl(path, isResource));\n    }\n\n    protected static File load(URL url) {\n        try {\n            return new File(url.toURI());\n        } catch (URISyntaxException e) {\n            return new File(url.getPath());\n        }\n    }\n\n    private static final URL pathToUrl(String path, boolean isResource) throws MalformedURLException {\n        if (isResource) {\n            return FileLoader.class.getClassLoader().getResource(path);\n        }\n\n        return new URL(\"file:/\" + path);\n    }\n}\n</code></pre>\n", "title": "Convert a JSON String to a HashMap", "tags": ["java", "json", "dictionary"], "link": "http://stackoverflow.com/questions/21720759/convert-a-json-string-to-a-hashmap/34667127#34667127", "question_id": 21720759, "answer_id": 34667127}, {"body": "<p><a href=\"https://github.com/javadev/underscore-java/tree/master/lodash-plugin\" rel=\"nofollow\">Underscore-lodash</a> library can convert hash map or array list to json and vice verse.</p>\n\n<p>Code example:</p>\n\n<pre><code>import com.github.underscore.lodash.$;\nimport java.util.*;\n\npublic class Main {\n\n    @SuppressWarnings(\"unchecked\")\n    public static void main(String[] args) {\n\n        String json = \"{\"\n            + \"\\\"name\\\" : \\\"abc\\\" ,\"\n            + \"\\\"email id \\\" : [\\\"abc@gmail.com\\\",\\\"def@gmail.com\\\",\\\"ghi@gmail.com\\\"]\"\n            + \"}\";\n        String data = (String) $.get((Map&lt;String, Object&gt;) $.fromJson(json), \"email id .1\");\n\n        System.out.println(data);\n        // def@gmail.com\n    } \n}\n</code></pre>\n", "title": "Convert a JSON String to a HashMap", "tags": ["java", "json", "dictionary"], "link": "http://stackoverflow.com/questions/21720759/convert-a-json-string-to-a-hashmap/38012436#38012436", "question_id": 21720759, "answer_id": 38012436}, {"body": "<pre><code>import java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.Map;\n\nimport org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\n\n\npublic class JsonUtils {\n\n    public static Map&lt;String, Object&gt; jsonToMap(JSONObject json) {\n        Map&lt;String, Object&gt; retMap = new HashMap&lt;String, Object&gt;();\n\n        if(json != null) {\n            retMap = toMap(json);\n        }\n        return retMap;\n    }\n\n    public static Map&lt;String, Object&gt; toMap(JSONObject object) {\n        Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();\n\n        Iterator&lt;String&gt; keysItr = object.keySet().iterator();\n        while(keysItr.hasNext()) {\n            String key = keysItr.next();\n            Object value = object.get(key);\n\n            if(value instanceof JSONArray) {\n                value = toList((JSONArray) value);\n            }\n\n            else if(value instanceof JSONObject) {\n                value = toMap((JSONObject) value);\n            }\n            map.put(key, value);\n        }\n        return map;\n    }\n\n    public static List&lt;Object&gt; toList(JSONArray array) {\n        List&lt;Object&gt; list = new ArrayList&lt;Object&gt;();\n        for(int i = 0; i &lt; array.size(); i++) {\n            Object value = array.get(i);\n            if(value instanceof JSONArray) {\n                value = toList((JSONArray) value);\n            }\n\n            else if(value instanceof JSONObject) {\n                value = toMap((JSONObject) value);\n            }\n            list.add(value);\n        }\n        return list;\n    }\n}\n</code></pre>\n", "title": "Convert a JSON String to a HashMap", "tags": ["java", "json", "dictionary"], "link": "http://stackoverflow.com/questions/21720759/convert-a-json-string-to-a-hashmap/39048250#39048250", "question_id": 21720759, "answer_id": 39048250}], "creation_date": 1392188102, "score": 55, "link": "http://stackoverflow.com/questions/21720759/convert-a-json-string-to-a-hashmap", "question_id": 21720759}, {"body": "<p>I downloaded <a href=\"https://jdk8.java.net/download.html\">JDK8</a> build b121 and while trying to install I'm getting the following error:</p>\n\n<blockquote>\n  <p>the procedure entry point RegDeleteKeyExA could not be located in the dynamic link library ADVAPI32.dll</p>\n</blockquote>\n\n<p>The operating system is Windows XP, Version 2002 Service Pack 3, 32-bit.</p>\n", "tags": ["java", "dll", "windows-xp", "java-8", "openjdk"], "title": "installing JDK8 on Windows XP - advapi32.dll error", "answers": [{"body": "<p>This happens because Oracle dropped support for Windows XP (which doesn't have <code>RegDeleteKeyExA</code> used by the installer in its <code>ADVAPI32.DLL</code> by the way) as described in <a href=\"http://mail.openjdk.java.net/pipermail/openjfx-dev/2013-July/009005.html\">http://mail.openjdk.java.net/pipermail/openjfx-dev/2013-July/009005.html</a>. Yet while the official support for XP has ended, the Java binaries are still (as of Java 8u20 EA b05 at least) XP-compatible - only the installer isn't...</p>\n\n<p>Because of that, the solution is actually quite easy:</p>\n\n<ol>\n<li><p>get 7-zip (or any other quality archiver), unpack the distribution .exe manually, it has one .zip file inside of it (<code>tools.zip</code>), extract it too,</p></li>\n<li><p>use <code>unpack200</code> from JDK8 to unpack all .pack files to .jar files (older unpacks won't work properly); <code>JAVA_HOME</code> environment variable should be set to your Java unpack root, e.g. \"C:\\Program Files\\Java\\jdk8\" - you can specify it implicitly by e.g.</p>\n\n<pre><code>SET JAVA_HOME=C:\\Program Files\\Java\\jdk8\n</code></pre>\n\n<ul>\n<li><p>Unpack all files with a single command (in batch file):</p>\n\n<pre><code>FOR /R %%f IN (*.pack) DO \"%JAVA_HOME%\\bin\\unpack200.exe\" -r -v \"%%f\" \"%%~pf%%~nf.jar\"\n</code></pre></li>\n<li><p>Unpack all files with a single command (command line from JRE root):</p>\n\n<pre><code>FOR /R %f IN (*.pack) DO \"bin\\unpack200.exe\" -r -v \"%f\" \"%~pf%~nf.jar\"\n</code></pre></li>\n<li><p>Unpack by manually locating the files and unpacking them one-by-one:</p>\n\n<pre><code>%JAVA_HOME%\\bin\\unpack200 -r packname.pack packname.jar\n</code></pre></li>\n</ul>\n\n<p>where <code>packname</code> is for example <code>rt</code></p></li>\n<li><p>point the tool you want to use (e.g. Netbeans) to the <code>%JAVA_HOME%</code> and you're good to go.</p></li>\n</ol>\n\n<p>Note: you probably shouldn't do this just to use Java 8 in your web browser or for any similar reason (installing JRE 8 comes to mind); security flaws in early updates of major Java version releases are (mind me) <em>legendary</em>, and adding to that no real support for neither XP nor Java 8 on XP only makes matters much worse. Not to mention you usually <strong>don't</strong> need Java in your browser (see e.g. <a href=\"http://nakedsecurity.sophos.com/2013/01/15/disable-java-browsers-homeland-security/\">http://nakedsecurity.sophos.com/2013/01/15/disable-java-browsers-homeland-security/</a> - the topic is already covered on many pages, just Google it if you require further info). In any case, AFAIK the only thing required to apply this procedure to JRE is to change some of the paths specified above from \\bin\\ to \\lib\\ (the file placement in installer directory tree is a bit different) - yet I <strong>strongly</strong> advise against doing it.</p>\n\n<p>See also: <a href=\"http://stackoverflow.com/questions/1619662/how-can-i-get-the-latest-jre-jdk-as-a-zip-file-rather-than-exe-or-msi-installe\">How can I get the latest JRE / JDK as a zip file rather than EXE or MSI installer?</a>, <a href=\"http://stackoverflow.com/questions/11808829/jre-1-7-returns-java-lang-noclassdeffounderror-java-lang-object\">JRE 1.7 returns: java/lang/NoClassDefFoundError: java/lang/Object</a></p>\n", "title": "installing JDK8 on Windows XP - advapi32.dll error", "tags": ["java", "dll", "windows-xp", "java-8", "openjdk"], "link": "http://stackoverflow.com/questions/20965564/installing-jdk8-on-windows-xp-advapi32-dll-error/21202600#21202600", "question_id": 20965564, "answer_id": 21202600}, {"body": "<p>With JRE 8 on XP there is another way - to use MSI to deploy package.</p>\n\n<ul>\n<li>Install JRE 8 x86 on a PC with supported OS</li>\n<li>Copy\nc:\\Users[USER]\\AppData\\LocalLow\\Sun\\Java\\jre1.8.0\\jre1.8.0.msi and Data1.cab\nto XP PC and run\n<strong>jre1.8.0.msi</strong><br></li>\n</ul>\n\n<p>or (silent way, usable in batch file etc..)</p>\n\n<pre><code>for %%I in (\"*.msi\") do if exist \"%%I\" msiexec.exe /i %%I /qn EULA=0 SKIPLICENSE=1 PROG=0 ENDDIALOG=0\n</code></pre>\n", "title": "installing JDK8 on Windows XP - advapi32.dll error", "tags": ["java", "dll", "windows-xp", "java-8", "openjdk"], "link": "http://stackoverflow.com/questions/20965564/installing-jdk8-on-windows-xp-advapi32-dll-error/22683874#22683874", "question_id": 20965564, "answer_id": 22683874}, {"body": "<p>There is also an alternate solution for those who aren't afraid of using hex editors (e.g. XVI32) [thanks to <em>Trevor</em> for this]: in the <em>unpacked</em> <sup>1</sup> installer executable (<code>jdk-8uXX-windows-i586.exe</code> in case of JDK) simply replace all occurrences of <code>RegDeleteKeyExA</code> (the name of API found in \"new\" <code>ADVAPI32.DLL</code>) with <code>RegDeleteKeyA</code> (legacy API name), followed by two hex '00's (to preserve padding/segmentation boundaries). The installer will complain about unsupported Windows version, but will work nevertheless.</p>\n\n<p>For reference, the raw hex strings will be:</p>\n\n<pre><code>52 65 67 44 65 6C 65 74 65 4B 65 79 45 78 41\n</code></pre>\n\n<p>replaced with</p>\n\n<pre><code>52 65 67 44 65 6C 65 74 65 4B 65 79 41 00 00\n</code></pre>\n\n<p>Note: this procedure applies to both offline (standalone) and online (downloader) package.</p>\n\n<p><sup>1: some newer installer versions are packed with <a href=\"http://upx.sourceforge.net/\" rel=\"nofollow\">UPX</a> - you'd need to unpack them first, otherwise you simply won't be able to find the hex string required</sup></p>\n", "title": "installing JDK8 on Windows XP - advapi32.dll error", "tags": ["java", "dll", "windows-xp", "java-8", "openjdk"], "link": "http://stackoverflow.com/questions/20965564/installing-jdk8-on-windows-xp-advapi32-dll-error/24466667#24466667", "question_id": 20965564, "answer_id": 24466667}, {"body": "<h1>The 'Future-Proof' Method of installing Java 8 on Win XP</h1>\n\n<ol>\n<li>Obtain a hex editor. The program called Hxd will work for this.</li>\n<li>Download the Oracle Java 8 Online Installer called <code>jre-8u11-windows-i586-iftw.exe</code> (it is the smallest of the two Windows Executables. Running it downloads the latest Java version each time).</li>\n</ol>\n\n<p>The most recent version of Java can be obtained from this Page, there is no direct link.</p>\n\n<p>Java SE Runtime Environment 8 Downloads</p>\n\n<p><a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html\" rel=\"nofollow\">http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html</a></p>\n\n<ol start=\"3\">\n<li><p>Open <code>jre-8u11-windows-i586-iftw.exe</code> (or a newer executable) using Hxd</p></li>\n<li><p>Search and Replace (in Hex Mode) the two occurrences of \n<code>RegDeleteKeyExA</code> and replace them with <code>RegDeleteKeyA</code> (the legacy API name). Remember to use hex mode:</p></li>\n</ol>\n\n<p>Replace</p>\n\n<p>52 65 67 44 65 6C 65 74 65 4B 65 79 45 78 41</p>\n\n<p>with</p>\n\n<p>52 65 67 44 65 6C 65 74 65 4B 65 79 41 00 00</p>\n\n<ol start=\"5\">\n<li><p>Save the File renamed as <code>jre-8u11-windows-i586-iftw__Patched.exe</code></p></li>\n<li><p>Run the patched Program, if you patched it correctly it will complain that your OS is too old.</p></li>\n<li><p>Dismiss the Popup and install Java 8. The Online Installer will download the newest version of Java from Oracle each time you run it.</p></li>\n<li><p>Click on your Desktop's [Start] Button, right-click on \"My Computer\" and left-click on \"Properties\".</p></li>\n<li><p>Click on the \"Advanced\" Tab, and then the \"Environment Variables\" Button. You do not need anything with the letters \"java\" in your <code>PATH</code> (a copy of java is installed in <code>C:\\WINDOWS\\system32</code>, which is in your <code>PATH</code>). Clean all the junk from your <code>PATH</code> including references to java (but, obviously, do not delete the <code>C:\\WINDOWS\\system32</code> Directory from your PATH Variable).</p></li>\n</ol>\n\n<p>Set the Environment Variable named JAVA_HOME (create it if necessary) to </p>\n\n<pre><code>JAVA_HOME=C:\\Program Files\\Java\\jre8\n</code></pre>\n\n<ol start=\"10\">\n<li><p>Everything should now be installed properly. You may need to reboot, but check Step 11 before you do. </p></li>\n<li><p>If Java does not start (test with \"java -version\") then look for *.pack Files like this:</p></li>\n</ol>\n\n<p>cd \"c:\\Program Files\\java\\\"</p>\n\n<p>dir /s *.pack</p>\n\n<p>You can unpack them via one of these two methods:</p>\n\n<ul>\n<li>Unpack all files with a single command (in batch file):</li>\n</ul>\n\n<p><code>FOR /R %%f IN (*.pack) DO \"%JAVA_HOME%\\bin\\unpack200.exe\" -r -v \"%%f\" \"%%~pf%%~nf.jar\"</code></p>\n\n<ul>\n<li>Unpack all files with a single command (command line from JRE root):</li>\n</ul>\n\n<p><code>FOR /R %f IN (*.pack) DO \"%JAVA_HOME%\\bin\\unpack200.exe\"  -r -v \"%f\"  \"%~pf%~nf.jar\"</code></p>\n\n<p>In the future when you want to update Java just re-run your patched Program and it will fetch the newest copy of Java direct from Oracle and install it. No need to re-patch or set any Environment Variables (until you get past version 8, or wish to use the JDK instead of the JRE).</p>\n\n<p>This is a \"fix-once it should work for a while\" Solution.</p>\n", "title": "installing JDK8 on Windows XP - advapi32.dll error", "tags": ["java", "dll", "windows-xp", "java-8", "openjdk"], "link": "http://stackoverflow.com/questions/20965564/installing-jdk8-on-windows-xp-advapi32-dll-error/25232188#25232188", "question_id": 20965564, "answer_id": 25232188}, {"body": "<h2><strong>Oracle has announced fix for Windows XP installation error</strong></h2>\n\n<hr>\n\n<p>I'm adding this answer since Oracle has decided to fix Windows XP installation. As of the JRE 8u25 release in 10/15/2014 the bug has been fixed that prevented Windows XP installation. </p>\n\n<p>However, this does not mean that Oracle is continuing to support Windows XP. They make no guarantee about current and future releases of JRE8 being compatible with Windows XP. It looks like it's a run at your own risk kind of thing.</p>\n\n<p>See the <a href=\"https://blogs.oracle.com/henrik/entry/the_future_of_java_on\">Oracle blog post here.</a></p>\n\n<p>You can get the <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html\">JRE 8u25</a>(Or the latest) right off the Oracle downloads site. </p>\n", "title": "installing JDK8 on Windows XP - advapi32.dll error", "tags": ["java", "dll", "windows-xp", "java-8", "openjdk"], "link": "http://stackoverflow.com/questions/20965564/installing-jdk8-on-windows-xp-advapi32-dll-error/26592646#26592646", "question_id": 20965564, "answer_id": 26592646}], "creation_date": 1389077249, "score": 55, "link": "http://stackoverflow.com/questions/20965564/installing-jdk8-on-windows-xp-advapi32-dll-error", "question_id": 20965564}, {"body": "<p>in java 8 , I want to do something to an optional object if it is present , and do another thing if it is not present.</p>\n\n<pre><code>if (opt.isPresent())\n  System.out.println(\"found\");\nelse\n  System.out.println(\"Not found\");\n</code></pre>\n\n<p>But I think it is not so 'function style'</p>\n\n<p>Optional has an '<code>ifPresent</code>' method , but unable to chain a '<code>orElse</code>' method.\nSo I cannot write :</p>\n\n<pre><code>opt.ifPresent( x -&gt; System.out.println(\"found \" + x))\n   .orElse( System.out.println(\"NOT FOUND\"));\n</code></pre>\n\n<p>Is there any other way ?</p>\n\n<p>=============================================</p>\n\n<p>Thanks @assylias , but I don't think Optional.map() works for the following case :</p>\n\n<pre><code>opt.map( o -&gt; {\n  System.out.println(\"while opt is present...\");\n  o.setProperty(xxx);\n  dao.update(o);\n  return null;\n}).orElseGet( () -&gt; {\n  System.out.println(\"create new obj\");\n  dao.save(new obj);\n  return null;\n});\n</code></pre>\n\n<p>In this case , when opt is present , I update its property and save to db; while it is not available , I create a new obj and save to db.</p>\n\n<p>Note in the two lambdas , I have to return null.</p>\n\n<p>But when opt is truly present , both lambdas will be executed. object will be updated , and a new object will be saved to db . This is because the <code>return null</code> in the first lambda. And orElseGet() will continue to execute.</p>\n", "tags": ["java", "functional-programming", "java-8", "optional"], "title": "Functional style of Java 8&#39;s Optional.ifPresent and if-not-Present?", "answers": [{"body": "<p>An alternative is:</p>\n\n<pre><code>System.out.println(opt.map(o -&gt; \"Found\")\n                      .orElse(\"Not found\"));\n</code></pre>\n\n<p>I don't think it improves readability though.</p>\n\n<p>Or as Marko suggested, use a ternary operator:</p>\n\n<pre><code>System.out.println(opt.isPresent() ? \"Found\" : \"Not found\");\n</code></pre>\n", "title": "Functional style of Java 8&#39;s Optional.ifPresent and if-not-Present?", "tags": ["java", "functional-programming", "java-8", "optional"], "link": "http://stackoverflow.com/questions/23773024/functional-style-of-java-8s-optional-ifpresent-and-if-not-present/23777562#23777562", "question_id": 23773024, "answer_id": 23777562}, {"body": "<p>There isn't a great way to do it out of the box. If you want to be using your cleaner syntax on a regular basis, then you can create a utility class to help out:</p>\n\n<pre><code>public class OptionalEx {\n    private boolean isPresent;\n\n    private OptionalEx(boolean isPresent) {\n        this.isPresent = isPresent;\n    }\n\n    public void orElse(Runnable runner) {\n        if (!isPresent) {\n            runner.run();\n        }\n    }\n\n    public static &lt;T&gt; OptionalEx ifPresent(Optional&lt;T&gt; opt, Consumer&lt;? super T&gt; consumer) {\n        if (opt.isPresent()) {\n            consumer.accept(opt.get());\n            return new OptionalEx(true);\n        }\n        return new OptionalEx(false);\n    }\n}\n</code></pre>\n\n<p>Then you can use a static import elsewhere to get syntax that is close to what you're after:</p>\n\n<pre><code>import static com.example.OptionalEx.ifPresent;\n\nifPresent(opt, x -&gt; System.out.println(\"found \" + x))\n    .orElse(() -&gt; System.out.println(\"NOT FOUND\"));\n</code></pre>\n", "title": "Functional style of Java 8&#39;s Optional.ifPresent and if-not-Present?", "tags": ["java", "functional-programming", "java-8", "optional"], "link": "http://stackoverflow.com/questions/23773024/functional-style-of-java-8s-optional-ifpresent-and-if-not-present/23795627#23795627", "question_id": 23773024, "answer_id": 23795627}, {"body": "<p>For me the answer of @Dane White is OK, first I did not like using Runnable but I could not find any alternatives, here another implementation I preferred more</p>\n\n<pre><code>public class OptionalConsumer&lt;T&gt; {\n    private Optional&lt;T&gt; optional;\n\n    private OptionalConsumer(Optional&lt;T&gt; optional) {\n        this.optional = optional;\n    }\n\n    public static &lt;T&gt; OptionalConsumer&lt;T&gt; of(Optional&lt;T&gt; optional) {\n        return new OptionalConsumer&lt;&gt;(optional);\n    }\n\n    public OptionalConsumer&lt;T&gt; ifPresent(Consumer&lt;T&gt; c) {\n        optional.ifPresent(c);\n        return this;\n    }\n\n    public OptionalConsumer&lt;T&gt; ifNotPresent(Runnable r) {\n        if (!optional.isPresent())\n            r.run();\n        return this;\n    }\n}\n</code></pre>\n\n<p>Then :</p>\n\n<pre><code>Optional&lt;Any&gt; o = Optional.of(...);\nOptionalConsumer.of(o).ifPresent(s -&gt;System.out.println(\"isPresent \"+s))\n            .ifNotPresent(() -&gt; System.out.println(\"! isPresent\"));\n</code></pre>\n", "title": "Functional style of Java 8&#39;s Optional.ifPresent and if-not-Present?", "tags": ["java", "functional-programming", "java-8", "optional"], "link": "http://stackoverflow.com/questions/23773024/functional-style-of-java-8s-optional-ifpresent-and-if-not-present/29395324#29395324", "question_id": 23773024, "answer_id": 29395324}, {"body": "<p>See excellent <a href=\"http://www.nurkiewicz.com/2013/08/optional-in-java-8-cheat-sheet.html\">Optional in Java 8 cheat sheet</a>.</p>\n\n<p>It provides all answers for most use cases.</p>\n\n<p>Short summary below</p>\n\n<h2>ifPresent() - do something when Optional is set</h2>\n\n<pre><code>opt.ifPresent(x -&gt; print(x)); \nopt.ifPresent(this::print);\n</code></pre>\n\n<h2>filter() - reject (filter out) certain Optional values.</h2>\n\n<pre><code>opt.filter(x -&gt; x.contains(\"ab\")).ifPresent(this::print);\n</code></pre>\n\n<h2>map() - transform value if present</h2>\n\n<pre><code>opt.map(String::trim).filter(t -&gt; t.length() &gt; 1).ifPresent(this::print);\n</code></pre>\n\n<h2>orElse()/orElseGet() - turning empty Optional to default T</h2>\n\n<pre><code>int len = opt.map(String::length).orElse(-1);\nint len = opt.\n    map(String::length).\n    orElseGet(() -&gt; slowDefault());     //orElseGet(this::slowDefault)\n</code></pre>\n\n<h2>orElseThrow() - lazily throw exceptions on empty Optional</h2>\n\n<pre><code>opt.\nfilter(s -&gt; !s.isEmpty()).\nmap(s -&gt; s.charAt(0)).\norElseThrow(IllegalArgumentException::new);\n</code></pre>\n", "title": "Functional style of Java 8&#39;s Optional.ifPresent and if-not-Present?", "tags": ["java", "functional-programming", "java-8", "optional"], "link": "http://stackoverflow.com/questions/23773024/functional-style-of-java-8s-optional-ifpresent-and-if-not-present/29900740#29900740", "question_id": 23773024, "answer_id": 29900740}, {"body": "<p>Another solution would be to use higher-order functions as follows</p>\n\n<pre><code>opt.&lt;Runnable&gt;map(value -&gt; () -&gt; System.out.println(\"Found \" + value))\n   .orElse(() -&gt; System.out.println(\"Not Found\"))\n   .run();\n</code></pre>\n", "title": "Functional style of Java 8&#39;s Optional.ifPresent and if-not-Present?", "tags": ["java", "functional-programming", "java-8", "optional"], "link": "http://stackoverflow.com/questions/23773024/functional-style-of-java-8s-optional-ifpresent-and-if-not-present/31093915#31093915", "question_id": 23773024, "answer_id": 31093915}, {"body": "<p>Another solution could be following:</p>\n\n<p>This is how you use it:</p>\n\n<pre><code>    final Opt&lt;String&gt; opt = Opt.of(\"I'm a cool text\");\n    opt.ifPresent()\n        .apply(s -&gt; System.out.printf(\"Text is: %s\\n\", s))\n        .elseApply(() -&gt; System.out.println(\"no text available\"));\n</code></pre>\n\n<p>Or in case you in case of the opposite use case is true:</p>\n\n<pre><code>    final Opt&lt;String&gt; opt = Opt.of(\"This is the text\");\n    opt.ifNotPresent()\n        .apply(() -&gt; System.out.println(\"Not present\"))\n        .elseApply(t -&gt; /*do something here*/);\n</code></pre>\n\n<p>This are the ingredients:</p>\n\n<ol>\n<li>Little modified Function interface, just for the \"elseApply\" method</li>\n<li>Optional enhancement</li>\n<li>A little bit of curring :-)</li>\n</ol>\n\n<p>The \"cosmetically\" enhanced Function interface.</p>\n\n<pre><code>@FunctionalInterface\npublic interface EFunction&lt;T, R&gt; extends Function&lt;T, R&gt; {\n\n    default R elseApply(final T t) {\n        return this.apply(t);\n    }\n\n}\n</code></pre>\n\n<p>And the Optional wrapper class for enhancement:</p>\n\n<pre><code>public class Opt&lt;T&gt; {\n\n    private final Optional&lt;T&gt; optional;\n\n    private Opt(final Optional&lt;T&gt; theOptional) {\n        this.optional = theOptional;\n    }\n\n    public static &lt;T&gt; Opt&lt;T&gt; of(final T value) {\n        return new Opt&lt;&gt;(Optional.of(value));\n    }\n\n    public static &lt;T&gt; Opt&lt;T&gt; of(final Optional&lt;T&gt; optional) {\n        return new Opt&lt;&gt;(optional);\n    }\n\n    public static &lt;T&gt; Opt&lt;T&gt; ofNullable(final T value) {\n        return new Opt&lt;&gt;(Optional.ofNullable(value));\n    }\n\n    public static &lt;T&gt; Opt&lt;T&gt; empty() {\n        return new Opt&lt;&gt;(Optional.empty());\n    }\n\n    private final BiFunction&lt;Consumer&lt;T&gt;, Runnable, Void&gt; ifPresent = (present, notPresent) -&gt; {\n        if (this.optional.isPresent()) {\n            present.accept(this.optional.get());\n        } else {\n            notPresent.run();\n        }\n        return null;\n    };\n\n   private final BiFunction&lt;Runnable, Consumer&lt;T&gt;, Void&gt; ifNotPresent = (notPresent, present) -&gt; {\n        if (!this.optional.isPresent()) {\n            notPresent.run();\n        } else {\n            present.accept(this.optional.get());\n        }\n        return null;\n    };\n\n    public EFunction&lt;Consumer&lt;T&gt;, EFunction&lt;Runnable, Void&gt;&gt; ifPresent() {\n        return Opt.curry(this.ifPresent);\n    }\n\n    public Fkt&lt;Runnable, Fkt&lt;Consumer&lt;T&gt;, Void&gt;&gt; ifNotPresent() {\n        return Opt.curry(this.ifNotPresent);\n    }\n\n    private static &lt;X, Y, Z&gt; EFunction&lt;X, EFunction&lt;Y, Z&gt;&gt; curry(final BiFunction&lt;X, Y, Z&gt; function) {\n        return (final X x) -&gt; (final Y y) -&gt; function.apply(x, y);\n    }\n}\n</code></pre>\n\n<p>This should do the trick and could serve as a basic template how to deal with such requirements.</p>\n\n<p>The basic idea here is following. In a non functional style programming world you would probably implement a method taking two parameter where the first is a kind of runnable code which should be executed in case the value is available and the other parameter is the runnable code which should be run in case the value is not available. For the sake of better readability, you can use curring to split the function of two parameter in two functions of one parameter each. This is what I basically did here.</p>\n\n<p>Hint: Opt also provides the other use case where you want to execute a piece of code just in case the value is not available. This could be done also via Optional.filter.stuff but I found this much more readable.</p>\n\n<p>Hope that helps!</p>\n\n<p>Good programming :-)</p>\n", "title": "Functional style of Java 8&#39;s Optional.ifPresent and if-not-Present?", "tags": ["java", "functional-programming", "java-8", "optional"], "link": "http://stackoverflow.com/questions/23773024/functional-style-of-java-8s-optional-ifpresent-and-if-not-present/38282460#38282460", "question_id": 23773024, "answer_id": 38282460}], "creation_date": 1400639302, "score": 55, "link": "http://stackoverflow.com/questions/23773024/functional-style-of-java-8s-optional-ifpresent-and-if-not-present", "question_id": 23773024}, {"body": "<p>I hear about 'sugaring' and 'desugaring' more often in Java 8, what does these terms mean ? are they conceptual or syntactical.</p>\n\n<p>Some Example:</p>\n\n<blockquote>\n  <p>Default iterated loop resugaring to java </p>\n  \n  <p>Observations about syntactic sugar in compilation.</p>\n</blockquote>\n", "tags": ["java", "semantics", "java-8"], "title": "What are &quot;sugar&quot;, &quot;desugar&quot; terms in context of Java 8?", "answers": [{"body": "<p><em>sugar</em>, in programming, usually refers to those <em>sweet</em> additions, mostly shortcuts, that make some constructs easier to type and to read (the latter being, in practice, the most important during the life cycle of your program).</p>\n\n<p>Wikipedia has a definition of <a href=\"http://en.wikipedia.org/wiki/Syntactic_sugar\" rel=\"nofollow\">syntactic sugar</a> but you should note that not all sugar is, in essence, syntactical (not all recent sweet additions were just compiler changes). </p>\n\n<p>Here are a few examples :</p>\n\n<ul>\n<li>the postfix and prefix increment operators (<code>i++</code> and <code>++i</code>). Their only purpose is to avoid writing an additional statement. They're pure sugar.</li>\n<li><code>+=</code>, <code>|=</code>, <code>&amp;=</code>, etc. are made of the same kind of sugar.</li>\n<li>Implicit conversion between primitive types and objects is sugar too.</li>\n<li>type inference is sugar too.</li>\n<li>Lambda expression, coming with Java 8, is some other kind of sugar (this one not just syntactical)</li>\n</ul>\n\n<p>Java is widely seen as not being concise enough, especially compared to modern languages. That's why those additions that help make the code faster to read are welcome.</p>\n\n<p>To finish, I'd just note that while a lack of sugar can make your program fat, an excess of sugar, leading to many different ways to write the same things, can make your language queasy and your program less coherent and harder to maintain. Another kind of sugar, API sugar, is most often a plague which makes the API harder to grasp, especially when it's made of additions (overloading for example).</p>\n\n<p>This being said, <em>desugaring</em> refers either to</p>\n\n<ul>\n<li>the process by which you remove all that is redundant in a language</li>\n<li>the process by which a code processor finds out what's behind a sugared statement (this may for example involves type inference)</li>\n</ul>\n", "title": "What are &quot;sugar&quot;, &quot;desugar&quot; terms in context of Java 8?", "tags": ["java", "semantics", "java-8"], "link": "http://stackoverflow.com/questions/22060894/what-are-sugar-desugar-terms-in-context-of-java-8/22060916#22060916", "question_id": 22060894, "answer_id": 22060916}, {"body": "<p>\"desugaring\" appears have a very specific meaning in Java 8. It seems to be a catch-all term to express the various ways a lambda expression may be bound to an actual concrete method call.</p>\n\n<p>This document on <a href=\"http://cr.openjdk.java.net/~briangoetz/lambda/lambda-translation.html\" rel=\"nofollow\">\"Translation of Lambda Expressions\"</a> seems to have the real details of what's going on if you're interested in specifics.</p>\n\n<p>A key phrase from the document:</p>\n\n<blockquote>\n  <p>The first step of translating lambdas into bytecode is desugaring the lambda body into a method.</p>\n</blockquote>\n", "title": "What are &quot;sugar&quot;, &quot;desugar&quot; terms in context of Java 8?", "tags": ["java", "semantics", "java-8"], "link": "http://stackoverflow.com/questions/22060894/what-are-sugar-desugar-terms-in-context-of-java-8/22194425#22194425", "question_id": 22060894, "answer_id": 22194425}, {"body": "<p>In general \"desugaring\" in javac allows representing some language features with preexisting ones. This allows representing them in the bytecode without making big changes to the class file format. Also for this reason the back-end of the compiler is more stable than the front-end. This doesn't mean that every new language feature is just syntactic sugar, as is definitely not the case of lambdas and method references. There are more examples of \"desugaring\" in the compiler: </p>\n\n<ul>\n<li>for each loops are \"desugared\" to C style for loops</li>\n<li>assertions are \"desugared\" to an if sentence</li>\n<li>inner classes are represented as a standalone class</li>\n</ul>\n\n<p>You can investigate also what happen with the String switch, type erasure,...</p>\n", "title": "What are &quot;sugar&quot;, &quot;desugar&quot; terms in context of Java 8?", "tags": ["java", "semantics", "java-8"], "link": "http://stackoverflow.com/questions/22060894/what-are-sugar-desugar-terms-in-context-of-java-8/23862145#23862145", "question_id": 22060894, "answer_id": 23862145}], "creation_date": 1393483187, "score": 55, "link": "http://stackoverflow.com/questions/22060894/what-are-sugar-desugar-terms-in-context-of-java-8", "question_id": 22060894}, {"body": "<p><em>Situation:</em> </p>\n\n<p>I intend to use a Java library and I only have an <em>AAR</em> file from a Maven repository but I need the <em>JAR</em> file.</p>\n\n<p><em>Background story:</em> </p>\n\n<p>I tried to compile a library, but its Gradle structure is unstable. So I asked for its compiled jar file, and its developer handed an aar file from some Maven repository (the developer can't compile his own project).\nThe gradle system was a mess, it depended on multiple libraries and Gradle has thrown some exception. </p>\n\n<p>I tried to use it in my IDEA, but it can't see it. A library project should be able to be compiled into a jar file, right?</p>\n\n<p><em>Question:</em></p>\n\n<p><strong>What should I do to convert that AAR file to JAR file?</strong> </p>\n", "tags": ["java", "war", "aar"], "title": "How to convert AAR to JAR", "answers": [{"body": "<p>.aar is a standard zip archive, the same one used in .jar.  Just change the extension and, assuming it's not corrupt or anything, it should be fine.</p>\n\n<p>If you needed to, you could extract it to your filesystem and then repackage it as a jar.</p>\n\n<pre><code>1) Rename it to .jar\n2) Extract: jar xf filename.jar\n3) Repackage: jar cf output.jar input-file(s)\n</code></pre>\n", "title": "How to convert AAR to JAR", "tags": ["java", "war", "aar"], "link": "http://stackoverflow.com/questions/21417419/how-to-convert-aar-to-jar/21417599#21417599", "question_id": 21417419, "answer_id": 21417599}, {"body": "<p>The AAR file consists of a JAR file and some resource files. Here are the steps to convert:</p>\n\n<ol>\n<li>Extract the AAR file using standard zip extract</li>\n<li>Find the <strong><em>classes.jar</em></strong> file in the extracted files</li>\n<li>Rename it to your liking and use the wanted jar file in your project</li>\n</ol>\n", "title": "How to convert AAR to JAR", "tags": ["java", "war", "aar"], "link": "http://stackoverflow.com/questions/21417419/how-to-convert-aar-to-jar/21485222#21485222", "question_id": 21417419, "answer_id": 21485222}, {"body": "<p>For those, who want to do it automatically, I have wrote a little two-lines bash script which does next two things:</p>\n\n<ol>\n<li>Looks for all *.aar files and extracts classes.jar from them</li>\n<li><p>Renames extracted classes.jar to be like the aar but with a new extension</p>\n\n<pre><code>find . -name '*.aar' -exec sh -c 'unzip -d `dirname {}` {} classes.jar' \\;\nfind . -name '*.aar' -exec sh -c 'mv `dirname {}`/classes.jar `echo {} | sed s/aar/jar/g`' \\;\n</code></pre></li>\n</ol>\n\n<p>That's it!</p>\n", "title": "How to convert AAR to JAR", "tags": ["java", "war", "aar"], "link": "http://stackoverflow.com/questions/21417419/how-to-convert-aar-to-jar/29252592#29252592", "question_id": 21417419, "answer_id": 29252592}, {"body": "<pre><code> The 'aar' bundle is the binary distribution of an Android Library Project. .aar file \n consists a JAR file and some resource files. You can convert it\n as .jar file using this steps\n\n1) Copy the .aar file in a separate folder and Rename the .aar file to .zip file using \n any winrar or zip Extractor software.\n\n2) Now you will get a .zip file. Right click on the .zip file and select \"Extract files\". \n Will get a folder which contains \"classes.jar, resource, manifest, R.java,\n proguard(optional), libs(optional), assets(optional)\".\n\n3) Rename the classes.jar file as yourjarfilename.jar and use this in your project.\n</code></pre>\n\n<blockquote>\n  <p>Note: If you want to get only .jar file from your .aar file use the\n  above way.\n      Suppose If you want to include the manifest.xml and resources with your .jar file means\n      you can just right click on your .aar file and save it as .jar file directly instead of\n      saving it as a .zip. To view the .jar file which you have extracted, download <a href=\"http://jd.benow.ca/\" rel=\"nofollow\">JD-GUI(Java Decompiler)</a>. Then drag and drop your .jar file into this JD_GUI, you can see the .class file in readable formats like a .java file.</p>\n</blockquote>\n\n<p><a href=\"http://i.stack.imgur.com/UBauf.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/UBauf.png\" alt=\"enter image description here\"></a>\n<a href=\"http://i.stack.imgur.com/4fytA.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/4fytA.png\" alt=\"enter image description here\"></a></p>\n", "title": "How to convert AAR to JAR", "tags": ["java", "war", "aar"], "link": "http://stackoverflow.com/questions/21417419/how-to-convert-aar-to-jar/32007535#32007535", "question_id": 21417419, "answer_id": 32007535}, {"body": "<p>Android Studio (version: 1.3.2) allows you to seamlessly access the .jar inside a .aar.</p>\n\n<p>Bonus: it automatically decompiles the classes!</p>\n\n<p>Simply follow these steps:</p>\n\n<ol>\n<li><p><code>File &gt; New &gt; New Module &gt; Import .JAR/.AAR Package</code> to import you .aar as a module</p></li>\n<li><p>Add the newly created module as a dependency to your main project (not sure if needed)</p></li>\n<li><p>Right click on \"classes.jar\" as shown in the capture below, and click \"Show in explorer\". Here is your .jar.</p></li>\n</ol>\n\n<p><a href=\"http://i.stack.imgur.com/341W7.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/341W7.png\" alt=\"access .jar from .aar\"></a></p>\n", "title": "How to convert AAR to JAR", "tags": ["java", "war", "aar"], "link": "http://stackoverflow.com/questions/21417419/how-to-convert-aar-to-jar/32742160#32742160", "question_id": 21417419, "answer_id": 32742160}, {"body": "<p><strong>Resource based .aar-projects</strong></p>\n\n<p>Finding the classes.jar file inside the .aar file is pretty trivial. However, that approach does not work, if the .aar-project defined some resources (example: R.layout.xyz)</p>\n\n<ul>\n<li><p>Therefore <a href=\"https://gist.github.com/commonsguy/a3a534ea28ef8a82a213\" rel=\"nofollow\">deaar</a> from CommonsGuy helped me to get a valid\nADT-friendly project out of an .aar-file. <em>In my case I converted\n<a href=\"https://github.com/davemorrissey/subsampling-scale-image-view\" rel=\"nofollow\">subsampling-scale-image-view</a>. It took me about an hour to set up ruby on my PC.</em></p></li>\n<li><p>Another approach is using android-maven-plugin for Eclipse/ADT <a href=\"https://commonsware.com/blog/2014/07/03/consuming-aars-eclipse.html\" rel=\"nofollow\">as\nCommonsGuy writes in his blog</a>.</p></li>\n<li><p>Yet another approach could be, just cloning the whole desired project\nas source from git and import it as \"Existing Android project\"</p></li>\n</ul>\n", "title": "How to convert AAR to JAR", "tags": ["java", "war", "aar"], "link": "http://stackoverflow.com/questions/21417419/how-to-convert-aar-to-jar/34636815#34636815", "question_id": 21417419, "answer_id": 34636815}, {"body": "<p>As many other people have pointed out, just extracting the .jar from the .aar file doesn't quite cut it as resources may be missing.</p>\n\n<p>Here are the steps that worked for me (context of Android, your mileage may vary if you have other purposes):</p>\n\n<ol>\n<li>Rename the .aar file to .zip and extract.</li>\n<li>The extracted folder is an ADT project that you can import in Eclipse with some minor modifications (see below)!</li>\n<li>In the extracted folder rename the contained file <strong>classes.jar</strong> to whatever you like (in this example myProjectLib.jar) and move it to the lib folder within the extracted folder.</li>\n<li>Now in order for Eclipse to accept it you need to put two files into the extracted folder root:\n\n<ul>\n<li>.project</li>\n<li>.classpath</li>\n</ul></li>\n<li>To do that, create a new Android dummy project in Eclipse and copy over the files, or copy over from an existing Android project.</li>\n<li>Open the .project file and look for the XML name tag and replace the contents of it with myProjectLib (or whatever you called your jar file above) and save.</li>\n<li>Now in Eclipse you can <strong>File -> New -> Project -> Android Project from existing source..</strong> and point to the extracted folder content.</li>\n<li>After import right click on the newly created project, select <strong>Properties -> Android</strong>, and check <strong>Is Library</strong>.</li>\n<li>In your main project that you want to use the library for, also go to <strong>Properties -> Android</strong> and add the newly added myProjectLib to the list of dependencies.</li>\n</ol>\n", "title": "How to convert AAR to JAR", "tags": ["java", "war", "aar"], "link": "http://stackoverflow.com/questions/21417419/how-to-convert-aar-to-jar/37747277#37747277", "question_id": 21417419, "answer_id": 37747277}], "creation_date": 1390945003, "score": 54, "link": "http://stackoverflow.com/questions/21417419/how-to-convert-aar-to-jar", "question_id": 21417419}, {"body": "<p>I'm using Java in an application running on multiple machines, and all machines need to get the same results for mathematical operations. Is it safe to use Java's floating point primitives? Or should I just use a fixed-point math library?</p>\n", "tags": ["java", "floating-point"], "title": "Will floating point operations on the JVM give the same results on all platforms?", "answers": [{"body": "<p>Not in general, no. However, you can use <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.4\"><code>strictfp</code> expressions</a>:</p>\n\n<blockquote>\n  <p>Within an FP-strict expression, all intermediate values must be elements of the float value set or the double value set, implying that the results of all FP-strict expressions must be those predicted by IEEE 754 arithmetic on operands represented using single and double formats.</p>\n  \n  <p>Within an expression that is not FP-strict, some leeway is granted for an implementation to use an extended exponent range to represent intermediate results; the net effect, roughly speaking, is that a calculation might produce \"the correct answer\" in situations where exclusive use of the float value set or double value set might result in overflow or underflow.</p>\n</blockquote>\n", "title": "Will floating point operations on the JVM give the same results on all platforms?", "tags": ["java", "floating-point"], "link": "http://stackoverflow.com/questions/22335046/will-floating-point-operations-on-the-jvm-give-the-same-results-on-all-platforms/22335100#22335100", "question_id": 22335046, "answer_id": 22335100}, {"body": "<p>In addition to <code>strictfp</code>, there's also <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/StrictMath.html\"><code>StrictMath</code></a> which requires that the results be predictable for transcendental and other functions.</p>\n", "title": "Will floating point operations on the JVM give the same results on all platforms?", "tags": ["java", "floating-point"], "link": "http://stackoverflow.com/questions/22335046/will-floating-point-operations-on-the-jvm-give-the-same-results-on-all-platforms/22335317#22335317", "question_id": 22335046, "answer_id": 22335317}, {"body": "<p>The JVM should implement the IEEE specification consistently and this specification is very technical and precise. The floating point primitives of float and double <em>are</em> the same on all platforms. </p>\n\n<p>The difference is only in the treatment of intermediate results, and that the virtual machine implementation may use float-extended-exponent and double-extended-exponent formats while evaluating expressions involving locals within the same frame of execution.</p>\n\n<p>So if you have code like:</p>\n\n<pre><code>double d1 = 0.342;\ndouble d2 = 1.328479;\ndouble d3 = 4.99384728796;\nSystem.out.println(d1 * d2 / d3);\n</code></pre>\n\n<p>and this is not in a strictfp context, it is possible that you will have differences across different JVMs at runtime. This is because in the evaluation of the expression d1*d2/d3 the intermediate result of d1*d2 is used in the expression \"intermediate result\"/d3 and the JVM might be using float-extended-exponent and double-extended-exponent formats to store the \"intermediate result\".</p>\n\n<p>To get around this, you can use strictfp or StrictMath as others have answered here, OR avoid using intermediate results in your expressions. One way to do that is to store any intermediate result on the heap. For instance as follows:</p>\n\n<pre><code>class MyClass {\n    static double d1 = 0.342;\n    static double d2 = 1.328479;\n    static double d3 = 4.99384728796;\n    static double intermediate_result = 0d;\n    public static void main(String[] args) {\n        intermediate_result = d1 * d2;\n        System.out.println(intermediate_result / d3);\n    }\n}\n</code></pre>\n", "title": "Will floating point operations on the JVM give the same results on all platforms?", "tags": ["java", "floating-point"], "link": "http://stackoverflow.com/questions/22335046/will-floating-point-operations-on-the-jvm-give-the-same-results-on-all-platforms/22342003#22342003", "question_id": 22335046, "answer_id": 22342003}], "creation_date": 1394567025, "score": 54, "link": "http://stackoverflow.com/questions/22335046/will-floating-point-operations-on-the-jvm-give-the-same-results-on-all-platforms", "question_id": 22335046}, {"body": "<p>I want to change the automatic author that appears when I create a file in AndroidStudio.</p>\n\n<pre><code>/**\n * Created by a556520 on 16/01/14.\n */\npublic class POI {\n</code></pre>\n\n<p>The author takes 'a556520' but I want that appears my name, and not the number of employee. Is that possible?\nI didnt found in the settings.</p>\n", "tags": ["java", "android", "android-studio"], "title": "Change Author template in Android Studio", "answers": [{"body": "<p>You can change template for file header by going to  Preferences -> Editor -> File and Code Templates. Then change <code>${USER}</code> in File Header under Includes tab. However this is hardcoding solution it would be better to change actual value of <code>${USER}</code> variable.</p>\n", "title": "Change Author template in Android Studio", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/21160288/change-author-template-in-android-studio/21160416#21160416", "question_id": 21160288, "answer_id": 21160416}, {"body": "<p>Press <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>S</kbd> then go to <strong>File and Code Templates</strong>. Here you can set up what you want. E.g. replace <code>${USER}</code> to your name.</p>\n", "title": "Change Author template in Android Studio", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/21160288/change-author-template-in-android-studio/21160451#21160451", "question_id": 21160288, "answer_id": 21160451}, {"body": "<p>You can overwrite the <code>${USER}</code> variable in the template file with the <code>#set( $VARIABLE = \"value\")</code> function. Go to Settings -> File and Code Templates -> Includes -> File Header prepend the <code>#set()</code> function call, for example:</p>\n\n<pre><code>#set( $USER = \"Your name\" )\n/**\n* Created by ${USER} on ${DATE}.\n*/\n</code></pre>\n", "title": "Change Author template in Android Studio", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/21160288/change-author-template-in-android-studio/21161555#21161555", "question_id": 21160288, "answer_id": 21161555}, {"body": "<p>The above answers are correct. But you can go even further and define your own variables - such as User, Company, Email etc.:</p>\n\n<pre><code>#set ($USER = \"Name name\")\n#set ($COMPANY = \"company Ltd\")\n#set ($EMAIL = \"example@gmail.com\")\n\n/**\n * Created by ${USER} on ${DATE}.\n * ${COMPANY}\n * ${EMAIL}\n */\n</code></pre>\n", "title": "Change Author template in Android Studio", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/21160288/change-author-template-in-android-studio/29608138#29608138", "question_id": 21160288, "answer_id": 29608138}, {"body": "<p><strong>To edit your File Header template, do the following:</strong></p>\n\n<p>1)Open Android Studio <code>Preferences</code> dialog.</p>\n\n<p>2)In the search box, write \"File and Code Templates\".</p>\n\n<p>3)Select the left menu item \"File and Code Templates\".</p>\n\n<p>4)From the middle tabular navigation section, select <code>Includes</code>.</p>\n\n<p>5)Select <code>File Header</code> item that applies to the Java files.</p>\n\n<p>6)You will find an editor section that allow you to edit it for the required pattern. Use the description section below to understand the different parameters that can be used.</p>\n\n<pre><code>/**\n* Created by ${USER} on ${DAY},${MONTH_NAME_FULL},${YEAR}\n*/\n</code></pre>\n\n<p><a href=\"http://i.stack.imgur.com/ngs4M.png\"><img src=\"http://i.stack.imgur.com/ngs4M.png\" alt=\"enter image description here\"></a></p>\n\n<p>Note: For the <code>name</code> attribute, you can simply write it directly without using attributes. Also you can add your company name or project name in the same way also such as:</p>\n\n<pre><code>/**\n* Created by Sami on ${DAY},${MONTH_NAME_FULL},${YEAR}\n* ABCDFG company,\n* Dubai, UAE.\n*/\n</code></pre>\n", "title": "Change Author template in Android Studio", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/21160288/change-author-template-in-android-studio/31803343#31803343", "question_id": 21160288, "answer_id": 31803343}, {"body": "<p>Actually the correct way to change the username is to change the name\nof the current user logged in into Windows. (if you're using windows)</p>\n\n<p>Android Studio uses the name saved in %USERNAME% variable.\nThis is the name you get if you type <code>whoami</code> into a command console\nor batch file. And it is the name that is stored under C(orWhatEver):\\User.</p>\n\n<p>To change the name you can <strong>not</strong> just change the name of the profile \nyou are logged in. \nYou need to create a new user and give it the correct name.\nThis way, even if you reinstall AndroidStudio some day, you will end with\nthe correct <code>${USER}</code> again.</p>\n\n<p>The easier way surely is to just hard code your name into the template.\nBut that is just treating the symptoms and you should use the way to fix the root cause.</p>\n", "title": "Change Author template in Android Studio", "tags": ["java", "android", "android-studio"], "link": "http://stackoverflow.com/questions/21160288/change-author-template-in-android-studio/32653427#32653427", "question_id": 21160288, "answer_id": 32653427}], "creation_date": 1389871090, "score": 53, "link": "http://stackoverflow.com/questions/21160288/change-author-template-in-android-studio", "question_id": 21160288}, {"body": "<p>I'm consuming an API from my android app, and all the JSON responses are like this:</p>\n\n<pre><code>{\n    'status': 'OK',\n    'reason': 'Everything was fine',\n    'content': {\n         &lt; some data here &gt;\n}\n</code></pre>\n\n<p>The problem is that all my POJOs have a <code>status</code>, <code>reason</code> fields, and inside the <code>content</code> field is the real POJO I want.</p>\n\n<p>Is there any way to create a custom converter of Gson to extract always the <code>content</code> field, so retrofit returns the appropiate POJO?</p>\n", "tags": ["java", "android", "json", "gson", "retrofit"], "title": "Get nested JSON object with GSON using retrofit", "answers": [{"body": "<p>You would write a custom deserializer that returns the embedded object.</p>\n\n<p>Let's say your JSON is:</p>\n\n<pre><code>{\n    \"status\":\"OK\",\n    \"reason\":\"some reason\",\n    \"content\" : \n    {\n        \"foo\": 123,\n        \"bar\": \"some value\"\n    }\n}\n</code></pre>\n\n<p>You'd then have a <code>Content</code> POJO:</p>\n\n<pre><code>class Content\n{\n    public int foo;\n    public String bar;\n}\n</code></pre>\n\n<p>Then you write a deserializer:</p>\n\n<pre><code>class MyDeserializer implements JsonDeserializer&lt;Content&gt;\n{\n    @Override\n    public Content deserialize(JsonElement je, Type type, JsonDeserializationContext jdc)\n        throws JsonParseException\n    {\n        // Get the \"content\" element from the parsed JSON\n        JsonElement content = je.getAsJsonObject().get(\"content\");\n\n        // Deserialize it. You use a new instance of Gson to avoid infinite recursion\n        // to this deserializer\n        return new Gson().fromJson(content, Content.class);\n\n    }\n}\n</code></pre>\n\n<p>Now if you construct a <code>Gson</code> with <code>GsonBuilder</code> and register the deserializer:</p>\n\n<pre><code>Gson gson = \n    new GsonBuilder()\n        .registerTypeAdapter(Content.class, new MyDeserializer())\n        .create();\n</code></pre>\n\n<p>You can deserialize your JSON straight to your <code>Content</code>:</p>\n\n<pre><code>Content c = gson.fromJson(myJson, Content.class);\n</code></pre>\n\n<p><strong>Edit to add from comments:</strong> </p>\n\n<p>If you have different types of messages but they all have the \"content\" field, you can make the Deserializer generic by doing:</p>\n\n<pre><code>class MyDeserializer&lt;T&gt; implements JsonDeserializer&lt;T&gt;\n{\n    @Override\n    public T deserialize(JsonElement je, Type type, JsonDeserializationContext jdc)\n        throws JsonParseException\n    {\n        // Get the \"content\" element from the parsed JSON\n        JsonElement content = je.getAsJsonObject().get(\"content\");\n\n        // Deserialize it. You use a new instance of Gson to avoid infinite recursion\n        // to this deserializer\n        return new Gson().fromJson(content, type);\n\n    }\n}\n</code></pre>\n\n<p>You just have to register an instance for each of your types:</p>\n\n<pre><code>Gson gson = \n    new GsonBuilder()\n        .registerTypeAdapter(Content.class, new MyDeserializer&lt;Content&gt;())\n        .registerTypeAdapter(DiffContent.class, new MyDeserializer&lt;DiffContent&gt;())\n        .create();\n</code></pre>\n\n<p>When you call <code>.fromJson()</code> the type is carried into the deserializer, so it should then work for all your types. </p>\n", "title": "Get nested JSON object with GSON using retrofit", "tags": ["java", "android", "json", "gson", "retrofit"], "link": "http://stackoverflow.com/questions/23070298/get-nested-json-object-with-gson-using-retrofit/23071080#23071080", "question_id": 23070298, "answer_id": 23071080}, {"body": "<p>Continuing Brian's idea, because we almost always have many REST resources each with it's own root, it could be useful to generalize deserialization:</p>\n\n<pre><code> class RestDeserializer&lt;T&gt; implements JsonDeserializer&lt;T&gt; {\n\n    private Class&lt;T&gt; mClass;\n    private String mKey;\n\n    public RestDeserializer(Class&lt;T&gt; targetClass, String key) {\n        mClass = targetClass;\n        mKey = key;\n    }\n\n    @Override\n    public T deserialize(JsonElement je, Type type, JsonDeserializationContext jdc)\n            throws JsonParseException {\n        JsonElement content = je.getAsJsonObject().get(mKey);\n        return new Gson().fromJson(content, mClass);\n\n    }\n}\n</code></pre>\n\n<p>Then to parse sample payload from above, we can register GSON deserializer:</p>\n\n<pre><code>Gson gson = new GsonBuilder()\n    .registerTypeAdapter(Content.class, new RestDeserializer&lt;&gt;(Content.class, \"content\"))\n    .build();\n</code></pre>\n", "title": "Get nested JSON object with GSON using retrofit", "tags": ["java", "android", "json", "gson", "retrofit"], "link": "http://stackoverflow.com/questions/23070298/get-nested-json-object-with-gson-using-retrofit/27493233#27493233", "question_id": 23070298, "answer_id": 27493233}, {"body": "<p>@BrianRoach's solution is the correct solution. It is worth noting that in the special case where you have nested custom objects that both need a custom <code>TypeAdapter</code>, you must register the <code>TypeAdapter</code> with the <strong>new instance of GSON</strong>, otherwise the second <code>TypeAdapter</code> will never be called. This is because we are creating a new <code>Gson</code> instance inside our custom deserializer.</p>\n\n<p>For example, if you had the following json:</p>\n\n<pre><code>{\n    \"status\": \"OK\",\n    \"reason\": \"some reason\",\n    \"content\": {\n        \"foo\": 123,\n        \"bar\": \"some value\",\n        \"subcontent\": {\n            \"useless\": \"field\",\n            \"data\": {\n                \"baz\": \"values\"\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>And you wanted this JSON to be mapped to the following objects:</p>\n\n<pre><code>class MainContent\n{\n    public int foo;\n    public String bar;\n    public SubContent subcontent;\n}\n\nclass SubContent\n{\n    public String baz;\n}\n</code></pre>\n\n<p>You would need to register the <code>SubContent</code>'s <code>TypeAdapter</code>. To be more robust, you could do the following:</p>\n\n<pre><code>public class MyDeserializer&lt;T&gt; implements JsonDeserializer&lt;T&gt; {\n    private final Class mNestedClazz;\n    private final Object mNestedDeserializer;\n\n    public MyDeserializer(Class nestedClazz, Object nestedDeserializer) {\n        mNestedClazz = nestedClazz;\n        mNestedDeserializer = nestedDeserializer;\n    }\n\n    @Override\n    public T deserialize(JsonElement je, Type type, JsonDeserializationContext jdc) throws JsonParseException {\n        // Get the \"content\" element from the parsed JSON\n        JsonElement content = je.getAsJsonObject().get(\"content\");\n\n        // Deserialize it. You use a new instance of Gson to avoid infinite recursion\n        // to this deserializer\n        GsonBuilder builder = new GsonBuilder();\n        if (mNestedClazz != null &amp;&amp; mNestedDeserializer != null) {\n            builder.registerTypeAdapter(mNestedClazz, mNestedDeserializer);\n        }\n        return builder.create().fromJson(content, type);\n\n    }\n}\n</code></pre>\n\n<p>and then create it like so:</p>\n\n<pre><code>MyDeserializer&lt;Content&gt; myDeserializer = new MyDeserializer&lt;Content&gt;(SubContent.class,\n                    new SubContentDeserializer());\nGson gson = new GsonBuilder().registerTypeAdapter(Content.class, myDeserializer).create();\n</code></pre>\n\n<p>This could easily be used for the nested \"content\" case as well by simply passing in a new instance of <code>MyDeserializer</code> with null values.</p>\n", "title": "Get nested JSON object with GSON using retrofit", "tags": ["java", "android", "json", "gson", "retrofit"], "link": "http://stackoverflow.com/questions/23070298/get-nested-json-object-with-gson-using-retrofit/27976073#27976073", "question_id": 23070298, "answer_id": 27976073}, {"body": "<p>This is the same solution as @AYarulin but assume the class name is the JSON key name. This way you only need to pass the Class name. </p>\n\n<pre><code> class RestDeserializer&lt;T&gt; implements JsonDeserializer&lt;T&gt; {\n\n    private Class&lt;T&gt; mClass;\n    private String mKey;\n\n    public RestDeserializer(Class&lt;T&gt; targetClass) {\n        mClass = targetClass;\n        mKey = mClass.getSimpleName();\n    }\n\n    @Override\n    public T deserialize(JsonElement je, Type type, JsonDeserializationContext jdc)\n            throws JsonParseException {\n        JsonElement content = je.getAsJsonObject().get(mKey);\n        return new Gson().fromJson(content, mClass);\n\n    }\n}\n</code></pre>\n\n<p>Then to parse sample payload from above, we can register GSON deserializer. This is problematic as the Key is case sensitive, so the case of the class name must match the case of the JSON key. </p>\n\n<pre><code>Gson gson = new GsonBuilder()\n.registerTypeAdapter(Content.class, new RestDeserializer&lt;&gt;(Content.class))\n.build();\n</code></pre>\n", "title": "Get nested JSON object with GSON using retrofit", "tags": ["java", "android", "json", "gson", "retrofit"], "link": "http://stackoverflow.com/questions/23070298/get-nested-json-object-with-gson-using-retrofit/34113460#34113460", "question_id": 23070298, "answer_id": 34113460}, {"body": "<p>Had the same problem couple of days ago. I've solve this using response wrapper class and RxJava transformer, which I think is quite flexiable solution:</p>\n\n<p><strong>Wrapper:</strong></p>\n\n<pre><code>public class ApiResponse&lt;T&gt; {\n    public String status;\n    public String reason;\n    public T content;\n}\n</code></pre>\n\n<p><strong>Custom exception to throw, when status is not OK:</strong></p>\n\n<pre><code>public class ApiException extends RuntimeException {\n    private final String reason;\n\n    public ApiException(String reason) {\n        this.reason = reason;\n    }\n\n    public String getReason() {\n        return apiError;\n    }\n}\n</code></pre>\n\n<p><strong>Rx transformer:</strong></p>\n\n<pre><code>protected &lt;T&gt; Observable.Transformer&lt;ApiResponse&lt;T&gt;, T&gt; applySchedulersAndExtractData() {\n    return observable -&gt; observable\n            .subscribeOn(Schedulers.io())\n            .observeOn(AndroidSchedulers.mainThread())\n            .map(tApiResponse -&gt; {\n                if (!tApiResponse.status.equals(\"OK\"))\n                    throw new ApiException(tApiResponse.reason);\n                else\n                    return tApiResponse.content;\n            });\n}\n</code></pre>\n\n<p><strong>Example usage:</strong></p>\n\n<pre><code>// Call definition:\n@GET(\"/api/getMyPojo\")\nObservable&lt;ApiResponse&lt;MyPojo&gt;&gt; getConfig();\n\n// Call invoke:\nwebservice.getMyPojo()\n        .compose(applySchedulersAndExtractData())\n        .subscribe(this::handleSuccess, this::handleError);\n\n\nprivate void handleSuccess(MyPojo mypojo) {\n    // handle success\n}\n\nprivate void handleError(Throwable t) {\n    getView().showSnackbar( ((ApiException) throwable).getReason() );\n}\n</code></pre>\n\n<p>My topic:\n<a href=\"http://stackoverflow.com/questions/34288873/retrofit-2-rxjava-gson-global-deserialization-change-response-type\">Retrofit 2 RxJava - Gson - &quot;Global&quot; deserialization, change response type</a></p>\n", "title": "Get nested JSON object with GSON using retrofit", "tags": ["java", "android", "json", "gson", "retrofit"], "link": "http://stackoverflow.com/questions/23070298/get-nested-json-object-with-gson-using-retrofit/34375405#34375405", "question_id": 23070298, "answer_id": 34375405}, {"body": "<p>In my case, the \"content\" key would change for each response. Example:</p>\n\n<pre><code>// Root is hotel\n{\n  status : \"ok\",\n  statusCode : 200,\n  hotels : [{\n    name : \"Taj Palace\",\n    location : {\n      lat : 12\n      lng : 77\n    }\n\n  }, {\n    name : \"Plaza\", \n    location : {\n      lat : 12\n      lng : 77\n    }\n  }]\n}\n\n//Root is city\n\n{\n  status : \"ok\",\n  statusCode : 200,\n  city : {\n    name : \"Vegas\",\n    location : {\n      lat : 12\n      lng : 77\n    }\n}\n</code></pre>\n\n<p>In such cases I used a similar solution as listed above but had to tweak it. You can see the gist <a href=\"https://gist.github.com/varunachar/e98a2c240eddc56053c5\" rel=\"nofollow\">here</a>. It's a little too large to post it here on SOF. </p>\n\n<p>The annotation <code>@InnerKey(\"content\")</code> is used and the rest of the code is to facilitate it's usage with Gson.</p>\n", "title": "Get nested JSON object with GSON using retrofit", "tags": ["java", "android", "json", "gson", "retrofit"], "link": "http://stackoverflow.com/questions/23070298/get-nested-json-object-with-gson-using-retrofit/35894539#35894539", "question_id": 23070298, "answer_id": 35894539}], "creation_date": 1397509168, "score": 53, "link": "http://stackoverflow.com/questions/23070298/get-nested-json-object-with-gson-using-retrofit", "question_id": 23070298}, {"body": "<p>How do I configure Android Studio (or Intellij generally) to correctly generate getters and setters for member variables with prefixes?</p>\n\n<p>If I have a class </p>\n\n<pre><code>public class Foo{\n    int mBar;\n}\n</code></pre>\n\n<p>I want it to create <code>getBar()</code> instead of <code>getMBar</code> when I do <code>Refactor-&gt;Encapsulate</code> or <code>Generate</code></p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I found the way to do it per-project basis: You just go <code>File-&gt;Settings-&gt;Project Settings-&gt;Code Style</code></p>\n\n<p>But it created a settings file somewhere in my project directory. </p>\n\n<p>I want a solution which allows me to do it once for all projects, present and future. </p>\n", "tags": ["java", "intellij-idea", "coding-style", "android-studio"], "title": "Intellij (Android studio) member variable prefix", "answers": [{"body": "<p>Try going to File-->Other Settings-->Default Settings. Your should be able to make prefixes for every other project that you do if you change prefix settings with the scheme set to default instead of Project. The prefix change would be in Java and Code Generation. That will fix setters and getters.</p>\n", "title": "Intellij (Android studio) member variable prefix", "tags": ["java", "intellij-idea", "coding-style", "android-studio"], "link": "http://stackoverflow.com/questions/22732722/intellij-android-studio-member-variable-prefix/22977787#22977787", "question_id": 22732722, "answer_id": 22977787}, {"body": "<p>In Mac OS</p>\n\n<ul>\n<li>Android Studio -> Preferences -> Code Style -> Java</li>\n<li>on the right panel, click on the right arrow until you see <code>code generation tab</code></li>\n<li>Click ok</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/g55ba.png\" alt=\"enter image description here\"></p>\n", "title": "Intellij (Android studio) member variable prefix", "tags": ["java", "intellij-idea", "coding-style", "android-studio"], "link": "http://stackoverflow.com/questions/22732722/intellij-android-studio-member-variable-prefix/28228793#28228793", "question_id": 22732722, "answer_id": 28228793}], "creation_date": 1396105451, "score": 53, "link": "http://stackoverflow.com/questions/22732722/intellij-android-studio-member-variable-prefix", "question_id": 22732722}, {"body": "<p>I have a 2&nbsp;GB file (<code>iputfile.txt</code>) in which every line in the file is a word, just like:</p>\n\n<pre><code>apple\nred\nbeautiful\nsmell\nspark\ninput\n</code></pre>\n\n<p>I need to write a program to read every word in the file and print the word count. I wrote it using Java and C++, but the result is surprising: Java runs 2.3 times faster than C++. My code are as follows:</p>\n\n<p>C++:</p>\n\n<pre><code>int main() {\n    struct timespec ts, te;\n    double cost;\n    clock_gettime(CLOCK_REALTIME, &amp;ts);\n\n    ifstream fin(\"inputfile.txt\");\n    string word;\n    int count = 0;\n    while(fin &gt;&gt; word) {\n        count++;\n    }\n    cout &lt;&lt; count &lt;&lt; endl;\n\n    clock_gettime(CLOCK_REALTIME, &amp;te);\n    cost = te.tv_sec - ts.tv_sec + (double)(te.tv_nsec-ts.tv_nsec)/NANO;\n    printf(\"Run time: %-15.10f s\\n\", cost);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>5e+08\nRun time: 69.311 s\n</code></pre>\n\n<p>Java:</p>\n\n<pre><code> public static void main(String[] args) throws Exception {\n\n    long startTime = System.currentTimeMillis();\n\n    FileReader reader = new FileReader(\"inputfile.txt\");\n    BufferedReader br = new BufferedReader(reader);\n    String str = null;\n    int count = 0;\n    while((str = br.readLine()) != null) {\n        count++;\n    }\n    System.out.println(count);\n\n    long endTime = System.currentTimeMillis();\n    System.out.println(\"Run time : \" + (endTime - startTime)/1000 + \"s\");\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>5.0E8\nRun time: 29 s\n</code></pre>\n\n<p>Why is Java faster than C++ in this situation, and how do I improve the performance of C++?</p>\n", "tags": ["java", "c++", "file"], "title": "Why does Java read a big file faster than C++?", "answers": [{"body": "<p>You aren't comparing the same thing. The Java program reads lines, depening on the newline, while the C++ program reads white space delimited \"words\", which is a little extra work.</p>\n\n<p>Try <code>istream::getline</code>.</p>\n\n<p><strong>Later</strong></p>\n\n<p>You might also try and do an elementary read operation to read a byte array and scan this for newlines. </p>\n\n<p><strong>Even later</strong></p>\n\n<p>On my old Linux notebook, jdk1.7.0_21 and don't-tell-me-it's-old 4.3.3 take about the same time, comparing with C++ getline. (We have established that reading words is slower.) There isn't much difference between -O0 and -O2, which doesn't surprise me, given the simplicity of the code in the loop.</p>\n\n<p><strong>Last note</strong>\nAs I suggested, fin.read(buffer,LEN) with LEN = 1MB and using memchr to scan for '\\n' results in another speed improvement of about 20%, which makes C (there isn't any C++ left by now) faster than Java.</p>\n", "title": "Why does Java read a big file faster than C++?", "tags": ["java", "c++", "file"], "link": "http://stackoverflow.com/questions/22955178/why-does-java-read-a-big-file-faster-than-c/22955342#22955342", "question_id": 22955178, "answer_id": 22955342}, {"body": "<p>I am not expert in C++, but you have at least the following to affect performance:</p>\n\n<ol>\n<li>OS level caching for the file</li>\n<li>For Java you are using a buffered reader and the buffer size defaults to a page or something. I am not sure how C++ streams does this.</li>\n<li>Since the file is so big that JIT would probably be kicked in, and it probably compiles the Java byte code better than if you don't turn any optimization on for your C++ compiler.</li>\n</ol>\n\n<p>Since <a href=\"http://en.wikipedia.org/wiki/Input/output\" rel=\"nofollow\">I/O</a> cost is the major cost here, I guess 1 and 2 are the major reasons.</p>\n", "title": "Why does Java read a big file faster than C++?", "tags": ["java", "c++", "file"], "link": "http://stackoverflow.com/questions/22955178/why-does-java-read-a-big-file-faster-than-c/22955416#22955416", "question_id": 22955178, "answer_id": 22955416}, {"body": "<p>I would suspect that the main difference is that <code>java.io.BufferedReader</code> performs better than the <code>std::ifstream</code> because it buffers, while the ifsteam does not. The BufferedReader reads large chunks of the file in advance and hands them to your program from RAM when you call <code>readLine()</code>, while the std::ifstream only reads a few bytes at a time when you prompt it to by calling the <code>&gt;&gt;</code>-operator.</p>\n\n<p>Sequential access of large amounts of data from the hard drive is usually much faster than accessing many small chunks one at a time.</p>\n\n<p>A fairer comparison would be to compare std::ifstream to the unbuffered java.io.FileReader. </p>\n", "title": "Why does Java read a big file faster than C++?", "tags": ["java", "c++", "file"], "link": "http://stackoverflow.com/questions/22955178/why-does-java-read-a-big-file-faster-than-c/22957091#22957091", "question_id": 22955178, "answer_id": 22957091}, {"body": "<p>There are a number of significant differences in the way the\nlanguages handle <a href=\"http://en.wikipedia.org/wiki/Input/output\" rel=\"nofollow\">I/O</a>, all of which can make a difference, one way\nor another.</p>\n\n<p>Perhaps the first (and most important) question is: how is the\ndata encoded in the text file. If it is single-byte characters\n(<a href=\"http://en.wikipedia.org/wiki/ISO/IEC_8859-1\" rel=\"nofollow\">ISO 8859-1</a> or <a href=\"http://en.wikipedia.org/wiki/UTF-8\" rel=\"nofollow\">UTF-8</a>), then Java has to convert it into <a href=\"http://en.wikipedia.org/wiki/UTF-16/UCS-2\" rel=\"nofollow\">UTF-16</a>\nbefore processing; depending on the locale, C++ may (or may not)\nalso convert or do some additional checking.</p>\n\n<p>As has been pointed out (partially, at least), in C++, <code>&gt;&gt;</code> uses\na locale specific <code>isspace</code>, <code>getline</code> will simply compare for\n<code>'\\n'</code>, which is probably faster. (Typical implementations of\n<code>isspace</code> will use a bitmap, which means an additional memory\naccess for each character.)</p>\n\n<p>Optimization levels and specific library implementations may\nalso vary. It's not unusual in C++ for one library\nimplementation to be 2 or 3 times faster than another.</p>\n\n<p>Finally, a most significant difference: C++ distinguishes\nbetween text files and binary files. You've opened the file in\ntext mode; this means that it will be \"preprocessed\" at the\nlowest level, before even the extraction operators see it. This\ndepends on the platform: for Unix platforms, the \"preprocessing\"\nis a no-op; on Windows, it will convert CRLF pairs into <code>'\\n'</code>,\nwhich will have a definite impact on performance. If I recall\ncorrectly (I've not used Java for some years), Java expects\nhigher level functions to handle this, so functions like\n<code>readLine</code> will be slightly more complicated. Just guessing\nhere, but I suspect that the additional logic at the higher\nlevel costs less in runtime than the buffer preprocessing at the\nlower level. (If you are testing under Windows, you might\nexperiment with opening the file in binary mode in C++. This\nshould make no difference in the behavior of the program when\nyou use <code>&gt;&gt;</code>; any extra CR will be considered white space. With\n<code>getline</code>, you'll have to add logic to remove any trailing\n<code>'\\r'</code> to your code.)</p>\n", "title": "Why does Java read a big file faster than C++?", "tags": ["java", "c++", "file"], "link": "http://stackoverflow.com/questions/22955178/why-does-java-read-a-big-file-faster-than-c/22957100#22957100", "question_id": 22955178, "answer_id": 22957100}, {"body": "<p>I would also try using <a href=\"https://en.wikipedia.org/wiki/Mmap\" rel=\"nofollow\">mmap</a> instead of standard file read/write. This should let your OS handle the reading and writing while your application is only concerned with the data.</p>\n\n<p>There's no situation where C++ can't be faster than Java, but sometimes it takes a lot of work from very talented people. But I don't think this one should be too hard to beat as it is a straightforward task.</p>\n\n<p>mmap for Windows is described in <em><a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/aa366556%28v=vs.85%29.aspx\" rel=\"nofollow\">File Mapping</a></em> (<a href=\"http://en.wikipedia.org/wiki/Microsoft_Developer_Network\" rel=\"nofollow\">MSDN</a>).</p>\n", "title": "Why does Java read a big file faster than C++?", "tags": ["java", "c++", "file"], "link": "http://stackoverflow.com/questions/22955178/why-does-java-read-a-big-file-faster-than-c/22965512#22965512", "question_id": 22955178, "answer_id": 22965512}], "creation_date": 1397027057, "score": 53, "link": "http://stackoverflow.com/questions/22955178/why-does-java-read-a-big-file-faster-than-c", "question_id": 22955178}, {"body": "<p>I have been checking the upcoming <code>Java update</code>, namely: <code>Java 8 or JDK 8</code>. Yes, I am impatient, there's a lot of new stuff, but, there is something I don't understand, some simple code:</p>\n\n<pre><code>final Stream&lt;Integer&gt;stream = Stream.of(1,2,3,4,5,6,7,8,9,10);\nstream.flatMap();\n</code></pre>\n\n<p>the javadocs are</p>\n\n<blockquote>\n  <p><code>public &lt;R&gt; Stream&lt;R&gt; flatMap(Function&lt;? super T,? extends Stream&lt;? extends R&gt;&gt; mapper)</code></p>\n  \n  <p>Returns a stream consisting of the results of replacing each element of this stream with the contents of a mapped stream produced by applying the provided mapping function to each element. Each mapped stream is closed after its contents have been placed into this stream. (If a mapped stream is null an empty stream is used, instead.)\n      This is an intermediate operation.  </p>\n</blockquote>\n\n<p>I would appreciate if somebody created some simple real-life examples about <code>flatMap</code>, how you could code it in previous java versions <code>Java[6,7]</code> and how you can code the same routines using <code>Java 8</code>.</p>\n", "tags": ["java", "java-8", "java-stream", "flatmap"], "title": "Java 8 Streams FlatMap method example", "answers": [{"body": "<h2>Made up example</h2>\n\n<p>Imagine that you want to create the following sequence: 1, 2, 2, 3, 3, 3, 4, 4, 4, 4 etc. (in other words: 1x1, 2x2, 3x3 etc.)</p>\n\n<p>With <code>flatMap</code> it could look like:</p>\n\n<pre><code>IntStream sequence = IntStream.rangeClosed(1, 4)\n                          .flatMap(i -&gt; IntStream.iterate(i, identity()).limit(i));\nsequence.forEach(System.out::println);\n</code></pre>\n\n<p>where:</p>\n\n<ul>\n<li><code>IntStream.rangeClosed(1, 4)</code> creates a stream of <code>int</code> from 1 to 4, inclusive</li>\n<li><code>IntStream.iterate(i, identity()).limit(i)</code> creates a stream of length i of <code>int</code> i - so applied to <code>i = 4</code> it creates a stream: <code>4, 4, 4, 4</code></li>\n<li><code>flatMap</code> \"flattens\" the stream and \"concatenates\" it to the original stream</li>\n</ul>\n\n<p>With Java &lt; 8 you would need two nested loops:</p>\n\n<pre><code>List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\nfor (int i = 1; i &lt;= 4; i++) {\n    for (int j = 0; j &lt; i; j++) {\n        list.add(i);\n    }\n}\n</code></pre>\n\n<h2>Real world example</h2>\n\n<p>Let's say I have a <code>List&lt;TimeSeries&gt;</code> where each <code>TimeSeries</code> is essentially a <code>Map&lt;LocalDate, Double&gt;</code>. I want to get a list of all dates for which at least one of the time series has a value. <code>flatMap</code> to the rescue:</p>\n\n<pre><code>list.stream().parallel()\n    .flatMap(ts -&gt; ts.dates().stream()) // for each TS, stream dates and flatmap\n    .distinct()                         // remove duplicates\n    .sorted()                           // sort ascending\n    .collect(toList());\n</code></pre>\n\n<p>Not only is it readable, but if you suddenly need to process 100k elements, simply adding <code>parallel()</code> will improve performance without you writing any concurrent code.</p>\n", "title": "Java 8 Streams FlatMap method example", "tags": ["java", "java-8", "java-stream", "flatmap"], "link": "http://stackoverflow.com/questions/22382453/java-8-streams-flatmap-method-example/22384113#22384113", "question_id": 22382453, "answer_id": 22384113}, {"body": "<p>It doesn't make sense to <code>flatMap</code> a <a href=\"http://download.java.net/jdk8/docs/api/java/util/stream/Stream.html\">Stream</a> that's already flat, like the <code>Stream&lt;Integer&gt;</code> you've shown in your question.  </p>\n\n<p>However, if you had a <code>Stream&lt;List&lt;Integer&gt;&gt;</code> then it would make sense and you could do this:</p>\n\n<pre><code>Stream&lt;List&lt;Integer&gt;&gt; integerListStream = Stream.of(\n  Arrays.asList(1, 2), \n  Arrays.asList(3, 4), \n  Arrays.asList(5)\n);\n\nStream&lt;Integer&gt; integerStream = integerListStream .flatMap(Collection::stream);\nintegerStream.forEach(System.out::println);\n</code></pre>\n\n<p>Which would print:</p>\n\n<pre><code>1\n2\n3\n4\n5\n</code></pre>\n\n<p>To do this pre-Java 8 you just need a loops:</p>\n\n<pre><code>List&lt;List&lt;Integer&gt;&gt; integerLists = Arrays.asList(\n  Arrays.asList(1, 2), \n  Arrays.asList(3, 4), \n  Arrays.asList(5)\n)\n\nList&lt;Integer&gt; flattened = new ArrayList&lt;&gt;();\n\nfor (List&lt;Integer&gt; integerList : integerLists)\n{\n  flattened.addAll(integerList);\n}\n\nfor (Integer i : flattened)\n{\n  System.out.println(i);\n}\n</code></pre>\n", "title": "Java 8 Streams FlatMap method example", "tags": ["java", "java-8", "java-stream", "flatmap"], "link": "http://stackoverflow.com/questions/22382453/java-8-streams-flatmap-method-example/22384132#22384132", "question_id": 22382453, "answer_id": 22384132}, {"body": "<p>Am I the only one who finds unwinding lists boring? ;-)</p>\n\n<p>Let's try with objects. Real world example by the way. </p>\n\n<p>Given: Object representing repetitive task. About important task fields: reminders are starting to ring at <code>start</code> and repeat every <code>repeatPeriod</code> <code>repeatUnit</code>(e.g. 5 HOURS) and there will be <code>repeatCount</code> reminders in total(including starting one).</p>\n\n<p>Goal: achieve a list of task copies, one for each task reminder invocation.</p>\n\n<pre><code>List&lt;Task&gt; tasks =\n            Arrays.asList(\n                    new Task(\n                            false,//completed sign\n                            \"My important task\",//task name (text)\n                            LocalDateTime.now().plus(2, ChronoUnit.DAYS),//first reminder(start)\n                            true,//is task repetitive?\n                            1,//reminder interval\n                            ChronoUnit.DAYS,//interval unit\n                            5//total number of reminders\n                    )\n            );\n\ntasks.stream().flatMap(\n        x -&gt; LongStream.iterate(\n                x.getStart().toEpochSecond(ZoneOffset.UTC),\n                p -&gt; (p + x.getRepeatPeriod()*x.getRepeatUnit().getDuration().getSeconds())\n        ).limit(x.getRepeatCount()).boxed()\n        .map( y -&gt; new Task(x,LocalDateTime.ofEpochSecond(y,0,ZoneOffset.UTC)))\n).forEach(System.out::println);\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>Task{completed=false, text='My important task', start=2014-10-01T21:35:24, repeat=false, repeatCount=0, repeatPeriod=0, repeatUnit=null}\nTask{completed=false, text='My important task', start=2014-10-02T21:35:24, repeat=false, repeatCount=0, repeatPeriod=0, repeatUnit=null}\nTask{completed=false, text='My important task', start=2014-10-03T21:35:24, repeat=false, repeatCount=0, repeatPeriod=0, repeatUnit=null}\nTask{completed=false, text='My important task', start=2014-10-04T21:35:24, repeat=false, repeatCount=0, repeatPeriod=0, repeatUnit=null}\nTask{completed=false, text='My important task', start=2014-10-05T21:35:24, repeat=false, repeatCount=0, repeatPeriod=0, repeatUnit=null}\n</code></pre>\n\n<p>P.S.: I would appreciate if someone suggested a simpler solution, I'm not a pro after all.</p>\n\n<p><strong>UPDATE:</strong>\n@RBz asked for detailed explanation so here it is.\nBasically flatMap puts all elements from streams inside another stream into output stream. A lot of streams here :). So, for each Task in initial stream lambda expression <code>x -&gt; LongStream.iterate...</code> creates a stream of long values that represent task start moments. This stream is limited to <code>x.getRepeatCount()</code> instances. It's values start from <code>x.getStart().toEpochSecond(ZoneOffset.UTC)</code> and each next value is calculated using lambda <code>p -&gt; (p + x.getRepeatPeriod()*x.getRepeatUnit().getDuration().getSeconds()</code>. <code>boxed()</code> returns the stream with each long value as a Long wrapper instance. Then each Long in that stream is mapped to new Task instance that is not repetitive anymore and contains exact execution time. This sample contains only one Task in input list. But imagine that you have a thousand. You will have then a stream of 1000 streams of Task objects. And what <code>flatMap</code> does here is putting all Tasks from all streams onto the same output stream. That's all as I understand it. Thank you for your question!</p>\n", "title": "Java 8 Streams FlatMap method example", "tags": ["java", "java-8", "java-stream", "flatmap"], "link": "http://stackoverflow.com/questions/22382453/java-8-streams-flatmap-method-example/26106616#26106616", "question_id": 22382453, "answer_id": 26106616}, {"body": "<p>Extract unique words sorted ASC from a list of phrases:</p>\n\n<pre><code>List&lt;String&gt; phrases = Arrays.asList(\n        \"sporadic perjury\",\n        \"confounded skimming\",\n        \"incumbent jailer\",\n        \"confounded jailer\");\n\nList&lt;String&gt; uniqueWords = phrases\n        .stream()\n        .flatMap(phrase -&gt; Stream.of(phrase.split(\" +\")))\n        .distinct()\n        .sorted()\n        .collect(Collectors.toList());\nSystem.out.println(\"Unique words: \" + uniqueWords);\n</code></pre>\n\n<p>... and the output: </p>\n\n<pre><code>Unique words: [confounded, incumbent, jailer, perjury, skimming, sporadic]\n</code></pre>\n", "title": "Java 8 Streams FlatMap method example", "tags": ["java", "java-8", "java-stream", "flatmap"], "link": "http://stackoverflow.com/questions/22382453/java-8-streams-flatmap-method-example/28402445#28402445", "question_id": 22382453, "answer_id": 28402445}], "creation_date": 1394722434, "score": 52, "link": "http://stackoverflow.com/questions/22382453/java-8-streams-flatmap-method-example", "question_id": 22382453}, {"body": "<p>I want to import a library project into my app but whenever I try to do so , Android Studio doesn't recognise it </p>\n\n<p>It also gives me errors in build.gradle ..</p>\n\n<p>The Library is : PagerSlidingTabStrip ....</p>\n\n<p>Here are some pictures :</p>\n\n<blockquote>\n  <p><img src=\"http://i.stack.imgur.com/xAVb5.png\" alt=\"enter image description here\"></p>\n  \n  <p><img src=\"http://i.stack.imgur.com/U4SWR.png\" alt=\"enter image description here\"></p>\n</blockquote>\n\n<p>I have been trying to make it work for 3 days so far !!\nPlease Help Me :)</p>\n\n<p><em><strong>EDIT:</em></strong></p>\n\n<pre><code>apply plugin: 'android-library'\n\ndependencies {\ncompile 'com.android.support:support-v4:19.0.0'\n}\n\nandroid {\ncompileSdkVersion Integer.parseInt(project.ANDROID_BUILD_SDK_VERSION)\nbuildToolsVersion project.ANDROID_BUILD_TOOLS_VERSION\n\ndefaultConfig {\n    minSdkVersion 8\n    targetSdkVersion Integer.parseInt(project.ANDROID_BUILD_TARGET_SDK_VERSION)\n}\n\nsourceSets {\n    main {\n        manifest.srcFile 'AndroidManifest.xml'\n        java.srcDirs = ['src']\n        res.srcDirs = ['res']\n    }\n}\n}\n\n apply from: 'https://raw.github.com/chrisbanes/gradle-mvn-push/master/gradle-mvn-push.gradle'\n</code></pre>\n\n<p><em><strong>EDIT2 :</em></strong></p>\n\n<pre><code>FAILURE: Build failed with an exception.\n\n* What went wrong:\nA problem occurred configuring project ':Sahertoday'.\n&gt; Could not resolve all dependencies for configuration ':Sahertoday:_debugCompile'.\n&gt; Could not find com.astuetz:pagerslidingtabstrip:1.0.1.\n Required by:\n     Saher-3:Sahertoday:unspecified\n\n* Try:\n Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get         more log output.\n\n BUILD FAILED\n</code></pre>\n", "tags": ["java", "android", "android-studio", "gradle", "pagerslidingtabstrip"], "title": "Importing Facebook library in Android Studio: Could not find property &#39;ANDROID_BUILD_SDK_VERSION&#39;", "answers": [{"body": "<p>First of all, you can add this dependency to your project, without compiling the lib locally.</p>\n\n<pre><code>dependencies {\n    compile 'com.astuetz:pagerslidingtabstrip:1.0.1'\n}\n</code></pre>\n\n<p>Otherwise if you would like to compile this lib locally, you have to define these keys in gradle.properties in the root.</p>\n\n<pre><code>ANDROID_BUILD_TARGET_SDK_VERSION=19\nANDROID_BUILD_TOOLS_VERSION=19\nANDROID_BUILD_SDK_VERSION=19\n</code></pre>\n", "title": "Importing Facebook library in Android Studio: Could not find property &#39;ANDROID_BUILD_SDK_VERSION&#39;", "tags": ["java", "android", "android-studio", "gradle", "pagerslidingtabstrip"], "link": "http://stackoverflow.com/questions/21477884/importing-facebook-library-in-android-studio-could-not-find-property-android-b/21490651#21490651", "question_id": 21477884, "answer_id": 21490651}, {"body": "<p><strong>EDIT</strong></p>\n\n<p>There is also a GUI way for doing this. It is accessed by selecting the module <code>facebook</code> in the project tree and pressing <code>f4</code>. <br>Also you can just right-click the <code>facebook</code> and go to <code>Open Module Settings</code> near the bottom. <br><br>It is shown in the pictures. The numbers in the picture are top sdk version at the time of writing.</p>\n\n<p><img src=\"http://i.stack.imgur.com/aW3YZ.png\" alt=\"first block - The numbers in the pictures don&#39;t match the above ones, but that&#39;s because I updated them later on.\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/SwdEx.png\" alt=\"second block - same update\"></p>\n\n<p>There is a simpler solution.\nThe constants like <code>ANDROID_BUILD_SDK_VERSION</code> can be replaced with normal version \"numbers\". So instead of</p>\n\n<pre><code>android {\n    compileSdkVersion Integer.parseInt(project.ANDROID_BUILD_SDK_VERSION)\n    buildToolsVersion project.ANDROID_BUILD_TOOLS_VERSION\n\n    defaultConfig {\n         minSdkVersion 8\n         targetSdkVersion Integer.parseInt(project.ANDROID_BUILD_TARGET_SDK_VERSION)\n    }\n</code></pre>\n\n<p>..file can look like this:</p>\n\n<pre><code>android {\n    compileSdkVersion 19\n    buildToolsVersion '19.1.0'\n\n    defaultConfig {\n         minSdkVersion 15\n         targetSdkVersion 19\n    }\n</code></pre>\n", "title": "Importing Facebook library in Android Studio: Could not find property &#39;ANDROID_BUILD_SDK_VERSION&#39;", "tags": ["java", "android", "android-studio", "gradle", "pagerslidingtabstrip"], "link": "http://stackoverflow.com/questions/21477884/importing-facebook-library-in-android-studio-could-not-find-property-android-b/24569167#24569167", "question_id": 21477884, "answer_id": 24569167}, {"body": "<p>For those who ran into same problems while adding libraries and still can't get it work. The following local include of the .aar file worked for me:</p>\n\n<ul>\n<li>Just download the .aar file from the <a href=\"http://mirrors.ibiblio.org/maven2/com/astuetz/pagerslidingtabstrip/1.0.1/\" rel=\"nofollow\">maven repo</a> manually.</li>\n<li>In Android Studio go to File -> new Module -> import .JAR or\n.AAR package and select your downloaded .aar file.</li>\n</ul>\n\n<p>Android Studio does the rest (in the build.gradle) for you. Maybe clean and rebuild your project.</p>\n", "title": "Importing Facebook library in Android Studio: Could not find property &#39;ANDROID_BUILD_SDK_VERSION&#39;", "tags": ["java", "android", "android-studio", "gradle", "pagerslidingtabstrip"], "link": "http://stackoverflow.com/questions/21477884/importing-facebook-library-in-android-studio-could-not-find-property-android-b/28065847#28065847", "question_id": 21477884, "answer_id": 28065847}, {"body": "<p>Go the facebook folder which you have imported in your project. Copy the gradle.properties file and paste in into your facebook module.It will remove the errors.</p>\n", "title": "Importing Facebook library in Android Studio: Could not find property &#39;ANDROID_BUILD_SDK_VERSION&#39;", "tags": ["java", "android", "android-studio", "gradle", "pagerslidingtabstrip"], "link": "http://stackoverflow.com/questions/21477884/importing-facebook-library-in-android-studio-could-not-find-property-android-b/29697413#29697413", "question_id": 21477884, "answer_id": 29697413}, {"body": "<pre><code>apply plugin: 'com.android.library'\n\nandroid {\n    compileSdkVersion 22\n    buildToolsVersion \"22.0.1\"\n\n    defaultConfig {\n        minSdkVersion 8\n        targetSdkVersion 4\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.txt'\n        }\n    }\n}\n\ndependencies {\n    compile 'com.android.support:appcompat-v7:22.2.1'\n}\n</code></pre>\n", "title": "Importing Facebook library in Android Studio: Could not find property &#39;ANDROID_BUILD_SDK_VERSION&#39;", "tags": ["java", "android", "android-studio", "gradle", "pagerslidingtabstrip"], "link": "http://stackoverflow.com/questions/21477884/importing-facebook-library-in-android-studio-could-not-find-property-android-b/35355414#35355414", "question_id": 21477884, "answer_id": 35355414}], "creation_date": 1391164558, "score": 52, "link": "http://stackoverflow.com/questions/21477884/importing-facebook-library-in-android-studio-could-not-find-property-android-b", "question_id": 21477884}, {"body": "<p>Say I wanted to replace all commas with commas and a new line using Intellij IDEA's replace function. What do I put in the search box? In vim I'd use &amp;\\r</p>\n", "tags": ["java", "intellij-idea"], "title": "In Intellij IDEA how do I replace text with a new line?", "answers": [{"body": "<p>Hit <code>CTRL+F</code> and check the <code>regex</code> checkbox. Then search for <code>,</code> and replace it with <code>,\\n</code>.</p>\n", "title": "In Intellij IDEA how do I replace text with a new line?", "tags": ["java", "intellij-idea"], "link": "http://stackoverflow.com/questions/21219884/in-intellij-idea-how-do-i-replace-text-with-a-new-line/21219912#21219912", "question_id": 21219884, "answer_id": 21219912}, {"body": "<p>You need to check the Regex box and use \"\\n\" for the new line character:</p>\n\n<p><img src=\"http://i.stack.imgur.com/2Nkl4.png\" alt=\"enter image description here\"></p>\n", "title": "In Intellij IDEA how do I replace text with a new line?", "tags": ["java", "intellij-idea"], "link": "http://stackoverflow.com/questions/21219884/in-intellij-idea-how-do-i-replace-text-with-a-new-line/21219921#21219921", "question_id": 21219884, "answer_id": 21219921}, {"body": "<p>The easiest way that I have done it is to use the regular expression form of replace.</p>\n\n<p><img src=\"http://i.stack.imgur.com/hQYRm.png\" alt=\"enter image description here\"></p>\n\n<p>Chances are that you don't want to replace the <code>{</code>, but just keep in my escaping them if you do want to do so.</p>\n", "title": "In Intellij IDEA how do I replace text with a new line?", "tags": ["java", "intellij-idea"], "link": "http://stackoverflow.com/questions/21219884/in-intellij-idea-how-do-i-replace-text-with-a-new-line/21219925#21219925", "question_id": 21219884, "answer_id": 21219925}, {"body": "<p>Use Multiline button, no Regex is needed.\n<img src=\"http://i.stack.imgur.com/czzzU.png\" alt=\"\"></p>\n\n<p>edit: the multiline button is missing since IntelliJ 15, but you can enable it by clicking into the textfield and pressing <code>ALT+Enter</code></p>\n", "title": "In Intellij IDEA how do I replace text with a new line?", "tags": ["java", "intellij-idea"], "link": "http://stackoverflow.com/questions/21219884/in-intellij-idea-how-do-i-replace-text-with-a-new-line/21221346#21221346", "question_id": 21219884, "answer_id": 21221346}, {"body": "<p>For those looking for the old multiline replace in inteliJ with version > 15.x. It seems somewhat hidden, but if you select multiple lines > click <code>CTRL+F</code>, then immediately click <code>CTRL+R</code> you are presented with the original multiline replace.</p>\n\n<p>This is working on Mac <code>IntelliJ 2016.1.3</code> with \u2318+F > \u2318+R</p>\n\n<p><a href=\"http://i.stack.imgur.com/QgiEF.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/QgiEF.png\" alt=\"enter image description here\"></a></p>\n", "title": "In Intellij IDEA how do I replace text with a new line?", "tags": ["java", "intellij-idea"], "link": "http://stackoverflow.com/questions/21219884/in-intellij-idea-how-do-i-replace-text-with-a-new-line/37371568#37371568", "question_id": 21219884, "answer_id": 37371568}, {"body": "<p>A clean approach would be to add <code>(?m)</code> in front of the regular expression, which turns on the multi line mode. This has the advantage that you can also use it in the global file search (Ctrl-Shift-F).</p>\n\n<p>Example: <code>(?m)\\{(.|\\n)*?\\}</code> searches for multi-line blocks surrounded by curly braces.</p>\n", "title": "In Intellij IDEA how do I replace text with a new line?", "tags": ["java", "intellij-idea"], "link": "http://stackoverflow.com/questions/21219884/in-intellij-idea-how-do-i-replace-text-with-a-new-line/39146260#39146260", "question_id": 21219884, "answer_id": 39146260}], "creation_date": 1390151483, "score": 51, "link": "http://stackoverflow.com/questions/21219884/in-intellij-idea-how-do-i-replace-text-with-a-new-line", "question_id": 21219884}, {"body": "<p>My web application runs fine on JDK 1.7 but crashes on 1.8 with the following exception (during application server startup with Jetty 8). I am using Spring version: 3.2.5.RELEASE.</p>\n\n<h2>Exception:</h2>\n\n<p><code>org.springframework.core.NestedIOException: ASM ClassReader failed to parse class file - probably due to a new Java class file version that isn't supported yet</code></p>\n\n<p>I assume that problem occurs because of spring and \"asm.jar\" library on which it depends. </p>\n\n<p>How do I resolve this?</p>\n", "tags": ["java", "spring", "java-8"], "title": "Java 1.8 ASM ClassReader failed to parse class file - probably due to a new Java class file version that isn&#39;t supported yet", "answers": [{"body": "<p>As @prunge and @Pablo Lozano stated, you need Spring 4 if you want compile code to Java 8 (--target 1.8), but you can still run apps on Java 8 compiled to Java 7 if you run on Spring 3.2.X.</p>\n\n<p>Check out \n<a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/new-in-4.0.html\">http://docs.spring.io/spring/docs/current/spring-framework-reference/html/new-in-4.0.html</a></p>\n\n<blockquote>\n  <p>Note that the Java 8 bytecode level (-target 1.8, as required by -source 1.8) is only fully supported as of Spring Framework 4.0. In particular, Spring 3.2 based applications need to be compiled with a maximum of Java 7 as the target, even if they happen to be deployed onto a Java 8 runtime. Please upgrade to Spring 4 for Java 8 based applications.</p>\n</blockquote>\n", "title": "Java 1.8 ASM ClassReader failed to parse class file - probably due to a new Java class file version that isn&#39;t supported yet", "tags": ["java", "spring", "java-8"], "link": "http://stackoverflow.com/questions/22526695/java-1-8-asm-classreader-failed-to-parse-class-file-probably-due-to-a-new-java/22527057#22527057", "question_id": 22526695, "answer_id": 22527057}, {"body": "<p>If you encounter this error even if you compile with -target 1.7, please note that this is because of a bug in Spring Framework which causes ASM classreader to load jdk classes (java.* or javax.*), which are, of course, compiled with -target 1.8.</p>\n\n<p>This, combined with the old ASM version in spring 3.2.8 and below, which does not support parsing of 1.8 class files, can also lead to this error.</p>\n\n<p>More info about the issue can be found here: <a href=\"https://jira.spring.io/browse/SPR-11719\">https://jira.spring.io/browse/SPR-11719</a></p>\n\n<p>This should be fixed in Spring Framework version 3.2.9, which is due to be released soon.</p>\n\n<p>Of course, upgrading to Spring Framework 4 will also resolve the issue, as it already contains a newer version of ASM.</p>\n\n<p>However, if for some reason you can't upgrade to version 4 yet, it's good to know there's an alternative (soon).</p>\n", "title": "Java 1.8 ASM ClassReader failed to parse class file - probably due to a new Java class file version that isn&#39;t supported yet", "tags": ["java", "spring", "java-8"], "link": "http://stackoverflow.com/questions/22526695/java-1-8-asm-classreader-failed-to-parse-class-file-probably-due-to-a-new-java/23352356#23352356", "question_id": 22526695, "answer_id": 23352356}], "creation_date": 1395302073, "score": 51, "link": "http://stackoverflow.com/questions/22526695/java-1-8-asm-classreader-failed-to-parse-class-file-probably-due-to-a-new-java", "question_id": 22526695}, {"body": "<p>Despite specifying JDK 1.7 in all project settings (including in <code>File -&gt; Project Structure -&gt; Project :: Project SDK</code>), the following error is produced by <code>IntelliJ 13</code> when trying to compile some simple Java 7 code which does use the diamond operator:</p>\n\n<pre><code>java: diamond operator is not supported in -source 1.5\n(use -source 7 or higher to enable diamond operator)\n</code></pre>\n\n<p>Is there any other place in the configuration where the expected <code>-source 7</code> option should be enabled?</p>\n", "tags": ["java", "intellij-idea", "compilation"], "title": "IntelliJ IDEA 13 uses Java 1.5 despite setting to 1.7", "answers": [{"body": "<p>Please check your project/module language levels (Project Structure | Project; Project Structure | Modules | module-name | Sources). You might also want to take a look at Settings | Compiler | Java Compiler | Per-module bytecode version.</p>\n\n<p>Set also this:</p>\n\n<p>File -> Project Structure -> Modules :: Sources (next to Paths and Dependencies) and that has a \"Language level\" option which also needs to be set correctly. </p>\n", "title": "IntelliJ IDEA 13 uses Java 1.5 despite setting to 1.7", "tags": ["java", "intellij-idea", "compilation"], "link": "http://stackoverflow.com/questions/21006136/intellij-idea-13-uses-java-1-5-despite-setting-to-1-7/21006225#21006225", "question_id": 21006136, "answer_id": 21006225}, {"body": "<p>First, you need to change the \"project bytecode version\" under <code>File &gt; Settings</code>, <code>Compiler &gt; Java Compiler</code></p>\n\n<p>Second, do a full rebuild.</p>\n", "title": "IntelliJ IDEA 13 uses Java 1.5 despite setting to 1.7", "tags": ["java", "intellij-idea", "compilation"], "link": "http://stackoverflow.com/questions/21006136/intellij-idea-13-uses-java-1-5-despite-setting-to-1-7/21006230#21006230", "question_id": 21006136, "answer_id": 21006230}, {"body": "<p>If nothing of this helps (my case), you can set it in your pom.xml, like this:</p>\n\n<pre><code>&lt;properties&gt;\n  &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\n  &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n</code></pre>\n\n<p>As this cool guy mentioned here:\n<a href=\"http://stackoverflow.com/a/25888116/1643465\">http://stackoverflow.com/a/25888116/1643465</a></p>\n", "title": "IntelliJ IDEA 13 uses Java 1.5 despite setting to 1.7", "tags": ["java", "intellij-idea", "compilation"], "link": "http://stackoverflow.com/questions/21006136/intellij-idea-13-uses-java-1-5-despite-setting-to-1-7/26920121#26920121", "question_id": 21006136, "answer_id": 26920121}, {"body": "<p>Alternatively, you can apply maven-compiler-plugin with appropriate java version by adding this to your pom.xml:</p>\n\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n", "title": "IntelliJ IDEA 13 uses Java 1.5 despite setting to 1.7", "tags": ["java", "intellij-idea", "compilation"], "link": "http://stackoverflow.com/questions/21006136/intellij-idea-13-uses-java-1-5-despite-setting-to-1-7/29953590#29953590", "question_id": 21006136, "answer_id": 29953590}, {"body": "<p>[For IntelliJ IDEA 2016.2]</p>\n\n<p>I would like to expand upon part of <a href=\"http://stackoverflow.com/a/21006225/5257399\">Peter Gromov's answer</a> with an up-to-date screenshot.\nSpecifically this particular part:</p>\n\n<blockquote>\n  <p>You might also want to take a look at Settings | Compiler | Java Compiler | Per-module bytecode version.</p>\n</blockquote>\n\n<p>I believe that (at least in 2016.2): checking out different commits in <code>git</code> resets these to 1.5.</p>\n\n<p><a href=\"http://i.stack.imgur.com/vjNEv.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/vjNEv.png\" alt=\"Per-module bytecode version\"></a></p>\n", "title": "IntelliJ IDEA 13 uses Java 1.5 despite setting to 1.7", "tags": ["java", "intellij-idea", "compilation"], "link": "http://stackoverflow.com/questions/21006136/intellij-idea-13-uses-java-1-5-despite-setting-to-1-7/37297419#37297419", "question_id": 21006136, "answer_id": 37297419}], "creation_date": 1389213922, "score": 51, "link": "http://stackoverflow.com/questions/21006136/intellij-idea-13-uses-java-1-5-despite-setting-to-1-7", "question_id": 21006136}, {"body": "<p>When do you use map vs flatMap in RxJava?</p>\n\n<p>Say for example, we want to map Files containing JSON into Strings that contain the JSON--</p>\n\n<p>Using map, we have to deal with the Exception somehow. But how?:</p>\n\n<pre><code>Observable.from(jsonFile).map(new Func1&lt;File, String&gt;() {\n    @Override public String call(File file) {\n        try {\n            return new Gson().toJson(new FileReader(file), Object.class);\n        } catch (FileNotFoundException e) {\n            // So Exception. What to do ?\n        }\n        return null; // Not good :(\n    }\n});\n</code></pre>\n\n<p>Using flatMap, it's much more verbose, but we can forward the problem down the chain of Observables and handle the error if we choose somewhere else and even retry:</p>\n\n<pre><code>Observable.from(jsonFile).flatMap(new Func1&lt;File, Observable&lt;String&gt;&gt;() {\n    @Override public Observable&lt;String&gt; call(final File file) {\n        return Observable.create(new Observable.OnSubscribe&lt;String&gt;() {\n            @Override public void call(Subscriber&lt;? super String&gt; subscriber) {\n                try {\n                    String json = new Gson().toJson(new FileReader(file), Object.class);\n\n                    subscriber.onNext(json);\n                    subscriber.onCompleted();\n                } catch (FileNotFoundException e) {\n                    subscriber.onError(e);\n                }\n            }\n        });\n    }\n});\n</code></pre>\n\n<p>I like the simplicity of map, but the error handling of flatmap (not the verbosity). I haven't seen any best practices on this floating around and I'm curious how this is being used in practice.</p>\n", "tags": ["java", "mapping", "rx-java", "flatmap"], "title": "When do you use map vs flatMap in RxJava?", "answers": [{"body": "<p><code>map</code> transform one event to another.\n<code>flatMap</code> transform one event to zero or more event. (this is taken from <a href=\"http://www.introtorx.com/Content/v1.0.10621.0/08_Transformation.html#SelectMany\">IntroToRx</a>)</p>\n\n<p>As you want to transform your json to an object, using map should be enough.</p>\n\n<p>Dealing with the FileNotFoundException is another problem (using map or flatmap wouldn't solve this issue).</p>\n\n<p>To solve your Exception problem, just throw it with a Non checked exception : RX will call the onError handler for you.</p>\n\n<pre><code>Observable.from(jsonFile).map(new Func1&lt;File, String&gt;() {\n    @Override public String call(File file) {\n        try {\n            return new Gson().toJson(new FileReader(file), Object.class);\n        } catch (FileNotFoundException e) {\n            // this exception is a part of rx-java\n            throw OnErrorThrowable.addValueAsLastCause(e, file);\n        }\n    }\n});\n</code></pre>\n\n<p>the exact same version with flatmap : </p>\n\n<pre><code>Observable.from(jsonFile).flatMap(new Func1&lt;File, Observable&lt;String&gt;&gt;() {\n    @Override public Observable&lt;String&gt; call(File file) {\n        try {\n            return Observable.just(new Gson().toJson(new FileReader(file), Object.class));\n        } catch (FileNotFoundException e) {\n            // this static method is a part of rx-java. It will return an exception which is associated to the value.\n            throw OnErrorThrowable.addValueAsLastCause(e, file);\n            // alternatively, you can return Obersable.empty(); instead of throwing exception\n        }\n    }\n});\n</code></pre>\n\n<p>You can return too, in the flatMap version a new Observable that is just an error.</p>\n\n<pre><code>Observable.from(jsonFile).flatMap(new Func1&lt;File, Observable&lt;String&gt;&gt;() {\n    @Override public Observable&lt;String&gt; call(File file) {\n        try {\n            return Observable.just(new Gson().toJson(new FileReader(file), Object.class));\n        } catch (FileNotFoundException e) {\n            return Observable.error(OnErrorThrowable.addValueAsLastCause(e, file));\n        }\n    }\n});\n</code></pre>\n", "title": "When do you use map vs flatMap in RxJava?", "tags": ["java", "mapping", "rx-java", "flatmap"], "link": "http://stackoverflow.com/questions/22847105/when-do-you-use-map-vs-flatmap-in-rxjava/22941881#22941881", "question_id": 22847105, "answer_id": 22941881}, {"body": "<p>FlatMap behaves very much like map, the difference is that it returns an observable itself, so its perfectly suited to map over asynchronous operations. Map does not have to emit items of the same type as the source Observable.</p>\n\n<p>In the practical sense, Map just makes a transformation over the chained response (not returning an Observable); while FlatMap returns an <code>Observable&lt;T&gt;</code>, that is why FlatMap is recommended if you plan to make an asynchronous call inside the method, So:</p>\n\n<ul>\n<li>Map returns an object of type T</li>\n<li>FlatMap returns an <code>Observable&lt;T&gt;</code>.</li>\n</ul>\n\n<p>A clear example can be seen here: <a href=\"http://blog.couchbase.com/why-couchbase-chose-rxjava-new-java-sdk\">http://blog.couchbase.com/why-couchbase-chose-rxjava-new-java-sdk</a> .</p>\n\n<p>Couchbase Java 2.X Client uses Rx to provide asynchronous calls in a convenient way. Since it uses Rx, it has the methods map and FlatMap, the explanation in their documentation might be helpful to understand the general concept. </p>\n\n<p>To handle errors, override onError on your susbcriber.</p>\n\n<pre><code>Subscriber&lt;String&gt; mySubscriber = new Subscriber&lt;String&gt;() {\n    @Override\n    public void onNext(String s) { System.out.println(s); }\n\n    @Override\n    public void onCompleted() { }\n\n    @Override\n    public void onError(Throwable e) { }\n};\n</code></pre>\n\n<p>It might help to look at this document: <a href=\"http://blog.danlew.net/2014/09/15/grokking-rxjava-part-1/\">http://blog.danlew.net/2014/09/15/grokking-rxjava-part-1/</a></p>\n\n<p>A good source about how to manage errors with RX can be found at: <a href=\"https://gist.github.com/daschl/db9fcc9d2b932115b679\">https://gist.github.com/daschl/db9fcc9d2b932115b679</a></p>\n", "title": "When do you use map vs flatMap in RxJava?", "tags": ["java", "mapping", "rx-java", "flatmap"], "link": "http://stackoverflow.com/questions/22847105/when-do-you-use-map-vs-flatmap-in-rxjava/27372466#27372466", "question_id": 22847105, "answer_id": 27372466}, {"body": "<p>In your case i think you need map, since there is only 1 input and 1 output. </p>\n\n<p>map - supplied function simply accepts an item and returns an item which will be emitted further (only once) down.</p>\n\n<p>flatMap - supplied function accepts an item then returns an \"Observable\", meaning each item of the new \"Observable\" will be emitted separately further down. </p>\n\n<p>sorry for the poor explanation, did my best. May be code will clear things up for you. \nThanks!</p>\n\n<pre><code>        //START DIFFERENCE BETWEEN MAP AND FLATMAP\n    Observable.from(\"item1\")\n            .map((str1)-&gt;{\n                System.out.println(\"insde the map \" + str1);\n                return str1;\n            })\n            .subscribe(System.out::println);\n\n    Observable.from(\"item2\")\n            .flatMap((str1)-&gt;{\n                System.out.println(\"inside the flatMap\" + str1);\n                str1 +=\"+\";\n                String str2 =str1 + \"+\";\n                String str3 = str2 + \"+\";\n\n                return Observable.just(str1, str2, str3);\n            })\n            .subscribe(System.out::println);\n    //END DIFFERENCE BETWEEN MAP AND FLATMAP\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>insde the map item1\nitem1\ninside the flatMapitem2\nitem2+\nitem2++\nitem2+++\n</code></pre>\n", "title": "When do you use map vs flatMap in RxJava?", "tags": ["java", "mapping", "rx-java", "flatmap"], "link": "http://stackoverflow.com/questions/22847105/when-do-you-use-map-vs-flatmap-in-rxjava/30313461#30313461", "question_id": 22847105, "answer_id": 30313461}, {"body": "<p>I just wanted to add that with <code>flatMap</code>, you don't really need to use your own custom Observable inside the function and you can rely on standard factory methods/operators:</p>\n\n<pre><code>Observable.from(jsonFile).flatMap(new Func1&lt;File, Observable&lt;String&gt;&gt;() {\n    @Override public Observable&lt;String&gt; call(final File file) {\n        try {\n            String json = new Gson().toJson(new FileReader(file), Object.class);\n            return Observable.just(json);\n        } catch (FileNotFoundException ex) {\n            return Observable.&lt;String&gt;error(ex);\n        }\n    }\n});\n</code></pre>\n\n<p>Generally, you should avoid throwing (Runtime-) exceptions from onXXX methods and callbacks if possible, even though we placed as many safeguards as we could in RxJava.</p>\n", "title": "When do you use map vs flatMap in RxJava?", "tags": ["java", "mapping", "rx-java", "flatmap"], "link": "http://stackoverflow.com/questions/22847105/when-do-you-use-map-vs-flatmap-in-rxjava/30330772#30330772", "question_id": 22847105, "answer_id": 30330772}, {"body": "<p>In that scenario use map, you don't need a new Observable for it.</p>\n\n<p>you should use Exceptions.propagate, which is a wrapper so you can send those checked exceptions to the rx mechanism </p>\n\n<pre><code>Observable&lt;String&gt; obs = Observable.from(jsonFile).map(new Func1&lt;File, String&gt;() { \n@Override public String call(File file) {\n    try { \n        return new Gson().toJson(new FileReader(file), Object.class);\n    } catch (FileNotFoundException e) {\n        throw Exceptions.propagate(t); /will propagate it as error\n    } \n} \n});\n</code></pre>\n\n<p>You then should handle this error in the subscriber</p>\n\n<pre><code>obs.subscribe(new Subscriber&lt;String&gt;() {\n    @Override \n    public void onNext(String s) { //valid result }\n\n    @Override \n    public void onCompleted() { } \n\n    @Override \n    public void onError(Throwable e) { //e might be the FileNotFoundException you got }\n};); \n</code></pre>\n\n<p>There is an excellent post for it: <a href=\"http://blog.danlew.net/2015/12/08/error-handling-in-rxjava/\" rel=\"nofollow\">http://blog.danlew.net/2015/12/08/error-handling-in-rxjava/</a> </p>\n", "title": "When do you use map vs flatMap in RxJava?", "tags": ["java", "mapping", "rx-java", "flatmap"], "link": "http://stackoverflow.com/questions/22847105/when-do-you-use-map-vs-flatmap-in-rxjava/36677055#36677055", "question_id": 22847105, "answer_id": 36677055}, {"body": "<p>The way I think about it is that you use <code>flatMap</code> when the function you wanted to put inside of <code>map()</code> returns an <code>Observable</code>. In which case you might still try to use <code>map()</code> but it would be unpractical. Let me try to explain why.</p>\n\n<p>If in such case you decided to stick with <code>map</code>, you would get an <code>Observable&lt;Observable&lt;Something&gt;&gt;</code>. For example in your case, if we used an imaginary RxGson library, that returned an <code>Observable&lt;String&gt;</code> from it's <code>toJson()</code> method (instead of simply returning a <code>String</code>) it would look like this:</p>\n\n<pre><code>Observable.from(jsonFile).map(new Func1&lt;File, Observable&lt;String&gt;&gt;() {\n    @Override public Observable&lt;String&gt;&gt; call(File file) {\n        return new RxGson().toJson(new FileReader(file), Object.class);\n    }\n}); // you get Observable&lt;Observable&lt;String&gt;&gt; here\n</code></pre>\n\n<p>At this point it would be pretty tricky to <code>subscribe()</code> to such an observable. Inside of it you would get an <code>Observable&lt;String&gt;</code> to which you would again need to <code>subscribe()</code> to get the value. Which is not practical or nice to look at.</p>\n\n<p>So to make it useful one idea is to \"flatten\" this observable of observables (you might start to see where the name _flat_Map comes from). RxJava provides a few ways to flatten observables and for sake of simplicity lets assume <a href=\"http://reactivex.io/documentation/operators/merge.html\" rel=\"nofollow\">merge</a> is what we want. Merge basically takes a bunch of observables and emits whenever any of them emits. (Lots of people would argue <a href=\"http://reactivex.io/documentation/operators/switch.html\" rel=\"nofollow\">switch</a> would be a better default. But if you're emitting just one value, it doesn't matter anyway.)</p>\n\n<p>So amending our previous snippet we would get:</p>\n\n<pre><code>Observable.from(jsonFile).map(new Func1&lt;File, Observable&lt;String&gt;&gt;() {\n    @Override public Observable&lt;String&gt;&gt; call(File file) {\n        return new RxGson().toJson(new FileReader(file), Object.class);\n    }\n}).merge(); // you get Observable&lt;String&gt; here\n</code></pre>\n\n<p>This is a lot more useful, because subscribing to that (or mapping, or filtering, or...) you just get the <code>String</code> value. (Also, mind you, such variant of <code>merge()</code> does not exist in RxJava, but if you understand the idea of merge then I hope you also understand how that would work.)</p>\n\n<p>So basically because such <code>merge()</code> should probably only ever be useful when it succeeds a <code>map()</code> returning an observable and so you don't have to type this over and over again, <code>flatMap()</code> was created as a shorthand. It applies the mapping function just as a normal <code>map()</code> would, but later instead of emitting the returned values it also \"flattens\" (or merges) them.</p>\n\n<p>That's the general use case. It is most useful in a codebase that uses Rx allover the place and you've got many methods returning observables, which you want to chain with other methods returning observables.</p>\n\n<p>In your use case it happens to be useful as well, because <code>map()</code> can only transform one value emitted in <code>onNext()</code> into another value emitted in <code>onNext()</code>. But it cannot transform it into multiple values, no value at all or an error. And as <a href=\"http://stackoverflow.com/users/61158/akarnokd\">akarnokd</a> wrote in his answer (and mind you he's much smarter than me, probably in general, but at least when it comes to RxJava) you shouldn't throw exceptions from your <code>map()</code>. So instead you can use <code>flatMap()</code> and</p>\n\n<pre><code>return Observable.just(value);\n</code></pre>\n\n<p>when all goes well, but </p>\n\n<pre><code>return Observable.error(exception);\n</code></pre>\n\n<p>when something fails.<br>\nSee his answer for a complete snippet: <a href=\"http://stackoverflow.com/a/30330772/1402641\">http://stackoverflow.com/a/30330772/1402641</a></p>\n", "title": "When do you use map vs flatMap in RxJava?", "tags": ["java", "mapping", "rx-java", "flatmap"], "link": "http://stackoverflow.com/questions/22847105/when-do-you-use-map-vs-flatmap-in-rxjava/37354549#37354549", "question_id": 22847105, "answer_id": 37354549}], "creation_date": 1396553163, "score": 51, "link": "http://stackoverflow.com/questions/22847105/when-do-you-use-map-vs-flatmap-in-rxjava", "question_id": 22847105}, {"body": "<p>I would like to know which programming language is better for natural language processing. <em>Java</em> or <em>Python</em>? I have found lots of questions and answers regarding about it. But I am still lost in choosing which one to use.</p>\n\n<p>And I want to know which NLP library to use for Java since there are lots of libraries (LingPipe, GATE, OpenNLP, StandfordNLP). For Python, most programmers recommend NLTK.</p>\n\n<p>But if I am to do some text processing or information extraction from <strong>unstructured data</strong> (just free formed plain English text) to get some useful information, what is the best option? Java or Python? Suitable library?</p>\n\n<p><strong>Updated</strong></p>\n\n<p>What I want to do is to extract useful product information from unstructured data (E.g. users make different forms of advertisement about mobiles or laptops with not very standard English language)</p>\n", "tags": ["java", "python", "nlp"], "title": "Java or Python for Natural Language Processing", "answers": [{"body": "<p>The question is very open ended. That said, rather than choose one, below is a comparison depending on the language that you would like to use (since there are good libraries available in both languages).</p>\n\n<p><strong>Python</strong></p>\n\n<p>In terms of Python, the first place you should look at is the <a href=\"http://www.nltk.org/\">Python Natural Language Toolkit</a>. As they note in their description, NLTK is a leading platform for building Python programs to work with human language data. It provides easy-to-use interfaces to over 50 corpora and lexical resources such as WordNet, along with a suite of text processing libraries for classification, tokenization, stemming, tagging, parsing, and semantic reasoning.</p>\n\n<p>There is also some excellent code that you can look up that originated out of Google's Natural Language Toolkit project that is Python based. You can find a link to that code here <a href=\"https://github.com/nltk/nltk\">on GitHub</a>.</p>\n\n<p><strong>Java</strong></p>\n\n<p>The first place to look would be Stanford's <a href=\"http://nlp.stanford.edu/software/index.shtml\">Natural Language Processing Group</a>. All of software that is distributed there is written in Java. All recent distributions require Oracle Java 6+ or OpenJDK 7+. Distribution packages include components for command-line invocation, jar files, a Java API, and source code.</p>\n\n<p>Another great option that you see in a lot of machine learning environments here (general option), is <a href=\"http://www.cs.waikato.ac.nz/ml/weka/\">Weka</a>. Weka is a collection of machine learning algorithms for data mining tasks. The algorithms can either be applied directly to a dataset or called from your own Java code. Weka contains tools for data pre-processing, classification, regression, clustering, association rules, and visualization. It is also well-suited for developing new machine learning schemes.</p>\n", "title": "Java or Python for Natural Language Processing", "tags": ["java", "python", "nlp"], "link": "http://stackoverflow.com/questions/22904025/java-or-python-for-natural-language-processing/22904195#22904195", "question_id": 22904025, "answer_id": 22904195}, {"body": "<p>Java vs Python for NLP is very much a preference or necessity. Depending on the company/projects you'll need to use one or the other and often there isn't much of a choice unless you're heading a project.</p>\n\n<p>Other than <strong><code>NLTK</code></strong> (www.nltk.org), there are actually other libraries for text processing in <strong><code>python</code></strong>:</p>\n\n<ul>\n<li><strong>TextBlob</strong>: <a href=\"http://textblob.readthedocs.org/en/dev/\">http://textblob.readthedocs.org/en/dev/</a></li>\n<li><strong>Gensim</strong>: <a href=\"http://radimrehurek.com/gensim/\">http://radimrehurek.com/gensim/</a></li>\n<li><strong>Pattern</strong>: <a href=\"http://www.clips.ua.ac.be/pattern\">http://www.clips.ua.ac.be/pattern</a></li>\n<li><strong>Orange</strong>: <a href=\"http://orange.biolab.si/features/\">http://orange.biolab.si/features/</a></li>\n<li><strong>Pineapple</strong>: <a href=\"https://github.com/proycon/pynlpl\">https://github.com/proycon/pynlpl</a></li>\n</ul>\n\n<p>(for more, see <a href=\"https://pypi.python.org/pypi?%3Aaction=search&amp;term=natural+language+processing&amp;submit=search\">https://pypi.python.org/pypi?%3Aaction=search&amp;term=natural+language+processing&amp;submit=search</a>)</p>\n\n<p>For <strong><code>Java</code></strong>, there're tonnes of others but here's another list:</p>\n\n<ul>\n<li><strong>Freeling</strong>: <a href=\"http://nlp.lsi.upc.edu/freeling/\">http://nlp.lsi.upc.edu/freeling/</a></li>\n<li><strong>OpenNLP</strong>: <a href=\"http://opennlp.apache.org/\">http://opennlp.apache.org/</a></li>\n<li><strong>LingPipe</strong>: <a href=\"http://alias-i.com/lingpipe/\">http://alias-i.com/lingpipe/</a></li>\n</ul>\n\n<p>This is a nice comparison for basic string processing, see <a href=\"http://nltk.googlecode.com/svn/trunk/doc/howto/nlp-python.html\">http://nltk.googlecode.com/svn/trunk/doc/howto/nlp-python.html</a></p>\n\n<p>A useful comparison of GATE vs UIMA vs OpenNLP, see <a href=\"https://www.assembla.com/spaces/extraction-of-cost-data/wiki/Gate-vs-UIMA-vs-OpenNLP?version=4\">https://www.assembla.com/spaces/extraction-of-cost-data/wiki/Gate-vs-UIMA-vs-OpenNLP?version=4</a></p>\n\n<p>If you're uncertain, which is the language to go for NLP, personally i say, \"any language that will give you the desired analysis/output\", see <a href=\"http://stackoverflow.com/questions/18558665/which-language-or-tools-to-learn-for-natural-language-processing?rq=1\">Which language or tools to learn for natural language processing?</a></p>\n\n<p>Here's a pretty recent list of NLP tools (2013): <a href=\"http://web.archive.org/web/20130703190201/http://yauhenklimovich.wordpress.com/2013/05/20/tools-nlp\">http://web.archive.org/web/20130703190201/http://yauhenklimovich.wordpress.com/2013/05/20/tools-nlp</a></p>\n\n<hr>\n\n<p>Other than language processing tools, you would very much need <strong><code>machine learning</code></strong> tools to incorporate into <code>NLP</code> pipelines. </p>\n\n<p>There's a whole range in <code>Python</code> and <code>Java</code>, and once again it's up to preference and whether the libraries are user-friendly enough:</p>\n\n<p>Machine Learning libraries in python:</p>\n\n<ul>\n<li><strong>Sklearn</strong> (Scikit-learn): <a href=\"http://scikit-learn.org/stable/\">http://scikit-learn.org/stable/</a></li>\n<li><strong>Milk</strong>: <a href=\"http://luispedro.org/software/milk\">http://luispedro.org/software/milk</a></li>\n<li><strong>Scipy</strong>: <a href=\"http://www.scipy.org/\">http://www.scipy.org/</a></li>\n<li><strong>Theano</strong>: <a href=\"http://deeplearning.net/software/theano/\">http://deeplearning.net/software/theano/</a></li>\n<li><strong>PyML</strong>: <a href=\"http://pyml.sourceforge.net/\">http://pyml.sourceforge.net/</a></li>\n<li><strong>pyBrain</strong>: <a href=\"http://pybrain.org/\">http://pybrain.org/</a></li>\n<li><strong>Graphlab Create</strong> (Commerical tool but free academic license for 1 year): <a href=\"https://dato.com/products/create/\">https://dato.com/products/create/</a></li>\n</ul>\n\n<p>(for more, see <a href=\"https://pypi.python.org/pypi?%3Aaction=search&amp;term=machine+learning&amp;submit=search\">https://pypi.python.org/pypi?%3Aaction=search&amp;term=machine+learning&amp;submit=search</a>)</p>\n\n<ul>\n<li><strong>Weka</strong>: <a href=\"http://www.cs.waikato.ac.nz/ml/weka/index.html\">http://www.cs.waikato.ac.nz/ml/weka/index.html</a></li>\n<li><strong>Mallet</strong>: <a href=\"http://mallet.cs.umass.edu/\">http://mallet.cs.umass.edu/</a></li>\n<li><strong>Mahout</strong>: <a href=\"https://mahout.apache.org/\">https://mahout.apache.org/</a></li>\n</ul>\n\n<hr>\n\n<p>Other Stackoverflow questions that also asked for NLP/ML tools:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/2233435/machine-learning-and-natural-language-processing\">Machine Learning and Natural Language Processing</a></li>\n<li><a href=\"http://stackoverflow.com/questions/212219/what-are-good-starting-points-for-someone-interested-in-natural-language-process\">What are good starting points for someone interested in natural language processing?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/4115526/natural-language-processing\">Natural language processing</a></li>\n<li><a href=\"http://stackoverflow.com/questions/11116390/natural-language-processing-in-java-nlp\">Natural Language Processing in Java (NLP)</a></li>\n<li><a href=\"http://stackoverflow.com/questions/870460/is-there-a-good-natural-language-processing-library\">Is there a good natural language processing library</a></li>\n<li><a href=\"http://stackoverflow.com/questions/5833030/simple-natural-language-processing-startup-for-java\">Simple Natural Language Processing Startup for Java</a></li>\n<li><a href=\"http://stackoverflow.com/questions/11849134/what-libraries-offer-basic-or-advanced-nlp-methods\">What libraries offer basic or advanced NLP methods?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/3886913/latest-good-languages-and-books-for-natural-language-processing-the-basics?rq=1\">Latest good languages and books for Natural Language Processing, the basics</a></li>\n<li>(For NER) <a href=\"http://stackoverflow.com/questions/7455188/entity-extraction-recognition-with-free-tools-while-feeding-lucene-index\">Entity Extraction/Recognition with free tools while feeding Lucene Index</a></li>\n<li>(With PHP) <a href=\"http://stackoverflow.com/questions/4457830/nlp-programming-tools-using-php\">NLP programming tools using PHP?</a></li>\n<li>(With Ruby) <a href=\"http://stackoverflow.com/questions/3776361/ruby-nlp-libraries\">Ruby NLP Libraries</a></li>\n</ul>\n", "title": "Java or Python for Natural Language Processing", "tags": ["java", "python", "nlp"], "link": "http://stackoverflow.com/questions/22904025/java-or-python-for-natural-language-processing/22905260#22905260", "question_id": 22904025, "answer_id": 22905260}], "creation_date": 1396847327, "score": 50, "link": "http://stackoverflow.com/questions/22904025/java-or-python-for-natural-language-processing", "question_id": 22904025}, {"body": "<p>I'd like to duplicate a Java 8 stream so that I can deal with it twice. I can <code>collect</code> as a list and get new streams from that;</p>\n\n<pre><code>// doSomething() returns a stream\nList&lt;A&gt; thing = doSomething().collect(toList());\nthing.stream()... // do stuff\nthing.stream()... // do other stuff\n</code></pre>\n\n<p>but I kind of think there should be a more efficient/elegant way. <strong>Is there a way to copy the stream without turning it into a collection?</strong></p>\n\n<p>I'm actually working with a stream of <code>Either</code>s, so want to process the left projection one way before moving onto the right projection and dealing with that another way. Kind of like this (which, so far, I'm forced to use the <code>toList</code> trick with).</p>\n\n<pre><code>List&lt;Either&lt;Pair&lt;A, Throwable&gt;, A&gt;&gt; results = doSomething().collect(toList());\n\nStream&lt;Pair&lt;A, Throwable&gt;&gt; failures = results.stream().flatMap(either -&gt; either.left());\nfailures.forEach(failure -&gt; ... );\n\nStream&lt;A&gt; successes = results.stream().flatMap(either -&gt; either.right());\nsuccesses.forEach(success -&gt; ... );\n</code></pre>\n", "tags": ["java", "lambda", "java-8", "java-stream"], "title": "Copy a stream to avoid &quot;stream has already been operated upon or closed&quot; (java 8)", "answers": [{"body": "<p>You could create a stream of runnables (for example):</p>\n\n<pre><code>results.stream()\n    .flatMap(either -&gt; Stream.&lt;Runnable&gt; of(\n            () -&gt; failure(either.left()),\n            () -&gt; success(either.right())))\n    .forEach(Runnable::run);\n</code></pre>\n\n<p>Where <code>failure</code> and <code>success</code> are the operations to apply. This will however create quite a few temporary objects and may not be more efficient than starting from a collection and streaming/iterating it twice.</p>\n", "title": "Copy a stream to avoid &quot;stream has already been operated upon or closed&quot; (java 8)", "tags": ["java", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/23860533/copy-a-stream-to-avoid-stream-has-already-been-operated-upon-or-closed-java-8/23860761#23860761", "question_id": 23860533, "answer_id": 23860761}, {"body": "<p>I think your assumption about efficiency is kind of backwards.  You get this huge efficiency payback if you're only going to use the data once, because you don't have to store it, and streams give you powerful \"loop fusion\" optimizations that let you flow the whole data efficiently through the pipeline.  </p>\n\n<p>If you want to re-use the same data, then by definition you either have to generate it twice (deterministically) or store it.  If it already happens to be in a collection, great; then iterating it twice is cheap.  </p>\n\n<p>We did experiment in the design with \"forked streams\".  What we found was that supporting this had real costs; it burdened the common case (use once) at the expense of the uncommon case.  The big problem was dealing with \"what happens when the two pipelines don't consume data at the same rate.\"  Now you're back to buffering anyway.  This was a feature that clearly didn't carry its weight.  </p>\n\n<p>If you want to operate on the same data repeatedly, either store it, or structure your operations as Consumers and do the following:</p>\n\n<pre><code>stream()...stuff....forEach(e -&gt; { consumerA(e); consumerB(e); });\n</code></pre>\n\n<p>You might also look into the RxJava library, as its processing model lends itself better to this kind of \"stream forking\".</p>\n", "title": "Copy a stream to avoid &quot;stream has already been operated upon or closed&quot; (java 8)", "tags": ["java", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/23860533/copy-a-stream-to-avoid-stream-has-already-been-operated-upon-or-closed-java-8/23861084#23861084", "question_id": 23860533, "answer_id": 23861084}, {"body": "<p>We've implemented a <code>duplicate()</code> method for streams in <a href=\"https://github.com/jOOQ/jOOL\" rel=\"nofollow\">jOO\u03bb</a>, an Open Source library that we created to improve integration testing for <a href=\"http://www.jooq.org\" rel=\"nofollow\">jOOQ</a>. Essentially, you can just write:</p>\n\n<pre><code>Tuple2&lt;Seq&lt;A&gt;, Seq&lt;A&gt;&gt; duplicates = Seq.seq(doSomething()).duplicate();\n</code></pre>\n\n<p>Internally, there is a <code>LinkedList</code> buffer storing all values that have been consumed from one stream but not from the other. That's probably as efficient as it gets if your two streams are consumed about at the same rate, <em>and if you can live with the lack of thread-safety</em>.</p>\n\n<p>Here's how the algorithm works:</p>\n\n<pre><code>static &lt;T&gt; Tuple2&lt;Seq&lt;T&gt;, Seq&lt;T&gt;&gt; duplicate(Stream&lt;T&gt; stream) {\n    final LinkedList&lt;T&gt; gap = new LinkedList&lt;&gt;();\n    final Iterator&lt;T&gt; it = stream.iterator();\n\n    @SuppressWarnings(\"unchecked\")\n    final Iterator&lt;T&gt;[] ahead = new Iterator[] { null };\n\n    class Duplicate implements Iterator&lt;T&gt; {\n        @Override\n        public boolean hasNext() {\n            if (ahead[0] == null || ahead[0] == this)\n                return it.hasNext();\n\n            return !gap.isEmpty();\n        }\n\n        @Override\n        public T next() {\n            if (ahead[0] == null)\n                ahead[0] = this;\n\n            if (ahead[0] == this) {\n                T value = it.next();\n                gap.offer(value);\n                return value;\n            }\n\n            return gap.poll();\n        }\n    }\n\n    return tuple(seq(new Duplicate()), seq(new Duplicate()));\n}\n</code></pre>\n\n<p><a href=\"https://github.com/jOOQ/jOOL/blob/master/src/main/java/org/jooq/lambda/Seq.java\" rel=\"nofollow\">More source code here</a></p>\n\n<p><code>Tuple2</code> is probably like your <code>Pair</code> type, whereas <code>Seq</code> is <code>Stream</code> with some enhancements.</p>\n", "title": "Copy a stream to avoid &quot;stream has already been operated upon or closed&quot; (java 8)", "tags": ["java", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/23860533/copy-a-stream-to-avoid-stream-has-already-been-operated-upon-or-closed-java-8/25961951#25961951", "question_id": 23860533, "answer_id": 25961951}, {"body": "<p>Use <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/function/Supplier.html\">java.util.function.Supplier</a>.</p>\n\n<p>From <a href=\"http://winterbe.com/posts/2014/07/31/java8-stream-tutorial-examples/\">http://winterbe.com/posts/2014/07/31/java8-stream-tutorial-examples/</a>:</p>\n\n<blockquote>\n  <p><strong>Reusing Streams</strong></p>\n  \n  <p>Java 8 streams cannot be reused. As soon as you call any terminal operation the stream is closed:</p>\n\n<pre><code>Stream&lt;String&gt; stream =\n\nStream.of(\"d2\", \"a2\", \"b1\", \"b3\", \"c\")\n\n.filter(s -&gt; s.startsWith(\"a\"));\n\nstream.anyMatch(s -&gt; true);    // ok\n\nstream.noneMatch(s -&gt; true);   // exception\n</code></pre>\n  \n  <p>Calling noneMatch after anyMatch on the same stream results in the following exception:</p>\n\n<pre><code>java.lang.IllegalStateException: stream has already been operated upon or closed\n\nat \n\njava.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:229)\n\nat \n\njava.util.stream.ReferencePipeline.noneMatch(ReferencePipeline.java:459)\n\nat com.winterbe.java8.Streams5.test7(Streams5.java:38)\n\nat com.winterbe.java8.Streams5.main(Streams5.java:28)\n</code></pre>\n  \n  <p>To overcome this limitation we have to to create a new stream chain for every terminal operation we want to execute, e.g. we could create a stream supplier to construct a new stream with all intermediate operations already set up:</p>\n\n<pre><code>Supplier&lt;Stream&lt;String&gt;&gt; streamSupplier =\n\n    () -&gt; Stream.of(\"d2\", \"a2\", \"b1\", \"b3\", \"c\")\n\n            .filter(s -&gt; s.startsWith(\"a\"));\n\nstreamSupplier.get().anyMatch(s -&gt; true);   // ok\n\nstreamSupplier.get().noneMatch(s -&gt; true);  // ok\n</code></pre>\n  \n  <p>Each call to <code>get()</code> constructs a new stream on which we are save to call the desired terminal operation.</p>\n</blockquote>\n", "title": "Copy a stream to avoid &quot;stream has already been operated upon or closed&quot; (java 8)", "tags": ["java", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/23860533/copy-a-stream-to-avoid-stream-has-already-been-operated-upon-or-closed-java-8/30922045#30922045", "question_id": 23860533, "answer_id": 30922045}, {"body": "<p>Another way to handle the elements multiple times is to use <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#peek-java.util.function.Consumer-\" rel=\"nofollow\">Stream.peek(Consumer)</a>:</p>\n\n<pre><code>doSomething().stream()\n.peek(either -&gt; handleFailure(either.left()))\n.foreach(either -&gt; handleSuccess(either.right()));\n</code></pre>\n", "title": "Copy a stream to avoid &quot;stream has already been operated upon or closed&quot; (java 8)", "tags": ["java", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/23860533/copy-a-stream-to-avoid-stream-has-already-been-operated-upon-or-closed-java-8/30967569#30967569", "question_id": 23860533, "answer_id": 30967569}, {"body": "<p><a href=\"https://github.com/aol/cyclops-react\" rel=\"nofollow\">cyclops-react</a>, a library I contribute to, has a static method that will allow you duplicate a Stream (and returns a  jOO\u03bb Tuple of Streams).</p>\n\n<pre><code>    Stream&lt;Integer&gt; stream = Stream.of(1,2,3);\n    Tuple2&lt;Stream&lt;Integer&gt;,Stream&lt;Integer&gt;&gt; streams =  StreamUtils.duplicate(stream);\n</code></pre>\n\n<p>See comments, there is performance penalty that will be incurred when using duplicate on an existing Stream. A more performant alternative would be to use Streamable :-</p>\n\n<p>There is also a (lazy) Streamable class that can be constructed from a Stream, Iterable or Array and replayed multiple times.</p>\n\n<pre><code>    Streamable&lt;Integer&gt; streamable = Streamable.of(1,2,3);\n    streamable.stream().forEach(System.out::println);\n    streamable.stream().forEach(System.out::println);\n</code></pre>\n\n<p>AsStreamable.synchronizedFromStream(stream) - can be used to create a Streamable that will lazily populate it's backing collection, in a way such that can be shared across threads. Streamable.fromStream(stream) will not incur any synchronization overhead. </p>\n", "title": "Copy a stream to avoid &quot;stream has already been operated upon or closed&quot; (java 8)", "tags": ["java", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/23860533/copy-a-stream-to-avoid-stream-has-already-been-operated-upon-or-closed-java-8/32619261#32619261", "question_id": 23860533, "answer_id": 32619261}, {"body": "<p>For this particular problem you can use also partitioning. Something like</p>\n\n<pre><code>     // Partition Eighters into left and right\n     List&lt;Either&lt;Pair&lt;A, Throwable&gt;, A&gt;&gt; results = doSomething();\n     Map&lt;Boolean, Object&gt; passingFailing = results.collect(Collectors.partitioningBy(s -&gt; s.isLeft()));\n     passingFailing.get(true) &lt;- here will be all passing (left values)\n     passingFailing.get(false) &lt;- here will be all failing (right values)\n</code></pre>\n", "title": "Copy a stream to avoid &quot;stream has already been operated upon or closed&quot; (java 8)", "tags": ["java", "lambda", "java-8", "java-stream"], "link": "http://stackoverflow.com/questions/23860533/copy-a-stream-to-avoid-stream-has-already-been-operated-upon-or-closed-java-8/36349678#36349678", "question_id": 23860533, "answer_id": 36349678}], "creation_date": 1401056700, "score": 50, "link": "http://stackoverflow.com/questions/23860533/copy-a-stream-to-avoid-stream-has-already-been-operated-upon-or-closed-java-8", "question_id": 23860533}], "quota_max": 300, "page_size": 100, "quota_remaining": 102, "page": 1}